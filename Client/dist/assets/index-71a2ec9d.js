var ls=Object.defineProperty;var cs=(_e,et,rt)=>et in _e?ls(_e,et,{enumerable:!0,configurable:!0,writable:!0,value:rt}):_e[et]=rt;var Un=(_e,et,rt)=>(cs(_e,typeof et!="symbol"?et+"":et,rt),rt);function _mergeNamespaces(_e,et){for(var rt=0;rt<et.length;rt++){const nt=et[rt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const ot in nt)if(ot!=="default"&&!(ot in _e)){const it=Object.getOwnPropertyDescriptor(nt,ot);it&&Object.defineProperty(_e,ot,it.get?it:{enumerable:!0,get:()=>nt[ot]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const ot of document.querySelectorAll('link[rel="modulepreload"]'))nt(ot);new MutationObserver(ot=>{for(const it of ot)if(it.type==="childList")for(const st of it.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&nt(st)}).observe(document,{childList:!0,subtree:!0});function rt(ot){const it={};return ot.integrity&&(it.integrity=ot.integrity),ot.referrerPolicy&&(it.referrerPolicy=ot.referrerPolicy),ot.crossOrigin==="use-credentials"?it.credentials="include":ot.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(ot){if(ot.ep)return;ot.ep=!0;const it=rt(ot);fetch(ot.href,it)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var et=_e.default;if(typeof et=="function"){var rt=function nt(){if(this instanceof nt){var ot=[null];ot.push.apply(ot,arguments);var it=Function.bind.apply(et,ot);return new it}return et.apply(this,arguments)};rt.prototype=et.prototype}else rt={};return Object.defineProperty(rt,"__esModule",{value:!0}),Object.keys(_e).forEach(function(nt){var ot=Object.getOwnPropertyDescriptor(_e,nt);Object.defineProperty(rt,nt,ot.get?ot:{enumerable:!0,get:function(){return _e[nt]}})}),rt}var jsxRuntimeExports={},jsxRuntime$1={get exports(){return jsxRuntimeExports},set exports(_e){jsxRuntimeExports=_e}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(_e){reactExports=_e}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$6=Symbol.for("react.element"),n$7=Symbol.for("react.portal"),p$8=Symbol.for("react.fragment"),q$8=Symbol.for("react.strict_mode"),r$7=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$6=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$5=Symbol.iterator;function A$4(_e){return _e===null||typeof _e!="object"?null:(_e=z$5&&_e[z$5]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$4={};function E$3(_e,et,rt){this.props=_e,this.context=et,this.refs=D$4,this.updater=rt||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(_e,et){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,et,"setState")};E$3.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$4(_e,et,rt){this.props=_e,this.context=et,this.refs=D$4,this.updater=rt||B$3}var H$4=G$4.prototype=new F$3;H$4.constructor=G$4;C$2(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_e,et,rt){var nt,ot={},it=null,st=null;if(et!=null)for(nt in et.ref!==void 0&&(st=et.ref),et.key!==void 0&&(it=""+et.key),et)J$2.call(et,nt)&&!L$2.hasOwnProperty(nt)&&(ot[nt]=et[nt]);var at=arguments.length-2;if(at===1)ot.children=rt;else if(1<at){for(var lt=Array(at),ct=0;ct<at;ct++)lt[ct]=arguments[ct+2];ot.children=lt}if(_e&&_e.defaultProps)for(nt in at=_e.defaultProps,at)ot[nt]===void 0&&(ot[nt]=at[nt]);return{$$typeof:l$6,type:_e,key:it,ref:st,props:ot,_owner:K$3.current}}function N$4(_e,et){return{$$typeof:l$6,type:_e.type,key:et,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$4(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$6}function escape$1(_e){var et={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(rt){return et[rt]})}var P$3=/\/+/g;function Q$4(_e,et){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):et.toString(36)}function R$3(_e,et,rt,nt,ot){var it=typeof _e;(it==="undefined"||it==="boolean")&&(_e=null);var st=!1;if(_e===null)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(_e.$$typeof){case l$6:case n$7:st=!0}}if(st)return st=_e,ot=ot(st),_e=nt===""?"."+Q$4(st,0):nt,I$3(ot)?(rt="",_e!=null&&(rt=_e.replace(P$3,"$&/")+"/"),R$3(ot,et,rt,"",function(ct){return ct})):ot!=null&&(O$4(ot)&&(ot=N$4(ot,rt+(!ot.key||st&&st.key===ot.key?"":(""+ot.key).replace(P$3,"$&/")+"/")+_e)),et.push(ot)),1;if(st=0,nt=nt===""?".":nt+":",I$3(_e))for(var at=0;at<_e.length;at++){it=_e[at];var lt=nt+Q$4(it,at);st+=R$3(it,et,rt,lt,ot)}else if(lt=A$4(_e),typeof lt=="function")for(_e=lt.call(_e),at=0;!(it=_e.next()).done;)it=it.value,lt=nt+Q$4(it,at++),st+=R$3(it,et,rt,lt,ot);else if(it==="object")throw et=String(_e),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return st}function S$4(_e,et,rt){if(_e==null)return _e;var nt=[],ot=0;return R$3(_e,nt,"","",function(it){return et.call(rt,it,ot++)}),nt}function T$2(_e){if(_e._status===-1){var et=_e._result;et=et(),et.then(function(rt){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=rt)},function(rt){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=rt)}),_e._status===-1&&(_e._status=0,_e._result=et)}if(_e._status===1)return _e._result.default;throw _e._result}var U$4={current:null},V$3={transition:null},W$4={ReactCurrentDispatcher:U$4,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min.Children={map:S$4,forEach:function(_e,et,rt){S$4(_e,function(){et.apply(this,arguments)},rt)},count:function(_e){var et=0;return S$4(_e,function(){et++}),et},toArray:function(_e){return S$4(_e,function(et){return et})||[]},only:function(_e){if(!O$4(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$3;react_production_min.Fragment=p$8;react_production_min.Profiler=r$7;react_production_min.PureComponent=G$4;react_production_min.StrictMode=q$8;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$4;react_production_min.cloneElement=function(_e,et,rt){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var nt=C$2({},_e.props),ot=_e.key,it=_e.ref,st=_e._owner;if(et!=null){if(et.ref!==void 0&&(it=et.ref,st=K$3.current),et.key!==void 0&&(ot=""+et.key),_e.type&&_e.type.defaultProps)var at=_e.type.defaultProps;for(lt in et)J$2.call(et,lt)&&!L$2.hasOwnProperty(lt)&&(nt[lt]=et[lt]===void 0&&at!==void 0?at[lt]:et[lt])}var lt=arguments.length-2;if(lt===1)nt.children=rt;else if(1<lt){at=Array(lt);for(var ct=0;ct<lt;ct++)at[ct]=arguments[ct+2];nt.children=at}return{$$typeof:l$6,type:_e.type,key:ot,ref:it,props:nt,_owner:st}};react_production_min.createContext=function(_e){return _e={$$typeof:u$4,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$6,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$3;react_production_min.createFactory=function(_e){var et=M$3.bind(null,_e);return et.type=_e,et};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$6,render:_e}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(_e){return{$$typeof:y$3,_payload:{_status:-1,_result:_e},_init:T$2}};react_production_min.memo=function(_e,et){return{$$typeof:x$3,type:_e,compare:et===void 0?null:et}};react_production_min.startTransition=function(_e){var et=V$3.transition;V$3.transition={};try{_e()}finally{V$3.transition=et}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_e,et){return U$4.current.useCallback(_e,et)};react_production_min.useContext=function(_e){return U$4.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$4.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,et){return U$4.current.useEffect(_e,et)};react_production_min.useId=function(){return U$4.current.useId()};react_production_min.useImperativeHandle=function(_e,et,rt){return U$4.current.useImperativeHandle(_e,et,rt)};react_production_min.useInsertionEffect=function(_e,et){return U$4.current.useInsertionEffect(_e,et)};react_production_min.useLayoutEffect=function(_e,et){return U$4.current.useLayoutEffect(_e,et)};react_production_min.useMemo=function(_e,et){return U$4.current.useMemo(_e,et)};react_production_min.useReducer=function(_e,et,rt){return U$4.current.useReducer(_e,et,rt)};react_production_min.useRef=function(_e){return U$4.current.useRef(_e)};react_production_min.useState=function(_e){return U$4.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,et,rt){return U$4.current.useSyncExternalStore(_e,et,rt)};react_production_min.useTransition=function(){return U$4.current.useTransition()};react_production_min.version="18.2.0";(function(_e){_e.exports=react_production_min})(react);const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$6=Symbol.for("react.element"),l$5=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$6=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$7={key:!0,ref:!0,__self:!0,__source:!0};function q$7(_e,et,rt){var nt,ot={},it=null,st=null;rt!==void 0&&(it=""+rt),et.key!==void 0&&(it=""+et.key),et.ref!==void 0&&(st=et.ref);for(nt in et)m$5.call(et,nt)&&!p$7.hasOwnProperty(nt)&&(ot[nt]=et[nt]);if(_e&&_e.defaultProps)for(nt in et=_e.defaultProps,et)ot[nt]===void 0&&(ot[nt]=et[nt]);return{$$typeof:k$6,type:_e,key:it,ref:st,props:ot,_owner:n$6.current}}reactJsxRuntime_production_min.Fragment=l$5;reactJsxRuntime_production_min.jsx=q$7;reactJsxRuntime_production_min.jsxs=q$7;(function(_e){_e.exports=reactJsxRuntime_production_min})(jsxRuntime$1);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs,jsxRuntime=Object.freeze(Object.defineProperty({__proto__:null,Fragment,jsx,jsxs},Symbol.toStringTag,{value:"Module"}));var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(_e){reactDomExports=_e}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(_e){schedulerExports=_e}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function et($t,Ft){var jt=$t.length;$t.push(Ft);e:for(;0<jt;){var zt=jt-1>>>1,Yt=$t[zt];if(0<ot(Yt,Ft))$t[zt]=Ft,$t[jt]=Yt,jt=zt;else break e}}function rt($t){return $t.length===0?null:$t[0]}function nt($t){if($t.length===0)return null;var Ft=$t[0],jt=$t.pop();if(jt!==Ft){$t[0]=jt;e:for(var zt=0,Yt=$t.length,Kt=Yt>>>1;zt<Kt;){var er=2*(zt+1)-1,ir=$t[er],rr=er+1,lr=$t[rr];if(0>ot(ir,jt))rr<Yt&&0>ot(lr,ir)?($t[zt]=lr,$t[rr]=jt,zt=rr):($t[zt]=ir,$t[er]=jt,zt=er);else if(rr<Yt&&0>ot(lr,jt))$t[zt]=lr,$t[rr]=jt,zt=rr;else break e}}return Ft}function ot($t,Ft){var jt=$t.sortIndex-Ft.sortIndex;return jt!==0?jt:$t.id-Ft.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var st=Date,at=st.now();_e.unstable_now=function(){return st.now()-at}}var lt=[],ct=[],pt=1,ut=null,ht=3,ft=!1,gt=!1,vt=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,Et=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bt($t){for(var Ft=rt(ct);Ft!==null;){if(Ft.callback===null)nt(ct);else if(Ft.startTime<=$t)nt(ct),Ft.sortIndex=Ft.expirationTime,et(lt,Ft);else break;Ft=rt(ct)}}function Ct($t){if(vt=!1,bt($t),!gt)if(rt(lt)!==null)gt=!0,Mt(Tt);else{var Ft=rt(ct);Ft!==null&&Nt(Ct,Ft.startTime-$t)}}function Tt($t,Ft){gt=!1,vt&&(vt=!1,mt(It),It=-1),ft=!0;var jt=ht;try{for(bt(Ft),ut=rt(lt);ut!==null&&(!(ut.expirationTime>Ft)||$t&&!Ot());){var zt=ut.callback;if(typeof zt=="function"){ut.callback=null,ht=ut.priorityLevel;var Yt=zt(ut.expirationTime<=Ft);Ft=_e.unstable_now(),typeof Yt=="function"?ut.callback=Yt:ut===rt(lt)&&nt(lt),bt(Ft)}else nt(lt);ut=rt(lt)}if(ut!==null)var Kt=!0;else{var er=rt(ct);er!==null&&Nt(Ct,er.startTime-Ft),Kt=!1}return Kt}finally{ut=null,ht=jt,ft=!1}}var wt=!1,Rt=null,It=-1,St=5,Pt=-1;function Ot(){return!(_e.unstable_now()-Pt<St)}function Ut(){if(Rt!==null){var $t=_e.unstable_now();Pt=$t;var Ft=!0;try{Ft=Rt(!0,$t)}finally{Ft?Bt():(wt=!1,Rt=null)}}else wt=!1}var Bt;if(typeof Et=="function")Bt=function(){Et(Ut)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,At=xt.port2;xt.port1.onmessage=Ut,Bt=function(){At.postMessage(null)}}else Bt=function(){yt(Ut,0)};function Mt($t){Rt=$t,wt||(wt=!0,Bt())}function Nt($t,Ft){It=yt(function(){$t(_e.unstable_now())},Ft)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function($t){$t.callback=null},_e.unstable_continueExecution=function(){gt||ft||(gt=!0,Mt(Tt))},_e.unstable_forceFrameRate=function($t){0>$t||125<$t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<$t?Math.floor(1e3/$t):5},_e.unstable_getCurrentPriorityLevel=function(){return ht},_e.unstable_getFirstCallbackNode=function(){return rt(lt)},_e.unstable_next=function($t){switch(ht){case 1:case 2:case 3:var Ft=3;break;default:Ft=ht}var jt=ht;ht=Ft;try{return $t()}finally{ht=jt}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function($t,Ft){switch($t){case 1:case 2:case 3:case 4:case 5:break;default:$t=3}var jt=ht;ht=$t;try{return Ft()}finally{ht=jt}},_e.unstable_scheduleCallback=function($t,Ft,jt){var zt=_e.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?zt+jt:zt):jt=zt,$t){case 1:var Yt=-1;break;case 2:Yt=250;break;case 5:Yt=1073741823;break;case 4:Yt=1e4;break;default:Yt=5e3}return Yt=jt+Yt,$t={id:pt++,callback:Ft,priorityLevel:$t,startTime:jt,expirationTime:Yt,sortIndex:-1},jt>zt?($t.sortIndex=jt,et(ct,$t),rt(lt)===null&&$t===rt(ct)&&(vt?(mt(It),It=-1):vt=!0,Nt(Ct,jt-zt))):($t.sortIndex=Yt,et(lt,$t),gt||ft||(gt=!0,Mt(Tt))),$t},_e.unstable_shouldYield=Ot,_e.unstable_wrapCallback=function($t){var Ft=ht;return function(){var jt=ht;ht=Ft;try{return $t.apply(this,arguments)}finally{ht=jt}}}})(scheduler_production_min);(function(_e){_e.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$6(_e){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+_e,rt=1;rt<arguments.length;rt++)et+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified React error #"+_e+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(_e,et){ha$1(_e,et),ha$1(_e+"Capture",et)}function ha$1(_e,et){for(ea$1[_e]=et,_e=0;_e<et.length;_e++)da$1.add(et[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma$1={};function oa$1(_e){return ja$1.call(ma$1,_e)?!0:ja$1.call(la,_e)?!1:ka$1.test(_e)?ma$1[_e]=!0:(la[_e]=!0,!1)}function pa$1(_e,et,rt,nt){if(rt!==null&&rt.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return nt?!1:rt!==null?!rt.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa$1(_e,et,rt,nt){if(et===null||typeof et>"u"||pa$1(_e,et,rt,nt))return!0;if(nt)return!1;if(rt!==null)switch(rt.type){case 3:return!et;case 4:return et===!1;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}function v$5(_e,et,rt,nt,ot,it,st){this.acceptsBooleans=et===2||et===3||et===4,this.attributeName=nt,this.attributeNamespace=ot,this.mustUseProperty=rt,this.propertyName=_e,this.type=et,this.sanitizeURL=it,this.removeEmptyString=st}var z$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$4[_e]=new v$5(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var et=_e[0];z$4[et]=new v$5(et,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$4[_e]=new v$5(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$4[_e]=new v$5(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$4[_e]=new v$5(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$4[_e]=new v$5(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$4[_e]=new v$5(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$4[_e]=new v$5(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$4[_e]=new v$5(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var et=_e.replace(ra$1,sa$1);z$4[et]=new v$5(et,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var et=_e.replace(ra$1,sa$1);z$4[et]=new v$5(et,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var et=_e.replace(ra$1,sa$1);z$4[et]=new v$5(et,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$4[_e]=new v$5(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$4.xlinkHref=new v$5("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$4[_e]=new v$5(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta$1(_e,et,rt,nt){var ot=z$4.hasOwnProperty(et)?z$4[et]:null;(ot!==null?ot.type!==0:nt||!(2<et.length)||et[0]!=="o"&&et[0]!=="O"||et[1]!=="n"&&et[1]!=="N")&&(qa$1(et,rt,ot,nt)&&(rt=null),nt||ot===null?oa$1(et)&&(rt===null?_e.removeAttribute(et):_e.setAttribute(et,""+rt)):ot.mustUseProperty?_e[ot.propertyName]=rt===null?ot.type===3?!1:"":rt:(et=ot.attributeName,nt=ot.attributeNamespace,rt===null?_e.removeAttribute(et):(ot=ot.type,rt=ot===3||ot===4&&rt===!0?"":""+rt,nt?_e.setAttributeNS(nt,et,rt):_e.setAttribute(et,rt))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$3=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(rt){var et=rt.stack.trim().match(/\n( *(at )?)/);La=et&&et[1]||""}return`
`+La+_e}var Na$1=!1;function Oa$1(_e,et){if(!_e||Na$1)return"";Na$1=!0;var rt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(et)if(et=function(){throw Error()},Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(ct){var nt=ct}Reflect.construct(_e,[],et)}else{try{et.call()}catch(ct){nt=ct}_e.call(et.prototype)}else{try{throw Error()}catch(ct){nt=ct}_e()}}catch(ct){if(ct&&nt&&typeof ct.stack=="string"){for(var ot=ct.stack.split(`
`),it=nt.stack.split(`
`),st=ot.length-1,at=it.length-1;1<=st&&0<=at&&ot[st]!==it[at];)at--;for(;1<=st&&0<=at;st--,at--)if(ot[st]!==it[at]){if(st!==1||at!==1)do if(st--,at--,0>at||ot[st]!==it[at]){var lt=`
`+ot[st].replace(" at new "," at ");return _e.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",_e.displayName)),lt}while(1<=st&&0<=at);break}}}finally{Na$1=!1,Error.prepareStackTrace=rt}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa$1(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa$1(_e.type,!1),_e;case 11:return _e=Oa$1(_e.type.render,!1),_e;case 1:return _e=Oa$1(_e.type,!0),_e;default:return""}}function Qa$1(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca$1:return(_e.displayName||"Context")+".Consumer";case Ba$1:return(_e._context.displayName||"Context")+".Provider";case Da$1:var et=_e.render;return _e=_e.displayName,_e||(_e=et.displayName||et.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga$1:return et=_e.displayName||null,et!==null?et:Qa$1(_e.type)||"Memo";case Ha$1:et=_e._payload,_e=_e._init;try{return Qa$1(_e(et))}catch{}}return null}function Ra$1(_e){var et=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(et.displayName||"Context")+".Consumer";case 10:return(et._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=et.render,_e=_e.displayName||_e.name||"",et.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return et;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(et);case 8:return et===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et}return null}function Sa$1(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta$1(_e){var et=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(et==="checkbox"||et==="radio")}function Ua$1(_e){var et=Ta$1(_e)?"checked":"value",rt=Object.getOwnPropertyDescriptor(_e.constructor.prototype,et),nt=""+_e[et];if(!_e.hasOwnProperty(et)&&typeof rt<"u"&&typeof rt.get=="function"&&typeof rt.set=="function"){var ot=rt.get,it=rt.set;return Object.defineProperty(_e,et,{configurable:!0,get:function(){return ot.call(this)},set:function(st){nt=""+st,it.call(this,st)}}),Object.defineProperty(_e,et,{enumerable:rt.enumerable}),{getValue:function(){return nt},setValue:function(st){nt=""+st},stopTracking:function(){_e._valueTracker=null,delete _e[et]}}}}function Va$1(_e){_e._valueTracker||(_e._valueTracker=Ua$1(_e))}function Wa$1(_e){if(!_e)return!1;var et=_e._valueTracker;if(!et)return!0;var rt=et.getValue(),nt="";return _e&&(nt=Ta$1(_e)?_e.checked?"true":"false":_e.value),_e=nt,_e!==rt?(et.setValue(_e),!0):!1}function Xa$1(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya$1(_e,et){var rt=et.checked;return A$3({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rt??_e._wrapperState.initialChecked})}function Za$1(_e,et){var rt=et.defaultValue==null?"":et.defaultValue,nt=et.checked!=null?et.checked:et.defaultChecked;rt=Sa$1(et.value!=null?et.value:rt),_e._wrapperState={initialChecked:nt,initialValue:rt,controlled:et.type==="checkbox"||et.type==="radio"?et.checked!=null:et.value!=null}}function ab$1(_e,et){et=et.checked,et!=null&&ta$1(_e,"checked",et,!1)}function bb$1(_e,et){ab$1(_e,et);var rt=Sa$1(et.value),nt=et.type;if(rt!=null)nt==="number"?(rt===0&&_e.value===""||_e.value!=rt)&&(_e.value=""+rt):_e.value!==""+rt&&(_e.value=""+rt);else if(nt==="submit"||nt==="reset"){_e.removeAttribute("value");return}et.hasOwnProperty("value")?cb$1(_e,et.type,rt):et.hasOwnProperty("defaultValue")&&cb$1(_e,et.type,Sa$1(et.defaultValue)),et.checked==null&&et.defaultChecked!=null&&(_e.defaultChecked=!!et.defaultChecked)}function db$1(_e,et,rt){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var nt=et.type;if(!(nt!=="submit"&&nt!=="reset"||et.value!==void 0&&et.value!==null))return;et=""+_e._wrapperState.initialValue,rt||et===_e.value||(_e.value=et),_e.defaultValue=et}rt=_e.name,rt!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,rt!==""&&(_e.name=rt)}function cb$1(_e,et,rt){(et!=="number"||Xa$1(_e.ownerDocument)!==_e)&&(rt==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+rt&&(_e.defaultValue=""+rt))}var eb$1=Array.isArray;function fb$1(_e,et,rt,nt){if(_e=_e.options,et){et={};for(var ot=0;ot<rt.length;ot++)et["$"+rt[ot]]=!0;for(rt=0;rt<_e.length;rt++)ot=et.hasOwnProperty("$"+_e[rt].value),_e[rt].selected!==ot&&(_e[rt].selected=ot),ot&&nt&&(_e[rt].defaultSelected=!0)}else{for(rt=""+Sa$1(rt),et=null,ot=0;ot<_e.length;ot++){if(_e[ot].value===rt){_e[ot].selected=!0,nt&&(_e[ot].defaultSelected=!0);return}et!==null||_e[ot].disabled||(et=_e[ot])}et!==null&&(et.selected=!0)}}function gb$1(_e,et){if(et.dangerouslySetInnerHTML!=null)throw Error(p$6(91));return A$3({},et,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb$1(_e,et){var rt=et.value;if(rt==null){if(rt=et.children,et=et.defaultValue,rt!=null){if(et!=null)throw Error(p$6(92));if(eb$1(rt)){if(1<rt.length)throw Error(p$6(93));rt=rt[0]}et=rt}et==null&&(et=""),rt=et}_e._wrapperState={initialValue:Sa$1(rt)}}function ib$1(_e,et){var rt=Sa$1(et.value),nt=Sa$1(et.defaultValue);rt!=null&&(rt=""+rt,rt!==_e.value&&(_e.value=rt),et.defaultValue==null&&_e.defaultValue!==rt&&(_e.defaultValue=rt)),nt!=null&&(_e.defaultValue=""+nt)}function jb$1(_e){var et=_e.textContent;et===_e._wrapperState.initialValue&&et!==""&&et!==null&&(_e.value=et)}function kb$1(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(_e,et){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb$1(et):_e==="http://www.w3.org/2000/svg"&&et==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb$1,nb$1=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(et,rt,nt,ot){MSApp.execUnsafeLocalFunction(function(){return _e(et,rt,nt,ot)})}:_e}(function(_e,et){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=et;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=mb$1.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;et.firstChild;)_e.appendChild(et.firstChild)}});function ob$1(_e,et){if(et){var rt=_e.firstChild;if(rt&&rt===_e.lastChild&&rt.nodeType===3){rt.nodeValue=et;return}}_e.textContent=et}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(_e){qb$1.forEach(function(et){et=et+_e.charAt(0).toUpperCase()+_e.substring(1),pb$1[et]=pb$1[_e]})});function rb$1(_e,et,rt){return et==null||typeof et=="boolean"||et===""?"":rt||typeof et!="number"||et===0||pb$1.hasOwnProperty(_e)&&pb$1[_e]?(""+et).trim():et+"px"}function sb$1(_e,et){_e=_e.style;for(var rt in et)if(et.hasOwnProperty(rt)){var nt=rt.indexOf("--")===0,ot=rb$1(rt,et[rt],nt);rt==="float"&&(rt="cssFloat"),nt?_e.setProperty(rt,ot):_e[rt]=ot}}var tb$1=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(_e,et){if(et){if(tb$1[_e]&&(et.children!=null||et.dangerouslySetInnerHTML!=null))throw Error(p$6(137,_e));if(et.dangerouslySetInnerHTML!=null){if(et.children!=null)throw Error(p$6(60));if(typeof et.dangerouslySetInnerHTML!="object"||!("__html"in et.dangerouslySetInnerHTML))throw Error(p$6(61))}if(et.style!=null&&typeof et.style!="object")throw Error(p$6(62))}}function vb$1(_e,et){if(_e.indexOf("-")===-1)return typeof et.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(_e){if(_e=Cb$1(_e)){if(typeof yb$1!="function")throw Error(p$6(280));var et=_e.stateNode;et&&(et=Db$1(et),yb$1(_e.stateNode,_e.type,et))}}function Eb$1(_e){zb$1?Ab$1?Ab$1.push(_e):Ab$1=[_e]:zb$1=_e}function Fb(){if(zb$1){var _e=zb$1,et=Ab$1;if(Ab$1=zb$1=null,Bb$1(_e),et)for(_e=0;_e<et.length;_e++)Bb$1(et[_e])}}function Gb$1(_e,et){return _e(et)}function Hb$1(){}var Ib$1=!1;function Jb$1(_e,et,rt){if(Ib$1)return _e(et,rt);Ib$1=!0;try{return Gb$1(_e,et,rt)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb())}}function Kb$1(_e,et){var rt=_e.stateNode;if(rt===null)return null;var nt=Db$1(rt);if(nt===null)return null;rt=nt[et];e:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(_e=_e.type,nt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!nt;break e;default:_e=!1}if(_e)return null;if(rt&&typeof rt!="function")throw Error(p$6(231,et,typeof rt));return rt}var Lb$1=!1;if(ia)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(_e,et,rt,nt,ot,it,st,at,lt){var ct=Array.prototype.slice.call(arguments,3);try{et.apply(rt,ct)}catch(pt){this.onError(pt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(_e){Ob$1=!0,Pb$1=_e}};function Tb$1(_e,et,rt,nt,ot,it,st,at,lt){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(_e,et,rt,nt,ot,it,st,at,lt){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var ct=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$6(198));Qb$1||(Qb$1=!0,Rb$1=ct)}}function Vb$1(_e){var et=_e,rt=_e;if(_e.alternate)for(;et.return;)et=et.return;else{_e=et;do et=_e,et.flags&4098&&(rt=et.return),_e=et.return;while(_e)}return et.tag===3?rt:null}function Wb$1(_e){if(_e.tag===13){var et=_e.memoizedState;if(et===null&&(_e=_e.alternate,_e!==null&&(et=_e.memoizedState)),et!==null)return et.dehydrated}return null}function Xb$1(_e){if(Vb$1(_e)!==_e)throw Error(p$6(188))}function Yb$1(_e){var et=_e.alternate;if(!et){if(et=Vb$1(_e),et===null)throw Error(p$6(188));return et!==_e?null:_e}for(var rt=_e,nt=et;;){var ot=rt.return;if(ot===null)break;var it=ot.alternate;if(it===null){if(nt=ot.return,nt!==null){rt=nt;continue}break}if(ot.child===it.child){for(it=ot.child;it;){if(it===rt)return Xb$1(ot),_e;if(it===nt)return Xb$1(ot),et;it=it.sibling}throw Error(p$6(188))}if(rt.return!==nt.return)rt=ot,nt=it;else{for(var st=!1,at=ot.child;at;){if(at===rt){st=!0,rt=ot,nt=it;break}if(at===nt){st=!0,nt=ot,rt=it;break}at=at.sibling}if(!st){for(at=it.child;at;){if(at===rt){st=!0,rt=it,nt=ot;break}if(at===nt){st=!0,nt=it,rt=ot;break}at=at.sibling}if(!st)throw Error(p$6(189))}}if(rt.alternate!==nt)throw Error(p$6(190))}if(rt.tag!==3)throw Error(p$6(188));return rt.stateNode.current===rt?_e:et}function Zb$1(_e){return _e=Yb$1(_e),_e!==null?$b$1(_e):null}function $b$1(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var et=$b$1(_e);if(et!==null)return et;_e=_e.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(_e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(_e){return _e>>>=0,_e===0?32:31-(pc$1(_e)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc$1(_e,et){var rt=_e.pendingLanes;if(rt===0)return 0;var nt=0,ot=_e.suspendedLanes,it=_e.pingedLanes,st=rt&268435455;if(st!==0){var at=st&~ot;at!==0?nt=tc$1(at):(it&=st,it!==0&&(nt=tc$1(it)))}else st=rt&~ot,st!==0?nt=tc$1(st):it!==0&&(nt=tc$1(it));if(nt===0)return 0;if(et!==0&&et!==nt&&!(et&ot)&&(ot=nt&-nt,it=et&-et,ot>=it||ot===16&&(it&4194240)!==0))return et;if(nt&4&&(nt|=rt&16),et=_e.entangledLanes,et!==0)for(_e=_e.entanglements,et&=nt;0<et;)rt=31-oc$1(et),ot=1<<rt,nt|=_e[rt],et&=~ot;return nt}function vc$1(_e,et){switch(_e){case 1:case 2:case 4:return et+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(_e,et){for(var rt=_e.suspendedLanes,nt=_e.pingedLanes,ot=_e.expirationTimes,it=_e.pendingLanes;0<it;){var st=31-oc$1(it),at=1<<st,lt=ot[st];lt===-1?(!(at&rt)||at&nt)&&(ot[st]=vc$1(at,et)):lt<=et&&(_e.expiredLanes|=at),it&=~at}}function xc$1(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc$1(){var _e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),_e}function zc$1(_e){for(var et=[],rt=0;31>rt;rt++)et.push(_e);return et}function Ac$1(_e,et,rt){_e.pendingLanes|=et,et!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,et=31-oc$1(et),_e[et]=rt}function Bc$1(_e,et){var rt=_e.pendingLanes&~et;_e.pendingLanes=et,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=et,_e.mutableReadLanes&=et,_e.entangledLanes&=et,et=_e.entanglements;var nt=_e.eventTimes;for(_e=_e.expirationTimes;0<rt;){var ot=31-oc$1(rt),it=1<<ot;et[ot]=0,nt[ot]=-1,_e[ot]=-1,rt&=~it}}function Cc$1(_e,et){var rt=_e.entangledLanes|=et;for(_e=_e.entanglements;rt;){var nt=31-oc$1(rt),ot=1<<nt;ot&et|_e[nt]&et&&(_e[nt]|=et),rt&=~ot}}var C$1=0;function Dc$1(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec$2,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(_e,et){switch(_e){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(et.pointerId)}}function Tc$2(_e,et,rt,nt,ot,it){return _e===null||_e.nativeEvent!==it?(_e={blockedOn:et,domEventName:rt,eventSystemFlags:nt,nativeEvent:it,targetContainers:[ot]},et!==null&&(et=Cb$1(et),et!==null&&Fc$1(et)),_e):(_e.eventSystemFlags|=nt,et=_e.targetContainers,ot!==null&&et.indexOf(ot)===-1&&et.push(ot),_e)}function Uc$1(_e,et,rt,nt,ot){switch(et){case"focusin":return Lc$1=Tc$2(Lc$1,_e,et,rt,nt,ot),!0;case"dragenter":return Mc$1=Tc$2(Mc$1,_e,et,rt,nt,ot),!0;case"mouseover":return Nc$1=Tc$2(Nc$1,_e,et,rt,nt,ot),!0;case"pointerover":var it=ot.pointerId;return Oc$1.set(it,Tc$2(Oc$1.get(it)||null,_e,et,rt,nt,ot)),!0;case"gotpointercapture":return it=ot.pointerId,Pc$1.set(it,Tc$2(Pc$1.get(it)||null,_e,et,rt,nt,ot)),!0}return!1}function Vc$1(_e){var et=Wc$1(_e.target);if(et!==null){var rt=Vb$1(et);if(rt!==null){if(et=rt.tag,et===13){if(et=Wb$1(rt),et!==null){_e.blockedOn=et,Ic$1(_e.priority,function(){Gc$1(rt)});return}}else if(et===3&&rt.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=rt.tag===3?rt.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc$1(_e){if(_e.blockedOn!==null)return!1;for(var et=_e.targetContainers;0<et.length;){var rt=Yc$1(_e.domEventName,_e.eventSystemFlags,et[0],_e.nativeEvent);if(rt===null){rt=_e.nativeEvent;var nt=new rt.constructor(rt.type,rt);wb$1=nt,rt.target.dispatchEvent(nt),wb$1=null}else return et=Cb$1(rt),et!==null&&Fc$1(et),_e.blockedOn=rt,!1;et.shift()}return!0}function Zc$1(_e,et,rt){Xc$1(_e)&&rt.delete(et)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(_e,et){_e.blockedOn===et&&(_e.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(_e){function et(ot){return ad$1(ot,_e)}if(0<Kc$1.length){ad$1(Kc$1[0],_e);for(var rt=1;rt<Kc$1.length;rt++){var nt=Kc$1[rt];nt.blockedOn===_e&&(nt.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,_e),Mc$1!==null&&ad$1(Mc$1,_e),Nc$1!==null&&ad$1(Nc$1,_e),Oc$1.forEach(et),Pc$1.forEach(et),rt=0;rt<Qc$1.length;rt++)nt=Qc$1[rt],nt.blockedOn===_e&&(nt.blockedOn=null);for(;0<Qc$1.length&&(rt=Qc$1[0],rt.blockedOn===null);)Vc$1(rt),rt.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(_e,et,rt,nt){var ot=C$1,it=cd$1.transition;cd$1.transition=null;try{C$1=1,fd$1(_e,et,rt,nt)}finally{C$1=ot,cd$1.transition=it}}function gd$1(_e,et,rt,nt){var ot=C$1,it=cd$1.transition;cd$1.transition=null;try{C$1=4,fd$1(_e,et,rt,nt)}finally{C$1=ot,cd$1.transition=it}}function fd$1(_e,et,rt,nt){if(dd$1){var ot=Yc$1(_e,et,rt,nt);if(ot===null)hd$1(_e,et,nt,id$1,rt),Sc$1(_e,nt);else if(Uc$1(ot,_e,et,rt,nt))nt.stopPropagation();else if(Sc$1(_e,nt),et&4&&-1<Rc$1.indexOf(_e)){for(;ot!==null;){var it=Cb$1(ot);if(it!==null&&Ec$2(it),it=Yc$1(_e,et,rt,nt),it===null&&hd$1(_e,et,nt,id$1,rt),it===ot)break;ot=it}ot!==null&&nt.stopPropagation()}else hd$1(_e,et,nt,null,rt)}}var id$1=null;function Yc$1(_e,et,rt,nt){if(id$1=null,_e=xb$1(nt),_e=Wc$1(_e),_e!==null)if(et=Vb$1(_e),et===null)_e=null;else if(rt=et.tag,rt===13){if(_e=Wb$1(et),_e!==null)return _e;_e=null}else if(rt===3){if(et.stateNode.current.memoizedState.isDehydrated)return et.tag===3?et.stateNode.containerInfo:null;_e=null}else et!==_e&&(_e=null);return id$1=_e,null}function jd$1(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var _e,et=ld$1,rt=et.length,nt,ot="value"in kd$1?kd$1.value:kd$1.textContent,it=ot.length;for(_e=0;_e<rt&&et[_e]===ot[_e];_e++);var st=rt-_e;for(nt=1;nt<=st&&et[rt-nt]===ot[it-nt];nt++);return md$1=ot.slice(_e,1<nt?1-nt:void 0)}function od$1(_e){var et=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&et===13&&(_e=13)):_e=et,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(_e){function et(rt,nt,ot,it,st){this._reactName=rt,this._targetInst=ot,this.type=nt,this.nativeEvent=it,this.target=st,this.currentTarget=null;for(var at in _e)_e.hasOwnProperty(at)&&(rt=_e[at],this[at]=rt?rt(it):it[at]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$3(et.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rt=this.nativeEvent;rt&&(rt.preventDefault?rt.preventDefault():typeof rt.returnValue!="unknown"&&(rt.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var rt=this.nativeEvent;rt&&(rt.stopPropagation?rt.stopPropagation():typeof rt.cancelBubble!="unknown"&&(rt.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),et}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$3({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$3({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd$1&&(yd$1&&_e.type==="mousemove"?(wd$1=_e.screenX-yd$1.screenX,xd$1=_e.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=_e),wd$1)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$3({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$3({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$3({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$3({},sd$1,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$3({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var et=this.nativeEvent;return et.getModifierState?et.getModifierState(_e):(_e=Od$1[_e])?!!et[_e]:!1}function zd$1(){return Pd}var Qd$1=A$3({},ud$1,{key:function(_e){if(_e.key){var et=Md$1[_e.key]||_e.key;if(et!=="Unidentified")return et}return _e.type==="keypress"?(_e=od$1(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd$1[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(_e){return _e.type==="keypress"?od$1(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od$1(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$3({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$3({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$3({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$3({},Ad$1,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee=String.fromCharCode(32),fe=!1;function ge(_e,et){switch(_e){case"keyup":return $d$1.indexOf(et.keyCode)!==-1;case"keydown":return et.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,et){switch(_e){case"compositionend":return he(et);case"keypress":return et.which!==32?null:(fe=!0,ee);case"textInput":return _e=et.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,et){if(ie)return _e==="compositionend"||!ae$1&&ge(_e,et)?(_e=nd$1(),md$1=ld$1=kd$1=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return de$1&&et.locale!=="ko"?null:et.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et==="input"?!!le[_e.type]:et==="textarea"}function ne(_e,et,rt,nt){Eb$1(nt),et=oe(et,"onChange"),0<et.length&&(rt=new td$1("onChange","change",null,rt,nt),_e.push({event:rt,listeners:et}))}var pe=null,qe=null;function re(_e){se(_e,0)}function te(_e){var et=ue(_e);if(Wa$1(et))return _e}function ve(_e,et){if(_e==="change")return et}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var et=[];ne(et,qe,_e,xb$1(_e)),Jb$1(re,et)}}function Ce(_e,et,rt){_e==="focusin"?(Ae(),pe=et,qe=rt,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,et){if(_e==="click")return te(et)}function Fe(_e,et){if(_e==="input"||_e==="change")return te(et)}function Ge(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,et){if(He(_e,et))return!0;if(typeof _e!="object"||_e===null||typeof et!="object"||et===null)return!1;var rt=Object.keys(_e),nt=Object.keys(et);if(rt.length!==nt.length)return!1;for(nt=0;nt<rt.length;nt++){var ot=rt[nt];if(!ja$1.call(et,ot)||!He(_e[ot],et[ot]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,et){var rt=Je(_e);_e=0;for(var nt;rt;){if(rt.nodeType===3){if(nt=_e+rt.textContent.length,_e<=et&&nt>=et)return{node:rt,offset:et-_e};_e=nt}e:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break e}rt=rt.parentNode}rt=void 0}rt=Je(rt)}}function Le(_e,et){return _e&&et?_e===et?!0:_e&&_e.nodeType===3?!1:et&&et.nodeType===3?Le(_e,et.parentNode):"contains"in _e?_e.contains(et):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(et)&16):!1:!1}function Me(){for(var _e=window,et=Xa$1();et instanceof _e.HTMLIFrameElement;){try{var rt=typeof et.contentWindow.location.href=="string"}catch{rt=!1}if(rt)_e=et.contentWindow;else break;et=Xa$1(_e.document)}return et}function Ne(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et&&(et==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||et==="textarea"||_e.contentEditable==="true")}function Oe$1(_e){var et=Me(),rt=_e.focusedElem,nt=_e.selectionRange;if(et!==rt&&rt&&rt.ownerDocument&&Le(rt.ownerDocument.documentElement,rt)){if(nt!==null&&Ne(rt)){if(et=nt.start,_e=nt.end,_e===void 0&&(_e=et),"selectionStart"in rt)rt.selectionStart=et,rt.selectionEnd=Math.min(_e,rt.value.length);else if(_e=(et=rt.ownerDocument||document)&&et.defaultView||window,_e.getSelection){_e=_e.getSelection();var ot=rt.textContent.length,it=Math.min(nt.start,ot);nt=nt.end===void 0?it:Math.min(nt.end,ot),!_e.extend&&it>nt&&(ot=nt,nt=it,it=ot),ot=Ke(rt,it);var st=Ke(rt,nt);ot&&st&&(_e.rangeCount!==1||_e.anchorNode!==ot.node||_e.anchorOffset!==ot.offset||_e.focusNode!==st.node||_e.focusOffset!==st.offset)&&(et=et.createRange(),et.setStart(ot.node,ot.offset),_e.removeAllRanges(),it>nt?(_e.addRange(et),_e.extend(st.node,st.offset)):(et.setEnd(st.node,st.offset),_e.addRange(et)))}}for(et=[],_e=rt;_e=_e.parentNode;)_e.nodeType===1&&et.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<et.length;rt++)_e=et[rt],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,et,rt){var nt=rt.window===rt?rt.document:rt.nodeType===9?rt:rt.ownerDocument;Te||Qe==null||Qe!==Xa$1(nt)||(nt=Qe,"selectionStart"in nt&&Ne(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(et=new td$1("onSelect","select",null,et,rt),_e.push({event:et,listeners:nt}),et.target=Qe)))}function Ve(_e,et){var rt={};return rt[_e.toLowerCase()]=et.toLowerCase(),rt["Webkit"+_e]="webkit"+et,rt["Moz"+_e]="moz"+et,rt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var et=We[_e],rt;for(rt in et)if(et.hasOwnProperty(rt)&&rt in Ye)return Xe[_e]=et[rt];return _e}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,et){df.set(_e,et),fa$1(et,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,et,rt){var nt=_e.type||"unknown-event";_e.currentTarget=rt,Ub$1(nt,et,void 0,_e),_e.currentTarget=null}function se(_e,et){et=(et&4)!==0;for(var rt=0;rt<_e.length;rt++){var nt=_e[rt],ot=nt.event;nt=nt.listeners;e:{var it=void 0;if(et)for(var st=nt.length-1;0<=st;st--){var at=nt[st],lt=at.instance,ct=at.currentTarget;if(at=at.listener,lt!==it&&ot.isPropagationStopped())break e;nf(ot,at,ct),it=lt}else for(st=0;st<nt.length;st++){if(at=nt[st],lt=at.instance,ct=at.currentTarget,at=at.listener,lt!==it&&ot.isPropagationStopped())break e;nf(ot,at,ct),it=lt}}}if(Qb$1)throw _e=Rb$1,Qb$1=!1,Rb$1=null,_e}function D$3(_e,et){var rt=et[of];rt===void 0&&(rt=et[of]=new Set);var nt=_e+"__bubble";rt.has(nt)||(pf(et,_e,2,!1),rt.add(nt))}function qf(_e,et,rt){var nt=0;et&&(nt|=4),pf(rt,_e,nt,et)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da$1.forEach(function(rt){rt!=="selectionchange"&&(mf.has(rt)||qf(rt,!1,_e),qf(rt,!0,_e))});var et=_e.nodeType===9?_e:_e.ownerDocument;et===null||et[rf]||(et[rf]=!0,qf("selectionchange",!1,et))}}function pf(_e,et,rt,nt){switch(jd$1(et)){case 1:var ot=ed$1;break;case 4:ot=gd$1;break;default:ot=fd$1}rt=ot.bind(null,et,rt,_e),ot=void 0,!Lb$1||et!=="touchstart"&&et!=="touchmove"&&et!=="wheel"||(ot=!0),nt?ot!==void 0?_e.addEventListener(et,rt,{capture:!0,passive:ot}):_e.addEventListener(et,rt,!0):ot!==void 0?_e.addEventListener(et,rt,{passive:ot}):_e.addEventListener(et,rt,!1)}function hd$1(_e,et,rt,nt,ot){var it=nt;if(!(et&1)&&!(et&2)&&nt!==null)e:for(;;){if(nt===null)return;var st=nt.tag;if(st===3||st===4){var at=nt.stateNode.containerInfo;if(at===ot||at.nodeType===8&&at.parentNode===ot)break;if(st===4)for(st=nt.return;st!==null;){var lt=st.tag;if((lt===3||lt===4)&&(lt=st.stateNode.containerInfo,lt===ot||lt.nodeType===8&&lt.parentNode===ot))return;st=st.return}for(;at!==null;){if(st=Wc$1(at),st===null)return;if(lt=st.tag,lt===5||lt===6){nt=it=st;continue e}at=at.parentNode}}nt=nt.return}Jb$1(function(){var ct=it,pt=xb$1(rt),ut=[];e:{var ht=df.get(_e);if(ht!==void 0){var ft=td$1,gt=_e;switch(_e){case"keypress":if(od$1(rt)===0)break e;case"keydown":case"keyup":ft=Rd$1;break;case"focusin":gt="focus",ft=Fd$1;break;case"focusout":gt="blur",ft=Fd$1;break;case"beforeblur":case"afterblur":ft=Fd$1;break;case"click":if(rt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd$1;break;case $e$1:case af:case bf:ft=Hd$1;break;case cf:ft=Xd$1;break;case"scroll":ft=vd$1;break;case"wheel":ft=Zd$1;break;case"copy":case"cut":case"paste":ft=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Td$1}var vt=(et&4)!==0,yt=!vt&&_e==="scroll",mt=vt?ht!==null?ht+"Capture":null:ht;vt=[];for(var Et=ct,bt;Et!==null;){bt=Et;var Ct=bt.stateNode;if(bt.tag===5&&Ct!==null&&(bt=Ct,mt!==null&&(Ct=Kb$1(Et,mt),Ct!=null&&vt.push(tf(Et,Ct,bt)))),yt)break;Et=Et.return}0<vt.length&&(ht=new ft(ht,gt,null,rt,pt),ut.push({event:ht,listeners:vt}))}}if(!(et&7)){e:{if(ht=_e==="mouseover"||_e==="pointerover",ft=_e==="mouseout"||_e==="pointerout",ht&&rt!==wb$1&&(gt=rt.relatedTarget||rt.fromElement)&&(Wc$1(gt)||gt[uf]))break e;if((ft||ht)&&(ht=pt.window===pt?pt:(ht=pt.ownerDocument)?ht.defaultView||ht.parentWindow:window,ft?(gt=rt.relatedTarget||rt.toElement,ft=ct,gt=gt?Wc$1(gt):null,gt!==null&&(yt=Vb$1(gt),gt!==yt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ft=null,gt=ct),ft!==gt)){if(vt=Bd$1,Ct="onMouseLeave",mt="onMouseEnter",Et="mouse",(_e==="pointerout"||_e==="pointerover")&&(vt=Td$1,Ct="onPointerLeave",mt="onPointerEnter",Et="pointer"),yt=ft==null?ht:ue(ft),bt=gt==null?ht:ue(gt),ht=new vt(Ct,Et+"leave",ft,rt,pt),ht.target=yt,ht.relatedTarget=bt,Ct=null,Wc$1(pt)===ct&&(vt=new vt(mt,Et+"enter",gt,rt,pt),vt.target=bt,vt.relatedTarget=yt,Ct=vt),yt=Ct,ft&&gt)t:{for(vt=ft,mt=gt,Et=0,bt=vt;bt;bt=vf(bt))Et++;for(bt=0,Ct=mt;Ct;Ct=vf(Ct))bt++;for(;0<Et-bt;)vt=vf(vt),Et--;for(;0<bt-Et;)mt=vf(mt),bt--;for(;Et--;){if(vt===mt||mt!==null&&vt===mt.alternate)break t;vt=vf(vt),mt=vf(mt)}vt=null}else vt=null;ft!==null&&wf(ut,ht,ft,vt,!1),gt!==null&&yt!==null&&wf(ut,yt,gt,vt,!0)}}e:{if(ht=ct?ue(ct):window,ft=ht.nodeName&&ht.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ht.type==="file")var Tt=ve;else if(me(ht))if(we)Tt=Fe;else{Tt=De;var wt=Ce}else(ft=ht.nodeName)&&ft.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(Tt=Ee);if(Tt&&(Tt=Tt(_e,ct))){ne(ut,Tt,rt,pt);break e}wt&&wt(_e,ht,ct),_e==="focusout"&&(wt=ht._wrapperState)&&wt.controlled&&ht.type==="number"&&cb$1(ht,"number",ht.value)}switch(wt=ct?ue(ct):window,_e){case"focusin":(me(wt)||wt.contentEditable==="true")&&(Qe=wt,Re=ct,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,rt,pt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,rt,pt)}var Rt;if(ae$1)e:{switch(_e){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else ie?ge(_e,rt)&&(It="onCompositionEnd"):_e==="keydown"&&rt.keyCode===229&&(It="onCompositionStart");It&&(de$1&&rt.locale!=="ko"&&(ie||It!=="onCompositionStart"?It==="onCompositionEnd"&&ie&&(Rt=nd$1()):(kd$1=pt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),wt=oe(ct,It),0<wt.length&&(It=new Ld$1(It,_e,null,rt,pt),ut.push({event:It,listeners:wt}),Rt?It.data=Rt:(Rt=he(rt),Rt!==null&&(It.data=Rt)))),(Rt=ce$1?je(_e,rt):ke(_e,rt))&&(ct=oe(ct,"onBeforeInput"),0<ct.length&&(pt=new Ld$1("onBeforeInput","beforeinput",null,rt,pt),ut.push({event:pt,listeners:ct}),pt.data=Rt))}se(ut,et)})}function tf(_e,et,rt){return{instance:_e,listener:et,currentTarget:rt}}function oe(_e,et){for(var rt=et+"Capture",nt=[];_e!==null;){var ot=_e,it=ot.stateNode;ot.tag===5&&it!==null&&(ot=it,it=Kb$1(_e,rt),it!=null&&nt.unshift(tf(_e,it,ot)),it=Kb$1(_e,et),it!=null&&nt.push(tf(_e,it,ot))),_e=_e.return}return nt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,et,rt,nt,ot){for(var it=et._reactName,st=[];rt!==null&&rt!==nt;){var at=rt,lt=at.alternate,ct=at.stateNode;if(lt!==null&&lt===nt)break;at.tag===5&&ct!==null&&(at=ct,ot?(lt=Kb$1(rt,it),lt!=null&&st.unshift(tf(rt,lt,at))):ot||(lt=Kb$1(rt,it),lt!=null&&st.push(tf(rt,lt,at)))),rt=rt.return}st.length!==0&&_e.push({event:et,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,et,rt){if(et=zf(et),zf(_e)!==et&&rt)throw Error(p$6(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,et){return _e==="textarea"||_e==="noscript"||typeof et.children=="string"||typeof et.children=="number"||typeof et.dangerouslySetInnerHTML=="object"&&et.dangerouslySetInnerHTML!==null&&et.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,et){var rt=et,nt=0;do{var ot=rt.nextSibling;if(_e.removeChild(rt),ot&&ot.nodeType===8)if(rt=ot.data,rt==="/$"){if(nt===0){_e.removeChild(ot),bd$1(et);return}nt--}else rt!=="$"&&rt!=="$?"&&rt!=="$!"||nt++;rt=ot}while(rt);bd$1(et)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var et=_e.nodeType;if(et===1||et===3)break;if(et===8){if(et=_e.data,et==="$"||et==="$!"||et==="$?")break;if(et==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var et=0;_e;){if(_e.nodeType===8){var rt=_e.data;if(rt==="$"||rt==="$!"||rt==="$?"){if(et===0)return _e;et--}else rt==="/$"&&et++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$1(_e){var et=_e[Of];if(et)return et;for(var rt=_e.parentNode;rt;){if(et=rt[uf]||rt[Of]){if(rt=et.alternate,et.child!==null||rt!==null&&rt.child!==null)for(_e=Mf(_e);_e!==null;){if(rt=_e[Of])return rt;_e=Mf(_e)}return et}_e=rt,rt=_e.parentNode}return null}function Cb$1(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$6(33))}function Db$1(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$2(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$3(_e,et){Tf++,Sf[Tf]=_e.current,_e.current=et}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,et){var rt=_e.type.contextTypes;if(!rt)return Vf;var nt=_e.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===et)return nt.__reactInternalMemoizedMaskedChildContext;var ot={},it;for(it in rt)ot[it]=et[it];return nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=et,_e.__reactInternalMemoizedMaskedChildContext=ot),ot}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(_e,et,rt){if(H$3.current!==Vf)throw Error(p$6(168));G$3(H$3,et),G$3(Wf,rt)}function bg(_e,et,rt){var nt=_e.stateNode;if(et=et.childContextTypes,typeof nt.getChildContext!="function")return rt;nt=nt.getChildContext();for(var ot in nt)if(!(ot in et))throw Error(p$6(108,Ra$1(_e)||"Unknown",ot));return A$3({},rt,nt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$3(H$3,_e),G$3(Wf,Wf.current),!0}function dg(_e,et,rt){var nt=_e.stateNode;if(!nt)throw Error(p$6(169));rt?(_e=bg(_e,et,Xf),nt.__reactInternalMemoizedMergedChildContext=_e,E$2(Wf),E$2(H$3),G$3(H$3,_e)):E$2(Wf),G$3(Wf,rt)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,et=C$1;try{var rt=eg;for(C$1=1;_e<rt.length;_e++){var nt=rt[_e];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(ot){throw eg!==null&&(eg=eg.slice(_e+1)),ac$1(fc$1,jg),ot}finally{C$1=et,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,et){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=et}function ug(_e,et,rt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var nt=rg;_e=sg;var ot=32-oc$1(nt)-1;nt&=~(1<<ot),rt+=1;var it=32-oc$1(et)+ot;if(30<it){var st=ot-ot%5;it=(nt&(1<<st)-1).toString(32),nt>>=st,ot-=st,rg=1<<32-oc$1(et)+ot|rt<<ot|nt,sg=it+_e}else rg=1<<it|rt<<ot|nt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(_e,et){var rt=Bg(5,null,null,0);rt.elementType="DELETED",rt.stateNode=et,rt.return=_e,et=_e.deletions,et===null?(_e.deletions=[rt],_e.flags|=16):et.push(rt)}function Cg(_e,et){switch(_e.tag){case 5:var rt=_e.type;return et=et.nodeType!==1||rt.toLowerCase()!==et.nodeName.toLowerCase()?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=Lf(et.firstChild),!0):!1;case 6:return et=_e.pendingProps===""||et.nodeType!==3?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=null,!0):!1;case 13:return et=et.nodeType!==8?null:et,et!==null?(rt=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:et,treeContext:rt,retryLane:1073741824},rt=Bg(18,null,null,0),rt.stateNode=et,rt.return=_e,_e.child=rt,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$2){var et=yg;if(et){var rt=et;if(!Cg(_e,et)){if(Dg(_e))throw Error(p$6(418));et=Lf(rt.nextSibling);var nt=xg;et&&Cg(_e,et)?Ag(nt,rt):(_e.flags=_e.flags&-4097|2,I$2=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$6(418));_e.flags=_e.flags&-4097|2,I$2=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$2)return Fg(_e),I$2=!0,!1;var et;if((et=_e.tag!==3)&&!(et=_e.tag!==5)&&(et=_e.type,et=et!=="head"&&et!=="body"&&!Ef(_e.type,_e.memoizedProps)),et&&(et=yg)){if(Dg(_e))throw Hg(),Error(p$6(418));for(;et;)Ag(_e,et),et=Lf(et.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$6(317));e:{for(_e=_e.nextSibling,et=0;_e;){if(_e.nodeType===8){var rt=_e.data;if(rt==="/$"){if(et===0){yg=Lf(_e.nextSibling);break e}et--}else rt!=="$"&&rt!=="$!"&&rt!=="$?"||et++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_e,et){if(_e&&_e.defaultProps){et=A$3({},et),_e=_e.defaultProps;for(var rt in _e)et[rt]===void 0&&(et[rt]=_e[rt]);return et}return et}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_e){var et=Mg.current;E$2(Mg),_e._currentValue=et}function Sg(_e,et,rt){for(;_e!==null;){var nt=_e.alternate;if((_e.childLanes&et)!==et?(_e.childLanes|=et,nt!==null&&(nt.childLanes|=et)):nt!==null&&(nt.childLanes&et)!==et&&(nt.childLanes|=et),_e===rt)break;_e=_e.return}}function Tg(_e,et){Ng=_e,Pg=Og=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&et&&(Ug=!0),_e.firstContext=null)}function Vg(_e){var et=_e._currentValue;if(Pg!==_e)if(_e={context:_e,memoizedValue:et,next:null},Og===null){if(Ng===null)throw Error(p$6(308));Og=_e,Ng.dependencies={lanes:0,firstContext:_e}}else Og=Og.next=_e;return et}var Wg=null;function Xg(_e){Wg===null?Wg=[_e]:Wg.push(_e)}function Yg(_e,et,rt,nt){var ot=et.interleaved;return ot===null?(rt.next=rt,Xg(et)):(rt.next=ot.next,ot.next=rt),et.interleaved=rt,Zg(_e,nt)}function Zg(_e,et){_e.lanes|=et;var rt=_e.alternate;for(rt!==null&&(rt.lanes|=et),rt=_e,_e=_e.return;_e!==null;)_e.childLanes|=et,rt=_e.alternate,rt!==null&&(rt.childLanes|=et),rt=_e,_e=_e.return;return rt.tag===3?rt.stateNode:null}var $g=!1;function ah$1(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_e,et){_e=_e.updateQueue,et.updateQueue===_e&&(et.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function ch(_e,et){return{eventTime:_e,lane:et,tag:0,payload:null,callback:null,next:null}}function dh(_e,et,rt){var nt=_e.updateQueue;if(nt===null)return null;if(nt=nt.shared,K$2&2){var ot=nt.pending;return ot===null?et.next=et:(et.next=ot.next,ot.next=et),nt.pending=et,Zg(_e,rt)}return ot=nt.interleaved,ot===null?(et.next=et,Xg(nt)):(et.next=ot.next,ot.next=et),nt.interleaved=et,Zg(_e,rt)}function eh$1(_e,et,rt){if(et=et.updateQueue,et!==null&&(et=et.shared,(rt&4194240)!==0)){var nt=et.lanes;nt&=_e.pendingLanes,rt|=nt,et.lanes=rt,Cc$1(_e,rt)}}function fh(_e,et){var rt=_e.updateQueue,nt=_e.alternate;if(nt!==null&&(nt=nt.updateQueue,rt===nt)){var ot=null,it=null;if(rt=rt.firstBaseUpdate,rt!==null){do{var st={eventTime:rt.eventTime,lane:rt.lane,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null};it===null?ot=it=st:it=it.next=st,rt=rt.next}while(rt!==null);it===null?ot=it=et:it=it.next=et}else ot=it=et;rt={baseState:nt.baseState,firstBaseUpdate:ot,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},_e.updateQueue=rt;return}_e=rt.lastBaseUpdate,_e===null?rt.firstBaseUpdate=et:_e.next=et,rt.lastBaseUpdate=et}function gh(_e,et,rt,nt){var ot=_e.updateQueue;$g=!1;var it=ot.firstBaseUpdate,st=ot.lastBaseUpdate,at=ot.shared.pending;if(at!==null){ot.shared.pending=null;var lt=at,ct=lt.next;lt.next=null,st===null?it=ct:st.next=ct,st=lt;var pt=_e.alternate;pt!==null&&(pt=pt.updateQueue,at=pt.lastBaseUpdate,at!==st&&(at===null?pt.firstBaseUpdate=ct:at.next=ct,pt.lastBaseUpdate=lt))}if(it!==null){var ut=ot.baseState;st=0,pt=ct=lt=null,at=it;do{var ht=at.lane,ft=at.eventTime;if((nt&ht)===ht){pt!==null&&(pt=pt.next={eventTime:ft,lane:0,tag:at.tag,payload:at.payload,callback:at.callback,next:null});e:{var gt=_e,vt=at;switch(ht=et,ft=rt,vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){ut=gt.call(ft,ut,ht);break e}ut=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,ht=typeof gt=="function"?gt.call(ft,ut,ht):gt,ht==null)break e;ut=A$3({},ut,ht);break e;case 2:$g=!0}}at.callback!==null&&at.lane!==0&&(_e.flags|=64,ht=ot.effects,ht===null?ot.effects=[at]:ht.push(at))}else ft={eventTime:ft,lane:ht,tag:at.tag,payload:at.payload,callback:at.callback,next:null},pt===null?(ct=pt=ft,lt=ut):pt=pt.next=ft,st|=ht;if(at=at.next,at===null){if(at=ot.shared.pending,at===null)break;ht=at,at=ht.next,ht.next=null,ot.lastBaseUpdate=ht,ot.shared.pending=null}}while(1);if(pt===null&&(lt=ut),ot.baseState=lt,ot.firstBaseUpdate=ct,ot.lastBaseUpdate=pt,et=ot.shared.interleaved,et!==null){ot=et;do st|=ot.lane,ot=ot.next;while(ot!==et)}else it===null&&(ot.shared.lanes=0);hh$1|=st,_e.lanes=st,_e.memoizedState=ut}}function ih(_e,et,rt){if(_e=et.effects,et.effects=null,_e!==null)for(et=0;et<_e.length;et++){var nt=_e[et],ot=nt.callback;if(ot!==null){if(nt.callback=null,nt=rt,typeof ot!="function")throw Error(p$6(191,ot));ot.call(nt)}}}var jh=new aa$1.Component().refs;function kh(_e,et,rt,nt){et=_e.memoizedState,rt=rt(nt,et),rt=rt==null?et:A$3({},et,rt),_e.memoizedState=rt,_e.lanes===0&&(_e.updateQueue.baseState=rt)}var nh={isMounted:function(_e){return(_e=_e._reactInternals)?Vb$1(_e)===_e:!1},enqueueSetState:function(_e,et,rt){_e=_e._reactInternals;var nt=L$1(),ot=lh(_e),it=ch(nt,ot);it.payload=et,rt!=null&&(it.callback=rt),et=dh(_e,it,ot),et!==null&&(mh(et,_e,ot,nt),eh$1(et,_e,ot))},enqueueReplaceState:function(_e,et,rt){_e=_e._reactInternals;var nt=L$1(),ot=lh(_e),it=ch(nt,ot);it.tag=1,it.payload=et,rt!=null&&(it.callback=rt),et=dh(_e,it,ot),et!==null&&(mh(et,_e,ot,nt),eh$1(et,_e,ot))},enqueueForceUpdate:function(_e,et){_e=_e._reactInternals;var rt=L$1(),nt=lh(_e),ot=ch(rt,nt);ot.tag=2,et!=null&&(ot.callback=et),et=dh(_e,ot,nt),et!==null&&(mh(et,_e,nt,rt),eh$1(et,_e,nt))}};function oh(_e,et,rt,nt,ot,it,st){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(nt,it,st):et.prototype&&et.prototype.isPureReactComponent?!Ie(rt,nt)||!Ie(ot,it):!0}function ph(_e,et,rt){var nt=!1,ot=Vf,it=et.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(ot=Zf(et)?Xf:H$3.current,nt=et.contextTypes,it=(nt=nt!=null)?Yf(_e,ot):Vf),et=new et(rt,it),_e.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,et.updater=nh,_e.stateNode=et,et._reactInternals=_e,nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=ot,_e.__reactInternalMemoizedMaskedChildContext=it),et}function qh(_e,et,rt,nt){_e=et.state,typeof et.componentWillReceiveProps=="function"&&et.componentWillReceiveProps(rt,nt),typeof et.UNSAFE_componentWillReceiveProps=="function"&&et.UNSAFE_componentWillReceiveProps(rt,nt),et.state!==_e&&nh.enqueueReplaceState(et,et.state,null)}function rh(_e,et,rt,nt){var ot=_e.stateNode;ot.props=rt,ot.state=_e.memoizedState,ot.refs=jh,ah$1(_e);var it=et.contextType;typeof it=="object"&&it!==null?ot.context=Vg(it):(it=Zf(et)?Xf:H$3.current,ot.context=Yf(_e,it)),ot.state=_e.memoizedState,it=et.getDerivedStateFromProps,typeof it=="function"&&(kh(_e,et,it,rt),ot.state=_e.memoizedState),typeof et.getDerivedStateFromProps=="function"||typeof ot.getSnapshotBeforeUpdate=="function"||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(et=ot.state,typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount(),et!==ot.state&&nh.enqueueReplaceState(ot,ot.state,null),gh(_e,rt,ot,nt),ot.state=_e.memoizedState),typeof ot.componentDidMount=="function"&&(_e.flags|=4194308)}function sh$1(_e,et,rt){if(_e=rt.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(rt._owner){if(rt=rt._owner,rt){if(rt.tag!==1)throw Error(p$6(309));var nt=rt.stateNode}if(!nt)throw Error(p$6(147,_e));var ot=nt,it=""+_e;return et!==null&&et.ref!==null&&typeof et.ref=="function"&&et.ref._stringRef===it?et.ref:(et=function(st){var at=ot.refs;at===jh&&(at=ot.refs={}),st===null?delete at[it]:at[it]=st},et._stringRef=it,et)}if(typeof _e!="string")throw Error(p$6(284));if(!rt._owner)throw Error(p$6(290,_e))}return _e}function th$1(_e,et){throw _e=Object.prototype.toString.call(et),Error(p$6(31,_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e))}function uh(_e){var et=_e._init;return et(_e._payload)}function vh$1(_e){function et(mt,Et){if(_e){var bt=mt.deletions;bt===null?(mt.deletions=[Et],mt.flags|=16):bt.push(Et)}}function rt(mt,Et){if(!_e)return null;for(;Et!==null;)et(mt,Et),Et=Et.sibling;return null}function nt(mt,Et){for(mt=new Map;Et!==null;)Et.key!==null?mt.set(Et.key,Et):mt.set(Et.index,Et),Et=Et.sibling;return mt}function ot(mt,Et){return mt=wh(mt,Et),mt.index=0,mt.sibling=null,mt}function it(mt,Et,bt){return mt.index=bt,_e?(bt=mt.alternate,bt!==null?(bt=bt.index,bt<Et?(mt.flags|=2,Et):bt):(mt.flags|=2,Et)):(mt.flags|=1048576,Et)}function st(mt){return _e&&mt.alternate===null&&(mt.flags|=2),mt}function at(mt,Et,bt,Ct){return Et===null||Et.tag!==6?(Et=xh(bt,mt.mode,Ct),Et.return=mt,Et):(Et=ot(Et,bt),Et.return=mt,Et)}function lt(mt,Et,bt,Ct){var Tt=bt.type;return Tt===ya$1?pt(mt,Et,bt.props.children,Ct,bt.key):Et!==null&&(Et.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha$1&&uh(Tt)===Et.type)?(Ct=ot(Et,bt.props),Ct.ref=sh$1(mt,Et,bt),Ct.return=mt,Ct):(Ct=yh(bt.type,bt.key,bt.props,null,mt.mode,Ct),Ct.ref=sh$1(mt,Et,bt),Ct.return=mt,Ct)}function ct(mt,Et,bt,Ct){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==bt.containerInfo||Et.stateNode.implementation!==bt.implementation?(Et=zh(bt,mt.mode,Ct),Et.return=mt,Et):(Et=ot(Et,bt.children||[]),Et.return=mt,Et)}function pt(mt,Et,bt,Ct,Tt){return Et===null||Et.tag!==7?(Et=Ah(bt,mt.mode,Ct,Tt),Et.return=mt,Et):(Et=ot(Et,bt),Et.return=mt,Et)}function ut(mt,Et,bt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Et=xh(""+Et,mt.mode,bt),Et.return=mt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va$1:return bt=yh(Et.type,Et.key,Et.props,null,mt.mode,bt),bt.ref=sh$1(mt,null,Et),bt.return=mt,bt;case wa$1:return Et=zh(Et,mt.mode,bt),Et.return=mt,Et;case Ha$1:var Ct=Et._init;return ut(mt,Ct(Et._payload),bt)}if(eb$1(Et)||Ka(Et))return Et=Ah(Et,mt.mode,bt,null),Et.return=mt,Et;th$1(mt,Et)}return null}function ht(mt,Et,bt,Ct){var Tt=Et!==null?Et.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Tt!==null?null:at(mt,Et,""+bt,Ct);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va$1:return bt.key===Tt?lt(mt,Et,bt,Ct):null;case wa$1:return bt.key===Tt?ct(mt,Et,bt,Ct):null;case Ha$1:return Tt=bt._init,ht(mt,Et,Tt(bt._payload),Ct)}if(eb$1(bt)||Ka(bt))return Tt!==null?null:pt(mt,Et,bt,Ct,null);th$1(mt,bt)}return null}function ft(mt,Et,bt,Ct,Tt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return mt=mt.get(bt)||null,at(Et,mt,""+Ct,Tt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va$1:return mt=mt.get(Ct.key===null?bt:Ct.key)||null,lt(Et,mt,Ct,Tt);case wa$1:return mt=mt.get(Ct.key===null?bt:Ct.key)||null,ct(Et,mt,Ct,Tt);case Ha$1:var wt=Ct._init;return ft(mt,Et,bt,wt(Ct._payload),Tt)}if(eb$1(Ct)||Ka(Ct))return mt=mt.get(bt)||null,pt(Et,mt,Ct,Tt,null);th$1(Et,Ct)}return null}function gt(mt,Et,bt,Ct){for(var Tt=null,wt=null,Rt=Et,It=Et=0,St=null;Rt!==null&&It<bt.length;It++){Rt.index>It?(St=Rt,Rt=null):St=Rt.sibling;var Pt=ht(mt,Rt,bt[It],Ct);if(Pt===null){Rt===null&&(Rt=St);break}_e&&Rt&&Pt.alternate===null&&et(mt,Rt),Et=it(Pt,Et,It),wt===null?Tt=Pt:wt.sibling=Pt,wt=Pt,Rt=St}if(It===bt.length)return rt(mt,Rt),I$2&&tg(mt,It),Tt;if(Rt===null){for(;It<bt.length;It++)Rt=ut(mt,bt[It],Ct),Rt!==null&&(Et=it(Rt,Et,It),wt===null?Tt=Rt:wt.sibling=Rt,wt=Rt);return I$2&&tg(mt,It),Tt}for(Rt=nt(mt,Rt);It<bt.length;It++)St=ft(Rt,mt,It,bt[It],Ct),St!==null&&(_e&&St.alternate!==null&&Rt.delete(St.key===null?It:St.key),Et=it(St,Et,It),wt===null?Tt=St:wt.sibling=St,wt=St);return _e&&Rt.forEach(function(Ot){return et(mt,Ot)}),I$2&&tg(mt,It),Tt}function vt(mt,Et,bt,Ct){var Tt=Ka(bt);if(typeof Tt!="function")throw Error(p$6(150));if(bt=Tt.call(bt),bt==null)throw Error(p$6(151));for(var wt=Tt=null,Rt=Et,It=Et=0,St=null,Pt=bt.next();Rt!==null&&!Pt.done;It++,Pt=bt.next()){Rt.index>It?(St=Rt,Rt=null):St=Rt.sibling;var Ot=ht(mt,Rt,Pt.value,Ct);if(Ot===null){Rt===null&&(Rt=St);break}_e&&Rt&&Ot.alternate===null&&et(mt,Rt),Et=it(Ot,Et,It),wt===null?Tt=Ot:wt.sibling=Ot,wt=Ot,Rt=St}if(Pt.done)return rt(mt,Rt),I$2&&tg(mt,It),Tt;if(Rt===null){for(;!Pt.done;It++,Pt=bt.next())Pt=ut(mt,Pt.value,Ct),Pt!==null&&(Et=it(Pt,Et,It),wt===null?Tt=Pt:wt.sibling=Pt,wt=Pt);return I$2&&tg(mt,It),Tt}for(Rt=nt(mt,Rt);!Pt.done;It++,Pt=bt.next())Pt=ft(Rt,mt,It,Pt.value,Ct),Pt!==null&&(_e&&Pt.alternate!==null&&Rt.delete(Pt.key===null?It:Pt.key),Et=it(Pt,Et,It),wt===null?Tt=Pt:wt.sibling=Pt,wt=Pt);return _e&&Rt.forEach(function(Ut){return et(mt,Ut)}),I$2&&tg(mt,It),Tt}function yt(mt,Et,bt,Ct){if(typeof bt=="object"&&bt!==null&&bt.type===ya$1&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va$1:e:{for(var Tt=bt.key,wt=Et;wt!==null;){if(wt.key===Tt){if(Tt=bt.type,Tt===ya$1){if(wt.tag===7){rt(mt,wt.sibling),Et=ot(wt,bt.props.children),Et.return=mt,mt=Et;break e}}else if(wt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha$1&&uh(Tt)===wt.type){rt(mt,wt.sibling),Et=ot(wt,bt.props),Et.ref=sh$1(mt,wt,bt),Et.return=mt,mt=Et;break e}rt(mt,wt);break}else et(mt,wt);wt=wt.sibling}bt.type===ya$1?(Et=Ah(bt.props.children,mt.mode,Ct,bt.key),Et.return=mt,mt=Et):(Ct=yh(bt.type,bt.key,bt.props,null,mt.mode,Ct),Ct.ref=sh$1(mt,Et,bt),Ct.return=mt,mt=Ct)}return st(mt);case wa$1:e:{for(wt=bt.key;Et!==null;){if(Et.key===wt)if(Et.tag===4&&Et.stateNode.containerInfo===bt.containerInfo&&Et.stateNode.implementation===bt.implementation){rt(mt,Et.sibling),Et=ot(Et,bt.children||[]),Et.return=mt,mt=Et;break e}else{rt(mt,Et);break}else et(mt,Et);Et=Et.sibling}Et=zh(bt,mt.mode,Ct),Et.return=mt,mt=Et}return st(mt);case Ha$1:return wt=bt._init,yt(mt,Et,wt(bt._payload),Ct)}if(eb$1(bt))return gt(mt,Et,bt,Ct);if(Ka(bt))return vt(mt,Et,bt,Ct);th$1(mt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,Et!==null&&Et.tag===6?(rt(mt,Et.sibling),Et=ot(Et,bt),Et.return=mt,mt=Et):(rt(mt,Et),Et=xh(bt,mt.mode,Ct),Et.return=mt,mt=Et),st(mt)):rt(mt,Et)}return yt}var Bh=vh$1(!0),Ch=vh$1(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_e){if(_e===Dh)throw Error(p$6(174));return _e}function Ih$1(_e,et){switch(G$3(Gh,et),G$3(Fh,_e),G$3(Eh,Dh),_e=et.nodeType,_e){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:lb$1(null,"");break;default:_e=_e===8?et.parentNode:et,et=_e.namespaceURI||null,_e=_e.tagName,et=lb$1(et,_e)}E$2(Eh),G$3(Eh,et)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(_e){Hh(Gh.current);var et=Hh(Eh.current),rt=lb$1(et,_e.type);et!==rt&&(G$3(Fh,_e),G$3(Eh,rt))}function Lh(_e){Fh.current===_e&&(E$2(Eh),E$2(Fh))}var M$2=Uf(0);function Mh(_e){for(var et=_e;et!==null;){if(et.tag===13){var rt=et.memoizedState;if(rt!==null&&(rt=rt.dehydrated,rt===null||rt.data==="$?"||rt.data==="$!"))return et}else if(et.tag===19&&et.memoizedProps.revealOrder!==void 0){if(et.flags&128)return et}else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}var Nh=[];function Oh(){for(var _e=0;_e<Nh.length;_e++)Nh[_e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$3=null,O$3=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh$1=0;function Q$3(){throw Error(p$6(321))}function Wh(_e,et){if(et===null)return!1;for(var rt=0;rt<et.length&&rt<_e.length;rt++)if(!He(_e[rt],et[rt]))return!1;return!0}function Xh(_e,et,rt,nt,ot,it){if(Rh=it,N$3=et,et.memoizedState=null,et.updateQueue=null,et.lanes=0,Ph.current=_e===null||_e.memoizedState===null?Yh:Zh,_e=rt(nt,ot),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$6(301));it+=1,P$2=O$3=null,et.updateQueue=null,Ph.current=$h,_e=rt(nt,ot)}while(Th)}if(Ph.current=ai,et=O$3!==null&&O$3.next!==null,Rh=0,P$2=O$3=N$3=null,Sh=!1,et)throw Error(p$6(300));return _e}function bi(){var _e=Uh!==0;return Uh=0,_e}function ci(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$3.memoizedState=P$2=_e:P$2=P$2.next=_e,P$2}function di(){if(O$3===null){var _e=N$3.alternate;_e=_e!==null?_e.memoizedState:null}else _e=O$3.next;var et=P$2===null?N$3.memoizedState:P$2.next;if(et!==null)P$2=et,O$3=_e;else{if(_e===null)throw Error(p$6(310));O$3=_e,_e={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$2===null?N$3.memoizedState=P$2=_e:P$2=P$2.next=_e}return P$2}function ei(_e,et){return typeof et=="function"?et(_e):et}function fi(_e){var et=di(),rt=et.queue;if(rt===null)throw Error(p$6(311));rt.lastRenderedReducer=_e;var nt=O$3,ot=nt.baseQueue,it=rt.pending;if(it!==null){if(ot!==null){var st=ot.next;ot.next=it.next,it.next=st}nt.baseQueue=ot=it,rt.pending=null}if(ot!==null){it=ot.next,nt=nt.baseState;var at=st=null,lt=null,ct=it;do{var pt=ct.lane;if((Rh&pt)===pt)lt!==null&&(lt=lt.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),nt=ct.hasEagerState?ct.eagerState:_e(nt,ct.action);else{var ut={lane:pt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};lt===null?(at=lt=ut,st=nt):lt=lt.next=ut,N$3.lanes|=pt,hh$1|=pt}ct=ct.next}while(ct!==null&&ct!==it);lt===null?st=nt:lt.next=at,He(nt,et.memoizedState)||(Ug=!0),et.memoizedState=nt,et.baseState=st,et.baseQueue=lt,rt.lastRenderedState=nt}if(_e=rt.interleaved,_e!==null){ot=_e;do it=ot.lane,N$3.lanes|=it,hh$1|=it,ot=ot.next;while(ot!==_e)}else ot===null&&(rt.lanes=0);return[et.memoizedState,rt.dispatch]}function gi(_e){var et=di(),rt=et.queue;if(rt===null)throw Error(p$6(311));rt.lastRenderedReducer=_e;var nt=rt.dispatch,ot=rt.pending,it=et.memoizedState;if(ot!==null){rt.pending=null;var st=ot=ot.next;do it=_e(it,st.action),st=st.next;while(st!==ot);He(it,et.memoizedState)||(Ug=!0),et.memoizedState=it,et.baseQueue===null&&(et.baseState=it),rt.lastRenderedState=it}return[it,nt]}function hi(){}function ii$1(_e,et){var rt=N$3,nt=di(),ot=et(),it=!He(nt.memoizedState,ot);if(it&&(nt.memoizedState=ot,Ug=!0),nt=nt.queue,ji(ki.bind(null,rt,nt,_e),[_e]),nt.getSnapshot!==et||it||P$2!==null&&P$2.memoizedState.tag&1){if(rt.flags|=2048,li(9,mi.bind(null,rt,nt,ot,et),void 0,null),R$2===null)throw Error(p$6(349));Rh&30||ni(rt,et,ot)}return ot}function ni(_e,et,rt){_e.flags|=16384,_e={getSnapshot:et,value:rt},et=N$3.updateQueue,et===null?(et={lastEffect:null,stores:null},N$3.updateQueue=et,et.stores=[_e]):(rt=et.stores,rt===null?et.stores=[_e]:rt.push(_e))}function mi(_e,et,rt,nt){et.value=rt,et.getSnapshot=nt,oi(et)&&pi(_e)}function ki(_e,et,rt){return rt(function(){oi(et)&&pi(_e)})}function oi(_e){var et=_e.getSnapshot;_e=_e.value;try{var rt=et();return!He(_e,rt)}catch{return!0}}function pi(_e){var et=Zg(_e,1);et!==null&&mh(et,_e,1,-1)}function qi(_e){var et=ci();return typeof _e=="function"&&(_e=_e()),et.memoizedState=et.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_e},et.queue=_e,_e=_e.dispatch=ri$1.bind(null,N$3,_e),[et.memoizedState,_e]}function li(_e,et,rt,nt){return _e={tag:_e,create:et,destroy:rt,deps:nt,next:null},et=N$3.updateQueue,et===null?(et={lastEffect:null,stores:null},N$3.updateQueue=et,et.lastEffect=_e.next=_e):(rt=et.lastEffect,rt===null?et.lastEffect=_e.next=_e:(nt=rt.next,rt.next=_e,_e.next=nt,et.lastEffect=_e)),_e}function si(){return di().memoizedState}function ti(_e,et,rt,nt){var ot=ci();N$3.flags|=_e,ot.memoizedState=li(1|et,rt,void 0,nt===void 0?null:nt)}function ui(_e,et,rt,nt){var ot=di();nt=nt===void 0?null:nt;var it=void 0;if(O$3!==null){var st=O$3.memoizedState;if(it=st.destroy,nt!==null&&Wh(nt,st.deps)){ot.memoizedState=li(et,rt,it,nt);return}}N$3.flags|=_e,ot.memoizedState=li(1|et,rt,it,nt)}function vi(_e,et){return ti(8390656,8,_e,et)}function ji(_e,et){return ui(2048,8,_e,et)}function wi(_e,et){return ui(4,2,_e,et)}function xi(_e,et){return ui(4,4,_e,et)}function yi(_e,et){if(typeof et=="function")return _e=_e(),et(_e),function(){et(null)};if(et!=null)return _e=_e(),et.current=_e,function(){et.current=null}}function zi(_e,et,rt){return rt=rt!=null?rt.concat([_e]):null,ui(4,4,yi.bind(null,et,_e),rt)}function Ai(){}function Bi(_e,et){var rt=di();et=et===void 0?null:et;var nt=rt.memoizedState;return nt!==null&&et!==null&&Wh(et,nt[1])?nt[0]:(rt.memoizedState=[_e,et],_e)}function Ci(_e,et){var rt=di();et=et===void 0?null:et;var nt=rt.memoizedState;return nt!==null&&et!==null&&Wh(et,nt[1])?nt[0]:(_e=_e(),rt.memoizedState=[_e,et],_e)}function Di(_e,et,rt){return Rh&21?(He(rt,et)||(rt=yc$1(),N$3.lanes|=rt,hh$1|=rt,_e.baseState=!0),et):(_e.baseState&&(_e.baseState=!1,Ug=!0),_e.memoizedState=rt)}function Ei(_e,et){var rt=C$1;C$1=rt!==0&&4>rt?rt:4,_e(!0);var nt=Qh.transition;Qh.transition={};try{_e(!1),et()}finally{C$1=rt,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(_e,et,rt){var nt=lh(_e);if(rt={lane:nt,action:rt,hasEagerState:!1,eagerState:null,next:null},Hi(_e))Ii(et,rt);else if(rt=Yg(_e,et,rt,nt),rt!==null){var ot=L$1();mh(rt,_e,nt,ot),Ji(rt,et,nt)}}function ri$1(_e,et,rt){var nt=lh(_e),ot={lane:nt,action:rt,hasEagerState:!1,eagerState:null,next:null};if(Hi(_e))Ii(et,ot);else{var it=_e.alternate;if(_e.lanes===0&&(it===null||it.lanes===0)&&(it=et.lastRenderedReducer,it!==null))try{var st=et.lastRenderedState,at=it(st,rt);if(ot.hasEagerState=!0,ot.eagerState=at,He(at,st)){var lt=et.interleaved;lt===null?(ot.next=ot,Xg(et)):(ot.next=lt.next,lt.next=ot),et.interleaved=ot;return}}catch{}finally{}rt=Yg(_e,et,ot,nt),rt!==null&&(ot=L$1(),mh(rt,_e,nt,ot),Ji(rt,et,nt))}}function Hi(_e){var et=_e.alternate;return _e===N$3||et!==null&&et===N$3}function Ii(_e,et){Th=Sh=!0;var rt=_e.pending;rt===null?et.next=et:(et.next=rt.next,rt.next=et),_e.pending=et}function Ji(_e,et,rt){if(rt&4194240){var nt=et.lanes;nt&=_e.pendingLanes,rt|=nt,et.lanes=rt,Cc$1(_e,rt)}}var ai={readContext:Vg,useCallback:Q$3,useContext:Q$3,useEffect:Q$3,useImperativeHandle:Q$3,useInsertionEffect:Q$3,useLayoutEffect:Q$3,useMemo:Q$3,useReducer:Q$3,useRef:Q$3,useState:Q$3,useDebugValue:Q$3,useDeferredValue:Q$3,useTransition:Q$3,useMutableSource:Q$3,useSyncExternalStore:Q$3,useId:Q$3,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_e,et){return ci().memoizedState=[_e,et===void 0?null:et],_e},useContext:Vg,useEffect:vi,useImperativeHandle:function(_e,et,rt){return rt=rt!=null?rt.concat([_e]):null,ti(4194308,4,yi.bind(null,et,_e),rt)},useLayoutEffect:function(_e,et){return ti(4194308,4,_e,et)},useInsertionEffect:function(_e,et){return ti(4,2,_e,et)},useMemo:function(_e,et){var rt=ci();return et=et===void 0?null:et,_e=_e(),rt.memoizedState=[_e,et],_e},useReducer:function(_e,et,rt){var nt=ci();return et=rt!==void 0?rt(et):et,nt.memoizedState=nt.baseState=et,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:et},nt.queue=_e,_e=_e.dispatch=Gi.bind(null,N$3,_e),[nt.memoizedState,_e]},useRef:function(_e){var et=ci();return _e={current:_e},et.memoizedState=_e},useState:qi,useDebugValue:Ai,useDeferredValue:function(_e){return ci().memoizedState=_e},useTransition:function(){var _e=qi(!1),et=_e[0];return _e=Ei.bind(null,_e[1]),ci().memoizedState=_e,[et,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,et,rt){var nt=N$3,ot=ci();if(I$2){if(rt===void 0)throw Error(p$6(407));rt=rt()}else{if(rt=et(),R$2===null)throw Error(p$6(349));Rh&30||ni(nt,et,rt)}ot.memoizedState=rt;var it={value:rt,getSnapshot:et};return ot.queue=it,vi(ki.bind(null,nt,it,_e),[_e]),nt.flags|=2048,li(9,mi.bind(null,nt,it,rt,et),void 0,null),rt},useId:function(){var _e=ci(),et=R$2.identifierPrefix;if(I$2){var rt=sg,nt=rg;rt=(nt&~(1<<32-oc$1(nt)-1)).toString(32)+rt,et=":"+et+"R"+rt,rt=Uh++,0<rt&&(et+="H"+rt.toString(32)),et+=":"}else rt=Vh$1++,et=":"+et+"r"+rt.toString(32)+":";return _e.memoizedState=et},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var et=di();return Di(et,O$3.memoizedState,_e)},useTransition:function(){var _e=fi(ei)[0],et=di().memoizedState;return[_e,et]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var et=di();return O$3===null?et.memoizedState=_e:Di(et,O$3.memoizedState,_e)},useTransition:function(){var _e=gi(ei)[0],et=di().memoizedState;return[_e,et]},useMutableSource:hi,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1};function Ki(_e,et){try{var rt="",nt=et;do rt+=Pa$1(nt),nt=nt.return;while(nt);var ot=rt}catch(it){ot=`
Error generating stack: `+it.message+`
`+it.stack}return{value:_e,source:et,stack:ot,digest:null}}function Li(_e,et,rt){return{value:_e,source:null,stack:rt??null,digest:et??null}}function Mi(_e,et){try{console.error(et.value)}catch(rt){setTimeout(function(){throw rt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_e,et,rt){rt=ch(-1,rt),rt.tag=3,rt.payload={element:null};var nt=et.value;return rt.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(_e,et)},rt}function Ri(_e,et,rt){rt=ch(-1,rt),rt.tag=3;var nt=_e.type.getDerivedStateFromError;if(typeof nt=="function"){var ot=et.value;rt.payload=function(){return nt(ot)},rt.callback=function(){Mi(_e,et)}}var it=_e.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(rt.callback=function(){Mi(_e,et),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var st=et.stack;this.componentDidCatch(et.value,{componentStack:st!==null?st:""})}),rt}function Ti(_e,et,rt){var nt=_e.pingCache;if(nt===null){nt=_e.pingCache=new Ni;var ot=new Set;nt.set(et,ot)}else ot=nt.get(et),ot===void 0&&(ot=new Set,nt.set(et,ot));ot.has(rt)||(ot.add(rt),_e=Ui.bind(null,_e,et,rt),et.then(_e,_e))}function Vi(_e){do{var et;if((et=_e.tag===13)&&(et=_e.memoizedState,et=et!==null?et.dehydrated!==null:!0),et)return _e;_e=_e.return}while(_e!==null);return null}function Wi(_e,et,rt,nt,ot){return _e.mode&1?(_e.flags|=65536,_e.lanes=ot,_e):(_e===et?_e.flags|=65536:(_e.flags|=128,rt.flags|=131072,rt.flags&=-52805,rt.tag===1&&(rt.alternate===null?rt.tag=17:(et=ch(-1,1),et.tag=2,dh(rt,et,1))),rt.lanes|=1),_e)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(_e,et,rt,nt){et.child=_e===null?Ch(et,null,rt,nt):Bh(et,_e.child,rt,nt)}function Zi(_e,et,rt,nt,ot){rt=rt.render;var it=et.ref;return Tg(et,ot),nt=Xh(_e,et,rt,nt,it,ot),rt=bi(),_e!==null&&!Ug?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~ot,$i(_e,et,ot)):(I$2&&rt&&vg(et),et.flags|=1,Yi(_e,et,nt,ot),et.child)}function aj(_e,et,rt,nt,ot){if(_e===null){var it=rt.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&rt.compare===null&&rt.defaultProps===void 0?(et.tag=15,et.type=it,cj(_e,et,it,nt,ot)):(_e=yh(rt.type,null,nt,et,et.mode,ot),_e.ref=et.ref,_e.return=et,et.child=_e)}if(it=_e.child,!(_e.lanes&ot)){var st=it.memoizedProps;if(rt=rt.compare,rt=rt!==null?rt:Ie,rt(st,nt)&&_e.ref===et.ref)return $i(_e,et,ot)}return et.flags|=1,_e=wh(it,nt),_e.ref=et.ref,_e.return=et,et.child=_e}function cj(_e,et,rt,nt,ot){if(_e!==null){var it=_e.memoizedProps;if(Ie(it,nt)&&_e.ref===et.ref)if(Ug=!1,et.pendingProps=nt=it,(_e.lanes&ot)!==0)_e.flags&131072&&(Ug=!0);else return et.lanes=_e.lanes,$i(_e,et,ot)}return dj(_e,et,rt,nt,ot)}function ej(_e,et,rt){var nt=et.pendingProps,ot=nt.children,it=_e!==null?_e.memoizedState:null;if(nt.mode==="hidden")if(!(et.mode&1))et.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$3(fj,gj),gj|=rt;else{if(!(rt&1073741824))return _e=it!==null?it.baseLanes|rt:rt,et.lanes=et.childLanes=1073741824,et.memoizedState={baseLanes:_e,cachePool:null,transitions:null},et.updateQueue=null,G$3(fj,gj),gj|=_e,null;et.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:rt,G$3(fj,gj),gj|=nt}else it!==null?(nt=it.baseLanes|rt,et.memoizedState=null):nt=rt,G$3(fj,gj),gj|=nt;return Yi(_e,et,ot,rt),et.child}function hj(_e,et){var rt=et.ref;(_e===null&&rt!==null||_e!==null&&_e.ref!==rt)&&(et.flags|=512,et.flags|=2097152)}function dj(_e,et,rt,nt,ot){var it=Zf(rt)?Xf:H$3.current;return it=Yf(et,it),Tg(et,ot),rt=Xh(_e,et,rt,nt,it,ot),nt=bi(),_e!==null&&!Ug?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~ot,$i(_e,et,ot)):(I$2&&nt&&vg(et),et.flags|=1,Yi(_e,et,rt,ot),et.child)}function ij(_e,et,rt,nt,ot){if(Zf(rt)){var it=!0;cg(et)}else it=!1;if(Tg(et,ot),et.stateNode===null)jj(_e,et),ph(et,rt,nt),rh(et,rt,nt,ot),nt=!0;else if(_e===null){var st=et.stateNode,at=et.memoizedProps;st.props=at;var lt=st.context,ct=rt.contextType;typeof ct=="object"&&ct!==null?ct=Vg(ct):(ct=Zf(rt)?Xf:H$3.current,ct=Yf(et,ct));var pt=rt.getDerivedStateFromProps,ut=typeof pt=="function"||typeof st.getSnapshotBeforeUpdate=="function";ut||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(at!==nt||lt!==ct)&&qh(et,st,nt,ct),$g=!1;var ht=et.memoizedState;st.state=ht,gh(et,nt,st,ot),lt=et.memoizedState,at!==nt||ht!==lt||Wf.current||$g?(typeof pt=="function"&&(kh(et,rt,pt,nt),lt=et.memoizedState),(at=$g||oh(et,rt,at,nt,ht,lt,ct))?(ut||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(et.flags|=4194308)):(typeof st.componentDidMount=="function"&&(et.flags|=4194308),et.memoizedProps=nt,et.memoizedState=lt),st.props=nt,st.state=lt,st.context=ct,nt=at):(typeof st.componentDidMount=="function"&&(et.flags|=4194308),nt=!1)}else{st=et.stateNode,bh(_e,et),at=et.memoizedProps,ct=et.type===et.elementType?at:Lg(et.type,at),st.props=ct,ut=et.pendingProps,ht=st.context,lt=rt.contextType,typeof lt=="object"&&lt!==null?lt=Vg(lt):(lt=Zf(rt)?Xf:H$3.current,lt=Yf(et,lt));var ft=rt.getDerivedStateFromProps;(pt=typeof ft=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(at!==ut||ht!==lt)&&qh(et,st,nt,lt),$g=!1,ht=et.memoizedState,st.state=ht,gh(et,nt,st,ot);var gt=et.memoizedState;at!==ut||ht!==gt||Wf.current||$g?(typeof ft=="function"&&(kh(et,rt,ft,nt),gt=et.memoizedState),(ct=$g||oh(et,rt,ct,nt,ht,gt,lt)||!1)?(pt||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(nt,gt,lt),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(nt,gt,lt)),typeof st.componentDidUpdate=="function"&&(et.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(et.flags|=1024)):(typeof st.componentDidUpdate!="function"||at===_e.memoizedProps&&ht===_e.memoizedState||(et.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&ht===_e.memoizedState||(et.flags|=1024),et.memoizedProps=nt,et.memoizedState=gt),st.props=nt,st.state=gt,st.context=lt,nt=ct):(typeof st.componentDidUpdate!="function"||at===_e.memoizedProps&&ht===_e.memoizedState||(et.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&ht===_e.memoizedState||(et.flags|=1024),nt=!1)}return kj(_e,et,rt,nt,it,ot)}function kj(_e,et,rt,nt,ot,it){hj(_e,et);var st=(et.flags&128)!==0;if(!nt&&!st)return ot&&dg(et,rt,!1),$i(_e,et,it);nt=et.stateNode,Xi.current=et;var at=st&&typeof rt.getDerivedStateFromError!="function"?null:nt.render();return et.flags|=1,_e!==null&&st?(et.child=Bh(et,_e.child,null,it),et.child=Bh(et,null,at,it)):Yi(_e,et,at,it),et.memoizedState=nt.state,ot&&dg(et,rt,!0),et.child}function lj(_e){var et=_e.stateNode;et.pendingContext?ag(_e,et.pendingContext,et.pendingContext!==et.context):et.context&&ag(_e,et.context,!1),Ih$1(_e,et.containerInfo)}function mj(_e,et,rt,nt,ot){return Ig(),Jg(ot),et.flags|=256,Yi(_e,et,rt,nt),et.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function pj(_e,et,rt){var nt=et.pendingProps,ot=M$2.current,it=!1,st=(et.flags&128)!==0,at;if((at=st)||(at=_e!==null&&_e.memoizedState===null?!1:(ot&2)!==0),at?(it=!0,et.flags&=-129):(_e===null||_e.memoizedState!==null)&&(ot|=1),G$3(M$2,ot&1),_e===null)return Eg(et),_e=et.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(et.mode&1?_e.data==="$!"?et.lanes=8:et.lanes=1073741824:et.lanes=1,null):(st=nt.children,_e=nt.fallback,it?(nt=et.mode,it=et.child,st={mode:"hidden",children:st},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=st):it=qj(st,nt,0,null),_e=Ah(_e,nt,rt,null),it.return=et,_e.return=et,it.sibling=_e,et.child=it,et.child.memoizedState=oj(rt),et.memoizedState=nj,_e):rj(et,st));if(ot=_e.memoizedState,ot!==null&&(at=ot.dehydrated,at!==null))return sj(_e,et,st,nt,at,ot,rt);if(it){it=nt.fallback,st=et.mode,ot=_e.child,at=ot.sibling;var lt={mode:"hidden",children:nt.children};return!(st&1)&&et.child!==ot?(nt=et.child,nt.childLanes=0,nt.pendingProps=lt,et.deletions=null):(nt=wh(ot,lt),nt.subtreeFlags=ot.subtreeFlags&14680064),at!==null?it=wh(at,it):(it=Ah(it,st,rt,null),it.flags|=2),it.return=et,nt.return=et,nt.sibling=it,et.child=nt,nt=it,it=et.child,st=_e.child.memoizedState,st=st===null?oj(rt):{baseLanes:st.baseLanes|rt,cachePool:null,transitions:st.transitions},it.memoizedState=st,it.childLanes=_e.childLanes&~rt,et.memoizedState=nj,nt}return it=_e.child,_e=it.sibling,nt=wh(it,{mode:"visible",children:nt.children}),!(et.mode&1)&&(nt.lanes=rt),nt.return=et,nt.sibling=null,_e!==null&&(rt=et.deletions,rt===null?(et.deletions=[_e],et.flags|=16):rt.push(_e)),et.child=nt,et.memoizedState=null,nt}function rj(_e,et){return et=qj({mode:"visible",children:et},_e.mode,0,null),et.return=_e,_e.child=et}function tj(_e,et,rt,nt){return nt!==null&&Jg(nt),Bh(et,_e.child,null,rt),_e=rj(et,et.pendingProps.children),_e.flags|=2,et.memoizedState=null,_e}function sj(_e,et,rt,nt,ot,it,st){if(rt)return et.flags&256?(et.flags&=-257,nt=Li(Error(p$6(422))),tj(_e,et,st,nt)):et.memoizedState!==null?(et.child=_e.child,et.flags|=128,null):(it=nt.fallback,ot=et.mode,nt=qj({mode:"visible",children:nt.children},ot,0,null),it=Ah(it,ot,st,null),it.flags|=2,nt.return=et,it.return=et,nt.sibling=it,et.child=nt,et.mode&1&&Bh(et,_e.child,null,st),et.child.memoizedState=oj(st),et.memoizedState=nj,it);if(!(et.mode&1))return tj(_e,et,st,null);if(ot.data==="$!"){if(nt=ot.nextSibling&&ot.nextSibling.dataset,nt)var at=nt.dgst;return nt=at,it=Error(p$6(419)),nt=Li(it,nt,void 0),tj(_e,et,st,nt)}if(at=(st&_e.childLanes)!==0,Ug||at){if(nt=R$2,nt!==null){switch(st&-st){case 4:ot=2;break;case 16:ot=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ot=32;break;case 536870912:ot=268435456;break;default:ot=0}ot=ot&(nt.suspendedLanes|st)?0:ot,ot!==0&&ot!==it.retryLane&&(it.retryLane=ot,Zg(_e,ot),mh(nt,_e,ot,-1))}return uj(),nt=Li(Error(p$6(421))),tj(_e,et,st,nt)}return ot.data==="$?"?(et.flags|=128,et.child=_e.child,et=vj.bind(null,_e),ot._reactRetry=et,null):(_e=it.treeContext,yg=Lf(ot.nextSibling),xg=et,I$2=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=et),et=rj(et,nt.children),et.flags|=4096,et)}function wj(_e,et,rt){_e.lanes|=et;var nt=_e.alternate;nt!==null&&(nt.lanes|=et),Sg(_e.return,et,rt)}function xj(_e,et,rt,nt,ot){var it=_e.memoizedState;it===null?_e.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:nt,tail:rt,tailMode:ot}:(it.isBackwards=et,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=rt,it.tailMode=ot)}function yj(_e,et,rt){var nt=et.pendingProps,ot=nt.revealOrder,it=nt.tail;if(Yi(_e,et,nt.children,rt),nt=M$2.current,nt&2)nt=nt&1|2,et.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=et.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&wj(_e,rt,et);else if(_e.tag===19)wj(_e,rt,et);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}nt&=1}if(G$3(M$2,nt),!(et.mode&1))et.memoizedState=null;else switch(ot){case"forwards":for(rt=et.child,ot=null;rt!==null;)_e=rt.alternate,_e!==null&&Mh(_e)===null&&(ot=rt),rt=rt.sibling;rt=ot,rt===null?(ot=et.child,et.child=null):(ot=rt.sibling,rt.sibling=null),xj(et,!1,ot,rt,it);break;case"backwards":for(rt=null,ot=et.child,et.child=null;ot!==null;){if(_e=ot.alternate,_e!==null&&Mh(_e)===null){et.child=ot;break}_e=ot.sibling,ot.sibling=rt,rt=ot,ot=_e}xj(et,!0,rt,null,it);break;case"together":xj(et,!1,null,null,void 0);break;default:et.memoizedState=null}return et.child}function jj(_e,et){!(et.mode&1)&&_e!==null&&(_e.alternate=null,et.alternate=null,et.flags|=2)}function $i(_e,et,rt){if(_e!==null&&(et.dependencies=_e.dependencies),hh$1|=et.lanes,!(rt&et.childLanes))return null;if(_e!==null&&et.child!==_e.child)throw Error(p$6(153));if(et.child!==null){for(_e=et.child,rt=wh(_e,_e.pendingProps),et.child=rt,rt.return=et;_e.sibling!==null;)_e=_e.sibling,rt=rt.sibling=wh(_e,_e.pendingProps),rt.return=et;rt.sibling=null}return et.child}function zj(_e,et,rt){switch(et.tag){case 3:lj(et),Ig();break;case 5:Kh(et);break;case 1:Zf(et.type)&&cg(et);break;case 4:Ih$1(et,et.stateNode.containerInfo);break;case 10:var nt=et.type._context,ot=et.memoizedProps.value;G$3(Mg,nt._currentValue),nt._currentValue=ot;break;case 13:if(nt=et.memoizedState,nt!==null)return nt.dehydrated!==null?(G$3(M$2,M$2.current&1),et.flags|=128,null):rt&et.child.childLanes?pj(_e,et,rt):(G$3(M$2,M$2.current&1),_e=$i(_e,et,rt),_e!==null?_e.sibling:null);G$3(M$2,M$2.current&1);break;case 19:if(nt=(rt&et.childLanes)!==0,_e.flags&128){if(nt)return yj(_e,et,rt);et.flags|=128}if(ot=et.memoizedState,ot!==null&&(ot.rendering=null,ot.tail=null,ot.lastEffect=null),G$3(M$2,M$2.current),nt)break;return null;case 22:case 23:return et.lanes=0,ej(_e,et,rt)}return $i(_e,et,rt)}var Aj,Bj,Cj,Dj;Aj=function(_e,et){for(var rt=et.child;rt!==null;){if(rt.tag===5||rt.tag===6)_e.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===et)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===et)return;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}};Bj=function(){};Cj=function(_e,et,rt,nt){var ot=_e.memoizedProps;if(ot!==nt){_e=et.stateNode,Hh(Eh.current);var it=null;switch(rt){case"input":ot=Ya$1(_e,ot),nt=Ya$1(_e,nt),it=[];break;case"select":ot=A$3({},ot,{value:void 0}),nt=A$3({},nt,{value:void 0}),it=[];break;case"textarea":ot=gb$1(_e,ot),nt=gb$1(_e,nt),it=[];break;default:typeof ot.onClick!="function"&&typeof nt.onClick=="function"&&(_e.onclick=Bf)}ub$1(rt,nt);var st;rt=null;for(ct in ot)if(!nt.hasOwnProperty(ct)&&ot.hasOwnProperty(ct)&&ot[ct]!=null)if(ct==="style"){var at=ot[ct];for(st in at)at.hasOwnProperty(st)&&(rt||(rt={}),rt[st]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea$1.hasOwnProperty(ct)?it||(it=[]):(it=it||[]).push(ct,null));for(ct in nt){var lt=nt[ct];if(at=ot!=null?ot[ct]:void 0,nt.hasOwnProperty(ct)&&lt!==at&&(lt!=null||at!=null))if(ct==="style")if(at){for(st in at)!at.hasOwnProperty(st)||lt&&lt.hasOwnProperty(st)||(rt||(rt={}),rt[st]="");for(st in lt)lt.hasOwnProperty(st)&&at[st]!==lt[st]&&(rt||(rt={}),rt[st]=lt[st])}else rt||(it||(it=[]),it.push(ct,rt)),rt=lt;else ct==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,at=at?at.__html:void 0,lt!=null&&at!==lt&&(it=it||[]).push(ct,lt)):ct==="children"?typeof lt!="string"&&typeof lt!="number"||(it=it||[]).push(ct,""+lt):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(ct)?(lt!=null&&ct==="onScroll"&&D$3("scroll",_e),it||at===lt||(it=[])):(it=it||[]).push(ct,lt))}rt&&(it=it||[]).push("style",rt);var ct=it;(et.updateQueue=ct)&&(et.flags|=4)}};Dj=function(_e,et,rt,nt){rt!==nt&&(et.flags|=4)};function Ej(_e,et){if(!I$2)switch(_e.tailMode){case"hidden":et=_e.tail;for(var rt=null;et!==null;)et.alternate!==null&&(rt=et),et=et.sibling;rt===null?_e.tail=null:rt.sibling=null;break;case"collapsed":rt=_e.tail;for(var nt=null;rt!==null;)rt.alternate!==null&&(nt=rt),rt=rt.sibling;nt===null?et||_e.tail===null?_e.tail=null:_e.tail.sibling=null:nt.sibling=null}}function S$3(_e){var et=_e.alternate!==null&&_e.alternate.child===_e.child,rt=0,nt=0;if(et)for(var ot=_e.child;ot!==null;)rt|=ot.lanes|ot.childLanes,nt|=ot.subtreeFlags&14680064,nt|=ot.flags&14680064,ot.return=_e,ot=ot.sibling;else for(ot=_e.child;ot!==null;)rt|=ot.lanes|ot.childLanes,nt|=ot.subtreeFlags,nt|=ot.flags,ot.return=_e,ot=ot.sibling;return _e.subtreeFlags|=nt,_e.childLanes=rt,et}function Fj(_e,et,rt){var nt=et.pendingProps;switch(wg(et),et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(et),null;case 1:return Zf(et.type)&&$f(),S$3(et),null;case 3:return nt=et.stateNode,Jh(),E$2(Wf),E$2(H$3),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(et)?et.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(et.flags&256)||(et.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_e,et),S$3(et),null;case 5:Lh(et);var ot=Hh(Gh.current);if(rt=et.type,_e!==null&&et.stateNode!=null)Cj(_e,et,rt,nt,ot),_e.ref!==et.ref&&(et.flags|=512,et.flags|=2097152);else{if(!nt){if(et.stateNode===null)throw Error(p$6(166));return S$3(et),null}if(_e=Hh(Eh.current),Gg(et)){nt=et.stateNode,rt=et.type;var it=et.memoizedProps;switch(nt[Of]=et,nt[Pf]=it,_e=(et.mode&1)!==0,rt){case"dialog":D$3("cancel",nt),D$3("close",nt);break;case"iframe":case"object":case"embed":D$3("load",nt);break;case"video":case"audio":for(ot=0;ot<lf.length;ot++)D$3(lf[ot],nt);break;case"source":D$3("error",nt);break;case"img":case"image":case"link":D$3("error",nt),D$3("load",nt);break;case"details":D$3("toggle",nt);break;case"input":Za$1(nt,it),D$3("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$3("invalid",nt);break;case"textarea":hb$1(nt,it),D$3("invalid",nt)}ub$1(rt,it),ot=null;for(var st in it)if(it.hasOwnProperty(st)){var at=it[st];st==="children"?typeof at=="string"?nt.textContent!==at&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,at,_e),ot=["children",at]):typeof at=="number"&&nt.textContent!==""+at&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,at,_e),ot=["children",""+at]):ea$1.hasOwnProperty(st)&&at!=null&&st==="onScroll"&&D$3("scroll",nt)}switch(rt){case"input":Va$1(nt),db$1(nt,it,!0);break;case"textarea":Va$1(nt),jb$1(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=ot,et.updateQueue=nt,nt!==null&&(et.flags|=4)}else{st=ot.nodeType===9?ot:ot.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb$1(rt)),_e==="http://www.w3.org/1999/xhtml"?rt==="script"?(_e=st.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof nt.is=="string"?_e=st.createElement(rt,{is:nt.is}):(_e=st.createElement(rt),rt==="select"&&(st=_e,nt.multiple?st.multiple=!0:nt.size&&(st.size=nt.size))):_e=st.createElementNS(_e,rt),_e[Of]=et,_e[Pf]=nt,Aj(_e,et,!1,!1),et.stateNode=_e;e:{switch(st=vb$1(rt,nt),rt){case"dialog":D$3("cancel",_e),D$3("close",_e),ot=nt;break;case"iframe":case"object":case"embed":D$3("load",_e),ot=nt;break;case"video":case"audio":for(ot=0;ot<lf.length;ot++)D$3(lf[ot],_e);ot=nt;break;case"source":D$3("error",_e),ot=nt;break;case"img":case"image":case"link":D$3("error",_e),D$3("load",_e),ot=nt;break;case"details":D$3("toggle",_e),ot=nt;break;case"input":Za$1(_e,nt),ot=Ya$1(_e,nt),D$3("invalid",_e);break;case"option":ot=nt;break;case"select":_e._wrapperState={wasMultiple:!!nt.multiple},ot=A$3({},nt,{value:void 0}),D$3("invalid",_e);break;case"textarea":hb$1(_e,nt),ot=gb$1(_e,nt),D$3("invalid",_e);break;default:ot=nt}ub$1(rt,ot),at=ot;for(it in at)if(at.hasOwnProperty(it)){var lt=at[it];it==="style"?sb$1(_e,lt):it==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&nb$1(_e,lt)):it==="children"?typeof lt=="string"?(rt!=="textarea"||lt!=="")&&ob$1(_e,lt):typeof lt=="number"&&ob$1(_e,""+lt):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea$1.hasOwnProperty(it)?lt!=null&&it==="onScroll"&&D$3("scroll",_e):lt!=null&&ta$1(_e,it,lt,st))}switch(rt){case"input":Va$1(_e),db$1(_e,nt,!1);break;case"textarea":Va$1(_e),jb$1(_e);break;case"option":nt.value!=null&&_e.setAttribute("value",""+Sa$1(nt.value));break;case"select":_e.multiple=!!nt.multiple,it=nt.value,it!=null?fb$1(_e,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb$1(_e,!!nt.multiple,nt.defaultValue,!0);break;default:typeof ot.onClick=="function"&&(_e.onclick=Bf)}switch(rt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(et.flags|=4)}et.ref!==null&&(et.flags|=512,et.flags|=2097152)}return S$3(et),null;case 6:if(_e&&et.stateNode!=null)Dj(_e,et,_e.memoizedProps,nt);else{if(typeof nt!="string"&&et.stateNode===null)throw Error(p$6(166));if(rt=Hh(Gh.current),Hh(Eh.current),Gg(et)){if(nt=et.stateNode,rt=et.memoizedProps,nt[Of]=et,(it=nt.nodeValue!==rt)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(nt.nodeValue,rt,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,rt,(_e.mode&1)!==0)}it&&(et.flags|=4)}else nt=(rt.nodeType===9?rt:rt.ownerDocument).createTextNode(nt),nt[Of]=et,et.stateNode=nt}return S$3(et),null;case 13:if(E$2(M$2),nt=et.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&et.mode&1&&!(et.flags&128))Hg(),Ig(),et.flags|=98560,it=!1;else if(it=Gg(et),nt!==null&&nt.dehydrated!==null){if(_e===null){if(!it)throw Error(p$6(318));if(it=et.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$6(317));it[Of]=et}else Ig(),!(et.flags&128)&&(et.memoizedState=null),et.flags|=4;S$3(et),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return et.flags&65536?et:null}return et.flags&128?(et.lanes=rt,et):(nt=nt!==null,nt!==(_e!==null&&_e.memoizedState!==null)&&nt&&(et.child.flags|=8192,et.mode&1&&(_e===null||M$2.current&1?T$1===0&&(T$1=3):uj())),et.updateQueue!==null&&(et.flags|=4),S$3(et),null);case 4:return Jh(),Bj(_e,et),_e===null&&sf(et.stateNode.containerInfo),S$3(et),null;case 10:return Rg(et.type._context),S$3(et),null;case 17:return Zf(et.type)&&$f(),S$3(et),null;case 19:if(E$2(M$2),it=et.memoizedState,it===null)return S$3(et),null;if(nt=(et.flags&128)!==0,st=it.rendering,st===null)if(nt)Ej(it,!1);else{if(T$1!==0||_e!==null&&_e.flags&128)for(_e=et.child;_e!==null;){if(st=Mh(_e),st!==null){for(et.flags|=128,Ej(it,!1),nt=st.updateQueue,nt!==null&&(et.updateQueue=nt,et.flags|=4),et.subtreeFlags=0,nt=rt,rt=et.child;rt!==null;)it=rt,_e=nt,it.flags&=14680066,st=it.alternate,st===null?(it.childLanes=0,it.lanes=_e,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=st.childLanes,it.lanes=st.lanes,it.child=st.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=st.memoizedProps,it.memoizedState=st.memoizedState,it.updateQueue=st.updateQueue,it.type=st.type,_e=st.dependencies,it.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),rt=rt.sibling;return G$3(M$2,M$2.current&1|2),et.child}_e=_e.sibling}it.tail!==null&&B$2()>Hj&&(et.flags|=128,nt=!0,Ej(it,!1),et.lanes=4194304)}else{if(!nt)if(_e=Mh(st),_e!==null){if(et.flags|=128,nt=!0,rt=_e.updateQueue,rt!==null&&(et.updateQueue=rt,et.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!st.alternate&&!I$2)return S$3(et),null}else 2*B$2()-it.renderingStartTime>Hj&&rt!==1073741824&&(et.flags|=128,nt=!0,Ej(it,!1),et.lanes=4194304);it.isBackwards?(st.sibling=et.child,et.child=st):(rt=it.last,rt!==null?rt.sibling=st:et.child=st,it.last=st)}return it.tail!==null?(et=it.tail,it.rendering=et,it.tail=et.sibling,it.renderingStartTime=B$2(),et.sibling=null,rt=M$2.current,G$3(M$2,nt?rt&1|2:rt&1),et):(S$3(et),null);case 22:case 23:return Ij(),nt=et.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==nt&&(et.flags|=8192),nt&&et.mode&1?gj&1073741824&&(S$3(et),et.subtreeFlags&6&&(et.flags|=8192)):S$3(et),null;case 24:return null;case 25:return null}throw Error(p$6(156,et.tag))}function Jj(_e,et){switch(wg(et),et.tag){case 1:return Zf(et.type)&&$f(),_e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 3:return Jh(),E$2(Wf),E$2(H$3),Oh(),_e=et.flags,_e&65536&&!(_e&128)?(et.flags=_e&-65537|128,et):null;case 5:return Lh(et),null;case 13:if(E$2(M$2),_e=et.memoizedState,_e!==null&&_e.dehydrated!==null){if(et.alternate===null)throw Error(p$6(340));Ig()}return _e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 19:return E$2(M$2),null;case 4:return Jh(),null;case 10:return Rg(et.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$3=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(_e,et){var rt=_e.ref;if(rt!==null)if(typeof rt=="function")try{rt(null)}catch(nt){W$3(_e,et,nt)}else rt.current=null}function Nj(_e,et,rt){try{rt()}catch(nt){W$3(_e,et,nt)}}var Oj=!1;function Pj(_e,et){if(Cf=dd$1,_e=Me(),Ne(_e)){if("selectionStart"in _e)var rt={start:_e.selectionStart,end:_e.selectionEnd};else e:{rt=(rt=_e.ownerDocument)&&rt.defaultView||window;var nt=rt.getSelection&&rt.getSelection();if(nt&&nt.rangeCount!==0){rt=nt.anchorNode;var ot=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{rt.nodeType,it.nodeType}catch{rt=null;break e}var st=0,at=-1,lt=-1,ct=0,pt=0,ut=_e,ht=null;t:for(;;){for(var ft;ut!==rt||ot!==0&&ut.nodeType!==3||(at=st+ot),ut!==it||nt!==0&&ut.nodeType!==3||(lt=st+nt),ut.nodeType===3&&(st+=ut.nodeValue.length),(ft=ut.firstChild)!==null;)ht=ut,ut=ft;for(;;){if(ut===_e)break t;if(ht===rt&&++ct===ot&&(at=st),ht===it&&++pt===nt&&(lt=st),(ft=ut.nextSibling)!==null)break;ut=ht,ht=ut.parentNode}ut=ft}rt=at===-1||lt===-1?null:{start:at,end:lt}}else rt=null}rt=rt||{start:0,end:0}}else rt=null;for(Df={focusedElem:_e,selectionRange:rt},dd$1=!1,V$2=et;V$2!==null;)if(et=V$2,_e=et.child,(et.subtreeFlags&1028)!==0&&_e!==null)_e.return=et,V$2=_e;else for(;V$2!==null;){et=V$2;try{var gt=et.alternate;if(et.flags&1024)switch(et.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var vt=gt.memoizedProps,yt=gt.memoizedState,mt=et.stateNode,Et=mt.getSnapshotBeforeUpdate(et.elementType===et.type?vt:Lg(et.type,vt),yt);mt.__reactInternalSnapshotBeforeUpdate=Et}break;case 3:var bt=et.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$6(163))}}catch(Ct){W$3(et,et.return,Ct)}if(_e=et.sibling,_e!==null){_e.return=et.return,V$2=_e;break}V$2=et.return}return gt=Oj,Oj=!1,gt}function Qj(_e,et,rt){var nt=et.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var ot=nt=nt.next;do{if((ot.tag&_e)===_e){var it=ot.destroy;ot.destroy=void 0,it!==void 0&&Nj(et,rt,it)}ot=ot.next}while(ot!==nt)}}function Rj(_e,et){if(et=et.updateQueue,et=et!==null?et.lastEffect:null,et!==null){var rt=et=et.next;do{if((rt.tag&_e)===_e){var nt=rt.create;rt.destroy=nt()}rt=rt.next}while(rt!==et)}}function Sj(_e){var et=_e.ref;if(et!==null){var rt=_e.stateNode;switch(_e.tag){case 5:_e=rt;break;default:_e=rt}typeof et=="function"?et(_e):et.current=_e}}function Tj(_e){var et=_e.alternate;et!==null&&(_e.alternate=null,Tj(et)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(et=_e.stateNode,et!==null&&(delete et[Of],delete et[Pf],delete et[of],delete et[Qf],delete et[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Uj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Vj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Uj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Wj(_e,et,rt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,et?rt.nodeType===8?rt.parentNode.insertBefore(_e,et):rt.insertBefore(_e,et):(rt.nodeType===8?(et=rt.parentNode,et.insertBefore(_e,rt)):(et=rt,et.appendChild(_e)),rt=rt._reactRootContainer,rt!=null||et.onclick!==null||(et.onclick=Bf));else if(nt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,et,rt),_e=_e.sibling;_e!==null;)Wj(_e,et,rt),_e=_e.sibling}function Xj(_e,et,rt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,et?rt.insertBefore(_e,et):rt.appendChild(_e);else if(nt!==4&&(_e=_e.child,_e!==null))for(Xj(_e,et,rt),_e=_e.sibling;_e!==null;)Xj(_e,et,rt),_e=_e.sibling}var X$2=null,Yj=!1;function Zj(_e,et,rt){for(rt=rt.child;rt!==null;)ak(_e,et,rt),rt=rt.sibling}function ak(_e,et,rt){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,rt)}catch{}switch(rt.tag){case 5:U$3||Mj(rt,et);case 6:var nt=X$2,ot=Yj;X$2=null,Zj(_e,et,rt),X$2=nt,Yj=ot,X$2!==null&&(Yj?(_e=X$2,rt=rt.stateNode,_e.nodeType===8?_e.parentNode.removeChild(rt):_e.removeChild(rt)):X$2.removeChild(rt.stateNode));break;case 18:X$2!==null&&(Yj?(_e=X$2,rt=rt.stateNode,_e.nodeType===8?Kf(_e.parentNode,rt):_e.nodeType===1&&Kf(_e,rt),bd$1(_e)):Kf(X$2,rt.stateNode));break;case 4:nt=X$2,ot=Yj,X$2=rt.stateNode.containerInfo,Yj=!0,Zj(_e,et,rt),X$2=nt,Yj=ot;break;case 0:case 11:case 14:case 15:if(!U$3&&(nt=rt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){ot=nt=nt.next;do{var it=ot,st=it.destroy;it=it.tag,st!==void 0&&(it&2||it&4)&&Nj(rt,et,st),ot=ot.next}while(ot!==nt)}Zj(_e,et,rt);break;case 1:if(!U$3&&(Mj(rt,et),nt=rt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=rt.memoizedProps,nt.state=rt.memoizedState,nt.componentWillUnmount()}catch(at){W$3(rt,et,at)}Zj(_e,et,rt);break;case 21:Zj(_e,et,rt);break;case 22:rt.mode&1?(U$3=(nt=U$3)||rt.memoizedState!==null,Zj(_e,et,rt),U$3=nt):Zj(_e,et,rt);break;default:Zj(_e,et,rt)}}function bk(_e){var et=_e.updateQueue;if(et!==null){_e.updateQueue=null;var rt=_e.stateNode;rt===null&&(rt=_e.stateNode=new Lj),et.forEach(function(nt){var ot=ck.bind(null,_e,nt);rt.has(nt)||(rt.add(nt),nt.then(ot,ot))})}}function dk(_e,et){var rt=et.deletions;if(rt!==null)for(var nt=0;nt<rt.length;nt++){var ot=rt[nt];try{var it=_e,st=et,at=st;e:for(;at!==null;){switch(at.tag){case 5:X$2=at.stateNode,Yj=!1;break e;case 3:X$2=at.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=at.stateNode.containerInfo,Yj=!0;break e}at=at.return}if(X$2===null)throw Error(p$6(160));ak(it,st,ot),X$2=null,Yj=!1;var lt=ot.alternate;lt!==null&&(lt.return=null),ot.return=null}catch(ct){W$3(ot,et,ct)}}if(et.subtreeFlags&12854)for(et=et.child;et!==null;)ek(et,_e),et=et.sibling}function ek(_e,et){var rt=_e.alternate,nt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(dk(et,_e),fk(_e),nt&4){try{Qj(3,_e,_e.return),Rj(3,_e)}catch(vt){W$3(_e,_e.return,vt)}try{Qj(5,_e,_e.return)}catch(vt){W$3(_e,_e.return,vt)}}break;case 1:dk(et,_e),fk(_e),nt&512&&rt!==null&&Mj(rt,rt.return);break;case 5:if(dk(et,_e),fk(_e),nt&512&&rt!==null&&Mj(rt,rt.return),_e.flags&32){var ot=_e.stateNode;try{ob$1(ot,"")}catch(vt){W$3(_e,_e.return,vt)}}if(nt&4&&(ot=_e.stateNode,ot!=null)){var it=_e.memoizedProps,st=rt!==null?rt.memoizedProps:it,at=_e.type,lt=_e.updateQueue;if(_e.updateQueue=null,lt!==null)try{at==="input"&&it.type==="radio"&&it.name!=null&&ab$1(ot,it),vb$1(at,st);var ct=vb$1(at,it);for(st=0;st<lt.length;st+=2){var pt=lt[st],ut=lt[st+1];pt==="style"?sb$1(ot,ut):pt==="dangerouslySetInnerHTML"?nb$1(ot,ut):pt==="children"?ob$1(ot,ut):ta$1(ot,pt,ut,ct)}switch(at){case"input":bb$1(ot,it);break;case"textarea":ib$1(ot,it);break;case"select":var ht=ot._wrapperState.wasMultiple;ot._wrapperState.wasMultiple=!!it.multiple;var ft=it.value;ft!=null?fb$1(ot,!!it.multiple,ft,!1):ht!==!!it.multiple&&(it.defaultValue!=null?fb$1(ot,!!it.multiple,it.defaultValue,!0):fb$1(ot,!!it.multiple,it.multiple?[]:"",!1))}ot[Pf]=it}catch(vt){W$3(_e,_e.return,vt)}}break;case 6:if(dk(et,_e),fk(_e),nt&4){if(_e.stateNode===null)throw Error(p$6(162));ot=_e.stateNode,it=_e.memoizedProps;try{ot.nodeValue=it}catch(vt){W$3(_e,_e.return,vt)}}break;case 3:if(dk(et,_e),fk(_e),nt&4&&rt!==null&&rt.memoizedState.isDehydrated)try{bd$1(et.containerInfo)}catch(vt){W$3(_e,_e.return,vt)}break;case 4:dk(et,_e),fk(_e);break;case 13:dk(et,_e),fk(_e),ot=_e.child,ot.flags&8192&&(it=ot.memoizedState!==null,ot.stateNode.isHidden=it,!it||ot.alternate!==null&&ot.alternate.memoizedState!==null||(gk=B$2())),nt&4&&bk(_e);break;case 22:if(pt=rt!==null&&rt.memoizedState!==null,_e.mode&1?(U$3=(ct=U$3)||pt,dk(et,_e),U$3=ct):dk(et,_e),fk(_e),nt&8192){if(ct=_e.memoizedState!==null,(_e.stateNode.isHidden=ct)&&!pt&&_e.mode&1)for(V$2=_e,pt=_e.child;pt!==null;){for(ut=V$2=pt;V$2!==null;){switch(ht=V$2,ft=ht.child,ht.tag){case 0:case 11:case 14:case 15:Qj(4,ht,ht.return);break;case 1:Mj(ht,ht.return);var gt=ht.stateNode;if(typeof gt.componentWillUnmount=="function"){nt=ht,rt=ht.return;try{et=nt,gt.props=et.memoizedProps,gt.state=et.memoizedState,gt.componentWillUnmount()}catch(vt){W$3(nt,rt,vt)}}break;case 5:Mj(ht,ht.return);break;case 22:if(ht.memoizedState!==null){hk(ut);continue}}ft!==null?(ft.return=ht,V$2=ft):hk(ut)}pt=pt.sibling}e:for(pt=null,ut=_e;;){if(ut.tag===5){if(pt===null){pt=ut;try{ot=ut.stateNode,ct?(it=ot.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(at=ut.stateNode,lt=ut.memoizedProps.style,st=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,at.style.display=rb$1("display",st))}catch(vt){W$3(_e,_e.return,vt)}}}else if(ut.tag===6){if(pt===null)try{ut.stateNode.nodeValue=ct?"":ut.memoizedProps}catch(vt){W$3(_e,_e.return,vt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===_e)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===_e)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===_e)break e;pt===ut&&(pt=null),ut=ut.return}pt===ut&&(pt=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(et,_e),fk(_e),nt&4&&bk(_e);break;case 21:break;default:dk(et,_e),fk(_e)}}function fk(_e){var et=_e.flags;if(et&2){try{e:{for(var rt=_e.return;rt!==null;){if(Uj(rt)){var nt=rt;break e}rt=rt.return}throw Error(p$6(160))}switch(nt.tag){case 5:var ot=nt.stateNode;nt.flags&32&&(ob$1(ot,""),nt.flags&=-33);var it=Vj(_e);Xj(_e,it,ot);break;case 3:case 4:var st=nt.stateNode.containerInfo,at=Vj(_e);Wj(_e,at,st);break;default:throw Error(p$6(161))}}catch(lt){W$3(_e,_e.return,lt)}_e.flags&=-3}et&4096&&(_e.flags&=-4097)}function ik(_e,et,rt){V$2=_e,jk(_e)}function jk(_e,et,rt){for(var nt=(_e.mode&1)!==0;V$2!==null;){var ot=V$2,it=ot.child;if(ot.tag===22&&nt){var st=ot.memoizedState!==null||Kj;if(!st){var at=ot.alternate,lt=at!==null&&at.memoizedState!==null||U$3;at=Kj;var ct=U$3;if(Kj=st,(U$3=lt)&&!ct)for(V$2=ot;V$2!==null;)st=V$2,lt=st.child,st.tag===22&&st.memoizedState!==null?kk(ot):lt!==null?(lt.return=st,V$2=lt):kk(ot);for(;it!==null;)V$2=it,jk(it),it=it.sibling;V$2=ot,Kj=at,U$3=ct}lk(_e)}else ot.subtreeFlags&8772&&it!==null?(it.return=ot,V$2=it):lk(_e)}}function lk(_e){for(;V$2!==null;){var et=V$2;if(et.flags&8772){var rt=et.alternate;try{if(et.flags&8772)switch(et.tag){case 0:case 11:case 15:U$3||Rj(5,et);break;case 1:var nt=et.stateNode;if(et.flags&4&&!U$3)if(rt===null)nt.componentDidMount();else{var ot=et.elementType===et.type?rt.memoizedProps:Lg(et.type,rt.memoizedProps);nt.componentDidUpdate(ot,rt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=et.updateQueue;it!==null&&ih(et,it,nt);break;case 3:var st=et.updateQueue;if(st!==null){if(rt=null,et.child!==null)switch(et.child.tag){case 5:rt=et.child.stateNode;break;case 1:rt=et.child.stateNode}ih(et,st,rt)}break;case 5:var at=et.stateNode;if(rt===null&&et.flags&4){rt=at;var lt=et.memoizedProps;switch(et.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&rt.focus();break;case"img":lt.src&&(rt.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(et.memoizedState===null){var ct=et.alternate;if(ct!==null){var pt=ct.memoizedState;if(pt!==null){var ut=pt.dehydrated;ut!==null&&bd$1(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$6(163))}U$3||et.flags&512&&Sj(et)}catch(ht){W$3(et,et.return,ht)}}if(et===_e){V$2=null;break}if(rt=et.sibling,rt!==null){rt.return=et.return,V$2=rt;break}V$2=et.return}}function hk(_e){for(;V$2!==null;){var et=V$2;if(et===_e){V$2=null;break}var rt=et.sibling;if(rt!==null){rt.return=et.return,V$2=rt;break}V$2=et.return}}function kk(_e){for(;V$2!==null;){var et=V$2;try{switch(et.tag){case 0:case 11:case 15:var rt=et.return;try{Rj(4,et)}catch(lt){W$3(et,rt,lt)}break;case 1:var nt=et.stateNode;if(typeof nt.componentDidMount=="function"){var ot=et.return;try{nt.componentDidMount()}catch(lt){W$3(et,ot,lt)}}var it=et.return;try{Sj(et)}catch(lt){W$3(et,it,lt)}break;case 5:var st=et.return;try{Sj(et)}catch(lt){W$3(et,st,lt)}}}catch(lt){W$3(et,et.return,lt)}if(et===_e){V$2=null;break}var at=et.sibling;if(at!==null){at.return=et.return,V$2=at;break}V$2=et.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$2=0,R$2=null,Y$2=null,Z$3=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(_e){return _e.mode&1?K$2&2&&Z$3!==0?Z$3&-Z$3:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd$1(_e.type)),_e):1}function mh(_e,et,rt,nt){if(50<zk)throw zk=0,Ak=null,Error(p$6(185));Ac$1(_e,rt,nt),(!(K$2&2)||_e!==R$2)&&(_e===R$2&&(!(K$2&2)&&(rk|=rt),T$1===4&&Dk(_e,Z$3)),Ek(_e,nt),rt===1&&K$2===0&&!(et.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(_e,et){var rt=_e.callbackNode;wc$1(_e,et);var nt=uc$1(_e,_e===R$2?Z$3:0);if(nt===0)rt!==null&&bc$1(rt),_e.callbackNode=null,_e.callbackPriority=0;else if(et=nt&-nt,_e.callbackPriority!==et){if(rt!=null&&bc$1(rt),et===1)_e.tag===0?ig(Fk.bind(null,_e)):hg(Fk.bind(null,_e)),Jf(function(){!(K$2&6)&&jg()}),rt=null;else{switch(Dc$1(nt)){case 1:rt=fc$1;break;case 4:rt=gc$1;break;case 16:rt=hc$1;break;case 536870912:rt=jc$1;break;default:rt=hc$1}rt=Gk(rt,Hk.bind(null,_e))}_e.callbackPriority=et,_e.callbackNode=rt}}function Hk(_e,et){if(Bk=-1,Ck=0,K$2&6)throw Error(p$6(327));var rt=_e.callbackNode;if(Ik()&&_e.callbackNode!==rt)return null;var nt=uc$1(_e,_e===R$2?Z$3:0);if(nt===0)return null;if(nt&30||nt&_e.expiredLanes||et)et=Jk(_e,nt);else{et=nt;var ot=K$2;K$2|=2;var it=Kk();(R$2!==_e||Z$3!==et)&&(vk=null,Hj=B$2()+500,Lk(_e,et));do try{Mk();break}catch(at){Nk(_e,at)}while(1);Qg(),nk.current=it,K$2=ot,Y$2!==null?et=0:(R$2=null,Z$3=0,et=T$1)}if(et!==0){if(et===2&&(ot=xc$1(_e),ot!==0&&(nt=ot,et=Ok(_e,ot))),et===1)throw rt=qk,Lk(_e,0),Dk(_e,nt),Ek(_e,B$2()),rt;if(et===6)Dk(_e,nt);else{if(ot=_e.current.alternate,!(nt&30)&&!Pk(ot)&&(et=Jk(_e,nt),et===2&&(it=xc$1(_e),it!==0&&(nt=it,et=Ok(_e,it))),et===1))throw rt=qk,Lk(_e,0),Dk(_e,nt),Ek(_e,B$2()),rt;switch(_e.finishedWork=ot,_e.finishedLanes=nt,et){case 0:case 1:throw Error(p$6(345));case 2:Qk(_e,uk,vk);break;case 3:if(Dk(_e,nt),(nt&130023424)===nt&&(et=gk+500-B$2(),10<et)){if(uc$1(_e,0)!==0)break;if(ot=_e.suspendedLanes,(ot&nt)!==nt){L$1(),_e.pingedLanes|=_e.suspendedLanes&ot;break}_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),et);break}Qk(_e,uk,vk);break;case 4:if(Dk(_e,nt),(nt&4194240)===nt)break;for(et=_e.eventTimes,ot=-1;0<nt;){var st=31-oc$1(nt);it=1<<st,st=et[st],st>ot&&(ot=st),nt&=~it}if(nt=ot,nt=B$2()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),nt);break}Qk(_e,uk,vk);break;case 5:Qk(_e,uk,vk);break;default:throw Error(p$6(329))}}}return Ek(_e,B$2()),_e.callbackNode===rt?Hk.bind(null,_e):null}function Ok(_e,et){var rt=tk;return _e.current.memoizedState.isDehydrated&&(Lk(_e,et).flags|=256),_e=Jk(_e,et),_e!==2&&(et=uk,uk=rt,et!==null&&Gj(et)),_e}function Gj(_e){uk===null?uk=_e:uk.push.apply(uk,_e)}function Pk(_e){for(var et=_e;;){if(et.flags&16384){var rt=et.updateQueue;if(rt!==null&&(rt=rt.stores,rt!==null))for(var nt=0;nt<rt.length;nt++){var ot=rt[nt],it=ot.getSnapshot;ot=ot.value;try{if(!He(it(),ot))return!1}catch{return!1}}}if(rt=et.child,et.subtreeFlags&16384&&rt!==null)rt.return=et,et=rt;else{if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return!0;et=et.return}et.sibling.return=et.return,et=et.sibling}}return!0}function Dk(_e,et){for(et&=~sk,et&=~rk,_e.suspendedLanes|=et,_e.pingedLanes&=~et,_e=_e.expirationTimes;0<et;){var rt=31-oc$1(et),nt=1<<rt;_e[rt]=-1,et&=~nt}}function Fk(_e){if(K$2&6)throw Error(p$6(327));Ik();var et=uc$1(_e,0);if(!(et&1))return Ek(_e,B$2()),null;var rt=Jk(_e,et);if(_e.tag!==0&&rt===2){var nt=xc$1(_e);nt!==0&&(et=nt,rt=Ok(_e,nt))}if(rt===1)throw rt=qk,Lk(_e,0),Dk(_e,et),Ek(_e,B$2()),rt;if(rt===6)throw Error(p$6(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=et,Qk(_e,uk,vk),Ek(_e,B$2()),null}function Rk(_e,et){var rt=K$2;K$2|=1;try{return _e(et)}finally{K$2=rt,K$2===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(_e){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var et=K$2;K$2|=1;var rt=pk.transition,nt=C$1;try{if(pk.transition=null,C$1=1,_e)return _e()}finally{C$1=nt,pk.transition=rt,K$2=et,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(_e,et){_e.finishedWork=null,_e.finishedLanes=0;var rt=_e.timeoutHandle;if(rt!==-1&&(_e.timeoutHandle=-1,Gf(rt)),Y$2!==null)for(rt=Y$2.return;rt!==null;){var nt=rt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$3),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E$2(M$2);break;case 19:E$2(M$2);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}rt=rt.return}if(R$2=_e,Y$2=_e=wh(_e.current,null),Z$3=gj=et,T$1=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(et=0;et<Wg.length;et++)if(rt=Wg[et],nt=rt.interleaved,nt!==null){rt.interleaved=null;var ot=nt.next,it=rt.pending;if(it!==null){var st=it.next;it.next=ot,nt.next=st}rt.pending=nt}Wg=null}return _e}function Nk(_e,et){do{var rt=Y$2;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N$3.memoizedState;nt!==null;){var ot=nt.queue;ot!==null&&(ot.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P$2=O$3=N$3=null,Th=!1,Uh=0,ok.current=null,rt===null||rt.return===null){T$1=1,qk=et,Y$2=null;break}e:{var it=_e,st=rt.return,at=rt,lt=et;if(et=Z$3,at.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var ct=lt,pt=at,ut=pt.tag;if(!(pt.mode&1)&&(ut===0||ut===11||ut===15)){var ht=pt.alternate;ht?(pt.updateQueue=ht.updateQueue,pt.memoizedState=ht.memoizedState,pt.lanes=ht.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var ft=Vi(st);if(ft!==null){ft.flags&=-257,Wi(ft,st,at,it,et),ft.mode&1&&Ti(it,ct,et),et=ft,lt=ct;var gt=et.updateQueue;if(gt===null){var vt=new Set;vt.add(lt),et.updateQueue=vt}else gt.add(lt);break e}else{if(!(et&1)){Ti(it,ct,et),uj();break e}lt=Error(p$6(426))}}else if(I$2&&at.mode&1){var yt=Vi(st);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),Wi(yt,st,at,it,et),Jg(Ki(lt,at));break e}}it=lt=Ki(lt,at),T$1!==4&&(T$1=2),tk===null?tk=[it]:tk.push(it),it=st;do{switch(it.tag){case 3:it.flags|=65536,et&=-et,it.lanes|=et;var mt=Oi(it,lt,et);fh(it,mt);break e;case 1:at=lt;var Et=it.type,bt=it.stateNode;if(!(it.flags&128)&&(typeof Et.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Si===null||!Si.has(bt)))){it.flags|=65536,et&=-et,it.lanes|=et;var Ct=Ri(it,at,et);fh(it,Ct);break e}}it=it.return}while(it!==null)}Tk(rt)}catch(Tt){et=Tt,Y$2===rt&&rt!==null&&(Y$2=rt=rt.return);continue}break}while(1)}function Kk(){var _e=nk.current;return nk.current=ai,_e===null?ai:_e}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$2===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$2,Z$3)}function Jk(_e,et){var rt=K$2;K$2|=2;var nt=Kk();(R$2!==_e||Z$3!==et)&&(vk=null,Lk(_e,et));do try{Uk();break}catch(ot){Nk(_e,ot)}while(1);if(Qg(),K$2=rt,nk.current=nt,Y$2!==null)throw Error(p$6(261));return R$2=null,Z$3=0,T$1}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(_e){var et=Wk(_e.alternate,_e,gj);_e.memoizedProps=_e.pendingProps,et===null?Tk(_e):Y$2=et,ok.current=null}function Tk(_e){var et=_e;do{var rt=et.alternate;if(_e=et.return,et.flags&32768){if(rt=Jj(rt,et),rt!==null){rt.flags&=32767,Y$2=rt;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$1=6,Y$2=null;return}}else if(rt=Fj(rt,et,gj),rt!==null){Y$2=rt;return}if(et=et.sibling,et!==null){Y$2=et;return}Y$2=et=_e}while(et!==null);T$1===0&&(T$1=5)}function Qk(_e,et,rt){var nt=C$1,ot=pk.transition;try{pk.transition=null,C$1=1,Xk(_e,et,rt,nt)}finally{pk.transition=ot,C$1=nt}return null}function Xk(_e,et,rt,nt){do Ik();while(xk!==null);if(K$2&6)throw Error(p$6(327));rt=_e.finishedWork;var ot=_e.finishedLanes;if(rt===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,rt===_e.current)throw Error(p$6(177));_e.callbackNode=null,_e.callbackPriority=0;var it=rt.lanes|rt.childLanes;if(Bc$1(_e,it),_e===R$2&&(Y$2=R$2=null,Z$3=0),!(rt.subtreeFlags&2064)&&!(rt.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),it=(rt.flags&15990)!==0,rt.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var st=C$1;C$1=1;var at=K$2;K$2|=4,ok.current=null,Pj(_e,rt),ek(rt,_e),Oe$1(Df),dd$1=!!Cf,Df=Cf=null,_e.current=rt,ik(rt),dc$1(),K$2=at,C$1=st,pk.transition=it}else _e.current=rt;if(wk&&(wk=!1,xk=_e,yk=ot),it=_e.pendingLanes,it===0&&(Si=null),mc$1(rt.stateNode),Ek(_e,B$2()),et!==null)for(nt=_e.onRecoverableError,rt=0;rt<et.length;rt++)ot=et[rt],nt(ot.value,{componentStack:ot.stack,digest:ot.digest});if(Pi)throw Pi=!1,_e=Qi,Qi=null,_e;return yk&1&&_e.tag!==0&&Ik(),it=_e.pendingLanes,it&1?_e===Ak?zk++:(zk=0,Ak=_e):zk=0,jg(),null}function Ik(){if(xk!==null){var _e=Dc$1(yk),et=pk.transition,rt=C$1;try{if(pk.transition=null,C$1=16>_e?16:_e,xk===null)var nt=!1;else{if(_e=xk,xk=null,yk=0,K$2&6)throw Error(p$6(331));var ot=K$2;for(K$2|=4,V$2=_e.current;V$2!==null;){var it=V$2,st=it.child;if(V$2.flags&16){var at=it.deletions;if(at!==null){for(var lt=0;lt<at.length;lt++){var ct=at[lt];for(V$2=ct;V$2!==null;){var pt=V$2;switch(pt.tag){case 0:case 11:case 15:Qj(8,pt,it)}var ut=pt.child;if(ut!==null)ut.return=pt,V$2=ut;else for(;V$2!==null;){pt=V$2;var ht=pt.sibling,ft=pt.return;if(Tj(pt),pt===ct){V$2=null;break}if(ht!==null){ht.return=ft,V$2=ht;break}V$2=ft}}}var gt=it.alternate;if(gt!==null){var vt=gt.child;if(vt!==null){gt.child=null;do{var yt=vt.sibling;vt.sibling=null,vt=yt}while(vt!==null)}}V$2=it}}if(it.subtreeFlags&2064&&st!==null)st.return=it,V$2=st;else e:for(;V$2!==null;){if(it=V$2,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var mt=it.sibling;if(mt!==null){mt.return=it.return,V$2=mt;break e}V$2=it.return}}var Et=_e.current;for(V$2=Et;V$2!==null;){st=V$2;var bt=st.child;if(st.subtreeFlags&2064&&bt!==null)bt.return=st,V$2=bt;else e:for(st=Et;V$2!==null;){if(at=V$2,at.flags&2048)try{switch(at.tag){case 0:case 11:case 15:Rj(9,at)}}catch(Tt){W$3(at,at.return,Tt)}if(at===st){V$2=null;break e}var Ct=at.sibling;if(Ct!==null){Ct.return=at.return,V$2=Ct;break e}V$2=at.return}}if(K$2=ot,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,_e)}catch{}nt=!0}return nt}finally{C$1=rt,pk.transition=et}}return!1}function Yk(_e,et,rt){et=Ki(rt,et),et=Oi(_e,et,1),_e=dh(_e,et,1),et=L$1(),_e!==null&&(Ac$1(_e,1,et),Ek(_e,et))}function W$3(_e,et,rt){if(_e.tag===3)Yk(_e,_e,rt);else for(;et!==null;){if(et.tag===3){Yk(et,_e,rt);break}else if(et.tag===1){var nt=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){_e=Ki(rt,_e),_e=Ri(et,_e,1),et=dh(et,_e,1),_e=L$1(),et!==null&&(Ac$1(et,1,_e),Ek(et,_e));break}}et=et.return}}function Ui(_e,et,rt){var nt=_e.pingCache;nt!==null&&nt.delete(et),et=L$1(),_e.pingedLanes|=_e.suspendedLanes&rt,R$2===_e&&(Z$3&rt)===rt&&(T$1===4||T$1===3&&(Z$3&130023424)===Z$3&&500>B$2()-gk?Lk(_e,0):sk|=rt),Ek(_e,et)}function Zk(_e,et){et===0&&(_e.mode&1?(et=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):et=1);var rt=L$1();_e=Zg(_e,et),_e!==null&&(Ac$1(_e,et,rt),Ek(_e,rt))}function vj(_e){var et=_e.memoizedState,rt=0;et!==null&&(rt=et.retryLane),Zk(_e,rt)}function ck(_e,et){var rt=0;switch(_e.tag){case 13:var nt=_e.stateNode,ot=_e.memoizedState;ot!==null&&(rt=ot.retryLane);break;case 19:nt=_e.stateNode;break;default:throw Error(p$6(314))}nt!==null&&nt.delete(et),Zk(_e,rt)}var Wk;Wk=function(_e,et,rt){if(_e!==null)if(_e.memoizedProps!==et.pendingProps||Wf.current)Ug=!0;else{if(!(_e.lanes&rt)&&!(et.flags&128))return Ug=!1,zj(_e,et,rt);Ug=!!(_e.flags&131072)}else Ug=!1,I$2&&et.flags&1048576&&ug(et,ng,et.index);switch(et.lanes=0,et.tag){case 2:var nt=et.type;jj(_e,et),_e=et.pendingProps;var ot=Yf(et,H$3.current);Tg(et,rt),ot=Xh(null,et,nt,_e,ot,rt);var it=bi();return et.flags|=1,typeof ot=="object"&&ot!==null&&typeof ot.render=="function"&&ot.$$typeof===void 0?(et.tag=1,et.memoizedState=null,et.updateQueue=null,Zf(nt)?(it=!0,cg(et)):it=!1,et.memoizedState=ot.state!==null&&ot.state!==void 0?ot.state:null,ah$1(et),ot.updater=nh,et.stateNode=ot,ot._reactInternals=et,rh(et,nt,_e,rt),et=kj(null,et,nt,!0,it,rt)):(et.tag=0,I$2&&it&&vg(et),Yi(null,et,ot,rt),et=et.child),et;case 16:nt=et.elementType;e:{switch(jj(_e,et),_e=et.pendingProps,ot=nt._init,nt=ot(nt._payload),et.type=nt,ot=et.tag=$k(nt),_e=Lg(nt,_e),ot){case 0:et=dj(null,et,nt,_e,rt);break e;case 1:et=ij(null,et,nt,_e,rt);break e;case 11:et=Zi(null,et,nt,_e,rt);break e;case 14:et=aj(null,et,nt,Lg(nt.type,_e),rt);break e}throw Error(p$6(306,nt,""))}return et;case 0:return nt=et.type,ot=et.pendingProps,ot=et.elementType===nt?ot:Lg(nt,ot),dj(_e,et,nt,ot,rt);case 1:return nt=et.type,ot=et.pendingProps,ot=et.elementType===nt?ot:Lg(nt,ot),ij(_e,et,nt,ot,rt);case 3:e:{if(lj(et),_e===null)throw Error(p$6(387));nt=et.pendingProps,it=et.memoizedState,ot=it.element,bh(_e,et),gh(et,nt,null,rt);var st=et.memoizedState;if(nt=st.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},et.updateQueue.baseState=it,et.memoizedState=it,et.flags&256){ot=Ki(Error(p$6(423)),et),et=mj(_e,et,nt,rt,ot);break e}else if(nt!==ot){ot=Ki(Error(p$6(424)),et),et=mj(_e,et,nt,rt,ot);break e}else for(yg=Lf(et.stateNode.containerInfo.firstChild),xg=et,I$2=!0,zg=null,rt=Ch(et,null,nt,rt),et.child=rt;rt;)rt.flags=rt.flags&-3|4096,rt=rt.sibling;else{if(Ig(),nt===ot){et=$i(_e,et,rt);break e}Yi(_e,et,nt,rt)}et=et.child}return et;case 5:return Kh(et),_e===null&&Eg(et),nt=et.type,ot=et.pendingProps,it=_e!==null?_e.memoizedProps:null,st=ot.children,Ef(nt,ot)?st=null:it!==null&&Ef(nt,it)&&(et.flags|=32),hj(_e,et),Yi(_e,et,st,rt),et.child;case 6:return _e===null&&Eg(et),null;case 13:return pj(_e,et,rt);case 4:return Ih$1(et,et.stateNode.containerInfo),nt=et.pendingProps,_e===null?et.child=Bh(et,null,nt,rt):Yi(_e,et,nt,rt),et.child;case 11:return nt=et.type,ot=et.pendingProps,ot=et.elementType===nt?ot:Lg(nt,ot),Zi(_e,et,nt,ot,rt);case 7:return Yi(_e,et,et.pendingProps,rt),et.child;case 8:return Yi(_e,et,et.pendingProps.children,rt),et.child;case 12:return Yi(_e,et,et.pendingProps.children,rt),et.child;case 10:e:{if(nt=et.type._context,ot=et.pendingProps,it=et.memoizedProps,st=ot.value,G$3(Mg,nt._currentValue),nt._currentValue=st,it!==null)if(He(it.value,st)){if(it.children===ot.children&&!Wf.current){et=$i(_e,et,rt);break e}}else for(it=et.child,it!==null&&(it.return=et);it!==null;){var at=it.dependencies;if(at!==null){st=it.child;for(var lt=at.firstContext;lt!==null;){if(lt.context===nt){if(it.tag===1){lt=ch(-1,rt&-rt),lt.tag=2;var ct=it.updateQueue;if(ct!==null){ct=ct.shared;var pt=ct.pending;pt===null?lt.next=lt:(lt.next=pt.next,pt.next=lt),ct.pending=lt}}it.lanes|=rt,lt=it.alternate,lt!==null&&(lt.lanes|=rt),Sg(it.return,rt,et),at.lanes|=rt;break}lt=lt.next}}else if(it.tag===10)st=it.type===et.type?null:it.child;else if(it.tag===18){if(st=it.return,st===null)throw Error(p$6(341));st.lanes|=rt,at=st.alternate,at!==null&&(at.lanes|=rt),Sg(st,rt,et),st=it.sibling}else st=it.child;if(st!==null)st.return=it;else for(st=it;st!==null;){if(st===et){st=null;break}if(it=st.sibling,it!==null){it.return=st.return,st=it;break}st=st.return}it=st}Yi(_e,et,ot.children,rt),et=et.child}return et;case 9:return ot=et.type,nt=et.pendingProps.children,Tg(et,rt),ot=Vg(ot),nt=nt(ot),et.flags|=1,Yi(_e,et,nt,rt),et.child;case 14:return nt=et.type,ot=Lg(nt,et.pendingProps),ot=Lg(nt.type,ot),aj(_e,et,nt,ot,rt);case 15:return cj(_e,et,et.type,et.pendingProps,rt);case 17:return nt=et.type,ot=et.pendingProps,ot=et.elementType===nt?ot:Lg(nt,ot),jj(_e,et),et.tag=1,Zf(nt)?(_e=!0,cg(et)):_e=!1,Tg(et,rt),ph(et,nt,ot),rh(et,nt,ot,rt),kj(null,et,nt,!0,_e,rt);case 19:return yj(_e,et,rt);case 22:return ej(_e,et,rt)}throw Error(p$6(156,et.tag))};function Gk(_e,et){return ac$1(_e,et)}function al(_e,et,rt,nt){this.tag=_e,this.key=rt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,et,rt,nt){return new al(_e,et,rt,nt)}function bj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function $k(_e){if(typeof _e=="function")return bj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da$1)return 11;if(_e===Ga$1)return 14}return 2}function wh(_e,et){var rt=_e.alternate;return rt===null?(rt=Bg(_e.tag,et,_e.key,_e.mode),rt.elementType=_e.elementType,rt.type=_e.type,rt.stateNode=_e.stateNode,rt.alternate=_e,_e.alternate=rt):(rt.pendingProps=et,rt.type=_e.type,rt.flags=0,rt.subtreeFlags=0,rt.deletions=null),rt.flags=_e.flags&14680064,rt.childLanes=_e.childLanes,rt.lanes=_e.lanes,rt.child=_e.child,rt.memoizedProps=_e.memoizedProps,rt.memoizedState=_e.memoizedState,rt.updateQueue=_e.updateQueue,et=_e.dependencies,rt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext},rt.sibling=_e.sibling,rt.index=_e.index,rt.ref=_e.ref,rt}function yh(_e,et,rt,nt,ot,it){var st=2;if(nt=_e,typeof _e=="function")bj(_e)&&(st=1);else if(typeof _e=="string")st=5;else e:switch(_e){case ya$1:return Ah(rt.children,ot,it,et);case za$1:st=8,ot|=8;break;case Aa$1:return _e=Bg(12,rt,et,ot|2),_e.elementType=Aa$1,_e.lanes=it,_e;case Ea$1:return _e=Bg(13,rt,et,ot),_e.elementType=Ea$1,_e.lanes=it,_e;case Fa$1:return _e=Bg(19,rt,et,ot),_e.elementType=Fa$1,_e.lanes=it,_e;case Ia:return qj(rt,ot,it,et);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba$1:st=10;break e;case Ca$1:st=9;break e;case Da$1:st=11;break e;case Ga$1:st=14;break e;case Ha$1:st=16,nt=null;break e}throw Error(p$6(130,_e==null?_e:typeof _e,""))}return et=Bg(st,rt,et,ot),et.elementType=_e,et.type=nt,et.lanes=it,et}function Ah(_e,et,rt,nt){return _e=Bg(7,_e,nt,et),_e.lanes=rt,_e}function qj(_e,et,rt,nt){return _e=Bg(22,_e,nt,et),_e.elementType=Ia,_e.lanes=rt,_e.stateNode={isHidden:!1},_e}function xh(_e,et,rt){return _e=Bg(6,_e,null,et),_e.lanes=rt,_e}function zh(_e,et,rt){return et=Bg(4,_e.children!==null?_e.children:[],_e.key,et),et.lanes=rt,et.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},et}function bl(_e,et,rt,nt,ot){this.tag=et,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=nt,this.onRecoverableError=ot,this.mutableSourceEagerHydrationData=null}function cl(_e,et,rt,nt,ot,it,st,at,lt){return _e=new bl(_e,et,rt,at,lt),et===1?(et=1,it===!0&&(et|=8)):et=0,it=Bg(3,null,null,et),_e.current=it,it.stateNode=_e,it.memoizedState={element:nt,isDehydrated:rt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(it),_e}function dl(_e,et,rt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:nt==null?null:""+nt,children:_e,containerInfo:et,implementation:rt}}function el(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb$1(_e)!==_e||_e.tag!==1)throw Error(p$6(170));var et=_e;do{switch(et.tag){case 3:et=et.stateNode.context;break e;case 1:if(Zf(et.type)){et=et.stateNode.__reactInternalMemoizedMergedChildContext;break e}}et=et.return}while(et!==null);throw Error(p$6(171))}if(_e.tag===1){var rt=_e.type;if(Zf(rt))return bg(_e,rt,et)}return et}function fl(_e,et,rt,nt,ot,it,st,at,lt){return _e=cl(rt,nt,!0,_e,ot,it,st,at,lt),_e.context=el(null),rt=_e.current,nt=L$1(),ot=lh(rt),it=ch(nt,ot),it.callback=et??null,dh(rt,it,ot),_e.current.lanes=ot,Ac$1(_e,ot,nt),Ek(_e,nt),_e}function gl(_e,et,rt,nt){var ot=et.current,it=L$1(),st=lh(ot);return rt=el(rt),et.context===null?et.context=rt:et.pendingContext=rt,et=ch(it,st),et.payload={element:_e},nt=nt===void 0?null:nt,nt!==null&&(et.callback=nt),_e=dh(ot,et,st),_e!==null&&(mh(_e,ot,st,it),eh$1(_e,ot,st)),st}function hl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function il(_e,et){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var rt=_e.retryLane;_e.retryLane=rt!==0&&rt<et?rt:et}}function jl(_e,et){il(_e,et),(_e=_e.alternate)&&il(_e,et)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ml(_e){this._internalRoot=_e}nl.prototype.render=ml.prototype.render=function(_e){var et=this._internalRoot;if(et===null)throw Error(p$6(409));gl(_e,et,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var et=_e.containerInfo;Sk(function(){gl(null,_e,null,null)}),et[uf]=null}};function nl(_e){this._internalRoot=_e}nl.prototype.unstable_scheduleHydration=function(_e){if(_e){var et=Hc$1();_e={blockedOn:null,target:_e,priority:et};for(var rt=0;rt<Qc$1.length&&et!==0&&et<Qc$1[rt].priority;rt++);Qc$1.splice(rt,0,_e),rt===0&&Vc$1(_e)}};function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function pl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_e,et,rt,nt,ot){if(ot){if(typeof nt=="function"){var it=nt;nt=function(){var ct=hl(st);it.call(ct)}}var st=fl(et,nt,_e,0,null,!1,!1,"",ql);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(),st}for(;ot=_e.lastChild;)_e.removeChild(ot);if(typeof nt=="function"){var at=nt;nt=function(){var ct=hl(lt);at.call(ct)}}var lt=cl(_e,0,!1,null,null,!1,!1,"",ql);return _e._reactRootContainer=lt,_e[uf]=lt.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(function(){gl(et,lt,rt,nt)}),lt}function sl(_e,et,rt,nt,ot){var it=rt._reactRootContainer;if(it){var st=it;if(typeof ot=="function"){var at=ot;ot=function(){var lt=hl(st);at.call(lt)}}gl(et,st,_e,ot)}else st=rl(rt,et,_e,ot,nt);return hl(st)}Ec$2=function(_e){switch(_e.tag){case 3:var et=_e.stateNode;if(et.current.memoizedState.isDehydrated){var rt=tc$1(et.pendingLanes);rt!==0&&(Cc$1(et,rt|1),Ek(et,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(_e,1);if(nt!==null){var ot=L$1();mh(nt,_e,1,ot)}}),jl(_e,1)}};Fc$1=function(_e){if(_e.tag===13){var et=Zg(_e,134217728);if(et!==null){var rt=L$1();mh(et,_e,134217728,rt)}jl(_e,134217728)}};Gc$1=function(_e){if(_e.tag===13){var et=lh(_e),rt=Zg(_e,et);if(rt!==null){var nt=L$1();mh(rt,_e,et,nt)}jl(_e,et)}};Hc$1=function(){return C$1};Ic$1=function(_e,et){var rt=C$1;try{return C$1=_e,et()}finally{C$1=rt}};yb$1=function(_e,et,rt){switch(et){case"input":if(bb$1(_e,rt),et=rt.name,rt.type==="radio"&&et!=null){for(rt=_e;rt.parentNode;)rt=rt.parentNode;for(rt=rt.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<rt.length;et++){var nt=rt[et];if(nt!==_e&&nt.form===_e.form){var ot=Db$1(nt);if(!ot)throw Error(p$6(90));Wa$1(nt),bb$1(nt,ot)}}}break;case"textarea":ib$1(_e,rt);break;case"select":et=rt.value,et!=null&&fb$1(_e,!!rt.multiple,et,!1)}};Gb$1=Rk;Hb$1=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb$1,ue,Db$1,Eb$1,Fb,Rk]},ul={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb$1(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc$1=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_e,et){var rt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(et))throw Error(p$6(200));return dl(_e,et,null,rt)};reactDom_production_min.createRoot=function(_e,et){if(!ol(_e))throw Error(p$6(299));var rt=!1,nt="",ot=ll;return et!=null&&(et.unstable_strictMode===!0&&(rt=!0),et.identifierPrefix!==void 0&&(nt=et.identifierPrefix),et.onRecoverableError!==void 0&&(ot=et.onRecoverableError)),et=cl(_e,1,!1,null,null,rt,!1,nt,ot),_e[uf]=et.current,sf(_e.nodeType===8?_e.parentNode:_e),new ml(et)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var et=_e._reactInternals;if(et===void 0)throw typeof _e.render=="function"?Error(p$6(188)):(_e=Object.keys(_e).join(","),Error(p$6(268,_e)));return _e=Zb$1(et),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Sk(_e)};reactDom_production_min.hydrate=function(_e,et,rt){if(!pl(et))throw Error(p$6(200));return sl(null,_e,et,!0,rt)};reactDom_production_min.hydrateRoot=function(_e,et,rt){if(!ol(_e))throw Error(p$6(405));var nt=rt!=null&&rt.hydratedSources||null,ot=!1,it="",st=ll;if(rt!=null&&(rt.unstable_strictMode===!0&&(ot=!0),rt.identifierPrefix!==void 0&&(it=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(st=rt.onRecoverableError)),et=fl(et,null,_e,1,rt??null,ot,!1,it,st),_e[uf]=et.current,sf(_e),nt)for(_e=0;_e<nt.length;_e++)rt=nt[_e],ot=rt._getVersion,ot=ot(rt._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[rt,ot]:et.mutableSourceEagerHydrationData.push(rt,ot);return new nl(et)};reactDom_production_min.render=function(_e,et,rt){if(!pl(et))throw Error(p$6(200));return sl(null,_e,et,!1,rt)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!pl(_e))throw Error(p$6(40));return _e._reactRootContainer?(Sk(function(){sl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,et,rt,nt){if(!pl(rt))throw Error(p$6(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$6(38));return sl(_e,et,rt,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(_e){function et(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(et)}catch(rt){console.error(rt)}}et(),_e.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$4=reactDomExports;client.createRoot=m$4.createRoot,client.hydrateRoot=m$4.hydrateRoot;/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(_e[nt]=rt[nt])}return _e},_extends$3.apply(this,arguments)}var Action;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_e){_e===void 0&&(_e={});function et(nt,ot){let{pathname:it,search:st,hash:at}=nt.location;return createLocation("",{pathname:it,search:st,hash:at},ot.state&&ot.state.usr||null,ot.state&&ot.state.key||"default")}function rt(nt,ot){return typeof ot=="string"?ot:createPath(ot)}return getUrlBasedHistory(et,rt,null,_e)}function invariant(_e,et){if(_e===!1||_e===null||typeof _e>"u")throw new Error(et)}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,et){return{usr:_e.state,key:_e.key,idx:et}}function createLocation(_e,et,rt,nt){return rt===void 0&&(rt=null),_extends$3({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof et=="string"?parsePath(et):et,{state:rt,key:et&&et.key||nt||createKey()})}function createPath(_e){let{pathname:et="/",search:rt="",hash:nt=""}=_e;return rt&&rt!=="?"&&(et+=rt.charAt(0)==="?"?rt:"?"+rt),nt&&nt!=="#"&&(et+=nt.charAt(0)==="#"?nt:"#"+nt),et}function parsePath(_e){let et={};if(_e){let rt=_e.indexOf("#");rt>=0&&(et.hash=_e.substr(rt),_e=_e.substr(0,rt));let nt=_e.indexOf("?");nt>=0&&(et.search=_e.substr(nt),_e=_e.substr(0,nt)),_e&&(et.pathname=_e)}return et}function getUrlBasedHistory(_e,et,rt,nt){nt===void 0&&(nt={});let{window:ot=document.defaultView,v5Compat:it=!1}=nt,st=ot.history,at=Action.Pop,lt=null,ct=pt();ct==null&&(ct=0,st.replaceState(_extends$3({},st.state,{idx:ct}),""));function pt(){return(st.state||{idx:null}).idx}function ut(){at=Action.Pop;let yt=pt(),mt=yt==null?null:yt-ct;ct=yt,lt&&lt({action:at,location:vt.location,delta:mt})}function ht(yt,mt){at=Action.Push;let Et=createLocation(vt.location,yt,mt);rt&&rt(Et,yt),ct=pt()+1;let bt=getHistoryState(Et,ct),Ct=vt.createHref(Et);try{st.pushState(bt,"",Ct)}catch{ot.location.assign(Ct)}it&&lt&&lt({action:at,location:vt.location,delta:1})}function ft(yt,mt){at=Action.Replace;let Et=createLocation(vt.location,yt,mt);rt&&rt(Et,yt),ct=pt();let bt=getHistoryState(Et,ct),Ct=vt.createHref(Et);st.replaceState(bt,"",Ct),it&&lt&&lt({action:at,location:vt.location,delta:0})}function gt(yt){let mt=ot.location.origin!=="null"?ot.location.origin:ot.location.href,Et=typeof yt=="string"?yt:createPath(yt);return invariant(mt,"No window.location.(origin|href) available to create URL for href: "+Et),new URL(Et,mt)}let vt={get action(){return at},get location(){return _e(ot,st)},listen(yt){if(lt)throw new Error("A history only accepts one active listener");return ot.addEventListener(PopStateEventType,ut),lt=yt,()=>{ot.removeEventListener(PopStateEventType,ut),lt=null}},createHref(yt){return et(ot,yt)},createURL:gt,encodeLocation(yt){let mt=gt(yt);return{pathname:mt.pathname,search:mt.search,hash:mt.hash}},push:ht,replace:ft,go(yt){return st.go(yt)}};return vt}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,et,rt){rt===void 0&&(rt="/");let nt=typeof et=="string"?parsePath(et):et,ot=stripBasename(nt.pathname||"/",rt);if(ot==null)return null;let it=flattenRoutes(_e);rankRouteBranches(it);let st=null;for(let at=0;st==null&&at<it.length;++at)st=matchRouteBranch(it[at],safelyDecodeURI(ot));return st}function flattenRoutes(_e,et,rt,nt){et===void 0&&(et=[]),rt===void 0&&(rt=[]),nt===void 0&&(nt="");let ot=(it,st,at)=>{let lt={relativePath:at===void 0?it.path||"":at,caseSensitive:it.caseSensitive===!0,childrenIndex:st,route:it};lt.relativePath.startsWith("/")&&(invariant(lt.relativePath.startsWith(nt),'Absolute route path "'+lt.relativePath+'" nested under path '+('"'+nt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),lt.relativePath=lt.relativePath.slice(nt.length));let ct=joinPaths([nt,lt.relativePath]),pt=rt.concat(lt);it.children&&it.children.length>0&&(invariant(it.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ct+'".')),flattenRoutes(it.children,et,pt,ct)),!(it.path==null&&!it.index)&&et.push({path:ct,score:computeScore(ct,it.index),routesMeta:pt})};return _e.forEach((it,st)=>{var at;if(it.path===""||!((at=it.path)!=null&&at.includes("?")))ot(it,st);else for(let lt of explodeOptionalSegments(it.path))ot(it,st,lt)}),et}function explodeOptionalSegments(_e){let et=_e.split("/");if(et.length===0)return[];let[rt,...nt]=et,ot=rt.endsWith("?"),it=rt.replace(/\?$/,"");if(nt.length===0)return ot?[it,""]:[it];let st=explodeOptionalSegments(nt.join("/")),at=[];return at.push(...st.map(lt=>lt===""?it:[it,lt].join("/"))),ot&&at.push(...st),at.map(lt=>_e.startsWith("/")&&lt===""?"/":lt)}function rankRouteBranches(_e){_e.sort((et,rt)=>et.score!==rt.score?rt.score-et.score:compareIndexes(et.routesMeta.map(nt=>nt.childrenIndex),rt.routesMeta.map(nt=>nt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,et){let rt=_e.split("/"),nt=rt.length;return rt.some(isSplat)&&(nt+=splatPenalty),et&&(nt+=indexRouteValue),rt.filter(ot=>!isSplat(ot)).reduce((ot,it)=>ot+(paramRe.test(it)?dynamicSegmentValue:it===""?emptySegmentValue:staticSegmentValue),nt)}function compareIndexes(_e,et){return _e.length===et.length&&_e.slice(0,-1).every((nt,ot)=>nt===et[ot])?_e[_e.length-1]-et[et.length-1]:0}function matchRouteBranch(_e,et){let{routesMeta:rt}=_e,nt={},ot="/",it=[];for(let st=0;st<rt.length;++st){let at=rt[st],lt=st===rt.length-1,ct=ot==="/"?et:et.slice(ot.length)||"/",pt=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:lt},ct);if(!pt)return null;Object.assign(nt,pt.params);let ut=at.route;it.push({params:nt,pathname:joinPaths([ot,pt.pathname]),pathnameBase:normalizePathname(joinPaths([ot,pt.pathnameBase])),route:ut}),pt.pathnameBase!=="/"&&(ot=joinPaths([ot,pt.pathnameBase]))}return it}function matchPath(_e,et){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[rt,nt]=compilePath(_e.path,_e.caseSensitive,_e.end),ot=et.match(rt);if(!ot)return null;let it=ot[0],st=it.replace(/(.)\/+$/,"$1"),at=ot.slice(1);return{params:nt.reduce((ct,pt,ut)=>{if(pt==="*"){let ht=at[ut]||"";st=it.slice(0,it.length-ht.length).replace(/(.)\/+$/,"$1")}return ct[pt]=safelyDecodeURIComponent(at[ut]||"",pt),ct},{}),pathname:it,pathnameBase:st,pattern:_e}}function compilePath(_e,et,rt){et===void 0&&(et=!1),rt===void 0&&(rt=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let nt=[],ot="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(st,at)=>(nt.push(at),"/([^\\/]+)"));return _e.endsWith("*")?(nt.push("*"),ot+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):rt?ot+="\\/*$":_e!==""&&_e!=="/"&&(ot+="(?:(?=\\/|$))"),[new RegExp(ot,et?void 0:"i"),nt]}function safelyDecodeURI(_e){try{return decodeURI(_e)}catch(et){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+et+").")),_e}}function safelyDecodeURIComponent(_e,et){try{return decodeURIComponent(_e)}catch(rt){return warning(!1,'The value for the URL param "'+et+'" will not be decoded because'+(' the string "'+_e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+rt+").")),_e}}function stripBasename(_e,et){if(et==="/")return _e;if(!_e.toLowerCase().startsWith(et.toLowerCase()))return null;let rt=et.endsWith("/")?et.length-1:et.length,nt=_e.charAt(rt);return nt&&nt!=="/"?null:_e.slice(rt)||"/"}function warning(_e,et){if(!_e){typeof console<"u"&&console.warn(et);try{throw new Error(et)}catch{}}}function resolvePath(_e,et){et===void 0&&(et="/");let{pathname:rt,search:nt="",hash:ot=""}=typeof _e=="string"?parsePath(_e):_e;return{pathname:rt?rt.startsWith("/")?rt:resolvePathname(rt,et):et,search:normalizeSearch(nt),hash:normalizeHash(ot)}}function resolvePathname(_e,et){let rt=et.replace(/\/+$/,"").split("/");return _e.split("/").forEach(ot=>{ot===".."?rt.length>1&&rt.pop():ot!=="."&&rt.push(ot)}),rt.length>1?rt.join("/"):"/"}function getInvalidPathError(_e,et,rt,nt){return"Cannot include a '"+_e+"' character in a manually specified "+("`to."+et+"` field ["+JSON.stringify(nt)+"].  Please separate it out to the ")+("`to."+rt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_e){return _e.filter((et,rt)=>rt===0||et.route.path&&et.route.path.length>0)}function resolveTo(_e,et,rt,nt){nt===void 0&&(nt=!1);let ot;typeof _e=="string"?ot=parsePath(_e):(ot=_extends$3({},_e),invariant(!ot.pathname||!ot.pathname.includes("?"),getInvalidPathError("?","pathname","search",ot)),invariant(!ot.pathname||!ot.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ot)),invariant(!ot.search||!ot.search.includes("#"),getInvalidPathError("#","search","hash",ot)));let it=_e===""||ot.pathname==="",st=it?"/":ot.pathname,at;if(nt||st==null)at=rt;else{let ut=et.length-1;if(st.startsWith("..")){let ht=st.split("/");for(;ht[0]==="..";)ht.shift(),ut-=1;ot.pathname=ht.join("/")}at=ut>=0?et[ut]:"/"}let lt=resolvePath(ot,at),ct=st&&st!=="/"&&st.endsWith("/"),pt=(it||st===".")&&rt.endsWith("/");return!lt.pathname.endsWith("/")&&(ct||pt)&&(lt.pathname+="/"),lt}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_e=>!_e||_e==="?"?"":_e.startsWith("?")?_e:"?"+_e,normalizeHash=_e=>!_e||_e==="#"?"":_e.startsWith("#")?_e:"#"+_e;function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}const validMutationMethodsArr=["post","put","patch","delete"];[...validMutationMethodsArr];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(_e[nt]=rt[nt])}return _e},_extends$2.apply(this,arguments)}function isPolyfill(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$2;function useSyncExternalStore$2(_e,et,rt){const nt=et(),[{inst:ot},it]=useState({inst:{value:nt,getSnapshot:et}});return useLayoutEffect(()=>{ot.value=nt,ot.getSnapshot=et,checkIfSnapshotChanged(ot)&&it({inst:ot})},[_e,nt,et]),useEffect(()=>(checkIfSnapshotChanged(ot)&&it({inst:ot}),_e(()=>{checkIfSnapshotChanged(ot)&&it({inst:ot})})),[_e]),useDebugValue(nt),nt}function checkIfSnapshotChanged(_e){const et=_e.getSnapshot,rt=_e.value;try{const nt=et();return!is(rt,nt)}catch{return!0}}function useSyncExternalStore$1(_e,et,rt){return et()}const canUseDOM$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM$1,shim$1=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React$2&&(_e=>_e.useSyncExternalStore)(React$2);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function useHref(_e,et){let{relative:rt}=et===void 0?{}:et;useInRouterContext()||invariant(!1);let{basename:nt,navigator:ot}=reactExports.useContext(NavigationContext),{hash:it,pathname:st,search:at}=useResolvedPath(_e,{relative:rt}),lt=st;return nt!=="/"&&(lt=st==="/"?nt:joinPaths([nt,st])),ot.createHref({pathname:lt,search:at,hash:it})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:_e,navigator:et}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),{pathname:nt}=useLocation(),ot=JSON.stringify(getPathContributingMatches(rt).map(at=>at.pathnameBase)),it=reactExports.useRef(!1);return reactExports.useEffect(()=>{it.current=!0}),reactExports.useCallback(function(at,lt){if(lt===void 0&&(lt={}),!it.current)return;if(typeof at=="number"){et.go(at);return}let ct=resolveTo(at,JSON.parse(ot),nt,lt.relative==="path");_e!=="/"&&(ct.pathname=ct.pathname==="/"?_e:joinPaths([_e,ct.pathname])),(lt.replace?et.replace:et.push)(ct,lt.state,lt)},[_e,et,ot,nt])}const OutletContext=reactExports.createContext(null);function useOutlet(_e){let et=reactExports.useContext(RouteContext).outlet;return et&&reactExports.createElement(OutletContext.Provider,{value:_e},et)}function useResolvedPath(_e,et){let{relative:rt}=et===void 0?{}:et,{matches:nt}=reactExports.useContext(RouteContext),{pathname:ot}=useLocation(),it=JSON.stringify(getPathContributingMatches(nt).map(st=>st.pathnameBase));return reactExports.useMemo(()=>resolveTo(_e,JSON.parse(it),ot,rt==="path"),[_e,it,ot,rt])}function useRoutes(_e,et){useInRouterContext()||invariant(!1);let{navigator:rt}=reactExports.useContext(NavigationContext),nt=reactExports.useContext(DataRouterStateContext),{matches:ot}=reactExports.useContext(RouteContext),it=ot[ot.length-1],st=it?it.params:{};it&&it.pathname;let at=it?it.pathnameBase:"/";it&&it.route;let lt=useLocation(),ct;if(et){var pt;let vt=typeof et=="string"?parsePath(et):et;at==="/"||(pt=vt.pathname)!=null&&pt.startsWith(at)||invariant(!1),ct=vt}else ct=lt;let ut=ct.pathname||"/",ht=at==="/"?ut:ut.slice(at.length)||"/",ft=matchRoutes(_e,{pathname:ht}),gt=_renderMatches(ft&&ft.map(vt=>Object.assign({},vt,{params:Object.assign({},st,vt.params),pathname:joinPaths([at,rt.encodeLocation?rt.encodeLocation(vt.pathname).pathname:vt.pathname]),pathnameBase:vt.pathnameBase==="/"?at:joinPaths([at,rt.encodeLocation?rt.encodeLocation(vt.pathnameBase).pathname:vt.pathnameBase])})),ot,nt||void 0);return et&&gt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},ct),navigationType:Action.Pop}},gt):gt}function DefaultErrorElement(){let _e=useRouteError(),et=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),rt=_e instanceof Error?_e.stack:null,ot={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},it=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},et),rt?reactExports.createElement("pre",{style:ot},rt):null,it)}class RenderErrorBoundary extends reactExports.Component{constructor(et){super(et),this.state={location:et.location,error:et.error}}static getDerivedStateFromError(et){return{error:et}}static getDerivedStateFromProps(et,rt){return rt.location!==et.location?{error:et.error,location:et.location}:{error:et.error||rt.error,location:rt.location}}componentDidCatch(et,rt){console.error("React Router caught the following error during render",et,rt)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:et,match:rt,children:nt}=_e,ot=reactExports.useContext(DataRouterContext);return ot&&ot.static&&ot.staticContext&&rt.route.errorElement&&(ot.staticContext._deepestRenderedBoundaryId=rt.route.id),reactExports.createElement(RouteContext.Provider,{value:et},nt)}function _renderMatches(_e,et,rt){if(et===void 0&&(et=[]),_e==null)if(rt!=null&&rt.errors)_e=rt.matches;else return null;let nt=_e,ot=rt==null?void 0:rt.errors;if(ot!=null){let it=nt.findIndex(st=>st.route.id&&(ot==null?void 0:ot[st.route.id]));it>=0||invariant(!1),nt=nt.slice(0,Math.min(nt.length,it+1))}return nt.reduceRight((it,st,at)=>{let lt=st.route.id?ot==null?void 0:ot[st.route.id]:null,ct=rt?st.route.errorElement||reactExports.createElement(DefaultErrorElement,null):null,pt=et.concat(nt.slice(0,at+1)),ut=()=>reactExports.createElement(RenderedRoute,{match:st,routeContext:{outlet:it,matches:pt}},lt?ct:st.route.element!==void 0?st.route.element:it);return rt&&(st.route.errorElement||at===0)?reactExports.createElement(RenderErrorBoundary,{location:rt.location,component:ct,error:lt,children:ut(),routeContext:{outlet:null,matches:pt}}):ut()},null)}var DataRouterHook$1;(function(_e){_e.UseBlocker="useBlocker",_e.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(_e){_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(_e){let et=reactExports.useContext(DataRouterStateContext);return et||invariant(!1),et}function useRouteContext(_e){let et=reactExports.useContext(RouteContext);return et||invariant(!1),et}function useCurrentRouteId(_e){let et=useRouteContext(),rt=et.matches[et.matches.length-1];return rt.route.id||invariant(!1),rt.route.id}function useRouteError(){var _e;let et=reactExports.useContext(RouteErrorContext),rt=useDataRouterState(DataRouterStateHook$1.UseRouteError),nt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return et||((_e=rt.errors)==null?void 0:_e[nt])}function Navigate(_e){let{to:et,replace:rt,state:nt,relative:ot}=_e;useInRouterContext()||invariant(!1);let it=reactExports.useContext(DataRouterStateContext),st=useNavigate();return reactExports.useEffect(()=>{it&&it.navigation.state!=="idle"||st(et,{replace:rt,state:nt,relative:ot})}),null}function Outlet(_e){return useOutlet(_e.context)}function Route(_e){invariant(!1)}function Router(_e){let{basename:et="/",children:rt=null,location:nt,navigationType:ot=Action.Pop,navigator:it,static:st=!1}=_e;useInRouterContext()&&invariant(!1);let at=et.replace(/^\/*/,"/"),lt=reactExports.useMemo(()=>({basename:at,navigator:it,static:st}),[at,it,st]);typeof nt=="string"&&(nt=parsePath(nt));let{pathname:ct="/",search:pt="",hash:ut="",state:ht=null,key:ft="default"}=nt,gt=reactExports.useMemo(()=>{let vt=stripBasename(ct,at);return vt==null?null:{pathname:vt,search:pt,hash:ut,state:ht,key:ft}},[at,ct,pt,ut,ht,ft]);return gt==null?null:reactExports.createElement(NavigationContext.Provider,{value:lt},reactExports.createElement(LocationContext.Provider,{children:rt,value:{location:gt,navigationType:ot}}))}function Routes(_e){let{children:et,location:rt}=_e,nt=reactExports.useContext(DataRouterContext),ot=nt&&!et?nt.router.routes:createRoutesFromChildren(et);return useRoutes(ot,rt)}var AwaitRenderStatus;(function(_e){_e[_e.pending=0]="pending",_e[_e.success=1]="success",_e[_e.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(_e,et){et===void 0&&(et=[]);let rt=[];return reactExports.Children.forEach(_e,(nt,ot)=>{if(!reactExports.isValidElement(nt))return;if(nt.type===reactExports.Fragment){rt.push.apply(rt,createRoutesFromChildren(nt.props.children,et));return}nt.type!==Route&&invariant(!1),!nt.props.index||!nt.props.children||invariant(!1);let it=[...et,ot],st={id:nt.props.id||it.join("-"),caseSensitive:nt.props.caseSensitive,element:nt.props.element,index:nt.props.index,path:nt.props.path,loader:nt.props.loader,action:nt.props.action,errorElement:nt.props.errorElement,hasErrorBoundary:nt.props.errorElement!=null,shouldRevalidate:nt.props.shouldRevalidate,handle:nt.props.handle};nt.props.children&&(st.children=createRoutesFromChildren(nt.props.children,it)),rt.push(st)}),rt}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(_e[nt]=rt[nt])}return _e},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(_e,et){if(_e==null)return{};var rt={},nt=Object.keys(_e),ot,it;for(it=0;it<nt.length;it++)ot=nt[it],!(et.indexOf(ot)>=0)&&(rt[ot]=_e[ot]);return rt}function isModifiedEvent(_e){return!!(_e.metaKey||_e.altKey||_e.ctrlKey||_e.shiftKey)}function shouldProcessLinkClick(_e,et){return _e.button===0&&(!et||et==="_self")&&!isModifiedEvent(_e)}const _excluded$2M=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter(_e){let{basename:et,children:rt,window:nt}=_e,ot=reactExports.useRef();ot.current==null&&(ot.current=createBrowserHistory({window:nt,v5Compat:!0}));let it=ot.current,[st,at]=reactExports.useState({action:it.action,location:it.location});return reactExports.useLayoutEffect(()=>it.listen(at),[it]),reactExports.createElement(Router,{basename:et,children:rt,location:st.location,navigationType:st.action,navigator:it})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Link$2=reactExports.forwardRef(function(et,rt){let{onClick:nt,relative:ot,reloadDocument:it,replace:st,state:at,target:lt,to:ct,preventScrollReset:pt}=et,ut=_objectWithoutPropertiesLoose$1(et,_excluded$2M),ht,ft=!1;if(isBrowser$1&&typeof ct=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(ct)){ht=ct;let mt=new URL(window.location.href),Et=ct.startsWith("//")?new URL(mt.protocol+ct):new URL(ct);Et.origin===mt.origin?ct=Et.pathname+Et.search+Et.hash:ft=!0}let gt=useHref(ct,{relative:ot}),vt=useLinkClickHandler(ct,{replace:st,state:at,target:lt,preventScrollReset:pt,relative:ot});function yt(mt){nt&&nt(mt),mt.defaultPrevented||vt(mt)}return reactExports.createElement("a",_extends$1({},ut,{href:ht||gt,onClick:ft||it?nt:yt,ref:rt,target:lt}))});var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmitImpl="useSubmitImpl",_e.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_e,et){let{target:rt,replace:nt,state:ot,preventScrollReset:it,relative:st}=et===void 0?{}:et,at=useNavigate(),lt=useLocation(),ct=useResolvedPath(_e,{relative:st});return reactExports.useCallback(pt=>{if(shouldProcessLinkClick(pt,rt)){pt.preventDefault();let ut=nt!==void 0?nt:createPath(lt)===createPath(ct);at(_e,{replace:ut,state:ot,preventScrollReset:it,relative:st})}},[lt,at,ct,nt,ot,rt,_e,it,st])}const App$1="";function AboutUs(){return jsx("div",{children:"It's About Us Page"})}function ContactUs(){return jsx("div",{children:"It's Contact Us Page"})}const common={black:"#000",white:"#fff"},common$1=common,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey;function chainPropTypes(_e,et){return()=>null}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(_e[nt]=rt[nt])}return _e},_extends.apply(this,arguments)}function isPlainObject$3(_e){return _e!==null&&typeof _e=="object"&&_e.constructor===Object}function deepClone$1(_e){if(!isPlainObject$3(_e))return _e;const et={};return Object.keys(_e).forEach(rt=>{et[rt]=deepClone$1(_e[rt])}),et}function deepmerge(_e,et,rt={clone:!0}){const nt=rt.clone?_extends({},_e):_e;return isPlainObject$3(_e)&&isPlainObject$3(et)&&Object.keys(et).forEach(ot=>{ot!=="__proto__"&&(isPlainObject$3(et[ot])&&ot in _e&&isPlainObject$3(_e[ot])?nt[ot]=deepmerge(_e[ot],et[ot],rt):rt.clone?nt[ot]=isPlainObject$3(et[ot])?deepClone$1(et[ot]):et[ot]:nt[ot]=et[ot])}),nt}var propTypesExports={},propTypes={get exports(){return propTypesExports},set exports(_e){propTypesExports=_e}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _e(nt,ot,it,st,at,lt){if(lt!==ReactPropTypesSecret){var ct=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ct.name="Invariant Violation",ct}}_e.isRequired=_e;function et(){return _e}var rt={array:_e,bigint:_e,bool:_e,func:_e,number:_e,object:_e,string:_e,symbol:_e,any:_e,arrayOf:et,element:_e,elementType:_e,instanceOf:et,node:_e,objectOf:et,oneOf:et,oneOfType:et,shape:et,exact:et,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rt.PropTypes=rt,rt};propTypes.exports=factoryWithThrowingShims();function formatMuiErrorMessage(_e){let et="https://mui.com/production-error/?code="+_e;for(let rt=1;rt<arguments.length;rt+=1)et+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified MUI error #"+_e+"; visit "+et+" for the full message."}var reactIsExports$1={},reactIs$2={get exports(){return reactIsExports$1},set exports(_e){reactIsExports$1=_e}},reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$2=Symbol.for("react.fragment"),e$3=Symbol.for("react.strict_mode"),f$2=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$4=Symbol.for("react.context"),k$5=Symbol.for("react.server_context"),l$4=Symbol.for("react.forward_ref"),m$3=Symbol.for("react.suspense"),n$5=Symbol.for("react.suspense_list"),p$5=Symbol.for("react.memo"),q$6=Symbol.for("react.lazy"),t$5=Symbol.for("react.offscreen"),u$3;u$3=Symbol.for("react.module.reference");function v$4(_e){if(typeof _e=="object"&&_e!==null){var et=_e.$$typeof;switch(et){case b$3:switch(_e=_e.type,_e){case d$2:case f$2:case e$3:case m$3:case n$5:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$5:case h$4:case l$4:case q$6:case p$5:case g$2:return _e;default:return et}}case c$2:return et}}}reactIs_production_min$1.ContextConsumer=h$4;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$3;reactIs_production_min$1.ForwardRef=l$4;reactIs_production_min$1.Fragment=d$2;reactIs_production_min$1.Lazy=q$6;reactIs_production_min$1.Memo=p$5;reactIs_production_min$1.Portal=c$2;reactIs_production_min$1.Profiler=f$2;reactIs_production_min$1.StrictMode=e$3;reactIs_production_min$1.Suspense=m$3;reactIs_production_min$1.SuspenseList=n$5;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(_e){return v$4(_e)===h$4};reactIs_production_min$1.isContextProvider=function(_e){return v$4(_e)===g$2};reactIs_production_min$1.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===b$3};reactIs_production_min$1.isForwardRef=function(_e){return v$4(_e)===l$4};reactIs_production_min$1.isFragment=function(_e){return v$4(_e)===d$2};reactIs_production_min$1.isLazy=function(_e){return v$4(_e)===q$6};reactIs_production_min$1.isMemo=function(_e){return v$4(_e)===p$5};reactIs_production_min$1.isPortal=function(_e){return v$4(_e)===c$2};reactIs_production_min$1.isProfiler=function(_e){return v$4(_e)===f$2};reactIs_production_min$1.isStrictMode=function(_e){return v$4(_e)===e$3};reactIs_production_min$1.isSuspense=function(_e){return v$4(_e)===m$3};reactIs_production_min$1.isSuspenseList=function(_e){return v$4(_e)===n$5};reactIs_production_min$1.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===d$2||_e===f$2||_e===e$3||_e===m$3||_e===n$5||_e===t$5||typeof _e=="object"&&_e!==null&&(_e.$$typeof===q$6||_e.$$typeof===p$5||_e.$$typeof===g$2||_e.$$typeof===h$4||_e.$$typeof===l$4||_e.$$typeof===u$3||_e.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$4;(function(_e){_e.exports=reactIs_production_min$1})(reactIs$2);function capitalize(_e){if(typeof _e!="string")throw new Error(formatMuiErrorMessage(7));return _e.charAt(0).toUpperCase()+_e.slice(1)}function createChainedFunction(..._e){return _e.reduce((et,rt)=>rt==null?et:function(...ot){et.apply(this,ot),rt.apply(this,ot)},()=>{})}function debounce$2(_e,et=166){let rt;function nt(...ot){const it=()=>{_e.apply(this,ot)};clearTimeout(rt),rt=setTimeout(it,et)}return nt.clear=()=>{clearTimeout(rt)},nt}function deprecatedPropType(_e,et){return()=>null}function isMuiElement(_e,et){return reactExports.isValidElement(_e)&&et.indexOf(_e.type.muiName)!==-1}function ownerDocument(_e){return _e&&_e.ownerDocument||document}function ownerWindow(_e){return ownerDocument(_e).defaultView||window}function requirePropFactory(_e,et){return()=>null}function setRef(_e,et){typeof _e=="function"?_e(et):_e&&(_e.current=et)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId$1=0;function useGlobalId(_e){const[et,rt]=reactExports.useState(_e),nt=_e||et;return reactExports.useEffect(()=>{et==null&&(globalId$1+=1,rt(`mui-${globalId$1}`))},[et]),nt}const maybeReactUseId=React$2["useId"];function useId(_e){if(maybeReactUseId!==void 0){const et=maybeReactUseId();return _e??et}return useGlobalId(_e)}function unsupportedProp(_e,et,rt,nt,ot){return null}function useControlled({controlled:_e,default:et,name:rt,state:nt="value"}){const{current:ot}=reactExports.useRef(_e!==void 0),[it,st]=reactExports.useState(et),at=ot?_e:it,lt=reactExports.useCallback(ct=>{ot||st(ct)},[]);return[at,lt]}function useEventCallback(_e){const et=reactExports.useRef(_e);return useEnhancedEffect$1(()=>{et.current=_e}),reactExports.useCallback((...rt)=>(0,et.current)(...rt),[])}function useForkRef(..._e){return reactExports.useMemo(()=>_e.every(et=>et==null)?null:et=>{_e.forEach(rt=>{setRef(rt,et)})},_e)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(_e){const{type:et,tagName:rt}=_e;return!!(rt==="INPUT"&&inputTypesWhitelist[et]&&!_e.readOnly||rt==="TEXTAREA"&&!_e.readOnly||_e.isContentEditable)}function handleKeyDown(_e){_e.metaKey||_e.altKey||_e.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(_e){_e.addEventListener("keydown",handleKeyDown,!0),_e.addEventListener("mousedown",handlePointerDown,!0),_e.addEventListener("pointerdown",handlePointerDown,!0),_e.addEventListener("touchstart",handlePointerDown,!0),_e.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(_e){const{target:et}=_e;try{return et.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(et)}function useIsFocusVisible(){const _e=reactExports.useCallback(ot=>{ot!=null&&prepare(ot.ownerDocument)},[]),et=reactExports.useRef(!1);function rt(){return et.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),et.current=!1,!0):!1}function nt(ot){return isFocusVisible(ot)?(et.current=!0,!0):!1}return{isFocusVisibleRef:et,onFocus:nt,onBlur:rt,ref:_e}}function getScrollbarSize(_e){const et=_e.documentElement.clientWidth;return Math.abs(window.innerWidth-et)}let cachedType;function detectScrollType(){if(cachedType)return cachedType;const _e=document.createElement("div"),et=document.createElement("div");return et.style.width="10px",et.style.height="1px",_e.appendChild(et),_e.dir="rtl",_e.style.fontSize="14px",_e.style.width="4px",_e.style.height="1px",_e.style.position="absolute",_e.style.top="-1000px",_e.style.overflow="scroll",document.body.appendChild(_e),cachedType="reverse",_e.scrollLeft>0?cachedType="default":(_e.scrollLeft=1,_e.scrollLeft===0&&(cachedType="negative")),document.body.removeChild(_e),cachedType}function getNormalizedScrollLeft(_e,et){const rt=_e.scrollLeft;if(et!=="rtl")return rt;switch(detectScrollType()){case"negative":return _e.scrollWidth-_e.clientWidth+rt;case"reverse":return _e.scrollWidth-_e.clientWidth-rt;default:return rt}}const usePreviousProps=_e=>{const et=reactExports.useRef({});return reactExports.useEffect(()=>{et.current=_e}),et.current},usePreviousProps$1=usePreviousProps;function resolveProps(_e,et){const rt=_extends({},et);return Object.keys(_e).forEach(nt=>{if(nt.toString().match(/^(components|slots)$/))rt[nt]=_extends({},_e[nt],rt[nt]);else if(nt.toString().match(/^(componentsProps|slotProps)$/)){const ot=_e[nt]||{},it=et[nt];rt[nt]={},!it||!Object.keys(it)?rt[nt]=ot:!ot||!Object.keys(ot)?rt[nt]=it:(rt[nt]=_extends({},it),Object.keys(ot).forEach(st=>{rt[nt][st]=resolveProps(ot[st],it[st])}))}else rt[nt]===void 0&&(rt[nt]=_e[nt])}),rt}function composeClasses(_e,et,rt){const nt={};return Object.keys(_e).forEach(ot=>{nt[ot]=_e[ot].reduce((it,st)=>(st&&(it.push(et(st)),rt&&rt[st]&&it.push(rt[st])),it),[]).join(" ")}),nt}const defaultGenerator=_e=>_e,createClassNameGenerator=()=>{let _e=defaultGenerator;return{configure(et){_e=et},generate(et){return _e(et)},reset(){_e=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function generateUtilityClass(_e,et,rt="Mui"){const nt=globalStateClassesMapping[et];return nt?`${rt}-${nt}`:`${ClassNameGenerator$1.generate(_e)}-${et}`}function generateUtilityClasses(_e,et,rt="Mui"){const nt={};return et.forEach(ot=>{nt[ot]=generateUtilityClass(_e,ot,rt)}),nt}function _objectWithoutPropertiesLoose(_e,et){if(_e==null)return{};var rt={},nt=Object.keys(_e),ot,it;for(it=0;it<nt.length;it++)ot=nt[it],!(et.indexOf(ot)>=0)&&(rt[ot]=_e[ot]);return rt}function memoize$1(_e){var et=Object.create(null);return function(rt){return et[rt]===void 0&&(et[rt]=_e(rt)),et[rt]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(_e){return reactPropsRegex.test(_e)||_e.charCodeAt(0)===111&&_e.charCodeAt(1)===110&&_e.charCodeAt(2)<91});function sheetForTag(_e){if(_e.sheet)return _e.sheet;for(var et=0;et<document.styleSheets.length;et++)if(document.styleSheets[et].ownerNode===_e)return document.styleSheets[et]}function createStyleElement(_e){var et=document.createElement("style");return et.setAttribute("data-emotion",_e.key),_e.nonce!==void 0&&et.setAttribute("nonce",_e.nonce),et.appendChild(document.createTextNode("")),et.setAttribute("data-s",""),et}var StyleSheet=function(){function _e(rt){var nt=this;this._insertTag=function(ot){var it;nt.tags.length===0?nt.insertionPoint?it=nt.insertionPoint.nextSibling:nt.prepend?it=nt.container.firstChild:it=nt.before:it=nt.tags[nt.tags.length-1].nextSibling,nt.container.insertBefore(ot,it),nt.tags.push(ot)},this.isSpeedy=rt.speedy===void 0?!0:rt.speedy,this.tags=[],this.ctr=0,this.nonce=rt.nonce,this.key=rt.key,this.container=rt.container,this.prepend=rt.prepend,this.insertionPoint=rt.insertionPoint,this.before=null}var et=_e.prototype;return et.hydrate=function(nt){nt.forEach(this._insertTag)},et.insert=function(nt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ot=this.tags[this.tags.length-1];if(this.isSpeedy){var it=sheetForTag(ot);try{it.insertRule(nt,it.cssRules.length)}catch{}}else ot.appendChild(document.createTextNode(nt));this.ctr++},et.flush=function(){this.tags.forEach(function(nt){return nt.parentNode&&nt.parentNode.removeChild(nt)}),this.tags=[],this.ctr=0},_e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from$1=String.fromCharCode,assign$2=Object.assign;function hash$2(_e,et){return charat(_e,0)^45?(((et<<2^charat(_e,0))<<2^charat(_e,1))<<2^charat(_e,2))<<2^charat(_e,3):0}function trim$1(_e){return _e.trim()}function match$2(_e,et){return(_e=et.exec(_e))?_e[0]:_e}function replace(_e,et,rt){return _e.replace(et,rt)}function indexof(_e,et){return _e.indexOf(et)}function charat(_e,et){return _e.charCodeAt(et)|0}function substr(_e,et,rt){return _e.slice(et,rt)}function strlen(_e){return _e.length}function sizeof(_e){return _e.length}function append(_e,et){return et.push(_e),_e}function combine(_e,et){return _e.map(et).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(_e,et,rt,nt,ot,it,st){return{value:_e,root:et,parent:rt,type:nt,props:ot,children:it,line,column,length:st,return:""}}function copy(_e,et){return assign$2(node("",null,null,"",null,null,0),_e,{length:-_e.length},et)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(_e,et){return substr(characters,_e,et)}function token(_e){switch(_e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_e){return line=column=1,length=strlen(characters=_e),position=0,[]}function dealloc(_e){return characters="",_e}function delimit(_e){return trim$1(slice(position-1,delimiter(_e===91?_e+2:_e===40?_e+1:_e)))}function whitespace(_e){for(;(character=peek())&&character<33;)next();return token(_e)>2||token(character)>3?"":" "}function escaping(_e,et){for(;--et&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(_e,caret()+(et<6&&peek()==32&&next()==32))}function delimiter(_e){for(;next();)switch(character){case _e:return position;case 34:case 39:_e!==34&&_e!==39&&delimiter(character);break;case 40:_e===41&&delimiter(_e);break;case 92:next();break}return position}function commenter(_e,et){for(;next()&&_e+character!==47+10;)if(_e+character===42+42&&peek()===47)break;return"/*"+slice(et,position-1)+"*"+from$1(_e===47?_e:next())}function identifier(_e){for(;!token(peek());)next();return slice(_e,position)}function compile(_e){return dealloc(parse$2("",null,null,null,[""],_e=alloc(_e),0,[0],_e))}function parse$2(_e,et,rt,nt,ot,it,st,at,lt){for(var ct=0,pt=0,ut=st,ht=0,ft=0,gt=0,vt=1,yt=1,mt=1,Et=0,bt="",Ct=ot,Tt=it,wt=nt,Rt=bt;yt;)switch(gt=Et,Et=next()){case 40:if(gt!=108&&charat(Rt,ut-1)==58){indexof(Rt+=replace(delimit(Et),"&","&\f"),"&\f")!=-1&&(mt=-1);break}case 34:case 39:case 91:Rt+=delimit(Et);break;case 9:case 10:case 13:case 32:Rt+=whitespace(gt);break;case 92:Rt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),et,rt),lt);break;default:Rt+="/"}break;case 123*vt:at[ct++]=strlen(Rt)*mt;case 125*vt:case 59:case 0:switch(Et){case 0:case 125:yt=0;case 59+pt:ft>0&&strlen(Rt)-ut&&append(ft>32?declaration(Rt+";",nt,rt,ut-1):declaration(replace(Rt," ","")+";",nt,rt,ut-2),lt);break;case 59:Rt+=";";default:if(append(wt=ruleset(Rt,et,rt,ct,pt,ot,at,bt,Ct=[],Tt=[],ut),it),Et===123)if(pt===0)parse$2(Rt,et,wt,wt,Ct,it,ut,at,Tt);else switch(ht===99&&charat(Rt,3)===110?100:ht){case 100:case 109:case 115:parse$2(_e,wt,wt,nt&&append(ruleset(_e,wt,wt,0,0,ot,at,bt,ot,Ct=[],ut),Tt),ot,Tt,ut,at,nt?Ct:Tt);break;default:parse$2(Rt,wt,wt,wt,[""],Tt,0,at,Tt)}}ct=pt=ft=0,vt=mt=1,bt=Rt="",ut=st;break;case 58:ut=1+strlen(Rt),ft=gt;default:if(vt<1){if(Et==123)--vt;else if(Et==125&&vt++==0&&prev()==125)continue}switch(Rt+=from$1(Et),Et*vt){case 38:mt=pt>0?1:(Rt+="\f",-1);break;case 44:at[ct++]=(strlen(Rt)-1)*mt,mt=1;break;case 64:peek()===45&&(Rt+=delimit(next())),ht=peek(),pt=ut=strlen(bt=Rt+=identifier(caret())),Et++;break;case 45:gt===45&&strlen(Rt)==2&&(vt=0)}}return it}function ruleset(_e,et,rt,nt,ot,it,st,at,lt,ct,pt){for(var ut=ot-1,ht=ot===0?it:[""],ft=sizeof(ht),gt=0,vt=0,yt=0;gt<nt;++gt)for(var mt=0,Et=substr(_e,ut+1,ut=abs(vt=st[gt])),bt=_e;mt<ft;++mt)(bt=trim$1(vt>0?ht[mt]+" "+Et:replace(Et,/&\f/g,ht[mt])))&&(lt[yt++]=bt);return node(_e,et,rt,ot===0?RULESET:at,lt,ct,pt)}function comment(_e,et,rt){return node(_e,et,rt,COMMENT,from$1(char()),substr(_e,2,-2),0)}function declaration(_e,et,rt,nt){return node(_e,et,rt,DECLARATION,substr(_e,0,nt),substr(_e,nt+1,-1),nt)}function serialize(_e,et){for(var rt="",nt=sizeof(_e),ot=0;ot<nt;ot++)rt+=et(_e[ot],ot,_e,et)||"";return rt}function stringify$1(_e,et,rt,nt){switch(_e.type){case IMPORT:case DECLARATION:return _e.return=_e.return||_e.value;case COMMENT:return"";case KEYFRAMES:return _e.return=_e.value+"{"+serialize(_e.children,nt)+"}";case RULESET:_e.value=_e.props.join(",")}return strlen(rt=serialize(_e.children,nt))?_e.return=_e.value+"{"+rt+"}":""}function middleware(_e){var et=sizeof(_e);return function(rt,nt,ot,it){for(var st="",at=0;at<et;at++)st+=_e[at](rt,nt,ot,it)||"";return st}}function rulesheet(_e){return function(et){et.root||(et=et.return)&&_e(et)}}var weakMemoize=function(et){var rt=new WeakMap;return function(nt){if(rt.has(nt))return rt.get(nt);var ot=et(nt);return rt.set(nt,ot),ot}},identifierWithPointTracking=function(et,rt,nt){for(var ot=0,it=0;ot=it,it=peek(),ot===38&&it===12&&(rt[nt]=1),!token(it);)next();return slice(et,position)},toRules=function(et,rt){var nt=-1,ot=44;do switch(token(ot)){case 0:ot===38&&peek()===12&&(rt[nt]=1),et[nt]+=identifierWithPointTracking(position-1,rt,nt);break;case 2:et[nt]+=delimit(ot);break;case 4:if(ot===44){et[++nt]=peek()===58?"&\f":"",rt[nt]=et[nt].length;break}default:et[nt]+=from$1(ot)}while(ot=next());return et},getRules=function(et,rt){return dealloc(toRules(alloc(et),rt))},fixedElements=new WeakMap,compat=function(et){if(!(et.type!=="rule"||!et.parent||et.length<1)){for(var rt=et.value,nt=et.parent,ot=et.column===nt.column&&et.line===nt.line;nt.type!=="rule";)if(nt=nt.parent,!nt)return;if(!(et.props.length===1&&rt.charCodeAt(0)!==58&&!fixedElements.get(nt))&&!ot){fixedElements.set(et,!0);for(var it=[],st=getRules(rt,it),at=nt.props,lt=0,ct=0;lt<st.length;lt++)for(var pt=0;pt<at.length;pt++,ct++)et.props[ct]=it[lt]?st[lt].replace(/&\f/g,at[pt]):at[pt]+" "+st[lt]}}},removeLabel=function(et){if(et.type==="decl"){var rt=et.value;rt.charCodeAt(0)===108&&rt.charCodeAt(2)===98&&(et.return="",et.value="")}};function prefix(_e,et){switch(hash$2(_e,et)){case 5103:return WEBKIT+"print-"+_e+_e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_e+_e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_e+MOZ+_e+MS+_e+_e;case 6828:case 4268:return WEBKIT+_e+MS+_e+_e;case 6165:return WEBKIT+_e+MS+"flex-"+_e+_e;case 5187:return WEBKIT+_e+replace(_e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_e;case 5443:return WEBKIT+_e+MS+"flex-item-"+replace(_e,/flex-|-self/,"")+_e;case 4675:return WEBKIT+_e+MS+"flex-line-pack"+replace(_e,/align-content|flex-|-self/,"")+_e;case 5548:return WEBKIT+_e+MS+replace(_e,"shrink","negative")+_e;case 5292:return WEBKIT+_e+MS+replace(_e,"basis","preferred-size")+_e;case 6060:return WEBKIT+"box-"+replace(_e,"-grow","")+WEBKIT+_e+MS+replace(_e,"grow","positive")+_e;case 4554:return WEBKIT+replace(_e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_e;case 6187:return replace(replace(replace(_e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_e,"")+_e;case 5495:case 3959:return replace(_e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(_e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_e+_e;case 4095:case 3583:case 4068:case 2532:return replace(_e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_e)-1-et>6)switch(charat(_e,et+1)){case 109:if(charat(_e,et+4)!==45)break;case 102:return replace(_e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_e,et+3)==108?"$3":"$2-$3"))+_e;case 115:return~indexof(_e,"stretch")?prefix(replace(_e,"stretch","fill-available"),et)+_e:_e}break;case 4949:if(charat(_e,et+1)!==115)break;case 6444:switch(charat(_e,strlen(_e)-3-(~indexof(_e,"!important")&&10))){case 107:return replace(_e,":",":"+WEBKIT)+_e;case 101:return replace(_e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_e}break;case 5936:switch(charat(_e,et+11)){case 114:return WEBKIT+_e+MS+replace(_e,/[svh]\w+-[tblr]{2}/,"tb")+_e;case 108:return WEBKIT+_e+MS+replace(_e,/[svh]\w+-[tblr]{2}/,"tb-rl")+_e;case 45:return WEBKIT+_e+MS+replace(_e,/[svh]\w+-[tblr]{2}/,"lr")+_e}return WEBKIT+_e+MS+_e+_e}return _e}var prefixer=function(et,rt,nt,ot){if(et.length>-1&&!et.return)switch(et.type){case DECLARATION:et.return=prefix(et.value,et.length);break;case KEYFRAMES:return serialize([copy(et,{value:replace(et.value,"@","@"+WEBKIT)})],ot);case RULESET:if(et.length)return combine(et.props,function(it){switch(match$2(it,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(et,{props:[replace(it,/:(read-\w+)/,":"+MOZ+"$1")]})],ot);case"::placeholder":return serialize([copy(et,{props:[replace(it,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(et,{props:[replace(it,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(et,{props:[replace(it,/:(plac\w+)/,MS+"input-$1")]})],ot)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(et){var rt=et.key;if(rt==="css"){var nt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(nt,function(vt){var yt=vt.getAttribute("data-emotion");yt.indexOf(" ")!==-1&&(document.head.appendChild(vt),vt.setAttribute("data-s",""))})}var ot=et.stylisPlugins||defaultStylisPlugins,it={},st,at=[];st=et.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+rt+' "]'),function(vt){for(var yt=vt.getAttribute("data-emotion").split(" "),mt=1;mt<yt.length;mt++)it[yt[mt]]=!0;at.push(vt)});var lt,ct=[compat,removeLabel];{var pt,ut=[stringify$1,rulesheet(function(vt){pt.insert(vt)})],ht=middleware(ct.concat(ot,ut)),ft=function(yt){return serialize(compile(yt),ht)};lt=function(yt,mt,Et,bt){pt=Et,ft(yt?yt+"{"+mt.styles+"}":mt.styles),bt&&(gt.inserted[mt.name]=!0)}}var gt={key:rt,sheet:new StyleSheet({key:rt,container:st,nonce:et.nonce,speedy:et.speedy,prepend:et.prepend,insertionPoint:et.insertionPoint}),nonce:et.nonce,inserted:it,registered:{},insert:lt};return gt.sheet.hydrate(at),gt},reactIsExports={},reactIs$1={get exports(){return reactIsExports},set exports(_e){reactIsExports=_e}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=typeof Symbol=="function"&&Symbol.for,c$1=b$2?Symbol.for("react.element"):60103,d$1=b$2?Symbol.for("react.portal"):60106,e$2=b$2?Symbol.for("react.fragment"):60107,f$1=b$2?Symbol.for("react.strict_mode"):60108,g$1=b$2?Symbol.for("react.profiler"):60114,h$3=b$2?Symbol.for("react.provider"):60109,k$4=b$2?Symbol.for("react.context"):60110,l$3=b$2?Symbol.for("react.async_mode"):60111,m$2=b$2?Symbol.for("react.concurrent_mode"):60111,n$4=b$2?Symbol.for("react.forward_ref"):60112,p$4=b$2?Symbol.for("react.suspense"):60113,q$5=b$2?Symbol.for("react.suspense_list"):60120,r$6=b$2?Symbol.for("react.memo"):60115,t$4=b$2?Symbol.for("react.lazy"):60116,v$3=b$2?Symbol.for("react.block"):60121,w$3=b$2?Symbol.for("react.fundamental"):60117,x$2=b$2?Symbol.for("react.responder"):60118,y$2=b$2?Symbol.for("react.scope"):60119;function z$3(_e){if(typeof _e=="object"&&_e!==null){var et=_e.$$typeof;switch(et){case c$1:switch(_e=_e.type,_e){case l$3:case m$2:case e$2:case g$1:case f$1:case p$4:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$4:case n$4:case t$4:case r$6:case h$3:return _e;default:return et}}case d$1:return et}}}function A$2(_e){return z$3(_e)===m$2}reactIs_production_min.AsyncMode=l$3;reactIs_production_min.ConcurrentMode=m$2;reactIs_production_min.ContextConsumer=k$4;reactIs_production_min.ContextProvider=h$3;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$4;reactIs_production_min.Fragment=e$2;reactIs_production_min.Lazy=t$4;reactIs_production_min.Memo=r$6;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f$1;reactIs_production_min.Suspense=p$4;reactIs_production_min.isAsyncMode=function(_e){return A$2(_e)||z$3(_e)===l$3};reactIs_production_min.isConcurrentMode=A$2;reactIs_production_min.isContextConsumer=function(_e){return z$3(_e)===k$4};reactIs_production_min.isContextProvider=function(_e){return z$3(_e)===h$3};reactIs_production_min.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_e){return z$3(_e)===n$4};reactIs_production_min.isFragment=function(_e){return z$3(_e)===e$2};reactIs_production_min.isLazy=function(_e){return z$3(_e)===t$4};reactIs_production_min.isMemo=function(_e){return z$3(_e)===r$6};reactIs_production_min.isPortal=function(_e){return z$3(_e)===d$1};reactIs_production_min.isProfiler=function(_e){return z$3(_e)===g$1};reactIs_production_min.isStrictMode=function(_e){return z$3(_e)===f$1};reactIs_production_min.isSuspense=function(_e){return z$3(_e)===p$4};reactIs_production_min.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===e$2||_e===m$2||_e===g$1||_e===f$1||_e===p$4||_e===q$5||typeof _e=="object"&&_e!==null&&(_e.$$typeof===t$4||_e.$$typeof===r$6||_e.$$typeof===h$3||_e.$$typeof===k$4||_e.$$typeof===n$4||_e.$$typeof===w$3||_e.$$typeof===x$2||_e.$$typeof===y$2||_e.$$typeof===v$3)};reactIs_production_min.typeOf=z$3;(function(_e){_e.exports=reactIs_production_min})(reactIs$1);var reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(_e,et,rt){var nt="";return rt.split(" ").forEach(function(ot){_e[ot]!==void 0?et.push(_e[ot]+";"):nt+=ot+" "}),nt}var registerStyles=function(et,rt,nt){var ot=et.key+"-"+rt.name;(nt===!1||isBrowser===!1)&&et.registered[ot]===void 0&&(et.registered[ot]=rt.styles)},insertStyles=function(et,rt,nt){registerStyles(et,rt,nt);var ot=et.key+"-"+rt.name;if(et.inserted[rt.name]===void 0){var it=rt;do et.insert(rt===it?"."+ot:"",it,et.sheet,!0),it=it.next;while(it!==void 0)}};function murmur2(_e){for(var et=0,rt,nt=0,ot=_e.length;ot>=4;++nt,ot-=4)rt=_e.charCodeAt(nt)&255|(_e.charCodeAt(++nt)&255)<<8|(_e.charCodeAt(++nt)&255)<<16|(_e.charCodeAt(++nt)&255)<<24,rt=(rt&65535)*1540483477+((rt>>>16)*59797<<16),rt^=rt>>>24,et=(rt&65535)*1540483477+((rt>>>16)*59797<<16)^(et&65535)*1540483477+((et>>>16)*59797<<16);switch(ot){case 3:et^=(_e.charCodeAt(nt+2)&255)<<16;case 2:et^=(_e.charCodeAt(nt+1)&255)<<8;case 1:et^=_e.charCodeAt(nt)&255,et=(et&65535)*1540483477+((et>>>16)*59797<<16)}return et^=et>>>13,et=(et&65535)*1540483477+((et>>>16)*59797<<16),((et^et>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(et){return et.charCodeAt(1)===45},isProcessableValue=function(et){return et!=null&&typeof et!="boolean"},processStyleName=memoize$1(function(_e){return isCustomProperty(_e)?_e:_e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(et,rt){switch(et){case"animation":case"animationName":if(typeof rt=="string")return rt.replace(animationRegex,function(nt,ot,it){return cursor={name:ot,styles:it,next:cursor},ot})}return unitlessKeys[et]!==1&&!isCustomProperty(et)&&typeof rt=="number"&&rt!==0?rt+"px":rt},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(_e,et,rt){if(rt==null)return"";if(rt.__emotion_styles!==void 0)return rt;switch(typeof rt){case"boolean":return"";case"object":{if(rt.anim===1)return cursor={name:rt.name,styles:rt.styles,next:cursor},rt.name;if(rt.styles!==void 0){var nt=rt.next;if(nt!==void 0)for(;nt!==void 0;)cursor={name:nt.name,styles:nt.styles,next:cursor},nt=nt.next;var ot=rt.styles+";";return ot}return createStringFromObject(_e,et,rt)}case"function":{if(_e!==void 0){var it=cursor,st=rt(_e);return cursor=it,handleInterpolation(_e,et,st)}break}}if(et==null)return rt;var at=et[rt];return at!==void 0?at:rt}function createStringFromObject(_e,et,rt){var nt="";if(Array.isArray(rt))for(var ot=0;ot<rt.length;ot++)nt+=handleInterpolation(_e,et,rt[ot])+";";else for(var it in rt){var st=rt[it];if(typeof st!="object")et!=null&&et[st]!==void 0?nt+=it+"{"+et[st]+"}":isProcessableValue(st)&&(nt+=processStyleName(it)+":"+processStyleValue(it,st)+";");else if(Array.isArray(st)&&typeof st[0]=="string"&&(et==null||et[st[0]]===void 0))for(var at=0;at<st.length;at++)isProcessableValue(st[at])&&(nt+=processStyleName(it)+":"+processStyleValue(it,st[at])+";");else{var lt=handleInterpolation(_e,et,st);switch(it){case"animation":case"animationName":{nt+=processStyleName(it)+":"+lt+";";break}default:nt+=it+"{"+lt+"}"}}}return nt}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(et,rt,nt){if(et.length===1&&typeof et[0]=="object"&&et[0]!==null&&et[0].styles!==void 0)return et[0];var ot=!0,it="";cursor=void 0;var st=et[0];st==null||st.raw===void 0?(ot=!1,it+=handleInterpolation(nt,rt,st)):it+=st[0];for(var at=1;at<et.length;at++)it+=handleInterpolation(nt,rt,et[at]),ot&&(it+=st[at]);labelPattern.lastIndex=0;for(var lt="",ct;(ct=labelPattern.exec(it))!==null;)lt+="-"+ct[1];var pt=murmur2(it)+lt;return{name:pt,styles:it,next:cursor}},syncFallback=function(et){return et()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(et){return reactExports.forwardRef(function(rt,nt){var ot=reactExports.useContext(EmotionCacheContext);return et(rt,ot,nt)})},ThemeContext$2=reactExports.createContext({}),getTheme=function(et,rt){if(typeof rt=="function"){var nt=rt(et);return nt}return _extends({},et,rt)},createCacheWithTheme=weakMemoize(function(_e){return weakMemoize(function(et){return getTheme(_e,et)})}),ThemeProvider$2=function(et){var rt=reactExports.useContext(ThemeContext$2);return et.theme!==rt&&(rt=createCacheWithTheme(rt)(et.theme)),reactExports.createElement(ThemeContext$2.Provider,{value:rt},et.children)},Global=withEmotionCache(function(_e,et){var rt=_e.styles,nt=serializeStyles([rt],void 0,reactExports.useContext(ThemeContext$2)),ot=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var it=et.key+"-global",st=new et.sheet.constructor({key:it,nonce:et.sheet.nonce,container:et.sheet.container,speedy:et.sheet.isSpeedy}),at=!1,lt=document.querySelector('style[data-emotion="'+it+" "+nt.name+'"]');return et.sheet.tags.length&&(st.before=et.sheet.tags[0]),lt!==null&&(at=!0,lt.setAttribute("data-emotion",it),st.hydrate([lt])),ot.current=[st,at],function(){st.flush()}},[et]),useInsertionEffectWithLayoutFallback(function(){var it=ot.current,st=it[0],at=it[1];if(at){it[1]=!1;return}if(nt.next!==void 0&&insertStyles(et,nt.next,!0),st.tags.length){var lt=st.tags[st.tags.length-1].nextElementSibling;st.before=lt,st.flush()}et.insert("",nt,st,!1)},[et,nt.name]),null});function css(){for(var _e=arguments.length,et=new Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt];return serializeStyles(et)}var keyframes=function(){var et=css.apply(void 0,arguments),rt="animation-"+et.name;return{name:rt,styles:"@keyframes "+rt+"{"+et.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(et){return et!=="theme"},getDefaultShouldForwardProp=function(et){return typeof et=="string"&&et.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(et,rt,nt){var ot;if(rt){var it=rt.shouldForwardProp;ot=et.__emotion_forwardProp&&it?function(st){return et.__emotion_forwardProp(st)&&it(st)}:it}return typeof ot!="function"&&nt&&(ot=et.__emotion_forwardProp),ot},Insertion=function(et){var rt=et.cache,nt=et.serialized,ot=et.isStringTag;return registerStyles(rt,nt,ot),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(rt,nt,ot)}),null},createStyled$1=function _e(et,rt){var nt=et.__emotion_real===et,ot=nt&&et.__emotion_base||et,it,st;rt!==void 0&&(it=rt.label,st=rt.target);var at=composeShouldForwardProps(et,rt,nt),lt=at||getDefaultShouldForwardProp(ot),ct=!lt("as");return function(){var pt=arguments,ut=nt&&et.__emotion_styles!==void 0?et.__emotion_styles.slice(0):[];if(it!==void 0&&ut.push("label:"+it+";"),pt[0]==null||pt[0].raw===void 0)ut.push.apply(ut,pt);else{ut.push(pt[0][0]);for(var ht=pt.length,ft=1;ft<ht;ft++)ut.push(pt[ft],pt[0][ft])}var gt=withEmotionCache(function(vt,yt,mt){var Et=ct&&vt.as||ot,bt="",Ct=[],Tt=vt;if(vt.theme==null){Tt={};for(var wt in vt)Tt[wt]=vt[wt];Tt.theme=reactExports.useContext(ThemeContext$2)}typeof vt.className=="string"?bt=getRegisteredStyles(yt.registered,Ct,vt.className):vt.className!=null&&(bt=vt.className+" ");var Rt=serializeStyles(ut.concat(Ct),yt.registered,Tt);bt+=yt.key+"-"+Rt.name,st!==void 0&&(bt+=" "+st);var It=ct&&at===void 0?getDefaultShouldForwardProp(Et):lt,St={};for(var Pt in vt)ct&&Pt==="as"||It(Pt)&&(St[Pt]=vt[Pt]);return St.className=bt,St.ref=mt,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:yt,serialized:Rt,isStringTag:typeof Et=="string"}),reactExports.createElement(Et,St))});return gt.displayName=it!==void 0?it:"Styled("+(typeof ot=="string"?ot:ot.displayName||ot.name||"Component")+")",gt.defaultProps=et.defaultProps,gt.__emotion_real=gt,gt.__emotion_base=ot,gt.__emotion_styles=ut,gt.__emotion_forwardProp=at,Object.defineProperty(gt,"toString",{value:function(){return"."+st}}),gt.withComponent=function(vt,yt){return _e(vt,_extends({},rt,yt,{shouldForwardProp:composeShouldForwardProps(gt,yt,!0)})).apply(void 0,ut)},gt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(_e){newStyled[_e]=newStyled(_e)});function isEmpty$5(_e){return _e==null||Object.keys(_e).length===0}function GlobalStyles$1(_e){const{styles:et,defaultTheme:rt={}}=_e;return jsx(Global,{styles:typeof et=="function"?ot=>et(isEmpty$5(ot)?rt:ot):et})}/**
 * @mui/styled-engine v5.11.9
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$3(_e,et){return newStyled(_e,et)}const internal_processStyles=(_e,et)=>{Array.isArray(_e.__emotion_styles)&&(_e.__emotion_styles=et(_e.__emotion_styles))};function merge$2(_e,et){return et?deepmerge(_e,et,{clone:!1}):_e}const values$2={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:_e=>`@media (min-width:${values$2[_e]}px)`};function handleBreakpoints(_e,et,rt){const nt=_e.theme||{};if(Array.isArray(et)){const it=nt.breakpoints||defaultBreakpoints;return et.reduce((st,at,lt)=>(st[it.up(it.keys[lt])]=rt(et[lt]),st),{})}if(typeof et=="object"){const it=nt.breakpoints||defaultBreakpoints;return Object.keys(et).reduce((st,at)=>{if(Object.keys(it.values||values$2).indexOf(at)!==-1){const lt=it.up(at);st[lt]=rt(et[at],at)}else{const lt=at;st[lt]=et[lt]}return st},{})}return rt(et)}function createEmptyBreakpointObject(_e={}){var et;return((et=_e.keys)==null?void 0:et.reduce((nt,ot)=>{const it=_e.up(ot);return nt[it]={},nt},{}))||{}}function removeUnusedBreakpoints(_e,et){return _e.reduce((rt,nt)=>{const ot=rt[nt];return(!ot||Object.keys(ot).length===0)&&delete rt[nt],rt},et)}function mergeBreakpointsInOrder(_e,...et){const rt=createEmptyBreakpointObject(_e),nt=[rt,...et].reduce((ot,it)=>deepmerge(ot,it),{});return removeUnusedBreakpoints(Object.keys(rt),nt)}function computeBreakpointsBase(_e,et){if(typeof _e!="object")return{};const rt={},nt=Object.keys(et);return Array.isArray(_e)?nt.forEach((ot,it)=>{it<_e.length&&(rt[ot]=!0)}):nt.forEach(ot=>{_e[ot]!=null&&(rt[ot]=!0)}),rt}function resolveBreakpointValues({values:_e,breakpoints:et,base:rt}){const nt=rt||computeBreakpointsBase(_e,et),ot=Object.keys(nt);if(ot.length===0)return _e;let it;return ot.reduce((st,at,lt)=>(Array.isArray(_e)?(st[at]=_e[lt]!=null?_e[lt]:_e[it],it=lt):typeof _e=="object"?(st[at]=_e[at]!=null?_e[at]:_e[it],it=at):st[at]=_e,st),{})}function getPath(_e,et,rt=!0){if(!et||typeof et!="string")return null;if(_e&&_e.vars&&rt){const nt=`vars.${et}`.split(".").reduce((ot,it)=>ot&&ot[it]?ot[it]:null,_e);if(nt!=null)return nt}return et.split(".").reduce((nt,ot)=>nt&&nt[ot]!=null?nt[ot]:null,_e)}function getStyleValue$1(_e,et,rt,nt=rt){let ot;return typeof _e=="function"?ot=_e(rt):Array.isArray(_e)?ot=_e[rt]||nt:ot=getPath(_e,rt)||nt,et&&(ot=et(ot,nt,_e)),ot}function style$3(_e){const{prop:et,cssProperty:rt=_e.prop,themeKey:nt,transform:ot}=_e,it=st=>{if(st[et]==null)return null;const at=st[et],lt=st.theme,ct=getPath(lt,nt)||{};return handleBreakpoints(st,at,ut=>{let ht=getStyleValue$1(ct,ot,ut);return ut===ht&&typeof ut=="string"&&(ht=getStyleValue$1(ct,ot,`${et}${ut==="default"?"":capitalize(ut)}`,ut)),rt===!1?ht:{[rt]:ht}})};return it.propTypes={},it.filterProps=[et],it}function compose$1(..._e){const et=_e.reduce((nt,ot)=>(ot.filterProps.forEach(it=>{nt[it]=ot}),nt),{}),rt=nt=>Object.keys(nt).reduce((ot,it)=>et[it]?merge$2(ot,et[it](nt)):ot,{});return rt.propTypes={},rt.filterProps=_e.reduce((nt,ot)=>nt.concat(ot.filterProps),[]),rt}function memoize(_e){const et={};return rt=>(et[rt]===void 0&&(et[rt]=_e(rt)),et[rt])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(_e=>{if(_e.length>2)if(aliases[_e])_e=aliases[_e];else return[_e];const[et,rt]=_e.split(""),nt=properties[et],ot=directions[rt]||"";return Array.isArray(ot)?ot.map(it=>nt+it):[nt+ot]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(_e,et,rt,nt){var ot;const it=(ot=getPath(_e,et,!1))!=null?ot:rt;return typeof it=="number"?st=>typeof st=="string"?st:it*st:Array.isArray(it)?st=>typeof st=="string"?st:it[st]:typeof it=="function"?it:()=>{}}function createUnarySpacing(_e){return createUnaryUnit(_e,"spacing",8)}function getValue(_e,et){if(typeof et=="string"||et==null)return et;const rt=Math.abs(et),nt=_e(rt);return et>=0?nt:typeof nt=="number"?-nt:`-${nt}`}function getStyleFromPropValue(_e,et){return rt=>_e.reduce((nt,ot)=>(nt[ot]=getValue(et,rt),nt),{})}function resolveCssProperty(_e,et,rt,nt){if(et.indexOf(rt)===-1)return null;const ot=getCssProperties(rt),it=getStyleFromPropValue(ot,nt),st=_e[rt];return handleBreakpoints(_e,st,it)}function style$2(_e,et){const rt=createUnarySpacing(_e.theme);return Object.keys(_e).map(nt=>resolveCssProperty(_e,et,nt,rt)).reduce(merge$2,{})}function margin(_e){return style$2(_e,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(_e){return style$2(_e,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function borderTransform(_e){return typeof _e!="number"?_e:`${_e}px solid`}const border=style$3({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$3({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$3({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$3({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$3({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$3({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$3({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$3({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$3({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$3({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=_e=>{if(_e.borderRadius!==void 0&&_e.borderRadius!==null){const et=createUnaryUnit(_e.theme,"shape.borderRadius",4),rt=nt=>({borderRadius:getValue(et,nt)});return handleBreakpoints(_e,_e.borderRadius,rt)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose$1(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=_e=>{if(_e.gap!==void 0&&_e.gap!==null){const et=createUnaryUnit(_e.theme,"spacing",8),rt=nt=>({gap:getValue(et,nt)});return handleBreakpoints(_e,_e.gap,rt)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=_e=>{if(_e.columnGap!==void 0&&_e.columnGap!==null){const et=createUnaryUnit(_e.theme,"spacing",8),rt=nt=>({columnGap:getValue(et,nt)});return handleBreakpoints(_e,_e.columnGap,rt)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=_e=>{if(_e.rowGap!==void 0&&_e.rowGap!==null){const et=createUnaryUnit(_e.theme,"spacing",8),rt=nt=>({rowGap:getValue(et,nt)});return handleBreakpoints(_e,_e.rowGap,rt)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$3({prop:"gridColumn"}),gridRow=style$3({prop:"gridRow"}),gridAutoFlow=style$3({prop:"gridAutoFlow"}),gridAutoColumns=style$3({prop:"gridAutoColumns"}),gridAutoRows=style$3({prop:"gridAutoRows"}),gridTemplateColumns=style$3({prop:"gridTemplateColumns"}),gridTemplateRows=style$3({prop:"gridTemplateRows"}),gridTemplateAreas=style$3({prop:"gridTemplateAreas"}),gridArea=style$3({prop:"gridArea"});compose$1(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(_e,et){return et==="grey"?et:_e}const color$1=style$3({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$3({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$3({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose$1(color$1,bgcolor,backgroundColor);function sizingTransform(_e){return _e<=1&&_e!==0?`${_e*100}%`:_e}const width=style$3({prop:"width",transform:sizingTransform}),maxWidth=_e=>{if(_e.maxWidth!==void 0&&_e.maxWidth!==null){const et=rt=>{var nt,ot,it;return{maxWidth:((nt=_e.theme)==null||(ot=nt.breakpoints)==null||(it=ot.values)==null?void 0:it[rt])||values$2[rt]||sizingTransform(rt)}};return handleBreakpoints(_e,_e.maxWidth,et)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$3({prop:"minWidth",transform:sizingTransform}),height=style$3({prop:"height",transform:sizingTransform}),maxHeight=style$3({prop:"maxHeight",transform:sizingTransform}),minHeight=style$3({prop:"minHeight",transform:sizingTransform});style$3({prop:"size",cssProperty:"width",transform:sizingTransform});style$3({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$3({prop:"boxSizing"});compose$1(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:_e=>({"@media print":{display:_e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(..._e){const et=_e.reduce((nt,ot)=>nt.concat(Object.keys(ot)),[]),rt=new Set(et);return _e.every(nt=>rt.size===Object.keys(nt).length)}function callIfFn(_e,et){return typeof _e=="function"?_e(et):_e}function unstable_createStyleFunctionSx(){function _e(rt,nt,ot,it){const st={[rt]:nt,theme:ot},at=it[rt];if(!at)return{[rt]:nt};const{cssProperty:lt=rt,themeKey:ct,transform:pt,style:ut}=at;if(nt==null)return null;const ht=getPath(ot,ct)||{};return ut?ut(st):handleBreakpoints(st,nt,gt=>{let vt=getStyleValue$1(ht,pt,gt);return gt===vt&&typeof gt=="string"&&(vt=getStyleValue$1(ht,pt,`${rt}${gt==="default"?"":capitalize(gt)}`,gt)),lt===!1?vt:{[lt]:vt}})}function et(rt){var nt;const{sx:ot,theme:it={}}=rt||{};if(!ot)return null;const st=(nt=it.unstable_sxConfig)!=null?nt:defaultSxConfig$1;function at(lt){let ct=lt;if(typeof lt=="function")ct=lt(it);else if(typeof lt!="object")return lt;if(!ct)return null;const pt=createEmptyBreakpointObject(it.breakpoints),ut=Object.keys(pt);let ht=pt;return Object.keys(ct).forEach(ft=>{const gt=callIfFn(ct[ft],it);if(gt!=null)if(typeof gt=="object")if(st[ft])ht=merge$2(ht,_e(ft,gt,it,st));else{const vt=handleBreakpoints({theme:it},gt,yt=>({[ft]:yt}));objectsHaveSameKeys(vt,gt)?ht[ft]=et({sx:gt,theme:it}):ht=merge$2(ht,vt)}else ht=merge$2(ht,_e(ft,gt,it,st))}),removeUnusedBreakpoints(ut,ht)}return Array.isArray(ot)?ot.map(at):at(ot)}return et}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$2L=["sx"],splitProps=_e=>{var et,rt;const nt={systemProps:{},otherProps:{}},ot=(et=_e==null||(rt=_e.theme)==null?void 0:rt.unstable_sxConfig)!=null?et:defaultSxConfig$1;return Object.keys(_e).forEach(it=>{ot[it]?nt.systemProps[it]=_e[it]:nt.otherProps[it]=_e[it]}),nt};function extendSxProp(_e){const{sx:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$2L),{systemProps:nt,otherProps:ot}=splitProps(rt);let it;return Array.isArray(et)?it=[nt,...et]:typeof et=="function"?it=(...st)=>{const at=et(...st);return isPlainObject$3(at)?_extends({},nt,at):nt}:it=_extends({},nt,et),_extends({},ot,{sx:it})}function r$5(_e){var et,rt,nt="";if(typeof _e=="string"||typeof _e=="number")nt+=_e;else if(typeof _e=="object")if(Array.isArray(_e))for(et=0;et<_e.length;et++)_e[et]&&(rt=r$5(_e[et]))&&(nt&&(nt+=" "),nt+=rt);else for(et in _e)_e[et]&&(nt&&(nt+=" "),nt+=et);return nt}function clsx(){for(var _e,et,rt=0,nt="";rt<arguments.length;)(_e=arguments[rt++])&&(et=r$5(_e))&&(nt&&(nt+=" "),nt+=et);return nt}const clsx_m=Object.freeze(Object.defineProperty({__proto__:null,clsx,default:clsx},Symbol.toStringTag,{value:"Module"})),_excluded$2K=["values","unit","step"],sortBreakpointsValues=_e=>{const et=Object.keys(_e).map(rt=>({key:rt,val:_e[rt]}))||[];return et.sort((rt,nt)=>rt.val-nt.val),et.reduce((rt,nt)=>_extends({},rt,{[nt.key]:nt.val}),{})};function createBreakpoints(_e){const{values:et={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:rt="px",step:nt=5}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded$2K),it=sortBreakpointsValues(et),st=Object.keys(it);function at(ht){return`@media (min-width:${typeof et[ht]=="number"?et[ht]:ht}${rt})`}function lt(ht){return`@media (max-width:${(typeof et[ht]=="number"?et[ht]:ht)-nt/100}${rt})`}function ct(ht,ft){const gt=st.indexOf(ft);return`@media (min-width:${typeof et[ht]=="number"?et[ht]:ht}${rt}) and (max-width:${(gt!==-1&&typeof et[st[gt]]=="number"?et[st[gt]]:ft)-nt/100}${rt})`}function pt(ht){return st.indexOf(ht)+1<st.length?ct(ht,st[st.indexOf(ht)+1]):at(ht)}function ut(ht){const ft=st.indexOf(ht);return ft===0?at(st[1]):ft===st.length-1?lt(st[ft]):ct(ht,st[st.indexOf(ht)+1]).replace("@media","@media not all and")}return _extends({keys:st,values:it,up:at,down:lt,between:ct,only:pt,not:ut,unit:rt},ot)}const shape={borderRadius:4},shape$1=shape;function createSpacing(_e=8){if(_e.mui)return _e;const et=createUnarySpacing({spacing:_e}),rt=(...nt)=>(nt.length===0?[1]:nt).map(it=>{const st=et(it);return typeof st=="number"?`${st}px`:st}).join(" ");return rt.mui=!0,rt}const _excluded$2J=["breakpoints","palette","spacing","shape"];function createTheme$1(_e={},...et){const{breakpoints:rt={},palette:nt={},spacing:ot,shape:it={}}=_e,st=_objectWithoutPropertiesLoose(_e,_excluded$2J),at=createBreakpoints(rt),lt=createSpacing(ot);let ct=deepmerge({breakpoints:at,direction:"ltr",components:{},palette:_extends({mode:"light"},nt),spacing:lt,shape:_extends({},shape$1,it)},st);return ct=et.reduce((pt,ut)=>deepmerge(pt,ut),ct),ct.unstable_sxConfig=_extends({},defaultSxConfig$1,st==null?void 0:st.unstable_sxConfig),ct.unstable_sx=function(ut){return styleFunctionSx$1({sx:ut,theme:this})},ct}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$3(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(_e,et){return typeof et=="function"?et(_e):_extends({},_e,et)}function ThemeProvider$1(_e){const{children:et,theme:rt}=_e,nt=useTheme$3(),ot=reactExports.useMemo(()=>{const it=nt===null?rt:mergeOuterLocalTheme(nt,rt);return it!=null&&(it[nested]=nt!==null),it},[rt,nt]);return jsx(ThemeContext$1.Provider,{value:ot,children:et})}function isObjectEmpty(_e){return Object.keys(_e).length===0}function useTheme$2(_e=null){const et=useTheme$3();return!et||isObjectEmpty(et)?_e:et}const systemDefaultTheme$1=createTheme$1();function useTheme$1(_e=systemDefaultTheme$1){return useTheme$2(_e)}const _excluded$2I=["className","component"];function createBox(_e={}){const{defaultTheme:et,defaultClassName:rt="MuiBox-root",generateClassName:nt}=_e,ot=styled$3("div",{shouldForwardProp:st=>st!=="theme"&&st!=="sx"&&st!=="as"})(styleFunctionSx$1);return reactExports.forwardRef(function(at,lt){const ct=useTheme$1(et),pt=extendSxProp(at),{className:ut,component:ht="div"}=pt,ft=_objectWithoutPropertiesLoose(pt,_excluded$2I);return jsx(ot,_extends({as:ht,ref:lt,className:clsx(ut,nt?nt(rt):rt),theme:ct},ft))})}const Box$2=createBox(),Box$3=Box$2,_excluded$2H=["variant"];function isEmpty$4(_e){return _e.length===0}function propsToClassKey(_e){const{variant:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$2H);let nt=et||"";return Object.keys(rt).sort().forEach(ot=>{ot==="color"?nt+=isEmpty$4(nt)?_e[ot]:capitalize(_e[ot]):nt+=`${isEmpty$4(nt)?ot:capitalize(ot)}${capitalize(_e[ot].toString())}`}),nt}const _excluded$2G=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2$b=["theme"],_excluded3$1=["theme"];function isEmpty$3(_e){return Object.keys(_e).length===0}function isStringTag(_e){return typeof _e=="string"&&_e.charCodeAt(0)>96}const getStyleOverrides=(_e,et)=>et.components&&et.components[_e]&&et.components[_e].styleOverrides?et.components[_e].styleOverrides:null,getVariantStyles=(_e,et)=>{let rt=[];et&&et.components&&et.components[_e]&&et.components[_e].variants&&(rt=et.components[_e].variants);const nt={};return rt.forEach(ot=>{const it=propsToClassKey(ot.props);nt[it]=ot.style}),nt},variantsResolver=(_e,et,rt,nt)=>{var ot,it;const{ownerState:st={}}=_e,at=[],lt=rt==null||(ot=rt.components)==null||(it=ot[nt])==null?void 0:it.variants;return lt&&lt.forEach(ct=>{let pt=!0;Object.keys(ct.props).forEach(ut=>{st[ut]!==ct.props[ut]&&_e[ut]!==ct.props[ut]&&(pt=!1)}),pt&&at.push(et[propsToClassKey(ct.props)])}),at};function shouldForwardProp(_e){return _e!=="ownerState"&&_e!=="theme"&&_e!=="sx"&&_e!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(_e={}){const{defaultTheme:et=systemDefaultTheme,rootShouldForwardProp:rt=shouldForwardProp,slotShouldForwardProp:nt=shouldForwardProp}=_e,ot=it=>{const st=isEmpty$3(it.theme)?et:it.theme;return styleFunctionSx$1(_extends({},it,{theme:st}))};return ot.__mui_systemSx=!0,(it,st={})=>{internal_processStyles(it,bt=>bt.filter(Ct=>!(Ct!=null&&Ct.__mui_systemSx)));const{name:at,slot:lt,skipVariantsResolver:ct,skipSx:pt,overridesResolver:ut}=st,ht=_objectWithoutPropertiesLoose(st,_excluded$2G),ft=ct!==void 0?ct:lt&&lt!=="Root"||!1,gt=pt||!1;let vt,yt=shouldForwardProp;lt==="Root"?yt=rt:lt?yt=nt:isStringTag(it)&&(yt=void 0);const mt=styled$3(it,_extends({shouldForwardProp:yt,label:vt},ht)),Et=(bt,...Ct)=>{const Tt=Ct?Ct.map(St=>typeof St=="function"&&St.__emotion_real!==St?Pt=>{let{theme:Ot}=Pt,Ut=_objectWithoutPropertiesLoose(Pt,_excluded2$b);return St(_extends({theme:isEmpty$3(Ot)?et:Ot},Ut))}:St):[];let wt=bt;at&&ut&&Tt.push(St=>{const Pt=isEmpty$3(St.theme)?et:St.theme,Ot=getStyleOverrides(at,Pt);if(Ot){const Ut={};return Object.entries(Ot).forEach(([Bt,xt])=>{Ut[Bt]=typeof xt=="function"?xt(_extends({},St,{theme:Pt})):xt}),ut(St,Ut)}return null}),at&&!ft&&Tt.push(St=>{const Pt=isEmpty$3(St.theme)?et:St.theme;return variantsResolver(St,getVariantStyles(at,Pt),Pt,at)}),gt||Tt.push(ot);const Rt=Tt.length-Ct.length;if(Array.isArray(bt)&&Rt>0){const St=new Array(Rt).fill("");wt=[...bt,...St],wt.raw=[...bt.raw,...St]}else typeof bt=="function"&&bt.__emotion_real!==bt&&(wt=St=>{let{theme:Pt}=St,Ot=_objectWithoutPropertiesLoose(St,_excluded3$1);return bt(_extends({theme:isEmpty$3(Pt)?et:Pt},Ot))});return mt(wt,...Tt)};return mt.withConfig&&(Et.withConfig=mt.withConfig),Et}}const styled$2=createStyled(),systemStyled=styled$2;function getThemeProps(_e){const{theme:et,name:rt,props:nt}=_e;return!et||!et.components||!et.components[rt]||!et.components[rt].defaultProps?nt:resolveProps(et.components[rt].defaultProps,nt)}function useThemeProps$1({props:_e,name:et,defaultTheme:rt}){const nt=useTheme$1(rt);return getThemeProps({theme:nt,name:et,props:_e})}function clamp$1(_e,et=0,rt=1){return Math.min(Math.max(et,_e),rt)}function hexToRgb(_e){_e=_e.slice(1);const et=new RegExp(`.{1,${_e.length>=6?2:1}}`,"g");let rt=_e.match(et);return rt&&rt[0].length===1&&(rt=rt.map(nt=>nt+nt)),rt?`rgb${rt.length===4?"a":""}(${rt.map((nt,ot)=>ot<3?parseInt(nt,16):Math.round(parseInt(nt,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(_e){if(_e.type)return _e;if(_e.charAt(0)==="#")return decomposeColor(hexToRgb(_e));const et=_e.indexOf("("),rt=_e.substring(0,et);if(["rgb","rgba","hsl","hsla","color"].indexOf(rt)===-1)throw new Error(formatMuiErrorMessage(9,_e));let nt=_e.substring(et+1,_e.length-1),ot;if(rt==="color"){if(nt=nt.split(" "),ot=nt.shift(),nt.length===4&&nt[3].charAt(0)==="/"&&(nt[3]=nt[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ot)===-1)throw new Error(formatMuiErrorMessage(10,ot))}else nt=nt.split(",");return nt=nt.map(it=>parseFloat(it)),{type:rt,values:nt,colorSpace:ot}}function recomposeColor(_e){const{type:et,colorSpace:rt}=_e;let{values:nt}=_e;return et.indexOf("rgb")!==-1?nt=nt.map((ot,it)=>it<3?parseInt(ot,10):ot):et.indexOf("hsl")!==-1&&(nt[1]=`${nt[1]}%`,nt[2]=`${nt[2]}%`),et.indexOf("color")!==-1?nt=`${rt} ${nt.join(" ")}`:nt=`${nt.join(", ")}`,`${et}(${nt})`}function hslToRgb(_e){_e=decomposeColor(_e);const{values:et}=_e,rt=et[0],nt=et[1]/100,ot=et[2]/100,it=nt*Math.min(ot,1-ot),st=(ct,pt=(ct+rt/30)%12)=>ot-it*Math.max(Math.min(pt-3,9-pt,1),-1);let at="rgb";const lt=[Math.round(st(0)*255),Math.round(st(8)*255),Math.round(st(4)*255)];return _e.type==="hsla"&&(at+="a",lt.push(et[3])),recomposeColor({type:at,values:lt})}function getLuminance(_e){_e=decomposeColor(_e);let et=_e.type==="hsl"||_e.type==="hsla"?decomposeColor(hslToRgb(_e)).values:_e.values;return et=et.map(rt=>(_e.type!=="color"&&(rt/=255),rt<=.03928?rt/12.92:((rt+.055)/1.055)**2.4)),Number((.2126*et[0]+.7152*et[1]+.0722*et[2]).toFixed(3))}function getContrastRatio(_e,et){const rt=getLuminance(_e),nt=getLuminance(et);return(Math.max(rt,nt)+.05)/(Math.min(rt,nt)+.05)}function alpha$1(_e,et){return _e=decomposeColor(_e),et=clamp$1(et),(_e.type==="rgb"||_e.type==="hsl")&&(_e.type+="a"),_e.type==="color"?_e.values[3]=`/${et}`:_e.values[3]=et,recomposeColor(_e)}function darken(_e,et){if(_e=decomposeColor(_e),et=clamp$1(et),_e.type.indexOf("hsl")!==-1)_e.values[2]*=1-et;else if(_e.type.indexOf("rgb")!==-1||_e.type.indexOf("color")!==-1)for(let rt=0;rt<3;rt+=1)_e.values[rt]*=1-et;return recomposeColor(_e)}function lighten(_e,et){if(_e=decomposeColor(_e),et=clamp$1(et),_e.type.indexOf("hsl")!==-1)_e.values[2]+=(100-_e.values[2])*et;else if(_e.type.indexOf("rgb")!==-1)for(let rt=0;rt<3;rt+=1)_e.values[rt]+=(255-_e.values[rt])*et;else if(_e.type.indexOf("color")!==-1)for(let rt=0;rt<3;rt+=1)_e.values[rt]+=(1-_e.values[rt])*et;return recomposeColor(_e)}function emphasize(_e,et=.15){return getLuminance(_e)>.5?darken(_e,et):lighten(_e,et)}const EMPTY_THEME={};function InnerThemeProvider(_e){const et=useTheme$1();return jsx(ThemeContext$2.Provider,{value:typeof et=="object"?et:EMPTY_THEME,children:_e.children})}function ThemeProvider(_e){const{children:et,theme:rt}=_e;return jsx(ThemeProvider$1,{theme:rt,children:jsx(InnerThemeProvider,{children:et})})}const _excluded$2F=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$1=systemStyled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`maxWidth${capitalize(String(rt.maxWidth))}`],rt.fixed&&et.fixed,rt.disableGutters&&et.disableGutters]}}),useThemePropsDefault$1=_e=>useThemeProps$1({props:_e,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$22=(_e,et)=>{const rt=lt=>generateUtilityClass(et,lt),{classes:nt,fixed:ot,disableGutters:it,maxWidth:st}=_e,at={root:["root",st&&`maxWidth${capitalize(String(st))}`,ot&&"fixed",it&&"disableGutters"]};return composeClasses(at,rt,nt)};function createContainer(_e={}){const{createStyledComponent:et=defaultCreateStyledComponent$1,useThemeProps:rt=useThemePropsDefault$1,componentName:nt="MuiContainer"}=_e,ot=et(({theme:st,ownerState:at})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!at.disableGutters&&{paddingLeft:st.spacing(2),paddingRight:st.spacing(2),[st.breakpoints.up("sm")]:{paddingLeft:st.spacing(3),paddingRight:st.spacing(3)}}),({theme:st,ownerState:at})=>at.fixed&&Object.keys(st.breakpoints.values).reduce((lt,ct)=>{const pt=ct,ut=st.breakpoints.values[pt];return ut!==0&&(lt[st.breakpoints.up(pt)]={maxWidth:`${ut}${st.breakpoints.unit}`}),lt},{}),({theme:st,ownerState:at})=>_extends({},at.maxWidth==="xs"&&{[st.breakpoints.up("xs")]:{maxWidth:Math.max(st.breakpoints.values.xs,444)}},at.maxWidth&&at.maxWidth!=="xs"&&{[st.breakpoints.up(at.maxWidth)]:{maxWidth:`${st.breakpoints.values[at.maxWidth]}${st.breakpoints.unit}`}}));return reactExports.forwardRef(function(at,lt){const ct=rt(at),{className:pt,component:ut="div",disableGutters:ht=!1,fixed:ft=!1,maxWidth:gt="lg"}=ct,vt=_objectWithoutPropertiesLoose(ct,_excluded$2F),yt=_extends({},ct,{component:ut,disableGutters:ht,fixed:ft,maxWidth:gt}),mt=useUtilityClasses$22(yt,nt);return jsx(ot,_extends({as:ut,ownerState:yt,className:clsx(mt.root,pt),ref:lt},vt))})}const _excluded$2E=["component","direction","spacing","divider","children","className"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=systemStyled("div",{name:"MuiStack",slot:"Root",overridesResolver:(_e,et)=>et.root});function useThemePropsDefault(_e){return useThemeProps$1({props:_e,name:"MuiStack",defaultTheme:defaultTheme$3})}function joinChildren$1(_e,et){const rt=reactExports.Children.toArray(_e).filter(Boolean);return rt.reduce((nt,ot,it)=>(nt.push(ot),it<rt.length-1&&nt.push(reactExports.cloneElement(et,{key:`separator-${it}`})),nt),[])}const getSideFromDirection$1=_e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[_e],style$1=({ownerState:_e,theme:et})=>{let rt=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:et},resolveBreakpointValues({values:_e.direction,breakpoints:et.breakpoints.values}),nt=>({flexDirection:nt})));if(_e.spacing){const nt=createUnarySpacing(et),ot=Object.keys(et.breakpoints.values).reduce((lt,ct)=>((typeof _e.spacing=="object"&&_e.spacing[ct]!=null||typeof _e.direction=="object"&&_e.direction[ct]!=null)&&(lt[ct]=!0),lt),{}),it=resolveBreakpointValues({values:_e.direction,base:ot}),st=resolveBreakpointValues({values:_e.spacing,base:ot});typeof it=="object"&&Object.keys(it).forEach((lt,ct,pt)=>{if(!it[lt]){const ht=ct>0?it[pt[ct-1]]:"column";it[lt]=ht}}),rt=deepmerge(rt,handleBreakpoints({theme:et},st,(lt,ct)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${getSideFromDirection$1(ct?it[ct]:_e.direction)}`]:getValue(nt,lt)}})))}return rt=mergeBreakpointsInOrder(et.breakpoints,rt),rt};function createStack$1(_e={}){const{createStyledComponent:et=defaultCreateStyledComponent,useThemeProps:rt=useThemePropsDefault,componentName:nt="MuiStack"}=_e,ot=()=>composeClasses({root:["root"]},lt=>generateUtilityClass(nt,lt),{}),it=et(style$1);return reactExports.forwardRef(function(lt,ct){const pt=rt(lt),ut=extendSxProp(pt),{component:ht="div",direction:ft="column",spacing:gt=0,divider:vt,children:yt,className:mt}=ut,Et=_objectWithoutPropertiesLoose(ut,_excluded$2E),bt={direction:ft,spacing:gt},Ct=ot();return jsx(it,_extends({as:ht,ownerState:bt,ref:ct,className:clsx(Ct.root,mt)},Et,{children:vt?joinChildren$1(yt,vt):yt}))})}const Stack$2=createStack$1(),Stack$3=Stack$2;function createMixins(_e,et){return _extends({toolbar:{minHeight:56,[_e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[_e.up("sm")]:{minHeight:64}}},et)}const _excluded$2D=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(_e,et,rt,nt){const ot=nt.light||nt,it=nt.dark||nt*1.5;_e[et]||(_e.hasOwnProperty(rt)?_e[et]=_e[rt]:et==="light"?_e.light=lighten(_e.main,ot):et==="dark"&&(_e.dark=darken(_e.main,it)))}function getDefaultPrimary(_e="light"){return _e==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(_e="light"){return _e==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(_e="light"){return _e==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(_e="light"){return _e==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(_e="light"){return _e==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(_e="light"){return _e==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(_e){const{mode:et="light",contrastThreshold:rt=3,tonalOffset:nt=.2}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded$2D),it=_e.primary||getDefaultPrimary(et),st=_e.secondary||getDefaultSecondary(et),at=_e.error||getDefaultError(et),lt=_e.info||getDefaultInfo(et),ct=_e.success||getDefaultSuccess(et),pt=_e.warning||getDefaultWarning(et);function ut(vt){return getContrastRatio(vt,dark.text.primary)>=rt?dark.text.primary:light.text.primary}const ht=({color:vt,name:yt,mainShade:mt=500,lightShade:Et=300,darkShade:bt=700})=>{if(vt=_extends({},vt),!vt.main&&vt[mt]&&(vt.main=vt[mt]),!vt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,yt?` (${yt})`:"",mt));if(typeof vt.main!="string")throw new Error(formatMuiErrorMessage(12,yt?` (${yt})`:"",JSON.stringify(vt.main)));return addLightOrDark(vt,"light",Et,nt),addLightOrDark(vt,"dark",bt,nt),vt.contrastText||(vt.contrastText=ut(vt.main)),vt},ft={dark,light};return deepmerge(_extends({common:_extends({},common$1),mode:et,primary:ht({color:it,name:"primary"}),secondary:ht({color:st,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:ht({color:at,name:"error"}),warning:ht({color:pt,name:"warning"}),info:ht({color:lt,name:"info"}),success:ht({color:ct,name:"success"}),grey:grey$1,contrastThreshold:rt,getContrastText:ut,augmentColor:ht,tonalOffset:nt},ft[et]),ot)}const _excluded$2C=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$3(_e){return Math.round(_e*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(_e,et){const rt=typeof et=="function"?et(_e):et,{fontFamily:nt=defaultFontFamily,fontSize:ot=14,fontWeightLight:it=300,fontWeightRegular:st=400,fontWeightMedium:at=500,fontWeightBold:lt=700,htmlFontSize:ct=16,allVariants:pt,pxToRem:ut}=rt,ht=_objectWithoutPropertiesLoose(rt,_excluded$2C),ft=ot/14,gt=ut||(mt=>`${mt/ct*ft}rem`),vt=(mt,Et,bt,Ct,Tt)=>_extends({fontFamily:nt,fontWeight:mt,fontSize:gt(Et),lineHeight:bt},nt===defaultFontFamily?{letterSpacing:`${round$3(Ct/Et)}em`}:{},Tt,pt),yt={h1:vt(it,96,1.167,-1.5),h2:vt(it,60,1.2,-.5),h3:vt(st,48,1.167,0),h4:vt(st,34,1.235,.25),h5:vt(st,24,1.334,0),h6:vt(at,20,1.6,.15),subtitle1:vt(st,16,1.75,.15),subtitle2:vt(at,14,1.57,.1),body1:vt(st,16,1.5,.15),body2:vt(st,14,1.43,.15),button:vt(at,14,1.75,.4,caseAllCaps),caption:vt(st,12,1.66,.4),overline:vt(st,12,2.66,1,caseAllCaps)};return deepmerge(_extends({htmlFontSize:ct,pxToRem:gt,fontFamily:nt,fontSize:ot,fontWeightLight:it,fontWeightRegular:st,fontWeightMedium:at,fontWeightBold:lt},yt),ht,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(..._e){return[`${_e[0]}px ${_e[1]}px ${_e[2]}px ${_e[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${_e[4]}px ${_e[5]}px ${_e[6]}px ${_e[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${_e[8]}px ${_e[9]}px ${_e[10]}px ${_e[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$2B=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(_e){return`${Math.round(_e)}ms`}function getAutoHeightDuration(_e){if(!_e)return 0;const et=_e/36;return Math.round((4+15*et**.25+et/5)*10)}function createTransitions(_e){const et=_extends({},easing,_e.easing),rt=_extends({},duration,_e.duration);return _extends({getAutoHeightDuration,create:(ot=["all"],it={})=>{const{duration:st=rt.standard,easing:at=et.easeInOut,delay:lt=0}=it;return _objectWithoutPropertiesLoose(it,_excluded$2B),(Array.isArray(ot)?ot:[ot]).map(ct=>`${ct} ${typeof st=="string"?st:formatMs(st)} ${at} ${typeof lt=="string"?lt:formatMs(lt)}`).join(",")}},_e,{easing:et,duration:rt})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$2A=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(_e={},...et){const{mixins:rt={},palette:nt={},transitions:ot={},typography:it={}}=_e,st=_objectWithoutPropertiesLoose(_e,_excluded$2A);if(_e.vars)throw new Error(formatMuiErrorMessage(18));const at=createPalette(nt),lt=createTheme$1(_e);let ct=deepmerge(lt,{mixins:createMixins(lt.breakpoints,rt),palette:at,shadows:shadows$1.slice(),typography:createTypography(at,it),transitions:createTransitions(ot),zIndex:_extends({},zIndex$1)});return ct=deepmerge(ct,st),ct=et.reduce((pt,ut)=>deepmerge(pt,ut),ct),ct.unstable_sxConfig=_extends({},defaultSxConfig$1,st==null?void 0:st.unstable_sxConfig),ct.unstable_sx=function(ut){return styleFunctionSx$1({sx:ut,theme:this})},ct}function getUnit(_e){return String(_e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(_e){return parseFloat(_e)}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1;function useTheme(){return useTheme$1(defaultTheme$2)}function useThemeProps({props:_e,name:et}){return useThemeProps$1({props:_e,name:et,defaultTheme:defaultTheme$2})}const rootShouldForwardProp=_e=>shouldForwardProp(_e)&&_e!=="classes",slotShouldForwardProp=shouldForwardProp,styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled,getOverlayAlpha=_e=>{let et;return _e<1?et=5.11916*_e**2:et=4.5*Math.log(_e+1)+2,(et/100).toFixed(2)},getOverlayAlpha$1=getOverlayAlpha;function isHostComponent(_e){return typeof _e=="string"}function appendOwnerState(_e,et,rt){return _e===void 0||isHostComponent(_e)?et:_extends({},et,{ownerState:_extends({},et.ownerState,rt)})}function extractEventHandlers(_e,et=[]){if(_e===void 0)return{};const rt={};return Object.keys(_e).filter(nt=>nt.match(/^on[A-Z]/)&&typeof _e[nt]=="function"&&!et.includes(nt)).forEach(nt=>{rt[nt]=_e[nt]}),rt}function resolveComponentProps(_e,et){return typeof _e=="function"?_e(et):_e}function omitEventHandlers(_e){if(_e===void 0)return{};const et={};return Object.keys(_e).filter(rt=>!(rt.match(/^on[A-Z]/)&&typeof _e[rt]=="function")).forEach(rt=>{et[rt]=_e[rt]}),et}function mergeSlotProps(_e){const{getSlotProps:et,additionalProps:rt,externalSlotProps:nt,externalForwardedProps:ot,className:it}=_e;if(!et){const ft=clsx(ot==null?void 0:ot.className,nt==null?void 0:nt.className,it,rt==null?void 0:rt.className),gt=_extends({},rt==null?void 0:rt.style,ot==null?void 0:ot.style,nt==null?void 0:nt.style),vt=_extends({},rt,ot,nt);return ft.length>0&&(vt.className=ft),Object.keys(gt).length>0&&(vt.style=gt),{props:vt,internalRef:void 0}}const st=extractEventHandlers(_extends({},ot,nt)),at=omitEventHandlers(nt),lt=omitEventHandlers(ot),ct=et(st),pt=clsx(ct==null?void 0:ct.className,rt==null?void 0:rt.className,it,ot==null?void 0:ot.className,nt==null?void 0:nt.className),ut=_extends({},ct==null?void 0:ct.style,rt==null?void 0:rt.style,ot==null?void 0:ot.style,nt==null?void 0:nt.style),ht=_extends({},ct,rt,lt,at);return pt.length>0&&(ht.className=pt),Object.keys(ut).length>0&&(ht.style=ut),{props:ht,internalRef:ct.ref}}const _excluded$2z=["elementType","externalSlotProps","ownerState"];function useSlotProps(_e){var et;const{elementType:rt,externalSlotProps:nt,ownerState:ot}=_e,it=_objectWithoutPropertiesLoose(_e,_excluded$2z),st=resolveComponentProps(nt,ot),{props:at,internalRef:lt}=mergeSlotProps(_extends({},it,{externalSlotProps:st})),ct=useForkRef(lt,st==null?void 0:st.ref,(et=_e.additionalProps)==null?void 0:et.ref);return appendOwnerState(rt,_extends({},at,{ref:ct}),ot)}function stripDiacritics(_e){return typeof _e.normalize<"u"?_e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):_e}function createFilterOptions(_e={}){const{ignoreAccents:et=!0,ignoreCase:rt=!0,limit:nt,matchFrom:ot="any",stringify:it,trim:st=!1}=_e;return(at,{inputValue:lt,getOptionLabel:ct})=>{let pt=st?lt.trim():lt;rt&&(pt=pt.toLowerCase()),et&&(pt=stripDiacritics(pt));const ut=pt?at.filter(ht=>{let ft=(it||ct)(ht);return rt&&(ft=ft.toLowerCase()),et&&(ft=stripDiacritics(ft)),ot==="start"?ft.indexOf(pt)===0:ft.indexOf(pt)>-1}):at;return typeof nt=="number"?ut.slice(0,nt):ut}}function findIndex$1(_e,et){for(let rt=0;rt<_e.length;rt+=1)if(et(_e[rt]))return rt;return-1}const defaultFilterOptions=createFilterOptions(),pageSize=5,defaultIsActiveElementInListbox=_e=>{var et;return _e.current!==null&&((et=_e.current.parentElement)==null?void 0:et.contains(document.activeElement))};function useAutocomplete(_e){const{unstable_isActiveElementInListbox:et=defaultIsActiveElementInListbox,unstable_classNamePrefix:rt="Mui",autoComplete:nt=!1,autoHighlight:ot=!1,autoSelect:it=!1,blurOnSelect:st=!1,clearOnBlur:at=!_e.freeSolo,clearOnEscape:lt=!1,componentName:ct="useAutocomplete",defaultValue:pt=_e.multiple?[]:null,disableClearable:ut=!1,disableCloseOnSelect:ht=!1,disabled:ft,disabledItemsFocusable:gt=!1,disableListWrap:vt=!1,filterOptions:yt=defaultFilterOptions,filterSelectedOptions:mt=!1,freeSolo:Et=!1,getOptionDisabled:bt,getOptionLabel:Ct=Vr=>{var Ur;return(Ur=Vr.label)!=null?Ur:Vr},groupBy:Tt,handleHomeEndKeys:wt=!_e.freeSolo,id:Rt,includeInputInList:It=!1,inputValue:St,isOptionEqualToValue:Pt=(Vr,Ur)=>Vr===Ur,multiple:Ot=!1,onChange:Ut,onClose:Bt,onHighlightChange:xt,onInputChange:At,onOpen:Mt,open:Nt,openOnFocus:$t=!1,options:Ft,readOnly:jt=!1,selectOnFocus:zt=!_e.freeSolo,value:Yt}=_e,Kt=useId(Rt);let er=Ct;er=Vr=>{const Ur=Ct(Vr);return typeof Ur!="string"?String(Ur):Ur};const ir=reactExports.useRef(!1),rr=reactExports.useRef(!0),lr=reactExports.useRef(null),nr=reactExports.useRef(null),[hr,vr]=reactExports.useState(null),[yr,Cr]=reactExports.useState(-1),or=ot?0:-1,ur=reactExports.useRef(or),[pr,Er]=useControlled({controlled:Yt,default:pt,name:ct}),[Sr,Ht]=useControlled({controlled:St,default:"",name:ct,state:"inputValue"}),[qt,fr]=reactExports.useState(!1),cr=reactExports.useCallback((Vr,Ur)=>{if(!(Ot?pr.length<Ur.length:Ur!==null)&&!at)return;let gn;if(Ot)gn="";else if(Ur==null)gn="";else{const kn=er(Ur);gn=typeof kn=="string"?kn:""}Sr!==gn&&(Ht(gn),At&&At(Vr,gn,"reset"))},[er,Sr,Ot,At,Ht,at,pr]),[Ar,Gr]=useControlled({controlled:Nt,default:!1,name:ct,state:"open"}),[Qr,hn]=reactExports.useState(!0),sn=!Ot&&pr!=null&&Sr===er(pr),qr=Ar&&!jt,dr=qr?yt(Ft.filter(Vr=>!(mt&&(Ot?pr:[pr]).some(Ur=>Ur!==null&&Pt(Vr,Ur)))),{inputValue:sn&&Qr?"":Sr,getOptionLabel:er}):[],mr=usePreviousProps$1({filteredOptions:dr,value:pr});reactExports.useEffect(()=>{const Vr=pr!==mr.value;qt&&!Vr||Et&&!Vr||cr(null,pr)},[pr,cr,qt,mr.value,Et]);const br=Ar&&dr.length>0&&!jt,Rr=useEventCallback(Vr=>{Vr===-1?lr.current.focus():hr.querySelector(`[data-tag-index="${Vr}"]`).focus()});reactExports.useEffect(()=>{Ot&&yr>pr.length-1&&(Cr(-1),Rr(-1))},[pr,Ot,yr,Rr]);function Pr(Vr,Ur){if(!nr.current||Vr===-1)return-1;let cn=Vr;for(;;){if(Ur==="next"&&cn===dr.length||Ur==="previous"&&cn===-1)return-1;const gn=nr.current.querySelector(`[data-option-index="${cn}"]`),kn=gt?!1:!gn||gn.disabled||gn.getAttribute("aria-disabled")==="true";if(gn&&!gn.hasAttribute("tabindex")||kn)cn+=Ur==="next"?1:-1;else return cn}}const Or=useEventCallback(({event:Vr,index:Ur,reason:cn="auto"})=>{if(ur.current=Ur,Ur===-1?lr.current.removeAttribute("aria-activedescendant"):lr.current.setAttribute("aria-activedescendant",`${Kt}-option-${Ur}`),xt&&xt(Vr,Ur===-1?null:dr[Ur],cn),!nr.current)return;const gn=nr.current.querySelector(`[role="option"].${rt}-focused`);gn&&(gn.classList.remove(`${rt}-focused`),gn.classList.remove(`${rt}-focusVisible`));const kn=nr.current.parentElement.querySelector('[role="listbox"]');if(!kn)return;if(Ur===-1){kn.scrollTop=0;return}const dn=nr.current.querySelector(`[data-option-index="${Ur}"]`);if(dn&&(dn.classList.add(`${rt}-focused`),cn==="keyboard"&&dn.classList.add(`${rt}-focusVisible`),kn.scrollHeight>kn.clientHeight&&cn!=="mouse")){const Bn=dn,Xr=kn.clientHeight+kn.scrollTop,Hn=Bn.offsetTop+Bn.offsetHeight;Hn>Xr?kn.scrollTop=Hn-kn.clientHeight:Bn.offsetTop-Bn.offsetHeight*(Tt?1.3:0)<kn.scrollTop&&(kn.scrollTop=Bn.offsetTop-Bn.offsetHeight*(Tt?1.3:0))}}),Nr=useEventCallback(({event:Vr,diff:Ur,direction:cn="next",reason:gn="auto"})=>{if(!qr)return;const dn=Pr((()=>{const Bn=dr.length-1;if(Ur==="reset")return or;if(Ur==="start")return 0;if(Ur==="end")return Bn;const Xr=ur.current+Ur;return Xr<0?Xr===-1&&It?-1:vt&&ur.current!==-1||Math.abs(Ur)>1?0:Bn:Xr>Bn?Xr===Bn+1&&It?-1:vt||Math.abs(Ur)>1?Bn:0:Xr})(),cn);if(Or({index:dn,reason:gn,event:Vr}),nt&&Ur!=="reset")if(dn===-1)lr.current.value=Sr;else{const Bn=er(dr[dn]);lr.current.value=Bn,Bn.toLowerCase().indexOf(Sr.toLowerCase())===0&&Sr.length>0&&lr.current.setSelectionRange(Sr.length,Bn.length)}}),Br=()=>{const Vr=(Ur,cn)=>{const gn=Ur?er(Ur):"",kn=cn?er(cn):"";return gn===kn};if(ur.current!==-1&&mr.filteredOptions&&mr.filteredOptions.length!==dr.length&&(Ot?pr.length===mr.value.length&&mr.value.every((Ur,cn)=>er(pr[cn])===er(Ur)):Vr(mr.value,pr))){const Ur=mr.filteredOptions[ur.current];if(Ur&&dr.some(gn=>er(gn)===er(Ur)))return!0}return!1},jr=reactExports.useCallback(()=>{if(!qr||Br())return;const Vr=Ot?pr[0]:pr;if(dr.length===0||Vr==null){Nr({diff:"reset"});return}if(nr.current){if(Vr!=null){const Ur=dr[ur.current];if(Ot&&Ur&&findIndex$1(pr,gn=>Pt(Ur,gn))!==-1)return;const cn=findIndex$1(dr,gn=>Pt(gn,Vr));cn===-1?Nr({diff:"reset"}):Or({index:cn});return}if(ur.current>=dr.length-1){Or({index:dr.length-1});return}Or({index:ur.current})}},[dr.length,Ot?!1:pr,mt,Nr,Or,qr,Sr,Ot]),$r=useEventCallback(Vr=>{setRef(nr,Vr),Vr&&jr()});reactExports.useEffect(()=>{jr()},[jr]);const Fr=Vr=>{Ar||(Gr(!0),hn(!0),Mt&&Mt(Vr))},Zr=(Vr,Ur)=>{Ar&&(Gr(!1),Bt&&Bt(Vr,Ur))},pn=(Vr,Ur,cn,gn)=>{if(Ot){if(pr.length===Ur.length&&pr.every((kn,dn)=>kn===Ur[dn]))return}else if(pr===Ur)return;Ut&&Ut(Vr,Ur,cn,gn),Er(Ur)},mn=reactExports.useRef(!1),vn=(Vr,Ur,cn="selectOption",gn="options")=>{let kn=cn,dn=Ur;if(Ot){dn=Array.isArray(pr)?pr.slice():[];const Bn=findIndex$1(dn,Xr=>Pt(Ur,Xr));Bn===-1?dn.push(Ur):gn!=="freeSolo"&&(dn.splice(Bn,1),kn="removeOption")}cr(Vr,dn),pn(Vr,dn,kn,{option:Ur}),!ht&&(!Vr||!Vr.ctrlKey&&!Vr.metaKey)&&Zr(Vr,kn),(st===!0||st==="touch"&&mn.current||st==="mouse"&&!mn.current)&&lr.current.blur()};function jn(Vr,Ur){if(Vr===-1)return-1;let cn=Vr;for(;;){if(Ur==="next"&&cn===pr.length||Ur==="previous"&&cn===-1)return-1;const gn=hr.querySelector(`[data-tag-index="${cn}"]`);if(!gn||!gn.hasAttribute("tabindex")||gn.disabled||gn.getAttribute("aria-disabled")==="true")cn+=Ur==="next"?1:-1;else return cn}}const yn=(Vr,Ur)=>{if(!Ot)return;Sr===""&&Zr(Vr,"toggleInput");let cn=yr;yr===-1?Sr===""&&Ur==="previous"&&(cn=pr.length-1):(cn+=Ur==="next"?1:-1,cn<0&&(cn=0),cn===pr.length&&(cn=-1)),cn=jn(cn,Ur),Cr(cn),Rr(cn)},Kn=Vr=>{ir.current=!0,Ht(""),At&&At(Vr,"","clear"),pn(Vr,Ot?[]:null,"clear")},Qn=Vr=>Ur=>{if(Vr.onKeyDown&&Vr.onKeyDown(Ur),!Ur.defaultMuiPrevented&&(yr!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ur.key)===-1&&(Cr(-1),Rr(-1)),Ur.which!==229))switch(Ur.key){case"Home":qr&&wt&&(Ur.preventDefault(),Nr({diff:"start",direction:"next",reason:"keyboard",event:Ur}));break;case"End":qr&&wt&&(Ur.preventDefault(),Nr({diff:"end",direction:"previous",reason:"keyboard",event:Ur}));break;case"PageUp":Ur.preventDefault(),Nr({diff:-pageSize,direction:"previous",reason:"keyboard",event:Ur}),Fr(Ur);break;case"PageDown":Ur.preventDefault(),Nr({diff:pageSize,direction:"next",reason:"keyboard",event:Ur}),Fr(Ur);break;case"ArrowDown":Ur.preventDefault(),Nr({diff:1,direction:"next",reason:"keyboard",event:Ur}),Fr(Ur);break;case"ArrowUp":Ur.preventDefault(),Nr({diff:-1,direction:"previous",reason:"keyboard",event:Ur}),Fr(Ur);break;case"ArrowLeft":yn(Ur,"previous");break;case"ArrowRight":yn(Ur,"next");break;case"Enter":if(ur.current!==-1&&qr){const cn=dr[ur.current],gn=bt?bt(cn):!1;if(Ur.preventDefault(),gn)return;vn(Ur,cn,"selectOption"),nt&&lr.current.setSelectionRange(lr.current.value.length,lr.current.value.length)}else Et&&Sr!==""&&sn===!1&&(Ot&&Ur.preventDefault(),vn(Ur,Sr,"createOption","freeSolo"));break;case"Escape":qr?(Ur.preventDefault(),Ur.stopPropagation(),Zr(Ur,"escape")):lt&&(Sr!==""||Ot&&pr.length>0)&&(Ur.preventDefault(),Ur.stopPropagation(),Kn(Ur));break;case"Backspace":if(Ot&&!jt&&Sr===""&&pr.length>0){const cn=yr===-1?pr.length-1:yr,gn=pr.slice();gn.splice(cn,1),pn(Ur,gn,"removeOption",{option:pr[cn]})}break;case"Delete":if(Ot&&!jt&&Sr===""&&pr.length>0&&yr!==-1){const cn=yr,gn=pr.slice();gn.splice(cn,1),pn(Ur,gn,"removeOption",{option:pr[cn]})}break}},bn=Vr=>{fr(!0),$t&&!ir.current&&Fr(Vr)},so=Vr=>{if(et(nr)){lr.current.focus();return}fr(!1),rr.current=!0,ir.current=!1,it&&ur.current!==-1&&qr?vn(Vr,dr[ur.current],"blur"):it&&Et&&Sr!==""?vn(Vr,Sr,"blur","freeSolo"):at&&cr(Vr,pr),Zr(Vr,"blur")},zr=Vr=>{const Ur=Vr.target.value;Sr!==Ur&&(Ht(Ur),hn(!1),At&&At(Vr,Ur,"input")),Ur===""?!ut&&!Ot&&pn(Vr,null,"clear"):Fr(Vr)},zn=Vr=>{Or({event:Vr,index:Number(Vr.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},Zn=()=>{mn.current=!0},Fn=Vr=>{const Ur=Number(Vr.currentTarget.getAttribute("data-option-index"));vn(Vr,dr[Ur],"selectOption"),mn.current=!1},En=Vr=>Ur=>{const cn=pr.slice();cn.splice(Vr,1),pn(Ur,cn,"removeOption",{option:pr[Vr]})},Cn=Vr=>{Ar?Zr(Vr,"toggleInput"):Fr(Vr)},Mn=Vr=>{Vr.target.getAttribute("id")!==Kt&&Vr.preventDefault()},Vn=()=>{lr.current.focus(),zt&&rr.current&&lr.current.selectionEnd-lr.current.selectionStart===0&&lr.current.select(),rr.current=!1},$n=Vr=>{(Sr===""||!Ar)&&Cn(Vr)};let Sn=Et&&Sr.length>0;Sn=Sn||(Ot?pr.length>0:pr!==null);let Yn=dr;return Tt&&(Yn=dr.reduce((Vr,Ur,cn)=>{const gn=Tt(Ur);return Vr.length>0&&Vr[Vr.length-1].group===gn?Vr[Vr.length-1].options.push(Ur):Vr.push({key:cn,index:cn,group:gn,options:[Ur]}),Vr},[])),ft&&qt&&so(),{getRootProps:(Vr={})=>_extends({"aria-owns":br?`${Kt}-listbox`:null},Vr,{onKeyDown:Qn(Vr),onMouseDown:Mn,onClick:Vn}),getInputLabelProps:()=>({id:`${Kt}-label`,htmlFor:Kt}),getInputProps:()=>({id:Kt,value:Sr,onBlur:so,onFocus:bn,onChange:zr,onMouseDown:$n,"aria-activedescendant":qr?"":null,"aria-autocomplete":nt?"both":"list","aria-controls":br?`${Kt}-listbox`:void 0,"aria-expanded":br,autoComplete:"off",ref:lr,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:ft}),getClearProps:()=>({tabIndex:-1,onClick:Kn}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Cn}),getTagProps:({index:Vr})=>_extends({key:Vr,"data-tag-index":Vr,tabIndex:-1},!jt&&{onDelete:En(Vr)}),getListboxProps:()=>({role:"listbox",id:`${Kt}-listbox`,"aria-labelledby":`${Kt}-label`,ref:$r,onMouseDown:Vr=>{Vr.preventDefault()}}),getOptionProps:({index:Vr,option:Ur})=>{const cn=(Ot?pr:[pr]).some(kn=>kn!=null&&Pt(Ur,kn)),gn=bt?bt(Ur):!1;return{key:er(Ur),tabIndex:-1,role:"option",id:`${Kt}-option-${Vr}`,onMouseOver:zn,onClick:Fn,onTouchStart:Zn,"data-option-index":Vr,"aria-disabled":gn,"aria-selected":cn}},id:Kt,inputValue:Sr,value:pr,dirty:Sn,popupOpen:qr,focused:qt||yr!==-1,anchorEl:hr,setAnchorEl:vr,focusedTag:yr,groupedOptions:Yn}}function useBadge(_e){const{badgeContent:et,invisible:rt=!1,max:nt=99,showZero:ot=!1}=_e,it=usePreviousProps$1({badgeContent:et,max:nt});let st=rt;rt===!1&&et===0&&!ot&&(st=!0);const{badgeContent:at,max:lt=nt}=st?it:_e,ct=at&&Number(at)>lt?`${lt}+`:at;return{badgeContent:at,invisible:st,max:lt,displayValue:ct}}function mapEventPropToEvent(_e){return _e.substring(2).toLowerCase()}function clickedRootScrollbar$1(_e,et){return et.documentElement.clientWidth<_e.clientX||et.documentElement.clientHeight<_e.clientY}function ClickAwayListener(_e){const{children:et,disableReactTree:rt=!1,mouseEvent:nt="onClick",onClickAway:ot,touchEvent:it="onTouchEnd"}=_e,st=reactExports.useRef(!1),at=reactExports.useRef(null),lt=reactExports.useRef(!1),ct=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{lt.current=!0},0),()=>{lt.current=!1}),[]);const pt=useForkRef(et.ref,at),ut=useEventCallback(gt=>{const vt=ct.current;ct.current=!1;const yt=ownerDocument(at.current);if(!lt.current||!at.current||"clientX"in gt&&clickedRootScrollbar$1(gt,yt))return;if(st.current){st.current=!1;return}let mt;gt.composedPath?mt=gt.composedPath().indexOf(at.current)>-1:mt=!yt.documentElement.contains(gt.target)||at.current.contains(gt.target),!mt&&(rt||!vt)&&ot(gt)}),ht=gt=>vt=>{ct.current=!0;const yt=et.props[gt];yt&&yt(vt)},ft={ref:pt};return it!==!1&&(ft[it]=ht(it)),reactExports.useEffect(()=>{if(it!==!1){const gt=mapEventPropToEvent(it),vt=ownerDocument(at.current),yt=()=>{st.current=!0};return vt.addEventListener(gt,ut),vt.addEventListener("touchmove",yt),()=>{vt.removeEventListener(gt,ut),vt.removeEventListener("touchmove",yt)}}},[ut,it]),nt!==!1&&(ft[nt]=ht(nt)),reactExports.useEffect(()=>{if(nt!==!1){const gt=mapEventPropToEvent(nt),vt=ownerDocument(at.current);return vt.addEventListener(gt,ut),()=>{vt.removeEventListener(gt,ut)}}},[ut,nt]),jsx(reactExports.Fragment,{children:reactExports.cloneElement(et,ft)})}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(_e){const et=parseInt(_e.getAttribute("tabindex")||"",10);return Number.isNaN(et)?_e.contentEditable==="true"||(_e.nodeName==="AUDIO"||_e.nodeName==="VIDEO"||_e.nodeName==="DETAILS")&&_e.getAttribute("tabindex")===null?0:_e.tabIndex:et}function isNonTabbableRadio(_e){if(_e.tagName!=="INPUT"||_e.type!=="radio"||!_e.name)return!1;const et=nt=>_e.ownerDocument.querySelector(`input[type="radio"]${nt}`);let rt=et(`[name="${_e.name}"]:checked`);return rt||(rt=et(`[name="${_e.name}"]`)),rt!==_e}function isNodeMatchingSelectorFocusable(_e){return!(_e.disabled||_e.tagName==="INPUT"&&_e.type==="hidden"||isNonTabbableRadio(_e))}function defaultGetTabbable(_e){const et=[],rt=[];return Array.from(_e.querySelectorAll(candidatesSelector)).forEach((nt,ot)=>{const it=getTabIndex(nt);it===-1||!isNodeMatchingSelectorFocusable(nt)||(it===0?et.push(nt):rt.push({documentOrder:ot,tabIndex:it,node:nt}))}),rt.sort((nt,ot)=>nt.tabIndex===ot.tabIndex?nt.documentOrder-ot.documentOrder:nt.tabIndex-ot.tabIndex).map(nt=>nt.node).concat(et)}function defaultIsEnabled(){return!0}function FocusTrap(_e){const{children:et,disableAutoFocus:rt=!1,disableEnforceFocus:nt=!1,disableRestoreFocus:ot=!1,getTabbable:it=defaultGetTabbable,isEnabled:st=defaultIsEnabled,open:at}=_e,lt=reactExports.useRef(!1),ct=reactExports.useRef(null),pt=reactExports.useRef(null),ut=reactExports.useRef(null),ht=reactExports.useRef(null),ft=reactExports.useRef(!1),gt=reactExports.useRef(null),vt=useForkRef(et.ref,gt),yt=reactExports.useRef(null);reactExports.useEffect(()=>{!at||!gt.current||(ft.current=!rt)},[rt,at]),reactExports.useEffect(()=>{if(!at||!gt.current)return;const bt=ownerDocument(gt.current);return gt.current.contains(bt.activeElement)||(gt.current.hasAttribute("tabIndex")||gt.current.setAttribute("tabIndex","-1"),ft.current&&gt.current.focus()),()=>{ot||(ut.current&&ut.current.focus&&(lt.current=!0,ut.current.focus()),ut.current=null)}},[at]),reactExports.useEffect(()=>{if(!at||!gt.current)return;const bt=ownerDocument(gt.current),Ct=Rt=>{const{current:It}=gt;if(It!==null){if(!bt.hasFocus()||nt||!st()||lt.current){lt.current=!1;return}if(!It.contains(bt.activeElement)){if(Rt&&ht.current!==Rt.target||bt.activeElement!==ht.current)ht.current=null;else if(ht.current!==null)return;if(!ft.current)return;let Ot=[];if((bt.activeElement===ct.current||bt.activeElement===pt.current)&&(Ot=it(gt.current)),Ot.length>0){var St,Pt;const Ut=Boolean(((St=yt.current)==null?void 0:St.shiftKey)&&((Pt=yt.current)==null?void 0:Pt.key)==="Tab"),Bt=Ot[0],xt=Ot[Ot.length-1];typeof Bt!="string"&&typeof xt!="string"&&(Ut?xt.focus():Bt.focus())}else It.focus()}}},Tt=Rt=>{yt.current=Rt,!(nt||!st()||Rt.key!=="Tab")&&bt.activeElement===gt.current&&Rt.shiftKey&&(lt.current=!0,pt.current&&pt.current.focus())};bt.addEventListener("focusin",Ct),bt.addEventListener("keydown",Tt,!0);const wt=setInterval(()=>{bt.activeElement&&bt.activeElement.tagName==="BODY"&&Ct(null)},50);return()=>{clearInterval(wt),bt.removeEventListener("focusin",Ct),bt.removeEventListener("keydown",Tt,!0)}},[rt,nt,ot,st,at,it]);const mt=bt=>{ut.current===null&&(ut.current=bt.relatedTarget),ft.current=!0,ht.current=bt.target;const Ct=et.props.onFocus;Ct&&Ct(bt)},Et=bt=>{ut.current===null&&(ut.current=bt.relatedTarget),ft.current=!0};return jsxs(reactExports.Fragment,{children:[jsx("div",{tabIndex:at?0:-1,onFocus:Et,ref:ct,"data-testid":"sentinelStart"}),reactExports.cloneElement(et,{ref:vt,onFocus:mt}),jsx("div",{tabIndex:at?0:-1,onFocus:Et,ref:pt,"data-testid":"sentinelEnd"})]})}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(_e,et){return _e.concat([et+"-"+start,et+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(_e,et){return _e.concat([et,et+"-"+start,et+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(_e){return _e?(_e.nodeName||"").toLowerCase():null}function getWindow(_e){if(_e==null)return window;if(_e.toString()!=="[object Window]"){var et=_e.ownerDocument;return et&&et.defaultView||window}return _e}function isElement(_e){var et=getWindow(_e).Element;return _e instanceof et||_e instanceof Element}function isHTMLElement$1(_e){var et=getWindow(_e).HTMLElement;return _e instanceof et||_e instanceof HTMLElement}function isShadowRoot(_e){if(typeof ShadowRoot>"u")return!1;var et=getWindow(_e).ShadowRoot;return _e instanceof et||_e instanceof ShadowRoot}function applyStyles(_e){var et=_e.state;Object.keys(et.elements).forEach(function(rt){var nt=et.styles[rt]||{},ot=et.attributes[rt]||{},it=et.elements[rt];!isHTMLElement$1(it)||!getNodeName(it)||(Object.assign(it.style,nt),Object.keys(ot).forEach(function(st){var at=ot[st];at===!1?it.removeAttribute(st):it.setAttribute(st,at===!0?"":at)}))})}function effect$2(_e){var et=_e.state,rt={popper:{position:et.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(et.elements.popper.style,rt.popper),et.styles=rt,et.elements.arrow&&Object.assign(et.elements.arrow.style,rt.arrow),function(){Object.keys(et.elements).forEach(function(nt){var ot=et.elements[nt],it=et.attributes[nt]||{},st=Object.keys(et.styles.hasOwnProperty(nt)?et.styles[nt]:rt[nt]),at=st.reduce(function(lt,ct){return lt[ct]="",lt},{});!isHTMLElement$1(ot)||!getNodeName(ot)||(Object.assign(ot.style,at),Object.keys(it).forEach(function(lt){ot.removeAttribute(lt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(_e){return _e.split("-")[0]}var max=Math.max,min=Math.min,round$2=Math.round;function getUAString(){var _e=navigator.userAgentData;return _e!=null&&_e.brands?_e.brands.map(function(et){return et.brand+"/"+et.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(_e,et,rt){et===void 0&&(et=!1),rt===void 0&&(rt=!1);var nt=_e.getBoundingClientRect(),ot=1,it=1;et&&isHTMLElement$1(_e)&&(ot=_e.offsetWidth>0&&round$2(nt.width)/_e.offsetWidth||1,it=_e.offsetHeight>0&&round$2(nt.height)/_e.offsetHeight||1);var st=isElement(_e)?getWindow(_e):window,at=st.visualViewport,lt=!isLayoutViewport()&&rt,ct=(nt.left+(lt&&at?at.offsetLeft:0))/ot,pt=(nt.top+(lt&&at?at.offsetTop:0))/it,ut=nt.width/ot,ht=nt.height/it;return{width:ut,height:ht,top:pt,right:ct+ut,bottom:pt+ht,left:ct,x:ct,y:pt}}function getLayoutRect(_e){var et=getBoundingClientRect(_e),rt=_e.offsetWidth,nt=_e.offsetHeight;return Math.abs(et.width-rt)<=1&&(rt=et.width),Math.abs(et.height-nt)<=1&&(nt=et.height),{x:_e.offsetLeft,y:_e.offsetTop,width:rt,height:nt}}function contains$1(_e,et){var rt=et.getRootNode&&et.getRootNode();if(_e.contains(et))return!0;if(rt&&isShadowRoot(rt)){var nt=et;do{if(nt&&_e.isSameNode(nt))return!0;nt=nt.parentNode||nt.host}while(nt)}return!1}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function isTableElement(_e){return["table","td","th"].indexOf(getNodeName(_e))>=0}function getDocumentElement(_e){return((isElement(_e)?_e.ownerDocument:_e.document)||window.document).documentElement}function getParentNode(_e){return getNodeName(_e)==="html"?_e:_e.assignedSlot||_e.parentNode||(isShadowRoot(_e)?_e.host:null)||getDocumentElement(_e)}function getTrueOffsetParent(_e){return!isHTMLElement$1(_e)||getComputedStyle$1(_e).position==="fixed"?null:_e.offsetParent}function getContainingBlock(_e){var et=/firefox/i.test(getUAString()),rt=/Trident/i.test(getUAString());if(rt&&isHTMLElement$1(_e)){var nt=getComputedStyle$1(_e);if(nt.position==="fixed")return null}var ot=getParentNode(_e);for(isShadowRoot(ot)&&(ot=ot.host);isHTMLElement$1(ot)&&["html","body"].indexOf(getNodeName(ot))<0;){var it=getComputedStyle$1(ot);if(it.transform!=="none"||it.perspective!=="none"||it.contain==="paint"||["transform","perspective"].indexOf(it.willChange)!==-1||et&&it.willChange==="filter"||et&&it.filter&&it.filter!=="none")return ot;ot=ot.parentNode}return null}function getOffsetParent(_e){for(var et=getWindow(_e),rt=getTrueOffsetParent(_e);rt&&isTableElement(rt)&&getComputedStyle$1(rt).position==="static";)rt=getTrueOffsetParent(rt);return rt&&(getNodeName(rt)==="html"||getNodeName(rt)==="body"&&getComputedStyle$1(rt).position==="static")?et:rt||getContainingBlock(_e)||et}function getMainAxisFromPlacement(_e){return["top","bottom"].indexOf(_e)>=0?"x":"y"}function within(_e,et,rt){return max(_e,min(et,rt))}function withinMaxClamp(_e,et,rt){var nt=within(_e,et,rt);return nt>rt?rt:nt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(_e){return Object.assign({},getFreshSideObject(),_e)}function expandToHashMap(_e,et){return et.reduce(function(rt,nt){return rt[nt]=_e,rt},{})}var toPaddingObject=function(et,rt){return et=typeof et=="function"?et(Object.assign({},rt.rects,{placement:rt.placement})):et,mergePaddingObject(typeof et!="number"?et:expandToHashMap(et,basePlacements))};function arrow(_e){var et,rt=_e.state,nt=_e.name,ot=_e.options,it=rt.elements.arrow,st=rt.modifiersData.popperOffsets,at=getBasePlacement(rt.placement),lt=getMainAxisFromPlacement(at),ct=[left,right].indexOf(at)>=0,pt=ct?"height":"width";if(!(!it||!st)){var ut=toPaddingObject(ot.padding,rt),ht=getLayoutRect(it),ft=lt==="y"?top:left,gt=lt==="y"?bottom:right,vt=rt.rects.reference[pt]+rt.rects.reference[lt]-st[lt]-rt.rects.popper[pt],yt=st[lt]-rt.rects.reference[lt],mt=getOffsetParent(it),Et=mt?lt==="y"?mt.clientHeight||0:mt.clientWidth||0:0,bt=vt/2-yt/2,Ct=ut[ft],Tt=Et-ht[pt]-ut[gt],wt=Et/2-ht[pt]/2+bt,Rt=within(Ct,wt,Tt),It=lt;rt.modifiersData[nt]=(et={},et[It]=Rt,et.centerOffset=Rt-wt,et)}}function effect$1(_e){var et=_e.state,rt=_e.options,nt=rt.element,ot=nt===void 0?"[data-popper-arrow]":nt;ot!=null&&(typeof ot=="string"&&(ot=et.elements.popper.querySelector(ot),!ot)||contains$1(et.elements.popper,ot)&&(et.elements.arrow=ot))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(_e){return _e.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(_e){var et=_e.x,rt=_e.y,nt=window,ot=nt.devicePixelRatio||1;return{x:round$2(et*ot)/ot||0,y:round$2(rt*ot)/ot||0}}function mapToStyles(_e){var et,rt=_e.popper,nt=_e.popperRect,ot=_e.placement,it=_e.variation,st=_e.offsets,at=_e.position,lt=_e.gpuAcceleration,ct=_e.adaptive,pt=_e.roundOffsets,ut=_e.isFixed,ht=st.x,ft=ht===void 0?0:ht,gt=st.y,vt=gt===void 0?0:gt,yt=typeof pt=="function"?pt({x:ft,y:vt}):{x:ft,y:vt};ft=yt.x,vt=yt.y;var mt=st.hasOwnProperty("x"),Et=st.hasOwnProperty("y"),bt=left,Ct=top,Tt=window;if(ct){var wt=getOffsetParent(rt),Rt="clientHeight",It="clientWidth";if(wt===getWindow(rt)&&(wt=getDocumentElement(rt),getComputedStyle$1(wt).position!=="static"&&at==="absolute"&&(Rt="scrollHeight",It="scrollWidth")),wt=wt,ot===top||(ot===left||ot===right)&&it===end){Ct=bottom;var St=ut&&wt===Tt&&Tt.visualViewport?Tt.visualViewport.height:wt[Rt];vt-=St-nt.height,vt*=lt?1:-1}if(ot===left||(ot===top||ot===bottom)&&it===end){bt=right;var Pt=ut&&wt===Tt&&Tt.visualViewport?Tt.visualViewport.width:wt[It];ft-=Pt-nt.width,ft*=lt?1:-1}}var Ot=Object.assign({position:at},ct&&unsetSides),Ut=pt===!0?roundOffsetsByDPR({x:ft,y:vt}):{x:ft,y:vt};if(ft=Ut.x,vt=Ut.y,lt){var Bt;return Object.assign({},Ot,(Bt={},Bt[Ct]=Et?"0":"",Bt[bt]=mt?"0":"",Bt.transform=(Tt.devicePixelRatio||1)<=1?"translate("+ft+"px, "+vt+"px)":"translate3d("+ft+"px, "+vt+"px, 0)",Bt))}return Object.assign({},Ot,(et={},et[Ct]=Et?vt+"px":"",et[bt]=mt?ft+"px":"",et.transform="",et))}function computeStyles(_e){var et=_e.state,rt=_e.options,nt=rt.gpuAcceleration,ot=nt===void 0?!0:nt,it=rt.adaptive,st=it===void 0?!0:it,at=rt.roundOffsets,lt=at===void 0?!0:at,ct={placement:getBasePlacement(et.placement),variation:getVariation(et.placement),popper:et.elements.popper,popperRect:et.rects.popper,gpuAcceleration:ot,isFixed:et.options.strategy==="fixed"};et.modifiersData.popperOffsets!=null&&(et.styles.popper=Object.assign({},et.styles.popper,mapToStyles(Object.assign({},ct,{offsets:et.modifiersData.popperOffsets,position:et.options.strategy,adaptive:st,roundOffsets:lt})))),et.modifiersData.arrow!=null&&(et.styles.arrow=Object.assign({},et.styles.arrow,mapToStyles(Object.assign({},ct,{offsets:et.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:lt})))),et.attributes.popper=Object.assign({},et.attributes.popper,{"data-popper-placement":et.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(_e){var et=_e.state,rt=_e.instance,nt=_e.options,ot=nt.scroll,it=ot===void 0?!0:ot,st=nt.resize,at=st===void 0?!0:st,lt=getWindow(et.elements.popper),ct=[].concat(et.scrollParents.reference,et.scrollParents.popper);return it&&ct.forEach(function(pt){pt.addEventListener("scroll",rt.update,passive)}),at&&lt.addEventListener("resize",rt.update,passive),function(){it&&ct.forEach(function(pt){pt.removeEventListener("scroll",rt.update,passive)}),at&&lt.removeEventListener("resize",rt.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,function(et){return hash$1[et]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(_e){return _e.replace(/start|end/g,function(et){return hash[et]})}function getWindowScroll(_e){var et=getWindow(_e),rt=et.pageXOffset,nt=et.pageYOffset;return{scrollLeft:rt,scrollTop:nt}}function getWindowScrollBarX(_e){return getBoundingClientRect(getDocumentElement(_e)).left+getWindowScroll(_e).scrollLeft}function getViewportRect(_e,et){var rt=getWindow(_e),nt=getDocumentElement(_e),ot=rt.visualViewport,it=nt.clientWidth,st=nt.clientHeight,at=0,lt=0;if(ot){it=ot.width,st=ot.height;var ct=isLayoutViewport();(ct||!ct&&et==="fixed")&&(at=ot.offsetLeft,lt=ot.offsetTop)}return{width:it,height:st,x:at+getWindowScrollBarX(_e),y:lt}}function getDocumentRect(_e){var et,rt=getDocumentElement(_e),nt=getWindowScroll(_e),ot=(et=_e.ownerDocument)==null?void 0:et.body,it=max(rt.scrollWidth,rt.clientWidth,ot?ot.scrollWidth:0,ot?ot.clientWidth:0),st=max(rt.scrollHeight,rt.clientHeight,ot?ot.scrollHeight:0,ot?ot.clientHeight:0),at=-nt.scrollLeft+getWindowScrollBarX(_e),lt=-nt.scrollTop;return getComputedStyle$1(ot||rt).direction==="rtl"&&(at+=max(rt.clientWidth,ot?ot.clientWidth:0)-it),{width:it,height:st,x:at,y:lt}}function isScrollParent(_e){var et=getComputedStyle$1(_e),rt=et.overflow,nt=et.overflowX,ot=et.overflowY;return/auto|scroll|overlay|hidden/.test(rt+ot+nt)}function getScrollParent(_e){return["html","body","#document"].indexOf(getNodeName(_e))>=0?_e.ownerDocument.body:isHTMLElement$1(_e)&&isScrollParent(_e)?_e:getScrollParent(getParentNode(_e))}function listScrollParents(_e,et){var rt;et===void 0&&(et=[]);var nt=getScrollParent(_e),ot=nt===((rt=_e.ownerDocument)==null?void 0:rt.body),it=getWindow(nt),st=ot?[it].concat(it.visualViewport||[],isScrollParent(nt)?nt:[]):nt,at=et.concat(st);return ot?at:at.concat(listScrollParents(getParentNode(st)))}function rectToClientRect(_e){return Object.assign({},_e,{left:_e.x,top:_e.y,right:_e.x+_e.width,bottom:_e.y+_e.height})}function getInnerBoundingClientRect(_e,et){var rt=getBoundingClientRect(_e,!1,et==="fixed");return rt.top=rt.top+_e.clientTop,rt.left=rt.left+_e.clientLeft,rt.bottom=rt.top+_e.clientHeight,rt.right=rt.left+_e.clientWidth,rt.width=_e.clientWidth,rt.height=_e.clientHeight,rt.x=rt.left,rt.y=rt.top,rt}function getClientRectFromMixedType(_e,et,rt){return et===viewport?rectToClientRect(getViewportRect(_e,rt)):isElement(et)?getInnerBoundingClientRect(et,rt):rectToClientRect(getDocumentRect(getDocumentElement(_e)))}function getClippingParents(_e){var et=listScrollParents(getParentNode(_e)),rt=["absolute","fixed"].indexOf(getComputedStyle$1(_e).position)>=0,nt=rt&&isHTMLElement$1(_e)?getOffsetParent(_e):_e;return isElement(nt)?et.filter(function(ot){return isElement(ot)&&contains$1(ot,nt)&&getNodeName(ot)!=="body"}):[]}function getClippingRect(_e,et,rt,nt){var ot=et==="clippingParents"?getClippingParents(_e):[].concat(et),it=[].concat(ot,[rt]),st=it[0],at=it.reduce(function(lt,ct){var pt=getClientRectFromMixedType(_e,ct,nt);return lt.top=max(pt.top,lt.top),lt.right=min(pt.right,lt.right),lt.bottom=min(pt.bottom,lt.bottom),lt.left=max(pt.left,lt.left),lt},getClientRectFromMixedType(_e,st,nt));return at.width=at.right-at.left,at.height=at.bottom-at.top,at.x=at.left,at.y=at.top,at}function computeOffsets(_e){var et=_e.reference,rt=_e.element,nt=_e.placement,ot=nt?getBasePlacement(nt):null,it=nt?getVariation(nt):null,st=et.x+et.width/2-rt.width/2,at=et.y+et.height/2-rt.height/2,lt;switch(ot){case top:lt={x:st,y:et.y-rt.height};break;case bottom:lt={x:st,y:et.y+et.height};break;case right:lt={x:et.x+et.width,y:at};break;case left:lt={x:et.x-rt.width,y:at};break;default:lt={x:et.x,y:et.y}}var ct=ot?getMainAxisFromPlacement(ot):null;if(ct!=null){var pt=ct==="y"?"height":"width";switch(it){case start:lt[ct]=lt[ct]-(et[pt]/2-rt[pt]/2);break;case end:lt[ct]=lt[ct]+(et[pt]/2-rt[pt]/2);break}}return lt}function detectOverflow(_e,et){et===void 0&&(et={});var rt=et,nt=rt.placement,ot=nt===void 0?_e.placement:nt,it=rt.strategy,st=it===void 0?_e.strategy:it,at=rt.boundary,lt=at===void 0?clippingParents:at,ct=rt.rootBoundary,pt=ct===void 0?viewport:ct,ut=rt.elementContext,ht=ut===void 0?popper:ut,ft=rt.altBoundary,gt=ft===void 0?!1:ft,vt=rt.padding,yt=vt===void 0?0:vt,mt=mergePaddingObject(typeof yt!="number"?yt:expandToHashMap(yt,basePlacements)),Et=ht===popper?reference:popper,bt=_e.rects.popper,Ct=_e.elements[gt?Et:ht],Tt=getClippingRect(isElement(Ct)?Ct:Ct.contextElement||getDocumentElement(_e.elements.popper),lt,pt,st),wt=getBoundingClientRect(_e.elements.reference),Rt=computeOffsets({reference:wt,element:bt,strategy:"absolute",placement:ot}),It=rectToClientRect(Object.assign({},bt,Rt)),St=ht===popper?It:wt,Pt={top:Tt.top-St.top+mt.top,bottom:St.bottom-Tt.bottom+mt.bottom,left:Tt.left-St.left+mt.left,right:St.right-Tt.right+mt.right},Ot=_e.modifiersData.offset;if(ht===popper&&Ot){var Ut=Ot[ot];Object.keys(Pt).forEach(function(Bt){var xt=[right,bottom].indexOf(Bt)>=0?1:-1,At=[top,bottom].indexOf(Bt)>=0?"y":"x";Pt[Bt]+=Ut[At]*xt})}return Pt}function computeAutoPlacement(_e,et){et===void 0&&(et={});var rt=et,nt=rt.placement,ot=rt.boundary,it=rt.rootBoundary,st=rt.padding,at=rt.flipVariations,lt=rt.allowedAutoPlacements,ct=lt===void 0?placements:lt,pt=getVariation(nt),ut=pt?at?variationPlacements:variationPlacements.filter(function(gt){return getVariation(gt)===pt}):basePlacements,ht=ut.filter(function(gt){return ct.indexOf(gt)>=0});ht.length===0&&(ht=ut);var ft=ht.reduce(function(gt,vt){return gt[vt]=detectOverflow(_e,{placement:vt,boundary:ot,rootBoundary:it,padding:st})[getBasePlacement(vt)],gt},{});return Object.keys(ft).sort(function(gt,vt){return ft[gt]-ft[vt]})}function getExpandedFallbackPlacements(_e){if(getBasePlacement(_e)===auto)return[];var et=getOppositePlacement(_e);return[getOppositeVariationPlacement(_e),et,getOppositeVariationPlacement(et)]}function flip(_e){var et=_e.state,rt=_e.options,nt=_e.name;if(!et.modifiersData[nt]._skip){for(var ot=rt.mainAxis,it=ot===void 0?!0:ot,st=rt.altAxis,at=st===void 0?!0:st,lt=rt.fallbackPlacements,ct=rt.padding,pt=rt.boundary,ut=rt.rootBoundary,ht=rt.altBoundary,ft=rt.flipVariations,gt=ft===void 0?!0:ft,vt=rt.allowedAutoPlacements,yt=et.options.placement,mt=getBasePlacement(yt),Et=mt===yt,bt=lt||(Et||!gt?[getOppositePlacement(yt)]:getExpandedFallbackPlacements(yt)),Ct=[yt].concat(bt).reduce(function(er,ir){return er.concat(getBasePlacement(ir)===auto?computeAutoPlacement(et,{placement:ir,boundary:pt,rootBoundary:ut,padding:ct,flipVariations:gt,allowedAutoPlacements:vt}):ir)},[]),Tt=et.rects.reference,wt=et.rects.popper,Rt=new Map,It=!0,St=Ct[0],Pt=0;Pt<Ct.length;Pt++){var Ot=Ct[Pt],Ut=getBasePlacement(Ot),Bt=getVariation(Ot)===start,xt=[top,bottom].indexOf(Ut)>=0,At=xt?"width":"height",Mt=detectOverflow(et,{placement:Ot,boundary:pt,rootBoundary:ut,altBoundary:ht,padding:ct}),Nt=xt?Bt?right:left:Bt?bottom:top;Tt[At]>wt[At]&&(Nt=getOppositePlacement(Nt));var $t=getOppositePlacement(Nt),Ft=[];if(it&&Ft.push(Mt[Ut]<=0),at&&Ft.push(Mt[Nt]<=0,Mt[$t]<=0),Ft.every(function(er){return er})){St=Ot,It=!1;break}Rt.set(Ot,Ft)}if(It)for(var jt=gt?3:1,zt=function(ir){var rr=Ct.find(function(lr){var nr=Rt.get(lr);if(nr)return nr.slice(0,ir).every(function(hr){return hr})});if(rr)return St=rr,"break"},Yt=jt;Yt>0;Yt--){var Kt=zt(Yt);if(Kt==="break")break}et.placement!==St&&(et.modifiersData[nt]._skip=!0,et.placement=St,et.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(_e,et,rt){return rt===void 0&&(rt={x:0,y:0}),{top:_e.top-et.height-rt.y,right:_e.right-et.width+rt.x,bottom:_e.bottom-et.height+rt.y,left:_e.left-et.width-rt.x}}function isAnySideFullyClipped(_e){return[top,right,bottom,left].some(function(et){return _e[et]>=0})}function hide(_e){var et=_e.state,rt=_e.name,nt=et.rects.reference,ot=et.rects.popper,it=et.modifiersData.preventOverflow,st=detectOverflow(et,{elementContext:"reference"}),at=detectOverflow(et,{altBoundary:!0}),lt=getSideOffsets(st,nt),ct=getSideOffsets(at,ot,it),pt=isAnySideFullyClipped(lt),ut=isAnySideFullyClipped(ct);et.modifiersData[rt]={referenceClippingOffsets:lt,popperEscapeOffsets:ct,isReferenceHidden:pt,hasPopperEscaped:ut},et.attributes.popper=Object.assign({},et.attributes.popper,{"data-popper-reference-hidden":pt,"data-popper-escaped":ut})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(_e,et,rt){var nt=getBasePlacement(_e),ot=[left,top].indexOf(nt)>=0?-1:1,it=typeof rt=="function"?rt(Object.assign({},et,{placement:_e})):rt,st=it[0],at=it[1];return st=st||0,at=(at||0)*ot,[left,right].indexOf(nt)>=0?{x:at,y:st}:{x:st,y:at}}function offset(_e){var et=_e.state,rt=_e.options,nt=_e.name,ot=rt.offset,it=ot===void 0?[0,0]:ot,st=placements.reduce(function(pt,ut){return pt[ut]=distanceAndSkiddingToXY(ut,et.rects,it),pt},{}),at=st[et.placement],lt=at.x,ct=at.y;et.modifiersData.popperOffsets!=null&&(et.modifiersData.popperOffsets.x+=lt,et.modifiersData.popperOffsets.y+=ct),et.modifiersData[nt]=st}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(_e){var et=_e.state,rt=_e.name;et.modifiersData[rt]=computeOffsets({reference:et.rects.reference,element:et.rects.popper,strategy:"absolute",placement:et.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(_e){return _e==="x"?"y":"x"}function preventOverflow(_e){var et=_e.state,rt=_e.options,nt=_e.name,ot=rt.mainAxis,it=ot===void 0?!0:ot,st=rt.altAxis,at=st===void 0?!1:st,lt=rt.boundary,ct=rt.rootBoundary,pt=rt.altBoundary,ut=rt.padding,ht=rt.tether,ft=ht===void 0?!0:ht,gt=rt.tetherOffset,vt=gt===void 0?0:gt,yt=detectOverflow(et,{boundary:lt,rootBoundary:ct,padding:ut,altBoundary:pt}),mt=getBasePlacement(et.placement),Et=getVariation(et.placement),bt=!Et,Ct=getMainAxisFromPlacement(mt),Tt=getAltAxis(Ct),wt=et.modifiersData.popperOffsets,Rt=et.rects.reference,It=et.rects.popper,St=typeof vt=="function"?vt(Object.assign({},et.rects,{placement:et.placement})):vt,Pt=typeof St=="number"?{mainAxis:St,altAxis:St}:Object.assign({mainAxis:0,altAxis:0},St),Ot=et.modifiersData.offset?et.modifiersData.offset[et.placement]:null,Ut={x:0,y:0};if(wt){if(it){var Bt,xt=Ct==="y"?top:left,At=Ct==="y"?bottom:right,Mt=Ct==="y"?"height":"width",Nt=wt[Ct],$t=Nt+yt[xt],Ft=Nt-yt[At],jt=ft?-It[Mt]/2:0,zt=Et===start?Rt[Mt]:It[Mt],Yt=Et===start?-It[Mt]:-Rt[Mt],Kt=et.elements.arrow,er=ft&&Kt?getLayoutRect(Kt):{width:0,height:0},ir=et.modifiersData["arrow#persistent"]?et.modifiersData["arrow#persistent"].padding:getFreshSideObject(),rr=ir[xt],lr=ir[At],nr=within(0,Rt[Mt],er[Mt]),hr=bt?Rt[Mt]/2-jt-nr-rr-Pt.mainAxis:zt-nr-rr-Pt.mainAxis,vr=bt?-Rt[Mt]/2+jt+nr+lr+Pt.mainAxis:Yt+nr+lr+Pt.mainAxis,yr=et.elements.arrow&&getOffsetParent(et.elements.arrow),Cr=yr?Ct==="y"?yr.clientTop||0:yr.clientLeft||0:0,or=(Bt=Ot==null?void 0:Ot[Ct])!=null?Bt:0,ur=Nt+hr-or-Cr,pr=Nt+vr-or,Er=within(ft?min($t,ur):$t,Nt,ft?max(Ft,pr):Ft);wt[Ct]=Er,Ut[Ct]=Er-Nt}if(at){var Sr,Ht=Ct==="x"?top:left,qt=Ct==="x"?bottom:right,fr=wt[Tt],cr=Tt==="y"?"height":"width",Ar=fr+yt[Ht],Gr=fr-yt[qt],Qr=[top,left].indexOf(mt)!==-1,hn=(Sr=Ot==null?void 0:Ot[Tt])!=null?Sr:0,sn=Qr?Ar:fr-Rt[cr]-It[cr]-hn+Pt.altAxis,qr=Qr?fr+Rt[cr]+It[cr]-hn-Pt.altAxis:Gr,dr=ft&&Qr?withinMaxClamp(sn,fr,qr):within(ft?sn:Ar,fr,ft?qr:Gr);wt[Tt]=dr,Ut[Tt]=dr-fr}et.modifiersData[nt]=Ut}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(_e){return{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}}function getNodeScroll(_e){return _e===getWindow(_e)||!isHTMLElement$1(_e)?getWindowScroll(_e):getHTMLElementScroll(_e)}function isElementScaled(_e){var et=_e.getBoundingClientRect(),rt=round$2(et.width)/_e.offsetWidth||1,nt=round$2(et.height)/_e.offsetHeight||1;return rt!==1||nt!==1}function getCompositeRect(_e,et,rt){rt===void 0&&(rt=!1);var nt=isHTMLElement$1(et),ot=isHTMLElement$1(et)&&isElementScaled(et),it=getDocumentElement(et),st=getBoundingClientRect(_e,ot,rt),at={scrollLeft:0,scrollTop:0},lt={x:0,y:0};return(nt||!nt&&!rt)&&((getNodeName(et)!=="body"||isScrollParent(it))&&(at=getNodeScroll(et)),isHTMLElement$1(et)?(lt=getBoundingClientRect(et,!0),lt.x+=et.clientLeft,lt.y+=et.clientTop):it&&(lt.x=getWindowScrollBarX(it))),{x:st.left+at.scrollLeft-lt.x,y:st.top+at.scrollTop-lt.y,width:st.width,height:st.height}}function order(_e){var et=new Map,rt=new Set,nt=[];_e.forEach(function(it){et.set(it.name,it)});function ot(it){rt.add(it.name);var st=[].concat(it.requires||[],it.requiresIfExists||[]);st.forEach(function(at){if(!rt.has(at)){var lt=et.get(at);lt&&ot(lt)}}),nt.push(it)}return _e.forEach(function(it){rt.has(it.name)||ot(it)}),nt}function orderModifiers(_e){var et=order(_e);return modifierPhases.reduce(function(rt,nt){return rt.concat(et.filter(function(ot){return ot.phase===nt}))},[])}function debounce$1(_e){var et;return function(){return et||(et=new Promise(function(rt){Promise.resolve().then(function(){et=void 0,rt(_e())})})),et}}function mergeByName(_e){var et=_e.reduce(function(rt,nt){var ot=rt[nt.name];return rt[nt.name]=ot?Object.assign({},ot,nt,{options:Object.assign({},ot.options,nt.options),data:Object.assign({},ot.data,nt.data)}):nt,rt},{});return Object.keys(et).map(function(rt){return et[rt]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var _e=arguments.length,et=new Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt];return!et.some(function(nt){return!(nt&&typeof nt.getBoundingClientRect=="function")})}function popperGenerator(_e){_e===void 0&&(_e={});var et=_e,rt=et.defaultModifiers,nt=rt===void 0?[]:rt,ot=et.defaultOptions,it=ot===void 0?DEFAULT_OPTIONS:ot;return function(at,lt,ct){ct===void 0&&(ct=it);var pt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,it),modifiersData:{},elements:{reference:at,popper:lt},attributes:{},styles:{}},ut=[],ht=!1,ft={state:pt,setOptions:function(mt){var Et=typeof mt=="function"?mt(pt.options):mt;vt(),pt.options=Object.assign({},it,pt.options,Et),pt.scrollParents={reference:isElement(at)?listScrollParents(at):at.contextElement?listScrollParents(at.contextElement):[],popper:listScrollParents(lt)};var bt=orderModifiers(mergeByName([].concat(nt,pt.options.modifiers)));return pt.orderedModifiers=bt.filter(function(Ct){return Ct.enabled}),gt(),ft.update()},forceUpdate:function(){if(!ht){var mt=pt.elements,Et=mt.reference,bt=mt.popper;if(areValidElements(Et,bt)){pt.rects={reference:getCompositeRect(Et,getOffsetParent(bt),pt.options.strategy==="fixed"),popper:getLayoutRect(bt)},pt.reset=!1,pt.placement=pt.options.placement,pt.orderedModifiers.forEach(function(Pt){return pt.modifiersData[Pt.name]=Object.assign({},Pt.data)});for(var Ct=0;Ct<pt.orderedModifiers.length;Ct++){if(pt.reset===!0){pt.reset=!1,Ct=-1;continue}var Tt=pt.orderedModifiers[Ct],wt=Tt.fn,Rt=Tt.options,It=Rt===void 0?{}:Rt,St=Tt.name;typeof wt=="function"&&(pt=wt({state:pt,options:It,name:St,instance:ft})||pt)}}}},update:debounce$1(function(){return new Promise(function(yt){ft.forceUpdate(),yt(pt)})}),destroy:function(){vt(),ht=!0}};if(!areValidElements(at,lt))return ft;ft.setOptions(ct).then(function(yt){!ht&&ct.onFirstUpdate&&ct.onFirstUpdate(yt)});function gt(){pt.orderedModifiers.forEach(function(yt){var mt=yt.name,Et=yt.options,bt=Et===void 0?{}:Et,Ct=yt.effect;if(typeof Ct=="function"){var Tt=Ct({state:pt,name:mt,instance:ft,options:bt}),wt=function(){};ut.push(Tt||wt)}})}function vt(){ut.forEach(function(yt){return yt()}),ut=[]}return ft}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(_e){return typeof _e=="function"?_e():_e}const Portal=reactExports.forwardRef(function(et,rt){const{children:nt,container:ot,disablePortal:it=!1}=et,[st,at]=reactExports.useState(null),lt=useForkRef(reactExports.isValidElement(nt)?nt.ref:null,rt);if(useEnhancedEffect$1(()=>{it||at(getContainer$1(ot)||document.body)},[ot,it]),useEnhancedEffect$1(()=>{if(st&&!it)return setRef(rt,st),()=>{setRef(rt,null)}},[rt,st,it]),it){if(reactExports.isValidElement(nt)){const ct={ref:lt};return reactExports.cloneElement(nt,ct)}return jsx(reactExports.Fragment,{children:nt})}return jsx(reactExports.Fragment,{children:st&&reactDomExports.createPortal(nt,st)})}),Portal$1=Portal;function getPopperUnstyledUtilityClass(_e){return generateUtilityClass("MuiPopperUnstyled",_e)}generateUtilityClasses("MuiPopperUnstyled",["root"]);const _excluded$2y=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],_excluded2$a=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(_e,et){if(et==="ltr")return _e;switch(_e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return _e}}function resolveAnchorEl$1(_e){return typeof _e=="function"?_e():_e}function isHTMLElement(_e){return _e.nodeType!==void 0}const useUtilityClasses$21=()=>composeClasses({root:["root"]},getPopperUnstyledUtilityClass,{}),defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(et,rt){var nt;const{anchorEl:ot,children:it,component:st,direction:at,disablePortal:lt,modifiers:ct,open:pt,ownerState:ut,placement:ht,popperOptions:ft,popperRef:gt,slotProps:vt={},slots:yt={},TransitionProps:mt}=et,Et=_objectWithoutPropertiesLoose(et,_excluded$2y),bt=reactExports.useRef(null),Ct=useForkRef(bt,rt),Tt=reactExports.useRef(null),wt=useForkRef(Tt,gt),Rt=reactExports.useRef(wt);useEnhancedEffect$1(()=>{Rt.current=wt},[wt]),reactExports.useImperativeHandle(gt,()=>Tt.current,[]);const It=flipPlacement(ht,at),[St,Pt]=reactExports.useState(It),[Ot,Ut]=reactExports.useState(resolveAnchorEl$1(ot));reactExports.useEffect(()=>{Tt.current&&Tt.current.forceUpdate()}),reactExports.useEffect(()=>{ot&&Ut(resolveAnchorEl$1(ot))},[ot]),useEnhancedEffect$1(()=>{if(!Ot||!pt)return;const Nt=jt=>{Pt(jt.placement)};let $t=[{name:"preventOverflow",options:{altBoundary:lt}},{name:"flip",options:{altBoundary:lt}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:jt})=>{Nt(jt)}}];ct!=null&&($t=$t.concat(ct)),ft&&ft.modifiers!=null&&($t=$t.concat(ft.modifiers));const Ft=createPopper(Ot,bt.current,_extends({placement:It},ft,{modifiers:$t}));return Rt.current(Ft),()=>{Ft.destroy(),Rt.current(null)}},[Ot,lt,ct,pt,ft,It]);const Bt={placement:St};mt!==null&&(Bt.TransitionProps=mt);const xt=useUtilityClasses$21(),At=(nt=st??yt.root)!=null?nt:"div",Mt=useSlotProps({elementType:At,externalSlotProps:vt.root,externalForwardedProps:Et,additionalProps:{role:"tooltip",ref:Ct},ownerState:_extends({},et,ut),className:xt.root});return jsx(At,_extends({},Mt,{children:typeof it=="function"?it(Bt):it}))}),PopperUnstyled=reactExports.forwardRef(function(et,rt){const{anchorEl:nt,children:ot,container:it,direction:st="ltr",disablePortal:at=!1,keepMounted:lt=!1,modifiers:ct,open:pt,placement:ut="bottom",popperOptions:ht=defaultPopperOptions,popperRef:ft,style:gt,transition:vt=!1,slotProps:yt={},slots:mt={}}=et,Et=_objectWithoutPropertiesLoose(et,_excluded2$a),[bt,Ct]=reactExports.useState(!0),Tt=()=>{Ct(!1)},wt=()=>{Ct(!0)};if(!lt&&!pt&&(!vt||bt))return null;let Rt;if(it)Rt=it;else if(nt){const Pt=resolveAnchorEl$1(nt);Rt=Pt&&isHTMLElement(Pt)?ownerDocument(Pt).body:ownerDocument(null).body}const It=!pt&&lt&&(!vt||bt)?"none":void 0,St=vt?{in:pt,onEnter:Tt,onExited:wt}:void 0;return jsx(Portal$1,{disablePortal:at,container:Rt,children:jsx(PopperTooltip,_extends({anchorEl:nt,direction:st,disablePortal:at,modifiers:ct,ref:rt,open:vt?!bt:pt,placement:ut,popperOptions:ht,popperRef:ft,slotProps:yt,slots:mt},Et,{style:_extends({position:"fixed",top:0,left:0,display:It},gt),TransitionProps:St,children:ot}))})}),PopperUnstyled$1=PopperUnstyled;function isOverflowing(_e){const et=ownerDocument(_e);return et.body===_e?ownerWindow(_e).innerWidth>et.documentElement.clientWidth:_e.scrollHeight>_e.clientHeight}function ariaHidden(_e,et){et?_e.setAttribute("aria-hidden","true"):_e.removeAttribute("aria-hidden")}function getPaddingRight(_e){return parseInt(ownerWindow(_e).getComputedStyle(_e).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(_e){const rt=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(_e.tagName)!==-1,nt=_e.tagName==="INPUT"&&_e.getAttribute("type")==="hidden";return rt||nt}function ariaHiddenSiblings(_e,et,rt,nt,ot){const it=[et,rt,...nt];[].forEach.call(_e.children,st=>{const at=it.indexOf(st)===-1,lt=!isAriaHiddenForbiddenOnElement(st);at&&lt&&ariaHidden(st,ot)})}function findIndexOf(_e,et){let rt=-1;return _e.some((nt,ot)=>et(nt)?(rt=ot,!0):!1),rt}function handleContainer(_e,et){const rt=[],nt=_e.container;if(!et.disableScrollLock){if(isOverflowing(nt)){const st=getScrollbarSize(ownerDocument(nt));rt.push({value:nt.style.paddingRight,property:"padding-right",el:nt}),nt.style.paddingRight=`${getPaddingRight(nt)+st}px`;const at=ownerDocument(nt).querySelectorAll(".mui-fixed");[].forEach.call(at,lt=>{rt.push({value:lt.style.paddingRight,property:"padding-right",el:lt}),lt.style.paddingRight=`${getPaddingRight(lt)+st}px`})}let it;if(nt.parentNode instanceof DocumentFragment)it=ownerDocument(nt).body;else{const st=nt.parentElement,at=ownerWindow(nt);it=(st==null?void 0:st.nodeName)==="HTML"&&at.getComputedStyle(st).overflowY==="scroll"?st:nt}rt.push({value:it.style.overflow,property:"overflow",el:it},{value:it.style.overflowX,property:"overflow-x",el:it},{value:it.style.overflowY,property:"overflow-y",el:it}),it.style.overflow="hidden"}return()=>{rt.forEach(({value:it,el:st,property:at})=>{it?st.style.setProperty(at,it):st.style.removeProperty(at)})}}function getHiddenSiblings(_e){const et=[];return[].forEach.call(_e.children,rt=>{rt.getAttribute("aria-hidden")==="true"&&et.push(rt)}),et}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(et,rt){let nt=this.modals.indexOf(et);if(nt!==-1)return nt;nt=this.modals.length,this.modals.push(et),et.modalRef&&ariaHidden(et.modalRef,!1);const ot=getHiddenSiblings(rt);ariaHiddenSiblings(rt,et.mount,et.modalRef,ot,!0);const it=findIndexOf(this.containers,st=>st.container===rt);return it!==-1?(this.containers[it].modals.push(et),nt):(this.containers.push({modals:[et],container:rt,restore:null,hiddenSiblings:ot}),nt)}mount(et,rt){const nt=findIndexOf(this.containers,it=>it.modals.indexOf(et)!==-1),ot=this.containers[nt];ot.restore||(ot.restore=handleContainer(ot,rt))}remove(et,rt=!0){const nt=this.modals.indexOf(et);if(nt===-1)return nt;const ot=findIndexOf(this.containers,st=>st.modals.indexOf(et)!==-1),it=this.containers[ot];if(it.modals.splice(it.modals.indexOf(et),1),this.modals.splice(nt,1),it.modals.length===0)it.restore&&it.restore(),et.modalRef&&ariaHidden(et.modalRef,rt),ariaHiddenSiblings(it.container,et.mount,et.modalRef,it.hiddenSiblings,!1),this.containers.splice(ot,1);else{const st=it.modals[it.modals.length-1];st.modalRef&&ariaHidden(st.modalRef,!1)}return nt}isTopModal(et){return this.modals.length>0&&this.modals[this.modals.length-1]===et}}function getModalUtilityClass(_e){return generateUtilityClass("MuiModal",_e)}generateUtilityClasses("MuiModal",["root","hidden"]);const _excluded$2x=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],useUtilityClasses$20=_e=>{const{open:et,exited:rt,classes:nt}=_e;return composeClasses({root:["root",!et&&rt&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,nt)};function getContainer(_e){return typeof _e=="function"?_e():_e}function getHasTransition(_e){return _e?_e.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager,ModalUnstyled=reactExports.forwardRef(function(et,rt){var nt,ot;const{children:it,classes:st,closeAfterTransition:at=!1,component:lt,container:ct,disableAutoFocus:pt=!1,disableEnforceFocus:ut=!1,disableEscapeKeyDown:ht=!1,disablePortal:ft=!1,disableRestoreFocus:gt=!1,disableScrollLock:vt=!1,hideBackdrop:yt=!1,keepMounted:mt=!1,manager:Et=defaultManager,onBackdropClick:bt,onClose:Ct,onKeyDown:Tt,open:wt,onTransitionEnter:Rt,onTransitionExited:It,slotProps:St={},slots:Pt={}}=et,Ot=_objectWithoutPropertiesLoose(et,_excluded$2x),[Ut,Bt]=reactExports.useState(!wt),xt=reactExports.useRef({}),At=reactExports.useRef(null),Mt=reactExports.useRef(null),Nt=useForkRef(Mt,rt),$t=getHasTransition(it),Ft=(nt=et["aria-hidden"])!=null?nt:!0,jt=()=>ownerDocument(At.current),zt=()=>(xt.current.modalRef=Mt.current,xt.current.mountNode=At.current,xt.current),Yt=()=>{Et.mount(zt(),{disableScrollLock:vt}),Mt.current&&(Mt.current.scrollTop=0)},Kt=useEventCallback(()=>{const Ht=getContainer(ct)||jt().body;Et.add(zt(),Ht),Mt.current&&Yt()}),er=reactExports.useCallback(()=>Et.isTopModal(zt()),[Et]),ir=useEventCallback(Ht=>{At.current=Ht,!(!Ht||!Mt.current)&&(wt&&er()?Yt():ariaHidden(Mt.current,Ft))}),rr=reactExports.useCallback(()=>{Et.remove(zt(),Ft)},[Et,Ft]);reactExports.useEffect(()=>()=>{rr()},[rr]),reactExports.useEffect(()=>{wt?Kt():(!$t||!at)&&rr()},[wt,rr,$t,at,Kt]);const lr=_extends({},et,{classes:st,closeAfterTransition:at,disableAutoFocus:pt,disableEnforceFocus:ut,disableEscapeKeyDown:ht,disablePortal:ft,disableRestoreFocus:gt,disableScrollLock:vt,exited:Ut,hideBackdrop:yt,keepMounted:mt}),nr=useUtilityClasses$20(lr),hr=()=>{Bt(!1),Rt&&Rt()},vr=()=>{Bt(!0),It&&It(),at&&rr()},yr=Ht=>{Ht.target===Ht.currentTarget&&(bt&&bt(Ht),Ct&&Ct(Ht,"backdropClick"))},Cr=Ht=>{Tt&&Tt(Ht),!(Ht.key!=="Escape"||!er())&&(ht||(Ht.stopPropagation(),Ct&&Ct(Ht,"escapeKeyDown")))},or={};it.props.tabIndex===void 0&&(or.tabIndex="-1"),$t&&(or.onEnter=createChainedFunction(hr,it.props.onEnter),or.onExited=createChainedFunction(vr,it.props.onExited));const ur=(ot=lt??Pt.root)!=null?ot:"div",pr=useSlotProps({elementType:ur,externalSlotProps:St.root,externalForwardedProps:Ot,additionalProps:{ref:Nt,role:"presentation",onKeyDown:Cr},className:nr.root,ownerState:lr}),Er=Pt.backdrop,Sr=useSlotProps({elementType:Er,externalSlotProps:St.backdrop,additionalProps:{"aria-hidden":!0,onClick:yr,open:wt},className:nr.backdrop,ownerState:lr});return!mt&&!wt&&(!$t||Ut)?null:jsx(Portal$1,{ref:ir,container:ct,disablePortal:ft,children:jsxs(ur,_extends({},pr,{children:[!yt&&Er?jsx(Er,_extends({},Sr)):null,jsx(FocusTrap,{disableEnforceFocus:ut,disableAutoFocus:pt,disableRestoreFocus:gt,isEnabled:er,open:wt,children:reactExports.cloneElement(it,or)})]}))})}),ModalUnstyled$1=ModalUnstyled,_excluded$2w=["onChange","maxRows","minRows","style","value"];function getStyleValue(_e,et){return parseInt(_e[et],10)||0}const styles$4={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$2(_e){return _e==null||Object.keys(_e).length===0}const TextareaAutosize=reactExports.forwardRef(function(et,rt){const{onChange:nt,maxRows:ot,minRows:it=1,style:st,value:at}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$2w),{current:ct}=reactExports.useRef(at!=null),pt=reactExports.useRef(null),ut=useForkRef(rt,pt),ht=reactExports.useRef(null),ft=reactExports.useRef(0),[gt,vt]=reactExports.useState({}),yt=reactExports.useCallback(()=>{const Tt=pt.current,Rt=ownerWindow(Tt).getComputedStyle(Tt);if(Rt.width==="0px")return{};const It=ht.current;It.style.width=Rt.width,It.value=Tt.value||et.placeholder||"x",It.value.slice(-1)===`
`&&(It.value+=" ");const St=Rt["box-sizing"],Pt=getStyleValue(Rt,"padding-bottom")+getStyleValue(Rt,"padding-top"),Ot=getStyleValue(Rt,"border-bottom-width")+getStyleValue(Rt,"border-top-width"),Ut=It.scrollHeight;It.value="x";const Bt=It.scrollHeight;let xt=Ut;it&&(xt=Math.max(Number(it)*Bt,xt)),ot&&(xt=Math.min(Number(ot)*Bt,xt)),xt=Math.max(xt,Bt);const At=xt+(St==="border-box"?Pt+Ot:0),Mt=Math.abs(xt-Ut)<=1;return{outerHeightStyle:At,overflow:Mt}},[ot,it,et.placeholder]),mt=(Tt,wt)=>{const{outerHeightStyle:Rt,overflow:It}=wt;return ft.current<20&&(Rt>0&&Math.abs((Tt.outerHeightStyle||0)-Rt)>1||Tt.overflow!==It)?(ft.current+=1,{overflow:It,outerHeightStyle:Rt}):Tt},Et=reactExports.useCallback(()=>{const Tt=yt();isEmpty$2(Tt)||vt(wt=>mt(wt,Tt))},[yt]),bt=()=>{const Tt=yt();isEmpty$2(Tt)||reactDomExports.flushSync(()=>{vt(wt=>mt(wt,Tt))})};reactExports.useEffect(()=>{const Tt=debounce$2(()=>{ft.current=0,pt.current&&bt()}),wt=ownerWindow(pt.current);wt.addEventListener("resize",Tt);let Rt;return typeof ResizeObserver<"u"&&(Rt=new ResizeObserver(Tt),Rt.observe(pt.current)),()=>{Tt.clear(),wt.removeEventListener("resize",Tt),Rt&&Rt.disconnect()}}),useEnhancedEffect$1(()=>{Et()}),reactExports.useEffect(()=>{ft.current=0},[at]);const Ct=Tt=>{ft.current=0,ct||Et(),nt&&nt(Tt)};return jsxs(reactExports.Fragment,{children:[jsx("textarea",_extends({value:at,onChange:Ct,ref:ut,rows:it,style:_extends({height:gt.outerHeightStyle,overflow:gt.overflow?"hidden":null},st)},lt)),jsx("textarea",{"aria-hidden":!0,className:et.className,readOnly:!0,ref:ht,tabIndex:-1,style:_extends({},styles$4.shadow,st,{padding:0})})]})}),TextareaAutosize$1=TextareaAutosize;function getSvgIconUtilityClass(_e){return generateUtilityClass("MuiSvgIcon",_e)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$2v=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$1$=_e=>{const{color:et,fontSize:rt,classes:nt}=_e,ot={root:["root",et!=="inherit"&&`color${capitalize(et)}`,`fontSize${capitalize(rt)}`]};return composeClasses(ot,getSvgIconUtilityClass,nt)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.color!=="inherit"&&et[`color${capitalize(rt.color)}`],et[`fontSize${capitalize(rt.fontSize)}`]]}})(({theme:_e,ownerState:et})=>{var rt,nt,ot,it,st,at,lt,ct,pt,ut,ht,ft,gt,vt,yt,mt,Et;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(rt=_e.transitions)==null||(nt=rt.create)==null?void 0:nt.call(rt,"fill",{duration:(ot=_e.transitions)==null||(it=ot.duration)==null?void 0:it.shorter}),fontSize:{inherit:"inherit",small:((st=_e.typography)==null||(at=st.pxToRem)==null?void 0:at.call(st,20))||"1.25rem",medium:((lt=_e.typography)==null||(ct=lt.pxToRem)==null?void 0:ct.call(lt,24))||"1.5rem",large:((pt=_e.typography)==null||(ut=pt.pxToRem)==null?void 0:ut.call(pt,35))||"2.1875rem"}[et.fontSize],color:(ht=(ft=(_e.vars||_e).palette)==null||(gt=ft[et.color])==null?void 0:gt.main)!=null?ht:{action:(vt=(_e.vars||_e).palette)==null||(yt=vt.action)==null?void 0:yt.active,disabled:(mt=(_e.vars||_e).palette)==null||(Et=mt.action)==null?void 0:Et.disabled,inherit:void 0}[et.color]}}),SvgIcon=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiSvgIcon"}),{children:ot,className:it,color:st="inherit",component:at="svg",fontSize:lt="medium",htmlColor:ct,inheritViewBox:pt=!1,titleAccess:ut,viewBox:ht="0 0 24 24"}=nt,ft=_objectWithoutPropertiesLoose(nt,_excluded$2v),gt=_extends({},nt,{color:st,component:at,fontSize:lt,instanceFontSize:et.fontSize,inheritViewBox:pt,viewBox:ht}),vt={};pt||(vt.viewBox=ht);const yt=useUtilityClasses$1$(gt);return jsxs(SvgIconRoot,_extends({as:at,className:clsx(yt.root,it),focusable:"false",color:ct,"aria-hidden":ut?void 0:!0,role:ut?"img":void 0,ref:rt},vt,ft,{ownerState:gt,children:[ot,ut?jsx("title",{children:ut}):null]}))});SvgIcon.muiName="SvgIcon";const SvgIcon$1=SvgIcon;function createSvgIcon$1(_e,et){function rt(nt,ot){return jsx(SvgIcon$1,_extends({"data-testid":`${et}Icon`,ref:ot},nt,{children:_e}))}return rt.muiName=SvgIcon$1.muiName,reactExports.memo(reactExports.forwardRef(rt))}const unstable_ClassNameGenerator={configure:_e=>{ClassNameGenerator$1.configure(_e)}},utils$1=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon:createSvgIcon$1,debounce:debounce$2,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"}));function _setPrototypeOf$x(_e,et){return _setPrototypeOf$x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$x(_e,et)}function _inheritsLoose(_e,et){_e.prototype=Object.create(et.prototype),_e.prototype.constructor=_e,_setPrototypeOf$x(_e,et)}function hasClass(_e,et){return _e.classList?!!et&&_e.classList.contains(et):(" "+(_e.className.baseVal||_e.className)+" ").indexOf(" "+et+" ")!==-1}function addClass(_e,et){_e.classList?_e.classList.add(et):hasClass(_e,et)||(typeof _e.className=="string"?_e.className=_e.className+" "+et:_e.setAttribute("class",(_e.className&&_e.className.baseVal||"")+" "+et))}function replaceClassName(_e,et){return _e.replace(new RegExp("(^|\\s)"+et+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(_e,et){_e.classList?_e.classList.remove(et):typeof _e.className=="string"?_e.className=replaceClassName(_e.className,et):_e.setAttribute("class",replaceClassName(_e.className&&_e.className.baseVal||"",et))}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(et){return et.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(_e){_inheritsLoose(et,_e);function et(nt,ot){var it;it=_e.call(this,nt,ot)||this;var st=ot,at=st&&!st.isMounting?nt.enter:nt.appear,lt;return it.appearStatus=null,nt.in?at?(lt=EXITED,it.appearStatus=ENTERING):lt=ENTERED:nt.unmountOnExit||nt.mountOnEnter?lt=UNMOUNTED:lt=EXITED,it.state={status:lt},it.nextCallback=null,it}et.getDerivedStateFromProps=function(ot,it){var st=ot.in;return st&&it.status===UNMOUNTED?{status:EXITED}:null};var rt=et.prototype;return rt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},rt.componentDidUpdate=function(ot){var it=null;if(ot!==this.props){var st=this.state.status;this.props.in?st!==ENTERING&&st!==ENTERED&&(it=ENTERING):(st===ENTERING||st===ENTERED)&&(it=EXITING)}this.updateStatus(!1,it)},rt.componentWillUnmount=function(){this.cancelNextCallback()},rt.getTimeouts=function(){var ot=this.props.timeout,it,st,at;return it=st=at=ot,ot!=null&&typeof ot!="number"&&(it=ot.exit,st=ot.enter,at=ot.appear!==void 0?ot.appear:st),{exit:it,enter:st,appear:at}},rt.updateStatus=function(ot,it){if(ot===void 0&&(ot=!1),it!==null)if(this.cancelNextCallback(),it===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var st=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);st&&forceReflow(st)}this.performEnter(ot)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},rt.performEnter=function(ot){var it=this,st=this.props.enter,at=this.context?this.context.isMounting:ot,lt=this.props.nodeRef?[at]:[ReactDOM.findDOMNode(this),at],ct=lt[0],pt=lt[1],ut=this.getTimeouts(),ht=at?ut.appear:ut.enter;if(!ot&&!st||config.disabled){this.safeSetState({status:ENTERED},function(){it.props.onEntered(ct)});return}this.props.onEnter(ct,pt),this.safeSetState({status:ENTERING},function(){it.props.onEntering(ct,pt),it.onTransitionEnd(ht,function(){it.safeSetState({status:ENTERED},function(){it.props.onEntered(ct,pt)})})})},rt.performExit=function(){var ot=this,it=this.props.exit,st=this.getTimeouts(),at=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!it||config.disabled){this.safeSetState({status:EXITED},function(){ot.props.onExited(at)});return}this.props.onExit(at),this.safeSetState({status:EXITING},function(){ot.props.onExiting(at),ot.onTransitionEnd(st.exit,function(){ot.safeSetState({status:EXITED},function(){ot.props.onExited(at)})})})},rt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},rt.safeSetState=function(ot,it){it=this.setNextCallback(it),this.setState(ot,it)},rt.setNextCallback=function(ot){var it=this,st=!0;return this.nextCallback=function(at){st&&(st=!1,it.nextCallback=null,ot(at))},this.nextCallback.cancel=function(){st=!1},this.nextCallback},rt.onTransitionEnd=function(ot,it){this.setNextCallback(it);var st=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),at=ot==null&&!this.props.addEndListener;if(!st||at){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var lt=this.props.nodeRef?[this.nextCallback]:[st,this.nextCallback],ct=lt[0],pt=lt[1];this.props.addEndListener(ct,pt)}ot!=null&&setTimeout(this.nextCallback,ot)},rt.render=function(){var ot=this.state.status;if(ot===UNMOUNTED)return null;var it=this.props,st=it.children;it.in,it.mountOnEnter,it.unmountOnExit,it.appear,it.enter,it.exit,it.timeout,it.addEndListener,it.onEnter,it.onEntering,it.onEntered,it.onExit,it.onExiting,it.onExited,it.nodeRef;var at=_objectWithoutPropertiesLoose(it,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof st=="function"?st(ot,at):React$1.cloneElement(React$1.Children.only(st),at))},et}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$7(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$7,onEntering:noop$7,onEntered:noop$7,onExit:noop$7,onExiting:noop$7,onExited:noop$7};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;var _addClass=function(et,rt){return et&&rt&&rt.split(" ").forEach(function(nt){return addClass(et,nt)})},removeClass=function(et,rt){return et&&rt&&rt.split(" ").forEach(function(nt){return removeClass$1(et,nt)})},CSSTransition=function(_e){_inheritsLoose(et,_e);function et(){for(var nt,ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=_e.call.apply(_e,[this].concat(it))||this,nt.appliedClasses={appear:{},enter:{},exit:{}},nt.onEnter=function(at,lt){var ct=nt.resolveArguments(at,lt),pt=ct[0],ut=ct[1];nt.removeClasses(pt,"exit"),nt.addClass(pt,ut?"appear":"enter","base"),nt.props.onEnter&&nt.props.onEnter(at,lt)},nt.onEntering=function(at,lt){var ct=nt.resolveArguments(at,lt),pt=ct[0],ut=ct[1],ht=ut?"appear":"enter";nt.addClass(pt,ht,"active"),nt.props.onEntering&&nt.props.onEntering(at,lt)},nt.onEntered=function(at,lt){var ct=nt.resolveArguments(at,lt),pt=ct[0],ut=ct[1],ht=ut?"appear":"enter";nt.removeClasses(pt,ht),nt.addClass(pt,ht,"done"),nt.props.onEntered&&nt.props.onEntered(at,lt)},nt.onExit=function(at){var lt=nt.resolveArguments(at),ct=lt[0];nt.removeClasses(ct,"appear"),nt.removeClasses(ct,"enter"),nt.addClass(ct,"exit","base"),nt.props.onExit&&nt.props.onExit(at)},nt.onExiting=function(at){var lt=nt.resolveArguments(at),ct=lt[0];nt.addClass(ct,"exit","active"),nt.props.onExiting&&nt.props.onExiting(at)},nt.onExited=function(at){var lt=nt.resolveArguments(at),ct=lt[0];nt.removeClasses(ct,"exit"),nt.addClass(ct,"exit","done"),nt.props.onExited&&nt.props.onExited(at)},nt.resolveArguments=function(at,lt){return nt.props.nodeRef?[nt.props.nodeRef.current,at]:[at,lt]},nt.getClassNames=function(at){var lt=nt.props.classNames,ct=typeof lt=="string",pt=ct&&lt?lt+"-":"",ut=ct?""+pt+at:lt[at],ht=ct?ut+"-active":lt[at+"Active"],ft=ct?ut+"-done":lt[at+"Done"];return{baseClassName:ut,activeClassName:ht,doneClassName:ft}},nt}var rt=et.prototype;return rt.addClass=function(ot,it,st){var at=this.getClassNames(it)[st+"ClassName"],lt=this.getClassNames("enter"),ct=lt.doneClassName;it==="appear"&&st==="done"&&ct&&(at+=" "+ct),st==="active"&&ot&&forceReflow(ot),at&&(this.appliedClasses[it][st]=at,_addClass(ot,at))},rt.removeClasses=function(ot,it){var st=this.appliedClasses[it],at=st.base,lt=st.active,ct=st.done;this.appliedClasses[it]={},at&&removeClass(ot,at),lt&&removeClass(ot,lt),ct&&removeClass(ot,ct)},rt.render=function(){var ot=this.props;ot.classNames;var it=_objectWithoutPropertiesLoose(ot,["classNames"]);return React$1.createElement(Transition$1,_extends({},it,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},et}(React$1.Component);CSSTransition.defaultProps={classNames:""};CSSTransition.propTypes={};const CSSTransition$1=CSSTransition;function _assertThisInitialized$x(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function getChildMapping(_e,et){var rt=function(it){return et&&reactExports.isValidElement(it)?et(it):it},nt=Object.create(null);return _e&&reactExports.Children.map(_e,function(ot){return ot}).forEach(function(ot){nt[ot.key]=rt(ot)}),nt}function mergeChildMappings(_e,et){_e=_e||{},et=et||{};function rt(pt){return pt in et?et[pt]:_e[pt]}var nt=Object.create(null),ot=[];for(var it in _e)it in et?ot.length&&(nt[it]=ot,ot=[]):ot.push(it);var st,at={};for(var lt in et){if(nt[lt])for(st=0;st<nt[lt].length;st++){var ct=nt[lt][st];at[nt[lt][st]]=rt(ct)}at[lt]=rt(lt)}for(st=0;st<ot.length;st++)at[ot[st]]=rt(ot[st]);return at}function getProp(_e,et,rt){return rt[et]!=null?rt[et]:_e.props[et]}function getInitialChildMapping(_e,et){return getChildMapping(_e.children,function(rt){return reactExports.cloneElement(rt,{onExited:et.bind(null,rt),in:!0,appear:getProp(rt,"appear",_e),enter:getProp(rt,"enter",_e),exit:getProp(rt,"exit",_e)})})}function getNextChildMapping(_e,et,rt){var nt=getChildMapping(_e.children),ot=mergeChildMappings(et,nt);return Object.keys(ot).forEach(function(it){var st=ot[it];if(reactExports.isValidElement(st)){var at=it in et,lt=it in nt,ct=et[it],pt=reactExports.isValidElement(ct)&&!ct.props.in;lt&&(!at||pt)?ot[it]=reactExports.cloneElement(st,{onExited:rt.bind(null,st),in:!0,exit:getProp(st,"exit",_e),enter:getProp(st,"enter",_e)}):!lt&&at&&!pt?ot[it]=reactExports.cloneElement(st,{in:!1}):lt&&at&&reactExports.isValidElement(ct)&&(ot[it]=reactExports.cloneElement(st,{onExited:rt.bind(null,st),in:ct.props.in,exit:getProp(st,"exit",_e),enter:getProp(st,"enter",_e)}))}}),ot}var values$1=Object.values||function(_e){return Object.keys(_e).map(function(et){return _e[et]})},defaultProps={component:"div",childFactory:function(et){return et}},TransitionGroup=function(_e){_inheritsLoose(et,_e);function et(nt,ot){var it;it=_e.call(this,nt,ot)||this;var st=it.handleExited.bind(_assertThisInitialized$x(it));return it.state={contextValue:{isMounting:!0},handleExited:st,firstRender:!0},it}var rt=et.prototype;return rt.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},rt.componentWillUnmount=function(){this.mounted=!1},et.getDerivedStateFromProps=function(ot,it){var st=it.children,at=it.handleExited,lt=it.firstRender;return{children:lt?getInitialChildMapping(ot,at):getNextChildMapping(ot,st,at),firstRender:!1}},rt.handleExited=function(ot,it){var st=getChildMapping(this.props.children);ot.key in st||(ot.props.onExited&&ot.props.onExited(it),this.mounted&&this.setState(function(at){var lt=_extends({},at.children);return delete lt[ot.key],{children:lt}}))},rt.render=function(){var ot=this.props,it=ot.component,st=ot.childFactory,at=_objectWithoutPropertiesLoose(ot,["component","childFactory"]),lt=this.state.contextValue,ct=values$1(this.state.children).map(st);return delete at.appear,delete at.enter,delete at.exit,it===null?React$1.createElement(TransitionGroupContext.Provider,{value:lt},ct):React$1.createElement(TransitionGroupContext.Provider,{value:lt},React$1.createElement(it,at,ct))},et}(React$1.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup,reflow=_e=>_e.scrollTop;function getTransitionProps(_e,et){var rt,nt;const{timeout:ot,easing:it,style:st={}}=_e;return{duration:(rt=st.transitionDuration)!=null?rt:typeof ot=="number"?ot:ot[et.mode]||0,easing:(nt=st.transitionTimingFunction)!=null?nt:typeof it=="object"?it[et.mode]:it,delay:st.transitionDelay}}function getCollapseUtilityClass(_e){return generateUtilityClass("MuiCollapse",_e)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const _excluded$2u=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],useUtilityClasses$1_=_e=>{const{orientation:et,classes:rt}=_e,nt={root:["root",`${et}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${et}`],wrapperInner:["wrapperInner",`${et}`]};return composeClasses(nt,getCollapseUtilityClass,rt)},CollapseRoot=styled$1("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.orientation],rt.state==="entered"&&et.entered,rt.state==="exited"&&!rt.in&&rt.collapsedSize==="0px"&&et.hidden]}})(({theme:_e,ownerState:et})=>_extends({height:0,overflow:"hidden",transition:_e.transitions.create("height")},et.orientation==="horizontal"&&{height:"auto",width:0,transition:_e.transitions.create("width")},et.state==="entered"&&_extends({height:"auto",overflow:"visible"},et.orientation==="horizontal"&&{width:"auto"}),et.state==="exited"&&!et.in&&et.collapsedSize==="0px"&&{visibility:"hidden"})),CollapseWrapper=styled$1("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(_e,et)=>et.wrapper})(({ownerState:_e})=>_extends({display:"flex",width:"100%"},_e.orientation==="horizontal"&&{width:"auto",height:"100%"})),CollapseWrapperInner=styled$1("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(_e,et)=>et.wrapperInner})(({ownerState:_e})=>_extends({width:"100%"},_e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Collapse=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiCollapse"}),{addEndListener:ot,children:it,className:st,collapsedSize:at="0px",component:lt,easing:ct,in:pt,onEnter:ut,onEntered:ht,onEntering:ft,onExit:gt,onExited:vt,onExiting:yt,orientation:mt="vertical",style:Et,timeout:bt=duration.standard,TransitionComponent:Ct=Transition$1}=nt,Tt=_objectWithoutPropertiesLoose(nt,_excluded$2u),wt=_extends({},nt,{orientation:mt,collapsedSize:at}),Rt=useUtilityClasses$1_(wt),It=useTheme(),St=reactExports.useRef(),Pt=reactExports.useRef(null),Ot=reactExports.useRef(),Ut=typeof at=="number"?`${at}px`:at,Bt=mt==="horizontal",xt=Bt?"width":"height";reactExports.useEffect(()=>()=>{clearTimeout(St.current)},[]);const At=reactExports.useRef(null),Mt=useForkRef(rt,At),Nt=rr=>lr=>{if(rr){const nr=At.current;lr===void 0?rr(nr):rr(nr,lr)}},$t=()=>Pt.current?Pt.current[Bt?"clientWidth":"clientHeight"]:0,Ft=Nt((rr,lr)=>{Pt.current&&Bt&&(Pt.current.style.position="absolute"),rr.style[xt]=Ut,ut&&ut(rr,lr)}),jt=Nt((rr,lr)=>{const nr=$t();Pt.current&&Bt&&(Pt.current.style.position="");const{duration:hr,easing:vr}=getTransitionProps({style:Et,timeout:bt,easing:ct},{mode:"enter"});if(bt==="auto"){const yr=It.transitions.getAutoHeightDuration(nr);rr.style.transitionDuration=`${yr}ms`,Ot.current=yr}else rr.style.transitionDuration=typeof hr=="string"?hr:`${hr}ms`;rr.style[xt]=`${nr}px`,rr.style.transitionTimingFunction=vr,ft&&ft(rr,lr)}),zt=Nt((rr,lr)=>{rr.style[xt]="auto",ht&&ht(rr,lr)}),Yt=Nt(rr=>{rr.style[xt]=`${$t()}px`,gt&&gt(rr)}),Kt=Nt(vt),er=Nt(rr=>{const lr=$t(),{duration:nr,easing:hr}=getTransitionProps({style:Et,timeout:bt,easing:ct},{mode:"exit"});if(bt==="auto"){const vr=It.transitions.getAutoHeightDuration(lr);rr.style.transitionDuration=`${vr}ms`,Ot.current=vr}else rr.style.transitionDuration=typeof nr=="string"?nr:`${nr}ms`;rr.style[xt]=Ut,rr.style.transitionTimingFunction=hr,yt&&yt(rr)});return jsx(Ct,_extends({in:pt,onEnter:Ft,onEntered:zt,onEntering:jt,onExit:Yt,onExited:Kt,onExiting:er,addEndListener:rr=>{bt==="auto"&&(St.current=setTimeout(rr,Ot.current||0)),ot&&ot(At.current,rr)},nodeRef:At,timeout:bt==="auto"?null:bt},Tt,{children:(rr,lr)=>jsx(CollapseRoot,_extends({as:lt,className:clsx(Rt.root,st,{entered:Rt.entered,exited:!pt&&Ut==="0px"&&Rt.hidden}[rr]),style:_extends({[Bt?"minWidth":"minHeight"]:Ut},Et),ownerState:_extends({},wt,{state:rr}),ref:Mt},lr,{children:jsx(CollapseWrapper,{ownerState:_extends({},wt,{state:rr}),className:Rt.wrapper,ref:Pt,children:jsx(CollapseWrapperInner,{ownerState:_extends({},wt,{state:rr}),className:Rt.wrapperInner,children:it})})}))}))});Collapse.muiSupportAuto=!0;const Collapse$1=Collapse;function getPaperUtilityClass(_e){return generateUtilityClass("MuiPaper",_e)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$2t=["className","component","elevation","square","variant"],useUtilityClasses$1Z=_e=>{const{square:et,elevation:rt,variant:nt,classes:ot}=_e,it={root:["root",nt,!et&&"rounded",nt==="elevation"&&`elevation${rt}`]};return composeClasses(it,getPaperUtilityClass,ot)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],!rt.square&&et.rounded,rt.variant==="elevation"&&et[`elevation${rt.elevation}`]]}})(({theme:_e,ownerState:et})=>{var rt;return _extends({backgroundColor:(_e.vars||_e).palette.background.paper,color:(_e.vars||_e).palette.text.primary,transition:_e.transitions.create("box-shadow")},!et.square&&{borderRadius:_e.shape.borderRadius},et.variant==="outlined"&&{border:`1px solid ${(_e.vars||_e).palette.divider}`},et.variant==="elevation"&&_extends({boxShadow:(_e.vars||_e).shadows[et.elevation]},!_e.vars&&_e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha$1("#fff",getOverlayAlpha$1(et.elevation))}, ${alpha$1("#fff",getOverlayAlpha$1(et.elevation))})`},_e.vars&&{backgroundImage:(rt=_e.vars.overlays)==null?void 0:rt[et.elevation]}))}),Paper=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiPaper"}),{className:ot,component:it="div",elevation:st=1,square:at=!1,variant:lt="elevation"}=nt,ct=_objectWithoutPropertiesLoose(nt,_excluded$2t),pt=_extends({},nt,{component:it,elevation:st,square:at,variant:lt}),ut=useUtilityClasses$1Z(pt);return jsx(PaperRoot,_extends({as:it,ownerState:pt,className:clsx(ut.root,ot),ref:rt},ct))}),Paper$1=Paper,AccordionContext=reactExports.createContext({}),AccordionContext$1=AccordionContext;function getAccordionUtilityClass(_e){return generateUtilityClass("MuiAccordion",_e)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),accordionClasses$1=accordionClasses,_excluded$2s=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],useUtilityClasses$1Y=_e=>{const{classes:et,square:rt,expanded:nt,disabled:ot,disableGutters:it}=_e;return composeClasses({root:["root",!rt&&"rounded",nt&&"expanded",ot&&"disabled",!it&&"gutters"],region:["region"]},getAccordionUtilityClass,et)},AccordionRoot=styled$1(Paper$1,{name:"MuiAccordion",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`& .${accordionClasses$1.region}`]:et.region},et.root,!rt.square&&et.rounded,!rt.disableGutters&&et.gutters]}})(({theme:_e})=>{const et={duration:_e.transitions.duration.shortest};return{position:"relative",transition:_e.transitions.create(["margin"],et),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(_e.vars||_e).palette.divider,transition:_e.transitions.create(["opacity","background-color"],et)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${accordionClasses$1.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${accordionClasses$1.disabled}`]:{backgroundColor:(_e.vars||_e).palette.action.disabledBackground}}},({theme:_e,ownerState:et})=>_extends({},!et.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(_e.vars||_e).shape.borderRadius,borderTopRightRadius:(_e.vars||_e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(_e.vars||_e).shape.borderRadius,borderBottomRightRadius:(_e.vars||_e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!et.disableGutters&&{[`&.${accordionClasses$1.expanded}`]:{margin:"16px 0"}})),Accordion$2=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiAccordion"}),{children:ot,className:it,defaultExpanded:st=!1,disabled:at=!1,disableGutters:lt=!1,expanded:ct,onChange:pt,square:ut=!1,TransitionComponent:ht=Collapse$1,TransitionProps:ft}=nt,gt=_objectWithoutPropertiesLoose(nt,_excluded$2s),[vt,yt]=useControlled({controlled:ct,default:st,name:"Accordion",state:"expanded"}),mt=reactExports.useCallback(Rt=>{yt(!vt),pt&&pt(Rt,!vt)},[vt,pt,yt]),[Et,...bt]=reactExports.Children.toArray(ot),Ct=reactExports.useMemo(()=>({expanded:vt,disabled:at,disableGutters:lt,toggle:mt}),[vt,at,lt,mt]),Tt=_extends({},nt,{square:ut,disabled:at,disableGutters:lt,expanded:vt}),wt=useUtilityClasses$1Y(Tt);return jsxs(AccordionRoot,_extends({className:clsx(wt.root,it),ref:rt,ownerState:Tt,square:ut},gt,{children:[jsx(AccordionContext$1.Provider,{value:Ct,children:Et}),jsx(ht,_extends({in:vt,timeout:"auto"},ft,{children:jsx("div",{"aria-labelledby":Et.props.id,id:Et.props["aria-controls"],role:"region",className:wt.region,children:bt})}))]}))}),MuiAccordion=Accordion$2;function getAccordionDetailsUtilityClass(_e){return generateUtilityClass("MuiAccordionDetails",_e)}generateUtilityClasses("MuiAccordionDetails",["root"]);const _excluded$2r=["className"],useUtilityClasses$1X=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,et)},AccordionDetailsRoot=styled$1("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>({padding:_e.spacing(1,2,2)})),AccordionDetails$2=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiAccordionDetails"}),{className:ot}=nt,it=_objectWithoutPropertiesLoose(nt,_excluded$2r),st=nt,at=useUtilityClasses$1X(st);return jsx(AccordionDetailsRoot,_extends({className:clsx(at.root,ot),ref:rt,ownerState:st},it))}),MuiAccordionDetails=AccordionDetails$2;function Ripple(_e){const{className:et,classes:rt,pulsate:nt=!1,rippleX:ot,rippleY:it,rippleSize:st,in:at,onExited:lt,timeout:ct}=_e,[pt,ut]=reactExports.useState(!1),ht=clsx(et,rt.ripple,rt.rippleVisible,nt&&rt.ripplePulsate),ft={width:st,height:st,top:-(st/2)+it,left:-(st/2)+ot},gt=clsx(rt.child,pt&&rt.childLeaving,nt&&rt.childPulsate);return!at&&!pt&&ut(!0),reactExports.useEffect(()=>{if(!at&&lt!=null){const vt=setTimeout(lt,ct);return()=>{clearTimeout(vt)}}},[lt,at,ct]),jsx("span",{className:ht,style:ft,children:jsx("span",{className:gt})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),touchRippleClasses$1=touchRippleClasses,_excluded$2q=["center","classes","className"];let _$3=_e=>_e,_t$2,_t2$2,_t3$2,_t4$2;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t$2||(_t$2=_$3`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2$2||(_t2$2=_$3`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3$2||(_t3$2=_$3`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4$2||(_t4$2=_$3`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:_e})=>_e.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:_e})=>_e.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:_e})=>_e.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:_e})=>_e.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTouchRipple"}),{center:ot=!1,classes:it={},className:st}=nt,at=_objectWithoutPropertiesLoose(nt,_excluded$2q),[lt,ct]=reactExports.useState([]),pt=reactExports.useRef(0),ut=reactExports.useRef(null);reactExports.useEffect(()=>{ut.current&&(ut.current(),ut.current=null)},[lt]);const ht=reactExports.useRef(!1),ft=reactExports.useRef(null),gt=reactExports.useRef(null),vt=reactExports.useRef(null);reactExports.useEffect(()=>()=>{clearTimeout(ft.current)},[]);const yt=reactExports.useCallback(Ct=>{const{pulsate:Tt,rippleX:wt,rippleY:Rt,rippleSize:It,cb:St}=Ct;ct(Pt=>[...Pt,jsx(TouchRippleRipple,{classes:{ripple:clsx(it.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(it.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(it.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(it.child,touchRippleClasses$1.child),childLeaving:clsx(it.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(it.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:Tt,rippleX:wt,rippleY:Rt,rippleSize:It},pt.current)]),pt.current+=1,ut.current=St},[it]),mt=reactExports.useCallback((Ct={},Tt={},wt=()=>{})=>{const{pulsate:Rt=!1,center:It=ot||Tt.pulsate,fakeElement:St=!1}=Tt;if((Ct==null?void 0:Ct.type)==="mousedown"&&ht.current){ht.current=!1;return}(Ct==null?void 0:Ct.type)==="touchstart"&&(ht.current=!0);const Pt=St?null:vt.current,Ot=Pt?Pt.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Ut,Bt,xt;if(It||Ct===void 0||Ct.clientX===0&&Ct.clientY===0||!Ct.clientX&&!Ct.touches)Ut=Math.round(Ot.width/2),Bt=Math.round(Ot.height/2);else{const{clientX:At,clientY:Mt}=Ct.touches&&Ct.touches.length>0?Ct.touches[0]:Ct;Ut=Math.round(At-Ot.left),Bt=Math.round(Mt-Ot.top)}if(It)xt=Math.sqrt((2*Ot.width**2+Ot.height**2)/3),xt%2===0&&(xt+=1);else{const At=Math.max(Math.abs((Pt?Pt.clientWidth:0)-Ut),Ut)*2+2,Mt=Math.max(Math.abs((Pt?Pt.clientHeight:0)-Bt),Bt)*2+2;xt=Math.sqrt(At**2+Mt**2)}Ct!=null&&Ct.touches?gt.current===null&&(gt.current=()=>{yt({pulsate:Rt,rippleX:Ut,rippleY:Bt,rippleSize:xt,cb:wt})},ft.current=setTimeout(()=>{gt.current&&(gt.current(),gt.current=null)},DELAY_RIPPLE)):yt({pulsate:Rt,rippleX:Ut,rippleY:Bt,rippleSize:xt,cb:wt})},[ot,yt]),Et=reactExports.useCallback(()=>{mt({},{pulsate:!0})},[mt]),bt=reactExports.useCallback((Ct,Tt)=>{if(clearTimeout(ft.current),(Ct==null?void 0:Ct.type)==="touchend"&&gt.current){gt.current(),gt.current=null,ft.current=setTimeout(()=>{bt(Ct,Tt)});return}gt.current=null,ct(wt=>wt.length>0?wt.slice(1):wt),ut.current=Tt},[]);return reactExports.useImperativeHandle(rt,()=>({pulsate:Et,start:mt,stop:bt}),[Et,mt,bt]),jsx(TouchRippleRoot,_extends({className:clsx(touchRippleClasses$1.root,it.root,st),ref:vt},at,{children:jsx(TransitionGroup$1,{component:null,exit:!0,children:lt})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(_e){return generateUtilityClass("MuiButtonBase",_e)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),buttonBaseClasses$1=buttonBaseClasses,_excluded$2p=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$1W=_e=>{const{disabled:et,focusVisible:rt,focusVisibleClassName:nt,classes:ot}=_e,st=composeClasses({root:["root",et&&"disabled",rt&&"focusVisible"]},getButtonBaseUtilityClass,ot);return rt&&nt&&(st.root+=` ${nt}`),st},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiButtonBase"}),{action:ot,centerRipple:it=!1,children:st,className:at,component:lt="button",disabled:ct=!1,disableRipple:pt=!1,disableTouchRipple:ut=!1,focusRipple:ht=!1,LinkComponent:ft="a",onBlur:gt,onClick:vt,onContextMenu:yt,onDragLeave:mt,onFocus:Et,onFocusVisible:bt,onKeyDown:Ct,onKeyUp:Tt,onMouseDown:wt,onMouseLeave:Rt,onMouseUp:It,onTouchEnd:St,onTouchMove:Pt,onTouchStart:Ot,tabIndex:Ut=0,TouchRippleProps:Bt,touchRippleRef:xt,type:At}=nt,Mt=_objectWithoutPropertiesLoose(nt,_excluded$2p),Nt=reactExports.useRef(null),$t=reactExports.useRef(null),Ft=useForkRef($t,xt),{isFocusVisibleRef:jt,onFocus:zt,onBlur:Yt,ref:Kt}=useIsFocusVisible(),[er,ir]=reactExports.useState(!1);ct&&er&&ir(!1),reactExports.useImperativeHandle(ot,()=>({focusVisible:()=>{ir(!0),Nt.current.focus()}}),[]);const[rr,lr]=reactExports.useState(!1);reactExports.useEffect(()=>{lr(!0)},[]);const nr=rr&&!pt&&!ct;reactExports.useEffect(()=>{er&&ht&&!pt&&rr&&$t.current.pulsate()},[pt,ht,er,rr]);function hr(mr,br,Rr=ut){return useEventCallback(Pr=>(br&&br(Pr),!Rr&&$t.current&&$t.current[mr](Pr),!0))}const vr=hr("start",wt),yr=hr("stop",yt),Cr=hr("stop",mt),or=hr("stop",It),ur=hr("stop",mr=>{er&&mr.preventDefault(),Rt&&Rt(mr)}),pr=hr("start",Ot),Er=hr("stop",St),Sr=hr("stop",Pt),Ht=hr("stop",mr=>{Yt(mr),jt.current===!1&&ir(!1),gt&&gt(mr)},!1),qt=useEventCallback(mr=>{Nt.current||(Nt.current=mr.currentTarget),zt(mr),jt.current===!0&&(ir(!0),bt&&bt(mr)),Et&&Et(mr)}),fr=()=>{const mr=Nt.current;return lt&&lt!=="button"&&!(mr.tagName==="A"&&mr.href)},cr=reactExports.useRef(!1),Ar=useEventCallback(mr=>{ht&&!cr.current&&er&&$t.current&&mr.key===" "&&(cr.current=!0,$t.current.stop(mr,()=>{$t.current.start(mr)})),mr.target===mr.currentTarget&&fr()&&mr.key===" "&&mr.preventDefault(),Ct&&Ct(mr),mr.target===mr.currentTarget&&fr()&&mr.key==="Enter"&&!ct&&(mr.preventDefault(),vt&&vt(mr))}),Gr=useEventCallback(mr=>{ht&&mr.key===" "&&$t.current&&er&&!mr.defaultPrevented&&(cr.current=!1,$t.current.stop(mr,()=>{$t.current.pulsate(mr)})),Tt&&Tt(mr),vt&&mr.target===mr.currentTarget&&fr()&&mr.key===" "&&!mr.defaultPrevented&&vt(mr)});let Qr=lt;Qr==="button"&&(Mt.href||Mt.to)&&(Qr=ft);const hn={};Qr==="button"?(hn.type=At===void 0?"button":At,hn.disabled=ct):(!Mt.href&&!Mt.to&&(hn.role="button"),ct&&(hn["aria-disabled"]=ct));const sn=useForkRef(rt,Kt,Nt),qr=_extends({},nt,{centerRipple:it,component:lt,disabled:ct,disableRipple:pt,disableTouchRipple:ut,focusRipple:ht,tabIndex:Ut,focusVisible:er}),dr=useUtilityClasses$1W(qr);return jsxs(ButtonBaseRoot,_extends({as:Qr,className:clsx(dr.root,at),ownerState:qr,onBlur:Ht,onClick:vt,onContextMenu:yr,onFocus:qt,onKeyDown:Ar,onKeyUp:Gr,onMouseDown:vr,onMouseLeave:ur,onMouseUp:or,onDragLeave:Cr,onTouchEnd:Er,onTouchMove:Sr,onTouchStart:pr,ref:sn,tabIndex:ct?-1:Ut,type:At},hn,Mt,{children:[st,nr?jsx(TouchRipple$1,_extends({ref:Ft,center:it},Bt)):null]}))}),ButtonBase$1=ButtonBase;function getAccordionSummaryUtilityClass(_e){return generateUtilityClass("MuiAccordionSummary",_e)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),accordionSummaryClasses$1=accordionSummaryClasses,_excluded$2o=["children","className","expandIcon","focusVisibleClassName","onClick"],useUtilityClasses$1V=_e=>{const{classes:et,expanded:rt,disabled:nt,disableGutters:ot}=_e;return composeClasses({root:["root",rt&&"expanded",nt&&"disabled",!ot&&"gutters"],focusVisible:["focusVisible"],content:["content",rt&&"expanded",!ot&&"contentGutters"],expandIconWrapper:["expandIconWrapper",rt&&"expanded"]},getAccordionSummaryUtilityClass,et)},AccordionSummaryRoot=styled$1(ButtonBase$1,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e,ownerState:et})=>{const rt={duration:_e.transitions.duration.shortest};return _extends({display:"flex",minHeight:48,padding:_e.spacing(0,2),transition:_e.transitions.create(["min-height","background-color"],rt),[`&.${accordionSummaryClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette.action.focus},[`&.${accordionSummaryClasses$1.disabled}`]:{opacity:(_e.vars||_e).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses$1.disabled})`]:{cursor:"pointer"}},!et.disableGutters&&{[`&.${accordionSummaryClasses$1.expanded}`]:{minHeight:64}})}),AccordionSummaryContent=styled$1("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(_e,et)=>et.content})(({theme:_e,ownerState:et})=>_extends({display:"flex",flexGrow:1,margin:"12px 0"},!et.disableGutters&&{transition:_e.transitions.create(["margin"],{duration:_e.transitions.duration.shortest}),[`&.${accordionSummaryClasses$1.expanded}`]:{margin:"20px 0"}})),AccordionSummaryExpandIconWrapper=styled$1("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(_e,et)=>et.expandIconWrapper})(({theme:_e})=>({display:"flex",color:(_e.vars||_e).palette.action.active,transform:"rotate(0deg)",transition:_e.transitions.create("transform",{duration:_e.transitions.duration.shortest}),[`&.${accordionSummaryClasses$1.expanded}`]:{transform:"rotate(180deg)"}})),AccordionSummary$2=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiAccordionSummary"}),{children:ot,className:it,expandIcon:st,focusVisibleClassName:at,onClick:lt}=nt,ct=_objectWithoutPropertiesLoose(nt,_excluded$2o),{disabled:pt=!1,disableGutters:ut,expanded:ht,toggle:ft}=reactExports.useContext(AccordionContext$1),gt=mt=>{ft&&ft(mt),lt&&lt(mt)},vt=_extends({},nt,{expanded:ht,disabled:pt,disableGutters:ut}),yt=useUtilityClasses$1V(vt);return jsxs(AccordionSummaryRoot,_extends({focusRipple:!1,disableRipple:!0,disabled:pt,component:"div","aria-expanded":ht,className:clsx(yt.root,it),focusVisibleClassName:clsx(yt.focusVisible,at),onClick:gt,ref:rt,ownerState:vt},ct,{children:[jsx(AccordionSummaryContent,{className:yt.content,ownerState:vt,children:ot}),st&&jsx(AccordionSummaryExpandIconWrapper,{className:yt.expandIconWrapper,ownerState:vt,children:st})]}))}),MuiAccordionSummary=AccordionSummary$2;function getAlertUtilityClass(_e){return generateUtilityClass("MuiAlert",_e)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),alertClasses$1=alertClasses;function getIconButtonUtilityClass(_e){return generateUtilityClass("MuiIconButton",_e)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),iconButtonClasses$1=iconButtonClasses,_excluded$2n=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$1U=_e=>{const{classes:et,disabled:rt,color:nt,edge:ot,size:it}=_e,st={root:["root",rt&&"disabled",nt!=="default"&&`color${capitalize(nt)}`,ot&&`edge${capitalize(ot)}`,`size${capitalize(it)}`]};return composeClasses(st,getIconButtonUtilityClass,et)},IconButtonRoot=styled$1(ButtonBase$1,{name:"MuiIconButton",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.color!=="default"&&et[`color${capitalize(rt.color)}`],rt.edge&&et[`edge${capitalize(rt.edge)}`],et[`size${capitalize(rt.size)}`]]}})(({theme:_e,ownerState:et})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:_e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(_e.vars||_e).palette.action.active,transition:_e.transitions.create("background-color",{duration:_e.transitions.duration.shortest})},!et.disableRipple&&{"&:hover":{backgroundColor:_e.vars?`rgba(${_e.vars.palette.action.activeChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},et.edge==="start"&&{marginLeft:et.size==="small"?-3:-12},et.edge==="end"&&{marginRight:et.size==="small"?-3:-12}),({theme:_e,ownerState:et})=>{var rt;const nt=(rt=(_e.vars||_e).palette)==null?void 0:rt[et.color];return _extends({},et.color==="inherit"&&{color:"inherit"},et.color!=="inherit"&&et.color!=="default"&&_extends({color:nt==null?void 0:nt.main},!et.disableRipple&&{"&:hover":_extends({},nt&&{backgroundColor:_e.vars?`rgba(${nt.mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(nt.main,_e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),et.size==="small"&&{padding:5,fontSize:_e.typography.pxToRem(18)},et.size==="large"&&{padding:12,fontSize:_e.typography.pxToRem(28)},{[`&.${iconButtonClasses$1.disabled}`]:{backgroundColor:"transparent",color:(_e.vars||_e).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiIconButton"}),{edge:ot=!1,children:it,className:st,color:at="default",disabled:lt=!1,disableFocusRipple:ct=!1,size:pt="medium"}=nt,ut=_objectWithoutPropertiesLoose(nt,_excluded$2n),ht=_extends({},nt,{edge:ot,color:at,disabled:lt,disableFocusRipple:ct,size:pt}),ft=useUtilityClasses$1U(ht);return jsx(IconButtonRoot,_extends({className:clsx(ft.root,st),centerRipple:!0,focusRipple:!ct,disabled:lt,ref:rt,ownerState:ht},ut,{children:it}))}),IconButton$1=IconButton,SuccessOutlinedIcon=createSvgIcon$1(jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon$1(jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon$1(jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon$1(jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon$1(jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$2m=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$1T=_e=>{const{variant:et,color:rt,severity:nt,classes:ot}=_e,it={root:["root",`${et}${capitalize(rt||nt)}`,`${et}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(it,getAlertUtilityClass,ot)},AlertRoot=styled$1(Paper$1,{name:"MuiAlert",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],et[`${rt.variant}${capitalize(rt.color||rt.severity)}`]]}})(({theme:_e,ownerState:et})=>{const rt=_e.palette.mode==="light"?darken:lighten,nt=_e.palette.mode==="light"?lighten:darken,ot=et.color||et.severity;return _extends({},_e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},ot&&et.variant==="standard"&&{color:_e.vars?_e.vars.palette.Alert[`${ot}Color`]:rt(_e.palette[ot].light,.6),backgroundColor:_e.vars?_e.vars.palette.Alert[`${ot}StandardBg`]:nt(_e.palette[ot].light,.9),[`& .${alertClasses$1.icon}`]:_e.vars?{color:_e.vars.palette.Alert[`${ot}IconColor`]}:{color:_e.palette[ot].main}},ot&&et.variant==="outlined"&&{color:_e.vars?_e.vars.palette.Alert[`${ot}Color`]:rt(_e.palette[ot].light,.6),border:`1px solid ${(_e.vars||_e).palette[ot].light}`,[`& .${alertClasses$1.icon}`]:_e.vars?{color:_e.vars.palette.Alert[`${ot}IconColor`]}:{color:_e.palette[ot].main}},ot&&et.variant==="filled"&&_extends({fontWeight:_e.typography.fontWeightMedium},_e.vars?{color:_e.vars.palette.Alert[`${ot}FilledColor`],backgroundColor:_e.vars.palette.Alert[`${ot}FilledBg`]}:{backgroundColor:_e.palette.mode==="dark"?_e.palette[ot].dark:_e.palette[ot].main,color:_e.palette.getContrastText(_e.palette[ot].main)}))}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(_e,et)=>et.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(_e,et)=>et.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(_e,et)=>et.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(et,rt){var nt,ot,it,st,at,lt;const ct=useThemeProps({props:et,name:"MuiAlert"}),{action:pt,children:ut,className:ht,closeText:ft="Close",color:gt,components:vt={},componentsProps:yt={},icon:mt,iconMapping:Et=defaultIconMapping,onClose:bt,role:Ct="alert",severity:Tt="success",slotProps:wt={},slots:Rt={},variant:It="standard"}=ct,St=_objectWithoutPropertiesLoose(ct,_excluded$2m),Pt=_extends({},ct,{color:gt,severity:Tt,variant:It}),Ot=useUtilityClasses$1T(Pt),Ut=(nt=(ot=Rt.closeButton)!=null?ot:vt.CloseButton)!=null?nt:IconButton$1,Bt=(it=(st=Rt.closeIcon)!=null?st:vt.CloseIcon)!=null?it:ClearIcon,xt=(at=wt.closeButton)!=null?at:yt.closeButton,At=(lt=wt.closeIcon)!=null?lt:yt.closeIcon;return jsxs(AlertRoot,_extends({role:Ct,elevation:0,ownerState:Pt,className:clsx(Ot.root,ht),ref:rt},St,{children:[mt!==!1?jsx(AlertIcon,{ownerState:Pt,className:Ot.icon,children:mt||Et[Tt]||defaultIconMapping[Tt]}):null,jsx(AlertMessage,{ownerState:Pt,className:Ot.message,children:ut}),pt!=null?jsx(AlertAction,{ownerState:Pt,className:Ot.action,children:pt}):null,pt==null&&bt?jsx(AlertAction,{ownerState:Pt,className:Ot.action,children:jsx(Ut,_extends({size:"small","aria-label":ft,title:ft,color:"inherit",onClick:bt},xt,{children:jsx(Bt,_extends({fontSize:"small"},At))}))}):null]}))}),Alert$1=Alert;function getTypographyUtilityClass(_e){return generateUtilityClass("MuiTypography",_e)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$2l=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$1S=_e=>{const{align:et,gutterBottom:rt,noWrap:nt,paragraph:ot,variant:it,classes:st}=_e,at={root:["root",it,_e.align!=="inherit"&&`align${capitalize(et)}`,rt&&"gutterBottom",nt&&"noWrap",ot&&"paragraph"]};return composeClasses(at,getTypographyUtilityClass,st)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.variant&&et[rt.variant],rt.align!=="inherit"&&et[`align${capitalize(rt.align)}`],rt.noWrap&&et.noWrap,rt.gutterBottom&&et.gutterBottom,rt.paragraph&&et.paragraph]}})(({theme:_e,ownerState:et})=>_extends({margin:0},et.variant&&_e.typography[et.variant],et.align!=="inherit"&&{textAlign:et.align},et.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},et.gutterBottom&&{marginBottom:"0.35em"},et.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations$1={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors$1=_e=>colorTransformations$1[_e]||_e,Typography=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTypography"}),ot=transformDeprecatedColors$1(nt.color),it=extendSxProp(_extends({},nt,{color:ot})),{align:st="inherit",className:at,component:lt,gutterBottom:ct=!1,noWrap:pt=!1,paragraph:ut=!1,variant:ht="body1",variantMapping:ft=defaultVariantMapping}=it,gt=_objectWithoutPropertiesLoose(it,_excluded$2l),vt=_extends({},it,{align:st,color:ot,className:at,component:lt,gutterBottom:ct,noWrap:pt,paragraph:ut,variant:ht,variantMapping:ft}),yt=lt||(ut?"p":ft[ht]||defaultVariantMapping[ht])||"span",mt=useUtilityClasses$1S(vt);return jsx(TypographyRoot,_extends({as:yt,ref:rt,ownerState:vt,className:clsx(mt.root,at)},gt))}),Typography$1=Typography;function getAppBarUtilityClass(_e){return generateUtilityClass("MuiAppBar",_e)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const _excluded$2k=["className","color","enableColorOnDark","position"],useUtilityClasses$1R=_e=>{const{color:et,position:rt,classes:nt}=_e,ot={root:["root",`color${capitalize(et)}`,`position${capitalize(rt)}`]};return composeClasses(ot,getAppBarUtilityClass,nt)},joinVars=(_e,et)=>_e?`${_e==null?void 0:_e.replace(")","")}, ${et})`:et,AppBarRoot=styled$1(Paper$1,{name:"MuiAppBar",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`position${capitalize(rt.position)}`],et[`color${capitalize(rt.color)}`]]}})(({theme:_e,ownerState:et})=>{const rt=_e.palette.mode==="light"?_e.palette.grey[100]:_e.palette.grey[900];return _extends({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},et.position==="fixed"&&{position:"fixed",zIndex:(_e.vars||_e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},et.position==="absolute"&&{position:"absolute",zIndex:(_e.vars||_e).zIndex.appBar,top:0,left:"auto",right:0},et.position==="sticky"&&{position:"sticky",zIndex:(_e.vars||_e).zIndex.appBar,top:0,left:"auto",right:0},et.position==="static"&&{position:"static"},et.position==="relative"&&{position:"relative"},!_e.vars&&_extends({},et.color==="default"&&{backgroundColor:rt,color:_e.palette.getContrastText(rt)},et.color&&et.color!=="default"&&et.color!=="inherit"&&et.color!=="transparent"&&{backgroundColor:_e.palette[et.color].main,color:_e.palette[et.color].contrastText},et.color==="inherit"&&{color:"inherit"},_e.palette.mode==="dark"&&!et.enableColorOnDark&&{backgroundColor:null,color:null},et.color==="transparent"&&_extends({backgroundColor:"transparent",color:"inherit"},_e.palette.mode==="dark"&&{backgroundImage:"none"})),_e.vars&&_extends({},et.color==="default"&&{"--AppBar-background":et.enableColorOnDark?_e.vars.palette.AppBar.defaultBg:joinVars(_e.vars.palette.AppBar.darkBg,_e.vars.palette.AppBar.defaultBg),"--AppBar-color":et.enableColorOnDark?_e.vars.palette.text.primary:joinVars(_e.vars.palette.AppBar.darkColor,_e.vars.palette.text.primary)},et.color&&!et.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":et.enableColorOnDark?_e.vars.palette[et.color].main:joinVars(_e.vars.palette.AppBar.darkBg,_e.vars.palette[et.color].main),"--AppBar-color":et.enableColorOnDark?_e.vars.palette[et.color].contrastText:joinVars(_e.vars.palette.AppBar.darkColor,_e.vars.palette[et.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:et.color==="inherit"?"inherit":"var(--AppBar-color)"},et.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),AppBar=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiAppBar"}),{className:ot,color:it="primary",enableColorOnDark:st=!1,position:at="fixed"}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded$2k),ct=_extends({},nt,{color:it,position:at,enableColorOnDark:st}),pt=useUtilityClasses$1R(ct);return jsx(AppBarRoot,_extends({square:!0,component:"header",ownerState:ct,elevation:4,className:clsx(pt.root,ot,at==="fixed"&&"mui-fixed"),ref:rt},lt))}),AppBar$1=AppBar,_excluded$2j=["components","componentsProps","slots","slotProps"],PopperRoot=styled$1(PopperUnstyled$1,{name:"MuiPopper",slot:"Root",overridesResolver:(_e,et)=>et.root})({}),Popper=reactExports.forwardRef(function(et,rt){var nt;const ot=useTheme$2(),it=useThemeProps({props:et,name:"MuiPopper"}),{components:st,componentsProps:at,slots:lt,slotProps:ct}=it,pt=_objectWithoutPropertiesLoose(it,_excluded$2j),ut=(nt=lt==null?void 0:lt.root)!=null?nt:st==null?void 0:st.Root;return jsx(PopperRoot,_extends({direction:ot==null?void 0:ot.direction,slots:{root:ut},slotProps:ct??at},pt,{ref:rt}))}),Popper$1=Popper;function getListSubheaderUtilityClass(_e){return generateUtilityClass("MuiListSubheader",_e)}generateUtilityClasses("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const _excluded$2i=["className","color","component","disableGutters","disableSticky","inset"],useUtilityClasses$1Q=_e=>{const{classes:et,color:rt,disableGutters:nt,inset:ot,disableSticky:it}=_e,st={root:["root",rt!=="default"&&`color${capitalize(rt)}`,!nt&&"gutters",ot&&"inset",!it&&"sticky"]};return composeClasses(st,getListSubheaderUtilityClass,et)},ListSubheaderRoot=styled$1("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.color!=="default"&&et[`color${capitalize(rt.color)}`],!rt.disableGutters&&et.gutters,rt.inset&&et.inset,!rt.disableSticky&&et.sticky]}})(({theme:_e,ownerState:et})=>_extends({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(_e.vars||_e).palette.text.secondary,fontFamily:_e.typography.fontFamily,fontWeight:_e.typography.fontWeightMedium,fontSize:_e.typography.pxToRem(14)},et.color==="primary"&&{color:(_e.vars||_e).palette.primary.main},et.color==="inherit"&&{color:"inherit"},!et.disableGutters&&{paddingLeft:16,paddingRight:16},et.inset&&{paddingLeft:72},!et.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(_e.vars||_e).palette.background.paper})),ListSubheader=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiListSubheader"}),{className:ot,color:it="default",component:st="li",disableGutters:at=!1,disableSticky:lt=!1,inset:ct=!1}=nt,pt=_objectWithoutPropertiesLoose(nt,_excluded$2i),ut=_extends({},nt,{color:it,component:st,disableGutters:at,disableSticky:lt,inset:ct}),ht=useUtilityClasses$1Q(ut);return jsx(ListSubheaderRoot,_extends({as:st,className:clsx(ht.root,ot),ref:rt,ownerState:ut},pt))}),ListSubheader$1=ListSubheader,CancelIcon=createSvgIcon$1(jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(_e){return generateUtilityClass("MuiChip",_e)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),chipClasses$1=chipClasses,_excluded$2h=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$1P=_e=>{const{classes:et,disabled:rt,size:nt,color:ot,iconColor:it,onDelete:st,clickable:at,variant:lt}=_e,ct={root:["root",lt,rt&&"disabled",`size${capitalize(nt)}`,`color${capitalize(ot)}`,at&&"clickable",at&&`clickableColor${capitalize(ot)}`,st&&"deletable",st&&`deletableColor${capitalize(ot)}`,`${lt}${capitalize(ot)}`],label:["label",`label${capitalize(nt)}`],avatar:["avatar",`avatar${capitalize(nt)}`,`avatarColor${capitalize(ot)}`],icon:["icon",`icon${capitalize(nt)}`,`iconColor${capitalize(it)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(nt)}`,`deleteIconColor${capitalize(ot)}`,`deleteIcon${capitalize(lt)}Color${capitalize(ot)}`]};return composeClasses(ct,getChipUtilityClass,et)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e,{color:nt,iconColor:ot,clickable:it,onDelete:st,size:at,variant:lt}=rt;return[{[`& .${chipClasses$1.avatar}`]:et.avatar},{[`& .${chipClasses$1.avatar}`]:et[`avatar${capitalize(at)}`]},{[`& .${chipClasses$1.avatar}`]:et[`avatarColor${capitalize(nt)}`]},{[`& .${chipClasses$1.icon}`]:et.icon},{[`& .${chipClasses$1.icon}`]:et[`icon${capitalize(at)}`]},{[`& .${chipClasses$1.icon}`]:et[`iconColor${capitalize(ot)}`]},{[`& .${chipClasses$1.deleteIcon}`]:et.deleteIcon},{[`& .${chipClasses$1.deleteIcon}`]:et[`deleteIcon${capitalize(at)}`]},{[`& .${chipClasses$1.deleteIcon}`]:et[`deleteIconColor${capitalize(nt)}`]},{[`& .${chipClasses$1.deleteIcon}`]:et[`deleteIcon${capitalize(lt)}Color${capitalize(nt)}`]},et.root,et[`size${capitalize(at)}`],et[`color${capitalize(nt)}`],it&&et.clickable,it&&nt!=="default"&&et[`clickableColor${capitalize(nt)})`],st&&et.deletable,st&&nt!=="default"&&et[`deletableColor${capitalize(nt)}`],et[lt],et[`${lt}${capitalize(nt)}`]]}})(({theme:_e,ownerState:et})=>{const rt=alpha$1(_e.palette.text.primary,.26),nt=_e.palette.mode==="light"?_e.palette.grey[700]:_e.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:_e.typography.fontFamily,fontSize:_e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(_e.vars||_e).palette.text.primary,backgroundColor:(_e.vars||_e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:_e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses$1.disabled}`]:{opacity:(_e.vars||_e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses$1.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:_e.vars?_e.vars.palette.Chip.defaultAvatarColor:nt,fontSize:_e.typography.pxToRem(12)},[`& .${chipClasses$1.avatarColorPrimary}`]:{color:(_e.vars||_e).palette.primary.contrastText,backgroundColor:(_e.vars||_e).palette.primary.dark},[`& .${chipClasses$1.avatarColorSecondary}`]:{color:(_e.vars||_e).palette.secondary.contrastText,backgroundColor:(_e.vars||_e).palette.secondary.dark},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:_e.typography.pxToRem(10)},[`& .${chipClasses$1.icon}`]:_extends({marginLeft:5,marginRight:-6},et.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},et.iconColor===et.color&&_extends({color:_e.vars?_e.vars.palette.Chip.defaultIconColor:nt},et.color!=="default"&&{color:"inherit"})),[`& .${chipClasses$1.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:_e.vars?`rgba(${_e.vars.palette.text.primaryChannel} / 0.26)`:rt,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:_e.vars?`rgba(${_e.vars.palette.text.primaryChannel} / 0.4)`:alpha$1(rt,.4)}},et.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},et.color!=="default"&&{color:_e.vars?`rgba(${_e.vars.palette[et.color].contrastTextChannel} / 0.7)`:alpha$1(_e.palette[et.color].contrastText,.7),"&:hover, &:active":{color:(_e.vars||_e).palette[et.color].contrastText}})},et.size==="small"&&{height:24},et.color!=="default"&&{backgroundColor:(_e.vars||_e).palette[et.color].main,color:(_e.vars||_e).palette[et.color].contrastText},et.onDelete&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.action.selectedChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.focusOpacity}))`:alpha$1(_e.palette.action.selected,_e.palette.action.selectedOpacity+_e.palette.action.focusOpacity)}},et.onDelete&&et.color!=="default"&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette[et.color].dark}})},({theme:_e,ownerState:et})=>_extends({},et.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:_e.vars?`rgba(${_e.vars.palette.action.selectedChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.hoverOpacity}))`:alpha$1(_e.palette.action.selected,_e.palette.action.selectedOpacity+_e.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.action.selectedChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.focusOpacity}))`:alpha$1(_e.palette.action.selected,_e.palette.action.selectedOpacity+_e.palette.action.focusOpacity)},"&:active":{boxShadow:(_e.vars||_e).shadows[1]}},et.clickable&&et.color!=="default"&&{[`&:hover, &.${chipClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette[et.color].dark}}),({theme:_e,ownerState:et})=>_extends({},et.variant==="outlined"&&{backgroundColor:"transparent",border:_e.vars?`1px solid ${_e.vars.palette.Chip.defaultBorder}`:`1px solid ${_e.palette.mode==="light"?_e.palette.grey[400]:_e.palette.grey[700]}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:(_e.vars||_e).palette.action.hover},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette.action.focus},[`& .${chipClasses$1.avatar}`]:{marginLeft:4},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses$1.icon}`]:{marginLeft:4},[`& .${chipClasses$1.iconSmall}`]:{marginLeft:2},[`& .${chipClasses$1.deleteIcon}`]:{marginRight:5},[`& .${chipClasses$1.deleteIconSmall}`]:{marginRight:3}},et.variant==="outlined"&&et.color!=="default"&&{color:(_e.vars||_e).palette[et.color].main,border:`1px solid ${_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / 0.7)`:alpha$1(_e.palette[et.color].main,.7)}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette[et.color].main,_e.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.focusOpacity})`:alpha$1(_e.palette[et.color].main,_e.palette.action.focusOpacity)},[`& .${chipClasses$1.deleteIcon}`]:{color:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / 0.7)`:alpha$1(_e.palette[et.color].main,.7),"&:hover, &:active":{color:(_e.vars||_e).palette[et.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e,{size:nt}=rt;return[et.label,et[`label${capitalize(nt)}`]]}})(({ownerState:_e})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},_e.size==="small"&&{paddingLeft:8,paddingRight:8}));function isDeleteKeyboardEvent(_e){return _e.key==="Backspace"||_e.key==="Delete"}const Chip=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiChip"}),{avatar:ot,className:it,clickable:st,color:at="default",component:lt,deleteIcon:ct,disabled:pt=!1,icon:ut,label:ht,onClick:ft,onDelete:gt,onKeyDown:vt,onKeyUp:yt,size:mt="medium",variant:Et="filled",tabIndex:bt,skipFocusWhenDisabled:Ct=!1}=nt,Tt=_objectWithoutPropertiesLoose(nt,_excluded$2h),wt=reactExports.useRef(null),Rt=useForkRef(wt,rt),It=Ft=>{Ft.stopPropagation(),gt&&gt(Ft)},St=Ft=>{Ft.currentTarget===Ft.target&&isDeleteKeyboardEvent(Ft)&&Ft.preventDefault(),vt&&vt(Ft)},Pt=Ft=>{Ft.currentTarget===Ft.target&&(gt&&isDeleteKeyboardEvent(Ft)?gt(Ft):Ft.key==="Escape"&&wt.current&&wt.current.blur()),yt&&yt(Ft)},Ot=st!==!1&&ft?!0:st,Ut=Ot||gt?ButtonBase$1:lt||"div",Bt=_extends({},nt,{component:Ut,disabled:pt,size:mt,color:at,iconColor:reactExports.isValidElement(ut)&&ut.props.color||at,onDelete:!!gt,clickable:Ot,variant:Et}),xt=useUtilityClasses$1P(Bt),At=Ut===ButtonBase$1?_extends({component:lt||"div",focusVisibleClassName:xt.focusVisible},gt&&{disableRipple:!0}):{};let Mt=null;gt&&(Mt=ct&&reactExports.isValidElement(ct)?reactExports.cloneElement(ct,{className:clsx(ct.props.className,xt.deleteIcon),onClick:It}):jsx(CancelIcon,{className:clsx(xt.deleteIcon),onClick:It}));let Nt=null;ot&&reactExports.isValidElement(ot)&&(Nt=reactExports.cloneElement(ot,{className:clsx(xt.avatar,ot.props.className)}));let $t=null;return ut&&reactExports.isValidElement(ut)&&($t=reactExports.cloneElement(ut,{className:clsx(xt.icon,ut.props.className)})),jsxs(ChipRoot,_extends({as:Ut,className:clsx(xt.root,it),disabled:Ot&&pt?!0:void 0,onClick:ft,onKeyDown:St,onKeyUp:Pt,ref:Rt,tabIndex:Ct&&pt?-1:bt,ownerState:Bt},At,Tt,{children:[Nt||$t,jsx(ChipLabel,{className:clsx(xt.label),ownerState:Bt,children:ht}),Mt]}))}),Chip$1=Chip;function formControlState({props:_e,states:et,muiFormControl:rt}){return et.reduce((nt,ot)=>(nt[ot]=_e[ot],rt&&typeof _e[ot]>"u"&&(nt[ot]=rt[ot]),nt),{})}const FormControlContext=reactExports.createContext(void 0),FormControlContext$1=FormControlContext;function useFormControl(){return reactExports.useContext(FormControlContext$1)}function GlobalStyles(_e){return jsx(GlobalStyles$1,_extends({},_e,{defaultTheme:defaultTheme$2}))}function hasValue(_e){return _e!=null&&!(Array.isArray(_e)&&_e.length===0)}function isFilled(_e,et=!1){return _e&&(hasValue(_e.value)&&_e.value!==""||et&&hasValue(_e.defaultValue)&&_e.defaultValue!=="")}function isAdornedStart(_e){return _e.startAdornment}function getInputBaseUtilityClass(_e){return generateUtilityClass("MuiInputBase",_e)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),inputBaseClasses$1=inputBaseClasses,_excluded$2g=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rootOverridesResolver=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.formControl&&et.formControl,rt.startAdornment&&et.adornedStart,rt.endAdornment&&et.adornedEnd,rt.error&&et.error,rt.size==="small"&&et.sizeSmall,rt.multiline&&et.multiline,rt.color&&et[`color${capitalize(rt.color)}`],rt.fullWidth&&et.fullWidth,rt.hiddenLabel&&et.hiddenLabel]},inputOverridesResolver=(_e,et)=>{const{ownerState:rt}=_e;return[et.input,rt.size==="small"&&et.inputSizeSmall,rt.multiline&&et.inputMultiline,rt.type==="search"&&et.inputTypeSearch,rt.startAdornment&&et.inputAdornedStart,rt.endAdornment&&et.inputAdornedEnd,rt.hiddenLabel&&et.inputHiddenLabel]},useUtilityClasses$1O=_e=>{const{classes:et,color:rt,disabled:nt,error:ot,endAdornment:it,focused:st,formControl:at,fullWidth:lt,hiddenLabel:ct,multiline:pt,readOnly:ut,size:ht,startAdornment:ft,type:gt}=_e,vt={root:["root",`color${capitalize(rt)}`,nt&&"disabled",ot&&"error",lt&&"fullWidth",st&&"focused",at&&"formControl",ht==="small"&&"sizeSmall",pt&&"multiline",ft&&"adornedStart",it&&"adornedEnd",ct&&"hiddenLabel",ut&&"readOnly"],input:["input",nt&&"disabled",gt==="search"&&"inputTypeSearch",pt&&"inputMultiline",ht==="small"&&"inputSizeSmall",ct&&"inputHiddenLabel",ft&&"inputAdornedStart",it&&"inputAdornedEnd",ut&&"readOnly"]};return composeClasses(vt,getInputBaseUtilityClass,et)},InputBaseRoot=styled$1("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:_e,ownerState:et})=>_extends({},_e.typography.body1,{color:(_e.vars||_e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled,cursor:"default"}},et.multiline&&_extends({padding:"4px 0 5px"},et.size==="small"&&{paddingTop:1}),et.fullWidth&&{width:"100%"})),InputBaseComponent=styled$1("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:_e,ownerState:et})=>{const rt=_e.palette.mode==="light",nt=_extends({color:"currentColor"},_e.vars?{opacity:_e.vars.opacity.inputPlaceholder}:{opacity:rt?.42:.5},{transition:_e.transitions.create("opacity",{duration:_e.transitions.duration.shorter})}),ot={opacity:"0 !important"},it=_e.vars?{opacity:_e.vars.opacity.inputPlaceholder}:{opacity:rt?.42:.5};return _extends({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":nt,"&::-moz-placeholder":nt,"&:-ms-input-placeholder":nt,"&::-ms-input-placeholder":nt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses$1.formControl} &`]:{"&::-webkit-input-placeholder":ot,"&::-moz-placeholder":ot,"&:-ms-input-placeholder":ot,"&::-ms-input-placeholder":ot,"&:focus::-webkit-input-placeholder":it,"&:focus::-moz-placeholder":it,"&:focus:-ms-input-placeholder":it,"&:focus::-ms-input-placeholder":it},[`&.${inputBaseClasses$1.disabled}`]:{opacity:1,WebkitTextFillColor:(_e.vars||_e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},et.size==="small"&&{paddingTop:1},et.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},et.type==="search"&&{MozAppearance:"textfield"})}),inputGlobalStyles=jsx(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),InputBase=reactExports.forwardRef(function(et,rt){var nt;const ot=useThemeProps({props:et,name:"MuiInputBase"}),{"aria-describedby":it,autoComplete:st,autoFocus:at,className:lt,components:ct={},componentsProps:pt={},defaultValue:ut,disabled:ht,disableInjectingGlobalStyles:ft,endAdornment:gt,fullWidth:vt=!1,id:yt,inputComponent:mt="input",inputProps:Et={},inputRef:bt,maxRows:Ct,minRows:Tt,multiline:wt=!1,name:Rt,onBlur:It,onChange:St,onClick:Pt,onFocus:Ot,onKeyDown:Ut,onKeyUp:Bt,placeholder:xt,readOnly:At,renderSuffix:Mt,rows:Nt,slotProps:$t={},slots:Ft={},startAdornment:jt,type:zt="text",value:Yt}=ot,Kt=_objectWithoutPropertiesLoose(ot,_excluded$2g),er=Et.value!=null?Et.value:Yt,{current:ir}=reactExports.useRef(er!=null),rr=reactExports.useRef(),lr=reactExports.useCallback(dr=>{},[]),nr=useForkRef(rr,bt,Et.ref,lr),[hr,vr]=reactExports.useState(!1),yr=useFormControl(),Cr=formControlState({props:ot,muiFormControl:yr,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Cr.focused=yr?yr.focused:hr,reactExports.useEffect(()=>{!yr&&ht&&hr&&(vr(!1),It&&It())},[yr,ht,hr,It]);const or=yr&&yr.onFilled,ur=yr&&yr.onEmpty,pr=reactExports.useCallback(dr=>{isFilled(dr)?or&&or():ur&&ur()},[or,ur]);useEnhancedEffect$1(()=>{ir&&pr({value:er})},[er,pr,ir]);const Er=dr=>{if(Cr.disabled){dr.stopPropagation();return}Ot&&Ot(dr),Et.onFocus&&Et.onFocus(dr),yr&&yr.onFocus?yr.onFocus(dr):vr(!0)},Sr=dr=>{It&&It(dr),Et.onBlur&&Et.onBlur(dr),yr&&yr.onBlur?yr.onBlur(dr):vr(!1)},Ht=(dr,...mr)=>{if(!ir){const br=dr.target||rr.current;if(br==null)throw new Error(formatMuiErrorMessage(1));pr({value:br.value})}Et.onChange&&Et.onChange(dr,...mr),St&&St(dr,...mr)};reactExports.useEffect(()=>{pr(rr.current)},[]);const qt=dr=>{rr.current&&dr.currentTarget===dr.target&&rr.current.focus(),Pt&&Pt(dr)};let fr=mt,cr=Et;wt&&fr==="input"&&(Nt?cr=_extends({type:void 0,minRows:Nt,maxRows:Nt},cr):cr=_extends({type:void 0,maxRows:Ct,minRows:Tt},cr),fr=TextareaAutosize$1);const Ar=dr=>{pr(dr.animationName==="mui-auto-fill-cancel"?rr.current:{value:"x"})};reactExports.useEffect(()=>{yr&&yr.setAdornedStart(Boolean(jt))},[yr,jt]);const Gr=_extends({},ot,{color:Cr.color||"primary",disabled:Cr.disabled,endAdornment:gt,error:Cr.error,focused:Cr.focused,formControl:yr,fullWidth:vt,hiddenLabel:Cr.hiddenLabel,multiline:wt,size:Cr.size,startAdornment:jt,type:zt}),Qr=useUtilityClasses$1O(Gr),hn=Ft.root||ct.Root||InputBaseRoot,sn=$t.root||pt.root||{},qr=Ft.input||ct.Input||InputBaseComponent;return cr=_extends({},cr,(nt=$t.input)!=null?nt:pt.input),jsxs(reactExports.Fragment,{children:[!ft&&inputGlobalStyles,jsxs(hn,_extends({},sn,!isHostComponent(hn)&&{ownerState:_extends({},Gr,sn.ownerState)},{ref:rt,onClick:qt},Kt,{className:clsx(Qr.root,sn.className,lt),children:[jt,jsx(FormControlContext$1.Provider,{value:null,children:jsx(qr,_extends({ownerState:Gr,"aria-invalid":Cr.error,"aria-describedby":it,autoComplete:st,autoFocus:at,defaultValue:ut,disabled:Cr.disabled,id:yt,onAnimationStart:Ar,name:Rt,placeholder:xt,readOnly:At,required:Cr.required,rows:Nt,value:er,onKeyDown:Ut,onKeyUp:Bt,type:zt},cr,!isHostComponent(qr)&&{as:fr,ownerState:_extends({},Gr,cr.ownerState)},{ref:nr,className:clsx(Qr.input,cr.className),onBlur:Sr,onChange:Ht,onFocus:Er}))}),gt,Mt?Mt(_extends({},Cr,{startAdornment:jt})):null]}))]})}),InputBase$1=InputBase;function getInputUtilityClass(_e){return generateUtilityClass("MuiInput",_e)}const inputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiInput",["root","underline","input"])),inputClasses$1=inputClasses;function getOutlinedInputUtilityClass(_e){return generateUtilityClass("MuiOutlinedInput",_e)}const outlinedInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])),outlinedInputClasses$1=outlinedInputClasses;function getFilledInputUtilityClass(_e){return generateUtilityClass("MuiFilledInput",_e)}const filledInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiFilledInput",["root","underline","input"])),filledInputClasses$1=filledInputClasses,ArrowDropDownIcon=createSvgIcon$1(jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function getAutocompleteUtilityClass(_e){return generateUtilityClass("MuiAutocomplete",_e)}const autocompleteClasses=generateUtilityClasses("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),autocompleteClasses$1=autocompleteClasses;var _ClearIcon,_ArrowDropDownIcon;const _excluded$2f=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],useUtilityClasses$1N=_e=>{const{classes:et,disablePortal:rt,focused:nt,fullWidth:ot,hasClearIcon:it,hasPopupIcon:st,inputFocused:at,popupOpen:lt,size:ct}=_e,pt={root:["root",nt&&"focused",ot&&"fullWidth",it&&"hasClearIcon",st&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",at&&"inputFocused"],tag:["tag",`tagSize${capitalize(ct)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",lt&&"popupIndicatorOpen"],popper:["popper",rt&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return composeClasses(pt,getAutocompleteUtilityClass,et)},AutocompleteRoot=styled$1("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e,{fullWidth:nt,hasClearIcon:ot,hasPopupIcon:it,inputFocused:st,size:at}=rt;return[{[`& .${autocompleteClasses$1.tag}`]:et.tag},{[`& .${autocompleteClasses$1.tag}`]:et[`tagSize${capitalize(at)}`]},{[`& .${autocompleteClasses$1.inputRoot}`]:et.inputRoot},{[`& .${autocompleteClasses$1.input}`]:et.input},{[`& .${autocompleteClasses$1.input}`]:st&&et.inputFocused},et.root,nt&&et.fullWidth,it&&et.hasPopupIcon,ot&&et.hasClearIcon]}})(({ownerState:_e})=>_extends({[`&.${autocompleteClasses$1.focused} .${autocompleteClasses$1.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${autocompleteClasses$1.clearIndicator}`]:{visibility:"visible"}}},_e.fullWidth&&{width:"100%"},{[`& .${autocompleteClasses$1.tag}`]:_extends({margin:3,maxWidth:"calc(100% - 6px)"},_e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${autocompleteClasses$1.inputRoot}`]:{flexWrap:"wrap",[`.${autocompleteClasses$1.hasPopupIcon}&, .${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:26+4},[`.${autocompleteClasses$1.hasPopupIcon}.${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:52+4},[`& .${autocompleteClasses$1.input}`]:{width:0,minWidth:30}},[`& .${inputClasses$1.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${inputClasses$1.root}.${inputBaseClasses$1.sizeSmall}`]:{[`& .${inputClasses$1.input}`]:{padding:"2px 4px 3px 0"}},[`& .${outlinedInputClasses$1.root}`]:{padding:9,[`.${autocompleteClasses$1.hasPopupIcon}&, .${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${autocompleteClasses$1.hasPopupIcon}.${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${autocompleteClasses$1.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${autocompleteClasses$1.endAdornment}`]:{right:9}},[`& .${outlinedInputClasses$1.root}.${inputBaseClasses$1.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${autocompleteClasses$1.input}`]:{padding:"2.5px 4px 2.5px 6px"}},[`& .${filledInputClasses$1.root}`]:{paddingTop:19,paddingLeft:8,[`.${autocompleteClasses$1.hasPopupIcon}&, .${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${autocompleteClasses$1.hasPopupIcon}.${autocompleteClasses$1.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${filledInputClasses$1.input}`]:{padding:"7px 4px"},[`& .${autocompleteClasses$1.endAdornment}`]:{right:9}},[`& .${filledInputClasses$1.root}.${inputBaseClasses$1.sizeSmall}`]:{paddingBottom:1,[`& .${filledInputClasses$1.input}`]:{padding:"2.5px 4px"}},[`& .${inputBaseClasses$1.hiddenLabel}`]:{paddingTop:8},[`& .${filledInputClasses$1.root}.${inputBaseClasses$1.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${autocompleteClasses$1.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${filledInputClasses$1.root}.${inputBaseClasses$1.hiddenLabel}.${inputBaseClasses$1.sizeSmall}`]:{[`& .${autocompleteClasses$1.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${autocompleteClasses$1.input}`]:_extends({flexGrow:1,textOverflow:"ellipsis",opacity:0},_e.inputFocused&&{opacity:1})})),AutocompleteEndAdornment=styled$1("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(_e,et)=>et.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),AutocompleteClearIndicator=styled$1(IconButton$1,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(_e,et)=>et.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),AutocompletePopupIndicator=styled$1(IconButton$1,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:_e},et)=>_extends({},et.popupIndicator,_e.popupOpen&&et.popupIndicatorOpen)})(({ownerState:_e})=>_extends({padding:2,marginRight:-2},_e.popupOpen&&{transform:"rotate(180deg)"})),AutocompletePopper=styled$1(Popper$1,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`& .${autocompleteClasses$1.option}`]:et.option},et.popper,rt.disablePortal&&et.popperDisablePortal]}})(({theme:_e,ownerState:et})=>_extends({zIndex:(_e.vars||_e).zIndex.modal},et.disablePortal&&{position:"absolute"})),AutocompletePaper=styled$1(Paper$1,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(_e,et)=>et.paper})(({theme:_e})=>_extends({},_e.typography.body1,{overflow:"auto"})),AutocompleteLoading=styled$1("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(_e,et)=>et.loading})(({theme:_e})=>({color:(_e.vars||_e).palette.text.secondary,padding:"14px 16px"})),AutocompleteNoOptions=styled$1("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(_e,et)=>et.noOptions})(({theme:_e})=>({color:(_e.vars||_e).palette.text.secondary,padding:"14px 16px"})),AutocompleteListbox=styled$1("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(_e,et)=>et.listbox})(({theme:_e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${autocompleteClasses$1.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[_e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${autocompleteClasses$1.focused}`]:{backgroundColor:(_e.vars||_e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(_e.vars||_e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${autocompleteClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.selectedOpacity})`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity),[`&.${autocompleteClasses$1.focused}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.hoverOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(_e.vars||_e).palette.action.selected}},[`&.${autocompleteClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.focusOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.focusOpacity)}}}})),AutocompleteGroupLabel=styled$1(ListSubheader$1,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(_e,et)=>et.groupLabel})(({theme:_e})=>({backgroundColor:(_e.vars||_e).palette.background.paper,top:-8})),AutocompleteGroupUl=styled$1("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(_e,et)=>et.groupUl})({padding:0,[`& .${autocompleteClasses$1.option}`]:{paddingLeft:24}}),Autocomplete=reactExports.forwardRef(function(et,rt){var nt,ot,it,st;const at=useThemeProps({props:et,name:"MuiAutocomplete"}),{autoComplete:lt=!1,autoHighlight:ct=!1,autoSelect:pt=!1,blurOnSelect:ut=!1,ChipProps:ht,className:ft,clearIcon:gt=_ClearIcon||(_ClearIcon=jsx(ClearIcon,{fontSize:"small"})),clearOnBlur:vt=!at.freeSolo,clearOnEscape:yt=!1,clearText:mt="Clear",closeText:Et="Close",componentsProps:bt={},defaultValue:Ct=at.multiple?[]:null,disableClearable:Tt=!1,disableCloseOnSelect:wt=!1,disabled:Rt=!1,disabledItemsFocusable:It=!1,disableListWrap:St=!1,disablePortal:Pt=!1,filterSelectedOptions:Ot=!1,forcePopupIcon:Ut="auto",freeSolo:Bt=!1,fullWidth:xt=!1,getLimitTagsText:At=En=>`+${En}`,getOptionLabel:Mt=En=>{var Cn;return(Cn=En.label)!=null?Cn:En},groupBy:Nt,handleHomeEndKeys:$t=!at.freeSolo,includeInputInList:Ft=!1,limitTags:jt=-1,ListboxComponent:zt="ul",ListboxProps:Yt,loading:Kt=!1,loadingText:er="Loading…",multiple:ir=!1,noOptionsText:rr="No options",openOnFocus:lr=!1,openText:nr="Open",PaperComponent:hr=Paper$1,PopperComponent:vr=Popper$1,popupIcon:yr=_ArrowDropDownIcon||(_ArrowDropDownIcon=jsx(ArrowDropDownIcon,{})),readOnly:Cr=!1,renderGroup:or,renderInput:ur,renderOption:pr,renderTags:Er,selectOnFocus:Sr=!at.freeSolo,size:Ht="medium",slotProps:qt={}}=at,fr=_objectWithoutPropertiesLoose(at,_excluded$2f),{getRootProps:cr,getInputProps:Ar,getInputLabelProps:Gr,getPopupIndicatorProps:Qr,getClearProps:hn,getTagProps:sn,getListboxProps:qr,getOptionProps:dr,value:mr,dirty:br,id:Rr,popupOpen:Pr,focused:Or,focusedTag:Nr,anchorEl:Br,setAnchorEl:jr,inputValue:$r,groupedOptions:Fr}=useAutocomplete(_extends({},at,{componentName:"Autocomplete"})),Zr=!Tt&&!Rt&&br&&!Cr,pn=(!Bt||Ut===!0)&&Ut!==!1,mn=_extends({},at,{disablePortal:Pt,focused:Or,fullWidth:xt,hasClearIcon:Zr,hasPopupIcon:pn,inputFocused:Nr===-1,popupOpen:Pr,size:Ht}),vn=useUtilityClasses$1N(mn);let jn;if(ir&&mr.length>0){const En=Cn=>_extends({className:vn.tag,disabled:Rt},sn(Cn));Er?jn=Er(mr,En,mn):jn=mr.map((Cn,Mn)=>jsx(Chip$1,_extends({label:Mt(Cn),size:Ht},En({index:Mn}),ht)))}if(jt>-1&&Array.isArray(jn)){const En=jn.length-jt;!Or&&En>0&&(jn=jn.splice(0,jt),jn.push(jsx("span",{className:vn.tag,children:At(En)},jn.length)))}const Kn=or||(En=>jsxs("li",{children:[jsx(AutocompleteGroupLabel,{className:vn.groupLabel,ownerState:mn,component:"div",children:En.group}),jsx(AutocompleteGroupUl,{className:vn.groupUl,ownerState:mn,children:En.children})]},En.key)),bn=pr||((En,Cn)=>jsx("li",_extends({},En,{children:Mt(Cn)}))),so=(En,Cn)=>{const Mn=dr({option:En,index:Cn});return bn(_extends({},Mn,{className:vn.option}),En,{selected:Mn["aria-selected"],index:Cn,inputValue:$r})},zr=(nt=qt.clearIndicator)!=null?nt:bt.clearIndicator,zn=(ot=qt.paper)!=null?ot:bt.paper,Zn=(it=qt.popper)!=null?it:bt.popper,Fn=(st=qt.popupIndicator)!=null?st:bt.popupIndicator;return jsxs(reactExports.Fragment,{children:[jsx(AutocompleteRoot,_extends({ref:rt,className:clsx(vn.root,ft),ownerState:mn},cr(fr),{children:ur({id:Rr,disabled:Rt,fullWidth:!0,size:Ht==="small"?"small":void 0,InputLabelProps:Gr(),InputProps:_extends({ref:jr,className:vn.inputRoot,startAdornment:jn},(Zr||pn)&&{endAdornment:jsxs(AutocompleteEndAdornment,{className:vn.endAdornment,ownerState:mn,children:[Zr?jsx(AutocompleteClearIndicator,_extends({},hn(),{"aria-label":mt,title:mt,ownerState:mn},zr,{className:clsx(vn.clearIndicator,zr==null?void 0:zr.className),children:gt})):null,pn?jsx(AutocompletePopupIndicator,_extends({},Qr(),{disabled:Rt,"aria-label":Pr?Et:nr,title:Pr?Et:nr,ownerState:mn},Fn,{className:clsx(vn.popupIndicator,Fn==null?void 0:Fn.className),children:yr})):null]})}),inputProps:_extends({className:vn.input,disabled:Rt,readOnly:Cr},Ar())})})),Br?jsx(AutocompletePopper,_extends({as:vr,disablePortal:Pt,style:{width:Br?Br.clientWidth:null},ownerState:mn,role:"presentation",anchorEl:Br,open:Pr},Zn,{className:clsx(vn.popper,Zn==null?void 0:Zn.className),children:jsxs(AutocompletePaper,_extends({ownerState:mn,as:hr},zn,{className:clsx(vn.paper,zn==null?void 0:zn.className),children:[Kt&&Fr.length===0?jsx(AutocompleteLoading,{className:vn.loading,ownerState:mn,children:er}):null,Fr.length===0&&!Bt&&!Kt?jsx(AutocompleteNoOptions,{className:vn.noOptions,ownerState:mn,role:"presentation",onMouseDown:En=>{En.preventDefault()},children:rr}):null,Fr.length>0?jsx(AutocompleteListbox,_extends({as:zt,className:vn.listbox,ownerState:mn},qr(),Yt,{children:Fr.map((En,Cn)=>Nt?Kn({key:En.key,group:En.group,children:En.options.map((Mn,Vn)=>so(Mn,En.index+Vn))}):so(En,Cn))})):null]}))})):null]})}),Autocomplete$1=Autocomplete,Person$1=createSvgIcon$1(jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function getAvatarUtilityClass(_e){return generateUtilityClass("MuiAvatar",_e)}generateUtilityClasses("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const _excluded$2e=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],useUtilityClasses$1M=_e=>{const{classes:et,variant:rt,colorDefault:nt}=_e;return composeClasses({root:["root",rt,nt&&"colorDefault"],img:["img"],fallback:["fallback"]},getAvatarUtilityClass,et)},AvatarRoot=styled$1("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],rt.colorDefault&&et.colorDefault]}})(({theme:_e,ownerState:et})=>_extends({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:_e.typography.fontFamily,fontSize:_e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},et.variant==="rounded"&&{borderRadius:(_e.vars||_e).shape.borderRadius},et.variant==="square"&&{borderRadius:0},et.colorDefault&&_extends({color:(_e.vars||_e).palette.background.default},_e.vars?{backgroundColor:_e.vars.palette.Avatar.defaultBg}:{backgroundColor:_e.palette.mode==="light"?_e.palette.grey[400]:_e.palette.grey[600]}))),AvatarImg=styled$1("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(_e,et)=>et.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),AvatarFallback=styled$1(Person$1,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(_e,et)=>et.fallback})({width:"75%",height:"75%"});function useLoaded({crossOrigin:_e,referrerPolicy:et,src:rt,srcSet:nt}){const[ot,it]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!rt&&!nt)return;it(!1);let st=!0;const at=new Image;return at.onload=()=>{st&&it("loaded")},at.onerror=()=>{st&&it("error")},at.crossOrigin=_e,at.referrerPolicy=et,at.src=rt,nt&&(at.srcset=nt),()=>{st=!1}},[_e,et,rt,nt]),ot}const Avatar=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiAvatar"}),{alt:ot,children:it,className:st,component:at="div",imgProps:lt,sizes:ct,src:pt,srcSet:ut,variant:ht="circular"}=nt,ft=_objectWithoutPropertiesLoose(nt,_excluded$2e);let gt=null;const vt=useLoaded(_extends({},lt,{src:pt,srcSet:ut})),yt=pt||ut,mt=yt&&vt!=="error",Et=_extends({},nt,{colorDefault:!mt,component:at,variant:ht}),bt=useUtilityClasses$1M(Et);return mt?gt=jsx(AvatarImg,_extends({alt:ot,src:pt,srcSet:ut,sizes:ct,ownerState:Et,className:bt.img},lt)):it!=null?gt=it:yt&&ot?gt=ot[0]:gt=jsx(AvatarFallback,{ownerState:Et,className:bt.fallback}),jsx(AvatarRoot,_extends({as:at,ownerState:Et,className:clsx(bt.root,st),ref:rt},ft,{children:gt}))}),Avatar$1=Avatar,_excluded$2d=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles$3={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(et,rt){const nt=useTheme(),ot={enter:nt.transitions.duration.enteringScreen,exit:nt.transitions.duration.leavingScreen},{addEndListener:it,appear:st=!0,children:at,easing:lt,in:ct,onEnter:pt,onEntered:ut,onEntering:ht,onExit:ft,onExited:gt,onExiting:vt,style:yt,timeout:mt=ot,TransitionComponent:Et=Transition$1}=et,bt=_objectWithoutPropertiesLoose(et,_excluded$2d),Ct=reactExports.useRef(null),Tt=useForkRef(Ct,at.ref,rt),wt=xt=>At=>{if(xt){const Mt=Ct.current;At===void 0?xt(Mt):xt(Mt,At)}},Rt=wt(ht),It=wt((xt,At)=>{reflow(xt);const Mt=getTransitionProps({style:yt,timeout:mt,easing:lt},{mode:"enter"});xt.style.webkitTransition=nt.transitions.create("opacity",Mt),xt.style.transition=nt.transitions.create("opacity",Mt),pt&&pt(xt,At)}),St=wt(ut),Pt=wt(vt),Ot=wt(xt=>{const At=getTransitionProps({style:yt,timeout:mt,easing:lt},{mode:"exit"});xt.style.webkitTransition=nt.transitions.create("opacity",At),xt.style.transition=nt.transitions.create("opacity",At),ft&&ft(xt)}),Ut=wt(gt);return jsx(Et,_extends({appear:st,in:ct,nodeRef:Ct,onEnter:It,onEntered:St,onEntering:Rt,onExit:Ot,onExited:Ut,onExiting:Pt,addEndListener:xt=>{it&&it(Ct.current,xt)},timeout:mt},bt,{children:(xt,At)=>reactExports.cloneElement(at,_extends({style:_extends({opacity:0,visibility:xt==="exited"&&!ct?"hidden":void 0},styles$3[xt],yt,at.props.style),ref:Tt},At))}))}),Fade$1=Fade;function getBackdropUtilityClass(_e){return generateUtilityClass("MuiBackdrop",_e)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const _excluded$2c=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$1L=_e=>{const{classes:et,invisible:rt}=_e;return composeClasses({root:["root",rt&&"invisible"]},getBackdropUtilityClass,et)},BackdropRoot=styled$1("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.invisible&&et.invisible]}})(({ownerState:_e})=>_extends({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},_e.invisible&&{backgroundColor:"transparent"})),Backdrop=reactExports.forwardRef(function(et,rt){var nt,ot,it;const st=useThemeProps({props:et,name:"MuiBackdrop"}),{children:at,className:lt,component:ct="div",components:pt={},componentsProps:ut={},invisible:ht=!1,open:ft,slotProps:gt={},slots:vt={},TransitionComponent:yt=Fade$1,transitionDuration:mt}=st,Et=_objectWithoutPropertiesLoose(st,_excluded$2c),bt=_extends({},st,{component:ct,invisible:ht}),Ct=useUtilityClasses$1L(bt),Tt=(nt=gt.root)!=null?nt:ut.root;return jsx(yt,_extends({in:ft,timeout:mt},Et,{children:jsx(BackdropRoot,_extends({"aria-hidden":!0},Tt,{as:(ot=(it=vt.root)!=null?it:pt.Root)!=null?ot:ct,className:clsx(Ct.root,lt,Tt==null?void 0:Tt.className),ownerState:_extends({},bt,Tt==null?void 0:Tt.ownerState),classes:Ct,ref:rt,children:at}))}))}),Backdrop$1=Backdrop;function getBadgeUtilityClass(_e){return generateUtilityClass("MuiBadge",_e)}const badgeClasses=generateUtilityClasses("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),badgeClasses$1=badgeClasses,_excluded$2b=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],RADIUS_STANDARD=10,RADIUS_DOT=4,useUtilityClasses$1K=_e=>{const{color:et,anchorOrigin:rt,invisible:nt,overlap:ot,variant:it,classes:st={}}=_e,at={root:["root"],badge:["badge",it,nt&&"invisible",`anchorOrigin${capitalize(rt.vertical)}${capitalize(rt.horizontal)}`,`anchorOrigin${capitalize(rt.vertical)}${capitalize(rt.horizontal)}${capitalize(ot)}`,`overlap${capitalize(ot)}`,et!=="default"&&`color${capitalize(et)}`]};return composeClasses(at,getBadgeUtilityClass,st)},BadgeRoot=styled$1("span",{name:"MuiBadge",slot:"Root",overridesResolver:(_e,et)=>et.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),BadgeBadge=styled$1("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.badge,et[rt.variant],et[`anchorOrigin${capitalize(rt.anchorOrigin.vertical)}${capitalize(rt.anchorOrigin.horizontal)}${capitalize(rt.overlap)}`],rt.color!=="default"&&et[`color${capitalize(rt.color)}`],rt.invisible&&et.invisible]}})(({theme:_e,ownerState:et})=>_extends({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:_e.typography.fontFamily,fontWeight:_e.typography.fontWeightMedium,fontSize:_e.typography.pxToRem(12),minWidth:RADIUS_STANDARD*2,lineHeight:1,padding:"0 6px",height:RADIUS_STANDARD*2,borderRadius:RADIUS_STANDARD,zIndex:1,transition:_e.transitions.create("transform",{easing:_e.transitions.easing.easeInOut,duration:_e.transitions.duration.enteringScreen})},et.color!=="default"&&{backgroundColor:(_e.vars||_e).palette[et.color].main,color:(_e.vars||_e).palette[et.color].contrastText},et.variant==="dot"&&{borderRadius:RADIUS_DOT,height:RADIUS_DOT*2,minWidth:RADIUS_DOT*2,padding:0},et.anchorOrigin.vertical==="top"&&et.anchorOrigin.horizontal==="right"&&et.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},et.anchorOrigin.vertical==="bottom"&&et.anchorOrigin.horizontal==="right"&&et.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},et.anchorOrigin.vertical==="top"&&et.anchorOrigin.horizontal==="left"&&et.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},et.anchorOrigin.vertical==="bottom"&&et.anchorOrigin.horizontal==="left"&&et.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},et.anchorOrigin.vertical==="top"&&et.anchorOrigin.horizontal==="right"&&et.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},et.anchorOrigin.vertical==="bottom"&&et.anchorOrigin.horizontal==="right"&&et.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},et.anchorOrigin.vertical==="top"&&et.anchorOrigin.horizontal==="left"&&et.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},et.anchorOrigin.vertical==="bottom"&&et.anchorOrigin.horizontal==="left"&&et.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${badgeClasses$1.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},et.invisible&&{transition:_e.transitions.create("transform",{easing:_e.transitions.easing.easeInOut,duration:_e.transitions.duration.leavingScreen})})),Badge=reactExports.forwardRef(function(et,rt){var nt,ot,it,st,at,lt;const ct=useThemeProps({props:et,name:"MuiBadge"}),{anchorOrigin:pt={vertical:"top",horizontal:"right"},className:ut,component:ht,components:ft={},componentsProps:gt={},children:vt,overlap:yt="rectangular",color:mt="default",invisible:Et=!1,max:bt=99,badgeContent:Ct,slots:Tt,slotProps:wt,showZero:Rt=!1,variant:It="standard"}=ct,St=_objectWithoutPropertiesLoose(ct,_excluded$2b),{badgeContent:Pt,invisible:Ot,max:Ut,displayValue:Bt}=useBadge({max:bt,invisible:Et,badgeContent:Ct,showZero:Rt}),xt=usePreviousProps$1({anchorOrigin:pt,color:mt,overlap:yt,variant:It,badgeContent:Ct}),At=Ot||Pt==null&&It!=="dot",{color:Mt=mt,overlap:Nt=yt,anchorOrigin:$t=pt,variant:Ft=It}=At?xt:ct,jt=Ft!=="dot"?Bt:void 0,zt=_extends({},ct,{badgeContent:Pt,invisible:At,max:Ut,displayValue:jt,showZero:Rt,anchorOrigin:$t,color:Mt,overlap:Nt,variant:Ft}),Yt=useUtilityClasses$1K(zt),Kt=(nt=(ot=Tt==null?void 0:Tt.root)!=null?ot:ft.Root)!=null?nt:BadgeRoot,er=(it=(st=Tt==null?void 0:Tt.badge)!=null?st:ft.Badge)!=null?it:BadgeBadge,ir=(at=wt==null?void 0:wt.root)!=null?at:gt.root,rr=(lt=wt==null?void 0:wt.badge)!=null?lt:gt.badge,lr=useSlotProps({elementType:Kt,externalSlotProps:ir,externalForwardedProps:St,additionalProps:{ref:rt,as:ht},ownerState:zt,className:clsx(ir==null?void 0:ir.className,Yt.root,ut)}),nr=useSlotProps({elementType:er,externalSlotProps:rr,ownerState:zt,className:clsx(Yt.badge,rr==null?void 0:rr.className)});return jsxs(Kt,_extends({},lr,{children:[vt,jsx(er,_extends({},nr,{children:jt}))]}))}),Badge$1=Badge,defaultTheme=createTheme(),Box=createBox({defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box,MoreHorizIcon=createSvgIcon$1(jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),BreadcrumbCollapsedButton=styled$1(ButtonBase$1)(({theme:_e})=>_extends({display:"flex",marginLeft:`calc(${_e.spacing(1)} * 0.5)`,marginRight:`calc(${_e.spacing(1)} * 0.5)`},_e.palette.mode==="light"?{backgroundColor:_e.palette.grey[100],color:_e.palette.grey[700]}:{backgroundColor:_e.palette.grey[700],color:_e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":_extends({},_e.palette.mode==="light"?{backgroundColor:_e.palette.grey[200]}:{backgroundColor:_e.palette.grey[600]}),"&:active":_extends({boxShadow:_e.shadows[0]},_e.palette.mode==="light"?{backgroundColor:emphasize(_e.palette.grey[200],.12)}:{backgroundColor:emphasize(_e.palette.grey[600],.12)})})),BreadcrumbCollapsedIcon=styled$1(MoreHorizIcon)({width:24,height:16});function BreadcrumbCollapsed(_e){const et=_e;return jsx("li",{children:jsx(BreadcrumbCollapsedButton,_extends({focusRipple:!0},_e,{ownerState:et,children:jsx(BreadcrumbCollapsedIcon,{ownerState:et})}))})}function getBreadcrumbsUtilityClass(_e){return generateUtilityClass("MuiBreadcrumbs",_e)}const breadcrumbsClasses=generateUtilityClasses("MuiBreadcrumbs",["root","ol","li","separator"]),breadcrumbsClasses$1=breadcrumbsClasses,_excluded$2a=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],useUtilityClasses$1J=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},getBreadcrumbsUtilityClass,et)},BreadcrumbsRoot=styled$1(Typography$1,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(_e,et)=>[{[`& .${breadcrumbsClasses$1.li}`]:et.li},et.root]})({}),BreadcrumbsOl=styled$1("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(_e,et)=>et.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),BreadcrumbsSeparator=styled$1("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(_e,et)=>et.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function insertSeparators(_e,et,rt,nt){return _e.reduce((ot,it,st)=>(st<_e.length-1?ot=ot.concat(it,jsx(BreadcrumbsSeparator,{"aria-hidden":!0,className:et,ownerState:nt,children:rt},`separator-${st}`)):ot.push(it),ot),[])}const Breadcrumbs=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiBreadcrumbs"}),{children:ot,className:it,component:st="nav",expandText:at="Show path",itemsAfterCollapse:lt=1,itemsBeforeCollapse:ct=1,maxItems:pt=8,separator:ut="/"}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$2a),[ft,gt]=reactExports.useState(!1),vt=_extends({},nt,{component:st,expanded:ft,expandText:at,itemsAfterCollapse:lt,itemsBeforeCollapse:ct,maxItems:pt,separator:ut}),yt=useUtilityClasses$1J(vt),mt=reactExports.useRef(null),Et=Ct=>{const Tt=()=>{gt(!0);const wt=mt.current.querySelector("a[href],button,[tabindex]");wt&&wt.focus()};return ct+lt>=Ct.length?Ct:[...Ct.slice(0,ct),jsx(BreadcrumbCollapsed,{"aria-label":at,onClick:Tt},"ellipsis"),...Ct.slice(Ct.length-lt,Ct.length)]},bt=reactExports.Children.toArray(ot).filter(Ct=>reactExports.isValidElement(Ct)).map((Ct,Tt)=>jsx("li",{className:yt.li,children:Ct},`child-${Tt}`));return jsx(BreadcrumbsRoot,_extends({ref:rt,component:st,color:"text.secondary",className:clsx(yt.root,it),ownerState:vt},ht,{children:jsx(BreadcrumbsOl,{className:yt.ol,ref:mt,ownerState:vt,children:insertSeparators(ft||pt&&bt.length<=pt?bt:Et(bt),yt.separator,ut,vt)})}))}),Breadcrumbs$1=Breadcrumbs;function getButtonUtilityClass(_e){return generateUtilityClass("MuiButton",_e)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,_excluded$29=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$1I=_e=>{const{color:et,disableElevation:rt,fullWidth:nt,size:ot,variant:it,classes:st}=_e,at={root:["root",it,`${it}${capitalize(et)}`,`size${capitalize(ot)}`,`${it}Size${capitalize(ot)}`,et==="inherit"&&"colorInherit",rt&&"disableElevation",nt&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(ot)}`],endIcon:["endIcon",`iconSize${capitalize(ot)}`]},lt=composeClasses(at,getButtonUtilityClass,st);return _extends({},st,lt)},commonIconStyles=_e=>_extends({},_e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},_e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},_e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],et[`${rt.variant}${capitalize(rt.color)}`],et[`size${capitalize(rt.size)}`],et[`${rt.variant}Size${capitalize(rt.size)}`],rt.color==="inherit"&&et.colorInherit,rt.disableElevation&&et.disableElevation,rt.fullWidth&&et.fullWidth]}})(({theme:_e,ownerState:et})=>{var rt,nt;return _extends({},_e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(_e.vars||_e).shape.borderRadius,transition:_e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:_e.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:_e.vars?`rgba(${_e.vars.palette.text.primaryChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette.text.primary,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},et.variant==="text"&&et.color!=="inherit"&&{backgroundColor:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette[et.color].main,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},et.variant==="outlined"&&et.color!=="inherit"&&{border:`1px solid ${(_e.vars||_e).palette[et.color].main}`,backgroundColor:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette[et.color].main,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},et.variant==="contained"&&{backgroundColor:(_e.vars||_e).palette.grey.A100,boxShadow:(_e.vars||_e).shadows[4],"@media (hover: none)":{boxShadow:(_e.vars||_e).shadows[2],backgroundColor:(_e.vars||_e).palette.grey[300]}},et.variant==="contained"&&et.color!=="inherit"&&{backgroundColor:(_e.vars||_e).palette[et.color].dark,"@media (hover: none)":{backgroundColor:(_e.vars||_e).palette[et.color].main}}),"&:active":_extends({},et.variant==="contained"&&{boxShadow:(_e.vars||_e).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},et.variant==="contained"&&{boxShadow:(_e.vars||_e).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:(_e.vars||_e).palette.action.disabled},et.variant==="outlined"&&{border:`1px solid ${(_e.vars||_e).palette.action.disabledBackground}`},et.variant==="contained"&&{color:(_e.vars||_e).palette.action.disabled,boxShadow:(_e.vars||_e).shadows[0],backgroundColor:(_e.vars||_e).palette.action.disabledBackground})},et.variant==="text"&&{padding:"6px 8px"},et.variant==="text"&&et.color!=="inherit"&&{color:(_e.vars||_e).palette[et.color].main},et.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},et.variant==="outlined"&&et.color!=="inherit"&&{color:(_e.vars||_e).palette[et.color].main,border:_e.vars?`1px solid rgba(${_e.vars.palette[et.color].mainChannel} / 0.5)`:`1px solid ${alpha$1(_e.palette[et.color].main,.5)}`},et.variant==="contained"&&{color:_e.vars?_e.vars.palette.text.primary:(rt=(nt=_e.palette).getContrastText)==null?void 0:rt.call(nt,_e.palette.grey[300]),backgroundColor:(_e.vars||_e).palette.grey[300],boxShadow:(_e.vars||_e).shadows[2]},et.variant==="contained"&&et.color!=="inherit"&&{color:(_e.vars||_e).palette[et.color].contrastText,backgroundColor:(_e.vars||_e).palette[et.color].main},et.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},et.size==="small"&&et.variant==="text"&&{padding:"4px 5px",fontSize:_e.typography.pxToRem(13)},et.size==="large"&&et.variant==="text"&&{padding:"8px 11px",fontSize:_e.typography.pxToRem(15)},et.size==="small"&&et.variant==="outlined"&&{padding:"3px 9px",fontSize:_e.typography.pxToRem(13)},et.size==="large"&&et.variant==="outlined"&&{padding:"7px 21px",fontSize:_e.typography.pxToRem(15)},et.size==="small"&&et.variant==="contained"&&{padding:"4px 10px",fontSize:_e.typography.pxToRem(13)},et.size==="large"&&et.variant==="contained"&&{padding:"8px 22px",fontSize:_e.typography.pxToRem(15)},et.fullWidth&&{width:"100%"})},({ownerState:_e})=>_e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.startIcon,et[`iconSize${capitalize(rt.size)}`]]}})(({ownerState:_e})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},_e.size==="small"&&{marginLeft:-2},commonIconStyles(_e))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.endIcon,et[`iconSize${capitalize(rt.size)}`]]}})(({ownerState:_e})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},_e.size==="small"&&{marginRight:-2},commonIconStyles(_e))),Button=reactExports.forwardRef(function(et,rt){const nt=reactExports.useContext(ButtonGroupContext$1),ot=resolveProps(nt,et),it=useThemeProps({props:ot,name:"MuiButton"}),{children:st,color:at="primary",component:lt="button",className:ct,disabled:pt=!1,disableElevation:ut=!1,disableFocusRipple:ht=!1,endIcon:ft,focusVisibleClassName:gt,fullWidth:vt=!1,size:yt="medium",startIcon:mt,type:Et,variant:bt="text"}=it,Ct=_objectWithoutPropertiesLoose(it,_excluded$29),Tt=_extends({},it,{color:at,component:lt,disabled:pt,disableElevation:ut,disableFocusRipple:ht,fullWidth:vt,size:yt,type:Et,variant:bt}),wt=useUtilityClasses$1I(Tt),Rt=mt&&jsx(ButtonStartIcon,{className:wt.startIcon,ownerState:Tt,children:mt}),It=ft&&jsx(ButtonEndIcon,{className:wt.endIcon,ownerState:Tt,children:ft});return jsxs(ButtonRoot,_extends({ownerState:Tt,className:clsx(nt.className,wt.root,ct),component:lt,disabled:pt,focusRipple:!ht,focusVisibleClassName:clsx(wt.focusVisible,gt),ref:rt,type:Et},Ct,{classes:wt,children:[Rt,st,It]}))}),Button$1=Button;function getCardUtilityClass(_e){return generateUtilityClass("MuiCard",_e)}generateUtilityClasses("MuiCard",["root"]);const _excluded$28=["className","raised"],useUtilityClasses$1H=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getCardUtilityClass,et)},CardRoot=styled$1(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(_e,et)=>et.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiCard"}),{className:ot,raised:it=!1}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$28),at=_extends({},nt,{raised:it}),lt=useUtilityClasses$1H(at);return jsx(CardRoot,_extends({className:clsx(lt.root,ot),elevation:it?8:void 0,ref:rt,ownerState:at},st))}),Card$1=Card;function getCardContentUtilityClass(_e){return generateUtilityClass("MuiCardContent",_e)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$27=["className","component"],useUtilityClasses$1G=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getCardContentUtilityClass,et)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(_e,et)=>et.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiCardContent"}),{className:ot,component:it="div"}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$27),at=_extends({},nt,{component:it}),lt=useUtilityClasses$1G(at);return jsx(CardContentRoot,_extends({as:it,className:clsx(lt.root,ot),ownerState:at,ref:rt},st))}),CardContent$1=CardContent;function getSwitchBaseUtilityClass(_e){return generateUtilityClass("PrivateSwitchBase",_e)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$26=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$1F=_e=>{const{classes:et,checked:rt,disabled:nt,edge:ot}=_e,it={root:["root",rt&&"checked",nt&&"disabled",ot&&`edge${capitalize(ot)}`],input:["input"]};return composeClasses(it,getSwitchBaseUtilityClass,et)},SwitchBaseRoot=styled$1(ButtonBase$1)(({ownerState:_e})=>_extends({padding:9,borderRadius:"50%"},_e.edge==="start"&&{marginLeft:_e.size==="small"?-3:-12},_e.edge==="end"&&{marginRight:_e.size==="small"?-3:-12})),SwitchBaseInput=styled$1("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(et,rt){const{autoFocus:nt,checked:ot,checkedIcon:it,className:st,defaultChecked:at,disabled:lt,disableFocusRipple:ct=!1,edge:pt=!1,icon:ut,id:ht,inputProps:ft,inputRef:gt,name:vt,onBlur:yt,onChange:mt,onFocus:Et,readOnly:bt,required:Ct=!1,tabIndex:Tt,type:wt,value:Rt}=et,It=_objectWithoutPropertiesLoose(et,_excluded$26),[St,Pt]=useControlled({controlled:ot,default:Boolean(at),name:"SwitchBase",state:"checked"}),Ot=useFormControl(),Ut=Ft=>{Et&&Et(Ft),Ot&&Ot.onFocus&&Ot.onFocus(Ft)},Bt=Ft=>{yt&&yt(Ft),Ot&&Ot.onBlur&&Ot.onBlur(Ft)},xt=Ft=>{if(Ft.nativeEvent.defaultPrevented)return;const jt=Ft.target.checked;Pt(jt),mt&&mt(Ft,jt)};let At=lt;Ot&&typeof At>"u"&&(At=Ot.disabled);const Mt=wt==="checkbox"||wt==="radio",Nt=_extends({},et,{checked:St,disabled:At,disableFocusRipple:ct,edge:pt}),$t=useUtilityClasses$1F(Nt);return jsxs(SwitchBaseRoot,_extends({component:"span",className:clsx($t.root,st),centerRipple:!0,focusRipple:!ct,disabled:At,tabIndex:null,role:void 0,onFocus:Ut,onBlur:Bt,ownerState:Nt,ref:rt},It,{children:[jsx(SwitchBaseInput,_extends({autoFocus:nt,checked:ot,defaultChecked:at,className:$t.input,disabled:At,id:Mt?ht:void 0,name:vt,onChange:xt,readOnly:bt,ref:gt,required:Ct,ownerState:Nt,tabIndex:Tt,type:wt},wt==="checkbox"&&Rt===void 0?{}:{value:Rt},ft)),St?it:ut]}))}),SwitchBase$1=SwitchBase,CheckBoxOutlineBlankIcon=createSvgIcon$1(jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon$1(jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon$1(jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(_e){return generateUtilityClass("MuiCheckbox",_e)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),checkboxClasses$1=checkboxClasses,_excluded$25=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$1E=_e=>{const{classes:et,indeterminate:rt,color:nt}=_e,ot={root:["root",rt&&"indeterminate",`color${capitalize(nt)}`]},it=composeClasses(ot,getCheckboxUtilityClass,et);return _extends({},et,it)},CheckboxRoot=styled$1(SwitchBase$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.indeterminate&&et.indeterminate,rt.color!=="default"&&et[`color${capitalize(rt.color)}`]]}})(({theme:_e,ownerState:et})=>_extends({color:(_e.vars||_e).palette.text.secondary},!et.disableRipple&&{"&:hover":{backgroundColor:_e.vars?`rgba(${et.color==="default"?_e.vars.palette.action.activeChannel:_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(et.color==="default"?_e.palette.action.active:_e.palette[et.color].main,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},et.color!=="default"&&{[`&.${checkboxClasses$1.checked}, &.${checkboxClasses$1.indeterminate}`]:{color:(_e.vars||_e).palette[et.color].main},[`&.${checkboxClasses$1.disabled}`]:{color:(_e.vars||_e).palette.action.disabled}})),defaultCheckedIcon$1=jsx(CheckBoxIcon,{}),defaultIcon$1=jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(et,rt){var nt,ot;const it=useThemeProps({props:et,name:"MuiCheckbox"}),{checkedIcon:st=defaultCheckedIcon$1,color:at="primary",icon:lt=defaultIcon$1,indeterminate:ct=!1,indeterminateIcon:pt=defaultIndeterminateIcon,inputProps:ut,size:ht="medium",className:ft}=it,gt=_objectWithoutPropertiesLoose(it,_excluded$25),vt=ct?pt:lt,yt=ct?pt:st,mt=_extends({},it,{color:at,indeterminate:ct,size:ht}),Et=useUtilityClasses$1E(mt);return jsx(CheckboxRoot,_extends({type:"checkbox",inputProps:_extends({"data-indeterminate":ct},ut),icon:reactExports.cloneElement(vt,{fontSize:(nt=vt.props.fontSize)!=null?nt:ht}),checkedIcon:reactExports.cloneElement(yt,{fontSize:(ot=yt.props.fontSize)!=null?ot:ht}),ownerState:mt,ref:rt,className:clsx(Et.root,ft)},gt,{classes:Et}))}),MUICheckbox=Checkbox;function getCircularProgressUtilityClass(_e){return generateUtilityClass("MuiCircularProgress",_e)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _excluded$24=["className","color","disableShrink","size","style","thickness","value","variant"];let _$2=_e=>_e,_t$1,_t2$1,_t3$1,_t4$1;const SIZE=44,circularRotateKeyframe=keyframes(_t$1||(_t$1=_$2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),circularDashKeyframe=keyframes(_t2$1||(_t2$1=_$2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),useUtilityClasses$1D=_e=>{const{classes:et,variant:rt,color:nt,disableShrink:ot}=_e,it={root:["root",rt,`color${capitalize(nt)}`],svg:["svg"],circle:["circle",`circle${capitalize(rt)}`,ot&&"circleDisableShrink"]};return composeClasses(it,getCircularProgressUtilityClass,et)},CircularProgressRoot=styled$1("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],et[`color${capitalize(rt.color)}`]]}})(({ownerState:_e,theme:et})=>_extends({display:"inline-block"},_e.variant==="determinate"&&{transition:et.transitions.create("transform")},_e.color!=="inherit"&&{color:(et.vars||et).palette[_e.color].main}),({ownerState:_e})=>_e.variant==="indeterminate"&&css(_t3$1||(_t3$1=_$2`
      animation: ${0} 1.4s linear infinite;
    `),circularRotateKeyframe)),CircularProgressSVG=styled$1("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(_e,et)=>et.svg})({display:"block"}),CircularProgressCircle=styled$1("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.circle,et[`circle${capitalize(rt.variant)}`],rt.disableShrink&&et.circleDisableShrink]}})(({ownerState:_e,theme:et})=>_extends({stroke:"currentColor"},_e.variant==="determinate"&&{transition:et.transitions.create("stroke-dashoffset")},_e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:_e})=>_e.variant==="indeterminate"&&!_e.disableShrink&&css(_t4$1||(_t4$1=_$2`
      animation: ${0} 1.4s ease-in-out infinite;
    `),circularDashKeyframe)),CircularProgress=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiCircularProgress"}),{className:ot,color:it="primary",disableShrink:st=!1,size:at=40,style:lt,thickness:ct=3.6,value:pt=0,variant:ut="indeterminate"}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$24),ft=_extends({},nt,{color:it,disableShrink:st,size:at,thickness:ct,value:pt,variant:ut}),gt=useUtilityClasses$1D(ft),vt={},yt={},mt={};if(ut==="determinate"){const Et=2*Math.PI*((SIZE-ct)/2);vt.strokeDasharray=Et.toFixed(3),mt["aria-valuenow"]=Math.round(pt),vt.strokeDashoffset=`${((100-pt)/100*Et).toFixed(3)}px`,yt.transform="rotate(-90deg)"}return jsx(CircularProgressRoot,_extends({className:clsx(gt.root,ot),style:_extends({width:at,height:at},yt,lt),ownerState:ft,ref:rt,role:"progressbar"},mt,ht,{children:jsx(CircularProgressSVG,{className:gt.svg,ownerState:ft,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsx(CircularProgressCircle,{className:gt.circle,style:vt,ownerState:ft,cx:SIZE,cy:SIZE,r:(SIZE-ct)/2,fill:"none",strokeWidth:ct})})}))}),CircularProgress$1=CircularProgress,Container=createContainer({createStyledComponent:styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`maxWidth${capitalize(String(rt.maxWidth))}`],rt.fixed&&et.fixed,rt.disableGutters&&et.disableGutters]}}),useThemeProps:_e=>useThemeProps({props:_e,name:"MuiContainer"})}),Container$1=Container,html=(_e,et)=>_extends({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},et&&!_e.vars&&{colorScheme:_e.palette.mode}),body=_e=>_extends({color:(_e.vars||_e).palette.text.primary},_e.typography.body1,{backgroundColor:(_e.vars||_e).palette.background.default,"@media print":{backgroundColor:(_e.vars||_e).palette.common.white}}),styles$2=(_e,et=!1)=>{var rt,nt;const ot={};et&&_e.colorSchemes&&Object.entries(_e.colorSchemes).forEach(([at,lt])=>{var ct;ot[_e.getColorSchemeSelector(at).replace(/\s*&/,"")]={colorScheme:(ct=lt.palette)==null?void 0:ct.mode}});let it=_extends({html:html(_e,et),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:_e.typography.fontWeightBold},body:_extends({margin:0},body(_e),{"&::backdrop":{backgroundColor:(_e.vars||_e).palette.background.default}})},ot);const st=(rt=_e.components)==null||(nt=rt.MuiCssBaseline)==null?void 0:nt.styleOverrides;return st&&(it=[it,st]),it};function CssBaseline(_e){const et=useThemeProps({props:_e,name:"MuiCssBaseline"}),{children:rt,enableColorScheme:nt=!1}=et;return jsxs(reactExports.Fragment,{children:[jsx(GlobalStyles,{styles:ot=>styles$2(ot,nt)}),rt]})}const _excluded$23=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],extendUtilityClasses=_e=>_e.classes,ModalRoot=styled$1("div",{name:"MuiModal",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,!rt.open&&rt.exited&&et.hidden]}})(({theme:_e,ownerState:et})=>_extends({position:"fixed",zIndex:(_e.vars||_e).zIndex.modal,right:0,bottom:0,top:0,left:0},!et.open&&et.exited&&{visibility:"hidden"})),ModalBackdrop=styled$1(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(_e,et)=>et.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(et,rt){var nt,ot,it,st,at,lt;const ct=useThemeProps({name:"MuiModal",props:et}),{BackdropComponent:pt=ModalBackdrop,BackdropProps:ut,closeAfterTransition:ht=!1,children:ft,component:gt,components:vt={},componentsProps:yt={},disableAutoFocus:mt=!1,disableEnforceFocus:Et=!1,disableEscapeKeyDown:bt=!1,disablePortal:Ct=!1,disableRestoreFocus:Tt=!1,disableScrollLock:wt=!1,hideBackdrop:Rt=!1,keepMounted:It=!1,slotProps:St,slots:Pt,theme:Ot}=ct,Ut=_objectWithoutPropertiesLoose(ct,_excluded$23),[Bt,xt]=reactExports.useState(!0),At={closeAfterTransition:ht,disableAutoFocus:mt,disableEnforceFocus:Et,disableEscapeKeyDown:bt,disablePortal:Ct,disableRestoreFocus:Tt,disableScrollLock:wt,hideBackdrop:Rt,keepMounted:It},Mt=_extends({},ct,At,{exited:Bt}),Nt=extendUtilityClasses(Mt),$t=(nt=(ot=Pt==null?void 0:Pt.root)!=null?ot:vt.Root)!=null?nt:ModalRoot,Ft=(it=(st=Pt==null?void 0:Pt.backdrop)!=null?st:vt.Backdrop)!=null?it:pt,jt=(at=St==null?void 0:St.root)!=null?at:yt.root,zt=(lt=St==null?void 0:St.backdrop)!=null?lt:yt.backdrop;return jsx(ModalUnstyled$1,_extends({slots:{root:$t,backdrop:Ft},slotProps:{root:()=>_extends({},resolveComponentProps(jt,Mt),!isHostComponent($t)&&{as:gt,theme:Ot}),backdrop:()=>_extends({},ut,resolveComponentProps(zt,Mt))},onTransitionEnter:()=>xt(!1),onTransitionExited:()=>xt(!0),ref:rt},Ut,{classes:Nt},At,{children:ft}))}),Modal$1=Modal;function getDialogUtilityClass(_e){return generateUtilityClass("MuiDialog",_e)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),dialogClasses$1=dialogClasses,DialogContext=reactExports.createContext({}),DialogContext$1=DialogContext,_excluded$22=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],DialogBackdrop=styled$1(Backdrop$1,{name:"MuiDialog",slot:"Backdrop",overrides:(_e,et)=>et.backdrop})({zIndex:-1}),useUtilityClasses$1C=_e=>{const{classes:et,scroll:rt,maxWidth:nt,fullWidth:ot,fullScreen:it}=_e,st={root:["root"],container:["container",`scroll${capitalize(rt)}`],paper:["paper",`paperScroll${capitalize(rt)}`,`paperWidth${capitalize(String(nt))}`,ot&&"paperFullWidth",it&&"paperFullScreen"]};return composeClasses(st,getDialogUtilityClass,et)},DialogRoot=styled$1(Modal$1,{name:"MuiDialog",slot:"Root",overridesResolver:(_e,et)=>et.root})({"@media print":{position:"absolute !important"}}),DialogContainer=styled$1("div",{name:"MuiDialog",slot:"Container",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.container,et[`scroll${capitalize(rt.scroll)}`]]}})(({ownerState:_e})=>_extends({height:"100%","@media print":{height:"auto"},outline:0},_e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},_e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),DialogPaper=styled$1(Paper$1,{name:"MuiDialog",slot:"Paper",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.paper,et[`scrollPaper${capitalize(rt.scroll)}`],et[`paperWidth${capitalize(String(rt.maxWidth))}`],rt.fullWidth&&et.paperFullWidth,rt.fullScreen&&et.paperFullScreen]}})(({theme:_e,ownerState:et})=>_extends({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},et.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},et.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!et.maxWidth&&{maxWidth:"calc(100% - 64px)"},et.maxWidth==="xs"&&{maxWidth:_e.breakpoints.unit==="px"?Math.max(_e.breakpoints.values.xs,444):`${_e.breakpoints.values.xs}${_e.breakpoints.unit}`,[`&.${dialogClasses$1.paperScrollBody}`]:{[_e.breakpoints.down(Math.max(_e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},et.maxWidth&&et.maxWidth!=="xs"&&{maxWidth:`${_e.breakpoints.values[et.maxWidth]}${_e.breakpoints.unit}`,[`&.${dialogClasses$1.paperScrollBody}`]:{[_e.breakpoints.down(_e.breakpoints.values[et.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},et.fullWidth&&{width:"calc(100% - 64px)"},et.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses$1.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dialog=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDialog"}),ot=useTheme(),it={enter:ot.transitions.duration.enteringScreen,exit:ot.transitions.duration.leavingScreen},{"aria-describedby":st,"aria-labelledby":at,BackdropComponent:lt,BackdropProps:ct,children:pt,className:ut,disableEscapeKeyDown:ht=!1,fullScreen:ft=!1,fullWidth:gt=!1,maxWidth:vt="sm",onBackdropClick:yt,onClose:mt,open:Et,PaperComponent:bt=Paper$1,PaperProps:Ct={},scroll:Tt="paper",TransitionComponent:wt=Fade$1,transitionDuration:Rt=it,TransitionProps:It}=nt,St=_objectWithoutPropertiesLoose(nt,_excluded$22),Pt=_extends({},nt,{disableEscapeKeyDown:ht,fullScreen:ft,fullWidth:gt,maxWidth:vt,scroll:Tt}),Ot=useUtilityClasses$1C(Pt),Ut=reactExports.useRef(),Bt=Nt=>{Ut.current=Nt.target===Nt.currentTarget},xt=Nt=>{Ut.current&&(Ut.current=null,yt&&yt(Nt),mt&&mt(Nt,"backdropClick"))},At=useId(at),Mt=reactExports.useMemo(()=>({titleId:At}),[At]);return jsx(DialogRoot,_extends({className:clsx(Ot.root,ut),closeAfterTransition:!0,components:{Backdrop:DialogBackdrop},componentsProps:{backdrop:_extends({transitionDuration:Rt,as:lt},ct)},disableEscapeKeyDown:ht,onClose:mt,open:Et,ref:rt,onClick:xt,ownerState:Pt},St,{children:jsx(wt,_extends({appear:!0,in:Et,timeout:Rt,role:"presentation"},It,{children:jsx(DialogContainer,{className:clsx(Ot.container),onMouseDown:Bt,ownerState:Pt,children:jsx(DialogPaper,_extends({as:bt,elevation:24,role:"dialog","aria-describedby":st,"aria-labelledby":At},Ct,{className:clsx(Ot.paper,Ct.className),ownerState:Pt,children:jsx(DialogContext$1.Provider,{value:Mt,children:pt})}))})}))}))}),Dialog$1=Dialog;function getDialogActionsUtilityClass(_e){return generateUtilityClass("MuiDialogActions",_e)}generateUtilityClasses("MuiDialogActions",["root","spacing"]);const _excluded$21=["className","disableSpacing"],useUtilityClasses$1B=_e=>{const{classes:et,disableSpacing:rt}=_e;return composeClasses({root:["root",!rt&&"spacing"]},getDialogActionsUtilityClass,et)},DialogActionsRoot=styled$1("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,!rt.disableSpacing&&et.spacing]}})(({ownerState:_e})=>_extends({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!_e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),DialogActions=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDialogActions"}),{className:ot,disableSpacing:it=!1}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$21),at=_extends({},nt,{disableSpacing:it}),lt=useUtilityClasses$1B(at);return jsx(DialogActionsRoot,_extends({className:clsx(lt.root,ot),ownerState:at,ref:rt},st))}),DialogActions$1=DialogActions;function getDialogContentUtilityClass(_e){return generateUtilityClass("MuiDialogContent",_e)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);function getDialogTitleUtilityClass(_e){return generateUtilityClass("MuiDialogTitle",_e)}const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),dialogTitleClasses$1=dialogTitleClasses,_excluded$20=["className","dividers"],useUtilityClasses$1A=_e=>{const{classes:et,dividers:rt}=_e;return composeClasses({root:["root",rt&&"dividers"]},getDialogContentUtilityClass,et)},DialogContentRoot=styled$1("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.dividers&&et.dividers]}})(({theme:_e,ownerState:et})=>_extends({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},et.dividers?{padding:"16px 24px",borderTop:`1px solid ${(_e.vars||_e).palette.divider}`,borderBottom:`1px solid ${(_e.vars||_e).palette.divider}`}:{[`.${dialogTitleClasses$1.root} + &`]:{paddingTop:0}})),DialogContent=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDialogContent"}),{className:ot,dividers:it=!1}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$20),at=_extends({},nt,{dividers:it}),lt=useUtilityClasses$1A(at);return jsx(DialogContentRoot,_extends({className:clsx(lt.root,ot),ownerState:at,ref:rt},st))}),DialogContent$1=DialogContent;function getDialogContentTextUtilityClass(_e){return generateUtilityClass("MuiDialogContentText",_e)}generateUtilityClasses("MuiDialogContentText",["root"]);const _excluded$1$=["children","className"],useUtilityClasses$1z=_e=>{const{classes:et}=_e,nt=composeClasses({root:["root"]},getDialogContentTextUtilityClass,et);return _extends({},et,nt)},DialogContentTextRoot=styled$1(Typography$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(_e,et)=>et.root})({}),DialogContentText=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDialogContentText"}),{className:ot}=nt,it=_objectWithoutPropertiesLoose(nt,_excluded$1$),st=useUtilityClasses$1z(it);return jsx(DialogContentTextRoot,_extends({component:"p",variant:"body1",color:"text.secondary",ref:rt,ownerState:it,className:clsx(st.root,ot)},nt,{classes:st}))}),DialogContentText$1=DialogContentText,_excluded$1_=["className","id"],useUtilityClasses$1y=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getDialogTitleUtilityClass,et)},DialogTitleRoot=styled$1(Typography$1,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(_e,et)=>et.root})({padding:"16px 24px",flex:"0 0 auto"}),DialogTitle=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDialogTitle"}),{className:ot,id:it}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$1_),at=nt,lt=useUtilityClasses$1y(at),{titleId:ct=it}=reactExports.useContext(DialogContext$1);return jsx(DialogTitleRoot,_extends({component:"h2",className:clsx(lt.root,ot),ownerState:at,ref:rt,variant:"h6",id:ct},st))}),DialogTitle$1=DialogTitle;function getDividerUtilityClass(_e){return generateUtilityClass("MuiDivider",_e)}const dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),dividerClasses$1=dividerClasses,_excluded$1Z=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],useUtilityClasses$1x=_e=>{const{absolute:et,children:rt,classes:nt,flexItem:ot,light:it,orientation:st,textAlign:at,variant:lt}=_e;return composeClasses({root:["root",et&&"absolute",lt,it&&"light",st==="vertical"&&"vertical",ot&&"flexItem",rt&&"withChildren",rt&&st==="vertical"&&"withChildrenVertical",at==="right"&&st!=="vertical"&&"textAlignRight",at==="left"&&st!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",st==="vertical"&&"wrapperVertical"]},getDividerUtilityClass,nt)},DividerRoot=styled$1("div",{name:"MuiDivider",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.absolute&&et.absolute,et[rt.variant],rt.light&&et.light,rt.orientation==="vertical"&&et.vertical,rt.flexItem&&et.flexItem,rt.children&&et.withChildren,rt.children&&rt.orientation==="vertical"&&et.withChildrenVertical,rt.textAlign==="right"&&rt.orientation!=="vertical"&&et.textAlignRight,rt.textAlign==="left"&&rt.orientation!=="vertical"&&et.textAlignLeft]}})(({theme:_e,ownerState:et})=>_extends({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(_e.vars||_e).palette.divider,borderBottomWidth:"thin"},et.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},et.light&&{borderColor:_e.vars?`rgba(${_e.vars.palette.dividerChannel} / 0.08)`:alpha$1(_e.palette.divider,.08)},et.variant==="inset"&&{marginLeft:72},et.variant==="middle"&&et.orientation==="horizontal"&&{marginLeft:_e.spacing(2),marginRight:_e.spacing(2)},et.variant==="middle"&&et.orientation==="vertical"&&{marginTop:_e.spacing(1),marginBottom:_e.spacing(1)},et.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},et.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:_e,ownerState:et})=>_extends({},et.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(_e.vars||_e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:_e,ownerState:et})=>_extends({},et.children&&et.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(_e.vars||_e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:_e})=>_extends({},_e.textAlign==="right"&&_e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},_e.textAlign==="left"&&_e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),DividerWrapper=styled$1("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.wrapper,rt.orientation==="vertical"&&et.wrapperVertical]}})(({theme:_e,ownerState:et})=>_extends({display:"inline-block",paddingLeft:`calc(${_e.spacing(1)} * 1.2)`,paddingRight:`calc(${_e.spacing(1)} * 1.2)`},et.orientation==="vertical"&&{paddingTop:`calc(${_e.spacing(1)} * 1.2)`,paddingBottom:`calc(${_e.spacing(1)} * 1.2)`})),Divider=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDivider"}),{absolute:ot=!1,children:it,className:st,component:at=it?"div":"hr",flexItem:lt=!1,light:ct=!1,orientation:pt="horizontal",role:ut=at!=="hr"?"separator":void 0,textAlign:ht="center",variant:ft="fullWidth"}=nt,gt=_objectWithoutPropertiesLoose(nt,_excluded$1Z),vt=_extends({},nt,{absolute:ot,component:at,flexItem:lt,light:ct,orientation:pt,role:ut,textAlign:ht,variant:ft}),yt=useUtilityClasses$1x(vt);return jsx(DividerRoot,_extends({as:at,className:clsx(yt.root,st),role:ut,ref:rt,ownerState:vt},gt,{children:it?jsx(DividerWrapper,{className:yt.wrapper,ownerState:vt,children:it}):null}))}),Divider$1=Divider,_excluded$1Y=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getTranslateValue(_e,et,rt){const nt=et.getBoundingClientRect(),ot=rt&&rt.getBoundingClientRect(),it=ownerWindow(et);let st;if(et.fakeTransform)st=et.fakeTransform;else{const ct=it.getComputedStyle(et);st=ct.getPropertyValue("-webkit-transform")||ct.getPropertyValue("transform")}let at=0,lt=0;if(st&&st!=="none"&&typeof st=="string"){const ct=st.split("(")[1].split(")")[0].split(",");at=parseInt(ct[4],10),lt=parseInt(ct[5],10)}return _e==="left"?ot?`translateX(${ot.right+at-nt.left}px)`:`translateX(${it.innerWidth+at-nt.left}px)`:_e==="right"?ot?`translateX(-${nt.right-ot.left-at}px)`:`translateX(-${nt.left+nt.width-at}px)`:_e==="up"?ot?`translateY(${ot.bottom+lt-nt.top}px)`:`translateY(${it.innerHeight+lt-nt.top}px)`:ot?`translateY(-${nt.top-ot.top+nt.height-lt}px)`:`translateY(-${nt.top+nt.height-lt}px)`}function resolveContainer(_e){return typeof _e=="function"?_e():_e}function setTranslateValue(_e,et,rt){const nt=resolveContainer(rt),ot=getTranslateValue(_e,et,nt);ot&&(et.style.webkitTransform=ot,et.style.transform=ot)}const Slide=reactExports.forwardRef(function(et,rt){const nt=useTheme(),ot={enter:nt.transitions.easing.easeOut,exit:nt.transitions.easing.sharp},it={enter:nt.transitions.duration.enteringScreen,exit:nt.transitions.duration.leavingScreen},{addEndListener:st,appear:at=!0,children:lt,container:ct,direction:pt="down",easing:ut=ot,in:ht,onEnter:ft,onEntered:gt,onEntering:vt,onExit:yt,onExited:mt,onExiting:Et,style:bt,timeout:Ct=it,TransitionComponent:Tt=Transition$1}=et,wt=_objectWithoutPropertiesLoose(et,_excluded$1Y),Rt=reactExports.useRef(null),It=useForkRef(lt.ref,Rt,rt),St=$t=>Ft=>{$t&&(Ft===void 0?$t(Rt.current):$t(Rt.current,Ft))},Pt=St(($t,Ft)=>{setTranslateValue(pt,$t,ct),reflow($t),ft&&ft($t,Ft)}),Ot=St(($t,Ft)=>{const jt=getTransitionProps({timeout:Ct,style:bt,easing:ut},{mode:"enter"});$t.style.webkitTransition=nt.transitions.create("-webkit-transform",_extends({},jt)),$t.style.transition=nt.transitions.create("transform",_extends({},jt)),$t.style.webkitTransform="none",$t.style.transform="none",vt&&vt($t,Ft)}),Ut=St(gt),Bt=St(Et),xt=St($t=>{const Ft=getTransitionProps({timeout:Ct,style:bt,easing:ut},{mode:"exit"});$t.style.webkitTransition=nt.transitions.create("-webkit-transform",Ft),$t.style.transition=nt.transitions.create("transform",Ft),setTranslateValue(pt,$t,ct),yt&&yt($t)}),At=St($t=>{$t.style.webkitTransition="",$t.style.transition="",mt&&mt($t)}),Mt=$t=>{st&&st(Rt.current,$t)},Nt=reactExports.useCallback(()=>{Rt.current&&setTranslateValue(pt,Rt.current,ct)},[pt,ct]);return reactExports.useEffect(()=>{if(ht||pt==="down"||pt==="right")return;const $t=debounce$2(()=>{Rt.current&&setTranslateValue(pt,Rt.current,ct)}),Ft=ownerWindow(Rt.current);return Ft.addEventListener("resize",$t),()=>{$t.clear(),Ft.removeEventListener("resize",$t)}},[pt,ht,ct]),reactExports.useEffect(()=>{ht||Nt()},[ht,Nt]),jsx(Tt,_extends({nodeRef:Rt,onEnter:Pt,onEntered:Ut,onEntering:Ot,onExit:xt,onExited:At,onExiting:Bt,addEndListener:Mt,appear:at,in:ht,timeout:Ct},wt,{children:($t,Ft)=>reactExports.cloneElement(lt,_extends({ref:It,style:_extends({visibility:$t==="exited"&&!ht?"hidden":void 0},bt,lt.props.style)},Ft))}))}),Slide$1=Slide;function getDrawerUtilityClass(_e){return generateUtilityClass("MuiDrawer",_e)}generateUtilityClasses("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const _excluded$1X=["BackdropProps"],_excluded2$9=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],overridesResolver$4=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,(rt.variant==="permanent"||rt.variant==="persistent")&&et.docked,et.modal]},useUtilityClasses$1w=_e=>{const{classes:et,anchor:rt,variant:nt}=_e,ot={root:["root"],docked:[(nt==="permanent"||nt==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${capitalize(rt)}`,nt!=="temporary"&&`paperAnchorDocked${capitalize(rt)}`]};return composeClasses(ot,getDrawerUtilityClass,et)},DrawerRoot=styled$1(Modal$1,{name:"MuiDrawer",slot:"Root",overridesResolver:overridesResolver$4})(({theme:_e})=>({zIndex:(_e.vars||_e).zIndex.drawer})),DrawerDockedRoot=styled$1("div",{shouldForwardProp:rootShouldForwardProp,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:overridesResolver$4})({flex:"0 0 auto"}),DrawerPaper=styled$1(Paper$1,{name:"MuiDrawer",slot:"Paper",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.paper,et[`paperAnchor${capitalize(rt.anchor)}`],rt.variant!=="temporary"&&et[`paperAnchorDocked${capitalize(rt.anchor)}`]]}})(({theme:_e,ownerState:et})=>_extends({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(_e.vars||_e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},et.anchor==="left"&&{left:0},et.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},et.anchor==="right"&&{right:0},et.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},et.anchor==="left"&&et.variant!=="temporary"&&{borderRight:`1px solid ${(_e.vars||_e).palette.divider}`},et.anchor==="top"&&et.variant!=="temporary"&&{borderBottom:`1px solid ${(_e.vars||_e).palette.divider}`},et.anchor==="right"&&et.variant!=="temporary"&&{borderLeft:`1px solid ${(_e.vars||_e).palette.divider}`},et.anchor==="bottom"&&et.variant!=="temporary"&&{borderTop:`1px solid ${(_e.vars||_e).palette.divider}`})),oppositeDirection={left:"right",right:"left",top:"down",bottom:"up"};function isHorizontal(_e){return["left","right"].indexOf(_e)!==-1}function getAnchor(_e,et){return _e.direction==="rtl"&&isHorizontal(et)?oppositeDirection[et]:et}const Drawer=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiDrawer"}),ot=useTheme(),it={enter:ot.transitions.duration.enteringScreen,exit:ot.transitions.duration.leavingScreen},{anchor:st="left",BackdropProps:at,children:lt,className:ct,elevation:pt=16,hideBackdrop:ut=!1,ModalProps:{BackdropProps:ht}={},onClose:ft,open:gt=!1,PaperProps:vt={},SlideProps:yt,TransitionComponent:mt=Slide$1,transitionDuration:Et=it,variant:bt="temporary"}=nt,Ct=_objectWithoutPropertiesLoose(nt.ModalProps,_excluded$1X),Tt=_objectWithoutPropertiesLoose(nt,_excluded2$9),wt=reactExports.useRef(!1);reactExports.useEffect(()=>{wt.current=!0},[]);const Rt=getAnchor(ot,st),St=_extends({},nt,{anchor:st,elevation:pt,open:gt,variant:bt},Tt),Pt=useUtilityClasses$1w(St),Ot=jsx(DrawerPaper,_extends({elevation:bt==="temporary"?pt:0,square:!0},vt,{className:clsx(Pt.paper,vt.className),ownerState:St,children:lt}));if(bt==="permanent")return jsx(DrawerDockedRoot,_extends({className:clsx(Pt.root,Pt.docked,ct),ownerState:St,ref:rt},Tt,{children:Ot}));const Ut=jsx(mt,_extends({in:gt,direction:oppositeDirection[Rt],timeout:Et,appear:wt.current},yt,{children:Ot}));return bt==="persistent"?jsx(DrawerDockedRoot,_extends({className:clsx(Pt.root,Pt.docked,ct),ownerState:St,ref:rt},Tt,{children:Ut})):jsx(DrawerRoot,_extends({BackdropProps:_extends({},at,ht,{transitionDuration:Et}),className:clsx(Pt.root,Pt.modal,ct),open:gt,ownerState:St,onClose:ft,hideBackdrop:ut,ref:rt},Tt,Ct,{children:Ut}))}),Drawer$1=Drawer,_excluded$1W=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$1v=_e=>{const{classes:et,disableUnderline:rt}=_e,ot=composeClasses({root:["root",!rt&&"underline"],input:["input"]},getFilledInputUtilityClass,et);return _extends({},et,ot)},FilledInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[...rootOverridesResolver(_e,et),!rt.disableUnderline&&et.underline]}})(({theme:_e,ownerState:et})=>{var rt;const nt=_e.palette.mode==="light",ot=nt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",it=nt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",st=nt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",at=nt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _extends({position:"relative",backgroundColor:_e.vars?_e.vars.palette.FilledInput.bg:it,borderTopLeftRadius:(_e.vars||_e).shape.borderRadius,borderTopRightRadius:(_e.vars||_e).shape.borderRadius,transition:_e.transitions.create("background-color",{duration:_e.transitions.duration.shorter,easing:_e.transitions.easing.easeOut}),"&:hover":{backgroundColor:_e.vars?_e.vars.palette.FilledInput.hoverBg:st,"@media (hover: none)":{backgroundColor:_e.vars?_e.vars.palette.FilledInput.bg:it}},[`&.${filledInputClasses$1.focused}`]:{backgroundColor:_e.vars?_e.vars.palette.FilledInput.bg:it},[`&.${filledInputClasses$1.disabled}`]:{backgroundColor:_e.vars?_e.vars.palette.FilledInput.disabledBg:at}},!et.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(rt=(_e.vars||_e).palette[et.color||"primary"])==null?void 0:rt.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:_e.transitions.create("transform",{duration:_e.transitions.duration.shorter,easing:_e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(_e.vars||_e).palette.error.main}},"&:before":{borderBottom:`1px solid ${_e.vars?`rgba(${_e.vars.palette.common.onBackgroundChannel} / ${_e.vars.opacity.inputUnderline})`:ot}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:_e.transitions.create("border-bottom-color",{duration:_e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses$1.disabled}, .${filledInputClasses$1.error}):before`]:{borderBottom:`1px solid ${(_e.vars||_e).palette.text.primary}`},[`&.${filledInputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}},et.startAdornment&&{paddingLeft:12},et.endAdornment&&{paddingRight:12},et.multiline&&_extends({padding:"25px 12px 8px"},et.size==="small"&&{paddingTop:21,paddingBottom:4},et.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),FilledInputInput=styled$1(InputBaseComponent,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:_e,ownerState:et})=>_extends({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!_e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:_e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:_e.palette.mode==="light"?null:"#fff",caretColor:_e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},_e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[_e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},et.size==="small"&&{paddingTop:21,paddingBottom:4},et.hiddenLabel&&{paddingTop:16,paddingBottom:17},et.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},et.startAdornment&&{paddingLeft:0},et.endAdornment&&{paddingRight:0},et.hiddenLabel&&et.size==="small"&&{paddingTop:8,paddingBottom:9})),FilledInput=reactExports.forwardRef(function(et,rt){var nt,ot,it,st;const at=useThemeProps({props:et,name:"MuiFilledInput"}),{components:lt={},componentsProps:ct,fullWidth:pt=!1,inputComponent:ut="input",multiline:ht=!1,slotProps:ft,slots:gt={},type:vt="text"}=at,yt=_objectWithoutPropertiesLoose(at,_excluded$1W),mt=_extends({},at,{fullWidth:pt,inputComponent:ut,multiline:ht,type:vt}),Et=useUtilityClasses$1v(at),bt={root:{ownerState:mt},input:{ownerState:mt}},Ct=ft??ct?deepmerge(ft??ct,bt):bt,Tt=(nt=(ot=gt.root)!=null?ot:lt.Root)!=null?nt:FilledInputRoot,wt=(it=(st=gt.input)!=null?st:lt.Input)!=null?it:FilledInputInput;return jsx(InputBase$1,_extends({slots:{root:Tt,input:wt},componentsProps:Ct,fullWidth:pt,inputComponent:ut,multiline:ht,ref:rt,type:vt},yt,{classes:Et}))});FilledInput.muiName="Input";const FilledInput$1=FilledInput;function getFormControlUtilityClasses(_e){return generateUtilityClass("MuiFormControl",_e)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const _excluded$1V=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],useUtilityClasses$1u=_e=>{const{classes:et,margin:rt,fullWidth:nt}=_e,ot={root:["root",rt!=="none"&&`margin${capitalize(rt)}`,nt&&"fullWidth"]};return composeClasses(ot,getFormControlUtilityClasses,et)},FormControlRoot=styled$1("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:_e},et)=>_extends({},et.root,et[`margin${capitalize(_e.margin)}`],_e.fullWidth&&et.fullWidth)})(({ownerState:_e})=>_extends({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},_e.margin==="normal"&&{marginTop:16,marginBottom:8},_e.margin==="dense"&&{marginTop:8,marginBottom:4},_e.fullWidth&&{width:"100%"})),FormControl=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiFormControl"}),{children:ot,className:it,color:st="primary",component:at="div",disabled:lt=!1,error:ct=!1,focused:pt,fullWidth:ut=!1,hiddenLabel:ht=!1,margin:ft="none",required:gt=!1,size:vt="medium",variant:yt="outlined"}=nt,mt=_objectWithoutPropertiesLoose(nt,_excluded$1V),Et=_extends({},nt,{color:st,component:at,disabled:lt,error:ct,fullWidth:ut,hiddenLabel:ht,margin:ft,required:gt,size:vt,variant:yt}),bt=useUtilityClasses$1u(Et),[Ct,Tt]=reactExports.useState(()=>{let Bt=!1;return ot&&reactExports.Children.forEach(ot,xt=>{if(!isMuiElement(xt,["Input","Select"]))return;const At=isMuiElement(xt,["Select"])?xt.props.input:xt;At&&isAdornedStart(At.props)&&(Bt=!0)}),Bt}),[wt,Rt]=reactExports.useState(()=>{let Bt=!1;return ot&&reactExports.Children.forEach(ot,xt=>{isMuiElement(xt,["Input","Select"])&&isFilled(xt.props,!0)&&(Bt=!0)}),Bt}),[It,St]=reactExports.useState(!1);lt&&It&&St(!1);const Pt=pt!==void 0&&!lt?pt:It;let Ot;const Ut=reactExports.useMemo(()=>({adornedStart:Ct,setAdornedStart:Tt,color:st,disabled:lt,error:ct,filled:wt,focused:Pt,fullWidth:ut,hiddenLabel:ht,size:vt,onBlur:()=>{St(!1)},onEmpty:()=>{Rt(!1)},onFilled:()=>{Rt(!0)},onFocus:()=>{St(!0)},registerEffect:Ot,required:gt,variant:yt}),[Ct,st,lt,ct,wt,Pt,ut,ht,Ot,gt,vt,yt]);return jsx(FormControlContext$1.Provider,{value:Ut,children:jsx(FormControlRoot,_extends({as:at,ownerState:Et,className:clsx(bt.root,it),ref:rt},mt,{children:ot}))})}),FormControl$1=FormControl;function getFormControlLabelUtilityClasses(_e){return generateUtilityClass("MuiFormControlLabel",_e)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),formControlLabelClasses$1=formControlLabelClasses,_excluded$1U=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],useUtilityClasses$1t=_e=>{const{classes:et,disabled:rt,labelPlacement:nt,error:ot}=_e,it={root:["root",rt&&"disabled",`labelPlacement${capitalize(nt)}`,ot&&"error"],label:["label",rt&&"disabled"]};return composeClasses(it,getFormControlLabelUtilityClasses,et)},FormControlLabelRoot=styled$1("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`& .${formControlLabelClasses$1.label}`]:et.label},et.root,et[`labelPlacement${capitalize(rt.labelPlacement)}`]]}})(({theme:_e,ownerState:et})=>_extends({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses$1.disabled}`]:{cursor:"default"}},et.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},et.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},et.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses$1.label}`]:{[`&.${formControlLabelClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled}}})),FormControlLabel=reactExports.forwardRef(function(et,rt){var nt;const ot=useThemeProps({props:et,name:"MuiFormControlLabel"}),{className:it,componentsProps:st={},control:at,disabled:lt,disableTypography:ct,label:pt,labelPlacement:ut="end",slotProps:ht={}}=ot,ft=_objectWithoutPropertiesLoose(ot,_excluded$1U),gt=useFormControl();let vt=lt;typeof vt>"u"&&typeof at.props.disabled<"u"&&(vt=at.props.disabled),typeof vt>"u"&&gt&&(vt=gt.disabled);const yt={disabled:vt};["checked","name","onChange","value","inputRef"].forEach(wt=>{typeof at.props[wt]>"u"&&typeof ot[wt]<"u"&&(yt[wt]=ot[wt])});const mt=formControlState({props:ot,muiFormControl:gt,states:["error"]}),Et=_extends({},ot,{disabled:vt,labelPlacement:ut,error:mt.error}),bt=useUtilityClasses$1t(Et),Ct=(nt=ht.typography)!=null?nt:st.typography;let Tt=pt;return Tt!=null&&Tt.type!==Typography$1&&!ct&&(Tt=jsx(Typography$1,_extends({component:"span"},Ct,{className:clsx(bt.label,Ct==null?void 0:Ct.className),children:Tt}))),jsxs(FormControlLabelRoot,_extends({className:clsx(bt.root,it),ownerState:Et,ref:rt},ft,{children:[reactExports.cloneElement(at,yt),Tt]}))}),FormControlLabel$1=FormControlLabel;function getFormGroupUtilityClass(_e){return generateUtilityClass("MuiFormGroup",_e)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const _excluded$1T=["className","row"],useUtilityClasses$1s=_e=>{const{classes:et,row:rt,error:nt}=_e;return composeClasses({root:["root",rt&&"row",nt&&"error"]},getFormGroupUtilityClass,et)},FormGroupRoot=styled$1("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.row&&et.row]}})(({ownerState:_e})=>_extends({display:"flex",flexDirection:"column",flexWrap:"wrap"},_e.row&&{flexDirection:"row"})),FormGroup=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiFormGroup"}),{className:ot,row:it=!1}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$1T),at=useFormControl(),lt=formControlState({props:nt,muiFormControl:at,states:["error"]}),ct=_extends({},nt,{row:it,error:lt.error}),pt=useUtilityClasses$1s(ct);return jsx(FormGroupRoot,_extends({className:clsx(pt.root,ot),ownerState:ct,ref:rt},st))}),FormGroup$1=FormGroup;function getFormHelperTextUtilityClasses(_e){return generateUtilityClass("MuiFormHelperText",_e)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),formHelperTextClasses$1=formHelperTextClasses;var _span$3;const _excluded$1S=["children","className","component","disabled","error","filled","focused","margin","required","variant"],useUtilityClasses$1r=_e=>{const{classes:et,contained:rt,size:nt,disabled:ot,error:it,filled:st,focused:at,required:lt}=_e,ct={root:["root",ot&&"disabled",it&&"error",nt&&`size${capitalize(nt)}`,rt&&"contained",at&&"focused",st&&"filled",lt&&"required"]};return composeClasses(ct,getFormHelperTextUtilityClasses,et)},FormHelperTextRoot=styled$1("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.size&&et[`size${capitalize(rt.size)}`],rt.contained&&et.contained,rt.filled&&et.filled]}})(({theme:_e,ownerState:et})=>_extends({color:(_e.vars||_e).palette.text.secondary},_e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled},[`&.${formHelperTextClasses$1.error}`]:{color:(_e.vars||_e).palette.error.main}},et.size==="small"&&{marginTop:4},et.contained&&{marginLeft:14,marginRight:14})),FormHelperText=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiFormHelperText"}),{children:ot,className:it,component:st="p"}=nt,at=_objectWithoutPropertiesLoose(nt,_excluded$1S),lt=useFormControl(),ct=formControlState({props:nt,muiFormControl:lt,states:["variant","size","disabled","error","filled","focused","required"]}),pt=_extends({},nt,{component:st,contained:ct.variant==="filled"||ct.variant==="outlined",variant:ct.variant,size:ct.size,disabled:ct.disabled,error:ct.error,filled:ct.filled,focused:ct.focused,required:ct.required}),ut=useUtilityClasses$1r(pt);return jsx(FormHelperTextRoot,_extends({as:st,ownerState:pt,className:clsx(ut.root,it),ref:rt},at,{children:ot===" "?_span$3||(_span$3=jsx("span",{className:"notranslate",children:"​"})):ot}))}),FormHelperText$1=FormHelperText;function getFormLabelUtilityClasses(_e){return generateUtilityClass("MuiFormLabel",_e)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),formLabelClasses$1=formLabelClasses,_excluded$1R=["children","className","color","component","disabled","error","filled","focused","required"],useUtilityClasses$1q=_e=>{const{classes:et,color:rt,focused:nt,disabled:ot,error:it,filled:st,required:at}=_e,lt={root:["root",`color${capitalize(rt)}`,ot&&"disabled",it&&"error",st&&"filled",nt&&"focused",at&&"required"],asterisk:["asterisk",it&&"error"]};return composeClasses(lt,getFormLabelUtilityClasses,et)},FormLabelRoot=styled$1("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:_e},et)=>_extends({},et.root,_e.color==="secondary"&&et.colorSecondary,_e.filled&&et.filled)})(({theme:_e,ownerState:et})=>_extends({color:(_e.vars||_e).palette.text.secondary},_e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${formLabelClasses$1.focused}`]:{color:(_e.vars||_e).palette[et.color].main},[`&.${formLabelClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled},[`&.${formLabelClasses$1.error}`]:{color:(_e.vars||_e).palette.error.main}})),AsteriskComponent=styled$1("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(_e,et)=>et.asterisk})(({theme:_e})=>({[`&.${formLabelClasses$1.error}`]:{color:(_e.vars||_e).palette.error.main}})),FormLabel=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiFormLabel"}),{children:ot,className:it,component:st="label"}=nt,at=_objectWithoutPropertiesLoose(nt,_excluded$1R),lt=useFormControl(),ct=formControlState({props:nt,muiFormControl:lt,states:["color","required","focused","disabled","error","filled"]}),pt=_extends({},nt,{color:ct.color||"primary",component:st,disabled:ct.disabled,error:ct.error,filled:ct.filled,focused:ct.focused,required:ct.required}),ut=useUtilityClasses$1q(pt);return jsxs(FormLabelRoot,_extends({as:st,ownerState:pt,className:clsx(ut.root,it),ref:rt},at,{children:[ot,ct.required&&jsxs(AsteriskComponent,{ownerState:pt,"aria-hidden":!0,className:ut.asterisk,children:[" ","*"]})]}))}),FormLabel$1=FormLabel,GridContext=reactExports.createContext(),GridContext$1=GridContext;function getGridUtilityClass(_e){return generateUtilityClass("MuiGrid",_e)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses$1=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(_e=>`spacing-xs-${_e}`),...DIRECTIONS.map(_e=>`direction-xs-${_e}`),...WRAPS.map(_e=>`wrap-xs-${_e}`),...GRID_SIZES.map(_e=>`grid-xs-${_e}`),...GRID_SIZES.map(_e=>`grid-sm-${_e}`),...GRID_SIZES.map(_e=>`grid-md-${_e}`),...GRID_SIZES.map(_e=>`grid-lg-${_e}`),...GRID_SIZES.map(_e=>`grid-xl-${_e}`)]),_excluded$1Q=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(_e){const et=parseFloat(_e);return`${et}${String(_e).replace(String(et),"")||"px"}`}function generateGrid({theme:_e,ownerState:et}){let rt;return _e.breakpoints.keys.reduce((nt,ot)=>{let it={};if(et[ot]&&(rt=et[ot]),!rt)return nt;if(rt===!0)it={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(rt==="auto")it={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const st=resolveBreakpointValues({values:et.columns,breakpoints:_e.breakpoints.values}),at=typeof st=="object"?st[ot]:st;if(at==null)return nt;const lt=`${Math.round(rt/at*1e8)/1e6}%`;let ct={};if(et.container&&et.item&&et.columnSpacing!==0){const pt=_e.spacing(et.columnSpacing);if(pt!=="0px"){const ut=`calc(${lt} + ${getOffset(pt)})`;ct={flexBasis:ut,maxWidth:ut}}}it=_extends({flexBasis:lt,flexGrow:0,maxWidth:lt},ct)}return _e.breakpoints.values[ot]===0?Object.assign(nt,it):nt[_e.breakpoints.up(ot)]=it,nt},{})}function generateDirection({theme:_e,ownerState:et}){const rt=resolveBreakpointValues({values:et.direction,breakpoints:_e.breakpoints.values});return handleBreakpoints({theme:_e},rt,nt=>{const ot={flexDirection:nt};return nt.indexOf("column")===0&&(ot[`& > .${gridClasses$1.item}`]={maxWidth:"none"}),ot})}function extractZeroValueBreakpointKeys({breakpoints:_e,values:et}){let rt="";Object.keys(et).forEach(ot=>{rt===""&&et[ot]!==0&&(rt=ot)});const nt=Object.keys(_e).sort((ot,it)=>_e[ot]-_e[it]);return nt.slice(0,nt.indexOf(rt))}function generateRowGap({theme:_e,ownerState:et}){const{container:rt,rowSpacing:nt}=et;let ot={};if(rt&&nt!==0){const it=resolveBreakpointValues({values:nt,breakpoints:_e.breakpoints.values});let st;typeof it=="object"&&(st=extractZeroValueBreakpointKeys({breakpoints:_e.breakpoints.values,values:it})),ot=handleBreakpoints({theme:_e},it,(at,lt)=>{var ct;const pt=_e.spacing(at);return pt!=="0px"?{marginTop:`-${getOffset(pt)}`,[`& > .${gridClasses$1.item}`]:{paddingTop:getOffset(pt)}}:(ct=st)!=null&&ct.includes(lt)?{}:{marginTop:0,[`& > .${gridClasses$1.item}`]:{paddingTop:0}}})}return ot}function generateColumnGap({theme:_e,ownerState:et}){const{container:rt,columnSpacing:nt}=et;let ot={};if(rt&&nt!==0){const it=resolveBreakpointValues({values:nt,breakpoints:_e.breakpoints.values});let st;typeof it=="object"&&(st=extractZeroValueBreakpointKeys({breakpoints:_e.breakpoints.values,values:it})),ot=handleBreakpoints({theme:_e},it,(at,lt)=>{var ct;const pt=_e.spacing(at);return pt!=="0px"?{width:`calc(100% + ${getOffset(pt)})`,marginLeft:`-${getOffset(pt)}`,[`& > .${gridClasses$1.item}`]:{paddingLeft:getOffset(pt)}}:(ct=st)!=null&&ct.includes(lt)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses$1.item}`]:{paddingLeft:0}}})}return ot}function resolveSpacingStyles(_e,et,rt={}){if(!_e||_e<=0)return[];if(typeof _e=="string"&&!Number.isNaN(Number(_e))||typeof _e=="number")return[rt[`spacing-xs-${String(_e)}`]];const nt=[];return et.forEach(ot=>{const it=_e[ot];Number(it)>0&&nt.push(rt[`spacing-${ot}-${String(it)}`])}),nt}const GridRoot$1=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e,{container:nt,direction:ot,item:it,spacing:st,wrap:at,zeroMinWidth:lt,breakpoints:ct}=rt;let pt=[];nt&&(pt=resolveSpacingStyles(st,ct,et));const ut=[];return ct.forEach(ht=>{const ft=rt[ht];ft&&ut.push(et[`grid-${ht}-${String(ft)}`])}),[et.root,nt&&et.container,it&&et.item,lt&&et.zeroMinWidth,...pt,ot!=="row"&&et[`direction-xs-${String(ot)}`],at!=="wrap"&&et[`wrap-xs-${String(at)}`],...ut]}})(({ownerState:_e})=>_extends({boxSizing:"border-box"},_e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},_e.item&&{margin:0},_e.zeroMinWidth&&{minWidth:0},_e.wrap!=="wrap"&&{flexWrap:_e.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(_e,et){if(!_e||_e<=0)return[];if(typeof _e=="string"&&!Number.isNaN(Number(_e))||typeof _e=="number")return[`spacing-xs-${String(_e)}`];const rt=[];return et.forEach(nt=>{const ot=_e[nt];if(Number(ot)>0){const it=`spacing-${nt}-${String(ot)}`;rt.push(it)}}),rt}const useUtilityClasses$1p=_e=>{const{classes:et,container:rt,direction:nt,item:ot,spacing:it,wrap:st,zeroMinWidth:at,breakpoints:lt}=_e;let ct=[];rt&&(ct=resolveSpacingClasses(it,lt));const pt=[];lt.forEach(ht=>{const ft=_e[ht];ft&&pt.push(`grid-${ht}-${String(ft)}`)});const ut={root:["root",rt&&"container",ot&&"item",at&&"zeroMinWidth",...ct,nt!=="row"&&`direction-xs-${String(nt)}`,st!=="wrap"&&`wrap-xs-${String(st)}`,...pt]};return composeClasses(ut,getGridUtilityClass,et)},Grid=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiGrid"}),{breakpoints:ot}=useTheme(),it=extendSxProp(nt),{className:st,columns:at,columnSpacing:lt,component:ct="div",container:pt=!1,direction:ut="row",item:ht=!1,rowSpacing:ft,spacing:gt=0,wrap:vt="wrap",zeroMinWidth:yt=!1}=it,mt=_objectWithoutPropertiesLoose(it,_excluded$1Q),Et=ft||gt,bt=lt||gt,Ct=reactExports.useContext(GridContext$1),Tt=pt?at||12:Ct,wt={},Rt=_extends({},mt);ot.keys.forEach(Pt=>{mt[Pt]!=null&&(wt[Pt]=mt[Pt],delete Rt[Pt])});const It=_extends({},it,{columns:Tt,container:pt,direction:ut,item:ht,rowSpacing:Et,columnSpacing:bt,wrap:vt,zeroMinWidth:yt,spacing:gt},wt,{breakpoints:ot.keys}),St=useUtilityClasses$1p(It);return jsx(GridContext$1.Provider,{value:Tt,children:jsx(GridRoot$1,_extends({ownerState:It,className:clsx(St.root,st),as:ct,ref:rt},Rt))})}),Grid$1=Grid,_excluded$1P=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getScale(_e){return`scale(${_e}, ${_e**2})`}const styles$1={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(et,rt){const{addEndListener:nt,appear:ot=!0,children:it,easing:st,in:at,onEnter:lt,onEntered:ct,onEntering:pt,onExit:ut,onExited:ht,onExiting:ft,style:gt,timeout:vt="auto",TransitionComponent:yt=Transition$1}=et,mt=_objectWithoutPropertiesLoose(et,_excluded$1P),Et=reactExports.useRef(),bt=reactExports.useRef(),Ct=useTheme(),Tt=reactExports.useRef(null),wt=useForkRef(Tt,it.ref,rt),Rt=At=>Mt=>{if(At){const Nt=Tt.current;Mt===void 0?At(Nt):At(Nt,Mt)}},It=Rt(pt),St=Rt((At,Mt)=>{reflow(At);const{duration:Nt,delay:$t,easing:Ft}=getTransitionProps({style:gt,timeout:vt,easing:st},{mode:"enter"});let jt;vt==="auto"?(jt=Ct.transitions.getAutoHeightDuration(At.clientHeight),bt.current=jt):jt=Nt,At.style.transition=[Ct.transitions.create("opacity",{duration:jt,delay:$t}),Ct.transitions.create("transform",{duration:isWebKit154?jt:jt*.666,delay:$t,easing:Ft})].join(","),lt&&lt(At,Mt)}),Pt=Rt(ct),Ot=Rt(ft),Ut=Rt(At=>{const{duration:Mt,delay:Nt,easing:$t}=getTransitionProps({style:gt,timeout:vt,easing:st},{mode:"exit"});let Ft;vt==="auto"?(Ft=Ct.transitions.getAutoHeightDuration(At.clientHeight),bt.current=Ft):Ft=Mt,At.style.transition=[Ct.transitions.create("opacity",{duration:Ft,delay:Nt}),Ct.transitions.create("transform",{duration:isWebKit154?Ft:Ft*.666,delay:isWebKit154?Nt:Nt||Ft*.333,easing:$t})].join(","),At.style.opacity=0,At.style.transform=getScale(.75),ut&&ut(At)}),Bt=Rt(ht),xt=At=>{vt==="auto"&&(Et.current=setTimeout(At,bt.current||0)),nt&&nt(Tt.current,At)};return reactExports.useEffect(()=>()=>{clearTimeout(Et.current)},[]),jsx(yt,_extends({appear:ot,in:at,nodeRef:Tt,onEnter:St,onEntered:Pt,onEntering:It,onExit:Ut,onExited:Bt,onExiting:Ot,addEndListener:xt,timeout:vt==="auto"?null:vt},mt,{children:(At,Mt)=>reactExports.cloneElement(it,_extends({style:_extends({opacity:0,transform:getScale(.75),visibility:At==="exited"&&!at?"hidden":void 0},styles$1[At],gt,it.props.style),ref:wt},Mt))}))});Grow.muiSupportAuto=!0;const Grow$1=Grow;function useMediaQueryOld(_e,et,rt,nt,ot){const[it,st]=reactExports.useState(()=>ot&&rt?rt(_e).matches:nt?nt(_e).matches:et);return useEnhancedEffect$1(()=>{let at=!0;if(!rt)return;const lt=rt(_e),ct=()=>{at&&st(lt.matches)};return ct(),lt.addListener(ct),()=>{at=!1,lt.removeListener(ct)}},[_e,rt]),it}const maybeReactUseSyncExternalStore=React$2["useSyncExternalStore"];function useMediaQueryNew(_e,et,rt,nt,ot){const it=reactExports.useCallback(()=>et,[et]),st=reactExports.useMemo(()=>{if(ot&&rt)return()=>rt(_e).matches;if(nt!==null){const{matches:pt}=nt(_e);return()=>pt}return it},[it,_e,nt,ot,rt]),[at,lt]=reactExports.useMemo(()=>{if(rt===null)return[it,()=>()=>{}];const pt=rt(_e);return[()=>pt.matches,ut=>(pt.addListener(ut),()=>{pt.removeListener(ut)})]},[it,rt,_e]);return maybeReactUseSyncExternalStore(lt,at,st)}function useMediaQuery(_e,et={}){const rt=useTheme$2(),nt=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:ot=!1,matchMedia:it=nt?window.matchMedia:null,ssrMatchMedia:st=null,noSsr:at=!1}=getThemeProps({name:"MuiUseMediaQuery",props:et,theme:rt});let lt=typeof _e=="function"?_e(rt):_e;return lt=lt.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(lt,ot,it,st,at)}const _excluded$1O=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$1o=_e=>{const{classes:et,disableUnderline:rt}=_e,ot=composeClasses({root:["root",!rt&&"underline"],input:["input"]},getInputUtilityClass,et);return _extends({},et,ot)},InputRoot=styled$1(InputBaseRoot,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[...rootOverridesResolver(_e,et),!rt.disableUnderline&&et.underline]}})(({theme:_e,ownerState:et})=>{let nt=_e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return _e.vars&&(nt=`rgba(${_e.vars.palette.common.onBackgroundChannel} / ${_e.vars.opacity.inputUnderline})`),_extends({position:"relative"},et.formControl&&{"label + &":{marginTop:16}},!et.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(_e.vars||_e).palette[et.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:_e.transitions.create("transform",{duration:_e.transitions.duration.shorter,easing:_e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(_e.vars||_e).palette.error.main}},"&:before":{borderBottom:`1px solid ${nt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:_e.transitions.create("border-bottom-color",{duration:_e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses$1.disabled}, .${inputClasses$1.error}):before`]:{borderBottom:`2px solid ${(_e.vars||_e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${nt}`}},[`&.${inputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),InputInput=styled$1(InputBaseComponent,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(et,rt){var nt,ot,it,st;const at=useThemeProps({props:et,name:"MuiInput"}),{disableUnderline:lt,components:ct={},componentsProps:pt,fullWidth:ut=!1,inputComponent:ht="input",multiline:ft=!1,slotProps:gt,slots:vt={},type:yt="text"}=at,mt=_objectWithoutPropertiesLoose(at,_excluded$1O),Et=useUtilityClasses$1o(at),Ct={root:{ownerState:{disableUnderline:lt}}},Tt=gt??pt?deepmerge(gt??pt,Ct):Ct,wt=(nt=(ot=vt.root)!=null?ot:ct.Root)!=null?nt:InputRoot,Rt=(it=(st=vt.input)!=null?st:ct.Input)!=null?it:InputInput;return jsx(InputBase$1,_extends({slots:{root:wt,input:Rt},slotProps:Tt,fullWidth:ut,inputComponent:ht,multiline:ft,ref:rt,type:yt},mt,{classes:Et}))});Input.muiName="Input";const Input$1=Input;function getInputAdornmentUtilityClass(_e){return generateUtilityClass("MuiInputAdornment",_e)}const inputAdornmentClasses=generateUtilityClasses("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),inputAdornmentClasses$1=inputAdornmentClasses;var _span$2;const _excluded$1N=["children","className","component","disablePointerEvents","disableTypography","position","variant"],overridesResolver$3=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`position${capitalize(rt.position)}`],rt.disablePointerEvents===!0&&et.disablePointerEvents,et[rt.variant]]},useUtilityClasses$1n=_e=>{const{classes:et,disablePointerEvents:rt,hiddenLabel:nt,position:ot,size:it,variant:st}=_e,at={root:["root",rt&&"disablePointerEvents",ot&&`position${capitalize(ot)}`,st,nt&&"hiddenLabel",it&&`size${capitalize(it)}`]};return composeClasses(at,getInputAdornmentUtilityClass,et)},InputAdornmentRoot=styled$1("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:overridesResolver$3})(({theme:_e,ownerState:et})=>_extends({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(_e.vars||_e).palette.action.active},et.variant==="filled"&&{[`&.${inputAdornmentClasses$1.positionStart}&:not(.${inputAdornmentClasses$1.hiddenLabel})`]:{marginTop:16}},et.position==="start"&&{marginRight:8},et.position==="end"&&{marginLeft:8},et.disablePointerEvents===!0&&{pointerEvents:"none"})),InputAdornment=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiInputAdornment"}),{children:ot,className:it,component:st="div",disablePointerEvents:at=!1,disableTypography:lt=!1,position:ct,variant:pt}=nt,ut=_objectWithoutPropertiesLoose(nt,_excluded$1N),ht=useFormControl()||{};let ft=pt;pt&&ht.variant,ht&&!ft&&(ft=ht.variant);const gt=_extends({},nt,{hiddenLabel:ht.hiddenLabel,size:ht.size,disablePointerEvents:at,position:ct,variant:ft}),vt=useUtilityClasses$1n(gt);return jsx(FormControlContext$1.Provider,{value:null,children:jsx(InputAdornmentRoot,_extends({as:st,ownerState:gt,className:clsx(vt.root,it),ref:rt},ut,{children:typeof ot=="string"&&!lt?jsx(Typography$1,{color:"text.secondary",children:ot}):jsxs(reactExports.Fragment,{children:[ct==="start"?_span$2||(_span$2=jsx("span",{className:"notranslate",children:"​"})):null,ot]})}))})}),InputAdornment$1=InputAdornment;function getInputLabelUtilityClasses(_e){return generateUtilityClass("MuiInputLabel",_e)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const _excluded$1M=["disableAnimation","margin","shrink","variant","className"],useUtilityClasses$1m=_e=>{const{classes:et,formControl:rt,size:nt,shrink:ot,disableAnimation:it,variant:st,required:at}=_e,ct=composeClasses({root:["root",rt&&"formControl",!it&&"animated",ot&&"shrink",nt==="small"&&"sizeSmall",st],asterisk:[at&&"asterisk"]},getInputLabelUtilityClasses,et);return _extends({},et,ct)},InputLabelRoot=styled$1(FormLabel$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`& .${formLabelClasses$1.asterisk}`]:et.asterisk},et.root,rt.formControl&&et.formControl,rt.size==="small"&&et.sizeSmall,rt.shrink&&et.shrink,!rt.disableAnimation&&et.animated,et[rt.variant]]}})(({theme:_e,ownerState:et})=>_extends({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},et.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},et.size==="small"&&{transform:"translate(0, 17px) scale(1)"},et.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!et.disableAnimation&&{transition:_e.transitions.create(["color","transform","max-width"],{duration:_e.transitions.duration.shorter,easing:_e.transitions.easing.easeOut})},et.variant==="filled"&&_extends({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},et.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},et.shrink&&_extends({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},et.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),et.variant==="outlined"&&_extends({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},et.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},et.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),InputLabel=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({name:"MuiInputLabel",props:et}),{disableAnimation:ot=!1,shrink:it,className:st}=nt,at=_objectWithoutPropertiesLoose(nt,_excluded$1M),lt=useFormControl();let ct=it;typeof ct>"u"&&lt&&(ct=lt.filled||lt.focused||lt.adornedStart);const pt=formControlState({props:nt,muiFormControl:lt,states:["size","variant","required"]}),ut=_extends({},nt,{disableAnimation:ot,formControl:lt,shrink:ct,size:pt.size,variant:pt.variant,required:pt.required}),ht=useUtilityClasses$1m(ut);return jsx(InputLabelRoot,_extends({"data-shrink":ct,ownerState:ut,ref:rt,className:clsx(ht.root,st)},at,{classes:ht}))}),InputLabel$1=InputLabel;function getLinkUtilityClass(_e){return generateUtilityClass("MuiLink",_e)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),linkClasses$1=linkClasses,colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=_e=>colorTransformations[_e]||_e,getTextDecoration=({theme:_e,ownerState:et})=>{const rt=transformDeprecatedColors(et.color),nt=getPath(_e,`palette.${rt}`,!1)||et.color,ot=getPath(_e,`palette.${rt}Channel`);return"vars"in _e&&ot?`rgba(${ot} / 0.4)`:alpha$1(nt,.4)},getTextDecoration$1=getTextDecoration,_excluded$1L=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],useUtilityClasses$1l=_e=>{const{classes:et,component:rt,focusVisible:nt,underline:ot}=_e,it={root:["root",`underline${capitalize(ot)}`,rt==="button"&&"button",nt&&"focusVisible"]};return composeClasses(it,getLinkUtilityClass,et)},LinkRoot=styled$1(Typography$1,{name:"MuiLink",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`underline${capitalize(rt.underline)}`],rt.component==="button"&&et.button]}})(({theme:_e,ownerState:et})=>_extends({},et.underline==="none"&&{textDecoration:"none"},et.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},et.underline==="always"&&_extends({textDecoration:"underline"},et.color!=="inherit"&&{textDecorationColor:getTextDecoration$1({theme:_e,ownerState:et})},{"&:hover":{textDecorationColor:"inherit"}}),et.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses$1.focusVisible}`]:{outline:"auto"}})),Link=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiLink"}),{className:ot,color:it="primary",component:st="a",onBlur:at,onFocus:lt,TypographyClasses:ct,underline:pt="always",variant:ut="inherit",sx:ht}=nt,ft=_objectWithoutPropertiesLoose(nt,_excluded$1L),{isFocusVisibleRef:gt,onBlur:vt,onFocus:yt,ref:mt}=useIsFocusVisible(),[Et,bt]=reactExports.useState(!1),Ct=useForkRef(rt,mt),Tt=St=>{vt(St),gt.current===!1&&bt(!1),at&&at(St)},wt=St=>{yt(St),gt.current===!0&&bt(!0),lt&&lt(St)},Rt=_extends({},nt,{color:it,component:st,focusVisible:Et,underline:pt,variant:ut}),It=useUtilityClasses$1l(Rt);return jsx(LinkRoot,_extends({color:it,className:clsx(It.root,ot),classes:ct,component:st,onBlur:Tt,onFocus:wt,ref:Ct,ownerState:Rt,variant:ut,sx:[...Object.keys(colorTransformations).includes(it)?[]:[{color:it}],...Array.isArray(ht)?ht:[ht]]},ft))}),Link$1=Link,ListContext=reactExports.createContext({}),ListContext$1=ListContext;function getListUtilityClass(_e){return generateUtilityClass("MuiList",_e)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const _excluded$1K=["children","className","component","dense","disablePadding","subheader"],useUtilityClasses$1k=_e=>{const{classes:et,disablePadding:rt,dense:nt,subheader:ot}=_e;return composeClasses({root:["root",!rt&&"padding",nt&&"dense",ot&&"subheader"]},getListUtilityClass,et)},ListRoot=styled$1("ul",{name:"MuiList",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,!rt.disablePadding&&et.padding,rt.dense&&et.dense,rt.subheader&&et.subheader]}})(({ownerState:_e})=>_extends({listStyle:"none",margin:0,padding:0,position:"relative"},!_e.disablePadding&&{paddingTop:8,paddingBottom:8},_e.subheader&&{paddingTop:0})),List=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiList"}),{children:ot,className:it,component:st="ul",dense:at=!1,disablePadding:lt=!1,subheader:ct}=nt,pt=_objectWithoutPropertiesLoose(nt,_excluded$1K),ut=reactExports.useMemo(()=>({dense:at}),[at]),ht=_extends({},nt,{component:st,dense:at,disablePadding:lt}),ft=useUtilityClasses$1k(ht);return jsx(ListContext$1.Provider,{value:ut,children:jsxs(ListRoot,_extends({as:st,className:clsx(ft.root,it),ref:rt,ownerState:ht},pt,{children:[ct,ot]}))})}),List$1=List;function getListItemUtilityClass(_e){return generateUtilityClass("MuiListItem",_e)}const listItemClasses=generateUtilityClasses("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),listItemClasses$1=listItemClasses,listItemButtonClasses=generateUtilityClasses("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),listItemButtonClasses$1=listItemButtonClasses;function getListItemSecondaryActionClassesUtilityClass(_e){return generateUtilityClass("MuiListItemSecondaryAction",_e)}generateUtilityClasses("MuiListItemSecondaryAction",["root","disableGutters"]);const _excluded$1J=["className"],useUtilityClasses$1j=_e=>{const{disableGutters:et,classes:rt}=_e;return composeClasses({root:["root",et&&"disableGutters"]},getListItemSecondaryActionClassesUtilityClass,rt)},ListItemSecondaryActionRoot=styled$1("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.disableGutters&&et.disableGutters]}})(({ownerState:_e})=>_extends({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},_e.disableGutters&&{right:0})),ListItemSecondaryAction=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiListItemSecondaryAction"}),{className:ot}=nt,it=_objectWithoutPropertiesLoose(nt,_excluded$1J),st=reactExports.useContext(ListContext$1),at=_extends({},nt,{disableGutters:st.disableGutters}),lt=useUtilityClasses$1j(at);return jsx(ListItemSecondaryActionRoot,_extends({className:clsx(lt.root,ot),ownerState:at,ref:rt},it))});ListItemSecondaryAction.muiName="ListItemSecondaryAction";const ListItemSecondaryAction$1=ListItemSecondaryAction,_excluded$1I=["className"],_excluded2$8=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],overridesResolver$2=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.dense&&et.dense,rt.alignItems==="flex-start"&&et.alignItemsFlexStart,rt.divider&&et.divider,!rt.disableGutters&&et.gutters,!rt.disablePadding&&et.padding,rt.button&&et.button,rt.hasSecondaryAction&&et.secondaryAction]},useUtilityClasses$1i=_e=>{const{alignItems:et,button:rt,classes:nt,dense:ot,disabled:it,disableGutters:st,disablePadding:at,divider:lt,hasSecondaryAction:ct,selected:pt}=_e;return composeClasses({root:["root",ot&&"dense",!st&&"gutters",!at&&"padding",lt&&"divider",it&&"disabled",rt&&"button",et==="flex-start"&&"alignItemsFlexStart",ct&&"secondaryAction",pt&&"selected"],container:["container"]},getListItemUtilityClass,nt)},ListItemRoot=styled$1("div",{name:"MuiListItem",slot:"Root",overridesResolver:overridesResolver$2})(({theme:_e,ownerState:et})=>_extends({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!et.disablePadding&&_extends({paddingTop:8,paddingBottom:8},et.dense&&{paddingTop:4,paddingBottom:4},!et.disableGutters&&{paddingLeft:16,paddingRight:16},!!et.secondaryAction&&{paddingRight:48}),!!et.secondaryAction&&{[`& > .${listItemButtonClasses$1.root}`]:{paddingRight:48}},{[`&.${listItemClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette.action.focus},[`&.${listItemClasses$1.selected}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.selectedOpacity})`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity),[`&.${listItemClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.focusOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.focusOpacity)}},[`&.${listItemClasses$1.disabled}`]:{opacity:(_e.vars||_e).palette.action.disabledOpacity}},et.alignItems==="flex-start"&&{alignItems:"flex-start"},et.divider&&{borderBottom:`1px solid ${(_e.vars||_e).palette.divider}`,backgroundClip:"padding-box"},et.button&&{transition:_e.transitions.create("background-color",{duration:_e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(_e.vars||_e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${listItemClasses$1.selected}:hover`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.hoverOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.selectedOpacity})`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity)}}},et.hasSecondaryAction&&{paddingRight:48})),ListItemContainer=styled$1("li",{name:"MuiListItem",slot:"Container",overridesResolver:(_e,et)=>et.container})({position:"relative"}),ListItem=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiListItem"}),{alignItems:ot="center",autoFocus:it=!1,button:st=!1,children:at,className:lt,component:ct,components:pt={},componentsProps:ut={},ContainerComponent:ht="li",ContainerProps:{className:ft}={},dense:gt=!1,disabled:vt=!1,disableGutters:yt=!1,disablePadding:mt=!1,divider:Et=!1,focusVisibleClassName:bt,secondaryAction:Ct,selected:Tt=!1,slotProps:wt={},slots:Rt={}}=nt,It=_objectWithoutPropertiesLoose(nt.ContainerProps,_excluded$1I),St=_objectWithoutPropertiesLoose(nt,_excluded2$8),Pt=reactExports.useContext(ListContext$1),Ot=reactExports.useMemo(()=>({dense:gt||Pt.dense||!1,alignItems:ot,disableGutters:yt}),[ot,Pt.dense,gt,yt]),Ut=reactExports.useRef(null);useEnhancedEffect$1(()=>{it&&Ut.current&&Ut.current.focus()},[it]);const Bt=reactExports.Children.toArray(at),xt=Bt.length&&isMuiElement(Bt[Bt.length-1],["ListItemSecondaryAction"]),At=_extends({},nt,{alignItems:ot,autoFocus:it,button:st,dense:Ot.dense,disabled:vt,disableGutters:yt,disablePadding:mt,divider:Et,hasSecondaryAction:xt,selected:Tt}),Mt=useUtilityClasses$1i(At),Nt=useForkRef(Ut,rt),$t=Rt.root||pt.Root||ListItemRoot,Ft=wt.root||ut.root||{},jt=_extends({className:clsx(Mt.root,Ft.className,lt),disabled:vt},St);let zt=ct||"li";return st&&(jt.component=ct||"div",jt.focusVisibleClassName=clsx(listItemClasses$1.focusVisible,bt),zt=ButtonBase$1),xt?(zt=!jt.component&&!ct?"div":zt,ht==="li"&&(zt==="li"?zt="div":jt.component==="li"&&(jt.component="div")),jsx(ListContext$1.Provider,{value:Ot,children:jsxs(ListItemContainer,_extends({as:ht,className:clsx(Mt.container,ft),ref:Nt,ownerState:At},It,{children:[jsx($t,_extends({},Ft,!isHostComponent($t)&&{as:zt,ownerState:_extends({},At,Ft.ownerState)},jt,{children:Bt})),Bt.pop()]}))})):jsx(ListContext$1.Provider,{value:Ot,children:jsxs($t,_extends({},Ft,{as:zt,ref:Nt},!isHostComponent($t)&&{ownerState:_extends({},At,Ft.ownerState)},jt,{children:[Bt,Ct&&jsx(ListItemSecondaryAction$1,{children:Ct})]}))})}),ListItem$1=ListItem;function getListItemIconUtilityClass(_e){return generateUtilityClass("MuiListItemIcon",_e)}const listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemIconClasses$1=listItemIconClasses,_excluded$1H=["className"],useUtilityClasses$1h=_e=>{const{alignItems:et,classes:rt}=_e;return composeClasses({root:["root",et==="flex-start"&&"alignItemsFlexStart"]},getListItemIconUtilityClass,rt)},ListItemIconRoot=styled$1("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.alignItems==="flex-start"&&et.alignItemsFlexStart]}})(({theme:_e,ownerState:et})=>_extends({minWidth:56,color:(_e.vars||_e).palette.action.active,flexShrink:0,display:"inline-flex"},et.alignItems==="flex-start"&&{marginTop:8})),ListItemIcon=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiListItemIcon"}),{className:ot}=nt,it=_objectWithoutPropertiesLoose(nt,_excluded$1H),st=reactExports.useContext(ListContext$1),at=_extends({},nt,{alignItems:st.alignItems}),lt=useUtilityClasses$1h(at);return jsx(ListItemIconRoot,_extends({className:clsx(lt.root,ot),ownerState:at,ref:rt},it))}),ListItemIcon$1=ListItemIcon,listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),listItemTextClasses$1=listItemTextClasses,_excluded$1G=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nextItem$1(_e,et,rt){return _e===et?_e.firstChild:et&&et.nextElementSibling?et.nextElementSibling:rt?null:_e.firstChild}function previousItem$1(_e,et,rt){return _e===et?rt?_e.firstChild:_e.lastChild:et&&et.previousElementSibling?et.previousElementSibling:rt?null:_e.lastChild}function textCriteriaMatches(_e,et){if(et===void 0)return!0;let rt=_e.innerText;return rt===void 0&&(rt=_e.textContent),rt=rt.trim().toLowerCase(),rt.length===0?!1:et.repeating?rt[0]===et.keys[0]:rt.indexOf(et.keys.join(""))===0}function moveFocus$1(_e,et,rt,nt,ot,it){let st=!1,at=ot(_e,et,et?rt:!1);for(;at;){if(at===_e.firstChild){if(st)return!1;st=!0}const lt=nt?!1:at.disabled||at.getAttribute("aria-disabled")==="true";if(!at.hasAttribute("tabindex")||!textCriteriaMatches(at,it)||lt)at=ot(_e,at,rt);else return at.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(et,rt){const{actions:nt,autoFocus:ot=!1,autoFocusItem:it=!1,children:st,className:at,disabledItemsFocusable:lt=!1,disableListWrap:ct=!1,onKeyDown:pt,variant:ut="selectedMenu"}=et,ht=_objectWithoutPropertiesLoose(et,_excluded$1G),ft=reactExports.useRef(null),gt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect$1(()=>{ot&&ft.current.focus()},[ot]),reactExports.useImperativeHandle(nt,()=>({adjustStyleForScrollbar:(bt,Ct)=>{const Tt=!ft.current.style.width;if(bt.clientHeight<ft.current.clientHeight&&Tt){const wt=`${getScrollbarSize(ownerDocument(bt))}px`;ft.current.style[Ct.direction==="rtl"?"paddingLeft":"paddingRight"]=wt,ft.current.style.width=`calc(100% + ${wt})`}return ft.current}}),[]);const vt=bt=>{const Ct=ft.current,Tt=bt.key,wt=ownerDocument(Ct).activeElement;if(Tt==="ArrowDown")bt.preventDefault(),moveFocus$1(Ct,wt,ct,lt,nextItem$1);else if(Tt==="ArrowUp")bt.preventDefault(),moveFocus$1(Ct,wt,ct,lt,previousItem$1);else if(Tt==="Home")bt.preventDefault(),moveFocus$1(Ct,null,ct,lt,nextItem$1);else if(Tt==="End")bt.preventDefault(),moveFocus$1(Ct,null,ct,lt,previousItem$1);else if(Tt.length===1){const Rt=gt.current,It=Tt.toLowerCase(),St=performance.now();Rt.keys.length>0&&(St-Rt.lastTime>500?(Rt.keys=[],Rt.repeating=!0,Rt.previousKeyMatched=!0):Rt.repeating&&It!==Rt.keys[0]&&(Rt.repeating=!1)),Rt.lastTime=St,Rt.keys.push(It);const Pt=wt&&!Rt.repeating&&textCriteriaMatches(wt,Rt);Rt.previousKeyMatched&&(Pt||moveFocus$1(Ct,wt,!1,lt,nextItem$1,Rt))?bt.preventDefault():Rt.previousKeyMatched=!1}pt&&pt(bt)},yt=useForkRef(ft,rt);let mt=-1;reactExports.Children.forEach(st,(bt,Ct)=>{reactExports.isValidElement(bt)&&(bt.props.disabled||(ut==="selectedMenu"&&bt.props.selected||mt===-1)&&(mt=Ct))});const Et=reactExports.Children.map(st,(bt,Ct)=>{if(Ct===mt){const Tt={};return it&&(Tt.autoFocus=!0),bt.props.tabIndex===void 0&&ut==="selectedMenu"&&(Tt.tabIndex=0),reactExports.cloneElement(bt,Tt)}return bt});return jsx(List$1,_extends({role:"menu",ref:yt,className:at,onKeyDown:vt,tabIndex:ot?0:-1},ht,{children:Et}))}),MenuList$1=MenuList;function getPopoverUtilityClass(_e){return generateUtilityClass("MuiPopover",_e)}generateUtilityClasses("MuiPopover",["root","paper"]);const _excluded$1F=["onEntering"],_excluded2$7=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function getOffsetTop(_e,et){let rt=0;return typeof et=="number"?rt=et:et==="center"?rt=_e.height/2:et==="bottom"&&(rt=_e.height),rt}function getOffsetLeft(_e,et){let rt=0;return typeof et=="number"?rt=et:et==="center"?rt=_e.width/2:et==="right"&&(rt=_e.width),rt}function getTransformOriginValue(_e){return[_e.horizontal,_e.vertical].map(et=>typeof et=="number"?`${et}px`:et).join(" ")}function resolveAnchorEl(_e){return typeof _e=="function"?_e():_e}const useUtilityClasses$1g=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,et)},PopoverRoot=styled$1(Modal$1,{name:"MuiPopover",slot:"Root",overridesResolver:(_e,et)=>et.root})({}),PopoverPaper=styled$1(Paper$1,{name:"MuiPopover",slot:"Paper",overridesResolver:(_e,et)=>et.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiPopover"}),{action:ot,anchorEl:it,anchorOrigin:st={vertical:"top",horizontal:"left"},anchorPosition:at,anchorReference:lt="anchorEl",children:ct,className:pt,container:ut,elevation:ht=8,marginThreshold:ft=16,open:gt,PaperProps:vt={},transformOrigin:yt={vertical:"top",horizontal:"left"},TransitionComponent:mt=Grow$1,transitionDuration:Et="auto",TransitionProps:{onEntering:bt}={}}=nt,Ct=_objectWithoutPropertiesLoose(nt.TransitionProps,_excluded$1F),Tt=_objectWithoutPropertiesLoose(nt,_excluded2$7),wt=reactExports.useRef(),Rt=useForkRef(wt,vt.ref),It=_extends({},nt,{anchorOrigin:st,anchorReference:lt,elevation:ht,marginThreshold:ft,PaperProps:vt,transformOrigin:yt,TransitionComponent:mt,transitionDuration:Et,TransitionProps:Ct}),St=useUtilityClasses$1g(It),Pt=reactExports.useCallback(()=>{if(lt==="anchorPosition")return at;const jt=resolveAnchorEl(it),Yt=(jt&&jt.nodeType===1?jt:ownerDocument(wt.current).body).getBoundingClientRect();return{top:Yt.top+getOffsetTop(Yt,st.vertical),left:Yt.left+getOffsetLeft(Yt,st.horizontal)}},[it,st.horizontal,st.vertical,at,lt]),Ot=reactExports.useCallback(jt=>({vertical:getOffsetTop(jt,yt.vertical),horizontal:getOffsetLeft(jt,yt.horizontal)}),[yt.horizontal,yt.vertical]),Ut=reactExports.useCallback(jt=>{const zt={width:jt.offsetWidth,height:jt.offsetHeight},Yt=Ot(zt);if(lt==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Yt)};const Kt=Pt();let er=Kt.top-Yt.vertical,ir=Kt.left-Yt.horizontal;const rr=er+zt.height,lr=ir+zt.width,nr=ownerWindow(resolveAnchorEl(it)),hr=nr.innerHeight-ft,vr=nr.innerWidth-ft;if(er<ft){const yr=er-ft;er-=yr,Yt.vertical+=yr}else if(rr>hr){const yr=rr-hr;er-=yr,Yt.vertical+=yr}if(ir<ft){const yr=ir-ft;ir-=yr,Yt.horizontal+=yr}else if(lr>vr){const yr=lr-vr;ir-=yr,Yt.horizontal+=yr}return{top:`${Math.round(er)}px`,left:`${Math.round(ir)}px`,transformOrigin:getTransformOriginValue(Yt)}},[it,lt,Pt,Ot,ft]),[Bt,xt]=reactExports.useState(gt),At=reactExports.useCallback(()=>{const jt=wt.current;if(!jt)return;const zt=Ut(jt);zt.top!==null&&(jt.style.top=zt.top),zt.left!==null&&(jt.style.left=zt.left),jt.style.transformOrigin=zt.transformOrigin,xt(!0)},[Ut]),Mt=(jt,zt)=>{bt&&bt(jt,zt),At()},Nt=()=>{xt(!1)};reactExports.useEffect(()=>{gt&&At()}),reactExports.useImperativeHandle(ot,()=>gt?{updatePosition:()=>{At()}}:null,[gt,At]),reactExports.useEffect(()=>{if(!gt)return;const jt=debounce$2(()=>{At()}),zt=ownerWindow(it);return zt.addEventListener("resize",jt),()=>{jt.clear(),zt.removeEventListener("resize",jt)}},[it,gt,At]);let $t=Et;Et==="auto"&&!mt.muiSupportAuto&&($t=void 0);const Ft=ut||(it?ownerDocument(resolveAnchorEl(it)).body:void 0);return jsx(PopoverRoot,_extends({BackdropProps:{invisible:!0},className:clsx(St.root,pt),container:Ft,open:gt,ref:rt,ownerState:It},Tt,{children:jsx(mt,_extends({appear:!0,in:gt,onEntering:Mt,onExited:Nt,timeout:$t},Ct,{children:jsx(PopoverPaper,_extends({elevation:ht},vt,{ref:Rt,className:clsx(St.paper,vt.className)},Bt?void 0:{style:_extends({},vt.style,{opacity:0})},{ownerState:It,children:ct}))}))}))}),Popover$1=Popover;function getMenuUtilityClass(_e){return generateUtilityClass("MuiMenu",_e)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const _excluded$1E=["onEntering"],_excluded2$6=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$1f=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,et)},MenuRoot=styled$1(Popover$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(_e,et)=>et.root})({}),MenuPaper=styled$1(Paper$1,{name:"MuiMenu",slot:"Paper",overridesResolver:(_e,et)=>et.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled$1(MenuList$1,{name:"MuiMenu",slot:"List",overridesResolver:(_e,et)=>et.list})({outline:0}),Menu$1=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiMenu"}),{autoFocus:ot=!0,children:it,disableAutoFocusItem:st=!1,MenuListProps:at={},onClose:lt,open:ct,PaperProps:pt={},PopoverClasses:ut,transitionDuration:ht="auto",TransitionProps:{onEntering:ft}={},variant:gt="selectedMenu"}=nt,vt=_objectWithoutPropertiesLoose(nt.TransitionProps,_excluded$1E),yt=_objectWithoutPropertiesLoose(nt,_excluded2$6),mt=useTheme(),Et=mt.direction==="rtl",bt=_extends({},nt,{autoFocus:ot,disableAutoFocusItem:st,MenuListProps:at,onEntering:ft,PaperProps:pt,transitionDuration:ht,TransitionProps:vt,variant:gt}),Ct=useUtilityClasses$1f(bt),Tt=ot&&!st&&ct,wt=reactExports.useRef(null),Rt=(Pt,Ot)=>{wt.current&&wt.current.adjustStyleForScrollbar(Pt,mt),ft&&ft(Pt,Ot)},It=Pt=>{Pt.key==="Tab"&&(Pt.preventDefault(),lt&&lt(Pt,"tabKeyDown"))};let St=-1;return reactExports.Children.map(it,(Pt,Ot)=>{reactExports.isValidElement(Pt)&&(Pt.props.disabled||(gt==="selectedMenu"&&Pt.props.selected||St===-1)&&(St=Ot))}),jsx(MenuRoot,_extends({onClose:lt,anchorOrigin:{vertical:"bottom",horizontal:Et?"right":"left"},transformOrigin:Et?RTL_ORIGIN:LTR_ORIGIN,PaperProps:_extends({component:MenuPaper},pt,{classes:_extends({},pt.classes,{root:Ct.paper})}),className:Ct.root,open:ct,ref:rt,transitionDuration:ht,TransitionProps:_extends({onEntering:Rt},vt),ownerState:bt},yt,{classes:ut,children:jsx(MenuMenuList,_extends({onKeyDown:It,actions:wt,autoFocus:ot&&(St===-1||st),autoFocusItem:Tt,variant:gt},at,{className:clsx(Ct.list,at.className),children:it}))}))}),Menu$2=Menu$1;function getMenuItemUtilityClass(_e){return generateUtilityClass("MuiMenuItem",_e)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),menuItemClasses$1=menuItemClasses,_excluded$1D=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],overridesResolver$1=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.dense&&et.dense,rt.divider&&et.divider,!rt.disableGutters&&et.gutters]},useUtilityClasses$1e=_e=>{const{disabled:et,dense:rt,divider:nt,disableGutters:ot,selected:it,classes:st}=_e,lt=composeClasses({root:["root",rt&&"dense",et&&"disabled",!ot&&"gutters",nt&&"divider",it&&"selected"]},getMenuItemUtilityClass,st);return _extends({},st,lt)},MenuItemRoot=styled$1(ButtonBase$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:overridesResolver$1})(({theme:_e,ownerState:et})=>_extends({},_e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!et.disableGutters&&{paddingLeft:16,paddingRight:16},et.divider&&{borderBottom:`1px solid ${(_e.vars||_e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(_e.vars||_e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses$1.selected}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.selectedOpacity})`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity),[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.focusOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.focusOpacity)}},[`&.${menuItemClasses$1.selected}:hover`]:{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / calc(${_e.vars.palette.action.selectedOpacity} + ${_e.vars.palette.action.hoverOpacity}))`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:_e.vars?`rgba(${_e.vars.palette.primary.mainChannel} / ${_e.vars.palette.action.selectedOpacity})`:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity)}},[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:(_e.vars||_e).palette.action.focus},[`&.${menuItemClasses$1.disabled}`]:{opacity:(_e.vars||_e).palette.action.disabledOpacity},[`& + .${dividerClasses$1.root}`]:{marginTop:_e.spacing(1),marginBottom:_e.spacing(1)},[`& + .${dividerClasses$1.inset}`]:{marginLeft:52},[`& .${listItemTextClasses$1.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses$1.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses$1.root}`]:{minWidth:36}},!et.dense&&{[_e.breakpoints.up("sm")]:{minHeight:"auto"}},et.dense&&_extends({minHeight:32,paddingTop:4,paddingBottom:4},_e.typography.body2,{[`& .${listItemIconClasses$1.root} svg`]:{fontSize:"1.25rem"}}))),MenuItem=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiMenuItem"}),{autoFocus:ot=!1,component:it="li",dense:st=!1,divider:at=!1,disableGutters:lt=!1,focusVisibleClassName:ct,role:pt="menuitem",tabIndex:ut,className:ht}=nt,ft=_objectWithoutPropertiesLoose(nt,_excluded$1D),gt=reactExports.useContext(ListContext$1),vt=reactExports.useMemo(()=>({dense:st||gt.dense||!1,disableGutters:lt}),[gt.dense,st,lt]),yt=reactExports.useRef(null);useEnhancedEffect$1(()=>{ot&&yt.current&&yt.current.focus()},[ot]);const mt=_extends({},nt,{dense:vt.dense,divider:at,disableGutters:lt}),Et=useUtilityClasses$1e(nt),bt=useForkRef(yt,rt);let Ct;return nt.disabled||(Ct=ut!==void 0?ut:-1),jsx(ListContext$1.Provider,{value:vt,children:jsx(MenuItemRoot,_extends({ref:bt,role:pt,tabIndex:Ct,component:it,focusVisibleClassName:clsx(Et.focusVisible,ct),className:clsx(Et.root,ht)},ft,{ownerState:mt,classes:Et}))})}),MenuItem$1=MenuItem;function getNativeSelectUtilityClasses(_e){return generateUtilityClass("MuiNativeSelect",_e)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),nativeSelectClasses$1=nativeSelectClasses,_excluded$1C=["className","disabled","IconComponent","inputRef","variant"],useUtilityClasses$1d=_e=>{const{classes:et,variant:rt,disabled:nt,multiple:ot,open:it}=_e,st={select:["select",rt,nt&&"disabled",ot&&"multiple"],icon:["icon",`icon${capitalize(rt)}`,it&&"iconOpen",nt&&"disabled"]};return composeClasses(st,getNativeSelectUtilityClasses,et)},nativeSelectSelectStyles=({ownerState:_e,theme:et})=>_extends({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_extends({},et.vars?{backgroundColor:`rgba(${et.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:et.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${nativeSelectClasses$1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(et.vars||et).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},_e.variant==="filled"&&{"&&&":{paddingRight:32}},_e.variant==="outlined"&&{borderRadius:(et.vars||et).shape.borderRadius,"&:focus":{borderRadius:(et.vars||et).shape.borderRadius},"&&&":{paddingRight:32}}),NativeSelectSelect=styled$1("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.select,et[rt.variant],{[`&.${nativeSelectClasses$1.multiple}`]:et.multiple}]}})(nativeSelectSelectStyles),nativeSelectIconStyles=({ownerState:_e,theme:et})=>_extends({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(et.vars||et).palette.action.active,[`&.${nativeSelectClasses$1.disabled}`]:{color:(et.vars||et).palette.action.disabled}},_e.open&&{transform:"rotate(180deg)"},_e.variant==="filled"&&{right:7},_e.variant==="outlined"&&{right:7}),NativeSelectIcon=styled$1("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.icon,rt.variant&&et[`icon${capitalize(rt.variant)}`],rt.open&&et.iconOpen]}})(nativeSelectIconStyles),NativeSelectInput=reactExports.forwardRef(function(et,rt){const{className:nt,disabled:ot,IconComponent:it,inputRef:st,variant:at="standard"}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$1C),ct=_extends({},et,{disabled:ot,variant:at}),pt=useUtilityClasses$1d(ct);return jsxs(reactExports.Fragment,{children:[jsx(NativeSelectSelect,_extends({ownerState:ct,className:clsx(pt.select,nt),disabled:ot,ref:st||rt},lt)),et.multiple?null:jsx(NativeSelectIcon,{as:it,ownerState:ct,className:pt.icon})]})}),NativeSelectInput$1=NativeSelectInput;var _span$1;const _excluded$1B=["children","classes","className","label","notched"],NotchedOutlineRoot$1=styled$1("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled$1("legend")(({ownerState:_e,theme:et})=>_extends({float:"unset",width:"auto",overflow:"hidden"},!_e.withLabel&&{padding:0,lineHeight:"11px",transition:et.transitions.create("width",{duration:150,easing:et.transitions.easing.easeOut})},_e.withLabel&&_extends({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:et.transitions.create("max-width",{duration:50,easing:et.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},_e.notched&&{maxWidth:"100%",transition:et.transitions.create("max-width",{duration:100,easing:et.transitions.easing.easeOut,delay:50})})));function NotchedOutline(_e){const{className:et,label:rt,notched:nt}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded$1B),it=rt!=null&&rt!=="",st=_extends({},_e,{notched:nt,withLabel:it});return jsx(NotchedOutlineRoot$1,_extends({"aria-hidden":!0,className:et,ownerState:st},ot,{children:jsx(NotchedOutlineLegend,{ownerState:st,children:it?jsx("span",{children:rt}):_span$1||(_span$1=jsx("span",{className:"notranslate",children:"​"}))})}))}const _excluded$1A=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],useUtilityClasses$1c=_e=>{const{classes:et}=_e,nt=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,et);return _extends({},et,nt)},OutlinedInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:_e,ownerState:et})=>{const rt=_e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _extends({position:"relative",borderRadius:(_e.vars||_e).shape.borderRadius,[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(_e.vars||_e).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:_e.vars?`rgba(${_e.vars.palette.common.onBackgroundChannel} / 0.23)`:rt}},[`&.${outlinedInputClasses$1.focused} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(_e.vars||_e).palette[et.color].main,borderWidth:2},[`&.${outlinedInputClasses$1.error} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(_e.vars||_e).palette.error.main},[`&.${outlinedInputClasses$1.disabled} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(_e.vars||_e).palette.action.disabled}},et.startAdornment&&{paddingLeft:14},et.endAdornment&&{paddingRight:14},et.multiline&&_extends({padding:"16.5px 14px"},et.size==="small"&&{padding:"8.5px 14px"}))}),NotchedOutlineRoot=styled$1(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(_e,et)=>et.notchedOutline})(({theme:_e})=>{const et=_e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:_e.vars?`rgba(${_e.vars.palette.common.onBackgroundChannel} / 0.23)`:et}}),OutlinedInputInput=styled$1(InputBaseComponent,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:_e,ownerState:et})=>_extends({padding:"16.5px 14px"},!_e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:_e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:_e.palette.mode==="light"?null:"#fff",caretColor:_e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},_e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[_e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},et.size==="small"&&{padding:"8.5px 14px"},et.multiline&&{padding:0},et.startAdornment&&{paddingLeft:0},et.endAdornment&&{paddingRight:0})),OutlinedInput=reactExports.forwardRef(function(et,rt){var nt,ot,it,st,at;const lt=useThemeProps({props:et,name:"MuiOutlinedInput"}),{components:ct={},fullWidth:pt=!1,inputComponent:ut="input",label:ht,multiline:ft=!1,notched:gt,slots:vt={},type:yt="text"}=lt,mt=_objectWithoutPropertiesLoose(lt,_excluded$1A),Et=useUtilityClasses$1c(lt),bt=useFormControl(),Ct=formControlState({props:lt,muiFormControl:bt,states:["required"]}),Tt=_extends({},lt,{color:Ct.color||"primary",disabled:Ct.disabled,error:Ct.error,focused:Ct.focused,formControl:bt,fullWidth:pt,hiddenLabel:Ct.hiddenLabel,multiline:ft,size:Ct.size,type:yt}),wt=(nt=(ot=vt.root)!=null?ot:ct.Root)!=null?nt:OutlinedInputRoot,Rt=(it=(st=vt.input)!=null?st:ct.Input)!=null?it:OutlinedInputInput;return jsx(InputBase$1,_extends({slots:{root:wt,input:Rt},renderSuffix:It=>jsx(NotchedOutlineRoot,{ownerState:Tt,className:Et.notchedOutline,label:ht!=null&&ht!==""&&Ct.required?at||(at=jsxs(reactExports.Fragment,{children:[ht," ","*"]})):ht,notched:typeof gt<"u"?gt:Boolean(It.startAdornment||It.filled||It.focused)}),fullWidth:pt,inputComponent:ut,multiline:ft,ref:rt,type:yt},mt,{classes:_extends({},Et,{notchedOutline:null})}))});OutlinedInput.muiName="Input";const OutlinedInput$1=OutlinedInput,FirstPageIcon=createSvgIcon$1(jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),LastPageIcon=createSvgIcon$1(jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),RadioButtonUncheckedIcon=createSvgIcon$1(jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),RadioButtonCheckedIcon=createSvgIcon$1(jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),RadioButtonIconRoot=styled$1("span")({position:"relative",display:"flex"}),RadioButtonIconBackground=styled$1(RadioButtonUncheckedIcon)({transform:"scale(1)"}),RadioButtonIconDot=styled$1(RadioButtonCheckedIcon)(({theme:_e,ownerState:et})=>_extends({left:0,position:"absolute",transform:"scale(0)",transition:_e.transitions.create("transform",{easing:_e.transitions.easing.easeIn,duration:_e.transitions.duration.shortest})},et.checked&&{transform:"scale(1)",transition:_e.transitions.create("transform",{easing:_e.transitions.easing.easeOut,duration:_e.transitions.duration.shortest})}));function RadioButtonIcon(_e){const{checked:et=!1,classes:rt={},fontSize:nt}=_e,ot=_extends({},_e,{checked:et});return jsxs(RadioButtonIconRoot,{className:rt.root,ownerState:ot,children:[jsx(RadioButtonIconBackground,{fontSize:nt,className:rt.background,ownerState:ot}),jsx(RadioButtonIconDot,{fontSize:nt,className:rt.dot,ownerState:ot})]})}const RadioGroupContext=reactExports.createContext(void 0),RadioGroupContext$1=RadioGroupContext;function useRadioGroup(){return reactExports.useContext(RadioGroupContext$1)}function getRadioUtilityClass(_e){return generateUtilityClass("MuiRadio",_e)}const radioClasses=generateUtilityClasses("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),radioClasses$1=radioClasses,_excluded$1z=["checked","checkedIcon","color","icon","name","onChange","size","className"],useUtilityClasses$1b=_e=>{const{classes:et,color:rt}=_e,nt={root:["root",`color${capitalize(rt)}`]};return _extends({},et,composeClasses(nt,getRadioUtilityClass,et))},RadioRoot=styled$1(SwitchBase$1,{shouldForwardProp:_e=>rootShouldForwardProp(_e)||_e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`color${capitalize(rt.color)}`]]}})(({theme:_e,ownerState:et})=>_extends({color:(_e.vars||_e).palette.text.secondary},!et.disableRipple&&{"&:hover":{backgroundColor:_e.vars?`rgba(${et.color==="default"?_e.vars.palette.action.activeChannel:_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(et.color==="default"?_e.palette.action.active:_e.palette[et.color].main,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},et.color!=="default"&&{[`&.${radioClasses$1.checked}`]:{color:(_e.vars||_e).palette[et.color].main}},{[`&.${radioClasses$1.disabled}`]:{color:(_e.vars||_e).palette.action.disabled}}));function areEqualValues$1(_e,et){return typeof et=="object"&&et!==null?_e===et:String(_e)===String(et)}const defaultCheckedIcon=jsx(RadioButtonIcon,{checked:!0}),defaultIcon=jsx(RadioButtonIcon,{}),Radio=reactExports.forwardRef(function(et,rt){var nt,ot;const it=useThemeProps({props:et,name:"MuiRadio"}),{checked:st,checkedIcon:at=defaultCheckedIcon,color:lt="primary",icon:ct=defaultIcon,name:pt,onChange:ut,size:ht="medium",className:ft}=it,gt=_objectWithoutPropertiesLoose(it,_excluded$1z),vt=_extends({},it,{color:lt,size:ht}),yt=useUtilityClasses$1b(vt),mt=useRadioGroup();let Et=st;const bt=createChainedFunction(ut,mt&&mt.onChange);let Ct=pt;return mt&&(typeof Et>"u"&&(Et=areEqualValues$1(mt.value,it.value)),typeof Ct>"u"&&(Ct=mt.name)),jsx(RadioRoot,_extends({type:"radio",icon:reactExports.cloneElement(ct,{fontSize:(nt=defaultIcon.props.fontSize)!=null?nt:ht}),checkedIcon:reactExports.cloneElement(at,{fontSize:(ot=defaultCheckedIcon.props.fontSize)!=null?ot:ht}),ownerState:vt,classes:yt,name:Ct,checked:Et,onChange:bt,ref:rt,className:clsx(yt.root,ft)},gt))}),Radio$1=Radio,_excluded$1y=["actions","children","defaultValue","name","onChange","value"],RadioGroup=reactExports.forwardRef(function(et,rt){const{actions:nt,children:ot,defaultValue:it,name:st,onChange:at,value:lt}=et,ct=_objectWithoutPropertiesLoose(et,_excluded$1y),pt=reactExports.useRef(null),[ut,ht]=useControlled({controlled:lt,default:it,name:"RadioGroup"});reactExports.useImperativeHandle(nt,()=>({focus:()=>{let yt=pt.current.querySelector("input:not(:disabled):checked");yt||(yt=pt.current.querySelector("input:not(:disabled)")),yt&&yt.focus()}}),[]);const ft=useForkRef(rt,pt),gt=useId(st),vt=reactExports.useMemo(()=>({name:gt,onChange(yt){ht(yt.target.value),at&&at(yt,yt.target.value)},value:ut}),[gt,at,ht,ut]);return jsx(RadioGroupContext$1.Provider,{value:vt,children:jsx(FormGroup$1,_extends({role:"radiogroup",ref:ft},ct,{children:ot}))})}),RadioGroup$1=RadioGroup;function getSelectUtilityClasses(_e){return generateUtilityClass("MuiSelect",_e)}const selectClasses=generateUtilityClasses("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),selectClasses$1=selectClasses;var _span;const _excluded$1x=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SelectSelect=styled$1("div",{name:"MuiSelect",slot:"Select",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`&.${selectClasses$1.select}`]:et.select},{[`&.${selectClasses$1.select}`]:et[rt.variant]},{[`&.${selectClasses$1.multiple}`]:et.multiple}]}})(nativeSelectSelectStyles,{[`&.${selectClasses$1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled$1("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.icon,rt.variant&&et[`icon${capitalize(rt.variant)}`],rt.open&&et.iconOpen]}})(nativeSelectIconStyles),SelectNativeInput=styled$1("input",{shouldForwardProp:_e=>slotShouldForwardProp(_e)&&_e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(_e,et)=>et.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(_e,et){return typeof et=="object"&&et!==null?_e===et:String(_e)===String(et)}function isEmpty$1(_e){return _e==null||typeof _e=="string"&&!_e.trim()}const useUtilityClasses$1a=_e=>{const{classes:et,variant:rt,disabled:nt,multiple:ot,open:it}=_e,st={select:["select",rt,nt&&"disabled",ot&&"multiple"],icon:["icon",`icon${capitalize(rt)}`,it&&"iconOpen",nt&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(st,getSelectUtilityClasses,et)},SelectInput=reactExports.forwardRef(function(et,rt){const{"aria-describedby":nt,"aria-label":ot,autoFocus:it,autoWidth:st,children:at,className:lt,defaultOpen:ct,defaultValue:pt,disabled:ut,displayEmpty:ht,IconComponent:ft,inputRef:gt,labelId:vt,MenuProps:yt={},multiple:mt,name:Et,onBlur:bt,onChange:Ct,onClose:Tt,onFocus:wt,onOpen:Rt,open:It,readOnly:St,renderValue:Pt,SelectDisplayProps:Ot={},tabIndex:Ut,value:Bt,variant:xt="standard"}=et,At=_objectWithoutPropertiesLoose(et,_excluded$1x),[Mt,Nt]=useControlled({controlled:Bt,default:pt,name:"Select"}),[$t,Ft]=useControlled({controlled:It,default:ct,name:"Select"}),jt=reactExports.useRef(null),zt=reactExports.useRef(null),[Yt,Kt]=reactExports.useState(null),{current:er}=reactExports.useRef(It!=null),[ir,rr]=reactExports.useState(),lr=useForkRef(rt,gt),nr=reactExports.useCallback(mr=>{zt.current=mr,mr&&Kt(mr)},[]),hr=Yt==null?void 0:Yt.parentNode;reactExports.useImperativeHandle(lr,()=>({focus:()=>{zt.current.focus()},node:jt.current,value:Mt}),[Mt]),reactExports.useEffect(()=>{ct&&$t&&Yt&&!er&&(rr(st?null:hr.clientWidth),zt.current.focus())},[Yt,st]),reactExports.useEffect(()=>{it&&zt.current.focus()},[it]),reactExports.useEffect(()=>{if(!vt)return;const mr=ownerDocument(zt.current).getElementById(vt);if(mr){const br=()=>{getSelection().isCollapsed&&zt.current.focus()};return mr.addEventListener("click",br),()=>{mr.removeEventListener("click",br)}}},[vt]);const vr=(mr,br)=>{mr?Rt&&Rt(br):Tt&&Tt(br),er||(rr(st?null:hr.clientWidth),Ft(mr))},yr=mr=>{mr.button===0&&(mr.preventDefault(),zt.current.focus(),vr(!0,mr))},Cr=mr=>{vr(!1,mr)},or=reactExports.Children.toArray(at),ur=mr=>{const br=or.map(Pr=>Pr.props.value).indexOf(mr.target.value);if(br===-1)return;const Rr=or[br];Nt(Rr.props.value),Ct&&Ct(mr,Rr)},pr=mr=>br=>{let Rr;if(br.currentTarget.hasAttribute("tabindex")){if(mt){Rr=Array.isArray(Mt)?Mt.slice():[];const Pr=Mt.indexOf(mr.props.value);Pr===-1?Rr.push(mr.props.value):Rr.splice(Pr,1)}else Rr=mr.props.value;if(mr.props.onClick&&mr.props.onClick(br),Mt!==Rr&&(Nt(Rr),Ct)){const Pr=br.nativeEvent||br,Or=new Pr.constructor(Pr.type,Pr);Object.defineProperty(Or,"target",{writable:!0,value:{value:Rr,name:Et}}),Ct(Or,mr)}mt||vr(!1,br)}},Er=mr=>{St||[" ","ArrowUp","ArrowDown","Enter"].indexOf(mr.key)!==-1&&(mr.preventDefault(),vr(!0,mr))},Sr=Yt!==null&&$t,Ht=mr=>{!Sr&&bt&&(Object.defineProperty(mr,"target",{writable:!0,value:{value:Mt,name:Et}}),bt(mr))};delete At["aria-invalid"];let qt,fr;const cr=[];let Ar=!1;(isFilled({value:Mt})||ht)&&(Pt?qt=Pt(Mt):Ar=!0);const Gr=or.map((mr,br,Rr)=>{var Pr,Or,Nr,Br;if(!reactExports.isValidElement(mr))return null;let jr;if(mt){if(!Array.isArray(Mt))throw new Error(formatMuiErrorMessage(2));jr=Mt.some(Fr=>areEqualValues(Fr,mr.props.value)),jr&&Ar&&cr.push(mr.props.children)}else jr=areEqualValues(Mt,mr.props.value),jr&&Ar&&(fr=mr.props.children);if(mr.props.value===void 0)return reactExports.cloneElement(mr,{"aria-readonly":!0,role:"option"});const $r=()=>{if(Mt)return jr;const Fr=Rr.find(Zr=>{var pn;return(Zr==null||(pn=Zr.props)==null?void 0:pn.value)!==void 0&&Zr.props.disabled!==!0});return mr===Fr?!0:jr};return reactExports.cloneElement(mr,{"aria-selected":jr?"true":"false",onClick:pr(mr),onKeyUp:Fr=>{Fr.key===" "&&Fr.preventDefault(),mr.props.onKeyUp&&mr.props.onKeyUp(Fr)},role:"option",selected:((Pr=Rr[0])==null||(Or=Pr.props)==null?void 0:Or.value)===void 0||((Nr=Rr[0])==null||(Br=Nr.props)==null?void 0:Br.disabled)===!0?$r():jr,value:void 0,"data-value":mr.props.value})});Ar&&(mt?cr.length===0?qt=null:qt=cr.reduce((mr,br,Rr)=>(mr.push(br),Rr<cr.length-1&&mr.push(", "),mr),[]):qt=fr);let Qr=ir;!st&&er&&Yt&&(Qr=hr.clientWidth);let hn;typeof Ut<"u"?hn=Ut:hn=ut?null:0;const sn=Ot.id||(Et?`mui-component-select-${Et}`:void 0),qr=_extends({},et,{variant:xt,value:Mt,open:Sr}),dr=useUtilityClasses$1a(qr);return jsxs(reactExports.Fragment,{children:[jsx(SelectSelect,_extends({ref:nr,tabIndex:hn,role:"button","aria-disabled":ut?"true":void 0,"aria-expanded":Sr?"true":"false","aria-haspopup":"listbox","aria-label":ot,"aria-labelledby":[vt,sn].filter(Boolean).join(" ")||void 0,"aria-describedby":nt,onKeyDown:Er,onMouseDown:ut||St?null:yr,onBlur:Ht,onFocus:wt},Ot,{ownerState:qr,className:clsx(Ot.className,dr.select,lt),id:sn,children:isEmpty$1(qt)?_span||(_span=jsx("span",{className:"notranslate",children:"​"})):qt})),jsx(SelectNativeInput,_extends({value:Array.isArray(Mt)?Mt.join(","):Mt,name:Et,ref:jt,"aria-hidden":!0,onChange:ur,tabIndex:-1,disabled:ut,className:dr.nativeInput,autoFocus:it,ownerState:qr},At)),jsx(SelectIcon,{as:ft,className:dr.icon,ownerState:qr}),jsx(Menu$2,_extends({id:`menu-${Et||""}`,anchorEl:hr,open:Sr,onClose:Cr,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},yt,{MenuListProps:_extends({"aria-labelledby":vt,role:"listbox",disableListWrap:!0},yt.MenuListProps),PaperProps:_extends({},yt.PaperProps,{style:_extends({minWidth:Qr},yt.PaperProps!=null?yt.PaperProps.style:null)}),children:Gr}))]})}),SelectInput$1=SelectInput;var _StyledInput,_StyledFilledInput;const _excluded$1w=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],useUtilityClasses$19=_e=>{const{classes:et}=_e;return et},styledRootConfig={name:"MuiSelect",overridesResolver:(_e,et)=>et.root,shouldForwardProp:_e=>rootShouldForwardProp(_e)&&_e!=="variant",slot:"Root"},StyledInput=styled$1(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled$1(OutlinedInput$1,styledRootConfig)(""),StyledFilledInput=styled$1(FilledInput$1,styledRootConfig)(""),Select=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({name:"MuiSelect",props:et}),{autoWidth:ot=!1,children:it,classes:st={},className:at,defaultOpen:lt=!1,displayEmpty:ct=!1,IconComponent:pt=ArrowDropDownIcon,id:ut,input:ht,inputProps:ft,label:gt,labelId:vt,MenuProps:yt,multiple:mt=!1,native:Et=!1,onClose:bt,onOpen:Ct,open:Tt,renderValue:wt,SelectDisplayProps:Rt,variant:It="outlined"}=nt,St=_objectWithoutPropertiesLoose(nt,_excluded$1w),Pt=Et?NativeSelectInput$1:SelectInput$1,Ot=useFormControl(),Bt=formControlState({props:nt,muiFormControl:Ot,states:["variant"]}).variant||It,xt=ht||{standard:_StyledInput||(_StyledInput=jsx(StyledInput,{})),outlined:jsx(StyledOutlinedInput,{label:gt}),filled:_StyledFilledInput||(_StyledFilledInput=jsx(StyledFilledInput,{}))}[Bt],At=_extends({},nt,{variant:Bt,classes:st}),Mt=useUtilityClasses$19(At),Nt=useForkRef(rt,xt.ref);return jsx(reactExports.Fragment,{children:reactExports.cloneElement(xt,_extends({inputComponent:Pt,inputProps:_extends({children:it,IconComponent:pt,variant:Bt,type:void 0,multiple:mt},Et?{id:ut}:{autoWidth:ot,defaultOpen:lt,displayEmpty:ct,labelId:vt,MenuProps:yt,onClose:bt,onOpen:Ct,open:Tt,renderValue:wt,SelectDisplayProps:_extends({id:ut},Rt)},ft,{classes:ft?deepmerge(Mt,ft.classes):Mt},ht?ht.props.inputProps:{})},mt&&Et&&Bt==="outlined"?{notched:!0}:{},{ref:Nt,className:clsx(xt.props.className,at)},!ht&&{variant:Bt},St))})});Select.muiName="Select";const Select$1=Select;function getSkeletonUtilityClass(_e){return generateUtilityClass("MuiSkeleton",_e)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const _excluded$1v=["animation","className","component","height","style","variant","width"];let _$1=_e=>_e,_t,_t2,_t3,_t4;const useUtilityClasses$18=_e=>{const{classes:et,variant:rt,animation:nt,hasChildren:ot,width:it,height:st}=_e;return composeClasses({root:["root",rt,nt,ot&&"withChildren",ot&&!it&&"fitContent",ot&&!st&&"heightAuto"]},getSkeletonUtilityClass,et)},pulseKeyframe=keyframes(_t||(_t=_$1`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),waveKeyframe=keyframes(_t2||(_t2=_$1`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),SkeletonRoot=styled$1("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],rt.animation!==!1&&et[rt.animation],rt.hasChildren&&et.withChildren,rt.hasChildren&&!rt.width&&et.fitContent,rt.hasChildren&&!rt.height&&et.heightAuto]}})(({theme:_e,ownerState:et})=>{const rt=getUnit(_e.shape.borderRadius)||"px",nt=toUnitless(_e.shape.borderRadius);return _extends({display:"block",backgroundColor:_e.vars?_e.vars.palette.Skeleton.bg:alpha$1(_e.palette.text.primary,_e.palette.mode==="light"?.11:.13),height:"1.2em"},et.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${nt}${rt}/${Math.round(nt/.6*10)/10}${rt}`,"&:empty:before":{content:'"\\00a0"'}},et.variant==="circular"&&{borderRadius:"50%"},et.variant==="rounded"&&{borderRadius:(_e.vars||_e).shape.borderRadius},et.hasChildren&&{"& > *":{visibility:"hidden"}},et.hasChildren&&!et.width&&{maxWidth:"fit-content"},et.hasChildren&&!et.height&&{height:"auto"})},({ownerState:_e})=>_e.animation==="pulse"&&css(_t3||(_t3=_$1`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),pulseKeyframe),({ownerState:_e,theme:et})=>_e.animation==="wave"&&css(_t4||(_t4=_$1`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),waveKeyframe,(et.vars||et).palette.action.hover)),Skeleton=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiSkeleton"}),{animation:ot="pulse",className:it,component:st="span",height:at,style:lt,variant:ct="text",width:pt}=nt,ut=_objectWithoutPropertiesLoose(nt,_excluded$1v),ht=_extends({},nt,{animation:ot,component:st,variant:ct,hasChildren:Boolean(ut.children)}),ft=useUtilityClasses$18(ht);return jsx(SkeletonRoot,_extends({as:st,ref:rt,className:clsx(ft.root,it),ownerState:ht},ut,{style:_extends({width:pt,height:at},lt)}))}),Skeleton$1=Skeleton;function getSnackbarContentUtilityClass(_e){return generateUtilityClass("MuiSnackbarContent",_e)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const _excluded$1u=["action","className","message","role"],useUtilityClasses$17=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,et)},SnackbarContentRoot=styled$1(Paper$1,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>{const et=_e.palette.mode==="light"?.8:.98,rt=emphasize(_e.palette.background.default,et);return _extends({},_e.typography.body2,{color:_e.vars?_e.vars.palette.SnackbarContent.color:_e.palette.getContrastText(rt),backgroundColor:_e.vars?_e.vars.palette.SnackbarContent.bg:rt,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(_e.vars||_e).shape.borderRadius,flexGrow:1,[_e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),SnackbarContentMessage=styled$1("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(_e,et)=>et.message})({padding:"8px 0"}),SnackbarContentAction=styled$1("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(_e,et)=>et.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiSnackbarContent"}),{action:ot,className:it,message:st,role:at="alert"}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded$1u),ct=nt,pt=useUtilityClasses$17(ct);return jsxs(SnackbarContentRoot,_extends({role:at,square:!0,elevation:6,className:clsx(pt.root,it),ownerState:ct,ref:rt},lt,{children:[jsx(SnackbarContentMessage,{className:pt.message,ownerState:ct,children:st}),ot?jsx(SnackbarContentAction,{className:pt.action,ownerState:ct,children:ot}):null]}))}),SnackbarContent$1=SnackbarContent;function getSnackbarUtilityClass(_e){return generateUtilityClass("MuiSnackbar",_e)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const _excluded$1t=["onEnter","onExited"],_excluded2$5=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],useUtilityClasses$16=_e=>{const{classes:et,anchorOrigin:rt}=_e,nt={root:["root",`anchorOrigin${capitalize(rt.vertical)}${capitalize(rt.horizontal)}`]};return composeClasses(nt,getSnackbarUtilityClass,et)},SnackbarRoot=styled$1("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[`anchorOrigin${capitalize(rt.anchorOrigin.vertical)}${capitalize(rt.anchorOrigin.horizontal)}`]]}})(({theme:_e,ownerState:et})=>{const rt={left:"50%",right:"auto",transform:"translateX(-50%)"};return _extends({zIndex:(_e.vars||_e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},et.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},et.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},et.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[_e.breakpoints.up("sm")]:_extends({},et.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},et.anchorOrigin.horizontal==="center"&&rt,et.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},et.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Snackbar=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiSnackbar"}),ot=useTheme(),it={enter:ot.transitions.duration.enteringScreen,exit:ot.transitions.duration.leavingScreen},{action:st,anchorOrigin:{vertical:at,horizontal:lt}={vertical:"bottom",horizontal:"left"},autoHideDuration:ct=null,children:pt,className:ut,ClickAwayListenerProps:ht,ContentProps:ft,disableWindowBlurListener:gt=!1,message:vt,onBlur:yt,onClose:mt,onFocus:Et,onMouseEnter:bt,onMouseLeave:Ct,open:Tt,resumeHideDuration:wt,TransitionComponent:Rt=Grow$1,transitionDuration:It=it,TransitionProps:{onEnter:St,onExited:Pt}={}}=nt,Ot=_objectWithoutPropertiesLoose(nt.TransitionProps,_excluded$1t),Ut=_objectWithoutPropertiesLoose(nt,_excluded2$5),Bt=_extends({},nt,{anchorOrigin:{vertical:at,horizontal:lt}}),xt=useUtilityClasses$16(Bt),At=reactExports.useRef(),[Mt,Nt]=reactExports.useState(!0),$t=useEventCallback((...hr)=>{mt&&mt(...hr)}),Ft=useEventCallback(hr=>{!mt||hr==null||(clearTimeout(At.current),At.current=setTimeout(()=>{$t(null,"timeout")},hr))});reactExports.useEffect(()=>(Tt&&Ft(ct),()=>{clearTimeout(At.current)}),[Tt,ct,Ft]);const jt=()=>{clearTimeout(At.current)},zt=reactExports.useCallback(()=>{ct!=null&&Ft(wt??ct*.5)},[ct,wt,Ft]),Yt=hr=>{Et&&Et(hr),jt()},Kt=hr=>{bt&&bt(hr),jt()},er=hr=>{yt&&yt(hr),zt()},ir=hr=>{Ct&&Ct(hr),zt()},rr=hr=>{mt&&mt(hr,"clickaway")},lr=hr=>{Nt(!0),Pt&&Pt(hr)},nr=(hr,vr)=>{Nt(!1),St&&St(hr,vr)};return reactExports.useEffect(()=>{if(!gt&&Tt)return window.addEventListener("focus",zt),window.addEventListener("blur",jt),()=>{window.removeEventListener("focus",zt),window.removeEventListener("blur",jt)}},[gt,zt,Tt]),reactExports.useEffect(()=>{if(!Tt)return;function hr(vr){vr.defaultPrevented||(vr.key==="Escape"||vr.key==="Esc")&&mt&&mt(vr,"escapeKeyDown")}return document.addEventListener("keydown",hr),()=>{document.removeEventListener("keydown",hr)}},[Mt,Tt,mt]),!Tt&&Mt?null:jsx(ClickAwayListener,_extends({onClickAway:rr},ht,{children:jsx(SnackbarRoot,_extends({className:clsx(xt.root,ut),onBlur:er,onFocus:Yt,onMouseEnter:Kt,onMouseLeave:ir,ownerState:Bt,ref:rt,role:"presentation"},Ut,{children:jsx(Rt,_extends({appear:!0,in:Tt,timeout:It,direction:at==="top"?"down":"up",onEnter:nr,onExited:lr},Ot,{children:pt||jsx(SnackbarContent$1,_extends({message:vt,action:st},ft))}))}))}))}),Snackbar$1=Snackbar;function getTooltipUtilityClass(_e){return generateUtilityClass("MuiTooltip",_e)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),tooltipClasses$1=tooltipClasses,_excluded$1s=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round$1(_e){return Math.round(_e*1e5)/1e5}const useUtilityClasses$15=_e=>{const{classes:et,disableInteractive:rt,arrow:nt,touch:ot,placement:it}=_e,st={popper:["popper",!rt&&"popperInteractive",nt&&"popperArrow"],tooltip:["tooltip",nt&&"tooltipArrow",ot&&"touch",`tooltipPlacement${capitalize(it.split("-")[0])}`],arrow:["arrow"]};return composeClasses(st,getTooltipUtilityClass,et)},TooltipPopper=styled$1(Popper$1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.popper,!rt.disableInteractive&&et.popperInteractive,rt.arrow&&et.popperArrow,!rt.open&&et.popperClose]}})(({theme:_e,ownerState:et,open:rt})=>_extends({zIndex:(_e.vars||_e).zIndex.tooltip,pointerEvents:"none"},!et.disableInteractive&&{pointerEvents:"auto"},!rt&&{pointerEvents:"none"},et.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses$1.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses$1.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses$1.arrow}`]:_extends({},et.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses$1.arrow}`]:_extends({},et.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.tooltip,rt.touch&&et.touch,rt.arrow&&et.tooltipArrow,et[`tooltipPlacement${capitalize(rt.placement.split("-")[0])}`]]}})(({theme:_e,ownerState:et})=>_extends({backgroundColor:_e.vars?_e.vars.palette.Tooltip.bg:alpha$1(_e.palette.grey[700],.92),borderRadius:(_e.vars||_e).shape.borderRadius,color:(_e.vars||_e).palette.common.white,fontFamily:_e.typography.fontFamily,padding:"4px 8px",fontSize:_e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:_e.typography.fontWeightMedium},et.arrow&&{position:"relative",margin:0},et.touch&&{padding:"8px 16px",fontSize:_e.typography.pxToRem(14),lineHeight:`${round$1(16/14)}em`,fontWeight:_e.typography.fontWeightRegular},{[`.${tooltipClasses$1.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},et.isRtl?_extends({marginLeft:"14px"},et.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},et.touch&&{marginRight:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},et.isRtl?_extends({marginRight:"14px"},et.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},et.touch&&{marginLeft:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},et.touch&&{marginBottom:"24px"}),[`.${tooltipClasses$1.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},et.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(_e,et)=>et.arrow})(({theme:_e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:_e.vars?_e.vars.palette.Tooltip.bg:alpha$1(_e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1,hystersisTimer=null,cursorPosition={x:0,y:0};function composeEventHandler(_e,et){return rt=>{et&&et(rt),_e(rt)}}const Tooltip$1=reactExports.forwardRef(function(et,rt){var nt,ot,it,st,at,lt,ct,pt,ut,ht,ft,gt,vt,yt,mt,Et,bt,Ct,Tt;const wt=useThemeProps({props:et,name:"MuiTooltip"}),{arrow:Rt=!1,children:It,components:St={},componentsProps:Pt={},describeChild:Ot=!1,disableFocusListener:Ut=!1,disableHoverListener:Bt=!1,disableInteractive:xt=!1,disableTouchListener:At=!1,enterDelay:Mt=100,enterNextDelay:Nt=0,enterTouchDelay:$t=700,followCursor:Ft=!1,id:jt,leaveDelay:zt=0,leaveTouchDelay:Yt=1500,onClose:Kt,onOpen:er,open:ir,placement:rr="bottom",PopperComponent:lr,PopperProps:nr={},slotProps:hr={},slots:vr={},title:yr,TransitionComponent:Cr=Grow$1,TransitionProps:or}=wt,ur=_objectWithoutPropertiesLoose(wt,_excluded$1s),pr=useTheme(),Er=pr.direction==="rtl",[Sr,Ht]=reactExports.useState(),[qt,fr]=reactExports.useState(null),cr=reactExports.useRef(!1),Ar=xt||Ft,Gr=reactExports.useRef(),Qr=reactExports.useRef(),hn=reactExports.useRef(),sn=reactExports.useRef(),[qr,dr]=useControlled({controlled:ir,default:!1,name:"Tooltip",state:"open"});let mr=qr;const br=useId(jt),Rr=reactExports.useRef(),Pr=reactExports.useCallback(()=>{Rr.current!==void 0&&(document.body.style.WebkitUserSelect=Rr.current,Rr.current=void 0),clearTimeout(sn.current)},[]);reactExports.useEffect(()=>()=>{clearTimeout(Gr.current),clearTimeout(Qr.current),clearTimeout(hn.current),Pr()},[Pr]);const Or=Xr=>{clearTimeout(hystersisTimer),hystersisOpen=!0,dr(!0),er&&!mr&&er(Xr)},Nr=useEventCallback(Xr=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+zt),dr(!1),Kt&&mr&&Kt(Xr),clearTimeout(Gr.current),Gr.current=setTimeout(()=>{cr.current=!1},pr.transitions.duration.shortest)}),Br=Xr=>{cr.current&&Xr.type!=="touchstart"||(Sr&&Sr.removeAttribute("title"),clearTimeout(Qr.current),clearTimeout(hn.current),Mt||hystersisOpen&&Nt?Qr.current=setTimeout(()=>{Or(Xr)},hystersisOpen?Nt:Mt):Or(Xr))},jr=Xr=>{clearTimeout(Qr.current),clearTimeout(hn.current),hn.current=setTimeout(()=>{Nr(Xr)},zt)},{isFocusVisibleRef:$r,onBlur:Fr,onFocus:Zr,ref:pn}=useIsFocusVisible(),[,mn]=reactExports.useState(!1),vn=Xr=>{Fr(Xr),$r.current===!1&&(mn(!1),jr(Xr))},jn=Xr=>{Sr||Ht(Xr.currentTarget),Zr(Xr),$r.current===!0&&(mn(!0),Br(Xr))},yn=Xr=>{cr.current=!0;const Hn=It.props;Hn.onTouchStart&&Hn.onTouchStart(Xr)},Kn=Br,Qn=jr,bn=Xr=>{yn(Xr),clearTimeout(hn.current),clearTimeout(Gr.current),Pr(),Rr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",sn.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Rr.current,Br(Xr)},$t)},so=Xr=>{It.props.onTouchEnd&&It.props.onTouchEnd(Xr),Pr(),clearTimeout(hn.current),hn.current=setTimeout(()=>{Nr(Xr)},Yt)};reactExports.useEffect(()=>{if(!mr)return;function Xr(Hn){(Hn.key==="Escape"||Hn.key==="Esc")&&Nr(Hn)}return document.addEventListener("keydown",Xr),()=>{document.removeEventListener("keydown",Xr)}},[Nr,mr]);const zr=useForkRef(It.ref,pn,Ht,rt);!yr&&yr!==0&&(mr=!1);const zn=reactExports.useRef(),Zn=Xr=>{const Hn=It.props;Hn.onMouseMove&&Hn.onMouseMove(Xr),cursorPosition={x:Xr.clientX,y:Xr.clientY},zn.current&&zn.current.update()},Fn={},En=typeof yr=="string";Ot?(Fn.title=!mr&&En&&!Bt?yr:null,Fn["aria-describedby"]=mr?br:null):(Fn["aria-label"]=En?yr:null,Fn["aria-labelledby"]=mr&&!En?br:null);const Cn=_extends({},Fn,ur,It.props,{className:clsx(ur.className,It.props.className),onTouchStart:yn,ref:zr},Ft?{onMouseMove:Zn}:{}),Mn={};At||(Cn.onTouchStart=bn,Cn.onTouchEnd=so),Bt||(Cn.onMouseOver=composeEventHandler(Kn,Cn.onMouseOver),Cn.onMouseLeave=composeEventHandler(Qn,Cn.onMouseLeave),Ar||(Mn.onMouseOver=Kn,Mn.onMouseLeave=Qn)),Ut||(Cn.onFocus=composeEventHandler(jn,Cn.onFocus),Cn.onBlur=composeEventHandler(vn,Cn.onBlur),Ar||(Mn.onFocus=jn,Mn.onBlur=vn));const Vn=reactExports.useMemo(()=>{var Xr;let Hn=[{name:"arrow",enabled:Boolean(qt),options:{element:qt,padding:4}}];return(Xr=nr.popperOptions)!=null&&Xr.modifiers&&(Hn=Hn.concat(nr.popperOptions.modifiers)),_extends({},nr.popperOptions,{modifiers:Hn})},[qt,nr]),$n=_extends({},wt,{isRtl:Er,arrow:Rt,disableInteractive:Ar,placement:rr,PopperComponentProp:lr,touch:cr.current}),Sn=useUtilityClasses$15($n),Yn=(nt=(ot=vr.popper)!=null?ot:St.Popper)!=null?nt:TooltipPopper,Vr=(it=(st=(at=vr.transition)!=null?at:St.Transition)!=null?st:Cr)!=null?it:Grow$1,Ur=(lt=(ct=vr.tooltip)!=null?ct:St.Tooltip)!=null?lt:TooltipTooltip,cn=(pt=(ut=vr.arrow)!=null?ut:St.Arrow)!=null?pt:TooltipArrow,gn=appendOwnerState(Yn,_extends({},nr,(ht=hr.popper)!=null?ht:Pt.popper,{className:clsx(Sn.popper,nr==null?void 0:nr.className,(ft=(gt=hr.popper)!=null?gt:Pt.popper)==null?void 0:ft.className)}),$n),kn=appendOwnerState(Vr,_extends({},or,(vt=hr.transition)!=null?vt:Pt.transition),$n),dn=appendOwnerState(Ur,_extends({},(yt=hr.tooltip)!=null?yt:Pt.tooltip,{className:clsx(Sn.tooltip,(mt=(Et=hr.tooltip)!=null?Et:Pt.tooltip)==null?void 0:mt.className)}),$n),Bn=appendOwnerState(cn,_extends({},(bt=hr.arrow)!=null?bt:Pt.arrow,{className:clsx(Sn.arrow,(Ct=(Tt=hr.arrow)!=null?Tt:Pt.arrow)==null?void 0:Ct.className)}),$n);return jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(It,Cn),jsx(Yn,_extends({as:lr??Popper$1,placement:rr,anchorEl:Ft?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:Sr,popperRef:zn,open:Sr?mr:!1,id:br,transition:!0},Mn,gn,{popperOptions:Vn,children:({TransitionProps:Xr})=>jsx(Vr,_extends({timeout:pr.transitions.duration.shorter},Xr,kn,{children:jsxs(Ur,_extends({},dn,{children:[yr,Rt?jsx(cn,_extends({},Bn,{ref:fr})):null]}))}))}))]})}),Tooltip$2=Tooltip$1,_excluded$1r=["component","direction","spacing","divider","children"];function joinChildren(_e,et){const rt=reactExports.Children.toArray(_e).filter(Boolean);return rt.reduce((nt,ot,it)=>(nt.push(ot),it<rt.length-1&&nt.push(reactExports.cloneElement(et,{key:`separator-${it}`})),nt),[])}const getSideFromDirection=_e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[_e],style=({ownerState:_e,theme:et})=>{let rt=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:et},resolveBreakpointValues({values:_e.direction,breakpoints:et.breakpoints.values}),nt=>({flexDirection:nt})));if(_e.spacing){const nt=createUnarySpacing(et),ot=Object.keys(et.breakpoints.values).reduce((lt,ct)=>((typeof _e.spacing=="object"&&_e.spacing[ct]!=null||typeof _e.direction=="object"&&_e.direction[ct]!=null)&&(lt[ct]=!0),lt),{}),it=resolveBreakpointValues({values:_e.direction,base:ot}),st=resolveBreakpointValues({values:_e.spacing,base:ot});typeof it=="object"&&Object.keys(it).forEach((lt,ct,pt)=>{if(!it[lt]){const ht=ct>0?it[pt[ct-1]]:"column";it[lt]=ht}}),rt=deepmerge(rt,handleBreakpoints({theme:et},st,(lt,ct)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${getSideFromDirection(ct?it[ct]:_e.direction)}`]:getValue(nt,lt)}})))}return rt=mergeBreakpointsInOrder(et.breakpoints,rt),rt},StackRoot=styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(_e,et)=>[et.root]})(style),Stack=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiStack"}),ot=extendSxProp(nt),{component:it="div",direction:st="column",spacing:at=0,divider:lt,children:ct}=ot,pt=_objectWithoutPropertiesLoose(ot,_excluded$1r);return jsx(StackRoot,_extends({as:it,ownerState:{direction:st,spacing:at},ref:rt},pt,{children:lt?joinChildren(ct,lt):ct}))}),Stack$1=Stack;function getSwitchUtilityClass(_e){return generateUtilityClass("MuiSwitch",_e)}const switchClasses=generateUtilityClasses("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),switchClasses$1=switchClasses,_excluded$1q=["className","color","edge","size","sx"],useUtilityClasses$14=_e=>{const{classes:et,edge:rt,size:nt,color:ot,checked:it,disabled:st}=_e,at={root:["root",rt&&`edge${capitalize(rt)}`,`size${capitalize(nt)}`],switchBase:["switchBase",`color${capitalize(ot)}`,it&&"checked",st&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},lt=composeClasses(at,getSwitchUtilityClass,et);return _extends({},et,lt)},SwitchRoot=styled$1("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.edge&&et[`edge${capitalize(rt.edge)}`],et[`size${capitalize(rt.size)}`]]}})(({ownerState:_e})=>_extends({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},_e.edge==="start"&&{marginLeft:-8},_e.edge==="end"&&{marginRight:-8},_e.size==="small"&&{width:40,height:24,padding:7,[`& .${switchClasses$1.thumb}`]:{width:16,height:16},[`& .${switchClasses$1.switchBase}`]:{padding:4,[`&.${switchClasses$1.checked}`]:{transform:"translateX(16px)"}}})),SwitchSwitchBase=styled$1(SwitchBase$1,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.switchBase,{[`& .${switchClasses$1.input}`]:et.input},rt.color!=="default"&&et[`color${capitalize(rt.color)}`]]}})(({theme:_e})=>({position:"absolute",top:0,left:0,zIndex:1,color:_e.vars?_e.vars.palette.Switch.defaultColor:`${_e.palette.mode==="light"?_e.palette.common.white:_e.palette.grey[300]}`,transition:_e.transitions.create(["left","transform"],{duration:_e.transitions.duration.shortest}),[`&.${switchClasses$1.checked}`]:{transform:"translateX(20px)"},[`&.${switchClasses$1.disabled}`]:{color:_e.vars?_e.vars.palette.Switch.defaultDisabledColor:`${_e.palette.mode==="light"?_e.palette.grey[100]:_e.palette.grey[600]}`},[`&.${switchClasses$1.checked} + .${switchClasses$1.track}`]:{opacity:.5},[`&.${switchClasses$1.disabled} + .${switchClasses$1.track}`]:{opacity:_e.vars?_e.vars.opacity.switchTrackDisabled:`${_e.palette.mode==="light"?.12:.2}`},[`& .${switchClasses$1.input}`]:{left:"-100%",width:"300%"}}),({theme:_e,ownerState:et})=>_extends({"&:hover":{backgroundColor:_e.vars?`rgba(${_e.vars.palette.action.activeChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},et.color!=="default"&&{[`&.${switchClasses$1.checked}`]:{color:(_e.vars||_e).palette[et.color].main,"&:hover":{backgroundColor:_e.vars?`rgba(${_e.vars.palette[et.color].mainChannel} / ${_e.vars.palette.action.hoverOpacity})`:alpha$1(_e.palette[et.color].main,_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${switchClasses$1.disabled}`]:{color:_e.vars?_e.vars.palette.Switch[`${et.color}DisabledColor`]:`${_e.palette.mode==="light"?lighten(_e.palette[et.color].main,.62):darken(_e.palette[et.color].main,.55)}`}},[`&.${switchClasses$1.checked} + .${switchClasses$1.track}`]:{backgroundColor:(_e.vars||_e).palette[et.color].main}})),SwitchTrack=styled$1("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(_e,et)=>et.track})(({theme:_e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:_e.transitions.create(["opacity","background-color"],{duration:_e.transitions.duration.shortest}),backgroundColor:_e.vars?_e.vars.palette.common.onBackground:`${_e.palette.mode==="light"?_e.palette.common.black:_e.palette.common.white}`,opacity:_e.vars?_e.vars.opacity.switchTrack:`${_e.palette.mode==="light"?.38:.3}`})),SwitchThumb=styled$1("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(_e,et)=>et.thumb})(({theme:_e})=>({boxShadow:(_e.vars||_e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Switch=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiSwitch"}),{className:ot,color:it="primary",edge:st=!1,size:at="medium",sx:lt}=nt,ct=_objectWithoutPropertiesLoose(nt,_excluded$1q),pt=_extends({},nt,{color:it,edge:st,size:at}),ut=useUtilityClasses$14(pt),ht=jsx(SwitchThumb,{className:ut.thumb,ownerState:pt});return jsxs(SwitchRoot,{className:clsx(ut.root,ot),sx:lt,ownerState:pt,children:[jsx(SwitchSwitchBase,_extends({type:"checkbox",icon:ht,checkedIcon:ht,ref:rt,ownerState:pt},ct,{classes:_extends({},ut,{root:ut.switchBase})})),jsx(SwitchTrack,{className:ut.track,ownerState:pt})]})}),MUISwitch=Switch;function getTabUtilityClass(_e){return generateUtilityClass("MuiTab",_e)}const tabClasses=generateUtilityClasses("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),tabClasses$1=tabClasses,_excluded$1p=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],useUtilityClasses$13=_e=>{const{classes:et,textColor:rt,fullWidth:nt,wrapped:ot,icon:it,label:st,selected:at,disabled:lt}=_e,ct={root:["root",it&&st&&"labelIcon",`textColor${capitalize(rt)}`,nt&&"fullWidth",ot&&"wrapped",at&&"selected",lt&&"disabled"],iconWrapper:["iconWrapper"]};return composeClasses(ct,getTabUtilityClass,et)},TabRoot=styled$1(ButtonBase$1,{name:"MuiTab",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.label&&rt.icon&&et.labelIcon,et[`textColor${capitalize(rt.textColor)}`],rt.fullWidth&&et.fullWidth,rt.wrapped&&et.wrapped]}})(({theme:_e,ownerState:et})=>_extends({},_e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},et.label&&{flexDirection:et.iconPosition==="top"||et.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},et.icon&&et.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${tabClasses$1.iconWrapper}`]:_extends({},et.iconPosition==="top"&&{marginBottom:6},et.iconPosition==="bottom"&&{marginTop:6},et.iconPosition==="start"&&{marginRight:_e.spacing(1)},et.iconPosition==="end"&&{marginLeft:_e.spacing(1)})},et.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${tabClasses$1.selected}`]:{opacity:1},[`&.${tabClasses$1.disabled}`]:{opacity:(_e.vars||_e).palette.action.disabledOpacity}},et.textColor==="primary"&&{color:(_e.vars||_e).palette.text.secondary,[`&.${tabClasses$1.selected}`]:{color:(_e.vars||_e).palette.primary.main},[`&.${tabClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled}},et.textColor==="secondary"&&{color:(_e.vars||_e).palette.text.secondary,[`&.${tabClasses$1.selected}`]:{color:(_e.vars||_e).palette.secondary.main},[`&.${tabClasses$1.disabled}`]:{color:(_e.vars||_e).palette.text.disabled}},et.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},et.wrapped&&{fontSize:_e.typography.pxToRem(12)})),Tab=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTab"}),{className:ot,disabled:it=!1,disableFocusRipple:st=!1,fullWidth:at,icon:lt,iconPosition:ct="top",indicator:pt,label:ut,onChange:ht,onClick:ft,onFocus:gt,selected:vt,selectionFollowsFocus:yt,textColor:mt="inherit",value:Et,wrapped:bt=!1}=nt,Ct=_objectWithoutPropertiesLoose(nt,_excluded$1p),Tt=_extends({},nt,{disabled:it,disableFocusRipple:st,selected:vt,icon:!!lt,iconPosition:ct,label:!!ut,fullWidth:at,textColor:mt,wrapped:bt}),wt=useUtilityClasses$13(Tt),Rt=lt&&ut&&reactExports.isValidElement(lt)?reactExports.cloneElement(lt,{className:clsx(wt.iconWrapper,lt.props.className)}):lt,It=Pt=>{!vt&&ht&&ht(Pt,Et),ft&&ft(Pt)},St=Pt=>{yt&&!vt&&ht&&ht(Pt,Et),gt&&gt(Pt)};return jsxs(TabRoot,_extends({focusRipple:!st,className:clsx(wt.root,ot),ref:rt,role:"tab","aria-selected":vt,disabled:it,onClick:It,onFocus:St,ownerState:Tt,tabIndex:vt?0:-1},Ct,{children:[ct==="top"||ct==="start"?jsxs(reactExports.Fragment,{children:[Rt,ut]}):jsxs(reactExports.Fragment,{children:[ut,Rt]}),pt]}))}),Tab$1=Tab,TableContext=reactExports.createContext(),TableContext$1=TableContext,Tablelvl2Context=reactExports.createContext(),Tablelvl2Context$1=Tablelvl2Context;function getTableCellUtilityClass(_e){return generateUtilityClass("MuiTableCell",_e)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),tableCellClasses$1=tableCellClasses,_excluded$1o=["align","className","component","padding","scope","size","sortDirection","variant"],useUtilityClasses$12=_e=>{const{classes:et,variant:rt,align:nt,padding:ot,size:it,stickyHeader:st}=_e,at={root:["root",rt,st&&"stickyHeader",nt!=="inherit"&&`align${capitalize(nt)}`,ot!=="normal"&&`padding${capitalize(ot)}`,`size${capitalize(it)}`]};return composeClasses(at,getTableCellUtilityClass,et)},TableCellRoot=styled$1("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,et[rt.variant],et[`size${capitalize(rt.size)}`],rt.padding!=="normal"&&et[`padding${capitalize(rt.padding)}`],rt.align!=="inherit"&&et[`align${capitalize(rt.align)}`],rt.stickyHeader&&et.stickyHeader]}})(({theme:_e,ownerState:et})=>_extends({},_e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:_e.vars?`1px solid ${_e.vars.palette.TableCell.border}`:`1px solid
    ${_e.palette.mode==="light"?lighten(alpha$1(_e.palette.divider,1),.88):darken(alpha$1(_e.palette.divider,1),.68)}`,textAlign:"left",padding:16},et.variant==="head"&&{color:(_e.vars||_e).palette.text.primary,lineHeight:_e.typography.pxToRem(24),fontWeight:_e.typography.fontWeightMedium},et.variant==="body"&&{color:(_e.vars||_e).palette.text.primary},et.variant==="footer"&&{color:(_e.vars||_e).palette.text.secondary,lineHeight:_e.typography.pxToRem(21),fontSize:_e.typography.pxToRem(12)},et.size==="small"&&{padding:"6px 16px",[`&.${tableCellClasses$1.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},et.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},et.padding==="none"&&{padding:0},et.align==="left"&&{textAlign:"left"},et.align==="center"&&{textAlign:"center"},et.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},et.align==="justify"&&{textAlign:"justify"},et.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(_e.vars||_e).palette.background.default})),TableCell=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTableCell"}),{align:ot="inherit",className:it,component:st,padding:at,scope:lt,size:ct,sortDirection:pt,variant:ut}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$1o),ft=reactExports.useContext(TableContext$1),gt=reactExports.useContext(Tablelvl2Context$1),vt=gt&&gt.variant==="head";let yt;st?yt=st:yt=vt?"th":"td";let mt=lt;yt==="td"?mt=void 0:!mt&&vt&&(mt="col");const Et=ut||gt&&gt.variant,bt=_extends({},nt,{align:ot,component:yt,padding:at||(ft&&ft.padding?ft.padding:"normal"),size:ct||(ft&&ft.size?ft.size:"medium"),sortDirection:pt,stickyHeader:Et==="head"&&ft&&ft.stickyHeader,variant:Et}),Ct=useUtilityClasses$12(bt);let Tt=null;return pt&&(Tt=pt==="asc"?"ascending":"descending"),jsx(TableCellRoot,_extends({as:yt,ref:rt,className:clsx(Ct.root,it),"aria-sort":Tt,scope:mt,ownerState:bt},ht))}),TableCell$1=TableCell;function getToolbarUtilityClass(_e){return generateUtilityClass("MuiToolbar",_e)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const _excluded$1n=["className","component","disableGutters","variant"],useUtilityClasses$11=_e=>{const{classes:et,disableGutters:rt,variant:nt}=_e;return composeClasses({root:["root",!rt&&"gutters",nt]},getToolbarUtilityClass,et)},ToolbarRoot=styled$1("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,!rt.disableGutters&&et.gutters,et[rt.variant]]}})(({theme:_e,ownerState:et})=>_extends({position:"relative",display:"flex",alignItems:"center"},!et.disableGutters&&{paddingLeft:_e.spacing(2),paddingRight:_e.spacing(2),[_e.breakpoints.up("sm")]:{paddingLeft:_e.spacing(3),paddingRight:_e.spacing(3)}},et.variant==="dense"&&{minHeight:48}),({theme:_e,ownerState:et})=>et.variant==="regular"&&_e.mixins.toolbar),Toolbar=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiToolbar"}),{className:ot,component:it="div",disableGutters:st=!1,variant:at="regular"}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded$1n),ct=_extends({},nt,{component:it,disableGutters:st,variant:at}),pt=useUtilityClasses$11(ct);return jsx(ToolbarRoot,_extends({as:it,className:clsx(pt.root,ot),ref:rt,ownerState:ct},lt))}),Toolbar$1=Toolbar,KeyboardArrowLeft=createSvgIcon$1(jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),KeyboardArrowRight=createSvgIcon$1(jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var _LastPageIcon,_FirstPageIcon,_KeyboardArrowRight$1,_KeyboardArrowLeft$1,_KeyboardArrowLeft2,_KeyboardArrowRight2,_FirstPageIcon2,_LastPageIcon2;const _excluded$1m=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],TablePaginationActions=reactExports.forwardRef(function(et,rt){const{backIconButtonProps:nt,count:ot,getItemAriaLabel:it,nextIconButtonProps:st,onPageChange:at,page:lt,rowsPerPage:ct,showFirstButton:pt,showLastButton:ut}=et,ht=_objectWithoutPropertiesLoose(et,_excluded$1m),ft=useTheme(),gt=Et=>{at(Et,0)},vt=Et=>{at(Et,lt-1)},yt=Et=>{at(Et,lt+1)},mt=Et=>{at(Et,Math.max(0,Math.ceil(ot/ct)-1))};return jsxs("div",_extends({ref:rt},ht,{children:[pt&&jsx(IconButton$1,{onClick:gt,disabled:lt===0,"aria-label":it("first",lt),title:it("first",lt),children:ft.direction==="rtl"?_LastPageIcon||(_LastPageIcon=jsx(LastPageIcon,{})):_FirstPageIcon||(_FirstPageIcon=jsx(FirstPageIcon,{}))}),jsx(IconButton$1,_extends({onClick:vt,disabled:lt===0,color:"inherit","aria-label":it("previous",lt),title:it("previous",lt)},nt,{children:ft.direction==="rtl"?_KeyboardArrowRight$1||(_KeyboardArrowRight$1=jsx(KeyboardArrowRight,{})):_KeyboardArrowLeft$1||(_KeyboardArrowLeft$1=jsx(KeyboardArrowLeft,{}))})),jsx(IconButton$1,_extends({onClick:yt,disabled:ot!==-1?lt>=Math.ceil(ot/ct)-1:!1,color:"inherit","aria-label":it("next",lt),title:it("next",lt)},st,{children:ft.direction==="rtl"?_KeyboardArrowLeft2||(_KeyboardArrowLeft2=jsx(KeyboardArrowLeft,{})):_KeyboardArrowRight2||(_KeyboardArrowRight2=jsx(KeyboardArrowRight,{}))})),ut&&jsx(IconButton$1,{onClick:mt,disabled:lt>=Math.ceil(ot/ct)-1,"aria-label":it("last",lt),title:it("last",lt),children:ft.direction==="rtl"?_FirstPageIcon2||(_FirstPageIcon2=jsx(FirstPageIcon,{})):_LastPageIcon2||(_LastPageIcon2=jsx(LastPageIcon,{}))})]}))}),TablePaginationActions$1=TablePaginationActions;function getTablePaginationUtilityClass(_e){return generateUtilityClass("MuiTablePagination",_e)}const tablePaginationClasses=generateUtilityClasses("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),tablePaginationClasses$1=tablePaginationClasses;var _InputBase;const _excluded$1l=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],TablePaginationRoot=styled$1(TableCell$1,{name:"MuiTablePagination",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>({overflow:"auto",color:(_e.vars||_e).palette.text.primary,fontSize:_e.typography.pxToRem(14),"&:last-child":{padding:0}})),TablePaginationToolbar=styled$1(Toolbar$1,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(_e,et)=>_extends({[`& .${tablePaginationClasses$1.actions}`]:et.actions},et.toolbar)})(({theme:_e})=>({minHeight:52,paddingRight:2,[`${_e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[_e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${tablePaginationClasses$1.actions}`]:{flexShrink:0,marginLeft:20}})),TablePaginationSpacer=styled$1("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(_e,et)=>et.spacer})({flex:"1 1 100%"}),TablePaginationSelectLabel=styled$1("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(_e,et)=>et.selectLabel})(({theme:_e})=>_extends({},_e.typography.body2,{flexShrink:0})),TablePaginationSelect=styled$1(Select$1,{name:"MuiTablePagination",slot:"Select",overridesResolver:(_e,et)=>_extends({[`& .${tablePaginationClasses$1.selectIcon}`]:et.selectIcon,[`& .${tablePaginationClasses$1.select}`]:et.select},et.input,et.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${tablePaginationClasses$1.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),TablePaginationMenuItem=styled$1(MenuItem$1,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(_e,et)=>et.menuItem})({}),TablePaginationDisplayedRows=styled$1("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(_e,et)=>et.displayedRows})(({theme:_e})=>_extends({},_e.typography.body2,{flexShrink:0}));function defaultLabelDisplayedRows({from:_e,to:et,count:rt}){return`${_e}–${et} of ${rt!==-1?rt:`more than ${et}`}`}function defaultGetAriaLabel(_e){return`Go to ${_e} page`}const useUtilityClasses$10=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},getTablePaginationUtilityClass,et)},TablePagination=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTablePagination"}),{ActionsComponent:ot=TablePaginationActions$1,backIconButtonProps:it,className:st,colSpan:at,component:lt=TableCell$1,count:ct,getItemAriaLabel:pt=defaultGetAriaLabel,labelDisplayedRows:ut=defaultLabelDisplayedRows,labelRowsPerPage:ht="Rows per page:",nextIconButtonProps:ft,onPageChange:gt,onRowsPerPageChange:vt,page:yt,rowsPerPage:mt,rowsPerPageOptions:Et=[10,25,50,100],SelectProps:bt={},showFirstButton:Ct=!1,showLastButton:Tt=!1}=nt,wt=_objectWithoutPropertiesLoose(nt,_excluded$1l),Rt=nt,It=useUtilityClasses$10(Rt),St=bt.native?"option":TablePaginationMenuItem;let Pt;(lt===TableCell$1||lt==="td")&&(Pt=at||1e3);const Ot=useId(bt.id),Ut=useId(bt.labelId),Bt=()=>ct===-1?(yt+1)*mt:mt===-1?ct:Math.min(ct,(yt+1)*mt);return jsx(TablePaginationRoot,_extends({colSpan:Pt,ref:rt,as:lt,ownerState:Rt,className:clsx(It.root,st)},wt,{children:jsxs(TablePaginationToolbar,{className:It.toolbar,children:[jsx(TablePaginationSpacer,{className:It.spacer}),Et.length>1&&jsx(TablePaginationSelectLabel,{className:It.selectLabel,id:Ut,children:ht}),Et.length>1&&jsx(TablePaginationSelect,_extends({variant:"standard"},!bt.variant&&{input:_InputBase||(_InputBase=jsx(InputBase$1,{}))},{value:mt,onChange:vt,id:Ot,labelId:Ut},bt,{classes:_extends({},bt.classes,{root:clsx(It.input,It.selectRoot,(bt.classes||{}).root),select:clsx(It.select,(bt.classes||{}).select),icon:clsx(It.selectIcon,(bt.classes||{}).icon)}),children:Et.map(xt=>reactExports.createElement(St,_extends({},!isHostComponent(St)&&{ownerState:Rt},{className:It.menuItem,key:xt.label?xt.label:xt,value:xt.value?xt.value:xt}),xt.label?xt.label:xt))})),jsx(TablePaginationDisplayedRows,{className:It.displayedRows,children:ut({from:ct===0?0:yt*mt+1,to:Bt(),count:ct===-1?-1:ct,page:yt})}),jsx(ot,{className:It.actions,backIconButtonProps:it,count:ct,nextIconButtonProps:ft,onPageChange:gt,page:yt,rowsPerPage:mt,showFirstButton:Ct,showLastButton:Tt,getItemAriaLabel:pt})]})}))}),TablePagination$1=TablePagination;function easeInOutSin(_e){return(1+Math.sin(Math.PI*_e-Math.PI/2))/2}function animate(_e,et,rt,nt={},ot=()=>{}){const{ease:it=easeInOutSin,duration:st=300}=nt;let at=null;const lt=et[_e];let ct=!1;const pt=()=>{ct=!0},ut=ht=>{if(ct){ot(new Error("Animation cancelled"));return}at===null&&(at=ht);const ft=Math.min(1,(ht-at)/st);if(et[_e]=it(ft)*(rt-lt)+lt,ft>=1){requestAnimationFrame(()=>{ot(null)});return}requestAnimationFrame(ut)};return lt===rt?(ot(new Error("Element already at target position")),pt):(requestAnimationFrame(ut),pt)}const _excluded$1k=["onChange"],styles={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function ScrollbarSize(_e){const{onChange:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$1k),nt=reactExports.useRef(),ot=reactExports.useRef(null),it=()=>{nt.current=ot.current.offsetHeight-ot.current.clientHeight};return reactExports.useEffect(()=>{const st=debounce$2(()=>{const lt=nt.current;it(),lt!==nt.current&&et(nt.current)}),at=ownerWindow(ot.current);return at.addEventListener("resize",st),()=>{st.clear(),at.removeEventListener("resize",st)}},[et]),reactExports.useEffect(()=>{it(),et(nt.current)},[et]),jsx("div",_extends({style:styles,ref:ot},rt))}function getTabScrollButtonUtilityClass(_e){return generateUtilityClass("MuiTabScrollButton",_e)}const tabScrollButtonClasses=generateUtilityClasses("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),tabScrollButtonClasses$1=tabScrollButtonClasses;var _KeyboardArrowLeft,_KeyboardArrowRight;const _excluded$1j=["className","direction","orientation","disabled"],useUtilityClasses$$=_e=>{const{classes:et,orientation:rt,disabled:nt}=_e;return composeClasses({root:["root",rt,nt&&"disabled"]},getTabScrollButtonUtilityClass,et)},TabScrollButtonRoot=styled$1(ButtonBase$1,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.root,rt.orientation&&et[rt.orientation]]}})(({ownerState:_e})=>_extends({width:40,flexShrink:0,opacity:.8,[`&.${tabScrollButtonClasses$1.disabled}`]:{opacity:0}},_e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${_e.isRtl?-90:90}deg)`}})),TabScrollButton=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTabScrollButton"}),{className:ot,direction:it}=nt,st=_objectWithoutPropertiesLoose(nt,_excluded$1j),lt=useTheme().direction==="rtl",ct=_extends({isRtl:lt},nt),pt=useUtilityClasses$$(ct);return jsx(TabScrollButtonRoot,_extends({component:"div",className:clsx(pt.root,ot),ref:rt,role:null,ownerState:ct,tabIndex:null},st,{children:it==="left"?_KeyboardArrowLeft||(_KeyboardArrowLeft=jsx(KeyboardArrowLeft,{fontSize:"small"})):_KeyboardArrowRight||(_KeyboardArrowRight=jsx(KeyboardArrowRight,{fontSize:"small"}))}))}),TabScrollButton$1=TabScrollButton;function getTabsUtilityClass(_e){return generateUtilityClass("MuiTabs",_e)}const tabsClasses=generateUtilityClasses("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),tabsClasses$1=tabsClasses,_excluded$1i=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],nextItem=(_e,et)=>_e===et?_e.firstChild:et&&et.nextElementSibling?et.nextElementSibling:_e.firstChild,previousItem=(_e,et)=>_e===et?_e.lastChild:et&&et.previousElementSibling?et.previousElementSibling:_e.lastChild,moveFocus=(_e,et,rt)=>{let nt=!1,ot=rt(_e,et);for(;ot;){if(ot===_e.firstChild){if(nt)return;nt=!0}const it=ot.disabled||ot.getAttribute("aria-disabled")==="true";if(!ot.hasAttribute("tabindex")||it)ot=rt(_e,ot);else{ot.focus();return}}},useUtilityClasses$_=_e=>{const{vertical:et,fixed:rt,hideScrollbar:nt,scrollableX:ot,scrollableY:it,centered:st,scrollButtonsHideMobile:at,classes:lt}=_e;return composeClasses({root:["root",et&&"vertical"],scroller:["scroller",rt&&"fixed",nt&&"hideScrollbar",ot&&"scrollableX",it&&"scrollableY"],flexContainer:["flexContainer",et&&"flexContainerVertical",st&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",at&&"scrollButtonsHideMobile"],scrollableX:[ot&&"scrollableX"],hideScrollbar:[nt&&"hideScrollbar"]},getTabsUtilityClass,lt)},TabsRoot=styled$1("div",{name:"MuiTabs",slot:"Root",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[{[`& .${tabsClasses$1.scrollButtons}`]:et.scrollButtons},{[`& .${tabsClasses$1.scrollButtons}`]:rt.scrollButtonsHideMobile&&et.scrollButtonsHideMobile},et.root,rt.vertical&&et.vertical]}})(({ownerState:_e,theme:et})=>_extends({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},_e.vertical&&{flexDirection:"column"},_e.scrollButtonsHideMobile&&{[`& .${tabsClasses$1.scrollButtons}`]:{[et.breakpoints.down("sm")]:{display:"none"}}})),TabsScroller=styled$1("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.scroller,rt.fixed&&et.fixed,rt.hideScrollbar&&et.hideScrollbar,rt.scrollableX&&et.scrollableX,rt.scrollableY&&et.scrollableY]}})(({ownerState:_e})=>_extends({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},_e.fixed&&{overflowX:"hidden",width:"100%"},_e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},_e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},_e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),FlexContainer=styled$1("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(_e,et)=>{const{ownerState:rt}=_e;return[et.flexContainer,rt.vertical&&et.flexContainerVertical,rt.centered&&et.centered]}})(({ownerState:_e})=>_extends({display:"flex"},_e.vertical&&{flexDirection:"column"},_e.centered&&{justifyContent:"center"})),TabsIndicator=styled$1("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(_e,et)=>et.indicator})(({ownerState:_e,theme:et})=>_extends({position:"absolute",height:2,bottom:0,width:"100%",transition:et.transitions.create()},_e.indicatorColor==="primary"&&{backgroundColor:(et.vars||et).palette.primary.main},_e.indicatorColor==="secondary"&&{backgroundColor:(et.vars||et).palette.secondary.main},_e.vertical&&{height:"100%",width:2,right:0})),TabsScrollbarSize=styled$1(ScrollbarSize,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),defaultIndicatorStyle={},Tabs=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTabs"}),ot=useTheme(),it=ot.direction==="rtl",{"aria-label":st,"aria-labelledby":at,action:lt,centered:ct=!1,children:pt,className:ut,component:ht="div",allowScrollButtonsMobile:ft=!1,indicatorColor:gt="primary",onChange:vt,orientation:yt="horizontal",ScrollButtonComponent:mt=TabScrollButton$1,scrollButtons:Et="auto",selectionFollowsFocus:bt,TabIndicatorProps:Ct={},TabScrollButtonProps:Tt={},textColor:wt="primary",value:Rt,variant:It="standard",visibleScrollbar:St=!1}=nt,Pt=_objectWithoutPropertiesLoose(nt,_excluded$1i),Ot=It==="scrollable",Ut=yt==="vertical",Bt=Ut?"scrollTop":"scrollLeft",xt=Ut?"top":"left",At=Ut?"bottom":"right",Mt=Ut?"clientHeight":"clientWidth",Nt=Ut?"height":"width",$t=_extends({},nt,{component:ht,allowScrollButtonsMobile:ft,indicatorColor:gt,orientation:yt,vertical:Ut,scrollButtons:Et,textColor:wt,variant:It,visibleScrollbar:St,fixed:!Ot,hideScrollbar:Ot&&!St,scrollableX:Ot&&!Ut,scrollableY:Ot&&Ut,centered:ct&&!Ot,scrollButtonsHideMobile:!ft}),Ft=useUtilityClasses$_($t),[jt,zt]=reactExports.useState(!1),[Yt,Kt]=reactExports.useState(defaultIndicatorStyle),[er,ir]=reactExports.useState({start:!1,end:!1}),[rr,lr]=reactExports.useState({overflow:"hidden",scrollbarWidth:0}),nr=new Map,hr=reactExports.useRef(null),vr=reactExports.useRef(null),yr=()=>{const dr=hr.current;let mr;if(dr){const Rr=dr.getBoundingClientRect();mr={clientWidth:dr.clientWidth,scrollLeft:dr.scrollLeft,scrollTop:dr.scrollTop,scrollLeftNormalized:getNormalizedScrollLeft(dr,ot.direction),scrollWidth:dr.scrollWidth,top:Rr.top,bottom:Rr.bottom,left:Rr.left,right:Rr.right}}let br;if(dr&&Rt!==!1){const Rr=vr.current.children;if(Rr.length>0){const Pr=Rr[nr.get(Rt)];br=Pr?Pr.getBoundingClientRect():null}}return{tabsMeta:mr,tabMeta:br}},Cr=useEventCallback(()=>{const{tabsMeta:dr,tabMeta:mr}=yr();let br=0,Rr;if(Ut)Rr="top",mr&&dr&&(br=mr.top-dr.top+dr.scrollTop);else if(Rr=it?"right":"left",mr&&dr){const Or=it?dr.scrollLeftNormalized+dr.clientWidth-dr.scrollWidth:dr.scrollLeft;br=(it?-1:1)*(mr[Rr]-dr[Rr]+Or)}const Pr={[Rr]:br,[Nt]:mr?mr[Nt]:0};if(isNaN(Yt[Rr])||isNaN(Yt[Nt]))Kt(Pr);else{const Or=Math.abs(Yt[Rr]-Pr[Rr]),Nr=Math.abs(Yt[Nt]-Pr[Nt]);(Or>=1||Nr>=1)&&Kt(Pr)}}),or=(dr,{animation:mr=!0}={})=>{mr?animate(Bt,hr.current,dr,{duration:ot.transitions.duration.standard}):hr.current[Bt]=dr},ur=dr=>{let mr=hr.current[Bt];Ut?mr+=dr:(mr+=dr*(it?-1:1),mr*=it&&detectScrollType()==="reverse"?-1:1),or(mr)},pr=()=>{const dr=hr.current[Mt];let mr=0;const br=Array.from(vr.current.children);for(let Rr=0;Rr<br.length;Rr+=1){const Pr=br[Rr];if(mr+Pr[Mt]>dr){Rr===0&&(mr=dr);break}mr+=Pr[Mt]}return mr},Er=()=>{ur(-1*pr())},Sr=()=>{ur(pr())},Ht=reactExports.useCallback(dr=>{lr({overflow:null,scrollbarWidth:dr})},[]),qt=()=>{const dr={};dr.scrollbarSizeListener=Ot?jsx(TabsScrollbarSize,{onChange:Ht,className:clsx(Ft.scrollableX,Ft.hideScrollbar)}):null;const mr=er.start||er.end,br=Ot&&(Et==="auto"&&mr||Et===!0);return dr.scrollButtonStart=br?jsx(mt,_extends({orientation:yt,direction:it?"right":"left",onClick:Er,disabled:!er.start},Tt,{className:clsx(Ft.scrollButtons,Tt.className)})):null,dr.scrollButtonEnd=br?jsx(mt,_extends({orientation:yt,direction:it?"left":"right",onClick:Sr,disabled:!er.end},Tt,{className:clsx(Ft.scrollButtons,Tt.className)})):null,dr},fr=useEventCallback(dr=>{const{tabsMeta:mr,tabMeta:br}=yr();if(!(!br||!mr)){if(br[xt]<mr[xt]){const Rr=mr[Bt]+(br[xt]-mr[xt]);or(Rr,{animation:dr})}else if(br[At]>mr[At]){const Rr=mr[Bt]+(br[At]-mr[At]);or(Rr,{animation:dr})}}}),cr=useEventCallback(()=>{if(Ot&&Et!==!1){const{scrollTop:dr,scrollHeight:mr,clientHeight:br,scrollWidth:Rr,clientWidth:Pr}=hr.current;let Or,Nr;if(Ut)Or=dr>1,Nr=dr<mr-br-1;else{const Br=getNormalizedScrollLeft(hr.current,ot.direction);Or=it?Br<Rr-Pr-1:Br>1,Nr=it?Br>1:Br<Rr-Pr-1}(Or!==er.start||Nr!==er.end)&&ir({start:Or,end:Nr})}});reactExports.useEffect(()=>{const dr=debounce$2(()=>{hr.current&&(Cr(),cr())}),mr=ownerWindow(hr.current);mr.addEventListener("resize",dr);let br;return typeof ResizeObserver<"u"&&(br=new ResizeObserver(dr),Array.from(vr.current.children).forEach(Rr=>{br.observe(Rr)})),()=>{dr.clear(),mr.removeEventListener("resize",dr),br&&br.disconnect()}},[Cr,cr]);const Ar=reactExports.useMemo(()=>debounce$2(()=>{cr()}),[cr]);reactExports.useEffect(()=>()=>{Ar.clear()},[Ar]),reactExports.useEffect(()=>{zt(!0)},[]),reactExports.useEffect(()=>{Cr(),cr()}),reactExports.useEffect(()=>{fr(defaultIndicatorStyle!==Yt)},[fr,Yt]),reactExports.useImperativeHandle(lt,()=>({updateIndicator:Cr,updateScrollButtons:cr}),[Cr,cr]);const Gr=jsx(TabsIndicator,_extends({},Ct,{className:clsx(Ft.indicator,Ct.className),ownerState:$t,style:_extends({},Yt,Ct.style)}));let Qr=0;const hn=reactExports.Children.map(pt,dr=>{if(!reactExports.isValidElement(dr))return null;const mr=dr.props.value===void 0?Qr:dr.props.value;nr.set(mr,Qr);const br=mr===Rt;return Qr+=1,reactExports.cloneElement(dr,_extends({fullWidth:It==="fullWidth",indicator:br&&!jt&&Gr,selected:br,selectionFollowsFocus:bt,onChange:vt,textColor:wt,value:mr},Qr===1&&Rt===!1&&!dr.props.tabIndex?{tabIndex:0}:{}))}),sn=dr=>{const mr=vr.current,br=ownerDocument(mr).activeElement;if(br.getAttribute("role")!=="tab")return;let Pr=yt==="horizontal"?"ArrowLeft":"ArrowUp",Or=yt==="horizontal"?"ArrowRight":"ArrowDown";switch(yt==="horizontal"&&it&&(Pr="ArrowRight",Or="ArrowLeft"),dr.key){case Pr:dr.preventDefault(),moveFocus(mr,br,previousItem);break;case Or:dr.preventDefault(),moveFocus(mr,br,nextItem);break;case"Home":dr.preventDefault(),moveFocus(mr,null,nextItem);break;case"End":dr.preventDefault(),moveFocus(mr,null,previousItem);break}},qr=qt();return jsxs(TabsRoot,_extends({className:clsx(Ft.root,ut),ownerState:$t,ref:rt,as:ht},Pt,{children:[qr.scrollButtonStart,qr.scrollbarSizeListener,jsxs(TabsScroller,{className:Ft.scroller,ownerState:$t,style:{overflow:rr.overflow,[Ut?`margin${it?"Left":"Right"}`:"marginBottom"]:St?void 0:-rr.scrollbarWidth},ref:hr,onScroll:Ar,children:[jsx(FlexContainer,{"aria-label":st,"aria-labelledby":at,"aria-orientation":yt==="vertical"?"vertical":null,className:Ft.flexContainer,ownerState:$t,onKeyDown:sn,ref:vr,role:"tablist",children:hn}),jt&&Gr]}),qr.scrollButtonEnd]}))}),Tabs$1=Tabs;function getTextFieldUtilityClass(_e){return generateUtilityClass("MuiTextField",_e)}generateUtilityClasses("MuiTextField",["root"]);const _excluded$1h=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],variantComponent={standard:Input$1,filled:FilledInput$1,outlined:OutlinedInput$1},useUtilityClasses$Z=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getTextFieldUtilityClass,et)},TextFieldRoot=styled$1(FormControl$1,{name:"MuiTextField",slot:"Root",overridesResolver:(_e,et)=>et.root})({}),TextField=reactExports.forwardRef(function(et,rt){const nt=useThemeProps({props:et,name:"MuiTextField"}),{autoComplete:ot,autoFocus:it=!1,children:st,className:at,color:lt="primary",defaultValue:ct,disabled:pt=!1,error:ut=!1,FormHelperTextProps:ht,fullWidth:ft=!1,helperText:gt,id:vt,InputLabelProps:yt,inputProps:mt,InputProps:Et,inputRef:bt,label:Ct,maxRows:Tt,minRows:wt,multiline:Rt=!1,name:It,onBlur:St,onChange:Pt,onFocus:Ot,placeholder:Ut,required:Bt=!1,rows:xt,select:At=!1,SelectProps:Mt,type:Nt,value:$t,variant:Ft="outlined"}=nt,jt=_objectWithoutPropertiesLoose(nt,_excluded$1h),zt=_extends({},nt,{autoFocus:it,color:lt,disabled:pt,error:ut,fullWidth:ft,multiline:Rt,required:Bt,select:At,variant:Ft}),Yt=useUtilityClasses$Z(zt),Kt={};Ft==="outlined"&&(yt&&typeof yt.shrink<"u"&&(Kt.notched=yt.shrink),Kt.label=Ct),At&&((!Mt||!Mt.native)&&(Kt.id=void 0),Kt["aria-describedby"]=void 0);const er=useId(vt),ir=gt&&er?`${er}-helper-text`:void 0,rr=Ct&&er?`${er}-label`:void 0,lr=variantComponent[Ft],nr=jsx(lr,_extends({"aria-describedby":ir,autoComplete:ot,autoFocus:it,defaultValue:ct,fullWidth:ft,multiline:Rt,name:It,rows:xt,maxRows:Tt,minRows:wt,type:Nt,value:$t,id:er,inputRef:bt,onBlur:St,onChange:Pt,onFocus:Ot,placeholder:Ut,inputProps:mt},Kt,Et));return jsxs(TextFieldRoot,_extends({className:clsx(Yt.root,at),disabled:pt,error:ut,fullWidth:ft,ref:rt,required:Bt,color:lt,variant:Ft,ownerState:zt},jt,{children:[Ct!=null&&Ct!==""&&jsx(InputLabel$1,_extends({htmlFor:er,id:rr},yt,{children:Ct})),At?jsx(Select$1,_extends({"aria-describedby":ir,id:er,labelId:rr,value:$t,input:nr},Mt,{children:st})):nr,gt&&jsx(FormHelperText$1,_extends({id:ir},ht,{children:gt}))]}))}),TextField$1=TextField;function PageNotFound(){return jsx("center",{children:jsxs(Typography$1,{variant:"h3",children:["Page Not Found Go back ",jsx(Link$2,{to:"/",children:"Home"})]})})}function e$1(_e){this.message=_e}e$1.prototype=new Error,e$1.prototype.name="InvalidCharacterError";var r$4=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(_e){var et=String(_e).replace(/=+$/,"");if(et.length%4==1)throw new e$1("'atob' failed: The string to be decoded is not correctly encoded.");for(var rt,nt,ot=0,it=0,st="";nt=et.charAt(it++);~nt&&(rt=ot%4?64*rt+nt:nt,ot++%4)?st+=String.fromCharCode(255&rt>>(-2*ot&6)):0)nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt);return st};function t$3(_e){var et=_e.replace(/-/g,"+").replace(/_/g,"/");switch(et.length%4){case 0:break;case 2:et+="==";break;case 3:et+="=";break;default:throw"Illegal base64url string!"}try{return function(rt){return decodeURIComponent(r$4(rt).replace(/(.)/g,function(nt,ot){var it=ot.charCodeAt(0).toString(16).toUpperCase();return it.length<2&&(it="0"+it),"%"+it}))}(et)}catch{return r$4(et)}}function n$3(_e){this.message=_e}function o$1(_e,et){if(typeof _e!="string")throw new n$3("Invalid token specified");var rt=(et=et||{}).header===!0?0:1;try{return JSON.parse(t$3(_e.split(".")[rt]))}catch(nt){throw new n$3("Invalid token specified: "+nt.message)}}n$3.prototype=new Error,n$3.prototype.name="InvalidTokenError";/*! js-cookie v3.0.1 | MIT */function assign$1(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)_e[nt]=rt[nt]}return _e}var defaultConverter={read:function(_e){return _e[0]==='"'&&(_e=_e.slice(1,-1)),_e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(_e){return encodeURIComponent(_e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(_e,et){function rt(ot,it,st){if(!(typeof document>"u")){st=assign$1({},et,st),typeof st.expires=="number"&&(st.expires=new Date(Date.now()+st.expires*864e5)),st.expires&&(st.expires=st.expires.toUTCString()),ot=encodeURIComponent(ot).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var at="";for(var lt in st)st[lt]&&(at+="; "+lt,st[lt]!==!0&&(at+="="+st[lt].split(";")[0]));return document.cookie=ot+"="+_e.write(it,ot)+at}}function nt(ot){if(!(typeof document>"u"||arguments.length&&!ot)){for(var it=document.cookie?document.cookie.split("; "):[],st={},at=0;at<it.length;at++){var lt=it[at].split("="),ct=lt.slice(1).join("=");try{var pt=decodeURIComponent(lt[0]);if(st[pt]=_e.read(ct,pt),ot===pt)break}catch{}}return ot?st[ot]:st}}return Object.create({set:rt,get:nt,remove:function(ot,it){rt(ot,"",assign$1({},it,{expires:-1}))},withAttributes:function(ot){return init(this.converter,assign$1({},this.attributes,ot))},withConverter:function(ot){return init(assign$1({},this.converter,ot),this.attributes)}},{attributes:{value:Object.freeze(et)},converter:{value:Object.freeze(_e)}})}var api=init(defaultConverter,{path:"/"});const auth$1={username:"",name:"",isAuthenticated:!1,roles:"",authenticate(_e){api.set("token",_e,{expires:7,sameSite:"strict"}),this.isAuthenticated=!0;const et=o$1(_e);this.name=et.name,this.roles=et.roles},logout(){api.remove("token"),this.isAuthenticated=!1,this.roles=""},getToken(){return api.get("token")},init(){const _e=this.getToken();if(_e){const et=o$1(_e);this.roles=et.roles,this.isAuthenticated=!0,this.name=et.name}}};auth$1.init();const RequireAuth=({allowedRoles:_e})=>{const et=useLocation();return _e!=null&&_e.includes(auth$1.roles)?jsx(Outlet,{}):auth$1.isAuthenticated?jsx(Navigate,{to:"/unauthorized",state:{from:et},replace:!0}):jsx(Navigate,{to:"/login",state:{from:et},replace:!0})};function Unauthorized(){return jsx("center",{children:jsxs(Typography$1,{variant:"h3",children:["Not Authorized Go back ",jsx(Link$2,{to:"/",children:"Home"})]})})}const numberStyle={backgroundImage:"linear-gradient(195deg, rgb(73, 163, 241), rgb(26, 115, 232))",backgroundSize:"100%",backgroundRepeat:"repeat",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",color:"rgb(26, 115, 232)"};function Home(){return jsx(Box$1,{style:{padding:"24px 0"},children:jsx(Container$1,{fullwidth:"lg",children:jsxs(Grid$1,{container:!0,direction:"row",justifyContent:"center",spacing:2,children:[jsx(Grid$1,{item:!0,xs:12,md:4,children:jsxs(Box$1,{textAlign:"center",children:[jsx(Typography$1,{variant:"h1",children:jsx("span",{style:numberStyle,children:"3+"})}),jsx(Typography$1,{variant:"h5",children:"It domains"}),jsx(Typography$1,{variant:"body2",children:"Streamline your project with us in various domains."})]})}),jsx(Divider$1,{orientation:"vertical",flexItem:!0,sx:{mr:"-1px"}}),jsx(Grid$1,{item:!0,xs:12,md:4,children:jsxs(Box$1,{textAlign:"center",children:[jsx(Typography$1,{variant:"h1",children:jsx("span",{style:numberStyle,children:"100+"})}),jsx(Typography$1,{variant:"h5",children:"Registered members"}),jsx(Typography$1,{variant:"body2",children:"Join the growing community of learners: members registered and counting!"})]})}),jsx(Divider$1,{orientation:"vertical",flexItem:!0,sx:{mr:"-1px"}}),jsx(Grid$1,{item:!0,xs:12,md:4,children:jsxs(Box$1,{textAlign:"center",children:[jsx("span",{style:numberStyle,children:"4.2"}),jsx(Typography$1,{variant:"h5",children:"User Satisfaction"}),jsx(Typography$1,{variant:"body2",children:"Start journey with us to increase efficiency, reduce costs, and accelerate the delivery of high-quality results"})]})})]})})})}function AlertDialogBox({open:_e,setOpen:et,handleSuccess:rt,title:nt,data:ot}){const it=()=>{et(!1)};return jsx("div",{children:jsxs(Dialog$1,{open:_e,onClose:it,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[jsx(DialogTitle$1,{id:"alert-dialog-title",children:nt}),jsx(DialogContent$1,{children:jsx(DialogContentText$1,{id:"alert-dialog-description",children:ot})}),jsxs(DialogActions$1,{children:[jsx(Button$1,{variant:"contained",color:"error",onClick:it,children:"Cancel"}),jsx(Button$1,{variant:"contained",color:"secondary",onClick:rt,autoFocus:!0,children:"Agree"})]})]})})}const logo="/assets/logo-83021f9f.png";function ExamHeader({duration:_e,setSubmitOpen:et}){const rt=reactExports.useRef(null),nt=useNavigate(),[ot,it]=reactExports.useState(!1),[st,at]=reactExports.useState("00:00:00"),lt=ft=>{const gt=Date.parse(ft)-Date.parse(new Date),vt=Math.floor(gt/1e3%60),yt=Math.floor(gt/1e3/60%60),mt=Math.floor(gt/1e3/60/60%24);return{total:gt,hours:mt,minutes:yt,seconds:vt}},ct=ft=>{let{total:gt,hours:vt,minutes:yt,seconds:mt}=lt(ft);gt>=0&&at((vt>9?vt:"0"+vt)+":"+(yt>9?yt:"0"+yt)+":"+(mt>9?mt:"0"+mt))},pt=()=>{const ft=ut();rt.current&&clearInterval(rt.current);const gt=setInterval(()=>{ct(ft)},1e3);rt.current=gt},ut=()=>{let ft=new Date;return ft.setSeconds(ft.getSeconds()+_e),ft},ht=()=>{nt("/quiz")};return reactExports.useEffect(()=>{pt()},[]),jsx(Fragment,{children:jsxs(AppBar$1,{color:"default",position:"static",children:[jsx(AlertDialogBox,{open:ot,setOpen:it,handleSuccess:ht,title:"You really want to quit?",data:"If You Exit now your quiz will not be submmited and you will not be able to reapeare in the exam are you really sure you want to exit ?"}),jsx(Container$1,{maxWidth:"xl",children:jsxs(Toolbar$1,{disableGutters:!0,children:[jsx(Avatar$1,{src:logo}),jsx(Typography$1,{variant:"h6",noWrap:!0,sx:{mr:2,ml:2,display:"flex",fontWeight:700,color:"inherit",textDecoration:"none"},children:"Procto Vigil"}),jsx(Box$1,{sx:{flexGrow:1}}),jsx(Box$1,{children:jsx(Typography$1,{variant:"h6",children:"Time:"})}),jsx(Box$1,{sx:{marginLeft:"10px",minWidth:"80px"},children:jsx(Typography$1,{variant:"h6",children:st})}),jsxs(Box$1,{sx:{marginLeft:"30px",display:"flex",gap:1},children:[jsx(Button$1,{color:"error",variant:"contained",onClick:()=>it(!0),children:"Cancel"}),jsx(Button$1,{color:"secondary",variant:"contained",onClick:()=>et(!0),children:"Submit"})]})]})})]})})}var cjsExports={},cjs={get exports(){return cjsExports},set exports(_e){cjsExports=_e}},Draggable$1={};const require$$3=getAugmentedNamespace(clsx_m);var domFns={},shims={};Object.defineProperty(shims,"__esModule",{value:!0});shims.dontSetMe=dontSetMe;shims.findInArray=findInArray;shims.int=int;shims.isFunction=isFunction$3;shims.isNum=isNum;function findInArray(_e,et){for(var rt=0,nt=_e.length;rt<nt;rt++)if(et.apply(et,[_e[rt],rt,_e]))return _e[rt]}function isFunction$3(_e){return typeof _e=="function"||Object.prototype.toString.call(_e)==="[object Function]"}function isNum(_e){return typeof _e=="number"&&!isNaN(_e)}function int(_e){return parseInt(_e,10)}function dontSetMe(_e,et,rt){if(_e[et])return new Error("Invalid prop ".concat(et," passed to ").concat(rt," - do not set this, set it on the child."))}var getPrefix$1={};Object.defineProperty(getPrefix$1,"__esModule",{value:!0});getPrefix$1.browserPrefixToKey=browserPrefixToKey;getPrefix$1.browserPrefixToStyle=browserPrefixToStyle;getPrefix$1.default=void 0;getPrefix$1.getPrefix=getPrefix;var prefixes=["Moz","Webkit","O","ms"];function getPrefix(){var _e,et,rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var nt=(_e=window.document)===null||_e===void 0||(et=_e.documentElement)===null||et===void 0?void 0:et.style;if(!nt||rt in nt)return"";for(var ot=0;ot<prefixes.length;ot++)if(browserPrefixToKey(rt,prefixes[ot])in nt)return prefixes[ot];return""}function browserPrefixToKey(_e,et){return et?"".concat(et).concat(kebabToTitleCase(_e)):_e}function browserPrefixToStyle(_e,et){return et?"-".concat(et.toLowerCase(),"-").concat(_e):_e}function kebabToTitleCase(_e){for(var et="",rt=!0,nt=0;nt<_e.length;nt++)rt?(et+=_e[nt].toUpperCase(),rt=!1):_e[nt]==="-"?rt=!0:et+=_e[nt];return et}var _default$i=getPrefix();getPrefix$1.default=_default$i;function _typeof$B(_e){return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$B(_e)}Object.defineProperty(domFns,"__esModule",{value:!0});domFns.addClassName=addClassName;domFns.addEvent=addEvent;domFns.addUserSelectStyles=addUserSelectStyles;domFns.createCSSTransform=createCSSTransform;domFns.createSVGTransform=createSVGTransform;domFns.getTouch=getTouch;domFns.getTouchIdentifier=getTouchIdentifier;domFns.getTranslation=getTranslation;domFns.innerHeight=innerHeight;domFns.innerWidth=innerWidth;domFns.matchesSelector=matchesSelector;domFns.matchesSelectorAndParentsTo=matchesSelectorAndParentsTo;domFns.offsetXYFromParent=offsetXYFromParent;domFns.outerHeight=outerHeight;domFns.outerWidth=outerWidth;domFns.removeClassName=removeClassName;domFns.removeEvent=removeEvent;domFns.removeUserSelectStyles=removeUserSelectStyles;var _shims$2=shims,_getPrefix=_interopRequireWildcard$1(getPrefix$1);function _getRequireWildcardCache$1(_e){if(typeof WeakMap!="function")return null;var et=new WeakMap,rt=new WeakMap;return(_getRequireWildcardCache$1=function(ot){return ot?rt:et})(_e)}function _interopRequireWildcard$1(_e,et){if(!et&&_e&&_e.__esModule)return _e;if(_e===null||_typeof$B(_e)!=="object"&&typeof _e!="function")return{default:_e};var rt=_getRequireWildcardCache$1(et);if(rt&&rt.has(_e))return rt.get(_e);var nt={},ot=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in _e)if(it!=="default"&&Object.prototype.hasOwnProperty.call(_e,it)){var st=ot?Object.getOwnPropertyDescriptor(_e,it):null;st&&(st.get||st.set)?Object.defineProperty(nt,it,st):nt[it]=_e[it]}return nt.default=_e,rt&&rt.set(_e,nt),nt}function ownKeys$1(_e,et){var rt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);et&&(nt=nt.filter(function(ot){return Object.getOwnPropertyDescriptor(_e,ot).enumerable})),rt.push.apply(rt,nt)}return rt}function _objectSpread(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$1(Object(rt),!0).forEach(function(nt){_defineProperty$y(_e,nt,rt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(rt)):ownKeys$1(Object(rt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(rt,nt))})}return _e}function _defineProperty$y(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var matchesSelectorFunc="";function matchesSelector(_e,et){return matchesSelectorFunc||(matchesSelectorFunc=(0,_shims$2.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(rt){return(0,_shims$2.isFunction)(_e[rt])})),(0,_shims$2.isFunction)(_e[matchesSelectorFunc])?_e[matchesSelectorFunc](et):!1}function matchesSelectorAndParentsTo(_e,et,rt){var nt=_e;do{if(matchesSelector(nt,et))return!0;if(nt===rt)return!1;nt=nt.parentNode}while(nt);return!1}function addEvent(_e,et,rt,nt){if(_e){var ot=_objectSpread({capture:!0},nt);_e.addEventListener?_e.addEventListener(et,rt,ot):_e.attachEvent?_e.attachEvent("on"+et,rt):_e["on"+et]=rt}}function removeEvent(_e,et,rt,nt){if(_e){var ot=_objectSpread({capture:!0},nt);_e.removeEventListener?_e.removeEventListener(et,rt,ot):_e.detachEvent?_e.detachEvent("on"+et,rt):_e["on"+et]=null}}function outerHeight(_e){var et=_e.clientHeight,rt=_e.ownerDocument.defaultView.getComputedStyle(_e);return et+=(0,_shims$2.int)(rt.borderTopWidth),et+=(0,_shims$2.int)(rt.borderBottomWidth),et}function outerWidth(_e){var et=_e.clientWidth,rt=_e.ownerDocument.defaultView.getComputedStyle(_e);return et+=(0,_shims$2.int)(rt.borderLeftWidth),et+=(0,_shims$2.int)(rt.borderRightWidth),et}function innerHeight(_e){var et=_e.clientHeight,rt=_e.ownerDocument.defaultView.getComputedStyle(_e);return et-=(0,_shims$2.int)(rt.paddingTop),et-=(0,_shims$2.int)(rt.paddingBottom),et}function innerWidth(_e){var et=_e.clientWidth,rt=_e.ownerDocument.defaultView.getComputedStyle(_e);return et-=(0,_shims$2.int)(rt.paddingLeft),et-=(0,_shims$2.int)(rt.paddingRight),et}function offsetXYFromParent(_e,et,rt){var nt=et===et.ownerDocument.body,ot=nt?{left:0,top:0}:et.getBoundingClientRect(),it=(_e.clientX+et.scrollLeft-ot.left)/rt,st=(_e.clientY+et.scrollTop-ot.top)/rt;return{x:it,y:st}}function createCSSTransform(_e,et){var rt=getTranslation(_e,et,"px");return _defineProperty$y({},(0,_getPrefix.browserPrefixToKey)("transform",_getPrefix.default),rt)}function createSVGTransform(_e,et){var rt=getTranslation(_e,et,"");return rt}function getTranslation(_e,et,rt){var nt=_e.x,ot=_e.y,it="translate(".concat(nt).concat(rt,",").concat(ot).concat(rt,")");if(et){var st="".concat(typeof et.x=="string"?et.x:et.x+rt),at="".concat(typeof et.y=="string"?et.y:et.y+rt);it="translate(".concat(st,", ").concat(at,")")+it}return it}function getTouch(_e,et){return _e.targetTouches&&(0,_shims$2.findInArray)(_e.targetTouches,function(rt){return et===rt.identifier})||_e.changedTouches&&(0,_shims$2.findInArray)(_e.changedTouches,function(rt){return et===rt.identifier})}function getTouchIdentifier(_e){if(_e.targetTouches&&_e.targetTouches[0])return _e.targetTouches[0].identifier;if(_e.changedTouches&&_e.changedTouches[0])return _e.changedTouches[0].identifier}function addUserSelectStyles(_e){if(_e){var et=_e.getElementById("react-draggable-style-el");et||(et=_e.createElement("style"),et.type="text/css",et.id="react-draggable-style-el",et.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,et.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,_e.getElementsByTagName("head")[0].appendChild(et)),_e.body&&addClassName(_e.body,"react-draggable-transparent-selection")}}function removeUserSelectStyles(_e){if(_e)try{if(_e.body&&removeClassName(_e.body,"react-draggable-transparent-selection"),_e.selection)_e.selection.empty();else{var et=(_e.defaultView||window).getSelection();et&&et.type!=="Caret"&&et.removeAllRanges()}}catch{}}function addClassName(_e,et){_e.classList?_e.classList.add(et):_e.className.match(new RegExp("(?:^|\\s)".concat(et,"(?!\\S)")))||(_e.className+=" ".concat(et))}function removeClassName(_e,et){_e.classList?_e.classList.remove(et):_e.className=_e.className.replace(new RegExp("(?:^|\\s)".concat(et,"(?!\\S)"),"g"),"")}var positionFns={};Object.defineProperty(positionFns,"__esModule",{value:!0});positionFns.canDragX=canDragX;positionFns.canDragY=canDragY;positionFns.createCoreData=createCoreData;positionFns.createDraggableData=createDraggableData;positionFns.getBoundPosition=getBoundPosition;positionFns.getControlPosition=getControlPosition;positionFns.snapToGrid=snapToGrid;var _shims$1=shims,_domFns$1=domFns;function getBoundPosition(_e,et,rt){if(!_e.props.bounds)return[et,rt];var nt=_e.props.bounds;nt=typeof nt=="string"?nt:cloneBounds(nt);var ot=findDOMNode(_e);if(typeof nt=="string"){var it=ot.ownerDocument,st=it.defaultView,at;if(nt==="parent"?at=ot.parentNode:at=it.querySelector(nt),!(at instanceof st.HTMLElement))throw new Error('Bounds selector "'+nt+'" could not find an element.');var lt=at,ct=st.getComputedStyle(ot),pt=st.getComputedStyle(lt);nt={left:-ot.offsetLeft+(0,_shims$1.int)(pt.paddingLeft)+(0,_shims$1.int)(ct.marginLeft),top:-ot.offsetTop+(0,_shims$1.int)(pt.paddingTop)+(0,_shims$1.int)(ct.marginTop),right:(0,_domFns$1.innerWidth)(lt)-(0,_domFns$1.outerWidth)(ot)-ot.offsetLeft+(0,_shims$1.int)(pt.paddingRight)-(0,_shims$1.int)(ct.marginRight),bottom:(0,_domFns$1.innerHeight)(lt)-(0,_domFns$1.outerHeight)(ot)-ot.offsetTop+(0,_shims$1.int)(pt.paddingBottom)-(0,_shims$1.int)(ct.marginBottom)}}return(0,_shims$1.isNum)(nt.right)&&(et=Math.min(et,nt.right)),(0,_shims$1.isNum)(nt.bottom)&&(rt=Math.min(rt,nt.bottom)),(0,_shims$1.isNum)(nt.left)&&(et=Math.max(et,nt.left)),(0,_shims$1.isNum)(nt.top)&&(rt=Math.max(rt,nt.top)),[et,rt]}function snapToGrid(_e,et,rt){var nt=Math.round(et/_e[0])*_e[0],ot=Math.round(rt/_e[1])*_e[1];return[nt,ot]}function canDragX(_e){return _e.props.axis==="both"||_e.props.axis==="x"}function canDragY(_e){return _e.props.axis==="both"||_e.props.axis==="y"}function getControlPosition(_e,et,rt){var nt=typeof et=="number"?(0,_domFns$1.getTouch)(_e,et):null;if(typeof et=="number"&&!nt)return null;var ot=findDOMNode(rt),it=rt.props.offsetParent||ot.offsetParent||ot.ownerDocument.body;return(0,_domFns$1.offsetXYFromParent)(nt||_e,it,rt.props.scale)}function createCoreData(_e,et,rt){var nt=_e.state,ot=!(0,_shims$1.isNum)(nt.lastX),it=findDOMNode(_e);return ot?{node:it,deltaX:0,deltaY:0,lastX:et,lastY:rt,x:et,y:rt}:{node:it,deltaX:et-nt.lastX,deltaY:rt-nt.lastY,lastX:nt.lastX,lastY:nt.lastY,x:et,y:rt}}function createDraggableData(_e,et){var rt=_e.props.scale;return{node:et.node,x:_e.state.x+et.deltaX/rt,y:_e.state.y+et.deltaY/rt,deltaX:et.deltaX/rt,deltaY:et.deltaY/rt,lastX:_e.state.x,lastY:_e.state.y}}function cloneBounds(_e){return{left:_e.left,top:_e.top,right:_e.right,bottom:_e.bottom}}function findDOMNode(_e){var et=_e.findDOMNode();if(!et)throw new Error("<DraggableCore>: Unmounted during event!");return et}var DraggableCore$2={},log$2={};Object.defineProperty(log$2,"__esModule",{value:!0});log$2.default=log$1;function log$1(){}function _typeof$A(_e){return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$A(_e)}Object.defineProperty(DraggableCore$2,"__esModule",{value:!0});DraggableCore$2.default=void 0;var React=_interopRequireWildcard(reactExports),_propTypes=_interopRequireDefault$i(propTypesExports),_reactDom=_interopRequireDefault$i(reactDomExports),_domFns=domFns,_positionFns=positionFns,_shims=shims,_log=_interopRequireDefault$i(log$2);function _interopRequireDefault$i(_e){return _e&&_e.__esModule?_e:{default:_e}}function _getRequireWildcardCache(_e){if(typeof WeakMap!="function")return null;var et=new WeakMap,rt=new WeakMap;return(_getRequireWildcardCache=function(ot){return ot?rt:et})(_e)}function _interopRequireWildcard(_e,et){if(!et&&_e&&_e.__esModule)return _e;if(_e===null||_typeof$A(_e)!=="object"&&typeof _e!="function")return{default:_e};var rt=_getRequireWildcardCache(et);if(rt&&rt.has(_e))return rt.get(_e);var nt={},ot=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in _e)if(it!=="default"&&Object.prototype.hasOwnProperty.call(_e,it)){var st=ot?Object.getOwnPropertyDescriptor(_e,it):null;st&&(st.get||st.set)?Object.defineProperty(nt,it,st):nt[it]=_e[it]}return nt.default=_e,rt&&rt.set(_e,nt),nt}function _slicedToArray(_e,et){return _arrayWithHoles(_e)||_iterableToArrayLimit(_e,et)||_unsupportedIterableToArray$1(_e,et)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$1(_e,et);var rt=Object.prototype.toString.call(_e).slice(8,-1);if(rt==="Object"&&_e.constructor&&(rt=_e.constructor.name),rt==="Map"||rt==="Set")return Array.from(_e);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return _arrayLikeToArray$1(_e,et)}}function _arrayLikeToArray$1(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var rt=0,nt=new Array(et);rt<et;rt++)nt[rt]=_e[rt];return nt}function _iterableToArrayLimit(_e,et){var rt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(rt!=null){var nt=[],ot=!0,it=!1,st,at;try{for(rt=rt.call(_e);!(ot=(st=rt.next()).done)&&(nt.push(st.value),!(et&&nt.length===et));ot=!0);}catch(lt){it=!0,at=lt}finally{try{!ot&&rt.return!=null&&rt.return()}finally{if(it)throw at}}return nt}}function _arrayWithHoles(_e){if(Array.isArray(_e))return _e}function _classCallCheck$x(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$x(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$x(_e,et,rt){return et&&_defineProperties$x(_e.prototype,et),rt&&_defineProperties$x(_e,rt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _inherits$w(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$w(_e,et)}function _setPrototypeOf$w(_e,et){return _setPrototypeOf$w=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$w(_e,et)}function _createSuper$w(_e){var et=_isNativeReflectConstruct$w();return function(){var nt=_getPrototypeOf$w(_e),ot;if(et){var it=_getPrototypeOf$w(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$w(this,ot)}}function _possibleConstructorReturn$w(_e,et){if(et&&(_typeof$A(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$w(_e)}function _assertThisInitialized$w(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$w(_e){return _getPrototypeOf$w=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$w(_e)}function _defineProperty$x(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var eventsFor={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},dragEventFor=eventsFor.mouse,DraggableCore$1=function(_e){_inherits$w(rt,_e);var et=_createSuper$w(rt);function rt(){var nt;_classCallCheck$x(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$x(_assertThisInitialized$w(nt),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),_defineProperty$x(_assertThisInitialized$w(nt),"mounted",!1),_defineProperty$x(_assertThisInitialized$w(nt),"handleDragStart",function(at){if(nt.props.onMouseDown(at),!nt.props.allowAnyClick&&typeof at.button=="number"&&at.button!==0)return!1;var lt=nt.findDOMNode();if(!lt||!lt.ownerDocument||!lt.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var ct=lt.ownerDocument;if(!(nt.props.disabled||!(at.target instanceof ct.defaultView.Node)||nt.props.handle&&!(0,_domFns.matchesSelectorAndParentsTo)(at.target,nt.props.handle,lt)||nt.props.cancel&&(0,_domFns.matchesSelectorAndParentsTo)(at.target,nt.props.cancel,lt))){at.type==="touchstart"&&at.preventDefault();var pt=(0,_domFns.getTouchIdentifier)(at);nt.setState({touchIdentifier:pt});var ut=(0,_positionFns.getControlPosition)(at,pt,_assertThisInitialized$w(nt));if(ut!=null){var ht=ut.x,ft=ut.y,gt=(0,_positionFns.createCoreData)(_assertThisInitialized$w(nt),ht,ft);(0,_log.default)("DraggableCore: handleDragStart: %j",gt),(0,_log.default)("calling",nt.props.onStart);var vt=nt.props.onStart(at,gt);vt===!1||nt.mounted===!1||(nt.props.enableUserSelectHack&&(0,_domFns.addUserSelectStyles)(ct),nt.setState({dragging:!0,lastX:ht,lastY:ft}),(0,_domFns.addEvent)(ct,dragEventFor.move,nt.handleDrag),(0,_domFns.addEvent)(ct,dragEventFor.stop,nt.handleDragStop))}}}),_defineProperty$x(_assertThisInitialized$w(nt),"handleDrag",function(at){var lt=(0,_positionFns.getControlPosition)(at,nt.state.touchIdentifier,_assertThisInitialized$w(nt));if(lt!=null){var ct=lt.x,pt=lt.y;if(Array.isArray(nt.props.grid)){var ut=ct-nt.state.lastX,ht=pt-nt.state.lastY,ft=(0,_positionFns.snapToGrid)(nt.props.grid,ut,ht),gt=_slicedToArray(ft,2);if(ut=gt[0],ht=gt[1],!ut&&!ht)return;ct=nt.state.lastX+ut,pt=nt.state.lastY+ht}var vt=(0,_positionFns.createCoreData)(_assertThisInitialized$w(nt),ct,pt);(0,_log.default)("DraggableCore: handleDrag: %j",vt);var yt=nt.props.onDrag(at,vt);if(yt===!1||nt.mounted===!1){try{nt.handleDragStop(new MouseEvent("mouseup"))}catch{var mt=document.createEvent("MouseEvents");mt.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),nt.handleDragStop(mt)}return}nt.setState({lastX:ct,lastY:pt})}}),_defineProperty$x(_assertThisInitialized$w(nt),"handleDragStop",function(at){if(nt.state.dragging){var lt=(0,_positionFns.getControlPosition)(at,nt.state.touchIdentifier,_assertThisInitialized$w(nt));if(lt!=null){var ct=lt.x,pt=lt.y;if(Array.isArray(nt.props.grid)){var ut=ct-nt.state.lastX||0,ht=pt-nt.state.lastY||0,ft=(0,_positionFns.snapToGrid)(nt.props.grid,ut,ht),gt=_slicedToArray(ft,2);ut=gt[0],ht=gt[1],ct=nt.state.lastX+ut,pt=nt.state.lastY+ht}var vt=(0,_positionFns.createCoreData)(_assertThisInitialized$w(nt),ct,pt),yt=nt.props.onStop(at,vt);if(yt===!1||nt.mounted===!1)return!1;var mt=nt.findDOMNode();mt&&nt.props.enableUserSelectHack&&(0,_domFns.removeUserSelectStyles)(mt.ownerDocument),(0,_log.default)("DraggableCore: handleDragStop: %j",vt),nt.setState({dragging:!1,lastX:NaN,lastY:NaN}),mt&&((0,_log.default)("DraggableCore: Removing handlers"),(0,_domFns.removeEvent)(mt.ownerDocument,dragEventFor.move,nt.handleDrag),(0,_domFns.removeEvent)(mt.ownerDocument,dragEventFor.stop,nt.handleDragStop))}}}),_defineProperty$x(_assertThisInitialized$w(nt),"onMouseDown",function(at){return dragEventFor=eventsFor.mouse,nt.handleDragStart(at)}),_defineProperty$x(_assertThisInitialized$w(nt),"onMouseUp",function(at){return dragEventFor=eventsFor.mouse,nt.handleDragStop(at)}),_defineProperty$x(_assertThisInitialized$w(nt),"onTouchStart",function(at){return dragEventFor=eventsFor.touch,nt.handleDragStart(at)}),_defineProperty$x(_assertThisInitialized$w(nt),"onTouchEnd",function(at){return dragEventFor=eventsFor.touch,nt.handleDragStop(at)}),nt}return _createClass$x(rt,[{key:"componentDidMount",value:function(){this.mounted=!0;var ot=this.findDOMNode();ot&&(0,_domFns.addEvent)(ot,eventsFor.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var ot=this.findDOMNode();if(ot){var it=ot.ownerDocument;(0,_domFns.removeEvent)(it,eventsFor.mouse.move,this.handleDrag),(0,_domFns.removeEvent)(it,eventsFor.touch.move,this.handleDrag),(0,_domFns.removeEvent)(it,eventsFor.mouse.stop,this.handleDragStop),(0,_domFns.removeEvent)(it,eventsFor.touch.stop,this.handleDragStop),(0,_domFns.removeEvent)(ot,eventsFor.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,_domFns.removeUserSelectStyles)(it)}}},{key:"findDOMNode",value:function(){var ot,it,st;return(ot=this.props)!==null&&ot!==void 0&&ot.nodeRef?(it=this.props)===null||it===void 0||(st=it.nodeRef)===null||st===void 0?void 0:st.current:_reactDom.default.findDOMNode(this)}},{key:"render",value:function(){return React.cloneElement(React.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),rt}(React.Component);DraggableCore$2.default=DraggableCore$1;_defineProperty$x(DraggableCore$1,"displayName","DraggableCore");_defineProperty$x(DraggableCore$1,"propTypes",{allowAnyClick:_propTypes.default.bool,disabled:_propTypes.default.bool,enableUserSelectHack:_propTypes.default.bool,offsetParent:function(et,rt){if(et[rt]&&et[rt].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:_propTypes.default.arrayOf(_propTypes.default.number),handle:_propTypes.default.string,cancel:_propTypes.default.string,nodeRef:_propTypes.default.object,onStart:_propTypes.default.func,onDrag:_propTypes.default.func,onStop:_propTypes.default.func,onMouseDown:_propTypes.default.func,scale:_propTypes.default.number,className:_shims.dontSetMe,style:_shims.dontSetMe,transform:_shims.dontSetMe});_defineProperty$x(DraggableCore$1,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(_e){function et(Yt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt},et(Yt)}Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"DraggableCore",{enumerable:!0,get:function(){return ct.default}}),_e.default=void 0;var rt=gt(reactExports),nt=ht(propTypesExports),ot=ht(reactDomExports),it=ht(require$$3),st=domFns,at=positionFns,lt=shims,ct=ht(DraggableCore$2),pt=ht(log$2),ut=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function ht(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function ft(Yt){if(typeof WeakMap!="function")return null;var Kt=new WeakMap,er=new WeakMap;return(ft=function(rr){return rr?er:Kt})(Yt)}function gt(Yt,Kt){if(!Kt&&Yt&&Yt.__esModule)return Yt;if(Yt===null||et(Yt)!=="object"&&typeof Yt!="function")return{default:Yt};var er=ft(Kt);if(er&&er.has(Yt))return er.get(Yt);var ir={},rr=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var lr in Yt)if(lr!=="default"&&Object.prototype.hasOwnProperty.call(Yt,lr)){var nr=rr?Object.getOwnPropertyDescriptor(Yt,lr):null;nr&&(nr.get||nr.set)?Object.defineProperty(ir,lr,nr):ir[lr]=Yt[lr]}return ir.default=Yt,er&&er.set(Yt,ir),ir}function vt(){return vt=Object.assign||function(Yt){for(var Kt=1;Kt<arguments.length;Kt++){var er=arguments[Kt];for(var ir in er)Object.prototype.hasOwnProperty.call(er,ir)&&(Yt[ir]=er[ir])}return Yt},vt.apply(this,arguments)}function yt(Yt,Kt){if(Yt==null)return{};var er=mt(Yt,Kt),ir,rr;if(Object.getOwnPropertySymbols){var lr=Object.getOwnPropertySymbols(Yt);for(rr=0;rr<lr.length;rr++)ir=lr[rr],!(Kt.indexOf(ir)>=0)&&Object.prototype.propertyIsEnumerable.call(Yt,ir)&&(er[ir]=Yt[ir])}return er}function mt(Yt,Kt){if(Yt==null)return{};var er={},ir=Object.keys(Yt),rr,lr;for(lr=0;lr<ir.length;lr++)rr=ir[lr],!(Kt.indexOf(rr)>=0)&&(er[rr]=Yt[rr]);return er}function Et(Yt,Kt){var er=Object.keys(Yt);if(Object.getOwnPropertySymbols){var ir=Object.getOwnPropertySymbols(Yt);Kt&&(ir=ir.filter(function(rr){return Object.getOwnPropertyDescriptor(Yt,rr).enumerable})),er.push.apply(er,ir)}return er}function bt(Yt){for(var Kt=1;Kt<arguments.length;Kt++){var er=arguments[Kt]!=null?arguments[Kt]:{};Kt%2?Et(Object(er),!0).forEach(function(ir){jt(Yt,ir,er[ir])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors(er)):Et(Object(er)).forEach(function(ir){Object.defineProperty(Yt,ir,Object.getOwnPropertyDescriptor(er,ir))})}return Yt}function Ct(Yt,Kt){return St(Yt)||It(Yt,Kt)||wt(Yt,Kt)||Tt()}function Tt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(Yt,Kt){if(Yt){if(typeof Yt=="string")return Rt(Yt,Kt);var er=Object.prototype.toString.call(Yt).slice(8,-1);if(er==="Object"&&Yt.constructor&&(er=Yt.constructor.name),er==="Map"||er==="Set")return Array.from(Yt);if(er==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(er))return Rt(Yt,Kt)}}function Rt(Yt,Kt){(Kt==null||Kt>Yt.length)&&(Kt=Yt.length);for(var er=0,ir=new Array(Kt);er<Kt;er++)ir[er]=Yt[er];return ir}function It(Yt,Kt){var er=Yt==null?null:typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(er!=null){var ir=[],rr=!0,lr=!1,nr,hr;try{for(er=er.call(Yt);!(rr=(nr=er.next()).done)&&(ir.push(nr.value),!(Kt&&ir.length===Kt));rr=!0);}catch(vr){lr=!0,hr=vr}finally{try{!rr&&er.return!=null&&er.return()}finally{if(lr)throw hr}}return ir}}function St(Yt){if(Array.isArray(Yt))return Yt}function Pt(Yt,Kt){if(!(Yt instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Ot(Yt,Kt){for(var er=0;er<Kt.length;er++){var ir=Kt[er];ir.enumerable=ir.enumerable||!1,ir.configurable=!0,"value"in ir&&(ir.writable=!0),Object.defineProperty(Yt,ir.key,ir)}}function Ut(Yt,Kt,er){return Kt&&Ot(Yt.prototype,Kt),er&&Ot(Yt,er),Object.defineProperty(Yt,"prototype",{writable:!1}),Yt}function Bt(Yt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Kt&&xt(Yt,Kt)}function xt(Yt,Kt){return xt=Object.setPrototypeOf||function(ir,rr){return ir.__proto__=rr,ir},xt(Yt,Kt)}function At(Yt){var Kt=$t();return function(){var ir=Ft(Yt),rr;if(Kt){var lr=Ft(this).constructor;rr=Reflect.construct(ir,arguments,lr)}else rr=ir.apply(this,arguments);return Mt(this,rr)}}function Mt(Yt,Kt){if(Kt&&(et(Kt)==="object"||typeof Kt=="function"))return Kt;if(Kt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nt(Yt)}function Nt(Yt){if(Yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt}function $t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ft(Yt){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(er){return er.__proto__||Object.getPrototypeOf(er)},Ft(Yt)}function jt(Yt,Kt,er){return Kt in Yt?Object.defineProperty(Yt,Kt,{value:er,enumerable:!0,configurable:!0,writable:!0}):Yt[Kt]=er,Yt}var zt=function(Yt){Bt(er,Yt);var Kt=At(er);function er(ir){var rr;return Pt(this,er),rr=Kt.call(this,ir),jt(Nt(rr),"onDragStart",function(lr,nr){(0,pt.default)("Draggable: onDragStart: %j",nr);var hr=rr.props.onStart(lr,(0,at.createDraggableData)(Nt(rr),nr));if(hr===!1)return!1;rr.setState({dragging:!0,dragged:!0})}),jt(Nt(rr),"onDrag",function(lr,nr){if(!rr.state.dragging)return!1;(0,pt.default)("Draggable: onDrag: %j",nr);var hr=(0,at.createDraggableData)(Nt(rr),nr),vr={x:hr.x,y:hr.y};if(rr.props.bounds){var yr=vr.x,Cr=vr.y;vr.x+=rr.state.slackX,vr.y+=rr.state.slackY;var or=(0,at.getBoundPosition)(Nt(rr),vr.x,vr.y),ur=Ct(or,2),pr=ur[0],Er=ur[1];vr.x=pr,vr.y=Er,vr.slackX=rr.state.slackX+(yr-vr.x),vr.slackY=rr.state.slackY+(Cr-vr.y),hr.x=vr.x,hr.y=vr.y,hr.deltaX=vr.x-rr.state.x,hr.deltaY=vr.y-rr.state.y}var Sr=rr.props.onDrag(lr,hr);if(Sr===!1)return!1;rr.setState(vr)}),jt(Nt(rr),"onDragStop",function(lr,nr){if(!rr.state.dragging)return!1;var hr=rr.props.onStop(lr,(0,at.createDraggableData)(Nt(rr),nr));if(hr===!1)return!1;(0,pt.default)("Draggable: onDragStop: %j",nr);var vr={dragging:!1,slackX:0,slackY:0},yr=Boolean(rr.props.position);if(yr){var Cr=rr.props.position,or=Cr.x,ur=Cr.y;vr.x=or,vr.y=ur}rr.setState(vr)}),rr.state={dragging:!1,dragged:!1,x:ir.position?ir.position.x:ir.defaultPosition.x,y:ir.position?ir.position.y:ir.defaultPosition.y,prevPropsPosition:bt({},ir.position),slackX:0,slackY:0,isElementSVG:!1},ir.position&&!(ir.onDrag||ir.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),rr}return Ut(er,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var rr,lr,nr;return(rr=(lr=this.props)===null||lr===void 0||(nr=lr.nodeRef)===null||nr===void 0?void 0:nr.current)!==null&&rr!==void 0?rr:ot.default.findDOMNode(this)}},{key:"render",value:function(){var rr,lr=this.props;lr.axis,lr.bounds;var nr=lr.children,hr=lr.defaultPosition,vr=lr.defaultClassName,yr=lr.defaultClassNameDragging,Cr=lr.defaultClassNameDragged,or=lr.position,ur=lr.positionOffset;lr.scale;var pr=yt(lr,ut),Er={},Sr=null,Ht=Boolean(or),qt=!Ht||this.state.dragging,fr=or||hr,cr={x:(0,at.canDragX)(this)&&qt?this.state.x:fr.x,y:(0,at.canDragY)(this)&&qt?this.state.y:fr.y};this.state.isElementSVG?Sr=(0,st.createSVGTransform)(cr,ur):Er=(0,st.createCSSTransform)(cr,ur);var Ar=(0,it.default)(nr.props.className||"",vr,(rr={},jt(rr,yr,this.state.dragging),jt(rr,Cr,this.state.dragged),rr));return rt.createElement(ct.default,vt({},pr,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),rt.cloneElement(rt.Children.only(nr),{className:Ar,style:bt(bt({},nr.props.style),Er),transform:Sr}))}}],[{key:"getDerivedStateFromProps",value:function(rr,lr){var nr=rr.position,hr=lr.prevPropsPosition;return nr&&(!hr||nr.x!==hr.x||nr.y!==hr.y)?((0,pt.default)("Draggable: getDerivedStateFromProps %j",{position:nr,prevPropsPosition:hr}),{x:nr.x,y:nr.y,prevPropsPosition:bt({},nr)}):null}}]),er}(rt.Component);_e.default=zt,jt(zt,"displayName","Draggable"),jt(zt,"propTypes",bt(bt({},ct.default.propTypes),{},{axis:nt.default.oneOf(["both","x","y","none"]),bounds:nt.default.oneOfType([nt.default.shape({left:nt.default.number,right:nt.default.number,top:nt.default.number,bottom:nt.default.number}),nt.default.string,nt.default.oneOf([!1])]),defaultClassName:nt.default.string,defaultClassNameDragging:nt.default.string,defaultClassNameDragged:nt.default.string,defaultPosition:nt.default.shape({x:nt.default.number,y:nt.default.number}),positionOffset:nt.default.shape({x:nt.default.oneOfType([nt.default.number,nt.default.string]),y:nt.default.oneOfType([nt.default.number,nt.default.string])}),position:nt.default.shape({x:nt.default.number,y:nt.default.number}),className:lt.dontSetMe,style:lt.dontSetMe,transform:lt.dontSetMe})),jt(zt,"defaultProps",bt(bt({},ct.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(Draggable$1);var _require=Draggable$1,Draggable=_require.default,DraggableCore=_require.DraggableCore;cjs.exports=Draggable;cjsExports.default=Draggable;cjsExports.DraggableCore=DraggableCore;function bind(_e,et){return function(){return _e.apply(et,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_e=>et=>{const rt=toString.call(et);return _e[rt]||(_e[rt]=rt.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_e=>(_e=_e.toLowerCase(),et=>kindOf(et)===_e),typeOfTest=_e=>et=>typeof et===_e,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(_e){return _e!==null&&!isUndefined(_e)&&_e.constructor!==null&&!isUndefined(_e.constructor)&&isFunction$2(_e.constructor.isBuffer)&&_e.constructor.isBuffer(_e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_e){let et;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?et=ArrayBuffer.isView(_e):et=_e&&_e.buffer&&isArrayBuffer(_e.buffer),et}const isString=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$2=_e=>_e!==null&&typeof _e=="object",isBoolean$1=_e=>_e===!0||_e===!1,isPlainObject$2=_e=>{if(kindOf(_e)!=="object")return!1;const et=getPrototypeOf(_e);return(et===null||et===Object.prototype||Object.getPrototypeOf(et)===null)&&!(Symbol.toStringTag in _e)&&!(Symbol.iterator in _e)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_e=>isObject$2(_e)&&isFunction$2(_e.pipe),isFormData=_e=>{const et="[object FormData]";return _e&&(typeof FormData=="function"&&_e instanceof FormData||toString.call(_e)===et||isFunction$2(_e.toString)&&_e.toString()===et)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=_e=>_e.trim?_e.trim():_e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(_e,et,{allOwnKeys:rt=!1}={}){if(_e===null||typeof _e>"u")return;let nt,ot;if(typeof _e!="object"&&(_e=[_e]),isArray$1(_e))for(nt=0,ot=_e.length;nt<ot;nt++)et.call(null,_e[nt],nt,_e);else{const it=rt?Object.getOwnPropertyNames(_e):Object.keys(_e),st=it.length;let at;for(nt=0;nt<st;nt++)at=it[nt],et.call(null,_e[at],at,_e)}}function findKey$1(_e,et){et=et.toLowerCase();const rt=Object.keys(_e);let nt=rt.length,ot;for(;nt-- >0;)if(ot=rt[nt],et===ot.toLowerCase())return ot;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=_e=>!isUndefined(_e)&&_e!==_global;function merge$1(){const{caseless:_e}=isContextDefined(this)&&this||{},et={},rt=(nt,ot)=>{const it=_e&&findKey$1(et,ot)||ot;isPlainObject$2(et[it])&&isPlainObject$2(nt)?et[it]=merge$1(et[it],nt):isPlainObject$2(nt)?et[it]=merge$1({},nt):isArray$1(nt)?et[it]=nt.slice():et[it]=nt};for(let nt=0,ot=arguments.length;nt<ot;nt++)arguments[nt]&&forEach(arguments[nt],rt);return et}const extend=(_e,et,rt,{allOwnKeys:nt}={})=>(forEach(et,(ot,it)=>{rt&&isFunction$2(ot)?_e[it]=bind(ot,rt):_e[it]=ot},{allOwnKeys:nt}),_e),stripBOM=_e=>(_e.charCodeAt(0)===65279&&(_e=_e.slice(1)),_e),inherits=(_e,et,rt,nt)=>{_e.prototype=Object.create(et.prototype,nt),_e.prototype.constructor=_e,Object.defineProperty(_e,"super",{value:et.prototype}),rt&&Object.assign(_e.prototype,rt)},toFlatObject=(_e,et,rt,nt)=>{let ot,it,st;const at={};if(et=et||{},_e==null)return et;do{for(ot=Object.getOwnPropertyNames(_e),it=ot.length;it-- >0;)st=ot[it],(!nt||nt(st,_e,et))&&!at[st]&&(et[st]=_e[st],at[st]=!0);_e=rt!==!1&&getPrototypeOf(_e)}while(_e&&(!rt||rt(_e,et))&&_e!==Object.prototype);return et},endsWith=(_e,et,rt)=>{_e=String(_e),(rt===void 0||rt>_e.length)&&(rt=_e.length),rt-=et.length;const nt=_e.indexOf(et,rt);return nt!==-1&&nt===rt},toArray=_e=>{if(!_e)return null;if(isArray$1(_e))return _e;let et=_e.length;if(!isNumber$2(et))return null;const rt=new Array(et);for(;et-- >0;)rt[et]=_e[et];return rt},isTypedArray=(_e=>et=>_e&&et instanceof _e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_e,et)=>{const nt=(_e&&_e[Symbol.iterator]).call(_e);let ot;for(;(ot=nt.next())&&!ot.done;){const it=ot.value;et.call(_e,it[0],it[1])}},matchAll=(_e,et)=>{let rt;const nt=[];for(;(rt=_e.exec(et))!==null;)nt.push(rt);return nt},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_e=>_e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(rt,nt,ot){return nt.toUpperCase()+ot}),hasOwnProperty=(({hasOwnProperty:_e})=>(et,rt)=>_e.call(et,rt))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_e,et)=>{const rt=Object.getOwnPropertyDescriptors(_e),nt={};forEach(rt,(ot,it)=>{et(ot,it,_e)!==!1&&(nt[it]=ot)}),Object.defineProperties(_e,nt)},freezeMethods=_e=>{reduceDescriptors(_e,(et,rt)=>{if(isFunction$2(_e)&&["arguments","caller","callee"].indexOf(rt)!==-1)return!1;const nt=_e[rt];if(isFunction$2(nt)){if(et.enumerable=!1,"writable"in et){et.writable=!1;return}et.set||(et.set=()=>{throw Error("Can not rewrite read-only method '"+rt+"'")})}})},toObjectSet=(_e,et)=>{const rt={},nt=ot=>{ot.forEach(it=>{rt[it]=!0})};return isArray$1(_e)?nt(_e):nt(String(_e).split(et)),rt},noop$6=()=>{},toFiniteNumber=(_e,et)=>(_e=+_e,Number.isFinite(_e)?_e:et),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_e=16,et=ALPHABET.ALPHA_DIGIT)=>{let rt="";const{length:nt}=et;for(;_e--;)rt+=et[Math.random()*nt|0];return rt};function isSpecCompliantForm(_e){return!!(_e&&isFunction$2(_e.append)&&_e[Symbol.toStringTag]==="FormData"&&_e[Symbol.iterator])}const toJSONObject=_e=>{const et=new Array(10),rt=(nt,ot)=>{if(isObject$2(nt)){if(et.indexOf(nt)>=0)return;if(!("toJSON"in nt)){et[ot]=nt;const it=isArray$1(nt)?[]:{};return forEach(nt,(st,at)=>{const lt=rt(st,ot+1);!isUndefined(lt)&&(it[at]=lt)}),et[ot]=void 0,it}}return nt};return rt(_e,0)},utils={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$2,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$2,isUndefined,isDate:isDate$1,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$6,toFiniteNumber,findKey:findKey$1,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject};function AxiosError(_e,et,rt,nt,ot){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_e,this.name="AxiosError",et&&(this.code=et),rt&&(this.config=rt),nt&&(this.request=nt),ot&&(this.response=ot)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_e=>{descriptors$1[_e]={value:_e}});Object.defineProperties(AxiosError,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(_e,et,rt,nt,ot,it)=>{const st=Object.create(prototype$1);return utils.toFlatObject(_e,st,function(lt){return lt!==Error.prototype},at=>at!=="isAxiosError"),AxiosError.call(st,_e.message,et,rt,nt,ot),st.cause=_e,st.name=_e.name,it&&Object.assign(st,it),st};const httpAdapter=null;function isVisitable(_e){return utils.isPlainObject(_e)||utils.isArray(_e)}function removeBrackets(_e){return utils.endsWith(_e,"[]")?_e.slice(0,-2):_e}function renderKey(_e,et,rt){return _e?_e.concat(et).map(function(ot,it){return ot=removeBrackets(ot),!rt&&it?"["+ot+"]":ot}).join(rt?".":""):et}function isFlatArray(_e){return utils.isArray(_e)&&!_e.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(et){return/^is[A-Z]/.test(et)});function toFormData(_e,et,rt){if(!utils.isObject(_e))throw new TypeError("target must be an object");et=et||new FormData,rt=utils.toFlatObject(rt,{metaTokens:!0,dots:!1,indexes:!1},!1,function(vt,yt){return!utils.isUndefined(yt[vt])});const nt=rt.metaTokens,ot=rt.visitor||pt,it=rt.dots,st=rt.indexes,lt=(rt.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(et);if(!utils.isFunction(ot))throw new TypeError("visitor must be a function");function ct(gt){if(gt===null)return"";if(utils.isDate(gt))return gt.toISOString();if(!lt&&utils.isBlob(gt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(gt)||utils.isTypedArray(gt)?lt&&typeof Blob=="function"?new Blob([gt]):Buffer.from(gt):gt}function pt(gt,vt,yt){let mt=gt;if(gt&&!yt&&typeof gt=="object"){if(utils.endsWith(vt,"{}"))vt=nt?vt:vt.slice(0,-2),gt=JSON.stringify(gt);else if(utils.isArray(gt)&&isFlatArray(gt)||(utils.isFileList(gt)||utils.endsWith(vt,"[]"))&&(mt=utils.toArray(gt)))return vt=removeBrackets(vt),mt.forEach(function(bt,Ct){!(utils.isUndefined(bt)||bt===null)&&et.append(st===!0?renderKey([vt],Ct,it):st===null?vt:vt+"[]",ct(bt))}),!1}return isVisitable(gt)?!0:(et.append(renderKey(yt,vt,it),ct(gt)),!1)}const ut=[],ht=Object.assign(predicates,{defaultVisitor:pt,convertValue:ct,isVisitable});function ft(gt,vt){if(!utils.isUndefined(gt)){if(ut.indexOf(gt)!==-1)throw Error("Circular reference detected in "+vt.join("."));ut.push(gt),utils.forEach(gt,function(mt,Et){(!(utils.isUndefined(mt)||mt===null)&&ot.call(et,mt,utils.isString(Et)?Et.trim():Et,vt,ht))===!0&&ft(mt,vt?vt.concat(Et):[Et])}),ut.pop()}}if(!utils.isObject(_e))throw new TypeError("data must be an object");return ft(_e),et}function encode$1(_e){const et={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_e).replace(/[!'()~]|%20|%00/g,function(nt){return et[nt]})}function AxiosURLSearchParams(_e,et){this._pairs=[],_e&&toFormData(_e,this,et)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(et,rt){this._pairs.push([et,rt])};prototype.toString=function(et){const rt=et?function(nt){return et.call(this,nt,encode$1)}:encode$1;return this._pairs.map(function(ot){return rt(ot[0])+"="+rt(ot[1])},"").join("&")};function encode(_e){return encodeURIComponent(_e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_e,et,rt){if(!et)return _e;const nt=rt&&rt.encode||encode,ot=rt&&rt.serialize;let it;if(ot?it=ot(et,rt):it=utils.isURLSearchParams(et)?et.toString():new AxiosURLSearchParams(et,rt).toString(nt),it){const st=_e.indexOf("#");st!==-1&&(_e=_e.slice(0,st)),_e+=(_e.indexOf("?")===-1?"?":"&")+it}return _e}class InterceptorManager{constructor(){this.handlers=[]}use(et,rt,nt){return this.handlers.push({fulfilled:et,rejected:rt,synchronous:nt?nt.synchronous:!1,runWhen:nt?nt.runWhen:null}),this.handlers.length-1}eject(et){this.handlers[et]&&(this.handlers[et]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(et){utils.forEach(this.handlers,function(nt){nt!==null&&et(nt)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let _e;return typeof navigator<"u"&&((_e=navigator.product)==="ReactNative"||_e==="NativeScript"||_e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(_e,et){return toFormData(_e,new platform.classes.URLSearchParams,Object.assign({visitor:function(rt,nt,ot,it){return platform.isNode&&utils.isBuffer(rt)?(this.append(nt,rt.toString("base64")),!1):it.defaultVisitor.apply(this,arguments)}},et))}function parsePropPath(_e){return utils.matchAll(/\w+|\[(\w*)]/g,_e).map(et=>et[0]==="[]"?"":et[1]||et[0])}function arrayToObject(_e){const et={},rt=Object.keys(_e);let nt;const ot=rt.length;let it;for(nt=0;nt<ot;nt++)it=rt[nt],et[it]=_e[it];return et}function formDataToJSON(_e){function et(rt,nt,ot,it){let st=rt[it++];const at=Number.isFinite(+st),lt=it>=rt.length;return st=!st&&utils.isArray(ot)?ot.length:st,lt?(utils.hasOwnProp(ot,st)?ot[st]=[ot[st],nt]:ot[st]=nt,!at):((!ot[st]||!utils.isObject(ot[st]))&&(ot[st]=[]),et(rt,nt,ot[st],it)&&utils.isArray(ot[st])&&(ot[st]=arrayToObject(ot[st])),!at)}if(utils.isFormData(_e)&&utils.isFunction(_e.entries)){const rt={};return utils.forEachEntry(_e,(nt,ot)=>{et(parsePropPath(nt),ot,rt,0)}),rt}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(_e,et,rt){if(utils.isString(_e))try{return(et||JSON.parse)(_e),utils.trim(_e)}catch(nt){if(nt.name!=="SyntaxError")throw nt}return(rt||JSON.stringify)(_e)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(et,rt){const nt=rt.getContentType()||"",ot=nt.indexOf("application/json")>-1,it=utils.isObject(et);if(it&&utils.isHTMLForm(et)&&(et=new FormData(et)),utils.isFormData(et))return ot&&ot?JSON.stringify(formDataToJSON(et)):et;if(utils.isArrayBuffer(et)||utils.isBuffer(et)||utils.isStream(et)||utils.isFile(et)||utils.isBlob(et))return et;if(utils.isArrayBufferView(et))return et.buffer;if(utils.isURLSearchParams(et))return rt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),et.toString();let at;if(it){if(nt.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(et,this.formSerializer).toString();if((at=utils.isFileList(et))||nt.indexOf("multipart/form-data")>-1){const lt=this.env&&this.env.FormData;return toFormData(at?{"files[]":et}:et,lt&&new lt,this.formSerializer)}}return it||ot?(rt.setContentType("application/json",!1),stringifySafely(et)):et}],transformResponse:[function(et){const rt=this.transitional||defaults$1.transitional,nt=rt&&rt.forcedJSONParsing,ot=this.responseType==="json";if(et&&utils.isString(et)&&(nt&&!this.responseType||ot)){const st=!(rt&&rt.silentJSONParsing)&&ot;try{return JSON.parse(et)}catch(at){if(st)throw at.name==="SyntaxError"?AxiosError.from(at,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):at}}return et}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(et){return et>=200&&et<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(et){defaults$1.headers[et]={}});utils.forEach(["post","put","patch"],function(et){defaults$1.headers[et]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$2=defaults$1,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_e=>{const et={};let rt,nt,ot;return _e&&_e.split(`
`).forEach(function(st){ot=st.indexOf(":"),rt=st.substring(0,ot).trim().toLowerCase(),nt=st.substring(ot+1).trim(),!(!rt||et[rt]&&ignoreDuplicateOf[rt])&&(rt==="set-cookie"?et[rt]?et[rt].push(nt):et[rt]=[nt]:et[rt]=et[rt]?et[rt]+", "+nt:nt)}),et},$internals=Symbol("internals");function normalizeHeader(_e){return _e&&String(_e).trim().toLowerCase()}function normalizeValue(_e){return _e===!1||_e==null?_e:utils.isArray(_e)?_e.map(normalizeValue):String(_e)}function parseTokens(_e){const et=Object.create(null),rt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let nt;for(;nt=rt.exec(_e);)et[nt[1]]=nt[2];return et}function isValidHeaderName(_e){return/^[-_a-zA-Z]+$/.test(_e.trim())}function matchHeaderValue(_e,et,rt,nt,ot){if(utils.isFunction(nt))return nt.call(this,et,rt);if(ot&&(et=rt),!!utils.isString(et)){if(utils.isString(nt))return et.indexOf(nt)!==-1;if(utils.isRegExp(nt))return nt.test(et)}}function formatHeader(_e){return _e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(et,rt,nt)=>rt.toUpperCase()+nt)}function buildAccessors(_e,et){const rt=utils.toCamelCase(" "+et);["get","set","has"].forEach(nt=>{Object.defineProperty(_e,nt+rt,{value:function(ot,it,st){return this[nt].call(this,et,ot,it,st)},configurable:!0})})}class AxiosHeaders{constructor(et){et&&this.set(et)}set(et,rt,nt){const ot=this;function it(at,lt,ct){const pt=normalizeHeader(lt);if(!pt)throw new Error("header name must be a non-empty string");const ut=utils.findKey(ot,pt);(!ut||ot[ut]===void 0||ct===!0||ct===void 0&&ot[ut]!==!1)&&(ot[ut||lt]=normalizeValue(at))}const st=(at,lt)=>utils.forEach(at,(ct,pt)=>it(ct,pt,lt));return utils.isPlainObject(et)||et instanceof this.constructor?st(et,rt):utils.isString(et)&&(et=et.trim())&&!isValidHeaderName(et)?st(parseHeaders(et),rt):et!=null&&it(rt,et,nt),this}get(et,rt){if(et=normalizeHeader(et),et){const nt=utils.findKey(this,et);if(nt){const ot=this[nt];if(!rt)return ot;if(rt===!0)return parseTokens(ot);if(utils.isFunction(rt))return rt.call(this,ot,nt);if(utils.isRegExp(rt))return rt.exec(ot);throw new TypeError("parser must be boolean|regexp|function")}}}has(et,rt){if(et=normalizeHeader(et),et){const nt=utils.findKey(this,et);return!!(nt&&this[nt]!==void 0&&(!rt||matchHeaderValue(this,this[nt],nt,rt)))}return!1}delete(et,rt){const nt=this;let ot=!1;function it(st){if(st=normalizeHeader(st),st){const at=utils.findKey(nt,st);at&&(!rt||matchHeaderValue(nt,nt[at],at,rt))&&(delete nt[at],ot=!0)}}return utils.isArray(et)?et.forEach(it):it(et),ot}clear(et){const rt=Object.keys(this);let nt=rt.length,ot=!1;for(;nt--;){const it=rt[nt];(!et||matchHeaderValue(this,this[it],it,et,!0))&&(delete this[it],ot=!0)}return ot}normalize(et){const rt=this,nt={};return utils.forEach(this,(ot,it)=>{const st=utils.findKey(nt,it);if(st){rt[st]=normalizeValue(ot),delete rt[it];return}const at=et?formatHeader(it):String(it).trim();at!==it&&delete rt[it],rt[at]=normalizeValue(ot),nt[at]=!0}),this}concat(...et){return this.constructor.concat(this,...et)}toJSON(et){const rt=Object.create(null);return utils.forEach(this,(nt,ot)=>{nt!=null&&nt!==!1&&(rt[ot]=et&&utils.isArray(nt)?nt.join(", "):nt)}),rt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([et,rt])=>et+": "+rt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(et){return et instanceof this?et:new this(et)}static concat(et,...rt){const nt=new this(et);return rt.forEach(ot=>nt.set(ot)),nt}static accessor(et){const nt=(this[$internals]=this[$internals]={accessors:{}}).accessors,ot=this.prototype;function it(st){const at=normalizeHeader(st);nt[at]||(buildAccessors(ot,st),nt[at]=!0)}return utils.isArray(et)?et.forEach(it):it(et),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(_e,et){const rt=this||defaults$2,nt=et||rt,ot=AxiosHeaders$1.from(nt.headers);let it=nt.data;return utils.forEach(_e,function(at){it=at.call(rt,it,ot.normalize(),et?et.status:void 0)}),ot.normalize(),it}function isCancel(_e){return!!(_e&&_e.__CANCEL__)}function CanceledError(_e,et,rt){AxiosError.call(this,_e??"canceled",AxiosError.ERR_CANCELED,et,rt),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(_e,et,rt){const nt=rt.config.validateStatus;!rt.status||!nt||nt(rt.status)?_e(rt):et(new AxiosError("Request failed with status code "+rt.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(rt.status/100)-4],rt.config,rt.request,rt))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(rt,nt,ot,it,st,at){const lt=[];lt.push(rt+"="+encodeURIComponent(nt)),utils.isNumber(ot)&&lt.push("expires="+new Date(ot).toGMTString()),utils.isString(it)&&lt.push("path="+it),utils.isString(st)&&lt.push("domain="+st),at===!0&&lt.push("secure"),document.cookie=lt.join("; ")},read:function(rt){const nt=document.cookie.match(new RegExp("(^|;\\s*)("+rt+")=([^;]*)"));return nt?decodeURIComponent(nt[3]):null},remove:function(rt){this.write(rt,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(_e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_e)}function combineURLs(_e,et){return et?_e.replace(/\/+$/,"")+"/"+et.replace(/^\/+/,""):_e}function buildFullPath(_e,et){return _e&&!isAbsoluteURL(et)?combineURLs(_e,et):et}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const et=/(msie|trident)/i.test(navigator.userAgent),rt=document.createElement("a");let nt;function ot(it){let st=it;return et&&(rt.setAttribute("href",st),st=rt.href),rt.setAttribute("href",st),{href:rt.href,protocol:rt.protocol?rt.protocol.replace(/:$/,""):"",host:rt.host,search:rt.search?rt.search.replace(/^\?/,""):"",hash:rt.hash?rt.hash.replace(/^#/,""):"",hostname:rt.hostname,port:rt.port,pathname:rt.pathname.charAt(0)==="/"?rt.pathname:"/"+rt.pathname}}return nt=ot(window.location.href),function(st){const at=utils.isString(st)?ot(st):st;return at.protocol===nt.protocol&&at.host===nt.host}}():function(){return function(){return!0}}();function parseProtocol(_e){const et=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_e);return et&&et[1]||""}function speedometer(_e,et){_e=_e||10;const rt=new Array(_e),nt=new Array(_e);let ot=0,it=0,st;return et=et!==void 0?et:1e3,function(lt){const ct=Date.now(),pt=nt[it];st||(st=ct),rt[ot]=lt,nt[ot]=ct;let ut=it,ht=0;for(;ut!==ot;)ht+=rt[ut++],ut=ut%_e;if(ot=(ot+1)%_e,ot===it&&(it=(it+1)%_e),ct-st<et)return;const ft=pt&&ct-pt;return ft?Math.round(ht*1e3/ft):void 0}}function progressEventReducer(_e,et){let rt=0;const nt=speedometer(50,250);return ot=>{const it=ot.loaded,st=ot.lengthComputable?ot.total:void 0,at=it-rt,lt=nt(at),ct=it<=st;rt=it;const pt={loaded:it,total:st,progress:st?it/st:void 0,bytes:at,rate:lt||void 0,estimated:lt&&st&&ct?(st-it)/lt:void 0,event:ot};pt[et?"download":"upload"]=!0,_e(pt)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_e){return new Promise(function(rt,nt){let ot=_e.data;const it=AxiosHeaders$1.from(_e.headers).normalize(),st=_e.responseType;let at;function lt(){_e.cancelToken&&_e.cancelToken.unsubscribe(at),_e.signal&&_e.signal.removeEventListener("abort",at)}utils.isFormData(ot)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&it.setContentType(!1);let ct=new XMLHttpRequest;if(_e.auth){const ft=_e.auth.username||"",gt=_e.auth.password?unescape(encodeURIComponent(_e.auth.password)):"";it.set("Authorization","Basic "+btoa(ft+":"+gt))}const pt=buildFullPath(_e.baseURL,_e.url);ct.open(_e.method.toUpperCase(),buildURL(pt,_e.params,_e.paramsSerializer),!0),ct.timeout=_e.timeout;function ut(){if(!ct)return;const ft=AxiosHeaders$1.from("getAllResponseHeaders"in ct&&ct.getAllResponseHeaders()),vt={data:!st||st==="text"||st==="json"?ct.responseText:ct.response,status:ct.status,statusText:ct.statusText,headers:ft,config:_e,request:ct};settle(function(mt){rt(mt),lt()},function(mt){nt(mt),lt()},vt),ct=null}if("onloadend"in ct?ct.onloadend=ut:ct.onreadystatechange=function(){!ct||ct.readyState!==4||ct.status===0&&!(ct.responseURL&&ct.responseURL.indexOf("file:")===0)||setTimeout(ut)},ct.onabort=function(){ct&&(nt(new AxiosError("Request aborted",AxiosError.ECONNABORTED,_e,ct)),ct=null)},ct.onerror=function(){nt(new AxiosError("Network Error",AxiosError.ERR_NETWORK,_e,ct)),ct=null},ct.ontimeout=function(){let gt=_e.timeout?"timeout of "+_e.timeout+"ms exceeded":"timeout exceeded";const vt=_e.transitional||transitionalDefaults;_e.timeoutErrorMessage&&(gt=_e.timeoutErrorMessage),nt(new AxiosError(gt,vt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,_e,ct)),ct=null},platform.isStandardBrowserEnv){const ft=(_e.withCredentials||isURLSameOrigin(pt))&&_e.xsrfCookieName&&cookies.read(_e.xsrfCookieName);ft&&it.set(_e.xsrfHeaderName,ft)}ot===void 0&&it.setContentType(null),"setRequestHeader"in ct&&utils.forEach(it.toJSON(),function(gt,vt){ct.setRequestHeader(vt,gt)}),utils.isUndefined(_e.withCredentials)||(ct.withCredentials=!!_e.withCredentials),st&&st!=="json"&&(ct.responseType=_e.responseType),typeof _e.onDownloadProgress=="function"&&ct.addEventListener("progress",progressEventReducer(_e.onDownloadProgress,!0)),typeof _e.onUploadProgress=="function"&&ct.upload&&ct.upload.addEventListener("progress",progressEventReducer(_e.onUploadProgress)),(_e.cancelToken||_e.signal)&&(at=ft=>{ct&&(nt(!ft||ft.type?new CanceledError(null,_e,ct):ft),ct.abort(),ct=null)},_e.cancelToken&&_e.cancelToken.subscribe(at),_e.signal&&(_e.signal.aborted?at():_e.signal.addEventListener("abort",at)));const ht=parseProtocol(pt);if(ht&&platform.protocols.indexOf(ht)===-1){nt(new AxiosError("Unsupported protocol "+ht+":",AxiosError.ERR_BAD_REQUEST,_e));return}ct.send(ot||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(_e,et)=>{if(_e){try{Object.defineProperty(_e,"name",{value:et})}catch{}Object.defineProperty(_e,"adapterName",{value:et})}});const adapters$1={getAdapter:_e=>{_e=utils.isArray(_e)?_e:[_e];const{length:et}=_e;let rt,nt;for(let ot=0;ot<et&&(rt=_e[ot],!(nt=utils.isString(rt)?knownAdapters[rt.toLowerCase()]:rt));ot++);if(!nt)throw nt===!1?new AxiosError(`Adapter ${rt} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,rt)?`Adapter '${rt}' is not available in the build`:`Unknown adapter '${rt}'`);if(!utils.isFunction(nt))throw new TypeError("adapter is not a function");return nt},adapters:knownAdapters};function throwIfCancellationRequested(_e){if(_e.cancelToken&&_e.cancelToken.throwIfRequested(),_e.signal&&_e.signal.aborted)throw new CanceledError(null,_e)}function dispatchRequest(_e){return throwIfCancellationRequested(_e),_e.headers=AxiosHeaders$1.from(_e.headers),_e.data=transformData.call(_e,_e.transformRequest),["post","put","patch"].indexOf(_e.method)!==-1&&_e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(_e.adapter||defaults$2.adapter)(_e).then(function(nt){return throwIfCancellationRequested(_e),nt.data=transformData.call(_e,_e.transformResponse,nt),nt.headers=AxiosHeaders$1.from(nt.headers),nt},function(nt){return isCancel(nt)||(throwIfCancellationRequested(_e),nt&&nt.response&&(nt.response.data=transformData.call(_e,_e.transformResponse,nt.response),nt.response.headers=AxiosHeaders$1.from(nt.response.headers))),Promise.reject(nt)})}const headersToObject=_e=>_e instanceof AxiosHeaders$1?_e.toJSON():_e;function mergeConfig(_e,et){et=et||{};const rt={};function nt(ct,pt,ut){return utils.isPlainObject(ct)&&utils.isPlainObject(pt)?utils.merge.call({caseless:ut},ct,pt):utils.isPlainObject(pt)?utils.merge({},pt):utils.isArray(pt)?pt.slice():pt}function ot(ct,pt,ut){if(utils.isUndefined(pt)){if(!utils.isUndefined(ct))return nt(void 0,ct,ut)}else return nt(ct,pt,ut)}function it(ct,pt){if(!utils.isUndefined(pt))return nt(void 0,pt)}function st(ct,pt){if(utils.isUndefined(pt)){if(!utils.isUndefined(ct))return nt(void 0,ct)}else return nt(void 0,pt)}function at(ct,pt,ut){if(ut in et)return nt(ct,pt);if(ut in _e)return nt(void 0,ct)}const lt={url:it,method:it,data:it,baseURL:st,transformRequest:st,transformResponse:st,paramsSerializer:st,timeout:st,timeoutMessage:st,withCredentials:st,adapter:st,responseType:st,xsrfCookieName:st,xsrfHeaderName:st,onUploadProgress:st,onDownloadProgress:st,decompress:st,maxContentLength:st,maxBodyLength:st,beforeRedirect:st,transport:st,httpAgent:st,httpsAgent:st,cancelToken:st,socketPath:st,responseEncoding:st,validateStatus:at,headers:(ct,pt)=>ot(headersToObject(ct),headersToObject(pt),!0)};return utils.forEach(Object.keys(_e).concat(Object.keys(et)),function(pt){const ut=lt[pt]||ot,ht=ut(_e[pt],et[pt],pt);utils.isUndefined(ht)&&ut!==at||(rt[pt]=ht)}),rt}const VERSION="1.3.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_e,et)=>{validators$1[_e]=function(nt){return typeof nt===_e||"a"+(et<1?"n ":" ")+_e}});const deprecatedWarnings={};validators$1.transitional=function(et,rt,nt){function ot(it,st){return"[Axios v"+VERSION+"] Transitional option '"+it+"'"+st+(nt?". "+nt:"")}return(it,st,at)=>{if(et===!1)throw new AxiosError(ot(st," has been removed"+(rt?" in "+rt:"")),AxiosError.ERR_DEPRECATED);return rt&&!deprecatedWarnings[st]&&(deprecatedWarnings[st]=!0,console.warn(ot(st," has been deprecated since v"+rt+" and will be removed in the near future"))),et?et(it,st,at):!0}};function assertOptions(_e,et,rt){if(typeof _e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const nt=Object.keys(_e);let ot=nt.length;for(;ot-- >0;){const it=nt[ot],st=et[it];if(st){const at=_e[it],lt=at===void 0||st(at,it,_e);if(lt!==!0)throw new AxiosError("option "+it+" must be "+lt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(rt!==!0)throw new AxiosError("Unknown option "+it,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(et){this.defaults=et,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(et,rt){typeof et=="string"?(rt=rt||{},rt.url=et):rt=et||{},rt=mergeConfig(this.defaults,rt);const{transitional:nt,paramsSerializer:ot,headers:it}=rt;nt!==void 0&&validator.assertOptions(nt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ot!==void 0&&validator.assertOptions(ot,{encode:validators.function,serialize:validators.function},!0),rt.method=(rt.method||this.defaults.method||"get").toLowerCase();let st;st=it&&utils.merge(it.common,it[rt.method]),st&&utils.forEach(["delete","get","head","post","put","patch","common"],gt=>{delete it[gt]}),rt.headers=AxiosHeaders$1.concat(st,it);const at=[];let lt=!0;this.interceptors.request.forEach(function(vt){typeof vt.runWhen=="function"&&vt.runWhen(rt)===!1||(lt=lt&&vt.synchronous,at.unshift(vt.fulfilled,vt.rejected))});const ct=[];this.interceptors.response.forEach(function(vt){ct.push(vt.fulfilled,vt.rejected)});let pt,ut=0,ht;if(!lt){const gt=[dispatchRequest.bind(this),void 0];for(gt.unshift.apply(gt,at),gt.push.apply(gt,ct),ht=gt.length,pt=Promise.resolve(rt);ut<ht;)pt=pt.then(gt[ut++],gt[ut++]);return pt}ht=at.length;let ft=rt;for(ut=0;ut<ht;){const gt=at[ut++],vt=at[ut++];try{ft=gt(ft)}catch(yt){vt.call(this,yt);break}}try{pt=dispatchRequest.call(this,ft)}catch(gt){return Promise.reject(gt)}for(ut=0,ht=ct.length;ut<ht;)pt=pt.then(ct[ut++],ct[ut++]);return pt}getUri(et){et=mergeConfig(this.defaults,et);const rt=buildFullPath(et.baseURL,et.url);return buildURL(rt,et.params,et.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(et){Axios.prototype[et]=function(rt,nt){return this.request(mergeConfig(nt||{},{method:et,url:rt,data:(nt||{}).data}))}});utils.forEach(["post","put","patch"],function(et){function rt(nt){return function(it,st,at){return this.request(mergeConfig(at||{},{method:et,headers:nt?{"Content-Type":"multipart/form-data"}:{},url:it,data:st}))}}Axios.prototype[et]=rt(),Axios.prototype[et+"Form"]=rt(!0)});const Axios$1=Axios;class CancelToken{constructor(et){if(typeof et!="function")throw new TypeError("executor must be a function.");let rt;this.promise=new Promise(function(it){rt=it});const nt=this;this.promise.then(ot=>{if(!nt._listeners)return;let it=nt._listeners.length;for(;it-- >0;)nt._listeners[it](ot);nt._listeners=null}),this.promise.then=ot=>{let it;const st=new Promise(at=>{nt.subscribe(at),it=at}).then(ot);return st.cancel=function(){nt.unsubscribe(it)},st},et(function(it,st,at){nt.reason||(nt.reason=new CanceledError(it,st,at),rt(nt.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(et){if(this.reason){et(this.reason);return}this._listeners?this._listeners.push(et):this._listeners=[et]}unsubscribe(et){if(!this._listeners)return;const rt=this._listeners.indexOf(et);rt!==-1&&this._listeners.splice(rt,1)}static source(){let et;return{token:new CancelToken(function(ot){et=ot}),cancel:et}}}const CancelToken$1=CancelToken;function spread(_e){return function(rt){return _e.apply(null,rt)}}function isAxiosError(_e){return utils.isObject(_e)&&_e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([_e,et])=>{HttpStatusCode[et]=_e});const HttpStatusCode$1=HttpStatusCode;function createInstance(_e){const et=new Axios$1(_e),rt=bind(Axios$1.prototype.request,et);return utils.extend(rt,Axios$1.prototype,et,{allOwnKeys:!0}),utils.extend(rt,et,null,{allOwnKeys:!0}),rt.create=function(ot){return createInstance(mergeConfig(_e,ot))},rt}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(et){return Promise.all(et)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=_e=>formDataToJSON(utils.isHTMLForm(_e)?new FormData(_e):_e);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,SERVER_LINK={}.VITE_SERVER_LINK,sendRequest=async(_e,et,rt=null)=>{const nt={method:_e,url:SERVER_LINK+et,headers:{Authorization:auth$1.getToken()},...rt&&{data:rt}};try{return await axios$1(nt)}catch(ot){alert("Error:",JSON.stringify(ot))}},UserService={get:async()=>sendRequest("get","user"),getStudents:async()=>sendRequest("get","student"),find:async _e=>sendRequest("post","user/find",_e),set:async _e=>sendRequest("post","user",_e),update:async _e=>sendRequest("put","user",_e),delete:async _e=>sendRequest("delete","user",_e)},QuizService={get:()=>sendRequest("get","quiz"),getById:_e=>sendRequest("get","quiz/"+_e),set:_e=>sendRequest("post","quiz",_e),update:_e=>sendRequest("put","quiz",_e),delete:_e=>sendRequest("delete","quiz",_e)},QuizResultService={get:()=>sendRequest("get","quiz-result"),getById:_e=>sendRequest("get","quiz-result/"+_e),set:_e=>sendRequest("post","quiz-result",_e),update:_e=>sendRequest("put","quiz-result",_e),delete:_e=>sendRequest("delete","quiz",_e)},JWTService={generateToken:_e=>sendRequest("post","generateToken",_e)};function DraggableLocalStream({instance:_e,zConfig:et}){const rt=useNavigate();let nt=null,ot=null;const it=new Date().getTime().toString();reactExports.useEffect(()=>(st(),window.addEventListener("beforeunload",()=>{_e.logoutRoom(et.roomId)}),()=>{_e&&(nt.getTracks().forEach(at=>{at.stop()}),_e.logoutRoom(et.roomId))}),[]);const st=async()=>{try{const{data:at}=await JWTService.generateToken({userId:et.userId});et.token=at,navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(ct=>{nt=ct});const lt=await _e.enumDevices();lt.microphones.length===0||lt.microphones[0].deviceID===""?(alert("Microphone Not Found"),rt("/")):lt.cameras.length===0||lt.cameras[1].deviceID===""?(alert("Camera Not Found"),rt("/")):(await _e.loginRoom(et.roomId,et.token,{userID:et.userId,userName:et.userName}),nt=await _e.createStream({camera:{audioInput:lt.microphones[0].deviceID,videoInput:lt.cameras[0].deviceID,video:!0,audio:!0}}),ot=_e.createLocalStreamView(nt),_e.startPublishingStream(it,nt,{videoCodec:"VP8"}),ot.play("local-stream"))}catch(at){console.log("Prnv:",at),alert("Error in createRoom: ",JSON.stringify(at))}};return jsx(Fragment,{children:jsx(cjsExports,{bounds:"parent",defaultPosition:{x:30},children:jsx(Fragment,{children:jsx("div",{id:"local-stream",style:{width:"250px",height:"170px",border:"2px solid black"}})})})})}var ArrowForwardIosSharp={},interopRequireDefaultExports={},interopRequireDefault={get exports(){return interopRequireDefaultExports},set exports(_e){interopRequireDefaultExports=_e}};(function(_e){function et(rt){return rt&&rt.__esModule?rt:{default:rt}}_e.exports=et,_e.exports.__esModule=!0,_e.exports.default=_e.exports})(interopRequireDefault);var createSvgIcon={};const require$$0=getAugmentedNamespace(utils$1);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return et.createSvgIcon}});var et=require$$0}(createSvgIcon)),createSvgIcon}const require$$2=getAugmentedNamespace(jsxRuntime);var _interopRequireDefault$h=interopRequireDefaultExports;Object.defineProperty(ArrowForwardIosSharp,"__esModule",{value:!0});var default_1$h=ArrowForwardIosSharp.default=void 0,_createSvgIcon$h=_interopRequireDefault$h(requireCreateSvgIcon()),_jsxRuntime$h=require$$2,_default$h=(0,_createSvgIcon$h.default)((0,_jsxRuntime$h.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");default_1$h=ArrowForwardIosSharp.default=_default$h;const Accordion$1=styled$1(_e=>jsx(MuiAccordion,{disableGutters:!0,elevation:0,square:!0,..._e}))(({theme:_e})=>({border:`1px solid ${_e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),AccordionSummary$1=styled$1(_e=>jsx(MuiAccordionSummary,{expandIcon:jsx(default_1$h,{sx:{fontSize:"0.9rem"}}),..._e}))(({theme:_e})=>({backgroundColor:_e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:_e.spacing(1)}})),AccordionDetails$1=styled$1(MuiAccordionDetails)(({theme:_e})=>({padding:_e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));function SectionAccordion(_e){const{title:et,data:rt,disabled:nt}=_e,[ot,it]=reactExports.useState(null);return jsx(Fragment,{children:jsxs(Accordion$1,{expanded:ot==="panel1",onChange:(at=>(lt,ct)=>{it(ct?at:!1)})("panel1"),disabled:nt,children:[jsx(AccordionSummary$1,{"aria-controls":"panel1d-content",id:"panel1d-header",children:jsx(Typography$1,{autoFocus:!0,children:et})}),jsx(AccordionDetails$1,{children:jsx(Grid$1,{container:!0,gap:1,children:rt})})]})})}function QuestionNavigation(_e){const{selectedQuestion:et,zConfig:rt,numQuestions:nt,selectedAnswers:ot,setSelectedQuestion:it,instance:st,visitedQuestions:at,setVisitedQuestions:lt}=_e,ct=()=>[...Array(nt)].map((ut,ht)=>{const ft=et===ht+1,gt=at.includes(ht+1);return jsx(Grid$1,{item:!0,className:`queNavBtn ${ft?"selected":ot[ht]!==null?"answered":gt?"visited":""}`,textAlign:"center",onClick:()=>{it(ht+1),gt||lt(vt=>[...vt,ht+1])},id:ht+1,xs:2,children:`${ht+1}`.padStart(2,"0")},ht)}),pt=(ut,ht)=>jsxs(Fragment,{children:[jsx(Grid$1,{item:!0,xs:2,textAlign:"center",sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:`${ut}`,height:20,margin:1,borderRadius:"25%/50%"}}),jsx(Grid$1,{item:!0,xs:7,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:25,margin:1},children:ht})]});return jsxs("div",{children:[jsx(DraggableLocalStream,{instance:st,zConfig:rt}),jsx(SectionAccordion,{title:"Section 01",data:ct()}),jsx(SectionAccordion,{title:"Section 02",data:"LOL",disabled:!0}),jsxs(Grid$1,{container:!0,textAlign:"center",children:[pt(null,"Unanswered"),pt("lightblue","Selected"),pt("rgb(230, 130, 130)","Visited"),pt("#0b815a","Answered")]})]})}var ZegoExpressWebRTCExports={},ZegoExpressWebRTC={get exports(){return ZegoExpressWebRTCExports},set exports(_e){ZegoExpressWebRTCExports=_e}},ZegoExpressWebRTMExports={},ZegoExpressWebRTM={get exports(){return ZegoExpressWebRTMExports},set exports(_e){ZegoExpressWebRTMExports=_e}},minimalExports={},minimal$1={get exports(){return minimalExports},set exports(_e){minimalExports=_e}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=_e;function _e(et,rt){for(var nt=new Array(arguments.length-1),ot=0,it=2,st=!0;it<arguments.length;)nt[ot++]=arguments[it++];return new Promise(function(lt,ct){nt[ot]=function(ut){if(st)if(st=!1,ut)ct(ut);else{for(var ht=new Array(arguments.length-1),ft=0;ft<ht.length;)ht[ft++]=arguments[ft];lt.apply(null,ht)}};try{et.apply(rt||null,nt)}catch(pt){st&&(st=!1,ct(pt))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(_e){var et=_e;et.length=function(at){var lt=at.length;if(!lt)return 0;for(var ct=0;--lt%4>1&&at.charAt(lt)==="=";)++ct;return Math.ceil(at.length*3)/4-ct};for(var rt=new Array(64),nt=new Array(123),ot=0;ot<64;)nt[rt[ot]=ot<26?ot+65:ot<52?ot+71:ot<62?ot-4:ot-59|43]=ot++;et.encode=function(at,lt,ct){for(var pt=null,ut=[],ht=0,ft=0,gt;lt<ct;){var vt=at[lt++];switch(ft){case 0:ut[ht++]=rt[vt>>2],gt=(vt&3)<<4,ft=1;break;case 1:ut[ht++]=rt[gt|vt>>4],gt=(vt&15)<<2,ft=2;break;case 2:ut[ht++]=rt[gt|vt>>6],ut[ht++]=rt[vt&63],ft=0;break}ht>8191&&((pt||(pt=[])).push(String.fromCharCode.apply(String,ut)),ht=0)}return ft&&(ut[ht++]=rt[gt],ut[ht++]=61,ft===1&&(ut[ht++]=61)),pt?(ht&&pt.push(String.fromCharCode.apply(String,ut.slice(0,ht))),pt.join("")):String.fromCharCode.apply(String,ut.slice(0,ht))};var it="invalid encoding";et.decode=function(at,lt,ct){for(var pt=ct,ut=0,ht,ft=0;ft<at.length;){var gt=at.charCodeAt(ft++);if(gt===61&&ut>1)break;if((gt=nt[gt])===void 0)throw Error(it);switch(ut){case 0:ht=gt,ut=1;break;case 1:lt[ct++]=ht<<2|(gt&48)>>4,ht=gt,ut=2;break;case 2:lt[ct++]=(ht&15)<<4|(gt&60)>>2,ht=gt,ut=3;break;case 3:lt[ct++]=(ht&3)<<6|gt,ut=0;break}}if(ut===1)throw Error(it);return ct-pt},et.test=function(at){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(at)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=_e;function _e(){this._listeners={}}return _e.prototype.on=function(rt,nt,ot){return(this._listeners[rt]||(this._listeners[rt]=[])).push({fn:nt,ctx:ot||this}),this},_e.prototype.off=function(rt,nt){if(rt===void 0)this._listeners={};else if(nt===void 0)this._listeners[rt]=[];else for(var ot=this._listeners[rt],it=0;it<ot.length;)ot[it].fn===nt?ot.splice(it,1):++it;return this},_e.prototype.emit=function(rt){var nt=this._listeners[rt];if(nt){for(var ot=[],it=1;it<arguments.length;)ot.push(arguments[it++]);for(it=0;it<nt.length;)nt[it].fn.apply(nt[it++].ctx,ot)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=_e(_e);function _e(it){return typeof Float32Array<"u"?function(){var st=new Float32Array([-0]),at=new Uint8Array(st.buffer),lt=at[3]===128;function ct(ft,gt,vt){st[0]=ft,gt[vt]=at[0],gt[vt+1]=at[1],gt[vt+2]=at[2],gt[vt+3]=at[3]}function pt(ft,gt,vt){st[0]=ft,gt[vt]=at[3],gt[vt+1]=at[2],gt[vt+2]=at[1],gt[vt+3]=at[0]}it.writeFloatLE=lt?ct:pt,it.writeFloatBE=lt?pt:ct;function ut(ft,gt){return at[0]=ft[gt],at[1]=ft[gt+1],at[2]=ft[gt+2],at[3]=ft[gt+3],st[0]}function ht(ft,gt){return at[3]=ft[gt],at[2]=ft[gt+1],at[1]=ft[gt+2],at[0]=ft[gt+3],st[0]}it.readFloatLE=lt?ut:ht,it.readFloatBE=lt?ht:ut}():function(){function st(lt,ct,pt,ut){var ht=ct<0?1:0;if(ht&&(ct=-ct),ct===0)lt(1/ct>0?0:2147483648,pt,ut);else if(isNaN(ct))lt(2143289344,pt,ut);else if(ct>34028234663852886e22)lt((ht<<31|2139095040)>>>0,pt,ut);else if(ct<11754943508222875e-54)lt((ht<<31|Math.round(ct/1401298464324817e-60))>>>0,pt,ut);else{var ft=Math.floor(Math.log(ct)/Math.LN2),gt=Math.round(ct*Math.pow(2,-ft)*8388608)&8388607;lt((ht<<31|ft+127<<23|gt)>>>0,pt,ut)}}it.writeFloatLE=st.bind(null,et),it.writeFloatBE=st.bind(null,rt);function at(lt,ct,pt){var ut=lt(ct,pt),ht=(ut>>31)*2+1,ft=ut>>>23&255,gt=ut&8388607;return ft===255?gt?NaN:ht*(1/0):ft===0?ht*1401298464324817e-60*gt:ht*Math.pow(2,ft-150)*(gt+8388608)}it.readFloatLE=at.bind(null,nt),it.readFloatBE=at.bind(null,ot)}(),typeof Float64Array<"u"?function(){var st=new Float64Array([-0]),at=new Uint8Array(st.buffer),lt=at[7]===128;function ct(ft,gt,vt){st[0]=ft,gt[vt]=at[0],gt[vt+1]=at[1],gt[vt+2]=at[2],gt[vt+3]=at[3],gt[vt+4]=at[4],gt[vt+5]=at[5],gt[vt+6]=at[6],gt[vt+7]=at[7]}function pt(ft,gt,vt){st[0]=ft,gt[vt]=at[7],gt[vt+1]=at[6],gt[vt+2]=at[5],gt[vt+3]=at[4],gt[vt+4]=at[3],gt[vt+5]=at[2],gt[vt+6]=at[1],gt[vt+7]=at[0]}it.writeDoubleLE=lt?ct:pt,it.writeDoubleBE=lt?pt:ct;function ut(ft,gt){return at[0]=ft[gt],at[1]=ft[gt+1],at[2]=ft[gt+2],at[3]=ft[gt+3],at[4]=ft[gt+4],at[5]=ft[gt+5],at[6]=ft[gt+6],at[7]=ft[gt+7],st[0]}function ht(ft,gt){return at[7]=ft[gt],at[6]=ft[gt+1],at[5]=ft[gt+2],at[4]=ft[gt+3],at[3]=ft[gt+4],at[2]=ft[gt+5],at[1]=ft[gt+6],at[0]=ft[gt+7],st[0]}it.readDoubleLE=lt?ut:ht,it.readDoubleBE=lt?ht:ut}():function(){function st(lt,ct,pt,ut,ht,ft){var gt=ut<0?1:0;if(gt&&(ut=-ut),ut===0)lt(0,ht,ft+ct),lt(1/ut>0?0:2147483648,ht,ft+pt);else if(isNaN(ut))lt(0,ht,ft+ct),lt(2146959360,ht,ft+pt);else if(ut>17976931348623157e292)lt(0,ht,ft+ct),lt((gt<<31|2146435072)>>>0,ht,ft+pt);else{var vt;if(ut<22250738585072014e-324)vt=ut/5e-324,lt(vt>>>0,ht,ft+ct),lt((gt<<31|vt/4294967296)>>>0,ht,ft+pt);else{var yt=Math.floor(Math.log(ut)/Math.LN2);yt===1024&&(yt=1023),vt=ut*Math.pow(2,-yt),lt(vt*4503599627370496>>>0,ht,ft+ct),lt((gt<<31|yt+1023<<20|vt*1048576&1048575)>>>0,ht,ft+pt)}}}it.writeDoubleLE=st.bind(null,et,0,4),it.writeDoubleBE=st.bind(null,rt,4,0);function at(lt,ct,pt,ut,ht){var ft=lt(ut,ht+ct),gt=lt(ut,ht+pt),vt=(gt>>31)*2+1,yt=gt>>>20&2047,mt=4294967296*(gt&1048575)+ft;return yt===2047?mt?NaN:vt*(1/0):yt===0?vt*5e-324*mt:vt*Math.pow(2,yt-1075)*(mt+4503599627370496)}it.readDoubleLE=at.bind(null,nt,0,4),it.readDoubleBE=at.bind(null,ot,4,0)}(),it}function et(it,st,at){st[at]=it&255,st[at+1]=it>>>8&255,st[at+2]=it>>>16&255,st[at+3]=it>>>24}function rt(it,st,at){st[at]=it>>>24,st[at+1]=it>>>16&255,st[at+2]=it>>>8&255,st[at+3]=it&255}function nt(it,st){return(it[st]|it[st+1]<<8|it[st+2]<<16|it[st+3]<<24)>>>0}function ot(it,st){return(it[st]<<24|it[st+1]<<16|it[st+2]<<8|it[st+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(_e){var et=_e;et.length=function(nt){for(var ot=0,it=0,st=0;st<nt.length;++st)it=nt.charCodeAt(st),it<128?ot+=1:it<2048?ot+=2:(it&64512)===55296&&(nt.charCodeAt(st+1)&64512)===56320?(++st,ot+=4):ot+=3;return ot},et.read=function(nt,ot,it){var st=it-ot;if(st<1)return"";for(var at=null,lt=[],ct=0,pt;ot<it;)pt=nt[ot++],pt<128?lt[ct++]=pt:pt>191&&pt<224?lt[ct++]=(pt&31)<<6|nt[ot++]&63:pt>239&&pt<365?(pt=((pt&7)<<18|(nt[ot++]&63)<<12|(nt[ot++]&63)<<6|nt[ot++]&63)-65536,lt[ct++]=55296+(pt>>10),lt[ct++]=56320+(pt&1023)):lt[ct++]=(pt&15)<<12|(nt[ot++]&63)<<6|nt[ot++]&63,ct>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,lt)),ct=0);return at?(ct&&at.push(String.fromCharCode.apply(String,lt.slice(0,ct))),at.join("")):String.fromCharCode.apply(String,lt.slice(0,ct))},et.write=function(nt,ot,it){for(var st=it,at,lt,ct=0;ct<nt.length;++ct)at=nt.charCodeAt(ct),at<128?ot[it++]=at:at<2048?(ot[it++]=at>>6|192,ot[it++]=at&63|128):(at&64512)===55296&&((lt=nt.charCodeAt(ct+1))&64512)===56320?(at=65536+((at&1023)<<10)+(lt&1023),++ct,ot[it++]=at>>18|240,ot[it++]=at>>12&63|128,ot[it++]=at>>6&63|128,ot[it++]=at&63|128):(ot[it++]=at>>12|224,ot[it++]=at>>6&63|128,ot[it++]=at&63|128);return it-st}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=_e;function _e(et,rt,nt){var ot=nt||8192,it=ot>>>1,st=null,at=ot;return function(ct){if(ct<1||ct>it)return et(ct);at+ct>ot&&(st=et(ot),at=0);var pt=rt.call(st,at,at+=ct);return at&7&&(at=(at|7)+1),pt}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=et;var _e=requireMinimal$1();function et(it,st){this.lo=it>>>0,this.hi=st>>>0}var rt=et.zero=new et(0,0);rt.toNumber=function(){return 0},rt.zzEncode=rt.zzDecode=function(){return this},rt.length=function(){return 1};var nt=et.zeroHash="\0\0\0\0\0\0\0\0";et.fromNumber=function(st){if(st===0)return rt;var at=st<0;at&&(st=-st);var lt=st>>>0,ct=(st-lt)/4294967296>>>0;return at&&(ct=~ct>>>0,lt=~lt>>>0,++lt>4294967295&&(lt=0,++ct>4294967295&&(ct=0))),new et(lt,ct)},et.from=function(st){if(typeof st=="number")return et.fromNumber(st);if(_e.isString(st))if(_e.Long)st=_e.Long.fromString(st);else return et.fromNumber(parseInt(st,10));return st.low||st.high?new et(st.low>>>0,st.high>>>0):rt},et.prototype.toNumber=function(st){if(!st&&this.hi>>>31){var at=~this.lo+1>>>0,lt=~this.hi>>>0;return at||(lt=lt+1>>>0),-(at+lt*4294967296)}return this.lo+this.hi*4294967296},et.prototype.toLong=function(st){return _e.Long?new _e.Long(this.lo|0,this.hi|0,Boolean(st)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(st)}};var ot=String.prototype.charCodeAt;return et.fromHash=function(st){return st===nt?rt:new et((ot.call(st,0)|ot.call(st,1)<<8|ot.call(st,2)<<16|ot.call(st,3)<<24)>>>0,(ot.call(st,4)|ot.call(st,5)<<8|ot.call(st,6)<<16|ot.call(st,7)<<24)>>>0)},et.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},et.prototype.zzEncode=function(){var st=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^st)>>>0,this.lo=(this.lo<<1^st)>>>0,this},et.prototype.zzDecode=function(){var st=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^st)>>>0,this.hi=(this.hi>>>1^st)>>>0,this},et.prototype.length=function(){var st=this.lo,at=(this.lo>>>28|this.hi<<4)>>>0,lt=this.hi>>>24;return lt===0?at===0?st<16384?st<128?1:2:st<2097152?3:4:at<16384?at<128?5:6:at<2097152?7:8:lt<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(_e){var et=_e;et.asPromise=requireAspromise(),et.base64=requireBase64(),et.EventEmitter=requireEventemitter(),et.float=requireFloat(),et.inquire=requireInquire(),et.utf8=requireUtf8(),et.pool=requirePool(),et.LongBits=requireLongbits(),et.isNode=Boolean(typeof commonjsGlobal$1<"u"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),et.global=et.isNode&&commonjsGlobal$1||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal$1,et.emptyArray=Object.freeze?Object.freeze([]):[],et.emptyObject=Object.freeze?Object.freeze({}):{},et.isInteger=Number.isInteger||function(it){return typeof it=="number"&&isFinite(it)&&Math.floor(it)===it},et.isString=function(it){return typeof it=="string"||it instanceof String},et.isObject=function(it){return it&&typeof it=="object"},et.isset=et.isSet=function(it,st){var at=it[st];return at!=null&&it.hasOwnProperty(st)?typeof at!="object"||(Array.isArray(at)?at.length:Object.keys(at).length)>0:!1},et.Buffer=function(){try{var ot=et.inquire("buffer").Buffer;return ot.prototype.utf8Write?ot:null}catch{return null}}(),et._Buffer_from=null,et._Buffer_allocUnsafe=null,et.newBuffer=function(it){return typeof it=="number"?et.Buffer?et._Buffer_allocUnsafe(it):new et.Array(it):et.Buffer?et._Buffer_from(it):typeof Uint8Array>"u"?it:new Uint8Array(it)},et.Array=typeof Uint8Array<"u"?Uint8Array:Array,et.Long=et.global.dcodeIO&&et.global.dcodeIO.Long||et.global.Long||et.inquire("long"),et.key2Re=/^true|false|0|1$/,et.key32Re=/^-?(?:0|[1-9][0-9]*)$/,et.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,et.longToHash=function(it){return it?et.LongBits.from(it).toHash():et.LongBits.zeroHash},et.longFromHash=function(it,st){var at=et.LongBits.fromHash(it);return et.Long?et.Long.fromBits(at.lo,at.hi,st):at.toNumber(Boolean(st))};function rt(ot,it,st){for(var at=Object.keys(it),lt=0;lt<at.length;++lt)(ot[at[lt]]===void 0||!st)&&(ot[at[lt]]=it[at[lt]]);return ot}et.merge=rt,et.lcFirst=function(it){return it.charAt(0).toLowerCase()+it.substring(1)};function nt(ot){function it(st,at){if(!(this instanceof it))return new it(st,at);Object.defineProperty(this,"message",{get:function(){return st}}),Error.captureStackTrace?Error.captureStackTrace(this,it):Object.defineProperty(this,"stack",{value:new Error().stack||""}),at&&rt(this,at)}return(it.prototype=Object.create(Error.prototype)).constructor=it,Object.defineProperty(it.prototype,"name",{get:function(){return ot}}),it.prototype.toString=function(){return this.name+": "+this.message},it}et.newError=nt,et.ProtocolError=nt("ProtocolError"),et.oneOfGetter=function(it){for(var st={},at=0;at<it.length;++at)st[it[at]]=1;return function(){for(var lt=Object.keys(this),ct=lt.length-1;ct>-1;--ct)if(st[lt[ct]]===1&&this[lt[ct]]!==void 0&&this[lt[ct]]!==null)return lt[ct]}},et.oneOfSetter=function(it){return function(st){for(var at=0;at<it.length;++at)it[at]!==st&&delete this[it[at]]}},et.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},et._configure=function(){var ot=et.Buffer;if(!ot){et._Buffer_from=et._Buffer_allocUnsafe=null;return}et._Buffer_from=ot.from!==Uint8Array.from&&ot.from||function(st,at){return new ot(st,at)},et._Buffer_allocUnsafe=ot.allocUnsafe||function(st){return new ot(st)}}}(minimal)),minimal}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=lt;var _e=requireMinimal$1(),et,rt=_e.LongBits,nt=_e.base64,ot=_e.utf8;function it(yt,mt,Et){this.fn=yt,this.len=mt,this.next=void 0,this.val=Et}function st(){}function at(yt){this.head=yt.head,this.tail=yt.tail,this.len=yt.len,this.next=yt.states}function lt(){this.len=0,this.head=new it(st,0,0),this.tail=this.head,this.states=null}var ct=function(){return _e.Buffer?function(){return(lt.create=function(){return new et})()}:function(){return new lt}};lt.create=ct(),lt.alloc=function(mt){return new _e.Array(mt)},_e.Array!==Array&&(lt.alloc=_e.pool(lt.alloc,_e.Array.prototype.subarray)),lt.prototype._push=function(mt,Et,bt){return this.tail=this.tail.next=new it(mt,Et,bt),this.len+=Et,this};function pt(yt,mt,Et){mt[Et]=yt&255}function ut(yt,mt,Et){for(;yt>127;)mt[Et++]=yt&127|128,yt>>>=7;mt[Et]=yt}function ht(yt,mt){this.len=yt,this.next=void 0,this.val=mt}ht.prototype=Object.create(it.prototype),ht.prototype.fn=ut,lt.prototype.uint32=function(mt){return this.len+=(this.tail=this.tail.next=new ht((mt=mt>>>0)<128?1:mt<16384?2:mt<2097152?3:mt<268435456?4:5,mt)).len,this},lt.prototype.int32=function(mt){return mt<0?this._push(ft,10,rt.fromNumber(mt)):this.uint32(mt)},lt.prototype.sint32=function(mt){return this.uint32((mt<<1^mt>>31)>>>0)};function ft(yt,mt,Et){for(;yt.hi;)mt[Et++]=yt.lo&127|128,yt.lo=(yt.lo>>>7|yt.hi<<25)>>>0,yt.hi>>>=7;for(;yt.lo>127;)mt[Et++]=yt.lo&127|128,yt.lo=yt.lo>>>7;mt[Et++]=yt.lo}lt.prototype.uint64=function(mt){var Et=rt.from(mt);return this._push(ft,Et.length(),Et)},lt.prototype.int64=lt.prototype.uint64,lt.prototype.sint64=function(mt){var Et=rt.from(mt).zzEncode();return this._push(ft,Et.length(),Et)},lt.prototype.bool=function(mt){return this._push(pt,1,mt?1:0)};function gt(yt,mt,Et){mt[Et]=yt&255,mt[Et+1]=yt>>>8&255,mt[Et+2]=yt>>>16&255,mt[Et+3]=yt>>>24}lt.prototype.fixed32=function(mt){return this._push(gt,4,mt>>>0)},lt.prototype.sfixed32=lt.prototype.fixed32,lt.prototype.fixed64=function(mt){var Et=rt.from(mt);return this._push(gt,4,Et.lo)._push(gt,4,Et.hi)},lt.prototype.sfixed64=lt.prototype.fixed64,lt.prototype.float=function(mt){return this._push(_e.float.writeFloatLE,4,mt)},lt.prototype.double=function(mt){return this._push(_e.float.writeDoubleLE,8,mt)};var vt=_e.Array.prototype.set?function(mt,Et,bt){Et.set(mt,bt)}:function(mt,Et,bt){for(var Ct=0;Ct<mt.length;++Ct)Et[bt+Ct]=mt[Ct]};return lt.prototype.bytes=function(mt){var Et=mt.length>>>0;if(!Et)return this._push(pt,1,0);if(_e.isString(mt)){var bt=lt.alloc(Et=nt.length(mt));nt.decode(mt,bt,0),mt=bt}return this.uint32(Et)._push(vt,Et,mt)},lt.prototype.string=function(mt){var Et=ot.length(mt);return Et?this.uint32(Et)._push(ot.write,Et,mt):this._push(pt,1,0)},lt.prototype.fork=function(){return this.states=new at(this),this.head=this.tail=new it(st,0,0),this.len=0,this},lt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new it(st,0,0),this.len=0),this},lt.prototype.ldelim=function(){var mt=this.head,Et=this.tail,bt=this.len;return this.reset().uint32(bt),bt&&(this.tail.next=mt.next,this.tail=Et,this.len+=bt),this},lt.prototype.finish=function(){for(var mt=this.head.next,Et=this.constructor.alloc(this.len),bt=0;mt;)mt.fn(mt.val,Et,bt),bt+=mt.len,mt=mt.next;return Et},lt._configure=function(yt){et=yt,lt.create=ct(),et._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=rt;var _e=requireWriter();(rt.prototype=Object.create(_e.prototype)).constructor=rt;var et=requireMinimal$1();function rt(){_e.call(this)}rt._configure=function(){rt.alloc=et._Buffer_allocUnsafe,rt.writeBytesBuffer=et.Buffer&&et.Buffer.prototype instanceof Uint8Array&&et.Buffer.prototype.set.name==="set"?function(it,st,at){st.set(it,at)}:function(it,st,at){if(it.copy)it.copy(st,at,0,it.length);else for(var lt=0;lt<it.length;)st[at++]=it[lt++]}},rt.prototype.bytes=function(it){et.isString(it)&&(it=et._Buffer_from(it,"base64"));var st=it.length>>>0;return this.uint32(st),st&&this._push(rt.writeBytesBuffer,st,it),this};function nt(ot,it,st){ot.length<40?et.utf8.write(ot,it,st):it.utf8Write?it.utf8Write(ot,st):it.write(ot,st)}return rt.prototype.string=function(it){var st=et.Buffer.byteLength(it);return this.uint32(st),st&&this._push(nt,st,it),this},rt._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=it;var _e=requireMinimal$1(),et,rt=_e.LongBits,nt=_e.utf8;function ot(ut,ht){return RangeError("index out of range: "+ut.pos+" + "+(ht||1)+" > "+ut.len)}function it(ut){this.buf=ut,this.pos=0,this.len=ut.length}var st=typeof Uint8Array<"u"?function(ht){if(ht instanceof Uint8Array||Array.isArray(ht))return new it(ht);throw Error("illegal buffer")}:function(ht){if(Array.isArray(ht))return new it(ht);throw Error("illegal buffer")},at=function(){return _e.Buffer?function(ft){return(it.create=function(vt){return _e.Buffer.isBuffer(vt)?new et(vt):st(vt)})(ft)}:st};it.create=at(),it.prototype._slice=_e.Array.prototype.subarray||_e.Array.prototype.slice,it.prototype.uint32=function(){var ht=4294967295;return function(){if(ht=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ht=(ht|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ht=(ht|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ht;if((this.pos+=5)>this.len)throw this.pos=this.len,ot(this,10);return ht}}(),it.prototype.int32=function(){return this.uint32()|0},it.prototype.sint32=function(){var ht=this.uint32();return ht>>>1^-(ht&1)|0};function lt(){var ut=new rt(0,0),ht=0;if(this.len-this.pos>4){for(;ht<4;++ht)if(ut.lo=(ut.lo|(this.buf[this.pos]&127)<<ht*7)>>>0,this.buf[this.pos++]<128)return ut;if(ut.lo=(ut.lo|(this.buf[this.pos]&127)<<28)>>>0,ut.hi=(ut.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return ut;ht=0}else{for(;ht<3;++ht){if(this.pos>=this.len)throw ot(this);if(ut.lo=(ut.lo|(this.buf[this.pos]&127)<<ht*7)>>>0,this.buf[this.pos++]<128)return ut}return ut.lo=(ut.lo|(this.buf[this.pos++]&127)<<ht*7)>>>0,ut}if(this.len-this.pos>4){for(;ht<5;++ht)if(ut.hi=(ut.hi|(this.buf[this.pos]&127)<<ht*7+3)>>>0,this.buf[this.pos++]<128)return ut}else for(;ht<5;++ht){if(this.pos>=this.len)throw ot(this);if(ut.hi=(ut.hi|(this.buf[this.pos]&127)<<ht*7+3)>>>0,this.buf[this.pos++]<128)return ut}throw Error("invalid varint encoding")}it.prototype.bool=function(){return this.uint32()!==0};function ct(ut,ht){return(ut[ht-4]|ut[ht-3]<<8|ut[ht-2]<<16|ut[ht-1]<<24)>>>0}it.prototype.fixed32=function(){if(this.pos+4>this.len)throw ot(this,4);return ct(this.buf,this.pos+=4)},it.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ot(this,4);return ct(this.buf,this.pos+=4)|0};function pt(){if(this.pos+8>this.len)throw ot(this,8);return new rt(ct(this.buf,this.pos+=4),ct(this.buf,this.pos+=4))}return it.prototype.float=function(){if(this.pos+4>this.len)throw ot(this,4);var ht=_e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ht},it.prototype.double=function(){if(this.pos+8>this.len)throw ot(this,4);var ht=_e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ht},it.prototype.bytes=function(){var ht=this.uint32(),ft=this.pos,gt=this.pos+ht;if(gt>this.len)throw ot(this,ht);return this.pos+=ht,Array.isArray(this.buf)?this.buf.slice(ft,gt):ft===gt?new this.buf.constructor(0):this._slice.call(this.buf,ft,gt)},it.prototype.string=function(){var ht=this.bytes();return nt.read(ht,0,ht.length)},it.prototype.skip=function(ht){if(typeof ht=="number"){if(this.pos+ht>this.len)throw ot(this,ht);this.pos+=ht}else do if(this.pos>=this.len)throw ot(this);while(this.buf[this.pos++]&128);return this},it.prototype.skipType=function(ut){switch(ut){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ut=this.uint32()&7)!==4;)this.skipType(ut);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ut+" at offset "+this.pos)}return this},it._configure=function(ut){et=ut,it.create=at(),et._configure();var ht=_e.Long?"toLong":"toNumber";_e.merge(it.prototype,{int64:function(){return lt.call(this)[ht](!1)},uint64:function(){return lt.call(this)[ht](!0)},sint64:function(){return lt.call(this).zzDecode()[ht](!1)},fixed64:function(){return pt.call(this)[ht](!0)},sfixed64:function(){return pt.call(this)[ht](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=rt;var _e=requireReader();(rt.prototype=Object.create(_e.prototype)).constructor=rt;var et=requireMinimal$1();function rt(nt){_e.call(this,nt)}return rt._configure=function(){et.Buffer&&(rt.prototype._slice=et.Buffer.prototype.slice)},rt.prototype.string=function(){var ot=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ot,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ot,this.len))},rt._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=et;var _e=requireMinimal$1();(et.prototype=Object.create(_e.EventEmitter.prototype)).constructor=et;function et(rt,nt,ot){if(typeof rt!="function")throw TypeError("rpcImpl must be a function");_e.EventEmitter.call(this),this.rpcImpl=rt,this.requestDelimited=Boolean(nt),this.responseDelimited=Boolean(ot)}return et.prototype.rpcCall=function rt(nt,ot,it,st,at){if(!st)throw TypeError("request must be specified");var lt=this;if(!at)return _e.asPromise(rt,lt,nt,ot,it,st);if(!lt.rpcImpl){setTimeout(function(){at(Error("already ended"))},0);return}try{return lt.rpcImpl(nt,ot[lt.requestDelimited?"encodeDelimited":"encode"](st).finish(),function(pt,ut){if(pt)return lt.emit("error",pt,nt),at(pt);if(ut===null){lt.end(!0);return}if(!(ut instanceof it))try{ut=it[lt.responseDelimited?"decodeDelimited":"decode"](ut)}catch(ht){return lt.emit("error",ht,nt),at(ht)}return lt.emit("data",ut,nt),at(null,ut)})}catch(ct){lt.emit("error",ct,nt),setTimeout(function(){at(ct)},0);return}},et.prototype.end=function(nt){return this.rpcImpl&&(nt||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(_e){var et=_e;et.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(_e){var et=_e;et.build="minimal",et.Writer=requireWriter(),et.BufferWriter=requireWriter_buffer(),et.Reader=requireReader(),et.BufferReader=requireReader_buffer(),et.util=requireMinimal$1(),et.rpc=requireRpc(),et.roots=requireRoots(),et.configure=rt;function rt(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}rt()}(indexMinimal)),indexMinimal}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(_e){_e.exports=requireIndexMinimal()}(minimal$1)),minimalExports}var hasRequiredZegoExpressWebRTM;function requireZegoExpressWebRTM(){return hasRequiredZegoExpressWebRTM||(hasRequiredZegoExpressWebRTM=1,function(_e,et){(function(rt,nt){_e.exports=nt(requireMinimal())})(typeof self<"u"?self:commonjsGlobal$1,function(rt){return ot=[function(st,at,lt){var ct,pt,ut=(lt=lt(7)).Reader,ht=lt.Writer,ft=lt.util,gt=lt.roots.default||(lt.roots.default={});function vt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function yt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function mt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Et(dt){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function bt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ct(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Tt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function wt(dt){if(this.trans_seq_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Rt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function It(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function St(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Pt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ot(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ut(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Bt(dt){if(this.redirect_server=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function xt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function At(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Mt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Nt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function $t(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ft(dt){if(this.messages=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function jt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function zt(dt){if(this.messages=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Yt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Kt(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function er(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function ir(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function rr(dt){if(this.trans_seqs=[],this.user_trans_seqs=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function lr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function nr(dt){if(this.trans_seq_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function hr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function vr(dt){if(this.user_basic_list=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function yr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Cr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function or(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function ur(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function pr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Er(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Sr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ht(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function qt(dt){if(this.stream_info=[],this.stream_mix_info=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function fr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function cr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ar(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Gr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Qr(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function hn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function sn(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function qr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function dr(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function mr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function br(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Rr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Pr(dt){if(this.dst_userlist=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Or(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Nr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Br(dt){if(this.msg_data=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function jr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function $r(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Fr(dt){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Zr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function pn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function mn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function vn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function jn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function yn(dt){if(this.room_list=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Kn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Qn(dt){if(this.stream_list=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function bn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function so(dt){if(this.trans_seq_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function zr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function zn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Zn(dt){if(this.fetch_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Fn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function En(dt){if(this.trans_fetch_results=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Cn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Mn(dt){if(this.fetch_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Vn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function $n(dt){if(this.trans_fetch_results=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Sn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Yn(dt){if(this.msgs=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Vr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Ur(dt){if(this.msgs=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function cn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function gn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function kn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function dn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Bn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Xr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Hn(dt){if(this.user_list=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function po(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function go(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function mo(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Jr(dt){if(this.stream_id_list=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function bo(dt){if(this.stream_info=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Wn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Gn(dt){if(this.msg_data=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function eo(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function ho(dt){if(this.msg_data=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function lo(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function Dn(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function sr(dt){if(this.trans_array=[],dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}function xr(dt){if(dt)for(var Lt=Object.keys(dt),Vt=0;Vt<Lt.length;++Vt)dt[Lt[Vt]]!=null&&(this[Lt[Vt]]=dt[Lt[Vt]])}gt.proto_switch=((lt={}).CommonRsp=(vt.prototype.rsp_head=null,vt.create=function(dt){return new vt(dt)},vt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.proto_switch.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},vt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.CommonRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.proto_switch.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},vt),lt.RspHead=(yt.prototype.code=0,yt.prototype.message="",yt.create=function(dt){return new yt(dt)},yt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.code!=null&&Object.hasOwnProperty.call(dt,"code")&&Lt.uint32(8).uint32(dt.code),dt.message!=null&&Object.hasOwnProperty.call(dt,"message")&&Lt.uint32(18).string(dt.message),Lt},yt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.RspHead;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.code=dt.uint32();break;case 2:Zt.message=dt.string();break;default:dt.skipType(7&kt)}}return Zt},yt),lt.LoginRoomReq=(mt.prototype.app_id=0,mt.prototype.id_name=ft.newBuffer([]),mt.prototype.device_id="",mt.prototype.term_type=0,mt.prototype.net_type=0,mt.prototype.sdk_ver=0,mt.prototype.proto_ver=0,mt.prototype.nick_name=ft.newBuffer([]),mt.prototype.client_stamp=ft.newBuffer([]),mt.prototype.crypt_version=0,mt.prototype.k1_sign=ft.newBuffer([]),mt.prototype.login_token=ft.newBuffer([]),mt.prototype.relogin_token=ft.newBuffer([]),mt.prototype.role=0,mt.prototype.liveroom_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,mt.prototype.room_id=ft.newBuffer([]),mt.prototype.room_name=ft.newBuffer([]),mt.prototype.biz_type=0,mt.prototype.room_create_flag=0,mt.prototype.user_state_flag=0,mt.prototype.lv_key="",mt.prototype.third_token=ft.newBuffer([]),mt.prototype.cluster_req=0,mt.prototype.user_count_limit=0,mt.prototype.relate_service="",mt.prototype.biz_version="",mt.prototype.login_logic=0,mt.prototype.sdk_conn_type=0,mt.create=function(dt){return new mt(dt)},mt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.app_id!=null&&Object.hasOwnProperty.call(dt,"app_id")&&Lt.uint32(8).uint32(dt.app_id),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(18).bytes(dt.id_name),dt.device_id!=null&&Object.hasOwnProperty.call(dt,"device_id")&&Lt.uint32(26).string(dt.device_id),dt.term_type!=null&&Object.hasOwnProperty.call(dt,"term_type")&&Lt.uint32(32).int32(dt.term_type),dt.net_type!=null&&Object.hasOwnProperty.call(dt,"net_type")&&Lt.uint32(40).int32(dt.net_type),dt.sdk_ver!=null&&Object.hasOwnProperty.call(dt,"sdk_ver")&&Lt.uint32(48).uint32(dt.sdk_ver),dt.proto_ver!=null&&Object.hasOwnProperty.call(dt,"proto_ver")&&Lt.uint32(56).int32(dt.proto_ver),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(66).bytes(dt.nick_name),dt.client_stamp!=null&&Object.hasOwnProperty.call(dt,"client_stamp")&&Lt.uint32(74).bytes(dt.client_stamp),dt.crypt_version!=null&&Object.hasOwnProperty.call(dt,"crypt_version")&&Lt.uint32(80).uint32(dt.crypt_version),dt.k1_sign!=null&&Object.hasOwnProperty.call(dt,"k1_sign")&&Lt.uint32(90).bytes(dt.k1_sign),dt.login_token!=null&&Object.hasOwnProperty.call(dt,"login_token")&&Lt.uint32(98).bytes(dt.login_token),dt.relogin_token!=null&&Object.hasOwnProperty.call(dt,"relogin_token")&&Lt.uint32(106).bytes(dt.relogin_token),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(112).uint32(dt.role),dt.liveroom_session_id!=null&&Object.hasOwnProperty.call(dt,"liveroom_session_id")&&Lt.uint32(120).uint64(dt.liveroom_session_id),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(130).bytes(dt.room_id),dt.room_name!=null&&Object.hasOwnProperty.call(dt,"room_name")&&Lt.uint32(138).bytes(dt.room_name),dt.biz_type!=null&&Object.hasOwnProperty.call(dt,"biz_type")&&Lt.uint32(144).uint32(dt.biz_type),dt.room_create_flag!=null&&Object.hasOwnProperty.call(dt,"room_create_flag")&&Lt.uint32(152).uint32(dt.room_create_flag),dt.user_state_flag!=null&&Object.hasOwnProperty.call(dt,"user_state_flag")&&Lt.uint32(160).uint32(dt.user_state_flag),dt.lv_key!=null&&Object.hasOwnProperty.call(dt,"lv_key")&&Lt.uint32(170).string(dt.lv_key),dt.third_token!=null&&Object.hasOwnProperty.call(dt,"third_token")&&Lt.uint32(178).bytes(dt.third_token),dt.cluster_req!=null&&Object.hasOwnProperty.call(dt,"cluster_req")&&Lt.uint32(184).uint32(dt.cluster_req),dt.user_count_limit!=null&&Object.hasOwnProperty.call(dt,"user_count_limit")&&Lt.uint32(192).uint32(dt.user_count_limit),dt.relate_service!=null&&Object.hasOwnProperty.call(dt,"relate_service")&&Lt.uint32(202).string(dt.relate_service),dt.biz_version!=null&&Object.hasOwnProperty.call(dt,"biz_version")&&Lt.uint32(210).string(dt.biz_version),dt.login_logic!=null&&Object.hasOwnProperty.call(dt,"login_logic")&&Lt.uint32(216).uint32(dt.login_logic),dt.sdk_conn_type!=null&&Object.hasOwnProperty.call(dt,"sdk_conn_type")&&Lt.uint32(224).int32(dt.sdk_conn_type),Lt},mt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.LoginRoomReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.app_id=dt.uint32();break;case 2:Zt.id_name=dt.bytes();break;case 3:Zt.device_id=dt.string();break;case 4:Zt.term_type=dt.int32();break;case 5:Zt.net_type=dt.int32();break;case 6:Zt.sdk_ver=dt.uint32();break;case 7:Zt.proto_ver=dt.int32();break;case 8:Zt.nick_name=dt.bytes();break;case 9:Zt.client_stamp=dt.bytes();break;case 10:Zt.crypt_version=dt.uint32();break;case 11:Zt.k1_sign=dt.bytes();break;case 12:Zt.login_token=dt.bytes();break;case 13:Zt.relogin_token=dt.bytes();break;case 14:Zt.role=dt.uint32();break;case 15:Zt.liveroom_session_id=dt.uint64();break;case 16:Zt.room_id=dt.bytes();break;case 17:Zt.room_name=dt.bytes();break;case 18:Zt.biz_type=dt.uint32();break;case 19:Zt.room_create_flag=dt.uint32();break;case 20:Zt.user_state_flag=dt.uint32();break;case 21:Zt.lv_key=dt.string();break;case 22:Zt.third_token=dt.bytes();break;case 23:Zt.cluster_req=dt.uint32();break;case 24:Zt.user_count_limit=dt.uint32();break;case 25:Zt.relate_service=dt.string();break;case 26:Zt.biz_version=dt.string();break;case 27:Zt.login_logic=dt.uint32();break;case 28:Zt.sdk_conn_type=dt.int32();break;default:dt.skipType(7&kt)}}return Zt},mt),lt.LoginRoomRsp=(Et.prototype.rsp_head=null,Et.prototype.room_id=ft.newBuffer([]),Et.prototype.heartbeat_interval=0,Et.prototype.heartbeat_timeout=0,Et.prototype.ret_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,Et.prototype.crypt_option=0,Et.prototype.k2_sign=ft.newBuffer([]),Et.prototype.liveroom_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Et.prototype.liveroom_hb_interval=0,Et.prototype.liveroom_hb_timeout=0,Et.prototype.anchor_info=null,Et.prototype.stream_seq=0,Et.prototype.stream_info=ft.emptyArray,Et.prototype.stream_fetch_flag=0,Et.prototype.lv_key="",Et.prototype.zp_key="",Et.prototype.online_count=0,Et.prototype.bigim_time_window=0,Et.prototype.dati_time_window=0,Et.prototype.cluster_name="",Et.prototype.relogin_token=ft.newBuffer([]),Et.prototype.stream_mix_info=ft.emptyArray,Et.prototype.userlist_merge_timeout=0,Et.prototype.userlist_interval=0,Et.prototype.room_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Et.prototype.trans_seqs=ft.emptyArray,Et.prototype.stream_list_push_merge_timeout=0,Et.prototype.stream_list_hb_wait_merge_time=0,Et.prototype.trans_list_seq=0,Et.prototype.token_remain_time=0,Et.create=function(dt){return new Et(dt)},Et.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.proto_switch.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.heartbeat_interval!=null&&Object.hasOwnProperty.call(dt,"heartbeat_interval")&&Lt.uint32(24).uint32(dt.heartbeat_interval),dt.heartbeat_timeout!=null&&Object.hasOwnProperty.call(dt,"heartbeat_timeout")&&Lt.uint32(32).uint32(dt.heartbeat_timeout),dt.ret_timestamp!=null&&Object.hasOwnProperty.call(dt,"ret_timestamp")&&Lt.uint32(40).int64(dt.ret_timestamp),dt.crypt_option!=null&&Object.hasOwnProperty.call(dt,"crypt_option")&&Lt.uint32(48).uint32(dt.crypt_option),dt.k2_sign!=null&&Object.hasOwnProperty.call(dt,"k2_sign")&&Lt.uint32(58).bytes(dt.k2_sign),dt.liveroom_session_id!=null&&Object.hasOwnProperty.call(dt,"liveroom_session_id")&&Lt.uint32(64).uint64(dt.liveroom_session_id),dt.liveroom_hb_interval!=null&&Object.hasOwnProperty.call(dt,"liveroom_hb_interval")&&Lt.uint32(72).uint32(dt.liveroom_hb_interval),dt.liveroom_hb_timeout!=null&&Object.hasOwnProperty.call(dt,"liveroom_hb_timeout")&&Lt.uint32(80).uint32(dt.liveroom_hb_timeout),dt.anchor_info!=null&&Object.hasOwnProperty.call(dt,"anchor_info")&&gt.proto_switch.StAnchorInfo.encode(dt.anchor_info,Lt.uint32(90).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(96).uint32(dt.stream_seq),dt.stream_info!=null&&dt.stream_info.length)for(var Vt=0;Vt<dt.stream_info.length;++Vt)gt.proto_switch.StStreamInfo.encode(dt.stream_info[Vt],Lt.uint32(106).fork()).ldelim();if(dt.stream_fetch_flag!=null&&Object.hasOwnProperty.call(dt,"stream_fetch_flag")&&Lt.uint32(112).uint32(dt.stream_fetch_flag),dt.lv_key!=null&&Object.hasOwnProperty.call(dt,"lv_key")&&Lt.uint32(122).string(dt.lv_key),dt.zp_key!=null&&Object.hasOwnProperty.call(dt,"zp_key")&&Lt.uint32(130).string(dt.zp_key),dt.online_count!=null&&Object.hasOwnProperty.call(dt,"online_count")&&Lt.uint32(136).uint32(dt.online_count),dt.bigim_time_window!=null&&Object.hasOwnProperty.call(dt,"bigim_time_window")&&Lt.uint32(144).uint32(dt.bigim_time_window),dt.dati_time_window!=null&&Object.hasOwnProperty.call(dt,"dati_time_window")&&Lt.uint32(152).uint32(dt.dati_time_window),dt.cluster_name!=null&&Object.hasOwnProperty.call(dt,"cluster_name")&&Lt.uint32(162).string(dt.cluster_name),dt.relogin_token!=null&&Object.hasOwnProperty.call(dt,"relogin_token")&&Lt.uint32(170).bytes(dt.relogin_token),dt.stream_mix_info!=null&&dt.stream_mix_info.length)for(Vt=0;Vt<dt.stream_mix_info.length;++Vt)gt.proto_switch.StStreamInfo.encode(dt.stream_mix_info[Vt],Lt.uint32(178).fork()).ldelim();if(dt.userlist_merge_timeout!=null&&Object.hasOwnProperty.call(dt,"userlist_merge_timeout")&&Lt.uint32(184).uint32(dt.userlist_merge_timeout),dt.userlist_interval!=null&&Object.hasOwnProperty.call(dt,"userlist_interval")&&Lt.uint32(192).uint32(dt.userlist_interval),dt.room_session_id!=null&&Object.hasOwnProperty.call(dt,"room_session_id")&&Lt.uint32(200).uint64(dt.room_session_id),dt.trans_seqs!=null&&dt.trans_seqs.length)for(Vt=0;Vt<dt.trans_seqs.length;++Vt)gt.proto_switch.StTransInfo.encode(dt.trans_seqs[Vt],Lt.uint32(210).fork()).ldelim();return dt.stream_list_push_merge_timeout!=null&&Object.hasOwnProperty.call(dt,"stream_list_push_merge_timeout")&&Lt.uint32(216).uint32(dt.stream_list_push_merge_timeout),dt.stream_list_hb_wait_merge_time!=null&&Object.hasOwnProperty.call(dt,"stream_list_hb_wait_merge_time")&&Lt.uint32(224).uint32(dt.stream_list_hb_wait_merge_time),dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(232).uint32(dt.trans_list_seq),dt.token_remain_time!=null&&Object.hasOwnProperty.call(dt,"token_remain_time")&&Lt.uint32(240).uint32(dt.token_remain_time),Lt},Et.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.LoginRoomRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.proto_switch.RspHead.decode(dt,dt.uint32());break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.heartbeat_interval=dt.uint32();break;case 4:Zt.heartbeat_timeout=dt.uint32();break;case 5:Zt.ret_timestamp=dt.int64();break;case 6:Zt.crypt_option=dt.uint32();break;case 7:Zt.k2_sign=dt.bytes();break;case 8:Zt.liveroom_session_id=dt.uint64();break;case 9:Zt.liveroom_hb_interval=dt.uint32();break;case 10:Zt.liveroom_hb_timeout=dt.uint32();break;case 11:Zt.anchor_info=gt.proto_switch.StAnchorInfo.decode(dt,dt.uint32());break;case 12:Zt.stream_seq=dt.uint32();break;case 13:Zt.stream_info&&Zt.stream_info.length||(Zt.stream_info=[]),Zt.stream_info.push(gt.proto_switch.StStreamInfo.decode(dt,dt.uint32()));break;case 14:Zt.stream_fetch_flag=dt.uint32();break;case 15:Zt.lv_key=dt.string();break;case 16:Zt.zp_key=dt.string();break;case 17:Zt.online_count=dt.uint32();break;case 18:Zt.bigim_time_window=dt.uint32();break;case 19:Zt.dati_time_window=dt.uint32();break;case 20:Zt.cluster_name=dt.string();break;case 21:Zt.relogin_token=dt.bytes();break;case 22:Zt.stream_mix_info&&Zt.stream_mix_info.length||(Zt.stream_mix_info=[]),Zt.stream_mix_info.push(gt.proto_switch.StStreamInfo.decode(dt,dt.uint32()));break;case 23:Zt.userlist_merge_timeout=dt.uint32();break;case 24:Zt.userlist_interval=dt.uint32();break;case 25:Zt.room_session_id=dt.uint64();break;case 26:Zt.trans_seqs&&Zt.trans_seqs.length||(Zt.trans_seqs=[]),Zt.trans_seqs.push(gt.proto_switch.StTransInfo.decode(dt,dt.uint32()));break;case 27:Zt.stream_list_push_merge_timeout=dt.uint32();break;case 28:Zt.stream_list_hb_wait_merge_time=dt.uint32();break;case 29:Zt.trans_list_seq=dt.uint32();break;case 30:Zt.token_remain_time=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Et),lt.StAnchorInfo=(bt.prototype.anchor_id_name=ft.newBuffer([]),bt.prototype.anchor_id=ft.Long?ft.Long.fromBits(0,0,!0):0,bt.prototype.anchor_nick_name=ft.newBuffer([]),bt.create=function(dt){return new bt(dt)},bt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.anchor_id_name!=null&&Object.hasOwnProperty.call(dt,"anchor_id_name")&&Lt.uint32(10).bytes(dt.anchor_id_name),dt.anchor_id!=null&&Object.hasOwnProperty.call(dt,"anchor_id")&&Lt.uint32(16).uint64(dt.anchor_id),dt.anchor_nick_name!=null&&Object.hasOwnProperty.call(dt,"anchor_nick_name")&&Lt.uint32(26).bytes(dt.anchor_nick_name),Lt},bt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.StAnchorInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.anchor_id_name=dt.bytes();break;case 2:Zt.anchor_id=dt.uint64();break;case 3:Zt.anchor_nick_name=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},bt),lt.StStreamInfo=(Ct.prototype.stream_id=ft.newBuffer([]),Ct.prototype.stream_sid="",Ct.prototype.id_name=ft.newBuffer([]),Ct.prototype.nick_name=ft.newBuffer([]),Ct.prototype.create_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Ct.prototype.extra_info=ft.newBuffer([]),Ct.prototype.title=ft.newBuffer([]),Ct.prototype.stream_ver=0,Ct.prototype.stream_attr=ft.newBuffer([]),Ct.prototype.stream_src=0,Ct.prototype.stream_state=0,Ct.prototype.stream_type=0,Ct.prototype.stream_nid=0,Ct.create=function(dt){return new Ct(dt)},Ct.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(10).bytes(dt.stream_id),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(18).string(dt.stream_sid),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(26).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(34).bytes(dt.nick_name),dt.create_time!=null&&Object.hasOwnProperty.call(dt,"create_time")&&Lt.uint32(41).fixed64(dt.create_time),dt.extra_info!=null&&Object.hasOwnProperty.call(dt,"extra_info")&&Lt.uint32(50).bytes(dt.extra_info),dt.title!=null&&Object.hasOwnProperty.call(dt,"title")&&Lt.uint32(58).bytes(dt.title),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(64).uint32(dt.stream_ver),dt.stream_attr!=null&&Object.hasOwnProperty.call(dt,"stream_attr")&&Lt.uint32(74).bytes(dt.stream_attr),dt.stream_src!=null&&Object.hasOwnProperty.call(dt,"stream_src")&&Lt.uint32(80).uint32(dt.stream_src),dt.stream_state!=null&&Object.hasOwnProperty.call(dt,"stream_state")&&Lt.uint32(88).uint32(dt.stream_state),dt.stream_type!=null&&Object.hasOwnProperty.call(dt,"stream_type")&&Lt.uint32(96).uint32(dt.stream_type),dt.stream_nid!=null&&Object.hasOwnProperty.call(dt,"stream_nid")&&Lt.uint32(104).uint32(dt.stream_nid),Lt},Ct.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.StStreamInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.stream_id=dt.bytes();break;case 2:Zt.stream_sid=dt.string();break;case 3:Zt.id_name=dt.bytes();break;case 4:Zt.nick_name=dt.bytes();break;case 5:Zt.create_time=dt.fixed64();break;case 6:Zt.extra_info=dt.bytes();break;case 7:Zt.title=dt.bytes();break;case 8:Zt.stream_ver=dt.uint32();break;case 9:Zt.stream_attr=dt.bytes();break;case 10:Zt.stream_src=dt.uint32();break;case 11:Zt.stream_state=dt.uint32();break;case 12:Zt.stream_type=dt.uint32();break;case 13:Zt.stream_nid=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Ct),lt.StTransSeqInfo=(Tt.prototype.trans_type=ft.newBuffer([]),Tt.prototype.trans_seq=0,Tt.create=function(dt){return new Tt(dt)},Tt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(16).uint32(dt.trans_seq),Lt},Tt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.StTransSeqInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Tt),lt.StTransInfo=(wt.prototype.trans_channel=ft.newBuffer([]),wt.prototype.trans_seq_array=ft.emptyArray,wt.create=function(dt){return new wt(dt)},wt.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(10).bytes(dt.trans_channel),dt.trans_seq_array!=null&&dt.trans_seq_array.length)for(var Vt=0;Vt<dt.trans_seq_array.length;++Vt)gt.proto_switch.StTransSeqInfo.encode(dt.trans_seq_array[Vt],Lt.uint32(18).fork()).ldelim();return Lt},wt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.StTransInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_channel=dt.bytes();break;case 2:Zt.trans_seq_array&&Zt.trans_seq_array.length||(Zt.trans_seq_array=[]),Zt.trans_seq_array.push(gt.proto_switch.StTransSeqInfo.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},wt),lt.LogoutRoomReq=(Rt.prototype.logout_code=0,Rt.prototype.logout_check=ft.newBuffer([]),Rt.prototype.liveroom_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Rt.prototype.room_id=ft.newBuffer([]),Rt.prototype.role=0,Rt.prototype.nickname=ft.newBuffer([]),Rt.prototype.logout_logic=0,Rt.create=function(dt){return new Rt(dt)},Rt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.logout_code!=null&&Object.hasOwnProperty.call(dt,"logout_code")&&Lt.uint32(8).uint32(dt.logout_code),dt.logout_check!=null&&Object.hasOwnProperty.call(dt,"logout_check")&&Lt.uint32(18).bytes(dt.logout_check),dt.liveroom_session_id!=null&&Object.hasOwnProperty.call(dt,"liveroom_session_id")&&Lt.uint32(24).uint64(dt.liveroom_session_id),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(34).bytes(dt.room_id),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(40).uint32(dt.role),dt.nickname!=null&&Object.hasOwnProperty.call(dt,"nickname")&&Lt.uint32(50).bytes(dt.nickname),dt.logout_logic!=null&&Object.hasOwnProperty.call(dt,"logout_logic")&&Lt.uint32(56).uint32(dt.logout_logic),Lt},Rt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.LogoutRoomReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.logout_code=dt.uint32();break;case 2:Zt.logout_check=dt.bytes();break;case 3:Zt.liveroom_session_id=dt.uint64();break;case 4:Zt.room_id=dt.bytes();break;case 5:Zt.role=dt.uint32();break;case 6:Zt.nickname=dt.bytes();break;case 7:Zt.logout_logic=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Rt),lt.LogoutRoomRsp=(It.prototype.rsp_head=null,It.create=function(dt){return new It(dt)},It.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.proto_switch.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},It.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.LogoutRoomRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.proto_switch.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},It),lt.TcpHbReq=(St.prototype.id_name=ft.newBuffer([]),St.create=function(dt){return new St(dt)},St.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),Lt},St.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.TcpHbReq;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.id_name=dt.bytes():dt.skipType(7&kt)}return Zt},St),lt.TcpHbRsp=(Pt.prototype.rsp_head=null,Pt.prototype.heartbeat_interval=0,Pt.prototype.heartbeat_timeout=0,Pt.prototype.server_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,Pt.create=function(dt){return new Pt(dt)},Pt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.proto_switch.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.heartbeat_interval!=null&&Object.hasOwnProperty.call(dt,"heartbeat_interval")&&Lt.uint32(16).uint32(dt.heartbeat_interval),dt.heartbeat_timeout!=null&&Object.hasOwnProperty.call(dt,"heartbeat_timeout")&&Lt.uint32(24).uint32(dt.heartbeat_timeout),dt.server_timestamp!=null&&Object.hasOwnProperty.call(dt,"server_timestamp")&&Lt.uint32(32).int64(dt.server_timestamp),Lt},Pt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.TcpHbRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.proto_switch.RspHead.decode(dt,dt.uint32());break;case 2:Zt.heartbeat_interval=dt.uint32();break;case 3:Zt.heartbeat_timeout=dt.uint32();break;case 4:Zt.server_timestamp=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},Pt),lt.TermType=(pt={},(ct=Object.create(pt))[pt[0]="TT_NONE"]=0,ct[pt[1]="TT_PC"]=1,ct[pt[2]="TT_IOS"]=2,ct[pt[3]="TT_ANDROID"]=3,ct[pt[4]="TT_MAC"]=4,ct[pt[5]="TT_LINUX"]=5,ct[pt[6]="TT_WEB"]=6,ct[pt[7]="TT_MINIPROGRAM"]=7,ct[pt[32]="TT_UNKNOWN"]=32,ct),lt.NetType=(pt={},(ct=Object.create(pt))[pt[0]="NT_NONE"]=0,ct[pt[1]="NT_LINE"]=1,ct[pt[2]="NT_WIFI"]=2,ct[pt[3]="NT_2G"]=3,ct[pt[4]="NT_3G"]=4,ct[pt[5]="NT_4G"]=5,ct[pt[32]="NT_UNKNOWN"]=32,ct),lt.ProductType=(pt={},(ct=Object.create(pt))[pt[0]="PRODUCT_TYPE_NONE"]=0,ct[pt[1]="PRODUCT_TYPE_LIVEROOM"]=1,ct[pt[2]="PRODUCT_TYPE_IM"]=2,ct),lt.LiveroomProtoVersion=(pt={},(ct=Object.create(pt))[pt[0]="PROTO_VERSION_NONE"]=0,ct[pt[131072]="RPOTO_V020000"]=131072,ct),lt.SdkConnType=(pt={},(ct=Object.create(pt))[pt[0]="SdkConnType_None"]=0,ct[pt[1]="SdkConnType_Tcp"]=1,ct[pt[2]="SdkConnType_Websocket"]=2,ct),lt.Header=(Ot.prototype.cmd="",Ot.prototype.seq=0,Ot.prototype.timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,Ot.prototype.app_id=0,Ot.prototype.user_id="",Ot.prototype.session_id=ft.Long?ft.Long.fromBits(0,0,!1):0,Ot.prototype.user_nid=ft.Long?ft.Long.fromBits(0,0,!1):0,Ot.prototype.controls=ft.newBuffer([]),Ot.prototype.product=0,Ot.prototype.flags=ft.newBuffer([]),Ot.create=function(dt){return new Ot(dt)},Ot.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.cmd!=null&&Object.hasOwnProperty.call(dt,"cmd")&&Lt.uint32(10).string(dt.cmd),dt.seq!=null&&Object.hasOwnProperty.call(dt,"seq")&&Lt.uint32(16).uint32(dt.seq),dt.timestamp!=null&&Object.hasOwnProperty.call(dt,"timestamp")&&Lt.uint32(24).int64(dt.timestamp),dt.app_id!=null&&Object.hasOwnProperty.call(dt,"app_id")&&Lt.uint32(32).uint32(dt.app_id),dt.user_id!=null&&Object.hasOwnProperty.call(dt,"user_id")&&Lt.uint32(42).string(dt.user_id),dt.session_id!=null&&Object.hasOwnProperty.call(dt,"session_id")&&Lt.uint32(48).int64(dt.session_id),dt.user_nid!=null&&Object.hasOwnProperty.call(dt,"user_nid")&&Lt.uint32(56).int64(dt.user_nid),dt.controls!=null&&Object.hasOwnProperty.call(dt,"controls")&&Lt.uint32(66).bytes(dt.controls),dt.product!=null&&Object.hasOwnProperty.call(dt,"product")&&Lt.uint32(72).int32(dt.product),dt.flags!=null&&Object.hasOwnProperty.call(dt,"flags")&&Lt.uint32(82).bytes(dt.flags),Lt},Ot.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.Header;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.cmd=dt.string();break;case 2:Zt.seq=dt.uint32();break;case 3:Zt.timestamp=dt.int64();break;case 4:Zt.app_id=dt.uint32();break;case 5:Zt.user_id=dt.string();break;case 6:Zt.session_id=dt.int64();break;case 7:Zt.user_nid=dt.int64();break;case 8:Zt.controls=dt.bytes();break;case 9:Zt.product=dt.int32();break;case 10:Zt.flags=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Ot),lt.PushKickout=(Ut.prototype.reason=0,Ut.prototype.message="",Ut.prototype.need_relogin=0,Ut.create=function(dt){return new Ut(dt)},Ut.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.reason!=null&&Object.hasOwnProperty.call(dt,"reason")&&Lt.uint32(8).uint32(dt.reason),dt.message!=null&&Object.hasOwnProperty.call(dt,"message")&&Lt.uint32(18).string(dt.message),dt.need_relogin!=null&&Object.hasOwnProperty.call(dt,"need_relogin")&&Lt.uint32(24).uint32(dt.need_relogin),Lt},Ut.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.PushKickout;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.reason=dt.uint32();break;case 2:Zt.message=dt.string();break;case 3:Zt.need_relogin=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Ut),lt.PushRedirect2Sdk=(Bt.prototype.redirect_server=ft.emptyArray,Bt.create=function(dt){return new Bt(dt)},Bt.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.redirect_server!=null&&dt.redirect_server.length)for(var Vt=0;Vt<dt.redirect_server.length;++Vt)Lt.uint32(10).string(dt.redirect_server[Vt]);return Lt},Bt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.PushRedirect2Sdk;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?(Zt.redirect_server&&Zt.redirect_server.length||(Zt.redirect_server=[]),Zt.redirect_server.push(dt.string())):dt.skipType(7&kt)}return Zt},Bt),lt.PushReq=(xt.prototype.head=null,xt.prototype.msg_body=ft.newBuffer([]),xt.create=function(dt){return new xt(dt)},xt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.head!=null&&Object.hasOwnProperty.call(dt,"head")&&gt.proto_switch.PushReqHead.encode(dt.head,Lt.uint32(10).fork()).ldelim(),dt.msg_body!=null&&Object.hasOwnProperty.call(dt,"msg_body")&&Lt.uint32(18).bytes(dt.msg_body),Lt},xt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.PushReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.head=gt.proto_switch.PushReqHead.decode(dt,dt.uint32());break;case 2:Zt.msg_body=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},xt),lt.PushReqHead=(At.prototype.sub_cmd="",At.prototype.sender_user_id="",At.prototype.qos_flag=0,At.prototype.msg_id="",At.prototype.send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,At.prototype.room_id=ft.newBuffer([]),At.prototype.sender_user_nid=ft.Long?ft.Long.fromBits(0,0,!0):0,At.create=function(dt){return new At(dt)},At.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.sub_cmd!=null&&Object.hasOwnProperty.call(dt,"sub_cmd")&&Lt.uint32(10).string(dt.sub_cmd),dt.sender_user_id!=null&&Object.hasOwnProperty.call(dt,"sender_user_id")&&Lt.uint32(18).string(dt.sender_user_id),dt.qos_flag!=null&&Object.hasOwnProperty.call(dt,"qos_flag")&&Lt.uint32(24).uint32(dt.qos_flag),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(34).string(dt.msg_id),dt.send_time!=null&&Object.hasOwnProperty.call(dt,"send_time")&&Lt.uint32(40).int64(dt.send_time),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(50).bytes(dt.room_id),dt.sender_user_nid!=null&&Object.hasOwnProperty.call(dt,"sender_user_nid")&&Lt.uint32(56).uint64(dt.sender_user_nid),Lt},At.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.PushReqHead;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.sub_cmd=dt.string();break;case 2:Zt.sender_user_id=dt.string();break;case 3:Zt.qos_flag=dt.uint32();break;case 4:Zt.msg_id=dt.string();break;case 5:Zt.send_time=dt.int64();break;case 6:Zt.room_id=dt.bytes();break;case 7:Zt.sender_user_nid=dt.uint64();break;default:dt.skipType(7&kt)}}return Zt},At),lt.PushRsp=(Mt.prototype.code=0,Mt.prototype.message="",Mt.prototype.sub_cmd="",Mt.prototype.msg_id="",Mt.prototype.server_send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Mt.create=function(dt){return new Mt(dt)},Mt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.code!=null&&Object.hasOwnProperty.call(dt,"code")&&Lt.uint32(8).uint32(dt.code),dt.message!=null&&Object.hasOwnProperty.call(dt,"message")&&Lt.uint32(18).string(dt.message),dt.sub_cmd!=null&&Object.hasOwnProperty.call(dt,"sub_cmd")&&Lt.uint32(26).string(dt.sub_cmd),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(34).string(dt.msg_id),dt.server_send_time!=null&&Object.hasOwnProperty.call(dt,"server_send_time")&&Lt.uint32(40).int64(dt.server_send_time),Lt},Mt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.PushRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.code=dt.uint32();break;case 2:Zt.message=dt.string();break;case 3:Zt.sub_cmd=dt.string();break;case 4:Zt.msg_id=dt.string();break;case 5:Zt.server_send_time=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},Mt),lt.MergePushHead=(Nt.prototype.qos_flag=0,Nt.prototype.send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Nt.prototype.room_id=ft.newBuffer([]),Nt.create=function(dt){return new Nt(dt)},Nt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.qos_flag!=null&&Object.hasOwnProperty.call(dt,"qos_flag")&&Lt.uint32(8).uint32(dt.qos_flag),dt.send_time!=null&&Object.hasOwnProperty.call(dt,"send_time")&&Lt.uint32(16).int64(dt.send_time),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(26).bytes(dt.room_id),Lt},Nt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.MergePushHead;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.qos_flag=dt.uint32();break;case 2:Zt.send_time=dt.int64();break;case 3:Zt.room_id=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Nt),lt.MergePushInfo=($t.prototype.sub_cmd="",$t.prototype.sub_seq=0,$t.prototype.sender_nid=ft.Long?ft.Long.fromBits(0,0,!0):0,$t.prototype.msg_id=ft.newBuffer([]),$t.prototype.msg_body=ft.newBuffer([]),$t.prototype.msg_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,$t.create=function(dt){return new $t(dt)},$t.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.sub_cmd!=null&&Object.hasOwnProperty.call(dt,"sub_cmd")&&Lt.uint32(10).string(dt.sub_cmd),dt.sub_seq!=null&&Object.hasOwnProperty.call(dt,"sub_seq")&&Lt.uint32(16).uint32(dt.sub_seq),dt.sender_nid!=null&&Object.hasOwnProperty.call(dt,"sender_nid")&&Lt.uint32(24).uint64(dt.sender_nid),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(34).bytes(dt.msg_id),dt.msg_body!=null&&Object.hasOwnProperty.call(dt,"msg_body")&&Lt.uint32(42).bytes(dt.msg_body),dt.msg_timestamp!=null&&Object.hasOwnProperty.call(dt,"msg_timestamp")&&Lt.uint32(48).int64(dt.msg_timestamp),Lt},$t.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.MergePushInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.sub_cmd=dt.string();break;case 2:Zt.sub_seq=dt.uint32();break;case 3:Zt.sender_nid=dt.uint64();break;case 4:Zt.msg_id=dt.bytes();break;case 5:Zt.msg_body=dt.bytes();break;case 6:Zt.msg_timestamp=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},$t),lt.CmdMergePushReq=(Ft.prototype.head=null,Ft.prototype.messages=ft.emptyArray,Ft.create=function(dt){return new Ft(dt)},Ft.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.head!=null&&Object.hasOwnProperty.call(dt,"head")&&gt.proto_switch.MergePushHead.encode(dt.head,Lt.uint32(10).fork()).ldelim(),dt.messages!=null&&dt.messages.length)for(var Vt=0;Vt<dt.messages.length;++Vt)gt.proto_switch.MergePushInfo.encode(dt.messages[Vt],Lt.uint32(18).fork()).ldelim();return Lt},Ft.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.CmdMergePushReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.head=gt.proto_switch.MergePushHead.decode(dt,dt.uint32());break;case 2:Zt.messages&&Zt.messages.length||(Zt.messages=[]),Zt.messages.push(gt.proto_switch.MergePushInfo.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Ft),lt.CmdMergePushRspInfo=(jt.prototype.sub_cmd="",jt.prototype.sub_seq=0,jt.prototype.msg_id=ft.newBuffer([]),jt.create=function(dt){return new jt(dt)},jt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.sub_cmd!=null&&Object.hasOwnProperty.call(dt,"sub_cmd")&&Lt.uint32(10).string(dt.sub_cmd),dt.sub_seq!=null&&Object.hasOwnProperty.call(dt,"sub_seq")&&Lt.uint32(16).uint32(dt.sub_seq),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(26).bytes(dt.msg_id),Lt},jt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.CmdMergePushRspInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.sub_cmd=dt.string();break;case 2:Zt.sub_seq=dt.uint32();break;case 3:Zt.msg_id=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},jt),lt.CmdMergePushRsp=(zt.prototype.messages=ft.emptyArray,zt.create=function(dt){return new zt(dt)},zt.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.messages!=null&&dt.messages.length)for(var Vt=0;Vt<dt.messages.length;++Vt)gt.proto_switch.CmdMergePushRspInfo.encode(dt.messages[Vt],Lt.uint32(10).fork()).ldelim();return Lt},zt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.proto_switch.CmdMergePushRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?(Zt.messages&&Zt.messages.length||(Zt.messages=[]),Zt.messages.push(gt.proto_switch.CmdMergePushRspInfo.decode(dt,dt.uint32()))):dt.skipType(7&kt)}return Zt},zt),lt),gt.liveroom_cs=((pt={}).ReqHead=(Yt.prototype.room_id="",Yt.prototype.user_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Yt.prototype.room_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Yt.create=function(dt){return new Yt(dt)},Yt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).string(dt.room_id),dt.user_session_id!=null&&Object.hasOwnProperty.call(dt,"user_session_id")&&Lt.uint32(16).uint64(dt.user_session_id),dt.room_session_id!=null&&Object.hasOwnProperty.call(dt,"room_session_id")&&Lt.uint32(24).uint64(dt.room_session_id),Lt},Yt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.ReqHead;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.string();break;case 2:Zt.user_session_id=dt.uint64();break;case 3:Zt.room_session_id=dt.uint64();break;default:dt.skipType(7&kt)}}return Zt},Yt),pt.RspHead=(Kt.prototype.code=0,Kt.prototype.message="",Kt.create=function(dt){return new Kt(dt)},Kt.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.code!=null&&Object.hasOwnProperty.call(dt,"code")&&Lt.uint32(8).uint32(dt.code),dt.message!=null&&Object.hasOwnProperty.call(dt,"message")&&Lt.uint32(18).string(dt.message),Lt},Kt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RspHead;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.code=dt.uint32();break;case 2:Zt.message=dt.string();break;default:dt.skipType(7&kt)}}return Zt},Kt),pt.CommonRsp=(er.prototype.rsp_head=null,er.create=function(dt){return new er(dt)},er.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},er.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.CommonRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},er),pt.HbReq=(ir.prototype.req_head=null,ir.prototype.role=0,ir.prototype.lv_key="",ir.create=function(dt){return new ir(dt)},ir.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(16).uint32(dt.role),dt.lv_key!=null&&Object.hasOwnProperty.call(dt,"lv_key")&&Lt.uint32(26).string(dt.lv_key),Lt},ir.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.HbReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.role=dt.uint32();break;case 3:Zt.lv_key=dt.string();break;default:dt.skipType(7&kt)}}return Zt},ir),pt.HbRsp=(rr.prototype.rsp_head=null,rr.prototype.ret_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,rr.prototype.hb_interval=0,rr.prototype.hb_timeout=0,rr.prototype.stream_seq=0,rr.prototype.user_seq=ft.Long?ft.Long.fromBits(0,0,!1):0,rr.prototype.online_count=0,rr.prototype.bigim_time_window=0,rr.prototype.dati_time_window=ft.Long?ft.Long.fromBits(0,0,!1):0,rr.prototype.trans_seqs=ft.emptyArray,rr.prototype.user_trans_seqs=ft.emptyArray,rr.prototype.StreamRefresh=0,rr.prototype.trans_list_seq=0,rr.create=function(dt){return new rr(dt)},rr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.ret_timestamp!=null&&Object.hasOwnProperty.call(dt,"ret_timestamp")&&Lt.uint32(16).int64(dt.ret_timestamp),dt.hb_interval!=null&&Object.hasOwnProperty.call(dt,"hb_interval")&&Lt.uint32(24).uint32(dt.hb_interval),dt.hb_timeout!=null&&Object.hasOwnProperty.call(dt,"hb_timeout")&&Lt.uint32(32).uint32(dt.hb_timeout),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(40).uint32(dt.stream_seq),dt.user_seq!=null&&Object.hasOwnProperty.call(dt,"user_seq")&&Lt.uint32(48).int64(dt.user_seq),dt.online_count!=null&&Object.hasOwnProperty.call(dt,"online_count")&&Lt.uint32(56).uint32(dt.online_count),dt.bigim_time_window!=null&&Object.hasOwnProperty.call(dt,"bigim_time_window")&&Lt.uint32(64).uint32(dt.bigim_time_window),dt.dati_time_window!=null&&Object.hasOwnProperty.call(dt,"dati_time_window")&&Lt.uint32(72).int64(dt.dati_time_window),dt.trans_seqs!=null&&dt.trans_seqs.length)for(var Vt=0;Vt<dt.trans_seqs.length;++Vt)gt.liveroom_cs.StTransChannelSeq.encode(dt.trans_seqs[Vt],Lt.uint32(82).fork()).ldelim();if(dt.user_trans_seqs!=null&&dt.user_trans_seqs.length)for(Vt=0;Vt<dt.user_trans_seqs.length;++Vt)gt.liveroom_cs.StTransChannelSeq.encode(dt.user_trans_seqs[Vt],Lt.uint32(90).fork()).ldelim();return dt.StreamRefresh!=null&&Object.hasOwnProperty.call(dt,"StreamRefresh")&&Lt.uint32(96).uint32(dt.StreamRefresh),dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(104).uint32(dt.trans_list_seq),Lt},rr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.HbRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.ret_timestamp=dt.int64();break;case 3:Zt.hb_interval=dt.uint32();break;case 4:Zt.hb_timeout=dt.uint32();break;case 5:Zt.stream_seq=dt.uint32();break;case 6:Zt.user_seq=dt.int64();break;case 7:Zt.online_count=dt.uint32();break;case 8:Zt.bigim_time_window=dt.uint32();break;case 9:Zt.dati_time_window=dt.int64();break;case 10:Zt.trans_seqs&&Zt.trans_seqs.length||(Zt.trans_seqs=[]),Zt.trans_seqs.push(gt.liveroom_cs.StTransChannelSeq.decode(dt,dt.uint32()));break;case 11:Zt.user_trans_seqs&&Zt.user_trans_seqs.length||(Zt.user_trans_seqs=[]),Zt.user_trans_seqs.push(gt.liveroom_cs.StTransChannelSeq.decode(dt,dt.uint32()));break;case 12:Zt.StreamRefresh=dt.uint32();break;case 13:Zt.trans_list_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},rr),pt.StTransSeq=(lr.prototype.trans_type=ft.newBuffer([]),lr.prototype.trans_seq=0,lr.create=function(dt){return new lr(dt)},lr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(16).uint32(dt.trans_seq),Lt},lr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransSeq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},lr),pt.StTransChannelSeq=(nr.prototype.trans_channel=ft.newBuffer([]),nr.prototype.trans_seq_array=ft.emptyArray,nr.create=function(dt){return new nr(dt)},nr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(10).bytes(dt.trans_channel),dt.trans_seq_array!=null&&dt.trans_seq_array.length)for(var Vt=0;Vt<dt.trans_seq_array.length;++Vt)gt.liveroom_cs.StTransSeq.encode(dt.trans_seq_array[Vt],Lt.uint32(18).fork()).ldelim();return Lt},nr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransChannelSeq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_channel=dt.bytes();break;case 2:Zt.trans_seq_array&&Zt.trans_seq_array.length||(Zt.trans_seq_array=[]),Zt.trans_seq_array.push(gt.liveroom_cs.StTransSeq.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},nr),pt.UserlistReq=(hr.prototype.req_head=null,hr.prototype.sort_type=0,hr.prototype.user_index=0,hr.create=function(dt){return new hr(dt)},hr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.sort_type!=null&&Object.hasOwnProperty.call(dt,"sort_type")&&Lt.uint32(16).uint32(dt.sort_type),dt.user_index!=null&&Object.hasOwnProperty.call(dt,"user_index")&&Lt.uint32(24).uint32(dt.user_index),Lt},hr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.UserlistReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.sort_type=dt.uint32();break;case 3:Zt.user_index=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},hr),pt.UserlistRsp=(vr.prototype.rsp_head=null,vr.prototype.server_user_seq=ft.Long?ft.Long.fromBits(0,0,!0):0,vr.prototype.server_user_index=ft.Long?ft.Long.fromBits(0,0,!1):0,vr.prototype.ret_user_index=ft.Long?ft.Long.fromBits(0,0,!1):0,vr.prototype.user_basic_list=ft.emptyArray,vr.create=function(dt){return new vr(dt)},vr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.server_user_seq!=null&&Object.hasOwnProperty.call(dt,"server_user_seq")&&Lt.uint32(16).uint64(dt.server_user_seq),dt.server_user_index!=null&&Object.hasOwnProperty.call(dt,"server_user_index")&&Lt.uint32(24).int64(dt.server_user_index),dt.ret_user_index!=null&&Object.hasOwnProperty.call(dt,"ret_user_index")&&Lt.uint32(32).int64(dt.ret_user_index),dt.user_basic_list!=null&&dt.user_basic_list.length)for(var Vt=0;Vt<dt.user_basic_list.length;++Vt)gt.liveroom_cs.StUserBasicDef.encode(dt.user_basic_list[Vt],Lt.uint32(42).fork()).ldelim();return Lt},vr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.UserlistRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.server_user_seq=dt.uint64();break;case 3:Zt.server_user_index=dt.int64();break;case 4:Zt.ret_user_index=dt.int64();break;case 5:Zt.user_basic_list&&Zt.user_basic_list.length||(Zt.user_basic_list=[]),Zt.user_basic_list.push(gt.liveroom_cs.StUserBasicDef.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},vr),pt.StUserBasicDef=(yr.prototype.id_name=ft.newBuffer([]),yr.prototype.nick_name=ft.newBuffer([]),yr.prototype.role=0,yr.create=function(dt){return new yr(dt)},yr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),Lt},yr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StUserBasicDef;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},yr),pt.StreamAddReq=(Cr.prototype.req_head=null,Cr.prototype.stream_id=ft.newBuffer([]),Cr.prototype.title=ft.newBuffer([]),Cr.prototype.stream_attr=ft.newBuffer([]),Cr.prototype.extra_info=ft.newBuffer([]),Cr.prototype.client_req_seq=0,Cr.prototype.nickname=ft.newBuffer([]),Cr.prototype.login_mode=0,Cr.prototype.stream_type=0,Cr.prototype.third_token=ft.newBuffer([]),Cr.create=function(dt){return new Cr(dt)},Cr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(18).bytes(dt.stream_id),dt.title!=null&&Object.hasOwnProperty.call(dt,"title")&&Lt.uint32(26).bytes(dt.title),dt.stream_attr!=null&&Object.hasOwnProperty.call(dt,"stream_attr")&&Lt.uint32(34).bytes(dt.stream_attr),dt.extra_info!=null&&Object.hasOwnProperty.call(dt,"extra_info")&&Lt.uint32(42).bytes(dt.extra_info),dt.client_req_seq!=null&&Object.hasOwnProperty.call(dt,"client_req_seq")&&Lt.uint32(48).uint32(dt.client_req_seq),dt.nickname!=null&&Object.hasOwnProperty.call(dt,"nickname")&&Lt.uint32(58).bytes(dt.nickname),dt.login_mode!=null&&Object.hasOwnProperty.call(dt,"login_mode")&&Lt.uint32(64).uint32(dt.login_mode),dt.stream_type!=null&&Object.hasOwnProperty.call(dt,"stream_type")&&Lt.uint32(72).uint32(dt.stream_type),dt.third_token!=null&&Object.hasOwnProperty.call(dt,"third_token")&&Lt.uint32(82).bytes(dt.third_token),Lt},Cr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamAddReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.stream_id=dt.bytes();break;case 3:Zt.title=dt.bytes();break;case 4:Zt.stream_attr=dt.bytes();break;case 5:Zt.extra_info=dt.bytes();break;case 6:Zt.client_req_seq=dt.uint32();break;case 7:Zt.nickname=dt.bytes();break;case 8:Zt.login_mode=dt.uint32();break;case 9:Zt.stream_type=dt.uint32();break;case 10:Zt.third_token=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Cr),pt.StreamAddRsp=(or.prototype.rsp_head=null,or.prototype.stream_seq=0,or.prototype.stream_sid="",or.prototype.stream_ver=0,or.prototype.stream_nid=0,or.prototype.token_remain_time=0,or.create=function(dt){return new or(dt)},or.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(16).uint32(dt.stream_seq),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(26).string(dt.stream_sid),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(32).uint32(dt.stream_ver),dt.stream_nid!=null&&Object.hasOwnProperty.call(dt,"stream_nid")&&Lt.uint32(40).uint32(dt.stream_nid),dt.token_remain_time!=null&&Object.hasOwnProperty.call(dt,"token_remain_time")&&Lt.uint32(48).uint32(dt.token_remain_time),Lt},or.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamAddRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.stream_seq=dt.uint32();break;case 3:Zt.stream_sid=dt.string();break;case 4:Zt.stream_ver=dt.uint32();break;case 5:Zt.stream_nid=dt.uint32();break;case 6:Zt.token_remain_time=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},or),pt.StreamDeleteReq=(ur.prototype.req_head=null,ur.prototype.stream_sid="",ur.prototype.stream_id=ft.newBuffer([]),ur.prototype.client_req_seq=0,ur.create=function(dt){return new ur(dt)},ur.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(18).string(dt.stream_sid),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(26).bytes(dt.stream_id),dt.client_req_seq!=null&&Object.hasOwnProperty.call(dt,"client_req_seq")&&Lt.uint32(32).uint32(dt.client_req_seq),Lt},ur.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamDeleteReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.stream_sid=dt.string();break;case 3:Zt.stream_id=dt.bytes();break;case 4:Zt.client_req_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},ur),pt.StreamDeleteRsp=(pr.prototype.rsp_head=null,pr.prototype.stream_seq=0,pr.prototype.stream_ver=0,pr.create=function(dt){return new pr(dt)},pr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(16).uint32(dt.stream_seq),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(24).uint32(dt.stream_ver),Lt},pr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamDeleteRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.stream_seq=dt.uint32();break;case 3:Zt.stream_ver=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},pr),pt.StreamUpdateReq=(Er.prototype.req_head=null,Er.prototype.stream_sid="",Er.prototype.stream_id=ft.newBuffer([]),Er.prototype.title=ft.newBuffer([]),Er.prototype.stream_attr=ft.newBuffer([]),Er.prototype.extra_info=ft.newBuffer([]),Er.prototype.client_req_seq=0,Er.prototype.nickname=ft.newBuffer([]),Er.create=function(dt){return new Er(dt)},Er.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(18).string(dt.stream_sid),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(26).bytes(dt.stream_id),dt.title!=null&&Object.hasOwnProperty.call(dt,"title")&&Lt.uint32(34).bytes(dt.title),dt.stream_attr!=null&&Object.hasOwnProperty.call(dt,"stream_attr")&&Lt.uint32(42).bytes(dt.stream_attr),dt.extra_info!=null&&Object.hasOwnProperty.call(dt,"extra_info")&&Lt.uint32(50).bytes(dt.extra_info),dt.client_req_seq!=null&&Object.hasOwnProperty.call(dt,"client_req_seq")&&Lt.uint32(56).uint32(dt.client_req_seq),dt.nickname!=null&&Object.hasOwnProperty.call(dt,"nickname")&&Lt.uint32(66).bytes(dt.nickname),Lt},Er.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamUpdateReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.stream_sid=dt.string();break;case 3:Zt.stream_id=dt.bytes();break;case 4:Zt.title=dt.bytes();break;case 5:Zt.stream_attr=dt.bytes();break;case 6:Zt.extra_info=dt.bytes();break;case 7:Zt.client_req_seq=dt.uint32();break;case 8:Zt.nickname=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Er),pt.StreamUpdateRsp=(Sr.prototype.rsp_head=null,Sr.prototype.stream_seq=0,Sr.prototype.stream_ver=0,Sr.create=function(dt){return new Sr(dt)},Sr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(16).uint32(dt.stream_seq),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(24).uint32(dt.stream_ver),Lt},Sr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamUpdateRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.stream_seq=dt.uint32();break;case 3:Zt.stream_ver=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Sr),pt.StreamListReq=(Ht.prototype.req_head=null,Ht.create=function(dt){return new Ht(dt)},Ht.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),Lt},Ht.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamListReq;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},Ht),pt.StreamListRsp=(qt.prototype.rsp_head=null,qt.prototype.stream_seq=0,qt.prototype.stream_info=ft.emptyArray,qt.prototype.stream_refresh=0,qt.prototype.stream_mix_info=ft.emptyArray,qt.create=function(dt){return new qt(dt)},qt.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(16).uint32(dt.stream_seq),dt.stream_info!=null&&dt.stream_info.length)for(var Vt=0;Vt<dt.stream_info.length;++Vt)gt.liveroom_cs.StStreamInfo.encode(dt.stream_info[Vt],Lt.uint32(26).fork()).ldelim();if(dt.stream_refresh!=null&&Object.hasOwnProperty.call(dt,"stream_refresh")&&Lt.uint32(32).uint32(dt.stream_refresh),dt.stream_mix_info!=null&&dt.stream_mix_info.length)for(Vt=0;Vt<dt.stream_mix_info.length;++Vt)gt.liveroom_cs.StStreamInfo.encode(dt.stream_mix_info[Vt],Lt.uint32(42).fork()).ldelim();return Lt},qt.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StreamListRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.stream_seq=dt.uint32();break;case 3:Zt.stream_info&&Zt.stream_info.length||(Zt.stream_info=[]),Zt.stream_info.push(gt.liveroom_cs.StStreamInfo.decode(dt,dt.uint32()));break;case 4:Zt.stream_refresh=dt.uint32();break;case 5:Zt.stream_mix_info&&Zt.stream_mix_info.length||(Zt.stream_mix_info=[]),Zt.stream_mix_info.push(gt.liveroom_cs.StStreamInfo.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},qt),pt.StStreamInfo=(fr.prototype.stream_sid="",fr.prototype.stream_id=ft.newBuffer([]),fr.prototype.id_name=ft.newBuffer([]),fr.prototype.nick_name=ft.newBuffer([]),fr.prototype.extra_info=ft.newBuffer([]),fr.prototype.title=ft.newBuffer([]),fr.prototype.stream_ver=0,fr.prototype.stream_attr=ft.newBuffer([]),fr.prototype.create_time=ft.Long?ft.Long.fromBits(0,0,!1):0,fr.prototype.stream_src=0,fr.prototype.state=0,fr.prototype.stream_type=0,fr.prototype.stream_nid=0,fr.create=function(dt){return new fr(dt)},fr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(10).string(dt.stream_sid),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(18).bytes(dt.stream_id),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(26).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(34).bytes(dt.nick_name),dt.extra_info!=null&&Object.hasOwnProperty.call(dt,"extra_info")&&Lt.uint32(42).bytes(dt.extra_info),dt.title!=null&&Object.hasOwnProperty.call(dt,"title")&&Lt.uint32(50).bytes(dt.title),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(56).uint32(dt.stream_ver),dt.stream_attr!=null&&Object.hasOwnProperty.call(dt,"stream_attr")&&Lt.uint32(66).bytes(dt.stream_attr),dt.create_time!=null&&Object.hasOwnProperty.call(dt,"create_time")&&Lt.uint32(72).int64(dt.create_time),dt.stream_src!=null&&Object.hasOwnProperty.call(dt,"stream_src")&&Lt.uint32(80).uint32(dt.stream_src),dt.state!=null&&Object.hasOwnProperty.call(dt,"state")&&Lt.uint32(88).uint32(dt.state),dt.stream_type!=null&&Object.hasOwnProperty.call(dt,"stream_type")&&Lt.uint32(96).uint32(dt.stream_type),dt.stream_nid!=null&&Object.hasOwnProperty.call(dt,"stream_nid")&&Lt.uint32(104).uint32(dt.stream_nid),Lt},fr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StStreamInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.stream_sid=dt.string();break;case 2:Zt.stream_id=dt.bytes();break;case 3:Zt.id_name=dt.bytes();break;case 4:Zt.nick_name=dt.bytes();break;case 5:Zt.extra_info=dt.bytes();break;case 6:Zt.title=dt.bytes();break;case 7:Zt.stream_ver=dt.uint32();break;case 8:Zt.stream_attr=dt.bytes();break;case 9:Zt.create_time=dt.int64();break;case 10:Zt.stream_src=dt.uint32();break;case 11:Zt.state=dt.uint32();break;case 12:Zt.stream_type=dt.uint32();break;case 13:Zt.stream_nid=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},fr),pt.StDstUser=(cr.prototype.id_name=ft.newBuffer([]),cr.prototype.id=ft.Long?ft.Long.fromBits(0,0,!0):0,cr.create=function(dt){return new cr(dt)},cr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.id!=null&&Object.hasOwnProperty.call(dt,"id")&&Lt.uint32(16).uint64(dt.id),Lt},cr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StDstUser;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.id=dt.uint64();break;default:dt.skipType(7&kt)}}return Zt},cr),pt.SignalLiveReq=(Ar.prototype.req_head=null,Ar.prototype.push_message=ft.newBuffer([]),Ar.prototype.dst_userlist=ft.emptyArray,Ar.create=function(dt){return new Ar(dt)},Ar.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.push_message!=null&&Object.hasOwnProperty.call(dt,"push_message")&&Lt.uint32(18).bytes(dt.push_message),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(26).fork()).ldelim();return Lt},Ar.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.push_message=dt.bytes();break;case 3:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Ar),pt.SignalLiveRsp=(Gr.prototype.rsp_head=null,Gr.create=function(dt){return new Gr(dt)},Gr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},Gr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},Gr),pt.SignalLiveResultReq=(Qr.prototype.req_head=null,Qr.prototype.push_message=ft.newBuffer([]),Qr.prototype.dst_userlist=ft.emptyArray,Qr.create=function(dt){return new Qr(dt)},Qr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.push_message!=null&&Object.hasOwnProperty.call(dt,"push_message")&&Lt.uint32(18).bytes(dt.push_message),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(26).fork()).ldelim();return Lt},Qr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveResultReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.push_message=dt.bytes();break;case 3:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Qr),pt.SignalLiveResulRsp=(hn.prototype.rsp_head=null,hn.create=function(dt){return new hn(dt)},hn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},hn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveResulRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},hn),pt.SignalLiveInviteReq=(sn.prototype.req_head=null,sn.prototype.push_message=ft.newBuffer([]),sn.prototype.dst_userlist=ft.emptyArray,sn.create=function(dt){return new sn(dt)},sn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.push_message!=null&&Object.hasOwnProperty.call(dt,"push_message")&&Lt.uint32(18).bytes(dt.push_message),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(26).fork()).ldelim();return Lt},sn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveInviteReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.push_message=dt.bytes();break;case 3:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},sn),pt.SignalLiveInviteRsp=(qr.prototype.rsp_head=null,qr.create=function(dt){return new qr(dt)},qr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},qr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveInviteRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},qr),pt.SignalLiveStopReq=(dr.prototype.req_head=null,dr.prototype.push_message=ft.newBuffer([]),dr.prototype.dst_userlist=ft.emptyArray,dr.create=function(dt){return new dr(dt)},dr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.push_message!=null&&Object.hasOwnProperty.call(dt,"push_message")&&Lt.uint32(18).bytes(dt.push_message),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(26).fork()).ldelim();return Lt},dr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveStopReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.push_message=dt.bytes();break;case 3:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},dr),pt.SignalLiveStopRsp=(mr.prototype.rsp_head=null,mr.create=function(dt){return new mr(dt)},mr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},mr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveStopRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},mr),pt.SignalLiveCustomReq=(br.prototype.req_head=null,br.prototype.push_message=ft.newBuffer([]),br.prototype.dst_userlist=ft.emptyArray,br.create=function(dt){return new br(dt)},br.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.push_message!=null&&Object.hasOwnProperty.call(dt,"push_message")&&Lt.uint32(18).bytes(dt.push_message),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(26).fork()).ldelim();return Lt},br.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveCustomReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.push_message=dt.bytes();break;case 3:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},br),pt.SignalLiveCustomRsp=(Rr.prototype.rsp_head=null,Rr.create=function(dt){return new Rr(dt)},Rr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),Lt},Rr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.SignalLiveCustomRsp;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},Rr),pt.ImChatReq=(Pr.prototype.req_head=null,Pr.prototype.msg_category=0,Pr.prototype.msg_type=0,Pr.prototype.msg_priority=0,Pr.prototype.msg_content=ft.newBuffer([]),Pr.prototype.dst_userlist=ft.emptyArray,Pr.create=function(dt){return new Pr(dt)},Pr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.msg_category!=null&&Object.hasOwnProperty.call(dt,"msg_category")&&Lt.uint32(16).uint32(dt.msg_category),dt.msg_type!=null&&Object.hasOwnProperty.call(dt,"msg_type")&&Lt.uint32(24).uint32(dt.msg_type),dt.msg_priority!=null&&Object.hasOwnProperty.call(dt,"msg_priority")&&Lt.uint32(32).uint32(dt.msg_priority),dt.msg_content!=null&&Object.hasOwnProperty.call(dt,"msg_content")&&Lt.uint32(42).bytes(dt.msg_content),dt.dst_userlist!=null&&dt.dst_userlist.length)for(var Vt=0;Vt<dt.dst_userlist.length;++Vt)gt.liveroom_cs.StDstUser.encode(dt.dst_userlist[Vt],Lt.uint32(50).fork()).ldelim();return Lt},Pr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.ImChatReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.msg_category=dt.uint32();break;case 3:Zt.msg_type=dt.uint32();break;case 4:Zt.msg_priority=dt.uint32();break;case 5:Zt.msg_content=dt.bytes();break;case 6:Zt.dst_userlist&&Zt.dst_userlist.length||(Zt.dst_userlist=[]),Zt.dst_userlist.push(gt.liveroom_cs.StDstUser.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Pr),pt.ImChatRsp=(Or.prototype.rsp_head=null,Or.prototype.msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Or.create=function(dt){return new Or(dt)},Or.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(16).uint64(dt.msg_id),Lt},Or.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.ImChatRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.msg_id=dt.uint64();break;default:dt.skipType(7&kt)}}return Zt},Or),pt.ImGethatReq=(Nr.prototype.req_head=null,Nr.prototype.msg_priority=0,Nr.prototype.msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Nr.prototype.sort_type=0,Nr.prototype.msg_count=0,Nr.create=function(dt){return new Nr(dt)},Nr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.msg_priority!=null&&Object.hasOwnProperty.call(dt,"msg_priority")&&Lt.uint32(16).uint32(dt.msg_priority),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(24).uint64(dt.msg_id),dt.sort_type!=null&&Object.hasOwnProperty.call(dt,"sort_type")&&Lt.uint32(32).uint32(dt.sort_type),dt.msg_count!=null&&Object.hasOwnProperty.call(dt,"msg_count")&&Lt.uint32(40).uint32(dt.msg_count),Lt},Nr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.ImGethatReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.msg_priority=dt.uint32();break;case 3:Zt.msg_id=dt.uint64();break;case 4:Zt.sort_type=dt.uint32();break;case 5:Zt.msg_count=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Nr),pt.ImGetChatRsp=(Br.prototype.rsp_head=null,Br.prototype.server_msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Br.prototype.ret_msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Br.prototype.msg_data=ft.emptyArray,Br.create=function(dt){return new Br(dt)},Br.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.server_msg_id!=null&&Object.hasOwnProperty.call(dt,"server_msg_id")&&Lt.uint32(16).uint64(dt.server_msg_id),dt.ret_msg_id!=null&&Object.hasOwnProperty.call(dt,"ret_msg_id")&&Lt.uint32(24).uint64(dt.ret_msg_id),dt.msg_data!=null&&dt.msg_data.length)for(var Vt=0;Vt<dt.msg_data.length;++Vt)gt.liveroom_cs.StMsgData.encode(dt.msg_data[Vt],Lt.uint32(34).fork()).ldelim();return Lt},Br.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.ImGetChatRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.server_msg_id=dt.uint64();break;case 3:Zt.ret_msg_id=dt.uint64();break;case 4:Zt.msg_data&&Zt.msg_data.length||(Zt.msg_data=[]),Zt.msg_data.push(gt.liveroom_cs.StMsgData.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Br),pt.StMsgData=(jr.prototype.id_name=ft.newBuffer([]),jr.prototype.nick_name=ft.newBuffer([]),jr.prototype.role=0,jr.prototype.msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,jr.prototype.msg_category=0,jr.prototype.msg_type=0,jr.prototype.msg_priority=0,jr.prototype.msg_content=ft.newBuffer([]),jr.prototype.send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,jr.create=function(dt){return new jr(dt)},jr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(32).uint64(dt.msg_id),dt.msg_category!=null&&Object.hasOwnProperty.call(dt,"msg_category")&&Lt.uint32(40).uint32(dt.msg_category),dt.msg_type!=null&&Object.hasOwnProperty.call(dt,"msg_type")&&Lt.uint32(48).uint32(dt.msg_type),dt.msg_priority!=null&&Object.hasOwnProperty.call(dt,"msg_priority")&&Lt.uint32(56).uint32(dt.msg_priority),dt.msg_content!=null&&Object.hasOwnProperty.call(dt,"msg_content")&&Lt.uint32(66).bytes(dt.msg_content),dt.send_time!=null&&Object.hasOwnProperty.call(dt,"send_time")&&Lt.uint32(72).int64(dt.send_time),Lt},jr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StMsgData;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.msg_id=dt.uint64();break;case 5:Zt.msg_category=dt.uint32();break;case 6:Zt.msg_type=dt.uint32();break;case 7:Zt.msg_priority=dt.uint32();break;case 8:Zt.msg_content=dt.bytes();break;case 9:Zt.send_time=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},jr),pt.EnterReq=($r.prototype.req_head=null,$r.prototype.switch_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,$r.prototype.nick_name=ft.newBuffer([]),$r.prototype.role=0,$r.prototype.net_type=0,$r.prototype.config=null,$r.prototype.lv_key="",$r.prototype.third_token=ft.newBuffer([]),$r.prototype.cluster_req=ft.Long?ft.Long.fromBits(0,0,!0):0,$r.prototype.user_count_limit=0,$r.prototype.relate_service="",$r.prototype.conn_type=0,$r.prototype.room_name=ft.newBuffer([]),$r.create=function(dt){return new $r(dt)},$r.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.switch_session_id!=null&&Object.hasOwnProperty.call(dt,"switch_session_id")&&Lt.uint32(16).uint64(dt.switch_session_id),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(26).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(32).uint32(dt.role),dt.net_type!=null&&Object.hasOwnProperty.call(dt,"net_type")&&Lt.uint32(40).uint32(dt.net_type),dt.config!=null&&Object.hasOwnProperty.call(dt,"config")&&gt.liveroom_cs.StConfigList.encode(dt.config,Lt.uint32(50).fork()).ldelim(),dt.lv_key!=null&&Object.hasOwnProperty.call(dt,"lv_key")&&Lt.uint32(58).string(dt.lv_key),dt.third_token!=null&&Object.hasOwnProperty.call(dt,"third_token")&&Lt.uint32(66).bytes(dt.third_token),dt.cluster_req!=null&&Object.hasOwnProperty.call(dt,"cluster_req")&&Lt.uint32(72).uint64(dt.cluster_req),dt.user_count_limit!=null&&Object.hasOwnProperty.call(dt,"user_count_limit")&&Lt.uint32(80).uint32(dt.user_count_limit),dt.relate_service!=null&&Object.hasOwnProperty.call(dt,"relate_service")&&Lt.uint32(90).string(dt.relate_service),dt.conn_type!=null&&Object.hasOwnProperty.call(dt,"conn_type")&&Lt.uint32(96).uint32(dt.conn_type),dt.room_name!=null&&Object.hasOwnProperty.call(dt,"room_name")&&Lt.uint32(106).bytes(dt.room_name),Lt},$r.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.EnterReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.switch_session_id=dt.uint64();break;case 3:Zt.nick_name=dt.bytes();break;case 4:Zt.role=dt.uint32();break;case 5:Zt.net_type=dt.uint32();break;case 6:Zt.config=gt.liveroom_cs.StConfigList.decode(dt,dt.uint32());break;case 7:Zt.lv_key=dt.string();break;case 8:Zt.third_token=dt.bytes();break;case 9:Zt.cluster_req=dt.uint64();break;case 10:Zt.user_count_limit=dt.uint32();break;case 11:Zt.relate_service=dt.string();break;case 12:Zt.conn_type=dt.uint32();break;case 13:Zt.room_name=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},$r),pt.EnterRsp=(Fr.prototype.rsp_head=null,Fr.prototype.room_id=ft.newBuffer([]),Fr.prototype.user_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Fr.prototype.room_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Fr.prototype.user_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Fr.prototype.ret_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,Fr.prototype.bigim_time_window=0,Fr.prototype.dati_time_window=ft.Long?ft.Long.fromBits(0,0,!1):0,Fr.prototype.room_id32=0,Fr.prototype.hb_interval=0,Fr.prototype.hb_timeout=0,Fr.prototype.lv_key="",Fr.prototype.zp_key="",Fr.prototype.online_count=0,Fr.prototype.anchor_info=null,Fr.prototype.stream_seq=0,Fr.prototype.stream_info=ft.emptyArray,Fr.prototype.stream_mix_info=ft.emptyArray,Fr.prototype.userlist_merge_timeout=0,Fr.prototype.userlist_interval=0,Fr.prototype.stream_list_push_merge_timeout=0,Fr.prototype.stream_list_hb_wait_merge_time=0,Fr.prototype.trans_list_seq=0,Fr.prototype.trans_seqs=ft.emptyArray,Fr.prototype.cluster_name="",Fr.prototype.token_remain_time=0,Fr.prototype.stream_fetch_flag=0,Fr.create=function(dt){return new Fr(dt)},Fr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.user_session_id!=null&&Object.hasOwnProperty.call(dt,"user_session_id")&&Lt.uint32(24).uint64(dt.user_session_id),dt.room_session_id!=null&&Object.hasOwnProperty.call(dt,"room_session_id")&&Lt.uint32(32).uint64(dt.room_session_id),dt.user_id!=null&&Object.hasOwnProperty.call(dt,"user_id")&&Lt.uint32(40).uint64(dt.user_id),dt.ret_timestamp!=null&&Object.hasOwnProperty.call(dt,"ret_timestamp")&&Lt.uint32(49).fixed64(dt.ret_timestamp),dt.bigim_time_window!=null&&Object.hasOwnProperty.call(dt,"bigim_time_window")&&Lt.uint32(56).uint32(dt.bigim_time_window),dt.dati_time_window!=null&&Object.hasOwnProperty.call(dt,"dati_time_window")&&Lt.uint32(64).int64(dt.dati_time_window),dt.room_id32!=null&&Object.hasOwnProperty.call(dt,"room_id32")&&Lt.uint32(72).uint32(dt.room_id32),dt.hb_interval!=null&&Object.hasOwnProperty.call(dt,"hb_interval")&&Lt.uint32(80).uint32(dt.hb_interval),dt.hb_timeout!=null&&Object.hasOwnProperty.call(dt,"hb_timeout")&&Lt.uint32(88).uint32(dt.hb_timeout),dt.lv_key!=null&&Object.hasOwnProperty.call(dt,"lv_key")&&Lt.uint32(98).string(dt.lv_key),dt.zp_key!=null&&Object.hasOwnProperty.call(dt,"zp_key")&&Lt.uint32(106).string(dt.zp_key),dt.online_count!=null&&Object.hasOwnProperty.call(dt,"online_count")&&Lt.uint32(112).uint32(dt.online_count),dt.anchor_info!=null&&Object.hasOwnProperty.call(dt,"anchor_info")&&gt.liveroom_cs.StAnchorInfo.encode(dt.anchor_info,Lt.uint32(122).fork()).ldelim(),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(128).uint32(dt.stream_seq),dt.stream_info!=null&&dt.stream_info.length)for(var Vt=0;Vt<dt.stream_info.length;++Vt)gt.liveroom_cs.StStreamInfo.encode(dt.stream_info[Vt],Lt.uint32(138).fork()).ldelim();if(dt.stream_mix_info!=null&&dt.stream_mix_info.length)for(Vt=0;Vt<dt.stream_mix_info.length;++Vt)gt.liveroom_cs.StStreamInfo.encode(dt.stream_mix_info[Vt],Lt.uint32(146).fork()).ldelim();if(dt.userlist_merge_timeout!=null&&Object.hasOwnProperty.call(dt,"userlist_merge_timeout")&&Lt.uint32(152).uint32(dt.userlist_merge_timeout),dt.userlist_interval!=null&&Object.hasOwnProperty.call(dt,"userlist_interval")&&Lt.uint32(160).uint32(dt.userlist_interval),dt.stream_list_push_merge_timeout!=null&&Object.hasOwnProperty.call(dt,"stream_list_push_merge_timeout")&&Lt.uint32(168).uint32(dt.stream_list_push_merge_timeout),dt.stream_list_hb_wait_merge_time!=null&&Object.hasOwnProperty.call(dt,"stream_list_hb_wait_merge_time")&&Lt.uint32(176).uint32(dt.stream_list_hb_wait_merge_time),dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(184).uint32(dt.trans_list_seq),dt.trans_seqs!=null&&dt.trans_seqs.length)for(Vt=0;Vt<dt.trans_seqs.length;++Vt)gt.liveroom_cs.StTransInfo.encode(dt.trans_seqs[Vt],Lt.uint32(194).fork()).ldelim();return dt.cluster_name!=null&&Object.hasOwnProperty.call(dt,"cluster_name")&&Lt.uint32(202).string(dt.cluster_name),dt.token_remain_time!=null&&Object.hasOwnProperty.call(dt,"token_remain_time")&&Lt.uint32(208).uint32(dt.token_remain_time),dt.stream_fetch_flag!=null&&Object.hasOwnProperty.call(dt,"stream_fetch_flag")&&Lt.uint32(216).uint32(dt.stream_fetch_flag),Lt},Fr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.EnterRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.user_session_id=dt.uint64();break;case 4:Zt.room_session_id=dt.uint64();break;case 5:Zt.user_id=dt.uint64();break;case 6:Zt.ret_timestamp=dt.fixed64();break;case 7:Zt.bigim_time_window=dt.uint32();break;case 8:Zt.dati_time_window=dt.int64();break;case 9:Zt.room_id32=dt.uint32();break;case 10:Zt.hb_interval=dt.uint32();break;case 11:Zt.hb_timeout=dt.uint32();break;case 12:Zt.lv_key=dt.string();break;case 13:Zt.zp_key=dt.string();break;case 14:Zt.online_count=dt.uint32();break;case 15:Zt.anchor_info=gt.liveroom_cs.StAnchorInfo.decode(dt,dt.uint32());break;case 16:Zt.stream_seq=dt.uint32();break;case 17:Zt.stream_info&&Zt.stream_info.length||(Zt.stream_info=[]),Zt.stream_info.push(gt.liveroom_cs.StStreamInfo.decode(dt,dt.uint32()));break;case 18:Zt.stream_mix_info&&Zt.stream_mix_info.length||(Zt.stream_mix_info=[]),Zt.stream_mix_info.push(gt.liveroom_cs.StStreamInfo.decode(dt,dt.uint32()));break;case 19:Zt.userlist_merge_timeout=dt.uint32();break;case 20:Zt.userlist_interval=dt.uint32();break;case 21:Zt.stream_list_push_merge_timeout=dt.uint32();break;case 22:Zt.stream_list_hb_wait_merge_time=dt.uint32();break;case 23:Zt.trans_list_seq=dt.uint32();break;case 24:Zt.trans_seqs&&Zt.trans_seqs.length||(Zt.trans_seqs=[]),Zt.trans_seqs.push(gt.liveroom_cs.StTransInfo.decode(dt,dt.uint32()));break;case 25:Zt.cluster_name=dt.string();break;case 26:Zt.token_remain_time=dt.uint32();break;case 27:Zt.stream_fetch_flag=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Fr),pt.StAnchorInfo=(Zr.prototype.anchor_id_name=ft.newBuffer([]),Zr.prototype.anchor_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Zr.prototype.anchor_nick_name=ft.newBuffer([]),Zr.create=function(dt){return new Zr(dt)},Zr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.anchor_id_name!=null&&Object.hasOwnProperty.call(dt,"anchor_id_name")&&Lt.uint32(10).bytes(dt.anchor_id_name),dt.anchor_id!=null&&Object.hasOwnProperty.call(dt,"anchor_id")&&Lt.uint32(16).uint64(dt.anchor_id),dt.anchor_nick_name!=null&&Object.hasOwnProperty.call(dt,"anchor_nick_name")&&Lt.uint32(26).bytes(dt.anchor_nick_name),Lt},Zr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StAnchorInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.anchor_id_name=dt.bytes();break;case 2:Zt.anchor_id=dt.uint64();break;case 3:Zt.anchor_nick_name=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Zr),pt.QuitReq=(pn.prototype.req_head=null,pn.prototype.switch_session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,pn.prototype.room_id32=0,pn.prototype.nick_name=ft.newBuffer([]),pn.prototype.role=0,pn.prototype.net_type=0,pn.prototype.config_list=null,pn.create=function(dt){return new pn(dt)},pn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.switch_session_id!=null&&Object.hasOwnProperty.call(dt,"switch_session_id")&&Lt.uint32(16).uint64(dt.switch_session_id),dt.room_id32!=null&&Object.hasOwnProperty.call(dt,"room_id32")&&Lt.uint32(24).uint32(dt.room_id32),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(34).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(40).uint32(dt.role),dt.net_type!=null&&Object.hasOwnProperty.call(dt,"net_type")&&Lt.uint32(48).uint32(dt.net_type),dt.config_list!=null&&Object.hasOwnProperty.call(dt,"config_list")&&gt.liveroom_cs.StConfigList.encode(dt.config_list,Lt.uint32(58).fork()).ldelim(),Lt},pn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.QuitReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.switch_session_id=dt.uint64();break;case 3:Zt.room_id32=dt.uint32();break;case 4:Zt.nick_name=dt.bytes();break;case 5:Zt.role=dt.uint32();break;case 6:Zt.net_type=dt.uint32();break;case 7:Zt.config_list=gt.liveroom_cs.StConfigList.decode(dt,dt.uint32());break;default:dt.skipType(7&kt)}}return Zt},pn),pt.StConfigList=(mn.prototype.room_create_flag=0,mn.prototype.user_state_flag=0,mn.create=function(dt){return new mn(dt)},mn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.room_create_flag!=null&&Object.hasOwnProperty.call(dt,"room_create_flag")&&Lt.uint32(8).uint32(dt.room_create_flag),dt.user_state_flag!=null&&Object.hasOwnProperty.call(dt,"user_state_flag")&&Lt.uint32(16).uint32(dt.user_state_flag),Lt},mn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StConfigList;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_create_flag=dt.uint32();break;case 2:Zt.user_state_flag=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},mn),pt.QuitRsp=(vn.prototype.rsp_head=null,vn.prototype.room_id=ft.newBuffer([]),vn.prototype.room_id32=0,vn.create=function(dt){return new vn(dt)},vn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.room_id32!=null&&Object.hasOwnProperty.call(dt,"room_id32")&&Lt.uint32(24).uint32(dt.room_id32),Lt},vn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.QuitRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.room_id32=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},vn),pt.RoomListReq=(jn.prototype.req_head=null,jn.create=function(dt){return new jn(dt)},jn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),Lt},jn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RoomListReq;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32()):dt.skipType(7&kt)}return Zt},jn),pt.RoomListRsp=(yn.prototype.rsp_head=null,yn.prototype.room_list=ft.emptyArray,yn.create=function(dt){return new yn(dt)},yn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.room_list!=null&&dt.room_list.length)for(var Vt=0;Vt<dt.room_list.length;++Vt)gt.liveroom_cs.StRoomListRoom.encode(dt.room_list[Vt],Lt.uint32(18).fork()).ldelim();return Lt},yn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RoomListRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.room_list&&Zt.room_list.length||(Zt.room_list=[]),Zt.room_list.push(gt.liveroom_cs.StRoomListRoom.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},yn),pt.StRoomListStream=(Kn.prototype.stream_id=ft.newBuffer([]),Kn.create=function(dt){return new Kn(dt)},Kn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(10).bytes(dt.stream_id),Lt},Kn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StRoomListStream;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?Zt.stream_id=dt.bytes():dt.skipType(7&kt)}return Zt},Kn),pt.StRoomListRoom=(Qn.prototype.room_id=ft.newBuffer([]),Qn.prototype.room_name=ft.newBuffer([]),Qn.prototype.anchor_id_name=ft.newBuffer([]),Qn.prototype.anchor_nick_name=ft.newBuffer([]),Qn.prototype.stream_list=ft.emptyArray,Qn.create=function(dt){return new Qn(dt)},Qn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).bytes(dt.room_id),dt.room_name!=null&&Object.hasOwnProperty.call(dt,"room_name")&&Lt.uint32(18).bytes(dt.room_name),dt.anchor_id_name!=null&&Object.hasOwnProperty.call(dt,"anchor_id_name")&&Lt.uint32(26).bytes(dt.anchor_id_name),dt.anchor_nick_name!=null&&Object.hasOwnProperty.call(dt,"anchor_nick_name")&&Lt.uint32(34).bytes(dt.anchor_nick_name),dt.stream_list!=null&&dt.stream_list.length)for(var Vt=0;Vt<dt.stream_list.length;++Vt)gt.liveroom_cs.StRoomListStream.encode(dt.stream_list[Vt],Lt.uint32(42).fork()).ldelim();return Lt},Qn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StRoomListRoom;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.bytes();break;case 2:Zt.room_name=dt.bytes();break;case 3:Zt.anchor_id_name=dt.bytes();break;case 4:Zt.anchor_nick_name=dt.bytes();break;case 5:Zt.stream_list&&Zt.stream_list.length||(Zt.stream_list=[]),Zt.stream_list.push(gt.liveroom_cs.StRoomListStream.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Qn),pt.StTransSeqInfo=(bn.prototype.trans_type=ft.newBuffer([]),bn.prototype.trans_seq=0,bn.create=function(dt){return new bn(dt)},bn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(16).uint32(dt.trans_seq),Lt},bn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransSeqInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},bn),pt.StTransInfo=(so.prototype.trans_channel=ft.newBuffer([]),so.prototype.trans_seq_array=ft.emptyArray,so.create=function(dt){return new so(dt)},so.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(10).bytes(dt.trans_channel),dt.trans_seq_array!=null&&dt.trans_seq_array.length)for(var Vt=0;Vt<dt.trans_seq_array.length;++Vt)gt.liveroom_cs.StTransSeqInfo.encode(dt.trans_seq_array[Vt],Lt.uint32(18).fork()).ldelim();return Lt},so.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_channel=dt.bytes();break;case 2:Zt.trans_seq_array&&Zt.trans_seq_array.length||(Zt.trans_seq_array=[]),Zt.trans_seq_array.push(gt.liveroom_cs.StTransSeqInfo.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},so),pt.TransReq=(zr.prototype.req_head=null,zr.prototype.nick_name=ft.newBuffer([]),zr.prototype.role=0,zr.prototype.trans_type=ft.newBuffer([]),zr.prototype.trans_data=ft.newBuffer([]),zr.prototype.trans_local_seq=0,zr.prototype.trans_channel=ft.newBuffer([]),zr.create=function(dt){return new zr(dt)},zr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(34).bytes(dt.trans_type),dt.trans_data!=null&&Object.hasOwnProperty.call(dt,"trans_data")&&Lt.uint32(42).bytes(dt.trans_data),dt.trans_local_seq!=null&&Object.hasOwnProperty.call(dt,"trans_local_seq")&&Lt.uint32(48).uint32(dt.trans_local_seq),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(58).bytes(dt.trans_channel),Lt},zr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.TransReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.trans_type=dt.bytes();break;case 5:Zt.trans_data=dt.bytes();break;case 6:Zt.trans_local_seq=dt.uint32();break;case 7:Zt.trans_channel=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},zr),pt.TransRsp=(zn.prototype.rsp_head=null,zn.prototype.trans_type=ft.newBuffer([]),zn.prototype.trans_seq=0,zn.prototype.trans_list_seq=0,zn.prototype.trans_channel=ft.newBuffer([]),zn.create=function(dt){return new zn(dt)},zn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(18).bytes(dt.trans_type),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(24).uint32(dt.trans_seq),dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(32).uint32(dt.trans_list_seq),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(42).bytes(dt.trans_channel),Lt},zn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.TransRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.trans_type=dt.bytes();break;case 3:Zt.trans_seq=dt.uint32();break;case 4:Zt.trans_list_seq=dt.uint32();break;case 5:Zt.trans_channel=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},zn),pt.TransFetchReq=(Zn.prototype.req_head=null,Zn.prototype.trans_channel=ft.newBuffer([]),Zn.prototype.fetch_array=ft.emptyArray,Zn.create=function(dt){return new Zn(dt)},Zn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(18).bytes(dt.trans_channel),dt.fetch_array!=null&&dt.fetch_array.length)for(var Vt=0;Vt<dt.fetch_array.length;++Vt)gt.liveroom_cs.StTransFetch.encode(dt.fetch_array[Vt],Lt.uint32(26).fork()).ldelim();return Lt},Zn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.TransFetchReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.trans_channel=dt.bytes();break;case 3:Zt.fetch_array&&Zt.fetch_array.length||(Zt.fetch_array=[]),Zt.fetch_array.push(gt.liveroom_cs.StTransFetch.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Zn),pt.StTransFetch=(Fn.prototype.trans_type=ft.newBuffer([]),Fn.prototype.trans_local_seq=0,Fn.create=function(dt){return new Fn(dt)},Fn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_local_seq!=null&&Object.hasOwnProperty.call(dt,"trans_local_seq")&&Lt.uint32(16).uint32(dt.trans_local_seq),Lt},Fn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransFetch;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_local_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Fn),pt.TransFetchRsp=(En.prototype.rsp_head=null,En.prototype.trans_channel=ft.newBuffer([]),En.prototype.trans_fetch_results=ft.emptyArray,En.prototype.trans_list_seq=0,En.create=function(dt){return new En(dt)},En.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(18).bytes(dt.trans_channel),dt.trans_fetch_results!=null&&dt.trans_fetch_results.length)for(var Vt=0;Vt<dt.trans_fetch_results.length;++Vt)gt.liveroom_cs.TransFetchResult.encode(dt.trans_fetch_results[Vt],Lt.uint32(26).fork()).ldelim();return dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(32).uint32(dt.trans_list_seq),Lt},En.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.TransFetchRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.trans_channel=dt.bytes();break;case 3:Zt.trans_fetch_results&&Zt.trans_fetch_results.length||(Zt.trans_fetch_results=[]),Zt.trans_fetch_results.push(gt.liveroom_cs.TransFetchResult.decode(dt,dt.uint32()));break;case 4:Zt.trans_list_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},En),pt.TransFetchResult=(Cn.prototype.trans_type=ft.newBuffer([]),Cn.prototype.trans_data=ft.newBuffer([]),Cn.prototype.trans_idname=ft.newBuffer([]),Cn.prototype.trans_nickname=ft.newBuffer([]),Cn.prototype.trans_role=0,Cn.prototype.trans_send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Cn.prototype.trans_seq=0,Cn.prototype.err_code=0,Cn.create=function(dt){return new Cn(dt)},Cn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_data!=null&&Object.hasOwnProperty.call(dt,"trans_data")&&Lt.uint32(18).bytes(dt.trans_data),dt.trans_idname!=null&&Object.hasOwnProperty.call(dt,"trans_idname")&&Lt.uint32(26).bytes(dt.trans_idname),dt.trans_nickname!=null&&Object.hasOwnProperty.call(dt,"trans_nickname")&&Lt.uint32(34).bytes(dt.trans_nickname),dt.trans_role!=null&&Object.hasOwnProperty.call(dt,"trans_role")&&Lt.uint32(40).uint32(dt.trans_role),dt.trans_send_time!=null&&Object.hasOwnProperty.call(dt,"trans_send_time")&&Lt.uint32(48).int64(dt.trans_send_time),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(56).uint32(dt.trans_seq),dt.err_code!=null&&Object.hasOwnProperty.call(dt,"err_code")&&Lt.uint32(64).int32(dt.err_code),Lt},Cn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.TransFetchResult;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_data=dt.bytes();break;case 3:Zt.trans_idname=dt.bytes();break;case 4:Zt.trans_nickname=dt.bytes();break;case 5:Zt.trans_role=dt.uint32();break;case 6:Zt.trans_send_time=dt.int64();break;case 7:Zt.trans_seq=dt.uint32();break;case 8:Zt.err_code=dt.int32();break;default:dt.skipType(7&kt)}}return Zt},Cn),pt.UserTransFetchReq=(Mn.prototype.req_head=null,Mn.prototype.nick_name=ft.newBuffer([]),Mn.prototype.role=0,Mn.prototype.trans_channel=ft.newBuffer([]),Mn.prototype.fetch_array=ft.emptyArray,Mn.create=function(dt){return new Mn(dt)},Mn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(34).bytes(dt.trans_channel),dt.fetch_array!=null&&dt.fetch_array.length)for(var Vt=0;Vt<dt.fetch_array.length;++Vt)gt.liveroom_cs.StUserTransFetch.encode(dt.fetch_array[Vt],Lt.uint32(42).fork()).ldelim();return Lt},Mn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.UserTransFetchReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.trans_channel=dt.bytes();break;case 5:Zt.fetch_array&&Zt.fetch_array.length||(Zt.fetch_array=[]),Zt.fetch_array.push(gt.liveroom_cs.StUserTransFetch.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Mn),pt.StUserTransFetch=(Vn.prototype.trans_type=ft.newBuffer([]),Vn.prototype.trans_local_seq=0,Vn.create=function(dt){return new Vn(dt)},Vn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_local_seq!=null&&Object.hasOwnProperty.call(dt,"trans_local_seq")&&Lt.uint32(16).uint32(dt.trans_local_seq),Lt},Vn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StUserTransFetch;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_local_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Vn),pt.UserTransFetchRsp=($n.prototype.rsp_head=null,$n.prototype.trans_channel=ft.newBuffer([]),$n.prototype.trans_fetch_results=ft.emptyArray,$n.create=function(dt){return new $n(dt)},$n.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(18).bytes(dt.trans_channel),dt.trans_fetch_results!=null&&dt.trans_fetch_results.length)for(var Vt=0;Vt<dt.trans_fetch_results.length;++Vt)gt.liveroom_cs.StUserTransFetchResult.encode(dt.trans_fetch_results[Vt],Lt.uint32(26).fork()).ldelim();return Lt},$n.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.UserTransFetchRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.trans_channel=dt.bytes();break;case 3:Zt.trans_fetch_results&&Zt.trans_fetch_results.length||(Zt.trans_fetch_results=[]),Zt.trans_fetch_results.push(gt.liveroom_cs.StUserTransFetchResult.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},$n),pt.StUserTransFetchResult=(Sn.prototype.trans_type=ft.newBuffer([]),Sn.prototype.trans_data=ft.newBuffer([]),Sn.prototype.trans_idname=ft.newBuffer([]),Sn.prototype.trans_nickname=ft.newBuffer([]),Sn.prototype.trans_role=0,Sn.prototype.trans_send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Sn.prototype.trans_seq=0,Sn.prototype.err_code=0,Sn.create=function(dt){return new Sn(dt)},Sn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_data!=null&&Object.hasOwnProperty.call(dt,"trans_data")&&Lt.uint32(18).bytes(dt.trans_data),dt.trans_idname!=null&&Object.hasOwnProperty.call(dt,"trans_idname")&&Lt.uint32(26).bytes(dt.trans_idname),dt.trans_nickname!=null&&Object.hasOwnProperty.call(dt,"trans_nickname")&&Lt.uint32(34).bytes(dt.trans_nickname),dt.trans_role!=null&&Object.hasOwnProperty.call(dt,"trans_role")&&Lt.uint32(40).uint32(dt.trans_role),dt.trans_send_time!=null&&Object.hasOwnProperty.call(dt,"trans_send_time")&&Lt.uint32(48).int64(dt.trans_send_time),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(56).uint32(dt.trans_seq),dt.err_code!=null&&Object.hasOwnProperty.call(dt,"err_code")&&Lt.uint32(64).int32(dt.err_code),Lt},Sn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StUserTransFetchResult;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_data=dt.bytes();break;case 3:Zt.trans_idname=dt.bytes();break;case 4:Zt.trans_nickname=dt.bytes();break;case 5:Zt.trans_role=dt.uint32();break;case 6:Zt.trans_send_time=dt.int64();break;case 7:Zt.trans_seq=dt.uint32();break;case 8:Zt.err_code=dt.int32();break;default:dt.skipType(7&kt)}}return Zt},Sn),pt.BigimChatReq=(Yn.prototype.req_head=null,Yn.prototype.nick_name=ft.newBuffer([]),Yn.prototype.role=0,Yn.prototype.msgs=ft.emptyArray,Yn.create=function(dt){return new Yn(dt)},Yn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.msgs!=null&&dt.msgs.length)for(var Vt=0;Vt<dt.msgs.length;++Vt)gt.liveroom_cs.StBigimChatData.encode(dt.msgs[Vt],Lt.uint32(34).fork()).ldelim();return Lt},Yn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.BigimChatReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.msgs&&Zt.msgs.length||(Zt.msgs=[]),Zt.msgs.push(gt.liveroom_cs.StBigimChatData.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Yn),pt.StBigimChatData=(Vr.prototype.msg_category=0,Vr.prototype.msg_type=0,Vr.prototype.msg_content=ft.newBuffer([]),Vr.prototype.msg_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,Vr.prototype.bigmsg_client_id=ft.newBuffer([]),Vr.create=function(dt){return new Vr(dt)},Vr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.msg_category!=null&&Object.hasOwnProperty.call(dt,"msg_category")&&Lt.uint32(8).uint32(dt.msg_category),dt.msg_type!=null&&Object.hasOwnProperty.call(dt,"msg_type")&&Lt.uint32(16).uint32(dt.msg_type),dt.msg_content!=null&&Object.hasOwnProperty.call(dt,"msg_content")&&Lt.uint32(26).bytes(dt.msg_content),dt.msg_timestamp!=null&&Object.hasOwnProperty.call(dt,"msg_timestamp")&&Lt.uint32(32).int64(dt.msg_timestamp),dt.bigmsg_client_id!=null&&Object.hasOwnProperty.call(dt,"bigmsg_client_id")&&Lt.uint32(42).bytes(dt.bigmsg_client_id),Lt},Vr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StBigimChatData;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.msg_category=dt.uint32();break;case 2:Zt.msg_type=dt.uint32();break;case 3:Zt.msg_content=dt.bytes();break;case 4:Zt.msg_timestamp=dt.int64();break;case 5:Zt.bigmsg_client_id=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},Vr),pt.BigimChatRsp=(Ur.prototype.rsp_head=null,Ur.prototype.bigim_time_window=0,Ur.prototype.msgs=ft.emptyArray,Ur.create=function(dt){return new Ur(dt)},Ur.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.bigim_time_window!=null&&Object.hasOwnProperty.call(dt,"bigim_time_window")&&Lt.uint32(16).uint32(dt.bigim_time_window),dt.msgs!=null&&dt.msgs.length)for(var Vt=0;Vt<dt.msgs.length;++Vt)gt.liveroom_cs.StBigimChatRspData.encode(dt.msgs[Vt],Lt.uint32(26).fork()).ldelim();return Lt},Ur.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.BigimChatRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.bigim_time_window=dt.uint32();break;case 3:Zt.msgs&&Zt.msgs.length||(Zt.msgs=[]),Zt.msgs.push(gt.liveroom_cs.StBigimChatRspData.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Ur),pt.StBigimChatRspData=(cn.prototype.bigmsg_id=ft.newBuffer([]),cn.prototype.bigmsg_client_id=ft.newBuffer([]),cn.create=function(dt){return new cn(dt)},cn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.bigmsg_id!=null&&Object.hasOwnProperty.call(dt,"bigmsg_id")&&Lt.uint32(10).bytes(dt.bigmsg_id),dt.bigmsg_client_id!=null&&Object.hasOwnProperty.call(dt,"bigmsg_client_id")&&Lt.uint32(18).bytes(dt.bigmsg_client_id),Lt},cn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StBigimChatRspData;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.bigmsg_id=dt.bytes();break;case 2:Zt.bigmsg_client_id=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},cn),pt.RelayReq=(gn.prototype.req_head=null,gn.prototype.nick_name=ft.newBuffer([]),gn.prototype.role=0,gn.prototype.relay_type=ft.newBuffer([]),gn.prototype.relay_data=ft.newBuffer([]),gn.create=function(dt){return new gn(dt)},gn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.relay_type!=null&&Object.hasOwnProperty.call(dt,"relay_type")&&Lt.uint32(34).bytes(dt.relay_type),dt.relay_data!=null&&Object.hasOwnProperty.call(dt,"relay_data")&&Lt.uint32(42).bytes(dt.relay_data),Lt},gn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RelayReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.relay_type=dt.bytes();break;case 5:Zt.relay_data=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},gn),pt.RelayRsp=(kn.prototype.rsp_head=null,kn.prototype.reley_type=ft.newBuffer([]),kn.prototype.relay_result=ft.newBuffer([]),kn.create=function(dt){return new kn(dt)},kn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.reley_type!=null&&Object.hasOwnProperty.call(dt,"reley_type")&&Lt.uint32(18).bytes(dt.reley_type),dt.relay_result!=null&&Object.hasOwnProperty.call(dt,"relay_result")&&Lt.uint32(26).bytes(dt.relay_result),Lt},kn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RelayRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.reley_type=dt.bytes();break;case 3:Zt.relay_result=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},kn),pt.RenewTokenReq=(dn.prototype.req_head=null,dn.prototype.token="",dn.create=function(dt){return new dn(dt)},dn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.req_head!=null&&Object.hasOwnProperty.call(dt,"req_head")&&gt.liveroom_cs.ReqHead.encode(dt.req_head,Lt.uint32(10).fork()).ldelim(),dt.token!=null&&Object.hasOwnProperty.call(dt,"token")&&Lt.uint32(18).string(dt.token),Lt},dn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RenewTokenReq;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.req_head=gt.liveroom_cs.ReqHead.decode(dt,dt.uint32());break;case 2:Zt.token=dt.string();break;default:dt.skipType(7&kt)}}return Zt},dn),pt.RenewTokenRsp=(Bn.prototype.rsp_head=null,Bn.prototype.token_remain_time=0,Bn.create=function(dt){return new Bn(dt)},Bn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.rsp_head!=null&&Object.hasOwnProperty.call(dt,"rsp_head")&&gt.liveroom_cs.RspHead.encode(dt.rsp_head,Lt.uint32(10).fork()).ldelim(),dt.token_remain_time!=null&&Object.hasOwnProperty.call(dt,"token_remain_time")&&Lt.uint32(16).uint32(dt.token_remain_time),Lt},Bn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.RenewTokenRsp;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.rsp_head=gt.liveroom_cs.RspHead.decode(dt,dt.uint32());break;case 2:Zt.token_remain_time=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Bn),pt.UserAction=(Xr.prototype.action=0,Xr.prototype.id_name=ft.newBuffer([]),Xr.prototype.nick_name=ft.newBuffer([]),Xr.prototype.role=0,Xr.prototype.login_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Xr.create=function(dt){return new Xr(dt)},Xr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.action!=null&&Object.hasOwnProperty.call(dt,"action")&&Lt.uint32(8).uint32(dt.action),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(18).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(26).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(32).uint32(dt.role),dt.login_time!=null&&Object.hasOwnProperty.call(dt,"login_time")&&Lt.uint32(40).int64(dt.login_time),Lt},Xr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.UserAction;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.action=dt.uint32();break;case 2:Zt.id_name=dt.bytes();break;case 3:Zt.nick_name=dt.bytes();break;case 4:Zt.role=dt.uint32();break;case 5:Zt.login_time=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},Xr),pt.PushUserInfoUpdated=(Hn.prototype.room_id=ft.newBuffer([]),Hn.prototype.server_user_seq=ft.Long?ft.Long.fromBits(0,0,!1):0,Hn.prototype.user_list=ft.emptyArray,Hn.create=function(dt){return new Hn(dt)},Hn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).bytes(dt.room_id),dt.server_user_seq!=null&&Object.hasOwnProperty.call(dt,"server_user_seq")&&Lt.uint32(16).int64(dt.server_user_seq),dt.user_list!=null&&dt.user_list.length)for(var Vt=0;Vt<dt.user_list.length;++Vt)gt.liveroom_cs.UserAction.encode(dt.user_list[Vt],Lt.uint32(26).fork()).ldelim();return Lt},Hn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushUserInfoUpdated;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.bytes();break;case 2:Zt.server_user_seq=dt.int64();break;case 3:Zt.user_list&&Zt.user_list.length||(Zt.user_list=[]),Zt.user_list.push(gt.liveroom_cs.UserAction.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Hn),pt.PushUserKickout=(po.prototype.id_name=ft.newBuffer([]),po.prototype.room_id=ft.newBuffer([]),po.prototype.session_id=ft.Long?ft.Long.fromBits(0,0,!0):0,po.prototype.kickout_reason=0,po.prototype.custom_reason=ft.newBuffer([]),po.create=function(dt){return new po(dt)},po.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.session_id!=null&&Object.hasOwnProperty.call(dt,"session_id")&&Lt.uint32(24).uint64(dt.session_id),dt.kickout_reason!=null&&Object.hasOwnProperty.call(dt,"kickout_reason")&&Lt.uint32(32).int32(dt.kickout_reason),dt.custom_reason!=null&&Object.hasOwnProperty.call(dt,"custom_reason")&&Lt.uint32(42).bytes(dt.custom_reason),Lt},po.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushUserKickout;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.session_id=dt.uint64();break;case 4:Zt.kickout_reason=dt.int32();break;case 5:Zt.custom_reason=dt.bytes();break;default:dt.skipType(7&kt)}}return Zt},po),pt.PushUserLogReport=(go.create=function(dt){return new go(dt)},go.encode=function(dt,Lt){return Lt||ht.create()},go.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));var Vt=Lt===void 0?dt.len:dt.pos+Lt;for(Lt=new gt.liveroom_cs.PushUserLogReport;dt.pos<Vt;){var Zt=dt.uint32();dt.skipType(7&Zt)}return Lt},go),pt.PushUserTokenExpire=(mo.prototype.room_id=ft.newBuffer([]),mo.prototype.token="",mo.prototype.stop_stream=null,mo.create=function(dt){return new mo(dt)},mo.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).bytes(dt.room_id),dt.token!=null&&Object.hasOwnProperty.call(dt,"token")&&Lt.uint32(18).string(dt.token),dt.stop_stream!=null&&Object.hasOwnProperty.call(dt,"stop_stream")&&gt.liveroom_cs.StopStream.encode(dt.stop_stream,Lt.uint32(26).fork()).ldelim(),Lt},mo.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushUserTokenExpire;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.bytes();break;case 2:Zt.token=dt.string();break;case 3:Zt.stop_stream=gt.liveroom_cs.StopStream.decode(dt,dt.uint32());break;default:dt.skipType(7&kt)}}return Zt},mo),pt.StopStream=(Jr.prototype.stream_id_list=ft.emptyArray,Jr.create=function(dt){return new Jr(dt)},Jr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.stream_id_list!=null&&dt.stream_id_list.length)for(var Vt=0;Vt<dt.stream_id_list.length;++Vt)Lt.uint32(10).bytes(dt.stream_id_list[Vt]);return Lt},Jr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StopStream;dt.pos<Vt;){var kt=dt.uint32();kt>>>3==1?(Zt.stream_id_list&&Zt.stream_id_list.length||(Zt.stream_id_list=[]),Zt.stream_id_list.push(dt.bytes())):dt.skipType(7&kt)}return Zt},Jr),pt.PushStream=(bo.prototype.room_id=ft.newBuffer([]),bo.prototype.stream_seq=0,bo.prototype.stream_info=ft.emptyArray,bo.create=function(dt){return new bo(dt)},bo.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).bytes(dt.room_id),dt.stream_seq!=null&&Object.hasOwnProperty.call(dt,"stream_seq")&&Lt.uint32(16).uint32(dt.stream_seq),dt.stream_info!=null&&dt.stream_info.length)for(var Vt=0;Vt<dt.stream_info.length;++Vt)gt.liveroom_cs.StPushStreamInfo.encode(dt.stream_info[Vt],Lt.uint32(26).fork()).ldelim();return Lt},bo.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushStream;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.bytes();break;case 2:Zt.stream_seq=dt.uint32();break;case 3:Zt.stream_info&&Zt.stream_info.length||(Zt.stream_info=[]),Zt.stream_info.push(gt.liveroom_cs.StPushStreamInfo.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},bo),pt.StPushStreamInfo=(Wn.prototype.stream_id=ft.newBuffer([]),Wn.prototype.stream_sid="",Wn.prototype.id_name=ft.newBuffer([]),Wn.prototype.nick_name=ft.newBuffer([]),Wn.prototype.extra_info=ft.newBuffer([]),Wn.prototype.title=ft.newBuffer([]),Wn.prototype.third_define_data=ft.newBuffer([]),Wn.prototype.create_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Wn.prototype.req_seq=0,Wn.prototype.stream_ver=0,Wn.prototype.stream_attr=ft.newBuffer([]),Wn.prototype.stream_src=0,Wn.prototype.stream_state=0,Wn.prototype.stream_type=0,Wn.prototype.stream_nid=0,Wn.prototype.close_type=0,Wn.create=function(dt){return new Wn(dt)},Wn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.stream_id!=null&&Object.hasOwnProperty.call(dt,"stream_id")&&Lt.uint32(10).bytes(dt.stream_id),dt.stream_sid!=null&&Object.hasOwnProperty.call(dt,"stream_sid")&&Lt.uint32(18).string(dt.stream_sid),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(26).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(34).bytes(dt.nick_name),dt.extra_info!=null&&Object.hasOwnProperty.call(dt,"extra_info")&&Lt.uint32(42).bytes(dt.extra_info),dt.title!=null&&Object.hasOwnProperty.call(dt,"title")&&Lt.uint32(50).bytes(dt.title),dt.third_define_data!=null&&Object.hasOwnProperty.call(dt,"third_define_data")&&Lt.uint32(58).bytes(dt.third_define_data),dt.create_time!=null&&Object.hasOwnProperty.call(dt,"create_time")&&Lt.uint32(64).int64(dt.create_time),dt.req_seq!=null&&Object.hasOwnProperty.call(dt,"req_seq")&&Lt.uint32(72).uint32(dt.req_seq),dt.stream_ver!=null&&Object.hasOwnProperty.call(dt,"stream_ver")&&Lt.uint32(80).uint32(dt.stream_ver),dt.stream_attr!=null&&Object.hasOwnProperty.call(dt,"stream_attr")&&Lt.uint32(90).bytes(dt.stream_attr),dt.stream_src!=null&&Object.hasOwnProperty.call(dt,"stream_src")&&Lt.uint32(96).uint32(dt.stream_src),dt.stream_state!=null&&Object.hasOwnProperty.call(dt,"stream_state")&&Lt.uint32(104).uint32(dt.stream_state),dt.stream_type!=null&&Object.hasOwnProperty.call(dt,"stream_type")&&Lt.uint32(112).uint32(dt.stream_type),dt.stream_nid!=null&&Object.hasOwnProperty.call(dt,"stream_nid")&&Lt.uint32(120).uint32(dt.stream_nid),dt.close_type!=null&&Object.hasOwnProperty.call(dt,"close_type")&&Lt.uint32(128).uint32(dt.close_type),Lt},Wn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StPushStreamInfo;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.stream_id=dt.bytes();break;case 2:Zt.stream_sid=dt.string();break;case 3:Zt.id_name=dt.bytes();break;case 4:Zt.nick_name=dt.bytes();break;case 5:Zt.extra_info=dt.bytes();break;case 6:Zt.title=dt.bytes();break;case 7:Zt.third_define_data=dt.bytes();break;case 8:Zt.create_time=dt.int64();break;case 9:Zt.req_seq=dt.uint32();break;case 10:Zt.stream_ver=dt.uint32();break;case 11:Zt.stream_attr=dt.bytes();break;case 12:Zt.stream_src=dt.uint32();break;case 13:Zt.stream_state=dt.uint32();break;case 14:Zt.stream_type=dt.uint32();break;case 15:Zt.stream_nid=dt.uint32();break;case 16:Zt.close_type=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Wn),pt.PushImChat=(Gn.prototype.room_id=ft.newBuffer([]),Gn.prototype.server_msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Gn.prototype.ret_msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,Gn.prototype.msg_data=ft.emptyArray,Gn.create=function(dt){return new Gn(dt)},Gn.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(10).bytes(dt.room_id),dt.server_msg_id!=null&&Object.hasOwnProperty.call(dt,"server_msg_id")&&Lt.uint32(16).uint64(dt.server_msg_id),dt.ret_msg_id!=null&&Object.hasOwnProperty.call(dt,"ret_msg_id")&&Lt.uint32(24).uint64(dt.ret_msg_id),dt.msg_data!=null&&dt.msg_data.length)for(var Vt=0;Vt<dt.msg_data.length;++Vt)gt.liveroom_cs.StImChatData.encode(dt.msg_data[Vt],Lt.uint32(34).fork()).ldelim();return Lt},Gn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushImChat;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.room_id=dt.bytes();break;case 2:Zt.server_msg_id=dt.uint64();break;case 3:Zt.ret_msg_id=dt.uint64();break;case 4:Zt.msg_data&&Zt.msg_data.length||(Zt.msg_data=[]),Zt.msg_data.push(gt.liveroom_cs.StImChatData.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},Gn),pt.StImChatData=(eo.prototype.id_name=ft.newBuffer([]),eo.prototype.nick_name=ft.newBuffer([]),eo.prototype.role=0,eo.prototype.msg_id=ft.Long?ft.Long.fromBits(0,0,!0):0,eo.prototype.msg_category=0,eo.prototype.msg_type=0,eo.prototype.msg_priority=0,eo.prototype.msg_content=ft.newBuffer([]),eo.prototype.send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,eo.create=function(dt){return new eo(dt)},eo.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.msg_id!=null&&Object.hasOwnProperty.call(dt,"msg_id")&&Lt.uint32(32).uint64(dt.msg_id),dt.msg_category!=null&&Object.hasOwnProperty.call(dt,"msg_category")&&Lt.uint32(40).uint32(dt.msg_category),dt.msg_type!=null&&Object.hasOwnProperty.call(dt,"msg_type")&&Lt.uint32(48).uint32(dt.msg_type),dt.msg_priority!=null&&Object.hasOwnProperty.call(dt,"msg_priority")&&Lt.uint32(56).uint32(dt.msg_priority),dt.msg_content!=null&&Object.hasOwnProperty.call(dt,"msg_content")&&Lt.uint32(66).bytes(dt.msg_content),dt.send_time!=null&&Object.hasOwnProperty.call(dt,"send_time")&&Lt.uint32(72).int64(dt.send_time),Lt},eo.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StImChatData;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.msg_id=dt.uint64();break;case 5:Zt.msg_category=dt.uint32();break;case 6:Zt.msg_type=dt.uint32();break;case 7:Zt.msg_priority=dt.uint32();break;case 8:Zt.msg_content=dt.bytes();break;case 9:Zt.send_time=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},eo),pt.PushBigImChat=(ho.prototype.app_id=0,ho.prototype.room_id=ft.newBuffer([]),ho.prototype.timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,ho.prototype.msg_data=ft.emptyArray,ho.create=function(dt){return new ho(dt)},ho.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.app_id!=null&&Object.hasOwnProperty.call(dt,"app_id")&&Lt.uint32(8).uint32(dt.app_id),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.timestamp!=null&&Object.hasOwnProperty.call(dt,"timestamp")&&Lt.uint32(24).int64(dt.timestamp),dt.msg_data!=null&&dt.msg_data.length)for(var Vt=0;Vt<dt.msg_data.length;++Vt)gt.liveroom_cs.StBigImChatData.encode(dt.msg_data[Vt],Lt.uint32(34).fork()).ldelim();return Lt},ho.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushBigImChat;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.app_id=dt.uint32();break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.timestamp=dt.int64();break;case 4:Zt.msg_data&&Zt.msg_data.length||(Zt.msg_data=[]),Zt.msg_data.push(gt.liveroom_cs.StBigImChatData.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},ho),pt.StBigImChatData=(lo.prototype.id_name=ft.newBuffer([]),lo.prototype.nick_name=ft.newBuffer([]),lo.prototype.role=0,lo.prototype.bigmsg_id=ft.newBuffer([]),lo.prototype.msg_category=0,lo.prototype.msg_type=0,lo.prototype.msg_content=ft.newBuffer([]),lo.prototype.msg_timestamp=ft.Long?ft.Long.fromBits(0,0,!1):0,lo.create=function(dt){return new lo(dt)},lo.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.id_name!=null&&Object.hasOwnProperty.call(dt,"id_name")&&Lt.uint32(10).bytes(dt.id_name),dt.nick_name!=null&&Object.hasOwnProperty.call(dt,"nick_name")&&Lt.uint32(18).bytes(dt.nick_name),dt.role!=null&&Object.hasOwnProperty.call(dt,"role")&&Lt.uint32(24).uint32(dt.role),dt.bigmsg_id!=null&&Object.hasOwnProperty.call(dt,"bigmsg_id")&&Lt.uint32(34).bytes(dt.bigmsg_id),dt.msg_category!=null&&Object.hasOwnProperty.call(dt,"msg_category")&&Lt.uint32(40).uint32(dt.msg_category),dt.msg_type!=null&&Object.hasOwnProperty.call(dt,"msg_type")&&Lt.uint32(48).uint32(dt.msg_type),dt.msg_content!=null&&Object.hasOwnProperty.call(dt,"msg_content")&&Lt.uint32(58).bytes(dt.msg_content),dt.msg_timestamp!=null&&Object.hasOwnProperty.call(dt,"msg_timestamp")&&Lt.uint32(64).int64(dt.msg_timestamp),Lt},lo.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StBigImChatData;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.id_name=dt.bytes();break;case 2:Zt.nick_name=dt.bytes();break;case 3:Zt.role=dt.uint32();break;case 4:Zt.bigmsg_id=dt.bytes();break;case 5:Zt.msg_category=dt.uint32();break;case 6:Zt.msg_type=dt.uint32();break;case 7:Zt.msg_content=dt.bytes();break;case 8:Zt.msg_timestamp=dt.int64();break;default:dt.skipType(7&kt)}}return Zt},lo),pt.PushTrans=(Dn.prototype.app_id=0,Dn.prototype.room_id=ft.newBuffer([]),Dn.prototype.trans_idname=ft.newBuffer([]),Dn.prototype.trans_nickname=ft.newBuffer([]),Dn.prototype.trans_role=0,Dn.prototype.trans_type=ft.newBuffer([]),Dn.prototype.trans_data=ft.newBuffer([]),Dn.prototype.trans_seq=0,Dn.prototype.trans_send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,Dn.prototype.trans_channel=ft.newBuffer([]),Dn.prototype.trans_list_seq=0,Dn.create=function(dt){return new Dn(dt)},Dn.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.app_id!=null&&Object.hasOwnProperty.call(dt,"app_id")&&Lt.uint32(8).uint32(dt.app_id),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.trans_idname!=null&&Object.hasOwnProperty.call(dt,"trans_idname")&&Lt.uint32(26).bytes(dt.trans_idname),dt.trans_nickname!=null&&Object.hasOwnProperty.call(dt,"trans_nickname")&&Lt.uint32(34).bytes(dt.trans_nickname),dt.trans_role!=null&&Object.hasOwnProperty.call(dt,"trans_role")&&Lt.uint32(40).uint32(dt.trans_role),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(50).bytes(dt.trans_type),dt.trans_data!=null&&Object.hasOwnProperty.call(dt,"trans_data")&&Lt.uint32(58).bytes(dt.trans_data),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(64).uint32(dt.trans_seq),dt.trans_send_time!=null&&Object.hasOwnProperty.call(dt,"trans_send_time")&&Lt.uint32(72).int64(dt.trans_send_time),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(82).bytes(dt.trans_channel),dt.trans_list_seq!=null&&Object.hasOwnProperty.call(dt,"trans_list_seq")&&Lt.uint32(88).uint32(dt.trans_list_seq),Lt},Dn.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushTrans;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.app_id=dt.uint32();break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.trans_idname=dt.bytes();break;case 4:Zt.trans_nickname=dt.bytes();break;case 5:Zt.trans_role=dt.uint32();break;case 6:Zt.trans_type=dt.bytes();break;case 7:Zt.trans_data=dt.bytes();break;case 8:Zt.trans_seq=dt.uint32();break;case 9:Zt.trans_send_time=dt.int64();break;case 10:Zt.trans_channel=dt.bytes();break;case 11:Zt.trans_list_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},Dn),pt.PushUserTrans=(sr.prototype.app_id=0,sr.prototype.room_id=ft.newBuffer([]),sr.prototype.trans_idname=ft.newBuffer([]),sr.prototype.trans_nickname=ft.newBuffer([]),sr.prototype.trans_role=0,sr.prototype.trans_send_time=ft.Long?ft.Long.fromBits(0,0,!1):0,sr.prototype.trans_channel=ft.newBuffer([]),sr.prototype.trans_array=ft.emptyArray,sr.create=function(dt){return new sr(dt)},sr.encode=function(dt,Lt){if(Lt=Lt||ht.create(),dt.app_id!=null&&Object.hasOwnProperty.call(dt,"app_id")&&Lt.uint32(8).uint32(dt.app_id),dt.room_id!=null&&Object.hasOwnProperty.call(dt,"room_id")&&Lt.uint32(18).bytes(dt.room_id),dt.trans_idname!=null&&Object.hasOwnProperty.call(dt,"trans_idname")&&Lt.uint32(26).bytes(dt.trans_idname),dt.trans_nickname!=null&&Object.hasOwnProperty.call(dt,"trans_nickname")&&Lt.uint32(34).bytes(dt.trans_nickname),dt.trans_role!=null&&Object.hasOwnProperty.call(dt,"trans_role")&&Lt.uint32(40).uint32(dt.trans_role),dt.trans_send_time!=null&&Object.hasOwnProperty.call(dt,"trans_send_time")&&Lt.uint32(72).int64(dt.trans_send_time),dt.trans_channel!=null&&Object.hasOwnProperty.call(dt,"trans_channel")&&Lt.uint32(82).bytes(dt.trans_channel),dt.trans_array!=null&&dt.trans_array.length)for(var Vt=0;Vt<dt.trans_array.length;++Vt)gt.liveroom_cs.StTransSimple.encode(dt.trans_array[Vt],Lt.uint32(90).fork()).ldelim();return Lt},sr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.PushUserTrans;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.app_id=dt.uint32();break;case 2:Zt.room_id=dt.bytes();break;case 3:Zt.trans_idname=dt.bytes();break;case 4:Zt.trans_nickname=dt.bytes();break;case 5:Zt.trans_role=dt.uint32();break;case 9:Zt.trans_send_time=dt.int64();break;case 10:Zt.trans_channel=dt.bytes();break;case 11:Zt.trans_array&&Zt.trans_array.length||(Zt.trans_array=[]),Zt.trans_array.push(gt.liveroom_cs.StTransSimple.decode(dt,dt.uint32()));break;default:dt.skipType(7&kt)}}return Zt},sr),pt.StTransSimple=(xr.prototype.trans_type=ft.newBuffer([]),xr.prototype.trans_data=ft.newBuffer([]),xr.prototype.trans_seq=0,xr.create=function(dt){return new xr(dt)},xr.encode=function(dt,Lt){return Lt=Lt||ht.create(),dt.trans_type!=null&&Object.hasOwnProperty.call(dt,"trans_type")&&Lt.uint32(10).bytes(dt.trans_type),dt.trans_data!=null&&Object.hasOwnProperty.call(dt,"trans_data")&&Lt.uint32(18).bytes(dt.trans_data),dt.trans_seq!=null&&Object.hasOwnProperty.call(dt,"trans_seq")&&Lt.uint32(24).uint32(dt.trans_seq),Lt},xr.decode=function(dt,Lt){dt instanceof ut||(dt=ut.create(dt));for(var Vt=Lt===void 0?dt.len:dt.pos+Lt,Zt=new gt.liveroom_cs.StTransSimple;dt.pos<Vt;){var kt=dt.uint32();switch(kt>>>3){case 1:Zt.trans_type=dt.bytes();break;case 2:Zt.trans_data=dt.bytes();break;case 3:Zt.trans_seq=dt.uint32();break;default:dt.skipType(7&kt)}}return Zt},xr),pt),st.exports=gt},function(st,at,lt){var ct=function(pt){Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0;var ut=null;try{ut=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ht(jt,zt,Yt){this.low=0|jt,this.high=0|zt,this.unsigned=!!Yt}function ft(jt){return(jt&&jt.__isLong__)===!0}function gt(jt){var zt=Math.clz32(jt&-jt);return jt?31-zt:zt}Object.defineProperty(ht.prototype,"__isLong__",{value:!0}),ht.isLong=ft;var vt={},yt={};function mt(jt,zt){var Yt,Kt,er;return zt?(er=0<=(jt>>>=0)&&jt<256)&&(Kt=yt[jt])?Kt:(Yt=bt(jt,0,!0),er&&(yt[jt]=Yt),Yt):(er=-128<=(jt|=0)&&jt<128)&&(Kt=vt[jt])?Kt:(Yt=bt(jt,jt<0?-1:0,!1),er&&(vt[jt]=Yt),Yt)}function Et(jt,zt){if(isNaN(jt))return zt?Ut:Ot;if(zt){if(jt<0)return Ut;if(It<=jt)return Nt}else{if(jt<=-St)return $t;if(St<=jt+1)return Mt}return jt<0?Et(-jt,zt).neg():bt(jt%Rt|0,jt/Rt|0,zt)}function bt(jt,zt,Yt){return new ht(jt,zt,Yt)}ht.fromInt=mt,ht.fromNumber=Et,ht.fromBits=bt;var Ct=Math.pow;function Tt(jt,zt,Yt){if(jt.length===0)throw Error("empty string");if(zt=typeof zt=="number"?(Yt=zt,!1):!!zt,jt==="NaN"||jt==="Infinity"||jt==="+Infinity"||jt==="-Infinity")return zt?Ut:Ot;if((Yt=Yt||10)<2||36<Yt)throw RangeError("radix");var Kt;if(0<(Kt=jt.indexOf("-")))throw Error("interior hyphen");if(Kt===0)return Tt(jt.substring(1),zt,Yt).neg();for(var er=Et(Ct(Yt,8)),ir=Ot,rr=0;rr<jt.length;rr+=8){var lr=Math.min(8,jt.length-rr),nr=parseInt(jt.substring(rr,rr+lr),Yt);ir=lr<8?(lr=Et(Ct(Yt,lr)),ir.mul(lr).add(Et(nr))):(ir=ir.mul(er)).add(Et(nr))}return ir.unsigned=zt,ir}function wt(jt,zt){return typeof jt=="number"?Et(jt,zt):typeof jt=="string"?Tt(jt,zt):bt(jt.low,jt.high,typeof zt=="boolean"?zt:jt.unsigned)}ht.fromString=Tt,ht.fromValue=wt;var Rt=4294967296,It=Rt*Rt,St=It/2,Pt=mt(1<<24),Ot=mt(0),Ut=(ht.ZERO=Ot,mt(0,!0)),Bt=(ht.UZERO=Ut,mt(1)),xt=(ht.ONE=Bt,mt(1,!0)),At=(ht.UONE=xt,mt(-1)),Mt=(ht.NEG_ONE=At,bt(-1,2147483647,!1)),Nt=(ht.MAX_VALUE=Mt,bt(-1,-1,!0)),$t=(ht.MAX_UNSIGNED_VALUE=Nt,bt(0,-2147483648,!1)),Ft=(ht.MIN_VALUE=$t,ht.prototype);return Ft.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ft.toNumber=function(){return this.unsigned?(this.high>>>0)*Rt+(this.low>>>0):this.high*Rt+(this.low>>>0)},Ft.toString=function(jt){if((jt=jt||10)<2||36<jt)throw RangeError("radix");if(this.isZero())return"0";var zt,Yt;if(this.isNegative())return this.eq($t)?(Yt=Et(jt),Yt=(zt=this.div(Yt)).mul(Yt).sub(this),zt.toString(jt)+Yt.toInt().toString(jt)):"-"+this.neg().toString(jt);for(var Kt=Et(Ct(jt,6),this.unsigned),er=this,ir="";;){var rr=er.div(Kt),lr=(er.sub(rr.mul(Kt)).toInt()>>>0).toString(jt);if((er=rr).isZero())return lr+ir;for(;lr.length<6;)lr="0"+lr;ir=""+lr+ir}},Ft.getHighBits=function(){return this.high},Ft.getHighBitsUnsigned=function(){return this.high>>>0},Ft.getLowBits=function(){return this.low},Ft.getLowBitsUnsigned=function(){return this.low>>>0},Ft.getNumBitsAbs=function(){if(this.isNegative())return this.eq($t)?64:this.neg().getNumBitsAbs();for(var jt=this.high!=0?this.high:this.low,zt=31;0<zt&&!(jt&1<<zt);zt--);return this.high!=0?zt+33:zt+1},Ft.isZero=function(){return this.high===0&&this.low===0},Ft.eqz=Ft.isZero,Ft.isNegative=function(){return!this.unsigned&&this.high<0},Ft.isPositive=function(){return this.unsigned||0<=this.high},Ft.isOdd=function(){return(1&this.low)==1},Ft.isEven=function(){return(1&this.low)==0},Ft.equals=function(jt){return ft(jt)||(jt=wt(jt)),(this.unsigned===jt.unsigned||this.high>>>31!=1||jt.high>>>31!=1)&&this.high===jt.high&&this.low===jt.low},Ft.eq=Ft.equals,Ft.notEquals=function(jt){return!this.eq(jt)},Ft.neq=Ft.notEquals,Ft.ne=Ft.notEquals,Ft.lessThan=function(jt){return this.comp(jt)<0},Ft.lt=Ft.lessThan,Ft.lessThanOrEqual=function(jt){return this.comp(jt)<=0},Ft.lte=Ft.lessThanOrEqual,Ft.le=Ft.lessThanOrEqual,Ft.greaterThan=function(jt){return 0<this.comp(jt)},Ft.gt=Ft.greaterThan,Ft.greaterThanOrEqual=function(jt){return 0<=this.comp(jt)},Ft.gte=Ft.greaterThanOrEqual,Ft.ge=Ft.greaterThanOrEqual,Ft.compare=function(jt){if(ft(jt)||(jt=wt(jt)),this.eq(jt))return 0;var zt=this.isNegative(),Yt=jt.isNegative();return zt&&!Yt?-1:!zt&&Yt?1:this.unsigned?jt.high>>>0>this.high>>>0||jt.high===this.high&&jt.low>>>0>this.low>>>0?-1:1:this.sub(jt).isNegative()?-1:1},Ft.comp=Ft.compare,Ft.negate=function(){return!this.unsigned&&this.eq($t)?$t:this.not().add(Bt)},Ft.neg=Ft.negate,Ft.add=function(jt){ft(jt)||(jt=wt(jt));var zt=this.high>>>16,Yt=65535&this.high,Kt=this.low>>>16,er=65535&this.low,ir=jt.high>>>16,rr=65535&jt.high,lr=jt.low>>>16,nr=0,hr=0,vr=0,yr=0;return hr+=(vr=vr+((yr+=er+(65535&jt.low))>>>16)+(Kt+lr))>>>16,bt((vr&=65535)<<16|(yr&=65535),((nr+=(hr+=Yt+rr)>>>16)+(zt+ir)&65535)<<16|(hr&=65535),this.unsigned)},Ft.subtract=function(jt){return ft(jt)||(jt=wt(jt)),this.add(jt.neg())},Ft.sub=Ft.subtract,Ft.multiply=function(jt){if(this.isZero())return this;if(ft(jt)||(jt=wt(jt)),ut)return bt(ut.mul(this.low,this.high,jt.low,jt.high),ut.get_high(),this.unsigned);if(jt.isZero())return this.unsigned?Ut:Ot;if(this.eq($t))return jt.isOdd()?$t:Ot;if(jt.eq($t))return this.isOdd()?$t:Ot;if(this.isNegative())return jt.isNegative()?this.neg().mul(jt.neg()):this.neg().mul(jt).neg();if(jt.isNegative())return this.mul(jt.neg()).neg();if(this.lt(Pt)&&jt.lt(Pt))return Et(this.toNumber()*jt.toNumber(),this.unsigned);var zt=this.high>>>16,Yt=65535&this.high,Kt=this.low>>>16,er=65535&this.low,ir=jt.high>>>16,rr=65535&jt.high,lr=jt.low>>>16,nr=0,hr=0,vr=0,yr=(yr=0)+((hr=hr+((vr+=er*(jt=65535&jt.low))>>>16)+Kt*jt)>>>16)+((hr=(65535&hr)+er*lr)>>>16);return bt((hr&=65535)<<16|(vr&=65535),((nr+=(yr+=Yt*jt)>>>16)+((yr=(65535&yr)+Kt*lr)>>>16)+((yr=(65535&yr)+er*rr)>>>16)+(zt*jt+Yt*lr+Kt*rr+er*ir)&65535)<<16|(yr&=65535),this.unsigned)},Ft.mul=Ft.multiply,Ft.divide=function(jt){if((jt=ft(jt)?jt:wt(jt)).isZero())throw Error("division by zero");var zt,Yt,Kt;if(ut)return this.unsigned||this.high!==-2147483648||jt.low!==-1||jt.high!==-1?bt((this.unsigned?ut.div_u:ut.div_s)(this.low,this.high,jt.low,jt.high),ut.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ut:Ot;if(this.unsigned){if((jt=jt.unsigned?jt:jt.toUnsigned()).gt(this))return Ut;if(jt.gt(this.shru(1)))return xt;Yt=Ut}else{if(this.eq($t))return jt.eq(Bt)||jt.eq(At)?$t:jt.eq($t)?Bt:(Kt=this.shr(1).div(jt).shl(1)).eq(Ot)?jt.isNegative()?Bt:At:(zt=this.sub(jt.mul(Kt)),Kt.add(zt.div(jt)));if(jt.eq($t))return this.unsigned?Ut:Ot;if(this.isNegative())return jt.isNegative()?this.neg().div(jt.neg()):this.neg().div(jt).neg();if(jt.isNegative())return this.div(jt.neg()).neg();Yt=Ot}for(zt=this;zt.gte(jt);){Kt=Math.max(1,Math.floor(zt.toNumber()/jt.toNumber()));for(var er=Math.ceil(Math.log(Kt)/Math.LN2),ir=er<=48?1:Ct(2,er-48),rr=Et(Kt),lr=rr.mul(jt);lr.isNegative()||lr.gt(zt);)lr=(rr=Et(Kt-=ir,this.unsigned)).mul(jt);rr.isZero()&&(rr=Bt),Yt=Yt.add(rr),zt=zt.sub(lr)}return Yt},Ft.div=Ft.divide,Ft.modulo=function(jt){return ft(jt)||(jt=wt(jt)),ut?bt((this.unsigned?ut.rem_u:ut.rem_s)(this.low,this.high,jt.low,jt.high),ut.get_high(),this.unsigned):this.sub(this.div(jt).mul(jt))},Ft.mod=Ft.modulo,Ft.rem=Ft.modulo,Ft.not=function(){return bt(~this.low,~this.high,this.unsigned)},Ft.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Ft.clz=Ft.countLeadingZeros,Ft.countTrailingZeros=function(){return this.low?gt(this.low):gt(this.high)+32},Ft.ctz=Ft.countTrailingZeros,Ft.and=function(jt){return ft(jt)||(jt=wt(jt)),bt(this.low&jt.low,this.high&jt.high,this.unsigned)},Ft.or=function(jt){return ft(jt)||(jt=wt(jt)),bt(this.low|jt.low,this.high|jt.high,this.unsigned)},Ft.xor=function(jt){return ft(jt)||(jt=wt(jt)),bt(this.low^jt.low,this.high^jt.high,this.unsigned)},Ft.shiftLeft=function(jt){return ft(jt)&&(jt=jt.toInt()),(jt&=63)==0?this:jt<32?bt(this.low<<jt,this.high<<jt|this.low>>>32-jt,this.unsigned):bt(0,this.low<<jt-32,this.unsigned)},Ft.shl=Ft.shiftLeft,Ft.shiftRight=function(jt){return ft(jt)&&(jt=jt.toInt()),(jt&=63)==0?this:jt<32?bt(this.low>>>jt|this.high<<32-jt,this.high>>jt,this.unsigned):bt(this.high>>jt-32,0<=this.high?0:-1,this.unsigned)},Ft.shr=Ft.shiftRight,Ft.shiftRightUnsigned=function(jt){return ft(jt)&&(jt=jt.toInt()),(jt&=63)==0?this:jt<32?bt(this.low>>>jt|this.high<<32-jt,this.high>>>jt,this.unsigned):bt(jt===32?this.high:this.high>>>jt-32,0,this.unsigned)},Ft.shru=Ft.shiftRightUnsigned,Ft.shr_u=Ft.shiftRightUnsigned,Ft.rotateLeft=function(jt){var zt;return ft(jt)&&(jt=jt.toInt()),(jt&=63)==0?this:jt===32?bt(this.high,this.low,this.unsigned):jt<32?bt(this.low<<jt|this.high>>>(zt=32-jt),this.high<<jt|this.low>>>zt,this.unsigned):bt(this.high<<(jt-=32)|this.low>>>(zt=32-jt),this.low<<jt|this.high>>>zt,this.unsigned)},Ft.rotl=Ft.rotateLeft,Ft.rotateRight=function(jt){var zt;return ft(jt)&&(jt=jt.toInt()),(jt&=63)==0?this:jt===32?bt(this.high,this.low,this.unsigned):jt<32?bt(this.high<<(zt=32-jt)|this.low>>>jt,this.low<<zt|this.high>>>jt,this.unsigned):bt(this.low<<(zt=32-(jt-=32))|this.high>>>jt,this.high<<zt|this.low>>>jt,this.unsigned)},Ft.rotr=Ft.rotateRight,Ft.toSigned=function(){return this.unsigned?bt(this.low,this.high,!1):this},Ft.toUnsigned=function(){return this.unsigned?this:bt(this.low,this.high,!0)},Ft.toBytes=function(jt){return jt?this.toBytesLE():this.toBytesBE()},Ft.toBytesLE=function(){var jt=this.high,zt=this.low;return[255&zt,zt>>>8&255,zt>>>16&255,zt>>>24,255&jt,jt>>>8&255,jt>>>16&255,jt>>>24]},Ft.toBytesBE=function(){var jt=this.high,zt=this.low;return[jt>>>24,jt>>>16&255,jt>>>8&255,255&jt,zt>>>24,zt>>>16&255,zt>>>8&255,255&zt]},ht.fromBytes=function(jt,zt,Yt){return Yt?ht.fromBytesLE(jt,zt):ht.fromBytesBE(jt,zt)},ht.fromBytesLE=function(jt,zt){return new ht(jt[0]|jt[1]<<8|jt[2]<<16|jt[3]<<24,jt[4]|jt[5]<<8|jt[6]<<16|jt[7]<<24,zt)},ht.fromBytesBE=function(jt,zt){return new ht(jt[4]<<24|jt[5]<<16|jt[6]<<8|jt[7],jt[0]<<24|jt[1]<<16|jt[2]<<8|jt[3],zt)},pt.default=ht,"default"in pt?pt.default:pt}({});(at=function(){return ct}.apply(at,[]))!==void 0&&(st.exports=at)},function(st,at,lt){(function(ct){var pt;st.exports=(pt=function(ut){var ht;if(typeof window<"u"&&window.crypto&&(ht=window.crypto),typeof self<"u"&&self.crypto&&(ht=self.crypto),!(ht=!(ht=!(ht=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:ht)&&typeof window<"u"&&window.msCrypto?window.msCrypto:ht)&&ct!==void 0&&ct.crypto?ct.crypto:ht))try{ht=lt(17)}catch{}var ft=Object.create||function(St){return gt.prototype=St,St=new gt,gt.prototype=null,St};function gt(){}var vt={},yt=vt.lib={},mt=yt.Base={extend:function(St){var Pt=ft(this);return St&&Pt.mixIn(St),Pt.hasOwnProperty("init")&&this.init!==Pt.init||(Pt.init=function(){Pt.$super.init.apply(this,arguments)}),(Pt.init.prototype=Pt).$super=this,Pt},create:function(){var St=this.extend();return St.init.apply(St,arguments),St},init:function(){},mixIn:function(St){for(var Pt in St)St.hasOwnProperty(Pt)&&(this[Pt]=St[Pt]);St.hasOwnProperty("toString")&&(this.toString=St.toString)},clone:function(){return this.init.prototype.extend(this)}},Et=yt.WordArray=mt.extend({init:function(St,Pt){St=this.words=St||[],this.sigBytes=Pt??4*St.length},toString:function(St){return(St||Ct).stringify(this)},concat:function(St){var Pt=this.words,Ot=St.words,Ut=this.sigBytes,Bt=St.sigBytes;if(this.clamp(),Ut%4)for(var xt=0;xt<Bt;xt++){var At=Ot[xt>>>2]>>>24-xt%4*8&255;Pt[Ut+xt>>>2]|=At<<24-(Ut+xt)%4*8}else for(var Mt=0;Mt<Bt;Mt+=4)Pt[Ut+Mt>>>2]=Ot[Mt>>>2];return this.sigBytes+=Bt,this},clamp:function(){var St=this.words,Pt=this.sigBytes;St[Pt>>>2]&=4294967295<<32-Pt%4*8,St.length=ut.ceil(Pt/4)},clone:function(){var St=mt.clone.call(this);return St.words=this.words.slice(0),St},random:function(St){for(var Pt=[],Ot=0;Ot<St;Ot+=4)Pt.push(function(){if(ht){if(typeof ht.getRandomValues=="function")try{return ht.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof ht.randomBytes=="function")try{return ht.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new Et.init(Pt,St)}}),bt=vt.enc={},Ct=bt.Hex={stringify:function(St){for(var Pt=St.words,Ot=St.sigBytes,Ut=[],Bt=0;Bt<Ot;Bt++){var xt=Pt[Bt>>>2]>>>24-Bt%4*8&255;Ut.push((xt>>>4).toString(16)),Ut.push((15&xt).toString(16))}return Ut.join("")},parse:function(St){for(var Pt=St.length,Ot=[],Ut=0;Ut<Pt;Ut+=2)Ot[Ut>>>3]|=parseInt(St.substr(Ut,2),16)<<24-Ut%8*4;return new Et.init(Ot,Pt/2)}},Tt=bt.Latin1={stringify:function(St){for(var Pt=St.words,Ot=St.sigBytes,Ut=[],Bt=0;Bt<Ot;Bt++){var xt=Pt[Bt>>>2]>>>24-Bt%4*8&255;Ut.push(String.fromCharCode(xt))}return Ut.join("")},parse:function(St){for(var Pt=St.length,Ot=[],Ut=0;Ut<Pt;Ut++)Ot[Ut>>>2]|=(255&St.charCodeAt(Ut))<<24-Ut%4*8;return new Et.init(Ot,Pt)}},wt=bt.Utf8={stringify:function(St){try{return decodeURIComponent(escape(Tt.stringify(St)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(St){return Tt.parse(unescape(encodeURIComponent(St)))}},Rt=yt.BufferedBlockAlgorithm=mt.extend({reset:function(){this._data=new Et.init,this._nDataBytes=0},_append:function(St){typeof St=="string"&&(St=wt.parse(St)),this._data.concat(St),this._nDataBytes+=St.sigBytes},_process:function(St){var Pt,Ot=this._data,Ut=Ot.words,Bt=Ot.sigBytes,xt=this.blockSize,At=Bt/(4*xt),Mt=(At=St?ut.ceil(At):ut.max((0|At)-this._minBufferSize,0))*xt;if(St=ut.min(4*Mt,Bt),Mt){for(var Nt=0;Nt<Mt;Nt+=xt)this._doProcessBlock(Ut,Nt);Pt=Ut.splice(0,Mt),Ot.sigBytes-=St}return new Et.init(Pt,St)},clone:function(){var St=mt.clone.call(this);return St._data=this._data.clone(),St},_minBufferSize:0}),It=(yt.Hasher=Rt.extend({cfg:mt.extend(),init:function(St){this.cfg=this.cfg.extend(St),this.reset()},reset:function(){Rt.reset.call(this),this._doReset()},update:function(St){return this._append(St),this._process(),this},finalize:function(St){return St&&this._append(St),this._doFinalize()},blockSize:16,_createHelper:function(St){return function(Pt,Ot){return new St.init(Ot).finalize(Pt)}},_createHmacHelper:function(St){return function(Pt,Ot){return new It.HMAC.init(St,Ot).finalize(Pt)}}}),vt.algo={});return vt}(Math),pt)}).call(this,lt(12))},function(st,at,lt){st.exports=function(ct){for(var pt=ct,ut=pt.lib.BlockCipher,ht=pt.algo,ft=[],gt=[],vt=[],yt=[],mt=[],Et=[],bt=[],Ct=[],Tt=[],wt=[],Rt=[],It=0;It<256;It++)Rt[It]=It<128?It<<1:It<<1^283;var St=0,Pt=0;for(It=0;It<256;It++){var Ot=Pt^Pt<<1^Pt<<2^Pt<<3^Pt<<4;Ot=Ot>>>8^255&Ot^99,ft[St]=Ot,gt[Ot]=St;var Ut=Rt[St],Bt=Rt[Ut],xt=Rt[Bt],At=257*Rt[Ot]^16843008*Ot;vt[St]=At<<24|At>>>8,yt[St]=At<<16|At>>>16,mt[St]=At<<8|At>>>24,Et[St]=At,At=16843009*xt^65537*Bt^257*Ut^16843008*St,bt[Ot]=At<<24|At>>>8,Ct[Ot]=At<<16|At>>>16,Tt[Ot]=At<<8|At>>>24,wt[Ot]=At,St?(St=Ut^Rt[Rt[Rt[xt^Ut]]],Pt^=Rt[Rt[Pt]]):St=Pt=1}var Mt=[0,1,2,4,8,16,32,64,128,27,54],Nt=ht.AES=ut.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var $t=this._keyPriorReset=this._key,Ft=$t.words,jt=$t.sigBytes/4,zt=4*((this._nRounds=jt+6)+1),Yt=this._keySchedule=[],Kt=0;Kt<zt;Kt++)Kt<jt?Yt[Kt]=Ft[Kt]:(rr=Yt[Kt-1],Kt%jt?jt>6&&Kt%jt==4&&(rr=ft[rr>>>24]<<24|ft[rr>>>16&255]<<16|ft[rr>>>8&255]<<8|ft[255&rr]):(rr=ft[(rr=rr<<8|rr>>>24)>>>24]<<24|ft[rr>>>16&255]<<16|ft[rr>>>8&255]<<8|ft[255&rr],rr^=Mt[Kt/jt|0]<<24),Yt[Kt]=Yt[Kt-jt]^rr);for(var er=this._invKeySchedule=[],ir=0;ir<zt;ir++){if(Kt=zt-ir,ir%4)var rr=Yt[Kt];else rr=Yt[Kt-4];er[ir]=ir<4||Kt<=4?rr:bt[ft[rr>>>24]]^Ct[ft[rr>>>16&255]]^Tt[ft[rr>>>8&255]]^wt[ft[255&rr]]}}},encryptBlock:function($t,Ft){this._doCryptBlock($t,Ft,this._keySchedule,vt,yt,mt,Et,ft)},decryptBlock:function($t,Ft){var jt=$t[Ft+1];$t[Ft+1]=$t[Ft+3],$t[Ft+3]=jt,this._doCryptBlock($t,Ft,this._invKeySchedule,bt,Ct,Tt,wt,gt),jt=$t[Ft+1],$t[Ft+1]=$t[Ft+3],$t[Ft+3]=jt},_doCryptBlock:function($t,Ft,jt,zt,Yt,Kt,er,ir){for(var rr=this._nRounds,lr=$t[Ft]^jt[0],nr=$t[Ft+1]^jt[1],hr=$t[Ft+2]^jt[2],vr=$t[Ft+3]^jt[3],yr=4,Cr=1;Cr<rr;Cr++){var or=zt[lr>>>24]^Yt[nr>>>16&255]^Kt[hr>>>8&255]^er[255&vr]^jt[yr++],ur=zt[nr>>>24]^Yt[hr>>>16&255]^Kt[vr>>>8&255]^er[255&lr]^jt[yr++],pr=zt[hr>>>24]^Yt[vr>>>16&255]^Kt[lr>>>8&255]^er[255&nr]^jt[yr++],Er=zt[vr>>>24]^Yt[lr>>>16&255]^Kt[nr>>>8&255]^er[255&hr]^jt[yr++];lr=or,nr=ur,hr=pr,vr=Er}or=(ir[lr>>>24]<<24|ir[nr>>>16&255]<<16|ir[hr>>>8&255]<<8|ir[255&vr])^jt[yr++],ur=(ir[nr>>>24]<<24|ir[hr>>>16&255]<<16|ir[vr>>>8&255]<<8|ir[255&lr])^jt[yr++],pr=(ir[hr>>>24]<<24|ir[vr>>>16&255]<<16|ir[lr>>>8&255]<<8|ir[255&nr])^jt[yr++],Er=(ir[vr>>>24]<<24|ir[lr>>>16&255]<<16|ir[nr>>>8&255]<<8|ir[255&hr])^jt[yr++],$t[Ft]=or,$t[Ft+1]=ur,$t[Ft+2]=pr,$t[Ft+3]=Er},keySize:8});return pt.AES=ut._createHelper(Nt),ct.AES}(lt(2),(lt(18),lt(4),lt(13),lt(21)))},function(st,at,lt){st.exports=function(ct){for(var pt=Math,ut=ct,ht=ut.lib,ft=ht.WordArray,gt=ht.Hasher,vt=ut.algo,yt=[],mt=0;mt<64;mt++)yt[mt]=4294967296*pt.abs(pt.sin(mt+1))|0;var Et=vt.MD5=gt.extend({_doReset:function(){this._hash=new ft.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Rt,It){for(var St=0;St<16;St++){var Pt=It+St,Ot=Rt[Pt];Rt[Pt]=16711935&(Ot<<8|Ot>>>24)|4278255360&(Ot<<24|Ot>>>8)}var Ut=this._hash.words,Bt=Rt[It+0],xt=Rt[It+1],At=Rt[It+2],Mt=Rt[It+3],Nt=Rt[It+4],$t=Rt[It+5],Ft=Rt[It+6],jt=Rt[It+7],zt=Rt[It+8],Yt=Rt[It+9],Kt=Rt[It+10],er=Rt[It+11],ir=Rt[It+12],rr=Rt[It+13],lr=Rt[It+14],nr=Rt[It+15],hr=Ut[0],vr=Ut[1],yr=Ut[2],Cr=Ut[3];hr=bt(hr,vr,yr,Cr,Bt,7,yt[0]),Cr=bt(Cr,hr,vr,yr,xt,12,yt[1]),yr=bt(yr,Cr,hr,vr,At,17,yt[2]),vr=bt(vr,yr,Cr,hr,Mt,22,yt[3]),hr=bt(hr,vr,yr,Cr,Nt,7,yt[4]),Cr=bt(Cr,hr,vr,yr,$t,12,yt[5]),yr=bt(yr,Cr,hr,vr,Ft,17,yt[6]),vr=bt(vr,yr,Cr,hr,jt,22,yt[7]),hr=bt(hr,vr,yr,Cr,zt,7,yt[8]),Cr=bt(Cr,hr,vr,yr,Yt,12,yt[9]),yr=bt(yr,Cr,hr,vr,Kt,17,yt[10]),vr=bt(vr,yr,Cr,hr,er,22,yt[11]),hr=bt(hr,vr,yr,Cr,ir,7,yt[12]),Cr=bt(Cr,hr,vr,yr,rr,12,yt[13]),yr=bt(yr,Cr,hr,vr,lr,17,yt[14]),hr=Ct(hr,vr=bt(vr,yr,Cr,hr,nr,22,yt[15]),yr,Cr,xt,5,yt[16]),Cr=Ct(Cr,hr,vr,yr,Ft,9,yt[17]),yr=Ct(yr,Cr,hr,vr,er,14,yt[18]),vr=Ct(vr,yr,Cr,hr,Bt,20,yt[19]),hr=Ct(hr,vr,yr,Cr,$t,5,yt[20]),Cr=Ct(Cr,hr,vr,yr,Kt,9,yt[21]),yr=Ct(yr,Cr,hr,vr,nr,14,yt[22]),vr=Ct(vr,yr,Cr,hr,Nt,20,yt[23]),hr=Ct(hr,vr,yr,Cr,Yt,5,yt[24]),Cr=Ct(Cr,hr,vr,yr,lr,9,yt[25]),yr=Ct(yr,Cr,hr,vr,Mt,14,yt[26]),vr=Ct(vr,yr,Cr,hr,zt,20,yt[27]),hr=Ct(hr,vr,yr,Cr,rr,5,yt[28]),Cr=Ct(Cr,hr,vr,yr,At,9,yt[29]),yr=Ct(yr,Cr,hr,vr,jt,14,yt[30]),hr=Tt(hr,vr=Ct(vr,yr,Cr,hr,ir,20,yt[31]),yr,Cr,$t,4,yt[32]),Cr=Tt(Cr,hr,vr,yr,zt,11,yt[33]),yr=Tt(yr,Cr,hr,vr,er,16,yt[34]),vr=Tt(vr,yr,Cr,hr,lr,23,yt[35]),hr=Tt(hr,vr,yr,Cr,xt,4,yt[36]),Cr=Tt(Cr,hr,vr,yr,Nt,11,yt[37]),yr=Tt(yr,Cr,hr,vr,jt,16,yt[38]),vr=Tt(vr,yr,Cr,hr,Kt,23,yt[39]),hr=Tt(hr,vr,yr,Cr,rr,4,yt[40]),Cr=Tt(Cr,hr,vr,yr,Bt,11,yt[41]),yr=Tt(yr,Cr,hr,vr,Mt,16,yt[42]),vr=Tt(vr,yr,Cr,hr,Ft,23,yt[43]),hr=Tt(hr,vr,yr,Cr,Yt,4,yt[44]),Cr=Tt(Cr,hr,vr,yr,ir,11,yt[45]),yr=Tt(yr,Cr,hr,vr,nr,16,yt[46]),hr=wt(hr,vr=Tt(vr,yr,Cr,hr,At,23,yt[47]),yr,Cr,Bt,6,yt[48]),Cr=wt(Cr,hr,vr,yr,jt,10,yt[49]),yr=wt(yr,Cr,hr,vr,lr,15,yt[50]),vr=wt(vr,yr,Cr,hr,$t,21,yt[51]),hr=wt(hr,vr,yr,Cr,ir,6,yt[52]),Cr=wt(Cr,hr,vr,yr,Mt,10,yt[53]),yr=wt(yr,Cr,hr,vr,Kt,15,yt[54]),vr=wt(vr,yr,Cr,hr,xt,21,yt[55]),hr=wt(hr,vr,yr,Cr,zt,6,yt[56]),Cr=wt(Cr,hr,vr,yr,nr,10,yt[57]),yr=wt(yr,Cr,hr,vr,Ft,15,yt[58]),vr=wt(vr,yr,Cr,hr,rr,21,yt[59]),hr=wt(hr,vr,yr,Cr,Nt,6,yt[60]),Cr=wt(Cr,hr,vr,yr,er,10,yt[61]),yr=wt(yr,Cr,hr,vr,At,15,yt[62]),vr=wt(vr,yr,Cr,hr,Yt,21,yt[63]),Ut[0]=Ut[0]+hr|0,Ut[1]=Ut[1]+vr|0,Ut[2]=Ut[2]+yr|0,Ut[3]=Ut[3]+Cr|0},_doFinalize:function(){var Rt=this._data,It=Rt.words,St=8*this._nDataBytes,Pt=8*Rt.sigBytes;It[Pt>>>5]|=128<<24-Pt%32;var Ot=pt.floor(St/4294967296),Ut=St;It[15+(Pt+64>>>9<<4)]=16711935&(Ot<<8|Ot>>>24)|4278255360&(Ot<<24|Ot>>>8),It[14+(Pt+64>>>9<<4)]=16711935&(Ut<<8|Ut>>>24)|4278255360&(Ut<<24|Ut>>>8),Rt.sigBytes=4*(It.length+1),this._process();for(var Bt=this._hash,xt=Bt.words,At=0;At<4;At++){var Mt=xt[At];xt[At]=16711935&(Mt<<8|Mt>>>24)|4278255360&(Mt<<24|Mt>>>8)}return Bt},clone:function(){var Rt=gt.clone.call(this);return Rt._hash=this._hash.clone(),Rt}});function bt(Rt,It,St,Pt,Ot,Ut,Bt){var xt=Rt+(It&St|~It&Pt)+Ot+Bt;return(xt<<Ut|xt>>>32-Ut)+It}function Ct(Rt,It,St,Pt,Ot,Ut,Bt){var xt=Rt+(It&Pt|St&~Pt)+Ot+Bt;return(xt<<Ut|xt>>>32-Ut)+It}function Tt(Rt,It,St,Pt,Ot,Ut,Bt){var xt=Rt+(It^St^Pt)+Ot+Bt;return(xt<<Ut|xt>>>32-Ut)+It}function wt(Rt,It,St,Pt,Ot,Ut,Bt){var xt=Rt+(St^(It|~Pt))+Ot+Bt;return(xt<<Ut|xt>>>32-Ut)+It}return ut.MD5=gt._createHelper(Et),ut.HmacMD5=gt._createHmacHelper(Et),ct.MD5}(lt(2))},function(st,at,lt){function ct(ht){if(ut[ht])return ut[ht].exports;var ft=ut[ht]={i:ht,l:!1,exports:{}};return pt[ht].call(ft.exports,ft,ft.exports,ct),ft.l=!0,ft.exports}var pt,ut;st.exports=(pt=[function(ht,ft,gt){var vt;Object.defineProperty(ft,"__esModule",{value:!0}),ft.E_CLIENT_TYPE=ft.ENUM_LOG_LEVEL=ft.ENUM_REMOTE_TYPE=ft.ZEGO_ENV=ft.ZEGO_BROWSER_TYPE=void 0,(vt=ft.ZEGO_BROWSER_TYPE||(ft.ZEGO_BROWSER_TYPE={}))[vt.IE=0]="IE",vt[vt.FIREFOX=1]="FIREFOX",vt[vt.CHROME=2]="CHROME",vt[vt.SAFARI=3]="SAFARI",vt[vt.OPERA=4]="OPERA",vt[vt.WEIXIN=5]="WEIXIN",vt[vt.WEIXINMINI=6]="WEIXINMINI",vt[vt.UNKOWN=7]="UNKOWN",(vt=ft.ZEGO_ENV||(ft.ZEGO_ENV={}))[vt.BROWSER=0]="BROWSER",vt[vt.WEIXINMINI=1]="WEIXINMINI",(vt=ft.ENUM_REMOTE_TYPE||(ft.ENUM_REMOTE_TYPE={}))[vt.DISABLE=0]="DISABLE",vt[vt.WEBSOCKET=1]="WEBSOCKET",vt[vt.HTTPS=2]="HTTPS",ft.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(vt=ft.E_CLIENT_TYPE||(ft.E_CLIENT_TYPE={}))[vt.ClientType_None=0]="ClientType_None",vt[vt.ClientType_H5=1]="ClientType_H5",vt[vt.ClientType_SmallPragram=2]="ClientType_SmallPragram",vt[vt.ClientType_Webrtc=3]="ClientType_Webrtc"},function(ht,ft,gt){function vt(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}Object.defineProperty(ft,"__esModule",{value:!0}),ft.LoggerStateCenter=void 0,vt.getInstance=function(){return vt.instance||(vt.instance=new vt).init(),vt.instance},vt.prototype.init=function(){},Object.defineProperty(vt.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(yt){this._testEnvironment=yt},enumerable:!1,configurable:!0}),Object.defineProperty(vt.prototype,"ENV",{get:function(){return this._ENV},set:function(yt){this._ENV=yt},enumerable:!1,configurable:!0}),Object.defineProperty(vt.prototype,"debug",{get:function(){return this._debug},set:function(yt){this._debug=yt},enumerable:!1,configurable:!0}),vt.instance=new vt,ft.LoggerStateCenter=vt},function(ht,ft,gt){Object.defineProperty(ft,"__esModule",{value:!0}),ft.createZegoWebSocket=ft.ZegoWeiXinMiniWebSocket=void 0;var vt=gt(0),yt=(mt.prototype.init=function(){var Et=this;this._websocket&&(this.readyState=0,this._websocket.onOpen(function(bt){Et.readyState=Et._websocket.readyState,typeof Et.onopen=="function"&&(Et.onopen(bt),Et._websocket.onClose(function(Ct){Et.readyState=Et._websocket.readyState,typeof Et.onclose=="function"&&Et.onclose(Ct)}),Et._websocket.onMessage(function(Ct){typeof Et.onmessage=="function"&&Et.onmessage(Ct)}))}),this._websocket.onError(function(bt){Et.readyState=Et._websocket.readyState,typeof Et.onerror=="function"&&Et.onerror(bt)}))},mt.prototype.onopen=function(Et){},mt.prototype.onerror=function(Et){},mt.prototype.onclose=function(Et){},mt.prototype.onmessage=function(Et){},mt.prototype.send=function(Et){this._websocket&&this._websocket.send({data:Et})},mt.prototype.close=function(){this._websocket&&this._websocket.close()},mt);function mt(Et,bt){this.url=Et,this.readyState=3,this._websocket=wx.connectSocket({url:Et}),this.init()}ft.ZegoWeiXinMiniWebSocket=yt,ft.createZegoWebSocket=function(Et,bt){return new(bt%2===vt.ZEGO_ENV.BROWSER?WebSocket:yt)(Et)}},function(ht,ft,gt){Object.defineProperty(ft,"__esModule",{value:!0}),ft.LoggerStateCenter=ft.createZegoWebSocket=ft.ZegoDataReport=ft.ZegoLogger=void 0;var vt=gt(1),yt=(Object.defineProperty(ft,"LoggerStateCenter",{enumerable:!0,get:function(){return vt.LoggerStateCenter}}),gt(2)),mt=(Object.defineProperty(ft,"createZegoWebSocket",{enumerable:!0,get:function(){return yt.createZegoWebSocket}}),gt(4)),Et=(Object.defineProperty(ft,"ZegoDataReport",{enumerable:!0,get:function(){return mt.ZegoDataReport}}),gt(5));Object.defineProperty(ft,"ZegoLogger",{enumerable:!0,get:function(){return Et.ZegoLogger}})},function(ht,ft,gt){var vt=this&&this.__assign||function(){return(vt=Object.assign||function(Et){for(var bt,Ct=1,Tt=arguments.length;Ct<Tt;Ct++)for(var wt in bt=arguments[Ct])Object.prototype.hasOwnProperty.call(bt,wt)&&(Et[wt]=bt[wt]);return Et}).apply(this,arguments)},yt=(Object.defineProperty(ft,"__esModule",{value:!0}),ft.ZegoDataReport=void 0,mt.prototype.newReport=function(Et,bt){this.dataStatistics[Et]={event_time:Date.now(),time_consumed:0,seq:Et,error:0,message:"success",event:bt,events:[]}},mt.prototype.addMsgExt=function(Et,bt){this.dataStatistics[Et]?this.dataStatistics[Et].msg_ext=bt:console.warn(Et+" not exist")},mt.prototype.addMsgInfo=function(Et,bt){this.dataStatistics[Et]?Object.assign(this.dataStatistics[Et],bt):console.warn(Et+" not exist")},mt.prototype.eventStart=function(Et,bt){this.dataStatistics[Et]?this.dataStatistics[Et].events!=null?this.dataStatistics[Et].events.push({event:bt,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},mt.prototype.eventEnd=function(Et,bt,Ct){if(this.dataStatistics[Et]){var Tt=this.dataStatistics[Et].events;if(Tt&&Tt.length!==0){for(var wt=Tt.length-1;0<=wt;wt--)if(Tt[wt].event==bt&&Tt[wt].time_consumed==0){Tt[wt].time_consumed=Date.now()-Tt[wt].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},mt.prototype.eventEndWithMsg=function(Et,bt,Ct){if(this.dataStatistics[Et]){var Tt=this.dataStatistics[Et].events;if(Tt){for(var wt=Tt.length-1;0<=wt;wt--)if(Tt[wt].event==bt&&Tt[wt].time_consumed==0){Tt[wt].time_consumed=Date.now()-Tt[wt].event_time,Tt[wt].msg_ext==null&&(Tt[wt].msg_ext={}),Tt[wt].msg_ext=vt({},Ct);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},mt.prototype.eventEndWithMsgInfo=function(Et,bt,Ct){if(this.dataStatistics[Et]){var Tt=this.dataStatistics[Et].events;if(Tt){for(var wt=Tt.length-1;0<=wt;wt--)if(Tt[wt].event==bt&&Tt[wt].time_consumed==0){Tt[wt].time_consumed=Date.now()-Tt[wt].event_time,Object.assign(Tt[wt],Ct);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},mt.prototype.addEventInfo=function(Et,bt,Ct,Tt){if(this.dataStatistics[Et]){var wt=this.dataStatistics[Et].events;if(wt!=null){for(var Rt=wt.length-1;0<=Rt;Rt--)if(wt[Rt].event==bt&&wt[Rt].time_consumed!=null){wt[Rt].msg_ext==null?wt[Rt].msg_ext={}:wt[Rt].msg_ext&&(wt[Rt].msg_ext[Ct]=Tt);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},mt.prototype.addEventMsg=function(Et,bt,Ct,Tt){if(this.dataStatistics[Et]){var wt=this.dataStatistics[Et].events;if(wt!=null){for(var Rt=wt.length-1;0<=Rt;Rt--)if(wt[Rt].event==bt){wt[Rt][Ct]=Tt;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},mt.prototype.addEvent=function(Et,bt,Ct){this.dataStatistics[Et]?this.dataStatistics[Et].events&&(Ct?this.dataStatistics[Et].events.push({event:bt,event_time:Date.now(),msg_ext:Ct}):this.dataStatistics[Et].events.push({event:bt,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},mt.prototype.uploadReport=function(Et,bt,Ct,Tt){var wt=this.dataStatistics[Et];wt!=null&&(bt&&(wt.event=bt),wt.time_consumed=Date.now()-wt.event_time,Ct&&this.addMsgInfo(Et,{error:Ct.code,message:Ct.message||Ct.msg+" "+(Tt||"")}),this.logger.report(wt),delete this.dataStatistics[Et])},mt);function mt(Et){this.dataStatistics={},this.logger=Et}ft.ZegoDataReport=yt},function(ht,ft,gt){var vt=this&&this.__assign||function(){return(vt=Object.assign||function(Tt){for(var wt,Rt=1,It=arguments.length;Rt<It;Rt++)for(var St in wt=arguments[Rt])Object.prototype.hasOwnProperty.call(wt,St)&&(Tt[St]=wt[St]);return Tt}).apply(this,arguments)},yt=(Object.defineProperty(ft,"__esModule",{value:!0}),ft.ZegoLogger=void 0,gt(0)),mt=gt(2),Et=gt(1),bt=gt(6);function Ct(Tt){this.logLevel=yt.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=8192,this.existUserID=!1,this.stateCenter=Et.LoggerStateCenter.getInstance(),this.env=Tt}Ct.prototype.setLogLevel=function(Tt){return(Tt=yt.ENUM_LOG_LEVEL[Tt])!==void 0&&(this.logLevel=Tt,!0)},Ct.prototype.setRemoteLogLevel=function(Tt){return(Tt=yt.ENUM_LOG_LEVEL[Tt])!==void 0&&(this.logRemoteLevel=Tt,!0)},Ct.prototype.setSessionInfo=function(Tt,wt,Rt,It,St,Pt){this.appid=Tt,this.roomid=wt,this.sessionid=Rt,this.userid=It,this.userName=St,this.version=Pt},Ct.prototype.report=function(Tt){Tt=this.logReportParamList(yt.ENUM_LOG_LEVEL.REPORT,Tt),this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=yt.ENUM_LOG_LEVEL.REPORT&&console.debug(Tt),this.RemoteLog(yt.ENUM_LOG_LEVEL.REPORT,Tt,!0)},Ct.prototype.debug=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=this.logParamList(yt.ENUM_LOG_LEVEL.DEBUG,Tt.join(""));this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=yt.ENUM_LOG_LEVEL.DEBUG&&console.debug(Rt),this.log(yt.ENUM_LOG_LEVEL.DEBUG,Rt)},Ct.prototype.info=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=this.logParamList(yt.ENUM_LOG_LEVEL.INFO,Tt.join(""));this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=yt.ENUM_LOG_LEVEL.INFO&&console.info(Rt),this.log(yt.ENUM_LOG_LEVEL.INFO,Rt)},Ct.prototype.warn=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=this.logParamList(yt.ENUM_LOG_LEVEL.WARN,Tt.join(""));this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=yt.ENUM_LOG_LEVEL.WARN&&console.warn(Rt),this.log(yt.ENUM_LOG_LEVEL.WARN,Rt)},Ct.prototype.error=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=this.logParamList(yt.ENUM_LOG_LEVEL.ERROR,Tt.join(""));this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=yt.ENUM_LOG_LEVEL.ERROR&&(console.error(Rt),this.env%2===yt.ZEGO_ENV.BROWSER&&window?this.stateCenter.debug&&window.alert(Tt.join("").substr(Tt.join("").indexOf(" ")+1,4500)):this.env%2===yt.ZEGO_ENV.WEIXINMINI&&wx&&this.stateCenter.debug&&wx.showModal({title:"",content:Tt.join("").substr(Tt.join("").indexOf(" ")+1,4500)})),this.log(yt.ENUM_LOG_LEVEL.ERROR,Rt)},Ct.prototype.log=function(Tt,wt){this.logRemoteLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=Tt&&this.RemoteLog(Tt,wt)},Ct.prototype.setLogServer=function(Tt){try{return Tt.startsWith("wss:")?(this.logType=yt.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(Tt)):Tt.startsWith("https:")?(this.logType=yt.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(Tt)):this.logType=yt.ENUM_REMOTE_TYPE.DISABLE,!0}catch(wt){return this.error(JSON.stringify(wt)),!1}},Ct.prototype.stopLogServer=function(){this.logType==yt.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==yt.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=yt.ENUM_REMOTE_TYPE.DISABLE},Ct.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},Ct.prototype.openHttpsLogServer=function(Tt){var wt=this;(this.url=Tt)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval(function(){wt.SendHttpsLog()},this.logUploadInterval)))},Ct.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},Ct.prototype.RemoteLog=function(Tt,wt,Rt){if(Rt===void 0&&(Rt=!1),this.url!=""){if(this.logType==yt.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(Tt,wt);else if(this.logType==yt.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(Tt,wt,Rt);else if(this.logLevel!==yt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=Tt)for(this.logCacheSend.push(wt);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()}},Ct.prototype.RemoteWebSocketLog=function(Tt,wt){if(typeof wt=="string"&&4e3<wt.length)console.info("log over maximum, ignore");else if(this.websocket==null||this.websocket.readyState==2||this.websocket.readyState==3){var Rt=this.url;this.url="",this.setLogServer(Rt),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(wt)}else if(this.websocket.readyState==0)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(wt);else if(this.websocket.readyState==1)if(0<this.logCacheSend.length){for(var It="",St=0;St<this.logCacheSend.length;St++){4e3<(It+this.logCacheSend[St]).length&&(this.websocket.send(It),It="");var Pt=JSON.parse(this.logCacheSend[St]);Pt=vt(vt({},Pt),{userid:Pt.userid||this.userid,roomid:Pt.roomid||this.roomid,userName:Pt.userName||this.userName}),It=It+JSON.stringify(Pt)+`
`}wt=It+wt,this.logCacheSend=[],this.websocket.send(wt)}else this.websocket.send(wt);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(wt)},Ct.prototype.RemoteHttpsLog=function(Tt,wt,Rt){this.logCacheSend.push(wt),(this.logCacheSend.length>=this.logCacheMax||Rt===!0)&&this.SendHttpsLog()},Ct.prototype.logParamList=function(Tt,wt){var Rt={time:Rt=bt.getCurrentTime(),level:Tt,action:(wt=[wt.substr(0,wt.indexOf(" "))||wt,wt.substr(wt.indexOf(" ")+1,4500)||wt])[0],content:wt[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(Rt)},Ct.prototype.logReportParamList=function(Tt,wt){var Rt=bt.getCurrentTime();return wt=vt(vt({},wt),{time:Rt,level:Tt,console:this.env%2===yt.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+wt.event_time+"_"+wt.seq}),JSON.stringify(wt)},Ct.prototype.openWebSocketLogServer=function(Tt){this.url!=Tt&&(this.url=Tt)&&(this.stopWebSocketServer(),this.websocket=mt.createZegoWebSocket(Tt,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var wt=[],Rt=0;Rt<arguments.length;Rt++)wt[Rt]=arguments[Rt];console.warn("onclose   websocket error:",wt)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var wt=[],Rt=0;Rt<arguments.length;Rt++)wt[Rt]=arguments[Rt];console.warn("open log websocket error:",wt)})},Ct.prototype.SendHttpsLog=function(){this.logCacheSend.length!=0&&(this.env%2===yt.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},Ct.prototype.SendHttpsLogWeb=function(){var Tt=this,wt=this.logCacheSend.join(`
`),Rt=new XMLHttpRequest;Rt.onreadystatechange=function(){if(Rt.readyState==4)if(Rt.status==200){if(Rt.responseText.length!=0)try{var It=JSON.parse(Rt.responseText).interval;typeof It=="number"&&Tt.logUploadInterval!==It&&(Tt.timeInterval=It,Tt.openHttpsLogServer(Tt.url))}catch(St){console.log("send result failed "+St)}}else console.log("send failed "+Rt.status)},Rt.open("POST",this.url,!0),this.env==0?Rt.send(wt):this.env==2&&(Rt.setRequestHeader("content-type","application/json"),Rt.send(JSON.stringify({user_id:this.userid,log:wt}))),this.logCacheSend=[]},Ct.prototype.SendHttpsLogWeChatMini=function(){var Tt=this;if(!this.existUserID){if(!this.userid)return void console.log("no userid");this.logCacheSend.forEach(function(Rt,It){(Rt=JSON.parse(Rt))&&Rt.userid==""?(Rt.userid=Tt.userid,Rt.id_name=Rt.id_name||Tt.userid,Rt.roomid=Rt.roomid||Tt.roomid,Rt.userName=Rt.userName||Tt.userName,Tt.logCacheSend[It]=JSON.stringify(Rt)):Tt.existUserID=!0})}var wt=this.logCacheSend.join(`
`);wt=this.env==1?wt:JSON.stringify({user_id:this.userid,log:wt}),wx.request({url:this.url,data:wt,method:"POST",success:function(Rt){Rt.data.length!=0&&typeof(Rt=Rt&&Rt.data&&Rt.data.interval)=="number"&&Tt.logUploadInterval!==Rt&&(Tt.timeInterval=Rt,Tt.openHttpsLogServer(Tt.url))},fail:function(Rt){console.log("send failed "+Rt.statusCode)}}),this.logCacheSend=[]},ft.ZegoLogger=Ct},function(ht,ft,gt){Object.defineProperty(ft,"__esModule",{value:!0}),ft.getCurrentTime=ft.getCurrentEnv=ft.getBrowser=void 0;var vt=gt(0),yt=(ft.getBrowser=function(){var mt=window.navigator.userAgent,Et=window.ActiveXObject!=null&&mt.indexOf("MSIE")!=-1,bt=mt.indexOf("Firefox")!=-1,Ct=window.opr!=null,Tt=mt.indexOf("Chrome")&&window.chrome,wt=mt.indexOf("Safari")!=-1&&mt.indexOf("Version")!=-1;return mt=mt.toLowerCase().match(/MicroMessenger/i)&&mt.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",Et?vt.ZEGO_BROWSER_TYPE.IE:bt?vt.ZEGO_BROWSER_TYPE.FIREFOX:Ct?vt.ZEGO_BROWSER_TYPE.OPERA:Tt?vt.ZEGO_BROWSER_TYPE.CHROME:wt?vt.ZEGO_BROWSER_TYPE.SAFARI:mt?vt.ZEGO_BROWSER_TYPE.WEIXIN:vt.ZEGO_BROWSER_TYPE.UNKOWN},ft.getCurrentEnv=function(){var mt=window.navigator.userAgent;return new Promise(function(Et){mt.indexOf("MicroMessage")==-1?Et(vt.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv(function(bt){bt.miniprogram})})},["00","01","02","03","04","05","06","07","08","09"]);ft.getCurrentTime=function(){var mt=new Date;return[mt.getFullYear()+"/",(yt[mt.getMonth()+1]||mt.getMonth()+1)+"/",(yt[mt.getDate()]||mt.getDate())+" ",(yt[mt.getHours()]||mt.getHours())+":",(yt[mt.getMinutes()]||mt.getMinutes())+":",yt[mt.getSeconds()]||mt.getSeconds(),"."+mt.getTime()%1e3].join("")}}],ut={},ct.m=pt,ct.c=ut,ct.d=function(ht,ft,gt){ct.o(ht,ft)||Object.defineProperty(ht,ft,{enumerable:!0,get:gt})},ct.r=function(ht){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ht,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ht,"__esModule",{value:!0})},ct.t=function(ht,ft){if(1&ft&&(ht=ct(ht)),8&ft||4&ft&&typeof ht=="object"&&ht&&ht.__esModule)return ht;var gt=Object.create(null);if(ct.r(gt),Object.defineProperty(gt,"default",{enumerable:!0,value:ht}),2&ft&&typeof ht!="string")for(var vt in ht)ct.d(gt,vt,function(yt){return ht[yt]}.bind(null,vt));return gt},ct.n=function(ht){var ft=ht&&ht.__esModule?function(){return ht.default}:function(){return ht};return ct.d(ft,"a",ft),ft},ct.o=function(ht,ft){return Object.prototype.hasOwnProperty.call(ht,ft)},ct.p="",ct(ct.s=3))},function(st,at,lt){st.exports=lt(2).enc.Utf8},function(st,at){st.exports=rt},function(st,at,lt){at.byteLength=function(yt){return 3*((yt=vt(yt))[0]+(yt=yt[1]))/4-yt},at.toByteArray=function(yt){var mt,Et,bt=(Ct=vt(yt))[0],Ct=Ct[1],Tt=new ut(function(It,St){return 3*(It+St)/4-St}(bt,Ct)),wt=0,Rt=0<Ct?bt-4:bt;for(Et=0;Et<Rt;Et+=4)mt=pt[yt.charCodeAt(Et)]<<18|pt[yt.charCodeAt(Et+1)]<<12|pt[yt.charCodeAt(Et+2)]<<6|pt[yt.charCodeAt(Et+3)],Tt[wt++]=mt>>16&255,Tt[wt++]=mt>>8&255,Tt[wt++]=255&mt;return Ct===2&&(mt=pt[yt.charCodeAt(Et)]<<2|pt[yt.charCodeAt(Et+1)]>>4,Tt[wt++]=255&mt),Ct===1&&(mt=pt[yt.charCodeAt(Et)]<<10|pt[yt.charCodeAt(Et+1)]<<4|pt[yt.charCodeAt(Et+2)]>>2,Tt[wt++]=mt>>8&255,Tt[wt++]=255&mt),Tt},at.fromByteArray=function(yt){for(var mt,Et=yt.length,bt=Et%3,Ct=[],Tt=0,wt=Et-bt;Tt<wt;Tt+=16383)Ct.push(function(Rt,It,St){for(var Pt,Ot=[],Ut=It;Ut<St;Ut+=3)Pt=(Rt[Ut]<<16&16711680)+(Rt[Ut+1]<<8&65280)+(255&Rt[Ut+2]),Ot.push(function(Bt){return ct[Bt>>18&63]+ct[Bt>>12&63]+ct[Bt>>6&63]+ct[63&Bt]}(Pt));return Ot.join("")}(yt,Tt,wt<Tt+16383?wt:Tt+16383));return bt==1?(mt=yt[Et-1],Ct.push(ct[mt>>2]+ct[mt<<4&63]+"==")):bt==2&&(mt=(yt[Et-2]<<8)+yt[Et-1],Ct.push(ct[mt>>10]+ct[mt>>4&63]+ct[mt<<2&63]+"=")),Ct.join("")};for(var ct=[],pt=[],ut=typeof Uint8Array<"u"?Uint8Array:Array,ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ft=0,gt=ht.length;ft<gt;++ft)ct[ft]=ht[ft],pt[ht.charCodeAt(ft)]=ft;function vt(yt){var mt=yt.length;if(0<mt%4)throw new Error("Invalid string. Length must be a multiple of 4");return mt=(yt=(yt=yt.indexOf("="))===-1?mt:yt)===mt?0:4-yt%4,[yt,mt]}pt["-".charCodeAt(0)]=62,pt["_".charCodeAt(0)]=63},function(st,at,lt){function ct(yt){if(vt[yt])return vt[yt].exports;var mt=vt[yt]={i:yt,l:!1,exports:{}};return gt[yt].call(mt.exports,mt,mt.exports,ct),mt.l=!0,mt.exports}var pt,ut,ht,ft,gt,vt;st.exports=(pt=lt(11),ut=lt(4),ht=lt(3),ft=lt(6),vt={},ct.m=gt=[function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.LinkedList=mt.ListNode=mt.ENUM_CONNECT_STATE=mt.ENUM_NETWORK_STATE=mt.SOCKET_DISCONNECT=mt.errorList=mt.Queue=mt.getSeq=mt.E_CLIENT_TYPE=mt.ENUM_LOG_LEVEL=mt.ENUM_REMOTE_TYPE=mt.ZEGO_BROWSER_TYPE=mt.ZEGO_ENV=mt.PROTO_VERSION=void 0,mt.PROTO_VERSION="1.0.1",(Ct=mt.ZEGO_ENV||(mt.ZEGO_ENV={}))[Ct.BROWSER=0]="BROWSER",Ct[Ct.WEIXINMINI=1]="WEIXINMINI",(Ct=mt.ZEGO_BROWSER_TYPE||(mt.ZEGO_BROWSER_TYPE={}))[Ct.IE=0]="IE",Ct[Ct.FIREFOX=1]="FIREFOX",Ct[Ct.CHROME=2]="CHROME",Ct[Ct.SAFARI=3]="SAFARI",Ct[Ct.OPERA=4]="OPERA",Ct[Ct.WEIXIN=5]="WEIXIN",Ct[Ct.WEIXINMINI=6]="WEIXINMINI",Ct[Ct.UNKOWN=7]="UNKOWN",(Ct=mt.ENUM_REMOTE_TYPE||(mt.ENUM_REMOTE_TYPE={}))[Ct.DISABLE=0]="DISABLE",Ct[Ct.WEBSOCKET=1]="WEBSOCKET",Ct[Ct.HTTPS=2]="HTTPS",mt.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(Ct=mt.E_CLIENT_TYPE||(mt.E_CLIENT_TYPE={}))[Ct.ClientType_None=0]="ClientType_None",Ct[Ct.ClientType_H5=1]="ClientType_H5",Ct[Ct.ClientType_SmallPragram=2]="ClientType_SmallPragram",Ct[Ct.ClientType_Webrtc=3]="ClientType_Webrtc",mt.getSeq=(bt=1,function(){return bt++}),Tt.prototype.isEmpty=function(){return this.items.length==0},Tt.prototype.enqueue=function(St){this.items.push(St)},Tt.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},Tt.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},Tt.prototype.size=function(){return this.items.length},Tt.prototype.clear=function(){this.items=[]},Tt.prototype.all=function(){return this.items};var bt,Ct=Tt;function Tt(){this.items=[],this.items=[]}mt.Queue=Ct,mt.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},mt.SOCKET_DISCONNECT=-1,(Ct=mt.ENUM_NETWORK_STATE||(mt.ENUM_NETWORK_STATE={}))[Ct.offline=0]="offline",Ct[Ct.online=1]="online",(Ct=mt.ENUM_CONNECT_STATE||(mt.ENUM_CONNECT_STATE={}))[Ct.disconnected=0]="disconnected",Ct[Ct.connecting=1]="connecting",Ct[Ct.connected=2]="connected",Object.defineProperty(Rt.prototype,"id",{get:function(){return this._id||null},set:function(St){this._id=St},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"data",{get:function(){return this._data},set:function(St){this._data=St},enumerable:!1,configurable:!0}),Rt.prototype.hasNext=function(){return this.next&&this.next.id},Rt.prototype.hasPrev=function(){return this.prev&&this.prev.id};var wt=Rt;function Rt(St,Pt){St===void 0&&(St=null),Pt===void 0&&(Pt=null),this.next=null,this.prev=null,this._id=St,this._data=Pt}function It(){this.start=new wt,this.end=new wt,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}mt.ListNode=wt,It.prototype.insertBefore=function(St,Pt){return(Pt=new wt(this._idCounter,Pt)).next=St,Pt.prev=St.prev,St.prev&&(St.prev.next=Pt),St.prev=Pt,++this._idCounter,++this._numNodes,Pt},It.prototype.addLast=function(St){return this.insertBefore(this.end,St)},It.prototype.add=function(St){return this.addLast(St)},It.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},It.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},It.prototype.size=function(){return this._numNodes},It.prototype.getFromFirst=function(St){var Pt=0,Ot=this.start.next;if(0<=St)for(;Pt<St&&Ot!==null;)Ot=Ot.next,++Pt;else Ot=null;if(Ot===null)throw"Index out of bounds.";return Ot},It.prototype.get=function(St){return St===0?this.getFirst():St===this._numNodes-1?this.getLast():this.getFromFirst(St)},It.prototype.remove=function(St){return St.prev&&(St.prev.next=St.next),St.next&&(St.next.prev=St.prev),--this._numNodes,St},It.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},It.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},It.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},It.prototype.each=function(St){for(var Pt=this.start;Pt.hasNext();)St(Pt=Pt.next)},It.prototype.find=function(St){for(var Pt=this.start,Ot=!1,Ut=null;Pt.hasNext()&&!Ot;)St(Pt=Pt.next)&&(Ut=Pt,Ot=!0);return Ut},It.prototype.map=function(St){for(var Pt=this.start,Ot=[];Pt.hasNext();)St(Pt=Pt.next)&&Ot.push(Pt);return Ot},It.prototype.push=function(St){return this.addLast(St)},It.prototype.unshift=function(St){0<this._numNodes?this.insertBefore(this.start.next,St):this.insertBefore(this.end,St)},It.prototype.pop=function(){return this.removeLast()},It.prototype.shift=function(){return this.removeFirst()},mt.LinkedList=Ct=It},function(yt,mt,Et){var bt=this&&this.__read||function(Ot,Ut){var Bt=typeof Symbol=="function"&&Ot[Symbol.iterator];if(!Bt)return Ot;var xt,At,Mt=Bt.call(Ot),Nt=[];try{for(;(Ut===void 0||0<Ut--)&&!(xt=Mt.next()).done;)Nt.push(xt.value)}catch($t){At={error:$t}}finally{try{xt&&!xt.done&&(Bt=Mt.return)&&Bt.call(Mt)}finally{if(At)throw At.error}}return Nt},Ct=this&&this.__spread||function(){for(var Ot=[],Ut=0;Ut<arguments.length;Ut++)Ot=Ot.concat(bt(arguments[Ut]));return Ot},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.ContextAPI=mt.suppressInstrumentation=mt.ROOT_CONTEXT=mt.BaseContext=mt.setSpan=mt.getSpanContext=mt.getSpan=mt.createContextKey=void 0,Et(16));function wt(Ot){return Symbol.for(Ot)}var Rt=(mt.createContextKey=wt)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),It=wt("OpenTelemetry Context Key SPAN");function St(Ot){return Ot.getValue(It)||void 0}function Pt(Ot){this.name=Ot,this.contextManager=new Tt.StackContextManager}mt.getSpan=St,mt.getSpanContext=function(Ot){return(Ot=St(Ot))==null?void 0:Ot.context()},mt.setSpan=function(Ot,Ut){return Ot.setValue(It,Ut)},mt.BaseContext=Et=function Ot(Ut){var Bt=this;Bt._currentContext=Ut?new Map(Ut):new Map,Bt.getValue=function(xt){return Bt._currentContext.get(xt)},Bt.setValue=function(xt,At){var Mt=new Ot(Bt._currentContext);return Mt._currentContext.set(xt,At),Mt},Bt.deleteValue=function(xt){var At=new Ot(Bt._currentContext);return At._currentContext.delete(xt),At}},mt.ROOT_CONTEXT=new Et,mt.suppressInstrumentation=function(Ot){return Ot.setValue(Rt,!0)},Pt.getInstance=function(Ot){return Ot===void 0&&(Ot="context"),this._instance||(this._instance=new Pt(Ot)),this._instance},Pt.prototype.active=function(){return this.contextManager.active()},Pt.prototype.with=function(Ot,Ut,Bt){for(var xt,At=[],Mt=3;Mt<arguments.length;Mt++)At[Mt-3]=arguments[Mt];return(xt=this._getContextManager()).with.apply(xt,Ct([Ot,Ut,Bt],At))},Pt.prototype._getContextManager=function(){return this.contextManager},mt.ContextAPI=Et=Pt},function(yt,mt,Et){var bt,Ct;Object.defineProperty(mt,"__esModule",{value:!0}),mt.INVALID_SPAN_CONTEXT=mt.INVALID_TRACEID=mt.INVALID_SPANID=mt.TraceFlags=mt.SpanKind=mt.SpanStatusCode=void 0,(bt=mt.SpanStatusCode||(mt.SpanStatusCode={}))[bt.UNSET=0]="UNSET",bt[bt.OK=1]="OK",bt[bt.ERROR=2]="ERROR",(Ct=mt.SpanKind||(mt.SpanKind={}))[Ct.INTERNAL=0]="INTERNAL",Ct[Ct.SERVER=1]="SERVER",Ct[Ct.CLIENT=2]="CLIENT",Ct[Ct.PRODUCER=3]="PRODUCER",Ct[Ct.CONSUMER=4]="CONSUMER",(Ct=bt=mt.TraceFlags||(mt.TraceFlags={}))[Ct.NONE=0]="NONE",Ct[Ct.SAMPLED=1]="SAMPLED",mt.INVALID_SPANID="0000000000000000",mt.INVALID_TRACEID="00000000000000000000000000000000",mt.INVALID_SPAN_CONTEXT={traceId:mt.INVALID_TRACEID,spanId:mt.INVALID_SPANID,traceFlags:bt.NONE}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.log=mt.ZegoLog=void 0,Ct.prototype.log=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=Tt.join("");console.log(Rt)},Ct.prototype.debug=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=Tt.join("");console.debug(Rt)},Ct.prototype.info=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=Tt.join("");console.info(Rt)},Ct.prototype.warn=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=Tt.join("");console.warn(Rt)},Ct.prototype.error=function(){for(var Tt=[],wt=0;wt<arguments.length;wt++)Tt[wt]=arguments[wt];var Rt=Tt.join("");console.error(Rt)};var bt=Ct;function Ct(){}bt=new(mt.ZegoLog=bt),mt.log=bt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.FAIL_TIME=mt.FAIL_MAX_COUNT=mt.FAIL_COUNT=mt.STORE_SIZE=mt.CACHE_SIZE=mt.BUCKET_CONFIG=mt.DEFAULT_CONFIG=void 0,mt.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:4},mt.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},mt.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},mt.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},mt.FAIL_COUNT=10,mt.FAIL_MAX_COUNT=10,mt.FAIL_TIME=30},function(yt,mt,Et){var bt=this&&this.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}},Ct=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.uuid=mt.calculateMemSize=mt.analyzeKey=mt.getCurrentTime=mt.getCurrentEnv=mt.getBrowser=void 0,Et(0)),Tt=bt(Et(31)),wt=(mt.getBrowser=function(){var Rt=window.navigator.userAgent,It=window.ActiveXObject!=null&&Rt.indexOf("MSIE")!=-1,St=Rt.indexOf("Firefox")!=-1,Pt=window.opr!=null,Ot=Rt.indexOf("Chrome")&&window.chrome,Ut=Rt.indexOf("Safari")!=-1&&Rt.indexOf("Version")!=-1;return Rt=Rt.toLowerCase().match(/MicroMessenger/i)&&Rt.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",It?Ct.ZEGO_BROWSER_TYPE.IE:St?Ct.ZEGO_BROWSER_TYPE.FIREFOX:Pt?Ct.ZEGO_BROWSER_TYPE.OPERA:Ot?Ct.ZEGO_BROWSER_TYPE.CHROME:Ut?Ct.ZEGO_BROWSER_TYPE.SAFARI:Rt?Ct.ZEGO_BROWSER_TYPE.WEIXIN:Ct.ZEGO_BROWSER_TYPE.UNKOWN},mt.getCurrentEnv=function(){var Rt=window.navigator.userAgent;return new Promise(function(It){Rt.indexOf("MicroMessage")==-1?It(Ct.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv(function(St){St.miniprogram})})},["00","01","02","03","04","05","06","07","08","09"]);mt.getCurrentTime=function(){var Rt=new Date;return[Rt.getFullYear()+"/",(wt[Rt.getMonth()+1]||Rt.getMonth()+1)+"/",(wt[Rt.getDate()]||Rt.getDate())+" ",(wt[Rt.getHours()]||Rt.getHours())+":",(wt[Rt.getMinutes()]||Rt.getMinutes())+":",wt[Rt.getSeconds()]||Rt.getSeconds(),"."+Rt.getTime()%1e3].join("")},mt.analyzeKey=function(Rt){return Rt=Rt.split("_"),{level:Number(Rt[0]),timestamp:Rt[1],seq:Rt[2]}},mt.calculateMemSize=function(Rt){return Tt.default(Rt)},mt.uuid=function(Rt,It){var St,Pt,Ot="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Ut=[];if(It=It||Ot.length,Rt)for(St=0;St<Rt;St++)Ut[St]=Ot[0|Math.random()*It];else for(Ut[8]=Ut[13]=Ut[18]=Ut[23]="-",Ut[14]="4",St=0;St<36;St++)Ut[St]||(Pt=0|16*Math.random(),Ut[St]=Ot[St==19?3&Pt|8:Pt]);return Ut.join("")}},function(yt,mt,Et){var bt=this&&this.__values||function(wt){var Rt=typeof Symbol=="function"&&Symbol.iterator,It=Rt&&wt[Rt],St=0;if(It)return It.call(wt);if(wt&&typeof wt.length=="number")return{next:function(){return{value:(wt=wt&&St>=wt.length?void 0:wt)&&wt[St++],done:!wt}}};throw new TypeError(Rt?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=this&&this.__read||function(wt,Rt){var It=typeof Symbol=="function"&&wt[Symbol.iterator];if(!It)return wt;var St,Pt,Ot=It.call(wt),Ut=[];try{for(;(Rt===void 0||0<Rt--)&&!(St=Ot.next()).done;)Ut.push(St.value)}catch(Bt){Pt={error:Bt}}finally{try{St&&!St.done&&(It=Ot.return)&&It.call(Ot)}finally{if(Pt)throw Pt.error}}return Ut};function Tt(wt){return wt==null||!Array.isArray(wt)||function(Rt){var It,St,Pt;try{for(var Ot=bt(Rt),Ut=Ot.next();!Ut.done;Ut=Ot.next()){var Bt=Ut.value;if(Bt!=null)if(Pt){if(typeof Bt!==Pt)return!1}else Pt=typeof Bt}}catch(xt){It={error:xt}}finally{try{Ut&&!Ut.done&&(St=Ot.return)&&St.call(Ot)}finally{if(It)throw It.error}}return!0}(wt)}Object.defineProperty(mt,"__esModule",{value:!0}),mt.sanitizeAttributes=mt.isAttributeValue=void 0,mt.isAttributeValue=Tt,mt.sanitizeAttributes=function(wt){var Rt,It,St={};if(wt!=null&&typeof wt=="object")try{for(var Pt=bt(Object.entries(wt)),Ot=Pt.next();!Ot.done;Ot=Pt.next()){var Ut=Ct(Ot.value,2),Bt=Ut[0],xt=Ut[1];Tt(xt)&&(Array.isArray(xt)?St[Bt]=xt.slice():St[Bt]=xt)}}catch(At){Rt={error:At}}finally{try{Ot&&!Ot.done&&(It=Pt.return)&&It.call(Pt)}finally{if(Rt)throw Rt.error}}return St}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.IdGenerator=void 0;var bt=Array(32);function Ct(Tt){return function(){for(var wt=0;wt<2*Tt;wt++)bt[wt]=Math.floor(16*Math.random())+48,58<=bt[wt]&&(bt[wt]+=39);return String.fromCharCode.apply(null,bt.slice(0,2*Tt))}}mt.IdGenerator=function(){this.generateTraceId=Ct(16),this.generateSpanId=Ct(8),this.generateEventId=Ct(4)}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.Resource=mt.SDK_INFO=mt.SemanticResourceAttributes=void 0,mt.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},mt.SDK_INFO=((bt={})[mt.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",bt[mt.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",bt[mt.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",bt[mt.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=mt.VERSION,bt),Ct.empty=function(){return Ct.EMPTY},Ct.createTelemetrySDKResource=function(){var Tt;return new Ct(((Tt={})[mt.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=mt.SDK_INFO[mt.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],Tt[mt.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=mt.SDK_INFO[mt.SemanticResourceAttributes.TELEMETRY_SDK_NAME],Tt[mt.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=mt.SDK_INFO[mt.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],Tt))},Ct.prototype.merge=function(Tt){return Tt&&Object.keys(Tt.attributes).length?new Ct(Object.assign({},this.attributes,Tt.attributes)):this},Ct.EMPTY=new Ct({});var bt=Ct;function Ct(Tt){this.attributes=Tt}mt.Resource=bt},function(yt,mt,Et){var bt=this&&this.__values||function(Ot){var Ut=typeof Symbol=="function"&&Symbol.iterator,Bt=Ut&&Ot[Ut],xt=0;if(Bt)return Bt.call(Ot);if(Ot&&typeof Ot.length=="number")return{next:function(){return{value:(Ot=Ot&&xt>=Ot.length?void 0:Ot)&&Ot[xt++],done:!Ot}}};throw new TypeError(Ut?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=this&&this.__read||function(Ot,Ut){var Bt=typeof Symbol=="function"&&Ot[Symbol.iterator];if(!Bt)return Ot;var xt,At,Mt=Bt.call(Ot),Nt=[];try{for(;(Ut===void 0||0<Ut--)&&!(xt=Mt.next()).done;)Nt.push(xt.value)}catch($t){At={error:$t}}finally{try{xt&&!xt.done&&(Bt=Mt.return)&&Bt.call(Mt)}finally{if(At)throw At.error}}return Nt},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.Span=void 0,Et(6)),wt=Et(1),Rt=Et(2),It=Et(7),St=Et(17);function Pt(Ot,Ut,Bt,xt,At,Mt,Nt,$t){$t===void 0&&($t=[]),this.attributes={},this.links=[],this.events=[],this.status={code:Rt.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=Ot.context,this.reporter=Ot.reporter,this.spanProcessor=Ot.spanProcessor,this.parentTracer=Ot,this.name=Bt,this.level=xt,this.spanContext=At,this.parentSpanId=Nt,this.kind=Mt,this.links=$t,this.startTime=Date.now(),this.resource=Ot.resource,this.instrumentationLibrary=Ot.instrumentationLibrary,this._traceParams=Ot.getActiveTraceParams(),this._idGenerator=new It.IdGenerator}Pt.prototype.context=function(){return this.spanContext},Pt.prototype.setAttribute=function(Ot,Ut){return Ut!=null&&Ot.length!==0&&(!Tt.isAttributeValue(Ut)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,Ot)||(this.attributes[Ot]=Ut)),this},Pt.prototype.appendAttribute=function(Ot,Ut){return Ut!=null&&Ot.length!==0&&(!Tt.isAttributeValue(Ut)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,Ot)||(this.attributes[Ot]&&Array.isArray(this.attributes[Ot])?this.attributes[Ot].push(Ut):this.attributes[Ot]=[Ut])),this},Pt.prototype.setAttributes=function(Ot){var Ut,Bt;try{for(var xt=bt(Object.entries(Ot)),At=xt.next();!At.done;At=xt.next()){var Mt=Ct(At.value,2),Nt=Mt[0],$t=Mt[1];this.setAttribute(Nt,$t)}}catch(Ft){Ut={error:Ft}}finally{try{At&&!At.done&&(Bt=xt.return)&&Bt.call(xt)}finally{if(Ut)throw Ut.error}}return this},Pt.prototype.addEvent=function(Ot,Ut,Bt){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var xt=this._idGenerator.generateEventId();return St.isTimeInput(Ut)&&(Bt===void 0&&(Bt=Ut),Ut=void 0),Bt===void 0&&(Bt=St.hrTime()),this.events.push({name:Ot,attributes:Ut,time:St.timeInputToHrTime(Bt),event_id:xt}),this},Pt.prototype.setStatus=function(Ot){return this.status=Ot,this},Pt.prototype.updateName=function(Ot){return this.name=Ot,this},Pt.prototype.end=function(Ot,Ut){var Bt=this;Ot===void 0&&(Ot=St.hrTime()),this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),Ot=St.getCurrentTime(),this.setAttribute("e_time_s",Ot),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(wt.suppressInstrumentation(this.contextAPI.active()),function(){var xt=Bt.toReporterSpan(Bt);Bt.spanProcessor.spanEnd&&Bt.spanProcessor.spanEnd(xt,Bt.level),xt.droped||Ut===!1||(delete xt.droped,Bt.reporter.report(JSON.stringify(xt),Bt.level))}))},Pt.prototype.spanReport=function(){var Ot=this.toReporterSpan(this);this.reporter.report(JSON.stringify(Ot),this.level)},Pt.prototype.isRecording=function(){return this._ended===!1},Object.defineProperty(Pt.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(Pt.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Pt.prototype._isSpanEnded=function(){return this._ended,this._ended},Pt.prototype.toReporterSpan=function(Ot){var Ut=[],Bt=(Ot.events.forEach(function(xt){var At={};Object.keys(xt).forEach(function(Mt){Mt==="name"&&(At[Mt]=xt[Mt]),Mt==="time"&&(At.timestamp=St.hrTimeToMilliseconds(xt[Mt])),Mt==="attributes"&&(At.tags=xt[Mt])}),Ut.push(At)}),[]);return Ot.links.forEach(function(xt){Bt.push({span_id:xt.context.spanId,trace_id:xt.context.traceId})}),{trace_id:Ot.spanContext.traceId,parent_span_id:Ot.parentSpanId,name:Ot.name,span_id:Ot.spanContext.spanId,kind:Ot.kind,start_time:Ot.startTime,end_time:Ot.endTime,duration:Ot.duration,logs:Ut,tags:Ot.attributes,links:Bt}},mt.Span=Et=Pt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoSpan=void 0;var bt=Et(3),Ct=Et(9);function Tt(wt,Rt){this.spanId=wt,this.span=Rt}Tt.prototype.setAttribute=function(wt,Rt){var It=this;return this.span?this.span.setAttribute(wt,Rt):this._activeSpan().then(function(){It.span&&It.span.setAttribute(wt,Rt)}),this},Tt.prototype.setAttributes=function(wt){var Rt=this;return this.span?this.span.setAttributes(wt):this._activeSpan().then(function(){Rt.span&&Rt.span.setAttributes(wt)}),this},Tt.prototype.appendAttribute=function(wt,Rt){var It=this;return this.span?this.span.appendAttribute(wt,Rt):this._activeSpan().then(function(){It.span&&It.span.appendAttribute(wt,Rt)}),this},Tt.prototype.addEvent=function(wt,Rt,It){var St=this;return this.span?this.span.addEvent(wt,Rt,It):this._activeSpan().then(function(){St.span&&St.span.addEvent(wt,Rt,It)}),this},Tt.prototype.setStatus=function(wt){var Rt=this;return this.span?this.span.setStatus(wt):this._activeSpan().then(function(){Rt.span&&Rt.span.setStatus(wt)}),this},Tt.prototype.updateName=function(wt){var Rt=this;return this.span?this.span.updateName(wt):this._activeSpan().then(function(){Rt.span&&Rt.span.updateName(wt)}),this},Tt.prototype.end=function(wt,Rt){var It=this;Rt===void 0&&(Rt=!0),this.span?this.span.end(wt,Rt):this._activeSpan(!0).then(function(){It.span&&It.span.end(wt,Rt),It._spanEnd()})},Tt.prototype.setSpanActive=function(wt){this.activeCallback=wt},Tt.prototype.setSpanEnd=function(wt){this.endCallback=wt},Tt.prototype.spanReport=function(){var wt;(wt=this.span)!=null&&wt.spanReport()},Tt.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},Tt.prototype._isSpanNoop=function(){return this.spanId==="noop"},Tt.prototype._activeSpan=function(wt){var Rt=this;return wt===void 0&&(wt=!1),new Promise(function(It,St){Rt.store.getItem(Rt.spanId).then(function(Pt){var Ot=new Ct.Span(Tt.tracer,Tt.tracer.context.active(),Pt.name,Pt.level,Pt.spanContext,Pt.kind,Pt.parentSpanId,Pt.links);Ot.setStatus(Pt.status),Ot.setAttributes(Pt.attributes),Rt.span=Ot,Rt.activeCallback&&Rt.activeCallback(Rt.spanId,wt),It()}).catch(function(Pt){St(Pt)})})},Tt.prototype.removeStoreItem=function(wt){var Rt=this;this.store.getItem(wt).then(function(It){It&&Rt.store.removeItem(wt).then(function(){bt.log.log("remove suc")}).catch(function(St){bt.log.warn("remove fail")})})},mt.ZegoSpan=Et=Tt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.createZegoStore=mt.ZegoWechatMiniStore=mt.ZEGO_ENV=void 0;var bt,Ct,Tt=Et(12),wt=((Ct=bt=mt.ZEGO_ENV||(mt.ZEGO_ENV={}))[Ct.BROWSER=0]="BROWSER",Ct[Ct.WEIXINMINI=1]="WEIXINMINI",Et(3)),Rt=(It.prototype.getItem=function(St){var Pt=this;return new Promise(function(Ot,Ut){try{Ot(wx.getStorageSync(Pt.keyPrefix+St))}catch(Bt){Ut(Bt)}})},It.prototype.setItem=function(St,Pt){var Ot=this;return new Promise(function(Ut,Bt){try{wx.setStorageSync(Ot.keyPrefix+St,Pt),Ut()}catch(xt){Bt(xt)}})},It.prototype.removeItem=function(St){var Pt=this;return new Promise(function(Ot,Ut){try{Ot(wx.removeStorageSync(Pt.keyPrefix+St))}catch(Bt){Ut(Bt)}})},It.prototype.clear=function(){return new Promise(function(St,Pt){try{wx.clearStorageSync(),St()}catch(Ot){Pt(Ot)}})},It.prototype.keys=function(){var St=this;return new Promise(function(Pt,Ot){try{var Ut=wx.getStorageInfoSync().keys,Bt=(wt.log.warn("keys",Ut),[]);Ut.forEach(function(xt){xt.indexOf(St.keyPrefix)==0&&Bt.push(xt.replace(St.keyPrefix,""))}),wt.log.warn("keyArr",JSON.stringify(Bt)),Bt.sort(),Pt(Bt)}catch(xt){Ot(xt)}})},It);function It(St){this.storeName=St,this.keyPrefix=St+"/",this.storeName}mt.ZegoWechatMiniStore=Rt,mt.createZegoStore=function(St,Pt,Ot){return Pt===bt.BROWSER?Tt.createInstance({name:St+":"+(Ot||"store")}):new Rt(St)}},function(yt,mt){yt.exports=pt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.DynamicCode=mt.ZegoTracer=mt.ZegoSpan=void 0;var bt=Et(14),Ct=(Object.defineProperty(mt,"ZegoTracer",{enumerable:!0,get:function(){return bt.ZegoTracer}}),Et(46)),Tt=(Object.defineProperty(mt,"DynamicCode",{enumerable:!0,get:function(){return Ct.DynamicCode}}),Et(10));Object.defineProperty(mt,"ZegoSpan",{enumerable:!0,get:function(){return Tt.ZegoSpan}})},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoTracer=void 0;var bt=Et(15),Ct=Et(21),Tt=Et(10),wt=Et(22),Rt=Et(3),It=Et(1),St=Et(8),Pt=Et(23),Ot=Et(39),Ut=Et(11),Bt=Et(44),xt=Et(45);function At(){this.tracingSpans=[],this._maxTracingSpanSize=wt.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new Bt.ZegoLog,this.stateCenter=new xt.StateCenter(this.log)}At.prototype.init=function(Mt){this.options=Mt,this.name=Mt.product,this.reporter=new Pt.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:Mt.appID,env:Mt.env||0,importantLevel:Mt.importantLevel,levels:Mt.levels,deviceID:Mt.deviceID,bps:Mt.bps,serverUrl:Mt.serverUrl}),this.tracer=new bt.Tracer({name:this.name,version:Mt.version},{resource:new St.Resource(Mt.resources)},this.reporter,{spanStart:Mt.spanStart,spanBeforeEnd:Mt.spanBeforeEnd,spanEnd:Mt.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=Ut.createZegoStore(Mt.product+"_"+Mt.appID+"_dy",Mt.env||0)},At.prototype.initRoot=function(Mt){this.rootSpan=this.tracer.startSpan("root",0);var Nt=It.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=Nt,this.rootSpan.end()},At.prototype.createSpan=function(Mt,Nt,$t){var Ft,jt;return Mt<=this.level?(Ft=void 0,Ft=$t&&$t.parent?It.setSpan(this.tracer.context.active(),$t.parent.span):It.setSpan(this.tracer.context.active(),this.rootSpan),jt=[],$t&&$t.linkSpans&&($t.linkSpans.forEach(function(zt){jt.push({context:zt.span.context()})}),delete $t.linkSpans),Ft=this.tracer.startSpan(Nt,Mt,Object.assign({},$t,{links:jt}),Ft),this.tracingSpans.length>=this._maxTracingSpanSize&&Rt.log.warn("max to limit"),Ft=new Tt.ZegoSpan(Ft.spanContext.spanId,Ft),Tt.ZegoSpan.tracer=this.tracer,this.tracingSpans.push(Ft),Ft):(Rt.log.warn("createSpan level not fix"),new Tt.ZegoSpan(wt.NOOP_SPAN_ID,new Ct.NoopSpan))},At.prototype.setLogger=function(Mt){this.stateCenter.logger=Mt},At.prototype.setTimeOffset=function(Mt){this.reporter.setTimeOffset(Mt)},At.prototype.setWaitNtpTimeout=function(Mt){this.reporter.setWaitNtpTimeout(Mt)},At.prototype.setLogLevel=function(Mt){return this.stateCenter._log.setLogLevel(Mt)},At.prototype.startReport=function(Mt){return this.reporter.startReport(Mt)},At.prototype.setConfig=function(Mt){this.reporter.setConfig(Mt)},At.prototype.loadJs=function(Mt,Nt,$t,Ft,jt,zt){return Ot.loadJS(Mt,this.dyStore,Nt,$t,Ft,jt,zt)},At.prototype.flush=function(Mt){this.reporter.flush(Mt)},At.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},At.prototype.setProcessorCallBack=function(Mt,Nt){},At.prototype.setSampleConfig=function(Mt){this.level=Mt.level||this.level},At.prototype.setResource=function(Mt){this.tracer.setResource(Mt),this.reporter.setProcessData(this.tracer.resource.attributes)},mt.ZegoTracer=Et=At},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.Tracer=void 0;var bt=Et(6),Ct=Et(1),Tt=Et(2),wt=Et(7),Rt=Et(8),It=Et(9),St=Et(18),Pt=Et(19);function Ot(Ut,Bt,xt,At){var Mt=Pt.mergeConfig(Bt);this._traceParams=Mt.traceParams,this._idGenerator=new wt.IdGenerator,this.resource=(Bt=Bt.resource)!=null?Bt:Rt.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=Ut,Ut=Math.random().toString(36).slice(-6),this.context=new Ct.ContextAPI(Ut),this.reporter=xt,this.spanProcessor=At||{}}Ot.prototype.startSpan=function(Ut,Bt,xt,At){var Mt,Nt,$t,Ft=function(Kt,er){if(!Kt.root)return Ct.getSpanContext(er)}(xt=xt===void 0?{}:xt,At=At===void 0?this.context.active():At),jt=this._idGenerator.generateSpanId(),zt=(Ft&&St.isSpanContextValid(Ft)?(Mt=Ft.traceId,Nt=Ft.traceState,$t=Ft.spanId):Mt=this._idGenerator.generateTraceId(),(Yt=xt.kind)!=null?Yt:Tt.SpanKind.INTERNAL),Yt=(Ft=xt.links)!=null?Ft:[];return Ft=bt.sanitizeAttributes(xt.attributes),xt=Tt.TraceFlags.NONE,(Yt=new It.Span(this,At,Ut,Bt,{traceId:Mt,spanId:jt,traceFlags:xt,traceState:Nt},zt,$t,Yt)).setAttributes(Ft),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(Yt),Yt},Ot.prototype.setResource=function(Ut){this.resource=this.resource.merge(new Rt.Resource(Ut))},Ot.prototype.getActiveTraceParams=function(){return this._traceParams},mt.Tracer=Et=Ot},function(yt,mt,Et){var bt=this&&this.__read||function(Rt,It){var St=typeof Symbol=="function"&&Rt[Symbol.iterator];if(!St)return Rt;var Pt,Ot,Ut=St.call(Rt),Bt=[];try{for(;(It===void 0||0<It--)&&!(Pt=Ut.next()).done;)Bt.push(Pt.value)}catch(xt){Ot={error:xt}}finally{try{Pt&&!Pt.done&&(St=Ut.return)&&St.call(Ut)}finally{if(Ot)throw Ot.error}}return Bt},Ct=this&&this.__spread||function(){for(var Rt=[],It=0;It<arguments.length;It++)Rt=Rt.concat(bt(arguments[It]));return Rt},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.StackContextManager=void 0,Et(1));function wt(){this._enabled=!1,this._currentContext=Tt.ROOT_CONTEXT}wt.prototype._bindFunction=function(Rt,It){function St(){for(var Ot=this,Ut=[],Bt=0;Bt<arguments.length;Bt++)Ut[Bt]=arguments[Bt];return Pt.with(It,function(){return Rt.apply(Ot,Ut)})}It===void 0&&(It=Tt.ROOT_CONTEXT);var Pt=this;return Object.defineProperty(St,"length",{enumerable:!1,configurable:!0,writable:!1,value:Rt.length}),St},wt.prototype.active=function(){return this._currentContext},wt.prototype.bind=function(Rt,It){return(It=It===void 0?Tt.ROOT_CONTEXT:It)===void 0&&(It=this.active()),typeof Rt=="function"?this._bindFunction(Rt,It):Rt},wt.prototype.disable=function(){return this._currentContext=Tt.ROOT_CONTEXT,this._enabled=!1,this},wt.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=Tt.ROOT_CONTEXT),this},wt.prototype.with=function(Rt,It,St){for(var Pt=[],Ot=3;Ot<arguments.length;Ot++)Pt[Ot-3]=arguments[Ot];var Ut=this._currentContext;this._currentContext=Rt||Tt.ROOT_CONTEXT;try{return It.call.apply(It,Ct([St],Pt))}finally{this._currentContext=Ut}},mt.StackContextManager=Et=wt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.getCurrentTime=mt.isTimeInput=mt.hrTimeToMilliseconds=mt.hrTimeDuration=mt.timeInputToHrTime=mt.isTimeInputHrTime=mt.hrTime=void 0;var bt=Math.pow(10,9),Ct=["00","01","02","03","04","05","06","07","08","09"];function Tt(St){var Pt=St/1e3;return[St=Math.trunc(Pt),Number((Pt-St).toFixed(9))*bt]}function wt(){var St,Pt=performance.timeOrigin;return typeof Pt!="number"?(St=performance).timing&&St.timing.fetchStart:Pt}function Rt(St){var Pt=Tt(wt()),Ot=Tt(typeof St=="number"?St:performance.now());return St=Pt[0]+Ot[0],Ot=Pt[1]+Ot[1],bt<Ot&&(Ot-=bt,St+=1),[St,Ot]}function It(St){return Array.isArray(St)&&St.length===2&&typeof St[0]=="number"&&typeof St[1]=="number"}mt.hrTime=Rt,mt.isTimeInputHrTime=It,mt.timeInputToHrTime=function(St){if(It(St))return St;if(typeof St=="number")return(St<wt()?Rt:Tt)(St);if(St instanceof Date)return Tt(St.getTime());throw TypeError("Invalid input type")},mt.hrTimeDuration=function(St,Pt){var Ot=Pt[0]-St[0];return(St=Pt[1]-St[1])<0&&(--Ot,St+=bt),[Ot,St]},mt.hrTimeToMilliseconds=function(St){return Math.round(1e3*St[0]+St[1]/1e6)},mt.isTimeInput=function(St){return It(St)||typeof St=="number"||St instanceof Date},mt.getCurrentTime=function(){var St=new Date;return[St.getFullYear()+"/",(Ct[St.getMonth()+1]||St.getMonth()+1)+"/",(Ct[St.getDate()]||St.getDate())+" ",(Ct[St.getHours()]||St.getHours())+":",(Ct[St.getMinutes()]||St.getMinutes())+":",Ct[St.getSeconds()]||St.getSeconds(),"."+St.getTime()%1e3].join("")}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.isSpanContextValid=mt.isValidSpanId=mt.isValidTraceId=mt.INVALID_SPAN_CONTEXT=mt.INVALID_TRACEID=mt.INVALID_SPANID=void 0,Et=Et(2);var bt=/^([0-9a-f]{32})$/i,Ct=/^[0-9a-f]{16}$/i;function Tt(Rt){return bt.test(Rt)&&Rt!==mt.INVALID_TRACEID}function wt(Rt){return Ct.test(Rt)&&Rt!==mt.INVALID_SPANID}mt.INVALID_SPANID="0000000000000000",mt.INVALID_TRACEID="00000000000000000000000000000000",mt.INVALID_SPAN_CONTEXT={traceId:mt.INVALID_TRACEID,spanId:mt.INVALID_SPANID,traceFlags:Et.TraceFlags.NONE},mt.isValidTraceId=Tt,mt.isValidSpanId=wt,mt.isSpanContextValid=function(Rt){return Tt(Rt.traceId)&&wt(Rt.spanId)}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.mergeConfig=void 0;var bt=Et(20);mt.mergeConfig=function(Ct){var Tt=Object.assign({},bt.DEFAULT_CONFIG,Ct);return Tt.traceParams=Object.assign({},bt.DEFAULT_CONFIG.traceParams,Ct.traceParams||{}),Tt}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.DEFAULT_CONFIG=void 0,mt.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.NoopSpan=void 0;var bt=Et(2);function Ct(Tt){Tt===void 0&&(Tt=bt.INVALID_SPAN_CONTEXT),this._spanContext=Tt}Ct.prototype.context=function(){return this._spanContext},Ct.prototype.setAttribute=function(Tt,wt){return this},Ct.prototype.appendAttribute=function(Tt,wt){return this},Ct.prototype.setAttributes=function(Tt){return this},Ct.prototype.addEvent=function(Tt,wt,Rt){return this},Ct.prototype.setStatus=function(Tt){return this},Ct.prototype.updateName=function(Tt){return this},Ct.prototype.end=function(Tt,wt){},Ct.prototype.isRecording=function(){return!1},Ct.prototype.spanReport=function(){},Ct.prototype.recordException=function(Tt,wt){},mt.NoopSpan=Et=Ct},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.NOOP_SPAN_ID=mt.SCHEDULED_DELAY_MILLIS=mt.DEFAULT_MAX_SPAN_SIZE=mt.readSpanKeys=void 0,mt.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],mt.DEFAULT_MAX_SPAN_SIZE=1e3,mt.SCHEDULED_DELAY_MILLIS=3e3,mt.NOOP_SPAN_ID="noop"},function(yt,mt,Et){var bt=this&&this.__assign||function(){return(bt=Object.assign||function(Mt){for(var Nt,$t=1,Ft=arguments.length;$t<Ft;$t++)for(var jt in Nt=arguments[$t])Object.prototype.hasOwnProperty.call(Nt,jt)&&(Mt[jt]=Nt[jt]);return Mt}).apply(this,arguments)},Ct=this&&this.__awaiter||function(Mt,Nt,$t,Ft){return new($t=$t||Promise)(function(jt,zt){function Yt(ir){try{er(Ft.next(ir))}catch(rr){zt(rr)}}function Kt(ir){try{er(Ft.throw(ir))}catch(rr){zt(rr)}}function er(ir){var rr;ir.done?jt(ir.value):((rr=ir.value)instanceof $t?rr:new $t(function(lr){lr(rr)})).then(Yt,Kt)}er((Ft=Ft.apply(Mt,Nt||[])).next())})},Tt=this&&this.__generator||function(Mt,Nt){var $t,Ft,jt,zt={label:0,sent:function(){if(1&jt[0])throw jt[1];return jt[1]},trys:[],ops:[]},Yt={next:Kt(0),throw:Kt(1),return:Kt(2)};return typeof Symbol=="function"&&(Yt[Symbol.iterator]=function(){return this}),Yt;function Kt(er){return function(ir){var rr=[er,ir];if($t)throw new TypeError("Generator is already executing.");for(;zt;)try{if($t=1,Ft&&(jt=2&rr[0]?Ft.return:rr[0]?Ft.throw||((jt=Ft.return)&&jt.call(Ft),0):Ft.next)&&!(jt=jt.call(Ft,rr[1])).done)return jt;switch(Ft=0,(rr=jt?[2&rr[0],jt.value]:rr)[0]){case 0:case 1:jt=rr;break;case 4:return zt.label++,{value:rr[1],done:!1};case 5:zt.label++,Ft=rr[1],rr=[0];continue;case 7:rr=zt.ops.pop(),zt.trys.pop();continue;default:if(!(jt=0<(jt=zt.trys).length&&jt[jt.length-1])&&(rr[0]===6||rr[0]===2)){zt=0;continue}if(rr[0]===3&&(!jt||rr[1]>jt[0]&&rr[1]<jt[3])){zt.label=rr[1];break}if(rr[0]===6&&zt.label<jt[1]){zt.label=jt[1],jt=rr;break}if(jt&&zt.label<jt[2]){zt.label=jt[2],zt.ops.push(rr);break}jt[2]&&zt.ops.pop(),zt.trys.pop();continue}rr=Nt.call(Mt,zt)}catch(lr){rr=[6,lr],Ft=0}finally{$t=jt=0}if(5&rr[0])throw rr[1];return{value:rr[0]?rr[1]:void 0,done:!0}}}},wt=this&&this.__read||function(Mt,Nt){var $t=typeof Symbol=="function"&&Mt[Symbol.iterator];if(!$t)return Mt;var Ft,jt,zt=$t.call(Mt),Yt=[];try{for(;(Nt===void 0||0<Nt--)&&!(Ft=zt.next()).done;)Yt.push(Ft.value)}catch(Kt){jt={error:Kt}}finally{try{Ft&&!Ft.done&&($t=zt.return)&&$t.call(zt)}finally{if(jt)throw jt.error}}return Yt},Rt=this&&this.__spread||function(){for(var Mt=[],Nt=0;Nt<arguments.length;Nt++)Mt=Mt.concat(wt(arguments[Nt]));return Mt},It=this&&this.__values||function(Mt){var Nt=typeof Symbol=="function"&&Symbol.iterator,$t=Nt&&Mt[Nt],Ft=0;if($t)return $t.call(Mt);if(Mt&&typeof Mt.length=="number")return{next:function(){return{value:(Mt=Mt&&Ft>=Mt.length?void 0:Mt)&&Mt[Ft++],done:!Mt}}};throw new TypeError(Nt?"Object is not iterable.":"Symbol.iterator is not defined.")},St=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoDataReport=void 0,Et(0)),Pt=Et(24),Ot=Et(30),Ut=Et(38),Bt=Et(5),xt=Et(4);function At(Mt,Nt){this.stateCenter=Nt,this.QUEUE_MAX=100,this.cacheMaxSize=xt.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=xt.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:xt.CACHE_SIZE.totalAvailCache,totalDBSize:xt.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.product=Mt,this.reporterCommonField=new Map,this.reportMap=new Map}At.prototype.init=function(Mt){return Ct(this,void 0,void 0,function(){var Nt=this;return Tt(this,function($t){switch($t.label){case 0:return this.config=bt(bt({},xt.DEFAULT_CONFIG),Mt),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new Pt.ZegoService(this.config.env||St.ZEGO_ENV.BROWSER,this.config.bps||xt.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,function(Ft){return Ct(Nt,void 0,void 0,function(){return Tt(this,function(jt){switch(jt.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.dropCount++,this.storePackagesDataToDB(Ft),[4,this.storePendingDataToDB(1)];case 1:return jt.sent(),this._actionListener("postFail"),[2]}})})}),this.initPendingQueue(),this.storeHandler=new Ot.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",Bt.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack(function(Ft){Nt.traceType.DB_O_DROP+=Bt.calculateMemSize(Ft),Nt._actionListener("dataDroped",Ft)}),[4,this.storeHandler.loadPendingData()];case 1:return $t.sent(),this.storeHandler.init().then(function(){Nt.loadReportData()}).catch(function(Ft){console.warn(Ft)}),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}})})},At.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null)},At.prototype.setConfig=function(Mt){typeof Mt=="object"&&typeof Mt.bps=="number"&&(this.config.bps=Mt.bps,this.zegoService.setBps(this.config.bps)),typeof Mt=="object"&&typeof Mt.totalDBSize=="number"&&(this.staticConfig.totalDBSize=Mt.totalDBSize),typeof Mt=="object"&&typeof Mt.serverUrl=="string"&&Mt.serverUrl!==""&&(this.config.serverUrl=Mt.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},At.prototype.pause=function(){this.isPaused=!0},At.prototype.resume=function(){this.isPaused=!1;var Mt=(Nt=this.pendingQueue.getPendingDataInfo()).pendingDataSize,Nt=Nt.size;this.checkPendingQueue(Mt,Nt)},At.prototype.startReport=function(Mt){var Nt=Mt.get("userID"),$t=Mt.get("token");return!(!Nt||typeof Nt!="string"||!$t||typeof $t!="string"||(this.startCommonField=Mt,this.config.userID=Nt,this.config.token=$t,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),($t=Mt.get("serverUrl"))&&(this.config.serverUrl=$t,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&($t=(Mt=this.pendingQueue.getPendingDataInfo()).pendingDataSize,Mt=Mt.size,this.checkPendingQueue($t,Mt)),0))},At.prototype.setTimeOffset=function(Mt){var Nt=this;this.clientTimeOffset=Mt,this.tempBuffer.forEach(function($t){($t=$t.data).tags.time_offset||($t.tags.time_offset=Nt.clientTimeOffset)}),this.config.userID&&this.bufferDump()},At.prototype.setProcessData=function(Mt){this.stateCenter.processData=Mt},At.prototype.on=function(Mt,Nt){return this._bindListener(Mt,Nt)},At.prototype.off=function(Mt,Nt){return this._deleteListener(Mt,Nt)},At.prototype.report=function(Mt,Nt){var $t,Ft;if(15e3<Mt.length)return!1;try{Ft=JSON.parse(Mt)}catch{return!1}return this.stateCenter._log.debug(Mt+" "+Nt),(Ft!=null&&Ft.id_name||($t=Ft==null?void 0:Ft.tags)!=null&&$t.id_name||this.config.userID)&&this.isWithNtp()?(Ft!=null&&Ft.id_name||($t=Ft==null?void 0:Ft.tags)!=null&&$t.id_name?this.clientTimeOffset&&(Ft.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(Ft.tags.time_offset=this.clientTimeOffset),Ft.tags.id_name=this.config.userID),this.dumpData(JSON.stringify(Ft),Nt)):this.tempBuffer.push({data:Ft,level:Nt}),!0},At.prototype.dumpData=function(Mt,Nt){var $t=this,Ft=Bt.calculateMemSize(Mt),jt=(this.traceType.MEM_I_API+=Ft,St.getSeq()),zt=new Date().getTime(),Yt={seq:jt,content:Mt,level:Nt,timestamp:zt,packagedContent:""};Nt<=this.config.importantLevel?(Yt.key=Nt+"_"+zt+"_"+jt,this.dataInDb.push(Yt.key),this.storeHandler.storeData(Yt).then(function(Kt){$t.pendingQueue.enqueue(Yt,Nt),$t.traceType.DB_I_BACKUP+=Ft}).catch(function(Kt){var er=$t.dataInDb.findIndex(function(ir){return ir===Yt.key});-1<er&&$t.dataInDb.splice(er,1),$t.pendingQueue.enqueue(Yt,Nt)})):this.pendingQueue.enqueue(Yt,Nt),this.state==="force"&&(Mt=Bt.calculateMemSize(Mt),this.forceDataTotalLen+=Mt)},At.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||this.clientTimeOffset!==void 0},At.prototype.bufferDump=function(){var Mt,Nt=this.tempBuffer.shift();Nt&&(Mt=Nt.data,Nt=Nt.level,Mt.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(Mt),Nt),this.bufferDump())},At.prototype.isConfigOK=function(Mt){return Mt.userID!==""&&Mt.token!==""&&Mt.server!==""},At.prototype.testSize=function(Mt){},At.prototype.flush=function(Mt){var Nt;this.state!=="force"&&(this.state="force",Nt=16e6,typeof Mt=="object"&&typeof Mt.bps=="number"&&(Nt=Mt.bps),this.zegoService.setBps(Nt),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,Nt=(Mt=this.pendingQueue.getPendingDataInfo()).pendingDataSize,Mt=Mt.size,0<Nt?this.checkPendingQueue(Nt,Mt):this.loadReportData())},At.prototype.setWaitNtpTimeout=function(Mt){this.waitNtpTimeout=Mt},At.prototype.setWaitNtpTimer=function(){var Mt=this;this.ntpTimer=setTimeout(function(){Mt.isWaitNtpTimeout=!0,Mt.config.userID&&Mt.bufferDump()},this.waitNtpTimeout)},At.prototype.startReportTimer=function(){var Mt=this,Nt=(this.timeInterval=!0,($t=this.pendingQueue.getPendingDataInfo()).pendingDataSize),$t=$t.size;this.checkPendingQueue(Nt,$t),this.timer=window.setTimeout(function(){Mt.startReportTimer()},3e4)},At.prototype.checkCacheDataTimer=function(){return Ct(this,void 0,void 0,function(){var Mt,Nt,$t=this;return Tt(this,function(Ft){switch(Ft.label){case 0:return Nt=this.pendingQueue.getPendingDataInfo(),Mt=Nt.pendingDataSize,Nt=Nt.size,Mt>this.config.reportSize||Nt>this.config.reportNum?[4,this.checkPendingQueue(Mt,Nt)]:[3,2];case 1:return Ft.sent(),[3,3];case 2:this.loadReportData(),Ft.label=3;case 3:return this.timer=window.setTimeout(function(){$t.checkCacheDataTimer()},15e3),[2]}})})},At.prototype.bindWindowListener=function(){var Mt=this,Nt=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(Nt?"pagehide":"beforeunload",function(){window.event&&(window.event.cancelBubble=!0),Mt.saveDataBeforeUnload()})},At.prototype.saveDataBeforeUnload=function(){var Mt=this.pendingQueue.readStoreData(1),Nt=(Mt.totalLen,Mt.storeArr);this.storeHandler.resetCommonStore(),(Mt=[]).push.apply(Mt,Rt(Nt)),Nt=this.zegoService.readReportQueueData(),Mt.push.apply(Mt,Rt(Nt)),0<Mt.length&&this.storeHandler.storePendingData(Mt)},At.prototype.postSucHandler=function(Mt,Nt,$t){return Ct(this,void 0,void 0,function(){var Ft,jt,zt,Yt,Kt,er=this;return Tt(this,function(ir){switch(ir.label){case 0:for(Mt.forEach(function(rr){er.traceType.MEM_O_DONE+=Bt.calculateMemSize(rr.content)}),Ft=function(rr){var lr=Mt[rr];jt.storeHandler.removeDataItem(lr).then(function(nr){lr.key&&er.reportMap.delete(lr.key)}).catch(function(nr){})},jt=this,zt=0;zt<Mt.length;zt++)Ft(zt);return this.reportPackagesSize-=Nt,Kt=this.pendingQueue.getPendingDataInfo(),Yt=Kt.pendingDataSize,Kt=Kt.size,Yt>this.config.reportSize||Kt>this.config.reportNum?[4,this.checkPendingQueue(Yt,Kt)]:[3,2];case 1:return ir.sent(),[3,3];case 2:this.loadReportData(),ir.label=3;case 3:return this.state==="force"&&this.reportPackagesSize==0&&(Kt=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,Kt=1-Number((Kt/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",Kt),0<this.storeHandler.storeSize&&this.loadReportData(function(rr){rr===0&&(er.state="normal",er.zegoService.setBps(er.config.bps||xt.DEFAULT_CONFIG.bps),er.listenerList.forceSuccessCallback&&er._actionListener("forceResult","SUCCESS"))})),[2]}})})},At.prototype.checkPendingQueue=function(Mt,Nt){return Ct(this,void 0,void 0,function(){var $t,Ft,jt,zt,Yt;return Tt(this,function(Kt){switch(Kt.label){case 0:return Mt>this.config.reportSize||Nt>this.config.reportNum||this.state=="force"||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:Mt>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2]):[3,7];case 1:Kt.sent(),Kt.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),Mt>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:Kt.sent(),Kt.label=5;case 5:return[2];case 6:if(jt=this.pendingQueue.readReportData(this.config.reportSize),$t=jt.totalLen,jt=jt.reportDataArr,$t<=0)return[2];for(jt=this.setCommonField(jt),Ft=jt.packageArr,jt=jt.packageLen,this.zegoService.report(Ft,jt,this.product),zt=0;zt<Ft.length;zt++)Yt=Ft[zt],this.reportMap.set(Yt.key,Yt);this.reportPackagesSize+=jt,this.pendingQueue.refresh($t),Kt.label=7;case 7:return[2]}})})},At.prototype.initPendingQueue=function(){var Mt=this;this.pendingQueue=new Ut.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(Nt,$t,Ft){return Ct(Mt,void 0,void 0,function(){return Tt(this,function(jt){switch(jt.label){case 0:return[4,this.checkPendingQueue(Ft,$t)];case 1:return jt.sent(),[2]}})})}})},At.prototype.loadDBDataToMem=function(){var Mt=this;this.storeHandler.readStoreDataItem().then(function(Nt){var $t=Bt.calculateMemSize(Nt.content);Mt.traceType.MEM_I_LOAD+=$t,Mt.pendingQueue.enqueue(Nt,Nt.level)}).catch(function(Nt){})},At.prototype.storePendingDataToDB=function(Mt){return Ct(this,void 0,void 0,function(){var Nt,$t,Ft,jt,zt,Yt,Kt,er;return Tt(this,function(ir){switch(ir.label){case 0:$t=this.pendingQueue.readStoreData(Mt),Nt=$t.totalLen,Yt=$t.storeArr,$t=function(rr){var lr,nr;return Tt(this,function(hr){switch(hr.label){case 0:return hr.trys.push([0,2,,3]),[4,Ft.storeDataItem(rr,Nt)];case 1:return hr.sent(),lr=rr.level+"_"+rr.timestamp+"_"+rr.seq,-1<(nr=Ft.dataInDb.findIndex(function(vr){return vr===lr}))&&Ft.dataInDb.splice(nr,1),[3,3];case 2:return hr.sent(),[3,3];case 3:return[2]}})},Ft=this,ir.label=1;case 1:ir.trys.push([1,6,7,8]),jt=It(Yt),zt=jt.next(),ir.label=2;case 2:return zt.done?[3,5]:(Yt=zt.value,[5,$t(Yt)]);case 3:ir.sent(),ir.label=4;case 4:return zt=jt.next(),[3,2];case 5:return[3,8];case 6:return Kt={error:Kt=ir.sent()},[3,8];case 7:try{zt&&!zt.done&&(er=jt.return)&&er.call(jt)}finally{if(Kt)throw Kt.error}return[7];case 8:return[2]}})})},At.prototype.storePackagesDataToDB=function(Mt){var Nt=this;Mt.length&&Mt.forEach(function($t){Nt.storeHandler.storeData($t).then(function(Ft){var jt=Bt.calculateMemSize($t.content);Nt.traceType.MEM_O_DUMP+=jt}).catch(function(Ft){})})},At.prototype.storeDataItem=function(Mt,Nt){var $t=this;return new Promise(function(Ft,jt){return Ct($t,void 0,void 0,function(){var zt;return Tt(this,function(Yt){switch(Yt.label){case 0:return Yt.trys.push([0,2,,3]),[4,this.storeHandler.storeData(Mt)];case 1:return Yt.sent(),zt=Bt.calculateMemSize(Mt.content),this.traceType.MEM_O_DUMP+=zt,Ft(),[3,3];case 2:return zt=Yt.sent(),jt(zt),[3,3];case 3:return[2]}})})})},At.prototype.loadReportData=function(Mt){var Nt=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),function($t){return-1<Nt.dataInDb.indexOf($t)}).then(function($t){Nt.isLoadReportData=!1,$t.datas.forEach(function(Ft){var jt;Nt.reportMap.has(Ft.key)||Nt.pendingQueue.findInQueue(Ft)||(jt=Bt.calculateMemSize(Ft.content),Nt.traceType.MEM_I_LOAD+=jt,Nt.pendingQueue.enqueue(Ft,Ft.level),Nt.dataInDb.push(Ft.key))}),Mt&&Mt($t.len)}).catch(function($t){Nt.isLoadReportData=!1}))},At.prototype.setCommonField=function(Mt){var Nt=this,$t=0;return Mt.forEach(function(Ft){var jt,zt,Yt,Kt,er,ir;if(Ft.packagedContent=JSON.parse(Ft.content),Nt.config.initCommonField)try{for(var rr=It(Nt.config.initCommonField),lr=rr.next();!lr.done;lr=rr.next()){var nr=wt(lr.value,2),hr=nr[0],vr=nr[1];(Er=JSON.parse(Ft.content))[hr]=vr,Ft.packagedContent=Er}}catch(Ht){jt={error:Ht}}finally{try{lr&&!lr.done&&(zt=rr.return)&&zt.call(rr)}finally{if(jt)throw jt.error}}if(Nt.startCommonField)try{for(var yr=It(Nt.startCommonField),Cr=yr.next();!Cr.done;Cr=yr.next()){var or=wt(Cr.value,2);hr=or[0],vr=or[1],hr!=="userID"&&hr!=="token"&&hr!=="serverUrl"&&((Er=JSON.parse(Ft.content))[hr]=vr,Ft.packagedContent=Er)}}catch(Ht){Yt={error:Ht}}finally{try{Cr&&!Cr.done&&(Kt=yr.return)&&Kt.call(yr)}finally{if(Yt)throw Yt.error}}if(Nt.reporterCommonField)try{for(var ur=It(Nt.reporterCommonField),pr=ur.next();!pr.done;pr=ur.next()){var Er,Sr=wt(pr.value,2);hr=Sr[0],vr=Sr[1],(Er=JSON.parse(Ft.content))[hr]=vr,Ft.packagedContent=Er}}catch(Ht){er={error:Ht}}finally{try{pr&&!pr.done&&(ir=ur.return)&&ir.call(ur)}finally{if(er)throw er.error}}$t+=Bt.calculateMemSize(JSON.stringify(Ft.packagedContent))}),{packageArr:Mt,packageLen:$t}},At.prototype._bindListener=function(Mt,Nt){return!!this.listenerList[Mt]&&typeof Nt=="function"&&(this.listenerList[Mt].indexOf(Nt)==-1&&this.listenerList[Mt].push(Nt),!0)},At.prototype._deleteListener=function(Mt,Nt){if(!this.listenerList[Mt])return!1;var $t=this.listenerList[Mt];return Nt?$t.splice($t.indexOf(Nt),1):this.listenerList[Mt]=[],!0},At.prototype._actionListener=function(Mt){for(var Nt=[],$t=1;$t<arguments.length;$t++)Nt[$t-1]=arguments[$t];this.listenerList[Mt]&&this.listenerList[Mt].forEach(function(Ft){try{Ft.apply(void 0,Rt(Nt))}catch{}})},mt.ZegoDataReport=Et=At},function(yt,mt,Et){var bt=this&&this.__read||function(Pt,Ot){var Ut=typeof Symbol=="function"&&Pt[Symbol.iterator];if(!Ut)return Pt;var Bt,xt,At=Ut.call(Pt),Mt=[];try{for(;(Ot===void 0||0<Ot--)&&!(Bt=At.next()).done;)Mt.push(Bt.value)}catch(Nt){xt={error:Nt}}finally{try{Bt&&!Bt.done&&(Ut=At.return)&&Ut.call(At)}finally{if(xt)throw xt.error}}return Mt},Ct=this&&this.__spread||function(){for(var Pt=[],Ot=0;Ot<arguments.length;Ot++)Pt=Pt.concat(bt(arguments[Ot]));return Pt},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoService=void 0,Et(0)),wt=Et(25),Rt=Et(29),It=Et(4);function St(Pt,Ot,Ut,Bt,xt){this.env=Pt,this.product=Ut,this.pro=Bt,this.stateCenter=xt,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=Tt.ENUM_NETWORK_STATE.online,this.state=Tt.ENUM_CONNECT_STATE.disconnected,this.bindWindowListener(),this.networkState=Tt.ENUM_NETWORK_STATE.online,this.service=new wt.LogService(Pt,Ut,Bt,xt),this.setBps(Ot),this.reportQueue=new Tt.Queue}St.prototype.bindWindowListener=function(){var Pt=this;window.addEventListener("offline",function(){Pt.networkState=Tt.ENUM_NETWORK_STATE.offline}),window.addEventListener("online",function(Ot){Pt.networkState=Tt.ENUM_NETWORK_STATE.online;var Ut=Pt.url;Pt.url="",Pt.setLogServer(Ut),Pt.netWorkFail=!1})},St.prototype.setLogServer=function(Pt){try{return Pt.startsWith("wss:")||Pt.startsWith("ws:")?(this.logType=Tt.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(Pt)):Pt.startsWith("https:")||Pt.startsWith("http:")?(this.logType=Tt.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(Pt)):this.logType=Tt.ENUM_REMOTE_TYPE.DISABLE,!0}catch{return!1}},St.prototype.setLogUrlParams=function(Pt){this.logParams=Pt},St.prototype.openWebSocketLogServer=function(Pt){var Ot=this;this.url!=Pt&&(this.url=Pt)&&(this.stopWebSocketServer(),this.logParams.id_name&&(this.state=Tt.ENUM_CONNECT_STATE.connecting,Pt=Pt+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(Pt),this.service.openHandler(function(){Ot.service.onPush(),Ot.service.startCheck(),Ot.stateCenter.logger.info("zt.rzs.owsls socket open"),Ot.openHandler()}),this.service.closeHandler(function(Ut){Ot.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(Ut.code||Ut)),Ot.state=Tt.ENUM_CONNECT_STATE.disconnected,Ot.service.closeSocket()}),this.service.errorHandler(function(Ut){Ot.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(Ut.code||Ut)),Ot.state=Tt.ENUM_CONNECT_STATE.disconnected,Ot.service.closeSocket()})))},St.prototype.stopWebSocketServer=function(){this.service.closeSocket()},St.prototype.openHttpsLogServer=function(Pt){(this.url=Pt)&&this.stopHttpsServer()},St.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},St.prototype.SendHttpsLog=function(Pt,Ot,Ut,Bt){this.env===Tt.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(Pt,Ot,Ut,Bt):this.SendHttpsLogWeChatMini(Pt,Ot,Ut,Bt)},St.prototype.SendHttpsLogWeb=function(Pt,Ot,Ut,Bt){var xt=this,At=(Pt=JSON.stringify({body:{data:Pt}}),new XMLHttpRequest);At.onreadystatechange=function(){if(At.readyState==4)if(At.status==200){if(At.responseText.length!=0)try{var Mt=JSON.parse(At.responseText).interval;typeof Mt=="number"&&xt.logUploadInterval!==Mt&&xt.openHttpsLogServer(xt.url),Ut&&Ut()}catch{Bt&&Bt()}}else Bt&&Bt()},At.open("POST",this.url,!0),At.send(Pt)},St.prototype.SendHttpsLogWeChatMini=function(Pt,Ot,Ut,Bt){var xt=this;Pt={appid:this.logParams.appid+"",timestamp:new Date().getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:Pt})},wx.request({url:this.url,data:JSON.stringify(Pt),method:"POST",success:function(At){At.data.length!=0&&(typeof(At=At&&At.data&&At.data.interval)=="number"&&xt.logUploadInterval!==At&&xt.openHttpsLogServer(xt.url),Ut&&Ut())},fail:function(At){Bt&&Bt()}})},St.prototype.openHandler=function(){this.state=Tt.ENUM_CONNECT_STATE.connected,this.startReport()},St.prototype.setPostSucCallback=function(Pt,Ot){this.postSucCallbackList[Pt]=Ot},St.prototype.setPostFailCallback=function(Pt,Ot){this.postFailCallbackList[Pt]=Ot},St.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},St.prototype.report=function(Pt,Ot,Ut){this.packageLen++,this.packagesDataSize+=Ot,this.reportQueue.enqueue({reportDatas:Pt,dataLen:Ot,product:Ut}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport()},St.prototype.setBps=function(Pt){this.tokenBucket=new Rt.TokenBucket(It.BUCKET_CONFIG.bucketSize,Pt/8,"sec")},St.prototype.startReport=function(){var Pt,Ot,Ut,Bt,xt=this;this.state===Tt.ENUM_CONNECT_STATE.disconnected?(Bt=this.url,this.url="",this.setLogServer(Bt)):0<this.reportQueue.size()&&(Bt=this.reportQueue.dequeue(),Pt=Bt.reportDatas,Ot=Bt.dataLen,Ut=Bt.product,this.tokenBucket.removeTokens(Ot,function(){xt.netWorkFail?xt.postFailCallbackList[Ut](Pt):xt.reportData(Pt,Ot,Ut,function(){xt.failCount=0,xt.failStartTime=0,xt.packageLen--,xt.packagesDataSize-=Ot,xt.postSucCallbackList[Ut]&&xt.postSucCallbackList[Ut](Pt,Ot,Ut)},function(At){xt.reportQueue.enqueue({reportDatas:Pt,dataLen:Ot,product:Ut}),xt.failCount++,xt.failCount==1&&(xt.failStartTime=Date.now());var Mt,Nt=(Date.now()-xt.failStartTime)/1e3;xt.failCount>=It.FAIL_COUNT&&Nt>It.FAIL_TIME||xt.failCount>=It.FAIL_MAX_COUNT?(xt.netWorkFail=!0,Mt=xt.decodeReportQueue(),Object.keys(xt.postFailCallbackList).forEach(function($t){xt.postFailCallbackList[Ut](Mt[$t])})):xt.startReport()})}))},St.prototype.resumeReport=function(){this.netWorkFail===!0&&this.networkState===Tt.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},St.prototype.reportData=function(Pt,Ot,Ut,Bt,xt){var At=this,Mt=[];Pt.forEach(function(Nt){Mt.push(Nt.packagedContent)}),this.logType==Tt.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState!==Tt.ENUM_NETWORK_STATE.offline?this.service.sendMessage("report",Mt,Bt,function(Nt){var $t;At.state===Tt.ENUM_CONNECT_STATE.disconnected&&Nt===Tt.SOCKET_DISCONNECT&&($t=At.url,At.url="",At.setLogServer($t)),xt&&xt(Nt)}):xt&&xt(Tt.errorList.BROKEN):this.logType==Tt.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(Mt,Ot,Bt,function(){xt&&xt()})},St.prototype.unsigned2signed=function(Pt){var Ot=parseInt(Pt,10);if(256<Ot)return Ot%256;for(var Ut=[];0<Ot;)Ot%2!=0?Ut.push(1):Ut.push(0),Ot=Number(Ot/2);for(Ut.reverse();Ut.length<8;)Ut.unshift(0);var Bt="";if((Ut=Ut.join("")).substr(0,1)==1){for(var xt=1;xt<Ut.length;xt++)Ut.substr(xt,1)==1?Bt+=0:Bt+=1;return"-"+(parseInt(Bt,2)+1)}for(xt=0;xt<Ut.length;xt++)Bt+=Ut.substr(xt,1);return parseInt(Bt,2)},St.prototype.decodeReportQueue=function(){for(var Pt={},Ot=this.reportQueue.size(),Ut=0;Ut<Ot;Ut++){var Bt,xt=(Bt=this.reportQueue.dequeue()).reportDatas,At=Bt.dataLen;Pt[Bt=Bt.product]||(Pt[Bt]=[]),Pt[Bt]=Ct(Pt[Bt],xt),this.reportQueue.enqueue({reportDatas:xt,dataLen:At,product:Bt})}return Pt},St.prototype.readReportQueueData=function(){for(var Pt=[],Ot=this.reportQueue.size(),Ut=0;Ut<Ot;Ut++){var Bt=this.reportQueue.dequeue(),xt=Bt.reportDatas;Bt.dataLen,Bt.product,Pt.push.apply(Pt,Ct(xt))}return Pt},mt.ZegoService=Et=St},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.LogService=void 0;var bt=Et(26),Ct=Et(4),Tt=Et(0);function wt(Rt,It,St,Pt){this.env=Rt,this.product=It,this.pro=St,this.stateCenter=Pt,this.service=new bt.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}wt.prototype.handleSendCommandMsgRsp=function(Rt){var It,St,Pt=this,Ot=this.service.sendCommandMap[Rt.messageId||((It=Rt==null?void 0:Rt.data)==null?void 0:It.message_id)];Ot!=null&&(St=Ot._data,delete this.service.sendCommandMap[Rt.messageId||((It=Rt==null?void 0:Rt.data)==null?void 0:It.message_id)],this.service.sendCommandList.remove(Ot),Rt.code===0?setTimeout(function(){St&&St.success!=null&&St.success(Rt,Pt.cmdSeq)},0):setTimeout(function(){St&&St.error!=null&&St.error(Rt,Pt.cmdSeq)},0))},wt.prototype.onPush=function(){var Rt=this;this.service.onMessage=function(It){Rt.handleSendCommandMsgRsp(It)}},wt.prototype.closeHandler=function(Rt){this.service.closeHandler(Rt)},wt.prototype.openHandler=function(Rt){this.service.openHandler(Rt)},wt.prototype.errorHandler=function(Rt){this.service.errorHandler(Rt)},wt.prototype.getHeader=function(Rt){return{Protocol:"req",cmd:Rt,appid:123,seq:++this.cmdSeq,session_id:""}},wt.prototype.startCheck=function(){this.service.startCheck()},wt.prototype.stopCheck=function(){this.service.stopCheck()},wt.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},wt.prototype.createSocket=function(Rt){this.service.createSocket(Rt),this.responseRouters={}},wt.prototype.closeSocket=function(){this.service.closeSocket()},wt.prototype.sendMessage=function(Rt,It,St,Pt,Ot,Ut){return this.service.isDisConnect()?(Pt&&Pt(Tt.SOCKET_DISCONNECT),0):(Rt=Ot||this.getHeader(Rt),this.service.sendMessage(Rt,It,St,Pt,{timeOut:1e3*Ct.DEFAULT_CONFIG.netTimeout}))},wt.prototype.on=function(Rt,It){this.responseRouters[Rt]=It},mt.LogService=Et=wt},function(yt,mt,Et){var bt=this&&this.__assign||function(){return(bt=Object.assign||function(It){for(var St,Pt=1,Ot=arguments.length;Pt<Ot;Pt++)for(var Ut in St=arguments[Pt])Object.prototype.hasOwnProperty.call(St,Ut)&&(It[Ut]=St[Ut]);return It}).apply(this,arguments)},Ct=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoSocketService=void 0,Et(27)),Tt=Et(0),wt=Et(28);function Rt(It,St,Pt,Ot){this.product=St,this.pro=Pt,this.stateCenter=Ot,this.socket=null,this.sendCommandList=new Tt.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=It}Rt.prototype.createSocket=function(It){this.socket=Ct.createZegoWebSocket(It,this.ENV),this.socket.binaryType="arraybuffer"},Rt.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},Rt.prototype.isDisConnect=function(){return!this.socket||this.socket.readyState!==1},Rt.prototype.sendMessage=function(It,St,Pt,Ot,Ut){Pt===void 0&&(Pt=null),Ot===void 0&&(Ot=null),Ut===void 0&&(Ut={timeOut:6e3});var Bt=bt(bt({},this.stateCenter.processData),{time_upload:Date.now()});return Pt={data:Bt={message_id:It.seq,product:this.product,s:JSON.stringify({speed_detail:St,process:Bt})},seq:It.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:Ut.timeOut,success:Pt,error:Ot},Ot=this.sendCommandList.push(Pt),this.sendCommandMap[Pt.seq]=Ot,this.socket&&this.pro!=="pb"&&(Bt=wt.deflate(JSON.stringify(Bt),{to:"string"}),this.socket.send(Bt)),It.seq},Rt.prototype.checkSendMessageList=function(It){for(var St=It.getFirst();St!=null;)It.remove(St),St._data&&St._data.error&&setTimeout(function(){St&&St._data&&St._data.error&&St._data.error(Tt.errorList.TIMEOUT,St._data.data.message_id,St._data.data.s)},0),St=It.getFirst()},Rt.prototype.checkMessageListTimeout=function(It,St){for(var Pt=It.getFirst(),Ot=Date.parse(new Date+""),Ut=0;!(Pt==null||Pt._data&&Pt._data.sendTime+Pt._data.timeOut>Ot||(Pt._data&&delete St[Pt._data.data.message_id],It.remove(Pt),Pt._data&&Pt._data.error==null||Pt._data&&Pt._data.sendTime+this.sendDataDropTimeout<Ot||Pt&&Pt._data&&Pt._data.error&&Pt._data.error(Tt.errorList.TIMEOUT,Pt._data.data.message_id,Pt._data.data.s),++Ut>=this.sendDataCheckOnceCount));)Pt=It.getFirst()},Rt.prototype.startCheck=function(){var It=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout(function(){It.startCheck()},this.sendDataCheckInterval)},Rt.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},Rt.prototype.openHandler=function(It){var St=this;this.socket&&(this.socket.onopen=function(Pt){St.responseHandler(),It(Pt)})},Rt.prototype.responseHandler=function(){var It=this;this.socket&&(this.socket.onmessage=function(St){St=typeof St.data=="string"?JSON.parse(St.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(St.data))),It.onMessage(St)})},Rt.prototype.closeHandler=function(It){this.socket&&(this.socket.onclose=function(St){It(St)})},Rt.prototype.errorHandler=function(It){this.socket&&(this.socket.onerror=It)},Rt.prototype.onMessage=function(It){},mt.ZegoSocketService=Et=Rt},function(yt,mt,Et){Object.defineProperty(mt,"__esModule",{value:!0}),mt.createZegoWebSocket=mt.ZegoWeiXinMiniWebSocket=void 0;var bt=Et(0),Ct=(Tt.prototype.init=function(){var wt=this;this._websocket&&(this.readyState=0,this._websocket.onOpen(function(Rt){wt.readyState=wt._websocket.readyState,typeof wt.onopen=="function"&&(wt.onopen(Rt),wt._websocket.onClose(function(It){wt.readyState=wt._websocket.readyState,typeof wt.onclose=="function"&&wt.onclose(It)}),wt._websocket.onMessage(function(It){typeof wt.onmessage=="function"&&wt.onmessage(It)}))}),this._websocket.onError(function(Rt){wt.readyState=wt._websocket.readyState,typeof wt.onerror=="function"&&wt.onerror(Rt)}))},Tt.prototype.onopen=function(wt){},Tt.prototype.onerror=function(wt){},Tt.prototype.onclose=function(wt){},Tt.prototype.onmessage=function(wt){},Tt.prototype.send=function(wt){this._websocket&&this._websocket.send({data:wt})},Tt.prototype.close=function(){this._websocket&&this._websocket.close()},Tt);function Tt(wt,Rt){this.url=wt,this.readyState=3,this._websocket=wx.connectSocket({url:wt}),this.init()}mt.ZegoWeiXinMiniWebSocket=Ct,mt.createZegoWebSocket=function(wt,Rt){return new(Rt===bt.ZEGO_ENV.BROWSER?WebSocket:Ct)(wt)}},function(yt,mt,Et){(function(bt){function Ct(sr){for(var xr=sr.length;0<=--xr;)sr[xr]=0}var Tt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),wt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),It=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),St=new Array(576),Pt=(Ct(St),new Array(60)),Ot=(Ct(Pt),new Array(512)),Ut=(Ct(Ot),new Array(256)),Bt=(Ct(Ut),new Array(29));Ct(Bt);var xt,At,Mt,Nt=new Array(30);function $t(sr,xr,dt,Lt,Vt){this.static_tree=sr,this.extra_bits=xr,this.extra_base=dt,this.elems=Lt,this.max_length=Vt,this.has_stree=sr&&sr.length}function Ft(sr,xr){this.dyn_tree=sr,this.max_code=0,this.stat_desc=xr}function jt(sr){for(var xr=0;xr<286;xr++)sr.dyn_ltree[2*xr]=0;for(xr=0;xr<30;xr++)sr.dyn_dtree[2*xr]=0;for(xr=0;xr<19;xr++)sr.bl_tree[2*xr]=0;sr.dyn_ltree[512]=1,sr.opt_len=sr.static_len=0,sr.last_lit=sr.matches=0}function zt(sr){8<sr.bi_valid?qt(sr,sr.bi_buf):0<sr.bi_valid&&(sr.pending_buf[sr.pending++]=sr.bi_buf),sr.bi_buf=0,sr.bi_valid=0}function Yt(sr,xr,dt,Lt){var Vt=2*xr,Zt=2*dt;return sr[Vt]<sr[Zt]||sr[Vt]===sr[Zt]&&Lt[xr]<=Lt[dt]}function Kt(sr,xr,dt){var Lt,Vt,Zt,kt,Gt=0;if(sr.last_lit!==0)for(;Lt=sr.pending_buf[sr.d_buf+2*Gt]<<8|sr.pending_buf[sr.d_buf+2*Gt+1],Vt=sr.pending_buf[sr.l_buf+Gt],Gt++,Lt==0?cr(sr,Vt,xr):(Zt=Ut[Vt],cr(sr,Zt+256+1,xr),(kt=Tt[Zt])!==0&&(Vt-=Bt[Zt],fr(sr,Vt,kt)),Zt=Ht(--Lt),cr(sr,Zt,dt),(kt=wt[Zt])!==0&&(Lt-=Nt[Zt],fr(sr,Lt,kt))),Gt<sr.last_lit;);cr(sr,256,xr)}function er(sr,xr){var dt,Lt,Vt,Zt=xr.dyn_tree,kt=xr.stat_desc.static_tree,Gt=xr.stat_desc.has_stree,Wt=xr.stat_desc.elems,tr=-1;for(sr.heap_len=0,sr.heap_max=573,dt=0;dt<Wt;dt++)Zt[2*dt]!==0?(sr.heap[++sr.heap_len]=tr=dt,sr.depth[dt]=0):Zt[2*dt+1]=0;for(;sr.heap_len<2;)Zt[2*(Vt=sr.heap[++sr.heap_len]=tr<2?++tr:0)]=1,sr.depth[Vt]=0,sr.opt_len--,Gt&&(sr.static_len-=kt[2*Vt+1]);for(xr.max_code=tr,dt=sr.heap_len>>1;1<=dt;dt--)Qr(sr,Zt,dt);for(Vt=Wt;dt=sr.heap[1],sr.heap[1]=sr.heap[sr.heap_len--],Qr(sr,Zt,1),Lt=sr.heap[1],sr.heap[--sr.heap_max]=dt,sr.heap[--sr.heap_max]=Lt,Zt[2*Vt]=Zt[2*dt]+Zt[2*Lt],sr.depth[Vt]=(sr.depth[dt]>=sr.depth[Lt]?sr.depth[dt]:sr.depth[Lt])+1,Zt[2*dt+1]=Zt[2*Lt+1]=Vt,sr.heap[1]=Vt++,Qr(sr,Zt,1),2<=sr.heap_len;);sr.heap[--sr.heap_max]=sr.heap[1];for(var Qt,gr,Tr,kr,Wr,Dr=sr,Mr=xr.dyn_tree,Kr=xr.max_code,wn=xr.stat_desc.static_tree,xn=xr.stat_desc.has_stree,On=xr.stat_desc.extra_bits,Rn=xr.stat_desc.extra_base,co=xr.stat_desc.max_length,qn=0,Pn=0;Pn<=15;Pn++)Dr.bl_count[Pn]=0;for(Mr[2*Dr.heap[Dr.heap_max]+1]=0,Qt=Dr.heap_max+1;Qt<573;Qt++)(Pn=Mr[2*Mr[2*(gr=Dr.heap[Qt])+1]+1]+1)>co&&(Pn=co,qn++),Mr[2*gr+1]=Pn,Kr<gr||(Dr.bl_count[Pn]++,kr=0,Rn<=gr&&(kr=On[gr-Rn]),Wr=Mr[2*gr],Dr.opt_len+=Wr*(Pn+kr),xn&&(Dr.static_len+=Wr*(wn[2*gr+1]+kr)));if(qn!==0){do for(Pn=co-1;Dr.bl_count[Pn]===0;)Pn--;while(Dr.bl_count[Pn]--,Dr.bl_count[Pn+1]+=2,Dr.bl_count[co]--,0<(qn-=2));for(Pn=co;Pn!==0;Pn--)for(gr=Dr.bl_count[Pn];gr!==0;)(Tr=Dr.heap[--Qt])>Kr||(Mr[2*Tr+1]!==Pn&&(Dr.opt_len+=(Pn-Mr[2*Tr+1])*Mr[2*Tr],Mr[2*Tr+1]=Pn),gr--)}Gr(Zt,tr,sr.bl_count)}function ir(sr,xr,dt){var Lt,Vt,Zt=-1,kt=xr[1],Gt=0,Wt=7,tr=4;for(kt===0&&(Wt=138,tr=3),xr[2*(dt+1)+1]=65535,Lt=0;Lt<=dt;Lt++)Vt=kt,kt=xr[2*(Lt+1)+1],++Gt<Wt&&Vt===kt||(Gt<tr?sr.bl_tree[2*Vt]+=Gt:Vt!==0?(Vt!==Zt&&sr.bl_tree[2*Vt]++,sr.bl_tree[32]++):Gt<=10?sr.bl_tree[34]++:sr.bl_tree[36]++,Zt=Vt,tr=(Gt=0)===kt?(Wt=138,3):Vt===kt?(Wt=6,3):(Wt=7,4))}function rr(sr,xr,dt){var Lt,Vt,Zt=-1,kt=xr[1],Gt=0,Wt=7,tr=4;for(kt===0&&(Wt=138,tr=3),Lt=0;Lt<=dt;Lt++)if(Vt=kt,kt=xr[2*(Lt+1)+1],!(++Gt<Wt&&Vt===kt)){if(Gt<tr)for(;cr(sr,Vt,sr.bl_tree),--Gt!=0;);else Vt!==0?(Vt!==Zt&&(cr(sr,Vt,sr.bl_tree),Gt--),cr(sr,16,sr.bl_tree),fr(sr,Gt-3,2)):Gt<=10?(cr(sr,17,sr.bl_tree),fr(sr,Gt-3,3)):(cr(sr,18,sr.bl_tree),fr(sr,Gt-11,7));Zt=Vt,tr=(Gt=0)===kt?(Wt=138,3):Vt===kt?(Wt=6,3):(Wt=7,4)}}function lr(sr,xr,dt,Lt){fr(sr,0+(Lt?1:0),3),Lt=xr,xr=dt,zt(dt=sr),qt(dt,xr),qt(dt,~xr),dt.pending_buf.set(dt.window.subarray(Lt,Lt+xr),dt.pending),dt.pending+=xr}function nr(sr,xr,dt,Lt){var Vt=dr,Zt=Lt+dt;sr^=-1;for(var kt=Lt;kt<Zt;kt++)sr=sr>>>8^Vt[255&(sr^xr[kt])];return-1^sr}function hr(sr,xr){return sr.msg=mr[xr],xr}function vr(sr){return(sr<<1)-(4<sr?9:0)}function yr(sr){var xr=sr.state,dt=xr.pending;(dt=dt>sr.avail_out?sr.avail_out:dt)!==0&&(sr.output.set(xr.pending_buf.subarray(xr.pending_out,xr.pending_out+dt),sr.next_out),sr.next_out+=dt,xr.pending_out+=dt,sr.total_out+=dt,sr.avail_out-=dt,xr.pending-=dt,xr.pending===0&&(xr.pending_out=0))}function Cr(sr,xr){Pr(sr,0<=sr.block_start?sr.block_start:-1,sr.strstart-sr.block_start,xr),sr.block_start=sr.strstart,yr(sr.strm)}function or(sr,xr){sr.pending_buf[sr.pending++]=xr}function ur(sr,xr){sr.pending_buf[sr.pending++]=xr>>>8&255,sr.pending_buf[sr.pending++]=255&xr}function pr(sr,xr){var dt,Lt,Vt=sr.max_chain_length,Zt=sr.strstart,kt=sr.prev_length,Gt=sr.nice_match,Wt=sr.strstart>sr.w_size-Fn?sr.strstart-(sr.w_size-Fn):0,tr=sr.window,Qt=sr.w_mask,gr=sr.prev,Tr=sr.strstart+258,kr=tr[Zt+kt-1],Wr=tr[Zt+kt];sr.prev_length>=sr.good_match&&(Vt>>=2),Gt>sr.lookahead&&(Gt=sr.lookahead);do if(tr[(dt=xr)+kt]===Wr&&tr[dt+kt-1]===kr&&tr[dt]===tr[Zt]&&tr[++dt]===tr[Zt+1]){for(Zt+=2,dt++;tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&tr[++Zt]===tr[++dt]&&Zt<Tr;);if(Lt=258-(Tr-Zt),Zt=Tr-258,kt<Lt){if(sr.match_start=xr,Gt<=(kt=Lt))break;kr=tr[Zt+kt-1],Wr=tr[Zt+kt]}}while((xr=gr[xr&Qt])>Wt&&--Vt!=0);return kt<=sr.lookahead?kt:sr.lookahead}function Er(sr,xr){for(var dt,Lt;;){if(sr.lookahead<Fn){if(Mn(sr),sr.lookahead<Fn&&xr===Br)return 1;if(sr.lookahead===0)break}if(dt=0,3<=sr.lookahead&&(sr.ins_h=Cn(sr,sr.ins_h,sr.window[sr.strstart+3-1]),dt=sr.prev[sr.strstart&sr.w_mask]=sr.head[sr.ins_h],sr.head[sr.ins_h]=sr.strstart),dt!==0&&sr.strstart-dt<=sr.w_size-Fn&&(sr.match_length=pr(sr,dt)),3<=sr.match_length)if(Lt=Or(sr,sr.strstart-sr.match_start,sr.match_length-3),sr.lookahead-=sr.match_length,sr.match_length<=sr.max_lazy_match&&3<=sr.lookahead){for(sr.match_length--;sr.strstart++,sr.ins_h=Cn(sr,sr.ins_h,sr.window[sr.strstart+3-1]),dt=sr.prev[sr.strstart&sr.w_mask]=sr.head[sr.ins_h],sr.head[sr.ins_h]=sr.strstart,--sr.match_length!=0;);sr.strstart++}else sr.strstart+=sr.match_length,sr.match_length=0,sr.ins_h=sr.window[sr.strstart],sr.ins_h=Cn(sr,sr.ins_h,sr.window[sr.strstart+1]);else Lt=Or(sr,0,sr.window[sr.strstart]),sr.lookahead--,sr.strstart++;if(Lt&&(Cr(sr,!1),sr.strm.avail_out===0))return 1}return sr.insert=sr.strstart<2?sr.strstart:2,xr===Fr?(Cr(sr,!0),sr.strm.avail_out===0?3:4):sr.last_lit&&(Cr(sr,!1),sr.strm.avail_out===0)?1:2}function Sr(sr,xr){for(var dt,Lt,Vt;;){if(sr.lookahead<Fn){if(Mn(sr),sr.lookahead<Fn&&xr===Br)return 1;if(sr.lookahead===0)break}if(dt=0,3<=sr.lookahead&&(sr.ins_h=Cn(sr,sr.ins_h,sr.window[sr.strstart+3-1]),dt=sr.prev[sr.strstart&sr.w_mask]=sr.head[sr.ins_h],sr.head[sr.ins_h]=sr.strstart),sr.prev_length=sr.match_length,sr.prev_match=sr.match_start,sr.match_length=2,dt!==0&&sr.prev_length<sr.max_lazy_match&&sr.strstart-dt<=sr.w_size-Fn&&(sr.match_length=pr(sr,dt),sr.match_length<=5&&(sr.strategy===Qn||sr.match_length===3&&4096<sr.strstart-sr.match_start)&&(sr.match_length=2)),3<=sr.prev_length&&sr.match_length<=sr.prev_length){for(Vt=sr.strstart+sr.lookahead-3,Lt=Or(sr,sr.strstart-1-sr.prev_match,sr.prev_length-3),sr.lookahead-=sr.prev_length-1,sr.prev_length-=2;++sr.strstart<=Vt&&(sr.ins_h=Cn(sr,sr.ins_h,sr.window[sr.strstart+3-1]),dt=sr.prev[sr.strstart&sr.w_mask]=sr.head[sr.ins_h],sr.head[sr.ins_h]=sr.strstart),--sr.prev_length!=0;);if(sr.match_available=0,sr.match_length=2,sr.strstart++,Lt&&(Cr(sr,!1),sr.strm.avail_out===0))return 1}else if(sr.match_available){if((Lt=Or(sr,0,sr.window[sr.strstart-1]))&&Cr(sr,!1),sr.strstart++,sr.lookahead--,sr.strm.avail_out===0)return 1}else sr.match_available=1,sr.strstart++,sr.lookahead--}return sr.match_available&&(Lt=Or(sr,0,sr.window[sr.strstart-1]),sr.match_available=0),sr.insert=sr.strstart<2?sr.strstart:2,xr===Fr?(Cr(sr,!0),sr.strm.avail_out===0?3:4):sr.last_lit&&(Cr(sr,!1),sr.strm.avail_out===0)?1:2}Ct(Nt);var Ht=function(sr){return sr<256?Ot[sr]:Ot[256+(sr>>>7)]},qt=function(sr,xr){sr.pending_buf[sr.pending++]=255&xr,sr.pending_buf[sr.pending++]=xr>>>8&255},fr=function(sr,xr,dt){sr.bi_valid>16-dt?(sr.bi_buf|=xr<<sr.bi_valid&65535,qt(sr,sr.bi_buf),sr.bi_buf=xr>>16-sr.bi_valid,sr.bi_valid+=dt-16):(sr.bi_buf|=xr<<sr.bi_valid&65535,sr.bi_valid+=dt)},cr=function(sr,xr,dt){fr(sr,dt[2*xr],dt[2*xr+1])},Ar=function(sr,xr){for(var dt=0;dt|=1&sr,sr>>>=1,dt<<=1,0<--xr;);return dt>>>1},Gr=function(sr,xr,dt){for(var Lt,Vt=new Array(16),Zt=0,kt=1;kt<=15;kt++)Vt[kt]=Zt=Zt+dt[kt-1]<<1;for(Lt=0;Lt<=xr;Lt++){var Gt=sr[2*Lt+1];Gt!==0&&(sr[2*Lt]=Ar(Vt[Gt]++,Gt))}},Qr=function(sr,xr,dt){for(var Lt=sr.heap[dt],Vt=dt<<1;Vt<=sr.heap_len&&(Vt<sr.heap_len&&Yt(xr,sr.heap[Vt+1],sr.heap[Vt],sr.depth)&&Vt++,!Yt(xr,Lt,sr.heap[Vt],sr.depth));)sr.heap[dt]=sr.heap[Vt],dt=Vt,Vt<<=1;sr.heap[dt]=Lt},hn=!1,sn=lr,qr=function(sr,xr,dt,Lt){for(var Vt=65535&sr|0,Zt=sr>>>16&65535|0,kt=0;dt!==0;){for(dt-=kt=2e3<dt?2e3:dt;Zt=Zt+(Vt=Vt+xr[Lt++]|0)|0,--kt;);Vt%=65521,Zt%=65521}return Vt|Zt<<16|0},dr=new Uint32Array(function(){for(var sr=[],xr=0;xr<256;xr++){for(var dt=xr,Lt=0;Lt<8;Lt++)dt=1&dt?3988292384^dt>>>1:dt>>>1;sr[xr]=dt}return sr}()),mr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},br={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Rr=sn,Pr=function(sr,xr,dt,Lt){var Vt,Zt,kt,Gt=0;if(0<sr.level?(sr.strm.data_type===2&&(sr.strm.data_type=function(Qt){for(var gr=4093624447,Tr=0;Tr<=31;Tr++,gr>>>=1)if(1&gr&&Qt.dyn_ltree[2*Tr]!==0)return 0;if(Qt.dyn_ltree[18]!==0||Qt.dyn_ltree[20]!==0||Qt.dyn_ltree[26]!==0)return 1;for(Tr=32;Tr<256;Tr++)if(Qt.dyn_ltree[2*Tr]!==0)return 1;return 0}(sr)),er(sr,sr.l_desc),er(sr,sr.d_desc),Gt=function(Qt){var gr;for(ir(Qt,Qt.dyn_ltree,Qt.l_desc.max_code),ir(Qt,Qt.dyn_dtree,Qt.d_desc.max_code),er(Qt,Qt.bl_desc),gr=18;3<=gr&&Qt.bl_tree[2*It[gr]+1]===0;gr--);return Qt.opt_len+=3*(gr+1)+5+5+4,gr}(sr),Vt=sr.opt_len+3+7>>>3,(Zt=sr.static_len+3+7>>>3)<=Vt&&(Vt=Zt)):Vt=Zt=dt+5,dt+4<=Vt&&xr!==-1)lr(sr,xr,dt,Lt);else if(sr.strategy===4||Zt===Vt)fr(sr,2+(Lt?1:0),3),Kt(sr,St,Pt);else{fr(sr,4+(Lt?1:0),3);var Wt=sr,tr=(xr=sr.l_desc.max_code+1,dt=sr.d_desc.max_code+1,Gt+1);for(fr(Wt,xr-257,5),fr(Wt,dt-1,5),fr(Wt,tr-4,4),kt=0;kt<tr;kt++)fr(Wt,Wt.bl_tree[2*It[kt]+1],3);rr(Wt,Wt.dyn_ltree,xr-1),rr(Wt,Wt.dyn_dtree,dt-1),Kt(sr,sr.dyn_ltree,sr.dyn_dtree)}jt(sr),Lt&&zt(sr)},Or=function(sr,xr,dt){return sr.pending_buf[sr.d_buf+2*sr.last_lit]=xr>>>8&255,sr.pending_buf[sr.d_buf+2*sr.last_lit+1]=255&xr,sr.pending_buf[sr.l_buf+sr.last_lit]=255&dt,sr.last_lit++,xr===0?sr.dyn_ltree[2*dt]++:(sr.matches++,xr--,sr.dyn_ltree[2*(Ut[dt]+256+1)]++,sr.dyn_dtree[2*Ht(xr)]++),sr.last_lit===sr.lit_bufsize-1},Nr=function(sr){fr(sr,2,3),cr(sr,256,St),sr.bi_valid===16?(qt(sr,sr.bi_buf),sr.bi_buf=0,sr.bi_valid=0):8<=sr.bi_valid&&(sr.pending_buf[sr.pending++]=255&sr.bi_buf,sr.bi_buf>>=8,sr.bi_valid-=8)},Br=br.Z_NO_FLUSH,jr=br.Z_PARTIAL_FLUSH,$r=br.Z_FULL_FLUSH,Fr=br.Z_FINISH,Zr=br.Z_BLOCK,pn=br.Z_OK,mn=br.Z_STREAM_END,vn=br.Z_STREAM_ERROR,jn=br.Z_DATA_ERROR,yn=br.Z_BUF_ERROR,Kn=br.Z_DEFAULT_COMPRESSION,Qn=br.Z_FILTERED,bn=br.Z_HUFFMAN_ONLY,so=br.Z_RLE,zr=br.Z_FIXED,zn=br.Z_UNKNOWN,Zn=br.Z_DEFLATED,Fn=262,En=function(sr){for(var xr=sr.length;0<=--xr;)sr[xr]=0},Cn=function(sr,xr,dt){return(xr<<sr.hash_shift^dt)&sr.hash_mask},Mn=function(sr){var xr,dt,Lt,Vt,Zt,kt,Gt,Wt,tr,Qt=sr.w_size;do{if(Wt=sr.window_size-sr.lookahead-sr.strstart,sr.strstart>=Qt+(Qt-Fn)){for(sr.window.set(sr.window.subarray(Qt,Qt+Qt),0),sr.match_start-=Qt,sr.strstart-=Qt,sr.block_start-=Qt,xr=dt=sr.hash_size;Lt=sr.head[--xr],sr.head[xr]=Qt<=Lt?Lt-Qt:0,--dt;);for(xr=dt=Qt;Lt=sr.prev[--xr],sr.prev[xr]=Qt<=Lt?Lt-Qt:0,--dt;);Wt+=Qt}if(sr.strm.avail_in===0)break;if(Zt=sr.strm,kt=sr.window,Gt=sr.strstart+sr.lookahead,tr=void 0,dt=(tr=(tr=Zt.avail_in)>Wt?Wt:tr)===0?0:(Zt.avail_in-=tr,kt.set(Zt.input.subarray(Zt.next_in,Zt.next_in+tr),Gt),Zt.state.wrap===1?Zt.adler=qr(Zt.adler,kt,tr,Gt):Zt.state.wrap===2&&(Zt.adler=nr(Zt.adler,kt,tr,Gt)),Zt.next_in+=tr,Zt.total_in+=tr,tr),sr.lookahead+=dt,3<=sr.lookahead+sr.insert)for(Vt=sr.strstart-sr.insert,sr.ins_h=sr.window[Vt],sr.ins_h=Cn(sr,sr.ins_h,sr.window[Vt+1]);sr.insert&&(sr.ins_h=Cn(sr,sr.ins_h,sr.window[Vt+3-1]),sr.prev[Vt&sr.w_mask]=sr.head[sr.ins_h],sr.head[sr.ins_h]=Vt,Vt++,sr.insert--,!(sr.lookahead+sr.insert<3)););}while(sr.lookahead<Fn&&sr.strm.avail_in!==0)};function Vn(sr,xr,dt,Lt,Vt){this.good_length=sr,this.max_lazy=xr,this.nice_length=dt,this.max_chain=Lt,this.func=Vt}var $n=[new Vn(0,0,0,0,function(sr,xr){var dt=65535;for(dt>sr.pending_buf_size-5&&(dt=sr.pending_buf_size-5);;){if(sr.lookahead<=1){if(Mn(sr),sr.lookahead===0&&xr===Br)return 1;if(sr.lookahead===0)break}sr.strstart+=sr.lookahead,sr.lookahead=0;var Lt=sr.block_start+dt;if((sr.strstart===0||sr.strstart>=Lt)&&(sr.lookahead=sr.strstart-Lt,sr.strstart=Lt,Cr(sr,!1),sr.strm.avail_out===0)||sr.strstart-sr.block_start>=sr.w_size-Fn&&(Cr(sr,!1),sr.strm.avail_out===0))return 1}return sr.insert=0,xr===Fr?(Cr(sr,!0),sr.strm.avail_out===0?3:4):(sr.strstart>sr.block_start&&(Cr(sr,!1),sr.strm.avail_out),1)}),new Vn(4,4,8,4,Er),new Vn(4,5,16,8,Er),new Vn(4,6,32,32,Er),new Vn(4,4,16,16,Sr),new Vn(8,16,32,32,Sr),new Vn(8,16,128,128,Sr),new Vn(8,32,128,256,Sr),new Vn(32,128,258,1024,Sr),new Vn(32,258,258,4096,Sr)];function Sn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),En(this.dyn_ltree),En(this.dyn_dtree),En(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),En(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),En(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Yn=function(sr){if(!sr||!sr.state)return hr(sr,vn);sr.total_in=sr.total_out=0,sr.data_type=zn;var xr=sr.state;return xr.pending=0,xr.pending_out=0,xr.wrap<0&&(xr.wrap=-xr.wrap),xr.status=xr.wrap?42:113,sr.adler=xr.wrap===2?0:1,xr.last_flush=Br,function(dt){if(!hn){for(var Lt,Vt,Zt,kt=new Array(16),Gt=0,Wt=0;Wt<28;Wt++)for(Bt[Wt]=Gt,Lt=0;Lt<1<<Tt[Wt];Lt++)Ut[Gt++]=Wt;for(Ut[Gt-1]=Wt,Wt=Zt=0;Wt<16;Wt++)for(Nt[Wt]=Zt,Lt=0;Lt<1<<wt[Wt];Lt++)Ot[Zt++]=Wt;for(Zt>>=7;Wt<30;Wt++)for(Nt[Wt]=Zt<<7,Lt=0;Lt<1<<wt[Wt]-7;Lt++)Ot[256+Zt++]=Wt;for(Vt=0;Vt<=15;Vt++)kt[Vt]=0;for(Lt=0;Lt<=143;)St[2*Lt+1]=8,Lt++,kt[8]++;for(;Lt<=255;)St[2*Lt+1]=9,Lt++,kt[9]++;for(;Lt<=279;)St[2*Lt+1]=7,Lt++,kt[7]++;for(;Lt<=287;)St[2*Lt+1]=8,Lt++,kt[8]++;for(Gr(St,287,kt),Lt=0;Lt<30;Lt++)Pt[2*Lt+1]=5,Pt[2*Lt]=Ar(Lt,5);xt=new $t(St,Tt,257,286,15),At=new $t(Pt,wt,0,30,15),Mt=new $t(new Array(0),Rt,0,19,7),hn=!0}dt.l_desc=new Ft(dt.dyn_ltree,xt),dt.d_desc=new Ft(dt.dyn_dtree,At),dt.bl_desc=new Ft(dt.bl_tree,Mt),dt.bi_buf=0,dt.bi_valid=0,jt(dt)}(xr),pn};function Vr(sr){return(Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xr){return typeof xr}:function(xr){return xr&&typeof Symbol=="function"&&xr.constructor===Symbol&&xr!==Symbol.prototype?"symbol":typeof xr})(sr)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}for(var Ur=new Uint8Array(256),cn=0;cn<256;cn++)Ur[cn]=252<=cn?6:248<=cn?5:240<=cn?4:224<=cn?3:192<=cn?2:1;function gn(sr){for(var xr,dt,Lt,Vt,Zt=sr.length,kt=0,Gt=0;Gt<Zt;Gt++)(64512&(dt=sr.charCodeAt(Gt)))==55296&&Gt+1<Zt&&(64512&(Lt=sr.charCodeAt(Gt+1)))==56320&&(dt=65536+(dt-55296<<10)+(Lt-56320),Gt++),kt+=dt<128?1:dt<2048?2:dt<65536?3:4;for(xr=new Uint8Array(kt),Gt=Vt=0;Vt<kt;Gt++)(64512&(dt=sr.charCodeAt(Gt)))==55296&&Gt+1<Zt&&(64512&(Lt=sr.charCodeAt(Gt+1)))==56320&&(dt=65536+(dt-55296<<10)+(Lt-56320),Gt++),dt<128?xr[Vt++]=dt:(dt<2048?xr[Vt++]=192|dt>>>6:(dt<65536?xr[Vt++]=224|dt>>>12:(xr[Vt++]=240|dt>>>18,xr[Vt++]=128|dt>>>12&63),xr[Vt++]=128|dt>>>6&63),xr[Vt++]=128|63&dt);return xr}function kn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Ur[254]=Ur[254]=1;var dn=Object.prototype.toString,Bn=br.Z_NO_FLUSH,Xr=br.Z_SYNC_FLUSH,Hn=br.Z_FULL_FLUSH,po=br.Z_FINISH,go=br.Z_OK,mo=br.Z_STREAM_END,Jr=br.Z_DEFAULT_COMPRESSION,bo=br.Z_DEFAULT_STRATEGY,Wn=br.Z_DEFLATED;function Gn(sr){this.options=function(Vt){for(var Zt,kt,Gt=Array.prototype.slice.call(arguments,1);Gt.length;){var Wt=Gt.shift();if(Wt){if(Vr(Wt)!=="object")throw new TypeError(Wt+"must be non-object");for(var tr in Wt)Zt=Wt,kt=tr,Object.prototype.hasOwnProperty.call(Zt,kt)&&(Vt[tr]=Wt[tr])}}return Vt}({level:Jr,method:Wn,chunkSize:16384,windowBits:15,memLevel:8,strategy:bo},sr||{});var xr,dt=((sr=this.options).raw&&0<sr.windowBits?sr.windowBits=-sr.windowBits:sr.gzip&&0<sr.windowBits&&sr.windowBits<16&&(sr.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kn,this.strm.avail_out=0,function(Vt,Zt,kt,Gt,Wt,tr){if(!Vt)return vn;var Qt=1;if(Zt===Kn&&(Zt=6),Gt<0?(Qt=0,Gt=-Gt):15<Gt&&(Qt=2,Gt-=16),Wt<1||9<Wt||kt!==Zn||Gt<8||15<Gt||Zt<0||9<Zt||tr<0||zr<tr)return hr(Vt,vn);Gt===8&&(Gt=9);var gr=new Sn;return(Vt.state=gr).strm=Vt,gr.wrap=Qt,gr.gzhead=null,gr.w_bits=Gt,gr.w_size=1<<gr.w_bits,gr.w_mask=gr.w_size-1,gr.hash_bits=Wt+7,gr.hash_size=1<<gr.hash_bits,gr.hash_mask=gr.hash_size-1,gr.hash_shift=~~((gr.hash_bits+3-1)/3),gr.window=new Uint8Array(2*gr.w_size),gr.head=new Uint16Array(gr.hash_size),gr.prev=new Uint16Array(gr.w_size),gr.lit_bufsize=1<<Wt+6,gr.pending_buf_size=4*gr.lit_bufsize,gr.pending_buf=new Uint8Array(gr.pending_buf_size),gr.d_buf=+gr.lit_bufsize,gr.l_buf=3*gr.lit_bufsize,gr.level=Zt,gr.strategy=tr,gr.method=kt,(Gt=Yn(Qt=Vt))===pn&&((Qt=Qt.state).window_size=2*Qt.w_size,En(Qt.head),Qt.max_lazy_match=$n[Qt.level].max_lazy,Qt.good_match=$n[Qt.level].good_length,Qt.nice_match=$n[Qt.level].nice_length,Qt.max_chain_length=$n[Qt.level].max_chain,Qt.strstart=0,Qt.block_start=0,Qt.lookahead=0,Qt.insert=0,Qt.match_length=Qt.prev_length=2,Qt.match_available=0,Qt.ins_h=0),Gt}(this.strm,sr.level,sr.method,sr.windowBits,sr.memLevel,sr.strategy));if(dt!==go)throw new Error(mr[dt]);if(sr.header&&(Lt=this.strm,xr=sr.header,Lt&&Lt.state&&Lt.state.wrap===2&&(Lt.state.gzhead=xr)),sr.dictionary){var Lt=typeof sr.dictionary=="string"?gn(sr.dictionary):dn.call(sr.dictionary)==="[object ArrayBuffer]"?new Uint8Array(sr.dictionary):sr.dictionary;if((dt=function(Vt,Zt){var kt=Zt.length;if(!Vt||!Vt.state)return vn;var Gt=Vt.state,Wt=Gt.wrap;if(Wt===2||Wt===1&&Gt.status!==42||Gt.lookahead)return vn;Wt===1&&(Vt.adler=qr(Vt.adler,Zt,kt,0)),Gt.wrap=0,kt>=Gt.w_size&&(Wt===0&&(En(Gt.head),Gt.strstart=0,Gt.block_start=0,Gt.insert=0),(tr=new Uint8Array(Gt.w_size)).set(Zt.subarray(kt-Gt.w_size,kt),0),Zt=tr,kt=Gt.w_size);var tr=Vt.avail_in,Qt=Vt.next_in,gr=Vt.input;for(Vt.avail_in=kt,Vt.next_in=0,Vt.input=Zt,Mn(Gt);3<=Gt.lookahead;){for(var Tr=Gt.strstart,kr=Gt.lookahead-2;Gt.ins_h=Cn(Gt,Gt.ins_h,Gt.window[Tr+3-1]),Gt.prev[Tr&Gt.w_mask]=Gt.head[Gt.ins_h],Gt.head[Gt.ins_h]=Tr,Tr++,--kr;);Gt.strstart=Tr,Gt.lookahead=2,Mn(Gt)}return Gt.strstart+=Gt.lookahead,Gt.block_start=Gt.strstart,Gt.insert=Gt.lookahead,Gt.lookahead=0,Gt.match_length=Gt.prev_length=2,Gt.match_available=0,Vt.next_in=Qt,Vt.input=gr,Vt.avail_in=tr,Gt.wrap=Wt,pn}(this.strm,Lt))!==go)throw new Error(mr[dt]);this._dict_set=!0}}function eo(sr,xr){if((xr=new Gn(xr)).push(sr,!0),xr.err)throw xr.msg||mr[xr.err];return xr.result}function ho(sr,xr){return(xr=xr||{}).raw=!0,eo(sr,xr)}function lo(sr,xr){return(xr=xr||{}).gzip=!0,eo(sr,xr)}Gn.prototype.push=function(sr,xr){var dt,Lt,Vt=this.strm,Zt=this.options.chunkSize;if(this.ended)return!1;for(Lt=xr===~~xr?xr:xr===!0?po:Bn,typeof sr=="string"?Vt.input=gn(sr):dn.call(sr)==="[object ArrayBuffer]"?Vt.input=new Uint8Array(sr):Vt.input=sr,Vt.next_in=0,Vt.avail_in=Vt.input.length;;)if(Vt.avail_out===0&&(Vt.output=new Uint8Array(Zt),Vt.next_out=0,Vt.avail_out=Zt),(Lt===Xr||Lt===Hn)&&Vt.avail_out<=6)this.onData(Vt.output.subarray(0,Vt.next_out)),Vt.avail_out=0;else{if(function(kt,Gt){var Wt,tr;if(!kt||!kt.state||Zr<Gt||Gt<0)return kt?hr(kt,vn):vn;var Qt=kt.state;if(!kt.output||!kt.input&&kt.avail_in!==0||Qt.status===666&&Gt!==Fr)return hr(kt,kt.avail_out===0?yn:vn);Qt.strm=kt;var gr=Qt.last_flush;if(Qt.last_flush=Gt,Qt.status===42&&(Qt.wrap===2?(kt.adler=0,or(Qt,31),or(Qt,139),or(Qt,8),Qt.gzhead?(or(Qt,(Qt.gzhead.text?1:0)+(Qt.gzhead.hcrc?2:0)+(Qt.gzhead.extra?4:0)+(Qt.gzhead.name?8:0)+(Qt.gzhead.comment?16:0)),or(Qt,255&Qt.gzhead.time),or(Qt,Qt.gzhead.time>>8&255),or(Qt,Qt.gzhead.time>>16&255),or(Qt,Qt.gzhead.time>>24&255),or(Qt,Qt.level===9?2:Qt.strategy>=bn||Qt.level<2?4:0),or(Qt,255&Qt.gzhead.os),Qt.gzhead.extra&&Qt.gzhead.extra.length&&(or(Qt,255&Qt.gzhead.extra.length),or(Qt,Qt.gzhead.extra.length>>8&255)),Qt.gzhead.hcrc&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending,0)),Qt.gzindex=0,Qt.status=69):(or(Qt,0),or(Qt,0),or(Qt,0),or(Qt,0),or(Qt,0),or(Qt,Qt.level===9?2:Qt.strategy>=bn||Qt.level<2?4:0),or(Qt,3),Qt.status=113)):(Tr=Zn+(Qt.w_bits-8<<4)<<8,Tr|=(Qt.strategy>=bn||Qt.level<2?0:Qt.level<6?1:Qt.level===6?2:3)<<6,Qt.strstart!==0&&(Tr|=32),Tr+=31-Tr%31,Qt.status=113,ur(Qt,Tr),Qt.strstart!==0&&(ur(Qt,kt.adler>>>16),ur(Qt,65535&kt.adler)),kt.adler=1)),Qt.status===69)if(Qt.gzhead.extra){for(Wt=Qt.pending;Qt.gzindex<(65535&Qt.gzhead.extra.length)&&(Qt.pending!==Qt.pending_buf_size||(Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),yr(kt),Wt=Qt.pending,Qt.pending!==Qt.pending_buf_size));)or(Qt,255&Qt.gzhead.extra[Qt.gzindex]),Qt.gzindex++;Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),Qt.gzindex===Qt.gzhead.extra.length&&(Qt.gzindex=0,Qt.status=73)}else Qt.status=73;if(Qt.status===73)if(Qt.gzhead.name){Wt=Qt.pending;do if(Qt.pending===Qt.pending_buf_size&&(Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),yr(kt),Wt=Qt.pending,Qt.pending===Qt.pending_buf_size)){tr=1;break}while(tr=Qt.gzindex<Qt.gzhead.name.length?255&Qt.gzhead.name.charCodeAt(Qt.gzindex++):0,or(Qt,tr),tr!==0);Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),tr===0&&(Qt.gzindex=0,Qt.status=91)}else Qt.status=91;if(Qt.status===91)if(Qt.gzhead.comment){Wt=Qt.pending;do if(Qt.pending===Qt.pending_buf_size&&(Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),yr(kt),Wt=Qt.pending,Qt.pending===Qt.pending_buf_size)){tr=1;break}while(tr=Qt.gzindex<Qt.gzhead.comment.length?255&Qt.gzhead.comment.charCodeAt(Qt.gzindex++):0,or(Qt,tr),tr!==0);Qt.gzhead.hcrc&&Qt.pending>Wt&&(kt.adler=nr(kt.adler,Qt.pending_buf,Qt.pending-Wt,Wt)),tr===0&&(Qt.status=103)}else Qt.status=103;if(Qt.status===103&&(Qt.gzhead.hcrc?(Qt.pending+2>Qt.pending_buf_size&&yr(kt),Qt.pending+2<=Qt.pending_buf_size&&(or(Qt,255&kt.adler),or(Qt,kt.adler>>8&255),kt.adler=0,Qt.status=113)):Qt.status=113),Qt.pending!==0){if(yr(kt),kt.avail_out===0)return Qt.last_flush=-1,pn}else if(kt.avail_in===0&&vr(Gt)<=vr(gr)&&Gt!==Fr)return hr(kt,yn);if(Qt.status===666&&kt.avail_in!==0)return hr(kt,yn);if(kt.avail_in!==0||Qt.lookahead!==0||Gt!==Br&&Qt.status!==666){var Tr=Qt.strategy===bn?function(kr,Wr){for(var Dr;;){if(kr.lookahead===0&&(Mn(kr),kr.lookahead===0)){if(Wr===Br)return 1;break}if(kr.match_length=0,Dr=Or(kr,0,kr.window[kr.strstart]),kr.lookahead--,kr.strstart++,Dr&&(Cr(kr,!1),kr.strm.avail_out===0))return 1}return kr.insert=0,Wr===Fr?(Cr(kr,!0),kr.strm.avail_out===0?3:4):kr.last_lit&&(Cr(kr,!1),kr.strm.avail_out===0)?1:2}(Qt,Gt):Qt.strategy===so?function(kr,Wr){for(var Dr,Mr,Kr,wn,xn=kr.window;;){if(kr.lookahead<=258){if(Mn(kr),kr.lookahead<=258&&Wr===Br)return 1;if(kr.lookahead===0)break}if(kr.match_length=0,3<=kr.lookahead&&0<kr.strstart&&(Mr=xn[Kr=kr.strstart-1])===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]){for(wn=kr.strstart+258;Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Mr===xn[++Kr]&&Kr<wn;);kr.match_length=258-(wn-Kr),kr.match_length>kr.lookahead&&(kr.match_length=kr.lookahead)}if(3<=kr.match_length?(Dr=Or(kr,1,kr.match_length-3),kr.lookahead-=kr.match_length,kr.strstart+=kr.match_length,kr.match_length=0):(Dr=Or(kr,0,kr.window[kr.strstart]),kr.lookahead--,kr.strstart++),Dr&&(Cr(kr,!1),kr.strm.avail_out===0))return 1}return kr.insert=0,Wr===Fr?(Cr(kr,!0),kr.strm.avail_out===0?3:4):kr.last_lit&&(Cr(kr,!1),kr.strm.avail_out===0)?1:2}(Qt,Gt):$n[Qt.level].func(Qt,Gt);if(Tr!==3&&Tr!==4||(Qt.status=666),Tr===1||Tr===3)return kt.avail_out===0&&(Qt.last_flush=-1),pn;if(Tr===2&&(Gt===jr?Nr(Qt):Gt!==Zr&&(Rr(Qt,0,0,!1),Gt===$r&&(En(Qt.head),Qt.lookahead===0&&(Qt.strstart=0,Qt.block_start=0,Qt.insert=0))),yr(kt),kt.avail_out===0))return Qt.last_flush=-1,pn}return Gt!==Fr?pn:Qt.wrap<=0?mn:(Qt.wrap===2?(or(Qt,255&kt.adler),or(Qt,kt.adler>>8&255),or(Qt,kt.adler>>16&255),or(Qt,kt.adler>>24&255),or(Qt,255&kt.total_in),or(Qt,kt.total_in>>8&255),or(Qt,kt.total_in>>16&255),or(Qt,kt.total_in>>24&255)):(ur(Qt,kt.adler>>>16),ur(Qt,65535&kt.adler)),yr(kt),0<Qt.wrap&&(Qt.wrap=-Qt.wrap),Qt.pending!==0?pn:mn)}(Vt,Lt)===mo)return 0<Vt.next_out&&this.onData(Vt.output.subarray(0,Vt.next_out)),dt=function(kt){if(!kt||!kt.state)return vn;var Gt=kt.state.status;return Gt!==42&&Gt!==69&&Gt!==73&&Gt!==91&&Gt!==103&&Gt!==113&&Gt!==666?hr(kt,vn):(kt.state=null,Gt===113?hr(kt,jn):pn)}(this.strm),this.onEnd(dt),this.ended=!0,dt===go;if(Vt.avail_out!==0){if(0<Lt&&0<Vt.next_out)this.onData(Vt.output.subarray(0,Vt.next_out)),Vt.avail_out=0;else if(Vt.avail_in===0)break}else this.onData(Vt.output)}return!0},Gn.prototype.onData=function(sr){this.chunks.push(sr)},Gn.prototype.onEnd=function(sr){sr===go&&(this.result=function(xr){for(var dt=0,Lt=0,Vt=xr.length;Lt<Vt;Lt++)dt+=xr[Lt].length;for(var Zt=new Uint8Array(dt),kt=0,Gt=0,Wt=xr.length;kt<Wt;kt++){var tr=xr[kt];Zt.set(tr,Gt),Gt+=tr.length}return Zt}(this.chunks)),this.chunks=[],this.err=sr,this.msg=this.strm.msg};var Dn={Deflate:Gn,deflate:sn=eo,deflateRaw:ho,gzip:lo,constants:br};bt.Deflate=Gn,bt.constants=br,bt.default=Dn,bt.deflate=sn,bt.deflateRaw=ho,bt.gzip=lo,Object.defineProperty(bt,"__esModule",{value:!0})})(mt)},function(yt,mt,Et){function bt(Ct,Tt,wt,Rt){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=Ct,this.tokensPerInterval=Tt,typeof wt=="string")switch(wt){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+wt)}else this.interval=wt;this.parentBucket=Rt,this.content=0,this.lastDrip=+new Date}Object.defineProperty(mt,"__esModule",{value:!0}),mt.TokenBucket=void 0,bt.prototype.removeTokens=function(Ct,Tt){var wt=this;return this.bucketSize?Ct>this.bucketSize?(setTimeout(Tt.bind(null,"Requested tokens "+Ct+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),Ct>this.content?Rt():this.parentBucket?this.parentBucket.removeTokens(Ct,function(It,St){return It?Tt(It,null):Ct>wt.content?Rt():(wt.content-=Ct,void Tt(null,Math.min(St,wt.content)))}):(this.content-=Ct,setTimeout(Tt.bind(null,null,this.content),0),!0)):(setTimeout(Tt.bind(null,null,Ct,Number.POSITIVE_INFINITY),0),!0);function Rt(){var It=Math.ceil((Ct-wt.content)*(wt.interval/wt.tokensPerInterval));return setTimeout(function(){wt.removeTokens(Ct,Tt)},It),!1}},bt.prototype.tryRemoveTokens=function(Ct){return!(this.bucketSize&&(Ct>this.bucketSize||(this.drip(),Ct>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(Ct)||(this.content-=Ct,0))))},bt.prototype.drip=function(){var Ct,Tt;this.tokensPerInterval?(Ct=+new Date,Tt=Math.max(Ct-this.lastDrip,0),this.lastDrip=Ct,Tt*=this.tokensPerInterval/this.interval,this.content=Math.min(this.content+Tt,this.bucketSize)):this.content=this.bucketSize},mt.TokenBucket=bt},function(yt,mt,Et){var bt=this&&this.__awaiter||function(Ot,Ut,Bt,xt){return new(Bt=Bt||Promise)(function(At,Mt){function Nt(jt){try{Ft(xt.next(jt))}catch(zt){Mt(zt)}}function $t(jt){try{Ft(xt.throw(jt))}catch(zt){Mt(zt)}}function Ft(jt){var zt;jt.done?At(jt.value):((zt=jt.value)instanceof Bt?zt:new Bt(function(Yt){Yt(zt)})).then(Nt,$t)}Ft((xt=xt.apply(Ot,Ut||[])).next())})},Ct=this&&this.__generator||function(Ot,Ut){var Bt,xt,At,Mt={label:0,sent:function(){if(1&At[0])throw At[1];return At[1]},trys:[],ops:[]},Nt={next:$t(0),throw:$t(1),return:$t(2)};return typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function $t(Ft){return function(jt){var zt=[Ft,jt];if(Bt)throw new TypeError("Generator is already executing.");for(;Mt;)try{if(Bt=1,xt&&(At=2&zt[0]?xt.return:zt[0]?xt.throw||((At=xt.return)&&At.call(xt),0):xt.next)&&!(At=At.call(xt,zt[1])).done)return At;switch(xt=0,(zt=At?[2&zt[0],At.value]:zt)[0]){case 0:case 1:At=zt;break;case 4:return Mt.label++,{value:zt[1],done:!1};case 5:Mt.label++,xt=zt[1],zt=[0];continue;case 7:zt=Mt.ops.pop(),Mt.trys.pop();continue;default:if(!(At=0<(At=Mt.trys).length&&At[At.length-1])&&(zt[0]===6||zt[0]===2)){Mt=0;continue}if(zt[0]===3&&(!At||zt[1]>At[0]&&zt[1]<At[3])){Mt.label=zt[1];break}if(zt[0]===6&&Mt.label<At[1]){Mt.label=At[1],At=zt;break}if(At&&Mt.label<At[2]){Mt.label=At[2],Mt.ops.push(zt);break}At[2]&&Mt.ops.pop(),Mt.trys.pop();continue}zt=Ut.call(Ot,Mt)}catch(Yt){zt=[6,Yt],xt=0}finally{Bt=At=0}if(5&zt[0])throw zt[1];return{value:zt[0]?zt[1]:void 0,done:!0}}}},Tt=this&&this.__importDefault||function(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}},wt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoStoreHandler=void 0,Et(11)),Rt=Et(5),It=Et(4),St=Tt(Et(12));function Pt(Ot,Ut,Bt,xt,At,Mt){this.name=Ot,this.storeName=Ut,this.config=Bt,this.traceType=xt,this.staticConfig=At,this.stateCenter=Mt,this.storeSize=0,this.storeTime=0,this.storeDelPer=It.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.store=wt.createZegoStore(Ot,Bt.env,Ut),this.commonStore=wt.createZegoStore("data_common",Bt.env,"reporter")}Pt.prototype.init=function(){return bt(this,void 0,void 0,function(){var Ot,Ut;return Ct(this,function(Bt){switch(Bt.label){case 0:return Bt.trys.push([0,6,,7]),[4,this.transferStoreData()];case 1:return Bt.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(Ot=Bt.sent())?[3,4]:(Ut={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,Ut)]);case 3:return Bt.sent(),[3,5];case 4:Ut=typeof Ot=="string"?JSON.parse(Ot):Ot,this.storeSize=Ut.storeSize,Bt.label=5;case 5:return[3,7];case 6:return Bt.sent(),[3,7];case 7:return[2]}})})},Pt.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},Pt.prototype.resetCommonStore=function(){return bt(this,void 0,void 0,function(){return Ct(this,function(Ot){switch(Ot.label){case 0:return[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return Ot.sent(),[2]}})})},Pt.prototype.transferStoreData=function(){return bt(this,void 0,void 0,function(){var Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt,zt,Yt=this;return Ct(this,function(Kt){switch(Kt.label){case 0:return[4,this.commonStore.keys()];case 1:Ot=Kt.sent(),Ut=0,Kt.label=2;case 2:return Ut<Ot.length?(zt=Ot[Ut])===this.name+this.interSymbol+this.storeName?[3,12]:[4,this.commonStore.getItem(zt)]:[3,13];case 3:return(Ft=typeof(Ft=Kt.sent())=="string"?JSON.parse(Ft):Ft).lock||Ft.pros?[3,12]:($t=zt.split(this.interSymbol),Bt=$t[0],xt=$t[1],[4,(At=wt.createZegoStore(Bt,this.config.env,xt)).keys()]);case 4:return(jt=Kt.sent()).length!=0?[3,5]:[3,11];case 5:return Ft.lock=1,[4,this.commonStore.setItem(zt,Ft)];case 6:Kt.sent(),Mt=0,Kt.label=7;case 7:return Mt<jt.length?(Nt=jt[Mt],[4,At.getItem(Nt)]):[3,11];case 8:return $t=Kt.sent(),Nt.indexOf("pending")!==-1?$t&&JSON.parse($t).forEach(function(er){return bt(Yt,void 0,void 0,function(){return Ct(this,function(ir){switch(ir.label){case 0:return[4,this.storeData(er)];case 1:return ir.sent(),[2]}})})}):(zt=Rt.analyzeKey(Nt),Ft=zt.level,jt=zt.timestamp,zt=zt.seq,this.storeData({level:Ft,timestamp:jt,seq:zt,content:$t})),[4,At.removeItem(Nt)];case 9:Kt.sent(),Kt.label=10;case 10:return Mt++,[3,7];case 11:this.drops.push({name:Bt,storeName:xt}),Kt.label=12;case 12:return Ut++,[3,2];case 13:return setTimeout(function(){return bt(Yt,void 0,void 0,function(){var er,ir,rr;return Ct(this,function(lr){switch(lr.label){case 0:er=0,lr.label=1;case 1:if(!(er<this.drops.length))return[3,7];rr=this.drops[er],ir=rr.name,rr=rr.storeName,lr.label=2;case 2:return lr.trys.push([2,5,,6]),[4,this.dropInstance(ir,rr)];case 3:return lr.sent(),[4,this.commonStore.removeItem(ir+this.interSymbol+rr)];case 4:case 5:return lr.sent(),[3,6];case 6:return er++,[3,1];case 7:return[2]}})})},1e3),[2]}})})},Pt.prototype.dropInstance=function(Ot,Ut){return new Promise(function(Bt,xt){St.default.dropInstance({name:Ot+":"+Ut}).then(function(){Bt()}).catch(function(At){xt(At)})})},Pt.prototype.setDropCallBack=function(Ot){this.dropCallBack=Ot},Pt.prototype.storeData=function(Ot){var Ut=this;return new Promise(function(Bt,xt){return bt(Ut,void 0,void 0,function(){var At,Mt,Nt,$t,Ft,jt=this;return Ct(this,function(zt){switch(zt.label){case 0:At=Ot.level,Mt=Ot.timestamp,$t=Ot.seq,Nt=Ot.content,$t=At+"_"+Mt+"_"+$t,zt.label=1;case 1:return zt.trys.push([1,3,,4]),[4,this.store.getItem($t)];case 2:return zt.sent()?(Bt(),[2]):[3,4];case 3:return zt.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(Ot),[2];if(Ft=Rt.calculateMemSize($t)+Rt.calculateMemSize(Nt),this.staticConfig.totalDBSize-Ft<=0)return this.dropDBData(At,$t,Nt).then(function(){jt.droping=!1,jt.bufferDump()}).catch(function(Yt){}),Bt(),[2];zt.label=5;case 5:return zt.trys.push([5,8,,9]),[4,this.store.setItem($t,Nt)];case 6:return zt.sent(),this.storeSize+=Ft,this.staticConfig.totalDBSize-=Ft,[4,this.refreshStoreInfo()];case 7:return zt.sent(),Bt(),[3,9];case 8:return zt.sent().name==="QuotaExceededError"&&this.dropDBData(At,$t,Nt).then(function(){jt.droping=!1,jt.bufferDump()}).catch(function(Yt){}),[3,9];case 9:return[2]}})})})},Pt.prototype.loadPendingData=function(){return bt(this,void 0,void 0,function(){var Ot=this;return Ct(this,function(Ut){switch(Ut.label){case 0:return[4,this.store.keys()];case 1:return Ut.sent().forEach(function(Bt){return bt(Ot,void 0,void 0,function(){var xt,At=this;return Ct(this,function(Mt){switch(Mt.label){case 0:return Bt.indexOf("pending")===-1?[3,3]:[4,this.store.getItem(Bt)];case 1:return(xt=Mt.sent())?(JSON.parse(xt).forEach(function(Nt){return bt(At,void 0,void 0,function(){return Ct(this,function($t){switch($t.label){case 0:return[4,this.storeData(Nt)];case 1:return $t.sent(),[2]}})})}),[4,this.store.removeItem(Bt)]):[3,3];case 2:Mt.sent(),Mt.label=3;case 3:return[2]}})})}),[2]}})})},Pt.prototype.storePendingData=function(Ot){return bt(this,void 0,void 0,function(){return Ct(this,function(Ut){switch(Ut.label){case 0:return[4,this.store.setItem("pending"+new Date().getTime(),JSON.stringify(Ot))];case 1:return Ut.sent(),[2]}})})},Pt.prototype.bufferDump=function(){return bt(this,void 0,void 0,function(){var Ot;return Ct(this,function(Ut){switch(Ut.label){case 0:return(Ot=this.bufferData.pop())?[4,this.storeData(Ot)]:[3,2];case 1:Ut.sent(),this.bufferDump(),Ut.label=2;case 2:return[2]}})})},Pt.prototype.dropDBData=function(Ot,Ut,Bt){return bt(this,void 0,void 0,function(){var xt=this;return Ct(this,function(At){return this.droping=!0,[2,new Promise(function(Mt,Nt){return bt(xt,void 0,void 0,function(){var $t,Ft,jt,zt;return Ct(this,function(Yt){switch(Yt.label){case 0:return Yt.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(jt=Yt.sent()).reverse(),$t=Math.ceil(jt.length*this.storeDelPer),zt=0,Yt.label=2;case 2:return zt<$t?[4,this.store.getItem(jt[zt])]:[3,7];case 3:return(Ft=Yt.sent())==null?[3,6]:[4,this.store.removeItem(jt[zt])];case 4:return Yt.sent(),jt=Rt.calculateMemSize(jt[zt])+Rt.calculateMemSize(Ft),this.staticConfig.totalDBSize+=jt,this.storeSize-=jt,[4,this.refreshStoreInfo()];case 5:Yt.sent(),this.dropCallBack(Ft),Yt.label=6;case 6:return zt++,[3,2];case 7:return[4,this.store.setItem(Ut,Bt)];case 8:return Yt.sent(),this.storeSize+=Rt.calculateMemSize(Ut)+Rt.calculateMemSize(Bt),[4,this.refreshStoreInfo()];case 9:return Yt.sent(),Mt(),[3,11];case 10:return zt=Yt.sent(),Nt(zt),[3,11];case 11:return[2]}})})})]})})},Pt.prototype.removeDataItem=function(Ot){var Ut=this;return new Promise(function(Bt,xt){return bt(Ut,void 0,void 0,function(){var At,Mt,Nt,$t,Ft;return Ct(this,function(jt){switch(jt.label){case 0:At=Ot.level,Mt=Ot.timestamp,Nt=Ot.seq,Ot.content,Nt=At+"_"+Mt+"_"+Nt,jt.label=1;case 1:return jt.trys.push([1,6,,7]),[4,this.store.getItem(Nt)];case 2:return($t=jt.sent())?[4,this.store.removeItem(Nt)]:[3,5];case 3:return jt.sent(),Ft=this.config.env==1?Rt.calculateMemSize(JSON.parse($t)):Rt.calculateMemSize($t),Ft=Rt.calculateMemSize(Nt)+Ft,this.storeSize-=Ft,this.staticConfig.totalDBSize+=Ft,this.traceType.DB_O_DONE+=Ft,[4,this.refreshStoreInfo()];case 4:jt.sent(),Bt(),jt.label=5;case 5:return[3,7];case 6:return Ft=jt.sent(),xt(Ft),[3,7];case 7:return[2]}})})})},Pt.prototype.refreshStoreInfo=function(){return bt(this,void 0,void 0,function(){return Ct(this,function(Ot){switch(Ot.label){case 0:return Ot.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return Ot.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:Ot.sent(),Ot.label=3;case 3:return[3,5];case 4:return Ot.sent(),[3,5];case 5:return[2]}})})},Pt.prototype.readStoreDataItem=function(){var Ot=this;return new Promise(function(Ut,Bt){return bt(Ot,void 0,void 0,function(){var xt,At,Mt,Nt;return Ct(this,function($t){switch($t.label){case 0:return $t.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return At=$t.sent(),[4,this.store.getItem(At[0])];case 2:return Nt=$t.sent(),Mt=Rt.analyzeKey(At[0]),xt=Mt.level,At=Mt.timestamp,Mt=Mt.seq,Ut({level:xt,timestamp:At,seq:Mt,content:Nt}),[3,4];case 3:return Nt=$t.sent(),Bt(Nt),[3,4];case 4:return[2]}})})})},Pt.prototype.loadDBData=function(Ot,Ut,Bt,xt){var At=this;return new Promise(function(Mt,Nt){return bt(At,void 0,void 0,function(){var $t,Ft,jt,zt,Yt,Kt,er,ir,rr,lr;return Ct(this,function(nr){switch(nr.label){case 0:return nr.trys.push([0,6,,7]),[4,this.store.keys()];case 1:$t=nr.sent(),Ft=[],Yt=zt=lr=jt=0,nr.label=2;case 2:return Yt<$t.length?xt($t[Yt])?[3,4]:[4,this.store.getItem($t[Yt])]:[3,5];case 3:if((rr=nr.sent())==null)return[3,4];if(ir=Rt.analyzeKey($t[Yt]),Kt=ir.level,er=ir.timestamp,ir=ir.seq,Ft.push({level:Kt,timestamp:er,seq:ir,content:rr,key:$t[Yt]}),rr=Rt.calculateMemSize(rr),lr+=rr,Ot<=(jt+=rr)&&(jt=0,zt++),Ut<=zt&&Bt<=lr)return[3,5];nr.label=4;case 4:return Yt++,[3,2];case 5:return Mt({datas:Ft,len:lr}),[3,7];case 6:return lr=nr.sent(),Nt(lr),[3,7];case 7:return[2]}})})})},Pt.prototype.sortKeys=function(Ot,Ut){Ut===void 0&&(Ut=!1),Ot.sort(function(Bt,xt){var At=Bt.split("_");return(xt=+(Bt=xt.split("_"))[0]-+At[0])?xt:(xt=+Bt[1]-+At[1])||+Bt[2]-+At[2]}),Ut&&Ot.reverse()},mt.ZegoStoreHandler=Et=Pt},function(yt,mt,Et){var bt=Et(32),Ct=Et(33).Buffer;function Tt(wt){return function(Rt){if(Ct.isBuffer(Rt))return Rt.length;switch(typeof Rt){case"string":return Rt.length*bt.STRING;case"boolean":return bt.BOOLEAN;case"number":return bt.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(Rt)?Symbol.keyFor(Rt).length*bt.STRING:(Rt.toString().length-8)*bt.STRING;case"object":if(Array.isArray(Rt))return Rt.map(Tt(wt)).reduce(function(xt,At){return xt+At},0);var It=wt,St=Rt;if(St==null)return 0;for(var Pt=0,Ot=function(xt){const At=[];for(var Mt in xt)At.push(Mt);return Object.getOwnPropertySymbols&&(xt=Object.getOwnPropertySymbols(xt),Array.prototype.push.apply(At,xt)),At}(St),Ut=0;Ut<Ot.length;Ut++){var Bt=Ot[Ut];if(typeof St[Bt]=="object"&&St[Bt]!==null){if(It.has(St[Bt]))continue;It.add(St[Bt])}Pt+=Tt(It)(Bt);try{Pt+=Tt(It)(St[Bt])}catch(xt){xt instanceof RangeError&&(Pt=0)}}return Pt;default:return 0}}}yt.exports=function(wt){return Tt(new WeakSet)(wt)}},function(yt,mt){yt.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(yt,mt,Et){(function(bt){var Ct=Et(35),Tt=Et(36),wt=Et(37);function Rt(){return St.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function It(or,ur){if(Rt()<ur)throw new RangeError("Invalid typed array length");return St.TYPED_ARRAY_SUPPORT?(or=new Uint8Array(ur)).__proto__=St.prototype:(or=or===null?new St(ur):or).length=ur,or}function St(or,ur,pr){if(!(St.TYPED_ARRAY_SUPPORT||this instanceof St))return new St(or,ur,pr);if(typeof or!="number")return Pt(this,or,ur,pr);if(typeof ur=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ut(this,or)}function Pt(or,ur,pr,Er){if(typeof ur=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&ur instanceof ArrayBuffer){var Sr=or,Ht=ur,qt=pr;if(Ht.byteLength,qt<0||Ht.byteLength<qt)throw new RangeError("'offset' is out of bounds");if(Ht.byteLength<qt+(Er||0))throw new RangeError("'length' is out of bounds");return Ht=qt===void 0&&Er===void 0?new Uint8Array(Ht):Er===void 0?new Uint8Array(Ht,qt):new Uint8Array(Ht,qt,Er),St.TYPED_ARRAY_SUPPORT?(Sr=Ht).__proto__=St.prototype:Sr=Bt(Sr,Ht),Sr}if(typeof ur=="string"){if(qt=or,Er=ur,Ht=pr,!St.isEncoding(Ht=typeof Ht=="string"&&Ht!==""?Ht:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');return(Ht=(qt=It(qt,Sr=0|At(Er,Ht))).write(Er,Ht))!==Sr?qt.slice(0,Ht):qt}var fr;if(pr=or,Er=ur,St.isBuffer(Er))return(pr=It(pr,fr=0|xt(Er.length))).length!==0&&Er.copy(pr,0,0,fr),pr;if(Er){if(typeof ArrayBuffer<"u"&&Er.buffer instanceof ArrayBuffer||"length"in Er)return typeof Er.length!="number"||(fr=Er.length)!=fr?It(pr,0):Bt(pr,Er);if(Er.type==="Buffer"&&wt(Er.data))return Bt(pr,Er.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ot(or){if(typeof or!="number")throw new TypeError('"size" argument must be a number');if(or<0)throw new RangeError('"size" argument must not be negative')}function Ut(or,ur){if(Ot(ur),or=It(or,ur<0?0:0|xt(ur)),!St.TYPED_ARRAY_SUPPORT)for(var pr=0;pr<ur;++pr)or[pr]=0;return or}function Bt(or,ur){var pr=ur.length<0?0:0|xt(ur.length);or=It(or,pr);for(var Er=0;Er<pr;Er+=1)or[Er]=255&ur[Er];return or}function xt(or){if(or>=Rt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Rt().toString(16)+" bytes");return 0|or}function At(or,ur){if(St.isBuffer(or))return or.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(or)||or instanceof ArrayBuffer))return or.byteLength;var pr=(or=typeof or!="string"?""+or:or).length;if(pr===0)return 0;for(var Er=!1;;)switch(ur){case"ascii":case"latin1":case"binary":return pr;case"utf8":case"utf-8":case void 0:return vr(or).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pr;case"hex":return pr>>>1;case"base64":return yr(or).length;default:if(Er)return vr(or).length;ur=(""+ur).toLowerCase(),Er=!0}}function Mt(or,ur,pr){var Er=or[ur];or[ur]=or[pr],or[pr]=Er}function Nt(or,ur,pr,Er,Sr){if(or.length===0)return-1;if(typeof pr=="string"?(Er=pr,pr=0):2147483647<pr?pr=2147483647:pr<-2147483648&&(pr=-2147483648),pr=+pr,(pr=(pr=isNaN(pr)?Sr?0:or.length-1:pr)<0?or.length+pr:pr)>=or.length){if(Sr)return-1;pr=or.length-1}else if(pr<0){if(!Sr)return-1;pr=0}if(typeof ur=="string"&&(ur=St.from(ur,Er)),St.isBuffer(ur))return ur.length===0?-1:$t(or,ur,pr,Er,Sr);if(typeof ur=="number")return ur&=255,St.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?(Sr?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(or,ur,pr):$t(or,[ur],pr,Er,Sr);throw new TypeError("val must be string, number or Buffer")}function $t(or,ur,pr,Er,Sr){var Ht=1,qt=or.length,fr=ur.length;if(Er!==void 0&&((Er=String(Er).toLowerCase())==="ucs2"||Er==="ucs-2"||Er==="utf16le"||Er==="utf-16le")){if(or.length<2||ur.length<2)return-1;qt/=Ht=2,fr/=2,pr/=2}function cr(sn,qr){return Ht===1?sn[qr]:sn.readUInt16BE(qr*Ht)}if(Sr)for(var Ar=-1,Gr=pr;Gr<qt;Gr++)if(cr(or,Gr)===cr(ur,Ar===-1?0:Gr-Ar)){if(Gr-(Ar=Ar===-1?Gr:Ar)+1===fr)return Ar*Ht}else Ar!==-1&&(Gr-=Gr-Ar),Ar=-1;else for(Gr=pr=qt<pr+fr?qt-fr:pr;0<=Gr;Gr--){for(var Qr=!0,hn=0;hn<fr;hn++)if(cr(or,Gr+hn)!==cr(ur,hn)){Qr=!1;break}if(Qr)return Gr}return-1}function Ft(or,ur,pr,Er){return Cr(function(Sr){for(var Ht=[],qt=0;qt<Sr.length;++qt)Ht.push(255&Sr.charCodeAt(qt));return Ht}(ur),or,pr,Er)}function jt(or,ur,pr){pr=Math.min(or.length,pr);for(var Er=[],Sr=ur;Sr<pr;){var Ht,qt,fr,cr,Ar=or[Sr],Gr=null,Qr=239<Ar?4:223<Ar?3:191<Ar?2:1;if(Sr+Qr<=pr)switch(Qr){case 1:Ar<128&&(Gr=Ar);break;case 2:(192&(Ht=or[Sr+1]))==128&&127<(cr=(31&Ar)<<6|63&Ht)&&(Gr=cr);break;case 3:Ht=or[Sr+1],qt=or[Sr+2],(192&Ht)==128&&(192&qt)==128&&2047<(cr=(15&Ar)<<12|(63&Ht)<<6|63&qt)&&(cr<55296||57343<cr)&&(Gr=cr);break;case 4:Ht=or[Sr+1],qt=or[Sr+2],fr=or[Sr+3],(192&Ht)==128&&(192&qt)==128&&(192&fr)==128&&65535<(cr=(15&Ar)<<18|(63&Ht)<<12|(63&qt)<<6|63&fr)&&cr<1114112&&(Gr=cr)}Gr===null?(Gr=65533,Qr=1):65535<Gr&&(Gr-=65536,Er.push(Gr>>>10&1023|55296),Gr=56320|1023&Gr),Er.push(Gr),Sr+=Qr}var hn=Er,sn=hn.length;if(sn<=zt)return String.fromCharCode.apply(String,hn);for(var qr="",dr=0;dr<sn;)qr+=String.fromCharCode.apply(String,hn.slice(dr,dr+=zt));return qr}mt.Buffer=St,mt.SlowBuffer=function(or){return St.alloc(+(or=+or!=or?0:or))},mt.INSPECT_MAX_BYTES=50,St.TYPED_ARRAY_SUPPORT=bt.TYPED_ARRAY_SUPPORT!==void 0?bt.TYPED_ARRAY_SUPPORT:function(){try{var or=new Uint8Array(1);return or.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},or.foo()===42&&typeof or.subarray=="function"&&or.subarray(1,1).byteLength===0}catch{return!1}}(),mt.kMaxLength=Rt(),St.poolSize=8192,St._augment=function(or){return or.__proto__=St.prototype,or},St.from=function(or,ur,pr){return Pt(null,or,ur,pr)},St.TYPED_ARRAY_SUPPORT&&(St.prototype.__proto__=Uint8Array.prototype,St.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&St[Symbol.species]===St&&Object.defineProperty(St,Symbol.species,{value:null,configurable:!0})),St.alloc=function(or,ur,pr){return Ot(or),or<=0||ur===void 0?It(null,or):typeof pr=="string"?It(null,or).fill(ur,pr):It(null,or).fill(ur)},St.allocUnsafe=function(or){return Ut(null,or)},St.allocUnsafeSlow=function(or){return Ut(null,or)},St.isBuffer=function(or){return!(or==null||!or._isBuffer)},St.compare=function(or,ur){if(!St.isBuffer(or)||!St.isBuffer(ur))throw new TypeError("Arguments must be Buffers");if(or===ur)return 0;for(var pr=or.length,Er=ur.length,Sr=0,Ht=Math.min(pr,Er);Sr<Ht;++Sr)if(or[Sr]!==ur[Sr]){pr=or[Sr],Er=ur[Sr];break}return pr<Er?-1:Er<pr?1:0},St.isEncoding=function(or){switch(String(or).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},St.concat=function(or,ur){if(!wt(or))throw new TypeError('"list" argument must be an Array of Buffers');if(or.length===0)return St.alloc(0);if(ur===void 0)for(Sr=ur=0;Sr<or.length;++Sr)ur+=or[Sr].length;for(var pr=St.allocUnsafe(ur),Er=0,Sr=0;Sr<or.length;++Sr){var Ht=or[Sr];if(!St.isBuffer(Ht))throw new TypeError('"list" argument must be an Array of Buffers');Ht.copy(pr,Er),Er+=Ht.length}return pr},St.byteLength=At,St.prototype._isBuffer=!0,St.prototype.swap16=function(){var or=this.length;if(or%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ur=0;ur<or;ur+=2)Mt(this,ur,ur+1);return this},St.prototype.swap32=function(){var or=this.length;if(or%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ur=0;ur<or;ur+=4)Mt(this,ur,ur+3),Mt(this,ur+1,ur+2);return this},St.prototype.swap64=function(){var or=this.length;if(or%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ur=0;ur<or;ur+=8)Mt(this,ur,ur+7),Mt(this,ur+1,ur+6),Mt(this,ur+2,ur+5),Mt(this,ur+3,ur+4);return this},St.prototype.toString=function(){var or=0|this.length;return or==0?"":arguments.length===0?jt(this,0,or):function(ur,pr,Er){var Sr=!1;if((pr=pr===void 0||pr<0?0:pr)>this.length||(Er=Er===void 0||Er>this.length?this.length:Er)<=0||(Er>>>=0)<=(pr>>>=0))return"";for(ur=ur||"utf8";;)switch(ur){case"hex":var Ht=pr,qt=Er,fr=this.length;(!qt||qt<0||fr<qt)&&(qt=fr);for(var cr,Ar="",Gr=Ht=!Ht||Ht<0?0:Ht;Gr<qt;++Gr)Ar+=(cr=this[Gr])<16?"0"+cr.toString(16):cr.toString(16);return Ar;case"utf8":case"utf-8":return jt(this,pr,Er);case"ascii":fr=pr;var Qr=Er,hn="";Qr=Math.min(this.length,Qr);for(var sn=fr;sn<Qr;++sn)hn+=String.fromCharCode(127&this[sn]);return hn;case"latin1":case"binary":Ht=pr;var qr=Er,dr="";qr=Math.min(this.length,qr);for(var mr=Ht;mr<qr;++mr)dr+=String.fromCharCode(this[mr]);return dr;case"base64":return Rr=Er,(br=pr)===0&&Rr===this.length?Ct.fromByteArray(this):Ct.fromByteArray(this.slice(br,Rr));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var br=pr,Rr=Er,Pr=this.slice(br,Rr),Or="",Nr=0;Nr<Pr.length;Nr+=2)Or+=String.fromCharCode(Pr[Nr]+256*Pr[Nr+1]);return Or;default:if(Sr)throw new TypeError("Unknown encoding: "+ur);ur=(ur+"").toLowerCase(),Sr=!0}}.apply(this,arguments)},St.prototype.equals=function(or){if(St.isBuffer(or))return this===or||St.compare(this,or)===0;throw new TypeError("Argument must be a Buffer")},St.prototype.inspect=function(){var or="",ur=mt.INSPECT_MAX_BYTES;return 0<this.length&&(or=this.toString("hex",0,ur).match(/.{2}/g).join(" "),this.length>ur&&(or+=" ... ")),"<Buffer "+or+">"},St.prototype.compare=function(or,ur,pr,Er,Sr){if(!St.isBuffer(or))throw new TypeError("Argument must be a Buffer");if(pr===void 0&&(pr=or?or.length:0),Er===void 0&&(Er=0),Sr===void 0&&(Sr=this.length),(ur=ur===void 0?0:ur)<0||pr>or.length||Er<0||Sr>this.length)throw new RangeError("out of range index");if(Sr<=Er&&pr<=ur)return 0;if(Sr<=Er)return-1;if(pr<=ur)return 1;if(this===or)return 0;for(var Ht=(Sr>>>=0)-(Er>>>=0),qt=(pr>>>=0)-(ur>>>=0),fr=Math.min(Ht,qt),cr=this.slice(Er,Sr),Ar=or.slice(ur,pr),Gr=0;Gr<fr;++Gr)if(cr[Gr]!==Ar[Gr]){Ht=cr[Gr],qt=Ar[Gr];break}return Ht<qt?-1:qt<Ht?1:0},St.prototype.includes=function(or,ur,pr){return this.indexOf(or,ur,pr)!==-1},St.prototype.indexOf=function(or,ur,pr){return Nt(this,or,ur,pr,!0)},St.prototype.lastIndexOf=function(or,ur,pr){return Nt(this,or,ur,pr,!1)},St.prototype.write=function(or,ur,pr,Er){if(ur===void 0)Er="utf8",pr=this.length,ur=0;else if(pr===void 0&&typeof ur=="string")Er=ur,pr=this.length,ur=0;else{if(!isFinite(ur))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ur|=0,isFinite(pr)?(pr|=0,Er===void 0&&(Er="utf8")):(Er=pr,pr=void 0)}var Sr=this.length-ur;if((pr===void 0||Sr<pr)&&(pr=Sr),0<or.length&&(pr<0||ur<0)||ur>this.length)throw new RangeError("Attempt to write outside buffer bounds");Er=Er||"utf8";for(var Ht,qt,fr,cr,Ar=!1;;)switch(Er){case"hex":var Gr,Qr=or,hn=pr,sn=(Gr=Number(ur)||0,this.length-Gr);if((!hn||sn<(hn=Number(hn)))&&(hn=sn),(sn=Qr.length)%2!=0)throw new TypeError("Invalid hex string");sn/2<hn&&(hn=sn/2);for(var qr=0;qr<hn;++qr){var dr=parseInt(Qr.substr(2*qr,2),16);if(isNaN(dr))return qr;this[Gr+qr]=dr}return qr;case"utf8":case"utf-8":return qt=ur,fr=pr,Cr(vr(or,(Ht=this).length-qt),Ht,qt,fr);case"ascii":case"latin1":case"binary":return Ft(this,or,ur,pr);case"base64":return Ht=this,qt=ur,fr=pr,Cr(yr(or),Ht,qt,fr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sn=ur,cr=pr,Cr(function(mr,br){for(var Rr,Pr,Or=[],Nr=0;Nr<mr.length&&!((br-=2)<0);++Nr)Rr=(Pr=mr.charCodeAt(Nr))>>8,Or.push(Pr%=256),Or.push(Rr);return Or}(or,this.length-sn),this,sn,cr);default:if(Ar)throw new TypeError("Unknown encoding: "+Er);Er=(""+Er).toLowerCase(),Ar=!0}},St.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var zt=4096;function Yt(or,ur,pr){if(or%1!=0||or<0)throw new RangeError("offset is not uint");if(pr<or+ur)throw new RangeError("Trying to access beyond buffer length")}function Kt(or,ur,pr,Er,Sr,Ht){if(!St.isBuffer(or))throw new TypeError('"buffer" argument must be a Buffer instance');if(Sr<ur||ur<Ht)throw new RangeError('"value" argument is out of bounds');if(pr+Er>or.length)throw new RangeError("Index out of range")}function er(or,ur,pr,Er){ur<0&&(ur=65535+ur+1);for(var Sr=0,Ht=Math.min(or.length-pr,2);Sr<Ht;++Sr)or[pr+Sr]=(ur&255<<8*(Er?Sr:1-Sr))>>>8*(Er?Sr:1-Sr)}function ir(or,ur,pr,Er){ur<0&&(ur=4294967295+ur+1);for(var Sr=0,Ht=Math.min(or.length-pr,4);Sr<Ht;++Sr)or[pr+Sr]=ur>>>8*(Er?Sr:3-Sr)&255}function rr(or,ur,pr,Er){if(pr+Er>or.length)throw new RangeError("Index out of range");if(pr<0)throw new RangeError("Index out of range")}function lr(or,ur,pr,Er,Sr){return Sr||rr(or,0,pr,4),Tt.write(or,ur,pr,Er,23,4),pr+4}function nr(or,ur,pr,Er,Sr){return Sr||rr(or,0,pr,8),Tt.write(or,ur,pr,Er,52,8),pr+8}St.prototype.slice=function(or,ur){var pr=this.length;if((or=~~or)<0?(or+=pr)<0&&(or=0):pr<or&&(or=pr),(ur=ur===void 0?pr:~~ur)<0?(ur+=pr)<0&&(ur=0):pr<ur&&(ur=pr),ur<or&&(ur=or),St.TYPED_ARRAY_SUPPORT)(Sr=this.subarray(or,ur)).__proto__=St.prototype;else for(var Er=ur-or,Sr=new St(Er,void 0),Ht=0;Ht<Er;++Ht)Sr[Ht]=this[Ht+or];return Sr},St.prototype.readUIntLE=function(or,ur,pr){or|=0,ur|=0,pr||Yt(or,ur,this.length);for(var Er=this[or],Sr=1,Ht=0;++Ht<ur&&(Sr*=256);)Er+=this[or+Ht]*Sr;return Er},St.prototype.readUIntBE=function(or,ur,pr){or|=0,ur|=0,pr||Yt(or,ur,this.length);for(var Er=this[or+--ur],Sr=1;0<ur&&(Sr*=256);)Er+=this[or+--ur]*Sr;return Er},St.prototype.readUInt8=function(or,ur){return ur||Yt(or,1,this.length),this[or]},St.prototype.readUInt16LE=function(or,ur){return ur||Yt(or,2,this.length),this[or]|this[or+1]<<8},St.prototype.readUInt16BE=function(or,ur){return ur||Yt(or,2,this.length),this[or]<<8|this[or+1]},St.prototype.readUInt32LE=function(or,ur){return ur||Yt(or,4,this.length),(this[or]|this[or+1]<<8|this[or+2]<<16)+16777216*this[or+3]},St.prototype.readUInt32BE=function(or,ur){return ur||Yt(or,4,this.length),16777216*this[or]+(this[or+1]<<16|this[or+2]<<8|this[or+3])},St.prototype.readIntLE=function(or,ur,pr){or|=0,ur|=0,pr||Yt(or,ur,this.length);for(var Er=this[or],Sr=1,Ht=0;++Ht<ur&&(Sr*=256);)Er+=this[or+Ht]*Sr;return(Sr*=128)<=Er&&(Er-=Math.pow(2,8*ur)),Er},St.prototype.readIntBE=function(or,ur,pr){or|=0,ur|=0,pr||Yt(or,ur,this.length);for(var Er=ur,Sr=1,Ht=this[or+--Er];0<Er&&(Sr*=256);)Ht+=this[or+--Er]*Sr;return(Sr*=128)<=Ht&&(Ht-=Math.pow(2,8*ur)),Ht},St.prototype.readInt8=function(or,ur){return ur||Yt(or,1,this.length),128&this[or]?-1*(255-this[or]+1):this[or]},St.prototype.readInt16LE=function(or,ur){return ur||Yt(or,2,this.length),32768&(or=this[or]|this[or+1]<<8)?4294901760|or:or},St.prototype.readInt16BE=function(or,ur){return ur||Yt(or,2,this.length),32768&(or=this[or+1]|this[or]<<8)?4294901760|or:or},St.prototype.readInt32LE=function(or,ur){return ur||Yt(or,4,this.length),this[or]|this[or+1]<<8|this[or+2]<<16|this[or+3]<<24},St.prototype.readInt32BE=function(or,ur){return ur||Yt(or,4,this.length),this[or]<<24|this[or+1]<<16|this[or+2]<<8|this[or+3]},St.prototype.readFloatLE=function(or,ur){return ur||Yt(or,4,this.length),Tt.read(this,or,!0,23,4)},St.prototype.readFloatBE=function(or,ur){return ur||Yt(or,4,this.length),Tt.read(this,or,!1,23,4)},St.prototype.readDoubleLE=function(or,ur){return ur||Yt(or,8,this.length),Tt.read(this,or,!0,52,8)},St.prototype.readDoubleBE=function(or,ur){return ur||Yt(or,8,this.length),Tt.read(this,or,!1,52,8)},St.prototype.writeUIntLE=function(or,ur,pr,Er){or=+or,ur|=0,pr|=0,Er||Kt(this,or,ur,pr,Math.pow(2,8*pr)-1,0);var Sr=1,Ht=0;for(this[ur]=255&or;++Ht<pr&&(Sr*=256);)this[ur+Ht]=or/Sr&255;return ur+pr},St.prototype.writeUIntBE=function(or,ur,pr,Er){or=+or,ur|=0,pr|=0,Er||Kt(this,or,ur,pr,Math.pow(2,8*pr)-1,0);var Sr=pr-1,Ht=1;for(this[ur+Sr]=255&or;0<=--Sr&&(Ht*=256);)this[ur+Sr]=or/Ht&255;return ur+pr},St.prototype.writeUInt8=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,1,255,0),St.TYPED_ARRAY_SUPPORT||(or=Math.floor(or)),this[ur]=255&or,ur+1},St.prototype.writeUInt16LE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,2,65535,0),St.TYPED_ARRAY_SUPPORT?(this[ur]=255&or,this[ur+1]=or>>>8):er(this,or,ur,!0),ur+2},St.prototype.writeUInt16BE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,2,65535,0),St.TYPED_ARRAY_SUPPORT?(this[ur]=or>>>8,this[ur+1]=255&or):er(this,or,ur,!1),ur+2},St.prototype.writeUInt32LE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,4,4294967295,0),St.TYPED_ARRAY_SUPPORT?(this[ur+3]=or>>>24,this[ur+2]=or>>>16,this[ur+1]=or>>>8,this[ur]=255&or):ir(this,or,ur,!0),ur+4},St.prototype.writeUInt32BE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,4,4294967295,0),St.TYPED_ARRAY_SUPPORT?(this[ur]=or>>>24,this[ur+1]=or>>>16,this[ur+2]=or>>>8,this[ur+3]=255&or):ir(this,or,ur,!1),ur+4},St.prototype.writeIntLE=function(or,ur,pr,Er){or=+or,ur|=0,Er||Kt(this,or,ur,pr,(Er=Math.pow(2,8*pr-1))-1,-Er);var Sr=0,Ht=1,qt=0;for(this[ur]=255&or;++Sr<pr&&(Ht*=256);)or<0&&qt===0&&this[ur+Sr-1]!==0&&(qt=1),this[ur+Sr]=(or/Ht>>0)-qt&255;return ur+pr},St.prototype.writeIntBE=function(or,ur,pr,Er){or=+or,ur|=0,Er||Kt(this,or,ur,pr,(Er=Math.pow(2,8*pr-1))-1,-Er);var Sr=pr-1,Ht=1,qt=0;for(this[ur+Sr]=255&or;0<=--Sr&&(Ht*=256);)or<0&&qt===0&&this[ur+Sr+1]!==0&&(qt=1),this[ur+Sr]=(or/Ht>>0)-qt&255;return ur+pr},St.prototype.writeInt8=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,1,127,-128),St.TYPED_ARRAY_SUPPORT||(or=Math.floor(or)),this[ur]=255&(or=or<0?255+or+1:or),ur+1},St.prototype.writeInt16LE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,2,32767,-32768),St.TYPED_ARRAY_SUPPORT?(this[ur]=255&or,this[ur+1]=or>>>8):er(this,or,ur,!0),ur+2},St.prototype.writeInt16BE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,2,32767,-32768),St.TYPED_ARRAY_SUPPORT?(this[ur]=or>>>8,this[ur+1]=255&or):er(this,or,ur,!1),ur+2},St.prototype.writeInt32LE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,4,2147483647,-2147483648),St.TYPED_ARRAY_SUPPORT?(this[ur]=255&or,this[ur+1]=or>>>8,this[ur+2]=or>>>16,this[ur+3]=or>>>24):ir(this,or,ur,!0),ur+4},St.prototype.writeInt32BE=function(or,ur,pr){return or=+or,ur|=0,pr||Kt(this,or,ur,4,2147483647,-2147483648),or<0&&(or=4294967295+or+1),St.TYPED_ARRAY_SUPPORT?(this[ur]=or>>>24,this[ur+1]=or>>>16,this[ur+2]=or>>>8,this[ur+3]=255&or):ir(this,or,ur,!1),ur+4},St.prototype.writeFloatLE=function(or,ur,pr){return lr(this,or,ur,!0,pr)},St.prototype.writeFloatBE=function(or,ur,pr){return lr(this,or,ur,!1,pr)},St.prototype.writeDoubleLE=function(or,ur,pr){return nr(this,or,ur,!0,pr)},St.prototype.writeDoubleBE=function(or,ur,pr){return nr(this,or,ur,!1,pr)},St.prototype.copy=function(or,ur,pr,Er){if(pr=pr||0,Er||Er===0||(Er=this.length),ur>=or.length&&(ur=or.length),(Er=0<Er&&Er<pr?pr:Er)===pr||or.length===0||this.length===0)return 0;if((ur=ur||0)<0)throw new RangeError("targetStart out of bounds");if(pr<0||pr>=this.length)throw new RangeError("sourceStart out of bounds");if(Er<0)throw new RangeError("sourceEnd out of bounds");Er>this.length&&(Er=this.length);var Sr,Ht=(Er=or.length-ur<Er-pr?or.length-ur+pr:Er)-pr;if(this===or&&pr<ur&&ur<Er)for(Sr=Ht-1;0<=Sr;--Sr)or[Sr+ur]=this[Sr+pr];else if(Ht<1e3||!St.TYPED_ARRAY_SUPPORT)for(Sr=0;Sr<Ht;++Sr)or[Sr+ur]=this[Sr+pr];else Uint8Array.prototype.set.call(or,this.subarray(pr,pr+Ht),ur);return Ht},St.prototype.fill=function(or,ur,pr,Er){if(typeof or=="string"){var Sr;if(typeof ur=="string"?(Er=ur,ur=0,pr=this.length):typeof pr=="string"&&(Er=pr,pr=this.length),or.length===1&&(Sr=or.charCodeAt(0))<256&&(or=Sr),Er!==void 0&&typeof Er!="string")throw new TypeError("encoding must be a string");if(typeof Er=="string"&&!St.isEncoding(Er))throw new TypeError("Unknown encoding: "+Er)}else typeof or=="number"&&(or&=255);if(ur<0||this.length<ur||this.length<pr)throw new RangeError("Out of range index");if(!(pr<=ur))if(ur>>>=0,pr=pr===void 0?this.length:pr>>>0,typeof(or=or||0)=="number")for(fr=ur;fr<pr;++fr)this[fr]=or;else for(var Ht=St.isBuffer(or)?or:vr(new St(or,Er).toString()),qt=Ht.length,fr=0;fr<pr-ur;++fr)this[fr+ur]=Ht[fr%qt];return this};var hr=/[^+\/0-9A-Za-z-_]/g;function vr(or,ur){var pr;ur=ur||1/0;for(var Er=or.length,Sr=null,Ht=[],qt=0;qt<Er;++qt){if(55295<(pr=or.charCodeAt(qt))&&pr<57344){if(!Sr){if(56319<pr){-1<(ur-=3)&&Ht.push(239,191,189);continue}if(qt+1===Er){-1<(ur-=3)&&Ht.push(239,191,189);continue}Sr=pr;continue}if(pr<56320){-1<(ur-=3)&&Ht.push(239,191,189),Sr=pr;continue}pr=65536+(Sr-55296<<10|pr-56320)}else Sr&&-1<(ur-=3)&&Ht.push(239,191,189);if(Sr=null,pr<128){if(--ur<0)break;Ht.push(pr)}else if(pr<2048){if((ur-=2)<0)break;Ht.push(pr>>6|192,63&pr|128)}else if(pr<65536){if((ur-=3)<0)break;Ht.push(pr>>12|224,pr>>6&63|128,63&pr|128)}else{if(!(pr<1114112))throw new Error("Invalid code point");if((ur-=4)<0)break;Ht.push(pr>>18|240,pr>>12&63|128,pr>>6&63|128,63&pr|128)}}return Ht}function yr(or){return Ct.toByteArray(function(ur){var pr;if((ur=((pr=ur).trim?pr.trim():pr.replace(/^\s+|\s+$/g,"")).replace(hr,"")).length<2)return"";for(;ur.length%4!=0;)ur+="=";return ur}(or))}function Cr(or,ur,pr,Er){for(var Sr=0;Sr<Er&&!(Sr+pr>=ur.length||Sr>=or.length);++Sr)ur[Sr+pr]=or[Sr];return Sr}}).call(this,Et(34))},function(yt,mt){var Et=function(){return this}();try{Et=Et||new Function("return this")()}catch{typeof window=="object"&&(Et=window)}yt.exports=Et},function(yt,mt,Et){mt.byteLength=function(Pt){var Ot;return 3*((Pt=(Ot=St(Pt))[0])+(Ot=Ot[1]))/4-Ot},mt.toByteArray=function(Pt){for(var Ot,Ut=(Bt=St(Pt))[0],Bt=Bt[1],xt=new Tt(3*(Ut+Bt)/4-Bt),At=0,Mt=0<Bt?Ut-4:Ut,Nt=0;Nt<Mt;Nt+=4)Ot=Ct[Pt.charCodeAt(Nt)]<<18|Ct[Pt.charCodeAt(Nt+1)]<<12|Ct[Pt.charCodeAt(Nt+2)]<<6|Ct[Pt.charCodeAt(Nt+3)],xt[At++]=Ot>>16&255,xt[At++]=Ot>>8&255,xt[At++]=255&Ot;return Bt===2&&(Ot=Ct[Pt.charCodeAt(Nt)]<<2|Ct[Pt.charCodeAt(Nt+1)]>>4,xt[At++]=255&Ot),Bt===1&&(Ot=Ct[Pt.charCodeAt(Nt)]<<10|Ct[Pt.charCodeAt(Nt+1)]<<4|Ct[Pt.charCodeAt(Nt+2)]>>2,xt[At++]=Ot>>8&255,xt[At++]=255&Ot),xt},mt.fromByteArray=function(Pt){for(var Ot,Ut=Pt.length,Bt=Ut%3,xt=[],At=0,Mt=Ut-Bt;At<Mt;At+=16383)xt.push(function(Nt,$t){for(var Ft,jt=[],zt=At;zt<$t;zt+=3)Ft=(Nt[zt]<<16&16711680)+(Nt[zt+1]<<8&65280)+(255&Nt[zt+2]),jt.push(bt[Ft>>18&63]+bt[Ft>>12&63]+bt[Ft>>6&63]+bt[63&Ft]);return jt.join("")}(Pt,Mt<At+16383?Mt:At+16383));return Bt==1?(Ot=Pt[Ut-1],xt.push(bt[Ot>>2]+bt[Ot<<4&63]+"==")):Bt==2&&(Ot=(Pt[Ut-2]<<8)+Pt[Ut-1],xt.push(bt[Ot>>10]+bt[Ot>>4&63]+bt[Ot<<2&63]+"=")),xt.join("")};for(var bt=[],Ct=[],Tt=typeof Uint8Array<"u"?Uint8Array:Array,wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rt=0,It=wt.length;Rt<It;++Rt)bt[Rt]=wt[Rt],Ct[wt.charCodeAt(Rt)]=Rt;function St(Pt){var Ot=Pt.length;if(0<Ot%4)throw new Error("Invalid string. Length must be a multiple of 4");return[Pt=(Pt=Pt.indexOf("="))===-1?Ot:Pt,Pt===Ot?0:4-Pt%4]}Ct["-".charCodeAt(0)]=62,Ct["_".charCodeAt(0)]=63},function(yt,mt){mt.read=function(Et,bt,Ct,Tt,wt){var Rt,It,St=8*wt-Tt-1,Pt=(1<<St)-1,Ot=Pt>>1,Ut=-7,Bt=Ct?wt-1:0,xt=Ct?-1:1;for(Ct=Et[bt+Bt],Bt+=xt,Rt=Ct&(1<<-Ut)-1,Ct>>=-Ut,Ut+=St;0<Ut;Rt=256*Rt+Et[bt+Bt],Bt+=xt,Ut-=8);for(It=Rt&(1<<-Ut)-1,Rt>>=-Ut,Ut+=Tt;0<Ut;It=256*It+Et[bt+Bt],Bt+=xt,Ut-=8);if(Rt===0)Rt=1-Ot;else{if(Rt===Pt)return It?NaN:1/0*(Ct?-1:1);It+=Math.pow(2,Tt),Rt-=Ot}return(Ct?-1:1)*It*Math.pow(2,Rt-Tt)},mt.write=function(Et,bt,Ct,Tt,wt,Rt){var It,St,Pt=8*Rt-wt-1,Ot=(1<<Pt)-1,Ut=Ot>>1,Bt=wt===23?Math.pow(2,-24)-Math.pow(2,-77):0,xt=Tt?0:Rt-1,At=Tt?1:-1;for(Rt=bt<0||bt===0&&1/bt<0?1:0,bt=Math.abs(bt),isNaN(bt)||bt===1/0?(St=isNaN(bt)?1:0,It=Ot):(It=Math.floor(Math.log(bt)/Math.LN2),bt*(Tt=Math.pow(2,-It))<1&&(It--,Tt*=2),2<=(bt+=1<=It+Ut?Bt/Tt:Bt*Math.pow(2,1-Ut))*Tt&&(It++,Tt/=2),Ot<=It+Ut?(St=0,It=Ot):1<=It+Ut?(St=(bt*Tt-1)*Math.pow(2,wt),It+=Ut):(St=bt*Math.pow(2,Ut-1)*Math.pow(2,wt),It=0));8<=wt;Et[Ct+xt]=255&St,xt+=At,St/=256,wt-=8);for(It=It<<wt|St,Pt+=wt;0<Pt;Et[Ct+xt]=255&It,xt+=At,It/=256,Pt-=8);Et[Ct+xt-At]|=128*Rt}},function(yt,mt){var Et={}.toString;yt.exports=Array.isArray||function(bt){return Et.call(bt)=="[object Array]"}},function(yt,mt,Et){var bt=this&&this.__read||function(It,St){var Pt=typeof Symbol=="function"&&It[Symbol.iterator];if(!Pt)return It;var Ot,Ut,Bt=Pt.call(It),xt=[];try{for(;(St===void 0||0<St--)&&!(Ot=Bt.next()).done;)xt.push(Ot.value)}catch(At){Ut={error:At}}finally{try{Ot&&!Ot.done&&(Pt=Bt.return)&&Pt.call(Bt)}finally{if(Ut)throw Ut.error}}return xt},Ct=this&&this.__spread||function(){for(var It=[],St=0;St<arguments.length;St++)It=It.concat(bt(arguments[St]));return It},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.PendingQueue=void 0,Et(0)),wt=Et(5);function Rt(It,St,Pt,Ot){var Ut=this;this.levels=It,this.product=St,this.staticConfig=Pt,this.stateCenter=Ot,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,It.forEach(function(Bt){Ut.cacheMap.set(Bt,new Tt.Queue)})}Rt.prototype.enqueue=function(It,St){!(St=this.cacheMap.get(St))||St.all().find(function(Pt){return Pt.content==It.content})||(St.enqueue(It),St=wt.calculateMemSize(It.content),this.pendingDataSize+=St,this.size++,this.staticConfig.totalAvailCache-=St,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize))},Rt.prototype.dequeue=function(It){return It=(It=this.cacheMap.get(It))==null?void 0:It.dequeue(),this.size--,this.deCallback&&this.deCallback(),It},Rt.prototype.findInQueue=function(It){var St=(St=this.cacheMap.get(It.level))==null?void 0:St.all();return St==null?void 0:St.find(function(Pt){return Pt.key===It.key})},Rt.prototype.readReportData=function(It){var St=Ct(this.cacheMap.entries());return It=this.readData(St,It,!0),this.reset(),{totalLen:It.totalLen,reportDataArr:It.resArr}},Rt.prototype.readStoreData=function(It){var St=Math.ceil(this.pendingDataSize*It);return It=Ct(this.cacheMap.entries()).reverse(),St=this.readData(It,St,!1),this.refresh(St.totalLen),{totalLen:St.totalLen,storeArr:St.resArr}},Rt.prototype.readData=function(It,St,Pt){var Ot=[],Ut=0;e:for(var Bt=0;Bt<It.length;Bt++)for(var xt=bt(It[Bt],2),At=xt[0],Mt=xt[1];Mt.size();){var Nt=this.dequeue(At);if(Ot.push(Nt),St<(Ut+=wt.calculateMemSize(Nt.content)))break e}return{totalLen:Ut,resArr:Ot}},Rt.prototype.decodeReportData=function(It){var St=this;It.forEach(function(Pt){St.enqueue(Pt,Pt.level)})},Rt.prototype.setListener=function(It){this.enCallback=It.enCallback,this.deCallback=It.deCallback},Rt.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},Rt.prototype.refresh=function(It){this.pendingDataSize-=It,this.staticConfig.totalAvailCache+=It},Rt.prototype.reset=function(){this.byteLength=0},mt.PendingQueue=Et=Rt},function(yt,mt,Et){var bt=this&&this.__awaiter||function(Rt,It,St,Pt){return new(St=St||Promise)(function(Ot,Ut){function Bt(Mt){try{At(Pt.next(Mt))}catch(Nt){Ut(Nt)}}function xt(Mt){try{At(Pt.throw(Mt))}catch(Nt){Ut(Nt)}}function At(Mt){var Nt;Mt.done?Ot(Mt.value):((Nt=Mt.value)instanceof St?Nt:new St(function($t){$t(Nt)})).then(Bt,xt)}At((Pt=Pt.apply(Rt,It||[])).next())})},Ct=this&&this.__generator||function(Rt,It){var St,Pt,Ot,Ut={label:0,sent:function(){if(1&Ot[0])throw Ot[1];return Ot[1]},trys:[],ops:[]},Bt={next:xt(0),throw:xt(1),return:xt(2)};return typeof Symbol=="function"&&(Bt[Symbol.iterator]=function(){return this}),Bt;function xt(At){return function(Mt){var Nt=[At,Mt];if(St)throw new TypeError("Generator is already executing.");for(;Ut;)try{if(St=1,Pt&&(Ot=2&Nt[0]?Pt.return:Nt[0]?Pt.throw||((Ot=Pt.return)&&Ot.call(Pt),0):Pt.next)&&!(Ot=Ot.call(Pt,Nt[1])).done)return Ot;switch(Pt=0,(Nt=Ot?[2&Nt[0],Ot.value]:Nt)[0]){case 0:case 1:Ot=Nt;break;case 4:return Ut.label++,{value:Nt[1],done:!1};case 5:Ut.label++,Pt=Nt[1],Nt=[0];continue;case 7:Nt=Ut.ops.pop(),Ut.trys.pop();continue;default:if(!(Ot=0<(Ot=Ut.trys).length&&Ot[Ot.length-1])&&(Nt[0]===6||Nt[0]===2)){Ut=0;continue}if(Nt[0]===3&&(!Ot||Nt[1]>Ot[0]&&Nt[1]<Ot[3])){Ut.label=Nt[1];break}if(Nt[0]===6&&Ut.label<Ot[1]){Ut.label=Ot[1],Ot=Nt;break}if(Ot&&Ut.label<Ot[2]){Ut.label=Ot[2],Ut.ops.push(Nt);break}Ot[2]&&Ut.ops.pop(),Ut.trys.pop();continue}Nt=It.call(Rt,Ut)}catch($t){Nt=[6,$t],Pt=0}finally{St=Ot=0}if(5&Nt[0])throw Nt[1];return{value:Nt[0]?Nt[1]:void 0,done:!0}}}},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.loadJS=void 0,Et(40));function wt(Rt,It,St){return(It=Tt.decrypt(Rt,It))&&Tt.hashMd5(It)===St?It:""}mt.loadJS=function(Rt,It,St,Pt,Ot,Ut,Bt){var xt=this;return new Promise(function(At,Mt){return bt(xt,void 0,void 0,function(){var Nt,$t,Ft,jt,zt;return Ct(this,function(Yt){switch(Yt.label){case 0:if(Nt="dy",Rt)return[3,7];Yt.label=1;case 1:return Yt.trys.push([1,5,,6]),[4,It.getItem("code")];case 2:return $t=Yt.sent(),[4,It.getItem("key")];case 3:return Ft=Yt.sent(),[4,It.getItem("hash")];case 4:jt=Yt.sent();var Kt=wt($t,Ft,jt)||Ut,er=Nt,ir=Bt,rr=document.getElementsByTagName("HEAD").item(0),lr=document.createElement("script");lr.language="javascript",lr.type="text/javascript",lr.id=er,lr.param=ir;try{lr.appendChild(document.createTextNode(Kt))}catch{lr.text=Kt}return rr.appendChild(lr),At(),[3,6];case 5:return Yt.sent(),Mt(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{zt=new ActiveXObject("Msxml2.XMLHTTP")}catch{zt=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(zt=new XMLHttpRequest);return zt.open("GET",St,!0),zt.send(null),zt.onreadystatechange=function(){return bt(this,void 0,void 0,function(){return Ct(this,function(nr){switch(nr.label){case 0:if(zt.readyState!=4)return[3,10];if(!(200<=zt.status&&zt.status<300||zt.status==0||zt.status==304))return[3,8];nr.label=1;case 1:return nr.trys.push([1,6,,7]),wt(zt.responseText,Pt,Ot)?[4,It.setItem("code",zt.responseText)]:[3,5];case 2:return nr.sent(),[4,It.setItem("key",Pt)];case 3:return nr.sent(),[4,It.setItem("hash",Ot)];case 4:nr.sent(),nr.label=5;case 5:return At(),[3,7];case 6:return nr.sent(),Mt(),[3,7];case 7:return[2];case 8:return Mt(),[2];case 9:return[3,11];case 10:case 11:return[2]}})})},[2]}})})})}},function(yt,mt,Et){var bt=this&&this.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}},Ct=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.hashMd5=mt.decrypt=void 0,bt(Et(41))),Tt=bt(Et(42)),wt=bt(Et(43));mt.decrypt=function(Rt,It){var St="";try{St=Tt.default.decrypt(Rt,It).toString(wt.default)}catch{}return St},mt.hashMd5=function(Rt){return Ct.default(Rt).toString()}},function(yt,mt){yt.exports=ut},function(yt,mt){yt.exports=ht},function(yt,mt){yt.exports=ft},function(yt,mt,Et){function bt(){this.logLevel=mt.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(mt,"__esModule",{value:!0}),mt.ZegoLog=mt.ENUM_LOG_LEVEL=void 0,mt.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},bt.prototype.setLogLevel=function(Ct){return(Ct=mt.ENUM_LOG_LEVEL[Ct])!==void 0&&(this.logLevel=Ct,!0)},bt.prototype.debug=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt];var wt=Ct.join(" ");this.logLevel!==mt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=mt.ENUM_LOG_LEVEL.DEBUG&&console.debug(wt)},bt.prototype.log=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt];var wt=Ct.join(" ");this.logLevel!==mt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=mt.ENUM_LOG_LEVEL.INFO&&console.log(wt)},bt.prototype.info=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt];var wt=Ct.join(" ");this.logLevel!==mt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=mt.ENUM_LOG_LEVEL.INFO&&console.info(wt)},bt.prototype.warn=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt];var wt=Ct.join(" ");this.logLevel!==mt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=mt.ENUM_LOG_LEVEL.WARN&&console.warn(wt)},bt.prototype.error=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt];var wt=Ct.join(" ");this.logLevel!==mt.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=mt.ENUM_LOG_LEVEL.ERROR&&console.error(wt)},mt.ZegoLog=bt},function(yt,mt,Et){function bt(Ct){this.logger=Ct,this._log=Ct}Object.defineProperty(mt,"__esModule",{value:!0}),mt.StateCenter=void 0,bt.prototype.isLogin=function(){return!0},mt.StateCenter=bt},function(yt,mt,Et){var bt=this&&this.__read||function(Rt,It){var St=typeof Symbol=="function"&&Rt[Symbol.iterator];if(!St)return Rt;var Pt,Ot,Ut=St.call(Rt),Bt=[];try{for(;(It===void 0||0<It--)&&!(Pt=Ut.next()).done;)Bt.push(Pt.value)}catch(xt){Ot={error:xt}}finally{try{Pt&&!Pt.done&&(St=Ut.return)&&St.call(Ut)}finally{if(Ot)throw Ot.error}}return Bt},Ct=this&&this.__spread||function(){for(var Rt=[],It=0;It<arguments.length;It++)Rt=Rt.concat(bt(arguments[It]));return Rt},Tt=(Object.defineProperty(mt,"__esModule",{value:!0}),mt.DynamicCode=void 0,Et(3));function wt(){this.init()}wt.prototype.init=function(){window.dyObj={}},wt.prototype.runExecution=function(Rt,It,St){St=new(Function.bind.apply(Function,Ct([void 0],Rt,[St])));try{St.apply(void 0,Ct(It))}catch(Pt){Tt.log.error(Pt)}},mt.DynamicCode=Et=wt}],ct.c=vt,ct.d=function(yt,mt,Et){ct.o(yt,mt)||Object.defineProperty(yt,mt,{enumerable:!0,get:Et})},ct.r=function(yt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(yt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(yt,"__esModule",{value:!0})},ct.t=function(yt,mt){if(1&mt&&(yt=ct(yt)),8&mt||4&mt&&typeof yt=="object"&&yt&&yt.__esModule)return yt;var Et=Object.create(null);if(ct.r(Et),Object.defineProperty(Et,"default",{enumerable:!0,value:yt}),2&mt&&typeof yt!="string")for(var bt in yt)ct.d(Et,bt,function(Ct){return yt[Ct]}.bind(null,bt));return Et},ct.n=function(yt){var mt=yt&&yt.__esModule?function(){return yt.default}:function(){return yt};return ct.d(mt,"a",mt),mt},ct.o=function(yt,mt){return Object.prototype.hasOwnProperty.call(yt,mt)},ct.p="",ct(ct.s=13))},function(st,at,lt){st.exports=lt(2).enc.Hex},function(st,at,lt){(function(ct){st.exports=function pt(ut,ht,ft){function gt(mt,Et){if(!ht[mt]){if(!ut[mt]){if(vt)return vt(mt,!0);var bt=new Error("Cannot find module '"+mt+"'");throw bt.code="MODULE_NOT_FOUND",bt}bt=ht[mt]={exports:{}},ut[mt][0].call(bt.exports,function(Ct){return gt(ut[mt][1][Ct]||Ct)},bt,bt.exports,pt,ut,ht,ft)}return ht[mt].exports}for(var vt=!1,yt=0;yt<ft.length;yt++)gt(ft[yt]);return gt}({1:[function(pt,ut,ht){(function(ft){var gt,vt,yt,mt,Et=ft.MutationObserver||ft.WebKitMutationObserver,bt=Et?(gt=0,Et=new Et(Tt),vt=ft.document.createTextNode(""),Et.observe(vt,{characterData:!0}),function(){vt.data=gt=++gt%2}):ft.setImmediate||ft.MessageChannel===void 0?"document"in ft&&"onreadystatechange"in ft.document.createElement("script")?function(){var wt=ft.document.createElement("script");wt.onreadystatechange=function(){Tt(),wt.onreadystatechange=null,wt.parentNode.removeChild(wt),wt=null},ft.document.documentElement.appendChild(wt)}:function(){setTimeout(Tt,0)}:((yt=new ft.MessageChannel).port1.onmessage=Tt,function(){yt.port2.postMessage(0)}),Ct=[];function Tt(){mt=!0;for(var wt,Rt,It=Ct.length;It;){for(Rt=Ct,Ct=[],wt=-1;++wt<It;)Rt[wt]();It=Ct.length}mt=!1}ut.exports=function(wt){Ct.push(wt)!==1||mt||bt()}}).call(this,ct!==void 0?ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(pt,ut,ht){var ft=pt(1);function gt(){}var vt={},yt=["REJECTED"],mt=["FULFILLED"],Et=["PENDING"];function bt(St){if(typeof St!="function")throw new TypeError("resolver must be a function");this.state=Et,this.queue=[],this.outcome=void 0,St!==gt&&Rt(this,St)}function Ct(St,Pt,Ot){this.promise=St,typeof Pt=="function"&&(this.onFulfilled=Pt,this.callFulfilled=this.otherCallFulfilled),typeof Ot=="function"&&(this.onRejected=Ot,this.callRejected=this.otherCallRejected)}function Tt(St,Pt,Ot){ft(function(){var Ut;try{Ut=Pt(Ot)}catch(Bt){return vt.reject(St,Bt)}Ut===St?vt.reject(St,new TypeError("Cannot resolve promise with itself")):vt.resolve(St,Ut)})}function wt(St){var Pt=St&&St.then;if(St&&(typeof St=="object"||typeof St=="function")&&typeof Pt=="function")return function(){Pt.apply(St,arguments)}}function Rt(St,Pt){var Ot=!1;function Ut(At){Ot||(Ot=!0,vt.reject(St,At))}function Bt(At){Ot||(Ot=!0,vt.resolve(St,At))}var xt=It(function(){Pt(Bt,Ut)});xt.status==="error"&&Ut(xt.value)}function It(St,Pt){var Ot={};try{Ot.value=St(Pt),Ot.status="success"}catch(Ut){Ot.status="error",Ot.value=Ut}return Ot}(ut.exports=bt).prototype.catch=function(St){return this.then(null,St)},bt.prototype.then=function(St,Pt){if(typeof St!="function"&&this.state===mt||typeof Pt!="function"&&this.state===yt)return this;var Ot=new this.constructor(gt);return this.state!==Et?Tt(Ot,this.state===mt?St:Pt,this.outcome):this.queue.push(new Ct(Ot,St,Pt)),Ot},Ct.prototype.callFulfilled=function(St){vt.resolve(this.promise,St)},Ct.prototype.otherCallFulfilled=function(St){Tt(this.promise,this.onFulfilled,St)},Ct.prototype.callRejected=function(St){vt.reject(this.promise,St)},Ct.prototype.otherCallRejected=function(St){Tt(this.promise,this.onRejected,St)},vt.resolve=function(St,Pt){var Ot=It(wt,Pt);if(Ot.status==="error")return vt.reject(St,Ot.value);if(Ot=Ot.value)Rt(St,Ot);else{St.state=mt,St.outcome=Pt;for(var Ut=-1,Bt=St.queue.length;++Ut<Bt;)St.queue[Ut].callFulfilled(Pt)}return St},vt.reject=function(St,Pt){St.state=yt,St.outcome=Pt;for(var Ot=-1,Ut=St.queue.length;++Ot<Ut;)St.queue[Ot].callRejected(Pt);return St},bt.resolve=function(St){return St instanceof this?St:vt.resolve(new this(gt),St)},bt.reject=function(St){var Pt=new this(gt);return vt.reject(Pt,St)},bt.all=function(St){var Pt=this;if(Object.prototype.toString.call(St)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ot=St.length,Ut=!1;if(!Ot)return this.resolve([]);for(var Bt=new Array(Ot),xt=0,At=-1,Mt=new this(gt);++At<Ot;)(function(Nt,$t){Pt.resolve(Nt).then(function(Ft){Bt[$t]=Ft,++xt!==Ot||Ut||(Ut=!0,vt.resolve(Mt,Bt))},function(Ft){Ut||(Ut=!0,vt.reject(Mt,Ft))})})(St[At],At);return Mt},bt.race=function(St){var Pt=this;if(Object.prototype.toString.call(St)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ot=St.length,Ut=!1;if(!Ot)return this.resolve([]);for(var Bt=-1,xt=new this(gt);++Bt<Ot;)(function(At){Pt.resolve(At).then(function(Mt){Ut||(Ut=!0,vt.resolve(xt,Mt))},function(Mt){Ut||(Ut=!0,vt.reject(xt,Mt))})})(St[Bt]);return xt}},{1:1}],3:[function(pt,ut,ht){(function(ft){typeof ft.Promise!="function"&&(ft.Promise=pt(2))}).call(this,ct!==void 0?ct:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(pt,ut,ht){var ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dr){return typeof dr}:function(dr){return dr&&typeof Symbol=="function"&&dr.constructor===Symbol&&dr!==Symbol.prototype?"symbol":typeof dr},gt=function(){try{return typeof indexedDB<"u"?indexedDB:typeof webkitIndexedDB<"u"?webkitIndexedDB:typeof mozIndexedDB<"u"?mozIndexedDB:typeof OIndexedDB<"u"?OIndexedDB:typeof msIndexedDB<"u"?msIndexedDB:void 0}catch{}}();function vt(dr,mr){dr=dr||[],mr=mr||{};try{return new Blob(dr,mr)}catch(Pr){if(Pr.name!=="TypeError")throw Pr;for(var br=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),Rr=0;Rr<dr.length;Rr+=1)br.append(dr[Rr]);return br.getBlob(mr.type)}}typeof Promise>"u"&&pt(3);var yt=Promise;function mt(dr,mr){mr&&dr.then(function(br){mr(null,br)},function(br){mr(br)})}function Et(dr,mr,br){typeof mr=="function"&&dr.then(mr),typeof br=="function"&&dr.catch(br)}function bt(dr){return typeof dr!="string"&&(console.warn(dr+" used as a key, but it is not a string."),dr=String(dr)),dr}function Ct(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var Tt="local-forage-detect-blob-support",wt=void 0,Rt={},It=Object.prototype.toString,St="readonly",Pt="readwrite";function Ot(dr){return typeof wt=="boolean"?yt.resolve(wt):(mr=dr,new yt(function(br){var Rr=mr.transaction(Tt,Pt),Pr=vt([""]);Rr.objectStore(Tt).put(Pr,"key"),Rr.onabort=function(Or){Or.preventDefault(),Or.stopPropagation(),br(!1)},Rr.oncomplete=function(){var Or=navigator.userAgent.match(/Chrome\/(\d+)/),Nr=navigator.userAgent.match(/Edge\//);br(Nr||!Or||43<=parseInt(Or[1],10))}}).catch(function(){return!1}).then(function(br){return wt=br}));var mr}function Ut(dr){dr=Rt[dr.name];var mr={};mr.promise=new yt(function(br,Rr){mr.resolve=br,mr.reject=Rr}),dr.deferredOperations.push(mr),dr.dbReady?dr.dbReady=dr.dbReady.then(function(){return mr.promise}):dr.dbReady=mr.promise}function Bt(dr){(dr=Rt[dr.name].deferredOperations.pop())&&(dr.resolve(),dr.promise)}function xt(dr,mr){if(dr=Rt[dr.name].deferredOperations.pop())return dr.reject(mr),dr.promise}function At(dr,mr){return new yt(function(br,Rr){if(Rt[dr.name]=Rt[dr.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},dr.db){if(!mr)return br(dr.db);Ut(dr),dr.db.close()}var Pr=[dr.name],Or=(mr&&Pr.push(dr.version),gt.open.apply(gt,Pr));mr&&(Or.onupgradeneeded=function(Nr){var Br=Or.result;try{Br.createObjectStore(dr.storeName),Nr.oldVersion<=1&&Br.createObjectStore(Tt)}catch(jr){if(jr.name!=="ConstraintError")throw jr;console.warn('The database "'+dr.name+'" has been upgraded from version '+Nr.oldVersion+" to version "+Nr.newVersion+', but the storage "'+dr.storeName+'" already exists.')}}),Or.onerror=function(Nr){Nr.preventDefault(),Rr(Or.error)},Or.onsuccess=function(){var Nr=Or.result;Nr.onversionchange=function(Br){Br.target.close()},br(Nr),Bt(dr)}})}function Mt(dr){return At(dr,!1)}function Nt(dr){return At(dr,!0)}function $t(dr,mr){if(!dr.db)return 1;var br=!dr.db.objectStoreNames.contains(dr.storeName),Rr=dr.version<dr.db.version,Pr=dr.version>dr.db.version;return Rr&&(dr.version!==mr&&console.warn('The database "'+dr.name+`" can't be downgraded from version `+dr.db.version+" to version "+dr.version+"."),dr.version=dr.db.version),(Pr||br)&&(br&&(Rr=dr.db.version+1)>dr.version&&(dr.version=Rr),1)}function Ft(dr){return vt([function(mr){for(var br=mr.length,Rr=new ArrayBuffer(br),Pr=new Uint8Array(Rr),Or=0;Or<br;Or++)Pr[Or]=mr.charCodeAt(Or);return Rr}(atob(dr.data))],{type:dr.type})}function jt(dr){return dr&&dr.__local_forage_encoded_blob}function zt(dr){var mr=this,br=mr._initReady().then(function(){var Rr=Rt[mr._dbInfo.name];if(Rr&&Rr.dbReady)return Rr.dbReady});return Et(br,dr,dr),br}function Yt(dr,mr,br,Rr){Rr===void 0&&(Rr=1);try{var Pr=dr.db.transaction(dr.storeName,mr);br(null,Pr)}catch(Or){if(0<Rr&&(!dr.db||Or.name==="InvalidStateError"||Or.name==="NotFoundError"))return yt.resolve().then(function(){if(!dr.db||Or.name==="NotFoundError"&&!dr.db.objectStoreNames.contains(dr.storeName)&&dr.version<=dr.db.version)return dr.db&&(dr.version=dr.db.version+1),Nt(dr)}).then(function(){return function(Nr){Ut(Nr);for(var Br=Rt[Nr.name],jr=Br.forages,$r=0;$r<jr.length;$r++){var Fr=jr[$r];Fr._dbInfo.db&&(Fr._dbInfo.db.close(),Fr._dbInfo.db=null)}return Nr.db=null,Mt(Nr).then(function(Zr){return Nr.db=Zr,$t(Nr)?Nt(Nr):Zr}).then(function(Zr){Nr.db=Br.db=Zr;for(var pn=0;pn<jr.length;pn++)jr[pn]._dbInfo.db=Zr}).catch(function(Zr){throw xt(Nr,Zr),Zr})}(dr).then(function(){Yt(dr,mr,br,Rr-1)})}).catch(br);br(Or)}}pt={_driver:"asyncStorage",_initStorage:function(dr){var mr=this,br={db:null};if(dr)for(var Rr in dr)br[Rr]=dr[Rr];var Pr=Rt[br.name],Or=(Pr||(Pr={forages:[],db:null,dbReady:null,deferredOperations:[]},Rt[br.name]=Pr),Pr.forages.push(mr),mr._initReady||(mr._initReady=mr.ready,mr.ready=zt),[]);function Nr(){return yt.resolve()}for(var Br=0;Br<Pr.forages.length;Br++){var jr=Pr.forages[Br];jr!==mr&&Or.push(jr._initReady().catch(Nr))}var $r=Pr.forages.slice(0);return yt.all(Or).then(function(){return br.db=Pr.db,Mt(br)}).then(function(Fr){return br.db=Fr,$t(br,mr._defaultConfig.version)?Nt(br):Fr}).then(function(Fr){br.db=Pr.db=Fr,mr._dbInfo=br;for(var Zr=0;Zr<$r.length;Zr++){var pn=$r[Zr];pn!==mr&&(pn._dbInfo.db=br.db,pn._dbInfo.version=br.version)}})},_support:function(){try{if(!gt||!gt.open)return!1;var dr=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),mr=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!dr||mr)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(dr,mr){var br=this,Rr=new yt(function(Pr,Or){br.ready().then(function(){Yt(br._dbInfo,St,function(Nr,Br){if(Nr)return Or(Nr);try{var jr=Br.objectStore(br._dbInfo.storeName).openCursor(),$r=1;jr.onsuccess=function(){var Fr,Zr=jr.result;Zr?(jt(Fr=Zr.value)&&(Fr=Ft(Fr)),(Fr=dr(Fr,Zr.key,$r++))!==void 0?Pr(Fr):Zr.continue()):Pr()},jr.onerror=function(){Or(jr.error)}}catch(Fr){Or(Fr)}})}).catch(Or)});return mt(Rr,mr),Rr},getItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),new yt(function(Pr,Or){br.ready().then(function(){Yt(br._dbInfo,St,function(Nr,Br){if(Nr)return Or(Nr);try{var jr=Br.objectStore(br._dbInfo.storeName).get(dr);jr.onsuccess=function(){var $r=jr.result;jt($r=$r===void 0?null:$r)&&($r=Ft($r)),Pr($r)},jr.onerror=function(){Or(jr.error)}}catch($r){Or($r)}})}).catch(Or)}));return mt(Rr,mr),Rr},setItem:function(dr,mr,br){var Rr=this,Pr=(dr=bt(dr),new yt(function(Or,Nr){var Br;Rr.ready().then(function(){return Br=Rr._dbInfo,It.call(mr)==="[object Blob]"?Ot(Br.db).then(function(jr){return jr?mr:($r=mr,new yt(function(Fr,Zr){var pn=new FileReader;pn.onerror=Zr,pn.onloadend=function(mn){mn=btoa(mn.target.result||""),Fr({__local_forage_encoded_blob:!0,data:mn,type:$r.type})},pn.readAsBinaryString($r)}));var $r}):mr}).then(function(jr){Yt(Rr._dbInfo,Pt,function($r,Fr){if($r)return Nr($r);try{var Zr=Fr.objectStore(Rr._dbInfo.storeName),pn=(jr===null&&(jr=void 0),Zr.put(jr,dr));Fr.oncomplete=function(){Or(jr=jr===void 0?null:jr)},Fr.onabort=Fr.onerror=function(){var mn=pn.error||pn.transaction.error;Nr(mn)}}catch(mn){Nr(mn)}})}).catch(Nr)}));return mt(Pr,br),Pr},removeItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),new yt(function(Pr,Or){br.ready().then(function(){Yt(br._dbInfo,Pt,function(Nr,Br){if(Nr)return Or(Nr);try{var jr=Br.objectStore(br._dbInfo.storeName).delete(dr);Br.oncomplete=function(){Pr()},Br.onerror=function(){Or(jr.error)},Br.onabort=function(){var $r=jr.error||jr.transaction.error;Or($r)}}catch($r){Or($r)}})}).catch(Or)}));return mt(Rr,mr),Rr},clear:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){Yt(mr._dbInfo,Pt,function(Or,Nr){if(Or)return Pr(Or);try{var Br=Nr.objectStore(mr._dbInfo.storeName).clear();Nr.oncomplete=function(){Rr()},Nr.onabort=Nr.onerror=function(){var jr=Br.error||Br.transaction.error;Pr(jr)}}catch(jr){Pr(jr)}})}).catch(Pr)});return mt(br,dr),br},length:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){Yt(mr._dbInfo,St,function(Or,Nr){if(Or)return Pr(Or);try{var Br=Nr.objectStore(mr._dbInfo.storeName).count();Br.onsuccess=function(){Rr(Br.result)},Br.onerror=function(){Pr(Br.error)}}catch(jr){Pr(jr)}})}).catch(Pr)});return mt(br,dr),br},key:function(dr,mr){var br=this,Rr=new yt(function(Pr,Or){dr<0?Pr(null):br.ready().then(function(){Yt(br._dbInfo,St,function(Nr,Br){if(Nr)return Or(Nr);try{var jr=Br.objectStore(br._dbInfo.storeName),$r=!1,Fr=jr.openKeyCursor();Fr.onsuccess=function(){var Zr=Fr.result;Zr?dr===0||$r?Pr(Zr.key):($r=!0,Zr.advance(dr)):Pr(null)},Fr.onerror=function(){Or(Fr.error)}}catch(Zr){Or(Zr)}})}).catch(Or)});return mt(Rr,mr),Rr},keys:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){Yt(mr._dbInfo,St,function(Or,Nr){if(Or)return Pr(Or);try{var Br=Nr.objectStore(mr._dbInfo.storeName).openKeyCursor(),jr=[];Br.onsuccess=function(){var $r=Br.result;$r?(jr.push($r.key),$r.continue()):Rr(jr)},Br.onerror=function(){Pr(Br.error)}}catch($r){Pr($r)}})}).catch(Pr)});return mt(br,dr),br},dropInstance:function(dr,mr){mr=Ct.apply(this,arguments);var br=this.config();return(dr=typeof dr!="function"&&dr||{}).name||(dr.name=dr.name||br.name,dr.storeName=dr.storeName||br.storeName),mt(br=dr.name?(br=dr.name===br.name&&this._dbInfo.db?yt.resolve(this._dbInfo.db):Mt(dr).then(function(Rr){var Pr=Rt[dr.name],Or=Pr.forages;Pr.db=Rr;for(var Nr=0;Nr<Or.length;Nr++)Or[Nr]._dbInfo.db=Rr;return Rr}),dr.storeName?br.then(function(Rr){if(Rr.objectStoreNames.contains(dr.storeName)){var Pr=Rr.version+1,Or=(Ut(dr),Rt[dr.name]),Nr=Or.forages;Rr.close();for(var Br=0;Br<Nr.length;Br++){var jr=Nr[Br];jr._dbInfo.db=null,jr._dbInfo.version=Pr}return new yt(function($r,Fr){var Zr=gt.open(dr.name,Pr);Zr.onerror=function(pn){Zr.result.close(),Fr(pn)},Zr.onupgradeneeded=function(){Zr.result.deleteObjectStore(dr.storeName)},Zr.onsuccess=function(){var pn=Zr.result;pn.close(),$r(pn)}}).then(function($r){Or.db=$r;for(var Fr=0;Fr<Nr.length;Fr++){var Zr=Nr[Fr];Zr._dbInfo.db=$r,Bt(Zr._dbInfo)}}).catch(function($r){throw(xt(dr,$r)||yt.resolve()).catch(function(){}),$r})}}):br.then(function(Rr){Ut(dr);var Pr=Rt[dr.name],Or=Pr.forages;Rr.close();for(var Nr=0;Nr<Or.length;Nr++)Or[Nr]._dbInfo.db=null;return new yt(function(Br,jr){var $r=gt.deleteDatabase(dr.name);$r.onerror=function(){var Fr=$r.result;Fr&&Fr.close(),jr($r.error)},$r.onblocked=function(){console.warn('dropInstance blocked for database "'+dr.name+'" until all open connections are closed')},$r.onsuccess=function(){var Fr=$r.result;Fr&&Fr.close(),Br(Fr)}}).then(function(Br){Pr.db=Br;for(var jr=0;jr<Or.length;jr++)Bt(Or[jr]._dbInfo)}).catch(function(Br){throw(xt(dr,Br)||yt.resolve()).catch(function(){}),Br})})):yt.reject("Invalid arguments"),mr),br}};var Kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",er=/^~~local_forage_type~([^~]+)~/,ir="__lfsc__:",rr=ir.length,lr=rr+4,nr=Object.prototype.toString;function hr(dr){for(var mr,br,Rr,Pr,Or=.75*dr.length,Nr=dr.length,Br=0,jr=(Or=(dr[dr.length-1]==="="&&(Or--,dr[dr.length-2]==="="&&Or--),new ArrayBuffer(Or)),new Uint8Array(Or)),$r=0;$r<Nr;$r+=4)mr=Kt.indexOf(dr[$r]),br=Kt.indexOf(dr[$r+1]),Rr=Kt.indexOf(dr[$r+2]),Pr=Kt.indexOf(dr[$r+3]),jr[Br++]=mr<<2|br>>4,jr[Br++]=(15&br)<<4|Rr>>2,jr[Br++]=(3&Rr)<<6|63&Pr;return Or}function vr(dr){for(var mr=new Uint8Array(dr),br="",Rr=0;Rr<mr.length;Rr+=3)br=(br=(br=(br+=Kt[mr[Rr]>>2])+Kt[(3&mr[Rr])<<4|mr[Rr+1]>>4])+Kt[(15&mr[Rr+1])<<2|mr[Rr+2]>>6])+Kt[63&mr[Rr+2]];return mr.length%3==2?br=br.substring(0,br.length-1)+"=":mr.length%3==1&&(br=br.substring(0,br.length-2)+"=="),br}var yr={serialize:function(dr,mr){var br="";if(dr&&(br=nr.call(dr)),dr&&(br==="[object ArrayBuffer]"||dr.buffer&&nr.call(dr.buffer)==="[object ArrayBuffer]")){var Rr,Pr=ir;dr instanceof ArrayBuffer?(Rr=dr,Pr+="arbf"):(Rr=dr.buffer,br==="[object Int8Array]"?Pr+="si08":br==="[object Uint8Array]"?Pr+="ui08":br==="[object Uint8ClampedArray]"?Pr+="uic8":br==="[object Int16Array]"?Pr+="si16":br==="[object Uint16Array]"?Pr+="ur16":br==="[object Int32Array]"?Pr+="si32":br==="[object Uint32Array]"?Pr+="ui32":br==="[object Float32Array]"?Pr+="fl32":br==="[object Float64Array]"?Pr+="fl64":mr(new Error("Failed to get type for BinaryArray"))),mr(Pr+vr(Rr))}else if(br==="[object Blob]")(Pr=new FileReader).onload=function(){var Or="~~local_forage_type~"+dr.type+"~"+vr(this.result);mr(ir+"blob"+Or)},Pr.readAsArrayBuffer(dr);else try{mr(JSON.stringify(dr))}catch(Or){console.error("Couldn't convert value into a JSON string: ",dr),mr(null,Or)}},deserialize:function(dr){if(dr.substring(0,rr)!==ir)return JSON.parse(dr);var mr,br=dr.substring(lr),Rr=dr.substring(rr,lr),Pr=(Rr==="blob"&&er.test(br)&&(mr=(dr=br.match(er))[1],br=br.substring(dr[0].length)),hr(br));switch(Rr){case"arbf":return Pr;case"blob":return vt([Pr],{type:mr});case"si08":return new Int8Array(Pr);case"ui08":return new Uint8Array(Pr);case"uic8":return new Uint8ClampedArray(Pr);case"si16":return new Int16Array(Pr);case"ur16":return new Uint16Array(Pr);case"si32":return new Int32Array(Pr);case"ui32":return new Uint32Array(Pr);case"fl32":return new Float32Array(Pr);case"fl64":return new Float64Array(Pr);default:throw new Error("Unkown type: "+Rr)}},stringToBuffer:hr,bufferToString:vr};function Cr(dr,mr,br,Rr){dr.executeSql("CREATE TABLE IF NOT EXISTS "+mr.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],br,Rr)}function or(dr,mr,br,Rr,Pr,Or){dr.executeSql(br,Rr,Pr,function(Nr,Br){Br.code===Br.SYNTAX_ERR?Nr.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[mr.storeName],function(jr,$r){$r.rows.length?Or(jr,Br):Cr(jr,mr,function(){jr.executeSql(br,Rr,Pr,Or)},Or)},Or):Or(Nr,Br)},Or)}function ur(dr,mr,br,Rr){var Pr=this,Or=(dr=bt(dr),new yt(function(Nr,Br){Pr.ready().then(function(){var jr=mr=mr===void 0?null:mr,$r=Pr._dbInfo;$r.serializer.serialize(mr,function(Fr,Zr){Zr?Br(Zr):$r.db.transaction(function(pn){or(pn,$r,"INSERT OR REPLACE INTO "+$r.storeName+" (key, value) VALUES (?, ?)",[dr,Fr],function(){Nr(jr)},function(mn,vn){Br(vn)})},function(pn){pn.code===pn.QUOTA_ERR&&(0<Rr?Nr(ur.apply(Pr,[dr,jr,br,Rr-1])):Br(pn))})})}).catch(Br)}));return mt(Or,br),Or}var pr={_driver:"webSQLStorage",_initStorage:function(dr){var mr=this,br={db:null};if(dr)for(var Rr in dr)br[Rr]=typeof dr[Rr]!="string"?dr[Rr].toString():dr[Rr];var Pr=new yt(function(Or,Nr){try{br.db=openDatabase(br.name,String(br.version),br.description,br.size)}catch(Br){return Nr(Br)}br.db.transaction(function(Br){Cr(Br,br,function(){mr._dbInfo=br,Or()},function(jr,$r){Nr($r)})},Nr)});return br.serializer=yr,Pr},_support:typeof openDatabase=="function",iterate:function(dr,mr){var br=this,Rr=new yt(function(Pr,Or){br.ready().then(function(){var Nr=br._dbInfo;Nr.db.transaction(function(Br){or(Br,Nr,"SELECT * FROM "+Nr.storeName,[],function(jr,$r){for(var Fr=$r.rows,Zr=Fr.length,pn=0;pn<Zr;pn++){var mn=Fr.item(pn),vn=(vn=mn.value)&&Nr.serializer.deserialize(vn);if((vn=dr(vn,mn.key,pn+1))!==void 0)return void Pr(vn)}Pr()},function(jr,$r){Or($r)})})}).catch(Or)});return mt(Rr,mr),Rr},getItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),new yt(function(Pr,Or){br.ready().then(function(){var Nr=br._dbInfo;Nr.db.transaction(function(Br){or(Br,Nr,"SELECT * FROM "+Nr.storeName+" WHERE key = ? LIMIT 1",[dr],function(jr,$r){$r=($r=$r.rows.length?$r.rows.item(0).value:null)&&Nr.serializer.deserialize($r),Pr($r)},function(jr,$r){Or($r)})})}).catch(Or)}));return mt(Rr,mr),Rr},setItem:function(dr,mr,br){return ur.apply(this,[dr,mr,br,1])},removeItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),new yt(function(Pr,Or){br.ready().then(function(){var Nr=br._dbInfo;Nr.db.transaction(function(Br){or(Br,Nr,"DELETE FROM "+Nr.storeName+" WHERE key = ?",[dr],function(){Pr()},function(jr,$r){Or($r)})})}).catch(Or)}));return mt(Rr,mr),Rr},clear:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){var Or=mr._dbInfo;Or.db.transaction(function(Nr){or(Nr,Or,"DELETE FROM "+Or.storeName,[],function(){Rr()},function(Br,jr){Pr(jr)})})}).catch(Pr)});return mt(br,dr),br},length:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){var Or=mr._dbInfo;Or.db.transaction(function(Nr){or(Nr,Or,"SELECT COUNT(key) as c FROM "+Or.storeName,[],function(Br,jr){jr=jr.rows.item(0).c,Rr(jr)},function(Br,jr){Pr(jr)})})}).catch(Pr)});return mt(br,dr),br},key:function(dr,mr){var br=this,Rr=new yt(function(Pr,Or){br.ready().then(function(){var Nr=br._dbInfo;Nr.db.transaction(function(Br){or(Br,Nr,"SELECT key FROM "+Nr.storeName+" WHERE id = ? LIMIT 1",[dr+1],function(jr,$r){$r=$r.rows.length?$r.rows.item(0).key:null,Pr($r)},function(jr,$r){Or($r)})})}).catch(Or)});return mt(Rr,mr),Rr},keys:function(dr){var mr=this,br=new yt(function(Rr,Pr){mr.ready().then(function(){var Or=mr._dbInfo;Or.db.transaction(function(Nr){or(Nr,Or,"SELECT key FROM "+Or.storeName,[],function(Br,jr){for(var $r=[],Fr=0;Fr<jr.rows.length;Fr++)$r.push(jr.rows.item(Fr).key);Rr($r)},function(Br,jr){Pr(jr)})})}).catch(Pr)});return mt(br,dr),br},dropInstance:function(dr,mr){mr=Ct.apply(this,arguments);var br=this.config(),Rr=((dr=typeof dr!="function"&&dr||{}).name||(dr.name=dr.name||br.name,dr.storeName=dr.storeName||br.storeName),this),Pr=dr.name?new yt(function(Or){var Nr,Br=dr.name===br.name?Rr._dbInfo.db:openDatabase(dr.name,"","",0);dr.storeName?Or({db:Br,storeNames:[dr.storeName]}):Or((Nr=Br,new yt(function(jr,$r){Nr.transaction(function(Fr){Fr.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Zr,pn){for(var mn=[],vn=0;vn<pn.rows.length;vn++)mn.push(pn.rows.item(vn).name);jr({db:Nr,storeNames:mn})},function(Zr,pn){$r(pn)})},function(Fr){$r(Fr)})})))}).then(function(Or){return new yt(function(Nr,Br){Or.db.transaction(function(jr){for(var $r=[],Fr=0,Zr=Or.storeNames.length;Fr<Zr;Fr++)$r.push(function(pn){return new yt(function(mn,vn){jr.executeSql("DROP TABLE IF EXISTS "+pn,[],function(){mn()},function(jn,yn){vn(yn)})})}(Or.storeNames[Fr]));yt.all($r).then(function(){Nr()}).catch(function(pn){Br(pn)})},function(jr){Br(jr)})})}):yt.reject("Invalid arguments");return mt(Pr,mr),Pr}};function Er(dr,mr){var br=dr.name+"/";return dr.storeName!==mr.storeName&&(br+=dr.storeName+"/"),br}function Sr(dr,mr){for(var br,Rr,Pr=dr.length,Or=0;Or<Pr;){if((br=dr[Or])===(Rr=mr)||typeof br=="number"&&typeof Rr=="number"&&isNaN(br)&&isNaN(Rr))return 1;Or++}}var Ht={_driver:"localStorageWrapper",_initStorage:function(dr){var mr={};if(dr)for(var br in dr)mr[br]=dr[br];return mr.keyPrefix=Er(dr,this._defaultConfig),!function(){var Rr="_localforage_support_test";try{localStorage.setItem(Rr,!0),localStorage.removeItem(Rr)}catch{return 1}}()||0<localStorage.length?((this._dbInfo=mr).serializer=yr,yt.resolve()):yt.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(dr,mr){var br=this,Rr=br.ready().then(function(){for(var Pr=br._dbInfo,Or=Pr.keyPrefix,Nr=Or.length,Br=localStorage.length,jr=1,$r=0;$r<Br;$r++){var Fr=localStorage.key($r);if(Fr.indexOf(Or)===0){var Zr=(Zr=localStorage.getItem(Fr))&&Pr.serializer.deserialize(Zr);if((Zr=dr(Zr,Fr.substring(Nr),jr++))!==void 0)return Zr}}});return mt(Rr,mr),Rr},getItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),br.ready().then(function(){var Pr=br._dbInfo,Or=localStorage.getItem(Pr.keyPrefix+dr);return Or&&Pr.serializer.deserialize(Or)}));return mt(Rr,mr),Rr},setItem:function(dr,mr,br){var Rr=this,Pr=(dr=bt(dr),Rr.ready().then(function(){var Or=mr=mr===void 0?null:mr;return new yt(function(Nr,Br){var jr=Rr._dbInfo;jr.serializer.serialize(mr,function($r,Fr){if(Fr)Br(Fr);else try{localStorage.setItem(jr.keyPrefix+dr,$r),Nr(Or)}catch(Zr){Zr.name!=="QuotaExceededError"&&Zr.name!=="NS_ERROR_DOM_QUOTA_REACHED"||Br(Zr),Br(Zr)}})})}));return mt(Pr,br),Pr},removeItem:function(dr,mr){var br=this,Rr=(dr=bt(dr),br.ready().then(function(){var Pr=br._dbInfo;localStorage.removeItem(Pr.keyPrefix+dr)}));return mt(Rr,mr),Rr},clear:function(dr){var mr=this,br=mr.ready().then(function(){for(var Rr=mr._dbInfo.keyPrefix,Pr=localStorage.length-1;0<=Pr;Pr--){var Or=localStorage.key(Pr);Or.indexOf(Rr)===0&&localStorage.removeItem(Or)}});return mt(br,dr),br},length:function(dr){var mr=this.keys().then(function(br){return br.length});return mt(mr,dr),mr},key:function(dr,mr){var br=this,Rr=br.ready().then(function(){var Pr,Or=br._dbInfo;try{Pr=localStorage.key(dr)}catch{Pr=null}return Pr&&Pr.substring(Or.keyPrefix.length)});return mt(Rr,mr),Rr},keys:function(dr){var mr=this,br=mr.ready().then(function(){for(var Rr=mr._dbInfo,Pr=localStorage.length,Or=[],Nr=0;Nr<Pr;Nr++){var Br=localStorage.key(Nr);Br.indexOf(Rr.keyPrefix)===0&&Or.push(Br.substring(Rr.keyPrefix.length))}return Or});return mt(br,dr),br},dropInstance:function(dr,mr){mr=Ct.apply(this,arguments),(dr=typeof dr!="function"&&dr||{}).name||(Rr=this.config(),dr.name=dr.name||Rr.name,dr.storeName=dr.storeName||Rr.storeName);var br=this,Rr=dr.name?new yt(function(Pr){dr.storeName?Pr(Er(dr,br._defaultConfig)):Pr(dr.name+"/")}).then(function(Pr){for(var Or=localStorage.length-1;0<=Or;Or--){var Nr=localStorage.key(Or);Nr.indexOf(Pr)===0&&localStorage.removeItem(Nr)}}):yt.reject("Invalid arguments");return mt(Rr,mr),Rr}},qt=Array.isArray||function(dr){return Object.prototype.toString.call(dr)==="[object Array]"},fr={},cr={},Ar={INDEXEDDB:pt,WEBSQL:pr,LOCALSTORAGE:Ht},Gr=(pt=[Ar.INDEXEDDB._driver,Ar.WEBSQL._driver,Ar.LOCALSTORAGE._driver],["dropInstance"]),Qr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Gr),hn={description:"",driver:pt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function sn(dr){for(var mr=1;mr<arguments.length;mr++){var br=arguments[mr];if(br)for(var Rr in br)br.hasOwnProperty(Rr)&&(qt(br[Rr])?dr[Rr]=br[Rr].slice():dr[Rr]=br[Rr])}return dr}function qr(dr){var mr,br,Rr;if(!(this instanceof qr))throw new TypeError("Cannot call a class as a function");for(mr in Ar)Ar.hasOwnProperty(mr)&&(Rr=(br=Ar[mr])._driver,this[mr]=Rr,fr[Rr]||this.defineDriver(br));this._defaultConfig=sn({},hn),this._config=sn({},this._defaultConfig,dr),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}qr.prototype.config=function(dr){if((dr===void 0?"undefined":ft(dr))!=="object")return typeof dr=="string"?this._config[dr]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var mr in dr){if(mr==="storeName"&&(dr[mr]=dr[mr].replace(/\W/g,"_")),mr==="version"&&typeof dr[mr]!="number")return new Error("Database version must be a number.");this._config[mr]=dr[mr]}return!("driver"in dr&&dr.driver)||this.setDriver(this._config.driver)},qr.prototype.defineDriver=function(dr,mr,br){var Rr=new yt(function(Pr,Or){try{var Nr=dr._driver,Br=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(dr._driver){for(var jr=Qr.concat("_initStorage"),$r=0,Fr=jr.length;$r<Fr;$r++){var Zr=jr[$r];if((!Sr(Gr,Zr)||dr[Zr])&&typeof dr[Zr]!="function")return void Or(Br)}for(var pn=0,mn=Gr.length;pn<mn;pn++){var vn=Gr[pn];dr[vn]||(dr[vn]=function(yn){return function(){var Kn=new Error("Method "+yn+" is not implemented by the current driver");return mt(Kn=yt.reject(Kn),arguments[arguments.length-1]),Kn}}(vn))}var jn=function(yn){fr[Nr]&&console.info("Redefining LocalForage driver: "+Nr),fr[Nr]=dr,cr[Nr]=yn,Pr()};"_support"in dr?dr._support&&typeof dr._support=="function"?dr._support().then(jn,Or):jn(!!dr._support):jn(!0)}else Or(Br)}catch(yn){Or(yn)}});return Et(Rr,mr,br),Rr},qr.prototype.driver=function(){return this._driver||null},qr.prototype.getDriver=function(dr,mr,br){return Et(dr=fr[dr]?yt.resolve(fr[dr]):yt.reject(new Error("Driver not found.")),mr,br),dr},qr.prototype.getSerializer=function(dr){var mr=yt.resolve(yr);return Et(mr,dr),mr},qr.prototype.ready=function(dr){var mr=this,br=mr._driverSet.then(function(){return mr._ready===null&&(mr._ready=mr._initDriver()),mr._ready});return Et(br,dr,dr),br},qr.prototype.setDriver=function(dr,mr,br){var Rr=this,Pr=(qt(dr)||(dr=[dr]),this._getSupportedDrivers(dr));function Or(){Rr._config.driver=Rr.driver()}function Nr(Br){return Rr._extend(Br),Or(),Rr._ready=Rr._initStorage(Rr._config),Rr._ready}return dr=this._driverSet!==null?this._driverSet.catch(function(){return yt.resolve()}):yt.resolve(),this._driverSet=dr.then(function(){var Br=Pr[0];return Rr._dbInfo=null,Rr._ready=null,Rr.getDriver(Br).then(function(jr){Rr._driver=jr._driver,Or(),Rr._wrapLibraryMethodsWithReady(),Rr._initDriver=function($r){return function(){var Fr=0;return function Zr(){for(;Fr<$r.length;){var pn=$r[Fr];return Fr++,Rr._dbInfo=null,Rr._ready=null,Rr.getDriver(pn).then(Nr).catch(Zr)}Or();var mn=new Error("No available storage method found.");return Rr._driverSet=yt.reject(mn),Rr._driverSet}()}}(Pr)})}).catch(function(){Or();var Br=new Error("No available storage method found.");return Rr._driverSet=yt.reject(Br),Rr._driverSet}),Et(this._driverSet,mr,br),this._driverSet},qr.prototype.supports=function(dr){return!!cr[dr]},qr.prototype._extend=function(dr){sn(this,dr)},qr.prototype._getSupportedDrivers=function(dr){for(var mr=[],br=0,Rr=dr.length;br<Rr;br++){var Pr=dr[br];this.supports(Pr)&&mr.push(Pr)}return mr},qr.prototype._wrapLibraryMethodsWithReady=function(){for(var dr=0,mr=Qr.length;dr<mr;dr++)(function(br,Rr){br[Rr]=function(){var Pr=arguments;return br.ready().then(function(){return br[Rr].apply(br,Pr)})}})(this,Qr[dr])},qr.prototype.createInstance=function(dr){return new qr(dr)},pr=new qr,ut.exports=pr},{3:3}]},{},[4])(4)}).call(this,lt(12))},function(st,at){var lt=function(){return this}();try{lt=lt||new Function("return this")()}catch{typeof window=="object"&&(lt=window)}st.exports=lt},function(st,at,lt){var ct,pt,ut,ht,ft;st.exports=(st=lt(2),lt(19),lt(20),ct=(ut=(lt=st).lib).Base,pt=ut.WordArray,ht=(ut=lt.algo).MD5,ft=ut.EvpKDF=ct.extend({cfg:ct.extend({keySize:4,hasher:ht,iterations:1}),init:function(gt){this.cfg=this.cfg.extend(gt)},compute:function(gt,vt){for(var yt,mt=this.cfg,Et=mt.hasher.create(),bt=pt.create(),Ct=bt.words,Tt=mt.keySize,wt=mt.iterations;Ct.length<Tt;){yt&&Et.update(yt),yt=Et.update(gt).finalize(vt),Et.reset();for(var Rt=1;Rt<wt;Rt++)yt=Et.finalize(yt),Et.reset();bt.concat(yt)}return bt.sigBytes=4*Tt,bt}}),lt.EvpKDF=function(gt,vt,yt){return ft.create(yt).compute(gt,vt)},st.EvpKDF)},function(st,at,lt){function ct(ft){if(ht[ft])return ht[ft].exports;var gt=ht[ft]={i:ft,l:!1,exports:{}};return ut[ft].call(gt.exports,gt,gt.exports,ct),gt.l=!0,gt.exports}var pt,ut,ht;st.exports=(pt=lt(11),ht={},ct.m=ut=[function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.ZEGO_SETTING_ACTION=void 0,(gt=gt.ZEGO_SETTING_ACTION||(gt.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",gt.SETTING_INIT="zs.ii.0",gt.SETTING_FETCH_SETTING="zs.fs.0",gt.SETTING__FETCH_SETTING="zs.fs.1",gt.SETTING_GET_CLOUD_SETTING="zs.gcs.0",gt.SETTING_POLLING_SETTING="zs.ps.0",gt.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",gt.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",gt.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.errorList=void 0,gt.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"},AUTH_FAIL:{code:1005,msg:"auth failed"}}},function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.generateUUID=gt.checkValidNumber=gt.analyzeKey=gt.getCurrentTime=gt.getBrowser=void 0,gt.getBrowser=function(){var mt=window.navigator.userAgent,Et=window.ActiveXObject!=null&&mt.indexOf("MSIE")!=-1,bt=mt.indexOf("Firefox")!=-1,Ct=window.opr!=null,Tt=mt.indexOf("Chrome")&&window.chrome,wt=mt.indexOf("Safari")!=-1&&mt.indexOf("Version")!=-1;return mt=mt.toLowerCase().match(/MicroMessenger/i)&&mt.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",Et?"IE":bt?"FIREFOX":Ct?"OPERA":Tt?"CHROME":wt?"SAFARI":mt?"WEIXIN":"UNKOWN"};var yt=["00","01","02","03","04","05","06","07","08","09"];gt.getCurrentTime=function(){var mt=new Date;return[mt.getFullYear()+"/",(yt[mt.getMonth()+1]||mt.getMonth()+1)+"/",(yt[mt.getDate()]||mt.getDate())+" ",(yt[mt.getHours()]||mt.getHours())+":",(yt[mt.getMinutes()]||mt.getMinutes())+":",yt[mt.getSeconds()]||mt.getSeconds(),"."+mt.getTime()%1e3].join("")},gt.analyzeKey=function(mt){return mt=mt.split("_"),{level:Number(mt[0]),timestamp:mt[1],seq:mt[2]}},gt.checkValidNumber=function(mt,Et,bt){return Et=Et||1,bt=bt||1e4,typeof mt=="number"&&mt%1==0&&Et<=mt&&mt<=bt},gt.generateUUID=function(mt){var Et,bt;return(mt=mt===void 0?0:mt)===0?bt=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),bt||(Et=new Date().getTime(),bt="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ct){var Tt=(Et+16*Math.random())%16|0;return Et=Math.floor(Et/16),(Ct=="x"?Tt:3&Tt|8).toString(36)}),mt===0?localStorage.setItem("z_deviceID",bt):wx.setStorageSync("z_deviceID",bt)),bt}},function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.ZegoSetting=void 0;var yt=vt(4);Object.defineProperty(gt,"ZegoSetting",{enumerable:!0,get:function(){return yt.ZegoSetting}})},function(ft,gt,vt){var yt=this&&this.__assign||function(){return(yt=Object.assign||function(Ot){for(var Ut,Bt=1,xt=arguments.length;Bt<xt;Bt++)for(var At in Ut=arguments[Bt])Object.prototype.hasOwnProperty.call(Ut,At)&&(Ot[At]=Ut[At]);return Ot}).apply(this,arguments)},mt=this&&this.__awaiter||function(Ot,Ut,Bt,xt){return new(Bt=Bt||Promise)(function(At,Mt){function Nt(jt){try{Ft(xt.next(jt))}catch(zt){Mt(zt)}}function $t(jt){try{Ft(xt.throw(jt))}catch(zt){Mt(zt)}}function Ft(jt){var zt;jt.done?At(jt.value):((zt=jt.value)instanceof Bt?zt:new Bt(function(Yt){Yt(zt)})).then(Nt,$t)}Ft((xt=xt.apply(Ot,Ut||[])).next())})},Et=this&&this.__generator||function(Ot,Ut){var Bt,xt,At,Mt={label:0,sent:function(){if(1&At[0])throw At[1];return At[1]},trys:[],ops:[]},Nt={next:$t(0),throw:$t(1),return:$t(2)};return typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function $t(Ft){return function(jt){var zt=[Ft,jt];if(Bt)throw new TypeError("Generator is already executing.");for(;Mt;)try{if(Bt=1,xt&&(At=2&zt[0]?xt.return:zt[0]?xt.throw||((At=xt.return)&&At.call(xt),0):xt.next)&&!(At=At.call(xt,zt[1])).done)return At;switch(xt=0,(zt=At?[2&zt[0],At.value]:zt)[0]){case 0:case 1:At=zt;break;case 4:return Mt.label++,{value:zt[1],done:!1};case 5:Mt.label++,xt=zt[1],zt=[0];continue;case 7:zt=Mt.ops.pop(),Mt.trys.pop();continue;default:if(!(At=0<(At=Mt.trys).length&&At[At.length-1])&&(zt[0]===6||zt[0]===2)){Mt=0;continue}if(zt[0]===3&&(!At||zt[1]>At[0]&&zt[1]<At[3])){Mt.label=zt[1];break}if(zt[0]===6&&Mt.label<At[1]){Mt.label=At[1],At=zt;break}if(At&&Mt.label<At[2]){Mt.label=At[2],Mt.ops.push(zt);break}At[2]&&Mt.ops.pop(),Mt.trys.pop();continue}zt=Ut.call(Ot,Mt)}catch(Yt){zt=[6,Yt],xt=0}finally{Bt=At=0}if(5&zt[0])throw zt[1];return{value:zt[0]?zt[1]:void 0,done:!0}}}},bt=(Object.defineProperty(gt,"__esModule",{value:!0}),gt.ZegoSetting=void 0,vt(5)),Ct=vt(6),Tt=vt(10),wt=vt(0),Rt=vt(12),It=vt(1),St=vt(2);function Pt(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new bt.ZegoLog}Object.defineProperty(Pt.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),Pt.prototype.init=function(Ot){var Ut=this;return Ot.pollingFreq&&!St.checkValidNumber(Ot.pollingFreq)?(this.log.error(wt.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},Rt.INIT_CONFIG,Ot),this.getPublicEnvVariable(),this.settingFetchHandler=new Tt.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),Ot=Math.round(60*Math.random()),this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+Ot),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout(function(){Ut.pollingSetting(1e3*Ut.pollingInterval)},1e3*Ot),this.settingCacheHandler=new Ct.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.refreshAuthCheck(),this.inited=!0)},Pt.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},Pt.prototype.setEnvVariable=function(Ot,Ut){this.proEnvVariable[Ot]=String(Ut)},Pt.prototype.getEnvVariable=function(Ot){return this.envVariable[Ot]},Pt.prototype.setEnvVariables=function(Ot){var Ut=this;Object.keys(Ot).forEach(function(Bt){typeof Ot[Bt]!="string"&&typeof Ot[Bt]!="number"&&Ut.log.error("zs.sev env "+Bt+" type error"),Ut.proEnvVariable[Bt]=String(Ot[Bt])})},Pt.prototype.getEnvVariables=function(){return this.envVariable},Pt.prototype.enablePolling=function(Ot,Ut){var Bt=this;Ut?Ut.forEach(function(xt){var At=Bt.fileList.find(function(Mt){return Mt.fileName===xt});At&&(At.needPolling=Ot)}):this.fileList.forEach(function(xt){return xt.needPolling=Ot})},Pt.prototype.setToken=function(Ot){this.token!==Ot&&this.refreshAuthCheck(),this.token=Ot},Pt.prototype.setUserID=function(Ot){this.userID!==Ot&&this.refreshAuthCheck(),this.userID=Ot},Pt.prototype.getSettingCache=function(Ot){return mt(this,void 0,void 0,function(){var Ut,Bt,xt;return Et(this,function(At){switch(At.label){case 0:return this.inited?(Ut=this.fileList.find(function(Mt){return Mt.fileName===Ot}))?[2,Promise.resolve({setting:Ut.setting,versions:Ut.versions})]:[3,1]:[2,Promise.reject(It.errorList.NOT_INIT)];case 1:return Bt=this._getFileName(Ot),[4,this.settingCacheHandler.getCacheSetting(Bt)];case 2:return(Bt=At.sent())&&(this.fileList.find(function(Mt){return Mt.fileName===Ot})||this.fileList.push({fileName:Ot,fetchedTime:0,needPolling:!1,setting:Bt.setting,versions:Bt.versions}),xt={setting:Bt.setting,versions:Bt.versions}),[2,Promise.resolve(xt)]}})})},Pt.prototype.fetchSetting=function(Ot,Ut,Bt){return Ut===void 0&&(Ut={}),Bt===void 0&&(Bt=!0),this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+Ot),this.inited?(this.activePolling(),0<Object.keys(Ut).length?(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(Ot,yt(yt({},this.envVariable),Ut))):(Ut=this.fileList.find(function(xt){return xt.fileName===Ot}))?(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),new Date().getTime()-Ut.fetchedTime<1e3*this.pollingInterval?(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),Ut.needPolling=Bt,Promise.resolve({setting:Ut.setting,versions:Ut.versions})):this._fetchSetting(Ot,Ut,Bt)):(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(Ot,Ut,Bt))):Promise.reject(It.errorList.NOT_INIT)},Pt.prototype.fetchMultiSetting=function(Ot,Ut,Bt){var xt=this;return Ut===void 0&&(Ut={}),Bt===void 0&&(Bt=!0),this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call"),this.inited?(this.activePolling(),0<Object.keys(Ut).length?(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(Ot,yt(yt({},this.envVariable),Ut))):new Promise(function(At,Mt){var Nt={},$t=[];if(Ot.forEach(function(Ft){return mt(xt,void 0,void 0,function(){var jt;return Et(this,function(zt){return(jt=this.fileList.find(function(Yt){return Yt.fileName===Ft}))&&new Date().getTime()-jt.fetchedTime<1e3*this.pollingInterval?(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),Nt[Ft]={setting:jt.setting,versions:jt.versions}):$t.push(Ft),[2]})})}),!(0<$t.length))return At(Nt);xt._getCloudSetting($t,xt.envVariable).then(function(Ft){return xt.handleFetchFiles(Ft,Bt),Object.assign(Nt,Ft),At(Nt)}).catch(function(Ft){$t.forEach(function(jt){return mt(xt,void 0,void 0,function(){var zt;return Et(this,function(Yt){switch(Yt.label){case 0:return(zt=this.fileList.find(function(Kt){return Kt.fileName==jt}))?zt.fetchedTime=new Date().getTime():this.fileList.find(function(Kt){return Kt.fileName===jt})||this.fileList.push({fileName:jt,fetchedTime:new Date().getTime(),needPolling:Bt,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(jt)];case 1:return zt=Yt.sent(),Nt[jt]={setting:zt.setting,versions:zt.versions},[2]}})})}),0<Object.keys(Nt).length?At(Nt):Mt(Ft)})})):(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(It.errorList.NOT_INIT))},Pt.prototype.setOptions=function(Ot){Ot&&typeof Ot.unify=="boolean"&&(this.options.unify=Ot.unify,this.settingFetchHandler.setOptions(this.options))},Pt.prototype.setLog=function(Ot){this.log=Ot},Pt.prototype._getCloudSetting=function(Ot,Ut){var Bt=this;return new Promise(function(xt,At){return mt(Bt,void 0,void 0,function(){var Mt,Nt,$t,Ft,jt;return Et(this,function(zt){switch(zt.label){case 0:return zt.trys.push([0,2,,3]),this.checkFailed?(this.log.warn(wt.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" check fail"),At(It.errorList.AUTH_FAIL),[2]):($t=Ot instanceof Array,[4,this.settingFetchHandler.fetchSetting($t?Ot:[Ot],Ut,this.token,this.userID,!1)]);case 1:return Ft=zt.sent(),Mt=Ft.data,Ft=Ft.polling_interval,this.checkFailCount=0,this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" suc"),typeof Ft=="number"&&5<=Ft&&this.pollingInterval!==60*Ft&&(this.log.warn(wt.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*Ft,this.uninit(),this.activePolling()),$t?(Nt={},Ot.forEach(function(Yt){var Kt;((Kt=Mt[Yt])==null?void 0:Kt.code)==0&&((Kt=Mt[Yt])==null?void 0:Kt.data)!==void 0&&(Nt[Yt]={setting:(Kt=Mt[Yt])==null?void 0:Kt.data,versions:(Yt=Mt[Yt])==null?void 0:Yt.versions})}),0<Object.keys(Nt).length?xt(Nt):At(It.errorList.MULTI_FILE_NOT_EXIST)):(($t=Mt[Ot])==null?void 0:$t.code)===0&&(Ft=Mt[Ot])!=null&&Ft.data?xt({setting:(Ft=Mt[Ot])==null?void 0:Ft.data,versions:(Ft=Mt[Ot])==null?void 0:Ft.versions}):At({code:(jt=Mt[Ot])==null?void 0:jt.code,msg:(jt=Mt[Ot])==null?void 0:jt.message}),[3,3];case 2:return jt=zt.sent(),this.log.error(wt.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(jt)),(jt==null?void 0:jt.code)===21002&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),At(jt),[3,3];case 3:return[2]}})})})},Pt.prototype.handleFetchFiles=function(Ot,Ut){var Bt=this;Object.keys(Ot).forEach(function(xt){var At=Bt.fileList.find(function(Mt){return Mt.fileName==xt});At?(At.fetchedTime=new Date().getTime(),At.setting=Ot[xt].setting,At.versions=Ot[xt].versions,At.needPolling=Ut):Bt.fileList.find(function(Mt){return Mt.fileName===xt})||Bt.fileList.push({fileName:xt,fetchedTime:new Date().getTime(),needPolling:Ut,setting:Ot[xt].setting,versions:Ot[xt].versions}),At=Bt._getFileName(xt),Bt.settingCacheHandler.storeSetting(At,Ot[xt])})},Pt.prototype._fetchSetting=function(Ot,Ut,Bt){var xt=this;return new Promise(function(At,Mt){xt.log.info(wt.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),xt._getCloudSetting(Ot,xt.envVariable).then(function(Nt){Ut?(Ut.fetchedTime=new Date().getTime(),Ut.setting=Nt.setting,Ut.versions=Nt.versions,Ut.needPolling=Bt):xt.fileList.find(function(Ft){return Ft.fileName===Ot})||xt.fileList.push({fileName:Ot,fetchedTime:new Date().getTime(),needPolling:Bt,setting:Nt.setting,versions:Nt.versions});var $t=xt._getFileName(Ot);xt.settingCacheHandler.storeSetting($t,Nt),At(Nt),xt.log.info(wt.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")}).catch(function(Nt){return mt(xt,void 0,void 0,function(){var $t;return Et(this,function(Ft){switch(Ft.label){case 0:Ut?Ut.fetchedTime=new Date().getTime():this.fileList.find(function(jt){return jt.fileName===Ot})||this.fileList.push({fileName:Ot,fetchedTime:new Date().getTime(),needPolling:Bt,setting:{},versions:{}}),$t=this._getFileName(Ot),Ft.label=1;case 1:return Ft.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting($t)];case 2:return $t=Ft.sent(),At($t),[3,4];case 3:return Ft.sent(),Mt(Nt),[3,4];case 4:return this.log.info(wt.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}})})})})},Pt.prototype.getPublicEnvVariable=function(){var Ot;this.options.env==0?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=St.getBrowser(),this.publicEnvVariable.deviceid=St.generateUUID()):this.options.env==1&&(Ot=wx.getSystemInfoSync(),this.publicEnvVariable.brand=Ot.brand,this.publicEnvVariable.model=Ot.model,this.publicEnvVariable.system=Ot.system,this.publicEnvVariable.platform=Ot.platform,this.publicEnvVariable.wechatVersion=Ot.version,this.publicEnvVariable.wechatSDKVersion=Ot.SDKVersion,this.publicEnvVariable.deviceid=St.generateUUID(this.options.env))},Pt.prototype.pollingSetting=function(Ot){return mt(this,void 0,void 0,function(){var Ut,Bt,xt,At,Mt=this;return Et(this,function(Nt){switch(Nt.label){case 0:return this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+Ot),Ut=[],this.fileList.forEach(function($t){$t.fileName,$t.needPolling&&Ut.push($t.fileName)}),Bt=Ot,this.checkFailed?(this.log.warn(wt.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" has checked fail"),[3,7]):[3,1];case 1:if(!(0<Ut.length))return[3,6];Nt.label=2;case 2:return Nt.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(Ut,this.envVariable,this.token,this.userID)];case 3:return At=Nt.sent(),xt=At.data,At=At.polling_interval,this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,typeof At=="number"&&5<=At&&this.pollingInterval!==60*At&&(this.log.warn(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*At,Bt=1e3*this.pollingInterval),this.fileList.forEach(function($t){return mt(Mt,void 0,void 0,function(){var Ft,jt,zt,Yt;return Et(this,function(Kt){switch(Kt.label){case 0:return $t.fetchedTime=new Date().getTime(),Ft=this._getFileName($t.fileName),xt[$t.fileName]&&xt[$t.fileName].code===0&&xt[$t.fileName].data?(jt=JSON.stringify(xt[$t.fileName].data),zt=JSON.stringify($t.setting),Yt={setting:xt[$t.fileName].data,versions:(Yt=xt[$t.fileName])==null?void 0:Yt.versions,code:(Yt=xt[$t.fileName])==null?void 0:Yt.code,message:(Yt=xt[$t.fileName])==null?void 0:Yt.message},zt!==jt&&(this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+$t.fileName+" setting changed"),$t.setting=Yt.setting,$t.versions=Yt.versions,this.options.pollingNotify($t.fileName,Yt)),[4,this.settingCacheHandler.getCacheSetting(Ft)]):[3,2];case 1:zt=Kt.sent(),jt=JSON.stringify(zt),zt=JSON.stringify(Yt),jt!==zt&&this.settingCacheHandler.storeSetting(Ft,Yt),Kt.label=2;case 2:return[2]}})})}),[3,5];case 4:return At=Nt.sent(),this.log.error(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(At)),(At==null?void 0:At.code)===21002&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(wt.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),Nt.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout(function(){Mt.pollingSetting(Bt)},Bt),[2]}})})},Pt.prototype._getFileName=function(Ot){return Ot},Pt.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},Pt.prototype.refreshAuthCheck=function(){this.checkFailCount=0,this.checkFailed=!1},gt.ZegoSetting=vt=Pt},function(ft,gt,vt){function yt(){}Object.defineProperty(gt,"__esModule",{value:!0}),gt.ZegoLog=void 0,yt.prototype.log=function(){for(var mt=[],Et=0;Et<arguments.length;Et++)mt[Et]=arguments[Et];mt.join(" ")},yt.prototype.debug=function(){for(var mt=[],Et=0;Et<arguments.length;Et++)mt[Et]=arguments[Et];mt.join(" ")},yt.prototype.info=function(){for(var mt=[],Et=0;Et<arguments.length;Et++)mt[Et]=arguments[Et];mt.join(" ")},yt.prototype.warn=function(){for(var mt=[],Et=0;Et<arguments.length;Et++)mt[Et]=arguments[Et];mt.join(" ")},yt.prototype.error=function(){for(var mt=[],Et=0;Et<arguments.length;Et++)mt[Et]=arguments[Et];mt.join(" ")},gt.ZegoLog=yt},function(ft,gt,vt){var yt=this&&this.__awaiter||function(Tt,wt,Rt,It){return new(Rt=Rt||Promise)(function(St,Pt){function Ot(xt){try{Bt(It.next(xt))}catch(At){Pt(At)}}function Ut(xt){try{Bt(It.throw(xt))}catch(At){Pt(At)}}function Bt(xt){var At;xt.done?St(xt.value):((At=xt.value)instanceof Rt?At:new Rt(function(Mt){Mt(At)})).then(Ot,Ut)}Bt((It=It.apply(Tt,wt||[])).next())})},mt=this&&this.__generator||function(Tt,wt){var Rt,It,St,Pt={label:0,sent:function(){if(1&St[0])throw St[1];return St[1]},trys:[],ops:[]},Ot={next:Ut(0),throw:Ut(1),return:Ut(2)};return typeof Symbol=="function"&&(Ot[Symbol.iterator]=function(){return this}),Ot;function Ut(Bt){return function(xt){var At=[Bt,xt];if(Rt)throw new TypeError("Generator is already executing.");for(;Pt;)try{if(Rt=1,It&&(St=2&At[0]?It.return:At[0]?It.throw||((St=It.return)&&St.call(It),0):It.next)&&!(St=St.call(It,At[1])).done)return St;switch(It=0,(At=St?[2&At[0],St.value]:At)[0]){case 0:case 1:St=At;break;case 4:return Pt.label++,{value:At[1],done:!1};case 5:Pt.label++,It=At[1],At=[0];continue;case 7:At=Pt.ops.pop(),Pt.trys.pop();continue;default:if(!(St=0<(St=Pt.trys).length&&St[St.length-1])&&(At[0]===6||At[0]===2)){Pt=0;continue}if(At[0]===3&&(!St||At[1]>St[0]&&At[1]<St[3])){Pt.label=At[1];break}if(At[0]===6&&Pt.label<St[1]){Pt.label=St[1],St=At;break}if(St&&Pt.label<St[2]){Pt.label=St[2],Pt.ops.push(At);break}St[2]&&Pt.ops.pop(),Pt.trys.pop();continue}At=wt.call(Tt,Pt)}catch(Mt){At=[6,Mt],It=0}finally{Rt=St=0}if(5&At[0])throw At[1];return{value:At[0]?At[1]:void 0,done:!0}}}},Et=(Object.defineProperty(gt,"__esModule",{value:!0}),gt.SettingCacheHandler=void 0,vt(0)),bt=vt(7);function Ct(Tt,wt,Rt){Rt===void 0&&(Rt=0),this.storeName=Tt,this.log=wt,this.store=bt.createZegoStore(Tt,Rt)}Ct.prototype.getCacheSetting=function(Tt){return yt(this,void 0,void 0,function(){return mt(this,function(wt){switch(wt.label){case 0:return this.log.info(Et.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(Tt)];case 1:return[2,wt.sent()||""]}})})},Ct.prototype.storeSetting=function(Tt,wt){return yt(this,void 0,void 0,function(){return mt(this,function(Rt){switch(Rt.label){case 0:return this.log.info(Et.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(Tt,wt)];case 1:return Rt.sent(),[2]}})})},gt.SettingCacheHandler=vt=Ct},function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.createZegoStore=gt.ZegoWechatMiniStore=void 0;var yt=vt(8),mt=vt(9),Et=(bt.prototype.getItem=function(Ct){var Tt=this;return new Promise(function(wt,Rt){try{wt(wx.getStorageSync(Tt.keyPrefix+Ct))}catch(It){Rt(It)}})},bt.prototype.setItem=function(Ct,Tt){var wt=this;return new Promise(function(Rt,It){try{wx.setStorageSync(wt.keyPrefix+Ct,Tt),Rt()}catch(St){It(St)}})},bt.prototype.removeItem=function(Ct){var Tt=this;return new Promise(function(wt,Rt){try{wt(wx.removeStorageSync(Tt.keyPrefix+Ct))}catch(It){Rt(It)}})},bt.prototype.clear=function(){return new Promise(function(Ct,Tt){try{wx.clearStorageSync(),Ct()}catch(wt){Tt(wt)}})},bt.prototype.keys=function(){var Ct=this;return new Promise(function(Tt,wt){try{var Rt=wx.getStorageInfoSync().keys,It=[];Rt.forEach(function(St){St.indexOf(Ct.keyPrefix)==0&&It.push(St.replace(Ct.keyPrefix,""))}),It.sort(),Tt(It)}catch(St){wt(St)}})},bt);function bt(Ct){this.storeName=Ct,this.keyPrefix=Ct+"/",this.storeName}gt.ZegoWechatMiniStore=Et,gt.createZegoStore=function(Ct,Tt){return Tt===mt.ZEGO_ENV.BROWSER?yt.createInstance({name:Ct}):new Et(Ct)}},function(ft,gt){ft.exports=pt},function(ft,gt,vt){var yt;Object.defineProperty(gt,"__esModule",{value:!0}),gt.SOCKET_DISCONNECT=gt.ENUM_REMOTE_TYPE=gt.ZEGO_BROWSER_TYPE=gt.ZEGO_ENV=gt.PROTO_VERSION=void 0,gt.PROTO_VERSION="1.0.6",(yt=gt.ZEGO_ENV||(gt.ZEGO_ENV={}))[yt.BROWSER=0]="BROWSER",yt[yt.WEIXINMINI=1]="WEIXINMINI",(yt=gt.ZEGO_BROWSER_TYPE||(gt.ZEGO_BROWSER_TYPE={}))[yt.IE=0]="IE",yt[yt.FIREFOX=1]="FIREFOX",yt[yt.CHROME=2]="CHROME",yt[yt.SAFARI=3]="SAFARI",yt[yt.OPERA=4]="OPERA",yt[yt.WEIXIN=5]="WEIXIN",yt[yt.WEIXINMINI=6]="WEIXINMINI",yt[yt.UNKOWN=7]="UNKOWN",(yt=gt.ENUM_REMOTE_TYPE||(gt.ENUM_REMOTE_TYPE={}))[yt.DISABLE=0]="DISABLE",yt[yt.WEBSOCKET=1]="WEBSOCKET",yt[yt.HTTPS=2]="HTTPS",gt.SOCKET_DISCONNECT=-1},function(ft,gt,vt){var yt=this&&this.__assign||function(){return(yt=Object.assign||function(It){for(var St,Pt=1,Ot=arguments.length;Pt<Ot;Pt++)for(var Ut in St=arguments[Pt])Object.prototype.hasOwnProperty.call(St,Ut)&&(It[Ut]=St[Ut]);return It}).apply(this,arguments)};Object.defineProperty(gt,"__esModule",{value:!0}),gt.SettingFetchHandler=void 0;var mt,Et,bt=vt(0),Ct=vt(1),Tt=vt(11),wt=vt(2);function Rt(It,St){this.options=It,this.log=St,this.seq=0,this.userID=""}vt=mt={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},vt=Et={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},Rt.prototype.setOptions=function(It){this.options=It},Rt.prototype.setDataReport=function(It){this.reportFunc=It},Rt.prototype.setUserID=function(It){this.userID=It},Rt.prototype.fetchSetting=function(It,St,Pt,Ot,Ut){var Bt=this;return Ut===void 0&&(Ut=!0),new Promise(function(xt,At){var Mt,Nt={product:Bt.options.product,files:It,param:yt(yt({},St),{deviceid:void 0}),appid:Bt.options.appID,token:Pt,id_name:Ot,timestamp:new Date().getTime(),biztype:0,deviceid:St.deviceid||wt.generateUUID(Bt.options.env),compress:!1,mode:Bt.options.online?"online":"test"},$t=Nt.param,Ft={appid:Nt.appid,token:Nt.token,id_name:Nt.id_name,deviceid:Nt.deviceid},jt=Bt.seq++;Bt.reportFunc&&Bt.reportFunc(jt,"request_start",{polling:Ut}),(Mt=Bt.options)!=null&&Mt.unify&&Bt.options.connection?Bt.sendCloudRequest(Ot,Nt,"/cloud-setting/get",function(zt){var Yt,Kt=zt.code,er=(zt.msg,zt.data),ir=zt.polling_interval;zt=zt.reportData,Bt.log.info(bt.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+Kt),er&&(Yt=[],Object.keys(er).forEach(function(rr){var lr;Yt.push({name:rr,code:er[rr].code,message:(lr=er[rr])==null?void 0:lr.message,versions:JSON.stringify((lr=er[rr])==null?void 0:lr.versions),content:JSON.stringify((rr=er[rr])==null?void 0:rr.data)})})),Bt.reportFunc&&Bt.reportFunc(jt,"request_end",{code:Kt,reportData:zt,params:Ft,requestKV:$t,files:Yt,polling:Ut}),xt({data:er,polling_interval:ir})},function(zt){var Yt=zt.code,Kt=zt.msg;zt.data,zt=zt.reportData,Bt.log.warn(bt.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+Yt),Bt.reportFunc&&Bt.reportFunc(jt,"request_end",{code:Yt,params:Ft,requestKV:$t,reportData:zt,polling:Ut}),At({code:Yt,msg:Kt})}):Tt.fetch(Bt.options.urls,Nt,Bt.options.env||0).then(function(zt){var Yt,Kt=zt.code,er=(zt.msg,zt.data),ir=zt.polling_interval;zt=zt.reportData,Bt.log.info(bt.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+Kt),er&&(Yt=[],Object.keys(er).forEach(function(rr){var lr;Yt.push({name:rr,code:er[rr].code,message:(lr=er[rr])==null?void 0:lr.message,versions:JSON.stringify((lr=er[rr])==null?void 0:lr.versions),content:JSON.stringify((rr=er[rr])==null?void 0:rr.data)})})),Bt.reportFunc&&Bt.reportFunc(jt,"request_end",{code:Kt,reportData:zt,params:Ft,requestKV:$t,files:Yt,polling:Ut}),xt({data:er,polling_interval:ir})}).catch(function(zt){var Yt=zt.code,Kt=zt.msg;zt.data,zt=zt.reportData,Bt.log.warn(bt.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+Yt),Bt.reportFunc&&Bt.reportFunc(jt,"request_end",{code:Yt,params:Ft,requestKV:$t,reportData:zt,polling:Ut}),At({code:Yt,msg:Kt})})})},Rt.prototype.sendCloudRequest=function(It,St,Pt,Ot,Ut,Bt,xt){var At,Mt=this,Nt=(Bt===void 0&&(Bt=3),xt===void 0&&(xt=[]),new Date().getTime());(At=this.options.connection)!=null&&At.startHttpRequest({service:mt.SERVICE_ClOUD_SETTING,body:St,ack:!1,idName:It,method_no:Et.METHOD_POST,location:Pt},function($t){var Ft,jt,zt,Yt,Kt;($t==null?void 0:$t.status_code)===200?(Ft=(Yt=JSON.parse($t.body)).code,Kt=Yt.message,jt=Yt.data,zt=Yt.polling_interval,Yt=new Date().getTime()-Nt,xt.push({timestamp:Nt,url:Pt,error:Ft,duration:Yt}),Ft===0?Ot({code:Ft,msg:Kt,data:jt,polling_interval:zt,reportData:xt}):Ut({code:Ft,msg:Kt,reportData:xt})):(Kt=new Date().getTime()-Nt,xt.push({timestamp:Nt,url:Pt,error:$t==null?void 0:$t.status_code,duration:Kt}),0<Bt?(Bt--,Mt.sendCloudRequest(It,St,Pt,Ot,Ut,Bt,xt)):Ut(yt(yt({},Ct.errorList.FILE_REQUEST_FAIL),{reportData:xt})))},function($t){var Ft=new Date().getTime()-Nt;xt.push({timestamp:Nt,url:Pt,error:$t.code,duration:Ft}),0<Bt?(Bt--,Mt.sendCloudRequest(It,St,Pt,Ot,Ut,Bt,xt)):Ut(yt(yt({},Ct.errorList.FILE_REQUEST_FAIL),{reportData:xt}))},null,{timeout:4e3})},gt.SettingFetchHandler=vt=Rt},function(ft,gt,vt){var yt=this&&this.__assign||function(){return(yt=Object.assign||function(Et){for(var bt,Ct=1,Tt=arguments.length;Ct<Tt;Ct++)for(var wt in bt=arguments[Ct])Object.prototype.hasOwnProperty.call(bt,wt)&&(Et[wt]=bt[wt]);return Et}).apply(this,arguments)},mt=(Object.defineProperty(gt,"__esModule",{value:!0}),gt.fetch=void 0,vt(1));gt.fetch=function Et(bt,Ct,Tt,wt,Rt,It){return wt===void 0&&(wt=5),Rt===void 0&&(Rt=0),It===void 0&&(It=[]),new Promise(function(St,Pt){Rt=Rt||new Date().getTime();var Ot,Ut,Bt,xt=new Date().getTime();Tt===0?(Ot=new XMLHttpRequest,Ut=bt[(wt+1)%2]||bt[0],Ot.open("post",Ut),Ct.compress==1&&(Ot.responseType="arraybuffer"),Ot.ontimeout=function(){},Ot.onreadystatechange=function(){var At,Mt,Nt,$t,Ft;Ot.readyState==4&&(200<=Ot.status&&Ot.status<300||Ot.status==304?(Mt=void 0,Ct.compress!=1&&(Mt=Ot.responseText),Ft=new Date().getTime()-xt,At=(Nt=JSON.parse(Mt)).code,$t=Nt.message,Mt=Nt.data,Nt=Nt.polling_interval,It.push({timestamp:xt,url:Ut,error:At,duration:Ft}),At===0?St({code:At,msg:$t,data:Mt,polling_interval:Nt,reportData:It}):Pt({code:At,msg:$t,reportData:It})):($t=new Date().getTime()-xt,It.push({timestamp:xt,url:Ut,error:Ot.status,duration:$t}),Ft=new Date().getTime()-Rt,0<wt&&Ft<8e3?Et(bt,Ct,Tt,--wt,Rt,It).then(function(jt){St(jt)}).catch(function(jt){Pt(jt)}):Pt(yt(yt({},mt.errorList.FILE_REQUEST_FAIL),{reportData:It}))))},Ot.timeout=8e3,Ot.send(JSON.stringify(Ct))):(Bt=bt[(wt+1)%2]||bt[0],wx.request({url:Bt,data:Ct,method:"POST",success:function(At){var Mt=(Ft=At.data).code,Nt=Ft.message,$t=Ft.data,Ft=Ft.polling_interval;Mt!==void 0?Mt===0?St({code:Mt,msg:Nt,data:$t,polling_interval:Ft,reportData:It}):Pt({code:Mt,msg:Nt,reportData:It}):(Nt=new Date().getTime()-xt,It.push({timestamp:xt,url:Bt,error:mt.errorList.FILE_REQUEST_FAIL.code,msg:At.data,duration:Nt}),0<wt?Et(bt,Ct,Tt,--wt,Rt,It).then(function(jt){St(jt)}).catch(function(jt){Pt(jt)}):Pt(yt(yt({},mt.errorList.FILE_REQUEST_FAIL),{reportData:It})))},fail:function(At){var Mt=new Date().getTime()-xt;It.push({timestamp:xt,url:Bt,error:mt.errorList.FILE_REQUEST_FAIL.code,msg:At.errMsg,duration:Mt}),0<wt?Et(bt,Ct,Tt,--wt,Rt,It).then(function(Nt){St(Nt)}).catch(function(Nt){Pt(Nt)}):Pt(yt(yt({},mt.errorList.FILE_REQUEST_FAIL),{reportData:It}))}}))})}},function(ft,gt,vt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.INIT_CONFIG=void 0,gt.INIT_CONFIG={env:0}}],ct.c=ht,ct.d=function(ft,gt,vt){ct.o(ft,gt)||Object.defineProperty(ft,gt,{enumerable:!0,get:vt})},ct.r=function(ft){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ft,"__esModule",{value:!0})},ct.t=function(ft,gt){if(1&gt&&(ft=ct(ft)),8&gt||4&gt&&typeof ft=="object"&&ft&&ft.__esModule)return ft;var vt=Object.create(null);if(ct.r(vt),Object.defineProperty(vt,"default",{enumerable:!0,value:ft}),2&gt&&typeof ft!="string")for(var yt in ft)ct.d(vt,yt,function(mt){return ft[mt]}.bind(null,yt));return vt},ct.n=function(ft){var gt=ft&&ft.__esModule?function(){return ft.default}:function(){return ft};return ct.d(gt,"a",gt),gt},ct.o=function(ft,gt){return Object.prototype.hasOwnProperty.call(ft,gt)},ct.p="",ct(ct.s=3))},function(st,at,lt){function ct(gt){if(ft[gt])return ft[gt].exports;var vt=ft[gt]={i:gt,l:!1,exports:{}};return ht[gt].call(vt.exports,vt,vt.exports,ct),vt.l=!0,vt.exports}var pt,ut,ht,ft;st.exports=(pt=lt(7),ut=lt(1),ht=[function(gt,vt,yt){var mt,Et;Object.defineProperty(vt,"__esModule",{value:!0}),vt.typeMap=vt.BrokenType=vt.ConnectedType=vt.DisconnectedType=vt.Method=vt.ConnectionClosedAction=vt.NetWorkState=vt.externalErrorList=vt.Stick=vt.PcConnectState=vt.ENUM_CONNECT_STATE=vt.DestroyType=vt.StreamType=vt.ModeMap=vt.Mode=vt.ZegoconnRunEnv=vt.BusinessService=vt.AccessHub_Error_Code=vt.AccessHubMessageType=vt.ENUM_NETWORK_STATE=vt.PROTO_VERSION=void 0,vt.PROTO_VERSION="1.21.0",(Et=vt.ENUM_NETWORK_STATE||(vt.ENUM_NETWORK_STATE={}))[Et.offline=0]="offline",Et[Et.online=1]="online",(Et=vt.AccessHubMessageType||(vt.AccessHubMessageType={}))[Et.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",Et[Et.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",Et[Et.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",Et[Et.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",Et[Et.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",Et[Et.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",Et[Et.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",Et[Et.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",Et[Et.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",Et[Et.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",Et[Et.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",Et[Et.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",Et[Et.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",Et[Et.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",Et[Et.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",Et[Et.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",Et[Et.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",Et[Et.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",Et[Et.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",Et[Et.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",Et[Et.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(mt=Et=vt.AccessHub_Error_Code||(vt.AccessHub_Error_Code={}))[mt.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",mt[mt.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",mt[mt.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",mt[mt.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",mt[mt.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",mt[mt.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",mt[mt.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",mt[mt.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",mt[mt.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",mt[mt.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",mt[mt.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",mt[mt.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",mt[mt.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",mt[mt.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",mt[mt.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(mt=vt.BusinessService||(vt.BusinessService={}))[mt.SERVICE_UNSET=0]="SERVICE_UNSET",mt[mt.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",mt[mt.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",mt[mt.SERVICE_MIX=3]="SERVICE_MIX",mt[mt.SERVICE_ZEUS=4]="SERVICE_ZEUS",mt[mt.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",mt[mt.SERVICE_L3=6]="SERVICE_L3",mt[mt.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",mt[mt.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",mt[mt.SERVICE_ZIM=9]="SERVICE_ZIM",mt[mt.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",mt[mt.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",mt[mt.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",mt[mt.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",mt[mt.SERVICE_QUALITY=14]="SERVICE_QUALITY",mt[mt.SERVICE_SECURITY=15]="SERVICE_SECURITY",mt[mt.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",mt[mt.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",mt[mt.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",mt[mt.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",mt[mt.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",mt[mt.SERVICE_CDN=21]="SERVICE_CDN",mt[mt.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",mt[mt.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",mt[mt.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",mt[mt.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",mt[mt.SERVICE_ECHO=26]="SERVICE_ECHO",mt[mt.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",mt[mt.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(mt=vt.ZegoconnRunEnv||(vt.ZegoconnRunEnv={}))[mt.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",mt[mt.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",mt[mt.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(mt=vt.Mode||(vt.Mode={}))[mt.Mode_UNSET=0]="Mode_UNSET",mt[mt.MODE_ONLINE=1]="MODE_ONLINE",mt[mt.MODE_TEST=2]="MODE_TEST",mt[mt.MODE_ALPHA=3]="MODE_ALPHA",vt.ModeMap={1:"online",2:"test",3:"alpha"},(mt=vt.StreamType||(vt.StreamType={}))[mt.HTTP=0]="HTTP",mt[mt.PC=1]="PC",mt[mt.OTHER=2]="OTHER",(mt=vt.DestroyType||(vt.DestroyType={}))[mt.NONE=0]="NONE",mt[mt.BROKEN=1]="BROKEN",mt[mt.DISCONNECT=2]="DISCONNECT",vt.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(mt=vt.PcConnectState||(vt.PcConnectState={}))[mt.CONNECTED=0]="CONNECTED",mt[mt.DISCONNECT=1]="DISCONNECT",mt[mt.BROKEN=2]="BROKEN",vt.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},vt.externalErrorList=[Et.ACCESSHUB_INVALID_APPID,Et.ACCESSHUB_INVALID_SIGNATURE],(mt=vt.NetWorkState||(vt.NetWorkState={}))[mt.offline=0]="offline",mt[mt.online=1]="online",(Et=vt.ConnectionClosedAction||(vt.ConnectionClosedAction={}))[Et.ACTION_RESERVED=0]="ACTION_RESERVED",Et[Et.ACTION_DISPATCH=1]="ACTION_DISPATCH",Et[Et.ACTION_RETRY=2]="ACTION_RETRY",Et[Et.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",Et[Et.ACTION_ABORT=4]="ACTION_ABORT",Et[Et.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(mt=vt.Method||(vt.Method={}))[mt.METHOD_UNSET=0]="METHOD_UNSET",mt[mt.METHOD_GET=1]="METHOD_GET",mt[mt.METHOD_POST=2]="METHOD_POST",(Et=vt.DisconnectedType||(vt.DisconnectedType={}))[Et.CLOSE=0]="CLOSE",Et[Et.TEMP=1]="TEMP",Et[Et.TIMEOUT=2]="TIMEOUT",(mt=vt.ConnectedType||(vt.ConnectedType={}))[mt.AUTO=0]="AUTO",mt[mt.MANUAL=1]="MANUAL",(Et=vt.BrokenType||(vt.BrokenType={}))[Et.EMPTY=0]="EMPTY",Et[Et.CLOSE=1]="CLOSE",vt.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.APP_CONFIG_KEY=vt.NET_ACCESS_SERVERS=vt.NET_ACCESS_CONFIG=void 0,yt=yt(0),vt.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:yt.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},vt.NET_ACCESS_SERVERS="z_net_access_servers",vt.APP_CONFIG_KEY="z_appconfig"},function(gt,vt){gt.exports=pt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.errorCodeList=void 0,vt.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}}},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.uuidNum=vt.decodeString=vt.encodeString=void 0,vt.encodeString=function(mt){return Uint8Array.from(Array.from(unescape(encodeURIComponent(mt))).map(function(Et){return Et.charCodeAt(0)}))},vt.decodeString=function(mt){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(mt))))},vt.uuidNum=function(mt,Et){var bt,Ct,Tt="0123456789".split(""),wt=[];if(Et=Tt.length,mt)for(bt=0;bt<mt;bt++)wt[bt]=Tt[0|Math.random()*Et];else for(wt[8]=wt[13]=wt[18]=wt[23]="-",wt[14]="4",bt=0;bt<36;bt++)wt[bt]||(Ct=0|16*Math.random(),wt[bt]=Tt[bt==19?3&Ct|8:Ct]);return wt.join("")}},function(gt,vt,yt){var mt=this&&this.__assign||function(){return(mt=Object.assign||function(It){for(var St,Pt=1,Ot=arguments.length;Pt<Ot;Pt++)for(var Ut in St=arguments[Pt])Object.prototype.hasOwnProperty.call(St,Ut)&&(It[Ut]=St[Ut]);return It}).apply(this,arguments)},Et=(Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetAgentPCRequest=void 0,yt(0)),bt=yt(1),Ct=yt(6),Tt=yt(4),wt=[Et.BusinessService.SERVICE_WEBRTC_SIGNAL,Et.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function Rt(It,St,Pt,Ot,Ut){this.logger=It,this.service=St,this.streamManager=Pt,this.pcEstablishTimeout=Ot,this.option=Ut,this.connectState=Et.PcConnectState.DISCONNECT,this.lastConnectState=Et.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(Et.StreamType.PC),this.eventManager=new Ct.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}Rt.prototype.sendRequest=function(It,St,Pt){var Ot=this,Ut=It.payload,Bt=((wt.includes(this.service)||(Bt=this.option)!=null&&Bt.encode)&&(Ut=(0,Tt.encodeString)(It.payload)),{service_no:this.service,ack:It.ack,payload:Ut,wss_message_type:bt.NET_ACCESS_CONFIG.wssMessageType,wss_path:(Bt=this.option)==null?void 0:Bt.path,wss_raw_query:(Ut=this.option)==null?void 0:Ut.query,zegoconn_version:bt.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||(this.logger.info("zn.napr.sr pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(Et.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,Bt,function(){Ot.logger.info("zn.napr.sr suc"),Pt&&Pt()},function(xt){Ot.logger.error("zn.napr.sr fail"),St&&St(xt)},null,{isInSendMap:typeof It.isInSendMap=="boolean"&&It.isInSendMap}),this.netPcStream.isFirst=!1},Rt.prototype.onPushEvent=function(It,St){var Pt;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(It)),It){case Et.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(St,this.netPcStream.StreamID);break;case Et.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case Et.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.logger.info("zn.napr.ope"+" ".concat(this.service," down ").concat((Ot=St==null?void 0:St.ts)==null?void 0:Ot.toNumber()));var Ot=St.payload;(wt.includes(this.service)||(Pt=this.option)!=null&&Pt.encode)&&(Ot=(0,Tt.decodeString)(St.payload)),this.eventManager.emit("downLoadMessage",Ot)}},Rt.prototype.on=function(It,St){return this.eventManager.addEventHandler(It,St)},Rt.prototype.off=function(It,St){this.eventManager.removeEventHandler(It,St)},Rt.prototype.pcEstablished=function(It,St){this.logger.info("zn.napr.pe call "+JSON.stringify(It)),this.setConnectState(Et.PcConnectState.CONNECTED);var Pt=Et.ConnectedType.MANUAL;this.lastConnectState===Et.PcConnectState.BROKEN&&this.connectState===Et.PcConnectState.CONNECTED&&(Pt=Et.ConnectedType.AUTO),this.eventManager.emit("connected",Pt),this.reportEvent("pcConnectedEvent",{proxy_link_sources:It==null?void 0:It.from,connect_stream:St}),this.brokenTimer&&clearTimeout(this.brokenTimer)},Rt.prototype.pcBroken=function(){var It=this;this.logger.info("zn.napr.pb call"),this.setConnectState(Et.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout(function(){It.eventManager.emit("disconnected",Et.DisconnectedType.TEMP),It.reportEvent("pcDisconnectedEvent")},1e3*this.pcEstablishTimeout)},Rt.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},Rt.prototype._close=function(It,St){var Pt;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==Et.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),Pt=this.streamManager.getStreamID(),this.netPcStream.refresh(Pt),this.eventManager.emit(It,St),Pt="",It==="broken"?Pt="pcBrokenEvent":It==="disconnected"&&(Pt="pcDisconnectedEvent"),Pt&&this.reportEvent(Pt)),this.setConnectState(Et.PcConnectState.DISCONNECT)},Rt.prototype.closePc=function(){this._close("broken")},Rt.prototype.closeRequest=function(){this._close("disconnected",Et.DisconnectedType.CLOSE)},Rt.prototype.setConnectState=function(It){this.connectState!==It&&(this.lastConnectState=this.connectState,this.connectState=It)},Rt.prototype.reportEvent=function(It,St){this.eventManager.emit(It,mt({service_no:this.service},St))},vt.NetAgentPCRequest=Rt},function(gt,vt,yt){function mt(){this.handlerListMap={}}Object.defineProperty(vt,"__esModule",{value:!0}),vt.EventManager=void 0,mt.prototype.addEventHandler=function(Et,bt){if(this.handlerListMap[Et]||(this.handlerListMap[Et]=[]),typeof bt!="function")throw new Error("Params callBack is not a Function");return this.handlerListMap[Et]&&this.handlerListMap[Et].indexOf(bt)==-1&&this.handlerListMap[Et].push(bt),!0},mt.prototype.removeEventHandler=function(Et,bt){return!!this.handlerListMap[Et]&&(this.handlerListMap[Et]=bt?this.handlerListMap[Et].filter(function(Ct){return Ct!==bt}):[],!0)},mt.prototype.emit=function(Et){for(var bt=[],Ct=1;Ct<arguments.length;Ct++)bt[Ct-1]=arguments[Ct];this.handlerListMap[Et]&&this.handlerListMap[Et].forEach(function(Tt){try{setTimeout(function(){Tt.apply(void 0,bt)},0)}catch(wt){console.error('Fail to execute callback of event "'.concat(Et,'" : ').concat(wt))}})},vt.EventManager=mt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetAgentHttpRequest=void 0;var mt=yt(0),Et=yt(4),bt=yt(1);function Ct(Tt,wt,Rt){this.logger=Tt,this.service=wt,this.streamManager=Rt,this.netHttpStream=this.streamManager.createStream(mt.StreamType.HTTP)}Ct.prototype.sendRequest=function(Tt,wt,Rt,It,St){var Pt=this;Tt={service_no:this.service,ack:Tt.ack,headers:Tt.headers,body:(0,Et.encodeString)(JSON.stringify(Tt.body)),id_name:Tt.idName,method_no:Tt.method_no,stick:Tt.stick,location:Tt.location,zegoconn_version:bt.NET_ACCESS_CONFIG.connectVer},this.netHttpStream.sendMessage(mt.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,Tt,function(Ot){var Ut=(Ot==null?void 0:Ot.headers).find(function(Bt){return(Bt==null?void 0:Bt.name)==="Content-Encoding"});(Ut==null?void 0:Ut.val)==="gzip"?Pt.logger.info("zn.nahr.sr gzip"):Ot.body&&(Ut=(0,Et.decodeString)(Ot.body),Ot.body=Ut),Pt.logger.info("zn.nahr.sr suc "+JSON.stringify(Ot)),wt&&wt(Ot)},function(Ot,Ut,Bt){Pt.logger.error("zn.nahr.sr fail"),Rt&&Rt(Bt||Ot)},function(Ot){Pt.logger.error("zn.nahr.sr ack"),It&&It(Ot)},St),this.netHttpStream.isFirst=!1},vt.NetAgentHttpRequest=Ct},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.Method=vt.Mode=vt.DisconnectedType=vt.ConnectedType=vt.NET_ACCESS_CONFIG=vt.BrokenType=vt.BusinessService=vt.NetAgentHttpRequest=vt.NetAgentPCRequest=vt.ZegoConnectionAgent=void 0;var mt=yt(0),Et=(Object.defineProperty(vt,"BrokenType",{enumerable:!0,get:function(){return mt.BrokenType}}),Object.defineProperty(vt,"BusinessService",{enumerable:!0,get:function(){return mt.BusinessService}}),Object.defineProperty(vt,"ConnectedType",{enumerable:!0,get:function(){return mt.ConnectedType}}),Object.defineProperty(vt,"DisconnectedType",{enumerable:!0,get:function(){return mt.DisconnectedType}}),Object.defineProperty(vt,"Mode",{enumerable:!0,get:function(){return mt.Mode}}),Object.defineProperty(vt,"Method",{enumerable:!0,get:function(){return mt.Method}}),yt(9)),bt=(Object.defineProperty(vt,"ZegoConnectionAgent",{enumerable:!0,get:function(){return Et.ZegoConnectionAgent}}),yt(7)),Ct=(Object.defineProperty(vt,"NetAgentHttpRequest",{enumerable:!0,get:function(){return bt.NetAgentHttpRequest}}),yt(1)),Tt=(Object.defineProperty(vt,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return Ct.NET_ACCESS_CONFIG}}),yt(5));Object.defineProperty(vt,"NetAgentPCRequest",{enumerable:!0,get:function(){return Tt.NetAgentPCRequest}})},function(gt,vt,yt){var mt=this&&this.__assign||function(){return(mt=Object.assign||function(Ft){for(var jt,zt=1,Yt=arguments.length;zt<Yt;zt++)for(var Kt in jt=arguments[zt])Object.prototype.hasOwnProperty.call(jt,Kt)&&(Ft[Kt]=jt[Kt]);return Ft}).apply(this,arguments)},Et=this&&this.__spreadArray||function(Ft,jt,zt){if(zt||arguments.length===2)for(var Yt,Kt=0,er=jt.length;Kt<er;Kt++)!Yt&&Kt in jt||((Yt=Yt||Array.prototype.slice.call(jt,0,Kt))[Kt]=jt[Kt]);return Ft.concat(Yt||Array.prototype.slice.call(jt))},bt=(Object.defineProperty(vt,"__esModule",{value:!0}),vt.ZegoConnectionAgent=void 0,yt(0)),Ct=yt(10),Tt=yt(13),wt=yt(18),Rt=yt(19),It=yt(20),St=yt(1),Pt=yt(6),Ot=yt(21),Ut=yt(3),Bt=yt(22),xt=yt(4),At=yt(23),Mt=yt(7),Nt=yt(24);function $t(){var Ft=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this._linkConnectState=bt.ENUM_CONNECT_STATE.disconnect,this.lastLinkConnectState=bt.ENUM_CONNECT_STATE.disconnect,this.onConnectedEvent=function(jt,zt){var Yt;Ft.linkConnectState=bt.ENUM_CONNECT_STATE.connected,Ft.getConfig(),Ft.stateCenter.specified||(Yt=Ft.reportSeq++,Ft.eventManager.emit("dispatchEvent",Yt,"start"),Ft.dispatch().then(function(Kt){var er=Kt.servers;Kt=Kt.domains,Ft.eventManager.emit("dispatchEvent",Yt,"end",{domains:Kt}),0<er.length&&Ft.eventManager.emit("dispatchResultUpdate",{servers:er})}).catch(function(Kt){})),Ft.eventManager.emit("connected"),Ft.connectedTime=new Date().getTime(),Ft.connectid=(0,xt.uuidNum)(16),Ft.eventManager.emit("connectedEvent",Ft.connectSeq,"end",{servers:jt,count:jt.length,connectid:Ft.connectid,connectEvents:zt})},this.onConnectingEvent=function(){Ft.logger.info("zn.zca.oce call"),Ft.linkConnectState=bt.ENUM_CONNECT_STATE.connecting},this.onDisConnectedEvent=function(jt){Ft.logger.info("zn.zca.ode"+" ".concat(jt)),Ft.linkConnectState=bt.ENUM_CONNECT_STATE.disconnect,jt?(Ft.disConnect(),Ft.netAgentPCRequestMgr.updateConnectState(bt.PcConnectState.BROKEN)):(Ft.eventManager.emit("disconnected"),Ft.netAgentPCRequestMgr.updateConnectState(bt.PcConnectState.DISCONNECT))},this.onPushEvent=function(jt,zt,Yt){switch(zt){case bt.AccessHubMessageType.MSG_TYPE_REDIRECT:Ft.redirect(Yt);break;case bt.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:Ft.connectClosed(Yt);break;case bt.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case bt.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case bt.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:Ft.streamManager.onPushEvent(jt,zt,Yt);break;case bt.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:Ft.businessRequestMgr.decodeConfigMessage(Yt.data)}}}Object.defineProperty($t.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"linkConnectState",{get:function(){return this._linkConnectState},set:function(Ft){this.lastLinkConnectState=this._linkConnectState,this._linkConnectState=Ft},enumerable:!1,configurable:!0}),$t.prototype.init=function(){this.logger=new At.ZegoLogger,this.protobuf=new Ct.AccessHubProtoBuf,this.stateCenter=new Bt.StateCenter,this.eventManager=new Pt.EventManager,this.checkLinkMsg(),this.inited=!0},$t.prototype.unInit=function(){this.inited=!1},$t.prototype.setAppInfo=function(Ft){this.stateCenter.appInfo=Ft,this.stateCenter.networkState=!navigator||navigator.onLine?bt.ENUM_NETWORK_STATE.online:bt.ENUM_NETWORK_STATE.offline,Ft.env===0?this.bindWindowListener():Ft.env===1&&this.bindWxListener(),this.zegoLink=new Tt.ZegoWssLink(Ft.appID,Ft.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new Nt.StreamManager(this.zegoLink),this.businessRequestMgr=new wt.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new Rt.NetHeartBeatHandler(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new It.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},$t.prototype.setUserInfo=function(Ft){this.stateCenter.userId=Ft},$t.prototype.setNetAgentDefaultServers=function(Ft){this.connectServers=Et([],Ft,!0)},$t.prototype.setNetAgentSpecifiedServers=function(Ft){this.logger.info("zn.sss.0 "+JSON.stringify(Ft)),this.stateCenter.specified=!0,this.specifiedServers=Et([],Ft,!0)},$t.prototype.setBackupDomains=function(Ft){this.primaryDomains=Ft},$t.prototype.setDispatchConnectServers=function(Ft){this.connect(Ft)},$t.prototype.startHttpRequest=function(Ft,jt,zt,Yt,Kt){var er=this,ir=this.reportSeq++;this.eventManager.emit("requestEvent",ir,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new Mt.NetAgentHttpRequest(this.logger,Ft.service,this.streamManager).sendRequest(Ft,function(rr){er.eventManager.emit("requestEvent",ir,"end",{na_req_location:Ft.location,status_code:rr.status_code,err_code:0}),jt&&jt(rr)},function(rr){er.eventManager.emit("requestEvent",ir,"end",{na_req_location:Ft.location,err_code:rr.code||0}),zt&&zt(rr)},Yt,Kt)},$t.prototype.getAppConfigByAgent=function(Ft,jt,zt){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.getAppConfig(Ft,this.stateCenter.userId,jt,zt)},$t.prototype.getPCRequest=function(Ft,jt){var zt=this;return(jt=this.netAgentPCRequestMgr.getRequest(Ft,jt)).on("disconnected",function(Yt){zt.logger.warn("zn.zca.gpr "+Ft+" disconnect "+Yt),Yt===bt.DisconnectedType.TEMP&&(zt.disConnect(),zt.connectStart())}),jt.on("connectStart",function(){zt.connectUa()}),jt},$t.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},$t.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},$t.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},$t.prototype.on=function(Ft,jt){return this.logger.info("zn.zca.o.0 "+Ft),this.eventManager.addEventHandler(Ft,jt)},$t.prototype.off=function(Ft,jt){this.logger.info("zn.zca.o.1 "+Ft),this.eventManager.removeEventHandler(Ft,jt)},$t.prototype.setLogger=function(Ft){this.logger=Ft},$t.prototype.setAccess=function(Ft){this.stateCenter.useNetAgent=Ft},$t.prototype.getVersion=function(){return bt.PROTO_VERSION},$t.prototype.heartBeatHandler=function(){var Ft=this;this.netHeartBeatHandler.netHbLogout=function(jt){Ft.retryLinkHandler&&([Ut.errorCodeList.NET_HB_TIMEOUT.code].includes(jt.code)?(Ft.retryLinkHandler.startMaxTime(),Ft.disConnect(),Ft.connectStart()):(Ft.retryLinkHandler.stopMaxTime(),Ft.retryLinkHandler.invalid(),Ft.eventManager.emit("disconnected")))}},$t.prototype.bindWindowListener=function(){var Ft=this;window.addEventListener("offline",function(){Ft.netOffLineHandle()}),window.addEventListener("online",function(){Ft.netOnLineHandle()})},$t.prototype.bindWxListener=function(){var Ft=this;wx.onNetworkStatusChange(function(jt){jt.isConnected?Ft.netOnLineHandle():Ft.netOffLineHandle()})},$t.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=bt.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},$t.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=bt.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},$t.prototype.checkLinkMsg=function(){var Ft=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var jt=Date.now()-this.zegoLink.updatedMsgTime;if(jt>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+jt),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout(function(){Ft.checkLinkMsg()},1e3*this.linkMsgCheckInterval)}},$t.prototype.connect=function(Ft){var jt=this;0<Ft.length&&(this.connectServers=Et([],Ft,!0)),this.stateCenter.specified&&0<this.specifiedServers.length&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new Ot.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(zt,Yt){Yt===Ut.errorCodeList.NET_SOCKET_TIMEOUT&&(jt.eventManager.emit("disconnected",Yt),jt.netAgentPCRequestMgr.updateConnectState(bt.PcConnectState.DISCONNECT,bt.DisconnectedType.TIMEOUT,Yt))},this.connectStart(!1,!0)},$t.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket(bt.DestroyType.DISCONNECT)},$t.prototype.getConfig=function(){function Ft(Yt,Kt,er){er?jt.logger.info("zn.zca.gc fail "+JSON.stringify(er)):Yt.code===0?(jt.logger.info("zn.zca.gc suc "+JSON.stringify(Yt)),jt.getConfigSuccess(Yt,zt)):jt.logger.info("zn.zca.gc fail")}var jt=this,zt=new Date().getTime();this.businessRequestMgr.getConfig(Ft,Ft)},$t.prototype.getConfigSuccess=function(Ft,jt){var zt;this.netHeartBeatHandler.init(Ft),this.netAgentPCRequestMgr.setEstablishTimeout(Ft.data.pc_establish_timeout),(zt=Ft==null?void 0:Ft.data)!=null&&zt.client_outer_ip&&(this.stateCenter.clientIP=Ft.data.client_outer_ip),(zt=Ft==null?void 0:Ft.data)!=null&&zt.ntp_time&&(zt=Ft.data.ntp_time.toNumber(),Ft=new Date().getTime(),zt+=Math.round((Ft-jt)/2),this.stateCenter.timeOffset=zt-Ft),this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset})},$t.prototype.dispatch=function(){var Ft=this;return new Promise(function(jt,zt){Ft.businessRequestMgr.dispatchURL(function(Yt){Yt=Yt.data.wss_groups;var Kt=(Ft.logger.info("zn.nab.du wss_groups: "+JSON.stringify(Yt)),Ft.getConnectionDomains(Yt,Ft.primaryDomains));Kt=Ft.handleWssGroups(Kt),jt({servers:Kt,domains:Yt})},function(Yt){zt(Yt)})})},$t.prototype.handleWssGroups=function(Ft){return Array.isArray(Ft)&&0<Ft.length?Ft.map(function(jt){return St.NET_ACCESS_CONFIG.scheme+"://"+jt.host+"/"+St.NET_ACCESS_CONFIG.location}):[]},$t.prototype.getConnectionDomains=function(Ft,jt){var zt=Et([],Ft,!0);return jt.forEach(function(Yt){Ft.forEach(function(Kt){var er;(er=Kt.main_domain||(er=Kt.host.split("."))[er.length-2]+"."+er[er.length-1])!==Yt&&(er=Kt.host.replace(er,Yt),zt.push({group:Kt.group,host:er}))})}),zt},$t.prototype.getAppConfig=function(Ft,jt,zt,Yt){var Kt=this;return new Promise(function(er,ir){typeof jt=="string"&&typeof zt=="string"?Kt.businessRequestMgr.getAppConfig(Ft,jt,zt,Yt).then(function(rr){er(mt(mt({},rr),{retryCount:Kt.getAppConfigFailCount}))}).catch(function(rr){var lr;Kt.logger.error("zn.zca.gac "+JSON.stringify(rr)),-1<bt.externalErrorList.indexOf(rr.code)?(lr=Kt.getAppConfigFailCount,Kt.getAppConfigFailCount=0,ir(mt(mt({},rr),{retryCount:lr}))):(Kt.getAppConfigFailCount++,(rr.code===20008||rr.code===1100002)&&Kt.getAppConfigFailCount<3?Kt.getAppConfig(Ft,jt,zt).then(function(nr){return er(nr)}).catch(function(nr){return ir(nr)}):(lr=Kt.getAppConfigFailCount,Kt.getAppConfigFailCount=0,ir(mt(mt({},rr),{retryCount:lr}))))}):Kt.logger.error("zn.zca.gac userID or token must be string")})},$t.prototype.reportDisConnectEvent=function(){var Ft=new Date().getTime()-this.connectedTime;console.warn("reportDisConnectEvent"),this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:Ft,server:this.zegoLink.connectServer,connectid:this.connectid})},$t.prototype.redirect=function(Ft){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(Ft.wss_groups))),(Ft=this.handleWssGroups(Ft.wss_groups))&&Array.isArray(Ft)&&0<Ft.length?(this.disConnect(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),Ft=this.specifiedServers),this.zegoLink.createSocket(Ft),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},$t.prototype.connectClosed=function(Ft){var jt=this;switch(this.logger.info("zn.zca.cc"+" ".concat(Ft.reason," ").concat(Ft.msg," ").concat(Ft.action)),Ft.action){case bt.ConnectionClosedAction.ACTION_DISPATCH:var zt=this.reportSeq++;this.eventManager.emit("dispatchEvent",zt,"start"),this.dispatch().then(function(Yt){var Kt=Yt.servers;Yt=Yt.domains,jt.eventManager.emit("dispatchEvent",zt,"end",{domains:Yt,reason:"ConnectClosed"}),Array.isArray(Kt)&&0<Kt.length&&(jt.eventManager.emit("dispatchResultUpdate",{servers:Kt}),Yt=jt.stateCenter.specified?jt.specifiedServers:Kt,jt.disConnect(),jt.zegoLink.createSocket(Yt),jt.connectStart(!1,!0))}).catch(function(Yt){jt.logger.info("zn.zca.cc dispatch fail")});break;case bt.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case bt.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",bt.BrokenType.CLOSE),this.connectStart();case bt.ConnectionClosedAction.ACTION_ABORT:case bt.ConnectionClosedAction.ACTION_RESERVED:}},$t.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},$t.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(bt.ENUM_CONNECT_STATE.disconnect))},$t.prototype.connectStart=function(Ft,jt){this.retryLinkHandler.active(Ft,jt)&&this.reportConnectEvent()},$t.prototype.reportConnectEvent=function(){var Ft=this.reportSeq++;this.connectSeq=Ft,this.eventManager.emit("connectedEvent",Ft,"start")},$t.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.lastLinkConnectState===bt.ENUM_CONNECT_STATE.connected&&this.linkConnectState===bt.ENUM_CONNECT_STATE.disconnect&&this.reportDisConnectEvent()},$t.prototype.testConnect=function(){this.startHttpRequest({service:bt.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,stick:"zego-action-dispatch",method_no:bt.Method.METHOD_POST,location:"/cloud-setting/get"},function(Ft){console.warn("suc",Ft)},function(Ft){console.warn("err",Ft)},function(Ft){console.warn("suc",Ft)})},vt.ZegoConnectionAgent=$t},function(gt,vt,yt){var mt=this&&this.__assign||function(){return(mt=Object.assign||function(Pt){for(var Ot,Ut=1,Bt=arguments.length;Ut<Bt;Ut++)for(var xt in Ot=arguments[Ut])Object.prototype.hasOwnProperty.call(Ot,xt)&&(Pt[xt]=Ot[xt]);return Pt}).apply(this,arguments)},Et=this&&this.__createBinding||(Object.create?function(Pt,Ot,Ut,Bt){Bt===void 0&&(Bt=Ut);var xt=Object.getOwnPropertyDescriptor(Ot,Ut);xt&&!("get"in xt?!Ot.__esModule:xt.writable||xt.configurable)||(xt={enumerable:!0,get:function(){return Ot[Ut]}}),Object.defineProperty(Pt,Bt,xt)}:function(Pt,Ot,Ut,Bt){Pt[Bt=Bt===void 0?Ut:Bt]=Ot[Ut]}),bt=this&&this.__setModuleDefault||(Object.create?function(Pt,Ot){Object.defineProperty(Pt,"default",{enumerable:!0,value:Ot})}:function(Pt,Ot){Pt.default=Ot}),Ct=this&&this.__importStar||function(Pt){if(Pt&&Pt.__esModule)return Pt;var Ot={};if(Pt!=null)for(var Ut in Pt)Ut!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Ut)&&Et(Ot,Pt,Ut);return bt(Ot,Pt),Ot},Tt=this&&this.__importDefault||function(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}},wt=(Object.defineProperty(vt,"__esModule",{value:!0}),vt.AccessHubProtoBuf=void 0,Tt(yt(11))),Rt=(Ct=Ct(yt(2)),yt(0)),It=Tt(yt(12));function St(){var Pt;this.protoInstance=It.default,this.protoMap=((Pt={})[Rt.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],Pt[Rt.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],Pt[Rt.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],Pt[Rt.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],Pt[Rt.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],Pt[Rt.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],Pt[Rt.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],Pt[Rt.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],Pt[Rt.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],Pt[Rt.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],Pt[Rt.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],Pt[Rt.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],Pt)}Ct.util.Long=wt.default,Ct.configure(),St.prototype.encodeRequest=function(Pt,Ot,Ut){var Bt=(xt=this.protoMap[Pt])[0],xt=xt[1];return xt=(Bt=this.encode(this.protoInstance[Bt][xt],Ot)).length,(Ot=new Uint8Array(13+xt))[0]=175,Ot[1]=0,Ot[2]=Pt>>8,Ot[3]=Pt-(Ot[2]<<8),Ot.set(new Uint8Array(Int32Array.from([xt]).buffer).reverse(),4),Ot.set(new Uint8Array(Int32Array.from([Ut]).buffer).reverse(),8),Ot[12]=0,Ot.set(Bt,13),Ot},St.prototype.decodeResponse=function(Pt){var Ot=(Pt[2]<<8)+Pt[3],Ut=new DataView(Pt.buffer).getUint32(8),Bt=Pt.slice(13);try{var xt=this.protoMap[Ot],At=xt[0],Mt=xt[1];return[Ut,Ot,this.decode(this.protoInstance[At][Mt],Bt)]}catch{return[Ut,Ot,{code:1}]}},St.prototype.decodeConfigMessage=function(Pt){return this.decode(this.protoInstance.proto_initconfig.InitConfig,Pt)},St.prototype.encode=function(Pt,Ot){return Pt.encode(new Pt(Ot)).finish()},St.prototype.decode=function(Pt,Ot){return mt({},Pt.decode(Ot))},vt.AccessHubProtoBuf=St},function(gt,vt){gt.exports=ut},function(gt,vt,yt){yt.r(vt),yt.d(vt,"proto_accesshub",function(){return Tt}),yt.d(vt,"proto_initconfig",function(){return wt}),yt.d(vt,"default",function(){return Ct});const mt=(vt=yt(2)).Reader,Et=vt.Writer,bt=vt.util,Ct=vt.roots.default||(vt.roots.default={}),Tt=Ct.proto_accesshub=(()=>{const Rt={};return Rt.MessageType=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="MSG_TYPE_EMPTY"]=0,qt[Ht[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,qt[Ht[2]="MSG_TYPE_STREAM_CLOSED"]=2,qt[Ht[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,qt[Ht[4]="MSG_TYPE_HTTP_REQUEST"]=4,qt[Ht[5]="MSG_TYPE_HTTP_RESPONSE"]=5,qt[Ht[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,qt[Ht[7]="MSG_TYPE_PROXY_CONNECT"]=7,qt[Ht[8]="MSG_TYPE_PROXY_CONNECTED"]=8,qt[Ht[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,qt[Ht[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,qt[Ht[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,qt[Ht[12]="MSG_TYPE_HB_REQUEST"]=12,qt[Ht[13]="MSG_TYPE_HB_RESPONSE"]=13,qt[Ht[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,qt[Ht[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,qt[Ht[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,qt[Ht[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,qt[Ht[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,qt[Ht[19]="MSG_TYPE_PC_ESTABLISHED"]=19,qt[Ht[20]="MSG_TYPE_PC_BROKEN"]=20,qt[Ht[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,qt[Ht[22]="MSG_TYPE_REDIRECT"]=22,qt[Ht[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,qt[Ht[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,qt[Ht[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,qt[Ht[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,qt[Ht[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,qt[Ht[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,qt[Ht[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,qt[Ht[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,qt[Ht[31]="MSG_TYPE_RESOLVE_DOMAIN_REQUEST"]=31,qt[Ht[32]="MSG_TYPE_RESOLVE_DOMAIN_RESPONSE"]=32,qt[Ht[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,qt[Ht[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,qt[Ht[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,qt[Ht[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,qt[Ht[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,qt[Ht[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,qt[Ht[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,qt[Ht[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,qt}(),Rt.ErrorCode=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="OK"]=0,qt[Ht[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,qt[Ht[10001]="DISPATCH_INTERNAL_ERROR"]=10001,qt[Ht[10002]="DISPATCH_INVALID_FRAME"]=10002,qt[Ht[10003]="DISPATCH_UNMARSHAL"]=10003,qt[Ht[10004]="DISPATCH_MSGTYPE"]=10004,qt[Ht[10005]="DISPATCH_MARSHAL"]=10005,qt[Ht[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,qt[Ht[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,qt[Ht[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,qt[Ht[20002]="ACCESSHUB_DECRYPT"]=20002,qt[Ht[20003]="ACCESSHUB_MSGTYPE"]=20003,qt[Ht[20004]="ACCESSHUB_UNMARSHAL"]=20004,qt[Ht[20005]="ACCESSHUB_TIMEOUT"]=20005,qt[Ht[20006]="ACCESSHUB_CONNECT"]=20006,qt[Ht[20007]="ACCESSHUB_BROKEN"]=20007,qt[Ht[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,qt[Ht[20009]="ACCESSHUB_MARSHAL"]=20009,qt[Ht[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,qt[Ht[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,qt[Ht[20012]="ACCESSHUB_INVALID_APPID"]=20012,qt[Ht[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,qt[Ht[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,qt[Ht[20015]="ACCESSHUB_AUTH_FAILED"]=20015,qt[Ht[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,qt[Ht[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,qt[Ht[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,qt[Ht[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,qt[Ht[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,qt}(),Rt.Mode=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="Mode_UNSET"]=0,qt[Ht[1]="MODE_ONLINE"]=1,qt[Ht[2]="MODE_TEST"]=2,qt[Ht[3]="MODE_ALPHA"]=3,qt}(),Rt.Service=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="SERVICE_UNSET"]=0,qt[Ht[1]="SERVICE_MEDIAGW"]=1,qt[Ht[2]="SERVICE_LIVEROOM"]=2,qt[Ht[3]="SERVICE_MIX"]=3,qt[Ht[4]="SERVICE_ZEUS"]=4,qt[Ht[5]="SERVICE_ZPUSH"]=5,qt[Ht[6]="SERVICE_L3"]=6,qt[Ht[7]="SERVICE_TALKLINE"]=7,qt[Ht[8]="SERVICE_EDUSUITE"]=8,qt[Ht[9]="SERVICE_ZIM"]=9,qt[Ht[10]="SERVICE_ClOUD_SETTING"]=10,qt[Ht[11]="SERVICE_ZEUSHB"]=11,qt[Ht[12]="SERVICE_USER_LOGIC"]=12,qt[Ht[13]="SERVICE_UNIFYDISPATCH"]=13,qt[Ht[14]="SERVICE_QUALITY"]=14,qt[Ht[15]="SERVICE_SECURITY"]=15,qt[Ht[16]="SERVICE_KTVCPR"]=16,qt[Ht[17]="SERVICE_SWITCH4LIVEROOM"]=17,qt[Ht[18]="SERVICE_WEBRTC_SIGNAL"]=18,qt[Ht[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,qt[Ht[20]="SERVICE_VIDEOCPR"]=20,qt[Ht[21]="SERVICE_CDN"]=21,qt[Ht[22]="SERVICE_CLOUDRECORD"]=22,qt[Ht[23]="SERVICE_INNER_ECHO"]=23,qt[Ht[24]="SERVICE_OUTER_ECHO"]=24,qt[Ht[25]="SERVICE_LOCALHOST_ECHO"]=25,qt[Ht[26]="SERVICE_ECHO"]=26,qt[Ht[27]="SERVICE_DOCSERVICE"]=27,qt[Ht[28]="SERVICE_AUTHSVR"]=28,qt[Ht[29]="SERVICE_WEBLIVEROOM"]=29,qt[Ht[30]="SERVICE_WHITEBOARD"]=30,qt[Ht[31]="SERVICE_METAWORLD"]=31,qt[Ht[32]="SERVICE_ZEGOLAND"]=32,qt}(),Rt.Method=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="METHOD_UNSET"]=0,qt[Ht[1]="METHOD_GET"]=1,qt[Ht[2]="METHOD_POST"]=2,qt}(),Rt.SdkType=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="SDK_TYPE_UNSET"]=0,qt[Ht[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,qt[Ht[2]="SDK_TYPE_WSS_NATIVE"]=2,qt[Ht[3]="SDK_TYPE_WSS_WEB"]=3,qt}(),Rt.ZegoconnRunEnv=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,qt[Ht[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,qt[Ht[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,qt}(),Rt.BackendConnType=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="BACKEND_CONN_TYPE_UNSET"]=0,qt[Ht[1]="BACKEND_CONN_TYPE_TCP"]=1,qt[Ht[2]="BACKEND_CONN_TYPE_WSS"]=2,qt}(),Rt.ConnectionClosed=(Sr.prototype.code=0,Sr.prototype.msg="",Sr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(18).string(Ht.msg),qt},Sr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.ConnectionClosed;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.msg=Ht.string();break;default:Ht.skipType(7&Ar)}}return cr},Sr),Rt.StreamClosed=(Er.prototype.code=0,Er.prototype.msg="",Er.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(18).string(Ht.msg),qt},Er.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.StreamClosed;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.msg=Ht.string();break;default:Ht.skipType(7&Ar)}}return cr},Er),Rt.CloseConnection=(pr.prototype.reason=0,pr.prototype.msg="",pr.prototype.action=0,pr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.reason!=null&&Object.hasOwnProperty.call(Ht,"reason")&&qt.uint32(8).int32(Ht.reason),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(18).string(Ht.msg),Ht.action!=null&&Object.hasOwnProperty.call(Ht,"action")&&qt.uint32(24).int32(Ht.action),qt},pr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.CloseConnection;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.reason=Ht.int32();break;case 2:cr.msg=Ht.string();break;case 3:cr.action=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},pr.Action=function(){const Ht={},qt=Object.create(Ht);return qt[Ht[0]="ACTION_RESERVED"]=0,qt[Ht[1]="ACTION_DISPATCH"]=1,qt[Ht[2]="ACTION_RETRY"]=2,qt[Ht[3]="ACTION_NEXT_NODE"]=3,qt[Ht[4]="ACTION_ABORT"]=4,qt[Ht[5]="ACTION_NEXT_GROUP"]=5,qt}(),pr),Rt.HTTPRequest=(or.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,or.prototype.appid=0,or.prototype.biz_type=0,or.prototype.mode="",or.prototype.id_name="",or.prototype.reqid="",or.prototype.stick="",or.prototype.service="",or.prototype.location="",or.prototype.method="",or.prototype.headers=bt.emptyArray,or.prototype.body=bt.newBuffer([]),or.prototype.ack=!1,or.prototype.mode_no=0,or.prototype.service_no=0,or.prototype.method_no=0,or.prototype.sdk_type=0,or.prototype.zegoconn_run_env=0,or.prototype.zegoconn_version=0,or.encode=function(Ht,qt){if(qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.appid!=null&&Object.hasOwnProperty.call(Ht,"appid")&&qt.uint32(16).uint32(Ht.appid),Ht.biz_type!=null&&Object.hasOwnProperty.call(Ht,"biz_type")&&qt.uint32(24).uint32(Ht.biz_type),Ht.mode!=null&&Object.hasOwnProperty.call(Ht,"mode")&&qt.uint32(34).string(Ht.mode),Ht.id_name!=null&&Object.hasOwnProperty.call(Ht,"id_name")&&qt.uint32(42).string(Ht.id_name),Ht.reqid!=null&&Object.hasOwnProperty.call(Ht,"reqid")&&qt.uint32(50).string(Ht.reqid),Ht.stick!=null&&Object.hasOwnProperty.call(Ht,"stick")&&qt.uint32(58).string(Ht.stick),Ht.service!=null&&Object.hasOwnProperty.call(Ht,"service")&&qt.uint32(66).string(Ht.service),Ht.location!=null&&Object.hasOwnProperty.call(Ht,"location")&&qt.uint32(74).string(Ht.location),Ht.method!=null&&Object.hasOwnProperty.call(Ht,"method")&&qt.uint32(82).string(Ht.method),Ht.headers!=null&&Ht.headers.length)for(let fr=0;fr<Ht.headers.length;++fr)Ct.proto_accesshub.HTTPRequest.HTTPHeader.encode(Ht.headers[fr],qt.uint32(90).fork()).ldelim();return Ht.body!=null&&Object.hasOwnProperty.call(Ht,"body")&&qt.uint32(98).bytes(Ht.body),Ht.ack!=null&&Object.hasOwnProperty.call(Ht,"ack")&&qt.uint32(104).bool(Ht.ack),Ht.mode_no!=null&&Object.hasOwnProperty.call(Ht,"mode_no")&&qt.uint32(112).int32(Ht.mode_no),Ht.service_no!=null&&Object.hasOwnProperty.call(Ht,"service_no")&&qt.uint32(120).int32(Ht.service_no),Ht.method_no!=null&&Object.hasOwnProperty.call(Ht,"method_no")&&qt.uint32(128).int32(Ht.method_no),Ht.sdk_type!=null&&Object.hasOwnProperty.call(Ht,"sdk_type")&&qt.uint32(136).int32(Ht.sdk_type),Ht.zegoconn_run_env!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_run_env")&&qt.uint32(144).int32(Ht.zegoconn_run_env),Ht.zegoconn_version!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_version")&&qt.uint32(152).uint32(Ht.zegoconn_version),qt},or.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HTTPRequest;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.appid=Ht.uint32();break;case 3:cr.biz_type=Ht.uint32();break;case 4:cr.mode=Ht.string();break;case 5:cr.id_name=Ht.string();break;case 6:cr.reqid=Ht.string();break;case 7:cr.stick=Ht.string();break;case 8:cr.service=Ht.string();break;case 9:cr.location=Ht.string();break;case 10:cr.method=Ht.string();break;case 11:cr.headers&&cr.headers.length||(cr.headers=[]),cr.headers.push(Ct.proto_accesshub.HTTPRequest.HTTPHeader.decode(Ht,Ht.uint32()));break;case 12:cr.body=Ht.bytes();break;case 13:cr.ack=Ht.bool();break;case 14:cr.mode_no=Ht.int32();break;case 15:cr.service_no=Ht.int32();break;case 16:cr.method_no=Ht.int32();break;case 17:cr.sdk_type=Ht.int32();break;case 18:cr.zegoconn_run_env=Ht.int32();break;case 19:cr.zegoconn_version=Ht.uint32();break;default:Ht.skipType(7&Ar)}}return cr},or.HTTPHeader=(ur.prototype.name="",ur.prototype.val="",ur.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.name!=null&&Object.hasOwnProperty.call(Ht,"name")&&qt.uint32(10).string(Ht.name),Ht.val!=null&&Object.hasOwnProperty.call(Ht,"val")&&qt.uint32(18).string(Ht.val),qt},ur.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HTTPRequest.HTTPHeader;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.name=Ht.string();break;case 2:cr.val=Ht.string();break;default:Ht.skipType(7&Ar)}}return cr},ur),or),Rt.HTTPResponse=(Cr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Cr.prototype.headers=bt.emptyArray,Cr.prototype.status_code=0,Cr.prototype.body=bt.newBuffer([]),Cr.encode=function(Ht,qt){if(qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.headers!=null&&Ht.headers.length)for(let fr=0;fr<Ht.headers.length;++fr)Ct.proto_accesshub.HTTPRequest.HTTPHeader.encode(Ht.headers[fr],qt.uint32(18).fork()).ldelim();return Ht.status_code!=null&&Object.hasOwnProperty.call(Ht,"status_code")&&qt.uint32(24).int32(Ht.status_code),Ht.body!=null&&Object.hasOwnProperty.call(Ht,"body")&&qt.uint32(34).bytes(Ht.body),qt},Cr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HTTPResponse;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.headers&&cr.headers.length||(cr.headers=[]),cr.headers.push(Ct.proto_accesshub.HTTPRequest.HTTPHeader.decode(Ht,Ht.uint32()));break;case 3:cr.status_code=Ht.int32();break;case 4:cr.body=Ht.bytes();break;default:Ht.skipType(7&Ar)}}return cr},Cr),Rt.HTTPRequestAck=(yr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,yr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),qt},yr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HTTPRequestAck;for(;Ht.pos<fr;){var Ar=Ht.uint32();Ar>>>3==1?cr.txid=Ht.uint64():Ht.skipType(7&Ar)}return cr},yr),Rt.HTTPRequestDroped=(vr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,vr.prototype.reason=0,vr.prototype.msg="",vr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.reason!=null&&Object.hasOwnProperty.call(Ht,"reason")&&qt.uint32(16).int32(Ht.reason),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(26).string(Ht.msg),qt},vr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HTTPRequestDroped;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.reason=Ht.int32();break;case 3:cr.msg=Ht.string();break;default:Ht.skipType(7&Ar)}}return cr},vr),Rt.ProxyConnectionClosed=(hr.prototype.code=0,hr.prototype.msg="",hr.prototype.connected=0,hr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(18).string(Ht.msg),Ht.connected!=null&&Object.hasOwnProperty.call(Ht,"connected")&&qt.uint32(24).int32(Ht.connected),qt},hr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.ProxyConnectionClosed;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.msg=Ht.string();break;case 3:cr.connected=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},hr),Rt.HBRequest=(nr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,nr.prototype.ts=bt.Long?bt.Long.fromBits(0,0,!1):0,nr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.ts!=null&&Object.hasOwnProperty.call(Ht,"ts")&&qt.uint32(16).int64(Ht.ts),qt},nr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HBRequest;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.ts=Ht.int64();break;default:Ht.skipType(7&Ar)}}return cr},nr),Rt.HBResponse=(lr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,lr.prototype.ts=bt.Long?bt.Long.fromBits(0,0,!1):0,lr.prototype.ntp_time=bt.Long?bt.Long.fromBits(0,0,!0):0,lr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.ts!=null&&Object.hasOwnProperty.call(Ht,"ts")&&qt.uint32(16).int64(Ht.ts),Ht.ntp_time!=null&&Object.hasOwnProperty.call(Ht,"ntp_time")&&qt.uint32(24).uint64(Ht.ntp_time),qt},lr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.HBResponse;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.ts=Ht.int64();break;case 3:cr.ntp_time=Ht.uint64();break;default:Ht.skipType(7&Ar)}}return cr},lr),Rt.GetConfigRequest=(rr.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,rr.prototype.appid=0,rr.prototype.biz_type=0,rr.prototype.mode="",rr.prototype.id_name="",rr.prototype.reqid="",rr.prototype.zegoconn_version=0,rr.prototype.sdk_type=0,rr.prototype.zegoconn_run_env=0,rr.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.appid!=null&&Object.hasOwnProperty.call(Ht,"appid")&&qt.uint32(16).uint32(Ht.appid),Ht.biz_type!=null&&Object.hasOwnProperty.call(Ht,"biz_type")&&qt.uint32(24).uint32(Ht.biz_type),Ht.mode!=null&&Object.hasOwnProperty.call(Ht,"mode")&&qt.uint32(34).string(Ht.mode),Ht.id_name!=null&&Object.hasOwnProperty.call(Ht,"id_name")&&qt.uint32(42).string(Ht.id_name),Ht.reqid!=null&&Object.hasOwnProperty.call(Ht,"reqid")&&qt.uint32(50).string(Ht.reqid),Ht.zegoconn_version!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_version")&&qt.uint32(56).uint32(Ht.zegoconn_version),Ht.sdk_type!=null&&Object.hasOwnProperty.call(Ht,"sdk_type")&&qt.uint32(64).int32(Ht.sdk_type),Ht.zegoconn_run_env!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_run_env")&&qt.uint32(72).int32(Ht.zegoconn_run_env),qt},rr.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetConfigRequest;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.appid=Ht.uint32();break;case 3:cr.biz_type=Ht.uint32();break;case 4:cr.mode=Ht.string();break;case 5:cr.id_name=Ht.string();break;case 6:cr.reqid=Ht.string();break;case 7:cr.zegoconn_version=Ht.uint32();break;case 8:cr.sdk_type=Ht.int32();break;case 9:cr.zegoconn_run_env=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},rr),Rt.GetConfigResponseData=(ir.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,ir.prototype.quic_hb_interval=0,ir.prototype.quic_hb_timeout=0,ir.prototype.logic_hb_interval=0,ir.prototype.logic_hb_timeout=0,ir.prototype.pc_establish_timeout=0,ir.prototype.sdk_link_detect_interval=0,ir.prototype.sdk_link_detect_duration=0,ir.prototype.client_outer_ip="",ir.prototype.ntp_time=bt.Long?bt.Long.fromBits(0,0,!0):0,ir.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.quic_hb_interval!=null&&Object.hasOwnProperty.call(Ht,"quic_hb_interval")&&qt.uint32(16).uint32(Ht.quic_hb_interval),Ht.quic_hb_timeout!=null&&Object.hasOwnProperty.call(Ht,"quic_hb_timeout")&&qt.uint32(24).uint32(Ht.quic_hb_timeout),Ht.logic_hb_interval!=null&&Object.hasOwnProperty.call(Ht,"logic_hb_interval")&&qt.uint32(32).uint32(Ht.logic_hb_interval),Ht.logic_hb_timeout!=null&&Object.hasOwnProperty.call(Ht,"logic_hb_timeout")&&qt.uint32(40).uint32(Ht.logic_hb_timeout),Ht.pc_establish_timeout!=null&&Object.hasOwnProperty.call(Ht,"pc_establish_timeout")&&qt.uint32(48).uint32(Ht.pc_establish_timeout),Ht.sdk_link_detect_interval!=null&&Object.hasOwnProperty.call(Ht,"sdk_link_detect_interval")&&qt.uint32(56).uint32(Ht.sdk_link_detect_interval),Ht.sdk_link_detect_duration!=null&&Object.hasOwnProperty.call(Ht,"sdk_link_detect_duration")&&qt.uint32(64).uint32(Ht.sdk_link_detect_duration),Ht.client_outer_ip!=null&&Object.hasOwnProperty.call(Ht,"client_outer_ip")&&qt.uint32(74).string(Ht.client_outer_ip),Ht.ntp_time!=null&&Object.hasOwnProperty.call(Ht,"ntp_time")&&qt.uint32(80).uint64(Ht.ntp_time),qt},ir.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetConfigResponseData;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.quic_hb_interval=Ht.uint32();break;case 3:cr.quic_hb_timeout=Ht.uint32();break;case 4:cr.logic_hb_interval=Ht.uint32();break;case 5:cr.logic_hb_timeout=Ht.uint32();break;case 6:cr.pc_establish_timeout=Ht.uint32();break;case 7:cr.sdk_link_detect_interval=Ht.uint32();break;case 8:cr.sdk_link_detect_duration=Ht.uint32();break;case 9:cr.client_outer_ip=Ht.string();break;case 10:cr.ntp_time=Ht.uint64();break;default:Ht.skipType(7&Ar)}}return cr},ir),Rt.GetConfigResponse=(er.prototype.code=0,er.prototype.message="",er.prototype.data=null,er.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.message!=null&&Object.hasOwnProperty.call(Ht,"message")&&qt.uint32(18).string(Ht.message),Ht.data!=null&&Object.hasOwnProperty.call(Ht,"data")&&Ct.proto_accesshub.GetConfigResponseData.encode(Ht.data,qt.uint32(26).fork()).ldelim(),qt},er.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetConfigResponse;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.message=Ht.string();break;case 3:cr.data=Ct.proto_accesshub.GetConfigResponseData.decode(Ht,Ht.uint32());break;default:Ht.skipType(7&Ar)}}return cr},er),Rt.PCUpwardMessage=(Kt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Kt.prototype.appid=0,Kt.prototype.biz_type=0,Kt.prototype.mode_no=0,Kt.prototype.id_name="",Kt.prototype.service_no=0,Kt.prototype.ack=!1,Kt.prototype.payload=bt.newBuffer([]),Kt.prototype.sdk_type=0,Kt.prototype.wss_message_type=0,Kt.prototype.wss_path="",Kt.prototype.wss_raw_query="",Kt.prototype.zegoconn_version=0,Kt.prototype.zegoconn_run_env=0,Kt.prototype.backend_conn_type=0,Kt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.appid!=null&&Object.hasOwnProperty.call(Ht,"appid")&&qt.uint32(16).uint32(Ht.appid),Ht.biz_type!=null&&Object.hasOwnProperty.call(Ht,"biz_type")&&qt.uint32(24).uint32(Ht.biz_type),Ht.mode_no!=null&&Object.hasOwnProperty.call(Ht,"mode_no")&&qt.uint32(32).int32(Ht.mode_no),Ht.id_name!=null&&Object.hasOwnProperty.call(Ht,"id_name")&&qt.uint32(42).string(Ht.id_name),Ht.service_no!=null&&Object.hasOwnProperty.call(Ht,"service_no")&&qt.uint32(48).int32(Ht.service_no),Ht.ack!=null&&Object.hasOwnProperty.call(Ht,"ack")&&qt.uint32(56).bool(Ht.ack),Ht.payload!=null&&Object.hasOwnProperty.call(Ht,"payload")&&qt.uint32(66).bytes(Ht.payload),Ht.sdk_type!=null&&Object.hasOwnProperty.call(Ht,"sdk_type")&&qt.uint32(72).int32(Ht.sdk_type),Ht.wss_message_type!=null&&Object.hasOwnProperty.call(Ht,"wss_message_type")&&qt.uint32(80).uint32(Ht.wss_message_type),Ht.wss_path!=null&&Object.hasOwnProperty.call(Ht,"wss_path")&&qt.uint32(90).string(Ht.wss_path),Ht.wss_raw_query!=null&&Object.hasOwnProperty.call(Ht,"wss_raw_query")&&qt.uint32(98).string(Ht.wss_raw_query),Ht.zegoconn_version!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_version")&&qt.uint32(104).uint32(Ht.zegoconn_version),Ht.zegoconn_run_env!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_run_env")&&qt.uint32(112).int32(Ht.zegoconn_run_env),Ht.backend_conn_type!=null&&Object.hasOwnProperty.call(Ht,"backend_conn_type")&&qt.uint32(120).int32(Ht.backend_conn_type),qt},Kt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PCUpwardMessage;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.appid=Ht.uint32();break;case 3:cr.biz_type=Ht.uint32();break;case 4:cr.mode_no=Ht.int32();break;case 5:cr.id_name=Ht.string();break;case 6:cr.service_no=Ht.int32();break;case 7:cr.ack=Ht.bool();break;case 8:cr.payload=Ht.bytes();break;case 9:cr.sdk_type=Ht.int32();break;case 10:cr.wss_message_type=Ht.uint32();break;case 11:cr.wss_path=Ht.string();break;case 12:cr.wss_raw_query=Ht.string();break;case 13:cr.zegoconn_version=Ht.uint32();break;case 14:cr.zegoconn_run_env=Ht.int32();break;case 15:cr.backend_conn_type=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},Kt),Rt.PCUpwardMessageAck=(Yt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Yt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),qt},Yt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PCUpwardMessageAck;for(;Ht.pos<fr;){var Ar=Ht.uint32();Ar>>>3==1?cr.txid=Ht.uint64():Ht.skipType(7&Ar)}return cr},Yt),Rt.PCEstablished=(zt.prototype.elapse=0,zt.prototype.from=0,zt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.elapse!=null&&Object.hasOwnProperty.call(Ht,"elapse")&&qt.uint32(8).uint32(Ht.elapse),Ht.from!=null&&Object.hasOwnProperty.call(Ht,"from")&&qt.uint32(16).uint32(Ht.from),qt},zt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PCEstablished;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.elapse=Ht.uint32();break;case 2:cr.from=Ht.uint32();break;default:Ht.skipType(7&Ar)}}return cr},zt),Rt.PCBroken=(jt.encode=function(Ht,qt){return qt||Et.create()},jt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));var fr=qt===void 0?Ht.len:Ht.pos+qt;for(qt=new Ct.proto_accesshub.PCBroken;Ht.pos<fr;){var cr=Ht.uint32();Ht.skipType(7&cr)}return qt},jt),Rt.PCDownwardMessage=(Ft.prototype.payload=bt.newBuffer([]),Ft.prototype.wss_message_type=0,Ft.prototype.ts=bt.Long?bt.Long.fromBits(0,0,!0):0,Ft.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.payload!=null&&Object.hasOwnProperty.call(Ht,"payload")&&qt.uint32(10).bytes(Ht.payload),Ht.wss_message_type!=null&&Object.hasOwnProperty.call(Ht,"wss_message_type")&&qt.uint32(16).uint32(Ht.wss_message_type),Ht.ts!=null&&Object.hasOwnProperty.call(Ht,"ts")&&qt.uint32(24).uint64(Ht.ts),qt},Ft.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PCDownwardMessage;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.payload=Ht.bytes();break;case 2:cr.wss_message_type=Ht.uint32();break;case 3:cr.ts=Ht.uint64();break;default:Ht.skipType(7&Ar)}}return cr},Ft),Rt.Redirect=($t.prototype.rand="",$t.prototype.secret="",$t.prototype.groups=bt.emptyArray,$t.prototype.opt_ports=bt.emptyArray,$t.prototype.wss_groups=bt.emptyArray,$t.encode=function(Ht,qt){if(qt=qt||Et.create(),Ht.rand!=null&&Object.hasOwnProperty.call(Ht,"rand")&&qt.uint32(10).string(Ht.rand),Ht.secret!=null&&Object.hasOwnProperty.call(Ht,"secret")&&qt.uint32(18).string(Ht.secret),Ht.groups!=null&&Ht.groups.length)for(let fr=0;fr<Ht.groups.length;++fr)Ct.proto_accesshub.AccesshubDispatchGroup.encode(Ht.groups[fr],qt.uint32(26).fork()).ldelim();if(Ht.opt_ports!=null&&Ht.opt_ports.length)for(let fr=0;fr<Ht.opt_ports.length;++fr)qt.uint32(32).uint32(Ht.opt_ports[fr]);if(Ht.wss_groups!=null&&Ht.wss_groups.length)for(let fr=0;fr<Ht.wss_groups.length;++fr)Ct.proto_accesshub.WssAccesshubDispatchGroup.encode(Ht.wss_groups[fr],qt.uint32(42).fork()).ldelim();return qt},$t.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.Redirect;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.rand=Ht.string();break;case 2:cr.secret=Ht.string();break;case 3:cr.groups&&cr.groups.length||(cr.groups=[]),cr.groups.push(Ct.proto_accesshub.AccesshubDispatchGroup.decode(Ht,Ht.uint32()));break;case 4:if(cr.opt_ports&&cr.opt_ports.length||(cr.opt_ports=[]),(7&Ar)==2)for(var Gr=Ht.uint32()+Ht.pos;Ht.pos<Gr;)cr.opt_ports.push(Ht.uint32());else cr.opt_ports.push(Ht.uint32());break;case 5:cr.wss_groups&&cr.wss_groups.length||(cr.wss_groups=[]),cr.wss_groups.push(Ct.proto_accesshub.WssAccesshubDispatchGroup.decode(Ht,Ht.uint32()));break;default:Ht.skipType(7&Ar)}}return cr},$t),Rt.GetAppConfigRequest=(Nt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Nt.prototype.appid=0,Nt.prototype.biz_type=0,Nt.prototype.mode_no=0,Nt.prototype.id_name="",Nt.prototype.config_key="",Nt.prototype.ts=bt.Long?bt.Long.fromBits(0,0,!0):0,Nt.prototype.signature=bt.newBuffer([]),Nt.prototype.lite_sign="",Nt.prototype.token="",Nt.prototype.sdk_type=0,Nt.prototype.zegoconn_version=0,Nt.prototype.zegoconn_run_env=0,Nt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.appid!=null&&Object.hasOwnProperty.call(Ht,"appid")&&qt.uint32(16).uint32(Ht.appid),Ht.biz_type!=null&&Object.hasOwnProperty.call(Ht,"biz_type")&&qt.uint32(24).uint32(Ht.biz_type),Ht.mode_no!=null&&Object.hasOwnProperty.call(Ht,"mode_no")&&qt.uint32(32).int32(Ht.mode_no),Ht.id_name!=null&&Object.hasOwnProperty.call(Ht,"id_name")&&qt.uint32(42).string(Ht.id_name),Ht.config_key!=null&&Object.hasOwnProperty.call(Ht,"config_key")&&qt.uint32(50).string(Ht.config_key),Ht.ts!=null&&Object.hasOwnProperty.call(Ht,"ts")&&qt.uint32(56).uint64(Ht.ts),Ht.signature!=null&&Object.hasOwnProperty.call(Ht,"signature")&&qt.uint32(66).bytes(Ht.signature),Ht.lite_sign!=null&&Object.hasOwnProperty.call(Ht,"lite_sign")&&qt.uint32(74).string(Ht.lite_sign),Ht.token!=null&&Object.hasOwnProperty.call(Ht,"token")&&qt.uint32(82).string(Ht.token),Ht.sdk_type!=null&&Object.hasOwnProperty.call(Ht,"sdk_type")&&qt.uint32(88).int32(Ht.sdk_type),Ht.zegoconn_version!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_version")&&qt.uint32(96).uint32(Ht.zegoconn_version),Ht.zegoconn_run_env!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_run_env")&&qt.uint32(104).int32(Ht.zegoconn_run_env),qt},Nt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetAppConfigRequest;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.appid=Ht.uint32();break;case 3:cr.biz_type=Ht.uint32();break;case 4:cr.mode_no=Ht.int32();break;case 5:cr.id_name=Ht.string();break;case 6:cr.config_key=Ht.string();break;case 7:cr.ts=Ht.uint64();break;case 8:cr.signature=Ht.bytes();break;case 9:cr.lite_sign=Ht.string();break;case 10:cr.token=Ht.string();break;case 11:cr.sdk_type=Ht.int32();break;case 12:cr.zegoconn_version=Ht.uint32();break;case 13:cr.zegoconn_run_env=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},Nt),Rt.GetAppConfigResponseData=(Mt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Mt.prototype.data=bt.newBuffer([]),Mt.prototype.ts=bt.Long?bt.Long.fromBits(0,0,!0):0,Mt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.data!=null&&Object.hasOwnProperty.call(Ht,"data")&&qt.uint32(18).bytes(Ht.data),Ht.ts!=null&&Object.hasOwnProperty.call(Ht,"ts")&&qt.uint32(24).uint64(Ht.ts),qt},Mt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetAppConfigResponseData;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.data=Ht.bytes();break;case 3:cr.ts=Ht.uint64();break;default:Ht.skipType(7&Ar)}}return cr},Mt),Rt.GetAppConfigResponse=(At.prototype.code=0,At.prototype.message="",At.prototype.data=null,At.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.message!=null&&Object.hasOwnProperty.call(Ht,"message")&&qt.uint32(18).string(Ht.message),Ht.data!=null&&Object.hasOwnProperty.call(Ht,"data")&&Ct.proto_accesshub.GetAppConfigResponseData.encode(Ht.data,qt.uint32(26).fork()).ldelim(),qt},At.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.GetAppConfigResponse;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.message=Ht.string();break;case 3:cr.data=Ct.proto_accesshub.GetAppConfigResponseData.decode(Ht,Ht.uint32());break;default:Ht.skipType(7&Ar)}}return cr},At),Rt.PushAppConfig=(xt.prototype.config_key="",xt.prototype.data=bt.newBuffer([]),xt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.config_key!=null&&Object.hasOwnProperty.call(Ht,"config_key")&&qt.uint32(10).string(Ht.config_key),Ht.data!=null&&Object.hasOwnProperty.call(Ht,"data")&&qt.uint32(18).bytes(Ht.data),qt},xt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PushAppConfig;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.config_key=Ht.string();break;case 2:cr.data=Ht.bytes();break;default:Ht.skipType(7&Ar)}}return cr},xt),Rt.AccesshubDispatchRequest=(Bt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Bt.prototype.appid=0,Bt.prototype.biz_type=0,Bt.prototype.mode_no=0,Bt.prototype.id_name="",Bt.prototype.sdk_type=0,Bt.prototype.zegoconn_version=0,Bt.prototype.zegoconn_run_env=0,Bt.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.appid!=null&&Object.hasOwnProperty.call(Ht,"appid")&&qt.uint32(16).uint32(Ht.appid),Ht.biz_type!=null&&Object.hasOwnProperty.call(Ht,"biz_type")&&qt.uint32(24).uint32(Ht.biz_type),Ht.mode_no!=null&&Object.hasOwnProperty.call(Ht,"mode_no")&&qt.uint32(32).int32(Ht.mode_no),Ht.id_name!=null&&Object.hasOwnProperty.call(Ht,"id_name")&&qt.uint32(42).string(Ht.id_name),Ht.sdk_type!=null&&Object.hasOwnProperty.call(Ht,"sdk_type")&&qt.uint32(48).int32(Ht.sdk_type),Ht.zegoconn_version!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_version")&&qt.uint32(56).uint32(Ht.zegoconn_version),Ht.zegoconn_run_env!=null&&Object.hasOwnProperty.call(Ht,"zegoconn_run_env")&&qt.uint32(64).int32(Ht.zegoconn_run_env),qt},Bt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.AccesshubDispatchRequest;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.appid=Ht.uint32();break;case 3:cr.biz_type=Ht.uint32();break;case 4:cr.mode_no=Ht.int32();break;case 5:cr.id_name=Ht.string();break;case 6:cr.sdk_type=Ht.int32();break;case 7:cr.zegoconn_version=Ht.uint32();break;case 8:cr.zegoconn_run_env=Ht.int32();break;default:Ht.skipType(7&Ar)}}return cr},Bt),Rt.AccesshubDispatchGroup=(Ut.prototype.group="",Ut.prototype.quic_nodes=bt.emptyArray,Ut.prototype.mtcp_nodes=bt.emptyArray,Ut.prototype.wss_nodes=bt.emptyArray,Ut.encode=function(Ht,qt){if(qt=qt||Et.create(),Ht.group!=null&&Object.hasOwnProperty.call(Ht,"group")&&qt.uint32(10).string(Ht.group),Ht.quic_nodes!=null&&Ht.quic_nodes.length)for(let fr=0;fr<Ht.quic_nodes.length;++fr)qt.uint32(18).string(Ht.quic_nodes[fr]);if(Ht.mtcp_nodes!=null&&Ht.mtcp_nodes.length)for(let fr=0;fr<Ht.mtcp_nodes.length;++fr)qt.uint32(26).string(Ht.mtcp_nodes[fr]);if(Ht.wss_nodes!=null&&Ht.wss_nodes.length)for(let fr=0;fr<Ht.wss_nodes.length;++fr)qt.uint32(34).string(Ht.wss_nodes[fr]);return qt},Ut.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.AccesshubDispatchGroup;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.group=Ht.string();break;case 2:cr.quic_nodes&&cr.quic_nodes.length||(cr.quic_nodes=[]),cr.quic_nodes.push(Ht.string());break;case 3:cr.mtcp_nodes&&cr.mtcp_nodes.length||(cr.mtcp_nodes=[]),cr.mtcp_nodes.push(Ht.string());break;case 4:cr.wss_nodes&&cr.wss_nodes.length||(cr.wss_nodes=[]),cr.wss_nodes.push(Ht.string());break;default:Ht.skipType(7&Ar)}}return cr},Ut),Rt.WssAccesshubDispatchGroup=(Ot.prototype.group="",Ot.prototype.host="",Ot.prototype.main_domain="",Ot.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.group!=null&&Object.hasOwnProperty.call(Ht,"group")&&qt.uint32(10).string(Ht.group),Ht.host!=null&&Object.hasOwnProperty.call(Ht,"host")&&qt.uint32(18).string(Ht.host),Ht.main_domain!=null&&Object.hasOwnProperty.call(Ht,"main_domain")&&qt.uint32(26).string(Ht.main_domain),qt},Ot.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.WssAccesshubDispatchGroup;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.group=Ht.string();break;case 2:cr.host=Ht.string();break;case 3:cr.main_domain=Ht.string();break;default:Ht.skipType(7&Ar)}}return cr},Ot),Rt.AccesshubDispatchResponseData=(Pt.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,Pt.prototype.rand="",Pt.prototype.secret="",Pt.prototype.groups=bt.emptyArray,Pt.prototype.opt_ports=bt.emptyArray,Pt.prototype.wss_groups=bt.emptyArray,Pt.encode=function(Ht,qt){if(qt=qt||Et.create(),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(8).uint64(Ht.txid),Ht.rand!=null&&Object.hasOwnProperty.call(Ht,"rand")&&qt.uint32(18).string(Ht.rand),Ht.secret!=null&&Object.hasOwnProperty.call(Ht,"secret")&&qt.uint32(26).string(Ht.secret),Ht.groups!=null&&Ht.groups.length)for(let fr=0;fr<Ht.groups.length;++fr)Ct.proto_accesshub.AccesshubDispatchGroup.encode(Ht.groups[fr],qt.uint32(34).fork()).ldelim();if(Ht.opt_ports!=null&&Ht.opt_ports.length)for(let fr=0;fr<Ht.opt_ports.length;++fr)qt.uint32(40).uint32(Ht.opt_ports[fr]);if(Ht.wss_groups!=null&&Ht.wss_groups.length)for(let fr=0;fr<Ht.wss_groups.length;++fr)Ct.proto_accesshub.WssAccesshubDispatchGroup.encode(Ht.wss_groups[fr],qt.uint32(50).fork()).ldelim();return qt},Pt.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.AccesshubDispatchResponseData;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.txid=Ht.uint64();break;case 2:cr.rand=Ht.string();break;case 3:cr.secret=Ht.string();break;case 4:cr.groups&&cr.groups.length||(cr.groups=[]),cr.groups.push(Ct.proto_accesshub.AccesshubDispatchGroup.decode(Ht,Ht.uint32()));break;case 5:if(cr.opt_ports&&cr.opt_ports.length||(cr.opt_ports=[]),(7&Ar)==2)for(var Gr=Ht.uint32()+Ht.pos;Ht.pos<Gr;)cr.opt_ports.push(Ht.uint32());else cr.opt_ports.push(Ht.uint32());break;case 6:cr.wss_groups&&cr.wss_groups.length||(cr.wss_groups=[]),cr.wss_groups.push(Ct.proto_accesshub.WssAccesshubDispatchGroup.decode(Ht,Ht.uint32()));break;default:Ht.skipType(7&Ar)}}return cr},Pt),Rt.AccesshubDispatchResponse=(St.prototype.code=0,St.prototype.message="",St.prototype.data=null,St.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.code!=null&&Object.hasOwnProperty.call(Ht,"code")&&qt.uint32(8).int32(Ht.code),Ht.message!=null&&Object.hasOwnProperty.call(Ht,"message")&&qt.uint32(18).string(Ht.message),Ht.data!=null&&Object.hasOwnProperty.call(Ht,"data")&&Ct.proto_accesshub.AccesshubDispatchResponseData.encode(Ht.data,qt.uint32(26).fork()).ldelim(),qt},St.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.AccesshubDispatchResponse;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.code=Ht.int32();break;case 2:cr.message=Ht.string();break;case 3:cr.data=Ct.proto_accesshub.AccesshubDispatchResponseData.decode(Ht,Ht.uint32());break;default:Ht.skipType(7&Ar)}}return cr},St),Rt.PushException=(It.prototype.reason=0,It.prototype.msg="",It.prototype.txid=bt.Long?bt.Long.fromBits(0,0,!0):0,It.encode=function(Ht,qt){return qt=qt||Et.create(),Ht.reason!=null&&Object.hasOwnProperty.call(Ht,"reason")&&qt.uint32(8).int32(Ht.reason),Ht.msg!=null&&Object.hasOwnProperty.call(Ht,"msg")&&qt.uint32(18).string(Ht.msg),Ht.txid!=null&&Object.hasOwnProperty.call(Ht,"txid")&&qt.uint32(24).uint64(Ht.txid),qt},It.decode=function(Ht,qt){Ht instanceof mt||(Ht=mt.create(Ht));let fr=qt===void 0?Ht.len:Ht.pos+qt,cr=new Ct.proto_accesshub.PushException;for(;Ht.pos<fr;){var Ar=Ht.uint32();switch(Ar>>>3){case 1:cr.reason=Ht.int32();break;case 2:cr.msg=Ht.string();break;case 3:cr.txid=Ht.uint64();break;default:Ht.skipType(7&Ar)}}return cr},It),Rt;function It(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function St(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Pt(Ht){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Ot(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Ut(Ht){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Bt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function xt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function At(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Mt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Nt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function $t(Ht){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Ft(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function jt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function zt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Yt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Kt(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function er(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function ir(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function rr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function lr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function nr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function hr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function vr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function yr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Cr(Ht){if(this.headers=[],Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function or(Ht){if(this.headers=[],Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function ur(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function pr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Er(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}function Sr(Ht){if(Ht)for(let qt=Object.keys(Ht),fr=0;fr<qt.length;++fr)Ht[qt[fr]]!=null&&(this[qt[fr]]=Ht[qt[fr]])}})(),wt=Ct.proto_initconfig=(()=>{const Rt={};return Rt.ResourceType=function(){const Nt={},$t=Object.create(Nt);return $t[Nt[0]="CDN"]=0,$t[Nt[1]="RTC"]=1,$t[Nt[2]="L3"]=2,$t[Nt[3]="CDN_PLUS"]=3,$t[Nt[4]="CDN_PLUS_BACKUP"]=4,$t}(),Rt.ProtocolType=function(){const Nt={},$t=Object.create(Nt);return $t[Nt[0]="UDP"]=0,$t[Nt[1]="RTMP"]=1,$t[Nt[2]="FLV"]=2,$t[Nt[3]="HLS"]=3,$t[Nt[4]="WEBRTC"]=4,$t}(),Rt.ResolveType=function(){const Nt={},$t=Object.create(Nt);return $t[Nt[0]="LOCAL_DNS"]=0,$t[Nt[1]="DISPATCH"]=1,$t}(),Rt.AppConfig=(Mt.prototype.test_id=null,Mt.prototype.domain=null,Mt.prototype.flexible_domain=null,Mt.prototype.replace_flexible_domain=null,Object.defineProperty(Mt.prototype,"_test_id",{get:bt.oneOfGetter(St=["test_id"]),set:bt.oneOfSetter(St)}),Object.defineProperty(Mt.prototype,"_domain",{get:bt.oneOfGetter(St=["domain"]),set:bt.oneOfSetter(St)}),Object.defineProperty(Mt.prototype,"_flexible_domain",{get:bt.oneOfGetter(St=["flexible_domain"]),set:bt.oneOfSetter(St)}),Object.defineProperty(Mt.prototype,"_replace_flexible_domain",{get:bt.oneOfGetter(St=["replace_flexible_domain"]),set:bt.oneOfSetter(St)}),Mt.encode=function(Nt,$t){return $t=$t||Et.create(),Nt.test_id!=null&&Object.hasOwnProperty.call(Nt,"test_id")&&$t.uint32(8).int32(Nt.test_id),Nt.domain!=null&&Object.hasOwnProperty.call(Nt,"domain")&&$t.uint32(18).string(Nt.domain),Nt.flexible_domain!=null&&Object.hasOwnProperty.call(Nt,"flexible_domain")&&$t.uint32(26).string(Nt.flexible_domain),Nt.replace_flexible_domain!=null&&Object.hasOwnProperty.call(Nt,"replace_flexible_domain")&&$t.uint32(34).string(Nt.replace_flexible_domain),$t},Mt.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.AppConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.test_id=Nt.int32();break;case 2:jt.domain=Nt.string();break;case 3:jt.flexible_domain=Nt.string();break;case 4:jt.replace_flexible_domain=Nt.string();break;default:Nt.skipType(7&zt)}}return jt},Mt),Rt.SpeedlogConfig=(At.prototype.report_count=null,At.prototype.report_retry_interval=null,At.prototype.push_quality_sample_count=null,At.prototype.pull_quality_sample_count=null,At.prototype.hardware_report_cycle=null,At.prototype.room_user_max_count=null,At.prototype.room_stream_max_count=null,At.prototype.charge_info_report_cycle=null,At.prototype.charge_info_report_mode=null,At.prototype.disable_report_pull=bt.emptyArray,At.prototype.report_max_bytes=null,At.prototype.push_quality_report_freq=null,At.prototype.pull_quality_report_freq=null,At.prototype.charge_info_report_no_playing=null,Object.defineProperty(At.prototype,"_report_count",{get:bt.oneOfGetter(St=["report_count"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_report_retry_interval",{get:bt.oneOfGetter(St=["report_retry_interval"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_push_quality_sample_count",{get:bt.oneOfGetter(St=["push_quality_sample_count"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_pull_quality_sample_count",{get:bt.oneOfGetter(St=["pull_quality_sample_count"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_hardware_report_cycle",{get:bt.oneOfGetter(St=["hardware_report_cycle"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_room_user_max_count",{get:bt.oneOfGetter(St=["room_user_max_count"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_room_stream_max_count",{get:bt.oneOfGetter(St=["room_stream_max_count"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_charge_info_report_cycle",{get:bt.oneOfGetter(St=["charge_info_report_cycle"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_charge_info_report_mode",{get:bt.oneOfGetter(St=["charge_info_report_mode"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_report_max_bytes",{get:bt.oneOfGetter(St=["report_max_bytes"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_push_quality_report_freq",{get:bt.oneOfGetter(St=["push_quality_report_freq"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_pull_quality_report_freq",{get:bt.oneOfGetter(St=["pull_quality_report_freq"]),set:bt.oneOfSetter(St)}),Object.defineProperty(At.prototype,"_charge_info_report_no_playing",{get:bt.oneOfGetter(St=["charge_info_report_no_playing"]),set:bt.oneOfSetter(St)}),At.encode=function(Nt,$t){if($t=$t||Et.create(),Nt.report_count!=null&&Object.hasOwnProperty.call(Nt,"report_count")&&$t.uint32(8).int32(Nt.report_count),Nt.report_retry_interval!=null&&Object.hasOwnProperty.call(Nt,"report_retry_interval")&&$t.uint32(16).int32(Nt.report_retry_interval),Nt.push_quality_sample_count!=null&&Object.hasOwnProperty.call(Nt,"push_quality_sample_count")&&$t.uint32(24).int32(Nt.push_quality_sample_count),Nt.pull_quality_sample_count!=null&&Object.hasOwnProperty.call(Nt,"pull_quality_sample_count")&&$t.uint32(32).int32(Nt.pull_quality_sample_count),Nt.hardware_report_cycle!=null&&Object.hasOwnProperty.call(Nt,"hardware_report_cycle")&&$t.uint32(40).int32(Nt.hardware_report_cycle),Nt.room_user_max_count!=null&&Object.hasOwnProperty.call(Nt,"room_user_max_count")&&$t.uint32(48).int32(Nt.room_user_max_count),Nt.room_stream_max_count!=null&&Object.hasOwnProperty.call(Nt,"room_stream_max_count")&&$t.uint32(56).int32(Nt.room_stream_max_count),Nt.charge_info_report_cycle!=null&&Object.hasOwnProperty.call(Nt,"charge_info_report_cycle")&&$t.uint32(64).int32(Nt.charge_info_report_cycle),Nt.charge_info_report_mode!=null&&Object.hasOwnProperty.call(Nt,"charge_info_report_mode")&&$t.uint32(72).int32(Nt.charge_info_report_mode),Nt.disable_report_pull!=null&&Nt.disable_report_pull.length){$t.uint32(82).fork();for(let Ft=0;Ft<Nt.disable_report_pull.length;++Ft)$t.int32(Nt.disable_report_pull[Ft]);$t.ldelim()}return Nt.report_max_bytes!=null&&Object.hasOwnProperty.call(Nt,"report_max_bytes")&&$t.uint32(88).int32(Nt.report_max_bytes),Nt.push_quality_report_freq!=null&&Object.hasOwnProperty.call(Nt,"push_quality_report_freq")&&$t.uint32(96).int32(Nt.push_quality_report_freq),Nt.pull_quality_report_freq!=null&&Object.hasOwnProperty.call(Nt,"pull_quality_report_freq")&&$t.uint32(104).int32(Nt.pull_quality_report_freq),Nt.charge_info_report_no_playing!=null&&Object.hasOwnProperty.call(Nt,"charge_info_report_no_playing")&&$t.uint32(112).int32(Nt.charge_info_report_no_playing),$t},At.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.SpeedlogConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.report_count=Nt.int32();break;case 2:jt.report_retry_interval=Nt.int32();break;case 3:jt.push_quality_sample_count=Nt.int32();break;case 4:jt.pull_quality_sample_count=Nt.int32();break;case 5:jt.hardware_report_cycle=Nt.int32();break;case 6:jt.room_user_max_count=Nt.int32();break;case 7:jt.room_stream_max_count=Nt.int32();break;case 8:jt.charge_info_report_cycle=Nt.int32();break;case 9:jt.charge_info_report_mode=Nt.int32();break;case 10:if(jt.disable_report_pull&&jt.disable_report_pull.length||(jt.disable_report_pull=[]),(7&zt)==2)for(var Yt=Nt.uint32()+Nt.pos;Nt.pos<Yt;)jt.disable_report_pull.push(Nt.int32());else jt.disable_report_pull.push(Nt.int32());break;case 11:jt.report_max_bytes=Nt.int32();break;case 12:jt.push_quality_report_freq=Nt.int32();break;case 13:jt.pull_quality_report_freq=Nt.int32();break;case 14:jt.charge_info_report_no_playing=Nt.int32();break;default:Nt.skipType(7&zt)}}return jt},At),Rt.MediaServiceProtocolInfo=(xt.prototype.config_id=null,xt.prototype.protocol=null,xt.prototype.url_template=null,xt.prototype.resolve_type=null,xt.prototype.push_cdn_authentication=null,xt.prototype.cdn_quic_version=bt.emptyArray,Object.defineProperty(xt.prototype,"_config_id",{get:bt.oneOfGetter(St=["config_id"]),set:bt.oneOfSetter(St)}),Object.defineProperty(xt.prototype,"_protocol",{get:bt.oneOfGetter(St=["protocol"]),set:bt.oneOfSetter(St)}),Object.defineProperty(xt.prototype,"_url_template",{get:bt.oneOfGetter(St=["url_template"]),set:bt.oneOfSetter(St)}),Object.defineProperty(xt.prototype,"_resolve_type",{get:bt.oneOfGetter(St=["resolve_type"]),set:bt.oneOfSetter(St)}),Object.defineProperty(xt.prototype,"_push_cdn_authentication",{get:bt.oneOfGetter(St=["push_cdn_authentication"]),set:bt.oneOfSetter(St)}),xt.encode=function(Nt,$t){if($t=$t||Et.create(),Nt.config_id!=null&&Object.hasOwnProperty.call(Nt,"config_id")&&$t.uint32(10).string(Nt.config_id),Nt.protocol!=null&&Object.hasOwnProperty.call(Nt,"protocol")&&$t.uint32(16).int32(Nt.protocol),Nt.url_template!=null&&Object.hasOwnProperty.call(Nt,"url_template")&&$t.uint32(26).string(Nt.url_template),Nt.resolve_type!=null&&Object.hasOwnProperty.call(Nt,"resolve_type")&&$t.uint32(32).int32(Nt.resolve_type),Nt.push_cdn_authentication!=null&&Object.hasOwnProperty.call(Nt,"push_cdn_authentication")&&$t.uint32(40).int32(Nt.push_cdn_authentication),Nt.cdn_quic_version!=null&&Nt.cdn_quic_version.length){$t.uint32(50).fork();for(let Ft=0;Ft<Nt.cdn_quic_version.length;++Ft)$t.int32(Nt.cdn_quic_version[Ft]);$t.ldelim()}return $t},xt.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.MediaServiceProtocolInfo;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.config_id=Nt.string();break;case 2:jt.protocol=Nt.int32();break;case 3:jt.url_template=Nt.string();break;case 4:jt.resolve_type=Nt.int32();break;case 5:jt.push_cdn_authentication=Nt.int32();break;case 6:if(jt.cdn_quic_version&&jt.cdn_quic_version.length||(jt.cdn_quic_version=[]),(7&zt)==2)for(var Yt=Nt.uint32()+Nt.pos;Nt.pos<Yt;)jt.cdn_quic_version.push(Nt.int32());else jt.cdn_quic_version.push(Nt.int32());break;default:Nt.skipType(7&zt)}}return jt},xt),Rt.MediaResourceInfo=(Bt.prototype.resource_type=null,Bt.prototype.service_info=bt.emptyArray,Object.defineProperty(Bt.prototype,"_resource_type",{get:bt.oneOfGetter(St=["resource_type"]),set:bt.oneOfSetter(St)}),Bt.encode=function(Nt,$t){if($t=$t||Et.create(),Nt.resource_type!=null&&Object.hasOwnProperty.call(Nt,"resource_type")&&$t.uint32(8).int32(Nt.resource_type),Nt.service_info!=null&&Nt.service_info.length)for(let Ft=0;Ft<Nt.service_info.length;++Ft)Ct.proto_initconfig.MediaServiceProtocolInfo.encode(Nt.service_info[Ft],$t.uint32(18).fork()).ldelim();return $t},Bt.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.MediaResourceInfo;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.resource_type=Nt.int32();break;case 2:jt.service_info&&jt.service_info.length||(jt.service_info=[]),jt.service_info.push(Ct.proto_initconfig.MediaServiceProtocolInfo.decode(Nt,Nt.uint32()));break;default:Nt.skipType(7&zt)}}return jt},Bt),Rt.MediaPublishConfig=(Ut.prototype.resource_info=bt.emptyArray,Ut.encode=function(Nt,$t){if($t=$t||Et.create(),Nt.resource_info!=null&&Nt.resource_info.length)for(let Ft=0;Ft<Nt.resource_info.length;++Ft)Ct.proto_initconfig.MediaResourceInfo.encode(Nt.resource_info[Ft],$t.uint32(18).fork()).ldelim();return $t},Ut.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.MediaPublishConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();zt>>>3==2?(jt.resource_info&&jt.resource_info.length||(jt.resource_info=[]),jt.resource_info.push(Ct.proto_initconfig.MediaResourceInfo.decode(Nt,Nt.uint32()))):Nt.skipType(7&zt)}return jt},Ut),Rt.MediaPlayConfig=(Ot.prototype.resource_info=bt.emptyArray,Ot.encode=function(Nt,$t){if($t=$t||Et.create(),Nt.resource_info!=null&&Nt.resource_info.length)for(let Ft=0;Ft<Nt.resource_info.length;++Ft)Ct.proto_initconfig.MediaResourceInfo.encode(Nt.resource_info[Ft],$t.uint32(42).fork()).ldelim();return $t},Ot.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.MediaPlayConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();zt>>>3==5?(jt.resource_info&&jt.resource_info.length||(jt.resource_info=[]),jt.resource_info.push(Ct.proto_initconfig.MediaResourceInfo.decode(Nt,Nt.uint32()))):Nt.skipType(7&zt)}return jt},Ot),Rt.MediaConfig=(Pt.prototype.play_config=null,Pt.prototype.publish_config=null,Object.defineProperty(Pt.prototype,"_play_config",{get:bt.oneOfGetter(St=["play_config"]),set:bt.oneOfSetter(St)}),Object.defineProperty(Pt.prototype,"_publish_config",{get:bt.oneOfGetter(St=["publish_config"]),set:bt.oneOfSetter(St)}),Pt.encode=function(Nt,$t){return $t=$t||Et.create(),Nt.play_config!=null&&Object.hasOwnProperty.call(Nt,"play_config")&&Ct.proto_initconfig.MediaPlayConfig.encode(Nt.play_config,$t.uint32(10).fork()).ldelim(),Nt.publish_config!=null&&Object.hasOwnProperty.call(Nt,"publish_config")&&Ct.proto_initconfig.MediaPublishConfig.encode(Nt.publish_config,$t.uint32(18).fork()).ldelim(),$t},Pt.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.MediaConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.play_config=Ct.proto_initconfig.MediaPlayConfig.decode(Nt,Nt.uint32());break;case 2:jt.publish_config=Ct.proto_initconfig.MediaPublishConfig.decode(Nt,Nt.uint32());break;default:Nt.skipType(7&zt)}}return jt},Pt),Rt.InitConfig=(It.prototype.app_config=null,It.prototype.speedlog_config=null,It.prototype.media_config=null,Object.defineProperty(It.prototype,"_app_config",{get:bt.oneOfGetter(St=["app_config"]),set:bt.oneOfSetter(St)}),Object.defineProperty(It.prototype,"_speedlog_config",{get:bt.oneOfGetter(St=["speedlog_config"]),set:bt.oneOfSetter(St)}),Object.defineProperty(It.prototype,"_media_config",{get:bt.oneOfGetter(St=["media_config"]),set:bt.oneOfSetter(St)}),It.encode=function(Nt,$t){return $t=$t||Et.create(),Nt.app_config!=null&&Object.hasOwnProperty.call(Nt,"app_config")&&Ct.proto_initconfig.AppConfig.encode(Nt.app_config,$t.uint32(10).fork()).ldelim(),Nt.speedlog_config!=null&&Object.hasOwnProperty.call(Nt,"speedlog_config")&&Ct.proto_initconfig.SpeedlogConfig.encode(Nt.speedlog_config,$t.uint32(34).fork()).ldelim(),Nt.media_config!=null&&Object.hasOwnProperty.call(Nt,"media_config")&&Ct.proto_initconfig.MediaConfig.encode(Nt.media_config,$t.uint32(42).fork()).ldelim(),$t},It.decode=function(Nt,$t){Nt instanceof mt||(Nt=mt.create(Nt));let Ft=$t===void 0?Nt.len:Nt.pos+$t,jt=new Ct.proto_initconfig.InitConfig;for(;Nt.pos<Ft;){var zt=Nt.uint32();switch(zt>>>3){case 1:jt.app_config=Ct.proto_initconfig.AppConfig.decode(Nt,Nt.uint32());break;case 4:jt.speedlog_config=Ct.proto_initconfig.SpeedlogConfig.decode(Nt,Nt.uint32());break;case 5:jt.media_config=Ct.proto_initconfig.MediaConfig.decode(Nt,Nt.uint32());break;default:Nt.skipType(7&zt)}}return jt},It),Rt;function It(Nt){if(Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}var St;function Pt(Nt){if(Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function Ot(Nt){if(this.resource_info=[],Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function Ut(Nt){if(this.resource_info=[],Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function Bt(Nt){if(this.service_info=[],Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function xt(Nt){if(this.cdn_quic_version=[],Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function At(Nt){if(this.disable_report_pull=[],Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}function Mt(Nt){if(Nt)for(let $t=Object.keys(Nt),Ft=0;Ft<$t.length;++Ft)Nt[$t[Ft]]!=null&&(this[$t[Ft]]=Nt[$t[Ft]])}})()},function(gt,vt,yt){var mt,Et,bt=this&&this.__extends||(mt=function(Bt,xt){return(mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,Mt){At.__proto__=Mt}||function(At,Mt){for(var Nt in Mt)Object.prototype.hasOwnProperty.call(Mt,Nt)&&(At[Nt]=Mt[Nt])})(Bt,xt)},function(Bt,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");function At(){this.constructor=Bt}mt(Bt,xt),Bt.prototype=xt===null?Object.create(xt):(At.prototype=xt.prototype,new At)}),Ct=this&&this.__assign||function(){return(Ct=Object.assign||function(Bt){for(var xt,At=1,Mt=arguments.length;At<Mt;At++)for(var Nt in xt=arguments[At])Object.prototype.hasOwnProperty.call(xt,Nt)&&(Bt[Nt]=xt[Nt]);return Bt}).apply(this,arguments)},Tt=this&&this.__spreadArray||function(Bt,xt,At){if(At||arguments.length===2)for(var Mt,Nt=0,$t=xt.length;Nt<$t;Nt++)!Mt&&Nt in xt||((Mt=Mt||Array.prototype.slice.call(xt,0,Nt))[Nt]=xt[Nt]);return Bt.concat(Mt||Array.prototype.slice.call(xt))},wt=(Object.defineProperty(vt,"__esModule",{value:!0}),vt.ZegoWssLink=void 0,yt(14)),Rt=yt(0),It=yt(15),St=yt(16),Pt=yt(3),Ot=yt(1);bt(Ut,Et=It.ZegoLink),Ut.prototype.initEvent=function(Bt,xt,At,Mt){this.onConnectedEvent=Bt,this.onDisConnectedEvent=xt,this.onConnectingEvent=At,this.onPushEvent=Mt},Ut.prototype.createSocket=function(Bt){this.servers=Bt,this.urlIndex=0},Ut.prototype.destroySocket=function(Bt){this.logger.info("zn.wl.ds.0 call "+Bt),this.socketService.closeSocket(),this.netLinkState=Rt.ENUM_CONNECT_STATE.disconnect,Bt!==Rt.DestroyType.NONE&&this.onDisConnectedEvent&&this.onDisConnectedEvent(Bt===Rt.DestroyType.BROKEN),this.resetConnect()},Ut.prototype.refreshServers=function(Bt){this.servers=Tt(Tt([],Bt,!0),this.servers,!0)},Ut.prototype.connectSocket=function(Bt,xt,At){var Mt=this,Nt=(Bt===void 0&&(Bt=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=xt,!1),$t=(this.connectRsp.fail=function(){At&&(Nt?Mt.logger.info("zn.wl.cs.0 fail cb has exec"):(At(),Nt=!0))},Bt&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=$t,this.logger.info("zn.wl.cs.0 server "+$t),this.tryServers.push($t),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=Rt.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket($t),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout(function(){Mt.logger.info("zn.wl.cs.0 timeout"),Mt.connectEvent($t,Pt.errorCodeList.NET_CONNECT_TIMEOUT.code),Mt.connectRsp.fail&&Mt.connectRsp.fail()},this.connectInterval),!0},Ut.prototype.bindSocketEvent=function(){var Bt=this;this.openHandler(function(){Bt.logger.info("zn.wl.bse open"),Bt.resetConnect(),Bt.connectRsp.suc&&Bt.connectRsp.suc(),Bt.netLinkState=Rt.ENUM_CONNECT_STATE.connected,Bt.connectEvent(Bt.connectServer,0),Bt.onConnectedEvent&&Bt.onConnectedEvent(Bt.tryServers,Bt.tryConnectEvents),Bt.tryConnectEvents=[],Bt.checkUnSendMsgs(Bt.unSendCommandList),Bt.startCheck()}),this.closeHandler(function(xt){Bt.logger.warn("zn.wl.bse close "+JSON.stringify(xt.code||xt)),Bt.resetConnect(),Bt.connectRsp.fail&&Bt.connectRsp.fail(),Bt.connectEvent(Bt.connectServer,(xt==null?void 0:xt.code)||Pt.errorCodeList.NET_CONNECT_TIMEOUT.code),Bt.onDisConnectedEvent&&Bt.onDisConnectedEvent(!0),Bt.netLinkState=Rt.ENUM_CONNECT_STATE.disconnect}),this.errorHandler(function(xt){Bt.logger.warn("zn.wl.bse error "+JSON.stringify(xt.code||xt)),Bt.resetConnect(),Bt.connectRsp.fail&&Bt.connectRsp.fail(),Bt.connectEvent(Bt.connectServer,(xt==null?void 0:xt.code)||Pt.errorCodeList.NET_CONNECT_TIMEOUT.code),Bt.onDisConnectedEvent&&Bt.onDisConnectedEvent(!0),Bt.netLinkState=Rt.ENUM_CONNECT_STATE.disconnect}),this.onMessage()},Ut.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=Rt.ENUM_CONNECT_STATE.disconnect},Ut.prototype.connectEvent=function(Bt,xt){var At;this.connectStartTime&&(At=Date.now()-this.connectStartTime,this.tryConnectEvents.push({url:Bt,time_consumed:At,connect_type:3,error:xt}))},Ut.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},Ut.prototype.isConnect=function(){return this.netLinkState===Rt.ENUM_CONNECT_STATE.connected},Ut.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},Ut.prototype.isConnecting=function(){return this.netLinkState===Rt.ENUM_CONNECT_STATE.connecting},Ut.prototype.setState=function(Bt){this.netLinkState=Bt},Ut.prototype.closeHandler=function(Bt){this.socketService.closeHandler(Bt)},Ut.prototype.openHandler=function(Bt){this.socketService.openHandler(Bt)},Ut.prototype.errorHandler=function(Bt){this.socketService.errorHandler(Bt)},Ut.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},Ut.prototype.sendMessage=function(Bt,xt,At,Mt,Nt,$t,Ft,jt){Mt===void 0&&(Mt=!0),Nt===void 0&&(Nt=null),$t===void 0&&($t=null),Ft===void 0&&(Ft=null),(jt=jt===void 0?{}:jt).timeout===void 0&&(jt.timeout=5e3),jt.isInSendMap===void 0&&(jt.isInSendMap=!0),this.txid++,Mt={appid:this.appID,biz_type:0,mode_no:((Mt=this.stateCenter.appInfo)==null?void 0:Mt.mode)||Ot.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:Ot.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:this.env===0?Rt.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:Rt.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},At={data:Mt=Ct(Ct({txid:this.txid},Mt),At),txid:this.txid,sendTime:Date.now(),streamID:xt,type:Bt,timeOut:jt.timeout||this.timeout,ack:At.ack,success:Nt,error:$t,ackFunc:Ft,isSend:!0,isCheck:Bt!==Rt.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},jt.isInSendMap&&(Nt=this.sendCommandList.push(At),this.sendCommandMap[this.txid]=Nt),this.unUpdateMsgTimeTypes.includes(Bt)||(this.updatedMsgTime=Date.now()),this.unlogTypes.indexOf(Bt)===-1&&this.logger.info("zn.wl.sm type: "+Bt+"-"+Rt.typeMap[Bt]+" streamID: "+xt+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(Bt,Mt,xt):(At.isSend=!1,$t=this.unSendCommandList.push(At),this.unSendCommandMap[this.txid]=$t)},Ut.prototype.checkUnSendMsgs=function(Bt){for(var xt,At=Bt.getFirst();At!=null;)Bt.remove(At),At._data&&((xt=At._data)==null?void 0:xt.isSend)===!1&&At._data.type&&At._data.streamID&&At._data.data&&(this.sendUint8Data(At._data.type,At._data.data,At._data.streamID),At._data.isSend=!0),At=Bt.getFirst()},Ut.prototype.sendUint8Data=function(Bt,xt,At){Bt=this.protobuf.encodeRequest(Bt,xt,At),this.socketService.sendMessage(Bt)},Ut.prototype.onMessage=function(){var Bt=this;this.socketService.onMessage=function(xt){xt=new Uint8Array(xt);var At,Mt=(xt=Bt.protobuf.decodeResponse(xt))[0],Nt=xt[1];xt=xt[2],Bt.unUpdateMsgTimeTypes.includes(Nt)||(Bt.updatedMsgTime=Date.now()),Bt.unlogTypes.indexOf(Nt)===-1&&Bt.logger.info("zn.wl.om"+" streamID: ".concat(Mt,", msgType: ").concat(Nt,"-").concat(Rt.typeMap[Nt])),(xt!=null&&xt.txid||(At=xt==null?void 0:xt.data)!=null&&At.txid)&&Bt.isRspMsg((xt==null?void 0:xt.txid)||((At=xt==null?void 0:xt.data)==null?void 0:At.txid))?Bt.handleSendCommandMsgRsp(Mt,Nt,(xt==null?void 0:xt.txid)||((At=xt==null?void 0:xt.data)==null?void 0:At.txid),xt):Bt.onPushEvent(Mt,Nt,xt)}},Ut.prototype.isRspMsg=function(Bt){return this.sendCommandMap[Bt]!==void 0},Ut.prototype.startCheck=function(){var Bt=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout(function(){Bt.startCheck()},this.sendDataCheckInterval)},Ut.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},Ut.prototype.checkMessageListTimeout=function(Bt,xt){for(var At,Mt=Bt.getFirst(),Nt=Date.now(),$t=0,Ft=this;Mt!=null&&function(){return Mt._data&&Mt._data.sendTime+Mt._data.timeOut>Nt?"break":(Mt._data&&delete xt[Mt._data.data.txid],Bt.remove(Mt),Mt._data&&Mt._data.error==null||Mt._data&&Mt._data.sendTime+Ft.sendDataDropTimeout<Nt||(jt=Mt&&Mt._data&&Mt._data.error,zt=Mt&&Mt._data&&Mt._data.txid,Yt=Mt&&Mt._data&&((At=Mt._data)==null?void 0:At.isCheck),setTimeout(function(){Yt&&jt&&jt({},zt,Pt.errorCodeList.TIMEOUT)},0)),++$t>=Ft.sendDataCheckOnceCount?"break":void(Mt=Bt.getFirst()));var jt,zt,Yt}()!=="break";);},Ut.prototype.checkSendMessageList=function(Bt){for(var xt,At=Bt.getFirst();At!=null&&At._data;)(function(){var Mt,Nt,$t;Bt.remove(At),At._data.isSend&&At._data.error&&(Mt=At&&At._data&&At._data.error,Nt=At&&At._data&&At._data.txid,$t=At&&At._data&&((xt=At._data)==null?void 0:xt.isCheck),setTimeout(function(){$t&&Mt&&Mt({},Nt,Pt.errorCodeList.TIMEOUT)},0)),At=Bt.getFirst()})()},Ut.prototype.handleSendCommandMsgRsp=function(Bt,xt,At,Mt){var Nt,$t=this.sendCommandMap[At];$t!=null&&((Nt=$t._data)!=null&&Nt.ack||(delete this.sendCommandMap[At],this.sendCommandList.remove($t)),Mt.code&&Mt.code!==0?Nt&&Nt.error!=null&&Nt.error(Mt,At):xt===Rt.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(Mt.code=Mt.reason,Mt.message=Mt.msg,Nt&&Nt.error!=null&&Nt.error(Mt,At)):xt===Rt.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?Nt&&Nt.ackFunc!=null&&Nt.ackFunc(Mt,At):Nt&&Nt.success!=null&&Nt.success(Mt,At))},yt=Ut;function Ut(Bt,xt,At,Mt,Nt){var $t=Et.call(this)||this;return $t.appID=Bt,$t.env=xt,$t.protobuf=At,$t.logger=Mt,$t.stateCenter=Nt,$t.socketService=new St.NetSocketService($t.env),$t.urlIndex=0,$t.updatedMsgTime=0,$t.unUpdateMsgTimeTypes=[Rt.AccessHubMessageType.MSG_TYPE_HB_REQUEST,Rt.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,Rt.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,Rt.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],$t.netLinkState=Rt.ENUM_CONNECT_STATE.disconnect,$t.sendCommandList=new wt.LinkedList,$t.unSendCommandList=new wt.LinkedList,$t.sendCommandMap={},$t.unSendCommandMap={},$t.sendDataCheckOnceCount=100,$t.sendDataDropTimeout=1e4,$t.sendDataCheckInterval=2e3,$t.timeout=5e3,$t.connectInterval=1e4,$t.connectTimer=null,$t.connectRsp={},$t.unlogTypes=[12,13],$t.tryServers=[],$t.tryConnectEvents=[],$t.connectStartTime=0,$t.updatedMsgTime=Date.now(),$t}vt.ZegoWssLink=yt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.LinkedList=vt.ListNode=void 0,Object.defineProperty(Et.prototype,"id",{get:function(){return this._id||null},set:function(Ct){this._id=Ct},enumerable:!1,configurable:!0}),Object.defineProperty(Et.prototype,"data",{get:function(){return this._data},set:function(Ct){this._data=Ct},enumerable:!1,configurable:!0}),Et.prototype.hasNext=function(){return this.next&&this.next.id},Et.prototype.hasPrev=function(){return this.prev&&this.prev.id};var mt=Et;function Et(Ct,Tt){Ct===void 0&&(Ct=null),Tt===void 0&&(Tt=null),this.next=null,this.prev=null,this._id=Ct,this._data=Tt}function bt(){this.start=new mt,this.end=new mt,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}vt.ListNode=mt,bt.prototype.insertBefore=function(Ct,Tt){return(Tt=new mt(this._idCounter,Tt)).next=Ct,Tt.prev=Ct.prev,Ct.prev&&(Ct.prev.next=Tt),Ct.prev=Tt,++this._idCounter,++this._numNodes,Tt},bt.prototype.addLast=function(Ct){return this.insertBefore(this.end,Ct)},bt.prototype.add=function(Ct){return this.addLast(Ct)},bt.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},bt.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},bt.prototype.size=function(){return this._numNodes},bt.prototype.getFromFirst=function(Ct){var Tt=0,wt=this.start.next;if(0<=Ct)for(;Tt<Ct&&wt!==null;)wt=wt.next,++Tt;else wt=null;if(wt===null)throw"Index out of bounds.";return wt},bt.prototype.get=function(Ct){return Ct===0?this.getFirst():Ct===this._numNodes-1?this.getLast():this.getFromFirst(Ct)},bt.prototype.remove=function(Ct){return Ct.prev&&(Ct.prev.next=Ct.next),Ct.next&&(Ct.next.prev=Ct.prev),--this._numNodes,Ct},bt.prototype.removeFirst=function(){var Ct=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):Ct},bt.prototype.removeLast=function(){var Ct=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):Ct},bt.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},bt.prototype.each=function(Ct){for(var Tt=this.start;Tt.hasNext();)Ct(Tt=Tt.next)},bt.prototype.find=function(Ct){for(var Tt=this.start,wt=!1,Rt=null;Tt.hasNext()&&!wt;)Ct(Tt=Tt.next)&&(Rt=Tt,wt=!0);return Rt},bt.prototype.map=function(Ct){for(var Tt=this.start,wt=[];Tt.hasNext();)Ct(Tt=Tt.next)&&wt.push(Tt);return wt},bt.prototype.push=function(Ct){return this.addLast(Ct)},bt.prototype.unshift=function(Ct){0<this._numNodes?this.insertBefore(this.start.next,Ct):this.insertBefore(this.end,Ct)},bt.prototype.pop=function(){return this.removeLast()},bt.prototype.shift=function(){return this.removeFirst()},vt.LinkedList=bt},function(gt,vt,yt){function mt(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(vt,"__esModule",{value:!0}),vt.ZegoLink=void 0,mt.prototype.createSocket=function(Et){},mt.prototype.setState=function(Et){},mt.prototype.initEvent=function(Et,bt,Ct,Tt){},mt.prototype.sendMessage=function(Et,bt,Ct,Tt,wt,Rt,It,St){},vt.ZegoLink=mt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetSocketService=void 0;var mt=yt(17);function Et(bt){this.socket=null,this.ENV=bt}Et.prototype.createSocket=function(bt){this.socket=(0,mt.createZegoWebSocket)(bt,this.ENV%2)},Et.prototype.openHandler=function(bt){var Ct=this;this.socket&&(this.socket.onopen=function(Tt){Ct.socket.binaryType="arraybuffer",Ct.responseHandler(),bt(Tt)})},Et.prototype.responseHandler=function(){var bt=this;this.socket&&(this.socket.onmessage=function(Ct){Ct=typeof Ct.data=="string"?JSON.parse(Ct.data):Ct.data,bt.onMessage(Ct)})},Et.prototype.onMessage=function(bt){},Et.prototype.closeHandler=function(bt){this.socket&&(this.socket.onclose=function(Ct){bt(Ct)})},Et.prototype.errorHandler=function(bt){this.socket&&(this.socket.onerror=bt)},Et.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},Et.prototype.isDisConnect=function(){return!this.socket||this.socket.readyState!==1},Et.prototype.sendMessage=function(bt){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(bt)},vt.NetSocketService=Et},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.createZegoWebSocket=vt.ZegoWeiXinMiniWebSocket=vt.ZEGO_ENV=void 0,(Et=mt=vt.ZEGO_ENV||(vt.ZEGO_ENV={}))[Et.BROWSER=0]="BROWSER",Et[Et.WEIXINMINI=1]="WEIXINMINI",Ct.prototype.init=function(){var Tt=this;this._websocket&&(this.readyState=0,this._websocket.onOpen(function(wt){Tt.readyState=Tt._websocket.readyState,typeof Tt.onopen=="function"&&(Tt.onopen(wt),Tt._websocket.onClose(function(Rt){Tt.readyState=Tt._websocket.readyState,typeof Tt.onclose=="function"&&Tt.onclose(Rt)}),Tt._websocket.onMessage(function(Rt){typeof Tt.onmessage=="function"&&Tt.onmessage(Rt)}))}),this._websocket.onError(function(wt){Tt.readyState=Tt._websocket.readyState,typeof Tt.onerror=="function"&&Tt.onerror(wt)}))},Ct.prototype.onopen=function(Tt){},Ct.prototype.onerror=function(Tt){},Ct.prototype.onclose=function(Tt){},Ct.prototype.onmessage=function(Tt){},Ct.prototype.send=function(Tt){this._websocket&&this._websocket.send({data:Tt})},Ct.prototype.close=function(){this._websocket&&this._websocket.close()};var mt,Et,bt=Ct;function Ct(Tt,wt){this.url=Tt,this.readyState=3,this._websocket=wx.connectSocket({url:Tt}),this.init()}vt.ZegoWeiXinMiniWebSocket=bt,vt.createZegoWebSocket=function(Tt,wt){return new(wt%2===mt.BROWSER?WebSocket:bt)(Tt)}},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetAgentBusinessRequestMgr=void 0;var mt=yt(0),Et=yt(1);function bt(Ct,Tt,wt,Rt){this.streamManager=Ct,this.protobuf=Tt,this.logger=wt,this.stateCenter=Rt}bt.prototype.getConfig=function(Ct,Tt){var wt;this.logger.info("zn.nab.gc call"),this.streamManager.createStream(mt.StreamType.OTHER).sendMessage(mt.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:Et.NET_ACCESS_CONFIG.connectVer,mode:mt.ModeMap[((wt=this.stateCenter.appInfo)==null?void 0:wt.mode)||Et.NET_ACCESS_CONFIG.modeNo]},Ct,Tt)},bt.prototype.dispatchURL=function(Ct,Tt){var wt=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(mt.StreamType.OTHER).sendMessage(mt.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},function(Rt){wt.logger.info("zn.nab.du suc "),Ct&&Ct(Rt)},function(Rt,It,St){wt.logger.info("zn.nab.du fail"),Tt&&Tt(St||Rt)})},bt.prototype.getAppConfig=function(Ct,Tt,wt,Rt){var It=this;return new Promise(function(St,Pt){function Ot(Bt,xt,At){At?(It.logger.error("zn.nab.gac fail "+JSON.stringify(At)),Pt(At)):Bt.code===0?(It.logger.info("zn.nab.gac suc"),At=It.decodeConfigMessage(Bt.data.data),St({code:0,data:At})):(It.logger.error("zn.nab.gac fail "+Bt.code),Pt({code:Bt.code}))}It.logger.info("zn.nab.gac call");var Ut={id_name:Tt,config_key:Ct,token:wt,mode_no:((Ut=It.stateCenter.appInfo)==null?void 0:Ut.mode)||Et.NET_ACCESS_CONFIG.modeNo};It.streamManager.createStream(mt.StreamType.OTHER).sendMessage(mt.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,Ut,Ot,Ot,null,{timeout:Rt})})},bt.prototype.decodeConfigMessage=function(Ct){return this.protobuf.decodeConfigMessage(Ct)},vt.NetAgentBusinessRequestMgr=bt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetHeartBeatHandler=void 0;var mt=yt(3),Et=yt(0);function bt(Ct,Tt,wt){this.streamManager=Ct,this.logger=Tt,this.stateCenter=wt,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}bt.prototype.init=function(Ct){var Tt=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(Et.StreamType.OTHER)),1<=Ct.data.logic_hb_interval&&Ct.data.logic_hb_interval<=10&&(this.hbInterval=Ct.data.logic_hb_interval),3<=Ct.data.logic_hb_timeout&&Ct.data.logic_hb_timeout<=30&&(this.hbTimeout=Ct.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout(function(){Tt.start()},1e3*this.hbInterval)},bt.prototype.start=function(){var Ct,Tt,wt,Rt=this;this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(mt.errorCodeList.NET_HB_TIMEOUT)):(Ct=new Date().getTime(),Tt=function(It,St,Pt){var Ot=new Date().getTime()-Ct;Rt.logger.debug("zn.nhb.s hb callback "+Ot),Pt&&(Pt==null?void 0:Pt.code)!==0?Rt.logger.info("zn.nhb.s fail "+JSON.stringify(Pt)):(It!=null&&It.ntp_time&&(Pt=It.ntp_time.toNumber(),It=new Date().getTime(),Pt+=Math.round(Ot/2),Rt.stateCenter.timeOffset=Pt-It),Rt.tryHbCount=0)},wt={ts:Date.now()},this.hbStream.sendMessage(Et.AccessHubMessageType.MSG_TYPE_HB_REQUEST,wt,Tt,Tt,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout(function(){Rt.start()},1e3*this.hbInterval))},bt.prototype.netHbLogout=function(Ct){},bt.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},vt.NetHeartBeatHandler=bt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetAgentPCRequestMgr=void 0;var mt=yt(0),Et=yt(1),bt=yt(5);function Ct(Tt,wt){this.streamManager=Tt,this.logger=wt,this.pcStreamRequests=[],this.pcEstablishTimeout=Et.NET_ACCESS_CONFIG.pcEstablishTimeout}Ct.prototype.getRequest=function(Tt,wt){return Tt=new bt.NetAgentPCRequest(this.logger,Tt,this.streamManager,this.pcEstablishTimeout,wt),this.pcStreamRequests.push(Tt),Tt},Ct.prototype.updateConnectState=function(Tt,wt,Rt){this.pcStreamRequests.forEach(function(It){Tt===mt.PcConnectState.BROKEN?(It.eventManager.emit("broken"),It.reportEvent("pcBrokenEvent")):Tt===mt.PcConnectState.DISCONNECT&&(It.eventManager.emit("disconnected",wt,Rt),It.reportEvent("pcDisconnectedEvent"))})},Ct.prototype.closePCs=function(){this.pcStreamRequests.forEach(function(Tt){Tt.closePc()})},Ct.prototype.setEstablishTimeout=function(Tt){this.pcEstablishTimeout=Tt},vt.NetAgentPCRequestMgr=Ct},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.NetRetryLinkHandler=void 0;var mt=yt(3),Et=yt(0);function bt(Ct,Tt){this.logger=Ct,this.stateCenter=Tt,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}bt.prototype.initLink=function(Ct){this.link=Ct},bt.prototype.startMaxTime=function(){var Ct=this;this.logger.info("zn.rlh.sm call"),this.maxTimer||(this.logger.info("zn.rlh.sm start max timer"),this.maxTimer=setTimeout(function(){Ct.logger.warn("zn.rlh.sm"+" over max time ".concat(Ct.RETRY_MAX_TIME,"s, stop retry")),Ct.isOverTime=!0,Ct.link.destroySocket(Et.DestroyType.NONE),Ct.stopMaxTime(),Ct.invalid(),Ct.onactive(!1,mt.errorCodeList.NET_SOCKET_TIMEOUT)},1e3*this.RETRY_MAX_TIME))},bt.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},bt.prototype.active=function(Ct,Tt,wt){var Rt=this;if(wt===void 0&&(wt=!1),this.logger.info("zn.rlh.at call "+Ct+" "+(Tt=Tt!==void 0&&Tt)),this.retryTimer)return this.logger.info("zn.rlh.at has actived, ignore"),!1;var It=this.stateCenter.networkState==Et.ENUM_NETWORK_STATE.offline;if(It){if(this.logger.info("zn.rlh.at  check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zn.rlh.at network is broken, stop retry"),!1}else this.retryNetCount=0;return this.link.isConnecting()&&!wt?(this.logger.info("zn.rlh.at link is connecting, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(this.retryActiveCount==1?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(wt=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=wt>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:wt),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout(function(){Rt.link.destroySocket(Et.DestroyType.BROKEN),Rt.link.connectSocket(Ct,function(){Rt.logger.info("zn.rlh.at suc"),Rt.stateCenter.networkState=Et.ENUM_NETWORK_STATE.online,Rt.stopMaxTime(),Rt.invalid(),Rt.onactive(!0)},function(){Rt.logger.info("zn.rlh.at fail"),Rt.maxTimer||Rt.startMaxTime(),Rt.active(!0,!1,!0)}),Rt.retryTimer&&clearTimeout(Rt.retryTimer),Rt.retryTimer=null,It?Rt.retryNetCount++:Rt.retryActiveCount++},Tt?0:1e3*this.retryActiveInterval),!0)},bt.prototype.onactive=function(){for(var Ct=[],Tt=0;Tt<arguments.length;Tt++)Ct[Tt]=arguments[Tt]},bt.prototype.init=function(Ct,Tt,wt,Rt){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,typeof Ct=="number"&&Ct<3600&&(this.RETRY_MAX_TIME=Ct),typeof Tt=="number"&&(this.RETRY_START_TIME_INTERVAL=Tt),typeof wt=="number"&&(this.RETRY_CONTINUE_COUNT=wt),typeof Rt=="number"&&(this.RETRY_MAX_TIME_INTERVAL=Rt)},bt.prototype.invalid=function(){this.logger.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},vt.NetRetryLinkHandler=bt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.StateCenter=void 0;var mt=yt(0);vt.StateCenter=function(){this.networkState=mt.ENUM_NETWORK_STATE.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0}},function(gt,vt,yt){function mt(){}Object.defineProperty(vt,"__esModule",{value:!0}),vt.ZegoLogger=void 0,mt.prototype.log=function(){for(var Et=[],bt=0;bt<arguments.length;bt++)Et[bt]=arguments[bt];var Ct=Et.join(" ");console.log(Ct)},mt.prototype.debug=function(){for(var Et=[],bt=0;bt<arguments.length;bt++)Et[bt]=arguments[bt];var Ct=Et.join(" ");console.debug(Ct)},mt.prototype.info=function(){for(var Et=[],bt=0;bt<arguments.length;bt++)Et[bt]=arguments[bt];var Ct=Et.join(" ");console.info(Ct)},mt.prototype.warn=function(){for(var Et=[],bt=0;bt<arguments.length;bt++)Et[bt]=arguments[bt];var Ct=Et.join(" ");console.warn(Ct)},mt.prototype.error=function(){for(var Et=[],bt=0;bt<arguments.length;bt++)Et[bt]=arguments[bt];var Ct=Et.join(" ");console.error(Ct)},vt.ZegoLogger=mt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.StreamManager=void 0;var mt=yt(0),Et=yt(25);function bt(Ct){this.zegoLink=Ct,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}bt.prototype.createStream=function(Ct){return Ct!==mt.StreamType.HTTP&&Ct===mt.StreamType.PC?(Tt=new Et.ZegoLinkStream(Ct,this.streamID++,this.zegoLink),this.pcStreams.push(Tt),Tt):this.getStream(Ct,this.httpStreams);var Tt},bt.prototype.getStream=function(Ct,Tt){return Tt=Tt.find(function(wt){return wt.isFree===!0}),Tt?(Tt.isFree=!1,Tt.isFirst=!1,Tt):(Tt=new Et.ZegoLinkStream(Ct,this.streamID++,this.zegoLink),this.httpStreams.push(Tt),Tt)},bt.prototype.onPushEvent=function(Ct,Tt,wt){var Rt=this.pcStreams.find(function(It){return It.StreamID===Ct});Rt&&Rt.onPushEvent(Tt,wt)},bt.prototype.getStreamID=function(){return this.streamID++},vt.StreamManager=bt},function(gt,vt,yt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.ZegoLinkStream=void 0;var mt=yt(0);function Et(bt,Ct,Tt){this.type=bt,this.streamID=Ct,this.zegoLink=Tt,this.isFree=!1,this.isFirst=!0}Object.defineProperty(Et.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),Et.prototype.refresh=function(bt){this.streamID=bt},Et.prototype.sendMessage=function(bt,Ct,Tt,wt,Rt,It){var St=this;Tt===void 0&&(Tt=null),wt===void 0&&(wt=null),this.zegoLink.sendMessage(bt,this.streamID,Ct,this.isFirst,function(Pt){St.type!==mt.StreamType.PC&&(St.isFree=!0),Tt&&Tt(Pt)},function(Pt,Ot,Ut){St.type!==mt.StreamType.PC&&(St.isFree=!0),wt&&wt(Pt,Ot,Ut)},Rt=Rt===void 0?null:Rt,It=It===void 0?{timeout:5e3,isInSendMap:!0}:It)},Et.prototype.onPushEvent=function(bt,Ct){},Et.prototype.closeStream=function(bt,Ct){this.zegoLink.sendMessage(mt.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:bt,msg:Ct})},Et.prototype.isConnect=function(){return this.zegoLink.isConnect()},vt.ZegoLinkStream=Et}],ft={},ct.m=ht,ct.c=ft,ct.d=function(gt,vt,yt){ct.o(gt,vt)||Object.defineProperty(gt,vt,{enumerable:!0,get:yt})},ct.r=function(gt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(gt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(gt,"__esModule",{value:!0})},ct.t=function(gt,vt){if(1&vt&&(gt=ct(gt)),8&vt||4&vt&&typeof gt=="object"&&gt&&gt.__esModule)return gt;var yt=Object.create(null);if(ct.r(yt),Object.defineProperty(yt,"default",{enumerable:!0,value:gt}),2&vt&&typeof gt!="string")for(var mt in gt)ct.d(yt,mt,function(Et){return gt[Et]}.bind(null,mt));return yt},ct.n=function(gt){var vt=gt&&gt.__esModule?function(){return gt.default}:function(){return gt};return ct.d(vt,"a",vt),vt},ct.o=function(gt,vt){return Object.prototype.hasOwnProperty.call(gt,vt)},ct.p="",ct(ct.s=8))},function(st,at,lt){var ct;st.exports=(ct=lt(2),function(){var pt,ut;typeof ArrayBuffer=="function"&&(pt=ct.lib.WordArray,ut=pt.init,(pt.init=function(ht){if((ht=(ht=ht instanceof ArrayBuffer?new Uint8Array(ht):ht)instanceof Int8Array||typeof Uint8ClampedArray<"u"&&ht instanceof Uint8ClampedArray||ht instanceof Int16Array||ht instanceof Uint16Array||ht instanceof Int32Array||ht instanceof Uint32Array||ht instanceof Float32Array||ht instanceof Float64Array?new Uint8Array(ht.buffer,ht.byteOffset,ht.byteLength):ht)instanceof Uint8Array){for(var ft=ht.byteLength,gt=[],vt=0;vt<ft;vt++)gt[vt>>>2]|=ht[vt]<<24-vt%4*8;ut.call(this,gt,ft)}else ut.apply(this,arguments)}).prototype=pt)}(),ct.lib.WordArray)},function(st,at){},function(st,at,lt){var ct;st.exports=(st=lt(2),ct=st.lib.WordArray,st.enc.Base64={stringify:function(pt){for(var ut=pt.words,ht=pt.sigBytes,ft=this._map,gt=(pt.clamp(),[]),vt=0;vt<ht;vt+=3)for(var yt=(ut[vt>>>2]>>>24-vt%4*8&255)<<16|(ut[vt+1>>>2]>>>24-(vt+1)%4*8&255)<<8|ut[vt+2>>>2]>>>24-(vt+2)%4*8&255,mt=0;mt<4&&vt+.75*mt<ht;mt++)gt.push(ft.charAt(yt>>>6*(3-mt)&63));var Et=ft.charAt(64);if(Et)for(;gt.length%4;)gt.push(Et);return gt.join("")},parse:function(pt){var ut=pt.length,ht=this._map;if(!(ft=this._reverseMap))for(var ft=this._reverseMap=[],gt=0;gt<ht.length;gt++)ft[ht.charCodeAt(gt)]=gt;var vt=ht.charAt(64);return vt&&(vt=pt.indexOf(vt))!==-1&&(ut=vt),function(yt,mt,Et){for(var bt,Ct,Tt=[],wt=0,Rt=0;Rt<mt;Rt++)Rt%4&&(bt=Et[yt.charCodeAt(Rt-1)]<<Rt%4*2,Ct=Et[yt.charCodeAt(Rt)]>>>6-Rt%4*2,Tt[wt>>>2]|=(bt|Ct)<<24-wt%4*8,wt++);return ct.create(Tt,wt)}(pt,ut,ft)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},st.enc.Base64)},function(st,at,lt){var ct,pt,ut,ht;st.exports=(st=lt(2),ht=(lt=st).lib,ct=ht.WordArray,pt=ht.Hasher,ht=lt.algo,ut=[],ht=ht.SHA1=pt.extend({_doReset:function(){this._hash=new ct.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ft,gt){for(var vt=this._hash.words,yt=vt[0],mt=vt[1],Et=vt[2],bt=vt[3],Ct=vt[4],Tt=0;Tt<80;Tt++){Tt<16?ut[Tt]=0|ft[gt+Tt]:(wt=ut[Tt-3]^ut[Tt-8]^ut[Tt-14]^ut[Tt-16],ut[Tt]=wt<<1|wt>>>31);var wt=(yt<<5|yt>>>27)+Ct+ut[Tt];wt+=Tt<20?1518500249+(mt&Et|~mt&bt):Tt<40?1859775393+(mt^Et^bt):Tt<60?(mt&Et|mt&bt|Et&bt)-1894007588:(mt^Et^bt)-899497514,Ct=bt,bt=Et,Et=mt<<30|mt>>>2,mt=yt,yt=wt}vt[0]=vt[0]+yt|0,vt[1]=vt[1]+mt|0,vt[2]=vt[2]+Et|0,vt[3]=vt[3]+bt|0,vt[4]=vt[4]+Ct|0},_doFinalize:function(){var ft=this._data,gt=ft.words,vt=8*this._nDataBytes,yt=8*ft.sigBytes;return gt[yt>>>5]|=128<<24-yt%32,gt[14+(64+yt>>>9<<4)]=Math.floor(vt/4294967296),gt[15+(64+yt>>>9<<4)]=vt,ft.sigBytes=4*gt.length,this._process(),this._hash},clone:function(){var ft=pt.clone.call(this);return ft._hash=this._hash.clone(),ft}}),lt.SHA1=pt._createHelper(ht),lt.HmacSHA1=pt._createHmacHelper(ht),st.SHA1)},function(st,at,lt){var ct;st.exports=(st=lt(2),lt=st.lib.Base,ct=st.enc.Utf8,void(st.algo.HMAC=lt.extend({init:function(pt,ut){pt=this._hasher=new pt.init,typeof ut=="string"&&(ut=ct.parse(ut));for(var ht=pt.blockSize,ft=4*ht,gt=(pt=((ut=ut.sigBytes>ft?pt.finalize(ut):ut).clamp(),this._oKey=ut.clone()),ut=this._iKey=ut.clone(),pt.words),vt=ut.words,yt=0;yt<ht;yt++)gt[yt]^=1549556828,vt[yt]^=909522486;pt.sigBytes=ut.sigBytes=ft,this.reset()},reset:function(){var pt=this._hasher;pt.reset(),pt.update(this._iKey)},update:function(pt){return this._hasher.update(pt),this},finalize:function(pt){var ut=this._hasher;return pt=ut.finalize(pt),ut.reset(),ut.finalize(this._oKey.clone().concat(pt))}})))},function(st,at,lt){var ct,pt,ut,ht,ft,gt,vt,yt,mt,Et,bt,Ct;st.exports=(st=lt(2),lt(13),void(st.lib.Cipher||(lt=st.lib,ct=lt.Base,pt=lt.WordArray,ut=lt.BufferedBlockAlgorithm,(mt=st.enc).Utf8,ht=mt.Base64,ft=st.algo.EvpKDF,gt=lt.Cipher=ut.extend({cfg:ct.extend(),createEncryptor:function(Tt,wt){return this.create(this._ENC_XFORM_MODE,Tt,wt)},createDecryptor:function(Tt,wt){return this.create(this._DEC_XFORM_MODE,Tt,wt)},init:function(Tt,wt,Rt){this.cfg=this.cfg.extend(Rt),this._xformMode=Tt,this._key=wt,this.reset()},reset:function(){ut.reset.call(this),this._doReset()},process:function(Tt){return this._append(Tt),this._process()},finalize:function(Tt){return Tt&&this._append(Tt),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Tt(wt){return typeof wt=="string"?Ct:Et}return function(wt){return{encrypt:function(Rt,It,St){return Tt(It).encrypt(wt,Rt,It,St)},decrypt:function(Rt,It,St){return Tt(It).decrypt(wt,Rt,It,St)}}}}()}),lt.StreamCipher=gt.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),mt=st.mode={},vt=lt.BlockCipherMode=ct.extend({createEncryptor:function(Tt,wt){return this.Encryptor.create(Tt,wt)},createDecryptor:function(Tt,wt){return this.Decryptor.create(Tt,wt)},init:function(Tt,wt){this._cipher=Tt,this._iv=wt}}),mt=mt.CBC=function(){var Tt=vt.extend();function wt(Rt,It,St){var Pt,Ot=this._iv;Ot?(Pt=Ot,this._iv=void 0):Pt=this._prevBlock;for(var Ut=0;Ut<St;Ut++)Rt[It+Ut]^=Pt[Ut]}return Tt.Encryptor=Tt.extend({processBlock:function(Rt,It){var St=this._cipher,Pt=St.blockSize;wt.call(this,Rt,It,Pt),St.encryptBlock(Rt,It),this._prevBlock=Rt.slice(It,It+Pt)}}),Tt.Decryptor=Tt.extend({processBlock:function(Rt,It){var St=this._cipher,Pt=St.blockSize,Ot=Rt.slice(It,It+Pt);St.decryptBlock(Rt,It),wt.call(this,Rt,It,Pt),this._prevBlock=Ot}}),Tt}(),bt=(st.pad={}).Pkcs7={pad:function(Tt,wt){for(var Rt=(wt=4*wt)-Tt.sigBytes%wt,It=Rt<<24|Rt<<16|Rt<<8|Rt,St=[],Pt=0;Pt<Rt;Pt+=4)St.push(It);wt=pt.create(St,Rt),Tt.concat(wt)},unpad:function(Tt){var wt=255&Tt.words[Tt.sigBytes-1>>>2];Tt.sigBytes-=wt}},lt.BlockCipher=gt.extend({cfg:gt.cfg.extend({mode:mt,padding:bt}),reset:function(){gt.reset.call(this);var Tt,wt=(Rt=this.cfg).iv,Rt=Rt.mode;this._xformMode==this._ENC_XFORM_MODE?Tt=Rt.createEncryptor:(Tt=Rt.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Tt?this._mode.init(this,wt&&wt.words):(this._mode=Tt.call(Rt,this,wt&&wt.words),this._mode.__creator=Tt)},_doProcessBlock:function(Tt,wt){this._mode.processBlock(Tt,wt)},_doFinalize:function(){var Tt,wt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(wt.pad(this._data,this.blockSize),Tt=this._process(!0)):(Tt=this._process(!0),wt.unpad(Tt)),Tt},blockSize:4}),yt=lt.CipherParams=ct.extend({init:function(Tt){this.mixIn(Tt)},toString:function(Tt){return(Tt||this.formatter).stringify(this)}}),mt=(st.format={}).OpenSSL={stringify:function(Tt){var wt=Tt.ciphertext;return(Tt=(Tt=Tt.salt)?pt.create([1398893684,1701076831]).concat(Tt).concat(wt):wt).toString(ht)},parse:function(Tt){var wt,Rt=(Tt=ht.parse(Tt)).words;return Rt[0]==1398893684&&Rt[1]==1701076831&&(wt=pt.create(Rt.slice(2,4)),Rt.splice(0,4),Tt.sigBytes-=16),yt.create({ciphertext:Tt,salt:wt})}},Et=lt.SerializableCipher=ct.extend({cfg:ct.extend({format:mt}),encrypt:function(Tt,wt,Rt,It){It=this.cfg.extend(It),wt=(St=Tt.createEncryptor(Rt,It)).finalize(wt);var St=St.cfg;return yt.create({ciphertext:wt,key:Rt,iv:St.iv,algorithm:Tt,mode:St.mode,padding:St.padding,blockSize:Tt.blockSize,formatter:It.format})},decrypt:function(Tt,wt,Rt,It){return It=this.cfg.extend(It),wt=this._parse(wt,It.format),Tt.createDecryptor(Rt,It).finalize(wt.ciphertext)},_parse:function(Tt,wt){return typeof Tt=="string"?wt.parse(Tt,this):Tt}}),bt=(st.kdf={}).OpenSSL={execute:function(Tt,wt,Rt,It){return It=It||pt.random(8),Tt=ft.create({keySize:wt+Rt}).compute(Tt,It),Rt=pt.create(Tt.words.slice(wt),4*Rt),Tt.sigBytes=4*wt,yt.create({key:Tt,iv:Rt,salt:It})}},Ct=lt.PasswordBasedCipher=Et.extend({cfg:Et.cfg.extend({kdf:bt}),encrypt:function(Tt,wt,Rt,It){return Rt=(It=this.cfg.extend(It)).kdf.execute(Rt,Tt.keySize,Tt.ivSize),It.iv=Rt.iv,(Tt=Et.encrypt.call(this,Tt,wt,Rt.key,It)).mixIn(Rt),Tt},decrypt:function(Tt,wt,Rt,It){return It=this.cfg.extend(It),wt=this._parse(wt,It.format),Rt=It.kdf.execute(Rt,Tt.keySize,Tt.ivSize,wt.salt),It.iv=Rt.iv,Et.decrypt.call(this,Tt,wt,Rt.key,It)}}))))},function(st,at,lt){lt.r(at),lt.d(at,"ZegoExpressWebRTMEngine",function(){return Vt}),lt.d(at,"getReportSeq",function(){return Ct}),lt.d(at,"getSeq",function(){return bt}),lt.d(at,"ZegoLogger",function(){return mt.ZegoLogger}),lt.d(at,"ZegoDataReport",function(){return mt.ZegoDataReport}),lt.d(at,"ZegoExpressWebRTM",function(){return mo}),lt.d(at,"BusinessService",function(){return Bt}),lt.d(at,"NetConnection",function(){return Nt}),lt.d(at,"ZReporter",function(){return dt});var ct,pt,ut,ht,ft,gt,vt,yt,mt=lt(5),Et={debug:0,info:1,warn:2,error:3,report:99,disable:100},bt=((at=ct=ct||{})[at.TT_NONE=0]="TT_NONE",at[at.TT_PC=1]="TT_PC",at[at.TT_IOS=2]="TT_IOS",at[at.TT_ANDROID=3]="TT_ANDROID",at[at.TT_MAC=4]="TT_MAC",at[at.TT_LINUX=5]="TT_LINUX",at[at.TT_WEB=6]="TT_WEB",at[at.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",at[at.TT_UNKNOWN=32]="TT_UNKNOWN",(at=pt=pt||{})[at.logout=0]="logout",at[at.trylogin=1]="trylogin",at[at.login=2]="login",(at=ut=ut||{})[at.I=0]="I",at[at.H=10]="H",at[at.M=100]="M",at[at.L=1e3]="L",(at=ht=ht||{})[at.offline=0]="offline",at[at.online=1]="online",(at=ft=ft||{})[at.NT_NONE=0]="NT_NONE",at[at.NT_LINE=1]="NT_LINE",at[at.NT_WIFI=2]="NT_WIFI",at[at.NT_2G=3]="NT_2G",at[at.NT_3G=4]="NT_3G",at[at.NT_4G=5]="NT_4G",at[at.NT_UNKNOWN=32]="NT_UNKNOWN",(at=gt=gt||{})[at.ClientType_None=0]="ClientType_None",at[at.ClientType_H5=1]="ClientType_H5",at[at.ClientType_SmallProgram=2]="ClientType_SmallProgram",at[at.ClientType_Webrtc=3]="ClientType_Webrtc",function(){return vt++}),Ct=(yt=vt=1,function(){return yt++}),Tt=(Object.defineProperty(wt.prototype,"id",{get:function(){return this._id||null},set:function(kt){this._id=kt},enumerable:!1,configurable:!0}),Object.defineProperty(wt.prototype,"data",{get:function(){return this._data},set:function(kt){this._data=kt},enumerable:!1,configurable:!0}),wt.prototype.hasNext=function(){return this.next&&this.next.id},wt.prototype.hasPrev=function(){return this.prev&&this.prev.id},wt);function wt(kt,Gt){kt===void 0&&(kt=null),Gt===void 0&&(Gt=null),this.next=null,this.prev=null,this._id=kt,this._data=Gt}It.prototype.insertBefore=function(kt,Gt){return(Gt=new Tt(this._idCounter,Gt)).next=kt,Gt.prev=kt.prev,kt.prev&&(kt.prev.next=Gt),kt.prev=Gt,++this._idCounter,++this._numNodes,Gt},It.prototype.addLast=function(kt){return this.insertBefore(this.end,kt)},It.prototype.add=function(kt){return this.addLast(kt)},It.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},It.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},It.prototype.size=function(){return this._numNodes},It.prototype.getFromFirst=function(kt){var Gt=0,Wt=this.start.next;if(0<=kt)for(;Gt<kt&&Wt!==null;)Wt=Wt.next,++Gt;else Wt=null;if(Wt===null)throw"Index out of bounds.";return Wt},It.prototype.get=function(kt){return kt===0?this.getFirst():kt===this._numNodes-1?this.getLast():this.getFromFirst(kt)},It.prototype.remove=function(kt){return kt.prev&&(kt.prev.next=kt.next),kt.next&&(kt.next.prev=kt.prev),--this._numNodes,kt},It.prototype.removeFirst=function(){var kt=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):kt},It.prototype.removeLast=function(){var kt=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):kt},It.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},It.prototype.each=function(kt){for(var Gt=this.start;Gt.hasNext();)kt(Gt=Gt.next)},It.prototype.find=function(kt){for(var Gt=this.start,Wt=!1,tr=null;Gt.hasNext()&&!Wt;)kt(Gt=Gt.next)&&(tr=Gt,Wt=!0);return tr},It.prototype.map=function(kt){for(var Gt=this.start,Wt=[];Gt.hasNext();)kt(Gt=Gt.next)&&Wt.push(Gt);return Wt},It.prototype.push=function(kt){return this.addLast(kt)},It.prototype.unshift=function(kt){0<this._numNodes?this.insertBefore(this.start.next,kt):this.insertBefore(this.end,kt)},It.prototype.pop=function(){return this.removeLast()},It.prototype.shift=function(){return this.removeFirst()};var Rt=It;function It(){this.start=new Tt,this.end=new Tt,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var St,Pt,Ot,Ut,Bt,xt,At="未引入消息模块",Mt=lt(15),Nt=(Object.defineProperty($t.prototype,"clientIP",{get:function(){var kt;return((kt=this.connection)==null?void 0:kt.clientIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"timeOffset",{get:function(){var kt;return(kt=this.connection)==null?void 0:kt.timeOffset},enumerable:!1,configurable:!0}),$t.prototype.init=function(){var kt;(kt=this.connection)!=null&&kt.init()},$t.prototype.unInit=function(){var kt;(kt=this.connection)!=null&&kt.unInit()},$t.prototype.setAppInfo=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setAppInfo(kt)},$t.prototype.setUserInfo=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setUserInfo(kt)},$t.prototype.setNetAgentDefaultServers=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setNetAgentDefaultServers(kt)},$t.prototype.setBackupDomains=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setBackupDomains(kt)},$t.prototype.setDispatchConnectServers=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setDispatchConnectServers(kt)},$t.prototype.setNetAgentSpecifiedServers=function(kt){var Gt;(Gt=this.connection)!=null&&Gt.setNetAgentSpecifiedServers(kt)},$t.prototype.startHttpRequest=function(kt,Gt,Wt,tr,Qt){var gr;(gr=this.connection)!=null&&gr.startHttpRequest(kt,Gt,Wt,tr,Qt)},$t.prototype.getAppConfigByAgent=function(kt,Gt,Wt){var tr;return(tr=this.connection)==null?void 0:tr.getAppConfigByAgent(kt,Gt,Wt)},$t.prototype.getPCRequest=function(kt,Gt){var Wt;return((Wt=this.connection)==null?void 0:Wt.getPCRequest(kt,Gt))||null},$t.prototype.connectUa=function(){var kt;(kt=this.connection)!=null&&kt.connectUa()},$t.prototype.destroyConnect=function(){var kt;(kt=this.connection)!=null&&kt.destroyConnect()},$t.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},$t.prototype.on=function(kt,Gt){var Wt;return((Wt=this.connection)==null?void 0:Wt.on(kt,Gt))||!0},$t.prototype.off=function(kt,Gt){var Wt;return(Wt=this.connection)==null?void 0:Wt.off(kt,Gt)},$t.prototype.setLogger=function(kt){var Gt;return(Gt=this.connection)==null?void 0:Gt.setLogger(kt)},$t.prototype.setAccess=function(kt){var Gt;return(Gt=this.connection)==null?void 0:Gt.setAccess(kt)},$t);function $t(){this.isLoad=!1,this.callBackList=[],this.connection=new Mt.ZegoConnectionAgent}(at=St=St||{})[at.AUTO=0]="AUTO",at[at.MANUAL=1]="MANUAL",(at=Pt=Pt||{})[at.EMPTY=0]="EMPTY",at[at.CLOSE=1]="CLOSE",(at=Ot=Ot||{})[at.Mode_UNSET=0]="Mode_UNSET",at[at.MODE_ONLINE=1]="MODE_ONLINE",at[at.MODE_TEST=2]="MODE_TEST",at[at.MODE_ALPHA=3]="MODE_ALPHA",(at=Ut=Ut||{})[at.CLOSE=0]="CLOSE",at[at.TEMP=1]="TEMP",at[at.TIMEOUT=2]="TIMEOUT",(at=Bt=Bt||{})[at.SERVICE_UNSET=0]="SERVICE_UNSET",at[at.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",at[at.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",at[at.SERVICE_MIX=3]="SERVICE_MIX",at[at.SERVICE_ZEUS=4]="SERVICE_ZEUS",at[at.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",at[at.SERVICE_L3=6]="SERVICE_L3",at[at.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",at[at.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",at[at.SERVICE_ZIM=9]="SERVICE_ZIM",at[at.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",at[at.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",at[at.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",at[at.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",at[at.SERVICE_QUALITY=14]="SERVICE_QUALITY",at[at.SERVICE_SECURITY=15]="SERVICE_SECURITY",at[at.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",at[at.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",at[at.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",at[at.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",at[at.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",at[at.SERVICE_CDN=21]="SERVICE_CDN",at[at.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",at[at.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",at[at.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",at[at.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",at[at.SERVICE_ECHO=26]="SERVICE_ECHO",at[at.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",at[at.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(at=xt=xt||{}).Logining="LOGINING",at.Logined="LOGINED",at.LoginFailed="LOGIN_FAILED",at.Reconnecting="RECONNECTING",at.Reconnected="RECONNECTED",at.ReconnectFailed="RECONNECT_FAILED",at.Kickout="KICKOUT",at.Logout="LOGOUT",at.LogoutFailed="LOGOUT_FAILED";var Ft={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}},jt=(zt.base64encode=function(kt){for(var Gt,Wt,tr,Qt=kt.length,gr=0,Tr="";gr<Qt;){if(Gt=255&kt.charCodeAt(gr++),gr==Qt){Tr=(Tr+=zt.base64EncodeChars.charAt(Gt>>2))+zt.base64EncodeChars.charAt((3&Gt)<<4)+"==";break}if(Wt=kt.charCodeAt(gr++),gr==Qt){Tr=(Tr=(Tr+=zt.base64EncodeChars.charAt(Gt>>2))+zt.base64EncodeChars.charAt((3&Gt)<<4|(240&Wt)>>4))+zt.base64EncodeChars.charAt((15&Wt)<<2)+"=";break}tr=kt.charCodeAt(gr++),Tr=(Tr=(Tr=(Tr+=zt.base64EncodeChars.charAt(Gt>>2))+zt.base64EncodeChars.charAt((3&Gt)<<4|(240&Wt)>>4))+zt.base64EncodeChars.charAt((15&Wt)<<2|(192&tr)>>6))+zt.base64EncodeChars.charAt(63&tr)}return Tr},zt.base64decode=function(kt){for(var Gt,Wt,tr,Qt,gr=kt.length,Tr=0,kr="";Tr<gr;){for(;Gt=zt.base64DecodeChars[255&kt.charCodeAt(Tr++)],Tr<gr&&Gt==-1;);if(Gt==-1)break;for(;Wt=zt.base64DecodeChars[255&kt.charCodeAt(Tr++)],Tr<gr&&Wt==-1;);if(Wt==-1)break;kr+=String.fromCharCode(Gt<<2|(48&Wt)>>4);do if((tr=255&kt.charCodeAt(Tr++))==61)return kr;while(tr=zt.base64DecodeChars[tr],Tr<gr&&tr==-1);if(tr==-1)break;kr+=String.fromCharCode((15&Wt)<<4|(60&tr)>>2);do if((Qt=255&kt.charCodeAt(Tr++))==61)return kr;while(Qt=zt.base64DecodeChars[Qt],Tr<gr&&Qt==-1);if(Qt==-1)break;kr+=String.fromCharCode((3&tr)<<6|Qt)}return kr},zt.utf16to8=function(kt){for(var Gt,Wt="",tr=kt.length,Qt=0;Qt<tr;Qt++)1<=(Gt=kt.charCodeAt(Qt))&&Gt<=127?Wt+=kt.charAt(Qt):Wt=2047<Gt?(Wt=(Wt+=String.fromCharCode(224|Gt>>12&15))+String.fromCharCode(128|Gt>>6&63))+String.fromCharCode(128|Gt>>0&63):(Wt+=String.fromCharCode(192|Gt>>6&31))+String.fromCharCode(128|Gt>>0&63);return Wt},zt.utf8to16=function(kt){for(var Gt,Wt,tr,Qt="",gr=kt.length,Tr=0;Tr<gr;)switch((Gt=kt.charCodeAt(Tr++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Qt+=kt.charAt(Tr-1);break;case 12:case 13:Wt=kt.charCodeAt(Tr++),Qt+=String.fromCharCode((31&Gt)<<6|63&Wt);break;case 14:Wt=kt.charCodeAt(Tr++),tr=kt.charCodeAt(Tr++),Qt+=String.fromCharCode((15&Gt)<<12|(63&Wt)<<6|(63&tr)<<0)}return Qt},zt.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zt.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],zt);function zt(){}at=lt(3);var Yt=lt.n(at),Kt=(at=lt(6),lt.n(at)),er=function(){return(er=Object.assign||function(kt){for(var Gt,Wt=1,tr=arguments.length;Wt<tr;Wt++)for(var Qt in Gt=arguments[Wt])Object.prototype.hasOwnProperty.call(Gt,Qt)&&(kt[Qt]=Gt[Qt]);return kt}).apply(this,arguments)},ir=["00","01","02","03","04","05","06","07","08","09"],rr=(lr.checkConfigParam=function(kt,Gt,Wt){return kt&&typeof kt=="number"&&this.checkInteger(kt)?!(!Gt||typeof Gt!="string"&&!Array.isArray(Gt)||Gt=="")||(Wt.error("ccp.0 server must be string or string array and not empty"),!1):(Wt.error("ccp.0 appid must be positive integer number and not empty"),!1)},lr.checkPriConfigParam=function(kt,Gt,Wt,tr,Qt){return kt&&typeof kt=="number"&&this.checkInteger(kt)?Gt&&typeof Gt=="string"?typeof Wt!="object"||typeof Wt.deviceID!="string"?(Qt.error("ccp.0 deviceID must be string and not empty"),!1):tr===1||tr===0||(Qt.error("ccp.0 anType must be 0 or 1"),!1):(Qt.error("ccp.0 dispatchServer must be string and not empty"),!1):(Qt.error("ccp.0 appid must be positive integer number and not empty"),!1)},lr.checkIllegalCharacters=function(kt){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(kt)&&/^[^:/]*$/g.test(kt)},lr.isUrl=function(kt){return!!(kt.startsWith("rtmp://")||kt.startsWith("https://")&&kt.endsWith(".flv")||kt.startsWith("https://")&&kt.endsWith(".m3u8"))},lr.registerCallback=function(kt,Gt,Wt){var tr;Gt.success&&(tr=Gt.success,Wt[kt+"SuccessCallback"]=tr),Gt.error&&(tr=Gt.error,Wt[kt+"ErrorCallback"]=tr)},lr.actionErrorCallback=function(kt,Gt){return Gt[kt+"ErrorCallback"]},lr.actionSuccessCallback=function(kt,Gt){return Gt[kt+"SuccessCallback"]},lr.logReportCallback=function(kt,Gt,Wt,tr){lr.registerCallback(kt,{success:function(Qt,gr){for(var Tr=[],kr=2;kr<arguments.length;kr++)Tr[kr-2]=arguments[kr];lr.dataReportEvent(Gt,Wt,Qt,gr,Tr)}},tr)},lr.proxyRes=function(kt,Gt,Wt,tr){return{interResolve:function(Qt){kt.uploadReport(Gt),Wt(Qt)},interReject:function(Qt,gr){var Tr;gr===void 0&&(gr=""),(Tr=Qt.code<2e9&&1e9<Qt.code?lr.decodeServerError(Qt.code,Qt.msg):{code:Qt.code,message:Qt.msg})&&kt.addMsgInfo(Gt,{error:Tr.code,message:Tr.message+gr}),kt.uploadReport(Gt),tr({errorCode:Qt.code||Qt.errorCode})}}},lr.getServerError=function(kt){var Gt={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(kt===0)return Ft.SUCCESS;var Wt,tr=er({},Ft.ROOM_INNER_ERROR);return tr.code=kt,tr.msg=1e9<kt?(Wt=Gt[kt])?"liveroom cmd error, code: "+kt+", message: "+Wt:Gt[1e9]+kt:Gt[kt]?Gt[kt]+" code:"+kt:"unknown error code:"+kt,tr},lr.unregisterCallback=function(kt,Gt){delete Gt[kt+"SuccessCallback"],delete Gt[kt+"ErrorCallback"]},lr.decodeServerError=function(kt,Gt){var Wt={code:-1,message:"server error"};return Wt.code=1e9<kt?kt-1e9+52e6:kt+2002e6,Gt&&(Wt.message=Gt),Wt},lr.getLiveRoomError=function(kt,Gt){var Wt={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return Gt?2e5<kt&&kt<3e5?Wt[kt-2e5]:kt<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[kt]||Wt[kt]||"ROOM_INNER_ERROR":Wt[kt]||"ROOM_INNER_ERROR":1e9<kt?Wt[kt-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[kt]||"ROOM_INNER_ERROR"},lr.getKickoutError=function(kt,Gt){var Wt={code:kt,message:"kickout reason = "+kt};if(Gt)switch(kt){case 1:Wt.code=63000001,Wt.message="zpush multiple login kickout",Wt.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:Wt.code=63000002,Wt.message="zpush manual kickout",Wt.name="MANUAL_KICKOUT";break;case 4:Wt.code=63000005,Wt.message="zpush token expired",Wt.name="TOKEN_EXPIRED";break;default:Wt.code=kt,Wt.message="kickout reason = "+kt}else switch(kt){case 1:Wt.code=63000001,Wt.message="zpush multiple login kickout",Wt.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:Wt.code=63000002,Wt.message="zpush manual kickout",Wt.name="MANUAL_KICKOUT";break;case 3:Wt.code=63000003,Wt.message="kickout reason = "+kt;break;case 4:Wt.code=63000004,Wt.message="zpush multiple login kickout",Wt.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:Wt.code=63000005,Wt.message="zpush token expired",Wt.name="TOKEN_EXPIRED";break;default:Wt.code=kt,Wt.message="kickout reason = "+kt}return Wt},lr.dataReportEvent=function(kt,Gt,Wt,tr,Qt){switch(Wt){case"eventStart":kt.eventStart(Gt,tr);break;case"eventEndWithMsgInfo":kt.eventEndWithMsgInfo(Gt,tr,Qt[0]);break;case"addEventMsg":kt.addEventMsg(Gt,tr,Qt[0],Qt[1]);break;case"addEvent":kt.addEvent(Gt,tr);break;case"eventEnd":kt.eventEnd(Gt,tr);break;case"addMsgInfo":kt.addMsgInfo(Gt,Qt[0])}},lr.isKeepTryLogin=function(kt){switch(kt){case 1002:case 1003:return!0;default:return!1}},lr.mergeUserList=function(kt,Gt,Wt,tr){kt.debug("msl.0 call");var Qt=[],gr=[];Wt=Wt||[];for(var Tr=0;Tr<Wt.length;Tr++){for(var kr=!1,Wr=0;Wr<Gt.length;Wr++)if(Wt[Tr].userID===Gt[Wr].userID){kr=!0;break}kr||Qt.push(Wt[Tr])}for(var Dr=0;Dr<Gt.length;Dr++){kr=!1;for(var Mr=0;Mr<Wt.length;Mr++)if(Gt[Dr].userID===Wt[Mr].userID){kr=!0;break}kr||gr.push(Gt[Dr])}for(Gt.splice(0),Tr=0;Tr<Wt.length;Tr++)Gt.push(Gt[Tr]);tr(Qt,gr),kt.debug("msl.0 call success")},lr.checkInteger=function(kt,Gt){return Gt==0?typeof kt=="number"&&kt%1==0&&0<=kt:typeof kt=="number"&&kt%1==0&&0<kt},lr.checkValidNumber=function(kt,Gt,Wt){return Gt=Gt||1,Wt=Wt||1e4,typeof kt=="number"&&kt%1==0&&Gt<=kt&&kt<=Wt},lr.generateRandumNumber=function(kt){return parseInt(Math.random()*(kt+1)+"",10)},lr.uuid=function(kt,Gt){var Wt,tr,Qt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),gr=[];if(Gt=Gt||Qt.length,kt)for(Wt=0;Wt<kt;Wt++)gr[Wt]=Qt[0|Math.random()*Gt];else for(gr[8]=gr[13]=gr[18]=gr[23]="-",gr[14]="4",Wt=0;Wt<36;Wt++)gr[Wt]||(tr=0|16*Math.random(),gr[Wt]=Qt[Wt==19?3&tr|8:tr]);return gr.join("")},lr.compareVersion=function(kt,Gt){kt=kt.split("."),Gt=Gt.split(".");for(var Wt=Math.max(kt.length,Gt.length);kt.length<Wt;)kt.push("0");for(;Gt.length<Wt;)Gt.push("0");for(var tr=0;tr<Wt;tr++){var Qt=parseInt(kt[tr]),gr=parseInt(Gt[tr]);if(gr<Qt)return 1;if(Qt<gr)return-1}return 0},lr.getBrowser=function(){var kt=window.navigator.userAgent,Gt=window.ActiveXObject!=null&&kt.indexOf("MSIE")!=-1,Wt=kt.indexOf("Firefox")!=-1,tr=window.opr!=null,Qt=kt.indexOf("Chrome")&&window.chrome;return kt=kt.indexOf("Safari")!=-1&&kt.indexOf("Version")!=-1,Gt?"IE":Wt?"Firefox":tr?"Opera":Qt?"Chrome":kt?"Safari":"Unkown"},lr.isTestEnv=function(kt){return!(!kt.startsWith("wss")||kt.indexOf("test")===-1||!kt.endsWith("ws"))},lr.getLogLevel=function(kt){return Et[kt]},lr.getUint64=function(kt,Gt,Wt){var tr=Wt.getUint32(kt,Gt);return Wt=Wt.getUint32(kt+4,Gt),kt=Gt?tr+Math.pow(2,32)*Wt:Math.pow(2,32)*tr+Wt,Number.isSafeInteger(kt)||console.warn(kt,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),kt},lr.decodeTokenExpire=function(kt){try{var Gt,Wt=Uint8Array.from(jt.base64decode(kt),function(Qt){return Qt.charCodeAt(0)}),tr=new DataView(Wt.buffer);return 0<(Gt=typeof tr.getBigInt64=="function"?tr.getBigUint64(0):lr.getUint64(0,!1,tr))?Number(Gt):Number(tr.getBigUint64(0,!0))}catch{console.error("token error")}return-1},lr.bin2hex=function(kt){for(var Gt,Wt="",tr=0,Qt=(kt+="").length;tr<Qt;tr++)Wt+=(Gt=kt.charCodeAt(tr).toString(16)).length<2?"0"+Gt:Gt;return Wt},lr.getCanvasFingerprint=function(kt){var Gt=document.createElement("canvas"),Wt=((Wt=Gt.getContext("2d")).textBaseline="top",Wt.font="14px 'Arial'",Wt.fillStyle="#f60",Wt.fillRect(125,1,62,20),Wt.fillStyle="#069",Wt.fillText(kt,2,15),Wt.fillStyle="rgba(102, 204, 0, 0.7)",Wt.fillText(kt,4,17),Gt.toDataURL().replace("data:image/png;base64,",""));return kt=atob(Wt),this.bin2hex(kt.slice(-16,-12))},lr.generateUUID=function(kt){var Gt,Wt;return(kt=kt===void 0?0:kt)===0?Wt=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),Wt||(Gt=new Date().getTime(),Wt="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(tr){var Qt=(Gt+16*Math.random())%16|0;return Gt=Math.floor(Gt/16),(tr=="x"?Qt:3&Qt|8).toString(36)}),kt===0?(kt=this.getCanvasFingerprint("hello, zego")+Wt.slice(8),localStorage.setItem("z_deviceID",kt)):wx.setStorageSync("z_deviceID",Wt),Wt)},lr.getNetType=function(){var kt=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((kt==null?void 0:kt.effectiveType)||(kt==null?void 0:kt.type)||"unknwon").toUpperCase()},lr.getNetTypeNum=function(){var kt;return kt=-1<(kt=(((kt=navigator.connection||navigator.mozConnection||navigator.webkitConnection)==null?void 0:kt.effectiveType)||(kt==null?void 0:kt.type)||"unknwon").toUpperCase()).indexOf("4G")?ft.NT_4G:-1<kt.indexOf("2G")?ft.NT_2G:-1<kt.indexOf("3G")?ft.NT_3G:-1<kt.indexOf("WIFI")?ft.NT_WIFI:-1<kt.indexOf("LINE")?ft.NT_LINE:-1<kt.indexOf("NONE")?ft.NT_NONE:ft.NT_UNKNOWN},lr.encryptStores=function(kt,Gt){return Yt.a.encrypt(kt,Gt).toString()},lr.decryptStores=function(kt,Gt){try{return Yt.a.decrypt(kt,Gt).toString(Kt.a)}catch{return""}},lr.getCurrentTime=function(){var kt=new Date;return[kt.getFullYear()+"/",(ir[kt.getMonth()+1]||kt.getMonth()+1)+"/",(ir[kt.getDate()]||kt.getDate())+" ",(ir[kt.getHours()]||kt.getHours())+":",(ir[kt.getMinutes()]||kt.getMinutes())+":",ir[kt.getSeconds()]||kt.getSeconds(),"."+kt.getTime()%1e3].join("")},lr.isRightServerForAppid=function(kt,Gt){return!(kt=((kt==null?void 0:kt.replace("webliveroom","-"))||"").split("-")||[])[1]||!/\d*/i.test(kt[1])||+kt[1]==Gt},lr);function lr(){}var nr,hr={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],ONLINE:!1},vr={product:"rtc_web",importLevel:ut.H,levels:[0,10,100,1e3],bps:32e3},yr="init",Cr="0c9e6e0f8c0a8f4e",or="z_net_access_servers",ur="z_appconfig",pr={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],primaryDomains:["zego.im","coolzcloud.com","zegocloud.com"],mode:"online",modeNo:Ot.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1};Er.prototype.init=function(kt,Gt,Wt,tr){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,typeof kt=="number"&&kt<3600&&(this.RETRY_MAX_TIME=kt),typeof Gt=="number"&&(this.RETRY_START_TIME_INTERVAL=Gt),typeof Wt=="number"&&(this.RETRY_CONTINUE_COUNT=Wt),typeof tr=="number"&&(this.RETRY_MAX_TIME_INTERVAL=tr)},Er.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},at=Er;function Er(kt,Gt){this.logger=kt,this.stateCenter=Gt,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function Sr(kt){return kt}function Ht(kt){return kt}function qt(kt){return kt}function fr(kt){return kt}(zr=nr=nr||{}).RTM_CONSTRUCTOR="zm.0",zr.RTM_BIND_WINDOW_LISTENER="zm.wl",zr.RTM_SET_LOG_CONFIG="zm.slf",zr.RTM_SET_DEBUG_VERBOSE="zm.sdv",zr.RTM_LOGIN_ROOM="zm.lg",zr.RTM_LOGOUT_ROOM="zm.lo",zr.RTM_GET_SETTING_UNIFY="zm.gsu",zr.RTM_FETCH_APP_CONFIG="zm.fac",zr.RTM_HANDLE_LOG_UPLOAD="zm.hlu",zr.RTM_SET_ACCESS="zm.sa",zr.RTM_CREATENETAGENT="zm.cna",zr.RTM_GETSTOREAPPCONFIG="zm.gsac",zr.LIVEROOMMODULES_BINDROOMHANDLER="zm.lrm.brh",zr.RTM_SET_CLOUD_SETTING_URLS="zm.scsu",zr.RTM_CLOUD_REPORT_NOTIFY="zm.crn",zr.RTM_ON="zm.on",zr.RTM_OFF="zm.off",zr.RTM_RENEWTOKEN="zm.rntk",zr.RTM_RESETTOKENTIMER="zm.rstt",zr.RTM_ENABLE_MULTI_ROOM="zm.emr",zr.RTM_SEND_PB="zm.spb",zr.RTM_GET_HEADER="zm.gh",zr.ROOM_LOGIN_ROOM="zm.rm.lg",zr.ROOM_TRY_LOGIN="zm.rm.tl",zr.ROOM_OPEN_HANDLER="zm.rm.op",zr.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",zr.ROOM_CLOSEHANDLER="zm.rm.clh",zr.ROOM_LOGOUT="zm.rm.lo",zr.ROOM_RESET_ROOM="zm.rm.rr",zr.ROOM_DISCONNECT="zm.rm.dcn",zr.ROOM_KICK_OUT="zm.rm.kco",zr.ROOM_STATUS_CALLBACK="zm.rm.scb",zr.ROOM_RESETTOKEN_TIMER="zm.rm.rst",zr.ROOM_HANDLE_Hb_LOGOUT="zm.hhl",zr.HEARTBEAT_START="zm.hb.st",zr.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",zr.HEARTBEAT_RESET="zm.hb.rst",zr.SERVICE_START_CHECK="zm.sc.0",zr.SERVICE_STOP_CHECK="zm.sc.1",zr.SERVICE_PUSH="zm.sv.ps",zr.SERVICE_SEND="zm.sv.sd",zr.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH="zm.rrh.hlf",zr.RETRYROOMHANDLER_HANDLE_ERROR="zm.rrh.he",zr.USER_LOGIN_RSP="zm.us.lgr",zr.USER_FETCH_USER="zm.us.ftu",zr.USER_FETCH_USER_RSP="zm.us.urp",zr.USER_USER_PUSH="zm.us.uph",zr.USER_MERGE_SEQ="zm.us.mg",zr.USER_MERGE_TIMEOUT="zm.us.mto",zr.USER_MERGE="zm.us.mg",zr.USER_HB_PATCH="zm.us.pt",zr.STATE_ACTION="zm.st.at",zr.ON_LISTENER="ON_LISTENER",zr.LIVEROOMHANDLER_SENDMESSAGE="zm.lrh.sm",zr.LIVEROOMHANDLER_HANDLEPUSH="zm.lrh.hp",zr.LIVEROOMHANDLER_HANDLESWITCHPUSH="zm.lrh.hsp",zr.LIVEROOMHANDLER_PUSHUSERUPDATE="zm.lrh.puu",zr.LIVEROOMHANDLER_PUSHKICKOUT="zm.lrh.pk",zr.LIVEROOMHANDLER_GETSTREAMLIST="zm.lrh.gs",zr.LIVEROOMHANDLER_LOGIN="zm.lrh.lgi",zr.LIVEROOMHANDLER_FETCH_USER_LIST="zm.lrh.ful",zr.LIVEROOMHANDLER_LOGOUT="zm.lrh.lgo",zr.LIVEROOMHANDLER_SENDSTREAMUPDATE="zm.lrh.sru",zr.LIVEROOMHANDLER_RENEW_TOKEN="zm.lrh.rt",zr.LIVEROOMHANDLER_SENDSIGNALCMD="zm.lrh.ssc",zr.LIVEROOMHANDLER_SENDBIGROOMMESSAGE="zm.lrh.sbrm",zr.LIVEROOMHANDLER_SENDCUSTOMCOMMAND="zm.lrh.scc",zr.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE="zm.lrh.frm",zr.LIVEROOMHANDLER_SENDRELIABLEMESSAGE="zm.lrh.srm.0",zr.LIVEROOMHANDLER_SENDROOMMSG="zm.lrh.srm.1",zr.LIVEROOMHANDLER_HANDLEDISCONNECTED="zm.lrh.hd",zr.LIVEROOMHANDLER_HANDLEBROKEN="zm.lrh.hb",zr.LIVEROOMHANDLER_HANDLECONNECTED="zm.lrh.hc",zr.LIVEROOMHANDLER_RESET="zm.lrh.r.0",zr.TRACER_INIT="zm.tc.ii",zr.TRACER_LOAD_SCRIPT="zm.tc.ls";var cr={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:Ft.INPUT_PARAM},system_info:Ht,servers:function(kt){return kt},is_from_cache:fr,project:Ht,liveroom_version:Ht,biz_type:qt,lua_md5:Ht,sev_env:Ht,use_na:qt},kZMListener:{event:"listener"},kZMRoomContext:{event:"room_context"},kZMHB:{event:"room_hb"},kZMSetDebug:{event:"/sdk/set_debug",debug:Ht},kZMSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:Ft.INPUT_PARAM},log_level:function(kt){return kt},remote_log_level:Ht,log_url:Ht},kZMOnListener:{event:"/sdk/on_listener",listener:Ht,error:{INPUT_PARAM:Ft.INPUT_PARAM}},kZMOffListener:{event:"/sdk/off_listener",listener:Ht,error:{INPUT_PARAM:Ft.INPUT_PARAM}},kZMLoginRoom:{event:"/sdk/login",room_id:Ht,room_sid_string:Ht,user_state_update:qt,max_member_cnt:qt,message:Ht,token:Ht,svr_env:Ht,server:Ht,try_cnt:qt,room_mode:qt,role:qt,audience_create_room:qt,liveroom_sid_string:Ht,error:{ROOM_ID_NULL:Ft.ROOM_ID_NULL,INPUT_PARAM:Ft.INPUT_PARAM,ROOM_ID_TOO_LONG:Ft.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:Ft.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:Ft.USER_ID_NULL,USER_ID_TOO_LONG:Ft.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:Ft.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:Ft.USER_NAME_NULL,USER_NAME_TOO_LONG:Ft.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:Ft.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:Ft.LOGIN_TIMEOUT,INNER_ERROR:Ft.ROOM_INNER_ERROR,NETWORK_BROKEN:Ft.NETWORK_BROKEN}},kZMSubLogin:{event:"/sdk/sublogin",server:Ht,room_id:Ht,room_sid_string:Ht},kZMSwitchLogin:{event:"/zpush/login",sdk_zpush_sessionid_string:Ht},kZMLiveRoomEnter:{event:"/liveroom/enter"},kZegoLiveRoomConnect:{event:"/liveroom/connect"},kZMReNewToken:{event:"/sdk/renew_token",error:{INPUT_PARAM:Ft.INPUT_PARAM,NOT_LOGIN:Ft.NOT_LOGIN},token:Ht},kZMHbTimeout:{event:"/zpush/hb_timeout"},kZMLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:Ft.INPUT_PARAM,ROOM_NOT_EXIST:Ft.ROOM_NOT_EXIST},room_id:Ht,room_sid_string:Ht,is_multi:fr,is_send_cmd_net:fr,liveroom_sid_string:Ht},kZMSwitchLogout:{event:"/switch/logout_user",error:{INPUT_PARAM:Ft.INPUT_PARAM,ROOM_NOT_EXIST:Ft.ROOM_NOT_EXIST}},kZMQuitLiveroom:{event:"/liveroom/quit",error:{INPUT_PARAM:Ft.INPUT_PARAM,ROOM_NOT_EXIST:Ft.ROOM_NOT_EXIST},is_multi:fr,liveroom_sid_string:Ht,sdk_zpush_sessionid_string:Ht},kZMMultiLogout:{event:"/zpush/multi_logout_user",error:{INPUT_PARAM:Ft.INPUT_PARAM,ROOM_NOT_EXIST:Ft.ROOM_NOT_EXIST}},kZMReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:Ft.ROOM_ID_NULL,ROOM_DISCONNECT:Ft.NETWORK_BROKEN},server:Ht,try_cnt:qt},kZMTempBroken:{event:"/liveroom/tempbroken"},kZMReconnect:{event:"/sdk/reconnect",room_broken_time:qt},kZMSdkDisconnect:{event:"/sdk/disconnect"},kZMKickout:{event:"/sdk/kickout",user_id:Ht,kickout_reason:qt,need_relogin:qt,error:{}},kZMRoomHB:{event:"/liveroom/hb",room_id:Ht,room_sid_string:Ht,interval:qt,stream_seq:qt,server_user_seq:qt,error:{NOT_LOGIN:Ft.NOT_LOGIN,HB_TIMEOUT:Ft.TIMEOUT}},kZMRoomRecvUserUpdateInfo:{event:"/liveroom/recv_user_update_info",user_list_seq:qt,update_user:Sr,error:{ROOM_NOT_EXIST:Ft.ROOM_NOT_EXIST}},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"/sdk/enable_multi_room",is_multi:fr,error:{kInvalidParamError:Ft.INPUT_PARAM,kAlreadyLoginError:Ft.ALREADY_LOGIN}},kZMCloudSettingCache:{event:"/cloud_setting/cache",files:Sr},kZMCloudSettingRefresh:{event:"/cloud_setting/refresh",request_kv:Sr,files:Sr},kZMCloudSettingRequest:{event:"/cloud_setting/request",request_detail:Sr,files:Sr},kZMGetCurrentUserList:{event:"/liveroom/get_current_user_list",user_index:qt,is_time_ascend:fr,use_na:qt},kZegoConnConnect:{event:"/zegoconn/connect",connect_id:Ht,request_count:qt,events:Sr},kZegoConnDisConnect:{event:"/zegoconn/disconnect",connect_id:Ht,url:Ht,connect_duration:qt},kZegoConnDispatch:{event:"/zegoconn/auto_dispatch",domain_list:function(kt){return kt}},kZegoRequest:{event:"/zegoconn/request",req_location:Sr},kZegoSDKConfigInit:{event:"/sdk_config/init",trigger_reason:Sr,try_count:qt},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:qt,proxy_link_sources:qt,recv_time:qt,connect_stream:qt},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:qt},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:qt}};Ar=function(kt,Gt){return(Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Wt,tr){Wt.__proto__=tr}||function(Wt,tr){for(var Qt in tr)Object.prototype.hasOwnProperty.call(tr,Qt)&&(Wt[Qt]=tr[Qt])})(kt,Gt)},function(kt,Gt){if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Class extends value "+String(Gt)+" is not a constructor or null");function Wt(){this.constructor=kt}Ar(kt,Gt),kt.prototype=Gt===null?Object.create(Gt):(Wt.prototype=Gt.prototype,new Wt)}(sn,Gr=at),sn.prototype.renewLocalToken=function(kt,Gt){this.token=kt,this.room.token=this.token;var Wt=new Date().getTime(),tr=void 0;Gt&&typeof Gt=="number"?tr=1e3*Gt:typeof kt=="string"&&["03","04"].includes(kt.substring(0,2))&&(tr=1e3*rr.decodeTokenExpire(kt.substring(2))-Wt),tr&&this.roomHandler.resetTokenTimer(tr-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",kt,this.room.roomID)},sn.prototype.initRoom=function(kt,Gt,Wt,tr,Qt,gr,Tr){this.roomHandler=kt,this.roomID=Gt,this.renewLocalToken(Wt),this.user=tr,this.server=Qt,this.serverBak=gr||Qt,this.config=Tr},sn.prototype.active=function(kt){var Gt=this,Wt=(kt===void 0&&(kt=!1),this.logger.info(nr.ROOM_LOGIN_ROOM+" retry call "+((Wt=this.room)==null?void 0:Wt.roomID)),((Wt=this.loginRoomCallback)!=null&&Wt.success?cr.kZMSubLogin:cr.kZMReLoginRoom).event);if(this.subLoginSpan||(this.subLoginSpan=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.roomID},{key:Wt,par:this.roomID},Wt,!0),this.spanKey=Wt),this.roomHandler.setRunState(pt.trylogin),this.room.isMulti&&((Wt=this.stateCenter.roomModulesList.find(function(Qt){return!Qt.isMulti}))==null?void 0:Wt.runState)!==pt.login)this.logger.info(nr.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.logger.info(nr.ROOM_LOGIN_ROOM+" has actived, ignore");else{var tr=this.stateCenter.networkState==ht.offline;if(tr){if(this.logger.info(nr.ROOM_LOGIN_ROOM+" check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return void this.logger.warn(nr.ROOM_LOGIN_ROOM+" network is broken, stop retry")}else this.retryNetCount=0;this.isOverTime?this.logger.info(nr.ROOM_LOGIN_ROOM+" retry over time, stop retry"):(this.retryActiveCount==1?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(Wt=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=Wt>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:Wt),this.retryTimer=setTimeout(function(){Gt.roomHandler.login(Gt.retryActiveCount%2==1?Gt.server:Gt.serverBak,Gt.roomID,Gt.token,Gt.user,Gt.config,function(Qt){Gt.stateCenter.networkState=ht.online,Gt.handleLoginFinish(Qt)},function(Qt,gr){Gt.handleLoginFinish(!1,Qt,gr)}),Gt.retryTimer&&clearTimeout(Gt.retryTimer),Gt.retryTimer=null,tr?Gt.retryNetCount++:Gt.retryActiveCount++},kt?0:1e3*this.retryActiveInterval))}},sn.prototype.startMaxTime=function(){var kt=this;this.maxTimer||(this.logger.info(nr.ROOM_LOGIN_ROOM+" start max timer"),this.maxTimer=setTimeout(function(){kt.logger.info(nr.ROOM_LOGIN_ROOM+" over max time "+kt.RETRY_MAX_TIME+"s, stop retry"),kt.isOverTime=!0,kt.roomHandler.resetRoom(),kt.stopMaxTime(),kt.invalid(),kt.onactive(!1,Ft.LOGIN_TIMEOUT),kt.subLoginSpan&&(kt.stateCenter.reporter.spanEnd({key:kt.spanKey,par:kt.roomID},{error:Ft.LOGIN_TIMEOUT.code,message:Ft.LOGIN_TIMEOUT.msg}),kt.subLoginSpan=null),kt.loginRoomCallback.fail&&(kt.loginRoomCallback.fail(Ft.LOGIN_TIMEOUT),kt.roomHandler.disconnectedHandle(Ft.LOGIN_TIMEOUT),kt.resetCallBack())},1e3*this.RETRY_MAX_TIME))},sn.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},sn.prototype.onactive=function(kt,Gt){},sn.prototype.handleError=function(kt,Gt){if(this.RETRY_MAX_TIME<3)return!1;if(Gt){Gt=void 0;var Wt=void 0,tr=void 0,Qt=(this.stateCenter.useNetAgent?(Gt=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],Wt=["40001","40100"],tr=["201002","30019"]):(Gt=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],Wt=["1100040001","1100040100"]),kt.code+"");if(this.stateCenter.useNetAgent){if(kt.code===10015)return this.room.retryConnect(),!0;if(40001<=kt.code&&kt.code<=40100||50200<=kt.code&&kt.code<=50299||tr!=null&&tr.includes(Qt))return this.room.resetSessionInfo(),!0}return!Gt.includes(Qt)&&(!!Wt.includes(Qt)||this.room.lastRunState==pt.login&&(this.logger.warn(nr.RETRYROOMHANDLER_HANDLE_ERROR+" reset"),this.room.sessionID="0",this.invalid(),!0))}return!0},sn.prototype.setLoginRoomCallback=function(kt,Gt){this.loginRoomCallback.success=kt,this.loginRoomCallback.fail=Gt},sn.prototype.loginFail=function(kt){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,kt),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(kt),this.roomHandler.disconnectedHandle(kt),this.resetCallBack())},sn.prototype.handleLoginFinish=function(kt,Gt,Wt){this.logger.info(nr.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH+" "+kt+" "+JSON.stringify(Gt)),Gt?(this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{error:Gt.code,message:Gt.msg}),this.subLoginSpan=null),this.handleError(Gt,Wt)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(kt,Gt),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(Gt),this.roomHandler.disconnectedHandle(Gt),this.resetCallBack()))):(this.stopMaxTime(),this.invalid(),this.onactive(kt,{code:0,msg:""}),this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:(Wt=this.room)==null?void 0:Wt.roomSessionID}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(kt),this.resetCallBack()))},sn.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},sn.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var Ar,Gr,Qr,hn=sn;function sn(kt,Gt,Wt){var tr=Gr.call(this,kt,Gt)||this;return tr.logger=kt,tr.stateCenter=Gt,tr.room=Wt,tr.retryNetCount=0,tr.retryNetMaxTimes=3,tr.spanKey="",tr.loginRoomCallback={},tr}(zr=Qr=Qr||{}).NOT_EMPTY="NOT_EMPTY",zr.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",zr.TYPE_STRING="TYPE_STRING",zr.TYPE_INTEGER="TYPE_INTEGER",zr.TYPE_OBJECT="TYPE_OBJECT",zr.MAX_LENGTH_10="MAX_LENGTH_10",zr.MAX_LENGTH_64="MAX_LENGTH_64",zr.MAX_LENGTH_100="MAX_LENGTH_100",zr.MAX_LENGTH_128="MAX_LENGTH_128",zr.MAX_LENGTH_256="MAX_LENGTH_256",zr.MAX_LENGTH_1024="MAX_LENGTH_1024";var qr={error:{code:0,msg:"suc"}},dr={NOT_EMPTY:function(kt,Gt,Wt,tr,Qt){return Gt===void 0||Gt===""||Gt===null?(tr.error(Wt+" "+kt+" is empty"),Qt):qr},ILLEGAL_CHARACTERS:function(kt,Gt,Wt,tr,Qt){return rr.checkIllegalCharacters(Gt)?qr:(tr.error(Wt+" "+kt+" contains illegal characters"),Qt)},TYPE_STRING:function(kt,Gt,Wt,tr,Qt){return typeof Gt!="string"?(tr.error(Wt+" "+kt+" must be string"),Qt):qr},TYPE_INTEGER:function(kt,Gt,Wt,tr,Qt){return rr.checkInteger(Gt,!1)?qr:(tr.error(Wt+" "+kt+"  must be integer number"),Qt)},TYPE_OBJECT:function(kt,Gt,Wt,tr,Qt){return Gt&&typeof Gt=="object"?qr:(tr.error(Wt+" "+kt+"  must be object"),Qt)},MAX_LENGTH_10:function(kt,Gt,Wt,tr,Qt){return 10<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr},MAX_LENGTH_64:function(kt,Gt,Wt,tr,Qt){return 64<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr},MAX_LENGTH_100:function(kt,Gt,Wt,tr,Qt){return 100<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr},MAX_LENGTH_128:function(kt,Gt,Wt,tr,Qt){return 128<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr},MAX_LENGTH_256:function(kt,Gt,Wt,tr,Qt){return 256<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr},MAX_LENGTH_1024:function(kt,Gt,Wt,tr,Qt){return 1024<Gt.length?(tr.error(Wt+" "+kt+" is too long"),Qt):qr}};Object.defineProperty(br.prototype,"debug",{get:function(){return this._debug},set:function(kt){this._debug=kt,mt.LoggerStateCenter.getInstance().debug=kt},enumerable:!1,configurable:!0}),Object.defineProperty(br.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(kt){this._testEnvironment=kt,mt.LoggerStateCenter.getInstance().testEnvironment=kt},enumerable:!1,configurable:!0}),Object.defineProperty(br.prototype,"ENV",{get:function(){return this._env},set:function(kt){this._env=kt,mt.LoggerStateCenter.getInstance().ENV=kt},enumerable:!1,configurable:!0}),Object.defineProperty(br.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(br.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),br.prototype.getRequestId=function(){return this.idName+"-"+bt()},br.prototype.actionListener=function(kt){for(var Gt,Wt=this,tr=[],Qt=1;Qt<arguments.length;Qt++)tr[Qt-1]=arguments[Qt];["getAnchorInfo","HBResponse","roomOnlineUserCountUpdate","roomLoginResponse"].includes(kt)||kt.startsWith("_")||!this.listenerList[kt]||((Gt=this.reporter.createSpan(ut.H,{key:cr.kZMListener.event},{key:""},cr.kZegoListener.event)).setAttributes({listener:kt,listener_params:JSON.stringify(tr)}),Gt.end()),["roomStateChanged","tokenWillExpire"].includes(kt)&&this.logger.info("zm.al "+kt+" "+JSON.stringify(tr)),this.listenerList[kt]&&this.listenerList[kt].forEach(function(gr){try{gr.apply(void 0,tr)}catch(Tr){Wt.logger.error(nr.STATE_ACTION+" ",kt," ",JSON.stringify(Tr))}})},br.prototype.onListener=function(kt,Gt){return this.listenerList[kt]?typeof Gt!="function"?(this.logger.error(nr.ON_LISTENER+" listener callBack must be funciton"),!1):(this.listenerList[kt].indexOf(Gt)==-1&&this.listenerList[kt].push(Gt),!0):(this.logger.error(nr.ON_LISTENER+" event "+kt+" no found"),!1)},Object.defineProperty(br.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(kt){this._sdkVersion=kt},enumerable:!1,configurable:!0}),br.prototype.proxyRes=function(kt,Gt,Wt){return{interResolve:function(tr){Gt(tr),kt.end()},interReject:function(tr,Qt){var gr;Qt===void 0&&(Qt=""),(gr=tr.code<2e9&&1e9<tr.code?rr.decodeServerError(tr.code,tr.msg):{code:tr.code,message:tr.msg})&&kt.setAttributes({error:gr.code,message:gr.message+Qt}),kt.end(),Wt({errorCode:tr.code})}}};var mr=br;function br(kt,Gt){this.logger=kt,this.dataReport=Gt,this._debug=!1,this.appConfigFetched=!1,this.requestList={},this.mode=Ot.MODE_ONLINE,this.connectState="connected",this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=ht.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=pr.modeNo}Pr.prototype.init=function(kt){var Gt=this,Wt=kt.body.hearbeat_interval<3e3?3e3:kt.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout(function(){Gt.start(Wt)},Wt),this.initCount++},Pr.prototype.start=function(kt){var Gt,Wt=this,tr=(this.logger.info(nr.HEARTBEAT_START+" call"),this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.room.roomID},{key:""},cr.kZMRoomHB.event));this.room.isLogin()?3<++this.tryHeartbeatCount?(this.logger.error(nr.HEARTBEAT_START+" come to try limit"),this.stateCenter.reporter.setError(tr,cr.kZMRoomHB.error.HB_TIMEOUT),this.hbLogout(Ft.HEARTBEAT_TIMEOUT),this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.room.roomID},{key:""},cr.kZMHbTimeout.event).end()):((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).heartBeat(Gt=function(Qt,gr){var Tr=Qt.body&&Qt.body.err_code;Qt.header&&Qt.body?Tr!==0&&(Tr=rr.decodeServerError(Qt.body.err_code||Qt.body.code,Qt.body.err_message||Qt.body.message),tr.setAttributes({error:Tr.code,message:Tr.message+Qt.body.err_code})):tr.setAttributes({error:(0<Qt.code?Qt:Ft.ROOM_INNER_ERROR).code,message:Qt.msg||Ft.ROOM_INNER_ERROR}),Wt.handleHeartbeatRsp(Qt,gr),((Tr=Qt==null?void 0:Qt.body)==null?void 0:Tr.err_code)===0&&tr.setAttributes({interval:cr.kZMRoomHB.interval((gr=Qt==null?void 0:Qt.body)==null?void 0:gr.hearbeat_interval),stream_seq:cr.kZMRoomHB.stream_seq((Tr=Qt==null?void 0:Qt.body)==null?void 0:Tr.stream_seq),server_user_seq:cr.kZMRoomHB.server_user_seq((gr=Qt==null?void 0:Qt.body)==null?void 0:gr.server_user_seq)}),tr.end()},Gt,this.room),this.heartbeatInterval=kt,Gt=this.heartbeatInterval,2<=this.initCount?(Gt=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):Gt=this.heartbeatInterval,this.heartbeatTimer=setTimeout(function(){Wt.start(Wt.heartbeatInterval)},Gt),this.logger.info(nr.HEARTBEAT_START+" call success")):(this.logger.error(nr.HEARTBEAT_START+" state error"),this.stateCenter.reporter.setError(tr,cr.kZMRoomHB.error.NOT_LOGIN))},Pr.prototype.handleHeartbeatRsp=function(kt,Gt){if(kt.body&&kt.body.err_code&&kt.body.err_code!==0)return this.logger.error(nr.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",kt.body.err_code),kt.body.err_code==1000000152?void this.hbLogout(Ft.HEARTBEAT_TIMEOUT):void this.hbLogout(rr.getServerError(kt.body.err_code));kt.header&&kt.body?((this.tryHeartbeatCount=0)!==kt.body.hearbeat_interval&&(this.heartbeatInterval=kt.body.hearbeat_interval,this.heartbeatInterval<3e3&&(this.heartbeatInterval=3e3)),this.heartbeatRspNotiFy(kt),this.logger.info(nr.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(nr.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(kt)+", seq = "+Gt),this.hbLogout(kt))},Pr.prototype.heartbeatRspNotiFy=function(kt){},Pr.prototype.hbLogout=function(kt){},Pr.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(nr.HEARTBEAT_RESET+" call success")};var Rr=Pr;function Pr(kt,Gt,Wt,tr,Qt,gr){this.logger=kt,this.stateCenter=Gt,this.dataReport=Wt,this.service=tr,this.liveRoomHandler=Qt,this.room=gr,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}Nr.prototype.resetTokenTimer=function(kt){var Gt=this;this.logger.info(nr.ROOM_RESETTOKEN_TIMER+"  call: "+(kt=2147483647<(kt=(kt-=3e4)<0?0:kt)?2147483647:kt)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout(function(){Gt.stateCenter.actionListener("tokenWillExpire",Gt.room.roomID),Gt.stateCenter.actionListener("roomTokenWillExpire",Gt.room.roomID)},kt)},Nr.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},Nr.prototype.setRunState=function(kt){this.room.runState!==kt&&(this.room.lastRunState=this.room.runState,this.room.runState=kt)},Nr.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},Nr.prototype.reportLogoutSpan=function(kt){var Gt,Wt=(this.stateCenter.isMultiRoom?cr.kZMQuitLiveroom:cr.kZMSwitchLogout).event;Wt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLogoutRoom.event,par:this.room.roomID},{key:""},Wt),kt&&this.stateCenter.useNetAgent&&this.liveRoomHandler.roomServicer.zPushSid==="0"&&(this.liveRoomHandler.roomServicer.zPushSid=(Gt=(Gt=(Gt=this.liveRoomHandler)==null?void 0:Gt.roomServicer)==null?void 0:Gt.switchSessionID)==null?void 0:Gt.toString()),kt=this.stateCenter.useNetAgent?kt?(kt=(Gt=this.liveRoomHandler)==null?void 0:Gt.roomServicer)==null?void 0:kt.zPushSid:(Gt=(kt=(Gt=this.liveRoomHandler)==null?void 0:Gt.roomServicer)==null?void 0:kt.switchSessionID)==null?void 0:Gt.toString():void 0,Wt.setAttributes({room_id:cr.kZMLogoutRoom.room_id((Gt=this.room)==null?void 0:Gt.roomID),room_sid_string:cr.kZMLogoutRoom.room_sid_string((Gt=this.room)==null?void 0:Gt.roomSessionID),liveroom_sid_string:cr.kZMQuitLiveroom.liveroom_sid_string((Gt=this.room)==null?void 0:Gt.sessionID),sdk_zpush_sessionid_string:cr.kZMQuitLiveroom.sdk_zpush_sessionid_string(kt)}),Wt.end()},Nr.prototype.resetRoom=function(kt){var Gt,Wt=this;(kt=(this.logger.info(nr.ROOM_RESET_ROOM+" call"),1<this.stateCenter.roomModulesList.length&&!kt&&(this.room.isMulti=!0),this.resetTryLogin(),this.room.sessionID==="0"||this.room.runState===pt.logout||this.room.isDisConnect()||(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).logout(this.room,Gt=function(tr){Wt.handleLogoutRsp(tr,!Wt.room.isMulti)},Gt),this.reportLogoutSpan(kt),this.setRunState(pt.logout),this.room.sessionID="0",this.room.roomSessionID="0",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent?(Gt=this.liveRoomHandler)!=null&&Gt.reset():this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter(function(tr){return tr!==Wt.room}),this.stateCenter.roomModulesList[0]))&&(kt.isMulti=!1,kt.runState!==pt.login&&kt.roomTryHandler&&(kt.roomTryHandler.startMaxTime(),kt.roomTryHandler.active())),this.stateCenter.isMultiRoom&&this.stateCenter.roomModulesList.length===0&&(this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLogoutRoom.event,par:this.room.roomID},{key:""},cr.kZMMultiLogout.event).end(),this.liveRoomHandler.roomServicer.zPushSid="0"),this.logger.info(nr.ROOM_RESET_ROOM+" call success")},Nr.prototype.resetRoomCallBack=function(){},Nr.prototype.loginSuccessCallBack=function(kt,Gt){},Nr.prototype.handlePushKickout=function(kt,Gt,Wt){var tr,Qt,gr=this;this.logger.info(nr.ROOM_KICK_OUT+"  call "+JSON.stringify(kt)),Wt||this.room.sessionID===kt.header.session_id||this.room.sessionID===kt.body.session_id?(Wt=rr.getKickoutError(kt.body.reason||((Wt=kt.body)==null?void 0:Wt.kickout_reason),this.stateCenter.useNetAgent),(tr=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.room.roomID},{key:""},cr.kZMKickout.event)).setAttributes({error:(Qt=Ft[Wt.name||"ROOM_INNER_ERROR"])==null?void 0:Qt.code,message:Wt.message,kickout_reason:cr.kZMKickout.kickout_reason(((Qt=kt.body)==null?void 0:Qt.reason)||((Qt=kt.body)==null?void 0:Qt.kickout_reason)),need_relogin:cr.kZMKickout.need_relogin((Qt=kt==null?void 0:kt.body)==null?void 0:Qt.need_relogin)}),tr.end(),(Qt=this.room.roomTryHandler)?(Qt.onactive=function(Tr,kr){gr.disconnectedHandle(kr),gr.stateCenter.actionListener("_kickout",kr)},kt.body.need_relogin&&kt.body.need_relogin==1?(this.room.sessionID="0",Qt.startMaxTime(),Qt.active()):(this.setRunState(pt.logout),this.resetRoom(Gt),tr={},kt&&kt.body.custom_reason?tr.custom_kickout_message=kt.body.custom_reason:Wt.name&&Ft[Wt.name]&&(Qt=kt.body.reason||kt.body.kickout_reason,tr.custom_kickout_message=Ft[Wt.name].msg+"; kickout reason: "+Qt),Wt.name&&Ft[Wt.name]?this.disconnectedHandle(Ft[Wt.name],{extendedData:JSON.stringify(tr),isKickout:!0}):this.disconnectedHandle(Ft.ROOM_INNER_ERROR,{extendedData:JSON.stringify(tr),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:Ft.MANUAL_KICKOUT.code,msg:Ft.MANUAL_KICKOUT.msg+kt.body.reason||kt.body.kickout_reason}))):this.logger.info(nr.ROOM_KICK_OUT+" try handler no found")):this.logger.info(nr.ROOM_KICK_OUT+" session id wrong, ignore")},Nr.prototype.handleHbLogout=function(kt){var Gt=this,Wt=this.room.roomTryHandler;Wt&&(Wt.onactive=function(tr,Qt){Gt.disconnectedHandle(Qt)},[Ft.HEARTBEAT_TIMEOUT,Ft.SOCKET_CLOSE].includes(kt)||[105,152,2001].includes(kt==null?void 0:kt.code)||kt.msg.endsWith("1000002001")||kt.msg.endsWith("1000000152")||kt.msg.endsWith("1000000105")?(Wt.startMaxTime(),Wt.active()):[Ft.TIMEOUT].includes(kt)?this.logger.warn(nr.ROOM_HANDLE_Hb_LOGOUT+" timeout"):(this.logger.warn(nr.ROOM_HANDLE_Hb_LOGOUT+" unexpected error: "+JSON.stringify(kt)),Wt.stopMaxTime(),Wt.invalid(),this.resetRoom(),this.disconnectedHandle(kt)))},Nr.prototype.onDisconnect=function(kt){var Gt=this;(kt=(this.logger.error(nr.ROOM_DISCONNECT+" "+kt.msg),typeof kt.code=="string"&&kt.code==="Error.Network"||typeof kt.code=="number"&&(kt.code<2e9&&1e9<kt.code||kt.code<1e6?rr.decodeServerError(kt.code,kt.msg):(kt.code,kt.msg)),rr.unregisterCallback(cr.kZMReLoginRoom.event,this.stateCenter.reportList),this.room.roomTryHandler))?(kt.onactive=function(Wt,tr){tr&&tr.code!==0?Gt.roomStateHandle("DISCONNECTED",xt.ReconnectFailed,tr):Gt.roomStateHandle("CONNECTED",xt.Reconnected,tr)},kt.startMaxTime(),kt.active()):this.logger.error(nr.ROOM_DISCONNECT+" try handler no found")},Nr.prototype.onConnecting=function(kt){this.roomStateHandle("CONNECTING",xt.Logining,kt)},Nr.prototype.disconnectedHandle=function(kt,Gt){var Wt;kt&&kt.code!==0?(this.stopTokenTimer(),Wt=Gt!=null&&Gt.isKickout?xt.Kickout:xt.ReconnectFailed,this.roomStateHandle("DISCONNECTED",Wt,kt,(Gt==null?void 0:Gt.extendedData)||kt.msg)):this.roomStateHandle("CONNECTED",xt.Reconnected,kt,Gt==null?void 0:Gt.extendedData)},Nr.prototype.roomStateHandle=function(kt,Gt,Wt,tr,Qt){if(!Gt||Gt!=xt.Reconnecting||(this.reconectTimes++,this.reconectTimes!=1)){this.logger.info(nr.ROOM_STATUS_CALLBACK+" "+kt+" "+JSON.stringify(Wt)),["CONNECTED","DISCONNECTED"].includes(kt)&&(this.reconectTimes=0);var gr,Tr,kr=0;switch(Gt=(Gt=(Gt=Gt&&[xt.LoginFailed,xt.ReconnectFailed].includes(Gt)?(Tr=this.room.roomTryHandler)!=null&&Tr.loginRoomCallback.fail?xt.LoginFailed:xt.ReconnectFailed:Gt)&&[xt.Logined,xt.Reconnected].includes(Gt)?(Tr=this.room.roomTryHandler)!=null&&Tr.loginRoomCallback.success?xt.Logined:xt.Reconnected:Gt)&&[xt.Logining,xt.Reconnecting].includes(Gt)?(Tr=this.room.roomTryHandler)!=null&&Tr.loginRoomCallback.success?xt.Logining:xt.Reconnecting:Gt){case xt.Reconnecting:gr=cr.kZMTempBroken,this.tempBrokenTime=new Date().getTime();break;case xt.ReconnectFailed:gr=cr.kZMSdkDisconnect;break;case xt.Reconnected:gr=cr.kZMReconnect,kr=new Date().getTime()-this.tempBrokenTime}this.room.lastRoomState=this.room.roomState,this.room.roomState=kt,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,kt,Wt?Wt.code:0,tr,Qt),Qt||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,kt,Wt?Wt.code:0,tr),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,Gt,Wt?Wt.code:0,tr)),gr&&(Tr=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.room.roomID},{key:""},gr.event),Gt===xt.Reconnected?Tr.setAttributes({room_broken_time:cr.kZMReconnect.room_broken_time(kr)}):Tr.setAttributes({error:(Wt==null?void 0:Wt.code)||0,message:tr||""}),Tr.end()))}},Nr.prototype.login=function(kt,Gt,Wt,tr,Qt,gr,Tr){this.logger.info(nr.ROOM_LOGIN_ROOM+" call:"+Gt+" "+Wt),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,Gt,"",tr.userID,"",this.stateCenter.sdKVersion),Qt&&(Qt.userUpdate&&typeof Qt.userUpdate=="boolean"&&(this.stateCenter.userStateUpdate=Qt.userUpdate),Qt.maxMemberCount&&typeof Qt.maxMemberCount=="number"&&(this.room.maxMemberCount=Qt.maxMemberCount)),this.stateCenter.configOK?(this.room.runState!==pt.trylogin&&this.setRunState(pt.trylogin),this.room.roomID=Gt,this.room.token=Wt,this.room.thirdToken=Wt,this.stateCenter.idName=tr.userID,this.stateCenter.nickName=tr.userName||tr.userID,this.loginCallback.success=gr,this.loginCallback.fail=Tr,this.server=kt,this.stateCenter.reporter.spanSetAttributes({key:cr.kZMSubLogin.event,bak_key:cr.kZMReLoginRoom.event,par:Gt},{server:this.stateCenter.useNetAgent?void 0:cr.kZMSubLogin.server(this.server)}),this.liveRoomLoginKey=this.room.isMulti?cr.kZMLiveRoomEnter:cr.kZMSwitchLogin,this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMSubLogin.event,bak_key:cr.kZMReLoginRoom.event,par:this.room.roomID},{key:this.liveRoomLoginKey.event,par:this.room.roomID},this.liveRoomLoginKey.event,!0),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(kt),this.logger.info(nr.ROOM_LOGIN_ROOM+" call success")):(this.logger.error(nr.ROOM_LOGIN_ROOM+" init sdk wrong"),Tr(Ft.INIT))},Nr.prototype.tryLogin=function(kt){var Gt,Wt=this;if(this.room.runState!==pt.trylogin)this.logger.error("zb.rh.tl state error");else if((this.stateCenter.reportSeqList.login!==0?cr.kZMLoginRoom:cr.kZMReLoginRoom).event,this.stateCenter.useNetAgent)this.room.isMulti&&this.room.isDisConnect()?this.logger.warn(nr.ROOM_TRY_LOGIN+" liveroom is not connected"):(Qt=function(gr,Tr){Wt.handleLoginRsp(gr,Tr)},(Gt=this.liveRoomHandler)!=null&&Gt.isUaConnect()?(this.stateCenter.reporter.spanSetAttributes({key:this.liveRoomLoginKey.event,par:(Gt=this.room)==null?void 0:Gt.roomID},{sdk_zpush_sessionid_string:(Gt=(Gt=(Gt=this.liveRoomHandler)==null?void 0:Gt.roomServicer)==null?void 0:Gt.switchSessionID)==null?void 0:Gt.toString()}),this.liveRoomHandler.login(this.room,Qt,Qt)):(this.tryLoginTimer=setTimeout(function(){Wt.logger.info(nr.ROOM_TRY_LOGIN+" over time no response, login timeout"),Wt.loginCallback.fail&&Wt.loginCallback.fail(cr.kZMLoginRoom.error.LOGIN_TIMEOUT)},this.tryLoginInterval),this.logger.warn(nr.ROOM_TRY_LOGIN+" ua is not connected")));else{if(this.service.isDisConnect())try{if(this.service.closeSocket(),this.logger.debug(nr.ROOM_TRY_LOGIN+" new websocket"),!this.stateCenter.useNetAgent&&!rr.isRightServerForAppid(kt,this.stateCenter.appid))throw this.logger.error(nr.ROOM_TRY_LOGIN+" the server does not match the appID"),new Error("The server does not match the appID");this.service.createSocket(kt);var tr=Date.now();this.service.openHandler(function(){var gr;Wt.stateCenter.reporter.spanSetAttributes({key:Wt.liveRoomLoginKey.event,par:(gr=Wt.room)==null?void 0:gr.roomID},{connect_consume:Date.now()-tr}),Wt.openHandler()}),this.service.closeHandler(function(gr){Wt.logger.error(nr.ROOM_TRY_LOGIN+" close "+JSON.stringify(gr.code||gr)),Wt.service.closeSocket(),Wt.closeHandler(gr)}),this.service.errorHandler(function(gr){Wt.logger.error(nr.ROOM_TRY_LOGIN+" error "+JSON.stringify(gr.code||gr)),Wt.service.closeSocket(),Wt.closeHandler(gr)})}catch(gr){this.logger.error(nr.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(gr))}else{this.logger.info(nr.ROOM_TRY_LOGIN+" use current websocket and sent login");var Qt=function(gr,Tr){Wt.handleLoginRsp(gr,Tr)};this.service.login(this.room,Qt,Qt)}this.tryLoginTimer=setTimeout(function(){Wt.logger.info(nr.ROOM_TRY_LOGIN+" over time no response, login timeout"),Wt.loginCallback.fail&&Wt.loginCallback.fail(cr.kZMLoginRoom.error.LOGIN_TIMEOUT)},this.tryLoginInterval),this.logger.info(nr.ROOM_TRY_LOGIN+" call success")}},Nr.prototype.openHandler=function(){function kt(Wt,tr){Gt.handleLoginRsp(Wt,tr)}var Gt=this;this.logger.info(nr.ROOM_OPEN_HANDLER+" websocket.onpen call"),this.service.onPush(),this.service.login(this.room,kt,kt)},Nr.prototype.handleLoginRsp=function(kt,Gt){this.logger.info(nr.ROOM_HANDLE_LOGINRSP+" seq: "+Gt+" "+JSON.stringify(kt)),(this.stateCenter.reportSeqList.login!==0?cr.kZMLoginRoom:cr.kZMReLoginRoom).event,this.room.runState!==pt.trylogin?this.logger.error(nr.ROOM_HANDLE_LOGINRSP+" state error"):kt.header&&kt.body?kt.header.seq!==Gt&&this.room.isMulti==0?this.logger.error(nr.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",Gt+"",",recv=",kt.header.seq):kt.body.err_code!==0?(this.logger.error(nr.ROOM_HANDLE_LOGINRSP+" server error=",kt.body.err_code),this.handleLoginFail(kt)):(this.logger.info(nr.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(kt)):(this.logger.error(nr.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(kt)),this.handleLoginFail(kt))},Nr.prototype.handleLoginFail=function(kt){this.resetTryLogin();var Gt=cr.kZMLoginRoom.error.INNER_ERROR;kt.header&&kt.body?Gt=rr.getServerError(kt.body.err_code):kt.code&&kt.msg&&(Gt=kt),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{error:Gt.code,message:Gt.msg}),this.loginCallback.fail&&this.loginCallback.fail(Gt,!0)},Nr.prototype.handleLoginSuccess=function(kt){var Gt,Wt,tr={},Qt=(this.room.roomSessionID!==kt.body.room_session_id&&(this.room.loginTime=Date.now()),this.room.lastRunState),gr=(this.setRunState(pt.login),this.stateCenter.userid=kt.body.user_id,this.room.sessionID=kt.body.session_id,this.room.roomSessionID=kt.body.room_session_id,(gr={})[this.room.roomID]={room_sid_string:this.room.roomSessionID},this.stateCenter.reporter.setPublicPros(gr),this.room.lvKey=kt.body.lv_key,(gr=kt==null?void 0:kt.body)==null?void 0:gr.token_remain_time);this.stateCenter.configRoomAuth=0<gr,kt.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(Wt=(Gt=new Date().getTime())-kt.body.ret_timestamp,this.stateCenter.local_time_deviation=Wt<5e3?0:Wt,Wt=0<gr?1e3*gr:1e3*rr.decodeTokenExpire(this.room.token.substring(2))-Gt,this.resetTokenTimer(Wt-this.stateCenter.local_time_deviation)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent||(kt.body.config_info&&(gr=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||kt.body.config_info.log_level,this.logger.setRemoteLogLevel(gr),tr.log_level=gr,kt.body.config_info.log_url==""||this.logger.url||(this.logger.setLogServer(kt.body.config_info.log_url),this.stateCenter.ENV===0&&(this.stateCenter.logDomain=(Gt=this.logger.url)==null?void 0:Gt.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),tr.log_url=kt.body.config_info.log_url)),kt.body.cluster_env&&kt.body.cluster_env===1&&(this.stateCenter.testEnvironment=!0,tr.test_environment="true",this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{server:this.stateCenter.useNetAgent?void 0:cr.kZMSubLogin.server(this.server),room_id:(Wt=this.room)==null?void 0:Wt.roomID,room_sid_string:(gr=this.room)==null?void 0:gr.roomSessionID,zpush_sessionid_string:this.stateCenter.useNetAgent&&(tr=(Gt=kt==null?void 0:kt.header)==null?void 0:Gt.session_id)!=null?tr.toString():void 0,liveroom_sid_string:(Wt=kt==null?void 0:kt.body)==null?void 0:Wt.session_id}),this.resetTryLogin(),this.loginSuccessCallBack(Qt,kt),this.roomStateHandle("CONNECTED",xt.Logined,{code:0,msg:""}),this.loginCallback.success&&this.loginCallback.success(!0)},Nr.prototype.closeHandler=function(kt){this.logger.error(nr.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(kt.code||kt)),this.room.runState!==pt.logout?this.room.runState===pt.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(kt.code==1006?cr.kZMLoginRoom.error.LOGIN_TIMEOUT:kt)):this.room.runState===pt.login&&(this.logger.info(nr.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(cr.kZMLoginRoom.error.NETWORK_BROKEN)):this.logger.info(nr.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},Nr.prototype.logout=function(kt,Gt){this.logger.info(nr.ROOM_LOGOUT+" call"),this.room.runState===pt.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(kt),this.roomStateHandle("DISCONNECTED",xt.Logout,{code:0,msg:""},void 0,Gt),this.stopTokenTimer(),this.logger.info(nr.ROOM_LOGOUT+" call success"))},Nr.prototype.handleLogoutRsp=function(kt,Gt){this.logger.info(nr.ROOM_LOGOUT+" result=",kt.body&&kt.body.err_code?kt.body.err_code:"-1"),this.stateCenter.useNetAgent&&Gt&&(kt=this.liveRoomHandler)!=null&&kt.closeRequest()};var Or=Nr;function Nr(kt,Gt,Wt,tr,Qt,gr){this.logger=kt,this.stateCenter=Gt,this.dataReport=Wt,this.service=tr,this.room=Qt,this.liveRoomHandler=gr,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.server="",this.tempBrokenTime=0,this.reconectTimes=0,this.loginCallback={}}var Br=function(kt,Gt){for(var Wt=0,tr=Gt.length,Qt=kt.length;Wt<tr;Wt++,Qt++)kt[Qt]=Gt[Wt];return kt},jr=($r.prototype.loginRsp=function(kt,Gt){this.anchor_info=kt.body.anchor_info||this.anchor_info,this.userListInterval=kt.body.userlist_interval||this.userListInterval,this.userListMergeInterval=kt.body.userlist_merge_timeout||this.userListMergeInterval,kt.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",kt.body.anchor_info.anchor_id_name,kt.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",kt.body.anchor_info.anchor_id_name,kt.body.anchor_info.anchor_nick_name)),kt.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,kt.body.online_count),this.logger.info(nr.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(Gt)},$r.prototype.patchUserList=function(kt){var Gt=this;kt.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(nr.USER_HB_PATCH+" call update user "+this.userSeq+" server "+kt.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout(function(){Gt.handleMergeTimeout()},this.userListMergeInterval)),this.minUserSeq=kt.body.server_user_seq,kt.body.online_count!=null&&kt.body.online_count!=0&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,kt.body.online_count)},$r.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},$r.prototype.fetchUserList=function(kt){this.userQuerying?this.logger.warn(nr.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,kt||0),this.logger.info(nr.USER_FETCH_USER+" the first time call"))},$r.prototype.fetchUserListWithPage=function(kt,Gt){function Wt(Tr){tr.handleFetchUserListRsp(Tr,Gt)}var tr=this,Qt={user_index:kt,sort_type:0},gr=cr.kZMGetCurrentUserList;this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:this.room.roomID},{key:gr.event,par:this.room.roomID},gr.event,!0).setAttribute("user_index",gr.user_index(kt)),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchUserList(Qt,Wt,Wt,this.room)},$r.prototype.handleFetchUserListRsp=function(kt,Gt){var Wt=this;if(this.stateCenter.reporter.spanEnd({key:cr.kZMGetCurrentUserList.event,par:this.room.roomID},{error:((tr=kt==null?void 0:kt.body)==null?void 0:tr.err_code)||(kt==null?void 0:kt.code),message:((tr=kt==null?void 0:kt.body)==null?void 0:tr.err_message)||(kt==null?void 0:kt.msg)}),kt.body&&kt.body.err_code!=0)this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(nr.USER_FETCH_USER_RSP+" fetch error "+kt.body.err_code);else if(kt.header&&kt.body){if(this.stateCenter.userStateUpdate){this.userTempList=Br(Br([],this.userTempList),kt.body.user_baseinfos);var tr=kt.body.ret_user_index;if(tr!=kt.body.server_user_index)this.logger.info(nr.USER_FETCH_USER_RSP+" fetch another page"),this.fetchUserListWithPage(tr+1,Gt);else{this.userSeq=kt.body.server_user_seq;for(var Qt=[],gr=[],Tr=0;Tr<this.userTempList.length;Tr++){var kr={userID:this.userTempList[Tr].id_name,userName:this.userTempList[Tr].nick_name,role:this.userTempList[Tr].role};Qt.push(kr),gr.push({idName:this.userTempList[Tr].id_name,nickName:this.userTempList[Tr].nick_name,role:this.userTempList[Tr].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,gr),Gt==pt.login?(this.userList&&rr.mergeUserList(this.logger,this.userList,Qt,function(Wr,Dr){Wr.length!==0&&Wt.onUserStateUpdate(Wt.room.roomID,"ADD",Wr),Dr.length!==0&&Wt.onUserStateUpdate(Wt.room.roomID,"DELETE",Dr)}),this.userList=Qt):(this.userList=Qt).length!==0&&this.onUserStateUpdate(this.room.roomID,"ADD",Qt),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(nr.USER_FETCH_USER_RSP+" call success user_list "+Qt+" count "+Qt.length)}}}else this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(nr.USER_FETCH_USER_RSP+" fetch error "+kt)},$r.prototype.handlePushUserStateUpdateMsg=function(kt){if(this.logger.info(nr.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq===kt.body.user_list_seq)this.logger.warn(nr.USER_USER_PUSH+" user_list_seq is the same with local seq");else if(this.userSeq+kt.body.user_actions.length!==kt.body.user_list_seq)this.mergeUserByUserSeq(kt.body.user_list_seq,kt.body.user_actions);else{this.userSeq=kt.body.user_list_seq;for(var Gt=[],Wt=0;Wt<kt.body.user_actions.length;Wt++){var tr={action:kt.body.user_actions[Wt].Action,idName:kt.body.user_actions[Wt].IdName,nickName:kt.body.user_actions[Wt].NickName,role:kt.body.user_actions[Wt].Role,loginTime:kt.body.user_actions[Wt].LoginTime};Gt.push(tr)}this.stateCenter.actionListener("_userStateUpdate",kt.body.room_id,Gt);var Qt=[],gr=[];Gt.forEach(function(Tr){Tr.action==1?Qt.push({userID:Tr.idName,userName:Tr.nickName,role:Tr.role}):Tr.action==2&&gr.push({userID:Tr.idName,userName:Tr.nickName,role:Tr.role})}),this.userList&&(this.userList=this.userList.concat(Qt).filter(function(Tr){return!gr.some(function(kr){return kr.userID==Tr.userID})})),Qt.length!==0&&this.onUserStateUpdate(kt.body.room_id||kt.body.room_pushheader.room_id,"ADD",Qt),gr.length!==0&&this.onUserStateUpdate(kt.body.room_id||kt.body.room_pushheader.room_id,"DELETE",gr),this.logger.info(nr.USER_USER_PUSH+" call success")}else this.logger.info(nr.USER_USER_PUSH+" userStateUpdate is false")},$r.prototype.onUserStateUpdate=function(kt,Gt,Wt){var tr=this;Wt=Wt.filter(function(Qt){return Qt.userID!==tr.stateCenter.idName}),Wt.length!=0&&(Wt=Wt.map(function(Qt){return{userID:Qt.userID,userName:Qt.userName}}),this.stateCenter.actionListener("roomUserUpdate",kt,Gt,Wt))},$r.prototype.mergeUserByUserSeq=function(kt,Gt){var Wt=this;this.userSeqMergeMap||(this.logger.warn(nr.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+kt),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout(function(){Wt.handleMergeTimeout()},this.userListMergeInterval)),this.userSeqMergeMap[kt]=Gt,this.logger.warn(nr.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+kt+" userlist "+Gt.length)},$r.prototype.mergeUser=function(kt){var Gt=this,Wt=(this.logger.info(nr.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+kt.join(",")),this.userSeq=kt[kt.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),tr=((kt=(kt.forEach(function(gr){Gt.userSeqMergeMap&&Gt.userSeqMergeMap[gr].forEach(function(Tr){Wt[Tr.IdName]=Tr})}),this.userSeqMergeMap=null,Object.values(Wt).map(function(gr){return{action:gr.Action,idName:gr.IdName,nickName:gr.NickName,role:gr.Role,loginTime:gr.LoginTime?String(gr.LoginTime):""}}))).sort(function(gr,Tr){return gr.loginTime.localeCompare(Tr.loginTime)}),[]),Qt=[];kt.forEach(function(gr){gr.action==1?tr.push({userID:gr.idName,userName:gr.nickName,role:gr.role}):gr.action==2&&Qt.push({userID:gr.idName,userName:gr.nickName,role:gr.role})}),this.userList=this.userList&&this.userList.concat(tr).filter(function(gr){return!Qt.some(function(Tr){return Tr.userID==gr.userID})}),tr.length!==0&&this.onUserStateUpdate(this.room.roomID,"ADD",tr),Qt.length!==0&&this.onUserStateUpdate(this.room.roomID,"DELETE",Qt),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,kt)},$r.prototype.handleMergeTimeout=function(){var kt,Gt=this,Wt=Object.keys(this.userSeqMergeMap).map(function(tr){return+tr}).sort(function(tr,Qt){return tr-Qt});Wt[Wt.length-1]-Wt[0]+1===Wt.length||Wt[Wt.length-1]>=this.minUserSeq?this.mergeUser(Wt):(this.userSeqMergeMap=null,kt=this.lastUserQueryTime-Date.now(),this.logger.info(nr.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+Wt.join(",")+" wait "+kt),0<kt?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout(function(){Gt.fetchUserList()},kt)):this.fetchUserList())},$r.prototype.loginPrivateRsp=function(kt){this.logger.info(nr.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},$r);function $r(kt,Gt,Wt,tr,Qt,gr){this.logger=kt,this.stateCenter=Gt,this.dataReport=Wt,this.service=tr,this.liveRoomHandler=Qt,this.room=gr,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}Zr.prototype.initMessageHandler=function(){},Zr.prototype.initLiveHandler=function(){},Zr.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},Zr.prototype.bindHeatBeatHandler=function(){var kt=this;this.heartBeatHandler.hbLogout=function(Gt){kt.roomHandler.handleHbLogout(Gt)},this.heartBeatHandler.heartbeatRspNotiFy=function(Gt){kt.messageHandler&&kt.messageHandler.loginRsp(Gt),kt.userHandler.patchUserList(Gt),kt.HBResponse(Gt)}},Zr.prototype.bindRoomHandler=function(){var kt=this;this.roomHandler.loginSuccessCallBack=function(Gt,Wt){kt.logger.info(nr.LIVEROOMMODULES_BINDROOMHANDLER+" login suc "+Gt),kt.heartBeatHandler.init(Wt),kt.stateCenter.useNetAgent?kt.liveRoomHandler.startCheck():(kt.service.stopCheck(),kt.service.startCheck()),kt.userHandler.loginRsp(Wt,Gt),kt.messageHandler&&kt.messageHandler.loginRsp(Wt),kt.isMulti||kt.handleMultiRoom(),kt.roomLoginResponse(Wt)},this.roomHandler.resetRoomCallBack=function(){kt.heartBeatHandler.resetHeartbeat(),kt.liveHandler&&kt.liveHandler.resetLiveHandler(),kt.messageHandler&&kt.messageHandler.resetMessageInfo(),kt.stateCenter.useNetAgent&&kt.liveRoomHandler&&kt.liveRoomHandler.stopCheck(),kt.userHandler.resetUserHandler(),kt.service.stopCheck(),kt.roomTryHandler&&(kt.roomTryHandler.invalid(),kt.roomTryHandler.stopMaxTime())}},Zr.prototype.bindUserHandler=function(){},Zr.prototype.bindMessageHandler=function(){},Zr.prototype.bindLiveHandler=function(){},Zr.prototype.HBResponse=function(kt){this.stateCenter.actionListener("HBResponse",kt)},Zr.prototype.roomLoginResponse=function(kt){this.stateCenter.actionListener("roomLoginResponse",kt)},Zr.prototype.handleMultiRoom=function(){var kt=this;this.stateCenter.roomModulesList.forEach(function(Gt){Gt.runState!==pt.login&&Gt.roomTryHandler&&Gt.isMulti==1&&(Gt.roomTryHandler.onactive=function(Wt,tr){var Qt;tr&&tr.code!==0?(tr.code!==0&&(Qt=rr.getLiveRoomError(tr.code,kt.stateCenter.useNetAgent))&&Ft[Qt]&&(tr=Ft[Qt]),Gt.roomHandler.roomStateHandle("DISCONNECTED",xt.ReconnectFailed,tr,tr.msg)):Gt.roomHandler.roomStateHandle("CONNECTED",xt.Reconnected,tr)},Gt.roomTryHandler.startMaxTime(),Gt.roomTryHandler.active())})},Zr.prototype.isLogin=function(){return this.runState===pt.login},Zr.prototype.isLogout=function(){return this.runState===pt.logout},Zr.prototype.isTryLogin=function(){return this.runState===pt.trylogin},Zr.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Zr.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.stateCenter.useNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},Zr.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.sessionID="0",this.roomSessionID="0",this.roomTryHandler.active(!0))},Zr.prototype.resetSessionInfo=function(){var kt;this.logger.info("zm.lrm.rsi call"),this.sessionID="0",this.roomSessionID="0",(kt=this.liveRoomHandler)!=null&&kt.reset()};var Fr=Zr;function Zr(kt,Gt,Wt,tr,Qt,gr,Tr){this.roomID=kt,this.stateCenter=Gt,this.logger=Wt,this.dataReport=tr,this.service=Qt,this.rtm=gr,this.liveRoomHandler=Tr,this.runState=pt.logout,this.lastRunState=pt.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.maxMemberCount=0,this.lvKey="",this.roomName="",this.roomHandler=new Or(this.logger,this.stateCenter,this.dataReport,this.service,this,Tr),this.heartBeatHandler=new Rr(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.userHandler=new jr(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}mn.prototype.createSocket=function(kt){this.socket=Object(mt.createZegoWebSocket)(kt,this.ENV%2)},mn.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},mn.prototype.isDisConnect=function(){return!this.socket||this.socket.readyState!==1},mn.prototype.sendMessage=function(kt,Gt,Wt,tr,Qt){return Wt===void 0&&(Wt=null),tr===void 0&&(tr=null),Qt===void 0&&(Qt={timeOut:6e3}),Qt={data:Gt={header:kt,body:Gt},seq:kt.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:Qt.timeOut,success:Wt,error:tr},Wt=this.sendCommandList.push(Qt),this.sendCommandMap[Qt.seq]=Wt,this.socket&&this.socket.send(JSON.stringify(Gt)),kt.seq},mn.prototype.sendPB=function(kt){return this.socket&&this.socket.send(kt),!0},mn.prototype.checkSendMessageList=function(kt){for(var Gt=kt.getFirst();Gt!=null;)(function(){var Wt,tr,Qt;kt.remove(Gt),Gt&&Gt._data&&(Wt=Gt._data.error,tr=Gt._data.seq,Qt=Gt._data.data.body.custom_msg,setTimeout(function(){Wt&&Wt(Ft.TIMEOUT,tr,Qt)},0)),Gt=kt.getFirst()})()},mn.prototype.checkMessageListTimeout=function(kt,Gt){for(var Wt=kt.getFirst(),tr=Date.parse(new Date+""),Qt=0,gr=this;Wt!=null&&function(){return Wt._data&&Wt._data.sendTime+Wt._data.timeOut>tr?"break":(Wt._data&&delete Gt[Wt._data.data.header.seq],kt.remove(Wt),Wt._data&&Wt._data.error==null||Wt._data&&Wt._data.sendTime+gr.sendDataDropTimeout<tr||Wt&&Wt._data&&(Tr=Wt._data.error,kr=Wt._data.seq,Wr=Wt._data.data.body.custom_msg,setTimeout(function(){Tr&&Tr(Ft.TIMEOUT,kr,Wr)},0)),++Qt>=gr.sendDataCheckOnceCount?"break":void(Wt=kt.getFirst()));var Tr,kr,Wr}()!=="break";);},mn.prototype.startCheck=function(){var kt=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout(function(){kt.startCheck()},this.sendDataCheckInterval)},mn.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},mn.prototype.openHandler=function(kt){var Gt=this;this.socket&&(this.socket.onopen=function(Wt){Gt.socket.binaryType="arraybuffer",Gt.responseHandler(),kt(Wt)})},mn.prototype.responseHandler=function(){var kt=this;this.socket&&(this.socket.onmessage=function(Gt){Gt=typeof Gt.data=="string"?JSON.parse(Gt.data):Gt.data,kt.onMessage(Gt)})},mn.prototype.closeHandler=function(kt){this.socket&&(this.socket.onclose=function(Gt){kt(Gt)})},mn.prototype.errorHandler=function(kt){this.socket&&(this.socket.onerror=kt)},mn.prototype.onMessage=function(kt){};var pn=mn;function mn(kt){this.socket=null,this.sendCommandList=new Rt,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=kt}var vn=function(){return(vn=Object.assign||function(kt){for(var Gt,Wt=1,tr=arguments.length;Wt<tr;Wt++)for(var Qt in Gt=arguments[Wt])Object.prototype.hasOwnProperty.call(Gt,Qt)&&(kt[Qt]=Gt[Qt]);return kt}).apply(this,arguments)},jn=(yn.prototype.checkResponse=function(kt){return this.stateCenter.roomModulesList.filter(function(Gt){return Gt.runState!==pt.logout}).length!=0&&(kt.header.appid!==this.stateCenter.appid||kt.header.user_id!==this.stateCenter.userid)},yn.prototype.handleSendCommandMsgRsp=function(kt){var Gt,Wt=this,tr=this.service.sendCommandMap[kt.header.seq];tr!=null&&(Gt=tr._data,delete this.service.sendCommandMap[kt.header.seq],this.service.sendCommandList.remove(tr),kt.body.err_code===0?setTimeout(function(){Gt&&Gt.success!=null&&Gt.success(kt,Wt.cmdSeq)},0):setTimeout(function(){Gt&&Gt.error!=null&&Gt.error(kt,Wt.cmdSeq)},0))},yn.prototype.onPush=function(){var kt=this;this.service.onMessage=function(Gt){Gt instanceof ArrayBuffer?kt.stateCenter.actionListener("_protobufResponse",Gt):Gt.header?(Gt.body.err_code!==0?Gt.body.err_message&&kt.logger.error(nr.SERVICE_PUSH+" cmd="+Gt.header.cmd+", err_code="+Gt.body.err_code+", err_message="+Gt.body.err_message+" "):kt.logger.info(nr.SERVICE_PUSH+" cmd="+Gt.header.cmd+", msg="+JSON.stringify(Gt)+" "),-1<["login","logout"].indexOf(Gt.header.cmd)?kt.handleSendCommandMsgRsp(Gt):kt.checkResponse(Gt)?kt.logger.error(nr.SERVICE_PUSH+"  check session fail."):(kt.logger.info(nr.SERVICE_PUSH+" cmd="+Gt.header.cmd+",function="+!!kt.responseRouters[Gt.header.cmd]),kt.handleSendCommandMsgRsp(Gt),kt.responseRouters[Gt.header.cmd]&&kt.responseRouters[Gt.header.cmd](Gt,kt.cmdSeq))):kt.logger.error(nr.SERVICE_PUSH+" msg type error ")}},yn.prototype.handlePushKickout=function(kt){var Gt,Wt;((Wt=kt==null?void 0:kt.body)==null?void 0:Wt.protocol)===void 0||((Wt=kt==null?void 0:kt.body)==null?void 0:Wt.protocol)===1?function(tr,Qt){for(var gr=0,Tr=Qt.length,kr=tr.length;gr<Tr;gr++,kr++)tr[kr]=Qt[gr];return tr}([],this.stateCenter.roomModulesList).forEach(function(tr){return tr.roomHandler.handlePushKickout(kt,!0)}):(Gt=(Wt=kt==null?void 0:kt.header)==null?void 0:Wt.room_id,(Wt=this.stateCenter.roomModulesList.find(function(tr){return tr.roomID==Gt}))?Wt.roomHandler.handlePushKickout(kt):this.logger.error(nr.SERVICE_PUSH+" room no found ignore "+JSON.stringify((Wt=kt.header)==null?void 0:Wt.room_id)))},yn.prototype.handlePushCustomMsg=function(kt){},yn.prototype.handlePushRoomMsg=function(kt){},yn.prototype.handlePushUserStateUpdateMsg=function(kt){var Gt,Wt=(tr=kt==null?void 0:kt.header)==null?void 0:tr.room_id,tr=this.stateCenter.roomModulesList.find(function(gr){return gr.roomID==Wt}),Qt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:Wt},{key:""},cr.kZMRoomRecvUserUpdateInfo.event);tr?(Qt.setAttributes({user_list_seq:(Gt=kt==null?void 0:kt.body)==null?void 0:Gt.user_list_seq,update_user:(Gt=kt==null?void 0:kt.body)==null?void 0:Gt.user_actions}),Qt.end(),tr.userHandler.handlePushUserStateUpdateMsg(kt)):(this.logger.error(nr.SERVICE_PUSH+" room no found ignore "+JSON.stringify(kt)),this.stateCenter.reporter.setError(Qt,cr.kZMRoomRecvUserUpdateInfo.error.ROOM_NOT_EXIST))},yn.prototype.handlePushMergeMsg=function(kt){},yn.prototype.handlePushTransMsg=function(kt){},yn.prototype.handleBigImMsgRsp=function(kt){},yn.prototype.handlePushSignalMsg=function(kt){},yn.prototype.handlePushTokenExpire=function(kt){this.stateCenter.actionListener("_tokenExpired",kt)},yn.prototype.closeHandler=function(kt){this.service.closeHandler(kt)},yn.prototype.openHandler=function(kt){this.service.openHandler(kt)},yn.prototype.errorHandler=function(kt){this.service.errorHandler(kt)},yn.prototype.getHeader=function(kt,Gt,Wt,tr){return{Protocol:"req",cmd:kt,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:Gt||"",room_id:Wt||"",room_session_id:tr||"",biz_version:this.stateCenter.bizVersion||""}},yn.prototype.startCheck=function(){this.logger.info(nr.SERVICE_START_CHECK+" start"),this.service.startCheck()},yn.prototype.stopCheck=function(){this.logger.info(nr.SERVICE_STOP_CHECK+" stop"),this.service.stopCheck()},yn.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},yn.prototype.createSocket=function(kt){var Gt=this;this.stateCenter.roomServer=kt,this.service.createSocket(kt),this.responseRouters=vn(vn({},this.responseRouters),{push_kickout:function(Wt){Gt.handlePushKickout(Wt)},push_custommsg:function(Wt){Gt.handlePushCustomMsg(Wt)},push_im_chat:function(Wt){Gt.handlePushRoomMsg(Wt)},push_userlist_update:function(Wt){Gt.handlePushUserStateUpdateMsg(Wt)},push_merge_message:function(Wt){Gt.handlePushMergeMsg(Wt)},push_trans:function(Wt){Gt.handlePushTransMsg(Wt)},push_signal:function(Wt){Gt.handlePushSignalMsg(Wt)},push_token_expire:function(Wt){Gt.handlePushTokenExpire(Wt)}})},yn.prototype.closeSocket=function(){this.service.closeSocket()},yn.prototype.sendMessage=function(kt,Gt,Wt,tr,Qt,gr){var Tr,kr;return this.service.isDisConnect()?(this.logger.error(nr.SERVICE_SEND+" socket is disconnect"),tr(Ft.SOCKET_CLOSE),0):(Tr=gr!=null&&gr.roomID?gr.roomID:(Tr=this.stateCenter.roomModulesList[0])==null?void 0:Tr.roomID,kr=gr!=null&&gr.roomSessionID?gr.roomSessionID:(kr=this.stateCenter.roomModulesList[0])==null?void 0:kr.roomSessionID,gr=gr!=null&&gr.sessionID?gr.sessionID:(gr=this.stateCenter.roomModulesList[0])==null?void 0:gr.sessionID,Qt=Qt||this.getHeader(kt,gr,Tr,kr),this.logger.info(nr.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:Qt,body:Gt})),this.service.sendMessage(Qt,Gt,Wt,tr))},yn.prototype.on=function(kt,Gt){this.responseRouters[kt]=Gt},yn.prototype.login=function(kt,Gt,Wt){var tr=this.getHeader(kt.isMulti?"enter":"login",kt.sessionID,kt.roomID,kt.roomSessionID);return kt={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:kt.token,version:this.stateCenter.sdKVersion,room_name:kt.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:this.stateCenter.ENV===0?gt.ClientType_Webrtc:gt.ClientType_SmallProgram,third_token:kt.thirdToken,user_count_limit:kt.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat},this.sendMessage("",kt,Gt,Wt,tr)},yn.prototype.logout=function(kt,Gt,Wt){var tr=kt.isMulti?"quit":"logout",Qt={reserve:0};return tr=="logout"&&(Qt.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(tr,Qt,Gt,Wt,void 0,{sessionID:kt.sessionID,roomID:kt.roomID,roomSessionID:kt.roomSessionID})},yn.prototype.heartBeat=function(kt,Gt,Wt){return this.sendMessage("hb",{reserve:0},kt,Gt,void 0,Wt)},yn.prototype.fetchUserList=function(kt,Gt,Wt,tr){return this.sendMessage("user_list",kt,Gt,Wt,void 0,tr)},yn.prototype.fetchUserListV2=function(kt,Gt,Wt,tr){return this.sendMessage("user_list_v2",kt,Gt,Wt,void 0,tr)},yn.prototype.fetchReliableMessage=function(kt,Gt,Wt,tr){return this.sendMessage("trans_fetch",kt,Gt,Wt,void 0,tr)},yn.prototype.sendReliableMessage=function(kt,Gt,Wt,tr){return this.sendMessage("trans",kt,Gt,Wt,void 0,tr)},yn.prototype.sendRoomMsg=function(kt,Gt,Wt,tr){return this.sendMessage("im_chat",kt,Gt,Wt,void 0,tr)},yn.prototype.sendCustomCommand=function(kt,Gt,Wt,tr){return this.sendMessage("custommsg",kt,Gt,Wt,void 0,tr)},yn.prototype.sendBigRoomMessage=function(kt,Gt,Wt,tr){return this.sendMessage("bigim_chat",kt,Gt,Wt,void 0,tr)},yn.prototype.sendRelayMessage=function(kt,Gt,Wt,tr){return this.sendMessage("relay",kt,Gt,Wt,void 0,tr)},yn.prototype.sendSignalCmd=function(kt,Gt,Wt,tr){return this.sendMessage("signal",kt,Gt,Wt,void 0,tr)},yn.prototype.sendPB=function(kt){return this.service.isDisConnect()||this.stateCenter.networkState==ht.offline?(this.logger.error(nr.RTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(kt)},yn);function yn(kt,Gt,Wt){this.stateCenter=kt,this.logger=Gt,this.rtm=Wt,this.service=new pn(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}Qn.prototype.setSetting=function(kt,Gt){var Wt,tr,Qt=Array.isArray(Gt)&&0<Gt.length;for(Wt in kt)if(typeof kt[Wt].ctrlmode=="number"&&[1,2].includes(kt[Wt].ctrlmode))this.setting[Wt]=kt[Wt],this.setting[Wt+"_ctrlmode"]=kt[Wt].ctrlmode;else for(var gr in kt[Wt])gr.endsWith("_ctrlmode")||Qt&&Gt.indexOf(gr)==-1||((tr=kt[Wt][gr+"_ctrlmode"])===1||tr===2?this.setting[gr]=kt[Wt][gr]:this.defaultSetting[gr]&&(this.setting[gr]=this.defaultSetting[gr]),typeof tr=="number"&&(this.setting[gr+"_ctrlmode"]=kt[Wt][gr+"_ctrlmode"]))},Qn.prototype.getSetting=function(kt,Gt){return(Gt=Gt!==void 0&&Gt)&&this.setting[kt+"_ctrlmode"]!=2?void 0:this.setting[kt]};var Kn=Qn;function Qn(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}var bn=lt(0),so=lt.n(bn),zr=(at=lt(7),lt(8)),zn=lt.n(zr),Zn=(zr=lt(10),lt.n(zr)),Fn=(zr=lt(16),lt.n(zr)),En=(zr=lt(4),lt.n(zr)),Cn={d:(kt,Gt)=>{for(var Wt in Gt)Cn.o(Gt,Wt)&&!Cn.o(kt,Wt)&&Object.defineProperty(kt,Wt,{enumerable:!0,get:Gt[Wt]})},o:(kt,Gt)=>Object.prototype.hasOwnProperty.call(kt,Gt)},Mn=(((kt,Gt,Wt)=>{function tr(Xt){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(Xt)}function Qt(Xt,Jt){return Xt&Jt}function gr(Xt,Jt){return Xt|Jt}function Tr(Xt,Jt){return Xt^Jt}function kr(Xt,Jt){return Xt&~Jt}Wt.d(Gt,{default:()=>as});var Wr,Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Mr(Xt){for(var Jt,ar="",_r=0;_r+3<=Xt.length;_r+=3)Jt=parseInt(Xt.substring(_r,_r+3),16),ar+=Dr.charAt(Jt>>6)+Dr.charAt(63&Jt);for(_r+1==Xt.length?(Jt=parseInt(Xt.substring(_r,_r+1),16),ar+=Dr.charAt(Jt<<2)):_r+2==Xt.length&&(Jt=parseInt(Xt.substring(_r,_r+2),16),ar+=Dr.charAt(Jt>>2)+Dr.charAt((3&Jt)<<4));0<(3&ar.length);)ar+="=";return ar}function Kr(Xt){for(var Jt="",ar=0,_r=0,wr=0;wr<Xt.length&&Xt.charAt(wr)!="=";++wr){var Ir=Dr.indexOf(Xt.charAt(wr));Ir<0||(ar=ar==0?(Jt+=tr(Ir>>2),_r=3&Ir,1):ar==1?(Jt+=tr(_r<<2|Ir>>4),_r=15&Ir,2):ar==2?(Jt=(Jt+=tr(_r))+tr(Ir>>2),_r=3&Ir,3):(Jt=(Jt+=tr(_r<<2|Ir>>4))+tr(15&Ir),0))}return ar==1&&(Jt+=tr(_r<<2)),Jt}var wn,xn={decode:function(Xt){if(wn===void 0){var Jt=`= \f
\r	 \u2028\u2029`;for(wn=Object.create(null),Ir=0;Ir<64;++Ir)wn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ir)]=Ir;for(wn["-"]=62,wn._=63,Ir=0;Ir<Jt.length;++Ir)wn[Jt.charAt(Ir)]=-1}for(var ar=[],_r=0,wr=0,Ir=0;Ir<Xt.length;++Ir){var Lr=Xt.charAt(Ir);if(Lr=="=")break;if((Lr=wn[Lr])!=-1){if(Lr===void 0)throw new Error("Illegal character at offset "+Ir);_r|=Lr,4<=++wr?(ar[ar.length]=_r>>16,ar[ar.length]=_r>>8&255,ar[ar.length]=255&_r,wr=_r=0):_r<<=6}}switch(wr){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:ar[ar.length]=_r>>10;break;case 3:ar[ar.length]=_r>>16,ar[ar.length]=_r>>8&255}return ar},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(Xt){var Jt=xn.re.exec(Xt);if(Jt)if(Jt[1])Xt=Jt[1];else{if(!Jt[2])throw new Error("RegExp out of sync");Xt=Jt[2]}return xn.decode(Xt)}},On=(qn.prototype.mulAdd=function(Xt,Jt){for(var ar,_r=this.buf,wr=_r.length,Ir=0;Ir<wr;++Ir)(ar=_r[Ir]*Xt+Jt)<1e13?Jt=0:ar-=1e13*(Jt=0|ar/1e13),_r[Ir]=ar;0<Jt&&(_r[Ir]=Jt)},qn.prototype.sub=function(Xt){for(var Jt,ar=this.buf,_r=ar.length,wr=0;wr<_r;++wr)Xt=(Jt=ar[wr]-Xt)<0?(Jt+=1e13,1):0,ar[wr]=Jt;for(;ar[ar.length-1]===0;)ar.pop()},qn.prototype.toString=function(Xt){if((Xt||10)!=10)throw new Error("only base 10 is supported");for(var Jt=this.buf,ar=Jt[Jt.length-1].toString(),_r=Jt.length-2;0<=_r;--_r)ar+=(1e13+Jt[_r]).toString().substring(1);return ar},qn.prototype.valueOf=function(){for(var Xt=this.buf,Jt=0,ar=Xt.length-1;0<=ar;--ar)Jt=1e13*Jt+Xt[ar];return Jt},qn.prototype.simplify=function(){var Xt=this.buf;return Xt.length==1?Xt[0]:this},qn),Rn=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,co=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function qn(Xt){this.buf=[+Xt||0]}function Pn(Xt,Jt){return Xt.length>Jt?Xt.substring(0,Jt)+"…":Xt}_o.prototype.get=function(Xt){if((Xt=Xt===void 0?this.pos++:Xt)>=this.enc.length)throw new Error("Requesting byte offset "+Xt+" on a stream of length "+this.enc.length);return typeof this.enc=="string"?this.enc.charCodeAt(Xt):this.enc[Xt]},_o.prototype.hexByte=function(Xt){return this.hexDigits.charAt(Xt>>4&15)+this.hexDigits.charAt(15&Xt)},_o.prototype.hexDump=function(Xt,Jt,ar){for(var _r="",wr=Xt;wr<Jt;++wr)if(_r+=this.hexByte(this.get(wr)),ar!==!0)switch(15&wr){case 7:_r+="  ";break;case 15:_r+=`
`;break;default:_r+=" "}return _r},_o.prototype.isASCII=function(Xt,Jt){for(var ar=Xt;ar<Jt;++ar){var _r=this.get(ar);if(_r<32||176<_r)return!1}return!0},_o.prototype.parseStringISO=function(Xt,Jt){for(var ar="",_r=Xt;_r<Jt;++_r)ar+=String.fromCharCode(this.get(_r));return ar},_o.prototype.parseStringUTF=function(Xt,Jt){for(var ar="",_r=Xt;_r<Jt;){var wr=this.get(_r++);ar+=wr<128?String.fromCharCode(wr):191<wr&&wr<224?String.fromCharCode((31&wr)<<6|63&this.get(_r++)):String.fromCharCode((15&wr)<<12|(63&this.get(_r++))<<6|63&this.get(_r++))}return ar},_o.prototype.parseStringBMP=function(Xt,Jt){for(var ar,_r,wr="",Ir=Xt;Ir<Jt;)ar=this.get(Ir++),_r=this.get(Ir++),wr+=String.fromCharCode(ar<<8|_r);return wr},_o.prototype.parseTime=function(Xt,Jt,ar){return Xt=this.parseStringISO(Xt,Jt),(Jt=(ar?Rn:co).exec(Xt))?(ar&&(Jt[1]=+Jt[1],Jt[1]+=+Jt[1]<70?2e3:1900),Xt=Jt[1]+"-"+Jt[2]+"-"+Jt[3]+" "+Jt[4],Jt[5]&&(Xt+=":"+Jt[5],Jt[6]&&(Xt+=":"+Jt[6],Jt[7]&&(Xt+="."+Jt[7]))),Jt[8]&&(Xt+=" UTC",Jt[8]!="Z"&&(Xt+=Jt[8],Jt[9]&&(Xt+=":"+Jt[9]))),Xt):"Unrecognized time: "+Xt},_o.prototype.parseInteger=function(Xt,Jt){for(var ar,_r=this.get(Xt),wr=127<_r,Ir=wr?255:0,Lr="";_r==Ir&&++Xt<Jt;)_r=this.get(Xt);if((ar=Jt-Xt)==0)return wr?-1:0;if(4<ar){for(Lr=_r,ar<<=3;!(128&(+Lr^Ir));)Lr=+Lr<<1,--ar;Lr="("+ar+` bit)
`}wr&&(_r-=256);for(var Hr=new On(_r),Tn=Xt+1;Tn<Jt;++Tn)Hr.mulAdd(256,this.get(Tn));return Lr+Hr.toString()},_o.prototype.parseBitString=function(Xt,Jt,ar){for(var _r=this.get(Xt),wr="("+((Jt-Xt-1<<3)-_r)+` bit)
`,Ir="",Lr=Xt+1;Lr<Jt;++Lr){for(var Hr=this.get(Lr),Tn=Lr==Jt-1?_r:0,_n=7;Tn<=_n;--_n)Ir+=Hr>>_n&1?"1":"0";if(Ir.length>ar)return wr+Pn(Ir,ar)}return wr+Ir},_o.prototype.parseOctetString=function(Xt,Jt,ar){if(this.isASCII(Xt,Jt))return Pn(this.parseStringISO(Xt,Jt),ar);var _r=Jt-Xt,wr="("+_r+` byte)
`;_r>(ar/=2)&&(Jt=Xt+ar);for(var Ir=Xt;Ir<Jt;++Ir)wr+=this.hexByte(this.get(Ir));return ar<_r&&(wr+="…"),wr},_o.prototype.parseOID=function(Xt,Jt,ar){for(var _r="",wr=new On,Ir=0,Lr=Xt;Lr<Jt;++Lr){var Hr=this.get(Lr);if(wr.mulAdd(128,127&Hr),Ir+=7,!(128&Hr)){if(_r===""?_r=(wr=wr.simplify())instanceof On?(wr.sub(80),"2."+wr.toString()):(Hr=wr<80?wr<40?0:1:2)+"."+(wr-40*Hr):_r+="."+wr.toString(),_r.length>ar)return Pn(_r,ar);wr=new On,Ir=0}}return 0<Ir&&(_r+=".incomplete"),_r};var uo=_o,yo=(fo.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},fo.prototype.content=function(Xt){if(this.tag!==void 0){Xt===void 0&&(Xt=1/0);var Jt=this.posContent(),ar=Math.abs(this.length);if(!this.tag.isUniversal())return this.sub!==null?"("+this.sub.length+" elem)":this.stream.parseOctetString(Jt,Jt+ar,Xt);switch(this.tag.tagNumber){case 1:return this.stream.get(Jt)===0?"false":"true";case 2:return this.stream.parseInteger(Jt,Jt+ar);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(Jt,Jt+ar,Xt);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(Jt,Jt+ar,Xt);case 6:return this.stream.parseOID(Jt,Jt+ar,Xt);case 16:case 17:return this.sub!==null?"("+this.sub.length+" elem)":"(no elem)";case 12:return Pn(this.stream.parseStringUTF(Jt,Jt+ar),Xt);case 18:case 19:case 20:case 21:case 22:case 26:return Pn(this.stream.parseStringISO(Jt,Jt+ar),Xt);case 30:return Pn(this.stream.parseStringBMP(Jt,Jt+ar),Xt);case 23:case 24:return this.stream.parseTime(Jt,Jt+ar,this.tag.tagNumber==23)}}return null},fo.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"},fo.prototype.toPrettyString=function(Xt){var Jt=(Xt=Xt===void 0?"":Xt)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(Jt+="+"),Jt+=this.length,this.tag.tagConstructed?Jt+=" (constructed)":!this.tag.isUniversal()||this.tag.tagNumber!=3&&this.tag.tagNumber!=4||this.sub===null||(Jt+=" (encapsulates)"),Jt+=`
`,this.sub!==null){Xt+="  ";for(var ar=0,_r=this.sub.length;ar<_r;++ar)Jt+=this.sub[ar].toPrettyString(Xt)}return Jt},fo.prototype.posStart=function(){return this.stream.pos},fo.prototype.posContent=function(){return this.stream.pos+this.header},fo.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},fo.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},fo.decodeLength=function(Xt){var Jt=127&(ar=Xt.get());if(Jt==ar)return Jt;if(6<Jt)throw new Error("Length over 48 bits not supported at position "+(Xt.pos-1));if(Jt==0)return null;for(var ar=0,_r=0;_r<Jt;++_r)ar=256*ar+Xt.get();return ar},fo.prototype.getHexStringValue=function(){var Xt=this.toHexString(),Jt=2*this.header,ar=2*this.length;return Xt.substr(Jt,ar)},fo.decode=function(Xt){function Jt(){var _n=[];if(wr!==null){for(var An=Ir+wr;ar.pos<An;)_n[_n.length]=fo.decode(ar);if(ar.pos!=An)throw new Error("Content size is not correct for container starting at offset "+Ir)}else try{for(;;){var Ln=fo.decode(ar);if(Ln.tag.isEOC())break;_n[_n.length]=Ln}wr=Ir-ar.pos}catch(ao){throw new Error("Exception while decoding undefined length content: "+ao)}return _n}var ar=Xt instanceof uo?Xt:new uo(Xt,0),_r=(Xt=new uo(ar),new io(ar)),wr=fo.decodeLength(ar),Ir=ar.pos,Lr=Ir-Xt.pos,Hr=null;if(_r.tagConstructed)Hr=Jt();else if(_r.isUniversal()&&(_r.tagNumber==3||_r.tagNumber==4))try{if(_r.tagNumber==3&&ar.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");Hr=Jt();for(var Tn=0;Tn<Hr.length;++Tn)if(Hr[Tn].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{Hr=null}if(Hr===null){if(wr===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+Ir);ar.pos=Ir+Math.abs(wr)}return new fo(Xt,Lr,wr,_r,Hr)},fo),io=(Yo.prototype.isUniversal=function(){return this.tagClass===0},Yo.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0},Yo),ro=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],No=(1<<26)/ro[ro.length-1],In=(ln.prototype.toString=function(Xt){if(this.s<0)return"-"+this.negate().toString(Xt);var Jt;if(Xt==16)Jt=4;else if(Xt==8)Jt=3;else if(Xt==2)Jt=1;else if(Xt==32)Jt=5;else{if(Xt!=4)return this.toRadix(Xt);Jt=2}var ar,_r=(1<<Jt)-1,wr=!1,Ir="",Lr=this.t,Hr=this.DB-Lr*this.DB%Jt;if(0<Lr--)for(Hr<this.DB&&0<(ar=this[Lr]>>Hr)&&(wr=!0,Ir=tr(ar));0<=Lr;)Hr<Jt?(ar=(this[Lr]&(1<<Hr)-1)<<Jt-Hr,ar|=this[--Lr]>>(Hr+=this.DB-Jt)):(ar=this[Lr]>>(Hr-=Jt)&_r,Hr<=0&&(Hr+=this.DB,--Lr)),(wr=0<ar||wr)&&(Ir+=tr(ar));return wr?Ir:"0"},ln.prototype.negate=function(){var Xt=Nn();return ln.ZERO.subTo(this,Xt),Xt},ln.prototype.abs=function(){return this.s<0?this.negate():this},ln.prototype.compareTo=function(Xt){var Jt=this.s-Xt.s;if(Jt!=0)return Jt;var ar=this.t;if((Jt=ar-Xt.t)!=0)return this.s<0?-Jt:Jt;for(;0<=--ar;)if((Jt=this[ar]-Xt[ar])!=0)return Jt;return 0},ln.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+zo(this[this.t-1]^this.s&this.DM)},ln.prototype.mod=function(Xt){var Jt=Nn();return this.abs().divRemTo(Xt,null,Jt),this.s<0&&0<Jt.compareTo(ln.ZERO)&&Xt.subTo(Jt,Jt),Jt},ln.prototype.modPowInt=function(Xt,Jt){return Jt=new(Xt<256||Jt.isEven()?_i:es)(Jt),this.exp(Xt,Jt)},ln.prototype.clone=function(){var Xt=Nn();return this.copyTo(Xt),Xt},ln.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ln.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},ln.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},ln.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},ln.prototype.toByteArray=function(){var Xt=this.t,Jt=[];Jt[0]=this.s;var ar,_r=this.DB-Xt*this.DB%8,wr=0;if(0<Xt--)for(_r<this.DB&&(ar=this[Xt]>>_r)!=(this.s&this.DM)>>_r&&(Jt[wr++]=ar|this.s<<this.DB-_r);0<=Xt;)_r<8?(ar=(this[Xt]&(1<<_r)-1)<<8-_r,ar|=this[--Xt]>>(_r+=this.DB-8)):(ar=this[Xt]>>(_r-=8)&255,_r<=0&&(_r+=this.DB,--Xt)),128&ar&&(ar|=-256),wr==0&&(128&this.s)!=(128&ar)&&++wr,(0<wr||ar!=this.s)&&(Jt[wr++]=ar);return Jt},ln.prototype.equals=function(Xt){return this.compareTo(Xt)==0},ln.prototype.min=function(Xt){return this.compareTo(Xt)<0?this:Xt},ln.prototype.max=function(Xt){return 0<this.compareTo(Xt)?this:Xt},ln.prototype.and=function(Xt){var Jt=Nn();return this.bitwiseTo(Xt,Qt,Jt),Jt},ln.prototype.or=function(Xt){var Jt=Nn();return this.bitwiseTo(Xt,gr,Jt),Jt},ln.prototype.xor=function(Xt){var Jt=Nn();return this.bitwiseTo(Xt,Tr,Jt),Jt},ln.prototype.andNot=function(Xt){var Jt=Nn();return this.bitwiseTo(Xt,kr,Jt),Jt},ln.prototype.not=function(){for(var Xt=Nn(),Jt=0;Jt<this.t;++Jt)Xt[Jt]=this.DM&~this[Jt];return Xt.t=this.t,Xt.s=~this.s,Xt},ln.prototype.shiftLeft=function(Xt){var Jt=Nn();return Xt<0?this.rShiftTo(-Xt,Jt):this.lShiftTo(Xt,Jt),Jt},ln.prototype.shiftRight=function(Xt){var Jt=Nn();return Xt<0?this.lShiftTo(-Xt,Jt):this.rShiftTo(Xt,Jt),Jt},ln.prototype.getLowestSetBit=function(){for(var Xt=0;Xt<this.t;++Xt)if(this[Xt]!=0)return Xt*this.DB+function(Jt){if(Jt==0)return-1;var ar=0;return!(65535&Jt)&&(Jt>>=16,ar+=16),!(255&Jt)&&(Jt>>=8,ar+=8),!(15&Jt)&&(Jt>>=4,ar+=4),!(3&Jt)&&(Jt>>=2,ar+=2),!(1&Jt)&&++ar,ar}(this[Xt]);return this.s<0?this.t*this.DB:-1},ln.prototype.bitCount=function(){for(var Xt=0,Jt=this.s&this.DM,ar=0;ar<this.t;++ar)Xt+=function(_r){for(var wr=0;_r!=0;)_r&=_r-1,++wr;return wr}(this[ar]^Jt);return Xt},ln.prototype.testBit=function(Xt){var Jt=Math.floor(Xt/this.DB);return Jt>=this.t?this.s!=0:(this[Jt]&1<<Xt%this.DB)!=0},ln.prototype.setBit=function(Xt){return this.changeBit(Xt,gr)},ln.prototype.clearBit=function(Xt){return this.changeBit(Xt,kr)},ln.prototype.flipBit=function(Xt){return this.changeBit(Xt,Tr)},ln.prototype.add=function(Xt){var Jt=Nn();return this.addTo(Xt,Jt),Jt},ln.prototype.subtract=function(Xt){var Jt=Nn();return this.subTo(Xt,Jt),Jt},ln.prototype.multiply=function(Xt){var Jt=Nn();return this.multiplyTo(Xt,Jt),Jt},ln.prototype.divide=function(Xt){var Jt=Nn();return this.divRemTo(Xt,Jt,null),Jt},ln.prototype.remainder=function(Xt){var Jt=Nn();return this.divRemTo(Xt,null,Jt),Jt},ln.prototype.divideAndRemainder=function(Xt){var Jt=Nn(),ar=Nn();return this.divRemTo(Xt,Jt,ar),[Jt,ar]},ln.prototype.modPow=function(Xt,Jt){var ar=Xt.bitLength(),_r=Io(1);if(ar<=0)return _r;var wr=ar<18?1:ar<48?3:ar<144?4:ar<768?5:6,Ir=new(ar<8?_i:Jt.isEven()?os:es)(Jt),Lr=[],Hr=3,Tn=wr-1,_n=(1<<wr)-1;if(Lr[1]=Ir.convert(this),1<wr){var An=Nn();for(Ir.sqrTo(Lr[1],An);Hr<=_n;)Lr[Hr]=Nn(),Ir.mulTo(An,Lr[Hr-2],Lr[Hr]),Hr+=2}var Ln,ao,oo=Xt.t-1,So=!0,Xn=Nn();for(ar=zo(Xt[oo])-1;0<=oo;){for(Tn<=ar?Ln=Xt[oo]>>ar-Tn&_n:(Ln=(Xt[oo]&(1<<ar+1)-1)<<Tn-ar,0<oo&&(Ln|=Xt[oo-1]>>this.DB+ar-Tn)),Hr=wr;!(1&Ln);)Ln>>=1,--Hr;if((ar-=Hr)<0&&(ar+=this.DB,--oo),So)Lr[Ln].copyTo(_r),So=!1;else{for(;1<Hr;)Ir.sqrTo(_r,Xn),Ir.sqrTo(Xn,_r),Hr-=2;0<Hr?Ir.sqrTo(_r,Xn):(ao=_r,_r=Xn,Xn=ao),Ir.mulTo(Xn,Lr[Ln],_r)}for(;0<=oo&&!(Xt[oo]&1<<ar);)Ir.sqrTo(_r,Xn),ao=_r,_r=Xn,Xn=ao,--ar<0&&(ar=this.DB-1,--oo)}return Ir.revert(_r)},ln.prototype.modInverse=function(Xt){var Jt=Xt.isEven();if(this.isEven()&&Jt||Xt.signum()==0)return ln.ZERO;for(var ar=Xt.clone(),_r=this.clone(),wr=Io(1),Ir=Io(0),Lr=Io(0),Hr=Io(1);ar.signum()!=0;){for(;ar.isEven();)ar.rShiftTo(1,ar),Jt?(wr.isEven()&&Ir.isEven()||(wr.addTo(this,wr),Ir.subTo(Xt,Ir)),wr.rShiftTo(1,wr)):Ir.isEven()||Ir.subTo(Xt,Ir),Ir.rShiftTo(1,Ir);for(;_r.isEven();)_r.rShiftTo(1,_r),Jt?(Lr.isEven()&&Hr.isEven()||(Lr.addTo(this,Lr),Hr.subTo(Xt,Hr)),Lr.rShiftTo(1,Lr)):Hr.isEven()||Hr.subTo(Xt,Hr),Hr.rShiftTo(1,Hr);0<=ar.compareTo(_r)?(ar.subTo(_r,ar),Jt&&wr.subTo(Lr,wr),Ir.subTo(Hr,Ir)):(_r.subTo(ar,_r),Jt&&Lr.subTo(wr,Lr),Hr.subTo(Ir,Hr))}return _r.compareTo(ln.ONE)!=0?ln.ZERO:0<=Hr.compareTo(Xt)?Hr.subtract(Xt):Hr.signum()<0?(Hr.addTo(Xt,Hr),Hr.signum()<0?Hr.add(Xt):Hr):Hr},ln.prototype.pow=function(Xt){return this.exp(Xt,new xo)},ln.prototype.gcd=function(Xt){var Jt=this.s<0?this.negate():this.clone(),ar=Xt.s<0?Xt.negate():Xt.clone(),_r=(Jt.compareTo(ar)<0&&(Xt=Jt,Jt=ar,ar=Xt),Jt.getLowestSetBit());if((Xt=ar.getLowestSetBit())<0)return Jt;for(0<(Xt=_r<Xt?_r:Xt)&&(Jt.rShiftTo(Xt,Jt),ar.rShiftTo(Xt,ar));0<Jt.signum();)0<(_r=Jt.getLowestSetBit())&&Jt.rShiftTo(_r,Jt),0<(_r=ar.getLowestSetBit())&&ar.rShiftTo(_r,ar),0<=Jt.compareTo(ar)?(Jt.subTo(ar,Jt),Jt.rShiftTo(1,Jt)):(ar.subTo(Jt,ar),ar.rShiftTo(1,ar));return 0<Xt&&ar.lShiftTo(Xt,ar),ar},ln.prototype.isProbablePrime=function(Xt){var Jt,ar=this.abs();if(ar.t==1&&ar[0]<=ro[ro.length-1]){for(Jt=0;Jt<ro.length;++Jt)if(ar[0]==ro[Jt])return!0;return!1}if(ar.isEven())return!1;for(Jt=1;Jt<ro.length;){for(var _r=ro[Jt],wr=Jt+1;wr<ro.length&&_r<No;)_r*=ro[wr++];for(_r=ar.modInt(_r);Jt<wr;)if(_r%ro[Jt++]==0)return!1}return ar.millerRabin(Xt)},ln.prototype.copyTo=function(Xt){for(var Jt=this.t-1;0<=Jt;--Jt)Xt[Jt]=this[Jt];Xt.t=this.t,Xt.s=this.s},ln.prototype.fromInt=function(Xt){this.t=1,this.s=Xt<0?-1:0,0<Xt?this[0]=Xt:Xt<-1?this[0]=Xt+this.DV:this.t=0},ln.prototype.fromString=function(Xt,Jt){var ar;if(Jt==16)ar=4;else if(Jt==8)ar=3;else if(Jt==256)ar=8;else if(Jt==2)ar=1;else if(Jt==32)ar=5;else{if(Jt!=4)return void this.fromRadix(Xt,Jt);ar=2}this.t=0,this.s=0;for(var _r=Xt.length,wr=!1,Ir=0;0<=--_r;){var Lr=ar==8?255&+Xt[_r]:ts(Xt,_r);Lr<0?Xt.charAt(_r)=="-"&&(wr=!0):(wr=!1,Ir==0?this[this.t++]=Lr:Ir+ar>this.DB?(this[this.t-1]|=(Lr&(1<<this.DB-Ir)-1)<<Ir,this[this.t++]=Lr>>this.DB-Ir):this[this.t-1]|=Lr<<Ir,(Ir+=ar)>=this.DB&&(Ir-=this.DB))}ar==8&&128&+Xt[0]&&(this.s=-1,0<Ir&&(this[this.t-1]|=(1<<this.DB-Ir)-1<<Ir)),this.clamp(),wr&&ln.ZERO.subTo(this,this)},ln.prototype.clamp=function(){for(var Xt=this.s&this.DM;0<this.t&&this[this.t-1]==Xt;)--this.t},ln.prototype.dlShiftTo=function(Xt,Jt){for(var ar=this.t-1;0<=ar;--ar)Jt[ar+Xt]=this[ar];for(ar=Xt-1;0<=ar;--ar)Jt[ar]=0;Jt.t=this.t+Xt,Jt.s=this.s},ln.prototype.drShiftTo=function(Xt,Jt){for(var ar=Xt;ar<this.t;++ar)Jt[ar-Xt]=this[ar];Jt.t=Math.max(this.t-Xt,0),Jt.s=this.s},ln.prototype.lShiftTo=function(Xt,Jt){for(var ar=Xt%this.DB,_r=this.DB-ar,wr=(1<<_r)-1,Ir=Math.floor(Xt/this.DB),Lr=this.s<<ar&this.DM,Hr=this.t-1;0<=Hr;--Hr)Jt[Hr+Ir+1]=this[Hr]>>_r|Lr,Lr=(this[Hr]&wr)<<ar;for(Hr=Ir-1;0<=Hr;--Hr)Jt[Hr]=0;Jt[Ir]=Lr,Jt.t=this.t+Ir+1,Jt.s=this.s,Jt.clamp()},ln.prototype.rShiftTo=function(Xt,Jt){Jt.s=this.s;var ar=Math.floor(Xt/this.DB);if(ar>=this.t)Jt.t=0;else{var _r=Xt%this.DB,wr=this.DB-_r,Ir=(1<<_r)-1;Jt[0]=this[ar]>>_r;for(var Lr=ar+1;Lr<this.t;++Lr)Jt[Lr-ar-1]|=(this[Lr]&Ir)<<wr,Jt[Lr-ar]=this[Lr]>>_r;0<_r&&(Jt[this.t-ar-1]|=(this.s&Ir)<<wr),Jt.t=this.t-ar,Jt.clamp()}},ln.prototype.subTo=function(Xt,Jt){for(var ar=0,_r=0,wr=Math.min(Xt.t,this.t);ar<wr;)_r+=this[ar]-Xt[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;if(Xt.t<this.t){for(_r-=Xt.s;ar<this.t;)_r+=this[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;_r+=this.s}else{for(_r+=this.s;ar<Xt.t;)_r-=Xt[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;_r-=Xt.s}Jt.s=_r<0?-1:0,_r<-1?Jt[ar++]=this.DV+_r:0<_r&&(Jt[ar++]=_r),Jt.t=ar,Jt.clamp()},ln.prototype.multiplyTo=function(Xt,Jt){var ar=this.abs(),_r=Xt.abs(),wr=ar.t;for(Jt.t=wr+_r.t;0<=--wr;)Jt[wr]=0;for(wr=0;wr<_r.t;++wr)Jt[wr+ar.t]=ar.am(0,_r[wr],Jt,wr,0,ar.t);Jt.s=0,Jt.clamp(),this.s!=Xt.s&&ln.ZERO.subTo(Jt,Jt)},ln.prototype.squareTo=function(Xt){for(var Jt=this.abs(),ar=Xt.t=2*Jt.t;0<=--ar;)Xt[ar]=0;for(ar=0;ar<Jt.t-1;++ar){var _r=Jt.am(ar,Jt[ar],Xt,2*ar,0,1);(Xt[ar+Jt.t]+=Jt.am(ar+1,2*Jt[ar],Xt,2*ar+1,_r,Jt.t-ar-1))>=Jt.DV&&(Xt[ar+Jt.t]-=Jt.DV,Xt[ar+Jt.t+1]=1)}0<Xt.t&&(Xt[Xt.t-1]+=Jt.am(ar,Jt[ar],Xt,2*ar,0,1)),Xt.s=0,Xt.clamp()},ln.prototype.divRemTo=function(Xt,Jt,ar){if(!((_n=Xt.abs()).t<=0)){var _r=this.abs();if(_r.t<_n.t)Jt!=null&&Jt.fromInt(0),ar!=null&&this.copyTo(ar);else{ar==null&&(ar=Nn());var wr=Nn(),Ir=this.s,Lr=(Xt=Xt.s,this.DB-zo(_n[_n.t-1])),Hr=(0<Lr?(_n.lShiftTo(Lr,wr),_r.lShiftTo(Lr,ar)):(_n.copyTo(wr),_r.copyTo(ar)),wr.t),Tn=wr[Hr-1];if(Tn!=0){var _n=Tn*(1<<this.F1)+(1<Hr?wr[Hr-2]>>this.F2:0),An=this.FV/_n,Ln=(1<<this.F1)/_n,ao=1<<this.F2,oo=ar.t,So=oo-Hr,Xn=Jt??Nn();for(wr.dlShiftTo(So,Xn),0<=ar.compareTo(Xn)&&(ar[ar.t++]=1,ar.subTo(Xn,ar)),ln.ONE.dlShiftTo(Hr,Xn),Xn.subTo(wr,wr);wr.t<Hr;)wr[wr.t++]=0;for(;0<=--So;){var ko=ar[--oo]==Tn?this.DM:Math.floor(ar[oo]*An+(ar[oo-1]+ao)*Ln);if((ar[oo]+=wr.am(0,ko,ar,So,0,Hr))<ko)for(wr.dlShiftTo(So,Xn),ar.subTo(Xn,ar);ar[oo]<--ko;)ar.subTo(Xn,ar)}Jt!=null&&(ar.drShiftTo(Hr,Jt),Ir!=Xt&&ln.ZERO.subTo(Jt,Jt)),ar.t=Hr,ar.clamp(),0<Lr&&ar.rShiftTo(Lr,ar),Ir<0&&ln.ZERO.subTo(ar,ar)}}}},ln.prototype.invDigit=function(){if(this.t<1)return 0;var Xt=this[0];if(!(1&Xt))return 0;var Jt=3&Xt;return 0<(Jt=(Jt=(Jt=(Jt=Jt*(2-(15&Xt)*Jt)&15)*(2-(255&Xt)*Jt)&255)*(2-((65535&Xt)*Jt&65535))&65535)*(2-Xt*Jt%this.DV)%this.DV)?this.DV-Jt:-Jt},ln.prototype.isEven=function(){return(0<this.t?1&this[0]:this.s)==0},ln.prototype.exp=function(Xt,Jt){if(4294967295<Xt||Xt<1)return ln.ONE;var ar,_r=Nn(),wr=Nn(),Ir=Jt.convert(this),Lr=zo(Xt)-1;for(Ir.copyTo(_r);0<=--Lr;)Jt.sqrTo(_r,wr),0<(Xt&1<<Lr)?Jt.mulTo(wr,Ir,_r):(ar=_r,_r=wr,wr=ar);return Jt.revert(_r)},ln.prototype.chunkSize=function(Xt){return Math.floor(Math.LN2*this.DB/Math.log(Xt))},ln.prototype.toRadix=function(Xt){if(Xt==null&&(Xt=10),this.signum()==0||Xt<2||36<Xt)return"0";var Jt=this.chunkSize(Xt),ar=Math.pow(Xt,Jt),_r=Io(ar),wr=Nn(),Ir=Nn(),Lr="";for(this.divRemTo(_r,wr,Ir);0<wr.signum();)Lr=(ar+Ir.intValue()).toString(Xt).substr(1)+Lr,wr.divRemTo(_r,wr,Ir);return Ir.intValue().toString(Xt)+Lr},ln.prototype.fromRadix=function(Xt,Jt){this.fromInt(0);for(var ar=this.chunkSize(Jt=Jt??10),_r=Math.pow(Jt,ar),wr=!1,Ir=0,Lr=0,Hr=0;Hr<Xt.length;++Hr){var Tn=ts(Xt,Hr);Tn<0?Xt.charAt(Hr)=="-"&&this.signum()==0&&(wr=!0):(Lr=Jt*Lr+Tn,++Ir>=ar&&(this.dMultiply(_r),this.dAddOffset(Lr,0),Lr=Ir=0))}0<Ir&&(this.dMultiply(Math.pow(Jt,Ir)),this.dAddOffset(Lr,0)),wr&&ln.ZERO.subTo(this,this)},ln.prototype.fromNumber=function(Xt,Jt,ar){if(typeof Jt=="number")if(Xt<2)this.fromInt(1);else for(this.fromNumber(Xt,ar),this.testBit(Xt-1)||this.bitwiseTo(ln.ONE.shiftLeft(Xt-1),gr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Jt);)this.dAddOffset(2,0),this.bitLength()>Xt&&this.subTo(ln.ONE.shiftLeft(Xt-1),this);else{var _r=7&Xt;(ar=[]).length=1+(Xt>>3),Jt.nextBytes(ar),0<_r?ar[0]&=(1<<_r)-1:ar[0]=0,this.fromString(ar,256)}},ln.prototype.bitwiseTo=function(Xt,Jt,ar){for(var _r,wr=Math.min(Xt.t,this.t),Ir=0;Ir<wr;++Ir)ar[Ir]=Jt(this[Ir],Xt[Ir]);if(Xt.t<this.t){for(_r=Xt.s&this.DM,Ir=wr;Ir<this.t;++Ir)ar[Ir]=Jt(this[Ir],_r);ar.t=this.t}else{for(_r=this.s&this.DM,Ir=wr;Ir<Xt.t;++Ir)ar[Ir]=Jt(_r,Xt[Ir]);ar.t=Xt.t}ar.s=Jt(this.s,Xt.s),ar.clamp()},ln.prototype.changeBit=function(Xt,Jt){return Xt=ln.ONE.shiftLeft(Xt),this.bitwiseTo(Xt,Jt,Xt),Xt},ln.prototype.addTo=function(Xt,Jt){for(var ar=0,_r=0,wr=Math.min(Xt.t,this.t);ar<wr;)_r+=this[ar]+Xt[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;if(Xt.t<this.t){for(_r+=Xt.s;ar<this.t;)_r+=this[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;_r+=this.s}else{for(_r+=this.s;ar<Xt.t;)_r+=Xt[ar],Jt[ar++]=_r&this.DM,_r>>=this.DB;_r+=Xt.s}Jt.s=_r<0?-1:0,0<_r?Jt[ar++]=_r:_r<-1&&(Jt[ar++]=this.DV+_r),Jt.t=ar,Jt.clamp()},ln.prototype.dMultiply=function(Xt){this[this.t]=this.am(0,Xt-1,this,0,0,this.t),++this.t,this.clamp()},ln.prototype.dAddOffset=function(Xt,Jt){if(Xt!=0){for(;this.t<=Jt;)this[this.t++]=0;for(this[Jt]+=Xt;this[Jt]>=this.DV;)this[Jt]-=this.DV,++Jt>=this.t&&(this[this.t++]=0),++this[Jt]}},ln.prototype.multiplyLowerTo=function(Xt,Jt,ar){var _r=Math.min(this.t+Xt.t,Jt);for(ar.s=0,ar.t=_r;0<_r;)ar[--_r]=0;for(var wr=ar.t-this.t;_r<wr;++_r)ar[_r+this.t]=this.am(0,Xt[_r],ar,_r,0,this.t);for(wr=Math.min(Xt.t,Jt);_r<wr;++_r)this.am(0,Xt[_r],ar,_r,0,Jt-_r);ar.clamp()},ln.prototype.multiplyUpperTo=function(Xt,Jt,ar){var _r=ar.t=this.t+Xt.t- --Jt;for(ar.s=0;0<=--_r;)ar[_r]=0;for(_r=Math.max(Jt-this.t,0);_r<Xt.t;++_r)ar[this.t+_r-Jt]=this.am(Jt-_r,Xt[_r],ar,0,0,this.t+_r-Jt);ar.clamp(),ar.drShiftTo(1,ar)},ln.prototype.modInt=function(Xt){if(Xt<=0)return 0;var Jt=this.DV%Xt,ar=this.s<0?Xt-1:0;if(0<this.t)if(Jt==0)ar=this[0]%Xt;else for(var _r=this.t-1;0<=_r;--_r)ar=(Jt*ar+this[_r])%Xt;return ar},ln.prototype.millerRabin=function(Xt){var Jt=this.subtract(ln.ONE),ar=Jt.getLowestSetBit();if(ar<=0)return!1;var _r=Jt.shiftRight(ar);(Xt=Xt+1>>1)>ro.length&&(Xt=ro.length);for(var wr=Nn(),Ir=0;Ir<Xt;++Ir){wr.fromInt(ro[Math.floor(Math.random()*ro.length)]);var Lr=wr.modPow(_r,this);if(Lr.compareTo(ln.ONE)!=0&&Lr.compareTo(Jt)!=0){for(var Hr=1;Hr++<ar&&Lr.compareTo(Jt)!=0;)if((Lr=Lr.modPowInt(2,this)).compareTo(ln.ONE)==0)return!1;if(Lr.compareTo(Jt)!=0)return!1}}return!0},ln.prototype.square=function(){var Xt=Nn();return this.squareTo(Xt),Xt},ln.prototype.gcda=function(Xt,Jt){var ar,_r=this.s<0?this.negate():this.clone(),wr=Xt.s<0?Xt.negate():Xt.clone(),Ir=(_r.compareTo(wr)<0&&(Xt=_r,_r=wr,wr=Xt),_r.getLowestSetBit()),Lr=wr.getLowestSetBit();Lr<0?Jt(_r):(0<(Lr=Ir<Lr?Ir:Lr)&&(_r.rShiftTo(Lr,_r),wr.rShiftTo(Lr,wr)),ar=function(){0<(Ir=_r.getLowestSetBit())&&_r.rShiftTo(Ir,_r),0<(Ir=wr.getLowestSetBit())&&wr.rShiftTo(Ir,wr),0<=_r.compareTo(wr)?(_r.subTo(wr,_r),_r.rShiftTo(1,_r)):(wr.subTo(_r,wr),wr.rShiftTo(1,wr)),0<_r.signum()?setTimeout(ar,0):(0<Lr&&wr.lShiftTo(Lr,wr),setTimeout(function(){Jt(wr)},0))},setTimeout(ar,10))},ln.prototype.fromNumberAsync=function(Xt,Jt,ar,_r){var wr,Ir,Lr;typeof Jt=="number"?Xt<2?this.fromInt(1):(this.fromNumber(Xt,ar),this.testBit(Xt-1)||this.bitwiseTo(ln.ONE.shiftLeft(Xt-1),gr,this),this.isEven()&&this.dAddOffset(1,0),wr=this,Ir=function(){wr.dAddOffset(2,0),wr.bitLength()>Xt&&wr.subTo(ln.ONE.shiftLeft(Xt-1),wr),wr.isProbablePrime(Jt)?setTimeout(function(){_r()},0):setTimeout(Ir,0)},setTimeout(Ir,0)):(ar=7&Xt,(Lr=[]).length=1+(Xt>>3),Jt.nextBytes(Lr),0<ar?Lr[0]&=(1<<ar)-1:Lr[0]=0,this.fromString(Lr,256))},ln),xo=(Uo.prototype.convert=function(Xt){return Xt},Uo.prototype.revert=function(Xt){return Xt},Uo.prototype.mulTo=function(Xt,Jt,ar){Xt.multiplyTo(Jt,ar)},Uo.prototype.sqrTo=function(Xt,Jt){Xt.squareTo(Jt)},Uo),_i=($o.prototype.convert=function(Xt){return Xt.s<0||0<=Xt.compareTo(this.m)?Xt.mod(this.m):Xt},$o.prototype.revert=function(Xt){return Xt},$o.prototype.reduce=function(Xt){Xt.divRemTo(this.m,null,Xt)},$o.prototype.mulTo=function(Xt,Jt,ar){Xt.multiplyTo(Jt,ar),this.reduce(ar)},$o.prototype.sqrTo=function(Xt,Jt){Xt.squareTo(Jt),this.reduce(Jt)},$o),es=(Do.prototype.convert=function(Xt){var Jt=Nn();return Xt.abs().dlShiftTo(this.m.t,Jt),Jt.divRemTo(this.m,null,Jt),Xt.s<0&&0<Jt.compareTo(In.ZERO)&&this.m.subTo(Jt,Jt),Jt},Do.prototype.revert=function(Xt){var Jt=Nn();return Xt.copyTo(Jt),this.reduce(Jt),Jt},Do.prototype.reduce=function(Xt){for(;Xt.t<=this.mt2;)Xt[Xt.t++]=0;for(var Jt=0;Jt<this.m.t;++Jt){var ar=32767&Xt[Jt],_r=ar*this.mpl+((ar*this.mph+(Xt[Jt]>>15)*this.mpl&this.um)<<15)&Xt.DM;for(Xt[ar=Jt+this.m.t]+=this.m.am(0,_r,Xt,Jt,0,this.m.t);Xt[ar]>=Xt.DV;)Xt[ar]-=Xt.DV,Xt[++ar]++}Xt.clamp(),Xt.drShiftTo(this.m.t,Xt),0<=Xt.compareTo(this.m)&&Xt.subTo(this.m,Xt)},Do.prototype.mulTo=function(Xt,Jt,ar){Xt.multiplyTo(Jt,ar),this.reduce(ar)},Do.prototype.sqrTo=function(Xt,Jt){Xt.squareTo(Jt),this.reduce(Jt)},Do),os=(Mo.prototype.convert=function(Xt){if(Xt.s<0||Xt.t>2*this.m.t)return Xt.mod(this.m);if(Xt.compareTo(this.m)<0)return Xt;var Jt=Nn();return Xt.copyTo(Jt),this.reduce(Jt),Jt},Mo.prototype.revert=function(Xt){return Xt},Mo.prototype.reduce=function(Xt){for(Xt.drShiftTo(this.m.t-1,this.r2),Xt.t>this.m.t+1&&(Xt.t=this.m.t+1,Xt.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Xt.compareTo(this.r2)<0;)Xt.dAddOffset(1,this.m.t+1);for(Xt.subTo(this.r2,Xt);0<=Xt.compareTo(this.m);)Xt.subTo(this.m,Xt)},Mo.prototype.mulTo=function(Xt,Jt,ar){Xt.multiplyTo(Jt,ar),this.reduce(ar)},Mo.prototype.sqrTo=function(Xt,Jt){Xt.squareTo(Jt),this.reduce(Jt)},Mo);function Mo(Xt){this.m=Xt,this.r2=Nn(),this.q3=Nn(),In.ONE.dlShiftTo(2*Xt.t,this.r2),this.mu=this.r2.divide(Xt)}function Do(Xt){this.m=Xt,this.mp=Xt.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<Xt.DB-15)-1,this.mt2=2*Xt.t}function $o(Xt){this.m=Xt}function Uo(){}function ln(Xt,Jt,ar){Xt!=null&&(typeof Xt=="number"?this.fromNumber(Xt,Jt,ar):Jt==null&&typeof Xt!="string"?this.fromString(Xt,256):this.fromString(Xt,Jt))}function Yo(Xt){var Jt=Xt.get();if(this.tagClass=Jt>>6,this.tagConstructed=(32&Jt)!=0,this.tagNumber=31&Jt,this.tagNumber==31){for(var ar=new On;Jt=Xt.get(),ar.mulAdd(128,127&Jt),128&Jt;);this.tagNumber=ar.simplify()}}function fo(Xt,Jt,ar,_r,wr){if(!(_r instanceof io))throw new Error("Invalid tag value.");this.stream=Xt,this.header=Jt,this.length=ar,this.tag=_r,this.sub=wr}function _o(Xt,Jt){this.hexDigits="0123456789ABCDEF",Xt instanceof _o?(this.enc=Xt.enc,this.pos=Xt.pos):(this.enc=Xt,this.pos=Jt)}function Nn(){return new In(null)}function no(Xt,Jt){return new In(Xt,Jt)}Gt=(Wt=typeof navigator<"u")&&navigator.appName=="Microsoft Internet Explorer"?(In.prototype.am=function(Xt,Jt,ar,_r,wr,Ir){for(var Lr=32767&Jt,Hr=Jt>>15;0<=--Ir;){var Tn=32767&this[Xt],_n=this[Xt++]>>15,An=Hr*Tn+_n*Lr;wr=((Tn=Lr*Tn+((32767&An)<<15)+ar[_r]+(1073741823&wr))>>>30)+(An>>>15)+Hr*_n+(wr>>>30),ar[_r++]=1073741823&Tn}return wr},30):Wt&&navigator.appName!="Netscape"?(In.prototype.am=function(Xt,Jt,ar,_r,wr,Ir){for(;0<=--Ir;){var Lr=Jt*this[Xt++]+ar[_r]+wr;wr=Math.floor(Lr/67108864),ar[_r++]=67108863&Lr}return wr},26):(In.prototype.am=function(Xt,Jt,ar,_r,wr,Ir){for(var Lr=16383&Jt,Hr=Jt>>14;0<=--Ir;){var Tn=16383&this[Xt],_n=this[Xt++]>>14,An=Hr*Tn+_n*Lr;wr=((Tn=Lr*Tn+((16383&An)<<14)+ar[_r]+wr)>>28)+(An>>14)+Hr*_n,ar[_r++]=268435455&Tn}return wr},28),In.prototype.DB=Gt,In.prototype.DM=(1<<Gt)-1,In.prototype.DV=1<<Gt,In.prototype.FV=Math.pow(2,52),In.prototype.F1=52-Gt,In.prototype.F2=2*Gt-52;for(var Go=[],Fo="0".charCodeAt(0),Co=0;Co<=9;++Co)Go[Fo++]=Co;for(Fo="a".charCodeAt(0),Co=10;Co<36;++Co)Go[Fo++]=Co;for(Fo="A".charCodeAt(0),Co=10;Co<36;++Co)Go[Fo++]=Co;function ts(Xt,Jt){return(Xt=Go[Xt.charCodeAt(Jt)])==null?-1:Xt}function Io(Xt){var Jt=Nn();return Jt.fromInt(Xt),Jt}function zo(Xt){var Jt,ar=1;return(Jt=Xt>>>16)!=0&&(Xt=Jt,ar+=16),(Jt=Xt>>8)!=0&&(Xt=Jt,ar+=8),(Jt=Xt>>4)!=0&&(Xt=Jt,ar+=4),(Jt=Xt>>2)!=0&&(Xt=Jt,ar+=2),(Jt=Xt>>1)!=0&&(Xt=Jt,ar+=1),ar}In.ZERO=Io(0),In.ONE=Io(1),Ko.prototype.init=function(Xt){for(var Jt,ar,_r=0;_r<256;++_r)this.S[_r]=_r;for(_r=Jt=0;_r<256;++_r)Jt=Jt+this.S[_r]+Xt[_r%Xt.length]&255,ar=this.S[_r],this.S[_r]=this.S[Jt],this.S[Jt]=ar;this.i=0,this.j=0},Ko.prototype.next=function(){var Xt;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,Xt=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=Xt,this.S[Xt+this.S[this.i]&255]};var Vo,ss=Ko,Bo=null;function Ko(){this.i=0,this.j=0,this.S=[]}Bo=[];var Po=0,Wo=void 0;if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){var Qo=new Uint32Array(256);for(window.crypto.getRandomValues(Qo),Wo=0;Wo<Qo.length;++Wo)Bo[Po++]=255&Qo[Wo]}rs.prototype.nextBytes=function(Xt){for(var Jt=0;Jt<Xt.length;++Jt)Xt[Jt]=function(){if(Vo==null){for(Vo=new ss;Po<256;){var ar=Math.floor(65536*Math.random());Bo[Po++]=255&ar}for(Vo.init(Bo),Po=0;Po<Bo.length;++Po)Bo[Po]=0;Po=0}return Vo.next()}()};var Xo=rs,qo=(Wt=(Eo.prototype.doPublic=function(Xt){return Xt.modPowInt(this.e,this.n)},Eo.prototype.doPrivate=function(Xt){if(this.p==null||this.q==null)return Xt.modPow(this.d,this.n);for(var Jt=Xt.mod(this.p).modPow(this.dmp1,this.p),ar=Xt.mod(this.q).modPow(this.dmq1,this.q);Jt.compareTo(ar)<0;)Jt=Jt.add(this.p);return Jt.subtract(ar).multiply(this.coeff).mod(this.p).multiply(this.q).add(ar)},Eo.prototype.setPublic=function(Xt,Jt){Xt!=null&&Jt!=null&&0<Xt.length&&0<Jt.length?(this.n=no(Xt,16),this.e=parseInt(Jt,16)):console.error("Invalid RSA public key")},Eo.prototype.encrypt=function(Xt){var Jt=this.n.bitLength()+7>>3;if(Xt=function(Ir,Lr){if(Lr<Ir.length+11)return console.error("Message too long for RSA"),null;for(var Hr=[],Tn=Ir.length-1;0<=Tn&&0<Lr;){var _n=Ir.charCodeAt(Tn--);_n<128?Hr[--Lr]=_n:127<_n&&_n<2048?(Hr[--Lr]=63&_n|128,Hr[--Lr]=_n>>6|192):(Hr[--Lr]=63&_n|128,Hr[--Lr]=_n>>6&63|128,Hr[--Lr]=_n>>12|224)}Hr[--Lr]=0;for(var An=new Xo,Ln=[];2<Lr;){for(Ln[0]=0;Ln[0]==0;)An.nextBytes(Ln);Hr[--Lr]=Ln[0]}return Hr[--Lr]=2,Hr[--Lr]=0,new In(Hr)}(Xt,Jt),Xt==null||(Xt=this.doPublic(Xt))==null)return null;for(var ar=Xt.toString(16),_r=ar.length,wr=0;wr<2*Jt-_r;wr++)ar="0"+ar;return ar},Eo.prototype.setPrivate=function(Xt,Jt,ar){Xt!=null&&Jt!=null&&0<Xt.length&&0<Jt.length?(this.n=no(Xt,16),this.e=parseInt(Jt,16),this.d=no(ar,16)):console.error("Invalid RSA private key")},Eo.prototype.setPrivateEx=function(Xt,Jt,ar,_r,wr,Ir,Lr,Hr){Xt!=null&&Jt!=null&&0<Xt.length&&0<Jt.length?(this.n=no(Xt,16),this.e=parseInt(Jt,16),this.d=no(ar,16),this.p=no(_r,16),this.q=no(wr,16),this.dmp1=no(Ir,16),this.dmq1=no(Lr,16),this.coeff=no(Hr,16)):console.error("Invalid RSA private key")},Eo.prototype.generate=function(Xt,Jt){var ar=new Xo,_r=Xt>>1;this.e=parseInt(Jt,16);for(var wr=new In(Jt,16);;){for(;this.p=new In(Xt-_r,1,ar),this.p.subtract(In.ONE).gcd(wr).compareTo(In.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new In(_r,1,ar),this.q.subtract(In.ONE).gcd(wr).compareTo(In.ONE)!=0||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(Ir=this.p,this.p=this.q,this.q=Ir);var Ir=this.p.subtract(In.ONE),Lr=this.q.subtract(In.ONE),Hr=Ir.multiply(Lr);if(Hr.gcd(wr).compareTo(In.ONE)==0){this.n=this.p.multiply(this.q),this.d=wr.modInverse(Hr),this.dmp1=this.d.mod(Ir),this.dmq1=this.d.mod(Lr),this.coeff=this.q.modInverse(this.p);break}}},Eo.prototype.decrypt=function(Xt){if(Xt=no(Xt,16),(Xt=this.doPrivate(Xt))==null)return null;for(var Jt=this.n.bitLength()+7>>3,ar=Xt.toByteArray(),_r=0;_r<ar.length&&ar[_r]==0;)++_r;if(ar.length-_r!=Jt-1||ar[_r]!=2)return null;for(++_r;ar[_r]!=0;)if(++_r>=ar.length)return null;for(var wr="";++_r<ar.length;){var Ir=255&ar[_r];Ir<128?wr+=String.fromCharCode(Ir):191<Ir&&Ir<224?(wr+=String.fromCharCode((31&Ir)<<6|63&ar[_r+1]),++_r):(wr+=String.fromCharCode((15&Ir)<<12|(63&ar[_r+1])<<6|63&ar[_r+2]),_r+=2)}return wr},Eo.prototype.generateAsync=function(Xt,Jt,ar){var _r=new Xo,wr=Xt>>1,Ir=(this.e=parseInt(Jt,16),new In(Jt,16)),Lr=this,Hr=function(){var Tn=function(){Lr.p.compareTo(Lr.q)<=0&&(An=Lr.p,Lr.p=Lr.q,Lr.q=An);var An=Lr.p.subtract(In.ONE),Ln=Lr.q.subtract(In.ONE),ao=An.multiply(Ln);ao.gcd(Ir).compareTo(In.ONE)==0?(Lr.n=Lr.p.multiply(Lr.q),Lr.d=Ir.modInverse(ao),Lr.dmp1=Lr.d.mod(An),Lr.dmq1=Lr.d.mod(Ln),Lr.coeff=Lr.q.modInverse(Lr.p),setTimeout(function(){ar()},0)):setTimeout(Hr,0)},_n=function(){Lr.q=Nn(),Lr.q.fromNumberAsync(wr,1,_r,function(){Lr.q.subtract(In.ONE).gcda(Ir,function(An){An.compareTo(In.ONE)==0&&Lr.q.isProbablePrime(10)?setTimeout(Tn,0):setTimeout(_n,0)})})};setTimeout(function An(){Lr.p=Nn(),Lr.p.fromNumberAsync(Xt-wr,1,_r,function(){Lr.p.subtract(In.ONE).gcda(Ir,function(Ln){Ln.compareTo(In.ONE)==0&&Lr.p.isProbablePrime(10)?setTimeout(_n,0):setTimeout(An,0)})})},0)};setTimeout(Hr,0)},Eo.prototype.sign=function(Xt,Jt,ar){return ar=function(_r,wr){if(wr<_r.length+22)return console.error("Message too long for RSA"),null;for(var Ir=wr-_r.length-6,Lr="",Hr=0;Hr<Ir;Hr+=2)Lr+="ff";return no("0001"+Lr+"00"+_r,16)}((qo[ar]||"")+Jt(Xt).toString(),this.n.bitLength()/4),ar==null||(Jt=this.doPrivate(ar))==null?null:1&(Xt=Jt.toString(16)).length?"0"+Xt:Xt},Eo.prototype.verify=function(Xt,Jt,ar){return Jt=no(Jt,16),(Jt=this.doPublic(Jt))==null?null:function(_r){for(var wr in qo)if(qo.hasOwnProperty(wr)){var Ir=(wr=qo[wr]).length;if(_r.substr(0,Ir)==wr)return _r.substr(Ir)}return _r}(Jt.toString(16).replace(/^1f+00/,""))==ar(Xt).toString()},Eo),{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function Eo(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function rs(){}(Gt={}).lang={extend:function(Xt,Jt,ar){if(!Jt||!Xt)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function _r(){}if(_r.prototype=Jt.prototype,Xt.prototype=new _r,(Xt.prototype.constructor=Xt).superclass=Jt.prototype,Jt.prototype.constructor==Object.prototype.constructor&&(Jt.prototype.constructor=Jt),ar){for(var wr in ar)Xt.prototype[wr]=ar[wr];Jt=function(){};var Ir=["toString","valueOf"];try{typeof navigator<"u"&&/MSIE/.test(navigator.userAgent)&&(Jt=function(Lr,Hr){for(wr=0;wr<Ir.length;wr+=1){var Tn=Ir[wr],_n=Hr[Tn];typeof _n=="function"&&_n!=Object.prototype[Tn]&&(Lr[Tn]=_n)}})}catch{}Jt(Xt.prototype,ar)}}};var Yr={};Yr.asn1!==void 0&&Yr.asn1||(Yr.asn1={}),Yr.asn1.ASN1Util=new function(){this.integerToByteHex=function(Xt){return(Xt=Xt.toString(16)).length%2==1?"0"+Xt:Xt},this.bigIntToMinTwosComplementsHex=function(Xt){var Jt=Xt.toString(16);if(Jt.substr(0,1)!="-")Jt.length%2==1?Jt="0"+Jt:Jt.match(/^[0-7]/)||(Jt="00"+Jt);else{var ar=Jt.substr(1).length;ar%2==1?ar+=1:Jt.match(/^[0-7]/)||(ar+=2);for(var _r="",wr=0;wr<ar;wr++)_r+="f";Jt=new In(_r,16).xor(Xt).add(In.ONE).toString(16).replace(/^-/,"")}return Jt},this.getPEMStringFromHex=function(Xt,Jt){return hextopem(Xt,Jt)},this.newObject=function(Xt){var Jt,ar=(Jt=Yr.asn1).DERBoolean,_r=Jt.DERInteger,wr=Jt.DERBitString,Ir=Jt.DEROctetString,Lr=Jt.DERNull,Hr=Jt.DERObjectIdentifier,Tn=Jt.DEREnumerated,_n=Jt.DERUTF8String,An=Jt.DERNumericString,Ln=Jt.DERPrintableString,ao=Jt.DERTeletexString,oo=Jt.DERIA5String,So=Jt.DERUTCTime,Xn=Jt.DERGeneralizedTime,ko=Jt.DERSequence,jo=Jt.DERSet,Ao=Jt.DERTaggedObject,Lo=Jt.ASN1Util.newObject;if((Jt=Object.keys(Xt)).length!=1)throw"key of param shall be only one.";if(Jt=Jt[0],":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+Jt+":")==-1)throw"undefined key: "+Jt;if(Jt=="bool")return new ar(Xt[Jt]);if(Jt=="int")return new _r(Xt[Jt]);if(Jt=="bitstr")return new wr(Xt[Jt]);if(Jt=="octstr")return new Ir(Xt[Jt]);if(Jt=="null")return new Lr(Xt[Jt]);if(Jt=="oid")return new Hr(Xt[Jt]);if(Jt=="enum")return new Tn(Xt[Jt]);if(Jt=="utf8str")return new _n(Xt[Jt]);if(Jt=="numstr")return new An(Xt[Jt]);if(Jt=="prnstr")return new Ln(Xt[Jt]);if(Jt=="telstr")return new ao(Xt[Jt]);if(Jt=="ia5str")return new oo(Xt[Jt]);if(Jt=="utctime")return new So(Xt[Jt]);if(Jt=="gentime")return new Xn(Xt[Jt]);if(Jt=="seq"){for(var wo=Xt[Jt],Ro=[],To=0;To<wo.length;To++){var Jn=Lo(wo[To]);Ro.push(Jn)}return new ko({array:Ro})}if(Jt=="set"){for(wo=Xt[Jt],Ro=[],To=0;To<wo.length;To++)Jn=Lo(wo[To]),Ro.push(Jn);return new jo({array:Ro})}if(Jt=="tag"){if(ar=Xt[Jt],Object.prototype.toString.call(ar)==="[object Array]"&&ar.length==3)return _r=Lo(ar[2]),new Ao({tag:ar[0],explicit:ar[1],obj:_r});if(wr={},ar.explicit!==void 0&&(wr.explicit=ar.explicit),ar.tag!==void 0&&(wr.tag=ar.tag),ar.obj===void 0)throw"obj shall be specified for 'tag'.";return wr.obj=Lo(ar.obj),new Ao(wr)}},this.jsonToASN1HEX=function(Xt){return this.newObject(Xt).getEncodedHex()}},Yr.asn1.ASN1Util.oidHexToInt=function(Xt){for(var Jt="",ar=parseInt(Xt.substr(0,2),16),_r=(Jt=Math.floor(ar/40)+"."+ar%40,""),wr=2;wr<Xt.length;wr+=2){var Ir=("00000000"+parseInt(Xt.substr(wr,2),16).toString(2)).slice(-8);_r+=Ir.substr(1,7),Ir.substr(0,1)=="0"&&(Jt=Jt+"."+new In(_r,2).toString(10),_r="")}return Jt},Yr.asn1.ASN1Util.oidIntToHex=function(Xt){function Jt(Ir){return(Ir=Ir.toString(16)).length==1?"0"+Ir:Ir}if(!Xt.match(/^[0-9.]+$/))throw"malformed oid string: "+Xt;var ar="",_r=Xt.split(".");ar+=Jt(Xt=40*parseInt(_r[0])+parseInt(_r[1])),_r.splice(0,2);for(var wr=0;wr<_r.length;wr++)ar+=function(Ir){var Lr="",Hr=new In(Ir,10).toString(2),Tn=7-Hr.length%7;Tn==7&&(Tn=0);for(var _n="",An=0;An<Tn;An++)_n+="0";for(Hr=_n+Hr,An=0;An<Hr.length-1;An+=7){var Ln=Hr.substr(An,7);An!=Hr.length-7&&(Ln="1"+Ln),Lr+=Jt(parseInt(Ln,2))}return Lr}(_r[wr]);return ar},Yr.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+0+",v="+this.hV;var Xt=this.hV.length/2,Jt=Xt.toString(16);if(Jt.length%2==1&&(Jt="0"+Jt),Xt<128)return Jt;var ar=Jt.length/2;if(15<ar)throw"ASN.1 length too long to represent by 8x: n = "+Xt.toString(16);return(128+ar).toString(16)+Jt},this.getEncodedHex=function(){return this.hTLV!=null&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},Yr.asn1.DERAbstractString=function(Xt){Yr.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(Jt){this.hTLV=null,this.isModified=!0,this.s=Jt,this.hV=stohex(this.s)},this.setStringHex=function(Jt){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Jt},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(typeof Xt=="string"?this.setString(Xt):Xt.str!==void 0?this.setString(Xt.str):Xt.hex!==void 0&&this.setStringHex(Xt.hex))},Gt.lang.extend(Yr.asn1.DERAbstractString,Yr.asn1.ASN1Object),Yr.asn1.DERAbstractTime=function(Xt){Yr.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(Jt){return utc=Jt.getTime()+6e4*Jt.getTimezoneOffset(),new Date(utc)},this.formatDate=function(Jt,ar,_r){var wr=this.zeroPadding,Ir=(Jt=this.localDateToUTC(Jt),String(Jt.getFullYear()));return ar=(Ir=ar=="utc"?Ir.substr(2,2):Ir)+wr(String(Jt.getMonth()+1),2)+wr(String(Jt.getDate()),2)+wr(String(Jt.getHours()),2)+wr(String(Jt.getMinutes()),2)+wr(String(Jt.getSeconds()),2),(ar=_r===!0&&(Ir=Jt.getMilliseconds())!=0?ar+"."+wr(String(Ir),3).replace(/[0]+$/,""):ar)+"Z"},this.zeroPadding=function(Jt,ar){return Jt.length>=ar?Jt:new Array(ar-Jt.length+1).join("0")+Jt},this.getString=function(){return this.s},this.setString=function(Jt){this.hTLV=null,this.isModified=!0,this.s=Jt,this.hV=stohex(Jt)},this.setByDateValue=function(Jt,ar,_r,wr,Ir,Lr){Jt=new Date(Date.UTC(Jt,ar-1,_r,wr,Ir,Lr,0)),this.setByDate(Jt)},this.getFreshValueHex=function(){return this.hV}},Gt.lang.extend(Yr.asn1.DERAbstractTime,Yr.asn1.ASN1Object),Yr.asn1.DERAbstractStructured=function(Xt){Yr.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(Jt){this.hTLV=null,this.isModified=!0,this.asn1Array=Jt},this.appendASN1Object=function(Jt){this.hTLV=null,this.isModified=!0,this.asn1Array.push(Jt)},this.asn1Array=new Array,Xt!==void 0&&Xt.array!==void 0&&(this.asn1Array=Xt.array)},Gt.lang.extend(Yr.asn1.DERAbstractStructured,Yr.asn1.ASN1Object),Yr.asn1.DERBoolean=function(){Yr.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},Gt.lang.extend(Yr.asn1.DERBoolean,Yr.asn1.ASN1Object),Yr.asn1.DERInteger=function(Xt){Yr.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(Jt){this.hTLV=null,this.isModified=!0,this.hV=Yr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Jt)},this.setByInteger=function(Jt){Jt=new In(String(Jt),10),this.setByBigInteger(Jt)},this.setValueHex=function(Jt){this.hV=Jt},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(Xt.bigint!==void 0?this.setByBigInteger(Xt.bigint):Xt.int!==void 0?this.setByInteger(Xt.int):typeof Xt=="number"?this.setByInteger(Xt):Xt.hex!==void 0&&this.setValueHex(Xt.hex))},Gt.lang.extend(Yr.asn1.DERInteger,Yr.asn1.ASN1Object),Yr.asn1.DERBitString=function(Xt){var Jt;Xt!==void 0&&Xt.obj!==void 0&&(Jt=Yr.asn1.ASN1Util.newObject(Xt.obj),Xt.hex="00"+Jt.getEncodedHex()),Yr.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(ar){this.hTLV=null,this.isModified=!0,this.hV=ar},this.setUnusedBitsAndHexValue=function(ar,_r){if(ar<0||7<ar)throw"unused bits shall be from 0 to 7: u = "+ar;ar="0"+ar,this.hTLV=null,this.isModified=!0,this.hV=ar+_r},this.setByBinaryString=function(ar){var _r=8-(ar=ar.replace(/0+$/,"")).length%8;_r==8&&(_r=0);for(var wr=0;wr<=_r;wr++)ar+="0";var Ir="";for(wr=0;wr<ar.length-1;wr+=8){var Lr=ar.substr(wr,8);Ir+=Lr=(Lr=parseInt(Lr,2).toString(16)).length==1?"0"+Lr:Lr}this.hTLV=null,this.isModified=!0,this.hV="0"+_r+Ir},this.setByBooleanArray=function(ar){for(var _r="",wr=0;wr<ar.length;wr++)ar[wr]==1?_r+="1":_r+="0";this.setByBinaryString(_r)},this.newFalseArray=function(ar){for(var _r=new Array(ar),wr=0;wr<ar;wr++)_r[wr]=!1;return _r},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(typeof Xt=="string"&&Xt.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(Xt):Xt.hex!==void 0?this.setHexValueIncludingUnusedBits(Xt.hex):Xt.bin!==void 0?this.setByBinaryString(Xt.bin):Xt.array!==void 0&&this.setByBooleanArray(Xt.array))},Gt.lang.extend(Yr.asn1.DERBitString,Yr.asn1.ASN1Object),Yr.asn1.DEROctetString=function(Xt){var Jt;Xt!==void 0&&Xt.obj!==void 0&&(Jt=Yr.asn1.ASN1Util.newObject(Xt.obj),Xt.hex=Jt.getEncodedHex()),Yr.asn1.DEROctetString.superclass.constructor.call(this,Xt),this.hT="04"},Gt.lang.extend(Yr.asn1.DEROctetString,Yr.asn1.DERAbstractString),Yr.asn1.DERNull=function(){Yr.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Gt.lang.extend(Yr.asn1.DERNull,Yr.asn1.ASN1Object),Yr.asn1.DERObjectIdentifier=function(Xt){var Jt=function(ar){return(ar=ar.toString(16)).length==1?"0"+ar:ar};Yr.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(ar){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ar},this.setValueOidString=function(ar){if(!ar.match(/^[0-9.]+$/))throw"malformed oid string: "+ar;var _r="",wr=ar.split(".");ar=40*parseInt(wr[0])+parseInt(wr[1]),_r+=Jt(ar),wr.splice(0,2);for(var Ir=0;Ir<wr.length;Ir++)_r+=function(Lr){var Hr="",Tn=new In(Lr,10).toString(2),_n=7-Tn.length%7;_n==7&&(_n=0);for(var An="",Ln=0;Ln<_n;Ln++)An+="0";for(Tn=An+Tn,Ln=0;Ln<Tn.length-1;Ln+=7){var ao=Tn.substr(Ln,7);Ln!=Tn.length-7&&(ao="1"+ao),Hr+=Jt(parseInt(ao,2))}return Hr}(wr[Ir]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_r},this.setValueName=function(ar){var _r=Yr.asn1.x509.OID.name2oid(ar);if(_r==="")throw"DERObjectIdentifier oidName undefined: "+ar;this.setValueOidString(_r)},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(typeof Xt=="string"?Xt.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(Xt):this.setValueName(Xt):Xt.oid!==void 0?this.setValueOidString(Xt.oid):Xt.hex!==void 0?this.setValueHex(Xt.hex):Xt.name!==void 0&&this.setValueName(Xt.name))},Gt.lang.extend(Yr.asn1.DERObjectIdentifier,Yr.asn1.ASN1Object),Yr.asn1.DEREnumerated=function(Xt){Yr.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(Jt){this.hTLV=null,this.isModified=!0,this.hV=Yr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Jt)},this.setByInteger=function(Jt){Jt=new In(String(Jt),10),this.setByBigInteger(Jt)},this.setValueHex=function(Jt){this.hV=Jt},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(Xt.int!==void 0?this.setByInteger(Xt.int):typeof Xt=="number"?this.setByInteger(Xt):Xt.hex!==void 0&&this.setValueHex(Xt.hex))},Gt.lang.extend(Yr.asn1.DEREnumerated,Yr.asn1.ASN1Object),Yr.asn1.DERUTF8String=function(Xt){Yr.asn1.DERUTF8String.superclass.constructor.call(this,Xt),this.hT="0c"},Gt.lang.extend(Yr.asn1.DERUTF8String,Yr.asn1.DERAbstractString),Yr.asn1.DERNumericString=function(Xt){Yr.asn1.DERNumericString.superclass.constructor.call(this,Xt),this.hT="12"},Gt.lang.extend(Yr.asn1.DERNumericString,Yr.asn1.DERAbstractString),Yr.asn1.DERPrintableString=function(Xt){Yr.asn1.DERPrintableString.superclass.constructor.call(this,Xt),this.hT="13"},Gt.lang.extend(Yr.asn1.DERPrintableString,Yr.asn1.DERAbstractString),Yr.asn1.DERTeletexString=function(Xt){Yr.asn1.DERTeletexString.superclass.constructor.call(this,Xt),this.hT="14"},Gt.lang.extend(Yr.asn1.DERTeletexString,Yr.asn1.DERAbstractString),Yr.asn1.DERIA5String=function(Xt){Yr.asn1.DERIA5String.superclass.constructor.call(this,Xt),this.hT="16"},Gt.lang.extend(Yr.asn1.DERIA5String,Yr.asn1.DERAbstractString),Yr.asn1.DERUTCTime=function(Xt){Yr.asn1.DERUTCTime.superclass.constructor.call(this,Xt),this.hT="17",this.setByDate=function(Jt){this.hTLV=null,this.isModified=!0,this.date=Jt,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},Xt!==void 0&&(Xt.str!==void 0?this.setString(Xt.str):typeof Xt=="string"&&Xt.match(/^[0-9]{12}Z$/)?this.setString(Xt):Xt.hex!==void 0?this.setStringHex(Xt.hex):Xt.date!==void 0&&this.setByDate(Xt.date))},Gt.lang.extend(Yr.asn1.DERUTCTime,Yr.asn1.DERAbstractTime),Yr.asn1.DERGeneralizedTime=function(Xt){Yr.asn1.DERGeneralizedTime.superclass.constructor.call(this,Xt),this.hT="18",this.withMillis=!1,this.setByDate=function(Jt){this.hTLV=null,this.isModified=!0,this.date=Jt,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},Xt!==void 0&&(Xt.str!==void 0?this.setString(Xt.str):typeof Xt=="string"&&Xt.match(/^[0-9]{14}Z$/)?this.setString(Xt):Xt.hex!==void 0?this.setStringHex(Xt.hex):Xt.date!==void 0&&this.setByDate(Xt.date),Xt.millis===!0&&(this.withMillis=!0))},Gt.lang.extend(Yr.asn1.DERGeneralizedTime,Yr.asn1.DERAbstractTime),Yr.asn1.DERSequence=function(Xt){Yr.asn1.DERSequence.superclass.constructor.call(this,Xt),this.hT="30",this.getFreshValueHex=function(){for(var Jt="",ar=0;ar<this.asn1Array.length;ar++)Jt+=this.asn1Array[ar].getEncodedHex();return this.hV=Jt,this.hV}},Gt.lang.extend(Yr.asn1.DERSequence,Yr.asn1.DERAbstractStructured),Yr.asn1.DERSet=function(Xt){Yr.asn1.DERSet.superclass.constructor.call(this,Xt),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var Jt=new Array,ar=0;ar<this.asn1Array.length;ar++){var _r=this.asn1Array[ar];Jt.push(_r.getEncodedHex())}return this.sortFlag==1&&Jt.sort(),this.hV=Jt.join(""),this.hV},Xt!==void 0&&Xt.sortflag!==void 0&&Xt.sortflag==0&&(this.sortFlag=!1)},Gt.lang.extend(Yr.asn1.DERSet,Yr.asn1.DERAbstractStructured),Yr.asn1.DERTaggedObject=function(Xt){Yr.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Jt,ar,_r){this.hT=ar,this.isExplicit=Jt,this.asn1Object=_r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=_r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,ar),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},Xt!==void 0&&(Xt.tag!==void 0&&(this.hT=Xt.tag),Xt.explicit!==void 0&&(this.isExplicit=Xt.explicit),Xt.obj!==void 0&&(this.asn1Object=Xt.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Gt.lang.extend(Yr.asn1.DERTaggedObject,Yr.asn1.ASN1Object),Jo=function(Xt,Jt){return(Jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ar,_r){ar.__proto__=_r}||function(ar,_r){for(var wr in _r)Object.prototype.hasOwnProperty.call(_r,wr)&&(ar[wr]=_r[wr])})(Xt,Jt)};var Jo,ns=function(Xt){function Jt(Ir){var Lr=Xt.call(this)||this;return Ir&&(typeof Ir=="string"?Lr.parseKey(Ir):(Jt.hasPrivateKeyProperty(Ir)||Jt.hasPublicKeyProperty(Ir))&&Lr.parsePropertiesFrom(Ir)),Lr}var ar=Jt,_r=Xt;if(typeof _r!="function"&&_r!==null)throw new TypeError("Class extends value "+String(_r)+" is not a constructor or null");function wr(){this.constructor=ar}return Jo(ar,_r),ar.prototype=_r===null?Object.create(_r):(wr.prototype=_r.prototype,new wr),Jt.prototype.parseKey=function(Ir){try{var Lr=0,Hr=0,Tn=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(Ir)?function(jo){if(Wr===void 0){var Ao="0123456789ABCDEF",Lo=` \f
\r	 \u2028\u2029`;for(Wr={},Jn=0;Jn<16;++Jn)Wr[Ao.charAt(Jn)]=Jn;for(Ao=Ao.toLowerCase(),Jn=10;Jn<16;++Jn)Wr[Ao.charAt(Jn)]=Jn;for(Jn=0;Jn<Lo.length;++Jn)Wr[Lo.charAt(Jn)]=-1}for(var wo=[],Ro=0,To=0,Jn=0;Jn<jo.length;++Jn){var Ho=jo.charAt(Jn);if(Ho=="=")break;if((Ho=Wr[Ho])!=-1){if(Ho===void 0)throw new Error("Illegal character at offset "+Jn);Ro|=Ho,2<=++To?(wo[wo.length]=Ro,To=Ro=0):Ro<<=4}}if(To)throw new Error("Hex encoding incomplete: 4 bits missing");return wo}(Ir):xn.unarmor(Ir),_n=yo.decode(Tn);if((_n=_n.sub.length===3?_n.sub[2].sub[0]:_n).sub.length===9){Lr=_n.sub[1].getHexStringValue(),this.n=no(Lr,16),Hr=_n.sub[2].getHexStringValue(),this.e=parseInt(Hr,16);var An=_n.sub[3].getHexStringValue(),Ln=(this.d=no(An,16),_n.sub[4].getHexStringValue()),ao=(this.p=no(Ln,16),_n.sub[5].getHexStringValue()),oo=(this.q=no(ao,16),_n.sub[6].getHexStringValue()),So=(this.dmp1=no(oo,16),_n.sub[7].getHexStringValue()),Xn=(this.dmq1=no(So,16),_n.sub[8].getHexStringValue());this.coeff=no(Xn,16)}else{if(_n.sub.length!==2)return!1;var ko=_n.sub[1].sub[0];Lr=ko.sub[0].getHexStringValue(),this.n=no(Lr,16),Hr=ko.sub[1].getHexStringValue(),this.e=parseInt(Hr,16)}return!0}catch{return!1}},Jt.prototype.getPrivateBaseKey=function(){var Ir={array:[new Yr.asn1.DERInteger({int:0}),new Yr.asn1.DERInteger({bigint:this.n}),new Yr.asn1.DERInteger({int:this.e}),new Yr.asn1.DERInteger({bigint:this.d}),new Yr.asn1.DERInteger({bigint:this.p}),new Yr.asn1.DERInteger({bigint:this.q}),new Yr.asn1.DERInteger({bigint:this.dmp1}),new Yr.asn1.DERInteger({bigint:this.dmq1}),new Yr.asn1.DERInteger({bigint:this.coeff})]};return new Yr.asn1.DERSequence(Ir).getEncodedHex()},Jt.prototype.getPrivateBaseKeyB64=function(){return Mr(this.getPrivateBaseKey())},Jt.prototype.getPublicBaseKey=function(){var Ir=new Yr.asn1.DERSequence({array:[new Yr.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new Yr.asn1.DERNull]}),Lr=new Yr.asn1.DERSequence({array:[new Yr.asn1.DERInteger({bigint:this.n}),new Yr.asn1.DERInteger({int:this.e})]});return Lr=new Yr.asn1.DERBitString({hex:"00"+Lr.getEncodedHex()}),new Yr.asn1.DERSequence({array:[Ir,Lr]}).getEncodedHex()},Jt.prototype.getPublicBaseKeyB64=function(){return Mr(this.getPublicBaseKey())},Jt.wordwrap=function(Ir,Lr){return Ir&&(Lr="(.{1,"+(Lr=Lr||64)+`})( +|$
?)|(.{1,`+Lr+"})",Ir.match(RegExp(Lr,"g")).join(`
`))},Jt.prototype.getPrivateKey=function(){return`-----BEGIN RSA PRIVATE KEY-----
`+Jt.wordwrap(this.getPrivateBaseKeyB64())+`
-----END RSA PRIVATE KEY-----`},Jt.prototype.getPublicKey=function(){return`-----BEGIN PUBLIC KEY-----
`+Jt.wordwrap(this.getPublicBaseKeyB64())+`
-----END PUBLIC KEY-----`},Jt.hasPublicKeyProperty=function(Ir){return(Ir=Ir||{}).hasOwnProperty("n")&&Ir.hasOwnProperty("e")},Jt.hasPrivateKeyProperty=function(Ir){return(Ir=Ir||{}).hasOwnProperty("n")&&Ir.hasOwnProperty("e")&&Ir.hasOwnProperty("d")&&Ir.hasOwnProperty("p")&&Ir.hasOwnProperty("q")&&Ir.hasOwnProperty("dmp1")&&Ir.hasOwnProperty("dmq1")&&Ir.hasOwnProperty("coeff")},Jt.prototype.parsePropertiesFrom=function(Ir){this.n=Ir.n,this.e=Ir.e,Ir.hasOwnProperty("d")&&(this.d=Ir.d,this.p=Ir.p,this.q=Ir.q,this.dmp1=Ir.dmp1,this.dmq1=Ir.dmq1,this.coeff=Ir.coeff)},Jt}(Wt);vo.prototype.setKey=function(Xt){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new ns(Xt)},vo.prototype.setPrivateKey=function(Xt){this.setKey(Xt)},vo.prototype.setPublicKey=function(Xt){this.setKey(Xt)},vo.prototype.decrypt=function(Xt){try{return this.getKey().decrypt(Kr(Xt))}catch{return!1}},vo.prototype.encrypt=function(Xt){try{return Mr(this.getKey().encrypt(Xt))}catch{return!1}},vo.prototype.sign=function(Xt,Jt,ar){try{return Mr(this.getKey().sign(Xt,Jt,ar))}catch{return!1}},vo.prototype.verify=function(Xt,Jt,ar){try{return this.getKey().verify(Xt,Kr(Jt),ar)}catch{return!1}},vo.prototype.getKey=function(Xt){if(!this.key){if(this.key=new ns,Xt&&{}.toString.call(Xt)==="[object Function]")return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,Xt);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},vo.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},vo.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},vo.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},vo.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},vo.version="3.2.1";const as=vo;function vo(Xt){this.default_key_size=(Xt=(Xt=Xt===void 0?{}:Xt)||{}).default_key_size?parseInt(Xt.default_key_size,10):1024,this.default_public_exponent=Xt.default_public_exponent||"010001",this.log=Xt.log||!1,this.key=null}})(0,zr={},Cn),zr.default),Vn=(Object.defineProperty($n.prototype,"publicKey",{get:function(){return`-----BEGIN PUBLIC KEY-----
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN
        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz
        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO
        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve
        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0
        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48
        7wIDAQAB
        -----END PUBLIC KEY-----`},enumerable:!1,configurable:!0}),$n.prototype.encrypt=function(kt){return kt=Yt.a.encrypt(this.uint8Array2WordArray(kt),this.key2,{iv:this.iv2}).toString(),zn.a.toByteArray(kt)},$n.prototype.decrypt=function(kt){return this.wordArray2Uint8Array(Yt.a.decrypt(zn.a.fromByteArray(kt),this.key2,{iv:this.iv2}))},$n.prototype.generateK1Sign=function(){var kt=this.generateNonce(),Gt=((Gt=(this.key1=Kt.a.parse(kt),this.iv1=Zn.a.parse(En()(kt).toString().toLowerCase()),new Mn)).setPublicKey(this.publicKey),Gt.getKey().encrypt(kt));return this.wordArray2Uint8Array(Zn.a.parse(Gt))},$n.prototype.decryptK2Sign=function(kt){try{this.key2=Yt.a.decrypt(zn.a.fromByteArray(kt),this.key1,{iv:this.iv1}),this.iv2=En()(this.key2)}catch{}},$n.prototype.generateNonce=function(){var kt=Math.random().toString().substr(2,16);return kt.length<16&&(kt+=kt.substr(0,16-kt.length)),kt},$n.prototype.md5=function(kt){return En()(kt).toString()},$n.prototype.md5Bytes=function(kt){return this.wordArray2Uint8Array(En()(this.uint8Array2WordArray(kt)))},$n.prototype.wordArray2Uint8Array=function(kt){for(var Gt=kt.words,Wt=kt.sigBytes,tr=new Uint8Array(Wt),Qt=0;Qt<Wt;Qt++){var gr=Gt[Qt>>>2]>>>24-Qt%4*8&255;tr[Qt]=gr}return tr},$n.prototype.uint8Array2WordArray=function(kt){for(var Gt=kt.length,Wt=[],tr=0;tr<Gt;tr++)Wt[tr>>>2]|=(255&kt[tr])<<24-tr%4*8;return Fn.a.create(Wt,Gt)},$n);function $n(){}function Sn(kt){return Uint8Array.from(Array.from(unescape(encodeURIComponent(kt))).map(function(Gt){return Gt.charCodeAt(0)}))}function Yn(kt){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(kt))))}var Vr={"/lr/login_room_rsp":"LoginRoomRsp","/lr/logout_room_rsp":"LogoutRoomRsp","/sw/push_kickout":"PushKickout","/sw/push":"PushReq","/sw/merge_push":"CmdMergePushReq","/lr/room/hb_rsp":"HbRsp","/lr/userlist/userlist_rsp":"UserlistRsp","/lr/stream/add_rsp":"StreamAddRsp","/lr/stream/delete_rsp":"StreamDeleteRsp","/lr/stream/update_rsp":"StreamUpdateRsp","/lr/stream/list_rsp":"StreamListRsp","/lr/push/stream_add":"PushStream","/lr/push/stream_delete":"PushStream","/lr/push/stream_update":"PushStream","/lr/signal/liverequest_rsp":"SignalLiveRsp","/lr/signal/liverresult_rsp":"SignalLiveResulRsp","/lr/signal/liveinvite_rsp":"SignalLiveInviteRsp","/lr/signal/livestop_rsp":"SignalLiveStopRsp","/lr/signal/livescustom_rsp":"SignalLiveCustomRsp","/lr/im/chat_rsp":"ImChatRsp","/lr/room/enter_rsp":"EnterRsp","/lr/room/quit_rsp":"QuitRsp","/lr/trans/trans_rsp":"TransRsp","/lr/trans/transfetch_rsp":"TransFetchRsp","/lr/bigim/chat_rsp":"BigimChatRsp","/lr/relay_rsp":"RelayRsp","/lr/token/renew_token_rsp":"RenewTokenRsp","/lr/push/user_updated":"PushUserInfoUpdated","/lr/push/user_token_expire":"PushUserTokenExpire","/lr/push/im_chat":"PushImChat","/lr/push/bigim_chat":"PushBigImChat","/lr/push/trans":"PushTrans","/lr/push/user_kickout":"PushUserKickout","/lr/push/user_logreport":"PushUserLogReport","/lr/push/usertrans":"PushUserTrans"},Ur=(zr=lt(1),lt.n(zr)),cn=function(){return(cn=Object.assign||function(kt){for(var Gt,Wt=1,tr=arguments.length;Wt<tr;Wt++)for(var Qt in Gt=arguments[Wt])Object.prototype.hasOwnProperty.call(Gt,Qt)&&(kt[Qt]=Gt[Qt]);return kt}).apply(this,arguments)};at.util.Long=Ur.a,at.configure();var gn,kn=((zr=gn=gn||{})[zr.disconnected=0]="disconnected",zr[zr.broken=1]="broken",zr[zr.connected=2]="connected",Object.defineProperty(dn.prototype,"nickName",{get:function(){return Sn(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),dn.prototype.isDisConnect=function(){return this.state!==gn.connected},dn.prototype.getHeader=function(kt){kt={cmd:kt,seq:++this.seq,timestamp:new Date().getTime(),session_id:this.switchSessionID,controls:this.controls,flags:this.flags};var Gt=bn.proto_switch.Header.create(kt);return Gt=bn.proto_switch.Header.encode(Gt).finish(),[kt.seq,Gt]},dn.prototype.isUaConnect=function(){return this.ua.isConnect()},dn.prototype.sendMessage=function(kt,Gt,Wt,tr,Qt,gr,Tr){var kr=this;if(Qt===void 0&&(Qt={timeout:6e3}),gr===void 0&&(gr=!0),this.logger.info(nr.LIVEROOMHANDLER_SENDMESSAGE+" call"),kt!=="/lr/login_room"&&this.state!==gn.connected)return this.logger.warn(nr.LIVEROOMHANDLER_SENDMESSAGE+" state "+this.state),-1;var Wr=this.getHeader(kt),Dr=Wr[1],Mr=Gt;return!this.unEncryptCmdList.includes(kt)&&this.isEncrypt&&(Mr=this.crypto.encrypt(Gt)),Gt=this.getHead(Dr.length,Mr.length),Gt=new Uint8Array(Array.from(Gt).concat(Array.from(Dr)).concat(Array.from(Mr))),gr&&(Dr={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:Qt.timeout,success:Wt,error:function(Kr,wn,xn){var On;if(kr.logger.info(nr.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+wn+" "+JSON.stringify(Kr)+" "+JSON.stringify(xn)),((On=Kr==null?void 0:Kr.header)==null?void 0:On.cmd)!=="/lr/login_room_rsp"&&-1<[1002,105].indexOf((On=Kr==null?void 0:Kr.body)==null?void 0:On.err_code))return xn!=null&&xn.roomID?(On=kr.stateCenter.roomModulesList.find(function(Rn){return Rn.roomID==xn.roomID}))?void On.retryRoom():void kr.logger.error(nr.LIVEROOMHANDLER_SENDMESSAGE+" room no found ignore "):void kr.rtm.retryRoom();[207,208].indexOf((On=Kr==null?void 0:Kr.body)==null?void 0:On.err_code),tr&&tr(Kr,wn)},params:Tr},Mr=this.sendCommandList.push(Dr),this.sendCommandMap[Dr.seq]=Mr),this.logger.info(nr.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+Wr[0]+" cmd: "+kt),gr=kt==="/lr/login_room",(Qt=this.liveroomRequest)!=null&&Qt.sendRequest({payload:Gt,ack:gr},function(Kr){kr.logger.info(nr.LIVEROOMHANDLER_SENDMESSAGE+" fail")},function(){kr.logger.info(nr.LIVEROOMHANDLER_SENDMESSAGE+" ack")}),Wr[0]},dn.prototype.getHead=function(kt,Gt){var Wt=new Uint8Array(7);return Wt[0]=33,Wt[1]=kt>>8,Wt[2]=kt-(Wt[1]<<8),Wt.set(new Uint8Array(Int32Array.from([Gt]).buffer).reverse(),3),Wt},dn.prototype.handlePush=function(kt,Gt){if(Gt===void 0&&(Gt=!1),(Wt=kt[0])===33){var Wt=(kt[1]<<8)+kt[2],tr=bn.proto_switch.Header.decode(kt.slice(7,7+Wt)),Qt=Wt=kt.slice(7+Wt);if(!this.unEncryptCmdList.includes(tr.cmd)&&this.isEncrypt){if(!this.hasCryptSign)return this.logger.warn(nr.LIVEROOMHANDLER_HANDLEPUSH+" decrypt early "+tr.cmd),void this.waitDecryptCmdList.push(kt);try{Qt=this.crypto.decrypt(Wt)}catch{this.logger.warn(nr.LIVEROOMHANDLER_HANDLEPUSH+" decrypt fail "+tr.cmd)}}if(Vr[tr.cmd]){if(kt=this.decodeResponseBody(tr,Qt),this.swPushCmdList.includes(tr.cmd))return Gt&&((Wt=kt==null?void 0:kt.head)==null?void 0:Wt.sub_cmd)==="/lr/push/user_updated"?void this.logger.info(nr.LIVEROOMHANDLER_HANDLEPUSH+" ignore user updated"):void this.handleSwitchPush(tr,kt);this.logger.info(nr.LIVEROOMHANDLER_HANDLEPUSH+" down "+tr.cmd+" "+JSON.stringify(this.transBuf(kt))),Gt={header:this.transHeader(tr),body:this.transRsp(kt)},this.handleSendCommandMsgRsp(Gt)}else this.logger.info(nr.LIVEROOMHANDLER_HANDLEPUSH+" cmd is not rtc"),this.onSwitchMessage(tr,Qt)}},dn.prototype.handleSwitchPush=function(kt,Gt){if(kt.cmd==="/sw/push"){var Wt=(kr=this.transRsp(Gt.head)).room_id;if(this.stateCenter.roomModulesList.find(function(Kr){return Kr.roomID==Wt})){var tr=void 0,Qt={header:kr,body:tr=this.unStructCmdList.includes(Gt.head.sub_cmd)?{signal_msg:Yn(Gt.msg_body),sub_cmd:this.joinLiveMap[Gt.head.sub_cmd]}:Gt.head.sub_cmd==="/lr/push/signal_custom"?{custommsg:Yn(Gt.msg_body)}:Vr[Gt.head.sub_cmd]?this.transRsp(this.decode(bn.liveroom_cs[Vr[Gt.head.sub_cmd]],Gt.msg_body)):{}};if(this.logger.info(nr.LIVEROOMHANDLER_HANDLESWITCHPUSH+" push "+JSON.stringify(this.transBuf(Qt))),this.whiteboardPushCmdList.includes(Gt.head.sub_cmd))this.logger.info(nr.LIVEROOMHANDLER_HANDLESWITCHPUSH+" white "),this.onSwitchMessage(kt,Gt);else switch(Gt.head.sub_cmd){case"/lr/push/user_updated":this.handlePushUserStateUpdateMsg(Qt);break;case"/lr/push/user_kickout":this.handlePushKickout(Qt,!1);break;case"/lr/push/trans":this.handlePushTransMsg(Qt);break;case"/lr/push/im_chat":this.handlePushRoomMsg(Qt);break;case"/lr/push/signal_custom":this.handlePushCustomMsg(Qt);break;case"/lr/push/stream_add":case"/lr/push/stream_delete":case"/lr/push/stream_update":this.handlePushStreamMsg(Qt);break;case"/lr/push/joinlive_request":case"/lr/push/joinlive_result":case"/lr/push/joinlive_invite":case"/lr/push/joinlive_stop":this.handlePushSignalMsg(Qt);break;case"/lr/push/user_token_expire":this.handlePushTokenExpire(Qt)}Gt.head.qos_flag==1&&(Wr={code:0,message:"",sub_cmd:Gt.head.sub_cmd,msg_id:Gt.head.msg_id,server_send_time:Gt.head.send_time},Dr=bn.proto_switch.PushRsp.create(Wr),Mr=bn.proto_switch.PushRsp.encode(Dr).finish(),this.sendMessage("/sw/push_rsp",Mr,void 0,void 0))}else this.logger.warn(nr.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")}else{var gr,Tr,kr,Wr,Dr,Mr;kt.cmd==="/sw/merge_push"?(gr=(kr=this.transRsp(Gt.head)).room_id,this.stateCenter.roomModulesList.find(function(Kr){return Kr.roomID==gr})?(Tr=[],Gt.messages.forEach(function(Kr){var wn;Tr.push({sub_cmd:Kr.sub_cmd,sub_seq:Kr.sub_seq,msg_id:Kr.msg_id}),Kr.sub_cmd==="/lr/push/bigim_chat"&&(wn=bn.liveroom_cs.PushBigImChat.decode(Kr.msg_body),Kr.msg_body=wn)}),delete(kr={header:(tr=this.transRsp(Gt)).head,body:tr}).body.head,this.handlePushMergeMsg(kr),Gt.head.qos_flag==1&&(Dr=bn.proto_switch.CmdMergePushRsp.create(Wr={messages:Tr}),Mr=bn.proto_switch.CmdMergePushRsp.encode(Dr).finish(),this.sendMessage("/sw/merge_push_rsp",Mr,void 0,void 0))):this.logger.warn(nr.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")):kt.cmd==="/sw/push_kickout"&&(tr={reason:900<Gt.reason?Gt.reason-900:Gt.reason,msg:Gt.message,need_relogin:Gt.need_relogin!==void 0?Gt.need_relogin:0},this.handlePushKickout({header:kt,body:tr},!0))}},dn.prototype.handlePushTokenExpire=function(kt){},dn.prototype.handlePushKickout=function(kt,Gt){},dn.prototype.handlePushStreamMsg=function(kt){},dn.prototype.handlePushSignalMsg=function(kt){},dn.prototype.handlePushMergeMsg=function(kt){},dn.prototype.handlePushCustomMsg=function(kt){},dn.prototype.handlePushRoomMsg=function(kt){},dn.prototype.handlePushTransMsg=function(kt){},dn.prototype.onSwitchMessage=function(kt,Gt){},dn.prototype.decodeResponseBody=function(kt,Gt){var Wt=this.onSwitchCmdList.includes(kt.cmd)?"proto_switch":"liveroom_cs";return this.decode(this.protoInstance[Wt][Vr[kt.cmd]],Gt)},dn.prototype.handleWaitDecryptCmdList=function(){var kt=this;this.waitDecryptCmdList.forEach(function(Gt){kt.handlePush(Gt,!0)}),this.waitDecryptCmdList=[]},dn.prototype.handlePushUserStateUpdateMsg=function(kt){},dn.prototype.login=function(kt,Gt,Wt){var tr,Qt,gr,Tr,kr=this,Wr=(this.state==gn.disconnected&&(this.logger.info(nr.LIVEROOMHANDLER_LOGIN+" state disconnect"),this.closeRequest()),new Date().getTime()+"");kt.isMulti?(gr={req_head:this.getReqHead(kt),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,net_type:rr.getNetTypeNum(),config:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0},lv_key:kt.lvKey,third_token:Sn(kt.token),user_count_limit:kt.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",conn_type:2,room_name:Sn(kt.roomName)},Qt=cn(cn({},gr),{room_name:kt.roomName,third_token:kt.token}),this.logger.info(nr.LIVEROOMHANDLER_LOGIN+" enter "+JSON.stringify(Qt)),gr=bn.liveroom_cs.EnterReq.create(gr),Tr=bn.liveroom_cs.EnterReq.encode(gr).finish(),this.sendMessage("/lr/room/enter",Tr,function(Dr,Mr){kr.longToStringNumber(Dr.body,["user_session_id","room_session_id","ret_timestamp"],"toString"),kr.transKeysName(Dr.body,[["user_session_id","session_id"],["hb_interval","hearbeat_interval"]]),kr.keysExist(Dr.body,["token_remain_time","stream_seq"]),Gt&&Gt(Dr,Mr)},function(Dr,Mr){Wt&&Wt(Dr,Mr)},void 0,void 0,{roomID:kt.roomID})):(tr={app_id:this.stateCenter.appid,id_name:Sn(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.stateCenter.ENV%2==0?ct.TT_WEB:ct.TT_MINIPROGRAM,net_type:rr.getNetTypeNum(),sdk_ver:parseInt(this.rtm.version.replace(/\./g,"")),proto_ver:131072,nick_name:this.nickName,client_stamp:Sn(Wr),crypt_version:1,k1_sign:this.crypto.generateK1Sign(),relogin_token:this.switchSessionID.notEquals(Ur.a.fromInt(0))?Sn(this.reloginToken):"",role:this.stateCenter.role,liveroom_session_id:Ur.a.fromString(kt.sessionID),room_id:Sn(kt.roomID),room_name:Sn(kt.roomName),biz_type:0,room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0,lv_key:kt.lvKey,third_token:Sn(kt.token),user_count_limit:kt.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2},Qt=cn(cn({},tr),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:Wr,k1_sign:void 0,relogin_token:this.reloginToken,liveroom_session_id:kt.sessionID,room_id:kt.roomID,room_name:kt.roomName,third_token:kt.token}),this.logger.info(nr.LIVEROOMHANDLER_LOGIN+" login "+JSON.stringify(Qt)),this.k1SignLogoutBuffer=this.crypto.md5Bytes(tr.k1_sign),gr=bn.proto_switch.LoginRoomReq.create(tr),Tr=bn.proto_switch.LoginRoomReq.encode(gr).finish(),this.sendMessage("/lr/login_room",Tr,function(Dr,Mr){kr.switchSessionID=Dr.header.session_id,kr.reloginToken=Dr.body.relogin_token,kr.logger.info(nr.LIVEROOMHANDLER_LOGIN+" login rsp"),kr.crypto.decryptK2Sign(Dr.body.k2_sign),Dr.body.crypt_option===1?kr.isEncrypt=!1:Dr.body.crypt_option===void 0&&(kr.isEncrypt=!0),kr.hasCryptSign=!0,kr.waitDecryptTimer=setTimeout(function(){kr.handleWaitDecryptCmdList()},0),kr.longToStringNumber(Dr.body,["liveroom_session_id","room_session_id","ret_timestamp"],"toString"),delete Dr.body.heartbeat_interval,delete Dr.body.heartbeat_timeout,kr.transKeysName(Dr.body,[["liveroom_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"]]),kr.keysExist(Dr.body,["token_remain_time","stream_seq"]),Gt&&Gt(Dr,Mr)},function(Dr,Mr){Wt&&Wt(Dr,Mr)}))},dn.prototype.transKeysName=function(kt,Gt){Gt.forEach(function(Wt){kt[Wt[1]]=kt[Wt[0]],delete kt[Wt[0]]})},dn.prototype.keysExist=function(kt,Gt){Gt.forEach(function(Wt){kt[Wt]===void 0&&(kt[Wt]=0)})},dn.prototype.longToStringNumber=function(kt,Gt,Wt){Gt.forEach(function(tr){Ur.a.isLong(kt[tr])&&(kt[tr]=kt[tr][Wt]())})},dn.prototype.logout=function(kt,Gt,Wt){var tr,Qt,gr,Tr;return kt.isMulti?(tr={req_head:this.getReqHead(kt),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,config_list:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0}},Qt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_LOGOUT+" quit "+JSON.stringify(Qt)),gr=bn.liveroom_cs.QuitReq.create(tr),Tr=bn.liveroom_cs.QuitReq.encode(gr).finish(),this.sendMessage("/lr/room/quit",Tr,Gt,Wt)):(tr={logout_code:0,logout_check:this.crypto.md5Bytes(Sn(kt.token)),liveroom_session_id:Ur.a.fromString(kt.sessionID),room_id:Sn(kt.roomID),role:this.stateCenter.role,nickname:this.nickName,logout_logic:this.stateCenter.isMultiRoom?3:1},Qt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_LOGOUT+" logout "+JSON.stringify(Qt)),gr=bn.proto_switch.LogoutRoomReq.create(tr),Tr=bn.proto_switch.LogoutRoomReq.encode(gr).finish(),this.sendMessage("/lr/logout_room",Tr,Gt,Wt))},dn.prototype.checkSendMessageList=function(kt){for(var Gt=kt.getFirst();Gt!=null;)kt.remove(Gt),Gt._data&&Gt._data.error&&setTimeout(function(){Gt&&Gt._data&&Gt._data.error&&Gt._data.error(Ft.TIMEOUT,Gt._data.seq)},0),Gt=kt.getFirst()},dn.prototype.checkMessageListTimeout=function(kt,Gt){for(var Wt=kt.getFirst(),tr=Date.parse(new Date+""),Qt=0,gr=this;Wt!=null&&function(){return Wt._data&&Wt._data.sendTime+Wt._data.timeout>tr?"break":(Wt._data&&delete Gt[Wt._data.seq],kt.remove(Wt),Wt._data&&Wt._data.error==null||Wt._data&&Wt._data.sendTime+gr.sendDataDropTimeout<tr||(Tr=Wt&&Wt._data&&Wt._data.error,kr=Wt&&Wt._data&&Wt._data.seq,setTimeout(function(){Tr&&Tr(Ft.TIMEOUT,kr)},0)),++Qt>=gr.sendDataCheckOnceCount?"break":void(Wt=kt.getFirst()));var Tr,kr}()!=="break";);},dn.prototype.startCheck=function(){var kt=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout(function(){kt.startCheck()},this.sendDataCheckInterval)},dn.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},dn.prototype.handleSendCommandMsgRsp=function(kt){var Gt,Wt,tr=this,Qt=this.sendCommandMap[kt.header.seq];Qt!=null&&(Gt=Qt._data,Wt=Gt==null?void 0:Gt.params,delete this.sendCommandMap[kt.header.seq],this.sendCommandList.remove(Qt),kt.body.err_code===0?setTimeout(function(){Gt&&Gt.success!=null&&Gt.success(kt,tr.seq)},0):setTimeout(function(){Gt&&Gt.error!=null&&Gt.error(kt,tr.seq,Wt)},0))},dn.prototype.getReqHead=function(kt){return{room_id:kt.roomID,user_session_id:Ur.a.fromString(kt.sessionID),room_session_id:Ur.a.fromString(kt.roomSessionID)}},dn.prototype.heartBeat=function(kt,Gt,Wt){var tr=this;Wt={req_head:this.getReqHead(Wt),role:this.stateCenter.role,lv_key:Wt.lvKey},Wt=bn.liveroom_cs.HbReq.create(Wt),Wt=bn.liveroom_cs.HbReq.encode(Wt).finish(),this.sendMessage("/lr/room/hb",Wt,function(Qt){tr.transKeysName(Qt.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"]]),Qt.body.server_user_seq=Qt.body.user_seq.toNumber(),tr.longToStringNumber(Qt.body,["dati_time_window"],"toNumber"),kt&&kt(Qt)},Gt)},dn.prototype.fetchUserList=function(kt,Gt,Wt,tr){var Qt=this;return tr=this.getReqHead(tr),tr=cn({req_head:tr},kt),kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_FETCH_USER_LIST+" "+JSON.stringify(kt)),kt=bn.liveroom_cs.UserlistReq.create(tr),tr=bn.liveroom_cs.UserlistReq.encode(kt).finish(),this.sendMessage("/lr/userlist/userlist",tr,function(gr,Tr){Qt.logger.info(nr.LIVEROOMHANDLER_FETCH_USER_LIST+" suc "+Tr),Qt.transKeysName(gr.body,[["user_basic_list","user_baseinfos"]]),Qt.longToStringNumber(gr.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),Gt&&Gt(gr,Tr)},Wt)},dn.prototype.sendRoomMsg=function(kt,Gt,Wt,tr){var Qt=this;return tr={req_head:this.getReqHead(tr),msg_category:kt.msg_category,msg_priority:kt.msg_priority,msg_type:kt.msg_type,msg_content:Sn(kt.msg_content)},kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_SENDROOMMSG+" "+JSON.stringify(kt)),kt=bn.liveroom_cs.ImChatReq.create(tr),tr=bn.liveroom_cs.ImChatReq.encode(kt).finish(),this.sendMessage("/lr/im/chat",tr,function(gr){Qt.longToStringNumber(gr.body,["msg_id"],"toNumber"),Gt&&Gt(gr)},Wt)},dn.prototype.sendReliableMessage=function(kt,Gt,Wt,tr){return tr={req_head:this.getReqHead(tr),role:this.stateCenter.role,nick_name:this.nickName,trans_type:Sn(kt.trans_type),trans_data:Sn(kt.trans_data),trans_local_seq:kt.trans_local_seq,trans_channel:Sn(kt.trans_channel)},kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_SENDRELIABLEMESSAGE+" "+JSON.stringify(kt)),kt=bn.liveroom_cs.TransReq.create(tr),tr=bn.liveroom_cs.TransReq.encode(kt).finish(),this.sendMessage("/lr/trans/trans",tr,Gt,Wt)},dn.prototype.fetchReliableMessage=function(kt,Gt,Wt,tr){tr=this.getReqHead(tr);var Qt=kt.fetch_array.map(function(gr){return{trans_type:Sn(gr.trans_type),trans_local_seq:gr.trans_seq}});return tr={req_head:tr,trans_channel:Sn(kt.trans_channel),fetch_array:Qt},kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE+" "+JSON.stringify(kt)),Qt=bn.liveroom_cs.TransFetchReq.create(tr),kt=bn.liveroom_cs.TransFetchReq.encode(Qt).finish(),this.sendMessage("/lr/trans/transfetch",kt,Gt,Wt)},dn.prototype.sendCustomCommand=function(kt,Gt,Wt,tr){var Qt=this,gr=(tr=this.getReqHead(tr),kt.dest_id_name.map(function(Tr){return{id_name:Sn(Tr)}}));return tr=cn({req_head:tr,dst_userlist:gr,push_message:Sn(kt.custom_msg)},kt),gr=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_SENDCUSTOMCOMMAND+" "+JSON.stringify(gr)),kt=bn.liveroom_cs.SignalLiveReq.create(tr),gr=bn.liveroom_cs.SignalLiveReq.encode(kt).finish(),this.sendMessage("/lr/signal/livescustom",gr,function(Tr){Gt&&Gt(Qt.transRsp(Tr))},function(Tr){Wt&&Wt(Qt.transRspHead(Tr.rsp_head))})},dn.prototype.sendBigRoomMessage=function(kt,Gt,Wt,tr){return tr=this.getReqHead(tr),kt=kt.msgs.map(function(Qt){return{msg_category:Qt.msg_category,msg_type:Qt.msg_type,msg_timestamp:Ur.a.fromNumber(Date.now()),msg_content:Sn(Qt.msg_content),bigmsg_client_id:Sn(Qt.bigmsg_client_id)}}),tr={req_head:tr,nick_name:this.nickName,role:this.stateCenter.role,msgs:kt},kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_SENDBIGROOMMESSAGE+" "+JSON.stringify(kt)),kt=bn.liveroom_cs.BigimChatReq.create(tr),tr=bn.liveroom_cs.BigimChatReq.encode(kt).finish(),this.sendMessage("/lr/bigim/chat",tr,Gt,Wt)},dn.prototype.sendRelayMessage=function(kt,Gt,Wt,tr){return tr={req_head:this.getReqHead(tr),nick_name:this.nickName,role:this.stateCenter.role,relay_type:Sn(kt.relay_type),relay_data:Sn(kt.relay_data)},kt=bn.liveroom_cs.RelayReq.create(tr),tr=bn.liveroom_cs.RelayReq.encode(kt).finish(),this.sendMessage("/lr/relay",tr,Gt,Wt)},dn.prototype.sendSignalCmd=function(kt,Gt,Wt,tr){var Qt="",gr="";switch(kt.sub_cmd){case 1003:Qt="/lr/signal/liveinvite",gr="SignalLiveInviteReq";break;case 1001:Qt="/lr/signal/liverequest",gr="SignalLiveReq";break;case 1002:Qt="/lr/signal/liverresult",gr="SignalLiveResultReq";break;case 1004:Qt="/lr/signal/livestop",gr="SignalLiveStopReq"}tr=this.getReqHead(tr);var Tr=kt.dest_id_name.map(function(kr){return{id_name:Sn(kr)}});return tr={req_head:tr,push_message:Sn(kt.signal_msg),dst_userlist:Tr},kt=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_SENDSIGNALCMD+" "+JSON.stringify(kt)),Tr=bn.liveroom_cs[gr].create(tr),kt=bn.liveroom_cs[gr].encode(Tr).finish(),bn.liveroom_cs[gr].decode(kt),this.sendMessage(Qt,kt,Gt,Wt)},dn.prototype.sendStreamUpdate=function(kt,Gt,Wt,tr){var Qt,gr=this;try{Qt=JSON.parse(kt.stream_msg)}catch{}var Tr,kr,Wr="",Dr=(this.logger.info(nr.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(kt)),this.stateCenter.roomModulesList.find(function(Kr){return Kr.roomID==tr.roomID}));if(!Dr)return this.logger.error(nr.LIVEROOMHANDLER_SENDSTREAMUPDATE+" room no found ignore "),-1;switch(kt.sub_cmd){case 2001:Wr="/lr/stream/add",Tr="StreamAddReq",kr={req_head:this.getReqHead(Dr),stream_id:Sn(Qt.stream_id),extra_info:Sn(Qt.extra_info),client_req_seq:this.seq+1,login_mode:1,third_token:Sn(kt.third_token||"")};break;case 2002:Wr="/lr/stream/delete",Tr="StreamDeleteReq",kr={req_head:this.getReqHead(Dr),stream_id:Sn(Qt.stream_id),stream_sid:Qt.stream_sid,client_req_seq:this.seq+1};break;case 2003:Wr="/lr/stream/update",Tr="StreamUpdateReq",kr={req_head:this.getReqHead(Dr),stream_id:Sn(Qt.stream_id),stream_sid:Qt.stream_sid,client_req_seq:this.seq+1,extra_info:Sn(Qt.extra_info)}}var Mr=this.transBuf(kr);return this.logger.info(nr.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(Mr)),Mr=bn.liveroom_cs[Tr].create(kr),Mr=bn.liveroom_cs[Tr].encode(Mr).finish(),this.sendMessage(Wr,Mr,function(Kr){gr.logger.info(nr.LIVEROOMHANDLER_SENDSTREAMUPDATE+" suc "+Wr+" "+JSON.stringify(Kr)),Kr.header.room_id=Dr.roomID,Gt&&Gt(Kr)},function(Kr){gr.logger.info(nr.LIVEROOMHANDLER_SENDSTREAMUPDATE+" fail "+Wr+" "+JSON.stringify(Kr)),Wt&&Wt(Kr)})},dn.prototype.getStreamList=function(kt,Gt,Wt,tr){var Qt,gr=this.stateCenter.roomModulesList.find(function(Tr){return Tr.roomID==tr.roomID});gr?(gr={req_head:this.getReqHead(gr)},Qt=this.transBuf(gr),this.logger.info(nr.LIVEROOMHANDLER_GETSTREAMLIST+" "+JSON.stringify(Qt)),Qt=bn.liveroom_cs.StreamListReq.create(gr),gr=bn.liveroom_cs.StreamListReq.encode(Qt).finish(),this.sendMessage("/lr/stream/list",gr,function(Tr){var kr;(kr=Tr.body)!=null&&kr.stream_info.forEach(function(Wr){Wr.create_time=Wr.create_time.toNumber()}),Gt&&Gt(Tr)},function(Tr){Wt&&Wt(Tr)})):this.logger.error(nr.LIVEROOMHANDLER_GETSTREAMLIST+" room no found ignore "+tr.roomID)},dn.prototype.transBuf=function(kt){var Gt=this,Wt={};return Object.keys(kt).forEach(function(tr){["logout_check","k2_sign","k1_sign"].includes(tr)?Wt[tr]=kt[tr]:Gt.transReqBytes(Wt,kt,tr)}),Wt},dn.prototype.transReqBytes=function(kt,Gt,Wt){var tr=this;if(Ur.a.isLong(Gt[Wt]))kt[Wt]=Gt[Wt].toString();else if(Object.prototype.toString.call(Gt[Wt])==="[object Object]")kt[Wt]={},Object.keys(Gt[Wt]).forEach(function(gr){return tr.transReqBytes(kt[Wt],Gt[Wt],gr)});else if(Object.prototype.toString.call(Gt[Wt])==="[object Array]"&&Object.prototype.toString.call(Gt[Wt][0])==="[object Object]"){kt[Wt]=[];for(var Qt=0;Qt<Gt[Wt].length;Qt++)(function(gr){var Tr={};Object.keys(Gt[Wt][gr]).forEach(function(kr){tr.transReqBytes(Tr,Gt[Wt][gr],kr)}),kt[Wt].push(Tr)})(Qt)}else Object.prototype.toString.call(Gt[Wt])==="[object Uint8Array]"?kt[Wt]=Yn(Gt[Wt]):kt[Wt]=Gt[Wt]},dn.prototype.transHeader=function(kt){return kt.timestamp=Ur.a.isLong(kt.timestamp)?kt.timestamp.toString():kt.timestamp,kt},dn.prototype.transRsp=function(kt){var Gt=this,Wt=kt&&kt.rsp_head?this.transRspHead(kt.rsp_head):{},tr=cn(cn({},kt),Wt),Qt=(delete tr.rsp_head,{});return Object.keys(tr).forEach(function(gr){gr==="k2_sign"?Qt[gr]=tr[gr]:Gt.transBytes(Qt,tr,gr)}),Qt},dn.prototype.transBytes=function(kt,Gt,Wt){var tr=this;if(Ur.a.isLong(Gt[Wt]))kt[Wt]=Gt[Wt];else if(Object.prototype.toString.call(Gt[Wt])==="[object Object]")kt[Wt]={},Object.keys(Gt[Wt]).forEach(function(gr){return tr.transBytes(kt[Wt],Gt[Wt],gr)});else if(Object.prototype.toString.call(Gt[Wt])==="[object Array]"&&Object.prototype.toString.call(Gt[Wt][0])==="[object Object]"){kt[Wt]=[];for(var Qt=0;Qt<Gt[Wt].length;Qt++)(function(gr){var Tr={};Object.keys(Gt[Wt][gr]).forEach(function(kr){tr.transBytes(Tr,Gt[Wt][gr],kr)}),kt[Wt].push(Tr)})(Qt)}else Object.prototype.toString.call(Gt[Wt])==="[object Uint8Array]"?kt[Wt]=Yn(Gt[Wt]):kt[Wt]=Gt[Wt]},dn.prototype.transRspHead=function(kt){return kt?{err_code:kt.code||0,err_message:kt.message}:{}},dn.prototype.decode=function(kt,Gt){return cn({},kt.decode(Gt))},dn.prototype.handleDisconnected=function(kt,Gt){var Wt=this;this.logger.info(nr.LIVEROOMHANDLER_HANDLEDISCONNECTED+" call"),this.state=gn.disconnected,this.resetWaitCmd(),this.stateCenter.useNetAgent&&kt===Ut.TIMEOUT&&this.stateCenter.roomModulesList.forEach(function(tr){tr.roomTryHandler&&(Wt.ua.isConnect()?(Wt.logger.info(nr.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is connect"),tr.roomTryHandler.active()):(Wt.logger.info(nr.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is disconnect"),Wt.ua.connectUa()))})},dn.prototype.handleBroken=function(){this.logger.info(nr.LIVEROOMHANDLER_HANDLEBROKEN+" call"),this.state=gn.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach(function(kt){kt.roomTryHandler&&(kt.roomTryHandler.invalid(),kt.roomTryHandler.onactive=function(Gt,Wt){kt.roomHandler.disconnectedHandle(Wt)},kt.roomTryHandler.startMaxTime(),kt.roomHandler.roomStateHandle("CONNECTING",xt.Reconnecting,Ft.NETWORK_BROKEN))})},dn.prototype.handleConnected=function(kt){var Gt=this;this.logger.info(nr.LIVEROOMHANDLER_HANDLECONNECTED+" call "+kt),this.state=gn.connected,this.hasCryptSign=!1,this.resetWaitCmd(),this.stateCenter.useNetAgent&&(kt===St.AUTO?this.stateCenter.roomModulesList.forEach(function(Wt){Wt.roomTryHandler&&Gt.ua.isConnect()&&Wt.roomTryHandler.active()}):this.stateCenter.roomModulesList.forEach(function(Wt){Wt.roomTryHandler&&(Wt.roomTryHandler.stopMaxTime(),Wt.roomTryHandler.invalid())}))},dn.prototype.resetWaitCmd=function(){this.waitDecryptCmdList=[],clearTimeout(this.waitDecryptTimer),this.waitDecryptTimer=null},dn.prototype.renewToken=function(kt,Gt,Wt,tr){var Qt=this;tr={req_head:this.getReqHead(tr),token:kt.token},kt=bn.liveroom_cs.RenewTokenReq.create(tr),kt=bn.liveroom_cs.RenewTokenReq.encode(kt).finish(),tr=this.transBuf(tr),this.logger.info(nr.LIVEROOMHANDLER_RENEW_TOKEN+" "+JSON.stringify(tr)),this.sendMessage("/lr/token/renew_token",kt,function(gr,Tr){Qt.keysExist(gr.body,["token_remain_time"]),Gt&&Gt(gr,Tr)},Wt)},dn.prototype.reset=function(){this.logger.info(nr.LIVEROOMHANDLER_RESET+" call "),this.state=gn.disconnected,this.switchSessionID=Ur.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},dn.prototype.closeRequest=function(){var kt;(kt=this.liveroomRequest)!=null&&kt.closeRequest()},dn.prototype.resetSessionInfo=function(){this.switchSessionID=Ur.a.fromInt(0)},dn);function dn(kt,Gt,Wt,tr,Qt){var gr=this;this.logger=kt,this.stateCenter=Gt,this.ua=Wt,this.dataReport=tr,this.rtm=Qt,this.seq=0,this.controls=new Uint8Array(1),this.flags=new Uint8Array(1),this.sendCommandList=new Rt,this.sendCommandMap={},this.isEncrypt=!1,this.hasCryptSign=!1,this.waitDecryptCmdList=[],this.zPushSid="0",this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=so.a,this.swPushCmdList=["/sw/push","/sw/merge_push","/sw/push_kickout","/sw/push_redirect"],this.onSwitchCmdList=["/lr/login_room_rsp","/lr/logout_room_rsp","/sw/push_kickout","/sw/push","/sw/merge_push"],this.unEncryptCmdList=["/lr/login_room","/lr/login_room_rsp"],this.whiteboardPushCmdList=["/edu/push/set_room","/edu/push/set_user","/edu/push/joinlive","/edu/push/set_mod","/edu/push/draw_graphics","/edu/push/clear_graphics","/edu/push/draw_page_graphics","/edu/push/clear_page_graphics","/edu/push/clear_user_graphic_list","/edu/push/qaa","/edu/push/set_user_auth","/edu/push/set_room_auth"],this.state=gn.disconnected,this.unStructCmdList=["/lr/push/joinlive_request","/lr/push/joinlive_result","/lr/push/joinlive_invite","/lr/push/joinlive_stop"],this.joinLiveMap={"/lr/push/joinlive_request":11001,"/lr/push/joinlive_result":11002,"/lr/push/joinlive_invite":11003,"/lr/push/joinlive_stop":11004},this.reloginToken="",this.crypto=new Vn,this.liveroomRequest=this.ua.getPCRequest(Bt.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Ur.a.fromInt(0),(kt=this.liveroomRequest)!=null&&kt.on("connected",function(Tr){gr.handleConnected(Tr)}),(Gt=this.liveroomRequest)!=null&&Gt.on("broken",function(Tr){gr.handleBroken()}),(Wt=this.liveroomRequest)!=null&&Wt.on("disconnected",function(Tr,kr){gr.handleDisconnected(Tr,kr)}),(tr=this.liveroomRequest)!=null&&tr.on("downLoadMessage",function(Tr){gr.handlePush(Tr)}),(Qt=this.liveroomRequest)!=null&&Qt.on("pcBrokenEvent",function(Tr){var kr=cr.kZegoSDKProxyBroken,Wr=gr.stateCenter.reporter.createSpan(ut.H,{key:cr.kZegoConnConnect.event},{key:""},kr.event);Wr.setAttributes({service_no:kr.service_no(Tr==null?void 0:Tr.service_no)}),Wr.end()}),(kt=this.liveroomRequest)!=null&&kt.on("pcDisconnectedEvent",function(Tr){var kr=cr.kZegoSDKProxyDisconnect,Wr=gr.stateCenter.reporter.createSpan(ut.H,{key:cr.kZegoConnConnect.event},{key:""},kr.event);Wr.setAttributes({service_no:kr.service_no(Tr==null?void 0:Tr.service_no)}),Wr.end()}),(Gt=this.liveroomRequest)!=null&&Gt.on("pcConnectedEvent",function(Tr){var kr=cr.kZegoSDKProxyConnect,Wr=gr.stateCenter.reporter.createSpan(ut.H,{key:cr.kZegoConnConnect.event},{key:""},kr.event);Wr.setAttributes({service_no:kr.service_no(Tr.service_no),recv_time:kr.recv_time(new Date().getTime()),proxy_link_sources:kr.proxy_link_sources(Tr.proxy_link_sources),connect_stream:kr.connect_stream(Tr.connect_stream)}),Wr.end()})}var Bn=(Xr.prototype.listenCallBack=function(){var kt=this;this.roomServicer.handlePushCustomMsg=function(Gt){kt.handlePushCustomMsg(Gt)},this.roomServicer.handlePushTokenExpire=function(Gt){var Wt,tr=(tr=(tr=Gt==null?void 0:Gt.body)==null?void 0:tr.stop_stream)==null?void 0:tr.stream_id_list.map(Yn);(Wt=(Wt=Gt==null?void 0:Gt.body)==null?void 0:Wt.stop_stream)!=null&&(Wt.stream_id_list=tr),kt.stateCenter.actionListener("_tokenExpired",Gt)},this.roomServicer.handlePushKickout=function(Gt,Wt){var tr;Wt?function(Qt,gr){for(var Tr=0,kr=gr.length,Wr=Qt.length;Tr<kr;Tr++,Wr++)Qt[Wr]=gr[Tr];return Qt}([],kt.stateCenter.roomModulesList).forEach(function(Qt){Qt.roomHandler.handlePushKickout(Gt,!0,!0)}):(tr=(Wt=Gt==null?void 0:Gt.header)==null?void 0:Wt.room_id,Wt=kt.stateCenter.roomModulesList.find(function(Qt){return Qt.roomID==tr}),kt.roomServicer.longToStringNumber(Gt.body,["session_id"],"toString"),Wt?Wt.roomHandler.handlePushKickout(Gt):kt.logger.error(nr.LIVEROOMHANDLER_PUSHKICKOUT+" room no found ignore "+JSON.stringify((Wt=Gt.header)==null?void 0:Wt.room_id)))},this.roomServicer.handlePushStreamMsg=function(Gt){kt.handlePushStreamMsg(Gt)},this.roomServicer.handlePushSignalMsg=function(Gt){kt.handlePushSignalMsg(Gt)},this.roomServicer.handlePushMergeMsg=function(Gt){kt.handlePushMergeMsg(Gt)},this.roomServicer.handlePushRoomMsg=function(Gt){kt.handlePushRoomMsg(Gt)},this.roomServicer.handlePushTransMsg=function(Gt){kt.handlePushTransMsg(Gt)},this.roomServicer.onSwitchMessage=function(Gt,Wt){kt.onSwitchMessage(Gt,Wt)},this.roomServicer.handlePushUserStateUpdateMsg=function(Gt){var Wt,tr,Qt,gr=(Tr=Gt==null?void 0:Gt.header)==null?void 0:Tr.room_id,Tr=kt.stateCenter.roomModulesList.find(function(kr){return kr.roomID==gr});Tr?(Qt=Gt.body.user_list.map(function(kr){return{Action:kr.action,IdName:kr.id_name,NickName:kr.nick_name,Role:kr.role,LoginTime:kr.login_time.toString()}}),tr=kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:gr},{key:""},cr.kZMRoomRecvUserUpdateInfo.event),Qt={body:{user_actions:Qt,user_list_seq:Gt.body.server_user_seq.toNumber(),room_id:Gt.body.room_id}},tr.setAttributes({user_list_seq:(Wt=Qt===null?void 0:Qt.body)==null?void 0:Wt.user_list_seq,update_user:(Wt=Qt===null?void 0:Qt.body)==null?void 0:Wt.user_actions}),tr.end(),Tr.userHandler.handlePushUserStateUpdateMsg(Qt)):kt.logger.error(nr.LIVEROOMHANDLER_PUSHUSERUPDATE+" room no found ignore "+JSON.stringify(Gt))}},Xr.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},Xr.prototype.isUaConnect=function(){var kt;return(kt=this.roomServicer)==null?void 0:kt.isUaConnect()},Xr.prototype.sendMessage=function(kt,Gt,Wt,tr,Qt,gr){var Tr;return(Tr=this.roomServicer)==null?void 0:Tr.sendMessage(kt,Gt,Wt,tr,Qt)},Xr.prototype.handlePushTokenExpire=function(kt){},Xr.prototype.handlePushKickout=function(kt,Gt){},Xr.prototype.handlePushStreamMsg=function(kt){},Xr.prototype.handlePushSignalMsg=function(kt){},Xr.prototype.handlePushMergeMsg=function(kt){},Xr.prototype.handlePushCustomMsg=function(kt){},Xr.prototype.handlePushRoomMsg=function(kt){},Xr.prototype.handlePushTransMsg=function(kt){},Xr.prototype.onSwitchMessage=function(kt,Gt){},Xr.prototype.handlePushUserStateUpdateMsg=function(kt){},Xr.prototype.login=function(kt,Gt,Wt){var tr;(tr=this.roomServicer)!=null&&tr.login(kt,Gt,Wt)},Xr.prototype.logout=function(kt,Gt,Wt){var tr;return(tr=this.roomServicer)==null?void 0:tr.logout(kt,Gt,Wt)},Xr.prototype.startCheck=function(){var kt;(kt=this.roomServicer)!=null&&kt.startCheck()},Xr.prototype.stopCheck=function(){var kt;(kt=this.roomServicer)!=null&&kt.stopCheck()},Xr.prototype.getReqHead=function(kt){var Gt;return(Gt=this.roomServicer)==null?void 0:Gt.getReqHead(kt)},Xr.prototype.heartBeat=function(kt,Gt,Wt){var tr;(tr=this.roomServicer)!=null&&tr.heartBeat(kt,Gt,Wt)},Xr.prototype.fetchUserList=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.fetchUserList(kt,Gt,Wt,tr)},Xr.prototype.sendRoomMsg=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendRoomMsg(kt,Gt,Wt,tr)},Xr.prototype.sendReliableMessage=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendReliableMessage(kt,Gt,Wt,tr)},Xr.prototype.fetchReliableMessage=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.fetchReliableMessage(kt,Gt,Wt,tr)},Xr.prototype.sendCustomCommand=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendCustomCommand(kt,Gt,Wt,tr)},Xr.prototype.sendBigRoomMessage=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendBigRoomMessage(kt,Gt,Wt,tr)},Xr.prototype.sendRelayMessage=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendRelayMessage(kt,Gt,Wt,tr)},Xr.prototype.sendSignalCmd=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendSignalCmd(kt,Gt,Wt,tr)},Xr.prototype.sendStreamUpdate=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.sendStreamUpdate(kt,Gt,Wt,tr)},Xr.prototype.getStreamList=function(kt,Gt,Wt,tr){var Qt;return(Qt=this.roomServicer)==null?void 0:Qt.getStreamList(kt,Gt,Wt,tr)},Xr.prototype.renewToken=function(kt,Gt,Wt,tr){var Qt;(Qt=this.roomServicer)!=null&&Qt.renewToken(kt,Gt,Wt,tr)},Xr.prototype.reset=function(){var kt;(kt=this.roomServicer)!=null&&kt.reset()},Xr.prototype.closeRequest=function(){var kt;(kt=this.roomServicer)!=null&&kt.closeRequest()},Xr);function Xr(kt,Gt,Wt,tr,Qt){this.logger=kt,this.stateCenter=Gt,this.ua=Wt,this.dataReport=tr,this.rtm=Qt,this.roomServicer=new kn(kt,Gt,Wt,tr,Qt),this.listenCallBack()}var Hn=function(kt,Gt,Wt,tr){return new(Wt=Wt||Promise)(function(Qt,gr){function Tr(Dr){try{Wr(tr.next(Dr))}catch(Mr){gr(Mr)}}function kr(Dr){try{Wr(tr.throw(Dr))}catch(Mr){gr(Mr)}}function Wr(Dr){var Mr;Dr.done?Qt(Dr.value):((Mr=Dr.value)instanceof Wt?Mr:new Wt(function(Kr){Kr(Mr)})).then(Tr,kr)}Wr((tr=tr.apply(kt,Gt||[])).next())})},po=function(kt,Gt){var Wt,tr,Qt,gr={label:0,sent:function(){if(1&Qt[0])throw Qt[1];return Qt[1]},trys:[],ops:[]},Tr={next:kr(0),throw:kr(1),return:kr(2)};return typeof Symbol=="function"&&(Tr[Symbol.iterator]=function(){return this}),Tr;function kr(Wr){return function(Dr){var Mr=[Wr,Dr];if(Wt)throw new TypeError("Generator is already executing.");for(;gr;)try{if(Wt=1,tr&&(Qt=2&Mr[0]?tr.return:Mr[0]?tr.throw||((Qt=tr.return)&&Qt.call(tr),0):tr.next)&&!(Qt=Qt.call(tr,Mr[1])).done)return Qt;switch(tr=0,(Mr=Qt?[2&Mr[0],Qt.value]:Mr)[0]){case 0:case 1:Qt=Mr;break;case 4:return gr.label++,{value:Mr[1],done:!1};case 5:gr.label++,tr=Mr[1],Mr=[0];continue;case 7:Mr=gr.ops.pop(),gr.trys.pop();continue;default:if(!(Qt=0<(Qt=gr.trys).length&&Qt[Qt.length-1])&&(Mr[0]===6||Mr[0]===2)){gr=0;continue}if(Mr[0]===3&&(!Qt||Mr[1]>Qt[0]&&Mr[1]<Qt[3])){gr.label=Mr[1];break}if(Mr[0]===6&&gr.label<Qt[1]){gr.label=Qt[1],Qt=Mr;break}if(Qt&&gr.label<Qt[2]){gr.label=Qt[2],gr.ops.push(Mr);break}Qt[2]&&gr.ops.pop(),gr.trys.pop();continue}Mr=Gt.call(kt,gr)}catch(Kr){Mr=[6,Kr],tr=0}finally{Wt=Qt=0}if(5&Mr[0])throw Mr[1];return{value:Mr[0]?Mr[1]:void 0,done:!0}}}},go=function(kt,Gt){for(var Wt=0,tr=Gt.length,Qt=kt.length;Wt<tr;Wt++,Qt++)kt[Qt]=Gt[Wt];return kt},mo=(Object.defineProperty(Jr.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Jr.prototype.getSettingUnify=function(kt){var Gt=this.stateCenter.settingConfig.getSetting("unify",kt=kt!==void 0&&kt);return this.logger.info(nr.RTM_GET_SETTING_UNIFY+" "+kt+" "+JSON.stringify(Gt)),Gt?(kt=Gt.enable,Gt=Gt.sdk_conn_ver,!!(kt&&Gt<=pr.connectVer)):this.stateCenter.useNetAgent},Jr.prototype.initCallback=function(){this.proxyRes=rr.proxyRes,this.actionSuccessCallback=rr.actionSuccessCallback,this.actionErrorCallback=rr.actionErrorCallback,this.getServerError=rr.getServerError,this.generateRandumNumber=rr.generateRandumNumber,this.unregisterCallback=rr.unregisterCallback,this.logReportCallback=rr.logReportCallback,this.registerCallback=rr.registerCallback},Jr.prototype.initSpans=function(){this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZMListener.event},cr.kZMListener.event,!0).end()},Jr.prototype.getStoreAppConfig=function(){this.logger.info(nr.RTM_GETSTOREAPPCONFIG+" call");var kt=localStorage.getItem(ur+"_"+this.getAppID()+"_"+(this.stateCenter.mode||pr.modeNo));if(kt)try{var Gt=rr.decryptStores(kt,Cr);Gt?(this.stateCenter.appConfig=JSON.parse(Gt),this.stateCenter.reporter.spanSetAttributes({key:cr.kZMInitSetting.event},{is_from_cache:cr.kZMInitSetting.is_from_cache(!0)}),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(ur+"_"+this.getAppID()+"_"+(this.stateCenter.mode||pr.modeNo))}catch(Wt){this.logger.warn(nr.RTM_GETSTOREAPPCONFIG+" "+JSON.stringify(Wt))}else this.logger.info(nr.RTM_GETSTOREAPPCONFIG+" no store config")},Jr.prototype.createNetAgent=function(){var kt=this,Gt=(this.logger.info(nr.RTM_CREATENETAGENT+" call"),this.netAgent.on("disconnected",function(Wt){kt.logger.info(nr.RTM_CREATENETAGENT+" netAgent disconnect")}),this.netAgent.on("connected",function(){kt.logger.info(nr.RTM_CREATENETAGENT+" netAgent connect"),kt.stateCenter.useNetAgent?(kt.fetchAppConfig(),kt.stateCenter.roomModulesList.forEach(function(Wt){Wt.roomTryHandler&&kt.netAgent.isConnect()&&Wt.roomTryHandler.active(!0)})):kt.logger.info(nr.RTM_CREATENETAGENT+" unify false")}),this.netAgent.on("broken",function(Wt){kt.logger.info(nr.RTM_CREATENETAGENT+" netAgent broken"),Wt===Pt.CLOSE&&kt.stateCenter.roomModulesList.forEach(function(tr){tr.resetSessionInfo()})}),this.netAgent.on("dispatchEvent",function(Wt,tr,Qt){var gr;kt.logger.info(nr.RTM_CREATENETAGENT+" dispatch"),tr==="start"?(gr=kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZegoConnConnect.event},{key:""},cr.kZegoConnDispatch.event),kt.stateCenter.requestList[Wt]=gr):tr==="end"&&(gr=kt.stateCenter.requestList[Wt])&&(gr.setAttributes({domain_list:cr.kZegoConnDispatch.domain_list(Qt.domains)}),gr.end())}),this.netAgent.on("dispatchResultUpdate",function(Wt){Wt=Wt.servers,kt.logger.info(nr.RTM_CREATENETAGENT+" dispatchResult "+JSON.stringify(Wt)),Wt=rr.encryptStores(JSON.stringify(Wt),Cr),localStorage.setItem(or+"_"+kt.stateCenter.appid+"_"+(kt.stateCenter.mode||pr.modeNo),Wt)}),this.netAgent.on("connectedEvent",function(Wt,tr,Qt){var gr;kt.logger.info(nr.RTM_CREATENETAGENT+" connect"),tr==="start"?(gr=kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZegoConnConnect.event},cr.kZegoConnConnect.event,!0),kt.stateCenter.requestList[Wt]=gr):tr==="end"&&(gr=kt.stateCenter.requestList[Wt])&&(gr.setAttributes({request_count:cr.kZegoConnConnect.request_count(Qt.count),connect_id:cr.kZegoConnConnect.connect_id(Qt.connectid),events:cr.kZegoConnConnect.events(Qt.connectEvents)}),gr.end())}),this.netAgent.on("requestEvent",function(Wt,tr,Qt){var gr;kt.logger.info(nr.RTM_CREATENETAGENT+" request"),tr==="start"?(gr=kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZegoRequest.event},cr.kZegoRequest.event,!0),kt.stateCenter.requestList[Wt]=gr):tr==="end"&&(gr=kt.stateCenter.requestList[Wt])&&(gr.setAttributes({req_location:cr.kZegoRequest.req_location(Qt.na_req_location),http_code:Qt.status_code,error:Qt.err_code}),gr.end())}),this.netAgent.on("disConnectedEvent",function(Wt){var tr=Wt.duration,Qt=Wt.server,gr=(Wt=Wt.connectid,kt.logger.info(nr.RTM_CREATENETAGENT+" disconnect"),kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:""},cr.kZegoConnDisConnect.event));gr.setAttributes({url:cr.kZegoConnDisConnect.url(Qt),connect_duration:cr.kZegoConnDisConnect.connect_duration(tr),connect_id:cr.kZegoConnDisConnect.connect_id(Wt)}),gr.end()}),(Gt=this.netAgent)!=null&&Gt.on("clientInfo",function(Wt){typeof(Wt==null?void 0:Wt.timeOffset)=="number"&&kt.stateCenter.reporter.setTimeOffset(Wt==null?void 0:Wt.timeOffset),kt.updateTimeOffsetInterval()}),((Gt=this.options)!=null&&Gt.accessDomains&&0<((Gt=this.options)==null?void 0:Gt.accessDomains.length)?(Gt=this.options)==null?void 0:Gt.accessDomains:pr.domains).map(function(Wt){return"wss://"+Wt+"/accesshub"}));this.netAgent.setBackupDomains(pr.primaryDomains),this.netAgent.setNetAgentDefaultServers(Gt),(Gt=this.options)!=null&&Gt.customDomain&&this.netAgent.setNetAgentSpecifiedServers(["wss://accesshub-wss."+this.options.customDomain+"/accesshub"]),this.dispatchServers=this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Jr.prototype.getDispatchUrl=function(){var kt=localStorage.getItem(or+"_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||pr.modeNo));if(kt&&(kt=rr.decryptStores(kt,Cr)))try{return JSON.parse(kt)}catch{}return[]},Jr.prototype.bindWindowListener=function(){var kt=this,Gt=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),Wt=rr.getBrowser(),tr=Gt?"pagehide":Wt==="Firefox"?"beforeunload":"unload";window.addEventListener(tr,function(){kt.logger.info(nr.RTM_BIND_WINDOW_LISTENER+" "+tr),kt.logoutRoom()}),window.addEventListener("offline",function(){kt.netOffLineHandle()}),window.addEventListener("online",function(){kt.netOnLineHandle()})},Jr.prototype.bindWxListener=function(){var kt=this;wx.onNetworkStatusChange(function(Gt){Gt.isConnected?kt.netOnLineHandle():kt.netOffLineHandle()})},Jr.prototype.retryRoom=function(){var kt=this;this.stateCenter.roomModulesList.forEach(function(Gt){Gt.roomTryHandler&&kt.netAgent.isConnect()&&(Gt.resetSessionInfo(),Gt.roomTryHandler.active(!0))})},Jr.prototype.netOnLineHandle=function(){var kt=this;this.logger.info(nr.RTM_BIND_WINDOW_LISTENER+" network is online"),this.stateCenter.networkState=ht.online,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach(function(Gt){Gt.roomTryHandler&&kt.service.isDisConnect()?Gt.roomTryHandler.active():Gt.roomTryHandler&&(Gt.roomTryHandler.stopMaxTime(),Gt.roomHandler.roomStateHandle("CONNECTED",xt.Reconnected,{code:0,msg:""}))})},Jr.prototype.netOffLineHandle=function(){this.logger.info(nr.RTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=ht.offline,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach(function(kt){kt.roomTryHandler&&(kt.roomTryHandler.invalid(),kt.roomTryHandler.onactive=function(Gt,Wt){kt.roomHandler.disconnectedHandle(Wt)},kt.roomTryHandler.startMaxTime(),kt.roomHandler.roomStateHandle("CONNECTING",xt.Reconnecting,Ft.NETWORK_BROKEN))})},Jr.prototype.setLogConfig=function(kt){this.logger.info(nr.RTM_SET_LOG_CONFIG+" call");var Gt,Wt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZMSetLog.event},cr.kZMSetLog.event);if(kt.logLevel&&["debug","info","warn","error","report","disable"].includes(kt.logLevel)&&(this.logger.setLogLevel(kt.logLevel),Wt.setAttributes({log_level:cr.kZMSetLog.log_level(kt.logLevel)})),kt.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(kt.remoteLogLevel)&&Wt.setAttributes({remote_log_level:cr.kZMSetLog.remote_log_level(kt.remoteLogLevel)}),typeof kt.logURL=="string"&&(kt.logURL.startsWith("wss://")||kt.logURL.startsWith("https://")))this.logger.setLogServer(kt.logURL),this.stateCenter.ENV===0&&(this.stateCenter.logDomain=(Gt=this.logger.url)==null?void 0:Gt.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),Wt.setAttributes({log_url:cr.kZMSetLog.log_url(kt.logURL)}),Wt.end();else if(kt.logURL)return this.logger.error(nr.RTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.stateCenter.reporter.setError(Wt,cr.kZMSetLog.error.kInvalidParamError),!1;return this.logger.info(nr.RTM_SET_LOG_CONFIG+" call success"),Wt.end(),!0},Jr.prototype.setDebugVerbose=function(kt){var Gt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZMSetDebug.event},cr.kZMSetDebug.event);typeof kt=="boolean"&&(this.stateCenter.debug=kt,this.stateCenter.debugCustom=!0,Gt.setAttributes({debug:cr.kZMSetDebug.debug(kt?"true":"false")})),Gt.end(),this.logger.info(nr.RTM_SET_DEBUG_VERBOSE+" call success")},Jr.prototype.setDebug=function(kt){typeof kt=="string"&&-1<kt.indexOf("wss")?this.stateCenter.debug=rr.isTestEnv(kt):Array.isArray(kt)&&0<kt.length&&kt.every(function(Gt){return typeof Gt=="string"&&-1<Gt.indexOf("wss")})?this.stateCenter.debug=rr.isTestEnv(kt[0]):this.logger.info(nr.RTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Jr.prototype.renewToken=function(kt,Gt){var Wt,tr=this,Qt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:Gt},{key:""},cr.kZMReNewToken.event);if(Gt!==void 0&&(typeof Gt!="string"||Gt==""))return this.logger.error(nr.RTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var gr,Tr,kr=this.getRoomModules(Gt)||this.stateCenter.roomModulesList[0];return kr?typeof kt=="string"&&kr.roomTryHandler?(kt===kr.roomTryHandler.token?(this.logger.info(nr.RTM_RENEWTOKEN+" token has not changed"),Qt.setAttributes({error:cr.kZMReNewToken.error.INPUT_PARAM.code,message:"token has not changed"}),Qt.end()):(Qt.setAttributes({token:cr.kZMReNewToken.token(kt)}),this.stateCenter.configRoomAuth?(gr=function(Wr){var Dr;(Dr=kr.roomTryHandler)!=null&&Dr.renewLocalToken(kt,(Dr=Wr==null?void 0:Wr.body)==null?void 0:Dr.token_remain_time),tr.cloudSetting.setToken(kt),tr.stateCenter.configCheckToken=!0,Qt.end(),tr.logger.info(nr.RTM_RENEWTOKEN+" "+JSON.stringify(Wr))},Tr=function(Wr){var Dr=(Dr=Wr==null?void 0:Wr.body)==null?void 0:Dr.err_code;tr.stateCenter.reporter.setError(Qt,Wr),!Dr||Dr!==1000002014&&Dr!==2014?tr.logger.error(nr.RTM_RENEWTOKEN+" "+JSON.stringify(Wr)):(tr.stateCenter.configCheckToken=!1,(Dr=kr.roomTryHandler)!=null&&Dr.renewLocalToken(kt),tr.cloudSetting.setToken(kt),tr.logger.warn(nr.RTM_RENEWTOKEN+" "+JSON.stringify(Wr)))},this.stateCenter.useNetAgent?(Wt=this.liveRoomHandler)!=null&&Wt.renewToken({token:kt},gr,Tr,kr):this.service.sendMessage("renew_token",{token:kt},gr,Tr,void 0,{sessionID:kr.sessionID,roomID:Gt,roomSessionID:kr.roomSessionID})):((Wt=kr.roomTryHandler)!=null&&Wt.renewLocalToken(kt),this.cloudSetting.setToken(kt),Qt.end())),!0):(typeof kt!="string"||kr.roomTryHandler?(this.logger.error(nr.RTM_RENEWTOKEN+" token must be string and not empty"),this.stateCenter.reporter.setError(Qt,cr.kZMReNewToken.error.INPUT_PARAM)):(this.logger.error(nr.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(Qt,cr.kZMReNewToken.error.NOT_LOGIN)),!1):(this.logger.error(nr.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(Qt,cr.kZMReNewToken.error.NOT_LOGIN),!1)},Jr.prototype.setCloudSettingURLs=function(kt){var Gt=this;this.logger.info(nr.RTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(kt)&&0<kt.length&&kt.every(function(Wt){return typeof Wt=="string"&&-1<Wt.indexOf("http")})&&this.cloudSetting.init({product:hr.product,appID:this.stateCenter.appid,urls:kt,env:this.stateCenter.ENV,pollingNotify:function(Wt,tr){Gt.logger.info(nr.RTM_SET_CLOUD_SETTING_URLS," setting file changed "+Wt+" "+JSON.stringify(tr)),Gt.stateCenter.actionListener("_cloudSettingNotify",Wt,tr)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent})},Jr.prototype.loginRoom=function(kt,Gt,Wt,tr){var Qt=this;return this.logger.info(nr.RTM_LOGIN_ROOM+" call by user "+(Wt==null?void 0:Wt.userID)+" "+kt+" "+this.version),new Promise(function(gr,Tr){return Hn(Qt,void 0,void 0,function(){var kr,Wr,Dr,Mr,Kr,wn=this;return po(this,function(xn){switch(xn.label){case 0:return this.stateCenter.ENV!==1?[3,2]:[4,new Promise(function(On){wx.getNetworkType({success:function(Rn){wn.stateCenter.networkState=Rn.networkType==="none"?ht.offline:ht.online,On()},fail:function(Rn){wn.logger.error(nr.RTM_CONSTRUCTOR+" network "+JSON.stringify(Rn)),wn.stateCenter.networkState=ht.online,On()}})})];case 1:xn.sent(),xn.label=2;case 2:return Wr=this.loginReport(gr,Tr,kt,Gt,tr),Mr=Wr.interResolve,kr=Wr.interReject,Wr=Wr.loginSpan,(tr=tr||{}).maxMemberCount||(tr.maxMemberCount=0),this.netAgent&&(this.stateCenter.idName=Wt.userID,this.netAgent.setUserInfo(Wt.userID),this.stateCenter.actionListener("_roomLogin",kt,Gt),this.netAgent.isConnect()&&this.fetchAppConfig(Gt)),this.cloudSetting.setUserID(Wt.userID),this.cloudSetting.setToken(Gt),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",function(On){wn.cloudSettingTimer=setTimeout(function(){clearTimeout(wn.cloudSettingTimer),wn.getCloudSetting(),wn.stateCenter.actionListener("_settingCanFetch")},100)}),this.stateCenter.reporter.setCommonAttributes({id_name:Wt.userID}),this.stateCenter.reporter.setReporterInfo(Wt.userID,Gt),Dr=this.getRoomModules(kt),Kr=cr.kZMLoginRoom.error,Dr?(this.logger.setSessionInfo(this.stateCenter.appid,kt,"",Wt.userID,"",this.stateCenter.sdKVersion),kr(Kr.REPEATEDLY_LOGIN)):((Dr=new Fr(kt,this.stateCenter,this.logger,this.dataReport,this.service,this,this.liveRoomHandler)).roomTryHandler||(Dr.roomTryHandler=new hn(this.logger,this.stateCenter,Dr)),Dr.roomTryHandler.init(this.stateCenter.roomRetryTime),Dr.roomTryHandler.initRoom(Dr.roomHandler,kt,Gt,Wt,this.stateCenter.server,this.stateCenter.serverBak,tr),Dr.roomTryHandler.setLoginRoomCallback(Mr,kr),Dr.roomHandler.roomStateHandle("CONNECTING",xt.Logining,{code:0,msg:""}),(Mr=function(On,Rn){var co,qn,Pn=[],uo={};for(co in On)uo[On[co].order]=On[co],On[co].key=co;for(qn in uo)Pn.push(uo[qn]);for(var yo=0;yo<Pn.length;yo++)for(var io=Pn[yo].rules,ro=0;ro<io.length;ro++){var No={key:Pn[yo].key,value:Pn[yo].value,action:Rn.action,logger:Rn.logger},In=No.value,xo=io[ro].name?""+io[ro].name:"";if((In===void 0&&xo===Qr.NOT_EMPTY||In!==void 0)&&dr[xo]&&(xo=dr[xo](No.key,In,No.action,No.logger,io[ro]))!=qr)return xo}return qr}({roomID:{order:0,value:kt,rules:[{name:Qr.NOT_EMPTY,error:Kr.ROOM_ID_NULL},{name:Qr.TYPE_STRING,error:Kr.INPUT_PARAM,extMsg:"roomID must be string"},{name:Qr.MAX_LENGTH_128,error:Kr.ROOM_ID_TOO_LONG},{name:Qr.ILLEGAL_CHARACTERS,error:Kr.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:Gt,rules:[{name:Qr.NOT_EMPTY,error:Kr.INPUT_PARAM},{name:Qr.TYPE_STRING,error:Kr.INPUT_PARAM}]},user:{order:2,value:Wt,rules:[{name:Qr.NOT_EMPTY,error:Kr.INPUT_PARAM,extMsg:" param user error."},{name:Qr.TYPE_OBJECT,error:Kr.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:Wt.userID,rules:[{name:Qr.NOT_EMPTY,error:Kr.USER_ID_NULL,extMsg:" param user error."},{name:Qr.TYPE_STRING,error:Kr.INPUT_PARAM,extMsg:" param userID error."},{name:Qr.MAX_LENGTH_64,error:Kr.USER_ID_TOO_LONG},{name:Qr.ILLEGAL_CHARACTERS,error:Kr.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:Wt.userName,rules:[{name:Qr.TYPE_STRING,error:Kr.INPUT_PARAM,extMsg:" userName must be string."},{name:Qr.MAX_LENGTH_256,error:Kr.USER_NAME_TOO_LONG}]},config:{order:5,value:tr,rules:[]},"config.maxMemberCount":{order:6,value:tr.maxMemberCount,rules:[{name:Qr.TYPE_INTEGER,error:Kr.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:nr.RTM_LOGIN_ROOM,logger:this.logger}))!==qr?(Dr.roomHandler.roomStateHandle("DISCONNECTED",xt.LoginFailed,Mr.error,Mr.extMsg),kr(Mr.error,Mr.extMsg)):(0<this.stateCenter.roomModulesList.length&&this.stateCenter.isMultiRoom==1?Dr.isMulti=!0:go([],this.stateCenter.roomModulesList).forEach(function(On){return On.roomHandler.logout()}),tr&&(Dr.config=tr),this.stateCenter.roomModulesList.push(Dr),this.stateCenter.reporter.setSpanInMap(Wr,{key:cr.kZMLoginRoom.event,par:kt}),Kr=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(Kr)&&0<Kr.length&&(this.logger.info(nr.RTM_LOGIN_ROOM," setting room_server "+Kr),this.stateCenter.server=Kr[0],this.stateCenter.serverBak=Kr[1]||Kr[0]),this.stateCenter.setMultiRoom=!0,Dr.roomTryHandler.startMaxTime(),this.stateCenter.useNetAgent&&!this.netAgent.isConnect()?(this.logger.info(nr.RTM_LOGIN_ROOM," us is not connected"),Dr.roomHandler.setRunState(pt.trylogin),this.netAgent.connectUa()):(this.stateCenter.useNetAgent&&(this.stateCenter.networkState=ht.online),Dr.roomTryHandler.active(!0)))),[2]}})})})},Jr.prototype.handleLogUpload=function(){var kt=this.stateCenter.appConfig.app_config.domain;this.logger.info(nr.RTM_HANDLE_LOG_UPLOAD+" call"),this.logger.url?this.logger.info(nr.RTM_HANDLE_LOG_UPLOAD+" log is connected"):(this.stateCenter.testEnvironment?(this.stateCenter.logDomain="weblogger-hk-test.zegocloud.com",kt="zegocloud.com"):this.stateCenter.logDomain="weblogger"+this.stateCenter.appid+"-api."+kt,kt?(kt="",this.stateCenter.ENV===0?(kt="wss://"+this.stateCenter.logDomain+"/log",this.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})):kt="https://"+this.stateCenter.logDomain+"/httplog",this.logger.setLogServer(kt)):this.logger.warn(nr.RTM_HANDLE_LOG_UPLOAD+" appconfig no domain"))},Jr.prototype.fetchAppConfig=function(kt){return Hn(this,void 0,void 0,function(){var Gt,Wt,tr,Qt,gr,Tr;return po(this,function(kr){switch(kr.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(nr.RTM_FETCH_APP_CONFIG+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(nr.RTM_FETCH_APP_CONFIG+" user not exist"),[2];if(Gt="",kt)Gt=kt;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(nr.RTM_FETCH_APP_CONFIG+" token not exist"),[2];Gt=this.getToken()}Wt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:""},cr.kZegoSDKConfigInit.event),kr.label=1;case 1:return kr.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",Gt,5e3)];case 2:return Qt=kr.sent(),Tr=Qt.code,tr=Qt.data,Qt=Qt.retryCount,Wt.setAttributes({trigger_reason:cr.kZegoSDKConfigInit.trigger_reason(this.stateCenter.appConfig?"refresh":"normal"),try_count:cr.kZegoSDKConfigInit.try_count(Qt||0)}),Wt.end(),this.stateCenter.appConfigFetched=!0,this.logger.info(nr.RTM_LOGIN_ROOM+" initConfig code:"+Tr+" data: "+JSON.stringify(tr)),Qt=tr.app_config,Tr=tr.media_config,gr=Tr.publish_config,Tr=Tr.play_config,tr=tr.speedlog_config.charge_info_report_no_playing,this.stateCenter.appConfig={app_config:Qt,media_config:{publish_config:gr,play_config:Tr},speedlog_config:{charge_info_report_no_playing:tr||0}},Qt=JSON.stringify(this.stateCenter.appConfig),gr=rr.encryptStores(Qt,Cr),localStorage.setItem(ur+"_"+this.getAppID()+"_"+(this.stateCenter.mode||pr.modeNo),gr),this.handleLogUpload(),this.stateCenter.appConfig||this.stateCenter.actionListener("_appConfigRsp"),[3,4];case 3:return Tr=kr.sent(),this.logger.error(nr.RTM_LOGIN_ROOM+" fail "+JSON.stringify(Tr)),Wt.setAttributes({error:Tr==null?void 0:Tr.code}),Wt.end(),[20012,20008].includes(Tr==null?void 0:Tr.code)&&this.stateCenter.roomModulesList.forEach(function(Wr){Wr.roomTryHandler&&Wr.roomTryHandler.loginFail(Ft.APPID_INVALID)}),[3,4];case 4:return[2]}})})},Jr.prototype.getCloudSetting=function(){var kt=this;this.cloudSetting.fetchMultiSetting([yr,"room"]).then(function(Gt){var Wt,tr;kt.logger.info(nr.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(Gt)),Gt&&(kt.stateCenter.settingConfig.setSetting((Gt=Gt==null?void 0:Gt.init)==null?void 0:Gt.setting,["remote_log_level"]),(Gt=kt.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(kt.logger.info(nr.RTM_LOGIN_ROOM+"  setting remote_log_level "+Gt),kt.logger.setRemoteLogLevel(Gt)),(Gt=kt.stateCenter.settingConfig.getSetting("unify",kt.stateCenter.netHasSet))&&(kt.logger.info(nr.RTM_LOGIN_ROOM+" unify "+JSON.stringify(Gt)),tr=Gt.enable,Gt=Gt.sdk_conn_ver,Wt=!0,Wt=!!(tr&&Gt<=pr.connectVer),kt.stateCenter.useNetAgent===!0&&Wt===!1&&(kt.cloudSetting.setOptions({unify:!1}),kt.stateCenter.connectState!=="connecting"&&(kt.stateCenter.connectState="connecting",kt.stateCenter.actionListener("_connectChanged","connecting")),tr=go([],kt.stateCenter.roomModulesList),go([],kt.stateCenter.roomModulesList).forEach(function(Qt){Qt.roomHandler.logout(!0,!0)}),kt.stateCenter.useNetAgent=Wt,tr.forEach(function(Qt){var gr;kt.stateCenter.roomModulesList.push(Qt),Qt.roomTryHandler||(Qt.roomTryHandler=new hn(kt.logger,kt.stateCenter,Qt)),Qt.roomTryHandler.init(kt.stateCenter.roomRetryTime),Qt.roomTryHandler.initRoom(Qt.roomHandler,Qt.roomID,Qt.token,{userID:kt.stateCenter.idName,userName:kt.stateCenter.nickName},kt.stateCenter.server,kt.stateCenter.serverBak,Qt.config),(gr=Qt.roomTryHandler)!=null&&gr.startMaxTime(),Qt.roomTryHandler.onactive=function(Tr,kr){Tr?kt.stateCenter.connectState!=="connected"&&(kt.stateCenter.connectState="connected",kt.stateCenter.actionListener("_connectChanged","connected",{roomID:Qt.roomID})):Qt.roomHandler.disconnectedHandle(kr)},(gr=Qt.roomTryHandler)!=null&&gr.active()}))),(Gt=kt.stateCenter.settingConfig.getSetting("report_script"))&&(Wt=Gt.url,tr=Gt.key,Gt=Gt.hash,kt.logger.info(nr.RTM_LOGIN_ROOM+" report script "+Wt+" "+tr+" "+Gt),kt.stateCenter.reporter.loadScript(!0,Wt,tr,Gt)))}).catch(function(Gt){kt.logger.warn(nr.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(Gt))}),this.stateCenter.onListener("_cloudSettingNotify",function(Gt,Wt){var tr=kt.cloudSetting.getEnvVariables(),Qt=kt.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:""},cr.kZMCloudSettingRefresh.event);Qt.setAttributes({request_kv:cr.kZMCloudSettingRefresh.request_kv(tr),files:cr.kZMCloudSettingRefresh.files([{name:Gt,content:Wt.setting,versions:Wt.versions,code:Wt==null?void 0:Wt.code,message:Wt==null?void 0:Wt.message}])}),Qt.end(),Gt===yr&&(kt.stateCenter.settingConfig.setSetting(Wt==null?void 0:Wt.setting,["remote_log_level"]),(tr=kt.stateCenter.settingConfig.getSetting("remote_log_level"))&&(kt.logger.info(nr.RTM_LOGIN_ROOM," setting remote_log_level "+tr),kt.logger.setRemoteLogLevel(tr)))})},Jr.prototype.cloudReportNotify=function(kt,Gt,Wt){(Wt==null?void 0:Wt.code)!==0||(Wt==null?void 0:Wt.polling)===!1?Gt==="request_start"?this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZMCloudSettingRequest.event,par:kt+""},cr.kZMCloudSettingRequest.event,!0):Gt==="request_end"&&this.stateCenter.reporter.spanEnd({key:cr.kZMCloudSettingRequest.event,par:kt+""},{request_detail:cr.kZMCloudSettingRequest.request_detail(Wt==null?void 0:Wt.reportData),files:cr.kZMCloudSettingRequest.files(Wt==null?void 0:Wt.files),code:Wt==null?void 0:Wt.code,request_params:Wt==null?void 0:Wt.params,request_kv:Wt==null?void 0:Wt.requestKV}):this.logger.info(nr.RTM_CLOUD_REPORT_NOTIFY+" not report")},Jr.prototype.loginReport=function(kt,Gt,Wt,tr,Qt){var gr=this,Tr=cr.kZMLoginRoom,kr=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:""},Tr.event);return kr.setAttributes({svr_env:Tr.svr_env(this.stateCenter.testEnvironment?"test":"online"),token:Tr.token(tr)}),Qt&&(typeof Qt.userUpdate=="boolean"&&kr.setAttribute("user_state_update",Tr.user_state_update(Qt.userUpdate?1:0)),typeof Qt.maxMemberCount=="number"&&kr.setAttributes({max_member_cnt:Tr.max_member_cnt(Qt.maxMemberCount)})),{interResolve:function(Wr){var Dr=gr.getRoomSessionID(Wt),Mr=gr.getRoomModules(Wt),Kr=gr.getSessionId(Wt);kr.setAttributes({room_id:Tr.room_id(Wt),room_sid_string:Tr.room_sid_string(Dr),liveroom_sid_string:Tr.liveroom_sid_string(Kr),try_cnt:Tr.try_cnt((Dr=Mr==null?void 0:Mr.roomTryHandler)==null?void 0:Dr.retryActiveCount),server:Tr.server((Kr=Mr==null?void 0:Mr.roomHandler)==null?void 0:Kr.server),room_mode:Tr.room_mode(gr.stateCenter.isMultiRoom?1:0),role:Tr.role(gr.stateCenter.role),audience_create_room:Tr.audience_create_room(gr.stateCenter.roomCreateFlag?1:0),max_member_cnt:Tr.max_member_cnt((Mr==null?void 0:Mr.maxMemberCount)||0)}),kr.end(),kt(Wr)},interReject:function(Wr,Dr){var Mr,Kr;Dr===void 0&&(Dr=""),kr.setAttributes({room_id:Tr.room_id(Wt)}),Wr.code<2e9&&1e9<Wr.code||Wr.code<1e6?(Mr=rr.decodeServerError(Wr.code,Wr.msg),Kr=rr.getLiveRoomError(Wr.code,gr.stateCenter.useNetAgent)):Mr={code:Wr.code,message:Wr.msg},Mr&&gr.stateCenter.reporter.setError(kr,{code:Mr.code,msg:Mr.message+Dr}),Kr&&Ft[Kr]&&(Wr.code=Ft[Kr].code,Wr.msg.includes("unknown")&&(Wr.msg=Ft[Kr].msg)),Wr.code&&Wr.msg&&Dr!==""?Gt({code:Wr.code,msg:Wr.msg+Dr}):Gt(Wr)},loginSpan:kr}},Jr.prototype.logoutRoom=function(kt){var Gt,Wt=this;this.logger.info(nr.RTM_LOGOUT_ROOM+" call by user "+kt),this.stateCenter.roomModulesList.length?kt===void 0?(go([],this.stateCenter.roomModulesList).forEach(function(tr){Wt.logoutSpan(tr),tr.roomHandler.logout(!0)}),this.cloudSetting.uninit()):typeof kt!="string"||kt==""?(this.logger.error(nr.RTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.logoutSpan(void 0,cr.kZMLogoutRoom.error.INPUT_PARAM)):(Gt=this.getRoomModules(kt))?(this.logoutSpan(Gt),Gt.roomHandler.logout(),this.stateCenter.roomModulesList.length===0&&this.cloudSetting.uninit()):(this.logger.error(nr.RTM_LOGOUT_ROOM+" room not exist"),this.logoutSpan(void 0,cr.kZMLogoutRoom.error.ROOM_NOT_EXIST,kt)):this.logger.warn(nr.RTM_LOGOUT_ROOM+" no room")},Jr.prototype.loginHall=function(kt,Gt,Wt){var tr=this;return new Promise(function(Qt,gr){return Hn(tr,void 0,void 0,function(){return po(this,function(Tr){return[2]})})})},Jr.prototype.loginHallReport=function(kt,Gt,Wt,tr){},Jr.prototype.logoutHall=function(){},Jr.prototype.enterRoom=function(kt,Gt){return new Promise(function(Wt,tr){console.error(At),tr()})},Jr.prototype.leaveRoom=function(){return new Promise(function(kt,Gt){console.error(At),Gt()})},Jr.prototype.sendCustomCommand=function(kt,Gt,Wt){return new Promise(function(tr,Qt){console.error(At),Qt()})},Jr.prototype._sendCustomCommand=function(kt,Gt,Wt){return new Promise(function(tr,Qt){console.error(At),Qt()})},Jr.prototype.sendBroadcastMessage=function(kt,Gt){return new Promise(function(Wt,tr){console.error(At),tr()})},Jr.prototype._sendBroadcastMessage=function(kt,Gt,Wt,tr){return new Promise(function(Qt,gr){console.error(At),gr()})},Jr.prototype.setRoomExtraInfo=function(kt,Gt,Wt){return new Promise(function(tr,Qt){console.error(At),Qt()})},Jr.prototype._setRoomExtraInfo=function(kt,Gt,Wt){return new Promise(function(tr,Qt){console.error(At),Qt()})},Jr.prototype.sendBarrageMessage=function(kt,Gt){return new Promise(function(Wt,tr){console.error(At),tr()})},Jr.prototype._sendBarrageMessage=function(kt,Gt,Wt,tr){return new Promise(function(Qt,gr){console.error(At),gr()})},Jr.prototype.sendRelayMessage=function(kt,Gt,Wt,tr,Qt){console.error(At)},Jr.prototype.requestJoinLive=function(kt,Gt,Wt,tr,Qt){return console.error(At),!1},Jr.prototype.inviteJoinLive=function(kt,Gt,Wt,tr,Qt){return console.error(At),!1},Jr.prototype.endJoinLive=function(kt,Gt,Wt,tr){return console.error(At),!1},Jr.prototype.respondJoinLive=function(kt,Gt,Wt,tr,Qt){return console.error(At),!1},Jr.prototype.getVersion=function(){return this.version},Jr.prototype.setSdkBizVersion=function(kt){typeof kt=="string"&&kt!==""&&(this.stateCenter.bizVersion=kt)},Jr.prototype.on=function(kt,Gt){var Wt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMListener.event},{key:""},cr.kZMOnListener.event);return Wt.setAttributes({listener:cr.kZMOnListener.listener(kt)}),this.stateCenter.listenerList[kt]?typeof Gt!="function"?(this.logger.error(nr.RTM_ON+" listener callBack must be funciton"),this.stateCenter.reporter.setError(Wt,cr.kZMOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(this.stateCenter.listenerList[kt].indexOf(Gt)==-1&&this.stateCenter.listenerList[kt].push(Gt),Wt.end(),!0):(this.logger.error(nr.RTM_ON+" event "+kt+" no found"),this.stateCenter.reporter.setError(Wt,cr.kZMOnListener.error.INPUT_PARAM," event "+kt+" no found"),!1)},Jr.prototype.off=function(kt,Gt){var Wt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMListener.event},{key:""},cr.kZMOffListener.event);if(Wt.setAttributes({listener:cr.kZMOffListener.listener(kt)}),!this.stateCenter.listenerList[kt])return this.logger.error(nr.RTM_OFF+" listener no found"),this.stateCenter.reporter.setError(Wt,cr.kZMOnListener.error.INPUT_PARAM," event "+kt+" no found"),!1;var tr=this.stateCenter.listenerList[kt];return Gt?tr.splice(tr.indexOf(Gt),1):this.stateCenter.listenerList[kt]=[],Wt.end(),!0},Jr.prototype._on=function(kt,Gt){return this.stateCenter.listenerList[kt]?typeof Gt!="function"?(this.logger.error(nr.RTM_ON+" listener callBack must be funciton"),!1):(this.stateCenter.listenerList[kt].indexOf(Gt)==-1&&this.stateCenter.listenerList[kt].push(Gt),!0):(this.logger.error(nr.RTM_ON+" event "+kt+" no found"),!1)},Jr.prototype._off=function(kt,Gt){if(!this.stateCenter.listenerList[kt])return this.logger.error(nr.RTM_OFF+" listener no found"),!1;var Wt=this.stateCenter.listenerList[kt];return Gt?Wt.splice(Wt.indexOf(Gt),1):this.stateCenter.listenerList[kt]=[],!0},Jr.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Jr.prototype.isLogin=function(kt){return!!(kt=this.getRoomModules(kt)||this.stateCenter.roomModulesList[0])&&kt.isLogin()},Jr.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Jr.prototype.getAppID=function(){return this.stateCenter.appid},Jr.prototype.getUserID=function(){return this.stateCenter.idName},Jr.prototype.getUseNetAgent=function(){return this.stateCenter.useNetAgent},Jr.prototype.getUserName=function(){return this.stateCenter.nickName},Jr.prototype.getToken=function(kt){return(this.getRoomModules(kt)||this.stateCenter.roomModulesList[0]).token},Jr.prototype.setRoomCreateFlag=function(kt){this.stateCenter.roomCreateFlag=kt},Jr.prototype.setRole=function(kt){this.stateCenter.role=kt},Jr.prototype.getSessionId=function(kt){return(kt=this.getRoomModules(kt)||this.stateCenter.roomModulesList[0])?kt.sessionID:"0"},Jr.prototype.getRoomSessionID=function(kt){return(kt=this.getRoomModules(kt)||this.stateCenter.roomModulesList[0])?kt.roomSessionID:"0"},Jr.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Jr.prototype.setAccess=function(kt){this.stateCenter.configOK&&(this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=kt,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.stateCenter.useNetAgent),this.cloudSetting.setOptions({unify:this.stateCenter.useNetAgent}))},Jr.prototype.enableMultiRoom=function(kt){var Gt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:""},cr.kZegoEnableMultiRoom.event);return typeof kt!="boolean"?(this.logger.error(nr.RTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.stateCenter.reporter.setError(Gt,cr.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(Gt.setAttribute("is_multi",cr.kZegoEnableMultiRoom.is_multi(kt)),0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error(nr.RTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.stateCenter.reporter.setError(Gt,cr.kZegoEnableMultiRoom.error.kInvalidParamError),!1):(Gt.end(),this.stateCenter.isMultiRoom=kt,this.stateCenter.setMultiRoom=!0))},Jr.prototype.getRoomModules=function(kt){return this.stateCenter.roomModulesList.find(function(Gt){return Gt.roomID==kt})},Jr.use=function(kt){switch(kt.type){case"message":case"live":kt.install(Jr,Fr,jn,Bn)}},Jr.prototype.resetRoomTokenTimer=function(kt,Gt){(kt=this.getRoomModules(kt)||this.stateCenter.roomModulesList[0])&&Gt&&0<Gt&&kt.roomHandler.resetTokenTimer(1e3*Gt-this.stateCenter.local_time_deviation)},Jr.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Jr.prototype.sendMessage=function(kt,Gt,Wt,tr){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendMessage(kt,Gt,Wt,tr)},Jr.prototype.setProtoFormat=function(kt){if(!["json","pb"].includes(kt=kt===void 0?"json":kt))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=kt},Jr.prototype.setSdkLoginRelateService=function(kt){Array.isArray(kt)&&kt.every(function(Gt){return typeof Gt=="string"})&&(this.stateCenter.relateService=kt)},Jr.prototype.sendMessageByService=function(kt,Gt,Wt,tr,Qt,gr){return this.service.sendMessage(kt,Gt,Wt,tr,Qt,gr)},Jr.prototype.getHeader=function(kt){var Gt,Wt,tr=this.stateCenter.roomModulesList[0];if(tr&&tr.isLogin())return Gt=tr.roomID,Wt=tr.sessionID,tr=tr.roomSessionID,this.service.getHeader(kt,Wt,Gt,tr);this.logger.error(nr.RTM_GET_HEADER+" room no found or no login")},Jr.prototype.sendPB=function(kt){return kt instanceof Uint8Array?this.service.sendPB(kt):(this.logger.error(nr.RTM_SEND_PB+" type error"),!1)},Jr.prototype.onPushBizChannel=function(kt){kt&&this.service.on("push_biz_channel",kt)},Jr.prototype.getRoomID=function(){return this.stateCenter.roomid},Jr.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Jr.prototype.isUseNetAgent=function(){return this.stateCenter.useNetAgent},Jr.prototype.getReqHead=function(kt){return kt=typeof kt=="string"&&kt!==""&&this.getRoomModules(kt)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(kt)},Jr.prototype.sendSwitchMessage=function(kt,Gt){return typeof kt=="string"&&Gt?this.liveRoomHandler.sendMessage(kt,Gt,void 0,void 0,void 0,!1):-1},Jr.prototype.onSwitchMessage=function(kt){kt&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=kt)},Jr.prototype.logoutSpan=function(kt,Gt,Wt){var tr=this,Qt=this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMInitSetting.event},{key:cr.kZMLogoutRoom.event,par:kt==null?void 0:kt.roomID},cr.kZMLogoutRoom.event,!0);Qt.setAttributes({is_multi:cr.kZMLogoutRoom.is_multi(this.stateCenter.isMultiRoom),is_send_cmd_net:cr.kZMLogoutRoom.is_send_cmd_net(!0)}),kt?Qt.setAttributes({room_id:cr.kZMLogoutRoom.room_id(kt==null?void 0:kt.roomID),room_sid_string:cr.kZMLogoutRoom.room_sid_string(kt==null?void 0:kt.roomSessionID),liveroom_sid_string:cr.kZMLogoutRoom.liveroom_sid_string(kt==null?void 0:kt.sessionID)}):typeof Wt=="string"&&Qt.setAttributes({room_id:cr.kZMLogoutRoom.room_id(Wt)}),Gt?this.stateCenter.reporter.setError(Qt,Gt):Qt.end(),setTimeout(function(){tr.reporter.flush()},200)},Jr.prototype.getMsgSpan=function(kt,Gt,Wt){return this.stateCenter.reporter.createSpan(ut.H,{key:cr.kZMLoginRoom.event,par:Gt},{key:kt,par:Gt},kt,Wt=Wt!==void 0&&Wt)},Jr.prototype.updateTimeOffsetInterval=function(){var kt=this;typeof this.netAgent.timeOffset=="number"&&this.stateCenter.reporter.setTimeOffset(this.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout(function(){kt.updateTimeOffsetInterval()},9e5)},Jr);function Jr(kt,Gt,Wt,tr,Qt,gr,Tr,kr,Wr){var Dr,Mr=this,Kr=(this.logger=Wt,this.dataReport=tr,this.reporter=Qt,this.cloudSetting=gr,this.version=Tr,this.options=Wr,this.stateCenter=new mr(this.logger,this.dataReport),this.stateCenter.ENV=kr,this.stateCenter.product=vr.product,this.getReportSeq=Ct,this.getSeq=bt,this.initCallback(),this.stateCenter.deviceID=rr.generateUUID(kr),this.reporter.init(kt,kr,this.stateCenter.deviceID),this.reporter.setLogger(this.logger),this.stateCenter.reporter=this.reporter,cr.kZMInitSetting),wn=this.stateCenter.reporter.createSpan(ut.H,{key:""},{key:Kr.event},Kr.event,!0);if(kr!=0&&kr!=1||this.setDebug(Gt),Wt="Express",(tr=this.options)!=null&&tr.reportData&&(Dr=(gr=(Qt=this.options)==null?void 0:Qt.reportData)==null?void 0:gr.version,Wt=((Wr=(Tr=this.options)==null?void 0:Tr.reportData)==null?void 0:Wr.project)||Wt),wn.setAttributes({biz_type:Kr.biz_type(0),project:Kr.project(Wt),servers:Kr.servers(typeof Gt=="string"?[Gt]:Gt),liveroom_version:Kr.liveroom_version(Dr),is_from_cache:Kr.is_from_cache(!1),sev_env:Kr.sev_env(this.stateCenter.testEnvironment?"test":"online")}),rr.checkConfigParam(kt,Gt,this.logger)){this.stateCenter.appid=kt,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=Ot.MODE_TEST),this.netAgent=new Nt,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),this.netAgent.setAppInfo({appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode}),this.liveRoomHandler=new Bn(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new jn(this.stateCenter,this.logger,this),this.stateCenter.settingConfig=new Kn,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:hr.product,appID:kt,urls:hr.URL,env:kr,pollingNotify:function(qn,Pn){Mr.logger.info(nr.RTM_CONSTRUCTOR," setting file changed "+qn+" "+JSON.stringify(Pn)),Mr.stateCenter.actionListener("_cloudSettingNotify",qn,Pn)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent}),Qt=((tr=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info(nr.RTM_CONSTRUCTOR+" setting remote_log_level default "+tr),this.logger.setRemoteLogLevel(tr)),""),gr=(kr===0?Qt="rtc":kr===1&&(Qt="xcx"),this.cloudSetting.setEnvVariable("environment",Qt),this.cloudSetting.getSettingCache(yr)),Tr=this.cloudSetting.getSettingCache("room");var xn=!1,On=setTimeout(function(){Mr.logger.warn(nr.RTM_CONSTRUCTOR+" time out, get cache settings failed!"),Mr.stateCenter.useNetAgent&&(xn=!0,Mr.createNetAgent(),Mr.getStoreAppConfig()),wn.setAttributes({use_na:Kr.use_na(Mr.stateCenter.useNetAgent?1:0)}),wn.end()},3e3);if(Promise.all([gr,Tr]).then(function(qn){On&&clearTimeout(On);var Pn=qn==null?void 0:qn[0],uo=((io=((io=(Mr.stateCenter.settingConfig.setSetting(Pn==null?void 0:Pn.setting),Mr.stateCenter.useNetAgent=Mr.getSettingUnify(Mr.stateCenter.netHasSet),Mr.cloudSetting.setOptions({unify:Mr.stateCenter.useNetAgent}),Mr.stateCenter.useNetAgent&&!xn&&(Mr.createNetAgent(),Mr.getStoreAppConfig()),Mr.stateCenter.settingConfig.getSetting("remote_log_level",!0)))&&(Mr.logger.info(nr.RTM_CONSTRUCTOR+"  setting remote_log_level "+io),Mr.logger.setRemoteLogLevel(io)),Mr.stateCenter.settingConfig.getSetting("report_script")))?(uo=io.url,yo=io.key,io=io.hash,Mr.logger.info(nr.RTM_CONSTRUCTOR+" report script "+uo+" "+yo+" "+io),Mr.stateCenter.reporter.loadScript(!1,uo,yo,io),wn.setAttributes({lua_md5:Kr.lua_md5(io)})):Mr.stateCenter.reporter.loadScript(!1,"","",""),qn==null?void 0:qn[1]),yo=(Mr.stateCenter.settingConfig.setSetting(uo==null?void 0:uo.setting),Mr.stateCenter.reporter.createSpan(ut.H,{key:Kr.event},{key:""},cr.kZMCloudSettingCache.event)),io=(yo.setAttributes({files:cr.kZMCloudSettingCache.files([{name:yr,content:JSON.stringify(Pn==null?void 0:Pn.setting),versions:JSON.stringify(Pn==null?void 0:Pn.versions),code:0,message:""},{name:"room",content:JSON.stringify(uo==null?void 0:uo.setting),versions:JSON.stringify(uo==null?void 0:uo.versions),code:0,message:""}])}),yo.end(),wn.setAttributes({use_na:Kr.use_na(Mr.stateCenter.useNetAgent?1:0)}),wn.end(),Array.isArray(Gt)?Gt[0]:Gt);if(!Mr.stateCenter.useNetAgent&&!rr.isRightServerForAppid(io,kt))throw Mr.logger.error(nr.RTM_CONSTRUCTOR+" the server does not match the appID"),new Error("The server does not match the appID")}).catch(function(qn){On&&clearTimeout(On),wn.setAttributes({use_na:Kr.use_na(Mr.stateCenter.useNetAgent?1:0)}),wn.end(),Mr.logger.warn(nr.RTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(qn))}),typeof Gt=="string"?(this.stateCenter.server=Gt,this.stateCenter.serverBak=Gt):Array.isArray(Gt)&&0<Gt.length&&(this.stateCenter.server=Gt[0],this.stateCenter.serverBak=Gt[1]||Gt[0]),kr==0||kr==2)this.bindWindowListener(),this.logger.info(nr.RTM_CONSTRUCTOR+"  "+navigator.appVersion+" "+this.version),this.stateCenter.networkState=!navigator||navigator.onLine?ht.online:ht.offline,Wr=rr.getBrowser()==="Firefox"?navigator==null?void 0:navigator.userAgent:navigator==null?void 0:navigator.appVersion,wn.setAttribute("sys_info",Wr||""),this.initSpans();else if(kr==1||kr==3){this.bindWxListener();try{var Rn=wx.getSystemInfoSync(),co={brand:Rn.brand,model:Rn.model,system:Rn.system,platform:Rn.platform,version:Rn.version,SDKVersion:Rn.SDKVersion};this.logger.warn(nr.RTM_CONSTRUCTOR+" "+JSON.stringify(co)),wn.setAttribute("mini_sys_infos",co),wn.end()}catch{this.logger.warn(nr.RTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error(nr.RTM_CONSTRUCTOR+" init sdk error"),this.stateCenter.reporter.setError(wn,Kr.error.kInvalidParamError)}var bo=lt(14),Wn=(Gn.prototype.setLog=function(kt){this.zegoSetting.setLog(kt)},Gn.prototype.init=function(kt){this.zegoSetting.init(kt)},Gn.prototype.setEnvVariable=function(kt,Gt){this.zegoSetting.setEnvVariable(kt,Gt)},Gn.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},Gn.prototype.fetchSetting=function(kt,Gt,Wt){return this.zegoSetting.fetchSetting(kt,Gt,Wt)},Gn.prototype.fetchMultiSetting=function(kt,Gt,Wt){return this.zegoSetting.fetchMultiSetting(kt,Gt,Wt)},Gn.prototype.setOptions=function(kt){return this.zegoSetting.setOptions(kt)},Gn.prototype.getSettingCache=function(kt){return this.zegoSetting.getSettingCache(kt)},Gn.prototype.setToken=function(kt){this.zegoSetting.setToken(kt)},Gn.prototype.setUserID=function(kt){this.zegoSetting.setUserID(kt)},Gn.prototype.activePolling=function(){this.zegoSetting.activePolling()},Gn.prototype.uninit=function(){var kt;(kt=this.zegoSetting)!=null&&kt.uninit()},Gn.prototype.getEnvVariable=function(kt){this.zegoSetting.getEnvVariable(kt)},Gn);function Gn(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new bo.ZegoSetting}var eo=lt(9),ho=function(){return(ho=Object.assign||function(kt){for(var Gt,Wt=1,tr=arguments.length;Wt<tr;Wt++)for(var Qt in Gt=arguments[Wt])Object.prototype.hasOwnProperty.call(Gt,Qt)&&(kt[Qt]=Gt[Qt]);return kt}).apply(this,arguments)},lo=(Dn.prototype.init=function(kt,Gt,Wt){var tr=this;this.tracer.init({product:this.product,version:"1.0.0",env:Gt,appID:kt,deviceID:Wt,importantLevel:vr.importLevel,levels:vr.levels,bps:vr.bps,spanStart:function(Qt){try{typeof scriptSpanStart=="function"&&scriptSpanStart(tr.commonStates,tr.tracer,Qt)}catch(gr){tr.logger.warn(nr.TRACER_INIT+" dy span start ",JSON.stringify(gr))}},spanBeforeEnd:function(Qt){Qt.setAttribute("ntype_end",rr.getNetType())},spanEnd:function(Qt,gr){try{typeof scriptSpanEnd=="function"&&scriptSpanEnd(tr.commonStates,tr.tracer,Qt)}catch(Tr){tr.logger.warn(nr.TRACER_INIT+" dy span end ",JSON.stringify(Tr))}},resources:{product:this.product,appid:kt,device_id:Wt,console:Gt==0?"rtc":"xcx"}})},Dn.prototype.setConfig=function(kt){this.tracer.setConfig(kt)},Dn.prototype.loadScript=function(kt,Gt,Wt,tr){return function(Qt,gr,Tr,kr){return new(Tr=Tr||Promise)(function(Wr,Dr){function Mr(xn){try{wn(kr.next(xn))}catch(On){Dr(On)}}function Kr(xn){try{wn(kr.throw(xn))}catch(On){Dr(On)}}function wn(xn){var On;xn.done?Wr(xn.value):((On=xn.value)instanceof Tr?On:new Tr(function(Rn){Rn(On)})).then(Mr,Kr)}wn((kr=kr.apply(Qt,gr||[])).next())})}(this,void 0,void 0,function(){var Qt;return function(gr,Tr){var kr,Wr,Dr,Mr={label:0,sent:function(){if(1&Dr[0])throw Dr[1];return Dr[1]},trys:[],ops:[]},Kr={next:wn(0),throw:wn(1),return:wn(2)};return typeof Symbol=="function"&&(Kr[Symbol.iterator]=function(){return this}),Kr;function wn(xn){return function(On){var Rn=[xn,On];if(kr)throw new TypeError("Generator is already executing.");for(;Mr;)try{if(kr=1,Wr&&(Dr=2&Rn[0]?Wr.return:Rn[0]?Wr.throw||((Dr=Wr.return)&&Dr.call(Wr),0):Wr.next)&&!(Dr=Dr.call(Wr,Rn[1])).done)return Dr;switch(Wr=0,(Rn=Dr?[2&Rn[0],Dr.value]:Rn)[0]){case 0:case 1:Dr=Rn;break;case 4:return Mr.label++,{value:Rn[1],done:!1};case 5:Mr.label++,Wr=Rn[1],Rn=[0];continue;case 7:Rn=Mr.ops.pop(),Mr.trys.pop();continue;default:if(!(Dr=0<(Dr=Mr.trys).length&&Dr[Dr.length-1])&&(Rn[0]===6||Rn[0]===2)){Mr=0;continue}if(Rn[0]===3&&(!Dr||Rn[1]>Dr[0]&&Rn[1]<Dr[3])){Mr.label=Rn[1];break}if(Rn[0]===6&&Mr.label<Dr[1]){Mr.label=Dr[1],Dr=Rn;break}if(Dr&&Mr.label<Dr[2]){Mr.label=Dr[2],Mr.ops.push(Rn);break}Dr[2]&&Mr.ops.pop(),Mr.trys.pop();continue}Rn=Tr.call(gr,Mr)}catch(co){Rn=[6,co],Wr=0}finally{kr=Dr=0}if(5&Rn[0])throw Rn[1];return{value:Rn[0]?Rn[1]:void 0,done:!0}}}}(this,function(gr){switch(gr.label){case 0:return gr.trys.push([0,2,,3]),[4,this.tracer.loadJs(kt,Gt,Wt,tr,`
function scriptSpanStart(states, tracer, span) {
    
}
function scriptSpanEnd(states, tracer, span) {
    if (span['tags']['msg_content']) {
        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;
        delete span['tags']['msg_content'];
    }
    delete span['tags']['resp'];
    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];
    if (filterSpans.includes(span.name)) {
        console.log(span.name + ' do not report');
        span.droped = true;
    }
}
function scriptInit(states, tracer) {

}

`,{})];case 1:return gr.sent(),typeof scriptInit=="function"&&scriptInit(this.commonStates,this.tracer),[3,3];case 2:return Qt=gr.sent(),this.logger.warn(nr.TRACER_LOAD_SCRIPT," load script fail "+JSON.stringify(Qt)),[3,3];case 3:return[2]}})})},Dn.prototype.setReporterInfo=function(kt,Gt){var Wt=new Map;Wt.set("userID",kt),Wt.set("token",Gt),this.tracer.startReport(Wt)},Dn.prototype.flush=function(kt){this.tracer.flush(kt)},Dn.prototype.setCommonStates=function(kt){this.commonStates=kt},Dn.prototype.setResource=function(kt){this.tracer.setResource(kt)},Dn.prototype.setCommonAttributes=function(kt){this.commonAttrs=Object.assign({},this.commonAttrs,kt)},Dn.prototype.createSpan=function(kt,Gt,Wt){return(kt=this.tracer.createSpan(kt,Gt,{parent:Wt})).setAttributes(ho({ntype:rr.getNetType(),error:0,message:""},this.commonAttrs)),kt},Dn.prototype.spanEnd=function(kt,Gt){kt&&Gt&&kt.setAttributes(ho({},Gt)),kt&&kt.end()},Dn.prototype.spanSetAttributes=function(kt,Gt){kt&&kt.setAttributes(Gt)},Dn.prototype.spanAppendAttribute=function(kt,Gt,Wt){kt&&kt.appendAttribute(Gt,Wt)},Dn.prototype.setError=function(kt,Gt,Wt){kt.setAttributes({error:Gt.code||Gt.errorCode,message:(Gt.msg||Gt.message||Gt.extendedData)+" "+(Wt=Wt===void 0?"":Wt)}),kt.end()},Dn.prototype.setLogger=function(kt){this.tracer.setLogger(kt)},Dn.prototype.setTimeOffset=function(kt){this.tracer.setTimeOffset(kt)},Dn);function Dn(kt){this.logger=kt,this.product=vr.product,this.commonAttrs={},this.commonStates={},new eo.DynamicCode,this.tracer=new eo.ZegoTracer,this.tracer.setSampleConfig({level:ut.L})}var sr=["/sdk/start_publish","/publish/start","/publish/restart"],xr=["/sdk/start_play","/play/start","/play/restart"],dt=(Lt.prototype.init=function(kt,Gt,Wt){this.tracerHandler.init(kt,Gt,Wt)},Lt.prototype.setConfig=function(kt){this.tracerHandler.setConfig(kt)},Lt.prototype.loadScript=function(kt,Gt,Wt,tr){return this.tracerHandler.loadScript(kt,Gt,Wt,tr)},Lt.prototype.setReporterInfo=function(kt,Gt){this.tracerHandler.setReporterInfo(kt,Gt)},Lt.prototype.flush=function(kt){this.tracerHandler.flush(kt)},Lt.prototype.setCommonStates=function(kt){this.tracerHandler.setCommonStates(kt)},Lt.prototype.setResource=function(kt){this.tracerHandler.setResource(kt)},Lt.prototype.setCommonAttributes=function(kt){this.tracerHandler.setCommonAttributes(kt)},Lt.prototype.setPublicPros=function(kt){this.publicPros=Object.assign({},this.publicPros,kt)},Lt.prototype.createSpan=function(kt,Gt,Wt,tr,Qt){var gr;Gt&&Gt.key&&Gt.par?(Tr=Gt.par1?"_"+Gt.par1:"",!(gr=(gr=this.reportList[Gt.key])==null?void 0:gr[Gt.par+Tr])&&Gt.bak_key&&(gr=(kr=this.reportList[Gt.bak_key])==null?void 0:kr[Gt.par+Tr])):Gt&&!(gr=this.reportList[Gt.key])&&Gt.bak_key&&(gr=this.reportList[Gt.bak_key]),gr=gr||this.reportList[cr.kZMInitSetting.event];var Tr,kr=this.tracerHandler.createSpan(kt,tr,gr);return Gt.key==="/sdk/login"&&(kr.setAttribute("room_id",Gt.par),this.publicPros[Gt.par]&&kr.setAttributes(this.publicPros[Gt.par])),(sr.includes(Gt.key)||xr.includes(Gt.key))&&kr.setAttribute("stream_id",Gt.par),sr.includes(Gt.key)&&this.publicPros["_publish_"+Gt.par]&&kr.setAttributes(this.publicPros["_publish_"+Gt.par]),xr.includes(Gt.key)&&this.publicPros["_play_"+Gt.par]&&kr.setAttributes(this.publicPros["_play_"+Gt.par]),Qt&&(Wt.par?(this.reportList[Wt.key]||(this.reportList[Wt.key]={}),Tr=Wt.par1?"_"+Wt.par1:"",this.reportList[Wt.key][Wt.par+Tr]=kr):this.reportList[Wt.key]=kr),kr},Lt.prototype.setSpanInMap=function(kt,Gt){var Wt;Gt.par?(this.reportList[Gt.key]||(this.reportList[Gt.key]={}),Wt=Gt.par2?"_"+Gt.par2:"",this.reportList[Gt.key][Gt.par+Wt]=kt):this.reportList[Gt.key]=kt},Lt.prototype.spanEnd=function(kt,Gt,Wt){var tr;kt.par?(tr=kt.par1?"_"+kt.par1:"",tr=this.reportList[kt.key]&&this.reportList[kt.key][kt.par+tr],this.reportList[kt.key]&&!Wt&&delete this.reportList[kt.key][kt.par]):(tr=this.reportList[kt.key],Wt||delete this.reportList[kt.key]),this.tracerHandler.spanEnd(tr,Gt)},Lt.prototype.spanSetAttributes=function(kt,Gt){var Wt,tr;kt.par?(Wt=kt.par1?"_"+kt.par1:"",!(tr=this.reportList[kt.key]&&this.reportList[kt.key][kt.par+Wt])&&kt.bak_key&&(tr=this.reportList[kt.bak_key]&&this.reportList[kt.bak_key][kt.par+Wt])):!(tr=this.reportList[kt.key])&&kt.bak_key&&(tr=this.reportList[kt.key]),this.tracerHandler.spanSetAttributes(tr,Gt)},Lt.prototype.spanAppendAttribute=function(kt,Gt,Wt){var tr,Qt;kt.par?(tr=kt.par1?"_"+kt.par1:"",!(Qt=this.reportList[kt.key]&&this.reportList[kt.key][kt.par+tr])&&kt.bak_key&&(Qt=this.reportList[kt.bak_key]&&this.reportList[kt.bak_key][kt.par+tr])):!(Qt=this.reportList[kt.key])&&kt.bak_key&&(Qt=this.reportList[kt.key]),this.tracerHandler.spanAppendAttribute(Qt,Gt,Wt)},Lt.prototype.setError=function(kt,Gt,Wt){this.tracerHandler.setError(kt,Gt,Wt)},Lt.prototype.setLogger=function(kt){this.tracerHandler.setLogger(kt)},Lt.prototype.setTimeOffset=function(kt){this.tracerHandler.setTimeOffset(kt)},Lt);function Lt(kt){this.logger=kt,this.reportList={},this.publicPros={},this.tracerHandler=new lo(kt)}Zt.prototype.enableMultiRoom=function(kt){return this.zegoWebRTM.enableMultiRoom(kt)},Zt.prototype.loginRoom=function(kt,Gt,Wt,tr){return this.zegoWebRTM.loginRoom(kt,Gt,Wt,tr)},Zt.prototype.logoutRoom=function(kt){return this.zegoWebRTM.logoutRoom(kt)},Zt.prototype.renewToken=function(kt,Gt){return this.zegoWebRTM.renewToken(kt,Gt)},Zt.prototype.sendBarrageMessage=function(kt,Gt){return this.zegoWebRTM.sendBarrageMessage(kt,Gt)},Zt.prototype.sendBroadcastMessage=function(kt,Gt){return this.zegoWebRTM.sendBroadcastMessage(kt,Gt)},Zt.prototype.sendCustomCommand=function(kt,Gt,Wt){return this.zegoWebRTM.sendCustomCommand(kt,Gt,Wt)},Zt.prototype.setRoomExtraInfo=function(kt,Gt,Wt){return this.zegoWebRTM.setRoomExtraInfo(kt,Gt,Wt)},Zt.prototype.setLogConfig=function(kt){return this.zegoWebRTM.setLogConfig(kt)},Zt.prototype.setDebugVerbose=function(kt){return this.zegoWebRTM.setDebugVerbose(kt)},Zt.prototype.on=function(kt,Gt){return this.zegoWebRTM.on(kt,Gt)},Zt.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},Zt.prototype.off=function(kt,Gt){return this.zegoWebRTM.off(kt,Gt)},Zt.prototype.loginHall=function(kt,Gt,Wt){return this.zegoWebRTM.loginHall(kt,Gt,Wt)},Zt.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},Zt.prototype.enterRoom=function(kt,Gt){return this.zegoWebRTM.enterRoom(kt,Gt)},Zt.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},Zt.use=function(kt){mo.use(kt)},Zt.version="1.21.0";var Vt=Zt;function Zt(kt,Gt,Wt,tr){this.logger=new mt.ZegoLogger(Wt=Wt===void 0?0:Wt),this.dataReport=new mt.ZegoDataReport(this.logger),this.cloudSetting=new Wn,this.reporter=new dt(this.logger),this.zegoWebRTM=new mo(kt,Gt,this.logger,this.dataReport,this.reporter,this.cloudSetting,Zt.version,Wt,tr)}}],it={},nt.m=ot,nt.c=it,nt.d=function(st,at,lt){nt.o(st,at)||Object.defineProperty(st,at,{enumerable:!0,get:lt})},nt.r=function(st){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(st,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(st,"__esModule",{value:!0})},nt.t=function(st,at){if(1&at&&(st=nt(st)),8&at||4&at&&typeof st=="object"&&st&&st.__esModule)return st;var lt=Object.create(null);if(nt.r(lt),Object.defineProperty(lt,"default",{enumerable:!0,value:st}),2&at&&typeof st!="string")for(var ct in st)nt.d(lt,ct,function(pt){return st[pt]}.bind(null,ct));return lt},nt.n=function(st){var at=st&&st.__esModule?function(){return st.default}:function(){return st};return nt.d(at,"a",at),at},nt.o=function(st,at){return Object.prototype.hasOwnProperty.call(st,at)},nt.p="",nt(nt.s=22);function nt(st){if(it[st])return it[st].exports;var at=it[st]={i:st,l:!1,exports:{}};return ot[st].call(at.exports,at,at.exports,nt),at.l=!0,at.exports}var ot,it})}(ZegoExpressWebRTM)),ZegoExpressWebRTMExports}(function(module,exports){(function(_e,et){module.exports=et(requireZegoExpressWebRTM())})(typeof self<"u"?self:commonjsGlobal$1,function(__WEBPACK_EXTERNAL_MODULE__4119__){return function(){var __webpack_modules__={4537:function(_e){_e.exports=function(et,rt){for(var nt=new Array(arguments.length-1),ot=0,it=2,st=!0;it<arguments.length;)nt[ot++]=arguments[it++];return new Promise(function(at,lt){nt[ot]=function(ct){if(st)if(st=!1,ct)lt(ct);else{for(var pt=new Array(arguments.length-1),ut=0;ut<pt.length;)pt[ut++]=arguments[ut];at.apply(null,pt)}};try{et.apply(rt||null,nt)}catch(ct){st&&(st=!1,lt(ct))}})}},7419:function(_e,et){var rt=et;rt.length=function(at){var lt=at.length;if(!lt)return 0;for(var ct=0;--lt%4>1&&at.charAt(lt)==="=";)++ct;return Math.ceil(3*at.length)/4-ct};for(var nt=new Array(64),ot=new Array(123),it=0;it<64;)ot[nt[it]=it<26?it+65:it<52?it+71:it<62?it-4:it-59|43]=it++;rt.encode=function(at,lt,ct){for(var pt,ut=null,ht=[],ft=0,gt=0;lt<ct;){var vt=at[lt++];switch(gt){case 0:ht[ft++]=nt[vt>>2],pt=(3&vt)<<4,gt=1;break;case 1:ht[ft++]=nt[pt|vt>>4],pt=(15&vt)<<2,gt=2;break;case 2:ht[ft++]=nt[pt|vt>>6],ht[ft++]=nt[63&vt],gt=0}ft>8191&&((ut||(ut=[])).push(String.fromCharCode.apply(String,ht)),ft=0)}return gt&&(ht[ft++]=nt[pt],ht[ft++]=61,gt===1&&(ht[ft++]=61)),ut?(ft&&ut.push(String.fromCharCode.apply(String,ht.slice(0,ft))),ut.join("")):String.fromCharCode.apply(String,ht.slice(0,ft))};var st="invalid encoding";rt.decode=function(at,lt,ct){for(var pt,ut=ct,ht=0,ft=0;ft<at.length;){var gt=at.charCodeAt(ft++);if(gt===61&&ht>1)break;if((gt=ot[gt])===void 0)throw Error(st);switch(ht){case 0:pt=gt,ht=1;break;case 1:lt[ct++]=pt<<2|(48&gt)>>4,pt=gt,ht=2;break;case 2:lt[ct++]=(15&pt)<<4|(60&gt)>>2,pt=gt,ht=3;break;case 3:lt[ct++]=(3&pt)<<6|gt,ht=0}}if(ht===1)throw Error(st);return ct-ut},rt.test=function(at){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(at)}},9211:function(_e){function et(){this._listeners={}}_e.exports=et,et.prototype.on=function(rt,nt,ot){return(this._listeners[rt]||(this._listeners[rt]=[])).push({fn:nt,ctx:ot||this}),this},et.prototype.off=function(rt,nt){if(rt===void 0)this._listeners={};else if(nt===void 0)this._listeners[rt]=[];else for(var ot=this._listeners[rt],it=0;it<ot.length;)ot[it].fn===nt?ot.splice(it,1):++it;return this},et.prototype.emit=function(rt){var nt=this._listeners[rt];if(nt){for(var ot=[],it=1;it<arguments.length;)ot.push(arguments[it++]);for(it=0;it<nt.length;)nt[it].fn.apply(nt[it++].ctx,ot)}return this}},945:function(_e){function et(st){return typeof Float32Array<"u"?function(){var at=new Float32Array([-0]),lt=new Uint8Array(at.buffer),ct=lt[3]===128;function pt(gt,vt,yt){at[0]=gt,vt[yt]=lt[0],vt[yt+1]=lt[1],vt[yt+2]=lt[2],vt[yt+3]=lt[3]}function ut(gt,vt,yt){at[0]=gt,vt[yt]=lt[3],vt[yt+1]=lt[2],vt[yt+2]=lt[1],vt[yt+3]=lt[0]}function ht(gt,vt){return lt[0]=gt[vt],lt[1]=gt[vt+1],lt[2]=gt[vt+2],lt[3]=gt[vt+3],at[0]}function ft(gt,vt){return lt[3]=gt[vt],lt[2]=gt[vt+1],lt[1]=gt[vt+2],lt[0]=gt[vt+3],at[0]}st.writeFloatLE=ct?pt:ut,st.writeFloatBE=ct?ut:pt,st.readFloatLE=ct?ht:ft,st.readFloatBE=ct?ft:ht}():function(){function at(ct,pt,ut,ht){var ft=pt<0?1:0;if(ft&&(pt=-pt),pt===0)ct(1/pt>0?0:2147483648,ut,ht);else if(isNaN(pt))ct(2143289344,ut,ht);else if(pt>34028234663852886e22)ct((ft<<31|2139095040)>>>0,ut,ht);else if(pt<11754943508222875e-54)ct((ft<<31|Math.round(pt/1401298464324817e-60))>>>0,ut,ht);else{var gt=Math.floor(Math.log(pt)/Math.LN2);ct((ft<<31|gt+127<<23|8388607&Math.round(pt*Math.pow(2,-gt)*8388608))>>>0,ut,ht)}}function lt(ct,pt,ut){var ht=ct(pt,ut),ft=2*(ht>>31)+1,gt=ht>>>23&255,vt=8388607&ht;return gt===255?vt?NaN:ft*(1/0):gt===0?1401298464324817e-60*ft*vt:ft*Math.pow(2,gt-150)*(vt+8388608)}st.writeFloatLE=at.bind(null,rt),st.writeFloatBE=at.bind(null,nt),st.readFloatLE=lt.bind(null,ot),st.readFloatBE=lt.bind(null,it)}(),typeof Float64Array<"u"?function(){var at=new Float64Array([-0]),lt=new Uint8Array(at.buffer),ct=lt[7]===128;function pt(gt,vt,yt){at[0]=gt,vt[yt]=lt[0],vt[yt+1]=lt[1],vt[yt+2]=lt[2],vt[yt+3]=lt[3],vt[yt+4]=lt[4],vt[yt+5]=lt[5],vt[yt+6]=lt[6],vt[yt+7]=lt[7]}function ut(gt,vt,yt){at[0]=gt,vt[yt]=lt[7],vt[yt+1]=lt[6],vt[yt+2]=lt[5],vt[yt+3]=lt[4],vt[yt+4]=lt[3],vt[yt+5]=lt[2],vt[yt+6]=lt[1],vt[yt+7]=lt[0]}function ht(gt,vt){return lt[0]=gt[vt],lt[1]=gt[vt+1],lt[2]=gt[vt+2],lt[3]=gt[vt+3],lt[4]=gt[vt+4],lt[5]=gt[vt+5],lt[6]=gt[vt+6],lt[7]=gt[vt+7],at[0]}function ft(gt,vt){return lt[7]=gt[vt],lt[6]=gt[vt+1],lt[5]=gt[vt+2],lt[4]=gt[vt+3],lt[3]=gt[vt+4],lt[2]=gt[vt+5],lt[1]=gt[vt+6],lt[0]=gt[vt+7],at[0]}st.writeDoubleLE=ct?pt:ut,st.writeDoubleBE=ct?ut:pt,st.readDoubleLE=ct?ht:ft,st.readDoubleBE=ct?ft:ht}():function(){function at(ct,pt,ut,ht,ft,gt){var vt=ht<0?1:0;if(vt&&(ht=-ht),ht===0)ct(0,ft,gt+pt),ct(1/ht>0?0:2147483648,ft,gt+ut);else if(isNaN(ht))ct(0,ft,gt+pt),ct(2146959360,ft,gt+ut);else if(ht>17976931348623157e292)ct(0,ft,gt+pt),ct((vt<<31|2146435072)>>>0,ft,gt+ut);else{var yt;if(ht<22250738585072014e-324)ct((yt=ht/5e-324)>>>0,ft,gt+pt),ct((vt<<31|yt/4294967296)>>>0,ft,gt+ut);else{var mt=Math.floor(Math.log(ht)/Math.LN2);mt===1024&&(mt=1023),ct(4503599627370496*(yt=ht*Math.pow(2,-mt))>>>0,ft,gt+pt),ct((vt<<31|mt+1023<<20|1048576*yt&1048575)>>>0,ft,gt+ut)}}}function lt(ct,pt,ut,ht,ft){var gt=ct(ht,ft+pt),vt=ct(ht,ft+ut),yt=2*(vt>>31)+1,mt=vt>>>20&2047,Et=4294967296*(1048575&vt)+gt;return mt===2047?Et?NaN:yt*(1/0):mt===0?5e-324*yt*Et:yt*Math.pow(2,mt-1075)*(Et+4503599627370496)}st.writeDoubleLE=at.bind(null,rt,0,4),st.writeDoubleBE=at.bind(null,nt,4,0),st.readDoubleLE=lt.bind(null,ot,0,4),st.readDoubleBE=lt.bind(null,it,4,0)}(),st}function rt(st,at,lt){at[lt]=255&st,at[lt+1]=st>>>8&255,at[lt+2]=st>>>16&255,at[lt+3]=st>>>24}function nt(st,at,lt){at[lt]=st>>>24,at[lt+1]=st>>>16&255,at[lt+2]=st>>>8&255,at[lt+3]=255&st}function ot(st,at){return(st[at]|st[at+1]<<8|st[at+2]<<16|st[at+3]<<24)>>>0}function it(st,at){return(st[at]<<24|st[at+1]<<16|st[at+2]<<8|st[at+3])>>>0}_e.exports=et(et)},7199:function(module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}module.exports=inquire},6662:function(_e){_e.exports=function(et,rt,nt){var ot=nt||8192,it=ot>>>1,st=null,at=ot;return function(lt){if(lt<1||lt>it)return et(lt);at+lt>ot&&(st=et(ot),at=0);var ct=rt.call(st,at,at+=lt);return 7&at&&(at=1+(7|at)),ct}}},4997:function(_e,et){var rt=et;rt.length=function(nt){for(var ot=0,it=0,st=0;st<nt.length;++st)(it=nt.charCodeAt(st))<128?ot+=1:it<2048?ot+=2:(64512&it)==55296&&(64512&nt.charCodeAt(st+1))==56320?(++st,ot+=4):ot+=3;return ot},rt.read=function(nt,ot,it){if(it-ot<1)return"";for(var st,at=null,lt=[],ct=0;ot<it;)(st=nt[ot++])<128?lt[ct++]=st:st>191&&st<224?lt[ct++]=(31&st)<<6|63&nt[ot++]:st>239&&st<365?(st=((7&st)<<18|(63&nt[ot++])<<12|(63&nt[ot++])<<6|63&nt[ot++])-65536,lt[ct++]=55296+(st>>10),lt[ct++]=56320+(1023&st)):lt[ct++]=(15&st)<<12|(63&nt[ot++])<<6|63&nt[ot++],ct>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,lt)),ct=0);return at?(ct&&at.push(String.fromCharCode.apply(String,lt.slice(0,ct))),at.join("")):String.fromCharCode.apply(String,lt.slice(0,ct))},rt.write=function(nt,ot,it){for(var st,at,lt=it,ct=0;ct<nt.length;++ct)(st=nt.charCodeAt(ct))<128?ot[it++]=st:st<2048?(ot[it++]=st>>6|192,ot[it++]=63&st|128):(64512&st)==55296&&(64512&(at=nt.charCodeAt(ct+1)))==56320?(++ct,ot[it++]=(st=65536+((1023&st)<<10)+(1023&at))>>18|240,ot[it++]=st>>12&63|128,ot[it++]=st>>6&63|128,ot[it++]=63&st|128):(ot[it++]=st>>12|224,ot[it++]=st>>6&63|128,ot[it++]=63&st|128);return it-lt}},3720:function(_e){_e.exports=rt;var et=null;try{et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function rt(St,Pt,Ot){this.low=0|St,this.high=0|Pt,this.unsigned=!!Ot}function nt(St){return(St&&St.__isLong__)===!0}Object.defineProperty(rt.prototype,"__isLong__",{value:!0}),rt.isLong=nt;var ot={},it={};function st(St,Pt){var Ot,Ut,Bt;return Pt?(Bt=0<=(St>>>=0)&&St<256)&&(Ut=it[St])?Ut:(Ot=lt(St,(0|St)<0?-1:0,!0),Bt&&(it[St]=Ot),Ot):(Bt=-128<=(St|=0)&&St<128)&&(Ut=ot[St])?Ut:(Ot=lt(St,St<0?-1:0,!1),Bt&&(ot[St]=Ot),Ot)}function at(St,Pt){if(isNaN(St))return Pt?mt:yt;if(Pt){if(St<0)return mt;if(St>=ft)return wt}else{if(St<=-gt)return Rt;if(St+1>=gt)return Tt}return St<0?at(-St,Pt).neg():lt(St%ht|0,St/ht|0,Pt)}function lt(St,Pt,Ot){return new rt(St,Pt,Ot)}rt.fromInt=st,rt.fromNumber=at,rt.fromBits=lt;var ct=Math.pow;function pt(St,Pt,Ot){if(St.length===0)throw Error("empty string");if(St==="NaN"||St==="Infinity"||St==="+Infinity"||St==="-Infinity")return yt;if(typeof Pt=="number"?(Ot=Pt,Pt=!1):Pt=!!Pt,(Ot=Ot||10)<2||36<Ot)throw RangeError("radix");var Ut;if((Ut=St.indexOf("-"))>0)throw Error("interior hyphen");if(Ut===0)return pt(St.substring(1),Pt,Ot).neg();for(var Bt=at(ct(Ot,8)),xt=yt,At=0;At<St.length;At+=8){var Mt=Math.min(8,St.length-At),Nt=parseInt(St.substring(At,At+Mt),Ot);if(Mt<8){var $t=at(ct(Ot,Mt));xt=xt.mul($t).add(at(Nt))}else xt=(xt=xt.mul(Bt)).add(at(Nt))}return xt.unsigned=Pt,xt}function ut(St,Pt){return typeof St=="number"?at(St,Pt):typeof St=="string"?pt(St,Pt):lt(St.low,St.high,typeof Pt=="boolean"?Pt:St.unsigned)}rt.fromString=pt,rt.fromValue=ut;var ht=4294967296,ft=ht*ht,gt=ft/2,vt=st(1<<24),yt=st(0);rt.ZERO=yt;var mt=st(0,!0);rt.UZERO=mt;var Et=st(1);rt.ONE=Et;var bt=st(1,!0);rt.UONE=bt;var Ct=st(-1);rt.NEG_ONE=Ct;var Tt=lt(-1,2147483647,!1);rt.MAX_VALUE=Tt;var wt=lt(-1,-1,!0);rt.MAX_UNSIGNED_VALUE=wt;var Rt=lt(0,-2147483648,!1);rt.MIN_VALUE=Rt;var It=rt.prototype;It.toInt=function(){return this.unsigned?this.low>>>0:this.low},It.toNumber=function(){return this.unsigned?(this.high>>>0)*ht+(this.low>>>0):this.high*ht+(this.low>>>0)},It.toString=function(St){if((St=St||10)<2||36<St)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Rt)){var Pt=at(St),Ot=this.div(Pt),Ut=Ot.mul(Pt).sub(this);return Ot.toString(St)+Ut.toInt().toString(St)}return"-"+this.neg().toString(St)}for(var Bt=at(ct(St,6),this.unsigned),xt=this,At="";;){var Mt=xt.div(Bt),Nt=(xt.sub(Mt.mul(Bt)).toInt()>>>0).toString(St);if((xt=Mt).isZero())return Nt+At;for(;Nt.length<6;)Nt="0"+Nt;At=""+Nt+At}},It.getHighBits=function(){return this.high},It.getHighBitsUnsigned=function(){return this.high>>>0},It.getLowBits=function(){return this.low},It.getLowBitsUnsigned=function(){return this.low>>>0},It.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Rt)?64:this.neg().getNumBitsAbs();for(var St=this.high!=0?this.high:this.low,Pt=31;Pt>0&&!(St&1<<Pt);Pt--);return this.high!=0?Pt+33:Pt+1},It.isZero=function(){return this.high===0&&this.low===0},It.eqz=It.isZero,It.isNegative=function(){return!this.unsigned&&this.high<0},It.isPositive=function(){return this.unsigned||this.high>=0},It.isOdd=function(){return(1&this.low)==1},It.isEven=function(){return(1&this.low)==0},It.equals=function(St){return nt(St)||(St=ut(St)),(this.unsigned===St.unsigned||this.high>>>31!=1||St.high>>>31!=1)&&this.high===St.high&&this.low===St.low},It.eq=It.equals,It.notEquals=function(St){return!this.eq(St)},It.neq=It.notEquals,It.ne=It.notEquals,It.lessThan=function(St){return this.comp(St)<0},It.lt=It.lessThan,It.lessThanOrEqual=function(St){return this.comp(St)<=0},It.lte=It.lessThanOrEqual,It.le=It.lessThanOrEqual,It.greaterThan=function(St){return this.comp(St)>0},It.gt=It.greaterThan,It.greaterThanOrEqual=function(St){return this.comp(St)>=0},It.gte=It.greaterThanOrEqual,It.ge=It.greaterThanOrEqual,It.compare=function(St){if(nt(St)||(St=ut(St)),this.eq(St))return 0;var Pt=this.isNegative(),Ot=St.isNegative();return Pt&&!Ot?-1:!Pt&&Ot?1:this.unsigned?St.high>>>0>this.high>>>0||St.high===this.high&&St.low>>>0>this.low>>>0?-1:1:this.sub(St).isNegative()?-1:1},It.comp=It.compare,It.negate=function(){return!this.unsigned&&this.eq(Rt)?Rt:this.not().add(Et)},It.neg=It.negate,It.add=function(St){nt(St)||(St=ut(St));var Pt=0,Ot=0,Ut=0,Bt=0;return Ut+=(Bt+=(65535&this.low)+(65535&St.low))>>>16,Ot+=(Ut+=(this.low>>>16)+(St.low>>>16))>>>16,Pt+=(Ot+=(65535&this.high)+(65535&St.high))>>>16,Pt+=(this.high>>>16)+(St.high>>>16),lt((Ut&=65535)<<16|(Bt&=65535),(Pt&=65535)<<16|(Ot&=65535),this.unsigned)},It.subtract=function(St){return nt(St)||(St=ut(St)),this.add(St.neg())},It.sub=It.subtract,It.multiply=function(St){if(this.isZero())return yt;if(nt(St)||(St=ut(St)),et)return lt(et.mul(this.low,this.high,St.low,St.high),et.get_high(),this.unsigned);if(St.isZero())return yt;if(this.eq(Rt))return St.isOdd()?Rt:yt;if(St.eq(Rt))return this.isOdd()?Rt:yt;if(this.isNegative())return St.isNegative()?this.neg().mul(St.neg()):this.neg().mul(St).neg();if(St.isNegative())return this.mul(St.neg()).neg();if(this.lt(vt)&&St.lt(vt))return at(this.toNumber()*St.toNumber(),this.unsigned);var Pt=65535&this.high,Ot=this.low>>>16,Ut=65535&this.low,Bt=65535&St.high,xt=St.low>>>16,At=65535&St.low,Mt=0,Nt=0,$t=0,Ft=0;return $t+=(Ft+=Ut*At)>>>16,Nt+=($t+=Ot*At)>>>16,$t&=65535,Nt+=($t+=Ut*xt)>>>16,Mt+=(Nt+=Pt*At)>>>16,Nt&=65535,Mt+=(Nt+=Ot*xt)>>>16,Nt&=65535,Mt+=(Nt+=Ut*Bt)>>>16,Mt+=(this.high>>>16)*At+Pt*xt+Ot*Bt+Ut*(St.high>>>16),lt(($t&=65535)<<16|(Ft&=65535),(Mt&=65535)<<16|(Nt&=65535),this.unsigned)},It.mul=It.multiply,It.divide=function(St){if(nt(St)||(St=ut(St)),St.isZero())throw Error("division by zero");var Pt,Ot,Ut;if(et)return this.unsigned||this.high!==-2147483648||St.low!==-1||St.high!==-1?lt((this.unsigned?et.div_u:et.div_s)(this.low,this.high,St.low,St.high),et.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mt:yt;if(this.unsigned){if(St.unsigned||(St=St.toUnsigned()),St.gt(this))return mt;if(St.gt(this.shru(1)))return bt;Ut=mt}else{if(this.eq(Rt))return St.eq(Et)||St.eq(Ct)?Rt:St.eq(Rt)?Et:(Pt=this.shr(1).div(St).shl(1)).eq(yt)?St.isNegative()?Et:Ct:(Ot=this.sub(St.mul(Pt)),Ut=Pt.add(Ot.div(St)));if(St.eq(Rt))return this.unsigned?mt:yt;if(this.isNegative())return St.isNegative()?this.neg().div(St.neg()):this.neg().div(St).neg();if(St.isNegative())return this.div(St.neg()).neg();Ut=yt}for(Ot=this;Ot.gte(St);){Pt=Math.max(1,Math.floor(Ot.toNumber()/St.toNumber()));for(var Bt=Math.ceil(Math.log(Pt)/Math.LN2),xt=Bt<=48?1:ct(2,Bt-48),At=at(Pt),Mt=At.mul(St);Mt.isNegative()||Mt.gt(Ot);)Mt=(At=at(Pt-=xt,this.unsigned)).mul(St);At.isZero()&&(At=Et),Ut=Ut.add(At),Ot=Ot.sub(Mt)}return Ut},It.div=It.divide,It.modulo=function(St){return nt(St)||(St=ut(St)),et?lt((this.unsigned?et.rem_u:et.rem_s)(this.low,this.high,St.low,St.high),et.get_high(),this.unsigned):this.sub(this.div(St).mul(St))},It.mod=It.modulo,It.rem=It.modulo,It.not=function(){return lt(~this.low,~this.high,this.unsigned)},It.and=function(St){return nt(St)||(St=ut(St)),lt(this.low&St.low,this.high&St.high,this.unsigned)},It.or=function(St){return nt(St)||(St=ut(St)),lt(this.low|St.low,this.high|St.high,this.unsigned)},It.xor=function(St){return nt(St)||(St=ut(St)),lt(this.low^St.low,this.high^St.high,this.unsigned)},It.shiftLeft=function(St){return nt(St)&&(St=St.toInt()),(St&=63)==0?this:St<32?lt(this.low<<St,this.high<<St|this.low>>>32-St,this.unsigned):lt(0,this.low<<St-32,this.unsigned)},It.shl=It.shiftLeft,It.shiftRight=function(St){return nt(St)&&(St=St.toInt()),(St&=63)==0?this:St<32?lt(this.low>>>St|this.high<<32-St,this.high>>St,this.unsigned):lt(this.high>>St-32,this.high>=0?0:-1,this.unsigned)},It.shr=It.shiftRight,It.shiftRightUnsigned=function(St){if(nt(St)&&(St=St.toInt()),(St&=63)===0)return this;var Pt=this.high;return St<32?lt(this.low>>>St|Pt<<32-St,Pt>>>St,this.unsigned):lt(St===32?Pt:Pt>>>St-32,0,this.unsigned)},It.shru=It.shiftRightUnsigned,It.shr_u=It.shiftRightUnsigned,It.toSigned=function(){return this.unsigned?lt(this.low,this.high,!1):this},It.toUnsigned=function(){return this.unsigned?this:lt(this.low,this.high,!0)},It.toBytes=function(St){return St?this.toBytesLE():this.toBytesBE()},It.toBytesLE=function(){var St=this.high,Pt=this.low;return[255&Pt,Pt>>>8&255,Pt>>>16&255,Pt>>>24,255&St,St>>>8&255,St>>>16&255,St>>>24]},It.toBytesBE=function(){var St=this.high,Pt=this.low;return[St>>>24,St>>>16&255,St>>>8&255,255&St,Pt>>>24,Pt>>>16&255,Pt>>>8&255,255&Pt]},rt.fromBytes=function(St,Pt,Ot){return Ot?rt.fromBytesLE(St,Pt):rt.fromBytesBE(St,Pt)},rt.fromBytesLE=function(St,Pt){return new rt(St[0]|St[1]<<8|St[2]<<16|St[3]<<24,St[4]|St[5]<<8|St[6]<<16|St[7]<<24,Pt)},rt.fromBytesBE=function(St,Pt){return new rt(St[4]<<24|St[5]<<16|St[6]<<8|St[7],St[0]<<24|St[1]<<16|St[2]<<8|St[3],Pt)}},2100:function(_e,et,rt){_e.exports=rt(9482)},9482:function(_e,et,rt){var nt=et;function ot(){nt.util._configure(),nt.Writer._configure(nt.BufferWriter),nt.Reader._configure(nt.BufferReader)}nt.build="minimal",nt.Writer=rt(1173),nt.BufferWriter=rt(3155),nt.Reader=rt(1408),nt.BufferReader=rt(593),nt.util=rt(9693),nt.rpc=rt(5994),nt.roots=rt(5054),nt.configure=ot,ot()},1408:function(_e,et,rt){_e.exports=lt;var nt,ot=rt(9693),it=ot.LongBits,st=ot.utf8;function at(vt,yt){return RangeError("index out of range: "+vt.pos+" + "+(yt||1)+" > "+vt.len)}function lt(vt){this.buf=vt,this.pos=0,this.len=vt.length}var ct,pt=typeof Uint8Array<"u"?function(vt){if(vt instanceof Uint8Array||Array.isArray(vt))return new lt(vt);throw Error("illegal buffer")}:function(vt){if(Array.isArray(vt))return new lt(vt);throw Error("illegal buffer")},ut=function(){return ot.Buffer?function(vt){return(lt.create=function(yt){return ot.Buffer.isBuffer(yt)?new nt(yt):pt(yt)})(vt)}:pt};function ht(){var vt=new it(0,0),yt=0;if(!(this.len-this.pos>4)){for(;yt<3;++yt){if(this.pos>=this.len)throw at(this);if(vt.lo=(vt.lo|(127&this.buf[this.pos])<<7*yt)>>>0,this.buf[this.pos++]<128)return vt}return vt.lo=(vt.lo|(127&this.buf[this.pos++])<<7*yt)>>>0,vt}for(;yt<4;++yt)if(vt.lo=(vt.lo|(127&this.buf[this.pos])<<7*yt)>>>0,this.buf[this.pos++]<128)return vt;if(vt.lo=(vt.lo|(127&this.buf[this.pos])<<28)>>>0,vt.hi=(vt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return vt;if(yt=0,this.len-this.pos>4){for(;yt<5;++yt)if(vt.hi=(vt.hi|(127&this.buf[this.pos])<<7*yt+3)>>>0,this.buf[this.pos++]<128)return vt}else for(;yt<5;++yt){if(this.pos>=this.len)throw at(this);if(vt.hi=(vt.hi|(127&this.buf[this.pos])<<7*yt+3)>>>0,this.buf[this.pos++]<128)return vt}throw Error("invalid varint encoding")}function ft(vt,yt){return(vt[yt-4]|vt[yt-3]<<8|vt[yt-2]<<16|vt[yt-1]<<24)>>>0}function gt(){if(this.pos+8>this.len)throw at(this,8);return new it(ft(this.buf,this.pos+=4),ft(this.buf,this.pos+=4))}lt.create=ut(),lt.prototype._slice=ot.Array.prototype.subarray||ot.Array.prototype.slice,lt.prototype.uint32=(ct=4294967295,function(){if(ct=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ct=(ct|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ct;if((this.pos+=5)>this.len)throw this.pos=this.len,at(this,10);return ct}),lt.prototype.int32=function(){return 0|this.uint32()},lt.prototype.sint32=function(){var vt=this.uint32();return vt>>>1^-(1&vt)|0},lt.prototype.bool=function(){return this.uint32()!==0},lt.prototype.fixed32=function(){if(this.pos+4>this.len)throw at(this,4);return ft(this.buf,this.pos+=4)},lt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw at(this,4);return 0|ft(this.buf,this.pos+=4)},lt.prototype.float=function(){if(this.pos+4>this.len)throw at(this,4);var vt=ot.float.readFloatLE(this.buf,this.pos);return this.pos+=4,vt},lt.prototype.double=function(){if(this.pos+8>this.len)throw at(this,4);var vt=ot.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,vt},lt.prototype.bytes=function(){var vt=this.uint32(),yt=this.pos,mt=this.pos+vt;if(mt>this.len)throw at(this,vt);return this.pos+=vt,Array.isArray(this.buf)?this.buf.slice(yt,mt):yt===mt?new this.buf.constructor(0):this._slice.call(this.buf,yt,mt)},lt.prototype.string=function(){var vt=this.bytes();return st.read(vt,0,vt.length)},lt.prototype.skip=function(vt){if(typeof vt=="number"){if(this.pos+vt>this.len)throw at(this,vt);this.pos+=vt}else do if(this.pos>=this.len)throw at(this);while(128&this.buf[this.pos++]);return this},lt.prototype.skipType=function(vt){switch(vt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(vt=7&this.uint32())!=4;)this.skipType(vt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+vt+" at offset "+this.pos)}return this},lt._configure=function(vt){nt=vt,lt.create=ut(),nt._configure();var yt=ot.Long?"toLong":"toNumber";ot.merge(lt.prototype,{int64:function(){return ht.call(this)[yt](!1)},uint64:function(){return ht.call(this)[yt](!0)},sint64:function(){return ht.call(this).zzDecode()[yt](!1)},fixed64:function(){return gt.call(this)[yt](!0)},sfixed64:function(){return gt.call(this)[yt](!1)}})}},593:function(_e,et,rt){_e.exports=it;var nt=rt(1408);(it.prototype=Object.create(nt.prototype)).constructor=it;var ot=rt(9693);function it(st){nt.call(this,st)}it._configure=function(){ot.Buffer&&(it.prototype._slice=ot.Buffer.prototype.slice)},it.prototype.string=function(){var st=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+st,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+st,this.len))},it._configure()},5054:function(_e){_e.exports={}},5994:function(_e,et,rt){et.Service=rt(7948)},7948:function(_e,et,rt){_e.exports=ot;var nt=rt(9693);function ot(it,st,at){if(typeof it!="function")throw TypeError("rpcImpl must be a function");nt.EventEmitter.call(this),this.rpcImpl=it,this.requestDelimited=Boolean(st),this.responseDelimited=Boolean(at)}(ot.prototype=Object.create(nt.EventEmitter.prototype)).constructor=ot,ot.prototype.rpcCall=function it(st,at,lt,ct,pt){if(!ct)throw TypeError("request must be specified");var ut=this;if(!pt)return nt.asPromise(it,ut,st,at,lt,ct);if(ut.rpcImpl)try{return ut.rpcImpl(st,at[ut.requestDelimited?"encodeDelimited":"encode"](ct).finish(),function(ht,ft){if(ht)return ut.emit("error",ht,st),pt(ht);if(ft!==null){if(!(ft instanceof lt))try{ft=lt[ut.responseDelimited?"decodeDelimited":"decode"](ft)}catch(gt){return ut.emit("error",gt,st),pt(gt)}return ut.emit("data",ft,st),pt(null,ft)}ut.end(!0)})}catch(ht){return ut.emit("error",ht,st),void setTimeout(function(){pt(ht)},0)}else setTimeout(function(){pt(Error("already ended"))},0)},ot.prototype.end=function(it){return this.rpcImpl&&(it||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(_e,et,rt){_e.exports=ot;var nt=rt(9693);function ot(lt,ct){this.lo=lt>>>0,this.hi=ct>>>0}var it=ot.zero=new ot(0,0);it.toNumber=function(){return 0},it.zzEncode=it.zzDecode=function(){return this},it.length=function(){return 1};var st=ot.zeroHash="\0\0\0\0\0\0\0\0";ot.fromNumber=function(lt){if(lt===0)return it;var ct=lt<0;ct&&(lt=-lt);var pt=lt>>>0,ut=(lt-pt)/4294967296>>>0;return ct&&(ut=~ut>>>0,pt=~pt>>>0,++pt>4294967295&&(pt=0,++ut>4294967295&&(ut=0))),new ot(pt,ut)},ot.from=function(lt){if(typeof lt=="number")return ot.fromNumber(lt);if(nt.isString(lt)){if(!nt.Long)return ot.fromNumber(parseInt(lt,10));lt=nt.Long.fromString(lt)}return lt.low||lt.high?new ot(lt.low>>>0,lt.high>>>0):it},ot.prototype.toNumber=function(lt){if(!lt&&this.hi>>>31){var ct=1+~this.lo>>>0,pt=~this.hi>>>0;return ct||(pt=pt+1>>>0),-(ct+4294967296*pt)}return this.lo+4294967296*this.hi},ot.prototype.toLong=function(lt){return nt.Long?new nt.Long(0|this.lo,0|this.hi,Boolean(lt)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(lt)}};var at=String.prototype.charCodeAt;ot.fromHash=function(lt){return lt===st?it:new ot((at.call(lt,0)|at.call(lt,1)<<8|at.call(lt,2)<<16|at.call(lt,3)<<24)>>>0,(at.call(lt,4)|at.call(lt,5)<<8|at.call(lt,6)<<16|at.call(lt,7)<<24)>>>0)},ot.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},ot.prototype.zzEncode=function(){var lt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^lt)>>>0,this.lo=(this.lo<<1^lt)>>>0,this},ot.prototype.zzDecode=function(){var lt=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^lt)>>>0,this.hi=(this.hi>>>1^lt)>>>0,this},ot.prototype.length=function(){var lt=this.lo,ct=(this.lo>>>28|this.hi<<4)>>>0,pt=this.hi>>>24;return pt===0?ct===0?lt<16384?lt<128?1:2:lt<2097152?3:4:ct<16384?ct<128?5:6:ct<2097152?7:8:pt<128?9:10}},9693:function(_e,et,rt){var nt=et;function ot(st,at,lt){for(var ct=Object.keys(at),pt=0;pt<ct.length;++pt)st[ct[pt]]!==void 0&&lt||(st[ct[pt]]=at[ct[pt]]);return st}function it(st){function at(lt,ct){if(!(this instanceof at))return new at(lt,ct);Object.defineProperty(this,"message",{get:function(){return lt}}),Error.captureStackTrace?Error.captureStackTrace(this,at):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ct&&ot(this,ct)}return(at.prototype=Object.create(Error.prototype)).constructor=at,Object.defineProperty(at.prototype,"name",{get:function(){return st}}),at.prototype.toString=function(){return this.name+": "+this.message},at}nt.asPromise=rt(4537),nt.base64=rt(7419),nt.EventEmitter=rt(9211),nt.float=rt(945),nt.inquire=rt(7199),nt.utf8=rt(4997),nt.pool=rt(6662),nt.LongBits=rt(1945),nt.isNode=Boolean(rt.g!==void 0&&rt.g&&rt.g.process&&rt.g.process.versions&&rt.g.process.versions.node),nt.global=nt.isNode&&rt.g||typeof window<"u"&&window||typeof self<"u"&&self||this,nt.emptyArray=Object.freeze?Object.freeze([]):[],nt.emptyObject=Object.freeze?Object.freeze({}):{},nt.isInteger=Number.isInteger||function(st){return typeof st=="number"&&isFinite(st)&&Math.floor(st)===st},nt.isString=function(st){return typeof st=="string"||st instanceof String},nt.isObject=function(st){return st&&typeof st=="object"},nt.isset=nt.isSet=function(st,at){var lt=st[at];return!(lt==null||!st.hasOwnProperty(at))&&(typeof lt!="object"||(Array.isArray(lt)?lt.length:Object.keys(lt).length)>0)},nt.Buffer=function(){try{var st=nt.inquire("buffer").Buffer;return st.prototype.utf8Write?st:null}catch{return null}}(),nt._Buffer_from=null,nt._Buffer_allocUnsafe=null,nt.newBuffer=function(st){return typeof st=="number"?nt.Buffer?nt._Buffer_allocUnsafe(st):new nt.Array(st):nt.Buffer?nt._Buffer_from(st):typeof Uint8Array>"u"?st:new Uint8Array(st)},nt.Array=typeof Uint8Array<"u"?Uint8Array:Array,nt.Long=nt.global.dcodeIO&&nt.global.dcodeIO.Long||nt.global.Long||nt.inquire("long"),nt.key2Re=/^true|false|0|1$/,nt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,nt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,nt.longToHash=function(st){return st?nt.LongBits.from(st).toHash():nt.LongBits.zeroHash},nt.longFromHash=function(st,at){var lt=nt.LongBits.fromHash(st);return nt.Long?nt.Long.fromBits(lt.lo,lt.hi,at):lt.toNumber(Boolean(at))},nt.merge=ot,nt.lcFirst=function(st){return st.charAt(0).toLowerCase()+st.substring(1)},nt.newError=it,nt.ProtocolError=it("ProtocolError"),nt.oneOfGetter=function(st){for(var at={},lt=0;lt<st.length;++lt)at[st[lt]]=1;return function(){for(var ct=Object.keys(this),pt=ct.length-1;pt>-1;--pt)if(at[ct[pt]]===1&&this[ct[pt]]!=null)return ct[pt]}},nt.oneOfSetter=function(st){return function(at){for(var lt=0;lt<st.length;++lt)st[lt]!==at&&delete this[st[lt]]}},nt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},nt._configure=function(){var st=nt.Buffer;st?(nt._Buffer_from=st.from!==Uint8Array.from&&st.from||function(at,lt){return new st(at,lt)},nt._Buffer_allocUnsafe=st.allocUnsafe||function(at){return new st(at)}):nt._Buffer_from=nt._Buffer_allocUnsafe=null}},1173:function(_e,et,rt){_e.exports=ut;var nt,ot=rt(9693),it=ot.LongBits,st=ot.base64,at=ot.utf8;function lt(Et,bt,Ct){this.fn=Et,this.len=bt,this.next=void 0,this.val=Ct}function ct(){}function pt(Et){this.head=Et.head,this.tail=Et.tail,this.len=Et.len,this.next=Et.states}function ut(){this.len=0,this.head=new lt(ct,0,0),this.tail=this.head,this.states=null}var ht=function(){return ot.Buffer?function(){return(ut.create=function(){return new nt})()}:function(){return new ut}};function ft(Et,bt,Ct){bt[Ct]=255&Et}function gt(Et,bt){this.len=Et,this.next=void 0,this.val=bt}function vt(Et,bt,Ct){for(;Et.hi;)bt[Ct++]=127&Et.lo|128,Et.lo=(Et.lo>>>7|Et.hi<<25)>>>0,Et.hi>>>=7;for(;Et.lo>127;)bt[Ct++]=127&Et.lo|128,Et.lo=Et.lo>>>7;bt[Ct++]=Et.lo}function yt(Et,bt,Ct){bt[Ct]=255&Et,bt[Ct+1]=Et>>>8&255,bt[Ct+2]=Et>>>16&255,bt[Ct+3]=Et>>>24}ut.create=ht(),ut.alloc=function(Et){return new ot.Array(Et)},ot.Array!==Array&&(ut.alloc=ot.pool(ut.alloc,ot.Array.prototype.subarray)),ut.prototype._push=function(Et,bt,Ct){return this.tail=this.tail.next=new lt(Et,bt,Ct),this.len+=bt,this},(gt.prototype=Object.create(lt.prototype)).fn=function(Et,bt,Ct){for(;Et>127;)bt[Ct++]=127&Et|128,Et>>>=7;bt[Ct]=Et},ut.prototype.uint32=function(Et){return this.len+=(this.tail=this.tail.next=new gt((Et>>>=0)<128?1:Et<16384?2:Et<2097152?3:Et<268435456?4:5,Et)).len,this},ut.prototype.int32=function(Et){return Et<0?this._push(vt,10,it.fromNumber(Et)):this.uint32(Et)},ut.prototype.sint32=function(Et){return this.uint32((Et<<1^Et>>31)>>>0)},ut.prototype.int64=ut.prototype.uint64=function(Et){var bt=it.from(Et);return this._push(vt,bt.length(),bt)},ut.prototype.sint64=function(Et){var bt=it.from(Et).zzEncode();return this._push(vt,bt.length(),bt)},ut.prototype.bool=function(Et){return this._push(ft,1,Et?1:0)},ut.prototype.sfixed32=ut.prototype.fixed32=function(Et){return this._push(yt,4,Et>>>0)},ut.prototype.sfixed64=ut.prototype.fixed64=function(Et){var bt=it.from(Et);return this._push(yt,4,bt.lo)._push(yt,4,bt.hi)},ut.prototype.float=function(Et){return this._push(ot.float.writeFloatLE,4,Et)},ut.prototype.double=function(Et){return this._push(ot.float.writeDoubleLE,8,Et)};var mt=ot.Array.prototype.set?function(Et,bt,Ct){bt.set(Et,Ct)}:function(Et,bt,Ct){for(var Tt=0;Tt<Et.length;++Tt)bt[Ct+Tt]=Et[Tt]};ut.prototype.bytes=function(Et){var bt=Et.length>>>0;if(!bt)return this._push(ft,1,0);if(ot.isString(Et)){var Ct=ut.alloc(bt=st.length(Et));st.decode(Et,Ct,0),Et=Ct}return this.uint32(bt)._push(mt,bt,Et)},ut.prototype.string=function(Et){var bt=at.length(Et);return bt?this.uint32(bt)._push(at.write,bt,Et):this._push(ft,1,0)},ut.prototype.fork=function(){return this.states=new pt(this),this.head=this.tail=new lt(ct,0,0),this.len=0,this},ut.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new lt(ct,0,0),this.len=0),this},ut.prototype.ldelim=function(){var Et=this.head,bt=this.tail,Ct=this.len;return this.reset().uint32(Ct),Ct&&(this.tail.next=Et.next,this.tail=bt,this.len+=Ct),this},ut.prototype.finish=function(){for(var Et=this.head.next,bt=this.constructor.alloc(this.len),Ct=0;Et;)Et.fn(Et.val,bt,Ct),Ct+=Et.len,Et=Et.next;return bt},ut._configure=function(Et){nt=Et,ut.create=ht(),nt._configure()}},3155:function(_e,et,rt){_e.exports=it;var nt=rt(1173);(it.prototype=Object.create(nt.prototype)).constructor=it;var ot=rt(9693);function it(){nt.call(this)}function st(at,lt,ct){at.length<40?ot.utf8.write(at,lt,ct):lt.utf8Write?lt.utf8Write(at,ct):lt.write(at,ct)}it._configure=function(){it.alloc=ot._Buffer_allocUnsafe,it.writeBytesBuffer=ot.Buffer&&ot.Buffer.prototype instanceof Uint8Array&&ot.Buffer.prototype.set.name==="set"?function(at,lt,ct){lt.set(at,ct)}:function(at,lt,ct){if(at.copy)at.copy(lt,ct,0,at.length);else for(var pt=0;pt<at.length;)lt[ct++]=at[pt++]}},it.prototype.bytes=function(at){ot.isString(at)&&(at=ot._Buffer_from(at,"base64"));var lt=at.length>>>0;return this.uint32(lt),lt&&this._push(it.writeBytesBuffer,lt,at),this},it.prototype.string=function(at){var lt=ot.Buffer.byteLength(at);return this.uint32(lt),lt&&this._push(st,lt,at),this},it._configure()},4095:function(_e,et){var rt=this&&this.__assign||function(){return rt=Object.assign||function(ot){for(var it,st=1,at=arguments.length;st<at;st++)for(var lt in it=arguments[st])Object.prototype.hasOwnProperty.call(it,lt)&&(ot[lt]=it[lt]);return ot},rt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoAudioEffectPlayer=void 0;var nt=function(){function ot(it,st){this.zegoWebRTC=it,this.stream=st}return ot.prototype.start=function(it,st,at,lt){this.zegoWebRTC.playEffect(rt({stream:this.stream,effectID:it},st||{}),at,lt)},ot.prototype.stop=function(it){return this.zegoWebRTC.stopEffect(this.stream,it)},ot.prototype.pause=function(it){return this.zegoWebRTC.pauseEffect(this.stream,it)},ot.prototype.resume=function(it){return this.zegoWebRTC.resumeEffect(this.stream,it)},ot.prototype.setVolume=function(it,st){return this.zegoWebRTC.setEffectVolume(this.stream,st,it)},ot.prototype.getTotalDuration=function(it){return this.zegoWebRTC.getEffectDuration(it)},ot.prototype.getCurrentProgress=function(it){return this.zegoWebRTC.getEffectCurrentProgress(this.stream,it)},ot.prototype.seekTo=function(it,st){return this.zegoWebRTC.seekAudioEffect(this.stream,it,st)},ot}();et.ZegoAudioEffectPlayer=nt},8835:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoRealTimeSequentialDataManager=void 0;var nt=rt(3504),ot=function(){function it(st,at){this.dataChannelManager=new nt.DataChannelListener(st,at)}return it.prototype.startBroadcasting=function(st){return this.dataChannelManager.startBroadcasting(st)},it.prototype.stopBroadcasting=function(st){return this.dataChannelManager.stopBroadcasting(st)},it.prototype.sendRealTimeSequentialData=function(st,at){return this.dataChannelManager.sendRealTimeSequentialData(st,at)},it.prototype.startSubscribing=function(st){return this.dataChannelManager.startSubscribing(st)},it.prototype.stopSubscribing=function(st){return this.dataChannelManager.stopSubscribing(st)},it.prototype.on=function(st,at){this.dataChannelManager.on(st,at)},it.prototype.off=function(st,at){this.dataChannelManager.off(st,at)},it}();et.ZegoRealTimeSequentialDataManager=ot},1297:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoSEIType=et.ZegoRangeAudioMode=et.ZegoRangeAudioMicrophoneState=et.ZegoMixStreamRenderMode=et.ZegoLowlightEnhancementMode=void 0,function(rt){rt[rt.Off=0]="Off",rt[rt.On=1]="On"}(et.ZegoLowlightEnhancementMode||(et.ZegoLowlightEnhancementMode={})),function(rt){rt[rt.AspectFill=0]="AspectFill",rt[rt.AspectFit=1]="AspectFit"}(et.ZegoMixStreamRenderMode||(et.ZegoMixStreamRenderMode={})),function(rt){rt[rt.Off=0]="Off",rt[rt.TurningOn=1]="TurningOn",rt[rt.On=2]="On"}(et.ZegoRangeAudioMicrophoneState||(et.ZegoRangeAudioMicrophoneState={})),function(rt){rt[rt.World=0]="World",rt[rt.Team=1]="Team"}(et.ZegoRangeAudioMode||(et.ZegoRangeAudioMode={})),function(rt){rt[rt.ZegoDefined=0]="ZegoDefined",rt[rt.UserUnregister=1]="UserUnregister"}(et.ZegoSEIType||(et.ZegoSEIType={}))},3116:function(_e,et,rt){var nt=this&&this.__awaiter||function(lt,ct,pt,ut){return new(pt||(pt=Promise))(function(ht,ft){function gt(mt){try{yt(ut.next(mt))}catch(Et){ft(Et)}}function vt(mt){try{yt(ut.throw(mt))}catch(Et){ft(Et)}}function yt(mt){var Et;mt.done?ht(mt.value):(Et=mt.value,Et instanceof pt?Et:new pt(function(bt){bt(Et)})).then(gt,vt)}yt((ut=ut.apply(lt,ct||[])).next())})},ot=this&&this.__generator||function(lt,ct){var pt,ut,ht,ft,gt={label:0,sent:function(){if(1&ht[0])throw ht[1];return ht[1]},trys:[],ops:[]};return ft={next:vt(0),throw:vt(1),return:vt(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function vt(yt){return function(mt){return function(Et){if(pt)throw new TypeError("Generator is already executing.");for(;gt;)try{if(pt=1,ut&&(ht=2&Et[0]?ut.return:Et[0]?ut.throw||((ht=ut.return)&&ht.call(ut),0):ut.next)&&!(ht=ht.call(ut,Et[1])).done)return ht;switch(ut=0,ht&&(Et=[2&Et[0],ht.value]),Et[0]){case 0:case 1:ht=Et;break;case 4:return gt.label++,{value:Et[1],done:!1};case 5:gt.label++,ut=Et[1],Et=[0];continue;case 7:Et=gt.ops.pop(),gt.trys.pop();continue;default:if(ht=gt.trys,!((ht=ht.length>0&&ht[ht.length-1])||Et[0]!==6&&Et[0]!==2)){gt=0;continue}if(Et[0]===3&&(!ht||Et[1]>ht[0]&&Et[1]<ht[3])){gt.label=Et[1];break}if(Et[0]===6&&gt.label<ht[1]){gt.label=ht[1],ht=Et;break}if(ht&&gt.label<ht[2]){gt.label=ht[2],gt.ops.push(Et);break}ht[2]&&gt.ops.pop(),gt.trys.pop();continue}Et=ct.call(lt,gt)}catch(bt){Et=[6,bt],ut=0}finally{pt=ht=0}if(5&Et[0])throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}([yt,mt])}}},it=this&&this.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoExpressRangeAudio=void 0;var st=it(rt(2760)),at=function(){function lt(ct,pt){this.zegoAudioListener=st.default.getInstance(ct,pt)}return lt.getInstance=function(ct,pt){if(!lt.instance){if(!ct)throw Error("create instance failed.");lt.instance=new lt(ct,pt)}return lt.instance},lt.prototype.enableAudioSourceUpdateChecker=function(ct,pt){this.zegoAudioListener.enableAudioSourceUpdateChecker(ct,pt)},lt.prototype.on=function(ct,pt){return this.zegoAudioListener.on(ct,pt)},lt.prototype.off=function(ct,pt){return this.zegoAudioListener.off(ct,pt)},lt.prototype.setAudioReceiveRange=function(ct){this.zegoAudioListener.setAudioReceiveRange(ct)},lt.prototype.updateSelfPosition=function(ct,pt,ut,ht){this.zegoAudioListener.updateSelfPosition(ct,pt,ut,ht)},lt.prototype.updateAudioSource=function(ct,pt){this.zegoAudioListener.updateAudioSource(ct,pt)},lt.prototype.enableSpatializer=function(ct){return this.zegoAudioListener.enableSpatializer(ct)},lt.prototype.enableMicrophone=function(ct){return this.zegoAudioListener.enableMicrophone(ct)},lt.prototype.selectMicrophone=function(ct){return nt(this,void 0,void 0,function(){return ot(this,function(pt){switch(pt.label){case 0:return[4,this.zegoAudioListener.selectMic(ct)];case 1:return[2,pt.sent()]}})})},lt.prototype.selectSpeaker=function(ct){return this.zegoAudioListener.selectSpeaker(ct)},lt.prototype.enableSpeaker=function(ct){return this.zegoAudioListener.enableSpeaker(ct)},lt.prototype.setRangeAudioMode=function(ct){this.zegoAudioListener.setRangeAudioMode(ct)},lt.prototype.setTeamID=function(ct){this.zegoAudioListener.setRangeAudioTeamID(ct)},lt.prototype.setPositionUpdateFrequency=function(ct){return this.zegoAudioListener.setPositionUpdateFrequency(ct)},lt.prototype.setRangeAudioVolume=function(ct){return this.zegoAudioListener.setAudioVolume(ct)},lt.prototype.enableAiDenoise=function(ct){return this.zegoAudioListener.enableAiDenoise(ct)},lt.prototype.isAudioContextRunning=function(){return this.zegoAudioListener.getAudioContextState()==="running"},lt.prototype.resumeAudioContext=function(){return this.zegoAudioListener.resumeAudioContext()},lt.prototype.setStreamVocalRange=function(ct,pt){this.zegoAudioListener.setStreamVocalRange(ct,pt)},lt.prototype.updateStreamPosition=function(ct,pt){this.zegoAudioListener.updateStreamPosition(ct,pt)},lt.prototype.setCustomSourceVocalRange=function(ct,pt){this.zegoAudioListener.setStreamVocalRange(ct,pt)},lt.prototype.updateCustomSourcePosition=function(ct,pt){this.zegoAudioListener.updateStreamPosition(ct,pt)},lt}();et.ZegoExpressRangeAudio=at},5028:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoStreamView=void 0;var rt=function(){function nt(ot){this.v=ot}return nt.prototype.takeStreamSnapshot=function(ot){return this.v.takeStreamSnapshot(ot)},nt.prototype.play=function(ot,it){return this.v.play(ot,it)},nt.prototype.stop=function(){return this.v.stop()},nt.prototype.resume=function(){this.v.resume()},nt.prototype.setAudioMuted=function(ot){return this.v.setAudioMuted(ot)},nt.prototype.setVideoMuted=function(ot){return this.v.setVideoMuted(ot)},nt.prototype.useAudioOutputDevice=function(ot){return this.v.useAudioOut(ot)},nt.prototype.setVolume=function(ot){return this.v.setVolume(ot)},nt.prototype.on=function(ot,it){return this.v.on(ot,it)},nt.prototype.off=function(ot,it){return this.v.off(ot,it)},nt}();et.ZegoStreamView=rt},4780:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(Et,bt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ct,Tt){Ct.__proto__=Tt}||function(Ct,Tt){for(var wt in Tt)Object.prototype.hasOwnProperty.call(Tt,wt)&&(Ct[wt]=Tt[wt])},nt(Et,bt)},function(Et,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Class extends value "+String(bt)+" is not a constructor or null");function Ct(){this.constructor=Et}nt(Et,bt),Et.prototype=bt===null?Object.create(bt):(Ct.prototype=bt.prototype,new Ct)}),it=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoExpressEngine=et.WebRTCUtil=void 0;var st=rt(9880),at=it(rt(3126)),lt=it(rt(9869)),ct=it(rt(3824)),pt=it(rt(6012)),ut=it(rt(7526)),ht=it(rt(577)),ft=rt(2777),gt=rt(4897),vt=rt(957);st.ZegoExpressEngine.use(at.default),st.ZegoExpressEngine.use(lt.default),st.ZegoExpressEngine.use(ct.default),st.ZegoExpressEngine.use(pt.default),st.ZegoExpressEngine.use(ut.default),st.ZegoExpressEngine.use(ht.default),st.ZegoExpressEngine.use(ft.RangeAudio),st.ZegoExpressEngine.use(gt.DataChannel),st.ZegoExpressEngine.use(vt.BeautyEffect);var yt=rt(9880);Object.defineProperty(et,"WebRTCUtil",{enumerable:!0,get:function(){return yt.WebRTCUtil}});var mt=function(Et){function bt(){return Et!==null&&Et.apply(this,arguments)||this}return ot(bt,Et),bt}(st.ZegoExpressEngine);et.ZegoExpressEngine=mt},9880:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(pt,ut){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,ft){ht.__proto__=ft}||function(ht,ft){for(var gt in ft)Object.prototype.hasOwnProperty.call(ft,gt)&&(ht[gt]=ft[gt])},nt(pt,ut)},function(pt,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function ht(){this.constructor=pt}nt(pt,ut),pt.prototype=ut===null?Object.create(ut):(ht.prototype=ut.prototype,new ht)});Object.defineProperty(et,"__esModule",{value:!0}),et.WebRTCUtil=et.ZegoExpressEngine=void 0;var it=rt(4119),st=rt(5321),at=rt(4095),lt=function(pt){function ut(ht,ft,gt){var vt=this;return it.ZegoExpressWebRTMEngine.version="2.22.0",(vt=pt.call(this,ht,ft,0,arguments[2])||this).zegoWebRTC=new st.ZegoWebRTC(vt.logger,vt.dataReport,vt.reporter,vt.zegoWebRTM,0,gt==null?void 0:gt.scenario),vt}return ot(ut,pt),ut.prototype.setEngineConfig=function(ht){this.zegoWebRTC.setEngineConfig(ht)},ut.prototype.setSEIConfig=function(ht){this.zegoWebRTC.setSEIConfig(ht)},ut.use=function(ht){it.ZegoExpressWebRTMEngine.use(ht),st.ZegoWebRTC.use(ht)},ut.prototype.checkSystemRequirements=function(ht,ft){return ft===void 0&&(ft=0),this.zegoWebRTC.checkSystemRequirements(ft,ht)},ut.prototype.off=function(ht,ft){return this.zegoWebRTM.stateCenter.listenerList[ht]?this.zegoWebRTM.off(ht,ft):!!this.zegoWebRTC.stateCenter.listenerList[ht]&&this.zegoWebRTC.off(ht,ft)},ut.prototype.on=function(ht,ft){return this.zegoWebRTM.stateCenter.listenerList[ht]?this.zegoWebRTM.on(ht,ft):!!this.zegoWebRTC.stateCenter.listenerList[ht]&&this.zegoWebRTC.on(ht,ft)},ut.prototype.createStream=function(ht){return this.zegoWebRTC.createStream(ht)},ut.prototype.setRoomScenario=function(ht){return this.zegoWebRTC.setRoomScenario(ht)},ut.prototype.enableAutoSwitchDevice=function(ht){return this.zegoWebRTC.enableAutoSwitchDevice(ht)},ut.prototype.getPublishingStreamQuality=function(ht){return this.zegoWebRTC.getPublishingStreamQuality(ht)},ut.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},ut.prototype.enableAiDenoise=function(ht,ft){return this.zegoWebRTC.enableAiDenoise(ht,ft)},ut.prototype.destroyStream=function(ht){return this.zegoWebRTC.destroyStream(ht)},ut.prototype.startPublishingStream=function(ht,ft,gt){return this.zegoWebRTC.startPublishingStream(ht,ft,gt)},ut.prototype.stopPublishingStream=function(ht){return this.zegoWebRTC.stopPublishingStream(ht)},ut.prototype.sendSEI=function(ht,ft){return this.zegoWebRTC.sendSEI(ht,ft)},ut.prototype.setVideoConfig=function(ht,ft){return this.zegoWebRTC.setVideoConfig(ht,ft)},ut.prototype.setAudioConfig=function(ht,ft){return this.zegoWebRTC.setAudioConfig(ht,ft)},ut.prototype.replaceTrack=function(ht,ft){return this.zegoWebRTC.replaceTrack(ht,ft)},ut.prototype.addTrack=function(ht,ft){return this.zegoWebRTC.addTrack(ht,ft)},ut.prototype.removeTrack=function(ht,ft){return this.zegoWebRTC.removeTrack(ht,ft)},ut.prototype.setCaptureVolume=function(ht,ft){return this.zegoWebRTC.setCaptureVolume(ht,ft)},ut.prototype.setDummyCaptureImagePath=function(ht,ft){return this.zegoWebRTC.setDummyCaptureImagePath(ht,ft)},ut.prototype.setStreamExtraInfo=function(ht,ft){return this.zegoWebRTC.setStreamExtraInfo(ht,ft)},ut.prototype.enableVideoCaptureDevice=function(ht,ft){return this.zegoWebRTC.enableCameraCapturing(ht,ft)},ut.prototype.addPublishCdnUrl=function(ht,ft){return arguments.length===3?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(ht,ft)},ut.prototype.removePublishCdnUrl=function(ht,ft){return arguments.length===3?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(ht,ft)},ut.prototype.mutePublishStreamVideo=function(ht,ft,gt){return this.zegoWebRTC.mutePublishStreamVideo(ht,ft,gt)},ut.prototype.mutePublishStreamAudio=function(ht,ft){return this.zegoWebRTC.mutePublishStreamAudio(ht,ft)},ut.prototype.setEffectsBeauty=function(ht,ft,gt){return this.zegoWebRTC.setBeautyEffect(ht,ft,gt)},ut.prototype.setLowlightEnhancement=function(ht,ft){return this.zegoWebRTC.setLowlightEnhance(ht,ft)},ut.prototype.enableDualStream=function(ht){return this.zegoWebRTC.enableDualStream(ht)},ut.prototype.setLowStreamParameter=function(ht,ft){return this.zegoWebRTC.setLowStreamParameter(ht,ft)},ut.prototype.enableHardwareEncoder=function(ht){this.zegoWebRTC.enableVideoHardwareEncoder(ht)},ut.prototype.startPlayingStream=function(ht,ft){return this.zegoWebRTC.startPlayingStream(ht,ft)},ut.prototype.stopPlayingStream=function(ht){return this.zegoWebRTC.stopPlayingStream(ht)},ut.prototype.mutePlayStreamVideo=function(ht,ft){return this.zegoWebRTC.mutePlayStreamVideo(ht,ft)},ut.prototype.mutePlayStreamAudio=function(ht,ft){return this.zegoWebRTC.mutePlayStreamAudio(ht,ft)},ut.prototype.getPlayingStreamQuality=function(ht){return this.zegoWebRTC.getPlayingStreamQuality(ht)},ut.prototype.createLocalStreamView=function(ht){return this.zegoWebRTC.createLocalViewer(ht)},ut.prototype.createRemoteStreamView=function(ht){return this.zegoWebRTC.createRemoteViewer(ht)},ut.prototype.startMixerTask=function(ht){return this.zegoWebRTC.startMixerTask(ht)},ut.prototype.stopMixerTask=function(ht){return this.zegoWebRTC.stopMixerTask(ht)},ut.prototype.setMixerTaskConfig=function(ht){return this.zegoWebRTC.setMixerTaskConfig(ht)},ut.prototype.startMixingAudio=function(ht,ft){return this.zegoWebRTC.startMixingAudio(ht,ft)},ut.prototype.stopMixingAudio=function(ht,ft){return this.zegoWebRTC.stopMixingAudio(ht,ft)},ut.prototype.setMixingAudioVolume=function(ht,ft,gt){return this.zegoWebRTC.setMixingAudioVolume(ht,ft,gt)},ut.prototype.createAudioEffectPlayer=function(ht){if(ht instanceof MediaStream)return new at.ZegoAudioEffectPlayer(this.zegoWebRTC,ht);throw Error("Param localStream is not instance of MediaStream.")},ut.prototype.loadAudioEffect=function(ht,ft){var gt=this;return new Promise(function(vt,yt){gt.zegoWebRTC.preloadEffect(ht,ft,function(mt){mt&&yt(mt),vt(ht)})})},ut.prototype.unloadAudioEffect=function(ht){return this.zegoWebRTC.unloadEffect(ht)},ut.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},ut.prototype.getCameras=function(){return this.zegoWebRTC.getCameras()},ut.prototype.getMicrophones=function(){return this.zegoWebRTC.getMicrophones()},ut.prototype.getSpeakers=function(){return this.zegoWebRTC.getSpeakers()},ut.prototype.useVideoDevice=function(ht,ft){return this.zegoWebRTC.useVideoDevice(ht,ft)},ut.prototype.useAudioDevice=function(ht,ft){return this.zegoWebRTC.useAudioDevice(ht,ft)},ut.prototype.useAudioOutputDevice=function(ht,ft){return this.zegoWebRTC.setAudioOutputDevice(ht,ft)},ut.prototype.setSoundLevelDelegate=function(ht,ft,gt){return this.zegoWebRTC.setSoundLevelDelegate(ht,ft,gt==null?void 0:gt.enableInBackground)},ut.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},ut.prototype.muteMicrophone=function(ht){return this.zegoWebRTC.muteMicrophone(ht)},ut.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},ut.prototype.createRealTimeSequentialDataManager=function(ht){return this.zegoWebRTC.createRealTimeSequentialDataManager(ht)},ut.prototype.destroyRealTimeSequentialDataManager=function(ht){this.zegoWebRTC.destroyRealTimeSequentialDataManager(ht)},ut}(it.ZegoExpressWebRTMEngine);et.ZegoExpressEngine=lt;var ct=rt(1358);Object.defineProperty(et,"WebRTCUtil",{enumerable:!0,get:function(){return ct.WebRTCUtil}})},1089:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZEGO_WEBRTC_ACTION=void 0,function(rt){rt.CONSTRUCTOR="zc.0",rt.CHECK_SUPPORT="zc.csr",rt.CREATE_STREAM="zc.cs",rt.DESTROY_STREAM="zc.ds",rt.START_PUBLISHING_STREAM="zc.sps.0",rt.START_PLAYING_STREAM="zc.sps.1",rt.STOP_PUBLISHING_STREAM="zc.sps.0.0",rt.STOP_PLAYING_STREAM="zc.sps.1.0",rt.SET_MEDIA_SIDE_FLAGS="zc.smsg.0",rt.SEND_MEDIA_SIDE_INFO="zc.smsi.0",rt.ON_STREAM="zc.os",rt.ON_PUSH_STREAM_UPDATE="zc.opsu",rt.BIND_WINDOW_LISTENER="zc.wl",rt.SET_AUDIO_OUTPUT="zc.sao",rt.SET_CUSTOM_SIGNAL_URL="zc.scsu",rt.SET_TURN_OVER_TCP_ONLY="zc.stoto",rt.RDH_ACTIVE="zc.rdh.a",rt.RDH_MAX_TIME="zc.rdh.m",rt.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",rt.PUBLISH_STATE_HANDLE="zc.psh.0",rt.PLAY_STATE_HANDLE="zc.psh.1",rt.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE="zc.tsh.rngn.0",rt.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE="zc.tsh.rngn.1",rt.STATECENTER_ACTION_LISTENER="zc.sc.al",rt.STATECENTER_SET_SETTING="zc.sc.ss",rt.SIGNAL_SET_SESSION_INFO="zc.s.ssi",rt.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",rt.SIGNAL_RESET_LOGIN_TIMER="zc.s.rlt",rt.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",rt.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",rt.SIGNAL_UPDATE_TOKEN="zc.s.ut",rt.SIGNAL_DISCONNECTCALLBACK="zc.s.dcb",rt.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",rt.SIGNAL_CONNECT_SERVER="zc.s.cs.0",rt.SIGNAL_START_CONNECT_TIMER="zc.s.sct",rt.SIGNAL_DISCONNECT_SERVER="zc.s.dc",rt.SIGNAL_CREATE_SESSION="zc.s.cs.1",rt.SIGNAL_REMOVE_SESSION="zc.s.rs",rt.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",rt.SIGNAL_SEND_MESSAGE="zc.s.sm",rt.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",rt.SIGNAL_ADD_SESSION="zc.s.as",rt.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",rt.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",rt.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",rt.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",rt.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",rt.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",rt.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",rt.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",rt.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",rt.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",rt.SIGNAL_SEND_HEARTBEAT="zc.s.sh",rt.SIGNAL_QUALITY_REPORT="zc.s.qr",rt.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",rt.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",rt.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",rt.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",rt.SIGNAL_SEND_NET_PROBE="zc.s.snp",rt.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",rt.STREAMCENTER_SET_STREAM_GW_NODE="zsc.ssgn",rt.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST="zsc.ccgl",rt.STREAMCENTER_CHECK_CACHED_NODES_USE="zsc.ccns",rt.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST="zsc.ucgl",rt.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",rt.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",rt.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",rt.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",rt.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",rt.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",rt.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",rt.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",rt.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",rt.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",rt.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",rt.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",rt.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",rt.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",rt.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",rt.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",rt.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",rt.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",rt.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",rt.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",rt.PUBLISHER_STATE_ERROR="zc.p.0.psr",rt.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",rt.PUBLISHER_ON_DISCONNECT="zc.p.0.od",rt.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",rt.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",rt.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",rt.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",rt.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",rt.PUBLISHER_SEND_SEI="zc.p.0.ss",rt.PUBLISHER_RESET_GW_NODES="zc.p.0.rgn",rt.PUBLISHER_SET_GW_NODES="zc.p.0.sgn",rt.PUBLISHER_HANDLE_DISPATCHED_GW_NODES="zc.p.0.hdgn",rt.PUBLISHER_PURE_SORT_GW_NODES="zc.p.0.psgn",rt.PLAYER_START_PLAY="zc.p.1.sp.0",rt.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",rt.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",rt.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",rt.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",rt.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",rt.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",rt.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",rt.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",rt.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",rt.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",rt.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",rt.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE="zc.p.opcsc.1",rt.PLAYER_RESET_PLAY="zc.p.rp.1",rt.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",rt.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",rt.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",rt.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",rt.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",rt.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",rt.PAYER_GET_VIDEO_CODEC="zc.p.gvc",rt.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",rt.PLAYER_STATE_ERROR="zc.p.psr.1",rt.PLAYER_STOP_PLAY="zc.p.1.sp.1",rt.PLAYER_ON_DISCONNECT="zc.p.od.1",rt.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",rt.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",rt.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",rt.PLAYER_RESET_GW_NODES="zc.p.1.rgn",rt.PLAYER_SET_GW_NODES="zc.p.1.sgn",rt.PLAYER_HANDLE_DISPATCHED_GW_NODES="zc.p.1.hdgn",rt.PLAYER_PURE_SORT_GW_NODES="zc.p.1.psgn",rt.UPLOAD_SPEED_LOG_QUALITY="zc.uslq",rt.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",rt.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",rt.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",rt.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",rt.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",rt.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2="zc.sh.sbr",rt.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE="zc.as.umrs",rt.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE="zc.as.uars",rt.ANALOGSOCKET_SET_MEDIA_SERVER_STATE="zc.as.smss",rt.ANALOGSOCKET_SET_ACCESS_SERVER_STATE="zc.as.sass",rt.ANALOGSOCKET_SEND="zc.as.s.0",rt.ANALOGSOCKET_OPEN="zc.as.op",rt.SET_ROOM_SCENARIO="zc.srs",rt.INIT_ROOM_SCENARIO="zc.irs"}(et.ZEGO_WEBRTC_ACTION||(et.ZEGO_WEBRTC_ACTION={}))},6361:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(st){for(var at,lt=1,ct=arguments.length;lt<ct;lt++)for(var pt in at=arguments[lt])Object.prototype.hasOwnProperty.call(at,pt)&&(st[pt]=at[pt]);return st},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.CommonStates=void 0;var ot=rt(6706),it=function(){function st(at,lt,ct){this.rtmStateCenter=at,this.rtcStateCenter=lt,this.streamCenter=ct,this._initTime=Date.now()}return Object.defineProperty(st.prototype,"appid",{get:function(){return this.rtcStateCenter.appid},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"device_id",{get:function(){return this.rtmStateCenter.deviceID},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"product",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"sdk_version",{get:function(){return ot.PROTO_VERSION},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"sys_info",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"report_version",{get:function(){return this.rtcStateCenter.reportVersion},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"browser",{get:function(){return this.rtcStateCenter.browser},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"id_name",{get:function(){return this.rtmStateCenter.idName},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"nick_name",{get:function(){return this.rtmStateCenter.nickName},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"use_na",{get:function(){return this.rtcStateCenter.useNetAgent?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"userid",{get:function(){return this.rtmStateCenter.userid},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"network_state",{get:function(){return this.rtcStateCenter.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"init_time",{get:function(){return this._initTime},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"net_type",{get:function(){var at;return((at=navigator.connection)===null||at===void 0?void 0:at.effectiveType)||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"room_server",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"device_infos",{get:function(){return this.rtcStateCenter.deviceInfos},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"room_list",{get:function(){var at=this,lt={};return this.rtcStateCenter.roomList.forEach(function(ct){var pt,ut,ht,ft=at.rtmStateCenter.roomModulesList.find(function(vt){return vt.roomID===ct.roomID}),gt={roomSessionID:ct.roomSessionID,sessionID:ct.sessionID,streamList:ct.streamList,token:ct.token,role:at.rtmStateCenter.role,roomCreateFlag:at.rtmStateCenter.roomCreateFlag,loginTime:ft==null?void 0:ft.loginTime,heartbeatInterval:(pt=ft==null?void 0:ft.heartBeatHandler)===null||pt===void 0?void 0:pt.heartbeatInterval,roomExtraInfos:(ut=ft==null?void 0:ft.messageHandler)===null||ut===void 0?void 0:ut.transSeqMap,roomRetryTime:(ht=ft==null?void 0:ft.roomTryHandler)===null||ht===void 0?void 0:ht.RETRY_MAX_TIME};lt[ct.roomID]=gt}),lt},enumerable:!1,configurable:!0}),st.prototype.getRoomList=function(at,lt){var ct=this;return this.room_id_list.slice(at,lt).map(function(pt){return nt({roomID:pt},ct.room_list[pt])})},Object.defineProperty(st.prototype,"room_id_list",{get:function(){return this.rtcStateCenter.roomList.map(function(at){return at.roomID})},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"roomListSize",{get:function(){return this.room_id_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"userLoginState",{get:function(){var at,lt=this.rtmStateCenter.roomModulesList[0],ct=lt.runState,pt=lt.lastRunState;return ct===ot.ENUM_RUN_STATE.logout?at=ot.USER_RUN_STATE.logout:ct===ot.ENUM_RUN_STATE.login?at=ot.USER_RUN_STATE.login:pt===ot.ENUM_RUN_STATE.logout?at=ot.USER_RUN_STATE.trylogin:pt===ot.ENUM_RUN_STATE.login&&(at=ot.USER_RUN_STATE.reconnect),at},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"publishStreamList",{get:function(){return Object.keys(this.streamCenter.publisherList)},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"publishList",{get:function(){var at=this,lt={};return this.publishStreamList.forEach(function(ct){var pt,ut,ht,ft=at.streamCenter.publisherList[ct],gt=ft==null?void 0:ft.publisher,vt=gt==null?void 0:gt.publishStat;lt[ct]={streamSid:ft==null?void 0:ft.streamSid,roomID:(pt=ft==null?void 0:ft.room)===null||pt===void 0?void 0:pt.roomID,roomSessionID:(ut=ft==null?void 0:ft.room)===null||ut===void 0?void 0:ut.roomSessionID,cameraLabel:ft==null?void 0:ft.cameraLabel,microLabel:ft==null?void 0:ft.microLabel,cameraStatus:gt==null?void 0:gt.camera_status,micStatus:gt==null?void 0:gt.mic_status,sessionId:gt==null?void 0:gt.sessionId,publishBeginTime:gt==null?void 0:gt.reportPublishStateTime,serverUrl:(ht=gt==null?void 0:gt.signal)===null||ht===void 0?void 0:ht.server,gwNode:gt==null?void 0:gt.gwNode,proto:"webrtc",frameWidth:vt==null?void 0:vt.frameWidth,frameHeight:vt==null?void 0:vt.frameHeight,rtt:vt==null?void 0:vt.currentRoundTripTime,videoPacketsLostRate:vt==null?void 0:vt.videoPacketsLostRate,audioPacketsLostRate:vt==null?void 0:vt.audioPacketsLostRate,videoTargetBitrate:vt==null?void 0:vt.videoTargetBitrate,videoBitrate:vt==null?void 0:vt.videoBitrate,audioTargetBitrate:vt==null?void 0:vt.audioTargetBitrate,audioBitrate:vt==null?void 0:vt.audioBitrate,videoTargetFPS:vt==null?void 0:vt.videoTargetFPS,videoFPS:vt==null?void 0:vt.videoFPS,audioFPS:vt==null?void 0:vt.audioFPS,videoCodecName:vt==null?void 0:vt.videoCodecName,audioCodecName:vt==null?void 0:vt.audioCodecName}}),lt},enumerable:!1,configurable:!0}),st.prototype.getPublishList=function(at,lt){var ct=this;return this.publishStreamList.slice(at,lt).map(function(pt){return nt({streamID:pt},ct.publishList[pt])})},Object.defineProperty(st.prototype,"publishListSize",{get:function(){return this.publishStreamList.length},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"playStreamList",{get:function(){return Object.keys(this.streamCenter.playerList)},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"playList",{get:function(){var at=this,lt={};return this.playStreamList.forEach(function(ct){var pt,ut,ht,ft=at.streamCenter.playerList[ct],gt=ft==null?void 0:ft.player,vt=gt==null?void 0:gt.playStat;lt[ct]={streamSid:ft==null?void 0:ft.streamSid,roomID:(pt=ft==null?void 0:ft.room)===null||pt===void 0?void 0:pt.roomID,roomSessionID:(ut=ft==null?void 0:ft.room)===null||ut===void 0?void 0:ut.roomSessionID,cameraStatus:gt==null?void 0:gt.cameraStatus,micStatus:gt==null?void 0:gt.micStatus,sessionId:gt==null?void 0:gt.sessionId,playBeginTime:gt==null?void 0:gt.reportPlayStateTime,serverUrl:(ht=gt==null?void 0:gt.signal)===null||ht===void 0?void 0:ht.server,gwNode:gt==null?void 0:gt.gwNode,proto:"webrtc",frameWidth:vt==null?void 0:vt.frameWidth,frameHeight:vt==null?void 0:vt.frameHeight,rtt:vt==null?void 0:vt.currentRoundTripTime,videoPacketsLostRate:vt==null?void 0:vt.videoPacketsLostRate,audioPacketsLostRate:vt==null?void 0:vt.audioPacketsLostRate,videoBitrate:vt==null?void 0:vt.videoBitrate,audioBitrate:vt==null?void 0:vt.audioBitrate,videoFPS:vt==null?void 0:vt.videoFPS,audioFPS:vt==null?void 0:vt.audioFPS,videoCodecName:vt==null?void 0:vt.videoCodecName,audioCodecName:vt==null?void 0:vt.audioCodecName,peerToPeerDelay:vt==null?void 0:vt.peerToPeerDelay,firstFrameTime:vt==null?void 0:vt.firstFrameTime,videoJitter:vt==null?void 0:vt.videoJitter,audioJitter:vt==null?void 0:vt.audioJitter}}),lt},enumerable:!1,configurable:!0}),st.prototype.getPlayList=function(at,lt){var ct=this;return this.playStreamList.slice(at,lt).map(function(pt){return nt({streamID:pt},ct.playList[pt])})},Object.defineProperty(st.prototype,"playListSize",{get:function(){return this.playStreamList.length},enumerable:!1,configurable:!0}),st}();et.CommonStates=it},9595:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.RTC=et.ZegoSettingConfig=void 0;var rt=function(){function nt(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:!0,AGC:!0,ANS:!0,resource_mode:0,bitrate_mode:"default",auto_to_tcp:!1,udp_max_fail_num:2,probe_started_num:3,udp_or_tcp:"udp",hardware_encode:!1,camera_hard_encode:!1,custom_hard_encode:!1},this.userChangedKey={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return nt.prototype.setSetting=function(ot,it){var st=Array.isArray(it)&&it.length>0;for(var at in ot)for(var lt in ot[at])if(!lt.endsWith("_ctrlmode")){if(st&&it.indexOf(lt)==-1)continue;var ct=ot[at][lt+"_ctrlmode"];ct===1?this.userChangedKey[lt]||(this.setting[lt]=ot[at][lt]):ct===2?this.setting[lt]=ot[at][lt]:this.defaultSetting[lt]&&(this.setting[lt]=this.defaultSetting[lt]),typeof ct=="number"&&(this.setting[lt+"_ctrlmode"]=ot[at][lt+"_ctrlmode"])}},nt.prototype.getSetting=function(ot,it){return it===void 0&&(it=!1),it?this.setting[ot+"_ctrlmode"]==2?this.setting[ot]:void 0:this.setting[ot]},nt.prototype.setUserValue=function(ot,it){this.setting[ot+"_ctrlmode"]!==2&&(this.userChangedKey[ot]=!0,this.setting[ot]=it)},nt}();et.ZegoSettingConfig=rt,et.RTC="rtc"},7325:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.StateCenter=void 0;var nt=rt(6706),ot=rt(608),it=rt(1089),st=rt(6706),at=rt(3529),lt=rt(3544),ct=rt(1378),pt=function(){function ut(ht,ft){this.logger=ht,this.dataReport=ft,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.waitPublishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnToTcp=!1,this.turnOverTcpOnly=void 0,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[],playerRecvSEI:[],beautyEffectError:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.accessClientIp="",this.isMultiOuter=!1,this.type="PUBLIC",this.roomList=[],this.tempRoomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.playAccelerate=!0,this.connectChanged=!1,this.autoSwitchDeviceSetting={camera:!1,microphone:!1},this.unSendMessageList=[],this.scenario=nt.ZegoScenario.Default,this.testStreamRetryMode=0,this.testStreamRetryCount=10,this.supportDispatchByPass=!1,this.engineConfig={keepAudioTrack:!0,playClearLastFrame:!0,previewClearLastFrame:!0},this.logReportCallback=ot.ClientUtil.logReportCallback,this.unregisterCallback=ot.ClientUtil.unregisterCallback,this.checkIllegalCharacters=ot.ClientUtil.checkIllegalCharacters,this.decodeServerError=ot.ClientUtil.decodeServerError,this.getLiveRoomError=ot.ClientUtil.getLiveRoomError,this.getServerError=ot.ClientUtil.getServerError,this.mergeStreamList=ot.ClientUtil.mergeStreamList,this.checkInteger=ot.ClientUtil.checkInteger,this.isUrl=ot.ClientUtil.isUrl,this.actionSuccessCallback=ot.ClientUtil.actionSuccessCallback,this.checkValidNumber=ot.ClientUtil.checkValidNumber,this.getDevices=ot.ClientUtil.getDevices,this.uint8arrayToBase64=ot.ClientUtil.uint8arrayToBase64,this.getSeq=st.getSeq,this.getReportSeq=nt.getReportSeq}return Object.defineProperty(ut.prototype,"networkState",{get:function(){var ht;return(ht=this.rtm)===null||ht===void 0?void 0:ht.stateCenter.networkState},set:function(ht){var ft;!((ft=this.rtm)===null||ft===void 0)&&ft.stateCenter&&ht!==void 0&&(this.rtm.stateCenter.networkState=ht)},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"streamCenter",{get:function(){return this._streamCenter},set:function(ht){this._streamCenter=ht},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"billingTimer",{get:function(){return this._billingTimer||(this._billingTimer=new lt.BillingTimer(this.logger,this)),this._billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"chargeInfosSaver",{get:function(){return this._chargeInfosSaver||(this._chargeInfosSaver=new ct.ChargeInfosSaverWeb(this.logger,this)),this._chargeInfosSaver},enumerable:!1,configurable:!0}),ut.prototype.getRequestId=function(){return this.idName+"-"+(0,st.getSeq)()},ut.prototype.getSignalCmdContent=function(ht,ft,gt,vt){var yt={request_id:ft,room_id:ht,from_userid:this.idName,from_username:this.nickName,to_userid:gt};return vt!=null&&(yt.result=vt),JSON.stringify(yt)},ut.prototype.actionListener=function(ht){for(var ft=this,gt=[],vt=1;vt<arguments.length;vt++)gt[vt-1]=arguments[vt];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate","playerRecvSEI","remoteCameraStatusUpdate","_remoteCameraStatusUpdate","remoteMicStatusUpdate","_remoteMicStatusUpdate","_streamUpdated","_deviceError"].includes(ht)&&this.listenerList[ht]){var yt=this.reporter.createSpan(nt.TRACER_LEVEL.H,{key:at.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},at.ZegoRTCLogEvent.kZegoListener.event);yt.setAttributes({listener:ht,listener_params:JSON.stringify(gt)}),["deviceError","streamExtraInfoUpdate","publisherStateUpdate","playerStateUpdate","roomStreamUpdate"].includes(ht)&&this.logger.info("zc.al ".concat(ht," ").concat(JSON.stringify(gt))),yt.end()}this.listenerList[ht]&&this.listenerList[ht].forEach(function(mt){try{setTimeout(function(){mt.apply(void 0,gt)},0)}catch(Et){ft.logger.error(it.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+ht+" "+Et)}})},ut.prototype.getRoomByRoomID=function(ht){return this.roomList.find(function(ft){return ft.roomID==ht})},ut.prototype.getPlayRoom=function(ht){return this.roomList.find(function(ft){return!!ft.streamList.find(function(gt){return gt.stream_id==ht})})},ut}();et.StateCenter=pt},5740:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoStreamCenter=void 0,et.ZegoStreamCenter=function(){this.publisherList={},this.playerList={},this.stopedPlayerList={}}},7560:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.StreamHandler=void 0;var nt=rt(6706),ot=rt(2752),it=rt(1089),st=rt(3529),at=st.ZegoRTCLogEvent.kZegoTaskLiveRoomGetCurrentStreamList,lt=function(){function ct(pt,ut,ht,ft,gt){this.logger=pt,this.stateCenter=ut,this.rtm=ht,this.streamCenter=ft,this.roomID=gt,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return ct.prototype.setCDNInfo=function(pt,ut){pt.urlFlv=ut.urls_flv instanceof Array?ut.urls_flv[0]||"":typeof ut.urls_flv=="string"?ut.urls_flv:"",pt.urlHls=ut.urls_m3u8 instanceof Array?ut.urls_m3u8[0]||"":typeof ut.urls_m3u8=="string"?ut.urls_m3u8:"",pt.urlFlvPlus=ut.urls_flv_plus instanceof Array?ut.urls_flv_plus[0]||"":typeof ut.urls_flv_plus=="string"?ut.urls_flv_plus:"",pt.urlHlsPlus=ut.urls_m3u8_plus instanceof Array?ut.urls_m3u8_plus[0]||"":typeof ut.urls_m3u8_plus=="string"?ut.urls_m3u8_plus:"",pt.urlHttpsFlv=ut.urls_https_flv instanceof Array?ut.urls_https_flv[0]||"":typeof ut.urls_https_flv=="string"?ut.urls_https_flv:"",pt.urlHttpsHls=ut.urls_https_m3u8 instanceof Array?ut.urls_https_m3u8[0]||"":typeof ut.urls_https_m3u8=="string"?ut.urls_https_m3u8:"",pt.urlRtmp=ut.urls_rtmp instanceof Array?ut.urls_rtmp[0]||"":typeof ut.urls_rtmp=="string"?ut.urls_rtmp:""},ct.prototype.onStreamUpdated=function(pt,ut,ht){},ct.prototype.onStreamExtraInfoUpdated=function(pt,ut){},ct.prototype.handleStreamStart=function(pt,ut){this.logger.info("zb.sh.hss call stream update"),this.room=ut,pt.body?(this.streamListHBMergeInterval=pt.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=pt.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(pt.body.stream_seq,pt.body.stream_info||[]),this.handleReconnectStream(pt.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},ct.prototype.onPublishStateUpdate=function(pt,ut,ht){},ct.prototype._updateStreamInfo=function(pt,ut,ht,ft,gt){var vt,yt,mt=this;ht===void 0&&(ht=""),this.logger.info("zb.sh.usi call");var Et=ht,bt=(vt=this.room)===null||vt===void 0?void 0:vt.streamList.find(function(Ot){return Ot.stream_id===pt});bt||this.logger.info("zb.sh.usi stream not in room cmd "+ut);var Ct={stream_id:pt,extra_info:Et};ut!==2002&&ut!==2003||(Ct.stream_sid=(bt==null?void 0:bt.stream_sid)||"");var Tt=JSON.stringify(Ct),wt={sub_cmd:ut,stream_msg:Tt,third_token:(yt=this.room)===null||yt===void 0?void 0:yt.token},Rt=this.room;this.room.streamInfoList[pt]={};var It=function(Ot,Ut){ft&&ft(Ot,mt.room.streamInfoList[pt].seq),mt.handleStreamUpdateRsp(Ot,pt,ut)},St=function(Ot,Ut){var Bt=mt.room;if(Bt&&!Bt.isResetRoom&&!mt.rtm.isDisConnect()&&Ot.code&&Ot.code==ot.errorCodeList.TIMEOUT.code&&Bt.streamInfoList[pt].seq==Ut)ut==2001&&mt.stateCenter.publishStreamList[pt]&&mt.stateCenter.publishStreamList[pt].state==nt.ENUM_PUBLISH_STREAM_STATE.update_info||ut==2002?(mt.logger.warn("zb.sh.usi resend stream update "+ut),setTimeout(function(){mt._updateStreamInfo(pt,ut,ht,ft,gt)},0)):gt&&gt(ot.errorCodeList.TIMEOUT);else if(Ot.body&&Ot.body.err_code){var xt=mt.stateCenter.getServerError(Ot.body.err_code,mt.stateCenter.useNetAgent,Ot.body.err_message);[1011,1000002002].includes(xt.code)&&(xt=ot.errorCodeList.TOKEN_EXPIRED),gt&&gt(xt,Ut),ut===nt.ENUM_STREAM_SUB_CMD.liveBegin&&mt.onPublishStateUpdate(nt.ENUM_PUBLISH_STATE_UPDATE.error,pt,xt)}};if(this.stateCenter.useNetAgent)this.room.streamInfoList[pt].seq=this.rtm.liveRoomHandler.sendStreamUpdate(wt,It,St,{sessionID:Rt==null?void 0:Rt.sessionID,roomID:Rt==null?void 0:Rt.roomID,roomSessionID:Rt==null?void 0:Rt.roomSessionID});else{var Pt=this.rtm.service.sendMessage("stream",wt,It,St,void 0,{sessionID:Rt==null?void 0:Rt.sessionID,roomID:Rt==null?void 0:Rt.roomID,roomSessionID:Rt==null?void 0:Rt.roomSessionID});this.room.streamInfoList[pt].seq=Pt,Pt===0&&ut===2002&&this.stateCenter.clientType==="wxMini"&&(this.stateCenter.unSendMessageList.push({roomID:(Rt==null?void 0:Rt.roomID)||"",streamid:pt,cmd:ut,stream_extra_info:ht}),this.logger.info("zb.sh.usi call unsendmsg "+JSON.stringify(this.stateCenter.unSendMessageList)))}this.logger.info("zb.sh.usi call success cmd "+ut)},ct.prototype.updateStreamInfo=function(pt,ut,ht,ft,gt){var vt,yt=this;ht===void 0&&(ht=""),(ut===2001||ut===2002)&&(vt=this.stateCenter.reporter.createSpan(nt.TRACER_LEVEL.H,{key:st.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:""},st.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.event)).setAttributes({stream_update_type:st.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_update_type(ut===2001?"stream added":ut===2002?"stream deleted":""),stream_extra_info:st.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_extra_info(ht),stream_id:st.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_id(pt)}),this._updateStreamInfo(pt,ut,ht,function(mt,Et){ut!==2001&&ut!==2002||(vt.setAttributes({send_seq:Et}),vt&&vt.end()),ft&&ft(mt,Et)},function(mt,Et){ut!==2001&&ut!==2002||(vt.setAttributes({send_seq:Et}),yt.stateCenter.reporter.setError(vt,mt)),gt&&gt(mt,Et)})},ct.prototype.handleStreamUpdateRsp=function(pt,ut,ht){var ft,gt,vt;if(this.rtm.isDisConnect())this.logger.warn("zb.sh.hsur not login");else if(pt.body.err_code==0){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+pt.body.stream_seq),this.streamSeq=this.streamSeq+1;var yt=this.room;if(yt)if(!((ft=pt==null?void 0:pt.body)===null||ft===void 0)&&ft.token_remain_time&&(this.stateCenter.getRoomByRoomID((gt=pt==null?void 0:pt.header)===null||gt===void 0?void 0:gt.room_id)?this.rtm.resetRoomTokenTimer(pt.header.room_id,pt.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify((vt=pt.header)===null||vt===void 0?void 0:vt.room_id))),this.stateCenter.useNetAgent)this.handleStreamSync(pt,ut,ht),delete yt.streamInfoList[ut];else{pt.body.stream_seq>this.streamSeq&&(this.logger.info("zb.sh.hsur seq diff, server: "+pt.body.stream_seq+" client: "+this.streamSeq),this.fetchStreamList());for(var mt=0;mt<pt.body.stream_info.length;mt++){var Et=pt.body.stream_info[mt].stream_id;this.handleStreamRsp(yt,Et,pt.body.stream_info[mt],ht),delete yt.streamInfoList[Et]}}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+pt.body.err_code)},ct.prototype.handleStreamSync=function(pt,ut,ht){if(this.handleStreamRsp(this.room,ut,{stream_id:ut,stream_sid:pt.body.stream_sid,stream_ver:pt.body.stream_ver,stream_nid:pt.body.stream_nid},ht),pt.body.stream_seq>this.streamSeq)return this.logger.info("zb.sh.hss.1 seq diff server: "+pt.body.stream_seq+" client "+this.streamSeq),void this.fetchStreamList();var ft=this.room.streamList.find(function(gt){return gt.stream_id==ut});ft&&pt.body.stream_ver>ft.stream_ver&&this.fetchStreamList(ut)},ct.prototype.handleStreamRsp=function(pt,ut,ht,ft){var gt=this.stateCenter.publishStreamList[ut],vt=pt.streamList.find(function(mt){return mt.stream_id==ut});if(this.logger.info("hsur.0 cmd "+ft+" "+!!vt),vt&&ft===2002){var yt=pt.streamList.findIndex(function(mt){return mt.stream_id==ut});this.logger.info("hsur.0 stream index "+yt),yt>-1&&pt.streamList.splice(yt,1)}gt?(gt.state==nt.ENUM_PUBLISH_STREAM_STATE.update_info&&(gt.state=nt.ENUM_PUBLISH_STREAM_STATE.publishing,ft!==2001||vt||pt.streamList.push(ht),this.onPublishStateUpdate(nt.ENUM_PUBLISH_STATE_UPDATE.start,ut,{code:0,message:""})),vt&&vt.stream_sid!==ht.stream_sid&&(this.logger.info("hsur.0 update sid. "+ut+" origin:"+vt.stream_sid+", new:"+ht.stream_sid),vt.stream_sid=ht.stream_sid)):this.logger.info("hsur.0 stream is not exist")},ct.prototype.handleFetchStreamListRsp=function(pt,ut){var ht,ft,gt,vt,yt,mt;if(this.logger.info("zb.sh.hfslr call "+ut),this.streamQuerying=!1,this.stateCenter.reporter.spanEnd({key:at.event,par:this.roomID},{stream_seq:at.stream_seq((ht=pt.body)===null||ht===void 0?void 0:ht.stream_seq),stream_size:at.stream_size((gt=(ft=pt.body)===null||ft===void 0?void 0:ft.stream_info)===null||gt===void 0?void 0:gt.length),stream_list:at.stream_list((vt=pt.body)===null||vt===void 0?void 0:vt.stream_info),error:((yt=pt==null?void 0:pt.body)===null||yt===void 0?void 0:yt.err_code)||(pt==null?void 0:pt.code),message:((mt=pt==null?void 0:pt.body)===null||mt===void 0?void 0:mt.err_message)||(pt==null?void 0:pt.msg)}),pt.body.err_code===0)if(this.streamSeq!==pt.body.stream_seq){var Et=pt.body.stream_info;this.stateCenter.useNetAgent&&ut&&(Et=pt.body.stream_info.filter(function(bt){return bt.stream_id===ut})),this.handleFullUpdateStream(pt.body.stream_seq,Et),this.logger.info("zb.sh.hfslr call success")}else this.logger.info("zb.sh.hfslr same seq");else this.logger.info("zb.sh.hfslr server error=",pt.body.err_code)},ct.prototype.handleFullUpdateStream=function(pt,ut){var ht=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=pt,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,ut,function(ft,gt,vt){ft.length!==0&&(ht.logger.debug("zb.sh.hfus callback addstream"),ht.onStreamUpdated(ht.roomID,nt.ENUM_STREAM_UPDATE_TYPE.added,ht.makeCallbackStreamList(ft))),gt.length!==0&&(ht.logger.debug("zb.sh.hfus callback delstream"),ht.onStreamUpdated(ht.roomID,nt.ENUM_STREAM_UPDATE_TYPE.deleted,ht.makeCallbackStreamList(gt))),vt.length!==0&&(ht.logger.debug("zb.sh.hfus callback updatestream"),ht.onStreamExtraInfoUpdated(ht.roomID,ht.makeCallbackStreamList(vt)))}),this.logger.info("zb.sh.hfus call success")},ct.prototype.handlePushStreamUpdateMsg=function(pt){if(this.logger.info("zb.sh.hpsum call "+JSON.stringify(pt)),pt.body.stream_info&&pt.body.stream_info.length!==0){if(pt.body.stream_info.length+this.streamSeq!==pt.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=pt.body.stream_seq,pt.body.stream_cmd){case nt.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(pt.body.stream_info);break;case nt.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(pt.body.stream_info);break;case nt.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(pt.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},ct.prototype.handlePriPushStreamUpdateMsg=function(pt){if(this.logger.info("zb.sh.hpsum call"),pt.body.streams_info&&pt.body.streams_info.length!==0){if(pt.body.streams_info.length+this.streamSeq!==pt.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(pt.body.stream_cmd,pt.body.stream_seq,pt.body.streams_info);switch(this.streamSeq=pt.body.stream_seq,pt.body.stream_cmd){case nt.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(pt.body.streams_info);break;case nt.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(pt.body.streams_info);break;case nt.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(pt.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},ct.prototype.handleAddedStreamList=function(pt){this.logger.debug("zb.sh.hasl call");for(var ut,ht=[],ft=0;ft<pt.length;ft++)if(pt[ft].anchor_id_name!=this.stateCenter.idName&&pt[ft].id_name!=this.stateCenter.idName&&pt[ft].user_id!==this.stateCenter.idName){ut=!1;for(var gt=0;gt<this.room.streamList.length;gt++)if(pt[ft].stream_id===this.room.streamList[gt].stream_id){ut=!0;break}ut||ht.push(pt[ft])}else this.logger.debug("hdsl.0 have self stream added");if(ht.length!==0){this.logger.debug("zb.sh.hasl callback addstream");for(var vt=0;vt<ht.length;vt++){this.room.streamList.push(ht[vt]);var yt=this.streamCenter.playerList[ht[vt].stream_id];yt==null||yt.player.setStreamAdd()}this.onStreamUpdated(this.roomID,nt.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(ht))}this.logger.info("zb.sh.hasl call success")},ct.prototype.handleDeletedStreamList=function(pt){this.logger.debug("zb.sh.hdsl call");for(var ut=[],ht=0;ht<pt.length;ht++)if(pt[ht].anchor_id_name!=this.stateCenter.idName&&pt[ht].id_name!=this.stateCenter.idName&&pt[ht].user_id!==this.stateCenter.idName){for(var ft=this.room.streamList.length-1;ft>=0;ft--)if(pt[ht].stream_id===this.room.streamList[ft].stream_id){!this.stateCenter.connectChanged&&this.room.streamList.splice(ft--,1),ut.push(pt[ht]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");ut.length!==0&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,nt.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(ut))),this.logger.info("zb.sh.hdsl call")},ct.prototype.handleUpdatedStreamList=function(pt){this.logger.debug("zb.sh.husl call");for(var ut=[],ht=0;ht<pt.length;ht++)if(pt[ht].anchor_id_name!=this.stateCenter.idName&&pt[ht].id_name!=this.stateCenter.idName&&pt[ht].user_id!==this.stateCenter.idName){for(var ft=0;ft<this.room.streamList.length;ft++)if(pt[ht].stream_id===this.room.streamList[ft].stream_id){pt[ht].extra_info!==this.room.streamList[ft].extra_info&&(this.room.streamList[ft]=pt[ht],ut.push(pt[ht]));break}}else this.logger.debug("hsul.0 have self stream updated");ut.length!==0&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(ut))),this.logger.info("zb.sh.husl call success")},ct.prototype.fetchStreamList=function(pt){var ut,ht,ft,gt=this;this.logger.info("zb.sh.fsl call");var vt=this.stateCenter.reporter.createSpan(nt.TRACER_LEVEL.H,{key:st.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:at.event,par:this.roomID},at.event,!0);if(this.rtm.isDisConnect())return this.logger.info("zb.sh.fsl state error"),void this.stateCenter.reporter.setError(vt,at.error.NOT_LOGIN);if(this.streamQuerying)return this.logger.info("zb.sh.fsl already doing"),void this.stateCenter.reporter.setError(vt,at.error.kParamError," already doing");if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),this.stateCenter.useNetAgent)this.rtm.liveRoomHandler.getStreamList({},function(mt){gt.handleFetchStreamListRsp(mt,pt)},function(mt){},{roomID:(ut=this.room)===null||ut===void 0?void 0:ut.roomID,sessionID:(ht=this.room)===null||ht===void 0?void 0:ht.sessionID,roomSessionID:(ft=this.room)===null||ft===void 0?void 0:ft.roomSessionID});else{var yt=this.room;this.rtm.service.sendMessage("stream_info",{reserve:0},function(mt){gt.handleFetchStreamListRsp(mt)},function(mt,Et){},void 0,{roomID:yt==null?void 0:yt.roomID,sessionID:yt==null?void 0:yt.sessionID,roomSessionID:yt==null?void 0:yt.roomSessionID})}this.logger.info("zb.sh.fsl call success")},ct.prototype.handleReconnectStream=function(pt){var ut,ht,ft,gt,vt,yt;this.logger.info("zb.sh.hrs call");var mt=this.streamCenter.publisherList,Et=this.streamCenter.playerList,bt=function(Pt){if(((ht=(ut=mt[Pt])===null||ut===void 0?void 0:ut.room)===null||ht===void 0?void 0:ht.roomID)!==Ct.roomID)return"continue";var Ot=pt.find(function(Bt){return Bt.stream_id==Pt});if(((ft=mt[Pt].publisher)===null||ft===void 0?void 0:ft.state)!=nt.ENUM_PUBLISH_STATE.publishing&&mt[Pt].state!==nt.ENUM_PLAYER_STATE.playing||Ot&&(!Ot||Ot.anchor_id_name===Ct.stateCenter.idName||Ot.id_name===Ct.stateCenter.idName||Ot.user_id===Ct.stateCenter.idName)){if((((gt=mt[Pt].publisher)===null||gt===void 0?void 0:gt.state)==nt.ENUM_PUBLISH_STATE.stop||mt[Pt].state===nt.ENUM_PLAYER_STATE.stop)&&!(!((yt=(vt=mt[Pt])===null||vt===void 0?void 0:vt.retryStreamHandler)===null||yt===void 0)&&yt.maxTimer)&&pt.find(function(Bt){return Bt.stream_id==Pt})){Ct.updateStreamInfo(Pt,nt.ENUM_STREAM_SUB_CMD.liveEnd);for(var Ut=0;Ut<Ct.room.streamList.length;Ut++)if(Ct.room.streamList[Ut].stream_id==Pt){Ct.room.streamList.splice(Ut--,1);break}}}else Ct.updateStreamInfo(Pt,nt.ENUM_STREAM_SUB_CMD.liveBegin,Ct.stateCenter.publishStreamList[Pt].extra_info)},Ct=this;for(var Tt in mt)bt(Tt);for(var Tt in mt)mt[Tt].room.roomID===this.roomID&&mt[Tt].isReDispatch&&(this.logger.info("zb.sh.hrs "+Tt+"retry dispatch"),(wt=mt[Tt].retryDispatchHandler).stopMaxTime(),wt.invalid(),wt.initStream(Tt,mt[Tt].publishOption,!0),wt.active(0),mt[Tt].isReDispatch=!1);for(var Tt in Et){var wt;Et[Tt].room.roomID===this.roomID&&Et[Tt].isReDispatch&&(this.logger.info("zb.sh.hrs "+Tt+"retry dispatch"),(wt=Et[Tt].retryDispatchHandler).stopMaxTime(),wt.invalid(),wt.initStream(Tt,Et[Tt].playOption,!1),wt.active(0),Et[Tt].isReDispatch=!1)}var Rt=this.streamCenter.stopedPlayerList,It=function(Pt){if(Rt[Pt].roomID!==St.roomID)return"continue";var Ot=St.streamCenter,Ut=Rt[Pt],Bt=Ut.playOption,xt=Ut.playStream;Ot.setPlayStateStart(Pt,Bt,Ut.isDataChannel);var At=Ot.playerList[Pt].retryDispatchHandler;Ot.playSuccessCallBackList[Pt]=Rt[Pt].sucCallBack?Rt[Pt].sucCallBack:function(Mt){for(var Nt=document.querySelectorAll("video, audio"),$t=0;$t<Nt.length;$t++)xt&&Nt[$t].srcObject===xt&&(xt.getTracks().forEach(function(Ft){return xt.removeTrack(Ft)}),Mt.clone().getTracks().forEach(function(Ft){return xt.addTrack(Ft)}))},Rt[Pt].errCallBack&&(Ot.playErrorCallBackList[Pt]=Rt[Pt].errCallBack),Ot.onPlayStateUpdate(nt.ENUM_PLAY_STATE_UPDATE.retry,Pt,{code:0,message:""}),At.stopMaxTime(),At.invalid(),At.initStream(Pt,Bt,!1),At.startMaxTime(),At.active(0),delete Rt[Pt]},St=this;for(var Tt in Rt)It(Tt);this.logger.info("zb.sh.hrs end")},ct.prototype.makeCallbackStreamList=function(pt){var ut,ht=[];if(this.stateCenter.useNetAgent&&this.stateCenter.appConfig&&(ut=this.stateCenter.appConfig.media_config.play_config.resource_info.filter(function(St){return[nt.SignalResourceType.CDN,nt.SignalResourceType.DG].includes(St.resource_type)})),pt&&pt.length>0)for(var ft=0;ft<pt.length;ft++){var gt=pt[ft].stream_id;if(ut&&ut.length)for(var vt=0;vt<ut.length;vt++){for(var yt=ut[vt].resource_type==nt.SignalResourceType.DG?"_plus":"",mt=[],Et=[],bt=[],Ct=0;Ct<ut[vt].service_info.length;Ct++){var Tt=ut[vt].service_info[Ct],wt=Tt.protocol,Rt=Tt.url_template.replace("{STREAM_NAME}",gt);switch(wt){case nt.ProtocolType.FLV:mt.push(Rt);break;case nt.ProtocolType.HLS:Et.push(Rt);break;case nt.ProtocolType.RTMP:bt.push(Rt)}}pt[ft]["urls_flv"+yt]=mt,pt[ft]["urls_m3u8"+yt]=Et,pt[ft]["urls_rtmp"+yt]=bt}var It={user:{userID:pt[ft].anchor_id_name||pt[ft].id_name,userName:pt[ft].anchor_nick_name||pt[ft].nick_name},extraInfo:pt[ft].extra_info,streamID:pt[ft].stream_id,roomID:"",urlFlv:"",urlFlvPlus:"",urlRtmp:"",urlHls:"",urlHlsPlus:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:pt[ft].stream_gid,closeType:pt[ft].close_type};this.setCDNInfo(It,pt[ft]),ht.push(It)}return ht},ct.prototype.sendBizChannelRequest=function(pt,ut,ht,ft){var gt=this;ft===void 0&&(ft=!1),pt=Object.assign(pt,{is_retry_req:ft?1:0});var vt=this.room;this.rtm.service.sendMessage("biz_channel",pt,function(yt,mt){ut(yt.header.seq,yt.body.cmd,yt.body.rsp_body)},function(yt,mt){var Et=yt.body.err_code;typeof Et!="number"||Et!==2002?ht(Et,mt,yt.body.rsp_body):gt.sendBizChannelRequest(pt,ut,ht,!0)},void 0,{roomID:vt==null?void 0:vt.roomID,sessionID:vt==null?void 0:vt.sessionID,roomSessionID:vt==null?void 0:vt.roomSessionID})},ct.prototype.sendBizChannelRequestV2=function(pt,ut,ht,ft){var gt=this,vt=pt.server,yt=pt.location,mt=pt.cmd,Et=pt.channel,bt=this.rtm.netAgent,Ct=this.room,Tt=void 0,wt=ut.timestamp;ut&&(Tt=JSON.stringify(ut));var Rt={cmd:mt,req_body:Tt,appid:this.stateCenter.appid,timestamp:wt||Math.ceil(new Date().getTime()/1e3),token:Ct==null?void 0:Ct.token,user_id:this.stateCenter.idName,channel:Et||"media"};this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" "+JSON.stringify(Rt)+" request "+JSON.stringify(pt)),bt.startHttpRequest({service:vt,headers:[],body:Rt,idName:this.stateCenter.idName,method_no:2,ack:!1,location:yt},function(It){gt.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" rsp "+JSON.stringify(It.body));var St=It.status_code,Pt=It.body;if(St===200){var Ot=Pt;if(typeof Pt=="string")try{Ot=JSON.parse(Pt)}catch(At){throw ft(St),At}var Ut=Ot.err_code,Bt=Ot.rsp_body,xt=void 0;try{xt=JSON.parse(Bt)}catch{xt=Bt}if(Ut!==0)return typeof Ut=="number"&&Ut===2002?void gt.sendBizChannelRequest(ut,ht,ft,!0):void ft(St,Ut,xt);ht(xt)}else ft(St)},function(It){ft(-1,It==null?void 0:It.code,void 0,It)})},ct.prototype.updateStreamExtraInfo=function(pt,ut,ht,ft){},ct.prototype.setStreamExtraInfo=function(pt,ut,ht,ft){},ct.prototype._publishTarget=function(pt,ut,ht){},ct.prototype.patchStreamList=function(pt){var ut=this;if(typeof pt.body.StreamRefresh=="number"&&pt.body.StreamRefresh!==0)return this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" stream refresh "),void this.fetchStreamList();pt.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+pt.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout(function(){ut.handleMergeTimeout()},this.streamListHBMergeInterval)),this.minStreamSeq=pt.body.stream_seq},ct.prototype.getStreamSeq=function(){return this.streamSeq},ct.prototype.mergeStreamByStreamSeq=function(pt,ut,ht){var ft=this;this.streamSeqMergeMap||(this.logger.warn(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+ut),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout(function(){ft.handleMergeTimeout()},this.streamListMergeInterval)),this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" ".concat(this.streamSeqMergeMap," ").concat(pt," ").concat(ut," ").concat(ht)),this.streamSeqMergeMap[ut]={cmd:pt,streamList:ht}},ct.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var pt=Object.keys(this.streamSeqMergeMap).map(function(ut){return+ut}).sort(function(ut,ht){return ut-ht});pt[pt.length-1]-pt[0]+1===pt.length||pt[pt.length-1]>=this.minStreamSeq?this.mergeStream(pt):(this.streamSeqMergeMap=null,this.fetchStreamList())}},ct.prototype.mergeStream=function(pt){var ut=this;this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+pt.join(","));var ht=pt[pt.length-1],ft=[];pt.forEach(function(gt){if(ut.streamSeqMergeMap&&ut.streamSeqMergeMap[gt])switch(ut.streamSeqMergeMap[gt].cmd){case nt.ENUM_STREAM_UPDATE_CMD.added:ut.streamSeqMergeMap[gt].streamList.forEach(function(vt){var yt=ft.findIndex(function(mt){return mt.stream_id==vt.stream_id});yt!==-1&&ft.splice(yt),ft.push(vt)});break;case nt.ENUM_STREAM_UPDATE_CMD.deleted:ut.streamSeqMergeMap[gt].streamList.forEach(function(vt){var yt=ft.findIndex(function(mt){return mt.stream_id==vt.stream_id});yt!==-1&&ft.splice(yt)});break;case nt.ENUM_STREAM_UPDATE_CMD.updated:ut.streamSeqMergeMap[gt].streamList.forEach(function(vt){var yt=ft.findIndex(function(mt){return mt.stream_id==vt.stream_id});yt!==-1&&ft.splice(yt),ft.push(vt)})}}),this.streamSeqMergeMap=null,this.logger.info(it.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+ft),this.handleFullUpdateStream(ht,ft)},ct.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},ct}();et.StreamHandler=lt},6706:function(_e,et,rt){var nt;Object.defineProperty(et,"__esModule",{value:!0}),et.ENUM_DISPATCH_TYPE=et.ENUM_BROADCASTER_STATUS=et.ENUM_PLAY_SOURCE_TYPE=et.ENUM_PUBLISH_STATE_NEGO=et.ENUM_PUSH_SIGNAL_SUB_CMD=et.ENUM_SIGNAL_SUB_CMD=et.QUALITYLEVEL=et.SERVER_ERROR_CODE=et.ENUM_STREAM_UPDATE_CMD_PRI=et.ENUM_STREAM_UPDATE_CMD=et.MINIUM_HEARTBEAT_INTERVAL=et.STREAM_DELETE_REASON=et.ENUM_NETWORK_STATE=et.USER_RUN_STATE=et.ENUM_RUN_STATE=et.ENUM_STREAM_UPDATE_TYPE=et.ENUM_STREAM_CMD_PRI=et.ENUM_STREAM_SUB_CMD=et.ENUM_PUBLISH_STREAM_STATE=et.MAX_RETRY_CONNECT_INTERVAL=et.MAX_TRANS_DATA_LENGTH=et.MAX_TRANS_TYPE_LENGTH=et.MAX_MIX_TASK_ID_LENGTH=et.MAX_MESSAGE_LENGTH=et.MAX_ROOM_ID_LENGTH=et.MAX_USER_NAME_LENGTH=et.MAX_USER_ID_LENGTH=et.MAX_STREAM_ID_LENGTH=et.MAX_TRY_HEARTBEAT_COUNT=et.SEND_MSG_TIMEOUT=et.SEND_MSG_RESET=et.MAX_TRY_CONNECT_COUNT=et.streamMap=et.ENUM_CONNECT_STATE=et.ProtocolType=et.SignalResourceType=et.ENUM_PROBE_STATE=et.ENUM_PLAY_STATE_NEGO=et.ENUM_PLAYER_STATE=et.ENUM_PLAY_STATE=et.ENUM_PUBLISH_STATE=et.ENUM_SCREEM_RESOLUTION_TYPE=et.ENUM_RESOLUTION_TYPE=et.ENUM_SIGNAL_STATE=et.ERROR_CODES=et.ENUM_REMOTE_TYPE=et.LOG_LEVEL=et.ENUM_LOG_LEVEL=et.ROOMVERSION=et.PROTO_VERSION=void 0,et.ZReporter=et.BusinessService=et.NetConnection=et.ZegoExpressWebRTM=et.ZegoDataReport=et.ZegoLogger=et.ZegoExpressWebRTMEngine=et.getReportSeq=et.getSeq=et.EncodecSelectionModeType=et.H264ProfileType=et.TRACER_LEVEL=et.ZegoScenario=et.ResourceMode=et.PlayMode=et.ZegoSEIType=et.QUALITY_CONSTANT=et.QualityGrade=et.REPORT_ACTION=et.ENUM_RETRY_STATE=et.ENUM_PLAY_STATE_UPDATE=et.ENUM_PUBLISH_STATE_UPDATE=et.LinkedList=et.ListNode=et.E_CLIENT_TYPE=et.ENUM_SOURCE_TYPE=void 0,et.PROTO_VERSION="2.22.0",et.ROOMVERSION="V1",function(at){at[at.debug=0]="debug",at[at.info=1]="info",at[at.warn=2]="warn",at[at.error=3]="error",at[at.report=99]="report",at[at.disable=100]="disable"}(et.ENUM_LOG_LEVEL||(et.ENUM_LOG_LEVEL={})),et.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(at){at[at.disable=0]="disable",at[at.websocket=1]="websocket",at[at.https=2]="https"}(et.ENUM_REMOTE_TYPE||(et.ENUM_REMOTE_TYPE={})),et.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},function(at){at[at.disconnected=0]="disconnected",at[at.connecting=1]="connecting",at[at.connected=2]="connected"}(et.ENUM_SIGNAL_STATE||(et.ENUM_SIGNAL_STATE={})),et.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},et.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},et.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},et.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},et.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},et.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(at){at[at.tryProbe=0]="tryProbe",at[at.probed=2]="probed"}(et.ENUM_PROBE_STATE||(et.ENUM_PROBE_STATE={})),function(at){at[at.CDN=0]="CDN",at[at.RTC=1]="RTC",at[at.L3=2]="L3",at[at.DG=3]="DG"}(et.SignalResourceType||(et.SignalResourceType={})),function(at){at[at.UDP=0]="UDP",at[at.RTMP=1]="RTMP",at[at.FLV=2]="FLV",at[at.HLS=3]="HLS",at[at.WEBRTC=4]="WEBRTC"}(et.ProtocolType||(et.ProtocolType={})),et.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},et.streamMap={"/lr/push/stream_add":12001,"/lr/push/stream_delete":12002,"/lr/push/stream_update":12003},et.MAX_TRY_CONNECT_COUNT=3,et.SEND_MSG_RESET=2,et.SEND_MSG_TIMEOUT=1,et.MAX_TRY_HEARTBEAT_COUNT=5,et.MAX_STREAM_ID_LENGTH=256,et.MAX_USER_ID_LENGTH=64,et.MAX_USER_NAME_LENGTH=256,et.MAX_ROOM_ID_LENGTH=128,et.MAX_MESSAGE_LENGTH=1024,et.MAX_MIX_TASK_ID_LENGTH=256,et.MAX_TRANS_TYPE_LENGTH=128,et.MAX_TRANS_DATA_LENGTH=4096,et.MAX_RETRY_CONNECT_INTERVAL=12,et.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},et.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},et.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},et.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},function(at){at[at.logout=0]="logout",at[at.trylogin=1]="trylogin",at[at.login=2]="login"}(et.ENUM_RUN_STATE||(et.ENUM_RUN_STATE={})),function(at){at[at.logout=0]="logout",at[at.trylogin=1]="trylogin",at[at.login=2]="login",at[at.reconnect=3]="reconnect"}(et.USER_RUN_STATE||(et.USER_RUN_STATE={})),function(at){at[at.offline=0]="offline",at[at.online=1]="online"}(et.ENUM_NETWORK_STATE||(et.ENUM_NETWORK_STATE={})),et.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},function(at){at[at.UNKNOWN=0]="UNKNOWN",at[at.CDN=1]="CDN",at[at.RTC=2]="RTC",at[at.L3=3]="L3"}(nt||(nt={})),et.MINIUM_HEARTBEAT_INTERVAL=3e3,et.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},et.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},et.SERVER_ERROR_CODE=1e4,function(at){at[at.low=1]="low",at[at.stantard=2]="stantard",at[at.hight=3]="hight",at[at.custome=4]="custome"}(et.QUALITYLEVEL||(et.QUALITYLEVEL={})),et.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},et.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},et.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(at){at[at.cdn=0]="cdn",at[at.ultra=1]="ultra"}(et.ENUM_PLAY_SOURCE_TYPE||(et.ENUM_PLAY_SOURCE_TYPE={})),function(at){at[at.stop=0]="stop",at[at.start=1]="start"}(et.ENUM_BROADCASTER_STATUS||(et.ENUM_BROADCASTER_STATUS={})),function(at){at[at.cdn=0]="cdn",at[at.ultra=1]="ultra",at[at.customUrl=2]="customUrl"}(et.ENUM_DISPATCH_TYPE||(et.ENUM_DISPATCH_TYPE={})),function(at){at[at.CDN=0]="CDN",at[at.BGP=1]="BGP"}(et.ENUM_SOURCE_TYPE||(et.ENUM_SOURCE_TYPE={})),function(at){at[at.ClientType_None=0]="ClientType_None",at[at.ClientType_H5=1]="ClientType_H5",at[at.ClientType_SmallPragram=2]="ClientType_SmallPragram",at[at.ClientType_Webrtc=3]="ClientType_Webrtc"}(et.E_CLIENT_TYPE||(et.E_CLIENT_TYPE={}));var ot=function(){function at(lt,ct){lt===void 0&&(lt=null),ct===void 0&&(ct=null),this._id=null,this.next=null,this.prev=null,this._id=lt,this._data=ct}return Object.defineProperty(at.prototype,"id",{get:function(){return this._id?this._id:null},set:function(lt){this._id=lt},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"data",{get:function(){return this._data},set:function(lt){this._data=lt},enumerable:!1,configurable:!0}),at.prototype.hasNext=function(){return this.next&&this.next.id},at.prototype.hasPrev=function(){return this.prev&&this.prev.id},at}();et.ListNode=ot;var it=function(){function at(){this.start=new ot,this.end=new ot,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return at.prototype.insertBefore=function(lt,ct){var pt=new ot(this._idCounter,ct);return pt.next=lt,pt.prev=lt.prev,lt.prev&&(lt.prev.next=pt),lt.prev=pt,++this._idCounter,++this._numNodes,pt},at.prototype.addLast=function(lt){return this.insertBefore(this.end,lt)},at.prototype.add=function(lt){return this.addLast(lt)},at.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},at.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},at.prototype.size=function(){return this._numNodes},at.prototype.getFromFirst=function(lt){var ct=0,pt=this.start.next;if(lt>=0)for(;ct<lt&&pt!==null;)pt=pt.next,++ct;else pt=null;if(pt===null)throw"Index out of bounds.";return pt},at.prototype.get=function(lt){return lt===0?this.getFirst():lt===this._numNodes-1?this.getLast():this.getFromFirst(lt)},at.prototype.remove=function(lt){return lt.prev&&(lt.prev.next=lt.next),lt.next&&(lt.next.prev=lt.prev),--this._numNodes,lt},at.prototype.removeFirst=function(){var lt=null;return this._numNodes>0&&this.start.next&&(lt=this.remove(this.start.next)),lt},at.prototype.removeLast=function(){var lt=null;return this._numNodes>0&&this.end.prev&&(lt=this.remove(this.end.prev)),lt},at.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},at.prototype.each=function(lt){for(var ct=this.start;ct.hasNext();)lt(ct=ct.next)},at.prototype.find=function(lt){for(var ct=this.start,pt=!1,ut=null;ct.hasNext()&&!pt;)lt(ct=ct.next)&&(ut=ct,pt=!0);return ut},at.prototype.map=function(lt){for(var ct=this.start,pt=[];ct.hasNext();)lt(ct=ct.next)&&pt.push(ct);return pt},at.prototype.push=function(lt){return this.addLast(lt)},at.prototype.unshift=function(lt){this.insertBefore(this._numNodes>0?this.start.next:this.end,lt)},at.prototype.pop=function(){return this.removeLast()},at.prototype.shift=function(){return this.removeFirst()},at}();et.LinkedList=it,et.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},et.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},et.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},et.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},function(at){at[at.Unknown=-1]="Unknown",at[at.Excellent=0]="Excellent",at[at.Good=1]="Good",at[at.Middle=2]="Middle",at[at.Poor=3]="Poor",at[at.Die=4]="Die"}(et.QualityGrade||(et.QualityGrade={})),function(at){at[at.MinQuality=0]="MinQuality",at[at.DieQuality=0]="DieQuality",at[at.PoorMinQuality=1]="PoorMinQuality",at[at.MiddleMinQuality=30]="MiddleMinQuality",at[at.GoodMinQuality=60]="GoodMinQuality",at[at.ExcellentMinQuality=85]="ExcellentMinQuality",at[at.MaxQuality=100]="MaxQuality"}(et.QUALITY_CONSTANT||(et.QUALITY_CONSTANT={})),function(at){at[at.ZegoDefined=0]="ZegoDefined",at[at.UserUnregister=1]="UserUnregister"}(et.ZegoSEIType||(et.ZegoSEIType={})),function(at){at[at.CDN=0]="CDN",at[at.L3=1]="L3"}(et.PlayMode||(et.PlayMode={})),function(at){at[at.RTC=0]="RTC",at[at.CDN=1]="CDN",at[at.L3=2]="L3",at[at.DG=3]="DG"}(et.ResourceMode||(et.ResourceMode={})),function(at){at[at.Default=3]="Default",at[at.StandardVideoCall=4]="StandardVideoCall",at[at.HighVideoCall=5]="HighVideoCall",at[at.StandardChatroom=6]="StandardChatroom",at[at.HighQualityChatroom=7]="HighQualityChatroom",at[at.Broadcast=8]="Broadcast"}(et.ZegoScenario||(et.ZegoScenario={})),function(at){at[at.I=0]="I",at[at.H=10]="H",at[at.M=100]="M",at[at.L=1e3]="L"}(et.TRACER_LEVEL||(et.TRACER_LEVEL={})),function(at){at[at.BASE_LINE=1]="BASE_LINE",at[at.MAIN=2]="MAIN",at[at.HIGH=3]="HIGH"}(et.H264ProfileType||(et.H264ProfileType={})),function(at){at.ONLY_BASELINE="only_baseline",at.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first"}(et.EncodecSelectionModeType||(et.EncodecSelectionModeType={}));var st=rt(4119);Object.defineProperty(et,"getSeq",{enumerable:!0,get:function(){return st.getSeq}}),Object.defineProperty(et,"getReportSeq",{enumerable:!0,get:function(){return st.getReportSeq}}),Object.defineProperty(et,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return st.ZegoExpressWebRTMEngine}}),Object.defineProperty(et,"ZegoLogger",{enumerable:!0,get:function(){return st.ZegoLogger}}),Object.defineProperty(et,"ZegoDataReport",{enumerable:!0,get:function(){return st.ZegoDataReport}}),Object.defineProperty(et,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return st.ZegoExpressWebRTM}}),Object.defineProperty(et,"NetConnection",{enumerable:!0,get:function(){return st.NetConnection}}),Object.defineProperty(et,"BusinessService",{enumerable:!0,get:function(){return st.BusinessService}}),Object.defineProperty(et,"ZReporter",{enumerable:!0,get:function(){return st.ZReporter}})},2752:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},GET_CONFIG_FAIL:{code:1101002,message:"get app config fail"},MODULE_NOT_IMPORTED:{code:1101003,message:"Module not imported"},RTC_LOGIN_ERROR:{code:1101004,message:"signal login fail"},RTC_HB_ERROR:{code:1101005,message:"signal hb fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},VIDEO_EFFECT_IS_STARTING:{code:1103073,message:"video effect is starting, please operate after video effect is started"},PUBLISHER_NET_PROBE_POOR:{code:1103069,message:"publish stream poor and net probe poor"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},PLAYER_STREAM_NOT_EXIST:{code:1104039,message:"play stream not found"},PLAYER_NET_PROBE_POOR:{code:1103040,message:"publish stream poor and net probe poor"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."},SET_ROOM_SCENARIO:{code:1000067,message:"Logged in room, setting scenario is not supported"}}},3529:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoWechatLogEvent=et.ZegoRTCLogEvent=void 0;var nt=rt(2752),ot=function(ct){return ct},it=function(ct){return ct},st=function(ct){return ct},at=function(ct){return ct},lt=function(ct){return ct};et.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:nt.errorCodeList.INPUT_PARAM},system_info:it,servers:st},kZegoTaskRoom:{event:"room"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskListener:{event:"listener"},kZegoTaskOnListener:{event:"/sdk/on_listener",listener:it,error:{INPUT_PARAM:nt.errorCodeList.INPUT_PARAM}},kZegoTaskOffListener:{event:"/sdk/off_listener",listener:it,error:{INPUT_PARAM:nt.errorCodeList.INPUT_PARAM}},kZegoTaskRoomContext:{event:"room_context"},kZegoTaskInitSetting:{event:"/sdk/init"},kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:nt.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:nt.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:nt.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:nt.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:nt.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:nt.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:nt.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:nt.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:nt.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:nt.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:it,screen:ot,camera:ot,custom:ot,preview_conf:ot,media_stream_id:it},kZegoTaskPublishStart:{event:"/sdk/start_publish",error:{kPublishParamError:nt.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:nt.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:nt.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:nt.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:nt.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:nt.errorCodeList.PUBLISH_NO_PREVIEW,kPublishEffectIsStarting:nt.errorCodeList.VIDEO_EFFECT_IS_STARTING,kPublishNoLoginError:nt.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:nt.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:nt.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:nt.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:nt.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:nt.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:nt.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:nt.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:nt.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:nt.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:nt.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:nt.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:nt.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:nt.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:nt.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:nt.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:nt.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:nt.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:nt.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:nt.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL,kPublishNetProbePoor:nt.errorCodeList.PUBLISHER_NET_PROBE_POOR},urls:st,is_center:lt,server_url:it,publish_option:ot,message:it,stream_id:it,stream_sid:at,room_id:it,video_en_codec_id:at,cap_w:at,cap_h:at,w:at,h:at,video_en_fps:at,video_en_bps:at,audio_c_channel_count:at,audio_en_bps:at,aec_level:at,ans_level:at,agc:lt,enable_camera:lt,enable_mic:lt,video_activate:lt,audio_activate:lt,gw_version:at,use_na:at},kZegoStartPublish:{event:"/publish/start",is_peer:lt,reason:it,url:it,ip:it,peer_id:at,source_type:it,net_protocol:it,wait_consume:at,dispatch_consume:at,signal_consume:at,is_center:lt},kZegoRePublish:{event:"/publish/restart",stream_id:it,server_url:it,reason_code:at},kZegoTaskRePublish:{event:"/sdk/republish"},kZegoTaskSDKPublishStream:{event:"/sdk/publish",room_id:it,room_sid_string:it,retry_btime:at,max_retry_interval:at,fail_cnt:at,continuous_fail_cnt:at,probe_ip_cnt:at,valid_probe_ip_cnt:at,poor_quality_retry_cnt:at,use_resource_type:st,probe_not_trigger_retry_info:ot,stop_reason:it,try_cnt:at,server_url:it,publish_begin_time:at,publish_state_time:at,bitrate:at,h:at,w:at,cap_w:at,cap_h:at,fps:at,use_na:at,env:at,webrtc_sid:at,stream_id:it,itemtype:it},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",webrtc_sid:at,w:at,h:at},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",webrtc_sid:at,w:at,h:at},kZegoTaskRTCPublish:{event:"/rtc/publish",tryidx:at,url:it,ip:it,net_protocol:it,lsttime:at,denied_info:it,dispatch_external_ip:it,total_stat:ot,room_id:it,room_sid_string:it,resource_type:it,protocol:it,stop_reason:it},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:nt.errorCodeList.PUBLISHER_PARAM},stream_id:it,stream_sid:at,room_id:it},kZegoTaskPublishStreamStateError:{event:"/rtc/publish_stream_state_error"},kZegoTaskPlayStart:{event:"/sdk/start_play",error:{kStreamIDNullError:nt.errorCodeList.STREAM_ID_NULL,kPlayParamError:nt.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:nt.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:nt.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:nt.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:nt.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:nt.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:nt.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:nt.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:nt.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:nt.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayStreamNotFound:nt.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayRetryTimeoutError:nt.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:nt.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:nt.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:nt.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:nt.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:nt.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:nt.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:nt.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:nt.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:nt.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:nt.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:nt.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:nt.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:nt.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:nt.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:nt.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:nt.errorCodeList.PLAYER_PROBE_TIMEOUT,kPlayNetProbePoor:nt.errorCodeList.PLAYER_NET_PROBE_POOR},room_id:it,urls:st,is_center:lt,server_url:it,video_layer:at,play_option:ot,message:it,stream_id:it,stream_sid:at,resource_mode:at,src:it,video_codec_id:it,room_sid_string:it,is_multi:lt,audio_activate:lt,video_activate:lt,gw_version:at,use_na:at,biz_product:at},kZegoStartPlay:{event:"/play/start",is_peer:lt,reason:it,url:it,ip:it,peer_id:at,source_type:it,net_protocol:it,wait_consume:at,dispatch_consume:at,signal_consume:at,is_center:lt},kZegoRePlay:{event:"/play/restart",stream_id:it,server_url:it,reason_code:at},kZegoTaskSDKPlayStream:{event:"/sdk/play",audio_cumulative_break_time:at,audio_cumulative_decode_time:at,video_cumulative_break_time:at,video_cumulative_decode_time:at,l3_a_break_time:at,l3_a_decode_time:at,l3_v_break_time:at,l3_v_decode_time:at,rtc_a_break_time:at,rtc_a_decode_time:at,rtc_v_break_time:at,rtc_v_decode_time:at,fft_audio:at,fft_video:at,room_id:it,room_sid_string:it,retry_btime:at,max_retry_interval:at,use_na:at,fail_cnt:at,continuous_fail_cnt:at,probe_ip_cnt:at,valid_probe_ip_cnt:at,poor_quality_retry_cnt:at,probe_not_trigger_retry_info:ot,use_resource_type:st,stop_reason:it,try_cnt:at,webrtc_sid:at,itemtype:it,server_url:it,play_begin_time:at,play_state_time:at,play_state_cnt:at,first_frame_time:at,protocol:it,dispatch_external_ip:it,total_stat:ot,w:at,h:at,abrc:at,vbrc:at,vinfo:ot},kZegoTaskStreamPlay:{event:"/rtc/play",tryidx:at,url:it,ip:it,stream_id:it,room_id:it,room_sid_string:it,net_protocol:it,lsttime:at,denied_info:it,stop_reason:it,dispatch_external_ip:it,env:at,resource_type:it,protocol:it,total_stat:ot,vinfo:ot},kZegoTaskRePlay:{event:"/sdk/replay",stream_id:it,server_url:it,reason_code:at},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:nt.errorCodeList.PUBLISHER_PARAM},room_id:it,stream_id:it,webrtc_sid:at,stream_sid:at,biz_product:at},kZegoTaskPlayStreamStateError:{event:"/rtc/play_stream_state_error"},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:nt.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:nt.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:ot,dev_kind:it},kZegoAudioDeviceChanged:{event:"/device/audio_device_changed",error:{kBrowserNotSupportError:nt.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:nt.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:at,device:it,device_name:it},kZegoVideoDeviceChanged:{event:"/device/video_device_changed",error:{kBrowserNotSupportError:nt.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:nt.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:at,device:it,device_name:it},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:nt.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:nt.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:at,device:it,device_name:it},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:ot},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream_id:it,camera_status:it,status_code:at},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream_id:it,mic_status:it,status_code:at},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:nt.errorCodeList.LOCALSTREAM_WRONG},stop_reason:it},kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",device:it,device_name:it,reason_type:it},kZegoTaskLiveRoomRecvStreamUpdateInfo:{event:"/liveroom/recv_stream_update_info",stream_update_type:it,stream_seq:at,stream_list:ot,error:{ROOM_NOT_EXIST:nt.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendStreamUpdateInfo:{event:"/liveroom/send_stream_update_info",stream_update_type:it,stream_extra_info:it,stream_id:it,svr_env:it,send_seq:at,use_na:at},kZegoTaskLiveRoomGetCurrentStreamList:{event:"/liveroom/get_current_stream_list",room_id:it,room_sid_string:it,stream_seq:at,stream_size:at,stream_list:ot,use_ua:at,error:{kParamError:nt.errorCodeList.PUBLISHER_PARAM,NOT_LOGIN:nt.errorCodeList.NOT_LOGIN}},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:ot},kZegoTaskPlayNetFirstVideoFrame:{event:"/sdk/net_first_video_frame",webrtc_sid:at,fft_consumed:ot,resource_type:it,reliability:at,push_consumed:at,prepare_recv_consumed:at,connected_consumed:at,protocol:it,biz_product:at,dev_changed:lt},kZegoTaskPlayNetFirstAudioFrame:{event:"/sdk/net_first_audio_frame",webrtc_sid:at,fft_consumed:ot,resource_type:it,reliability:at,push_consumed:at,prepare_recv_consumed:at,connected_consumed:at,protocol:it,biz_product:at,dev_changed:lt},kZegoAppLifeCycle:{event:"/app/lifecycle",state:it},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:nt.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe",net_quality:at,node_list:st},kZegoNetProbeResult:{event:"/sdk/net_probe_result",is_switch:lt,is_publish:lt,stream_id:it,result:at,node:it,net_quality:at,probe_net_quality:at},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache",files:ot},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCDNPlay:{event:"/cdn/play",protocol:it,tryidx:at,url:it,stop_reason:it,biz_product:at},kZegoTaskL3Play:{event:"/l3/play",protocol:it,tryidx:at,url:it,stop_reason:it,biz_product:at},kZegoTaskSrcChange:{event:"/sdk/play_src_changed",last_src:it,src:it,biz_product:at},kZegoPublishStreamResource:{event:"/publish/stream_resource",urls:st,try_cnt:at,is_center:lt},kZegoPublishServerConnect:{event:"/publish/server_connect",server_url:it,stream_type:it},kZegoPublishCreateOffer:{event:"/publish/create_offer",sdp:it,stream_type:it},kZegoPublishSetLocalSdp:{event:"/publish/set_local_sdp",sdp:it,stream_type:it},kZegoPublishCreateSession:{event:"/publish/create_session",sdp:it,gw_nodes:st,gw_nodes_ttl:at,gw_version:at,webrtc_sid:at},kZegoPublishSetRemoteSdp:{event:"/publish/set_remote_sdp",sdp:it,webrtc_sid:at},kZegoPublishIceConnected:{event:"/publish/ice_connected",webrtc_sid:at},kZegoRTCPublishEvent:{event:"/publish/rtc_publish_event",event_state:at,webrtc_sid:at},kZegoRTCPlayEvent:{event:"/rtc/play_event_message",event_state:at,webrtc_sid:at},kZegoRTCRecvCloseSession:{event:"/rtc/recv_close_session",err_info:ot},kZegoRTCRecvResetSession:{event:"/rtc/recv_reset_session"},kZegoRTCIceStateChanged:{event:"/rtc/ice_connection_state_changed",ice_state:it},kZegoPublishSendMediaDesc:{event:"/publish/send_media_desc",webrtc_sid:at},kZegoPublishRecvMediaDesc:{event:"/publish/recv_media_desc",sdp:it},kZegoPublishSendIceCandidate:{event:"/publish/send_ice_candidate",candidate_info:ot},kZegoPublishRecvIceCandidate:{event:"/publish/recv_ice_candidate",candidate_info:ot},kZegoRTCHB:{event:"/rtc/hb",error:{RTC_HB_ERROR:nt.errorCodeList.RTC_HB_ERROR}},kZCRecvRemoteStream:{event:"/rtc/recv_remote_stream"},kZegoPlayStreamResource:{event:"/play/stream_resource",urls:st,try_cnt:at,is_center:lt},kZegoPlayServerConnect:{event:"/play/server_connect",server_url:it,stream_type:it},kZegoPlayCreateOffer:{event:"/play/create_offer",sdp:it,stream_type:it},kZegoPlaySetLocalSdp:{event:"/play/set_local_sdp",sdp:it,stream_type:it},kZegoPlayCreateSession:{event:"/play/create_session",sdp:it,gw_nodes:st,gw_nodes_ttl:at,gw_version:at,webrtc_sid:at},kZegoPlaySetRemoteSdp:{event:"/play/set_remote_sdp",sdp:it,webrtc_sid:at},kZegoPlayIceConnected:{event:"/play/ice_connected",webrtc_sid:at},kZegoPlaySendMediaDesc:{event:"/play/send_media_desc",webrtc_sid:at},kZegoPlayRecvMediaDesc:{event:"/play/recv_media_desc",sdp:it},kZegoPlaySendIceCandidate:{event:"/play/send_ice_candidate",candidate_info:ot},kZegoPlayRecvIceCandidate:{event:"/play/recv_ice_candidate",candidate_info:ot},kZegoConnConnect:{event:"/zegoconn/connect"},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:at,proxy_link_sources:at,recv_time:at,connect_stream:at},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:at},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:at}},et.ZegoWechatLogEvent={kZMInitSetting:{event:"/sdk/init"},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:nt.errorCodeList.WX_GET_SETTING_FAIL},check_system:ot},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:nt.errorCodeList.STREAM_ID_NULL,kPublishParamError:nt.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:nt.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:nt.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:nt.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:nt.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:nt.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:nt.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:nt.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:nt.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:nt.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:ot,stream:ot,message:ot},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:nt.errorCodeList.STREAM_ID_NULL,kPlayParamError:nt.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:nt.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:nt.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:nt.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:nt.errorCodeList.REPEATED_PULL,kPlayStreamNotFound:nt.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayNetworkTimeoutError:nt.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:nt.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:nt.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:nt.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:nt.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:nt.errorCodeList.PLAYER_IS_PLAYING},playOption:ot,message:ot,session_id:ot,stream:ot,audio_activate:ot,video_activate:ot},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:nt.errorCodeList.PUBLISHER_PARAM},stream:ot,room_id:ot},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:nt.errorCodeList.PUBLISHER_PARAM},stream:ot},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:ot,update_stream:ot},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:ot}}},2367:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZEGO_WEBRTC_ACTION=void 0,function(rt){rt.SET_VIDEO_CONFIG="zc.svc",rt.SET_AUDIO_CONFIG="zc.sac",rt.REPLACE_TRACK="zc.rp",rt.SET_BEAUTY_EFFECT="zc.sbe",rt.ENABLE_STREAM="zc.es",rt.ENABLE_MIC_ONLY="zc.emo",rt.ACTIVATE_SEI_INSERT="zc.asi",rt.MUTE_PUBLISH_STREAM_VIDEO="zc.mpsv.0",rt.MUTE_PUBLISH_STREAM_AUDIO="zc.mpsa.0",rt.MUTE_MIC="zc.mm",rt.MUTE_PLAY_STREAM_VIDEO="zc.mpsv.1",rt.MUTE_PLAY_STREAM_AUDIO="zc.mpsa.1",rt.ADD_TRACK="zc.at",rt.REMOVE_TRACK="zc.rt",rt.HANDLE_TRACK="zc.ht"}(et.ZEGO_WEBRTC_ACTION||(et.ZEGO_WEBRTC_ACTION={}))},4495:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ht){for(var ft,gt=1,vt=arguments.length;gt<vt;gt++)for(var yt in ft=arguments[gt])Object.prototype.hasOwnProperty.call(ft,yt)&&(ht[yt]=ft[yt]);return ht},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(ht,ft,gt,vt){return new(gt||(gt=Promise))(function(yt,mt){function Et(Tt){try{Ct(vt.next(Tt))}catch(wt){mt(wt)}}function bt(Tt){try{Ct(vt.throw(Tt))}catch(wt){mt(wt)}}function Ct(Tt){var wt;Tt.done?yt(Tt.value):(wt=Tt.value,wt instanceof gt?wt:new gt(function(Rt){Rt(wt)})).then(Et,bt)}Ct((vt=vt.apply(ht,ft||[])).next())})},it=this&&this.__generator||function(ht,ft){var gt,vt,yt,mt,Et={label:0,sent:function(){if(1&yt[0])throw yt[1];return yt[1]},trys:[],ops:[]};return mt={next:bt(0),throw:bt(1),return:bt(2)},typeof Symbol=="function"&&(mt[Symbol.iterator]=function(){return this}),mt;function bt(Ct){return function(Tt){return function(wt){if(gt)throw new TypeError("Generator is already executing.");for(;Et;)try{if(gt=1,vt&&(yt=2&wt[0]?vt.return:wt[0]?vt.throw||((yt=vt.return)&&yt.call(vt),0):vt.next)&&!(yt=yt.call(vt,wt[1])).done)return yt;switch(vt=0,yt&&(wt=[2&wt[0],yt.value]),wt[0]){case 0:case 1:yt=wt;break;case 4:return Et.label++,{value:wt[1],done:!1};case 5:Et.label++,vt=wt[1],wt=[0];continue;case 7:wt=Et.ops.pop(),Et.trys.pop();continue;default:if(yt=Et.trys,!((yt=yt.length>0&&yt[yt.length-1])||wt[0]!==6&&wt[0]!==2)){Et=0;continue}if(wt[0]===3&&(!yt||wt[1]>yt[0]&&wt[1]<yt[3])){Et.label=wt[1];break}if(wt[0]===6&&Et.label<yt[1]){Et.label=yt[1],yt=wt;break}if(yt&&Et.label<yt[2]){Et.label=yt[2],Et.ops.push(wt);break}yt[2]&&Et.ops.pop(),Et.trys.pop();continue}wt=ft.call(ht,Et)}catch(Rt){wt=[6,Rt],vt=0}finally{gt=yt=0}if(5&wt[0])throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}([Ct,Tt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.AdvancedModule=et.TRACER_LEVEL=void 0;var st,at=rt(2367),lt=rt(5098),ct=rt(8706),pt=rt(608);(function(ht){ht[ht.I=0]="I",ht[ht.H=10]="H",ht[ht.M=100]="M",ht[ht.L=1e3]="L"})(st=et.TRACER_LEVEL||(et.TRACER_LEVEL={}));var ut=function(){function ht(ft,gt,vt,yt){this.logger=ft,this.dataReport=gt,this.streamCenter=vt,this.stateCenter=yt,this.screenShotReady=!1}return ht.prototype.setVideoConfig=function(ft,gt){var vt=this;return this.logger.info(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" call"),new Promise(function(yt,mt){var Et=ct.ZegoRTCLogEvent.kZegoSetVideoConfig.error,bt=Et.kLocalStreamError,Ct=Et.kParamError,Tt=vt.getSpan(ft,ct.ZegoRTCLogEvent.kZegoSetVideoConfig.event),wt=nt({},gt);gt.width&&(wt.width=JSON.stringify(gt.width)),gt.height&&(wt.height=JSON.stringify(gt.height)),gt.frameRate&&(wt.frameRate=JSON.stringify(gt.frameRate)),Tt.setAttributes({video_params:ct.ZegoRTCLogEvent.kZegoSetVideoConfig.video_params(wt)});var Rt,It,St=function(Pt){vt.stateCenter.reporter.setError(Tt,bt,Pt)};if(!(ft instanceof MediaStream))return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" localStream not found"),St("localStream not found"),void mt({errorCode:Ct.code,extendedData:Ct.message+" localStream no found"});if(!gt||typeof gt!="object"||Object.keys(gt).length==0)return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints wrong"),St("constraints wrong"),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.width&&typeof gt.width=="number"&&!vt.stateCenter.checkValidNumber(gt.width,0,7680))return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width integer number, range[0, 7680]"),St("constraints width integer number, range[1, 7680]"),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.width&&typeof gt.width=="object"){if(!(It=pt.ClientUtil.checkConstraintExtendWithMessage(gt.width,"width",0,7680)).result)return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width: "+It.message),St("constraints width: "+It.message),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"})}else if(gt.width&&typeof gt.width!="number"&&typeof gt.width!="object")return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width must be a number or an object. "),St("constraints width must be a number or an object."),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.height&&typeof gt.height=="number"&&!vt.stateCenter.checkValidNumber(gt.height,0,4320))return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height integer number, range[0, 4320]"),St(" constraints height integer number, range[0, 4320]"),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.height&&typeof gt.height=="object"){if(!(It=pt.ClientUtil.checkConstraintExtendWithMessage(gt.height,"height",0,4320)).result)return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height: "+It.message),St("constraints height: "+It.message),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"})}else if(gt.height&&typeof gt.height!="number"&&typeof gt.height!="object")return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height must be a number or an object. "),St(" constraints height must be a number or an object."),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.maxBitrate&&typeof gt.maxBitrate!="number")return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(Rt=" constraints maxBitrate is not a number")),St(Rt),void mt({errorCode:Ct.code,extendedData:Ct.message+Rt});if(gt.frameRate!==void 0&&typeof gt.frameRate!="number"&&typeof gt.frameRate!="object")return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(Rt=" constraints frameRate is not a number or an object")),St(Rt),void mt({errorCode:Ct.code,extendedData:Ct.message+Rt});if(typeof gt.frameRate=="number"&&!(gt.frameRate>0&&gt.frameRate%1==0))return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate must be positive integer number"),St("constraints frameRate must be positive integer number"),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});if(gt.frameRate&&typeof gt.frameRate=="object"&&!(It=pt.ClientUtil.checkConstraintExtendWithMessage(gt.frameRate,"frameRate")).result)return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate: "+It.message),St("constraints frameRate: "+It.message),void mt({errorCode:Ct.code,extendedData:Ct.message+" constraints wrong"});vt.setPublishStreamConstraints(ft,gt,Tt,function(Pt){Tt.setAttributes({error:Pt.errorCode,message:Pt.extendedData}),Tt.end(),yt(Pt)})})},ht.prototype.setAudioConfig=function(ft,gt){var vt=this;return this.logger.info(at.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" call"),new Promise(function(yt){var mt=vt.getSpan(ft,ct.ZegoRTCLogEvent.kZegoSetAudioConfig.event);if(mt.setAttributes({audio_params:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_params(gt)}),!(ft instanceof MediaStream))return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" localStream not found"),vt.stateCenter.reporter.setError(mt,ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kLocalStreamError),void yt({errorCode:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" localStream no found"});if(!gt||typeof gt!="object"||Object.keys(gt).length==0||gt.AEC!==void 0&&typeof gt.AEC!="boolean"||gt.AGC!==void 0&&typeof gt.AGC!="boolean"||gt.ANS!==void 0&&typeof gt.ANS!="boolean")return vt.logger.error(at.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" constraints wrong"),vt.stateCenter.reporter.setError(mt,ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError," constraints wrong"),void yt({errorCode:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" constraints wrong"});vt.setPublishStreamConstraints(ft,gt,mt,function(Et){mt.end(),yt(Et)})})},ht.prototype.enableStream=function(ft,gt){if(this.logger.info(at.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" call"),typeof gt.video!="boolean"&&typeof gt.audio!="boolean")return this.logger.error(at.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" option error"),!1;var vt=!0,yt=!0;return typeof gt.video=="boolean"&&(vt=this.enableCamera(ft,gt.video,gt.retain)),typeof gt.audio=="boolean"&&(yt=this.enableMicrophone(ft,gt.audio)),vt&&yt},ht.prototype.enableMicrophoneOnly=function(ft){if(this.logger.info(at.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY+" call"),typeof ft!="boolean")return!1;for(var gt=0;gt<this.streamCenter.previewStreamList.length;gt++)if(!this.streamCenter.previewStreamList[gt].enableMicrophoneOnly(ft,this.streamCenter))return this.logger.error("zsc.emo.0 previewer ".concat(gt," change mic mute state failed")),!1;return this.streamCenter.isMicEnabled=ft,!0},ht.prototype.replaceTrack=function(ft,gt,vt){return ot(this,void 0,void 0,function(){var yt,mt,Et;return it(this,function(bt){return yt=this.getSpan(ft,ct.ZegoRTCLogEvent.kZegoReplaceTrack.event),mt=ct.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError,ft instanceof MediaStream?gt&&gt instanceof MediaStreamTrack?(Et=this._replaceTrack(ft,gt,vt),yt.setAttributes({track_kind:ct.ZegoRTCLogEvent.kZegoReplaceTrack.track_kind(gt.kind)}),yt.end(),[2,Et]):(this.logger.error(at.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" mediastream track no found"),this.stateCenter.reporter.setError(yt,mt,"mediastream track no found"),[2,{errorCode:mt.code,extendedData:mt.message+" mediastream track no found"}]):(this.logger.error(at.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" localStream not found"),this.stateCenter.reporter.setError(yt,mt,"localStream not found"),[2,{errorCode:mt.code,extendedData:mt.message+" localStream no found"}])})})},ht.prototype.setPublishStreamConstraints=function(ft,gt,vt,yt){var mt=this;this.logger.info("zsc.spsc.0 constraints",JSON.stringify(gt));var Et=this.streamCenter.checkPreview(ft);if(!Et)return this.logger.error("zsc.spsc.0 preview no found"),void(yt&&yt({errorCode:lt.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:lt.errorCodeList.PUBLISH_NO_PREVIEW.message}));var bt=Et.videoTrack,Ct=Et.audioTrack,Tt=bt==null?void 0:bt.getSettings(),wt=!1,Rt=!1;if(bt&&(gt.width||gt.height||gt.frameRate||gt.videoQuality)&&(gt.videoQuality||(Et.mediaStreamConfig.videoQuality=4),wt=!0),gt.ANS===void 0&&gt.AGC===void 0&&gt.AEC===void 0||(Rt=!0),wt&&!bt)return this.logger.error("zsc.spsc.0 video track not found"),void(yt&&yt({errorCode:lt.errorCodeList.TRACK_NOT_FOUND.code,extendedData:lt.errorCodeList.TRACK_NOT_FOUND.message}));if(gt.video=!0,Rt&&(!Ct||Et.hasEmptyAudioTrack))return this.logger.error("zsc.spsc.0 audio track not found"),void(yt&&yt({errorCode:lt.errorCodeList.TRACK_NOT_FOUND.code,extendedData:lt.errorCodeList.TRACK_NOT_FOUND.message}));gt.audio=!0;var It,St=JSON.parse(JSON.stringify(Et.mediaStreamConfig)),Pt=Object.assign(Et.mediaStreamConfig,gt);Et.previewType=="screen"?(It=this.streamCenter.getScreenConstrains(Pt)).bitRate!==St.bitRate&&(gt.maxBitrate=It.bitRate):It=Et.getMediaStreamConstraints(Pt,!0),this.logger.info("zsc.spsc.0 applyConstraints ",JSON.stringify(It));var Ot=[];if(wt&&bt){var Ut={};Object.keys(It.video).forEach(function(At){Ut[At]=JSON.stringify(It.video[At])}),vt.setAttributes({video_conf:ct.ZegoRTCLogEvent.kZegoSetVideoConfig.video_conf(Ut)}),Ot.push(bt.applyConstraints(It.video))}var Bt=!0;Rt&&(Bt=(Ct==null?void 0:Ct.enabled)||!1,vt.setAttributes({audio_conf:ct.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_conf(It.audio)}),Ct==null||Ct.stop(),Ot.push(navigator.mediaDevices.getUserMedia({video:!1,audio:It.audio})));var xt=this.streamCenter.getPublishList(ft);xt.forEach(function(At){var Mt,Nt=At==null?void 0:At.publisher,$t=((Mt=Nt==null?void 0:Nt.peerConnection)===null||Mt===void 0?void 0:Mt.getSenders())||[];if($t.length>0&&gt.maxBitrate){var Ft=$t.filter(function(Yt){return Yt.track&&Yt.track.kind==="video"});Ft||mt.logger.error("zsc.spsc.0 video sender no found");var jt=Ft.length>1?Ft[1]:Ft[0]?Ft[0]:null;if(jt){var zt=jt.getParameters();zt.encodings||(zt.encodings=[{}]),zt.encodings[0].maxBitrate=1e3*gt.maxBitrate,Ot.push(jt.setParameters(zt))}else mt.logger.error("zsc.spsc.0 video sender no found")}else gt.maxBitrate&&(Et.videoInfo.bitRate=gt.maxBitrate)}),Ot.length>0?Promise.all(Ot).then(function(At){var Mt,Nt,$t=At[1];if(Rt){var Ft=(Nt=wt?At[1]:At[0]).getVideoTracks()[0];Ft==null||Ft.stop();var jt=Nt.getAudioTracks()[0];jt.enabled=Bt,$t=JSON.stringify(jt.getSettings()),Et.replacePreviewTrack(jt),Et.gainNode||Et.onAudioTrackChange(jt)}if(gt.maxBitrate){var zt=Et.videoInfo.bitRate!==gt.maxBitrate;Et.videoInfo.bitRate=gt.maxBitrate,xt.forEach(function(Kt){var er=Kt==null?void 0:Kt.publisher;er&&(zt&&mt.enVideoSpan(Kt.streamID,ct.ZegoRTCLogEvent.kZegoVideoEnBps.event,{bitrate:ct.ZegoRTCLogEvent.kZegoVideoEnBps.bitrate(gt.maxBitrate)}),er.videoInfo.bitRate=gt.maxBitrate)})}if(!((Mt=It==null?void 0:It.video)===null||Mt===void 0)&&Mt.frameRate){var Yt=It.video.frameRate;Et.videoInfo.frameRate=Yt,xt.forEach(function(Kt){var er=Kt==null?void 0:Kt.publisher;er&&(er.videoInfo.frameRate=Yt)})}xt.forEach(function(Kt){var er,ir,rr=(ir=(er=Kt.localStream)===null||er===void 0?void 0:er.getVideoTracks()[0])===null||ir===void 0?void 0:ir.getSettings();(Tt==null?void 0:Tt.width)===(rr==null?void 0:rr.width)&&(Tt==null?void 0:Tt.height)===(rr==null?void 0:rr.height)||mt.enVideoSpan(Kt.streamID,ct.ZegoRTCLogEvent.kZegoVideoEnSize.event,{w:ct.ZegoRTCLogEvent.kZegoVideoEnSize.w(rr==null?void 0:rr.width),h:ct.ZegoRTCLogEvent.kZegoVideoEnSize.h(rr==null?void 0:rr.height)}),(Tt==null?void 0:Tt.frameRate)!==(rr==null?void 0:rr.frameRate)&&mt.enVideoSpan(Kt.streamID,ct.ZegoRTCLogEvent.kZegoVideoEnFps.event,{fps:ct.ZegoRTCLogEvent.kZegoVideoEnFps.fps(rr==null?void 0:rr.frameRate)})}),mt.logger.info("zsc.spsc.0 set constraints success",$t),yt&&yt({errorCode:0,extendedData:""})}).catch(function(At){return ot(mt,void 0,void 0,function(){var Mt,Nt,$t,Ft,jt=this;return it(this,function(zt){switch(zt.label){case 0:return this.logger.error("zsc.spsc.0 fail reason ",At.name,At.toString()),Rt?(Mt=Et.getMediaStreamConstraints(St),this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ",JSON.stringify(Mt)),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:Mt.audio}).catch(function(Yt){jt.logger.error("zsc.spsc.0.1 setbackup fail "+Yt.name)})]):[3,2];case 1:(Nt=zt.sent())&&(($t=ft.getVideoTracks()[0])==null||$t.stop(),Ft=Nt.getAudioTracks()[0],Et.replacePreviewTrack(Ft),Et.gainNode||Et.onAudioTrackChange(Ft)),this.logger.info("zsc.spsc.0.1 setbackup suc "),zt.label=2;case 2:return yt&&yt({errorCode:lt.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"".concat(At.name," ").concat(At.constraint?"constraint:"+At.constraint:"")}),[2]}})})}):(this.logger.warn("zsc.spsc.0 constaints is no changes"),yt&&yt({errorCode:lt.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"constraints is no changes"}))},ht.prototype.useVideoDevice=function(ft,gt){var vt=this;return this.logger.info("zc.uvd.0 call"),new Promise(function(yt){var mt=vt.getSpan(ft,ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event);if(mt.setAttributes({device:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(gt)}),!(ft instanceof MediaStream))return vt.logger.error("zc.uvd.0 localStream not found"),vt.stateCenter.reporter.setError(mt,ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError),void yt({errorCode:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});if(typeof gt!="string")return vt.logger.error("zc.uvd.0 deviceID must be string"),vt.stateCenter.reporter.setError(mt,ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError," deviceID must be string"),void yt({errorCode:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});var Et=function(bt){mt.setAttributes({error:bt.errorCode,message:bt.extendedData}),mt.end(),vt.streamCenter.getPublishList(ft).forEach(function(Ct){var Tt,wt;Ct.cameraLabel=((wt=(Tt=Ct.publisher.previewer)===null||Tt===void 0?void 0:Tt.videoTrack)===null||wt===void 0?void 0:wt.label)||Ct.cameraLabel}),yt(bt)};vt.stateCenter.getDevices(function(bt){var Ct=bt.cameras.find(function(Tt){return Tt.deviceID==gt});if(!Ct)return vt.logger.error("zc.uvd.0 device is not found"),void Et({errorCode:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code,extendedData:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message});mt.setAttributes({device_name:ct.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device_name(Ct==null?void 0:Ct.deviceName)}),vt.switchDevice("video",ft,gt,Et)},function(bt){vt.logger.warn("zc.uvd.0 getDevices err:",bt),vt.switchDevice("video",ft,gt,Et)})})},ht.prototype.useAudioDevice=function(ft,gt){var vt=this;return this.logger.info("zc.uad.1 call"),new Promise(function(yt){var mt=vt.getSpan(ft,ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event);mt.setAttributes({device:ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(gt)});var Et=function(Ct,Tt){vt.logger.error("zc.uad.1 "+Tt);var wt=Ct;wt.message=wt.message+(Tt?" "+Tt:""),vt.stateCenter.reporter.setError(mt,Ct,Tt),yt({errorCode:wt.code,extendedData:wt.message})},bt=function(Ct){mt.setAttributes({error:Ct.errorCode,message:Ct.extendedData}),mt.end(),vt.streamCenter.getPublishList(ft).forEach(function(Tt){var wt;Tt.microLabel=((wt=ft.getAudioTracks()[0])===null||wt===void 0?void 0:wt.label)||Tt.microLabel}),yt(Ct)};ft instanceof MediaStream?typeof gt=="string"?vt.stateCenter.getDevices(function(Ct){var Tt=Ct.microphones.find(function(wt){return wt.deviceID==gt});if(!Tt)return vt.logger.error("zc.uad.1 device is not found"),void bt({errorCode:ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code,extendedData:ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message});mt.setAttributes({device_name:ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device_name(Tt==null?void 0:Tt.deviceName)}),vt.switchDevice("audio",ft,gt,bt)},function(Ct){vt.logger.warn("zc.uad.1 getDevices err:",Ct),vt.switchDevice("audio",ft,gt,bt)}):Et(ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError,"deviceID must be string"):Et(ct.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError,"localStream not found")})},ht.prototype.enableDualStream=function(ft){this.logger.info("zsc.eds call");var gt=this.streamCenter.checkPreview(ft);gt&&!gt.lowStream?navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&gt.previewType=="custom"?this.logger.error("zsc.eds can not support firefox"):this.streamCenter.checkPublish(ft)?this.logger.error("zsc.eds is publishing"):(gt.enableDualStream=!0,gt.createLowStream()):this.logger.error("zsc.eds preview no found")},ht.prototype.setLowStreamParameter=function(ft,gt){var vt=this.streamCenter.checkPreview(ft);if(vt){var yt=vt.videoInfo;gt.width&&yt.width&&gt.width>yt.width?this.logger.error("zsc.slsp.0 low stream width can not larger than high stream"):gt.height&&yt.height&&gt.height>yt.height?this.logger.error("zsc.slsp.0 low stream height can not larger than high stream"):gt.frameRate&&yt.frameRate&&gt.frameRate>yt.frameRate||gt.height&&yt.bitRate&&gt.bitRate>yt.bitRate||(vt.lowStreamConfig=Object.assign(vt.lowStreamConfig,gt))}else this.logger.error("zsc.slsp.0 preview no found")},ht.prototype.handleTrack=function(ft,gt,vt,yt,mt){var Et,bt,Ct;return ot(this,void 0,void 0,function(){var Tt,wt,Rt,It,St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt,zt,Yt,Kt,er=this;return it(this,function(ir){switch(ir.label){case 0:if(Tt=ft==="ADD",wt={errorCode:0,extendedData:""},!(gt instanceof MediaStream))return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream wrong"),mt({errorCode:lt.errorCodeList.INPUT_PARAM.code,extendedData:lt.errorCodeList.INPUT_PARAM.message}),[2];if(!(vt instanceof MediaStreamTrack))return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" parameter 2 type error"),mt({errorCode:lt.errorCodeList.INPUT_PARAM.code,extendedData:lt.errorCodeList.INPUT_PARAM.message}),[2];if(!(Rt=this.streamCenter.checkPreview(gt)))return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream no found"),mt&&mt({errorCode:lt.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:lt.errorCodeList.PUBLISH_NO_PREVIEW.message}),[2];if(vt.kind==="video"){if(!((Et=Rt.videoEffect)===null||Et===void 0)&&Et.enabled)return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" need to disable video beauty effect first"),mt&&mt({errorCode:lt.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2];if(Rt.enableDualStream)return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+(It=" can not add/remove track while dual stream enabled.")),mt&&mt({errorCode:lt.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:It}),[2]}return Rt.streamFromCanvas&&vt.kind==="video"?(this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" browser not support"),mt&&mt({errorCode:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):(St=vt.kind==="audio"&&this.stateCenter.engineConfig.keepAudioTrack&&Rt.hasEmptyAudioTrack,Pt=gt.getTracks().length>=2||gt.getTracks().find(function(rr){return rr.kind==vt.kind}),Tt&&Pt&&!St?(this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only stream which have one track and kind no exist can add track"),mt&&mt({errorCode:lt.errorCodeList.TRACK_CAN_NOT_ADD.code,extendedData:lt.errorCodeList.TRACK_CAN_NOT_ADD.message}),[2]):ft=="REMOVE"&&(gt.getTracks().length<=1||vt.kind==="video"&&Rt.hasEmptyAudioTrack||!gt.getTracks().find(function(rr){return rr.kind===vt.kind}))?(this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" can not remove track"),mt({errorCode:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):!(Ot=this.streamCenter.checkPublish(gt))||Ot.publisher.stateNego===5&&Ot.publisher.isUpdateSDP!=1?this.stateCenter.engineConfig.keepAudioTrack&&vt.kind==="audio"?(Tt?(this._replaceTrack(gt,vt,!1,!0),Rt.hasEmptyAudioTrack=!1):((Ut=Rt.getEmptyAudioTrack())&&this._replaceTrack(gt,Ut,!1,!0),Rt.hasEmptyAudioTrack=!0),yt(wt),[2]):(Bt=Rt.rtcViewer,xt=Rt,At=vt.kind=="video"?"videoTrack":"audioTrack",Ot?(Mt=Ot.publisher,(Nt=Ot.publisher.peerConnection)?(Mt.isUpdateSDP=!0,Mt.sideMediaConfig.isSEIStart&&vt.kind==="video"?(this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" replace sei blank track."),$t=void 0,Tt?[4,Mt.replacePublishedTrack(vt,!1,{handleTrack:ft})]:[3,2]):[3,5]):[2]):[3,14]):(this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" publish state wrong. "+"".concat(Ot.publisher.stateNego)),mt&&mt({errorCode:lt.errorCodeList.PUBLISHER_STATE_WRONG.code,extendedData:lt.errorCodeList.PUBLISHER_STATE_WRONG.message}),[2]));case 1:return $t=ir.sent(),[3,4];case 2:return Mt.sideMediaConfig.track?[4,Mt.replacePublishedTrack(Mt.sideMediaConfig.track,!1,{handleTrack:ft})]:[3,4];case 3:$t=ir.sent(),ir.label=4;case 4:return($t==null?void 0:$t.errorCode)===0||this.logger.warn(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" enable sei but not found video sender. error: ".concat(JSON.stringify($t))),[3,12];case 5:return vt.kind!=="audio"?[3,10]:(Mt.isUpdateSDP=!1,Tt?(xt.replacePreviewTrack(vt),Ft=xt.audioNodeQueue?(Ct=(bt=xt.audioNodeQueue)===null||bt===void 0?void 0:bt.destinationNode)===null||Ct===void 0?void 0:Ct.stream.getAudioTracks()[0]:vt,[4,Nt.getSenders().find(function(rr){return rr.track&&rr.track.kind==="audio"})]):[3,7]);case 6:return(jt=ir.sent())?jt.replaceTrack(Ft):Nt.addTrack(Ft,gt),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" add audio track. "),[3,9];case 7:return gt.removeTrack(vt),xt[At]=null,Bt&&Bt.setTrack(!1,null),[4,Nt.getSenders().find(function(rr){return rr.track&&rr.track.kind==="audio"})];case 8:(jt=ir.sent())&&jt.replaceTrack(null),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" remove audio track. "),ir.label=9;case 9:return yt(wt),[2];case 10:return[4,Nt.getSenders().find(function(rr){return rr.track&&rr.track.kind==vt.kind||rr.track===null})];case 11:if(jt=ir.sent(),Tt)jt?(jt.replaceTrack(vt),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender replace track "+vt.kind)):(Nt.addTrack(vt,gt),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" pc add track "+vt.kind));else{if(!jt)return this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender no found"),mt&&mt({errorCode:lt.errorCodeList.TRACK_NOT_FOUND.code,extendedData:lt.errorCodeList.TRACK_NOT_FOUND.message}),[2];try{jt.replaceTrack(null),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender replace null.")}catch(rr){this.logger.error(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+rr),mt&&mt({errorCode:lt.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:lt.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message+" "+rr})}}ir.label=12;case 12:return zt={},Yt=this.streamCenter.previewStreamList.find(function(rr){return rr.originVideoTrack===vt}),Yt=Yt||this.streamCenter.previewStreamList.find(function(rr){return rr.localStream.getTracks().find(function(lr){return lr==vt})}),Yt||this.logger.warn(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" track is not created by sdk"),zt=Yt&&Tt?Yt.videoInfo:{bitRate:50},this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" video info: ".concat(JSON.stringify(zt))),[4,Nt.createOffer({})];case 13:return Kt=ir.sent(),Mt.onCreateOfferSuccess(Kt,!0,zt,function(rr){return ot(er,void 0,void 0,function(){return it(this,function(lr){return rr!==0?mt&&mt({errorCode:lt.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:lt.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message}):(ft=="ADD"?(gt.addTrack(vt),xt[At]=vt,Bt&&Bt.setTrack(vt.kind=="video",vt,this.stateCenter.browser==="safari"),vt.kind=="video"&&vt.enabled==1?Mt.sendStreamStatus(0,Mt.mic_status,!0):vt.enabled==1&&Mt.sendStreamStatus(Mt.camera_status,0,!0),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" add track completely")):(vt.kind=="video"?Mt.sendStreamStatus(2,Mt.mic_status,!0):Mt.sendStreamStatus(Mt.camera_status,2,!0),gt.removeTrack(vt),xt[At]=null,Bt&&Bt.setTrack(vt.kind=="video",null),this.logger.info(at.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" remove track completely")),Rt.mediaStreamConfig.video=ft=="ADD",yt(wt)),[2]})})}),[3,15];case 14:Tt?(gt.addTrack(vt),xt[At]=vt,Bt&&Bt.setTrack(vt.kind=="video",vt)):(gt.removeTrack(vt),xt[At]=null,Bt&&Bt.setTrack(vt.kind=="video",null)),yt(wt),Rt.mediaStreamConfig.video=!!Tt,ir.label=15;case 15:return[2]}})})},ht.prototype.switchDevice=function(ft,gt,vt,yt){var mt=this,Et=this.streamCenter.checkPreview(gt);if(!Et)return this.logger.error("zsc.sd.0 preview no found"),void(yt&&yt({errorCode:lt.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:lt.errorCodeList.PUBLISH_NO_PREVIEW.message}));if(ft==="video"&&Et.mediaStreamConfig.video==0)return this.logger.error("zsc.sd.0 camera can not be changed when video is false"),void(yt&&yt({errorCode:lt.errorCodeList.VIDEO_DEVICE_FALSE.code,extendedData:lt.errorCodeList.VIDEO_DEVICE_FALSE.message}));if(ft==="audio"&&Et.mediaStreamConfig.audio==0)return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"),void(yt&&yt({errorCode:lt.errorCodeList.AUDIO_DEVICE_FALSE.code,extendedData:lt.errorCodeList.AUDIO_DEVICE_FALSE.message}));Et.mediaStreamConfig.videoInput!==vt&&delete Et.mediaStreamConfig.facingMode;var bt,Ct={};ft==="video"?(Ct.videoInput=vt,bt=Et.videoTrack):(Ct.audioInput=vt,bt=Et.audioTrack);var Tt=this.stateCenter.browser;this.logger.info("zsc.sd.0 browser "+Tt),Tt==="firefox"&&(bt==null||bt.stop());var wt=nt(nt({},Et.mediaStreamConfig),Ct),Rt=Et.getMediaStreamConstraints(wt),It=function(St,Pt){Pt.getTracks().forEach(function(Ot){if(Ot.kind===ft){var Ut=ft==="video",Bt=Ut?"videoTrack":"audioTrack",xt=Et[Bt];Ot.enabled=xt.enabled,Ut&&Et.lowStream&&Et.lowStream.getTracks().forEach(function(Mt){return Mt.stop()});var At=mt.streamCenter.getPublishList(gt);At.length>0&&(!Et.muteImage||Ot.enabled||!Ut)?At.map(function(Mt){return Mt.publisher}).forEach(function(Mt){Mt.replacePublishedTrack(Ot)}):Et&&Et.muteImage&&!Ot.enabled&&Ut?Et[Bt]=Ot:Et&&Et.replacePreviewTrack(Ot),xt&&xt.stop()}}),Et.restartSoundLevel()};ft=="audio"?Rt.video=!1:Rt.audio=!1,navigator.mediaDevices.getUserMedia(Rt).then(function(St){Object.assign(Et.mediaStreamConfig,Ct),It(0,St),mt.logger.info("zsc.sd.0 switch "+ft+" device success"),yt&&yt({errorCode:0,extendedData:""})},function(St){var Pt,Ot;ft=="video"?(Pt=Et.videoTrack)===null||Pt===void 0||Pt.stop():(Ot=Et.audioTrack)===null||Ot===void 0||Ot.stop(),mt.logger.warn("zsc.sd.0 switch "+ft+" device failed, stop last device and retry. ",St+""),navigator.mediaDevices.getUserMedia(Rt).then(function(Ut){Object.assign(Et.mediaStreamConfig,Ct),It(0,Ut),mt.logger.info("zsc.sd.0 swtich "+ft+" device success"),yt&&yt({errorCode:0,extendedData:""})},function(Ut){mt.logger.warn("zsc.sd.0 swtich "+ft+" device failed and recover last device. ",Ut+"");var Bt=Et.getMediaStreamConstraints(Et.mediaStreamConfig),xt=lt.errorCodeList.VIDEO_DEVICE_FALSE;ft==="audio"&&(xt=lt.errorCodeList.AUDIO_DEVICE_FALSE),navigator.mediaDevices.getUserMedia(Bt).then(function(At){It(0,At),mt.logger.info("zsc.sd.0 recover last "+ft+" device success"),yt&&yt({errorCode:xt.code,extendedData:xt.message+" "+JSON.stringify(Ut)})},function(At){mt.logger.error("zsc.sd.0 swtich "+ft+" device and recover failed, please recreate stream. ",At+""),yt&&yt({errorCode:xt.code,extendedData:xt.message+" "+JSON.stringify(At)})})})})},ht.prototype._replaceTrack=function(ft,gt,vt,yt){yt===void 0&&(yt=!1);var mt=this.streamCenter.checkPreview(ft),Et=this.streamCenter.getPublishList(ft);if(!mt)return this.logger.error("zc.rt.0 preview no found"),{errorCode:lt.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:lt.errorCodeList.PUBLISH_NO_PREVIEW.message};if(mt.streamFromCanvas&&gt.kind==="video")return this.logger.error("zc.rt.0 browser not support"),{errorCode:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:lt.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message};var bt=ft.getTracks().find(function(wt){return wt.kind===gt.kind});if(!yt&&(!bt||gt.kind==="audio"&&mt.hasEmptyAudioTrack))return this.logger.error("zc.rt.0 track no found"),{errorCode:lt.errorCodeList.TRACK_NOT_FOUND.code,extendedData:lt.errorCodeList.TRACK_NOT_FOUND.message};var Ct=this.streamCenter.soundLevelDelegate&&gt.kind==="audio";if(Et.length){var Tt=null;return Ct&&mt.stopSoundLevel(),Et.forEach(function(wt){var Rt;Tt=(Rt=wt.publisher)===null||Rt===void 0?void 0:Rt.replacePublishedTrack(gt,!1,{isTrackProcessedFromOriginalStream:vt})}),Ct&&mt.startSoundLevel(),Tt}return Ct&&mt.stopSoundLevel(),mt.replacePreviewTrack(gt,!1,{isTrackProcessedFromOriginalStream:vt}),Ct&&mt.startSoundLevel(),{errorCode:0,extendedData:""}},ht.prototype.enableMicrophone=function(ft,gt){var vt=this.streamCenter.checkPreview(ft);return vt?vt.enableMicrophone(gt,this.streamCenter):(this.logger.error("zsc.em.0 no preview"),!1)},ht.prototype.enableCamera=function(ft,gt,vt){var yt=this.streamCenter.checkPreview(ft);return yt?yt.enableCamera(gt,this.streamCenter,vt):(this.logger.error("zsc.ec.0 no preview"),!1)},ht.prototype.setDummyCaptureImagePath=function(ft,gt){var vt=this;return new Promise(function(yt,mt){var Et=vt.streamCenter.checkPreview(gt);if(!Et)return vt.logger.error("zc.sdcp.0 preview no found"),void yt(!1);if(typeof ft!="string")return vt.logger.error("zc.sdcp.0 filePath type error"),void yt(!1);var bt=new Image;bt.src=ft,bt.crossOrigin="anonymous",bt.onload=function(){Et.loadImgTimer&&clearTimeout(Et.loadImgTimer),Et.loadImgTimer=void 0,vt.logger.info("zc.sdcp.0 load file path success"),Et.muteImage=bt,yt(!0)},Et.loadImgTimer=setTimeout(function(){vt.logger.error("zc.sdcp.0 load img timeout"),yt(!1)},5e3)})},ht.prototype.enableAutoSwitchDevice=function(ft){this.stateCenter.autoSwitchDeviceSetting=nt({},ft)},ht.prototype.getSpan=function(ft,gt){var vt=this.streamCenter.checkPublish(ft);return this.stateCenter.reporter.createSpan(st.H,vt?{key:ct.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:vt.streamID}:{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},gt)},ht.prototype.enVideoSpan=function(ft,gt,vt){var yt=this.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:ft},{key:""},gt);yt.setAttributes(vt),yt.end()},ht}();et.AdvancedModule=ut},4378:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ht){for(var ft,gt=1,vt=arguments.length;gt<vt;gt++)for(var yt in ft=arguments[gt])Object.prototype.hasOwnProperty.call(ft,yt)&&(ht[yt]=ft[yt]);return ht},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(ht,ft,gt,vt){return new(gt||(gt=Promise))(function(yt,mt){function Et(Tt){try{Ct(vt.next(Tt))}catch(wt){mt(wt)}}function bt(Tt){try{Ct(vt.throw(Tt))}catch(wt){mt(wt)}}function Ct(Tt){var wt;Tt.done?yt(Tt.value):(wt=Tt.value,wt instanceof gt?wt:new gt(function(Rt){Rt(wt)})).then(Et,bt)}Ct((vt=vt.apply(ht,ft||[])).next())})},it=this&&this.__generator||function(ht,ft){var gt,vt,yt,mt,Et={label:0,sent:function(){if(1&yt[0])throw yt[1];return yt[1]},trys:[],ops:[]};return mt={next:bt(0),throw:bt(1),return:bt(2)},typeof Symbol=="function"&&(mt[Symbol.iterator]=function(){return this}),mt;function bt(Ct){return function(Tt){return function(wt){if(gt)throw new TypeError("Generator is already executing.");for(;Et;)try{if(gt=1,vt&&(yt=2&wt[0]?vt.return:wt[0]?vt.throw||((yt=vt.return)&&yt.call(vt),0):vt.next)&&!(yt=yt.call(vt,wt[1])).done)return yt;switch(vt=0,yt&&(wt=[2&wt[0],yt.value]),wt[0]){case 0:case 1:yt=wt;break;case 4:return Et.label++,{value:wt[1],done:!1};case 5:Et.label++,vt=wt[1],wt=[0];continue;case 7:wt=Et.ops.pop(),Et.trys.pop();continue;default:if(yt=Et.trys,!((yt=yt.length>0&&yt[yt.length-1])||wt[0]!==6&&wt[0]!==2)){Et=0;continue}if(wt[0]===3&&(!yt||wt[1]>yt[0]&&wt[1]<yt[3])){Et.label=wt[1];break}if(wt[0]===6&&Et.label<yt[1]){Et.label=yt[1],yt=wt;break}if(yt&&Et.label<yt[2]){Et.label=yt[2],Et.ops.push(wt);break}yt[2]&&Et.ops.pop(),Et.trys.pop();continue}wt=ft.call(ht,Et)}catch(Rt){wt=[6,Rt],vt=0}finally{gt=yt=0}if(5&wt[0])throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}([Ct,Tt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.signal=et.publisher=et.publishModule=et.playModule=et.preview=et.streamHandler=et.zegoWebRTC=et.ENUM_PUBLISH_STREAM_STATE=et.ENUM_STREAM_CMD_PRI=et.ENUM_STREAM_SUB_CMD=et.TRACER_LEVEL=et.PROTO_VERSION=void 0;var st,at=rt(2367),lt=rt(5098),ct=rt(8706),pt=rt(7248);function ut(ht,ft){return ht&&ht.readyState==="live"?ht.enabled===!0?0:ht.kind==="video"&&ft==="firefox"?2:20:2}et.PROTO_VERSION="2.22.0",function(ht){ht[ht.I=0]="I",ht[ht.H=10]="H",ht[ht.M=100]="M",ht[ht.L=1e3]="L"}(st=et.TRACER_LEVEL||(et.TRACER_LEVEL={})),et.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},et.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},et.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},et.zegoWebRTC={mutePublishStreamVideo:function(ht,ft,gt){this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" call");var vt=this.rtcModules.advancedModule.getSpan(ht,ct.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.event);if(typeof ft!="boolean"||gt!==void 0&&typeof gt!="boolean")return this.logger.error(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" option error"),!1;var yt=this.rtcModules.advancedModule.enableStream(ht,{video:!ft,retain:gt});return vt.setAttributes({mute_type:ct.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.mute_type(ft?1:0),retain:ct.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.retain(gt)}),vt.end(),this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" end"),yt},mutePublishStreamAudio:function(ht,ft){this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" call");var gt=this.rtcModules.advancedModule.getSpan(ht,ct.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.event);if(typeof ft!="boolean")return this.logger.error(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" option error"),!1;var vt=this.rtcModules.advancedModule.enableStream(ht,{audio:!ft});return gt.setAttributes({mute_type:ct.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.mute_type(ft?1:0)}),gt.end(),this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" end"),vt},mutePlayStreamVideo:function(ht,ft){this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" call "+ht+" "+ft);var gt=this.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:ht},{key:""},ct.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.event);gt.setAttributes({mute_type:ct.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.mute_type(ft?1:0)});var vt=this.rtcModules.playModule.mutePlayStream(ht,"video",ft);return gt.end(),this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" end"),vt},mutePlayStreamAudio:function(ht,ft){this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+" call "+ht+" "+ft);var gt=this.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:ht},{key:""},ct.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.event);gt.setAttributes({mute_type:ct.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.mute_type(ft?1:0)});var vt=this.rtcModules.playModule.mutePlayStream(ht,"audio",ft);return gt.end(),this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+"end"),vt},muteMicrophone:function(ht){this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_MIC+" call");var ft=this.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoEnableMic.event);if(typeof ht!="boolean")return this.logger.error(at.ZEGO_WEBRTC_ACTION.MUTE_MIC+" option error"),this.stateCenter.reporter.setError(ft,lt.errorCodeList.INPUT_PARAM),!1;var gt=this.rtcModules.advancedModule.enableMicrophoneOnly(!ht),vt=Object.keys(this.streamCenter.publisherList).map(function(yt){return{stream_id:yt}});return ft.setAttributes({enable:ct.ZegoRTCLogEvent.kZegoEnableMic.enable(!ht),stream_list:ct.ZegoRTCLogEvent.kZegoEnableMic.stream_list(vt)}),ft.end(),this.logger.info(at.ZEGO_WEBRTC_ACTION.MUTE_MIC+" end"),gt},activateSEIInsert:function(ht){var ft=ht.stream,gt=ht.action,vt=ht.infoType,yt=this.rtcModules.advancedModule.getSpan(ht.stream,ct.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.event);yt.setAttributes({action:ct.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.action(ht.action),info_type:ct.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.info_type(ht.infoType)});var mt=this.rtcModules.publishModule.activateSEIInsert(ft,gt,vt);return yt.end(),mt},getAudioInfo:function(ht,ft,gt){if(!ht)return this.logger.error("localStream is empty!"),!1;var vt=nt({},gt);return new pt.MediaUtil(this.ac,vt).connectToSource(ht,function(yt){ft(yt)})},startRecord:function(ht){var ft=this,gt=this.streamCenter.checkPreview(ht);if(gt){var vt=ht.clone(),yt=vt.getAudioTracks();yt.length>0&&gt.hasEmptyAudioTrack&&yt.forEach(function(Et){vt.removeTrack(Et)}),this.recordedBlobs=[];var mt={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(mt.mimeType)||(mt={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(mt.mimeType)||(mt={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(mt.mimeType)||(mt={mimeType:"video/webm"},MediaRecorder.isTypeSupported(mt.mimeType)||(mt={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(vt,mt)}catch(Et){return void this.logger.error("Exception while creating ZegoMediaRecorder:",Et)}this.mediaRecorder.onstop=function(Et){ft.logger.warn("Recorder stopped: "+Et)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)}else this.logger.error("stream is not from zego!")},stopRecord:function(){this.mediaRecorder?this.mediaRecorder.stop():this.logger.warn("please invoke startRecord first")},resumeRecord:function(){this.mediaRecorder?this.mediaRecorder.resume():this.logger.warn("please invoke startRecord first")},pauseRecord:function(){this.mediaRecorder?this.mediaRecorder.pause():this.logger.warn("please invoke startRecord first")},saveRecord:function(ht){if(this.mediaRecorder&&this.recordedBlobs){var ft=new Blob(this.recordedBlobs,{type:"video/webm"}),gt=window.URL.createObjectURL(ft),vt=document.createElement("a");vt.style.display="none",vt.href=gt,vt.download=ht+".webm",document.body.appendChild(vt),vt.click(),setTimeout(function(){document.body.removeChild(vt),window.URL.revokeObjectURL(gt)},100)}else this.logger.warn("please invoke startRecord first")},handleDataAvailable:function(ht){ht.data&&ht.data.size>0&&this.recordedBlobs.push(ht.data)},addTrack:function(ht,ft){var gt=this;return new Promise(function(vt,yt){gt.logger.info(at.ZEGO_WEBRTC_ACTION.ADD_TRACK+" call"),gt.rtcModules.advancedModule.handleTrack("ADD",ht,ft,vt,yt)})},removeTrack:function(ht,ft){var gt=this;return new Promise(function(vt,yt){gt.logger.info(at.ZEGO_WEBRTC_ACTION.REMOVE_TRACK+" call"),gt.rtcModules.advancedModule.handleTrack("REMOVE",ht,ft,vt,yt)})},enableCameraCapturing:function(ht,ft){return ft===void 0&&(ft=!0),ot(this,void 0,void 0,function(){var gt,vt,yt,mt;return it(this,function(Et){return gt=this.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoEnableCamera.event),(vt=this.streamCenter.checkPreview(ht))?(yt=this.streamCenter.getPublishList(ht),mt=yt.map(function(bt){return{stream_id:bt.streamID}}),gt.setAttributes({enable:ct.ZegoRTCLogEvent.kZegoEnableCamera.enable(ft),stream_list:ct.ZegoRTCLogEvent.kZegoEnableCamera.stream_list(mt)}),gt.end(),[2,vt.enableCameraCapturing(ft)]):(this.logger.error("zsc.ecc no preview"),this.stateCenter.reporter.setError(gt,lt.errorCodeList.PUBLISH_NO_PREVIEW),[2,!1])})})}},et.streamHandler={},et.preview={enableCamera:function(ht,ft,gt){var vt,yt,mt,Et=this;if(!this.localStream||this.localStream.getVideoTracks().length==0)return this.logger.error("zp.ec.2 video track no found"),!1;var bt,Ct=this.videoTrack;if(!ht&&this.muteImage){var Tt=document.createElement("canvas");Tt.width=this.muteImage.width,Tt.height=this.muteImage.height;var wt=Tt.getContext("2d");this.muteImageAnID=setInterval(function(){wt.drawImage(Et.muteImage,0,0)},100),bt=Tt.captureStream().getVideoTracks()[0],this.localStream.removeTrack(this.localStream.getVideoTracks()[0]),this.localStream.addTrack(bt),this.rtcViewer&&this.rtcViewer.setVideo(bt)}else ht&&this.muteImage&&(!((vt=this==null?void 0:this.videoEffect)===null||vt===void 0)&&vt.enabled?this.replacePreviewTrack(this.videoEffect.output,!0):this.replacePreviewTrack(this.videoTrack));var Rt=this.stateCenter.browser;if(gt&&!ht||!Ct){if(gt&&!ht)if(!((yt=this.videoEffect)===null||yt===void 0)&&yt.enabled)this.logger.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on");else{var It=this.cloneVideoTrack;this.cloneVideoTrack=this.videoTrack.clone(),this.cloneVideoTrack.enabled=!0,this.replacePreviewTrack(this.cloneVideoTrack,!1,{retainTrack:!0}),It&&It.stop()}}else if(Ct.enabled=ht,Rt==="chrome"&&ht&&typeof Ct.getSettings().width!==void 0&&Ct.getSettings().width>0&&navigator.userAgent){var St=0,Pt=(navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1];if(Pt&&(St=parseInt(Pt.split(",")[0])),St&&St>=87&&St<92){var Ot=Ct.getSettings().width-1,Ut=Ct.getSettings().height-1,Bt=Ct.getSettings().frameRate;Ct.applyConstraints({width:Ot,height:Ut,frameRate:Bt}).then(function(){Ct.applyConstraints({width:Et.videoInfo.width,height:Et.videoInfo.height,frameRate:Bt})})}}Ct&&(Ct.enabled=ht),(mt=this.lowStream)===null||mt===void 0||mt.getVideoTracks().forEach(function(Mt){Mt.enabled=ht});var xt=ft.checkPreview(this.localStream),At=ft.getPublishList(this.localStream).map(function(Mt){return Mt.publisher});return At.length&&At.forEach(function(Mt){var Nt,$t=(Nt=Mt.peerConnection)===null||Nt===void 0?void 0:Nt.getSenders().filter(function(jt){var zt;return((zt=jt.track)===null||zt===void 0?void 0:zt.kind)==="video"});$t&&$t.forEach(function(jt){var zt;!ht&&Et.muteImage&&bt?jt==null||jt.replaceTrack(bt):ht&&(!((zt=Et==null?void 0:Et.videoEffect)===null||zt===void 0)&&zt.enabled&&Et.videoEffect.output?jt.track!==Et.videoEffect.output&&(jt==null||jt.replaceTrack(Et.videoEffect.output)):jt.track===Et.videoTrack||xt!=null&&xt.streamFromCanvas||jt==null||jt.replaceTrack(Et.videoTrack),Et.muteImageAnID&&clearInterval(Et.muteImageAnID))});var Ft=Et.muteImage&&!ht?0:ut(Et.videoTrack,Rt);Mt.sendStreamStatus(Ft,Mt.mic_status)}),this.isVideoEnabled=ht,this.logger.info("zp.ec.2 call success"),!0},enableMicrophone:function(ht,ft){if(!this.localStream)return this.logger.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach(function(vt){vt.enabled=ht}),this.audioTrack&&(this.audioTrack.enabled=ht&&ft.isMicEnabled);var gt=ft.getPublishList(this.localStream).map(function(vt){return vt.publisher});return gt.length&&gt.forEach(function(vt){vt.signal&&vt.sendStreamStatus(vt.camera_status,ht&&ft.isMicEnabled?0:2)}),this.isAudioEnabled=ht,this.logger.debug("zp.em.2 call success"),!0},replacePreviewTrack:function(ht,ft,gt){var vt;return ft===void 0&&(ft=!1),gt===void 0&&(gt={}),ot(this,void 0,void 0,function(){var yt,mt,Et,bt,Ct;return it(this,function(Tt){switch(Tt.label){case 0:return this.logger.info("zsc.rpt.0 call"),ht&&ht.kind&&this.localStream?(yt=(gt==null?void 0:gt.retainTrack)===!0,mt=ht.kind==="audio"?"audioTrack":"videoTrack",ft||!(!((vt=this.videoEffect)===null||vt===void 0)&&vt.enabled)||ht.kind!=="video"?[3,3]:yt?[3,2]:[4,this.videoEffect.setInput(ht)]):[2];case 1:Tt.sent(),Tt.label=2;case 2:return[3,4];case 3:ht.kind==="audio"&&this.audioNodeQueue&&!gt.isTrackProcessedFromOriginalStream?((Et=new MediaStream).addTrack(ht),bt=this.ac.createMediaStreamSource(Et),this.audioNodeQueue.replaceSource(bt)):ht.kind!=="audio"||this.audioNodeQueue||!this.destNode||gt.isTrackProcessedFromOriginalStream?(this.logger.info("zsc.rpt.0 replace local track"),(Ct=this.localStream.getTracks().find(function(wt){return wt.kind===ht.kind}))!==ht&&(Ct&&this.localStream.removeTrack(Ct),this.localStream.addTrack(ht)),this.localStream.addTrack(ht),this.rtcViewer&&(this.rtcViewer.setTrack(ht.kind==="video",ht),this.stateCenter.browser==="safari"&&this.rtcViewer.resume(!0)),!yt&&ht.kind==="video"&&this.enableDualStream&&this.createLowStream()):(this.createSrcNode(ht,!0).connect(this.destNode),this.logger.info("zsc.rpt.0 replace audio track with audio mix.")),Tt.label=4;case 4:return ft||yt||(this[mt]=ht,gt.handleTrack==="REMOVE"&&ht.kind==="video"&&(this.localStream.removeTrack(ht),this.rtcViewer&&this.rtcViewer.setTrack(!0,null),this[mt]=null)),this.logger.info("zsc.rpt.0 end"),[2]}})})},enableCameraCapturing:function(ht){return ot(this,void 0,void 0,function(){var ft,gt,vt,yt,mt,Et,bt,Ct,Tt,wt;return it(this,function(Rt){switch(Rt.label){case 0:return this.localStream&&this.videoTrack&&this.previewType==="camera"?(ft=this.streamCenter.getPublishList(this.localStream).map(function(It){return It.publisher}),ht?this.videoTrack.readyState!=="live"?[3,1]:(this.logger.warn("zp.ecc camera is already capturing"),[3,12]):[3,13]):(this.logger.error("zp.ecc not camera stream"),[2,!1]);case 1:gt=this.getMediaStreamConstraints(nt(nt({},this.mediaStreamConfig),{audio:!1})),Rt.label=2;case 2:return Rt.trys.push([2,11,,12]),[4,navigator.mediaDevices.getUserMedia(gt)];case 3:return vt=Rt.sent(),(yt=vt.getVideoTracks()[0]).enabled=this.isVideoEnabled,yt.enabled===!1&&this.logger.warn("zp.ecc video is not enabled"),!this.muteImage||this.isVideoEnabled?[3,4]:(this.videoTrack=yt,yt.enabled=!this.isVideoEnabled,[3,10]);case 4:if(!ft.length)return[3,9];mt=0,Rt.label=5;case 5:return mt<ft.length?[4,ft[mt].replacePublishedTrack(yt)]:[3,8];case 6:if(((Et=Rt.sent())==null?void 0:Et.errorCode)!==0)throw Et;Rt.label=7;case 7:return mt++,[3,5];case 8:return[3,10];case 9:this.replacePreviewTrack(yt),Rt.label=10;case 10:return[3,12];case 11:return bt=Rt.sent(),this.logger.error("zsc.ecc resume camera capturing failed. "+JSON.stringify(bt)),[2,!1];case 12:return[3,18];case 13:return Ct=this.videoTrack.enabled,Tt=this.stateCenter.browser,this.stateCenter.engineConfig.previewClearLastFrame?Tt==="safari"?[3,15]:(this.videoTrack.enabled=!1,[4,new Promise(function(It){setTimeout(function(){It(void 0)},200)})]):[3,16];case 14:Rt.sent(),Rt.label=15;case 15:return this.videoTrack.stop(),this.stopCanvasStreamTrack(),this.videoTrack.enabled=Ct,[3,17];case 16:this.videoTrack.stop(),this.stopCanvasStreamTrack(),Rt.label=17;case 17:ft.length&&(wt=this.muteImage&&!this.isVideoEnabled?0:ut(this.videoTrack,Tt),ft.forEach(function(It){It.sendStreamStatus(wt,It.mic_status)})),Rt.label=18;case 18:return[2,!0]}})})}},et.playModule={mutePlayStream:function(ht,ft,gt){var vt=this;return this.logger.info("zsc.mps.0 call "+ft+" "+gt),new Promise(function(yt,mt){if(typeof ht!="string"||ht=="")return vt.logger.error("zsc.mps.0 streamID must be string and not empty"),void mt(!1);if(typeof gt!="boolean")return vt.logger.error("zsc.mps.0 mute must be boolean"),void mt(!1);var Et=vt.streamCenter.playerList[ht];if(!Et)return vt.logger.error("zsc.mps.0 player not found"),void mt(!1);if(ft==="video"){if(Et.playOption&&Et.playOption.video===!1||Et.player&&Et.player.cameraStatus!==0)return vt.logger.error("zsc.mps.0 stream no contain video"),void mt(!1);Et.player.signal.ActivatePlayVideoStream(vt.stateCenter.getSeq(),Et.player.sessionId,gt,function(){var bt,Ct,Tt,wt;vt.logger.info("zsc.mps.0 suc"),Et.player.playMediaStatus.video=!gt;var Rt=ct.ZegoRTCLogEvent.kZegoPlayContentChanged,It=vt.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:ht},{key:""},Rt.event);It.setAttributes({webrtc_sid:Rt.webrtc_sid(Et.player.sessionId),video_activate:Rt.video_activate(!!Et.player.playMediaStatus.video),audio_activate:Rt.audio_activate(!!Et.player.playMediaStatus.audio),video_layer:Rt.video_layer(((Ct=(bt=Et.player)===null||bt===void 0?void 0:bt.playOption)===null||Ct===void 0?void 0:Ct.streamType)===2?-1:(wt=(Tt=Et.player)===null||Tt===void 0?void 0:Tt.playOption)===null||wt===void 0?void 0:wt.streamType)}),It.end(),yt(!0)},function(){vt.logger.error("zsc.mps.0 fail"),mt(!1)})}else if(ft==="audio"){if(Et.playOption&&Et.playOption.audio===!1||Et.player&&Et.player.micStatus!==0)return vt.logger.error("zsc.mps.0 stream no contain audio"),void mt(!1);Et.player.signal.ActivatePlayAudioStream(vt.stateCenter.getSeq(),Et.player.sessionId,gt,function(){vt.logger.info("zsc.mps.0 suc"),Et.player.playMediaStatus.audio=!gt;var bt=ct.ZegoRTCLogEvent.kZegoPlayContentChanged,Ct=vt.stateCenter.reporter.createSpan(st.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:ht},{key:""},bt.event);Ct.setAttributes({webrtc_sid:bt.webrtc_sid(Et.player.sessionId),video_activate:bt.video_activate(!!Et.player.playMediaStatus.video),audio_activate:bt.audio_activate(!!Et.player.playMediaStatus.audio)}),Ct.end(),yt(!0)},function(){vt.logger.error("zsc.mps.0 fail"),mt(!1)})}else mt(!1)})},setStreamAudioOutput:function(ht,ft){var gt=this;return!(ft==null||ft.length==0||!ht)&&(this.logger.debug("zsc.ssao.0 device "+ft),ht?ht.sinkId!=="undefined"?(ht.setSinkId(ft).then(function(){gt.logger.info("zsc.ssao.0 success device: "+ft)}).catch(function(vt){gt.logger.info("zsc.ssao.0 "+vt.name)}),!0):(this.logger.error("zsc.ssao.0 browser does not suppport"),!1):(this.logger.error("zsc.ssao.0 no localVideo"),!1))}},et.publishModule={activateSEIInsert:function(ht,ft,gt){gt===void 0&&(gt=0);var vt=this.streamCenter.checkPreview(ht);return vt?ft!==0&&ft!==1?(this.logger.error(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" value of “action” should be 0 or 1"),!1):(vt.activatesSEIConfig={action:ft,infoType:gt},this.streamCenter.getPublishList(ht).map(function(yt){return yt.publisher}).forEach(function(yt){yt.activateSEIInsert(ft,gt)}),!0):(this.logger.error(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" stream is not created"),!1)}},et.publisher={activateSEIInsert:function(ht,ft){var gt=this;return new Promise(function(vt,yt){return gt.signal?(gt.signal&&gt.signal.activateSEIInsert(gt.stateCenter.getSeq(),gt.sessionId,gt.peerID,ht,ft,function(mt,Et,bt){var Ct=!1;bt.result===0?(gt.logger.info(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" called success"),Ct=!0):bt.result===1?(gt.logger.error(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" "+bt.peer_id+" invalid param."),Ct=!1):bt.result===2&&(gt.logger.error(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" peer not exist"),Ct=!1),vt(Ct)},function(mt){mt===1&&gt.logger.error(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" request timeout")}),!1):vt(!1)})},replacePublishedTrack:function(ht,ft,gt){var vt;return ft===void 0&&(ft=!1),ot(this,void 0,void 0,function(){var yt,mt,Et,bt,Ct,Tt,wt,Rt;return it(this,function(It){switch(It.label){case 0:return mt=(yt=this.previewer)==null?void 0:yt.videoEffect,bt=yt["".concat(Et=ht.kind,"Track")],Ct=(vt=this.peerConnection)===null||vt===void 0?void 0:vt.getSenders().filter(function(St){var Pt;return((Pt=St.track)===null||Pt===void 0?void 0:Pt.kind)===Et}),Tt=this.stateCenter.browser,bt||gt.handleTrack?(wt=0,Rt=0,Et==="video"?(wt=ut(ft?bt:ht,Tt),Rt=this.mic_status):Et==="audio"&&(Rt=ut(ht,Tt),wt=this.camera_status),[4,yt.replacePreviewTrack(ht,ft,gt)]):[3,2];case 1:return It.sent(),Ct?(Ct.forEach(function(St,Pt){var Ot=Et==="audio"&&yt.destNode;if(Et==="audio"||ft||!(mt!=null&&mt.enabled))if(Et=="video"&&yt.lowStream&&Ct.length>1&&Pt==0)St.replaceTrack(yt.lowStream.getVideoTracks()[0]);else if(Et=="video"&&yt.streamFromCanvas){if(!yt.streamFromCanvasTrack){var Ut=yt.getStreamThroughCanvas(yt.localStream);yt.streamFromCanvasTrack=Ut.getVideoTracks()[0]}St.replaceTrack(yt.streamFromCanvas?yt.streamFromCanvasTrack:ht)}else Ot||St.replaceTrack(ht)}),this.sendStreamStatus(wt,Rt)):this.logger.info("zc.rt.1 replace remote track will work after stream published"),this.logger.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.logger.error("zc.rt.1 publisher track no found"),[2,{errorCode:lt.errorCodeList.TRACK_NOT_FOUND.code,extendedData:lt.errorCodeList.TRACK_NOT_FOUND.message}]}})})}},et.signal={activateSEIInsert:function(ht,ft,gt,vt,yt,mt,Et){this.logger.info(at.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" call "+ft),this.sendMessageWithCallback("ActivateSEIInsertReq",ht,ft,{peer_id:gt,action:vt,info_type:yt},mt,Et)}}},5098:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support handle track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},3824:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0});var nt=rt(4495),ot=rt(4378);et.default={type:"Advance",install:function(it,st,at,lt,ct,pt,ut,ht){for(var ft in Object.defineProperty(st.prototype,"initAdvance",{value:function(){this.advancedModule=new nt.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),ot.zegoWebRTC)Object.defineProperty(it.prototype,ft,{value:ot.zegoWebRTC[ft],writable:!1});for(var ft in ot.streamHandler)Object.defineProperty(at.prototype,ft,{value:ot.streamHandler[ft],writable:!1});for(var ft in ot.preview)Object.defineProperty(lt.prototype,ft,{value:ot.preview[ft],writable:!1});for(var ft in ot.playModule)Object.defineProperty(ct.prototype,ft,{value:ot.playModule[ft],writable:!1});for(var ft in ot.publishModule)Object.defineProperty(pt.prototype,ft,{value:ot.publishModule[ft],writable:!1});for(var ft in ot.publisher)Object.defineProperty(ut.prototype,ft,{value:ot.publisher[ft],writable:!1});for(var ft in ot.signal)Object.defineProperty(ht.prototype,ft,{value:ot.signal[ft],writable:!1})}}},8706:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoRTCLogEvent=void 0;var nt=rt(5098),ot=function(lt){return lt},it=function(lt){return lt},st=function(lt){return lt},at=function(lt){return lt};et.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZegoDevice:{event:"device"},kZegoTaskRoomContext:{event:"room_context"},kZMInitSetting:{event:"stream"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPlayStart:{event:"/sdk/start_play"},kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kLocalStreamError:nt.errorCodeList.LOCALSTREAM_WRONG},video_params:ot,video_conf:ot},kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kLocalStreamError:nt.errorCodeList.LOCALSTREAM_WRONG},audio_params:ot,audio_conf:ot},kZegoVideoEnSize:{event:"/sdk/api/publish_video_en_size",w:st,h:st},kZegoVideoEnBps:{event:"/sdk/api/publish_video_en_bps",bitrate:st},kZegoVideoEnFps:{event:"/sdk/api/publish_video_en_fps",fps:st},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:nt.errorCodeList.INPUT_PARAM},track_kind:it},kZegoTaskUseVideoDevice:{event:"/device/api/video_c",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:nt.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:nt.errorCodeList.LOCALSTREAM_WRONG},device:it,device_name:it},kZegoTaskUseAudioDevice:{event:"/device/api/audio_c",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:nt.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:nt.errorCodeList.LOCALSTREAM_WRONG},device:it,device_name:it},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",webrtc_sid:st,video_activate:at,audio_activate:at,video_layer:st},kZegoTaskMutePublishVideo:{event:"/sdk/mute_publish_video",mute_type:st,retain:at},kZegoTaskMutePublishAudio:{event:"/sdk/mute_publish_audio",mute_type:st},kZegoEnableMic:{event:"/device/enable_mic",enable:at,stream_list:ot},kZegoEnableCamera:{event:"/device/enable_camera",enable:at,stream_list:ot},kZegoTaskMutePlayVideo:{event:"/sdk/mute_play_video",mute_type:st},kZegoTaskMutePlayAudio:{event:"/sdk/mute_play_audio",mute_type:st},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kExtraInfoNullError:nt.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:nt.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:nt.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:nt.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:it,msg_length:it,room_id:it,room_sid_string:it,use_na:st},kZegoTaskActivateSEIInsert:{event:"/active/sei",action:st,info_type:st}}},7248:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.MediaUtil=void 0;var rt=function(){function nt(ot,it){var st=it.type,at=it.channels,lt=at===void 0?1:at,ct=it.bufferSize,pt=ct===void 0?0:ct,ut=it.sampleBit,ht=ut===void 0?16:ut,ft=it.sampleRate,gt=ft===void 0?44100:ft,vt=this;this.instant=0,this.slow=0,this.clip=0,this.context=ot,this.type=st,this.channels=lt,this.bufferSize=pt,this.sampleBit=ht,this.sampleRate=gt,this.script=ot.createScriptProcessor(pt,lt,lt),new Date().getTime(),this.script.addEventListener("audioprocess",function(yt){var mt,Et=yt.inputBuffer.getChannelData(0),bt=0,Ct=0;for(mt=0;mt<Et.length;++mt)bt+=Et[mt]*Et[mt],Math.abs(Et[mt])>.99&&(Ct+=1);if(vt.instant=Math.sqrt(bt/Et.length),vt.slow=.95*vt.slow+.05*vt.instant,vt.clip=Ct/Et.length,st==="pcm"||st==="wav"){for(var Tt=[],wt=0;wt<vt.channels;wt++)Tt.push(yt.inputBuffer.getChannelData(wt));vt.recorderBuffer(Tt)}}),st!=="pcm"&&st!=="wav"||this.initRecorderBuffer(st)}return nt.prototype.connectToSource=function(ot,it){try{this.mic=this.context.createMediaStreamSource(ot),this.mic.connect(this.script),this.script.connect(this.context.destination),it!==void 0&&it(null)}catch(st){console.error(st),it!==void 0&&it(st)}return this},nt.prototype.recorderBuffer=function(ot){this.worker.postMessage({command:"record",val:ot})},nt.prototype.initRecorderBuffer=function(ot){var it=this;this.worker=this.inlineWorker(function(){var st,at,lt,ct,pt,ut,ht=[];function ft(wt,Rt,It){for(var St=0;St<It.length;St++,Rt+=2){var Pt=Math.max(-1,Math.min(1,It[St]));wt.setInt16(Rt,Pt<0?32768*Pt:32767*Pt,!0)}}function gt(wt,Rt,It){for(var St=0;St<It.length;St++,Rt++){var Pt=Math.max(-1,Math.min(1,It[St])),Ot=Pt<0?128*Pt:127*Pt;wt.setInt8(Rt,Ot+=128)}}function vt(wt,Rt,It){for(var St=0;St<It.length;St++)wt.setUint8(Rt+St,It.charCodeAt(St))}function yt(wt,Rt){for(var It=new Float32Array(Rt.length/wt),St=0,Pt=0;St<It.length;)It[St]=Rt[Pt],Pt+=wt,St++;return It}function mt(wt,Rt,It){for(var St=new Float32Array(Rt*wt.length),Pt=0,Ot=0;Ot<It[0].length;Ot++)St.set(It[0][Ot],Pt),Pt+=It[0][Ot].length;return St}function Et(wt,Rt){for(var It=new Float32Array(wt.length+Rt.length),St=0;St<wt.length+Rt.length;St+=2)It[St]=wt[St/2>>0],It[St+1]=Rt[St/2>>0];return It}function bt(wt){var Rt,It;if(st==1)Rt=mt(ht[0],pt,ht),wt!=1&&(It=yt(wt,Rt));else if(st==2){var St=mt(ht[0],pt,ht),Pt=mt(ht[1],pt,ht);wt!=1?It=Et(yt(wt,St),yt(wt,Pt)):Rt=Et(St,Pt)}return wt!=1?It:Rt}function Ct(wt){var Rt=function(It,St){var Pt;St==8?Pt=It.length:St==16&&(Pt=It.length,Pt*=2);var Ot=new ArrayBuffer(Pt),Ut=new DataView(Ot);return St==8?gt(Ut,0,It):at==16&&ft(Ut,0,It),Ut}(bt(wt),at);self.postMessage({command:"exportPcmLive",val:Rt})}function Tt(wt){var Rt=function(It,St){var Pt;St==8?Pt=It.length:at==16&&(Pt=It.length,Pt*=2);var Ot=new ArrayBuffer(Pt+44),Ut=new DataView(Ot),Bt=lt,xt=at,At=st;return vt(Ut,0,"RIFF"),Ut.setUint32(4,36+Pt,!0),vt(Ut,8,"WAVE"),vt(Ut,12,"fmt "),Ut.setUint32(16,16,!0),Ut.setUint16(20,1,!0),Ut.setUint16(22,At,!0),Ut.setUint32(24,Bt,!0),Ut.setUint32(28,Bt*At*(xt/8),!0),Ut.setUint16(32,At*(xt/8),!0),Ut.setUint16(34,xt,!0),vt(Ut,36,"data"),Ut.setUint32(40,Pt,!0),at==8?gt(Ut,44,It):at==16&&ft(Ut,44,It),Ut}(bt(wt),at);self.postMessage({command:"exportWav",val:Rt})}this.onmessage=function(wt){switch(wt.data.command){case"init":st=(Rt=wt.data.val).sampleChannel,at=Rt.sampleBit,lt=Rt.sampleRate,ct=Rt.oldSampleRate,pt=Rt.bufferSize,ut=Rt.type;break;case"record":(function(It){for(var St=0;St<st;St++)ht[St]||(ht[St]=[]),ht[St].push(It[St]);var Pt=Math.round(ct/lt);ut==="pcm"?Ct(Pt):ut==="wav"&&Tt(Pt),ht=[]})(wt.data.val)}var Rt}}),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:ot}}),this.worker.onmessage=function(st){switch(st.data.command){case"exportPcmLive":it.onReceiveBuffer(st.data.val);break;case"exportWav":it.onReceiveWav(st.data.val)}}},nt.prototype.onReceiveBuffer=function(ot){},nt.prototype.onReceiveWav=function(ot){},nt.prototype.writeString=function(ot,it,st){for(var at=0;at<st.length;at++)ot.setUint8(it+at,st.charCodeAt(at))},nt.prototype.writeBuffer=function(ot,it,st){for(var at=0;at<st.byteLength;at++)ot.setUint8(it+at,st[at])},nt.prototype.concatenation=function(ot){for(var it=0,st=0;st<ot.length;++st)it+=ot[st].buffer.byteLength;var at=new Uint8Array(it),lt=0;for(st=0;st<ot.length;++st)at.set(new Uint8Array(ot[st].buffer),lt),lt+=ot[st].buffer.byteLength;return at},nt.prototype.encodeWave=function(ot){var it=this.concatenation(ot),st=it.byteLength,at=new ArrayBuffer(st+44),lt=new DataView(at),ct=this.sampleRate,pt=this.sampleBit,ut=this.channels;return this.writeString(lt,0,"RIFF"),lt.setUint32(4,36+st,!0),this.writeString(lt,8,"WAVE"),this.writeString(lt,12,"fmt "),lt.setUint32(16,16,!0),lt.setUint16(20,1,!0),lt.setUint16(22,ut,!0),lt.setUint32(24,ct,!0),lt.setUint32(28,ct*ut*(pt/8),!0),lt.setUint16(32,ut*(pt/8),!0),lt.setUint16(34,pt,!0),this.writeString(lt,36,"data"),lt.setUint32(40,st,!0),this.writeBuffer(lt,44,it),lt},nt.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},nt.prototype.inlineWorker=function(ot){if(Worker&&ot){var it=ot.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],st=URL.createObjectURL(new window.Blob([it],{type:"text/javascript"}));return new Worker(st)}return null},nt}();et.MediaUtil=rt},2523:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZEGO_WEBRTC_ACTION=void 0,function(rt){rt.PRELOAD_EFFECT="zc.pe.0",rt.PLAY_EFFECT="zc.pe.1",rt.PAUSE_EFFECT="zc.pe.2",rt.RESUME_EFFECT="zc.re",rt.STOP_EFFECT="zc.se",rt.UNLOAD_EFFECT="zc.ue",rt.AUDIO_EFFECT_PROCESS="zc.aep",rt.SET_EFFECT_VOLUME="zc.sev",rt.START_MIXING_AUDIO="zc.sma.0",rt.STOP_MIXING_AUDIO="zc.sma.1",rt.MIXING_BUFFER="zc.mb",rt.STOP_MIXING_BUFFER="zc.smb",rt.PUBLISHER_PLAY_EFFECT="zc.p.0.pe.0",rt.PUBLISHER_PAUSE_EFFECT="zc.p.0.pe.1",rt.PUBLISHER_RESUME_EFFECT="zc.p.0.re",rt.PUBLISHER_STOP_EFFECT="zc.p.0.se",rt.PUBLISHER_START_MIXING_AUDIO="zc.p.0.sma.0",rt.PUBLISHER_STOP_MIXING_AUDIO="zc.p.0.sma.1",rt.SET_MIXING_AUDIO_VOLUME="zc.smav",rt.PUBLISHER_MIXING_BUFFER="zc.p.0.mb",rt.PUBLISHER_SET_MIXING_AUDIO_VOLUME="zc.p.0.smav"}(et.ZEGO_WEBRTC_ACTION||(et.ZEGO_WEBRTC_ACTION={}))},3013:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.AudioBufferProcessor=void 0;var nt=rt(4853),ot=function(){function it(st,at,lt,ct,pt){this.logger=st,this.ac=at,this.localStream=lt,this.destination=ct,this.rtcViewer=pt,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return it.prototype.playEffect=function(st,at,lt,ct,pt){var ut=this;this.isMixAudio!==!0?this.audioBuffer?(this.startOffset=st||0,this.loop=at||!1,this.replace=lt||!1,this.effectEndedCallBack=pt,this.mixEffect(this.audioBuffer,function(){ut.buffSource.loop=!!at,st?ut.buffSource.start(0,st/1e3):ut.buffSource.start(0),ut.startTimes=Date.now(),ut.effectEndedListener=ut.effectEndedHandler.bind(ut),ut.buffSource.addEventListener("ended",ut.effectEndedListener),ct&&ct()})):this.logger.error("amu.pe.1 no audio buffer found"):this.logger.warn("amu.pe.1 audio is mixing")},it.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},it.prototype.playRealTimeEffect=function(st){var at=this;this.mixEffect(st,function(){at.buffSource&&at.buffSource.start(0),at.buffSource&&at.buffSource.addEventListener("ended",function(){at.audioBufferList.shift(),at.audioBufferList.length>0&&at.isMixAudio&&at.playRealTimeEffect(at.audioBufferList[0])})})},it.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},it.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.logger.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},it.prototype.mixEffect=function(st,at){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=st,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&at()):this.logger.error("amu.me.0 localStream can not be found")},it.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.destination);var st=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(st),this.rtcViewer&&this.rtcViewer.setAudio(st),this.isMixAudio=!0,!0},it.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},it.prototype.stopMixingAudio=function(st){return st===void 0&&(st=!1),this.paused?(this.logger.info("amu.sma.1 audioEffect is paused"),!st&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(this.destination),this.gainNode.disconnect(this.ac.destination),this.isMixAudio=!1,this.audioBufferList=[],!st&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},it.prototype.getProcess=function(){var st=Date.now();return this.paused&&(st=this.pauseTimes),(st-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},it.prototype.seekTo=function(st){st===void 0&&(st=0),this.startOffset=st,this.paused?this.resumeOffset=st:(this.stopMixingAudio(!0),this.playEffect(st,this.loop,this.replace,void 0,this.effectEndedCallBack))},it.prototype.mixingBuffer=function(st,at){var lt=this;this.isMixAudio!==!0||this.audioBufferList.length!=0||this.isMixingBuffer!=0?(this.ac.resume(),this.ac.decodeAudioData(st,function(ct){lt.audioBufferList.push(ct),lt.audioBufferList.length==1&&lt.playRealTimeEffect(lt.audioBufferList[0]),lt.isMixingBuffer=!0,at&&at()},function(ct){lt.logger.error("amu.mb.0 "+ct),at&&at({code:nt.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code,message:nt.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message+" "+ct})})):this.logger.error("amu.mb.0 audio is mixing")},it.prototype.setMixingAudioVolume=function(st){return this.gainNode?(this.gainNode.gain.value=st,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},it}();et.AudioBufferProcessor=ot},4194:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.AudioMix=void 0;var rt=function(){function nt(ot,it,st,at,lt,ct,pt){this.logger=ot,this.ac=it,this.localStream=st,this.mediaEleSources=at,this.browser=lt,this.destination=ct,this.rtcViewer=pt,this.replace=!1,this.isMixAudio=!1,this.audioCurrentTimer=null,this.audioResumedTimer=null}return nt.prototype.startMixingAudio=function(ot,it){if(this.replace=it||!1,this.isMixAudio)return this.logger.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.logger.error("amu.sma.0 localStream can not be found"),!1;if(ot.captureStream=ot.captureStream||ot.mozCaptureStream||ot.webkitCaptureStream,this.ac.resume(),this.gainNode=this.ac.createGain(),this.browser==="safari"){var st=this.mediaEleSources.find(function(lt){return lt.audio===ot});if(st)this.audioNode=st.node;else{var at=this.ac.createMediaElementSource(ot);this.audioNode=at,this.mediaEleSources.push({audio:ot,node:at})}this.getBrowserInfo(),this.audioResumedTimer=setInterval(function(){ot.currentTime=ot.currentTime+.45},6e3)}else this.audioNode=this.ac.createMediaStreamSource(ot.captureStream());return this.audioNode.connect(this.gainNode),this.replaceTrack()},nt.prototype.getBrowserInfo=function(){var ot,it={},st=navigator.userAgent.toLowerCase();ot=(st.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),it.sysVer=ot;var at=st.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return at&&(it.browser=at[1].replace(/version/,"'safari"),it.ver=at[2]),it},nt.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.destination);var ot=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(ot),this.rtcViewer&&this.rtcViewer.setAudio(ot),this.isMixAudio=!0,!0},nt.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioNode&&(this.audioNode.disconnect(this.gainNode),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(this.destination),this.isMixAudio=!1,!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},nt.prototype.setMixingAudioVolume=function(ot){return this.gainNode?(this.gainNode.gain.value=ot,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},nt}();et.AudioMix=rt},6459:function(_e,et,rt){var nt=this&&this.__awaiter||function(ct,pt,ut,ht){return new(ut||(ut=Promise))(function(ft,gt){function vt(Et){try{mt(ht.next(Et))}catch(bt){gt(bt)}}function yt(Et){try{mt(ht.throw(Et))}catch(bt){gt(bt)}}function mt(Et){var bt;Et.done?ft(Et.value):(bt=Et.value,bt instanceof ut?bt:new ut(function(Ct){Ct(bt)})).then(vt,yt)}mt((ht=ht.apply(ct,pt||[])).next())})},ot=this&&this.__generator||function(ct,pt){var ut,ht,ft,gt,vt={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return gt={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function yt(mt){return function(Et){return function(bt){if(ut)throw new TypeError("Generator is already executing.");for(;vt;)try{if(ut=1,ht&&(ft=2&bt[0]?ht.return:bt[0]?ht.throw||((ft=ht.return)&&ft.call(ht),0):ht.next)&&!(ft=ft.call(ht,bt[1])).done)return ft;switch(ht=0,ft&&(bt=[2&bt[0],ft.value]),bt[0]){case 0:case 1:ft=bt;break;case 4:return vt.label++,{value:bt[1],done:!1};case 5:vt.label++,ht=bt[1],bt=[0];continue;case 7:bt=vt.ops.pop(),vt.trys.pop();continue;default:if(ft=vt.trys,!((ft=ft.length>0&&ft[ft.length-1])||bt[0]!==6&&bt[0]!==2)){vt=0;continue}if(bt[0]===3&&(!ft||bt[1]>ft[0]&&bt[1]<ft[3])){vt.label=bt[1];break}if(bt[0]===6&&vt.label<ft[1]){vt.label=ft[1],ft=bt;break}if(ft&&vt.label<ft[2]){vt.label=ft[2],vt.ops.push(bt);break}ft[2]&&vt.ops.pop(),vt.trys.pop();continue}bt=pt.call(ct,vt)}catch(Ct){bt=[6,Ct],ht=0}finally{ut=ft=0}if(5&bt[0])throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}([mt,Et])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.AudioMixModule=void 0;var it=rt(2523),st=rt(6447),at=rt(8011),lt=function(){function ct(pt,ut,ht,ft,gt){this.logger=pt,this.dataReport=ut,this.stateCenter=ht,this.streamCenter=ft,this.ac=gt,this.buffer=null,this.blank=null,this.stateCenter.browser=="safari"&&this.blank==null&&this.buffer==null&&(this.ac.resume(),this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start())}return ct.prototype.preloadEffect=function(pt,ut,ht){if(this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT,{effectID:pt},{effectID:!0}))if(ut&&typeof ut=="string"){if(this.stateCenter.audioEffectBuffer[pt])return this.logger.warn(it.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" audio buffer already exists"),void(ht&&ht());this.logger.info(it.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" start preload effect"),this._preloadEffect(this.ac,pt,ut,ht)}else this.logger.error(it.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" params error")},ct.prototype.checkPreviewer=function(pt,ut,ht){ut===void 0&&(ut={});var ft=!!(ht!=null&&ht.effectID),gt=!!(ht!=null&&ht.previewer),vt=ut.effectID,yt=ut.streamID;if((ht!=null&&ht.streamID||yt)&&typeof yt!="string"&&!(yt instanceof MediaStream))return this.logger.error(pt+" stream type error"),!1;if(ft&&!vt)return this.logger.error(pt+" effectID required"),!1;if(vt&&typeof vt!="string")return this.logger.error(pt+" effectID type error"),!1;if(gt){var mt=this.streamCenter.getPreviewer(yt);return mt||(this.logger.error(typeof yt=="string"?pt+" "+yt+" stream is not publishing":pt+" stream doesn't exist"),!1)}return!0},ct.prototype.getEffectDuration=function(pt){if(!this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{effectID:pt},{effectID:!0}))return 0;var ut=this.stateCenter.audioEffectBuffer[pt];return ut?ut.duration?Math.floor(1e3*ut.duration):0:(this.logger.error(it.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),0)},ct.prototype.getEffectProgress=function(pt,ut){var ht=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:pt,effectID:ut},{effectID:!0,streamID:!0,previewer:!0});return typeof ht=="boolean"?0:this.getAudioManager(ht).getEffectProgress(ut)},ct.prototype.seekAudioEffect=function(pt,ut,ht){if(ht<0)return this.logger.error(it.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" param time error "),!1;var ft=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:pt,effectID:ut},{effectID:!0,streamID:!0,previewer:!0});return typeof ft!="boolean"&&this.getAudioManager(ft).seekAudioEffect(ut,ht)},ct.prototype.playEffect=function(pt,ut,ht){return nt(this,void 0,void 0,function(){var ft,gt,vt,yt=this;return ot(this,function(mt){switch(mt.label){case 0:return ft=pt.path,this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:pt.stream||pt.streamID,effectID:gt=pt.effectID},{streamID:!0,effectID:!0})?(vt=this.stateCenter.audioEffectBuffer[gt],ft?vt?(this.logger.warn(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new Promise(function(Et,bt){yt.preloadEffect(gt,ft,function(Ct){Ct?(yt.logger.error(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" preload audio effect failed"),bt(Ct)):Et(void 0)})})];case 2:mt.sent(),mt.label=3;case 3:return[3,5];case 4:if(!vt)return this.logger.error(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect doesn't exists"),[2];mt.label=5;case 5:return this._playEffect(pt,ut,ht),[2]}})})},ct.prototype.pauseEffect=function(pt,ut){return this._pauseEffect(pt,ut)},ct.prototype.resumeEffect=function(pt,ut){return this._resumeEffect(pt,ut)},ct.prototype.stopEffect=function(pt,ut){return this._stopEffect(pt,ut)},ct.prototype.unloadEffect=function(pt){return!!this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT,{effectID:pt},{effectID:!0})&&(delete this.stateCenter.audioEffectBuffer[pt],!0)},ct.prototype.setEffectVolume=function(pt,ut,ht){if(typeof ut!="number"||ut<0||ut>200)return this.logger.error(it.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" volume must be a number between 0 and 200"),!1;var ft=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME,{streamID:pt,effectID:ht},{streamID:!0,previewer:!0});return typeof ft!="boolean"&&this.getAudioManager(ft).setEffectVolume(ut/100,ht)},ct.prototype.startMixingAudio=function(pt,ut){return this.logger.info(it.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" call "+pt),pt?ut?(this.logger.info(it.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" end "+pt),Array.isArray(ut)&&ut.length!==0&&ut.every(function(ht){return ht instanceof HTMLMediaElement})?this._startMixingAudio(pt,ut):(this.logger.error(it.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" audio list param type error"),!1)):(this.logger.error(it.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" no audio"),!1):(this.logger.error(it.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" stream not found"),!1)},ct.prototype.stopMixingAudio=function(pt,ut){return pt?Array.isArray(ut)&&ut.length!==0||ut===void 0?this._stopMixingAudio(pt,ut):(this.logger.error(it.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" audio param type error"),!1):(this.logger.error(it.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" stream not found"),!1)},ct.prototype.mixingBuffer=function(pt,ut,ht,ft){this.logger.info(it.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" call streamID: "+JSON.stringify(pt)+" sourceID:"+ut),pt?ut&&typeof ut=="string"?(this._mixingBuffer(pt,ut,ht,ft),this.logger.info(it.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" end")):this.logger.error(it.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param source id format error"):this.logger.error(it.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param streamid format error")},ct.prototype.stopMixingBuffer=function(pt,ut){return this._stopMixingBuffer(pt,ut)},ct.prototype.setMixingAudioVolume=function(pt,ut,ht){return this.logger.info(it.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" call"),pt?typeof ut!="number"||ut<0||ut>200?(this.logger.error(it.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" volume must be a number between 0 and 200"),!1):ht&&ht instanceof HTMLMediaElement?this._setMixingAudioVolume(pt,ut,ht):(this.logger.error(it.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" no audio"),!1):(this.logger.error(it.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" stream not found"),!1)},ct.prototype.getSoundLevel=function(pt,ut,ht){this.logger.info("zc.gsl call");try{var ft=this.ac.createMediaStreamSource(pt),gt=new at.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);gt.initAudioWorklet(this.ac,ft),gt.onSoundLevelUpdate=function(vt){ut(vt)},this.stateCenter.audioStreamList[pt.id]={mic:ft,script:gt}}catch(vt){ht(vt)}this.logger.info("zc.gsl call success")},ct.prototype.stopSoundLevel=function(pt){this.logger.info("zc.ssl call");var ut=this.stateCenter.audioStreamList[pt.id];ut.mic.disconnect(),ut.script.destroy(),delete this.stateCenter.audioStreamList[pt.id]},ct.prototype._preloadEffect=function(pt,ut,ht,ft){var gt=this,vt=new XMLHttpRequest;vt.open("GET",ht,!0),vt.setRequestHeader("Range","none"),vt.responseType="arraybuffer",vt.onload=function(){if(vt.status==200||vt.status==304)pt.decodeAudioData(vt.response,function(mt){gt.logger.info("zc.pe.0 effect '".concat(ut,"' preload success")),gt.stateCenter.audioEffectBuffer[ut]=mt,ft&&ft()},function(mt){gt.logger.error("zc.pe.0 effect '".concat(ut,"' preload fail. ")+mt),ft&&ft(mt)});else{var yt=vt.statusText;gt.logger.error("zc.pe.0 effect '".concat(ut,"' preload fail.")+yt),ft&&ft(yt)}},vt.send()},ct.prototype._playEffect=function(pt,ut,ht){var ft=this.stateCenter.audioEffectBuffer[pt.effectID];if(ft){var gt=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:pt.stream||pt.streamID,effectID:pt.effectID},{streamID:!0,effectID:!0,previewer:!0});typeof gt!="boolean"&&this.getAudioManager(gt).playEffect(pt,ft,ut,ht)}else this.logger.error(it.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" no audio buffer found")},ct.prototype._pauseEffect=function(pt,ut){var ht=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT,{streamID:pt,effectID:ut},{streamID:!0,previewer:!0});return typeof ht!="boolean"&&this.getAudioManager(ht).pauseEffect(ut)},ct.prototype._resumeEffect=function(pt,ut){var ht=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.RESUME_EFFECT,{streamID:pt,effectID:ut},{streamID:!0,previewer:!0});return typeof ht!="boolean"&&this.getAudioManager(ht).resumeEffect(ut)},ct.prototype._stopEffect=function(pt,ut){var ht=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.STOP_EFFECT,{streamID:pt,effectID:ut},{streamID:!0,previewer:!0});return typeof ht!="boolean"&&this.getAudioManager(ht).stopEffect(ut)},ct.prototype._setMixingAudioVolume=function(pt,ut,ht){var ft=this.streamCenter.getPreviewer(pt);return ft?this.getAudioManager(ft).setMixingAudioVolume(ut/100,ht):(this.logger.error("zc.sma.2 publisher doesn't exist"),!1)},ct.prototype._startMixingAudio=function(pt,ut){var ht=this.streamCenter.getPreviewer(pt);return ht?this.getAudioManager(ht).startMixingAudio(ut):(this.logger.error(typeof pt=="string"?"zc.sma.0 "+pt+" stream is not publishing":"zc.sma.0 stream doesn't exist"),!1)},ct.prototype._stopMixingAudio=function(pt,ut){var ht=this.streamCenter.getPreviewer(pt);return ht?this.getAudioManager(ht).stopMixingAudio(ut):(this.logger.error("zc.sma.0 stream doesn't exist"),!1)},ct.prototype._mixingBuffer=function(pt,ut,ht,ft){var gt=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:pt,effectID:ut},{effectID:!0,streamID:!0,previewer:!0});typeof gt!="boolean"&&(ht instanceof ArrayBuffer?this.getAudioManager(gt).mixingBuffer(ut,ht,ft):this.logger.error("zc.mb.0 array buffer not found"))},ct.prototype._stopMixingBuffer=function(pt,ut){var ht=this.checkPreviewer(it.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:pt,effectID:ut},{effectID:!0,streamID:!0,previewer:!0});return typeof ht!="boolean"&&this.getAudioManager(ht).stopMixingBuffer(ut)},ct.prototype.getAudioManager=function(pt){var ut=pt.audioMixManager;return ut||(ut=new st.PreviewAudioManager(pt),pt.audioMixManager=ut),ut},ct}();et.AudioMixModule=lt},4853:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"}}},7526:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0});var nt=rt(6459);et.default={type:"AudioMix",install:function(ot){Object.defineProperty(ot.prototype,"initAudioMix",{value:function(){this.audioMixModule=new nt.AudioMixModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac)}})}}},6447:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.PreviewAudioManager=void 0;var nt=rt(2523),ot=rt(3013),it=rt(4194),st=function(){function at(lt){this.previewer=lt,this.audioDestNode=void 0,this.audioMixList=[],this.arrayBufferMap={},this.effectList=[],this.mediaEleSources=lt.streamCenter.mediaEleSources}return Object.defineProperty(at.prototype,"logger",{get:function(){return this.previewer.logger},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"localStream",{get:function(){return this.previewer.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"streamCenter",{get:function(){return this.previewer.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"ac",{get:function(){return this.previewer.ac},enumerable:!1,configurable:!0}),at.prototype.startMixingAudio=function(lt){var ct=this;return this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" call"),this.localStream?(lt.forEach(function(pt){if(ct.audioMixList.find(function(ft){return ft.media==pt}))ct.logger.warn(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" mix audio already exist");else if(ct.localStream){ct.streamCenter.soundLevelDelegate&&ct.previewer.stopSoundLevel();var ut=ct.createDestNode(),ht=new it.AudioMix(ct.logger,ct.ac,ct.localStream,ct.mediaEleSources,ct.previewer.stateCenter.browser,ut,ct.previewer.rtcViewer);ct.audioMixList.push({audioMix:ht,media:pt}),ht.startMixingAudio(pt),ct.streamCenter.soundLevelDelegate&&ct.previewer.startSoundLevel()}}),!0):(this.logger.error(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" localStream not found"),!1)},at.prototype.stopMixingAudio=function(lt){var ct=this;return this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO+" call"),lt?lt.forEach(function(pt){for(var ut=0;ut<ct.audioMixList.length;ut++)if(ct.audioMixList[ut].media==pt){ct.audioMixList[ut].audioMix.stopMixingAudio()&&ct.audioMixList.splice(ut--,1);break}}):(this.audioMixList.forEach(function(pt){return pt.audioMix.stopMixingAudio()}),this.audioMixList=[]),!0},at.prototype.setMixingAudioVolume=function(lt,ct){this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call");var pt=this.audioMixList.find(function(ut){return ut.media===ct});return pt?(pt.audioMix.setMixingAudioVolume(lt),this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call success"),!0):(this.logger.error(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" audio is not mixing"),!1)},at.prototype.playEffect=function(lt,ct,pt,ut){var ht=this;if(this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" call"),this.localStream)if(this.effectList.find(function(yt){return yt.effectID==lt.effectID&&yt.audioBuffer==ct}))this.logger.warn(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" effect already exist ");else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var ft=this.createDestNode(),gt=new ot.AudioBufferProcessor(this.logger,this.ac,this.localStream,ft,this.previewer.rtcViewer);gt.audioBuffer=ct;var vt={processor:gt,effectID:lt.effectID,audioBuffer:ct};this.effectList.push(vt),gt.playEffect(lt.playTime,lt.loop,!1,function(){pt&&pt()},function(){for(var yt=[],mt=0;mt<arguments.length;mt++)yt[mt]=arguments[mt];ht.effectList=ht.effectList.filter(function(Et){return Et!==vt}),ut&&ut.apply(void 0,yt)}),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" play effect "+lt.effectID+" success")}else this.logger.warn(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" stream not found")},at.prototype.pauseEffect=function(lt){var ct=this.effectList.find(function(pt){return pt.effectID==lt});if(ct)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),ct.processor.pauseEffect(),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" pause "+lt+" success");else{if(lt!==void 0)return this.logger.error(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach(function(pt){return pt.processor.pauseEffect()}),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},at.prototype.resumeEffect=function(lt){var ct=this.effectList.find(function(ut){return ut.effectID==lt});if(ct){this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var pt=ct.processor.resumeEffect();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" resume "+lt+" success"),pt}return lt===void 0?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach(function(ut){return ut.processor.resumeEffect()}),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" no effect found"),!1)},at.prototype.stopEffect=function(lt){var ct=this.effectList.find(function(pt){return pt.effectID==lt});if(ct)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),ct.processor.stopMixingAudio(),this.effectList=this.effectList.filter(function(pt){return pt!==ct}),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" pause "+lt+" success");else{if(lt!==void 0)return this.logger.error(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach(function(pt){return pt.processor.stopMixingAudio()}),this.effectList=[],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},at.prototype.setEffectVolume=function(lt,ct){var pt=this.effectList.find(function(ut){return ut.effectID==ct});if(pt)pt.processor.setMixingAudioVolume(lt),this.logger.info("zp.sev.0 set volume "+ct+" success");else{if(ct!==void 0)return this.logger.error("zp.sev.0 effect not found"),!1;this.effectList.forEach(function(ut){return ut.processor.setMixingAudioVolume(lt)})}return!0},at.prototype.mixingBuffer=function(lt,ct,pt){var ut=this;if(this.logger.info(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" call"),this.localStream)if(this.arrayBufferMap[lt])this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[lt].mixingBuffer(ct,function(){ut.streamCenter.soundLevelDelegate&&ut.previewer.startSoundLevel(),pt&&pt()});else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var ht=this.createDestNode(),ft=new ot.AudioBufferProcessor(this.logger,this.ac,this.localStream,ht,this.previewer.rtcViewer);this.arrayBufferMap[lt]=ft,ft.mixingBuffer(ct,function(){ut.streamCenter.soundLevelDelegate&&ut.previewer.startSoundLevel(),pt&&pt()})}},at.prototype.stopMixingBuffer=function(lt){if(lt&&this.arrayBufferMap[lt])return this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[lt].stopMixingBuffer(),delete this.arrayBufferMap[lt],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0;if(lt===void 0){for(var ct in this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap)this.arrayBufferMap[ct].stopMixingBuffer();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0}return this.logger.warn(nt.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" arrayBuffer no found"),!1},at.prototype.getEffectProgress=function(lt){var ct=this.effectList.find(function(pt){return pt.effectID==lt});return ct?ct.processor.getProcess():(this.logger.error(nt.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+"  effect not found"),0)},at.prototype.seekAudioEffect=function(lt,ct){var pt=this.effectList.find(function(ut){return ut.effectID==lt});return pt?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),pt.processor.seekTo(ct),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(nt.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),!1)},at.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},at.prototype.createDestNode=function(){var lt=null,ct=this.previewer.createDestNode(this.localStream);return this.previewer.audioNodeQueue||((lt=this.previewer.createSrcNode()).disconnect(),lt.connect(ct)),ct},at}();et.PreviewAudioManager=st},4897:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.DataChannel=void 0;var nt=rt(8835);et.DataChannel={type:"DataChannel",install:function(ot){Object.defineProperty(ot.prototype,"createRealTimeSequentialDataManager",{value:function(it){this.enableDataChannel(!0);var st=this.stateCenter.getRoomByRoomID(it);return st?st.dataChannelManager?null:(st.dataChannelManager=new nt.ZegoRealTimeSequentialDataManager(this,it),st.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(ot.prototype,"destroyRealTimeSequentialDataManager",{value:function(it){var st=this.stateCenter.roomList.find(function(at){return at.dataChannelManager==it});st&&(it.dataChannelManager.reset(),st.dataChannelManager=null)},writable:!1})}}},3504:function(_e,et){var rt=this&&this.__awaiter||function(it,st,at,lt){return new(at||(at=Promise))(function(ct,pt){function ut(gt){try{ft(lt.next(gt))}catch(vt){pt(vt)}}function ht(gt){try{ft(lt.throw(gt))}catch(vt){pt(vt)}}function ft(gt){var vt;gt.done?ct(gt.value):(vt=gt.value,vt instanceof at?vt:new at(function(yt){yt(vt)})).then(ut,ht)}ft((lt=lt.apply(it,st||[])).next())})},nt=this&&this.__generator||function(it,st){var at,lt,ct,pt,ut={label:0,sent:function(){if(1&ct[0])throw ct[1];return ct[1]},trys:[],ops:[]};return pt={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(pt[Symbol.iterator]=function(){return this}),pt;function ht(ft){return function(gt){return function(vt){if(at)throw new TypeError("Generator is already executing.");for(;ut;)try{if(at=1,lt&&(ct=2&vt[0]?lt.return:vt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,vt[1])).done)return ct;switch(lt=0,ct&&(vt=[2&vt[0],ct.value]),vt[0]){case 0:case 1:ct=vt;break;case 4:return ut.label++,{value:vt[1],done:!1};case 5:ut.label++,lt=vt[1],vt=[0];continue;case 7:vt=ut.ops.pop(),ut.trys.pop();continue;default:if(ct=ut.trys,!((ct=ct.length>0&&ct[ct.length-1])||vt[0]!==6&&vt[0]!==2)){ut=0;continue}if(vt[0]===3&&(!ct||vt[1]>ct[0]&&vt[1]<ct[3])){ut.label=vt[1];break}if(vt[0]===6&&ut.label<ct[1]){ut.label=ct[1],ct=vt;break}if(ct&&ut.label<ct[2]){ut.label=ct[2],ut.ops.push(vt);break}ct[2]&&ut.ops.pop(),ut.trys.pop();continue}vt=st.call(it,ut)}catch(yt){vt=[6,yt],lt=0}finally{at=ct=0}if(5&vt[0])throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}([ft,gt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.DataChannelListener=void 0;var ot=function(){function it(st,at){this.zegoWebRTC=st,this.roomID=at,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.logger=st.logger}return it.prototype.startBroadcasting=function(st,at){return rt(this,void 0,void 0,function(){var lt,ct,pt,ut;return nt(this,function(ht){switch(ht.label){case 0:return this.logger.info("dc.sb.0 call"),this.pubDataChannelList.includes(st)?(this.logger.error("dc.sb.0 datachannel already exist"),[2,!1]):(lt=this.zegoWebRTC.streamCenter.publisherList[st])&&lt.publisher.dataChannel?(this.pubDataChannelList.push(st),[2,!0]):lt&&!lt.publisher.dataChannel?(this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(ct=document.createElement("canvas"),pt=this,[4,this.zegoWebRTC.createStream({custom:{source:ct}})]);case 1:pt.broadcastStream=ht.sent(),ht.label=2;case 2:return(ut=this.zegoWebRTC.startPublishingStream(st,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(st),this.logger.info("dc.sb.0 end"),[2,ut]}})})},it.prototype.stopBroadcasting=function(st){this.logger.info("dc.sb.1 call"),this.pubDataChannelList=this.pubDataChannelList.filter(function(lt){return lt!==st});var at=this.zegoWebRTC.streamCenter.publisherList[st];return at?(at.room.roomID==this.roomID&&at.isDataChannel&&this.zegoWebRTC.stopPublishingStream(st),this.logger.info("dc.sb.1 end"),!0):(this.logger.error("dc.sb.1 datachannel no found"),!1)},it.prototype.sendRealTimeSequentialData=function(st,at){if(!at instanceof ArrayBuffer)return this.logger.error("dc.srsd data type wrong"),!1;var lt=this.zegoWebRTC.streamCenter.publisherList[st];return lt&&this.pubDataChannelList.includes(st)?this.sendBCMessage(lt.publisher,at):(this.logger.error("dc.srsd datachannel no found"),!1)},it.prototype.sendBCMessage=function(st,at){var lt;if(!st.dataChannelState)return!1;for(var ct=new Uint8Array(at),pt=0,ut=at.byteLength,ht=st.send_seq,ft=0,gt=new Date().getTime(),vt=0;ut>0;){ut>1151?vt=1141:(vt=ut,ft=1);var yt=new Uint8Array(vt+10);yt[0]=1,yt[1]=ft,yt[2]=st.send_seq>>8&255,yt[3]=255&st.send_seq,yt[4]=ht>>8&255,yt[5]=255&ht,yt[6]=gt>>24&255,yt[7]=gt>>16&255,yt[8]=gt>>8&255,yt[9]=255&gt;for(var mt=0;mt<vt;mt++)yt[mt+10]=ct[mt+pt];ut-=vt,pt+=vt,st.send_seq++,st.send_seq>=65536&&(st.send_seq=0),(lt=st.dataChannel)===null||lt===void 0||lt.send(yt)}return!0},it.prototype.startSubscribing=function(st,at){var lt,ct;return rt(this,void 0,void 0,function(){var pt,ut;return nt(this,function(ht){switch(ht.label){case 0:return this.logger.info("dc.ss.0 call"),this.subDataChannelList.includes(st)?(this.logger.error("dc.ss.0 datachannel already exist"),[2,!1]):(pt=this.zegoWebRTC.streamCenter.playerList[st])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(st,void 0,!0)];case 1:ht.sent(),pt=this.zegoWebRTC.streamCenter.playerList[st],ht.label=2;case 2:return(ut=pt.player).dataChannel?(!(!((lt=ut.onDataChannelList)===null||lt===void 0)&&lt.includes(this.onReceivedDataChannel.bind(this)))&&((ct=ut.onDataChannelList)===null||ct===void 0||ct.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(st),this.logger.info("dc.ss.0 end"),[2,!0]):(this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"),[2,!1])}})})},it.prototype.stopSubscribing=function(st){this.logger.info("dc.ss.1 call"),this.subDataChannelList=this.subDataChannelList.filter(function(lt){return lt!==st});var at=this.zegoWebRTC.streamCenter.playerList[st];return at?(at.room.roomID==this.roomID&&at.isDataChannel&&this.zegoWebRTC.stopPlayingStream(st),this.logger.info("dc.ss.1 end"),!0):(this.logger.error("dc.ss.1 datachannel no subscribe"),!1)},it.prototype.on=function(st,at){this.bindListener(st,at)},it.prototype.off=function(st,at){this.deleteListener(st,at)},it.prototype.bindListener=function(st,at){return this.listenerList[st]?typeof at!="function"?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(this.listenerList[st].indexOf(at)==-1&&this.listenerList[st].push(at),!0):(this.logger.error("dc.o.0 event "+st+" no found"),!1)},it.prototype.deleteListener=function(st,at){if(!this.listenerList[st])return this.logger.error("dc.o.1 listener no found"),!1;var lt=this.listenerList[st];return at?lt.splice(lt.indexOf(at),1):this.listenerList[st]=[],!0},it.prototype.actionListener=function(st){for(var at=this,lt=[],ct=1;ct<arguments.length;ct++)lt[ct-1]=arguments[ct];this.listenerList[st]&&this.listenerList[st].forEach(function(pt){try{setTimeout(function(){pt.apply(void 0,lt)},0)}catch(ut){at.logger.error("dc.al "+st+" "+ut)}})},it.prototype.onReceivedDataChannel=function(st,at,lt){this.actionListener("receiveRealTimeSequentialData",st,at,lt)},it.prototype.reset=function(){var st=this;for(var at in this.logger.info("dc.rs call"),this.pubDataChannelList.forEach(function(lt){var ct=st.zegoWebRTC.streamCenter.publisherList[lt];ct&&ct.room.roomID==st.roomID&&ct.isDataChannel&&st.zegoWebRTC.stopPublishingStream(lt)}),this.subDataChannelList.forEach(function(lt){var ct=st.zegoWebRTC.streamCenter.playerList[lt];ct&&ct.room.roomID==st.roomID&&ct.isDataChannel&&st.zegoWebRTC.stopPlayingStream(lt)}),this.listenerList)this.listenerList[at]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.logger.info("dc.rs end")},it}();et.DataChannelListener=ot},5906:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ht){for(var ft,gt=1,vt=arguments.length;gt<vt;gt++)for(var yt in ft=arguments[gt])Object.prototype.hasOwnProperty.call(ft,yt)&&(ht[yt]=ft[yt]);return ht},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.streamHandler=et.zegoWebRTC=et.TRACER_LEVEL=void 0;var ot,it=rt(817),st=rt(6145),at="2.22.0",lt=1e4,ct={};(function(ht){ht[ht.I=0]="I",ht[ht.H=10]="H",ht[ht.M=100]="M",ht[ht.L=1e3]="L"})(ot=et.TRACER_LEVEL||(et.TRACER_LEVEL={}));var pt={code:1005027,message:"mix stream input parameters are wrong"};function ut(ht,ft){var gt,vt,yt,mt,Et="",bt=it.errorCodeList;return ft.errorCode<2e9&&ft.errorCode>1e9?(yt={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",190:"MIXER_START_REQUEST_ERROR"},mt="MIXER_INNER_ERROR",(vt=ft.errorCode-lt)>1e9&&yt[vt-1e9]&&(mt=yt[vt-1e9]),gt=bt[Et=mt]):ft.errorCode<1e6&&(gt=ht.decodeServerError(ft.errorCode,ft.extendedData),Et=ht.getLiveRoomError(ft.errorCode,this.stateCenter.useNetAgent)),{reportErr:gt,actualError:bt[Et]}}et.zegoWebRTC={startMixerTask:function(ht){var ft=this;return new Promise(function(gt,vt){var yt=ft.stateCenter.reporter.createSpan(ot.H,{key:st.ZegoRTCLogEvent.kZMInitSetting.event},{key:st.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:ht.taskID},st.ZegoRTCLogEvent.kZegoTaskMixStart.event,!0),mt={errorCode:pt.code,extendedData:pt.message};if(ht!=null&&ht.inputList.find(function(Ct){return Ct.streamID==null&&(mt.extendedData=mt.extendedData+". streamID should be of string type",!0)}))return ft.stateCenter.reporter.setError(yt,pt),void vt(mt);ht.outputConfig&&ht.outputConfig.outputFps&&(ht.outputConfig.outputFPS=ht.outputConfig.outputFps);var Et=function(Ct){var Tt=ut(ft.stateCenter,Ct),wt=Tt.reportErr,Rt=Tt.actualError;Ct.errorCode===1005026&&yt.setAttributes({stop_reason:"UnmatchStreamId"}),ft.stateCenter.reporter.setError(yt,wt||Ct),ft.stateCenter.reporter.spanEnd({key:st.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:ht.taskID}),Rt&&(Ct.errorCode=Rt==null?void 0:Rt.code,Ct.extendedData=(Rt==null?void 0:Rt.message)||""),vt(Ct)},bt=ft.stateCenter.roomList[0];bt?bt.streamHandler.updateMixStream(ht,function(Ct){ft.stateCenter.reporter.spanEnd({key:st.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:ht.taskID}),gt(Ct)},Et):Et({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message})})},setMixerTaskConfig:function(ht){var ft=this;return new Promise(function(gt,vt){var yt=ft.stateCenter.reporter.createSpan(ot.H,{key:st.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},st.ZegoRTCLogEvent.kZegoTaskMixConfig.event);yt.setAttributes({mix_params:st.ZegoRTCLogEvent.kZegoTaskMixConfig.mix_params(ht)});var mt=ft.stateCenter.roomList[0];mt?mt.streamHandler.setMixerTaskConfig(ht).then(function(Et){yt.end(),gt(Et)}).catch(function(Et){ft.stateCenter.reporter.setError(yt,Et),vt(Et)}):vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message})})},stopMixerTask:function(ht){var ft=this;return new Promise(function(gt,vt){var yt=ft.stateCenter.reporter.createSpan(ot.H,{key:st.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},st.ZegoRTCLogEvent.kZegoTaskMixStop.event);if(!ht||typeof ht!="string"||ht.length>256||!ft.stateCenter.checkIllegalCharacters(ht))return ft.logger.error("zb.rh.lg taskID must be string less 256"),ft.stateCenter.reporter.setError(yt,st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError," param taskID error"),void vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"});yt.setAttributes({mix_task_id:ht});var mt=function(bt){var Ct=ut(ft.stateCenter,bt),Tt=Ct.actualError;ft.stateCenter.reporter.setError(yt,Ct.reportErr||bt),Tt&&(bt.errorCode=Tt==null?void 0:Tt.code,bt.extendedData=(Tt==null?void 0:Tt.message)||""),vt(bt)},Et=ft.stateCenter.roomList[0];Et?Et.streamHandler.stopMixStream(ht,function(bt){yt.end(),gt(bt)},mt):mt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message})})}},et.streamHandler={setMixerTaskConfig:function(ht){var ft=this;return new Promise(function(gt,vt){var yt,mt={};if(ht&&ht.videoCodec){var Et=ht.videoCodec.toLowerCase();if(["vp8","h264"].indexOf(Et)==-1)return ft.logger.error("zb.sh.ums param videoCode error"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message}),!1;mt.videoCodec=Et}if(ht.backgroundColor){if(!ft.stateCenter.checkInteger(ht.backgroundColor))return ft.logger.error("zb.sh.ums param backgroundColor must be integer number"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;mt.backgroundColor=ht.backgroundColor,ht.backgroundColor}if(ht.backgroundImage){if(typeof ht.backgroundImage!="string")return ft.logger.error("zb.sh.ums param outputBgImage error"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(!ht.backgroundImage.startsWith("preset-id://")||!ht.backgroundImage.endsWith(".jpg")&&!ht.backgroundImage.endsWith(".png"))return ft.logger.error("zb.sh.ums illegal input background image URL"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message}),!1;mt.backgroundImage=ht.backgroundImage,ht.backgroundImage}if(ht.waterMark&&(mt.waterMark=ht.waterMark,ht.waterMark),ht&&ht.userData){if(!(ht.userData instanceof Uint8Array))return ft.logger.error("zb.sh.ums param userData required Uint8Array"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(ht.userData.byteLength>1e3)return ft.logger.error("zb.sh.ums param userData should shorter than 1000"),vt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;mt.userData=ht.userData}ht.extraParams&&(mt.extraParams||(mt.extraParams=[]),(yt=mt.extraParams).push.apply(yt,ht.extraParams)),ct=mt,gt({errorCode:0,extendedData:""})})},stopMixStream:function(ht,ft,gt,vt,yt){var mt=this;this.logger.info("zb.sh.sms call");var Et={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:at};if(typeof ht=="string"&&(Et.task_id=ht),vt!=null?Et.stream_id=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+vt:vt:yt!=null&&(Et.mixurl=yt),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"stop_mix"},Et,function(Ct){ft&&ft({errorCode:0,extendedData:""})},function(Ct,Tt,wt,Rt){var It="";if(Rt)return Rt==it.errorCodeList.TIMEOUT&&(Rt=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),Rt.code&&Rt.code===20010&&(Rt=JSON.parse(JSON.stringify(it.errorCodeList.MIXER_NO_SERVICES))),void(gt&&gt(Rt,It));if(Rt=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,Ct===200){if(typeof Tt=="number")return mt.logger.debug("zb.sh.sms error: "+Tt),Tt+=1e9,void(gt&&gt({errorCode:mt.stateCenter.getServerError(lt+Tt).code,extendedData:It}));mt.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(error));var St=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;gt&&gt({errorCode:St.code,extendedData:St.message})}else mt.logger.error("zb.sh.sms "+(It="request mix server fail, error: "+Ct)),gt&&gt(Rt,It)});else{var bt={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(Et)};this.sendBizChannelRequest(bt,function(){ft&&ft({errorCode:0,extendedData:""})},function(Ct){if(typeof Ct=="number")gt&&gt({errorCode:mt.stateCenter.getServerError(lt+Ct).code,extendedData:""});else{mt.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(Ct));var Tt=void 0;Tt=Ct==it.errorCodeList.TIMEOUT?st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError:st.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError,gt&&gt({errorCode:Tt.code,extendedData:Tt.message})}})}return!0},updateMixStream:function(ht,ft,gt){var vt,yt=this;this.logger.info("zb.sh.ums call");var mt,Et=[];if(!ht.noTaskID&&!ht.taskID)return this.logger.error("zb.sh.ums no taskId found"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message}),!1;if(!ht.noTaskID&&typeof ht.taskID!="string")return this.logger.error("zb.rh.lg taskId must be string"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!ht.noTaskID&&ht.taskID.length>256)return this.logger.error("zb.sh.ums taskId is too long"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message}),!1;if(!ht.noTaskID&&!this.stateCenter.checkIllegalCharacters(ht.taskID))return this.logger.error("zb.sh.ums task ID contains illegal characters"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message}),!1;if(!ht.inputList||ht.inputList.length==0)return this.logger.error("zb.sh.ums input list wrong"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message}),!1;ht.inputList.forEach(function(Mt){Mt.contentType==="AUDIO"&&(!Mt.layout&&(Mt.layout={top:0,left:0,bottom:0,right:0}),Mt.layout.top=0,Mt.layout.left=0,Mt.layout.bottom=1,Mt.layout.right=1)});for(var bt=0;bt<ht.inputList.length;bt++){var Ct=ht.inputList[bt],Tt={errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message};if(typeof Ct.layout!="object")return this.logger.error("zb.sh.ums input layout must be object"),gt(Tt),!1;if(!(this.stateCenter.checkInteger(Ct.layout.top,!1)&&this.stateCenter.checkInteger(Ct.layout.bottom,!1)&&this.stateCenter.checkInteger(Ct.layout.left,!1)&&this.stateCenter.checkInteger(Ct.layout.right,!1)))return this.logger.error("zb.sh.ums top、left、bottom、right must be integer number"),gt(Tt),!1;if(Ct.renderMode!==void 0&&![0,1].includes(Ct.renderMode))return this.logger.error("zb.sh.ums render_mode is wrong"),gt(Tt),!1}if(!ht.outputList||ht.outputList.length==0)return this.logger.error("zb.sh.ums no output list found"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message}),!1;if(ht.outputList.some(function(Mt){return typeof Mt=="string"&&!yt.stateCenter.isUrl(Mt)&&!yt.stateCenter.checkIllegalCharacters(Mt)||typeof Mt=="object"&&Mt.target&&!yt.stateCenter.isUrl(Mt.target)&&!yt.stateCenter.checkIllegalCharacters(Mt.target)}))return this.logger.error("zb.sh.ums stream output target is incorrect"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;if(!((mt=ht.inputList.every(function(Mt){return Mt.contentType==="AUDIO"}))||ht.outputConfig&&typeof ht.outputConfig=="object"))return this.logger.error("zb.sh.ums no output config found"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message}),!1;if(mt&&(ht.outputConfig=nt(nt({},ht.outputConfig||{}),{outputBitrate:.001,outputFPS:1,outputWidth:1,outputHeight:1})),!(mt||ht.outputConfig.outputBitrate&&this.stateCenter.checkInteger(ht.outputConfig.outputBitrate)))return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!ht.outputConfig.outputFPS||!this.stateCenter.checkInteger(ht.outputConfig.outputFPS))return this.logger.error("zb.sh.ums fps param is required and must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!ht.outputConfig.outputWidth||!this.stateCenter.checkInteger(ht.outputConfig.outputWidth))return this.logger.error("zb.sh.ums width param is required and must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!ht.outputConfig.outputHeight||!this.stateCenter.checkInteger(ht.outputConfig.outputHeight))return this.logger.error("zb.sh.ums height param is required and must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(ht.outputConfig.outputAudioCodecID!==void 0&&!this.stateCenter.checkInteger(ht.outputConfig.outputAudioCodecID,!1))return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(ht.outputConfig.outputAudioBitrate!==void 0&&!this.stateCenter.checkInteger(ht.outputConfig.outputAudioBitrate))return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(ht.outputConfig.outputAudioChannels!==void 0&&!this.stateCenter.checkInteger(ht.outputConfig.outputAudioChannels,!1))return this.logger.error("zb.sh.ums AudioChannels param must be integer number"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;var wt=[];for(bt=0;bt<ht.inputList.length;bt++){var Rt=ht.inputList[bt],It=Rt.streamID;this.stateCenter.testEnvironment&&(It="zegotest-"+this.stateCenter.appid+"-"+Rt.streamID),wt.push({stream_id:It,content_control:Rt.contentType==="AUDIO"?1:0,rect:{layer:bt,top:Rt.layout.top,left:Rt.layout.left,bottom:Rt.layout.bottom,right:Rt.layout.right},render_mode:Rt.renderMode}),Et.push({stream_id:It,content_control:Rt.contentType==="AUDIO"?1:0,top:Rt.layout.top,left:Rt.layout.left,bottom:Rt.layout.bottom,right:Rt.layout.right,render_mode:Rt.renderMode})}var St={},Pt=[],Ot=0;ht.outputConfig.singleStreamPassThrough&&typeof ht.outputConfig.singleStreamPassThrough=="boolean"&&(Ot=ht.outputConfig.singleStreamPassThrough?1:0),St={task_id:ht.taskID,id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:at,bypass:Ot,timestamp:Math.ceil(new Date().getTime()/1e3)};var Ut=ct;Ut&&(Ut.videoCodec&&(St.extra_params=[{key:"video_encode",value:Ut.videoCodec}]),Ut.backgroundColor&&(St.output_bg_color=Ut.backgroundColor),Ut.backgroundImage&&(St.output_bg_image=Ut.backgroundImage),Ut.waterMark&&(St.watermark=Ut.waterMark),Ut.userData&&(St.userdata=this.stateCenter.uint8arrayToBase64(Ut.userData)),Ut.extraParams&&(!St.extra_params&&(St.extra_params=[]),(vt=St.extra_params).push.apply(vt,Ut.extraParams))),St.MixInput=ht.inputList.map(function(Mt,Nt){var $t=Mt.streamID;return yt.stateCenter.testEnvironment&&($t="zegotest-"+yt.stateCenter.appid+"-"+Mt.streamID),{stream_id:$t,content_control:Mt.contentType==="AUDIO"?1:0,rect:{layer:Nt,top:Mt.layout.top,left:Mt.layout.left,bottom:Mt.layout.bottom,right:Mt.layout.right},render_mode:Mt.renderMode}}),St.MixOutput=ht.outputList.map(function(Mt){var Nt={},$t="";if(typeof Mt=="string")$t=Mt;else{if(typeof Mt!="object"||!Mt.target)return yt.logger.error("zb.sh.ums output target required"),gt({errorCode:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;$t=Mt.target}return $t.startsWith("rtmp://")||$t.startsWith("https://")&&$t.endsWith(".flv")||$t.startsWith("https://")&&$t.endsWith(".m3u8")?Nt.mixurl=$t:Nt.stream_id=yt.stateCenter.testEnvironment?"zegotest-"+yt.stateCenter.appid+"-"+$t:$t,Nt.bitrate=1e3*ht.outputConfig.outputBitrate,Nt.fps=ht.outputConfig.outputFPS,Nt.width=ht.outputConfig.outputWidth,Nt.height=ht.outputConfig.outputHeight,ht.outputConfig.outputAudioCodecID&&(Nt.audio_enc_id=ht.outputConfig.outputAudioCodecID),Ut.videoCodec==="vp8"?Nt.audio_enc_id=3:Ut.videoCodec==="h264"&&(Nt.audio_enc_id=0),ht.outputConfig.outputAudioBitrate&&(Nt.audio_bitrate=1e3*ht.outputConfig.outputAudioBitrate),ht.outputConfig.outputAudioChannels&&(Nt.audio_channel_cnt=ht.outputConfig.outputAudioChannels),Nt.testenv=yt.stateCenter.testEnvironment?1:0,Pt.push({target:Nt.mixurl||Nt.stream_id,is_url:!!Nt.mixurl+""}),Nt});var Bt=ht.outputConfig;this.stateCenter.reporter.spanSetAttributes({key:st.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:ht.taskID},{mix_stream_conf:st.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_conf({fps:Bt.outputFPS,bitrate:Bt.outputBitrate,w:Bt.outputWidth,h:Bt.outputHeight,stream_cnt:Et.length,mix_task_id:ht.taskID,input_stream_list:Et,output_target_list:Pt})}),this.logger.debug("zb.sh.ums send command");var xt="zegotest-"+this.stateCenter.appid+"-";if(this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"start_mix"},St,function(Mt){var Nt=Mt.play.map(function($t){var Ft={rtmpURL:"",hlsURL:"",flvURL:""},jt=$t.stream_alias||"";return yt.stateCenter.testEnvironment&&jt&&jt.startsWith(xt)&&(jt=jt.slice(xt.length)),Ft.streamID=jt,$t.rtmp_url&&$t.rtmp_url.length>0&&(Ft.rtmpURL=$t.rtmp_url),$t.hls_url&&$t.hls_url.length>0&&(Ft.hlsURL=$t.hls_url),$t.hdl_url&&$t.hdl_url.length>0&&(Ft.flvURL=$t.hdl_url),Ft});ft&&ft({errorCode:0,extendedData:JSON.stringify({mixerOutputList:Nt})})},function(Mt,Nt,$t,Ft){var jt="";if(Ft)return Ft==it.errorCodeList.TIMEOUT&&(Ft=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),Ft.code&&Ft.code===20010&&(Ft=JSON.parse(JSON.stringify(it.errorCodeList.MIXER_NO_SERVICES))),void(gt&&gt(Ft,jt));if(Ft=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,Mt===200){if(typeof Nt=="number"){if(yt.logger.debug("zb.sh.ums error: "+Nt),(Nt+=1e9)==1000000150&&$t){var zt=$t,Yt=(zt==null?void 0:zt.non_exist_streams.map(function(er){return yt.stateCenter.testEnvironment&&er.startsWith(xt)?er.slice(xt.length):er}))||[];Yt.length>0&&(yt.logger.debug("zb.sh.ums not exist streams: "+Yt),jt=Yt.join(","))}return void(gt&&gt({errorCode:yt.stateCenter.getServerError(lt+Nt).code,extendedData:jt}))}yt.logger.debug("zb.sh.ums error code "+Nt);var Kt=st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;gt&&gt({errorCode:Kt.code,extendedData:Kt.message})}else yt.logger.error("zb.sh.ums "+(jt="request mix server fail, error: "+Mt)),gt&&gt(Ft,jt)});else{var At={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(St)};this.sendBizChannelRequest(At,function(Mt,Nt,$t){if(yt.logger.debug("zb.sh.ums receive message"),$t.length!=0){for(var Ft=JSON.parse($t),jt=[],zt=0;zt<Ft.play.length;zt++){var Yt={rtmpURL:"",hlsURL:"",flvURL:""},Kt=Ft.play[zt].stream_alias||"";yt.stateCenter.testEnvironment&&Kt&&Kt.startsWith(xt)&&(Kt=Kt.slice(xt.length)),Yt.streamID=Kt,Ft.play[zt].rtmp_url&&Ft.play[zt].rtmp_url.length>0&&(Yt.rtmpURL=Ft.play[zt].rtmp_url),Ft.play[zt].hls_url&&Ft.play[zt].hls_url.length>0&&(Yt.hlsURL=Ft.play[zt].hls_url),Ft.play[zt].hdl_url&&Ft.play[zt].hdl_url.length>0&&(Yt.flvURL=Ft.play[zt].hdl_url),jt.push(Yt)}ft&&ft({errorCode:0,extendedData:JSON.stringify({mixerOutputList:jt})})}else gt&&gt({errorCode:yt.stateCenter.getServerError(10001).code,extendedData:""})},function(Mt,Nt,$t){if(typeof Mt=="number"){yt.logger.debug("zb.sh.ums error: "+Mt);var Ft=[];if(Mt==1000000150&&$t.length!=0)for(var jt=JSON.parse($t),zt=0;zt<jt.non_exist_streams.length;zt++){var Yt=jt.non_exist_streams[zt];yt.stateCenter.testEnvironment&&Yt.startsWith(xt)?Ft.push(Yt.slice(xt.length)):Ft.push(Yt)}gt&&gt({errorCode:yt.stateCenter.getServerError(lt+Mt).code,extendedData:""})}else{yt.logger.debug("zb.sh.ums error code "+Mt.code);var Kt=void 0;Kt=Mt==it.errorCodeList.TIMEOUT?st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError:st.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,gt&&gt({errorCode:Kt.code,extendedData:Kt.message})}})}return!0}}},817:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}}},577:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0});var nt=rt(5906);et.default={type:"MixStream",install:function(ot,it){for(var st in nt.zegoWebRTC)Object.defineProperty(ot.prototype,st,{value:nt.zegoWebRTC[st],writable:!1});for(var st in nt.streamHandler)Object.defineProperty(it.prototype,st,{value:nt.streamHandler[st],writable:!1})}}},6145:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoRTCLogEvent=void 0;var nt=rt(817),ot=function(it){return it};et.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init"},kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kTaskIDNullError:nt.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:nt.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:nt.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:nt.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:nt.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:nt.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:nt.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:nt.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:nt.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:nt.errorCodeList.NOT_LOGIN},mix_stream_conf:ot,stop_reason:function(it){return it}},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kTaskIDNullError:nt.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:nt.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:nt.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:nt.errorCodeList.NOT_LOGIN}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:nt.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:nt.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID,kNoLoginError:nt.errorCodeList.NOT_LOGIN},mix_params:ot}}},2760:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(Ct){for(var Tt,wt=1,Rt=arguments.length;wt<Rt;wt++)for(var It in Tt=arguments[wt])Object.prototype.hasOwnProperty.call(Tt,It)&&(Ct[It]=Tt[It]);return Ct},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(Ct,Tt,wt,Rt){return new(wt||(wt=Promise))(function(It,St){function Pt(Bt){try{Ut(Rt.next(Bt))}catch(xt){St(xt)}}function Ot(Bt){try{Ut(Rt.throw(Bt))}catch(xt){St(xt)}}function Ut(Bt){var xt;Bt.done?It(Bt.value):(xt=Bt.value,xt instanceof wt?xt:new wt(function(At){At(xt)})).then(Pt,Ot)}Ut((Rt=Rt.apply(Ct,Tt||[])).next())})},it=this&&this.__generator||function(Ct,Tt){var wt,Rt,It,St,Pt={label:0,sent:function(){if(1&It[0])throw It[1];return It[1]},trys:[],ops:[]};return St={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(St[Symbol.iterator]=function(){return this}),St;function Ot(Ut){return function(Bt){return function(xt){if(wt)throw new TypeError("Generator is already executing.");for(;Pt;)try{if(wt=1,Rt&&(It=2&xt[0]?Rt.return:xt[0]?Rt.throw||((It=Rt.return)&&It.call(Rt),0):Rt.next)&&!(It=It.call(Rt,xt[1])).done)return It;switch(Rt=0,It&&(xt=[2&xt[0],It.value]),xt[0]){case 0:case 1:It=xt;break;case 4:return Pt.label++,{value:xt[1],done:!1};case 5:Pt.label++,Rt=xt[1],xt=[0];continue;case 7:xt=Pt.ops.pop(),Pt.trys.pop();continue;default:if(It=Pt.trys,!((It=It.length>0&&It[It.length-1])||xt[0]!==6&&xt[0]!==2)){Pt=0;continue}if(xt[0]===3&&(!It||xt[1]>It[0]&&xt[1]<It[3])){Pt.label=xt[1];break}if(xt[0]===6&&Pt.label<It[1]){Pt.label=It[1],It=xt;break}if(It&&Pt.label<It[2]){Pt.label=It[2],Pt.ops.push(xt);break}It[2]&&Pt.ops.pop(),Pt.trys.pop();continue}xt=Tt.call(Ct,Pt)}catch(At){xt=[6,At],Rt=0}finally{wt=It=0}if(5&xt[0])throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}([Ut,Bt])}}},st=this&&this.__spreadArray||function(Ct,Tt,wt){if(wt||arguments.length===2)for(var Rt,It=0,St=Tt.length;It<St;It++)!Rt&&It in Tt||(Rt||(Rt=Array.prototype.slice.call(Tt,0,It)),Rt[It]=Tt[It]);return Ct.concat(Rt||Array.prototype.slice.call(Tt))},at=this&&this.__importDefault||function(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}};Object.defineProperty(et,"__esModule",{value:!0}),et.getSystemInfo=void 0;var lt=at(rt(2730)),ct=at(rt(2846)),pt=at(rt(3402)),ut=at(rt(5947)),ht=at(rt(1646)),ft=at(rt(1576)),gt=rt(7803),vt=rt(5130),yt=rt(608);function mt(){var Ct;return ot(this,void 0,void 0,function(){var Tt,wt,Rt;return it(this,function(It){switch(It.label){case 0:return(Tt=navigator==null?void 0:navigator.userAgentData)?[4,Tt.getHighEntropyValues(["platformVersion"]).catch(function(){})]:[2,{platform:"",majorPlatformVersion:0}];case 1:return wt=It.sent()||{},Rt=parseInt((Ct=wt.platformVersion)===null||Ct===void 0?void 0:Ct.split(".")[0]),[2,{platform:wt.platform,majorPlatformVersion:Rt}]}})})}et.getSystemInfo=mt;var Et="zc.ra.0",bt=function(){function Ct(Tt,wt){var Rt=this;this.logger=wt,this.isSpatial=!1,this.audioSourceList=[],this.audioSourceUpdate=!1,this.localUserList=[],this.speakingUserIdList=[],this.vocalSourceMap=new Map,this.volume=1,this.speaker="",this._audioCtx=null,this.supportSpeakerSet=!1,this.isHide=!1,this.eventHandler={visibilitychange:function(){return ot(Rt,void 0,void 0,function(){var St,Pt,Ot,Ut,Bt,xt,At,Mt=this;return it(this,function(Nt){switch(Nt.label){case 0:return st(st([],this.vocalSourceList,!0),this.audioSourceList,!0).forEach(function($t){$t.inBackground(document.hidden),Mt.isHide=document.hidden}),St=function(){st(st([],Mt.vocalSourceList,!0),Mt.audioSourceList,!0).forEach(function($t){$t.enableSpatializer(Mt.isSpatial,!0,!1,!1)})},document.hidden?(Pt=navigator.userAgent.toLowerCase(),Ot=Pt.match(/chrome\/(\d*)/),Ut=Ot&&Pt.includes("mobile"),[4,mt()]):[3,2];case 1:return Bt=Nt.sent(),xt=Bt.platform==="Windows"&&Bt.majorPlatformVersion>=13,Ut||xt?(this.logger.warn("".concat(Et," mobile chrome hide page and stop web audio.")),St(),[2]):((At=this.audioCtx.state)!=="running"?(this.logger.info("".concat(Et," hidden ctx: ").concat(At,", resume ctx")),this.audioCtx.resume(),setTimeout(function(){var $t=Mt.audioCtx.state;Mt.isHide&&($t==="running"?Mt.logger.info("".concat(Et," hidden ctx: ").concat($t,".")):(Mt.logger.warn("".concat(Et," hidden ctx: ").concat($t,", ctx resume failed. stop web audio.")),St()))},2e3)):this.logger.info("".concat(Et," hidden ctx: ").concat(At,".")),[3,3]);case 2:this.audioCtx.resume(),this.audioSourceList.forEach(function($t){var Ft,jt;$t.isPlaying&&((Ft=$t.audioEl)===null||Ft===void 0||Ft.dom.pause(),(jt=$t.audioEl)===null||jt===void 0||jt.dom.play().catch(function(){Mt.logger.warn("".concat(Et," show page and  ").concat($t.userID," replay failed."))}))}),Nt.label=3;case 3:return[2]}})})}},this.zegoRTC=Tt,document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.zegoRTC.on("roomStreamUpdate",function(St,Pt,Ot){var Ut=Ot.map(function(xt){var At=Rt.getStreamInfo(xt.extraInfo,xt.streamID),Mt=At.isRangeAudioStream,Nt=At.teamID,$t=At.sendMode;return nt(nt({},xt),{isRangeAudioStream:Mt,teamID:Nt,sendMode:$t})}).filter(function(xt){return xt.isRangeAudioStream}),Bt=Ut.map(function(xt){return xt.user.userID});Pt==="DELETE"?Rt.speakingUserIdList=Rt.speakingUserIdList.filter(function(xt){var At=!Bt.includes(xt);if(!At){var Mt=Rt.audioSourceMap[xt];Mt&&Mt.stopPlayingAudio("stop for stream delete")}return At}):Pt==="ADD"&&(Rt.speakingUserIdList=Rt.speakingUserIdList.concat(Bt),Ut.forEach(function(xt){var At=xt.user.userID,Mt=Rt.audioSourceMap[At],Nt=xt.teamID,$t=xt.sendMode,Ft=!(!["",void 0].includes(Nt)&&Rt.rangeListener.teamID===Nt)&&Rt.isSpatial;if(Mt)Mt.streamID!==xt.streamID&&(Mt.stopPlayingAudio("stop for old stream"),Mt.streamID=xt.streamID),$t!==void 0&&(Mt.sendMode=$t),Nt!==Mt.teamID&&(Mt.teamID=Nt),Mt.enableSpatializer(Ft);else{var jt=new lt.default(Rt.logger,{userID:At,teamID:Nt,sendMode:$t},{audioCtx:Rt.audioCtx,zegoRTC:Rt.zegoRTC,isSpatial:Ft,maxDistance:Rt.rangeListener.recvRange,volume:Rt.volume,speaker:Rt.speaker,isHide:Rt.isHide});jt.streamID=xt.streamID,Rt.audioSourceList.push(jt),Rt.playStreamHandler.hasChanged=!0}})),Rt.playStreamHandler.setAudioSourceList(Rt.speakingAudioSourceList)}),this.zegoRTC.on("playerStateUpdate",function(St){var Pt=Rt.audioSourceList.find(function(Ot){return Ot.streamID===St.streamID});Pt&&(St.state==="NO_PLAY"?Pt.isPlaying=!1:(St.state==="PLAYING"&&Pt.checkTrackChanged(),Pt.isPlaying=!0))}),this.zegoRTC.on("streamExtraInfoUpdate",function(St,Pt){Rt.logger.info("zc.ra.0 recv extra info: "+JSON.stringify(Pt)),Pt.forEach(function(Ot){var Ut=Rt.audioSourceMap[Ot.user.userID];if(Ut&&Ut.streamID){var Bt=Rt.getStreamInfo(Ot.extraInfo,Ot.streamID),xt=Bt.teamID,At=Bt.sendMode;xt!==Ut.teamID&&(Ut.teamID=xt,Rt.enableSpatializer(Rt.isSpatial)),At!==void 0&&(Ut.sendMode=At),Rt.playStreamHandler.hasChanged=!0}})}),this.zegoRTC.RTM._on("_roomStateUpdate",function(St,Pt){Pt==="CONNECTED"?(Rt.roomID=St,Rt.rangeListener.userID=Rt.zegoRTC.RTM.getUserID(),Rt.playStreamHandler.hasChanged=!0,Rt.playStreamHandler.userChanged=!0):Pt==="DISCONNECTED"&&(Rt.roomID=void 0,Rt.rangeListener.reset(),Rt.enableSpeaker(!1),Rt.audioSourceList=[],Rt.playStreamHandler.setAudioSourceList([]),Rt.localUserList=[],Rt.playStreamHandler.setLocalUserList([]))}),this.zegoRTC.RTM.on("roomUserUpdate",function(St,Pt,Ot){var Ut;Rt.logger.info("zc.ra.0 roomUserUpdate: ",St,Pt,JSON.stringify(Ot)),Pt==="ADD"?(Ut=Rt.localUserList).push.apply(Ut,Ot):Pt==="DELETE"&&Ot.forEach(function(Bt){Rt.localUserList=Rt.localUserList.filter(function(xt){return xt.userID!==Bt.userID})}),Rt.playStreamHandler.setLocalUserList(Rt.localUserList)}),this.zegoRTC.on("publishQualityUpdate",function(St,Pt){var Ot=St.match(/(.*)_(.*)/);if((Ot==null?void 0:Ot.length)===3){var Ut=Ot[1];if(Rt.rangeListener.userID!==Ut)return;var Bt=nt({},Pt.audio);Rt.eventManager.emit("publishQualityUpdate",Ut,Bt)}}),this.zegoRTC.on("playQualityUpdate",function(St,Pt){var Ot,Ut=St.match(/(.*)_(.*)/);if((Ut==null?void 0:Ut.length)===3){var Bt=Ut[1],xt=Pt.audio,At=Pt.peerToPeerDelay,Mt=Pt.peerToPeerPacketLostRate;if(!(!((Ot=Rt.audioSourceList)===null||Ot===void 0)&&Ot.some(function($t){return $t.userID===Bt})))return;var Nt=nt(nt({},xt),{peerToPeerDelay:At,peerToPeerPacketLostRate:Mt});Rt.eventManager.emit("playQualityUpdate",Bt,Nt)}});var It=window.AudioContext||window.webkitAudioContext;this._audioCtx=this.zegoRTC&&this.zegoRTC.ac||new It,this.rangeListener=ut.default.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=ht.default.getInstance(this.logger,this.rangeListener),this.eventManager=ft.default.getInstance()}return Object.defineProperty(Ct.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce(function(Tt,wt){return wt.userID&&(Tt[wt.userID]=wt),Tt},{})},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"speakingAudioSourceList",{get:function(){var Tt=this;return this.audioSourceList.filter(function(wt){return Tt.speakingUserIdList.includes(wt.userID)})},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"vocalSourceList",{get:function(){for(var Tt=[],wt=this.vocalSourceMap.values(),Rt=0;Rt<this.vocalSourceMap.size;Rt++)Tt.push(wt.next().value);return Tt},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter(function(Tt){return Tt.isPlaying})},enumerable:!1,configurable:!0}),Object.defineProperty(Ct.prototype,"audioCtx",{get:function(){if(!this._audioCtx){var Tt=window.AudioContext||window.webkitAudioContext;this._audioCtx=new Tt}return this._audioCtx},enumerable:!1,configurable:!0}),Ct.getInstance=function(Tt,wt){return Ct.instance||(Ct.instance=new Ct(Tt,wt)),Ct.instance},Ct.prototype.resumeAudioContext=function(){return ot(this,void 0,void 0,function(){var Tt=this;return it(this,function(wt){return[2,new Promise(function(Rt){vt.AudioElPool.generateEls(),Tt.audioCtx.state==="running"&&Rt(!0),Tt.audioCtx.onstatechange=function(){Tt.audioCtx.state==="running"&&Rt(!0)},Tt.audioCtx.resume(),Tt.logger.info("zc.ra.0 resume audio ctx"),setTimeout(function(){Rt(!1)},3e3)})]})})},Ct.prototype.getAudioContextState=function(){return this.audioCtx.state},Ct.prototype.getStreamInfo=function(Tt,wt){var Rt=void 0,It=null;try{It=JSON.parse(Tt)}catch{return this.logger.warn(Et+" parse room extra info failed. ".concat(wt," is not ra stream.")),{isRangeAudioStream:!1}}if(!It.hasOwnProperty("range_audio_team_id")||!It.hasOwnProperty("range_audio_mode"))return this.logger.warn(Et+" extra info has no mode. ".concat(wt," is not ra stream.")),{isRangeAudioStream:!1};Rt={1:0,2:1,3:2}[It.range_audio_mode];var St=It.r_a_s_flag,Pt={teamID:It.range_audio_team_id||void 0,sendMode:Rt,isRangeAudioStream:St===void 0||St===1};return this.logger.info("".concat(Et," ").concat(wt," parse extra info: ").concat(JSON.stringify(Pt),".")),Pt},Ct.prototype.setAudioReceiveRange=function(Tt){if(!(0,gt.checkNumber)(Tt))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if(Tt=Number(Tt),(Tt=Number(Tt))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.logger.info("zc.ra.0 set receive range: "+Tt),this.rangeListener.recvRange=Tt,this.audioSourceList.forEach(function(wt){wt.setMaxDistance(Tt)}),this.playStreamHandler.hasChanged=!0,this.playStreamHandler.userChanged=!0},Ct.prototype.updateSelfPosition=function(Tt,wt,Rt,It){var St=this,Pt=function(Ot){return"Failed to execute 'updateSelfPosition': Argument '".concat(Ot,`' requires an array of type number."`)};if(!(0,gt.checkCoordinate)(Tt))throw new Error(Pt("position"));if(!(0,gt.checkCoordinate)(wt))throw new Error(Pt("axisForward"));if(!(0,gt.checkCoordinate)(Rt))throw new Error(Pt("axisRight"));if(!(0,gt.checkCoordinate)(It))throw new Error(Pt("axisUp"));this.logger.info(Et+" set self position [".concat(Tt,"]")),this.rangeListener&&(this.rangeListener.updateSelfPosition(Tt,wt,It),this.vocalSourceMap.forEach(function(Ot){Ot.checkIfCanPlay(St.rangeListener)})),this.playStreamHandler.setListener(this.rangeListener)},Ct.prototype.updateAudioSource=function(Tt,wt){if(Tt=String(Tt),!(0,gt.checkCoordinate)(wt))throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");var Rt=this.audioSourceMap[Tt];Rt?Rt.setPosition(wt):(Rt=new lt.default(this.logger,{userID:Tt,position:wt},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange,volume:this.volume,speaker:this.speaker,isHide:this.isHide}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(Rt)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList),this.playStreamHandler.setAllAudioSourceList(this.audioSourceList)},Ct.prototype.enableMicrophone=function(Tt){if(Tt===void 0&&(Tt=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return Tt?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},Ct.prototype.selectMic=function(Tt){return ot(this,void 0,void 0,function(){var wt,Rt,It,St;return it(this,function(Pt){switch(Pt.label){case 0:if(typeof Tt!="string"&&Tt!==void 0)throw new Error("Select mic failed. DeviceID error.");if(Rt=(wt=this.rangeListener).audioStream,It=wt.isPublishing,this.logger.info("zc.ra.0 select mic: "+Tt),!Rt||!It)return[3,5];St={errorCode:0},Pt.label=1;case 1:return Pt.trys.push([1,3,,4]),[4,this.zegoRTC.useAudioDevice(Rt,Tt||"")];case 2:return St=Pt.sent(),[3,4];case 3:return Pt.sent(),[2,!1];case 4:return St.errorCode===0?(this.rangeListener.micID=Tt,[2,!0]):[2,!1];case 5:return this.rangeListener.micID=Tt,[2,!0];case 6:return[2]}})})},Ct.prototype.enableSpeaker=function(Tt){if(Tt===void 0&&(Tt=!0),Tt&&!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=Tt,this.logger.info("zc.ra.0 enable speaker: "+Tt),Tt?(vt.AudioElPool.generateEls(),this.playStreamHandler.startPlayingAudioStream()):this.playStreamHandler.stopPlayingAudioStream()},Ct.prototype.enableSpatializer=function(Tt){var wt=this;Tt===void 0&&(Tt=!0),this.logger.info("zc.ra.0 set spatializer: "+Tt),this.isSpatial=!!Tt,this.audioSourceList.forEach(function(Rt){var It=!(!["",void 0].includes(Rt.teamID)&&wt.rangeListener.teamID===Rt.teamID)&&Tt;Rt.enableSpatializer(It)}),this.vocalSourceList.forEach(function(Rt){Rt.enableSpatializer(Tt)}),Tt&&this.rangeListener.updateListenerEffect()},Ct.prototype.enableAiDenoise=function(Tt){if(this.logger.info("zc.ra.0 set ai denoise: "+Tt),typeof Tt!="boolean")return!1;var wt=yt.ClientUtil.isMobile();return!wt&&window.AudioWorklet&&window.WebAssembly?this.rangeListener.enableDenoise(!!Tt):(this.logger.error(Et+"".concat(wt&&" mobile"," browser dose not support ai denoise.")),!1)},Ct.prototype.setRangeAudioTeamID=function(Tt){this.logger.info("zc.ra.0 set team id: "+Tt),this.rangeListener.setTeamID(Tt),this.enableSpatializer(this.isSpatial),this.playStreamHandler.hasChanged=!0},Ct.prototype.setRangeAudioMode=function(Tt){this.logger.info("zc.ra.0 set mode "+Tt),this.rangeListener.setSendMode(Tt),this.rangeListener.setRecvMode(Tt),this.playStreamHandler.hasChanged=!0},Ct.prototype.setAudioVolume=function(Tt){var wt=this;if(this.logger.info(Et+" set volume ".concat(Tt)),Tt<0)throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");this.volume=Tt/100,this.audioSourceList.forEach(function(Rt){Rt.setVolume(wt.volume)})},Ct.prototype.selectSpeaker=function(Tt){var wt=this;if(Tt===void 0&&(Tt=""),typeof Tt!="string")throw new Error("Select speaker failed. Device ID error.");if(!this.supportSpeakerSet){if(!document.createElement("audio").setSinkId)throw new Error("Failed to execute 'selectSpeaker': browser not support.");this.supportSpeakerSet=!0}this.speaker=Tt,this.logger.info("zc.ra.0 set speaker: "+Tt),Tt===""&&this.logger.warn("zc.ra.0 set speaker to be default. "),this.audioSourceList.find(function(Rt){return ot(wt,void 0,void 0,function(){var It;return it(this,function(St){switch(St.label){case 0:return St.trys.push([0,2,,3]),[4,Rt.setSpeaker(Tt)];case 1:return St.sent(),[3,3];case 2:return It=St.sent(),this.logger.warn(Et+" set speaker failed. id: ".concat(Tt,", error: ").concat(It)),[2,!0];case 3:return[2,!1]}})})})},Ct.prototype.setPositionUpdateFrequency=function(Tt){if(!(Tt>=15))throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");this.playStreamHandler.interval=Number(Tt)||100,this.logger.info("zc.ra.0 set interval: "+Tt)},Ct.prototype.on=function(Tt,wt){return this.eventManager.addEventHandler(Tt,wt)},Ct.prototype.off=function(Tt,wt){return this.eventManager.removeEventHandler(Tt,wt)},Ct.prototype.enableAudioSourceUpdateChecker=function(Tt,wt){if(this.logger.info("zc.ra.0 set source update: "+Tt),this.audioSourceUpdate=Tt,this.playStreamHandler.setAudioSourceUpdate(Tt),wt&&typeof wt.frequency=="number"){if((wt==null?void 0:wt.frequency)<50)throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +].");this.playStreamHandler.updateUserInterval=Number(wt.frequency)||1e3,this.logger.info("zc.ra.0 set interval: "+wt.frequency)}Tt?this.playStreamHandler.startCheckUserInRange():this.playStreamHandler.stopCheckUserInRange()},Ct.prototype.getVocalSource=function(Tt,wt){var Rt=this.vocalSourceMap.get(Tt);if(!Rt){var It={audioCtx:this.audioCtx,isSpatial:this.isSpatial,maxDistance:wt||0,volume:this.volume,speaker:this.speaker,isHide:this.isHide};Rt=Tt instanceof HTMLMediaElement?new ct.default(this.logger,{media:Tt},It):new pt.default(this.logger,{streamView:Tt},It)}return this.vocalSourceMap.set(Tt,Rt),Rt},Ct.prototype.setStreamVocalRange=function(Tt,wt){var Rt=Tt instanceof HTMLMediaElement;if(!Rt&&!(Tt!=null&&Tt.v))throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");if(!(0,gt.checkNumber)(wt))throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");wt=Number(wt),this.logger.info(Et+" ".concat(Rt?"custom":"stream"," set range: ")+wt);var It=this.getVocalSource(Tt,wt);It.setMaxDistance(wt),It.checkIfCanPlay(this.rangeListener)},Ct.prototype.updateStreamPosition=function(Tt,wt){if(!(Tt instanceof HTMLMediaElement)&&!(Tt!=null&&Tt.v))throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");if(!(0,gt.checkCoordinate)(wt))throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");var Rt=this.getVocalSource(Tt);Rt.setPosition(wt),Rt.checkIfCanPlay(this.rangeListener)},Ct}();et.default=bt},2777:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.RangeAudio=void 0;var nt=rt(3116);et.RangeAudio={type:"RangeAudio",install:function(ot){Object.defineProperty(ot.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=nt.ZegoExpressRangeAudio.getInstance(this,this.logger)),this.rangeAudio},writable:!1})}}},5130:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.AudioElPool=void 0;var rt=function(){function nt(){}return nt.generateEls=function(ot){if(ot===void 0&&(ot=30),this.elements.length>=ot)this.elements.forEach(function(st){st.dom.play().catch(function(at){})});else{var it=Array(ot-this.elements.length).fill(0).map(function(st,at){var lt=document.createElement("audio");return lt.muted=!0,lt.setAttribute("autoplay","autoplay"),lt.setAttribute("playsInline","playsInline"),lt.id="audio"+at,{dom:lt,id:at,used:!1}});this.elements=this.elements.concat(it)}},nt.useAudioEl=function(){this.elements.length===0&&this.generateEls();var ot=this.elements.find(function(it){return!it.used});return ot&&(ot.used=!0),ot},nt.stopUsingAudioEl=function(ot){var it=this.elements[ot];it&&(it.dom.onpause=null,it.dom.onerror=null,it.dom.muted=!0,it.used=!1)},nt.elements=[],nt}();et.AudioElPool=rt},2730:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(ut,ht){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,gt){ft.__proto__=gt}||function(ft,gt){for(var vt in gt)Object.prototype.hasOwnProperty.call(gt,vt)&&(ft[vt]=gt[vt])},nt(ut,ht)},function(ut,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");function ft(){this.constructor=ut}nt(ut,ht),ut.prototype=ht===null?Object.create(ht):(ft.prototype=ht.prototype,new ft)}),it=this&&this.__awaiter||function(ut,ht,ft,gt){return new(ft||(ft=Promise))(function(vt,yt){function mt(Ct){try{bt(gt.next(Ct))}catch(Tt){yt(Tt)}}function Et(Ct){try{bt(gt.throw(Ct))}catch(Tt){yt(Tt)}}function bt(Ct){var Tt;Ct.done?vt(Ct.value):(Tt=Ct.value,Tt instanceof ft?Tt:new ft(function(wt){wt(Tt)})).then(mt,Et)}bt((gt=gt.apply(ut,ht||[])).next())})},st=this&&this.__generator||function(ut,ht){var ft,gt,vt,yt,mt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return yt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function Et(bt){return function(Ct){return function(Tt){if(ft)throw new TypeError("Generator is already executing.");for(;mt;)try{if(ft=1,gt&&(vt=2&Tt[0]?gt.return:Tt[0]?gt.throw||((vt=gt.return)&&vt.call(gt),0):gt.next)&&!(vt=vt.call(gt,Tt[1])).done)return vt;switch(gt=0,vt&&(Tt=[2&Tt[0],vt.value]),Tt[0]){case 0:case 1:vt=Tt;break;case 4:return mt.label++,{value:Tt[1],done:!1};case 5:mt.label++,gt=Tt[1],Tt=[0];continue;case 7:Tt=mt.ops.pop(),mt.trys.pop();continue;default:if(vt=mt.trys,!((vt=vt.length>0&&vt[vt.length-1])||Tt[0]!==6&&Tt[0]!==2)){mt=0;continue}if(Tt[0]===3&&(!vt||Tt[1]>vt[0]&&Tt[1]<vt[3])){mt.label=Tt[1];break}if(Tt[0]===6&&mt.label<vt[1]){mt.label=vt[1],vt=Tt;break}if(vt&&mt.label<vt[2]){mt.label=vt[2],mt.ops.push(Tt);break}vt[2]&&mt.ops.pop(),mt.trys.pop();continue}Tt=ht.call(ut,mt)}catch(wt){Tt=[6,wt],gt=0}finally{ft=vt=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([bt,Ct])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.RANGE_AUDIO=void 0;var at=rt(1297),lt=rt(5130),ct=rt(4981);et.RANGE_AUDIO="zc.ra.1";var pt=function(ut){function ht(ft,gt,vt){var yt=ut.call(this,ft,vt)||this;return yt.logger=ft,yt.audioTrack=null,yt.zegoRTC=vt.zegoRTC,yt.userID=gt.userID,yt.teamID=gt.teamID,yt.sendMode=gt.sendMode!==void 0?gt.sendMode:at.ZegoRangeAudioMode.World,gt.position&&(yt.position=gt.position),yt}return ot(ht,ut),ht.prototype.checkTrackChanged=function(){var ft;if(this.stream){var gt=this.stream.getAudioTracks()[0];gt&&gt!==this.audioTrack&&(this.logger.info(et.RANGE_AUDIO+" retry play success, render stream."),(ft=this.sourceNode)===null||ft===void 0||ft.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.enableSpatializer(this.isSpatial,!0),this.audioTrack=gt)}},ht.prototype.startPlayingAudio=function(ft){var gt,vt;return it(this,void 0,void 0,function(){var yt,mt,Et;return st(this,function(bt){switch(bt.label){case 0:if(!this.streamID)return[2];bt.label=1;case 1:return bt.trys.push([1,3,,4]),ft&&this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," ")+ft),this.isPlaying=!0,yt=this,[4,this.zegoRTC.startPlayingStream(this.streamID)];case 2:return yt.stream=bt.sent(),this.audioTrack=this.stream.getAudioTracks()[0],[3,4];case 3:if((mt=bt.sent()).code===1103049)return[2];throw mt;case 4:return this.audioEl=this.audioEl||lt.AudioElPool.useAudioEl()||null,this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," start using audio el ").concat((gt=this.audioEl)===null||gt===void 0?void 0:gt.id)),(Et=(vt=this.audioEl)===null||vt===void 0?void 0:vt.dom)||(this.logger.error(et.RANGE_AUDIO+" not enough audio elements"),Et=document.createElement("audio"),this.audioEl={id:-1,dom:Et,used:!0},Et.setAttribute("autoplay","autoplay")),Et.muted=!0,this.stream&&(this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,6];case 5:bt.sent(),bt.label=6;case 6:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},ht.prototype.stopPlayingAudio=function(ft){this.isPlaying&&this.streamID?(this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," ")+ft),this.zegoRTC.stopPlayingStream(this.streamID),this.isPlaying=!1):this.streamID&&this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," not playing, ")+ft),this.stream=void 0,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null);var gt=this.audioEl,vt=gt==null?void 0:gt.dom;vt&&(vt.srcObject=null,vt.parentNode&&vt.parentNode.removeChild(vt));var yt=(gt==null?void 0:gt.id)||-1;gt&&yt>=0&&(lt.AudioElPool.stopUsingAudioEl(yt),this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," stop using audio el ").concat(yt))),this.audioEl=null,this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null)},ht}(ct.BaseAudioSource);et.default=pt},4981:function(_e,et,rt){var nt=this&&this.__awaiter||function(ut,ht,ft,gt){return new(ft||(ft=Promise))(function(vt,yt){function mt(Ct){try{bt(gt.next(Ct))}catch(Tt){yt(Tt)}}function Et(Ct){try{bt(gt.throw(Ct))}catch(Tt){yt(Tt)}}function bt(Ct){var Tt;Ct.done?vt(Ct.value):(Tt=Ct.value,Tt instanceof ft?Tt:new ft(function(wt){wt(Tt)})).then(mt,Et)}bt((gt=gt.apply(ut,ht||[])).next())})},ot=this&&this.__generator||function(ut,ht){var ft,gt,vt,yt,mt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return yt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function Et(bt){return function(Ct){return function(Tt){if(ft)throw new TypeError("Generator is already executing.");for(;mt;)try{if(ft=1,gt&&(vt=2&Tt[0]?gt.return:Tt[0]?gt.throw||((vt=gt.return)&&vt.call(gt),0):gt.next)&&!(vt=vt.call(gt,Tt[1])).done)return vt;switch(gt=0,vt&&(Tt=[2&Tt[0],vt.value]),Tt[0]){case 0:case 1:vt=Tt;break;case 4:return mt.label++,{value:Tt[1],done:!1};case 5:mt.label++,gt=Tt[1],Tt=[0];continue;case 7:Tt=mt.ops.pop(),mt.trys.pop();continue;default:if(vt=mt.trys,!((vt=vt.length>0&&vt[vt.length-1])||Tt[0]!==6&&Tt[0]!==2)){mt=0;continue}if(Tt[0]===3&&(!vt||Tt[1]>vt[0]&&Tt[1]<vt[3])){mt.label=Tt[1];break}if(Tt[0]===6&&mt.label<vt[1]){mt.label=vt[1],vt=Tt;break}if(vt&&mt.label<vt[2]){mt.label=vt[2],mt.ops.push(Tt);break}vt[2]&&mt.ops.pop(),mt.trys.pop();continue}Tt=ht.call(ut,mt)}catch(wt){Tt=[6,wt],gt=0}finally{ft=vt=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([bt,Ct])}}},it=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(et,"__esModule",{value:!0}),et.BaseAudioSource=et.calculateDistance=et.isMobile=et.RANGE_AUDIO=void 0;var st=it(rt(8047)),at=rt(2760),lt=rt(5694);function ct(ut,ht){if(!ht||!ut)return null;var ft=[ut[0]-ht[0],ut[1]-ht[1],ut[2]-ht[2]];return Math.sqrt(Math.pow(ft[0],2)+Math.pow(ft[1],2)+Math.pow(ft[2],2))}et.RANGE_AUDIO="zc.ra.5",et.isMobile=function(){return!!navigator.userAgent.toLowerCase().includes("mobile")},et.calculateDistance=ct;var pt=function(){function ut(ht,ft){this.logger=ht,this.userID="base"+new Date().getTime(),this.isHide=!1,this.distance=null,this.maxDistance=1e3,this.position=null,this.speaker="",this.audioEl=null,this.sourceNode=null,this.isPlaying=!1,this.config={needLoopback:!0,useGain:!0,playOnAudioContext:!1,useWebAudio:!0},this.volume=1,this.gainNode=null,this.isSpatial=!1,this.panner=null,this.audioCtx=ft.audioCtx,this.isSpatial=ft.isSpatial,this.setMaxDistance(typeof ft.maxDistance=="number"?ft.maxDistance:1e5),this.destNode=this.audioCtx.createMediaStreamDestination(),this.setVolume(ft.volume),this.setSpeaker(ft.speaker).catch(function(gt){}),this.inBackground(ft.isHide)}return ut.prototype.setPosition=function(ht){this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," set position: ")+ht),this.position=ht,this.panner&&(this.panner.positionX!==void 0?(this.panner.positionX.value=ht[1],this.panner.positionY.value=ht[2],this.panner.positionZ.value=-ht[0]):this.panner.setPosition(ht[1],ht[2],-ht[0]))},ut.prototype.getDistanceFromListener=function(ht){return this.distance=ct(this.position,ht.position),this.distance},ut.prototype.setMaxDistance=function(ht){this.maxDistance=ht,this.panner&&(ht<10&&(ht=10),this.panner.maxDistance=2.6*ht)},ut.prototype.setVolume=function(ht){isNaN(ht)||(this.volume=ht,this.gainNode&&(this.gainNode.gain.value=this.volume))},ut.prototype.setSpeaker=function(ht){var ft;return nt(this,void 0,void 0,function(){var gt,vt,yt;return ot(this,function(mt){switch(mt.label){case 0:if(typeof ht!="string")return[2];if(this.speaker=ht,!(gt=(ft=this.audioEl)===null||ft===void 0?void 0:ft.dom))return[3,10];if(!(vt=gt.setSinkId))return[3,8];mt.label=1;case 1:return mt.trys.push([1,6,,7]),this.config.playOnAudioContext?[3,3]:[4,vt.call(gt,ht||"")];case 2:return mt.sent(),[3,5];case 3:return[4,vt.call(gt,"")];case 4:mt.sent(),mt.label=5;case 5:return this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," set speaker success. id: ").concat(ht,".")),[3,7];case 6:throw yt=mt.sent(),this.logger.error(et.RANGE_AUDIO+" ".concat(this.userID," set speaker failed. id: ").concat(ht,"  error: ").concat(yt,".")),yt;case 7:return[3,9];case 8:throw"setting speaker not support.";case 9:return[3,11];case 10:this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," no element for set speaker.")),mt.label=11;case 11:return[2]}})})},ut.prototype.initPanner=function(){if(!this.panner){var ht=(0,lt.createPanner)(this.audioCtx,this.maxDistance,this.position),ft=ht.gainNode;this.panner=ht.panner,this.gainNode=ft,ft.gain.value=this.volume}},ut.prototype.enableSpatializer=function(ht,ft,gt,vt){var yt,mt,Et,bt,Ct;return ft===void 0&&(ft=!1),gt===void 0&&(gt=!1),vt===void 0&&(vt=!0),nt(this,void 0,void 0,function(){var Tt,wt,Rt,It,St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t=this;return ot(this,function(Ft){switch(Ft.label){case 0:return ft||this.isSpatial!==ht?(this.isSpatial=ht,Tt=navigator.userAgent.toLowerCase(),wt=Tt.match(/chrome\/(\d*)/),Rt=wt&&Tt.includes("mobile"),[4,(0,at.getSystemInfo)()]):[2];case 1:return It=Ft.sent(),St=It.platform==="Windows"&&It.majorPlatformVersion>=13,Pt=this.isHide&&(St||Rt),Ot=this.audioCtx.state!=="running",vt&&(Pt||Ot)&&(this.logger.warn("".concat(et.RANGE_AUDIO," ").concat(this.userID," stop web audio. system: ").concat(It.platform," ").concat(It.majorPlatformVersion)),vt=!1),this.config.useWebAudio=vt,Ut=Tt.includes("safari")&&!Tt.includes("chrome"),Bt=Tt.includes("micromessenger")&&new RegExp(/(iphone|ipad|ipod|ios)/i).test(Tt),vt||this.stream||(gt=!0),this.config.playOnAudioContext=gt,this.initPanner(),this.isPlaying&&this.sourceNode?(this.lastNode&&this.lastNode.disconnect(),xt=this.sourceNode,this.sourceNode.disconnect(),(yt=this.panner)===null||yt===void 0||yt.disconnect(),(mt=this.gainNode)===null||mt===void 0||mt.disconnect(),this.gainNode?(vt&&(this.config.useGain&&(xt=this.sourceNode.connect(this.gainNode)),this.panner&&ht&&(xt=xt.connect(this.panner))),xt.connect(gt?this.audioCtx.destination:this.destNode),this.lastNode=xt,this.position&&this.setPosition(this.position),this.logger.info(et.RANGE_AUDIO+" play ".concat(ht?"3d":"normal"," stream '").concat(this.userID,"' on ").concat(gt?"audio ctx":"element")),(At=(Et=this.audioEl)===null||Et===void 0?void 0:Et.dom)?(At.onpause=function(){$t.logger.warn(et.RANGE_AUDIO+" ".concat($t.streamID," audio paused"))},At.onerror=function(jt){$t.logger.warn(et.RANGE_AUDIO+" ".concat($t.streamID," audio error, ").concat(jt))},gt?(this.stream&&At.srcObject!==this.stream&&(At.srcObject=this.stream,At.muted=!0,At.oncanplay=function(){At.play().then(function(){$t.logger.info(et.RANGE_AUDIO+" ".concat($t.userID," ctx autoplay success.")),$t.checkPlayStatus()}).catch(function(jt){$t.logger.warn(et.RANGE_AUDIO+" ".concat($t.userID," ctx autoplay failed."))})}),[3,6]):[3,2]):[3,6]):[3,6]):[3,6];case 2:return Mt=this.destNode.stream,(Nt=this.config.needLoopback&&!Bt&&!Ut)&&this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null),vt||!this.stream?[3,3]:(this.logger.info("".concat(et.RANGE_AUDIO," ").concat(this.userID," stop audio api")),this.sourceNode.disconnect(),(bt=this.panner)===null||bt===void 0||bt.disconnect(),(Ct=this.gainNode)===null||Ct===void 0||Ct.disconnect(),Mt=this.stream,[3,5]);case 3:return Nt&&Mt?(this.loopbackConn=this.loopbackConn||new st.default(this.streamID||"",this.logger),this.loopbackConn.onError=function(jt){$t.logger.warn(et.RANGE_AUDIO+" ".concat($t.userID," loopback failed! ").concat(jt)),$t.enableSpatializer($t.isSpatial,!0,!0)},[4,this.loopbackConn.bindStream(Mt,this.streamID||void 0)]):[3,5];case 4:return Mt=Ft.sent(),[3,5];case 5:At.muted=!0,At.srcObject=Mt,this.setSpeaker(this.speaker).catch(function(jt){}),At.oncanplay=function(){if(At){At.muted=!1;var jt=function(zt){$t.logger.error(et.RANGE_AUDIO+" ".concat($t.userID," autoplay failed. error: ").concat(zt)),$t.enableSpatializer($t.isSpatial,!0,!0)};At.play().then(function(){At!=null&&At.paused?jt("audio paused"):($t.logger.info(et.RANGE_AUDIO+" ".concat($t.userID," element autoplay success.")),$t.checkPlayStatus())}).catch(function(zt){jt(zt)})}},Ft.label=6;case 6:return[2]}})})},ut.prototype.checkPlayStatus=function(){var ht=this;setTimeout(function(){var ft;if(ht.isPlaying){var gt=(ft=ht.audioEl)===null||ft===void 0?void 0:ft.dom,vt=ht.audioCtx.state;!gt||gt.paused||gt.muted&&!ht.config.playOnAudioContext||vt!=="running"?(ht.logger.warn("".concat(et.RANGE_AUDIO," ").concat(ht.userID," play detection is abnormal. audio ctx:").concat(vt,", paused:").concat(gt==null?void 0:gt.paused,", muted:").concat(gt==null?void 0:gt.muted)),vt!=="running"&&(ht.audioCtx.resume(),setTimeout(function(){ht.logger.warn("".concat(et.RANGE_AUDIO," ").concat(ht.userID," play resume. audio ctx:").concat(vt,", paused:").concat(gt==null?void 0:gt.paused,", muted:").concat(gt==null?void 0:gt.muted))},1e3))):ht.logger.info("".concat(et.RANGE_AUDIO," ").concat(ht.userID," play detection is fine"))}},2e3)},ut.prototype.inBackground=function(ht,ft){ht===void 0&&(ht=!1),this.isHide!==ht&&(this.isHide=ht,ht||this.config.useWebAudio||this.enableSpatializer(this.isSpatial,!0))},ut}();et.BaseAudioSource=pt},2846:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(pt,ut){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,ft){ht.__proto__=ft}||function(ht,ft){for(var gt in ft)Object.prototype.hasOwnProperty.call(ft,gt)&&(ht[gt]=ft[gt])},nt(pt,ut)},function(pt,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function ht(){this.constructor=pt}nt(pt,ut),pt.prototype=ut===null?Object.create(ut):(ht.prototype=ut.prototype,new ht)}),it=this&&this.__awaiter||function(pt,ut,ht,ft){return new(ht||(ht=Promise))(function(gt,vt){function yt(bt){try{Et(ft.next(bt))}catch(Ct){vt(Ct)}}function mt(bt){try{Et(ft.throw(bt))}catch(Ct){vt(Ct)}}function Et(bt){var Ct;bt.done?gt(bt.value):(Ct=bt.value,Ct instanceof ht?Ct:new ht(function(Tt){Tt(Ct)})).then(yt,mt)}Et((ft=ft.apply(pt,ut||[])).next())})},st=this&&this.__generator||function(pt,ut){var ht,ft,gt,vt,yt={label:0,sent:function(){if(1&gt[0])throw gt[1];return gt[1]},trys:[],ops:[]};return vt={next:mt(0),throw:mt(1),return:mt(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function mt(Et){return function(bt){return function(Ct){if(ht)throw new TypeError("Generator is already executing.");for(;yt;)try{if(ht=1,ft&&(gt=2&Ct[0]?ft.return:Ct[0]?ft.throw||((gt=ft.return)&&gt.call(ft),0):ft.next)&&!(gt=gt.call(ft,Ct[1])).done)return gt;switch(ft=0,gt&&(Ct=[2&Ct[0],gt.value]),Ct[0]){case 0:case 1:gt=Ct;break;case 4:return yt.label++,{value:Ct[1],done:!1};case 5:yt.label++,ft=Ct[1],Ct=[0];continue;case 7:Ct=yt.ops.pop(),yt.trys.pop();continue;default:if(gt=yt.trys,!((gt=gt.length>0&&gt[gt.length-1])||Ct[0]!==6&&Ct[0]!==2)){yt=0;continue}if(Ct[0]===3&&(!gt||Ct[1]>gt[0]&&Ct[1]<gt[3])){yt.label=Ct[1];break}if(Ct[0]===6&&yt.label<gt[1]){yt.label=gt[1],gt=Ct;break}if(gt&&yt.label<gt[2]){yt.label=gt[2],yt.ops.push(Ct);break}gt[2]&&yt.ops.pop(),yt.trys.pop();continue}Ct=ut.call(pt,yt)}catch(Tt){Ct=[6,Tt],ft=0}finally{ht=gt=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Et,bt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.RANGE_AUDIO=void 0;var at=rt(5130),lt=rt(4981);et.RANGE_AUDIO="zc.ra.4";var ct=function(pt){function ut(ht,ft,gt){var vt=pt.call(this,ht,gt)||this;return vt.logger=ht,vt.media=ft.media,vt.position=ft.position||null,vt.createSource(),vt.userID="custom"+new Date().getTime(),vt.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},vt}return ot(ut,pt),ut.prototype.createSource=function(){var ht=this;if((0,lt.isMobile)())return this.logger.info("".concat((0,lt.isMobile)()," ").concat(this.userID," not create src.")),void(this.enableSpatializer=function(){return it(ht,void 0,void 0,function(){return st(this,function(ft){return[2]})})});this.media&&(this.logger.info(et.RANGE_AUDIO+" create el source."),this.sourceNode||(this.sourceNode=this.audioCtx.createMediaElementSource(this.media)),this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"))},ut.prototype.startPlayingAudio=function(ht){var ft,gt;return it(this,void 0,void 0,function(){var vt;return st(this,function(yt){switch(yt.label){case 0:return this.isPlaying?(this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(ht&&this.logger.info(et.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(ht)),this.isPlaying=!0,(0,lt.isMobile)()?(this.media.muted=!1,[2]):(this.audioEl=this.audioEl||at.AudioElPool.useAudioEl()||null,this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat((ft=this.audioEl)===null||ft===void 0?void 0:ft.id)),(vt=(gt=this.audioEl)===null||gt===void 0?void 0:gt.dom)||(this.logger.error(et.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),vt=document.createElement("audio"),this.audioEl={id:-1,dom:vt,used:!0},vt.setAttribute("autoplay","autoplay")),vt.muted=!0,vt.setAttribute("autoplay","autoplay"),vt.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:yt.sent(),yt.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},ut.prototype.stopPlayingAudio=function(ht){if(ht===void 0&&(ht=""),this.isPlaying&&(this.logger.info(et.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+ht),this.isPlaying=!1),(0,lt.isMobile)())this.media.muted=!0;else{this.sourceNode&&this.sourceNode.disconnect();var ft=this.audioEl,gt=ft==null?void 0:ft.dom;gt&&(gt.srcObject=null,gt.parentNode&&gt.parentNode.removeChild(gt));var vt=(ft==null?void 0:ft.id)||-1;ft&&vt>=0&&(at.AudioElPool.stopUsingAudioEl(vt),this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(vt))),this.audioEl=null}},ut.prototype.checkIfCanPlay=function(ht){var ft=this.distance=this.getDistanceFromListener(ht);ft===null||ft>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(ft," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},ut}(lt.BaseAudioSource);et.default=ct},1576:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0});var rt=function(){function nt(){this.handlerListMap={microphoneStateUpdate:[],audioSourceWithinRangeUpdate:[],publishQualityUpdate:[],playQualityUpdate:[],aiDenoiseError:[]}}return nt.getInstance=function(){return nt.instance||(nt.instance=new nt),nt.instance},nt.prototype.addEventHandler=function(ot,it){if(!this.handlerListMap[ot])return!1;if(typeof it!="function")throw new Error("Params callBack is not a Function");return this.handlerListMap[ot].indexOf(it)==-1&&this.handlerListMap[ot].push(it),!0},nt.prototype.removeEventHandler=function(ot,it){return!!this.handlerListMap[ot]&&(this.handlerListMap[ot]=it?this.handlerListMap[ot].filter(function(st){return st!==it}):[],!0)},nt.prototype.emit=function(ot){for(var it=[],st=1;st<arguments.length;st++)it[st-1]=arguments[st];this.handlerListMap[ot]&&this.handlerListMap[ot].forEach(function(at){try{setTimeout(function(){at.apply(void 0,it)},0)}catch(lt){console.error('Fail to execute callback of event "'.concat(ot,'" : ').concat(lt))}})},nt}();et.default=rt},8047:function(_e,et){var rt=this&&this.__awaiter||function(it,st,at,lt){return new(at||(at=Promise))(function(ct,pt){function ut(gt){try{ft(lt.next(gt))}catch(vt){pt(vt)}}function ht(gt){try{ft(lt.throw(gt))}catch(vt){pt(vt)}}function ft(gt){var vt;gt.done?ct(gt.value):(vt=gt.value,vt instanceof at?vt:new at(function(yt){yt(vt)})).then(ut,ht)}ft((lt=lt.apply(it,st||[])).next())})},nt=this&&this.__generator||function(it,st){var at,lt,ct,pt,ut={label:0,sent:function(){if(1&ct[0])throw ct[1];return ct[1]},trys:[],ops:[]};return pt={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(pt[Symbol.iterator]=function(){return this}),pt;function ht(ft){return function(gt){return function(vt){if(at)throw new TypeError("Generator is already executing.");for(;ut;)try{if(at=1,lt&&(ct=2&vt[0]?lt.return:vt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,vt[1])).done)return ct;switch(lt=0,ct&&(vt=[2&vt[0],ct.value]),vt[0]){case 0:case 1:ct=vt;break;case 4:return ut.label++,{value:vt[1],done:!1};case 5:ut.label++,lt=vt[1],vt=[0];continue;case 7:vt=ut.ops.pop(),ut.trys.pop();continue;default:if(ct=ut.trys,!((ct=ct.length>0&&ct[ct.length-1])||vt[0]!==6&&vt[0]!==2)){ut=0;continue}if(vt[0]===3&&(!ct||vt[1]>ct[0]&&vt[1]<ct[3])){ut.label=vt[1];break}if(vt[0]===6&&ut.label<ct[1]){ut.label=ct[1],ct=vt;break}if(ct&&ut.label<ct[2]){ut.label=ct[2],ut.ops.push(vt);break}ct[2]&&ut.ops.pop(),ut.trys.pop();continue}vt=st.call(it,ut)}catch(yt){vt=[6,yt],lt=0}finally{at=ct=0}if(5&vt[0])throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}([ft,gt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.RANGE_AUDIO=void 0,et.RANGE_AUDIO="zc.ra.3";var ot=function(){function it(st,at){this.streamID=st,this.logger=at,this.rtcConn=null,this.loopbackConn=null,this.destStream=new MediaStream,this.onError=null}return it.prototype.bindStream=function(st,at){var lt,ct;return rt(this,void 0,void 0,function(){var pt,ut,ht,ft,gt,vt,yt=this;return nt(this,function(mt){switch(mt.label){case 0:return at&&(this.streamID=at),pt=["completed","connected"],this.rtcConn&&this.loopbackConn&&pt.includes(this.rtcConn.connectionState)?(ut=(lt=this.rtcConn)===null||lt===void 0?void 0:lt.getSenders().find(function(Et){var bt;return((bt=Et.track)===null||bt===void 0?void 0:bt.kind)==="audio"}),st.getTracks().forEach(function(Et){Et.kind==="audio"&&(ut==null||ut.replaceTrack(Et))}),[3,10]):[3,1];case 1:this.rtcConn=new RTCPeerConnection,this.loopbackConn=new RTCPeerConnection,ht={offerVideo:!0,offerAudio:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1},this.rtcConn.onicecandidateerror=function(Et){yt.logger.warn(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback in ice error: ").concat(JSON.stringify(Et)))},this.loopbackConn.onicecandidateerror=function(Et){yt.logger.warn(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback out ice error: ").concat(JSON.stringify(Et)))},this.rtcConn.onicecandidate=function(Et){var bt,Ct=Et.candidate;Ct&&(yt.logger.info(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback add out candidate: ").concat(Ct)),(bt=yt.loopbackConn)===null||bt===void 0||bt.addIceCandidate(new RTCIceCandidate(Ct)))},this.loopbackConn.onicecandidate=function(Et){var bt,Ct=Et.candidate;Ct&&(yt.logger.info(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback add in candidate: ").concat(Ct)),(bt=yt.rtcConn)===null||bt===void 0||bt.addIceCandidate(new RTCIceCandidate(Ct)))},window.setTimeout(function(){yt.rtcConn&&yt.loopbackConn&&(pt.includes(yt.rtcConn.iceConnectionState)&&pt.includes(yt.loopbackConn.iceConnectionState)?yt.logger.info(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback connect ok.")):(yt.logger.warn(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback connect failed. in state: ").concat(yt.rtcConn.iceConnectionState,", out state: ").concat(yt.loopbackConn.iceConnectionState)),yt.close(),yt.onError&&yt.onError("time out")))},2e3),this.loopbackConn.ontrack=function(Et){var bt=Et.track;yt.logger.info(et.RANGE_AUDIO+" ".concat(yt.streamID," loopback receive track")),yt.replaceTrack(bt)},st.getTracks().find(function(Et){var bt;if(Et.kind==="audio")return(bt=yt.rtcConn)===null||bt===void 0||bt.addTrack(Et,st),!0}),mt.label=2;case 2:return mt.trys.push([2,9,,10]),[4,this.rtcConn.createOffer(ht)];case 3:return ft=mt.sent(),[4,this.rtcConn.setLocalDescription(ft)];case 4:return mt.sent(),[4,this.loopbackConn.setRemoteDescription(ft)];case 5:return mt.sent(),[4,this.loopbackConn.createAnswer()];case 6:return(gt=mt.sent()).sdp=(ct=gt.sdp)===null||ct===void 0?void 0:ct.replace(/useinbandfec=/,"stereo=1;useinbandfec="),[4,this.loopbackConn.setLocalDescription(gt)];case 7:return mt.sent(),[4,this.rtcConn.setRemoteDescription(gt)];case 8:return mt.sent(),this.logger.info(et.RANGE_AUDIO+" ".concat(this.streamID," loopback set sdp completed.")),[3,10];case 9:return vt=mt.sent(),this.logger.error(et.RANGE_AUDIO+" ".concat(this.streamID," loopback connect failed.").concat(vt)),this.close(),this.onError&&this.onError("connect failed"),this.onError=null,[3,10];case 10:return[2,this.destStream]}})})},it.prototype.replaceTrack=function(st){var at=this;st.kind==="audio"&&(this.destStream.getTracks().forEach(function(lt){at.destStream.removeTrack(lt)}),this.destStream.addTrack(st))},it.prototype.close=function(){var st=this,at=this.rtcConn,lt=this.loopbackConn;this.destStream.getTracks().forEach(function(ct){st.destStream.removeTrack(ct)}),at==null||at.close(),lt==null||lt.close(),this.rtcConn=null,this.loopbackConn=null},it}();et.default=ot},1646:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.RANGE_AUDIO=void 0;var nt=rt(1297);et.RANGE_AUDIO="zc.ra.2";var ot=function(){function it(st,at){this.logger=st,this.isEnable=!1,this.interval=100,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.userChanged=!1,this.updateUserInterval=1e3,this.updateUserTimer=null,this.audioSourceUpdate=!1,this.maxPlayingQuantity=20,this.allAudioSourceList=[],this.audioSourceWithinRangeList=[],this.localUserList=[],this.rangeListener=at}return it.getInstance=function(st,at){return it.instance||(it.instance=new it(st,at)),it.instance},it.prototype.setAudioSourceUpdate=function(st){this.audioSourceUpdate=st},it.prototype.setListener=function(st){this.rangeListener=st,this.hasChanged=!0,this.userChanged=!0},it.prototype.setAudioSourceList=function(st){this.audioSourceList=st,this.logger.info("".concat(et.RANGE_AUDIO," set src list: [").concat(st.map(function(at){return at.userID}).join(","),"]")),this.hasChanged=!0},it.prototype.setAllAudioSourceList=function(st){st&&(this.allAudioSourceList=st),this.userChanged=!0},it.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasChanged=!0,this.playAudioTask()},it.prototype.playAudioTask=function(){var st=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout(function(){st.playAudioTask()},this.interval)},it.prototype.handlePlayAudioTask=function(){var st=this;if(this.isEnable){this.logger.info("".concat(et.RANGE_AUDIO," handler task start"));var at=this.getTeamAudioSourceGroup(),lt=at.otherList,ct=0;at.teamList.forEach(function(ut){ct<st.maxPlayingQuantity&&(ut.isPlaying||ut.startPlayingAudio("play for team"),ct++)});var pt=this.rangeListener.recvMode===nt.ZegoRangeAudioMode.World;pt&&(lt.forEach(function(ut){ut.distance=ut.getDistanceFromListener(st.rangeListener)}),lt.sort(function(ut,ht){return ut.distance===null?1:ht.distance===null||ut.distance<ht.distance?-1:ut.distance>ht.distance?1:0})),lt.forEach(function(ut){if(pt&&ct<st.maxPlayingQuantity&&ut.sendMode===nt.ZegoRangeAudioMode.World&&ut.distance!==null&&(st.rangeListener.recvRange===null||ut.distance<=st.rangeListener.recvRange))ut.isPlaying||ut.startPlayingAudio("play for range"),ct++;else{var ht="stop for mode or range. mode: ".concat(ut.sendMode,", range: ").concat(ut.distance," > ").concat(st.rangeListener.recvRange);ut.stopPlayingAudio(ht)}}),this.logger.info(et.RANGE_AUDIO+" playing quantity: ".concat(ct,"."))}else this.stopPlayingAudioStream()},it.prototype.startCheckUserInRange=function(){this.logger.info(et.RANGE_AUDIO+" start user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null),this.userChanged=!0,this.userCheckTask()},it.prototype.stopCheckUserInRange=function(){this.logger.info(et.RANGE_AUDIO+" stop user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null)},it.prototype.userCheckTask=function(){var st=this;this.userChanged&&(this.userChanged=!1,this.handleUserCheckTask()),this.updateUserTimer=window.setTimeout(function(){st.userCheckTask()},this.updateUserInterval)},it.prototype.handleUserCheckTask=function(){var st=this;if(this.audioSourceUpdate){var at=[];this.allAudioSourceList.forEach(function(lt){lt.distance=lt.getDistanceFromListener(st.rangeListener);var ct=lt.distance!==null&&(st.rangeListener.recvRange===null||lt.distance<=st.rangeListener.recvRange),pt=!!st.localUserList.find(function(ut){return ut.userID===lt.userID});ct&&pt&&at.push({userID:lt.userID,position:lt.position})}),this.checkAudioSourceListDiff(at,this.audioSourceWithinRangeList)&&this.rangeListener.eventHandler.emit("audioSourceWithinRangeUpdate",at),this.audioSourceWithinRangeList=at}},it.prototype.getTeamAudioSourceGroup=function(){var st=this,at=[],lt=[];return this.audioSourceList.forEach(function(ct){[ct.teamID,st.rangeListener.teamID].includes(void 0)||ct.teamID===""||ct.teamID!==st.rangeListener.teamID?lt.push(ct):at.push(ct)}),{teamList:at,otherList:lt}},it.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach(function(st){st.stopPlayingAudio("stop for all stream")})},it.prototype.setLocalUserList=function(st){this.localUserList=st,this.userChanged=!0},it.prototype.checkAudioSourceListDiff=function(st,at){for(var lt,ct=0;ct<st.length;ct++){lt=!1;for(var pt=0;pt<at.length;pt++)if(st[ct].userID===at[pt].userID){lt=!0;break}if(!lt)return!0}for(var ut=0;ut<at.length;ut++){lt=!1;for(var ht=0;ht<st.length;ht++)if(at[ut].userID===st[ht].userID){lt=!0;break}if(!lt)return!0}return!1},it}();et.default=ot},5947:function(_e,et,rt){var nt=this&&this.__awaiter||function(ut,ht,ft,gt){return new(ft||(ft=Promise))(function(vt,yt){function mt(Ct){try{bt(gt.next(Ct))}catch(Tt){yt(Tt)}}function Et(Ct){try{bt(gt.throw(Ct))}catch(Tt){yt(Tt)}}function bt(Ct){var Tt;Ct.done?vt(Ct.value):(Tt=Ct.value,Tt instanceof ft?Tt:new ft(function(wt){wt(Tt)})).then(mt,Et)}bt((gt=gt.apply(ut,ht||[])).next())})},ot=this&&this.__generator||function(ut,ht){var ft,gt,vt,yt,mt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return yt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function Et(bt){return function(Ct){return function(Tt){if(ft)throw new TypeError("Generator is already executing.");for(;mt;)try{if(ft=1,gt&&(vt=2&Tt[0]?gt.return:Tt[0]?gt.throw||((vt=gt.return)&&vt.call(gt),0):gt.next)&&!(vt=vt.call(gt,Tt[1])).done)return vt;switch(gt=0,vt&&(Tt=[2&Tt[0],vt.value]),Tt[0]){case 0:case 1:vt=Tt;break;case 4:return mt.label++,{value:Tt[1],done:!1};case 5:mt.label++,gt=Tt[1],Tt=[0];continue;case 7:Tt=mt.ops.pop(),mt.trys.pop();continue;default:if(vt=mt.trys,!((vt=vt.length>0&&vt[vt.length-1])||Tt[0]!==6&&Tt[0]!==2)){mt=0;continue}if(Tt[0]===3&&(!vt||Tt[1]>vt[0]&&Tt[1]<vt[3])){mt.label=Tt[1];break}if(Tt[0]===6&&mt.label<vt[1]){mt.label=vt[1],vt=Tt;break}if(vt&&mt.label<vt[2]){mt.label=vt[2],mt.ops.push(Tt);break}vt[2]&&mt.ops.pop(),mt.trys.pop();continue}Tt=ht.call(ut,mt)}catch(wt){Tt=[6,wt],gt=0}finally{ft=vt=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([bt,Ct])}}},it=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(et,"__esModule",{value:!0});var st=rt(1297),at=rt(2730),lt=it(rt(1576));function ct(ut){return{0:1,1:2,2:3}[ut]}var pt=function(){function ut(ht,ft){var gt=this;this.recvMode=st.ZegoRangeAudioMode.World,this.sendMode=st.ZegoRangeAudioMode.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.enableMic=!1,this.isPublishing=!1,this.streamID=null,this.isDenoise=!1,this.zegoRTC=ft,this.audioCtx=ht,this.audioListener=this.audioCtx.listener,this.eventHandler=lt.default.getInstance(),this.zegoRTC.on("publisherStateUpdate",function(vt){var yt=vt.state,mt=vt.errorCode,Et=vt.extendedData,bt=vt.streamID.match(/(.*)_(.*)/);if((bt==null?void 0:bt.length)===3){if(gt.userID!==bt[1])return;yt==="NO_PUBLISH"?(gt.isPublishing=!1,gt.stopPublishingStream()):gt.isPublishing=!0,gt.eventHandler.emit("microphoneStateUpdate",{NO_PUBLISH:st.ZegoRangeAudioMicrophoneState.Off,PUBLISH_REQUESTING:st.ZegoRangeAudioMicrophoneState.TurningOn,PUBLISHING:st.ZegoRangeAudioMicrophoneState.On}[yt],mt,Et)}})}return Object.defineProperty(ut.prototype,"logger",{get:function(){return this.zegoRTC.logger},enumerable:!1,configurable:!0}),ut.getInstance=function(ht,ft){return ut.instance||(ut.instance=new ut(ht,ft)),ut.instance},ut.prototype.updateSelfPosition=function(ht,ft,gt){this.position=ht,this.forwardAxis=ft,Array.isArray(gt)&&(this.upAxis=gt),this.updateListenerEffect()},ut.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},ut.prototype.startPublishingStream=function(){var ht=this;this.enableMic?this.logger.warn(at.RANGE_AUDIO+" mic is already enabled"):(this.enableMic=!0,this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioInput:this.micID||void 0,audioBitrate:30}}).then(function(ft){return nt(ht,void 0,void 0,function(){var gt,vt,yt;return ot(this,function(mt){switch(mt.label){case 0:if(this.userID)return[3,1];throw this.zegoRTC.destroyStream(ft),this.enableMic=!1,Error("Enable mic failed. Please log in room first.");case 1:if(this.audioStream&&this.audioStream!==ft&&this.zegoRTC.destroyStream(this.audioStream),this.audioStream=ft,!this.isDenoise)return[3,5];mt.label=2;case 2:return mt.trys.push([2,4,,5]),[4,this.zegoRTC.enableAiDenoise(ft,this.isDenoise)];case 3:return mt.sent(),[3,5];case 4:return gt=mt.sent(),this.eventHandler.emit("aiDenoiseError",(vt=gt||{}).errorCode,vt.extendedData),[3,5];case 5:yt={range_audio_team_id:this.teamID||"",range_audio_mode:ct(this.sendMode),r_a_s_flag:1},this.streamID=this.userID+"_"+Date.now(),this.zegoRTC.startPublishingStream(this.streamID,ft,{extraInfo:JSON.stringify(yt)}),mt.label=6;case 6:return[2]}})})}).catch(function(ft){throw ht.audioStream=null,ht.enableMic=!1,ft}))},ut.prototype.stopPublishingStream=function(){this.isPublishing&&this.streamID&&this.zegoRTC.stopPublishingStream(this.streamID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null),this.enableMic=!1},ut.prototype.setRecvMode=function(ht){this.recvMode=ht},ut.prototype.setSendMode=function(ht){this.sendMode=ht,this.updateSteamExtraInfo()},ut.prototype.setTeamID=function(ht){this.teamID=ht,this.updateSteamExtraInfo()},ut.prototype.updateSteamExtraInfo=function(){this.streamID&&this.isPublishing&&this.zegoRTC.setStreamExtraInfo(this.streamID,JSON.stringify({range_audio_team_id:this.teamID||"",range_audio_mode:ct(this.sendMode),r_a_s_flag:1}))},ut.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0,this.streamID=null},ut.prototype.enableDenoise=function(ht){var ft=this;return this.audioStream&&this.zegoRTC.enableAiDenoise(this.audioStream,ht).catch(function(gt){ft.isDenoise=!1;var vt=gt||{};ft.eventHandler.emit("aiDenoiseError",vt.errorCode,vt.extendedData)}),this.isDenoise=ht,!0},ut}();et.default=pt},3402:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(pt,ut){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,ft){ht.__proto__=ft}||function(ht,ft){for(var gt in ft)Object.prototype.hasOwnProperty.call(ft,gt)&&(ht[gt]=ft[gt])},nt(pt,ut)},function(pt,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function ht(){this.constructor=pt}nt(pt,ut),pt.prototype=ut===null?Object.create(ut):(ht.prototype=ut.prototype,new ht)}),it=this&&this.__awaiter||function(pt,ut,ht,ft){return new(ht||(ht=Promise))(function(gt,vt){function yt(bt){try{Et(ft.next(bt))}catch(Ct){vt(Ct)}}function mt(bt){try{Et(ft.throw(bt))}catch(Ct){vt(Ct)}}function Et(bt){var Ct;bt.done?gt(bt.value):(Ct=bt.value,Ct instanceof ht?Ct:new ht(function(Tt){Tt(Ct)})).then(yt,mt)}Et((ft=ft.apply(pt,ut||[])).next())})},st=this&&this.__generator||function(pt,ut){var ht,ft,gt,vt,yt={label:0,sent:function(){if(1&gt[0])throw gt[1];return gt[1]},trys:[],ops:[]};return vt={next:mt(0),throw:mt(1),return:mt(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function mt(Et){return function(bt){return function(Ct){if(ht)throw new TypeError("Generator is already executing.");for(;yt;)try{if(ht=1,ft&&(gt=2&Ct[0]?ft.return:Ct[0]?ft.throw||((gt=ft.return)&&gt.call(ft),0):ft.next)&&!(gt=gt.call(ft,Ct[1])).done)return gt;switch(ft=0,gt&&(Ct=[2&Ct[0],gt.value]),Ct[0]){case 0:case 1:gt=Ct;break;case 4:return yt.label++,{value:Ct[1],done:!1};case 5:yt.label++,ft=Ct[1],Ct=[0];continue;case 7:Ct=yt.ops.pop(),yt.trys.pop();continue;default:if(gt=yt.trys,!((gt=gt.length>0&&gt[gt.length-1])||Ct[0]!==6&&Ct[0]!==2)){yt=0;continue}if(Ct[0]===3&&(!gt||Ct[1]>gt[0]&&Ct[1]<gt[3])){yt.label=Ct[1];break}if(Ct[0]===6&&yt.label<gt[1]){yt.label=gt[1],gt=Ct;break}if(gt&&yt.label<gt[2]){yt.label=gt[2],yt.ops.push(Ct);break}gt[2]&&yt.ops.pop(),yt.trys.pop();continue}Ct=ut.call(pt,yt)}catch(Tt){Ct=[6,Tt],ft=0}finally{ht=gt=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Et,bt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.RANGE_AUDIO=void 0;var at=rt(5130),lt=rt(4981);et.RANGE_AUDIO="zc.ra.4";var ct=function(pt){function ut(ht,ft,gt){var vt=pt.call(this,ht,gt)||this;return vt.logger=ht,vt.streamView=ft.streamView,vt.position=ft.position||null,vt.createSource(),vt.userID="stream"+new Date().getTime(),vt.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},vt.streamView.on("_trackChanged",function(yt,mt){yt==="audio"&&(mt?vt.createSource(!0):vt.logger.error("".concat(et.RANGE_AUDIO," ").concat(vt.userID," audio track lost")))}),vt}return ot(ut,pt),ut.prototype.createSource=function(ht){var ft=this;if(ht===void 0&&(ht=!1),(0,lt.isMobile)())return this.logger.info("".concat(et.RANGE_AUDIO," ").concat(this.userID," not create src.")),this.enableSpatializer=function(){return it(ft,void 0,void 0,function(){return st(this,function(yt){return[2]})})},!1;if(!this.streamView)return!1;if(this.logger.info(et.RANGE_AUDIO+" create el source. trackChanged: "+ht),!this.sourceNode||ht){var gt=this.streamView.v.getAudioElement();if(!gt||!gt.srcObject)return this.logger.error(et.RANGE_AUDIO+" create el source. trackChanged: "+ht),!1;gt.muted=!0;var vt=gt.srcObject;this.sourceNode&&this.sourceNode.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(vt),this.enableSpatializer(this.isSpatial,!0)}return this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"),!0},ut.prototype.startPlayingAudio=function(ht){var ft,gt;return it(this,void 0,void 0,function(){var vt;return st(this,function(yt){switch(yt.label){case 0:return this.isPlaying?(this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(ht&&this.logger.info(et.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(ht)),this.isPlaying=!0,(0,lt.isMobile)()?(this.streamView.setAudioMuted(!1),[2]):(this.audioEl=this.audioEl||at.AudioElPool.useAudioEl()||null,this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat((ft=this.audioEl)===null||ft===void 0?void 0:ft.id)),(vt=(gt=this.audioEl)===null||gt===void 0?void 0:gt.dom)||(this.logger.error(et.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),vt=document.createElement("audio"),this.audioEl={id:-1,dom:vt,used:!0},vt.setAttribute("autoplay","autoplay")),vt.muted=!0,vt.setAttribute("autoplay","autoplay"),vt.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:yt.sent(),yt.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},ut.prototype.stopPlayingAudio=function(ht){if(ht===void 0&&(ht=""),this.isPlaying&&(this.logger.info(et.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+ht),this.isPlaying=!1),(0,lt.isMobile)())this.streamView.setAudioMuted(!0);else{this.sourceNode&&this.sourceNode.disconnect();var ft=this.audioEl,gt=ft==null?void 0:ft.dom;gt&&(gt.srcObject=null,gt.parentNode&&gt.parentNode.removeChild(gt));var vt=(ft==null?void 0:ft.id)||-1;ft&&vt>=0&&(at.AudioElPool.stopUsingAudioEl(vt),this.logger.info(et.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(vt))),this.audioEl=null}},ut.prototype.checkIfCanPlay=function(ht){var ft=this.distance=this.getDistanceFromListener(ht);ft===null||ft>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(ft," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},ut}(lt.BaseAudioSource);et.default=ct},5694:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.createPanner=void 0,et.createPanner=function(rt,nt,ot){var it=ot||[0,0,0],st=rt.createPanner(),at=rt.createGain();return st.panningModel="HRTF",st.distanceModel="linear",st.refDistance=1,st.maxDistance=2.6*nt||1,st.rolloffFactor=1,st.coneOuterGain=.4,st.positionX!==void 0?(st.positionX.value=it[1],st.positionY.value=it[2],st.positionZ.value=-it[0]):st.setPosition(it[1],it[2],-it[0]),{panner:st,gainNode:at}}},7803:function(_e,et){function rt(nt){return!isNaN(Number(nt))&&nt!==""&&Number.MAX_SAFE_INTEGER>=Number(nt)&&Number(nt)>=-Number.MAX_SAFE_INTEGER}Object.defineProperty(et,"__esModule",{value:!0}),et.checkCoordinate=et.checkBoolean=et.checkNumber=void 0,et.checkNumber=rt,et.checkBoolean=function(nt){return!1},et.checkCoordinate=function(nt){if(Array.isArray(nt)){for(var ot=0;ot<3;ot++)if(!rt(nt[ot]))return!1;return!0}return!1}},2938:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.AdvancedModule=void 0;var nt=rt(4243),ot=rt(1091),it=rt(4427),st=function(){function at(lt,ct,pt,ut){this.logger=lt,this.dataReport=ct,this.streamCenter=pt,this.stateCenter=ut,this.screenShotReady=!1}return at.prototype.publishTarget=function(lt){var ct=this,pt="";switch(lt.type){case"addpush":pt=it.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event;break;case"delpush":case"clearpush":pt=it.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event}var ut=this.stateCenter.reporter.createSpan(nt.TRACER_LEVEL.H,{key:it.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:lt.streamID},{key:""},pt);return ut.setAttributes({url:it.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.url(lt.pushUrl)}),new Promise(function(ht,ft){var gt=function(yt,mt){ct.logger.error("zb.pt"+(mt||yt.message)),ct.stateCenter.reporter.setError(ut,yt,mt),ft({errorCode:yt.code,extendedData:yt.message+(mt?" "+mt:"")})};if(["addpush","delpush","clearpush"].indexOf(lt.type)==-1)return ct.logger.error("zb.sh.pt cdn push type error"),void gt(ot.errorCodeList.PUBLISHER_CDN_PUSH_ERROR,"type error");if(lt.streamID&&typeof lt.streamID=="string")if(lt.pushUrl&&typeof lt.pushUrl=="string")if(ct.stateCenter.publishStreamList[lt.streamID]){var vt=ct.streamCenter.getRoomByStreamID(lt.streamID);vt?vt.streamHandler._publishTarget(lt,function(yt){ut.end(),ht(yt)},gt):gt(it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError)}else gt(it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError);else gt(it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"push url error");else gt(it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"stream id type error")})},at}();et.AdvancedModule=st},4243:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.streamHandler=et.zegoWebRTC=et.ENUM_PUBLISH_STREAM_STATE=et.ENUM_STREAM_CMD_PRI=et.ENUM_STREAM_SUB_CMD=et.TRACER_LEVEL=et.PROTO_VERSION=void 0;var nt,ot=rt(1091),it=rt(4427);et.PROTO_VERSION="2.22.0",function(st){st[st.I=0]="I",st[st.H=10]="H",st[st.M=100]="M",st[st.L=1e3]="L"}(nt=et.TRACER_LEVEL||(et.TRACER_LEVEL={})),et.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},et.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},et.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},et.zegoWebRTC={setStreamExtraInfo:function(st,at){var lt=this;return new Promise(function(ct,pt){var ut=lt.streamCenter.getRoomByStreamID(st),ht=it.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo,ft=lt.stateCenter.reporter.createSpan(nt.H,ut?{key:it.ZegoRTCLogEvent.kZMLoginRoom.event,par:ut==null?void 0:ut.roomID}:{key:it.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},ht.event);ft.setAttributes({stream_id:ht.stream_id(st),stream_extra_info:ht.stream_extra_info(at)});var gt=function(vt,yt){lt.logger.error("zb.ssei "+yt),lt.stateCenter.reporter.setError(ft,vt,yt),pt({errorCode:vt.code,extendedData:vt.message+" "+yt})};typeof st=="string"&&st!=""?typeof at=="string"&&at!=""?lt.RTM.isDisConnect()?gt(ht.error.kNoLoginError,"not login"):lt.stateCenter.publishStreamList[st]?(ut=lt.streamCenter.getRoomByStreamID(st))?ut.streamHandler.setStreamExtraInfo(st,at,function(vt,yt){var mt,Et,bt,Ct;if(((mt=vt==null?void 0:vt.body)===null||mt===void 0?void 0:mt.err_code)===0||(vt==null?void 0:vt.errorCode)===0)ft.setAttributes({send_seq:ht.send_seq(yt)}),ft.end(),ct({errorCode:((Et=vt==null?void 0:vt.body)===null||Et===void 0?void 0:Et.err_code)===0?(bt=vt==null?void 0:vt.body)===null||bt===void 0?void 0:bt.err_code:vt==null?void 0:vt.errorCode});else{var Tt={errorCode:((Ct=vt==null?void 0:vt.body)===null||Ct===void 0?void 0:Ct.err_code)||(vt==null?void 0:vt.code)};lt.stateCenter.reporter.setError(ft,Tt),pt(Tt)}},gt):gt(ht.error.kNoLoginError,"not login"):gt(ht.error.kPublishStreamNoFoundError):gt(ht.error.kParamError,"extraInfo must be string and no empty"):gt(ht.error.kParamError,"streamID must be string and not empty")})}},et.streamHandler={_publishTarget:function(st,at,lt){var ct=this;this.logger.info("zb.sh.ptcall");var pt=Math.ceil(new Date().getTime()/1e3),ut=st.streamID;this.stateCenter.testEnvironment&&(ut="zegotest-"+this.stateCenter.appid+"-"+st.streamID);var ht={appid:this.stateCenter.appid,biz_type:0,timestamp:pt,seq:this.stateCenter.cdnSeq++,version:1*et.PROTO_VERSION,stream_id:ut,pushurl:st.pushUrl};if(this.logger.debug("zb.sh.pt send command"),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:1,location:"/liveroomcmd/push",cmd:st.type},ht,function(gt){ct.logger.info("zb.sh.pt receive message");var vt=gt||{},yt=vt.code,mt=vt.message;yt&&yt!=0?(ct.logger.error("zb.sh.pt "+st.type+" error code: "+yt+" "+mt),lt(ot.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(st.type," ").concat(yt," ").concat(mt))):(ct.logger.info("zb.sh.pt "+st.type+" success"),at&&at({errorCode:0,extendedData:""}))},function(gt,vt,yt,mt){var Et="";mt||(mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,gt===200?(ct.logger.info("zb.sh.pt error: "+vt),mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,vt==2001?mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:vt==2002&&(mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),Et="cmd: ".concat(st.type,", biz_code: ").concat(vt)):Et="request media server fail, error: "+gt,ct.logger.error("zb.sh.pt "+Et)),lt&&lt(mt,Et)});else{var ft={channel:"media",cmd:st.type,req_body:JSON.stringify(ht)};this.sendBizChannelRequest(ft,function(gt,vt,yt){if(ct.logger.info("zb.sh.pt receive message"),yt.length!=0){var mt=JSON.parse(yt),Et=mt.code,bt=mt.message;Et&&Et!=0?(ct.logger.error("zb.sh.pt "+st.type+" error code: "+Et+" "+bt),lt(ot.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(st.type," ").concat(Et," ").concat(bt))):(ct.logger.info("zb.sh.pt "+st.type+" success"),at&&at({errorCode:0,extendedData:""}))}else lt(it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError)},function(gt,vt,yt){ct.logger.info("zb.sh.pt error: "+gt);var mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError;gt==2001?mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:gt==2002&&(mt=it.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),ct.logger.error("zb.sh.pt "),lt(mt," cmd: ".concat(st.type," ").concat(gt," ").concat("","  "))})}},updateStreamExtraInfo:function(st,at,lt,ct){this.logger.info("zb.sh.usei call");var pt=et.ENUM_STREAM_SUB_CMD.liveUpdate;this.stateCenter.publishStreamList[st]&&this.stateCenter.publishStreamList[st].state>=et.ENUM_PUBLISH_STREAM_STATE.update_info?(this.stateCenter.publishStreamList[st].extra_info=at,this.updateStreamInfo(st,pt,at,lt,ct)):this.stateCenter.publishStreamList[st]&&this.stateCenter.publishStreamList[st].state===et.ENUM_PUBLISH_STREAM_STATE.tryPublish?(this.stateCenter.publishStreamList[st].extra_info=at,lt({errorCode:0})):ct(streamExtraInfoKey.error.kUpdateStreamInfoFailError)},setStreamExtraInfo:function(st,at,lt,ct){this.updateStreamExtraInfo(st,at,lt,ct)}}},1091:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},6012:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0});var nt=rt(2938),ot=rt(4243);et.default={type:"StreamCommon",install:function(it,st,at){for(var lt in Object.defineProperty(st.prototype,"initStreamCommon",{value:function(){this.streamCommonModule=new nt.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),ot.zegoWebRTC)Object.defineProperty(it.prototype,lt,{value:ot.zegoWebRTC[lt],writable:!1});for(var lt in ot.streamHandler)Object.defineProperty(at.prototype,lt,{value:ot.streamHandler[lt],writable:!1})}}},4427:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoRTCLogEvent=void 0;var nt=rt(1091),ot=function(it){return it};et.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:nt.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kNoLoginError:nt.errorCodeList.NOT_LOGIN,kNoResponseError:nt.errorCodeList.PUBLISH_TARGET_NO_RESPONSE,kBizChannelError:nt.errorCodeList.BIZ_CHANNEL_ERROR,kInvalidChannelError:nt.errorCodeList.INVALID_CHANNEL,kUnknownServerError:nt.errorCodeList.UNKNOWN_SERVER_ERROR}},kZegoTaskAddPublishCdnUrl:{event:"/mss/pushadd",error:{kParamError:nt.errorCodeList.INPUT_PARAM},stream_id:ot,url:ot},kZegoTaskRemovePublishCdnUrl:{event:"/mss/pushdel",error:{kParamError:nt.errorCodeList.INPUT_PARAM},stream_id:ot,url:ot},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:nt.errorCodeList.INPUT_PARAM}},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:nt.errorCodeList.INPUT_PARAM,kExtraInfoNullError:nt.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:nt.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:nt.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:nt.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:ot,stream_extra_info:ot,room_sid_string:ot,room_id:ot,send_seq:function(it){return it}}}},3524:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ct){for(var pt,ut=1,ht=arguments.length;ut<ht;ut++)for(var ft in pt=arguments[ut])Object.prototype.hasOwnProperty.call(pt,ft)&&(ct[ft]=pt[ft]);return ct},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(ct,pt,ut,ht){return new(ut||(ut=Promise))(function(ft,gt){function vt(Et){try{mt(ht.next(Et))}catch(bt){gt(bt)}}function yt(Et){try{mt(ht.throw(Et))}catch(bt){gt(bt)}}function mt(Et){var bt;Et.done?ft(Et.value):(bt=Et.value,bt instanceof ut?bt:new ut(function(Ct){Ct(bt)})).then(vt,yt)}mt((ht=ht.apply(ct,pt||[])).next())})},it=this&&this.__generator||function(ct,pt){var ut,ht,ft,gt,vt={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return gt={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function yt(mt){return function(Et){return function(bt){if(ut)throw new TypeError("Generator is already executing.");for(;vt;)try{if(ut=1,ht&&(ft=2&bt[0]?ht.return:bt[0]?ht.throw||((ft=ht.return)&&ft.call(ht),0):ht.next)&&!(ft=ft.call(ht,bt[1])).done)return ft;switch(ht=0,ft&&(bt=[2&bt[0],ft.value]),bt[0]){case 0:case 1:ft=bt;break;case 4:return vt.label++,{value:bt[1],done:!1};case 5:vt.label++,ht=bt[1],bt=[0];continue;case 7:bt=vt.ops.pop(),vt.trys.pop();continue;default:if(ft=vt.trys,!((ft=ft.length>0&&ft[ft.length-1])||bt[0]!==6&&bt[0]!==2)){vt=0;continue}if(bt[0]===3&&(!ft||bt[1]>ft[0]&&bt[1]<ft[3])){vt.label=bt[1];break}if(bt[0]===6&&vt.label<ft[1]){vt.label=ft[1],ft=bt;break}if(ft&&vt.label<ft[2]){vt.label=ft[2],vt.ops.push(bt);break}ft[2]&&vt.ops.pop(),vt.trys.pop();continue}bt=pt.call(ct,vt)}catch(Ct){bt=[6,Ct],ht=0}finally{ut=ft=0}if(5&bt[0])throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}([mt,Et])}}},st=this&&this.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(et,"__esModule",{value:!0}),et.preview=et.zegoWebRTC=void 0;var at=st(rt(954)),lt=rt(3471);et.zegoWebRTC={setBeautyEffect:function(ct,pt,ut,ht){var ft=this;return ht===void 0&&(ht=!0),new Promise(function(gt,vt){var yt,mt;if(!(ct instanceof MediaStream))return ft.logger.error("zc.p.0.sbe.0 localStream not found"),void vt({errorCode:1100001,extendedData:" localStream no found"});var Et=function(wt){gt(wt)},bt=ft.streamCenter.checkPreview(ct);if(!bt)return ft.logger.error("zc.sbe.0 preview no found"),void Et({errorCode:lt.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:lt.errorCodeList.PUBLISH_NO_PREVIEW.message});var Ct=((yt=bt.videoEffect)===null||yt===void 0?void 0:yt.stateFlag)||{base:!1,lowLight:!1};if(ht)!(pt=!!pt)&&Ct.lowLight?ut={sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:Ct.lowLight?1:0}:pt&&(ut=nt({lowlightEnhancement:Ct.lowLight?1:0},ut)),Ct.base=pt;else{var Tt=ut.lowlightEnhancement;ut=!((mt=bt.videoEffect)===null||mt===void 0)&&mt.enabled||Tt!==1?{lowlightEnhancement:Tt}:{sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:Tt},Ct.lowLight=Tt===1}bt.setBeautyEffect(Ct.base||Ct.lowLight,ut,Ct).then(function(){Et({errorCode:0,extendedData:""})}).catch(function(wt){vt({errorCode:wt.errorCode||-1,extendedData:wt.extendedData||wt.toString()})})})},setLowlightEnhance:function(ct,pt){return this.setBeautyEffect(ct,!0,{lowlightEnhancement:pt},!1)}},et.preview={setBeautyEffect:function(ct,pt,ut){return ot(this,void 0,void 0,function(){var ht,ft=this;return it(this,function(gt){switch(gt.label){case 0:if(!this.videoTrack)return this.logger.error("zc.p.0.sbe.0 video track no found"),[2];if(!(typeof WebGLRenderingContext<"u"))throw{errorCode:(ht=lt.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT).code,extendedData:ht.message};return at.default?this.videoEffect?this.videoTrack===this.videoEffect.input?[3,2]:[4,this.videoEffect.setInput(this.videoTrack)]:[3,4]:[3,7];case 1:gt.sent(),gt.label=2;case 2:return[4,this.videoEffect.setBeautyEffectOptions(ct,pt)];case 3:return gt.sent(),this.videoEffect.stateFlag=ut,[3,6];case 4:return this.videoEffect=new at.default(this.logger,this.videoTrack),this.videoEffect.onError=function(vt,yt){ft.stateCenter.actionListener("beautyEffectError",ft.localStream,vt.errorCode,vt.extendedData,yt)},this.videoEffect.onOutputChange=function(vt){return ot(ft,void 0,void 0,function(){var yt,mt;return it(this,function(Et){return this.videoTrack&&this.localStream&&(yt=this.videoTrack,vt&&(yt=vt),this.localStream.getVideoTracks()[0]!==yt&&((mt=this.streamCenter.getPublishList(this.localStream)).map(function(bt){return bt.publisher}).forEach(function(bt){bt&&bt.previewer&&bt.replacePublishedTrack(yt,!0)}),mt.length===0&&this.replacePreviewTrack(yt,!!vt))),[2]})})},[4,this.videoEffect.setBeautyEffectOptions(ct,pt)];case 5:gt.sent(),this.videoEffect.stateFlag=ut,gt.label=6;case 6:return[3,8];case 7:this.logger.error("zc.p.0.sbe.0 beauty effect module no found"),gt.label=8;case 8:return[2]}})})}}},3048:function(_e,et,rt){var nt=this&&this.__awaiter||function(ft,gt,vt,yt){return new(vt||(vt=Promise))(function(mt,Et){function bt(wt){try{Tt(yt.next(wt))}catch(Rt){Et(Rt)}}function Ct(wt){try{Tt(yt.throw(wt))}catch(Rt){Et(Rt)}}function Tt(wt){var Rt;wt.done?mt(wt.value):(Rt=wt.value,Rt instanceof vt?Rt:new vt(function(It){It(Rt)})).then(bt,Ct)}Tt((yt=yt.apply(ft,gt||[])).next())})},ot=this&&this.__generator||function(ft,gt){var vt,yt,mt,Et,bt={label:0,sent:function(){if(1&mt[0])throw mt[1];return mt[1]},trys:[],ops:[]};return Et={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Ct(Tt){return function(wt){return function(Rt){if(vt)throw new TypeError("Generator is already executing.");for(;bt;)try{if(vt=1,yt&&(mt=2&Rt[0]?yt.return:Rt[0]?yt.throw||((mt=yt.return)&&mt.call(yt),0):yt.next)&&!(mt=mt.call(yt,Rt[1])).done)return mt;switch(yt=0,mt&&(Rt=[2&Rt[0],mt.value]),Rt[0]){case 0:case 1:mt=Rt;break;case 4:return bt.label++,{value:Rt[1],done:!1};case 5:bt.label++,yt=Rt[1],Rt=[0];continue;case 7:Rt=bt.ops.pop(),bt.trys.pop();continue;default:if(mt=bt.trys,!((mt=mt.length>0&&mt[mt.length-1])||Rt[0]!==6&&Rt[0]!==2)){bt=0;continue}if(Rt[0]===3&&(!mt||Rt[1]>mt[0]&&Rt[1]<mt[3])){bt.label=Rt[1];break}if(Rt[0]===6&&bt.label<mt[1]){bt.label=mt[1],mt=Rt;break}if(mt&&bt.label<mt[2]){bt.label=mt[2],bt.ops.push(Rt);break}mt[2]&&bt.ops.pop(),bt.trys.pop();continue}Rt=gt.call(ft,bt)}catch(It){Rt=[6,It],yt=0}finally{vt=mt=0}if(5&Rt[0])throw Rt[1];return{value:Rt[0]?Rt[1]:void 0,done:!0}}([Tt,wt])}}},it=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(et,"__esModule",{value:!0}),et.PUBLISH_SET_BEAUTY_EFFECT=void 0;var st=it(rt(8606)),at=it(rt(8658)),lt=it(rt(5934)),ct=it(rt(8302));et.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.2";var pt=rt(3471).errorCodeList.VIDEO_EFFECT_NOT_SUPPORT,ut={errorCode:pt.code,extendedData:pt.message},ht=function(){function ft(gt){this.logger=gt,this.gl=null,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5,lowlightEnhancement:0},this.originResolution={width:0,height:0},this.shaderList=[],this.frameBufferList=[],this.outputTextureList=[],this.inputTexture=null,this.failedTimes=0,this.onRenderError=function(vt){},this.enableBeauty=!1}return ft.prototype.setEnableBeauty=function(gt){this.enableBeauty=!!gt},ft.prototype.handleInitError=function(){this.failedTimes++,this.failedTimes>30&&(this.failedTimes=0,this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" get webgl context failed"),this.onRenderError(ut))},ft.prototype.init=function(gt,vt,yt){return nt(this,void 0,void 0,function(){var mt,Et,bt,Ct;return ot(this,function(Tt){switch(Tt.label){case 0:return window.WebGLRenderingContext!==void 0?(this.canvasEl=yt,this.gl=yt.getContext("webgl"),this.gl?(this.initGL(gt,vt),this.inputTexture?[4,(mt=new lt.default(this.gl,gt,vt)).setConstUniforms()]:(this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" input texture not found"),this.handleInitError(),[2])):(this.handleInitError(),[2])):(this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" not support webgl!"),this.onRenderError(ut),[2]);case 1:return Tt.sent(),(Et=new st.default(this.gl,gt,vt)).setConstUniforms(),(bt=new at.default(this.gl,gt,vt)).setConstUniforms(),(Ct=new ct.default(this.gl,gt,vt)).setConstUniforms(),this.shaderList=[mt,Et,bt,Ct],this.setEffectConfig(this.effectConfig),[2]}})})},ft.prototype.render=function(gt){return nt(this,void 0,void 0,function(){var vt,yt,mt,Et,bt=this;return ot(this,function(Ct){switch(Ct.label){case 0:return(vt=this.gl)&&this.canvasEl&&!vt.isContextLost()?[3,4]:this.canvasEl?(this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" gl lost, restart effect"),this.release(),[4,this.init(gt.videoWidth,gt.videoHeight,this.canvasEl)]):[3,2];case 1:return Ct.sent(),[3,3];case 2:this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" canvas lost"),this.onRenderError(ut),Ct.label=3;case 3:return[2];case 4:return(this.originResolution.height!==gt.videoHeight||this.originResolution.width!==gt.videoWidth)&&(Math.abs(this.originResolution.height-gt.videoHeight)>2||Math.abs(this.originResolution.width-gt.videoWidth)>2)?gt.videoHeight===0||gt.videoWidth===0?[2]:(this.canvasEl.width=gt.videoWidth,this.canvasEl.height=gt.videoHeight,gt.setAttribute("width",gt.videoWidth.toString()),gt.setAttribute("height",gt.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,5]:(this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed to ".concat(gt.videoWidth,"x").concat(gt.videoHeight,", reset resolution.")),this.resetResolution(gt.videoWidth,gt.videoHeight),this.shaderList.forEach(function(Tt){Tt.resetResolution(gt.videoWidth,gt.videoHeight)}),[3,7])):[3,7];case 5:return this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(gt.videoWidth,gt.videoHeight,this.canvasEl)];case 6:Ct.sent(),Ct.label=7;case 7:return yt=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],mt=[0,1,2,0,2,3],Et=[0,0,1,0,1,1,0,1],vt.viewport(0,0,gt.width,gt.height),vt.activeTexture(vt.TEXTURE0),vt.bindTexture(vt.TEXTURE_2D,this.inputTexture),vt.texImage2D(vt.TEXTURE_2D,0,vt.RGBA,vt.RGBA,vt.UNSIGNED_BYTE,gt),this.shaderList.forEach(function(Tt,wt){var Rt=Tt.program;if(Rt){Tt.renderPreTextures&&Tt.renderPreTextures(yt,mt,Et),vt.useProgram(Rt),Tt.render();var It=vt.getUniformLocation(Rt,"uTexture"),St=vt.createBuffer();vt.bindBuffer(vt.ARRAY_BUFFER,St),vt.bufferData(vt.ARRAY_BUFFER,new Float32Array(yt),vt.STATIC_DRAW);var Pt=vt.createBuffer();vt.bindBuffer(vt.ELEMENT_ARRAY_BUFFER,Pt),vt.bufferData(vt.ELEMENT_ARRAY_BUFFER,new Uint16Array(mt),vt.STATIC_DRAW);var Ot=vt.getAttribLocation(Rt,"aPosition");vt.enableVertexAttribArray(Ot),vt.vertexAttribPointer(Ot,3,vt.FLOAT,!1,0,0);var Ut=vt.createBuffer();vt.bindBuffer(vt.ARRAY_BUFFER,Ut),vt.bufferData(vt.ARRAY_BUFFER,new Float32Array(Et),vt.STATIC_DRAW);var Bt=vt.getAttribLocation(Rt,"aTexCoordinate");vt.enableVertexAttribArray(Bt),vt.vertexAttribPointer(Bt,2,vt.FLOAT,!1,0,0);var xt=wt===bt.shaderList.length-1?null:bt.outputTextureList[wt];vt.bindFramebuffer(vt.FRAMEBUFFER,wt===bt.shaderList.length-1?null:bt.frameBufferList[wt]),vt.clearColor(0,0,0,1),vt.clear(vt.COLOR_BUFFER_BIT),vt.drawElements(vt.TRIANGLES,6,vt.UNSIGNED_SHORT,0),vt.activeTexture(vt.TEXTURE0),xt&&vt.bindTexture(vt.TEXTURE_2D,xt),vt.uniform1i(It,0)}}),[2]}})})},ft.prototype.setEffectConfig=function(gt){var vt=this;isNaN(gt.sharpenIntensity)||(this.effectConfig.sharpenIntensity=gt.sharpenIntensity),isNaN(gt.whitenIntensity)||(this.effectConfig.whitenIntensity=gt.whitenIntensity),isNaN(gt.rosyIntensity)||(this.effectConfig.rosyIntensity=gt.rosyIntensity),isNaN(gt.smoothIntensity)||(this.effectConfig.smoothIntensity=gt.smoothIntensity),isNaN(gt.lowlightEnhancement)||(this.effectConfig.lowlightEnhancement=gt.lowlightEnhancement),this.shaderList.forEach(function(yt){yt.setEffectConfig(vt.effectConfig)})},ft.prototype.release=function(){var gt,vt=this;this.shaderList.forEach(function(yt){var mt;yt.program&&((mt=vt.gl)===null||mt===void 0||mt.deleteProgram(yt.program))}),this.outputTextureList.forEach(function(yt){var mt;yt&&((mt=vt.gl)===null||mt===void 0||mt.deleteTexture(yt))}),this.frameBufferList.forEach(function(yt){var mt;yt&&((mt=vt.gl)===null||mt===void 0||mt.deleteFramebuffer(yt))}),this.inputTexture&&((gt=this.gl)===null||gt===void 0||gt.deleteTexture(this.inputTexture)),this.inputTexture=this.gl=null,this.shaderList.forEach(function(yt){yt.release()}),this.shaderList=[],this.outputTextureList=[],this.frameBufferList=[]},ft.prototype.initGL=function(gt,vt){var yt=this.gl;if(!yt)return this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" webgl context not found");this.inputTexture=yt.createTexture(),yt.bindTexture(yt.TEXTURE_2D,this.inputTexture),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_S,yt.CLAMP_TO_EDGE),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_T,yt.CLAMP_TO_EDGE),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MIN_FILTER,yt.LINEAR),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MAG_FILTER,yt.LINEAR);for(var mt=0;4>mt;mt++){var Et=yt.createTexture();if(!Et)return this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" create texture failed");yt.bindTexture(yt.TEXTURE_2D,Et),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_S,yt.CLAMP_TO_EDGE),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_T,yt.CLAMP_TO_EDGE),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MIN_FILTER,yt.LINEAR),yt.texImage2D(yt.TEXTURE_2D,0,yt.RGBA,gt,vt,0,yt.RGBA,yt.UNSIGNED_BYTE,null);var bt=yt.createFramebuffer();if(!bt)return this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" create frame buffer failed");yt.bindFramebuffer(yt.FRAMEBUFFER,bt),yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,Et,0),this.outputTextureList.push(Et),this.frameBufferList.push(bt)}yt.viewport(0,0,gt,vt),this.originResolution.width=gt,this.originResolution.height=vt},ft.prototype.resetResolution=function(gt,vt){var yt=this.gl;if(!yt)return this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" can not find webgl context");for(var mt=0;mt<this.outputTextureList.length;mt++)yt.bindTexture(yt.TEXTURE_2D,this.outputTextureList[mt]),yt.texImage2D(yt.TEXTURE_2D,0,yt.RGBA,gt,vt,0,yt.RGBA,yt.UNSIGNED_BYTE,null);yt.viewport(0,0,gt,vt),this.originResolution.width=gt,this.originResolution.height=vt},ft}();et.default=ht},3471:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.errorCodeList=void 0,et.errorCodeList={VIDEO_EFFECT_NOT_SUPPORT:{code:1103072,message:"not support beauty effect"},VIDEO_TRACK_NOT_READABLE:{code:1103074,message:"video track is not readable"},VIDEO_TRACK_OVERLOAD:{code:1103075,message:"beauty effect overload"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"}}},957:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.BeautyEffect=void 0;var nt=rt(3524);et.BeautyEffect={type:"BeautyEffect",install:function(ot,it){for(var st in nt.preview)Object.defineProperty(it.prototype,st,{value:nt.preview[st],writable:!1});for(var st in nt.zegoWebRTC)Object.defineProperty(ot.prototype,st,{value:nt.zegoWebRTC[st],writable:!1})}}},836:function(_e,et){var rt=this&&this.__awaiter||function(it,st,at,lt){return new(at||(at=Promise))(function(ct,pt){function ut(gt){try{ft(lt.next(gt))}catch(vt){pt(vt)}}function ht(gt){try{ft(lt.throw(gt))}catch(vt){pt(vt)}}function ft(gt){var vt;gt.done?ct(gt.value):(vt=gt.value,vt instanceof at?vt:new at(function(yt){yt(vt)})).then(ut,ht)}ft((lt=lt.apply(it,st||[])).next())})},nt=this&&this.__generator||function(it,st){var at,lt,ct,pt,ut={label:0,sent:function(){if(1&ct[0])throw ct[1];return ct[1]},trys:[],ops:[]};return pt={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(pt[Symbol.iterator]=function(){return this}),pt;function ht(ft){return function(gt){return function(vt){if(at)throw new TypeError("Generator is already executing.");for(;ut;)try{if(at=1,lt&&(ct=2&vt[0]?lt.return:vt[0]?lt.throw||((ct=lt.return)&&ct.call(lt),0):lt.next)&&!(ct=ct.call(lt,vt[1])).done)return ct;switch(lt=0,ct&&(vt=[2&vt[0],ct.value]),vt[0]){case 0:case 1:ct=vt;break;case 4:return ut.label++,{value:vt[1],done:!1};case 5:ut.label++,lt=vt[1],vt=[0];continue;case 7:vt=ut.ops.pop(),ut.trys.pop();continue;default:if(ct=ut.trys,!((ct=ct.length>0&&ct[ct.length-1])||vt[0]!==6&&vt[0]!==2)){ut=0;continue}if(vt[0]===3&&(!ct||vt[1]>ct[0]&&vt[1]<ct[3])){ut.label=vt[1];break}if(vt[0]===6&&ut.label<ct[1]){ut.label=ct[1],ct=vt;break}if(ct&&ut.label<ct[2]){ut.label=ct[2],ut.ops.push(vt);break}ct[2]&&ut.ops.pop(),ut.trys.pop();continue}vt=st.call(it,ut)}catch(yt){vt=[6,yt],lt=0}finally{at=ct=0}if(5&vt[0])throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}([ft,gt])}}};Object.defineProperty(et,"__esModule",{value:!0});var ot=function(){function it(st){this.logger=st,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return it.prototype.startRecordBeautyEffectOutput=function(st){return rt(this,void 0,void 0,function(){var at,lt,ct,pt=this;return nt(this,function(ut){switch(ut.label){case 0:return at=6,this.recordID?(this.logger.warn("zc.p.0.sbe.3 detector is already recording"),[2,{result:!0}]):(lt=new Date().getTime(),this.recordID=lt,this.targetFrameRate=st,this.recordedFrameCount=0,this.recordingDuration=at,[4,new Promise(function(ht){window.setTimeout(ht,1e3*pt.recordingDuration)})]);case 1:return ut.sent(),this.recordID!==lt?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,ct=this.recordedFrameCount/at,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.logger.warn("zc.p.0.sbe.3 detect effect overload: current fps: "+ct),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:ct}]):(this.logger.info("zc.p.0.sbe.3 detect effect current fps: "+ct),[2,{result:!0}]))}})})},it.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},it.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},it}();et.default=ot},6976:function(_e,et){function rt(ot){for(var it=ot,st="",at=0;at<it.length;at++){var lt=it.charCodeAt(at),ct=lt;lt>=65&&lt<=90&&(ct=(lt-65-13+26)%26+65),lt>=97&&lt<=122&&(ct=(lt-97-13+26)%26+97),st+=String.fromCharCode(ct)}return st}Object.defineProperty(et,"__esModule",{value:!0});var nt=function(){function ot(it,st,at){this.gl=it,this.width=st,this.height=at,this.type="baseShader",this.program=null,this.program=null}return ot.prototype.setEffectConfig=function(it){},ot.prototype.setConstUniforms=function(){},ot.prototype.resetResolution=function(it,st){this.width=it||this.width,this.height=st||this.height},ot.prototype.render=function(){},ot.prototype.renderPreTextures=function(it,st,at){},ot.prototype.makeProgram=function(it,st){var at=this.gl,lt=rt(it),ct=rt(st),pt=this.makeShader(lt,at.VERTEX_SHADER),ut=this.makeShader(ct,at.FRAGMENT_SHADER),ht=at.createProgram();return at.attachShader(ht,pt),at.attachShader(ht,ut),at.linkProgram(ht),at.getProgramParameter(ht,at.LINK_STATUS),ht},ot.prototype.release=function(){},ot.prototype.makeShader=function(it,st){var at=this.gl,lt=at.createShader(st);return at.shaderSource(lt,it),at.compileShader(lt),at.getShaderParameter(lt,at.COMPILE_STATUS),lt},ot}();et.default=nt},8606:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(ct,pt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,ht){ut.__proto__=ht}||function(ut,ht){for(var ft in ht)Object.prototype.hasOwnProperty.call(ht,ft)&&(ut[ft]=ht[ft])},nt(ct,pt)},function(ct,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Class extends value "+String(pt)+" is not a constructor or null");function ut(){this.constructor=ct}nt(ct,pt),ct.prototype=pt===null?Object.create(pt):(ut.prototype=pt.prototype,new ut)}),it=this&&this.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(et,"__esModule",{value:!0});var st=it(rt(6976)),at=rt(1199),lt=function(ct){function pt(ut,ht,ft){var gt=ct.call(this,ut,ht,ft)||this;return gt.width=ht,gt.height=ft,gt.type="BlurShader",gt.blurXProgram=null,gt.blurYProgram=null,gt.diffProgram=null,gt.uIntensity=null,gt.smoothIntensity=.5,gt.blurTextureList=[],gt.blurBufferList=[],gt.blurXProgram=gt.makeProgram(at.borderBlurVS,at.borderBlurFS),gt.setBorderBlurProgram(gt.blurXProgram,1/(ht||1),0),gt.blurYProgram=gt.makeProgram(at.borderBlurVS,at.borderBlurFS),gt.setBorderBlurProgram(gt.blurYProgram,0,1/(ft||1)),gt.diffProgram=gt.makeProgram(at.diffBlurVS,at.diffBlurFS),gt.setDiffBlurProgram(gt.diffProgram),gt.program=gt.makeProgram(at.mixBlurVS,at.mixBlurFS),gt.initBlurBuffer(),gt}return ot(pt,ct),pt.prototype.setEffectConfig=function(ut){isNaN(ut.smoothIntensity)||(this.smoothIntensity=ut.smoothIntensity/100)},pt.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},pt.prototype.initBlurBuffer=function(){var ut=this,ht=this.gl;this.blurTextureList.forEach(function(yt){var mt;yt&&((mt=ut.gl)===null||mt===void 0||mt.deleteTexture(yt))}),this.blurBufferList.forEach(function(yt){var mt;yt&&((mt=ut.gl)===null||mt===void 0||mt.deleteFramebuffer(yt))}),this.blurTextureList=[],this.blurBufferList=[];for(var ft=0;ft<3;ft++){var gt=ht.createTexture();if(!gt)return;ht.bindTexture(ht.TEXTURE_2D,gt),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.pixelStorei(ht.UNPACK_FLIP_Y_WEBGL,!0),ht.texImage2D(ht.TEXTURE_2D,0,ht.RGBA,this.width,this.height,0,ht.RGBA,ht.UNSIGNED_BYTE,null);var vt=ht.createFramebuffer();if(!vt)return;ht.bindFramebuffer(ht.FRAMEBUFFER,vt),ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,gt,0),this.blurTextureList.push(gt),this.blurBufferList.push(vt)}},pt.prototype.renderPreTextures=function(ut,ht,ft){var gt=this,vt=this.gl,yt=[0,1,0],mt=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach(function(Et,bt){if(Et){vt.useProgram(Et);var Ct=vt.getUniformLocation(Et,"uTexture");vt.uniform1i(Ct,yt[bt]);var Tt=vt.createBuffer();vt.bindBuffer(vt.ARRAY_BUFFER,Tt),vt.bufferData(vt.ARRAY_BUFFER,new Float32Array(ut),vt.STATIC_DRAW);var wt=vt.createBuffer();vt.bindBuffer(vt.ELEMENT_ARRAY_BUFFER,wt),vt.bufferData(vt.ELEMENT_ARRAY_BUFFER,new Uint16Array(ht),vt.STATIC_DRAW);var Rt=vt.getAttribLocation(Et,"aPosition");vt.enableVertexAttribArray(Rt),vt.vertexAttribPointer(Rt,3,vt.FLOAT,!1,0,0);var It=vt.createBuffer();vt.bindBuffer(vt.ARRAY_BUFFER,It),vt.bufferData(vt.ARRAY_BUFFER,new Float32Array(ft),vt.STATIC_DRAW);var St=vt.getAttribLocation(Et,"aTexCoordinate");vt.enableVertexAttribArray(St),vt.vertexAttribPointer(St,2,vt.FLOAT,!1,0,0),vt.bindFramebuffer(vt.FRAMEBUFFER,gt.blurBufferList[bt]),vt.clearColor(0,0,0,1),vt.clear(vt.COLOR_BUFFER_BIT),vt.drawElements(vt.TRIANGLES,6,vt.UNSIGNED_SHORT,0),vt.activeTexture(vt.TEXTURE0+mt[bt]),vt.bindTexture(vt.TEXTURE_2D,gt.blurTextureList[bt])}})},pt.prototype.setConstUniforms=function(){var ut=this.width,ht=this.height,ft=this.program;if(ft){var gt=this.gl;gt.useProgram(ft);var vt=gt.getUniformLocation(ft,"widthOffset");gt.uniform1f(vt,1/ut);var yt=gt.getUniformLocation(ft,"heightOffset");gt.uniform1f(yt,1/ht),this.uIntensity=gt.getUniformLocation(ft,"blurAlpha"),gt.uniform1f(this.uIntensity,this.smoothIntensity);var mt=gt.getUniformLocation(ft,"blurTexture");gt.uniform1i(mt,1);var Et=gt.getUniformLocation(ft,"blurDiffTexture");gt.uniform1i(Et,2)}},pt.prototype.resetResolution=function(ut,ht){this.width=ut||this.width,this.height=ht||this.height},pt.prototype.setBorderBlurProgram=function(ut,ht,ft){var gt=this.gl;gt.useProgram(ut);var vt=gt.getUniformLocation(ut,"texBlurWidthOffset");gt.uniform1f(vt,ht);var yt=gt.getUniformLocation(ut,"texBlurHeightOffset");gt.uniform1f(yt,ft)},pt.prototype.setDiffBlurProgram=function(ut){var ht=this.gl;ht.useProgram(ut);var ft=ht.getUniformLocation(ut,"blurTexture");ht.uniform1i(ft,1)},pt}(st.default);et.default=lt},5263:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.lightLut=void 0,et.lightLut=`
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAM3mlDQ1BJQ0MgUHJvZmlsZQAAWIWlVwdYU8kWnluS0BJ6lRI60gwoXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixvEopYdt/7vnfzzb3/nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKwB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHMzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fwk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMPsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK289/cB5PzcgKkdpgAvFBUXa0/7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxhUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnvLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTIyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qXCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0fD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOghfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt/DRdSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu/N36blSyRmKQBkfWSAWwv8gNG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C/xab0t+kw6gti89fg5Qa1Qazn6Odhten3RNqSU/lb9CTyCYXpU/wBZ8pkrzwF4c9ioMFNjS9tJ6adtoNbQXtPufOWg3aH/S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux/s2j0Ol92BPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6KhbJcMFsmL5Ltdr5MTvBF/YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN9yVZpnBvSPXC/XBXaR/7oi+w/qv1o3cGm+hOtCT6Ey0/04l+xCBiAHw6SOeJ44jBELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRotbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjmg4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+gF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq/hnXgf/pFAJugTbAjuBAZhCiGNMJtQRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5ksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F3lzeXT5cPkU+V365/Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKhoouimGKnIVVygWKa4V/GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8ioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7qI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro/KJxUaNPU01zgmacZo5mheYRzQ4tTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66GbordQ/r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o/Tn6G/Vb9XvNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7jPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM/MyGyyWb7ZbrPb5vLmruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEbx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74+vHPJ9hMYE/YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetGcJvkNt+tye2tu7O72H2/+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etnrw5vY2+md6X3Ax9TnxSfKp/H9LH0dHoN/dkk2iThpEOTXvu6+871Pe6H+QX6Fftd9Ffzj/Uv978fYBKQFrA7oC/QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkkOqQ85EGodagwtHEyOjl48urJd8PMw/hhh8NBOCN8dfi9CMuIWRG/RhIjIyIrIh9FOUTlR7VEq0fPiN4V/SpmUszymDuxVrGS2OY45bikuOq41/F+8aviO6aMmzJ3yoUEvQRuQn0iKTEusSqxf6r/1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTHJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfjzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq/Ez+KeyDLNysq4IbARFgo5Z7rPWzuoThgirRIhomqherAH/YLZKrCQ/SDqzvbIrst/Mjpt9IEc1h5/TmmuduyT3cV5A3vY5+BzWnOZ84/yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3AlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb/4R/5H748Ul45esX/KxOKX4fAmtpLTk/VLW0vM/OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1a6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXGlI1XN/lsqt1ssLlk87ufuT/f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVhB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95X/v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO/2v+6o8m4qeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS/WXXK5VH/Z7XLjlYlXjl71vnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB/Igvvqdyr/S+/v3K38f+vqfDueNIp19n64PoB3cesh4+/UP0x/uuwkfkR6WPjR5Xdzt2N/UE9Fx+MvVJ11PB04Heoj9V/9zwzOrZwb98/mrtm9LX9Vz4/NPfS1/ovtjxcsLL5v6I/vuvMl8NvC5+o/tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e/ZT56dN/AC1d8Bx8dIG+AAAAHGlET1QAAAACAAAAAAAAAIAAAAAoAAAAgAAAAIAAAB7VdMrVpAAAHqFJREFUeAHsnHmsnmWZxj9nnBlFUUFcx1FxQ0GsuCG77IsKLavKDrJoQYggIOBgpBQKjYBsEWgxhQoGaiUUSmgpDdghyBIEQpGwhqWhQKCEAoE231zXdd/P897Pu3zntD2HZDJ+f7SHAn/4y7Xdz0fs9f75+SeBfxL4f0zgHb13vvNfm59/WcXPO/7vfHrvfve73vWu/7DPv+fPv9nnna2fJrBBf7KKLEf7X++9D5/V38vPe96z2mqrvds+gJKoiE0m4z84IP3WCqn8w0GAVvDvjTSQ3ofWWuuDa665xhprfOAD73+/aBgO8BCRhERKqWEhmzqaFkLEVAIZxl+tIJeV/sd7n/jPj3/sox/9yIc/BBKOQiwE432r4yN5UCBOpEICtVAq/JiHyl872NgfRw2ln4fBZdA/slIQep9Ze+1PffK/PmEcPvqRRMJUQV1AGAYDVqlwOBC6pjKO+ydTacUiSAPZdBMSqUEMVvzv9db94jpf+PxngeHTzoGCIAjTxFofBAo6RCYJMEQjqcMipNJIzpKEJGilQy5ZPMNg4/9IEk7778Nk0dtgzFfWXw8U1vn85xIG6gHGIIhAIqKgMAgjScPEkd0i0whHck1TJYZG9km/ZAZdPwyfzbAQCVxv4w2/+fWvfXXMV7683pdA4QsJg+RAYxQgmBOMiiALuaSE0YZDLWNMZBr9EvQRf0xA/PcuHOWfrzAc/xd6W26+6cYbbfjNbxDC+hUFqQGuYDxIEBmEzFGRoEPcIsZCMCppsGXt42Gaf0sSsbIxLJFD7ecalu58KcHwrwbB6e24/TZbbbHZJgZhgzGksC61YGJANiAcIIfAQdaQNxATToKiKFBEGAWNhCPGhzGpgHi0DsmkKqFAp/m/f+Cf9Hbd5Xs7br/tVt/ZfNNNNv42lbDBV8eMgRRAwSyBaBAGycE5yBkJBCRBEhFFGwtTRogNjo5uHMEzJFP5Bj/VtNH4y4Aj/9hFofejvXYftzMZbL3lFptturEgMBRkiHW/pGBAMlQYaAtxYFIyIgwEJFEjIVUIRbaIVYkHaMxQwahwNOUhkQSNlESGZgJImUXxQ++g/ff54Z67jd35ezttv+02EALdQCV8XVJgLBgFWAIBmdUAW1Qc6iDqJAKKyEJd0k0jq6Nsl5whaYokLIVIhqETE05v/GEHH7Dvj/baY1cy2GG7bbbacgu6oYAQKEgMhmHtTzMdmhxcES6Jwh7WIJYWVXSmkZG6tehX10ZQRyePOpG6Slqt0zv2qPGHH3IgZLDX7onB1ltCCHADIHyLSmAqQApZCxJDUoMwSA7mCxjDBRFAUBJ1ElEWhS48P21oEEYZonW3DODRINJAstpqvZNPOPaoI35yKGSw9w/23H3cLtLBtltv9R0JQRCSH5yCxeM6X6AnMoYODoyIBIKSqEikzPRd4SUSKlW6SC4ZgkZwy0AeTSLv6U38NRAcfeRPDv3xgfvtAyvsNm6X78MLDAQJYRNTgkGgFEwLTqGJIdnC9eCCaIBoJ2GqSBap6aIFRqs2CrcMweO97+2dPek0IPjF0Uf+9LBDDoIMfpgY7Lj9dttICJshErISFI2QAmJhvXU9Hp1CVAMwWDwEDnRGAUKSCCSiKGoo6iwqGKldO5xCw/gQa59jvYt+99szJpwCBD//2fjDDz2YMoAVdpUOwABm2DK7AZkAJbAfIIVIgcMpi8EjEguKKVlyoCCaIAaSSCisUBseyc0aI3QAjRLH6qv3pl1y4bmTMwI44aD9KQMwGEsv7LjDdttug1TcArEoIQhCikYaImshU1A0AAP3U8LQwaFUhIEwTWhb5XXFpMCHexMfULCP5UT8lRj8w/j0D3XQ8eldfcXUi88/56zTTz3lJKjgqCPghIMPgAxohcQAgWBCqEFIUlAsmCNEQWIoMVRywHzwIaUjwwRRAzEkiYRiEItgk+CTeqf0Zv35ymlTLjrv7DMnEsFxxxx15E/phP33pRWcwXd33CGbYbNNKyWYH9iSY2SIlAsc0bSEegLRkNVADG6LBofsjKo2dI7n7nBNFElRqWKgLnKzShxJF/q9N2/2X66eftklF/7ut5MmnvrfJ/3yuGOOPnI8nXDAfmaF3cbRC8YgCgG5SDskCEoFGsIp6JTowOByoC0KDjkhJIgWEIU76v7IDqlk0chOuSV5RL/3bp9/06wZV14+9ffnnzt50mm/MQQ/G/8TOOHA/c0KuzuDnRiKxsAjwSAgGREKNpgghUyBJWGWSJ4o1JDk0M5BgmiCcHM4iQ5RVCiGYrHGGr2//+22uTdABH+49KLzzjnrDENw7NE/OwJOMBn86Ad77YFakA4QihnC5pspEgIErUYzREkhJQM8gWhwDJaRSknaoslBgugC0U6i7o+AooNF75H771ow78brZlx1+VT44OyMgHl4+KEmg71/qDgYN3ZneCEwUDcwEgoIlEJBQfEYxDAkhtIXxsFAtEiig0QTRQ7OEBdrrtl75tEH7759/pzrZ179x2lTfn/Bub898/QJNMLxx/78KITBYYdABkxENCMisWRg1cCCDBAUCgGCayFRiGJoqqGwhTikJeWV4aUxAERyR7JHC4mA4oO9l559bOG9d9x282yI4IrLLr3ofCH4NRGgFY8cTycoDfaGFfbcvWRgiUAh1CFwLwUK61s6lhSsJ0iBpqiqwlyRbVHnEJxhy7JIy9wcfnf4EcYXmzYUa/XefHnREw/dd+eCW26SCKZefOF550yeNHGCIThGYYBAdBkwDgIDDwSORcai3CA7qB4KCApHdQQoKB49H5sYUjhkOSge2jm4M9oUwSdt++gWTfdoDUWv/+aS5558+P67b7917uxrZ1w1/Q/wAaIAnVghgBMQiCiFffeWFchgF+ZBCgRVA4SQIGzEitzwW6oHKCFLoU4BwZBrgqshqiFjGIJDEREOIh+g0AM/3SQ+1Ov333pl8VOPPHjPHbfNu3HWzKuvvPyyS+ADpGGFgGHAQJQMZAXqYCwZpFCkGVwIyQ0JAkvS/eDZiFgIWqgouBi6McgWQQ8hIPh0nQ4NP7rCJW4cWkh8GAD6y159/ulHF/4dNphzw7Uz/jR92hT4AFFwxmmuAuYhOoGBeCD2ERIRcWDVuPP3vRjUjkhFc0MHhCiFJoXSE+0YJIdhcCitUVdEReIjBNBftvSFZx5/6L67br/1ZokAYfj7CxAFhuDkE084DgiwDOgEymC/fWCFFAe77OzlqEAwISQ3qBwKJUQpwBCqCGxH5gKCoRQDPVFgKF1hGLr04IKogWiSEID+8qUvPvvEw/ffc8df591EEfxx2tRLLkIUTD7zdKrAECAP5QSXQbYCJpIz0EqCGYIQvCEzhOwH3wpcjpmCxSMpBDEMwBDkEDkUxhgKhAHoL3/tpUVPPvLgvXcumD939qyZ11x5xR+mXMwomDypQoBKYC0mGWQrsBacgVYS9nISggqyhMDzAaFQSCGFIw+JJgVGQ4GBjVmpIbSmzUk7MKqTExMiJUSaESksP/YxB9Dvv/7yc08hCO66/bZ5N11PEVwOHzAKzgKC35wiFfzimKMZBnACAvFA7iNZAXEgBiqGncgAgRCEwJXgDSklsB4AwaMRUlA2mhQQjoFCmxiyKYQhcOClqVvTZ3UrhySIZI2PZwD915csfvqxh+6/+46/3jJn9nUzr7lqOnzAKACCiRMyAoYBnIBAVBq0MWA5IhAKIaggGQkbbwQI1pEJAqKxNESg4MGQLJHF0InBbBHzwQZE6YtKERWA/htLnn/m8X88cO/fFiALJQLzwe/OQSEkBMf/4hggMCeYDDwR99wj6gAMGAhioETQUqIQ6hCSH1QQJoWGFkgh5KOeGuSJ4WGwfHAOdRABQP/NV15AFD4oG8y5wURw2aUXX3g+0zAgOPbnCAM4AdOgLoPKCxwIwQzej+YGh+DJWPnBpDAEhUIMNQx1VxRyaOcQAfTffPXFRU8+uvA+2GD+XIjgz1cjDOEDREFAgCMBCBAGdAJ7EWmAcZDjIOcBGAQzZCEMgpBmo0MoteDxGIPBxFBh0FHRwFBw4CsMPnyY46cA0H9r6UvPPYUguOdv/3MrCpEiQBhOQSUqDZMKfnn8ccciDxEG7IQgA19Iu7UxUCpSCHRDE4KSMfghZ6MXZcqFtBiGiSGEpGMo4uGTnywBiMDTDAK0wS1zb5xFEUyfBh9cdD6igIVgcSgEFgYeiEEGXIm77cpuRC9wKFZm8I2QGeRMqOrBotGkUFHAWrDpqI5op1AmpJ2YpoaIoeTwqRqA/rLXXl78zOMIgrvvWDD/ZongT380HzQQIA8ZBnICZRAY7FljkALB67EmhJgJUEIKhToEGqKNwkAxBFMUGBKHOgAQWPL8s088spA2uG3enNkUwVXTkw/OnkwVnMpSPOmXJxxHBAwDTYMKgcdBqQMxUDNwJ/F0KtzQhNAuhUSBlsBqkhZSS+QB2YgGw9Aih7UbAPrLX1/yAqLwoQfuvfP2v5oIMIuumDYVPkAUMA0jAuYhw4CBWMhAB1OdgUIx12NmECIBOyENBSihgFAZIlLIGLwrAwV5IiRkG4YmgP7yN155cdFTj/1DNri1EoH6AD4oEaASmId1J1gr6GiMeVAFAs1QE0KeCRlCSkZO58oQoSLoiEY8yhK5LQer4TMtAPr9N1598bmnH3944X20AbIQdTDjTwzDKahERQFmQTYCETAPmzKQFRiJmYG9IDAU62ao52KEMEAKrVposYSJoamGz7YCwCB4afEzTzzy0P1mAyUBGhFhKB+wECoEJ55wPFoxhUHlBBsHakZjME69IAYeCDRDIQQvSC+HvJstGd0PTSl0U2gVQ8TwuXYA/TeXvvz8s08++o8H2Aa3QgTXQwRoxMsdwblnoxOzCohAeZidkNNAVmAcsBYwD8aNtcORz2k5EDIDj0VFQjcEuyU5G5kK0RCFI3JX1ilENXy+A0D/rddAgEFAGzALWQfXMAzNB0zDiADDQPuw5gTbiLQC46BgoCdFM0NNCO4GRYLKoVBC5QeXQshGSaFJQZbowNAFAARQBk8hCGiDBchCEwEakSJQFKgTJ06wUjxRCMow8GLUTqYVhsfAu0FuKCFYPVR+cCn4CZGksEIU1ukE0F/2+iuIQgTBA3+/i1mIVSQRVD5AFEw+c9LphuBXJ53IYaAwKGWgfUQrtDPwYuAjAgKhxQ0DIJSpEA2RY0EdkavStBDF0A1ABBCFj7IPOQmyCNwHXAUNBKoEq0WfBiYDJiLvpVYdWCCwGYIZJAS5IUVCtkOhhAChHgstFKrhZBS+OAAABgHK4NknH3sYQXCXsrAQASuRCFAIUQVeCUkFPo8oA1rB40C1UGUin9ftZMgMfCMoFuGGARA8FMJWKKQwmMKXBgEgAUahgoA2mH/znNnXX/eXGVejEaddxkrEKmAhVAhOhhGYhzaO8jSQDJiIbgWrhdwLOpoKBl6PvpghhBQJKIe6EjwUBkmhk8K6AwH0WYcvLHr6cQYBbXDrPKyiWdfOvAazSH2AdaxtSASnKQ5/lRFwI6d1pJWsaylaIepAr6rOIJhBQijcgEioQ8ALW4CQpNAwRBuF9YYAAAJLXkAUIghkA2ShRIBGtDCEDy44j/MYnZgR4E6SCjICOxSiDEIcBB3weu4UQnBDN4SaHzKEXBE1Cl8eCgDr8MXnnkEQoA/v5iRwEVQ+8CgoEWgbpUpwJ2QZZCukSNRU5kaiDgoGnoqFECwSBkOgH7qlUFFYf0gAIPDKi4sRBG4D7EKsIiSBiYC7iFHghYBxOOHUX5/y3786Ga3oKshO0EqmDDwRrRl9HnQxiPWoRIAQLBKQi3UIXg9dfijDURS+MjQA1uFLz2MTPWI2QBaiEJkEEgF2EU4kRgHSELOgQFA6wXqRKxlp4ImodaBI9JOppoM8FZWKSQgGQd3gDKpgDBDoh1YpVIYYMwwAIIAyWMQgkA2QhbfMzSKwPrAoUCEYAjyZSAURgTmBvegyMCsoDjoZ5HasdhKEkGKxcEMJwZOxAaEWC8MB0F/2BsrAgoBtcMcCFmISAcPwsilcx0pDdCLGYWoEzsOch9YJCsRKBtYKvpD8XLCbyfMgh6LMkITQ5YYmhOiHIhVkiK8OCwAGwVJFIYOAbaAsTCLAKJAPPApQCB0IPAzohLoMqjhoMsihqHasC6ElEhyCvyhQCYTQLoUNhgegv/xNlAGjEH3INsB5hEJ0EdgomHqpogBpSAQYhw0VHGO1KCcwECEDvqRqI2ok6mjU5cxqzDrIxeCBAAZBCNENVS4OASFL4WvDBIBJ9BqjEEGAPnQbzEtJgGVY+QBpiAuhDUG6lLSO6ARLg8QAt4LHQZ1BLkcPhGQGXU6WCIUQymBsU0KOxq8PGwDrkASwCGQDTIJKBJhFCEP2AXyAKGAhcBkVKshhoIHIZ9RKBihGJaKswMcDXc5BByWDwgyohmFBYD00/PCN4QPov4UyYBQiCB68TzZAIboI0IgIQ94HtgqwDRsIqjxUGNAJTRm4FfSAwjjIDPJIUijKDEEIsR+LlcDVHOzQgPDNFQCgOnzhOQUBbHDPncjCLALMIoUh+sCiQAgwC0wFaRuZCiwM6AQPREsDyUCt4OuAVhiSQUrFuhCqhqxOBz4t6dU9K+FbKwKAdcgoVBCwDSwLTQSYRQpD+ECVyG3IO7EVgW1k1qI7IaSBWyHEQZOBikGBkMyAVEQi1CFgKnkudkHYcIUAGAEFgdkAj2W0geoA21hhCB9YFDAN1YktKrA8ZBi4E3Ip5FYIcRB0kIdiwaA0gydClYsDIHx7xQCwDhmFDAL0YWUDbYKZMxSG2EWqRKWhCqFFBXo8Uy26E0IplFawSGwyUDkWgWD1WBdCFQksh7oSNlpBAEYAUchFsNBtoCzkJpAI+FJgPuCNZIXQYgTbh0TgTrB5pDRQMWYrcCWyFoZgADM0hYCR4ELwSKhD2HhFAeA/LGUZYBNhEaAP78Uy9izEiYgDiWGoPoAPeCPxsYCzoKGCKg/dCdaLKQ2CFRiJQzFIgQAGLUIYAGHFAYjAi4u5CBAEsAGzMIiAYchx7JUIBEzDFgR2JTAPWYsWiE0Z6BUtIKjrQAMhBUJqx4JBNRLcDYyEpIRNVgIACKAMPAgWPuAEVIgSARtRPrBKvJCXcisCGwbMQ3eCBWJKAz0c5IEUGOxRdaMysc7AzFBAwP1YuiFDWBkAKoOXnlcQRBtwFd0wC08lEoH5AJVoUeAITp+odei7QAhSHkYnpFLQ4wnfk/moPgwGKRTrDKp+DG4QhJUCAAIoA26iJzCMgw1wH7kIuAyTDywKpAKLAp5JhkDnsvKQ46h0gtIgy6CbgR9N0EEqBgRCNEOxEVwIdANzcfOVA9BfhjpkFDII0Aa0gbIwicDDEH1AH/BAYCGETkwI+HR2wvFE4GFg0yAFot5OKINohSIStZXFQGO5ZNAhhAhhJQGwDl99WVFofag2YBYGESgMVYlYx0IQo6BAwErwMDAn2KHgB6O/odWskKuxySCEYsWgEkJYSt9ZWQAg8PqrikIsgsoGPA48CSQC94EqsZGGbQiiE1plULOCz4NWBggEM0MFwQazJwKFsOVKA+AgWLpEUfgEbIAgsElg03j29ZxFCEOMAvqAV2KZhtrHjkCvh2xF5qHVYnKCetHTIFlhGAxSMbQwKIWw1SoA6L/1xlJFoQcBRxEnQSEChCFGgfmAz4aKgjALWhDkMEjTQL3INKgnYqgFzYNCB10MqnqkELZeFQCsQ0bhoqefDDbALtR95CKwUcBdpEO5C4HekEMehk6QE0IaWCIGGfhKbGUQQxHNUJnBhbDNKgFQHTIKeRooCFIW3nLzHNsEM3EjIgzNBykKWAgNFUQEpRMUiEEGLVYYggFCsW4GF8K2qwaAdYgy4CZiEOA6uvduLmNkIY/kIILgg9SJrQjYil4JKQzkhAEyyAtJtVDoIA1F6KDOwI+G7VYRgJUBohCLABeyjyJMgtvmJxFcOzOFofsAaZijIJ8IlgVUgSOwZZCcoMcjPSLyMZlpUJOBx4FXI55QUh50MXAzbL+qAPrLVQbaRMEGysIsAjQiwxDjWFHAPsgIzkqHohDo+yQg8EqwM0EXsx6PiIBp4Ecz0oADKceBLyRVY8kgjSTXQdWOO6wyABFAGTAIkg14ICoLlQS8kiUCjgKfhgWCM/1Wzgg4D20fhjBwJ3gvNmTgx8JABraWCzPsuOoAMAhYBopCEdBtgFcCFmIlghSGfDrmOi4RTLLnggEIdCfUZNCwgseBIrFdB3UGO40EAJaBopBBoDbwScBCTCLALGIjZh8MA4HlYQgDrSM+JbfJIFtBcTBcBt8dEQAqA65CI6A2sPOIWTj3JtbBdX9RI+pIVBRkArkTSxVwHpYI9HymZ1QiSGlQyMDjoIrEoXTwvZEBAAK4DGIQ4KUIj2UsxFIECkNEQc0HaRbkgcxrOSJIYZCdkHsxp0EeSDEOUjU2MtG98P0RAsA65C72KOQosklghViJgOdBuw98FtQRlHmoWvT3sw4ZuBUUB4rEgQx2HikAVgbcRB4EHEX33JWyMCcBG1EXkldiNgK3ob0cDkCgWsxO8IVovQgnhHEQrYA46Gawy4gBAAGVgRPgLJQNuAtDErARLQxDJYZZoGUUEfg2UisqDzUQgxNa0sDHgaxQRCJmor5mwnfveEPBRho7duQAsA5fi0GQbJALEdcBr2QPw3ofpDvRxiG/UmQpIguAoMxDPaJyHeVpkAMxJKKsUMVBqoUag3EjCUB1mKJQffjAfXgsy1noSSAR2IVU94EXgsZhJwLlod7SiYDToJEGeSfLCikO2hjsOqIAqjLIfeg2QBZqFWUReBjKB8UwsjtxAAI9nnkY5JFcIMgykBUKBooDVGPWwW4jC4AEuAotCHAfBhuoECkCvJzztYhhGPug2obqxIiAT8jJCI0wGEoGlRUQB6kWMoPdRxiA1aEI6DRAH9IGfCpSIWIaVyKwC6kQQTqS1Ik8EdwIQGDDILWi52GXE8pxUDVjikTUgjMYaQAsgyoKEQRqA74SKAuxirIIrBEhggLBBedbGg5GoPfDHAYxEItS8GJsWsGqkQxGHEAkwNMAfchR5FmIQkwi4DZ2HxiBEAX2ZMRZ0KkCRxDCoBGILgNPxGSFEInUwcgDyAQUBLgPow10IQYR2JkcRZCiQIXQjUBXgudhqMXcCfVi1E5ODPbmt2yIA+pgFADg/5YnRyGDAPchR5FsoOMA95ElgR4KPAyjD2wYZQS8lWtZkIaBXtL5lM4wMCdkBnw6ye9HkkFhBWcwKgAyAZ4GNRtYIZoI8FSSfYAkiKvA0lCdyGXUgcAroRYGGUGXDFIzksHoADACtokQBOpDbwNkIQpRIrgRwzA2oosgPZfYqxk7sQVB1Yo5DEonhHnkMlAiFlZAHOw9SgByECzmcRRtoF3IVdQUQYgCv5FUCG0I0jBQK+rLVX672uqEUgaFFTCU9xktAIkANxGCQH2oNtAkQBYWIvA3QxAIUWCPZiyEtIyiERoIwjIIYZAnYpsMYIV9Rw2AEdAqTEHgowiTwC5EPpdhGNqBlJahCKTnEqWhOpGzwLKA/4XFhFPTnaR3dK8EfsFc1WKxEF0GVTEmK+w3egD6y70M+EpCG6AP1QaaBHwy5SoCAkuCPAryLrKXU6UhC2EIBDkPW53g80gy0KmQrLD/KAJIdYh3IgSB+tBHEWzALOQqSiIoGjH7wKJAaegPJgNUoK+UTAVFGNRLQTJIiXjAqAJQGfCJIAUBryO0ASYBspCFOEAE9nXqxTaMmIYVgjPwYjLxNPyHNjKCjgQNAyKoL4PghDYZHDi6APrL7DJAFCoIog1wHqkQgwjyKEh9YOtYaTgMBLkSWmQwPj0bxDSADA4aZQBVFHoQ8DpCG+BA9CxMIuDLeTWLQh8oCnIaohB8H7epoBtBPhRqMjh4tAGIAJ8IEIUMAl5H0QYqxE4R2HeJlygKmIapE+1KqiHQNjoJ3yU087Dei5UMfjzqAECAlwFXIRcBZ6HaAAdiykKtIjViEAEfS0IlKgqYhj4LhkKQxlGtEzwQKxkcMvoArAwsClMQRBuoEGMdhCRIlah1zChwBOzEOgK9mejbFFOB5WFtILoTfB7xWno7ALAM8EiCd6IqCGADHIiYBMpCm8bVLCpGgfkgR4GpYKUQZCfoUJAMDntbAIAAnolqQYBR5DawQmwVgfvAKpFRwDT0QhikgqIVXQX5Yo4yOPztAZCiMAaB2cAnga8iDkNu46IP3AeqREaBp6GNw6YRdCTwqwQ6wYeBNnJeRz4NTAZvEwASsCjkIrD7kG3gNtBxgPuIz2UFAXs5Tk8FjIISATtR72ZVI/iXKQlBZlBdi+4EBeJP3y4AVgaIwhQE6kO3ASdBWkV1BHg7jz5gFHgaeieuKILSCePfNgB2G3kUahGoDzmKaAM7DhoiSM+m00MlehRUnZgOxVIFvpAblVA64Yj/BQAA//8grTFYAAAMPUlEQVTlm+eOVdcShP3CDAjDAIYBRLZBZGyBSQIHrOsoRzleXSfZBJFEEthYDCCSfEGEEUHH3dVh9Vp7nwH5x5wd5g2m1PVVda99XhrM3N/Tx48e3r/3/zu3b964dvXKX3/+cenC+XNnTp86cfzY0cO///brLz//+L///vD9d99+8/VXX37x+WeffvLxRx9+8P5/3nvv0LvvvP3WwYMH9u/bu3fP7jff3LXzjTde37F9+7atW7ds3rxp48YN69e/9uqr69atXbNm9epVK1euWLF8+bJlS5dOLFmyePErryxatHDhggXj4/Pnz5837+WX586dM2f27NljY7NmzXpp5v7/weDp4ylW4O/bt25cvzr51+U/Ll08f+7s6VMnTxw7euTw76TATyxBVEAlOPQuJDjAEuwhCXaRBK9PI8GqJMGES6AaiATQYGxsbEYFGDx9MvXwwb27qsCVy39eunjh3Nkzp0/SEJACNARQoDIENAU8BDQFB/azBLtJgp0iwbZtW7ds2bypMgWZBK6BjAFLYGMwswIMnj2ZesQK3Ll18/q1SbbBxWSDI7BBPgTJB4eSD4IEO3Zsdwk25EaYXgJ1wpwZFoAUePzowf27DoLSBr/9KjYohgAoiD4IKPh3EigM5s60AINnjkIFQbSBspCHwBQIMCx8oCggGk4nwUrDYcZDABFOmHEBWIGEQrLBZbfBSUqDwEKTQOJA8kB8wCjYpz4oaLhpY8UIdRI4D+fNvAASBg4Cz0OkwXFWgAPxpx89EFMiciQSCWIkJhpaJkKC10IoSioiFHUKYiyOQgAOA0GhNgIGgacBSSAKFJ0gKwWcB6EVVDJxw/qqBFwMJiYyJ4yPj49EAAkDRSE1gmgDqQR5K0q1SGCIPLBITMUIKLBmNEwC0iCWowWjEQBh4J1I8pBrodjAemHZCbQZ5j5IKAg0RDl8IQkWjkgADwNpBAQCtwGaMUgQAjF141COgw+8G4ZAYBzWGyFMwaJRCSBhoCik1YCKMechdgPqhYmFGQm0FgGG0QfaCgwFWTms4FCWBOPhyATwMEAnUhDABmdoN0Ag5iz0IZD1IMsD8oGgwCSgJSn14+kkWDxCASQMgELqRAoCSYNkA92PvBPojpiWRPVBgQJk4otIsGSUAiAMFIW0GjAIog10PUok8C1ZEpFhaD7QSBQUGA0RCLolDZuCiZEKkMKAliMFAbajs26DtB/ZEGg3BgyjD9KtAMeClIlaDuslWDpaAQIKqRMxCPhMwkcCupNoM85IYEMgiejHEvKBtuOAgheSYNmIBXAFCIUKAuShpQGWg0wCZqEMAWCIUqCnAlkQggR0MkIg8LkAK0J1CpaPWgAKA+7FhEK6kjAIOA/VBriTVAJRh0AS0WFI+4FWQzmX4GiGk5FKQGczPheUEqwYvQCqAF3KFARcjN0GfipiFqZOIAsSYGilQFckQUGgoQaClsNSgpUNEMBQSHciA8FzbBCHwGFY6wMEwnQSrGqCAKIAtUIFQcpDZqGUIk+DYkv2IdA9WbbEvBgpDbUW5EZY3QgBFIUFCKINShLo5Ry1yGGYTgXBB+iGwyVY0wwBoICjkBuB5KHvBlka2BDIloxEZBhyKRAfyO24SkNvRjYFa9eubYgApADCgFHIIOBirLUQlUCvBDEQyyGwUiB5ECIxBkJFgnVNEUDikHoxo5AbAUCAtyNRQO6FroA+IKUhYBhqOfY8CChQGnot8FBsjgAZCtEIJA+rNvDtQIYAtYhhONQHeEUZIkGDBGAF6OFIUSgg0Dx87hBwLWIYqg8IBdyL4ANDgdLQM5G3JGJBkwSwMNBOpCCot4Gdy6pDkHxgEtCtAMUoDwR5TtvQKAEsDBIIUIxxKbJz4ZHDdjenXigkkFNJGIJqHmBBUBp6JkKCZgkgYcAo5E4kIMB+yAdTXhCzVqSP6RgCdGNORIVhXSQqCnRD4JsRSdAwATgM6CsCboW8HMmGzLtBqUARBxgCrkUBhtKLzAdAQU5DSNA4ATQMGIW8HHke8sH0+UMQfMCfVVgvslagKPBAIAmaJ4CFAToRGgEeTgQEuQ30YBhIEIaAYBgk4M8K9HKqXxbswLVgawMFyFGoIEhHAgWBvyHqkuwkCEMgR0OLxCgBfWHDj8p0MGmiAAUKEwjqbKCtCBdDuxYpDFMpKFqB05AkaKQAqgBQqCAIeRhsYEuyXEp4CNCNEwwrPkA7xmdWfDqlKWimABYGQCGWI94Ps+3oeFoOhgyBNsPgA9sSvRiRBE0VIEdhAkGVhRqI+RAoDGMpqEMBTUFjBYACdCLQTmQbMn9JEPPQWCjVmEmAexktSApDWRJDHqQFgT+229lcASQM0AqtEaQzCRpB6oX6hSEuJUaCNARyLLFeBB84CnY1WIAMhQEE5RDYcpAPAXfjKgwLHxANmywAK8C9mD8u5dVAN2Q+mgcb2LVMWhEPAb405TigIUhrcupFaMfaCnY3WgCEAZ8IZD1EMc7yMK1HGojYj4wEaQjkUmB5gIc0RcGehgsQUCjLEe6leDkJQ3BUj8b5EIRaJOciKwXwgaJgb9MFyFA4BAS2I0sglkNQwNDyQH2wr/ECGAqlE8UNWUCQeqEcStCKjAQ6BDERCx/sb74ACYU4GAsIuBbWshCBWDMEAsNQCtQHB1ogABQQFOqVpAoCqwRg4ZAhkHMRSkHywcE2CCBhIK3QXg2wGugMoBUxCISFlSHIEhFDkHzwVjsEkDCQSxkaAX9IULGBrEcSiNyKAgmKREx58HZLBNAwSJ2oqkB2KEEg8n6knYCGgN9PQAIrBfDBO20RwMMgLUdxBvxcKL0QgVgdApOA35DwmEpXw9YIkKFQnw/FBTENpBIgEOMQ6ILk6wGGAD441B4BRIGEwpo81GYMFj5/CCQPWiSAhsFQFJoNAgs5EJUE1SEQH7RKgITCSidKC6JUAhxKOBADCfhUEnZE8UG7BIgo1A25yENtxmCht6I0BN6NrRl+0DIBShSWIFAbJBZaK9JOIHfjAMMP2yaAolAvZXg+9BlwG0glcBbmJCh80DoBTIGyE4XtSGwAFnogpmKYD8HH7RNgYL2YD8YCgqwW6s04sZADcegQfNJGAaooDArouVAqgbOQW1HtEHzaSgGGotCPBLIggoUxELM4QCJ+1k4BHATRBWE3EBskFnIg1g/B5y0VwBWoBUG0gbNQW1ExBF+0VQDvxVUF7FaWXo8sEGuG4Mv2CkBD8HgKzyZZGPiZJNiAWciBWDMEX7VYgBoUVtIAlcBZqIEY4+DrNgswDQjUBtKMUQnYBjVD8E2rBRiqgNVC2ACVgFnIgVgOwbftFqBeAc/D8HTCNtAh4ED0O8F3LRegphfzp4XxVgYboBIEFnox/L71AmQozFYDqYXyhso2MBZqK5Ih+KH9AtTbYNKeDWADrwTVIeiAALUKDLFBYKGSoAsCVBXwQ1GwgVeCFIhMgk4IUCiQHs+0FlZsoIHIQ9ANASgM6HOiSjGupIGxMAxBVwSoU0DzsLAB90JlIS/JnRGgqoCBQGqh24ArgbKQq3F3BCgUcBCEUuTNWHshV+MOCRAUCIcizUNsRyhFnAZqA96PuiRAHQq1GCcbeDOW5eBwtwQIQyBXEvnV0eQV5CHe0dkGcQg6JkChgIFA8tBtwM1YWXi0awJEBfxUFvOQ04BtoJXgWOcEcAX4C2N9ORIQ1NrgePcEgAJZK1QQIA9LG5zooABlGCgIJA9RC4MNTnZSALcBu8AeUAUEnIcxDU51U4CggIFAinHFBqc7KoApgB9b8AzopxTIw2iDM10VoEShgKBqg7OdFSBHYSUPLQ3OdVgAswEVggwEmQ3Od1kAV8A6kYAAeWhpcKHTAqgC/oQcQMC1kG1wsdsC5CiMIOA85DS41HEBBs/CtTRuyAwC2KDrAoQw0OUogQA26L4AhkLrRAAB9kPYoAcC5CgUEKAYwwZ9ECBDYQAB5+GVXghACvjDkXQigICL8WQ/BEgo1E7kILjaFwFyFCYQXOuNAKKAvp8mEFzvjwARhQkEN3okQEChdCIGwc0+CZB6MVAIENzqlQAWBrIeAgS3eyZARCFAcKdvAgQUAgR/906AhEIBQf8EcBRiPbzbQwEyFN7rpQABhff7KUBC4YOeCuAofNhXAQyFj3orgKJwqscCCAj6LAAr8KTXAjAK+y0AobDnAgwG/wCbrnNMhT0MDgAAAABJRU5ErkJggg==`},8658:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(ct,pt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,ht){ut.__proto__=ht}||function(ut,ht){for(var ft in ht)Object.prototype.hasOwnProperty.call(ht,ft)&&(ut[ft]=ht[ft])},nt(ct,pt)},function(ct,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Class extends value "+String(pt)+" is not a constructor or null");function ut(){this.constructor=ct}nt(ct,pt),ct.prototype=pt===null?Object.create(pt):(ut.prototype=pt.prototype,new ut)}),it=this&&this.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(et,"__esModule",{value:!0});var st=it(rt(6976)),at=rt(1199),lt=function(ct){function pt(ut,ht,ft){var gt=ct.call(this,ut,ht,ft)||this;return gt.width=ht,gt.height=ft,gt.type="LightShader",gt.uLightIntensity=null,gt.uRedIntensity=null,gt.whitenIntensity=.5,gt.rosyIntensity=.5,gt.program=gt.makeProgram(at.lightVS,at.lightFS),gt}return ot(pt,ct),pt.prototype.setEffectConfig=function(ut){isNaN(ut.whitenIntensity)||(this.whitenIntensity=ut.whitenIntensity/100),isNaN(ut.rosyIntensity)||(this.rosyIntensity=ut.rosyIntensity/100)},pt.prototype.render=function(){var ut=this.gl;ut.uniform1f(this.uLightIntensity,this.whitenIntensity),ut.uniform1f(this.uRedIntensity,this.rosyIntensity)},pt.prototype.setConstUniforms=function(){var ut=this.program;if(ut){var ht=this.gl;ht.useProgram(ut),this.uLightIntensity=ht.getUniformLocation(ut,"intensity"),ht.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=ht.getUniformLocation(ut,"rosyIntensity"),ht.uniform1f(this.uRedIntensity,this.rosyIntensity);var ft=ht.getUniformLocation(ut,"uPMVMatrix");ht.uniformMatrix4fv(ft,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},pt}(st.default);et.default=lt},5934:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(ht,ft){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,vt){gt.__proto__=vt}||function(gt,vt){for(var yt in vt)Object.prototype.hasOwnProperty.call(vt,yt)&&(gt[yt]=vt[yt])},nt(ht,ft)},function(ht,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");function gt(){this.constructor=ht}nt(ht,ft),ht.prototype=ft===null?Object.create(ft):(gt.prototype=ft.prototype,new gt)}),it=this&&this.__awaiter||function(ht,ft,gt,vt){return new(gt||(gt=Promise))(function(yt,mt){function Et(Tt){try{Ct(vt.next(Tt))}catch(wt){mt(wt)}}function bt(Tt){try{Ct(vt.throw(Tt))}catch(wt){mt(wt)}}function Ct(Tt){var wt;Tt.done?yt(Tt.value):(wt=Tt.value,wt instanceof gt?wt:new gt(function(Rt){Rt(wt)})).then(Et,bt)}Ct((vt=vt.apply(ht,ft||[])).next())})},st=this&&this.__generator||function(ht,ft){var gt,vt,yt,mt,Et={label:0,sent:function(){if(1&yt[0])throw yt[1];return yt[1]},trys:[],ops:[]};return mt={next:bt(0),throw:bt(1),return:bt(2)},typeof Symbol=="function"&&(mt[Symbol.iterator]=function(){return this}),mt;function bt(Ct){return function(Tt){return function(wt){if(gt)throw new TypeError("Generator is already executing.");for(;Et;)try{if(gt=1,vt&&(yt=2&wt[0]?vt.return:wt[0]?vt.throw||((yt=vt.return)&&yt.call(vt),0):vt.next)&&!(yt=yt.call(vt,wt[1])).done)return yt;switch(vt=0,yt&&(wt=[2&wt[0],yt.value]),wt[0]){case 0:case 1:yt=wt;break;case 4:return Et.label++,{value:wt[1],done:!1};case 5:Et.label++,vt=wt[1],wt=[0];continue;case 7:wt=Et.ops.pop(),Et.trys.pop();continue;default:if(yt=Et.trys,!((yt=yt.length>0&&yt[yt.length-1])||wt[0]!==6&&wt[0]!==2)){Et=0;continue}if(wt[0]===3&&(!yt||wt[1]>yt[0]&&wt[1]<yt[3])){Et.label=wt[1];break}if(wt[0]===6&&Et.label<yt[1]){Et.label=yt[1],yt=wt;break}if(yt&&Et.label<yt[2]){Et.label=yt[2],Et.ops.push(wt);break}yt[2]&&Et.ops.pop(),Et.trys.pop();continue}wt=ft.call(ht,Et)}catch(Rt){wt=[6,Rt],vt=0}finally{gt=yt=0}if(5&wt[0])throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}([Ct,Tt])}}},at=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(et,"__esModule",{value:!0});var lt=at(rt(6976)),ct=rt(1199),pt=rt(5263),ut=function(ht){function ft(gt,vt,yt){var mt=ht.call(this,gt,vt,yt)||this;return mt.width=vt,mt.height=yt,mt.type="LowLightShader",mt.uIntensity=null,mt.lowlightEnhancement=!1,mt.lutTex=null,mt.lutImg=null,mt.lutTexIdx=10,mt.uLutTex=null,mt.program=mt.makeProgram(ct.lightEnhanceVS,ct.lightEnhanceFS),mt}return ot(ft,ht),ft.prototype.setEffectConfig=function(gt){this.lowlightEnhancement=gt.lowlightEnhancement===1},ft.prototype.release=function(){this.gl.deleteTexture(this.lutTex)},ft.prototype.render=function(){var gt=this.gl;gt.uniform1f(this.uIntensity,this.lowlightEnhancement?.6:0);var vt=this,yt=vt.program,mt=vt.width,Et=vt.height,bt=vt.lutTex;if(yt){var Ct=gt.getUniformLocation(yt,"texelWidth");gt.uniform1f(Ct,1/mt);var Tt=gt.getUniformLocation(yt,"texelHeight");gt.uniform1f(Tt,1/Et),gt.activeTexture(gt.TEXTURE0+this.lutTexIdx),gt.bindTexture(gt.TEXTURE_2D,bt)}},ft.prototype.setConstUniforms=function(){return it(this,void 0,void 0,function(){var gt,vt,yt,mt,Et,bt,Ct,Tt,wt,Rt,It=this;return st(this,function(St){switch(St.label){case 0:return gt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],vt=[1,1,1,0,-.344,1.772,1.402,-.714,0],yt=[.298973,-.168721,.500019,.58706,-.331298,-.41873,.113967,.500019,-.081289],(mt=this.program)?((Et=this.gl).useProgram(mt),this.uIntensity=Et.getUniformLocation(mt,"uIntensity"),bt=Et.getUniformLocation(mt,"matYUVtoRGB"),Et.uniformMatrix3fv(bt,!1,vt),Ct=Et.getUniformLocation(mt,"matRGBtoYUV"),Et.uniformMatrix3fv(Ct,!1,yt),Tt=Et.getUniformLocation(mt,"uPMVMatrix"),Et.uniformMatrix4fv(Tt,!1,gt),wt=Et.getUniformLocation(mt,"inputImageTexture2"),Rt=this,[4,new Promise(function(Pt){var Ot=Et.createTexture(),Ut=It.lutTexIdx,Bt=It.lutImg;Bt||(Bt=new Image),Bt.onload=function(){It.lutImg=Bt,Et.activeTexture(Et.TEXTURE0+Ut),Et.bindTexture(Et.TEXTURE_2D,Ot),Et.pixelStorei(Et.UNPACK_FLIP_Y_WEBGL,!1),Et.texImage2D(Et.TEXTURE_2D,0,Et.LUMINANCE,Et.LUMINANCE,Et.UNSIGNED_BYTE,Bt),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_S,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_T,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MIN_FILTER,Et.NEAREST),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MAG_FILTER,Et.NEAREST),Et.uniform1i(wt,Ut),Ot&&Pt(Ot)},Bt.src=pt.lightLut})]):[2];case 1:return Rt.lutTex=St.sent(),[2]}})})},ft}(lt.default);et.default=ut},1199:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.lightEnhanceFS=et.lightEnhanceVS=et.mixBlurFS=et.mixBlurVS=et.diffBlurFS=et.diffBlurVS=et.borderBlurFS=et.borderBlurVS=et.sharpnessFS=et.sharpnessVS=et.lightFS=et.lightVS=void 0,et.lightVS=`cerpvfvba uvtuc sybng;
nggevohgr irp2 nGrkPbbeqvangr;
nggevohgr irp4 nCbfvgvba;
havsbez zng4 hCZIZngevk;
inelvat irp2 iGrkPbbeq;
ibvq znva() {
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    iGrkPbbeq = nGrkPbbeqvangr;
}`,et.lightFS=`cerpvfvba uvtuc sybng;
inelvat irp2 iGrkPbbeq;
havsbez fnzcyre2Q hGrkgher;
havsbez sybng vagrafvgl;
havsbez sybng ebflVagrafvgl;
irp3 oevtugarffNaqPbagenfg(irp3 pbybe){
  sybng v = vagrafvgl * 1.0;
  sybng CV = 3.1415926;
  sybng O = 0.12 * v;
  sybng p = 0.1 * v;
  sybng x = gna((45. + 44. * p) / 180.0 * CV);
  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;
  erghea pbybe;
}
ibvq znva() {
  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);
  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);
  ty_SentPbybe = grkgherPbybe;
}`,et.sharpnessVS=`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng vzntrJvqguSnpgbe;
havsbez sybng vzntrUrvtugSnpgbe;
havsbez sybng funecarff; 
inelvat irp2 iGrkPbbeq;
inelvat irp2 yrsgGrkgherPbbeqvangr;
inelvat irp2 evtugGrkgherPbbeqvangr;
inelvat irp2 gbcGrkgherPbbeqvangr;
inelvat irp2 obggbzGrkgherPbbeqvangr;
inelvat sybng pragreZhygvcyvre;
inelvat sybng rqtrZhygvcyvre;
ibvq znva() {
  ty_Cbfvgvba = nCbfvgvba;
  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);
  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);
  iGrkPbbeq = nGrkPbbeqvangr.kl;
  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;
  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;
  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;
  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;
  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;
  rqtrZhygvcyvre = funecarff;
}
`,et.sharpnessFS=`
cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 iGrkPbbeq;
inelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;
inelvat uvtuc irp2 evtugGrkgherPbbeqvangr;
inelvat uvtuc irp2 gbcGrkgherPbbeqvangr;
inelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;
inelvat uvtuc sybng pragreZhygvcyvre;
inelvat uvtuc sybng rqtrZhygvcyvre;
havsbez fnzcyre2Q hGrkgher;
ibvq znva() {
  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;
  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;
  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);
}`,et.borderBlurVS=`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez uvtuc sybng grkOyheJvqguBssfrg;
havsbez uvtuc sybng grkOyheUrvtugBssfrg;
inelvat irp2 i_grkpbbeq0;
inelvat irp4 grkgherFuvsg_1;
inelvat irp4 grkgherFuvsg_2;
inelvat irp4 grkgherFuvsg_3;
inelvat irp4 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;

  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;

  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);
  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);
}`,et.borderBlurFS=`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
inelvat uvtuc irp4 grkgherFuvsg_1;
inelvat uvtuc irp4 grkgherFuvsg_2;
inelvat uvtuc irp4 grkgherFuvsg_3;
inelvat uvtuc irp4 grkgherFuvsg_4;
ibvq znva(ibvq) { 
  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;
  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); 
}`,et.diffBlurVS=`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez zng4 hCZIZngevk;
inelvat irp2 i_grkpbbeq0;
ibvq znva()
{
  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
}`,et.diffBlurFS=`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
ibvq znva(ibvq) {
  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  irp4 qvssPbybe = vPbybe - zrnaPbybe;
  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);
  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);
  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);
  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);
}`,et.mixBlurVS=`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
inelvat irp2 i_grkpbbeq0;
havsbez sybng jvqguBssfrg;
havsbez sybng urvtugBssfrg;
inelvat irp2 grkgherFuvsg_1;
inelvat irp2 grkgherFuvsg_2;
inelvat irp2 grkgherFuvsg_3;
inelvat irp2 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));
  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));
}
`,et.mixBlurFS=`
cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
havsbez fnzcyre2Q oyheQvssGrkgher;
havsbez ybjc sybng oyheNycun;
ibvq znva(ibvq) {
  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);
  ybjc sybng nycun = oyheNycun * 1.0;
  ybjc sybng gurgn = 0.1;
  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);
  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);
  zrqvhzc sybng xZva = 0.1;
  ybjc irp3 erfhygPbybe;
  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;
  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);
  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));
  ty_SentPbybe = irp4(erfhygPbybe,1.0);
}`,et.lightEnhanceVS=`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng grkryJvqgu;
havsbez sybng grkryUrvtug;
inelvat irp2 grkgherPbbeqvangr[9];
inelvat irp2 grkgherPbbeqvangr2;
havsbez zng4 hCZIZngevk;
ibvq znva(){
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);
    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);
    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);
    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);
    
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;
    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;
    
    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;
    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;
    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;
    
    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;
    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;
    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;
}
`,et.lightEnhanceFS=`cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 grkgherPbbeqvangr[9];
inelvat uvtuc irp2 grkgherPbbeqvangr2;
havsbez fnzcyre2Q hGrkgher;
havsbez fnzcyre2Q vachgVzntrGrkgher2;
havsbez uvtuc zng3 zngLHIgbETO;
havsbez uvtuc zng3 zngETOgbLHI;
havsbez sybng hVagrafvgl;
pbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);
irp4 eto2lhi(irp4 vachgETO) {
    irp3 bhgchgLHI;
    bhgchgLHI = zngETOgbLHI * vachgETO.eto;
    bhgchgLHI -= pbzcIrp;
    erghea irp4(pynzc(bhgchgLHI,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgETO.n);
}
irp2 fnghengvba(irp2 bet, sybng snpgbe) {
    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,
                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);
    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));
}
irp4 lhi2eto(irp4 vachgLHI) {
    irp3 bhgchgETO;
    vachgLHI.eto += pbzcIrp;
    bhgchgETO = zngLHIgbETO * vachgLHI.eto;
    erghea irp4(pynzc(bhgchgETO,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgLHI.n);
}
ibvq znva(){
    irp4 lhi[9];
    sbe(vag v = 0; v < 9; v++){
        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));
    }
    sybng fzbbguL = 0.0;
    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;
    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;
    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;
    fzbbguL = fzbbguL / 16.0;
    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;
    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);
    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));
}
`},8302:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(ct,pt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,ht){ut.__proto__=ht}||function(ut,ht){for(var ft in ht)Object.prototype.hasOwnProperty.call(ht,ft)&&(ut[ft]=ht[ft])},nt(ct,pt)},function(ct,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Class extends value "+String(pt)+" is not a constructor or null");function ut(){this.constructor=ct}nt(ct,pt),ct.prototype=pt===null?Object.create(pt):(ut.prototype=pt.prototype,new ut)}),it=this&&this.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(et,"__esModule",{value:!0});var st=it(rt(6976)),at=rt(1199),lt=function(ct){function pt(ut,ht,ft){var gt=ct.call(this,ut,ht,ft)||this;return gt.width=ht,gt.height=ft,gt.type="SharpnessShader",gt.uIntensity=null,gt.sharpenIntensity=.5,gt.program=gt.makeProgram(at.sharpnessVS,at.sharpnessFS),gt}return ot(pt,ct),pt.prototype.setEffectConfig=function(ut){isNaN(ut.sharpenIntensity)||(this.sharpenIntensity=ut.sharpenIntensity/100)},pt.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},pt.prototype.resetResolution=function(ut,ht){this.width=ut||this.width,this.height=ht||this.height,this.setConstUniforms()},pt.prototype.setConstUniforms=function(){var ut=this.width,ht=this.height,ft=this.program;if(ft){var gt=this.gl;gt.useProgram(ft);var vt=gt.getUniformLocation(ft,"imageWidthFactor");gt.uniform1f(vt,1/ut);var yt=gt.getUniformLocation(ft,"imageHeightFactor");gt.uniform1f(yt,1/ht),this.uIntensity=gt.getUniformLocation(ft,"sharpness"),gt.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},pt}(st.default);et.default=lt},954:function(_e,et,rt){var nt=this&&this.__awaiter||function(gt,vt,yt,mt){return new(yt||(yt=Promise))(function(Et,bt){function Ct(Rt){try{wt(mt.next(Rt))}catch(It){bt(It)}}function Tt(Rt){try{wt(mt.throw(Rt))}catch(It){bt(It)}}function wt(Rt){var It;Rt.done?Et(Rt.value):(It=Rt.value,It instanceof yt?It:new yt(function(St){St(It)})).then(Ct,Tt)}wt((mt=mt.apply(gt,vt||[])).next())})},ot=this&&this.__generator||function(gt,vt){var yt,mt,Et,bt,Ct={label:0,sent:function(){if(1&Et[0])throw Et[1];return Et[1]},trys:[],ops:[]};return bt={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(bt[Symbol.iterator]=function(){return this}),bt;function Tt(wt){return function(Rt){return function(It){if(yt)throw new TypeError("Generator is already executing.");for(;Ct;)try{if(yt=1,mt&&(Et=2&It[0]?mt.return:It[0]?mt.throw||((Et=mt.return)&&Et.call(mt),0):mt.next)&&!(Et=Et.call(mt,It[1])).done)return Et;switch(mt=0,Et&&(It=[2&It[0],Et.value]),It[0]){case 0:case 1:Et=It;break;case 4:return Ct.label++,{value:It[1],done:!1};case 5:Ct.label++,mt=It[1],It=[0];continue;case 7:It=Ct.ops.pop(),Ct.trys.pop();continue;default:if(Et=Ct.trys,!((Et=Et.length>0&&Et[Et.length-1])||It[0]!==6&&It[0]!==2)){Ct=0;continue}if(It[0]===3&&(!Et||It[1]>Et[0]&&It[1]<Et[3])){Ct.label=It[1];break}if(It[0]===6&&Ct.label<Et[1]){Ct.label=Et[1],Et=It;break}if(Et&&Ct.label<Et[2]){Ct.label=Et[2],Ct.ops.push(It);break}Et[2]&&Ct.ops.pop(),Ct.trys.pop();continue}It=vt.call(gt,Ct)}catch(St){It=[6,St],mt=0}finally{yt=Et=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([wt,Rt])}}},it=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(et,"__esModule",{value:!0}),et.PUBLISH_SET_BEAUTY_EFFECT=void 0;var st=it(rt(836)),at=it(rt(3048)),lt=rt(3471),ct=lt.errorCodeList.VIDEO_TRACK_NOT_READABLE,pt=lt.errorCodeList.VIDEO_TRACK_OVERLOAD,ut={errorCode:ct.code,extendedData:ct.message},ht={errorCode:pt.code,extendedData:pt.message};et.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.1";var ft=function(){function gt(vt,yt){var mt=this;this.logger=vt,this.kind="video",this._enabled=!1,this.lastRenderTime=0,this.stateFlag={base:!1,lowLight:!1},this.isStarting=!1,this.animationFrameId=0,this.backgroundLoop=null,this.eventHandler={visibilitychange:function(){if(document.hidden){var Et=function(){return nt(mt,void 0,void 0,function(){return ot(this,function(bt){switch(bt.label){case 0:return this.backgroundLoop=window.setTimeout(Et,Math.floor(1e3/this.fps)),!document.hidden&&this.backgroundLoop?(clearTimeout(this.backgroundLoop),this.backgroundLoop=null,[2]):[4,this.renderAFrame()];case 1:return bt.sent(),[2]}})})};Et()}else mt.backgroundLoop&&(clearTimeout(mt.backgroundLoop),mt.backgroundLoop=null)}},this.setInput(yt,!0),this.fps=15,this.detector=new st.default(vt),this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null,this.lastRenderTime=0,this.manager=new at.default(vt),this.manager.onRenderError=function(Et){Et.errorCode===1103072&&mt.stopEffect(),mt.onError(Et)}}return Object.defineProperty(gt.prototype,"enabled",{get:function(){return this._enabled},set:function(vt){this._enabled=vt},enumerable:!1,configurable:!0}),Object.defineProperty(gt.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),Object.defineProperty(gt.prototype,"options",{get:function(){return this.manager.effectConfig||{}},enumerable:!1,configurable:!0}),gt.prototype.setBeautyEffectOptions=function(vt,yt){return yt===void 0&&(yt={}),nt(this,void 0,void 0,function(){return ot(this,function(mt){switch(mt.label){case 0:return vt&&this.manager.setEffectConfig(yt),this.enabled===vt?[3,6]:(this.manager.setEnableBeauty(vt),this.enabled!==vt&&this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" effect enabled "+vt+"; options: "+JSON.stringify(yt)),this.enabled=vt,vt?this.input?[4,this.startEffect()]:[3,2]:[3,3]);case 1:mt.sent(),mt.label=2;case 2:return[3,5];case 3:return[4,this.stopEffect()];case 4:mt.sent(),mt.label=5;case 5:mt.label=6;case 6:return[2]}})})},gt.prototype.startEffect=function(){return nt(this,void 0,void 0,function(){var vt,yt,mt=this;return ot(this,function(Et){switch(Et.label){case 0:return this.isStarting=!0,this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" call start effect"),this.input?this.input&&this.output&&this.input!==this.output?(this.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" video effect is already enabled"),[2]):[4,this.startWebGLProcessor().catch(function(bt){throw mt.stopEffect(),bt})]:(this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" start effect failed, input track is null"),[2]);case 1:return vt=Et.sent(),[4,this.updateOutput(vt)];case 2:return Et.sent(),this.enabled=!0,this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" start effect success"),this.detector.startRecordBeautyEffectOutput(this.fps).then(function(bt){!bt.result&&mt.onError&&mt.onError(ht,{targetFPS:bt.targetFPS,currentFPS:bt.currentFPS})}),yt=function(){return nt(mt,void 0,void 0,function(){return ot(this,function(bt){switch(bt.label){case 0:return this.enabled&&(this.animationFrameId=requestAnimationFrame(yt)),[4,this.renderAFrame()];case 1:return bt.sent(),[2]}})})},this.animationFrameId=requestAnimationFrame(yt),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.isStarting=!1,[2]}})})},gt.prototype.renderAFrame=function(){return nt(this,void 0,void 0,function(){var vt,yt,mt;return ot(this,function(Et){switch(Et.label){case 0:return vt=Date.now(),yt=1e3/this.fps,(mt=this.lastRenderTime?vt-this.lastRenderTime:yt)>=yt?(this.lastRenderTime=vt-(mt-yt),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.enabled&&this.videoEl?this.videoEl.videoWidth>6&&this.videoEl.videoHeight>6?[4,this.manager.render(this.videoEl)]:[3,2]:[3,3]):[3,3];case 1:Et.sent(),Et.label=2;case 2:this.output&&this.output.requestFrame&&this.output.requestFrame(),this.detector.addFrame(),Et.label=3;case 3:return[2]}})})},gt.prototype.stopEffect=function(){return nt(this,void 0,void 0,function(){var vt=this;return ot(this,function(yt){switch(yt.label){case 0:return this.enabled=!1,this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" call stop effect"),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),[4,this.updateOutput()];case 1:return yt.sent(),this.removeDomTimer===void 0&&(this.removeDomTimer=window.setTimeout(function(){vt.enabled===!1&&vt.destroy()},18e4)),document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),[2]}})})},gt.prototype.destroy=function(){this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},gt.prototype.startWebGLProcessor=function(){return nt(this,void 0,void 0,function(){var vt,yt,mt,Et,bt=this;return ot(this,function(Ct){switch(Ct.label){case 0:return this.input?(this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),this.canvasEl&&this.videoEl?[3,2]:(this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" create elements"),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=void 0),this.videoEl&&(this.videoEl.remove(),this.videoEl=void 0),this.canvasEl=document.createElement("canvas"),this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay",""),this.videoEl.setAttribute("muted",""),this.videoEl.muted=!0,this.videoEl.setAttribute("playsinline",""),this.videoEl.setAttribute("style","display:none"),vt=new Promise(function(Tt,wt){var Rt=null,It=function(){Rt&&clearTimeout(Rt),bt.videoEl&&bt.videoEl.removeEventListener("playing",It),Tt(void 0)};bt.videoEl&&bt.videoEl.addEventListener("playing",It),Rt=window.setTimeout(function(){bt.logger.warn(et.PUBLISH_SET_BEAUTY_EFFECT+" video track error"),wt(ut)},1e3)}),this.videoEl.srcObject=new MediaStream([this.input]),this.videoEl.play(),[4,vt])):(this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" input track is null"),[2]);case 1:Ct.sent(),Ct.label=2;case 2:if(yt=this.input.getSettings(),mt=yt.width||this.videoEl.videoWidth,Et=yt.height||this.videoEl.videoHeight,yt.frameRate&&this.fps!==yt.frameRate&&(this.fps=yt.frameRate,this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" set target fps: "+this.fps)),this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" beauty video processor: width "+yt.width+" height "+yt.height),!mt||!Et)throw this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" resolution of track is wrong"),ut;return this.canvasEl.width=mt,this.canvasEl.height=Et,this.videoEl.setAttribute("width",mt.toString()),this.videoEl.setAttribute("height",Et.toString()),this.manager.init(mt,Et,this.canvasEl),[2,this.canvasEl.captureStream().getVideoTracks()[0]]}})})},gt.prototype.setInput=function(vt,yt){return yt===void 0&&(yt=!1),nt(this,void 0,void 0,function(){var mt,Et;return ot(this,function(bt){switch(bt.label){case 0:return vt===this.input?[3,6]:vt.kind!==this.kind?(this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" kind of track is not video"),[2]):(this.output&&this.input===this.output&&this.logger.error(et.PUBLISH_SET_BEAUTY_EFFECT+" input track is same as effect track"),this.logger.info(et.PUBLISH_SET_BEAUTY_EFFECT+" change input track"),yt?this.input?[4,this.removeInput()]:[3,2]:[3,5]);case 1:bt.sent(),bt.label=2;case 2:return this.input=vt,this.enabled&&!this.videoEl?[4,this.startEffect()]:[3,4];case 3:bt.sent(),bt.label=4;case 4:return[3,6];case 5:this.input=vt,(mt=this.videoEl)&&(mt.srcObject?((Et=mt.srcObject).getTracks().forEach(function(Ct){return Et.removeTrack(Ct)}),Et.addTrack(this.input)):mt.srcObject=new MediaStream([this.input]),mt.play()),bt.label=6;case 6:return[2]}})})},gt.prototype.removeInput=function(){return nt(this,void 0,void 0,function(){return ot(this,function(vt){switch(vt.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return vt.sent(),[2]}})})},gt.prototype.updateOutput=function(vt){return nt(this,void 0,void 0,function(){return ot(this,function(yt){switch(yt.label){case 0:return this.output===vt?[3,3]:(this._output=vt,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:yt.sent(),yt.label=2;case 2:yt.label=3;case 3:return[2]}})})},gt.prototype.onOutputChange=function(vt){return nt(this,void 0,void 0,function(){return ot(this,function(yt){return[2]})})},gt.prototype.onError=function(vt,yt){},gt}();et.default=ft},6171:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.AudioNodeQueue=void 0;var rt=function(){function nt(ot,it){this.source=ot,this.destination=it,this.audioNodeList=[],this.source.disconnect(),this.source.connect(this.destination)}return Object.defineProperty(nt.prototype,"destinationNode",{get:function(){return this.destination},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[this.audioNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"secondToLastNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[this.audioNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"secondNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[1]},enumerable:!1,configurable:!0}),nt.prototype.pushBack=function(ot){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(ot),ot.connect(this.destination)):(this.source.disconnect(),this.source.connect(ot),ot.connect(this.destination)),this.audioNodeList.push(ot)},nt.prototype.popBack=function(){this.lastNode&&(this.lastNode.disconnect(),this.secondToLastNode?(this.secondToLastNode.disconnect(),this.secondToLastNode.connect(this.destination)):(this.source.disconnect(),this.source.connect(this.destination))),this.audioNodeList.pop()},nt.prototype.pushFront=function(ot){this.source.disconnect(),this.source.connect(ot),ot.connect(this.firstNode?this.firstNode:this.destination),this.audioNodeList.unshift(ot)},nt.prototype.popFront=function(){this.source.disconnect(),this.firstNode&&(this.firstNode.disconnect(),this.source.connect(this.secondNode?this.secondNode:this.destination)),this.audioNodeList.shift()},nt.prototype.remove=function(ot){var it=this.audioNodeList.indexOf(ot);if(it!==-1){if(ot.disconnect(),it-1>=0){var st=this.audioNodeList[it-1];st.disconnect(),st.connect(this.lastNode!=ot?this.audioNodeList[it+1]:this.destination)}else this.source.disconnect(),this.source.connect(this.lastNode!=ot?this.audioNodeList[it+1]:this.destination);this.audioNodeList.splice(it,1)}},nt.prototype.isConnected=function(ot){return this.audioNodeList.indexOf(ot)!==-1},nt.prototype.isEmpty=function(){return this.audioNodeList.length===0},nt.prototype.replaceSource=function(ot){this.source.disconnect(),ot.connect(this.firstNode?this.firstNode:this.destination),this.source=ot},nt.prototype.replaceDestination=function(ot){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(ot)):(this.source.disconnect(),this.source.connect(ot)),this.destination=ot},nt}();et.AudioNodeQueue=rt},608:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.getChromeVer=et.getPlaySourceType=et.generaStreamSid=et.ClientUtil=void 0;var nt=rt(6706),ot=rt(3529),it=rt(7139),st=function(){function at(){}return at.checkIllegalCharacters=function(lt){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(lt)&&/^[^:/]*$/g.test(lt)},at.isUrl=function(lt){return!!(lt.startsWith("rtmp://")||lt.startsWith("avertp://")||lt.startsWith("https://")&&lt.endsWith(".flv")||lt.startsWith("https://")&&lt.endsWith(".m3u8"))},at.registerCallback=function(lt,ct,pt){ct.success&&(pt[lt+"SuccessCallback"]=ct.success),ct.error&&(pt[lt+"ErrorCallback"]=ct.error)},at.actionErrorCallback=function(lt,ct){return ct[lt+"ErrorCallback"]},at.actionSuccessCallback=function(lt,ct){return ct[lt+"SuccessCallback"]},at.logReportCallback=function(lt,ct,pt,ut){at.registerCallback(lt,{success:function(ht,ft){for(var gt=[],vt=2;vt<arguments.length;vt++)gt[vt-2]=arguments[vt];at.dataReportEvent(ct,pt,ht,ft,gt)}},ut)},at.actionLogReportCallback=function(lt,ct,pt,ut,ht){at.actionSuccessCallback(lt,ct)&&at.actionSuccessCallback(lt,ct)(pt,ut)},at.getServerError=function(lt,ct,pt){if(ct)return{code:lt,message:pt||"liveroom error"};var ut={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",1013:"token03 format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(lt===0)return{code:0,message:""};var ht={code:0,message:"liveroom cmd error"};if(ht.code=lt,lt>1e9){var ft=ut[lt];ht.message=ft?"liveroom cmd error, code: "+lt+", message: "+ft:ut[1e9]+lt}else ht.message=ut[lt]?ut[lt]+" code:"+lt:"unknown error code:"+lt;return ht},at.unregisterCallback=function(lt,ct){delete ct[lt+"SuccessCallback"],delete ct[lt+"ErrorCallback"]},at.decodeServerError=function(lt,ct){var pt={code:-1,message:"server error"};return lt>1e9&&(pt.code=lt-1e9+52e6),ct&&(pt.message=ct),pt},at.getLiveRoomError=function(lt,ct){var pt={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return ct?lt>2e5&&lt<3e5?pt[lt-2e5]:lt<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[lt]||pt[lt]||"ROOM_INNER_ERROR":pt[lt]||"ROOM_INNER_ERROR":lt>1e9?pt[lt-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[lt]||"ROOM_INNER_ERROR"},at.getKickoutError=function(lt){var ct={};switch(lt){case 1:ct.code=63000001,ct.message="zpush multiple login kickout",ct.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:ct.code=63000002,ct.message="zpush manual kickout",ct.name="MANUAL_KICKOUT";break;case 3:ct.code=63000003,ct.message="kickout reason = "+lt;break;case 4:ct.code=63000004,ct.message="zpush multiple login kickout",ct.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:ct.code=63000005,ct.message="zpush token expired",ct.name="TOKEN_EXPIRED";break;default:ct.code=lt,ct.message="kickout reason = "+lt}return ct},at.dataReportEvent=function(lt,ct,pt,ut,ht){switch(pt){case"eventStart":lt.eventStart(ct,ut);break;case"eventEndWithMsgInfo":lt.eventEndWithMsgInfo(ct,ut,ht[0]);break;case"addEventMsg":lt.addEventMsg(ct,ut,ht[0],ht[1]);break;case"addEvent":lt.addEvent(ct,ut);break;case"eventEnd":lt.eventEnd(ct,ut);break;case"addMsgInfo":lt.addMsgInfo(ct,ht[0])}},at.isKeepTryLogin=function(lt){switch(lt){case 1002:case 1003:return!0;default:return!1}},at.mergeStreamList=function(lt,ct,pt,ut){var ht,ft=[],gt=[],vt=[];pt||(pt=[]);for(var yt=0;yt<pt.length;yt++)if(pt[yt].anchor_id_name!=lt&&pt[yt].id_name!=lt&&pt[yt].user_id!=lt){ht=!1;for(var mt=0;mt<ct.length;mt++)if(pt[yt].stream_id===ct[mt].stream_id){pt[yt].extra_info!==ct[mt].extra_info&&vt.push(pt[yt]),ht=!0;break}ht||ft.push(pt[yt])}for(var Et=0;Et<ct.length;Et++)if(ct[Et].anchor_id_name!=lt&&ct[Et].id_name!=lt&&ct[Et].user_id!=lt){ht=!1;for(var bt=0;bt<pt.length;bt++)if(ct[Et].stream_id===pt[bt].stream_id){ht=!0;break}ht||gt.push(ct[Et])}for(ct.splice(0),yt=0;yt<pt.length;yt++)ct.push(pt[yt]);ut(ft,gt,vt)},at.checkInteger=function(lt,ct){return ct==0?typeof lt=="number"&&lt%1==0&&lt>=0:typeof lt=="number"&&lt%1==0&&lt>0},at.checkValidNumber=function(lt,ct,pt){return ct=ct||1,pt=pt||1e4,typeof lt=="number"&&lt%1==0&&lt>=ct&&lt<=pt},at.uuid=function(lt,ct){var pt,ut="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),ht=[];if(ct=ct||ut.length,lt)for(pt=0;pt<lt;pt++)ht[pt]=ut[0|Math.random()*ct];else{var ft=void 0;for(ht[8]=ht[13]=ht[18]=ht[23]="-",ht[14]="4",pt=0;pt<36;pt++)ht[pt]||(ft=0|16*Math.random(),ht[pt]=ut[pt==19?3&ft|8:ft])}return ht.join("")},at.getDevices=function(lt,ct){navigator.mediaDevices!==void 0&&navigator.mediaDevices.enumerateDevices!==void 0?navigator.mediaDevices.enumerateDevices().then(function(pt){for(var ut=[],ht=[],ft=[],gt=0;gt<pt.length;gt++){var vt=pt[gt];vt.kind==="audioinput"&&ut.push({deviceName:vt.label,deviceID:vt.deviceId}),vt.kind==="audiooutput"&&ht.push({deviceName:vt.label,deviceID:vt.deviceId}),vt.kind==="videoinput"&&ft.push({deviceName:vt.label,deviceID:vt.deviceId})}lt&&lt({microphones:ut,speakers:ht,cameras:ft})}).catch(function(pt){console.error("enumerate devices wrong "+pt),ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)}):ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},at.getPublisherStateType=function(lt){return lt==0||lt==1?lt==0?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},at.getPlayerStateType=function(lt){return lt==0||lt==1?lt==0?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},at.getSteamUpdateType=function(lt){return lt==0?"DELETE":"ADD"},at.getNetQuality=function(lt,ct,pt){return pt!==void 0?.15*this.calcQualityOfJitter(pt)+.85*Math.min(this.calcQualityOfRtt(lt),this.calcQualityOfLostRate(ct,!1)):Math.min(this.calcQualityOfRtt(lt),this.calcQualityOfLostRate(ct,!0))},at.isIos=function(){return navigator.platform.match("iPhone")!==null},at.isMacOs=function(){return navigator.platform.match("Mac")!==null},at.isAndroid=function(){return navigator.platform.match("Android")!==null},at.isWindows=function(){return navigator.platform.match("Windows")!==null},at.isWin32=function(){return navigator.platform.match("Win32")!==null&&navigator.userAgent.match("WOW64")===null},at.isLinux=function(){return navigator.platform.match("Linux")!==null},at.getOsType=function(){return this.isIos()?it.OSType.IOS:this.isAndroid()?it.OSType.ANDROID:this.isMacOs()?it.OSType.MAC:this.isWin32()?it.OSType.WIN32:it.OSType.UNKNOWN},at.checkScreenParams=function(lt,ct){return typeof lt=="object"&&lt.videoQuality!==void 0&&!at.checkInteger(lt.videoQuality)?(ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1):typeof lt=="object"&&lt.sourceID!==void 0&&typeof lt.sourceID!="string"?(ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1):!(typeof lt=="object"&&lt.videoQuality===4&&(!at.checkCameraOrScreenBitRate(lt.bitRate,ct)||!at.checkParamsWithConstraintExtend(lt,ct)))},at.checkParamsWithConstraintExtend=function(lt,ct){for(var pt=0,ut=["frameRate","width","height"];pt<ut.length;pt++){var ht=ut[pt],ft=lt[ht];if(ft===void 0)return ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," is required when videoQuality is 4")),!1;if(typeof ft=="number"&&!at.checkInteger(ft,!1))return ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," must be integer number")),!1;if(typeof ft=="number"&&(ht==="width"||ht==="height")&&ft<0)return ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," must greater than 0.")),!1;if(typeof ft=="number"&&ht==="width"&&ft>7680)ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," cannot greater than 7680."));else if(typeof ft=="number"&&ht==="height"&&ft>4320)ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," cannot greater than 4320."));else if(typeof ft=="object"){if(ht==="width"&&!at.checkConstraintExtend(ft,ht,ct,0,7680)||ht==="height"&&!at.checkConstraintExtend(ft,ht,ct,0,4320)||ht==="frameRate"&&!at.checkConstraintExtend(ft,ht,ct))return!1}else if(typeof ft!="number"&&typeof ft!="object")return ct&&ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(ht," must be number or object")),!1}return!0},at.checkConstraintExtendWithMessage=function(lt,ct,pt,ut){if(typeof lt!="object")return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(Object.keys(lt).length===0)return{result:!1,message:"".concat(ct," can not be a empty object")};for(var ht=0,ft=["exact","ideal","max","min"];ht<ft.length;ht++){var gt=ft[ht],vt=lt[gt];if(typeof vt=="number"&&!at.checkInteger(vt,!1))return{result:!1,message:" ".concat(gt," of ").concat(ct," must be integer number")};if(typeof pt=="number"&&typeof vt=="number"&&vt<pt)return{result:!1,message:" ".concat(gt," of ").concat(ct," must greater than ").concat(pt)};if(typeof ut=="number"&&typeof vt=="number"&&vt>ut)return{result:!1,message:" ".concat(gt," of ").concat(ct," cannot greater than ").concat(ut)}}return{result:!0,message:"Constraint Extend OK."}},at.checkConstraintExtend=function(lt,ct,pt,ut,ht){var ft=at.checkConstraintExtendWithMessage(lt,ct,ut,ht);return ft.result||pt&&pt(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError,ft.message),ft.result},at.checkBitRateLimit=function(lt,ct){return!(lt>10240)||(ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),!1)},at.checkCameraOrScreenBitRate=function(lt,ct){if(lt===void 0)return ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if(typeof lt=="number"){if(!at.checkValidNumber(lt,0,10240))return ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(!at.checkBitRateLimit(lt,ct))return!1}else ct(ot.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be number");return!0},at.checkCameraParams=function(lt,ct){return!!at.checkParamsWithConstraintExtend(lt,ct)&&!!at.checkCameraOrScreenBitRate(lt.bitRate,ct)},at.isParamEmpty=function(lt){return lt!=null&&lt!==""},at.isTypeString=function(lt){return typeof lt=="string"},at.isTooLong=function(lt,ct){return!(lt.length>=ct)},at.isReDispatch=function(lt){var ct=lt.message.match(/action:(\d+)/),pt=ct?Number(ct[1]):NaN;return[ot.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,ot.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,ot.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,ot.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(lt)||[6].includes(pt)},at.arrAvg=function(lt,ct,pt){return lt.push(ct),lt.length>pt&&lt.shift(),lt.reduce(function(ut,ht){return ut+ht})/lt.length},at.calcQualityOfRtt=function(lt){return lt<600?97-Math.pow(.09*lt,1.1):18*Math.exp(.002*(600-lt))},at.calcQualityOfJitter=function(lt){return lt<=50?98-Math.pow(lt,1.15):nt.QUALITY_CONSTANT.PoorMinQuality},at.calcQualityOfLostRate=function(lt,ct){if(ct)return lt<=55?99-Math.pow(.8*lt,1.18):nt.QUALITY_CONSTANT.PoorMinQuality;var pt=100*lt;return pt<=40?96-Math.pow(pt,1.22):nt.QUALITY_CONSTANT.PoorMinQuality},at.quality2QualityGrade=function(lt){return lt>=nt.QUALITY_CONSTANT.ExcellentMinQuality?nt.QualityGrade.Excellent:lt>=nt.QUALITY_CONSTANT.GoodMinQuality?nt.QualityGrade.Good:lt>=nt.QUALITY_CONSTANT.MiddleMinQuality?nt.QualityGrade.Middle:lt>=nt.QUALITY_CONSTANT.PoorMinQuality?nt.QualityGrade.Poor:nt.QualityGrade.Die},at.checkAudioTrackIsActive=function(lt){return!!lt.enabled},at.checkVideoTrackIsActive=function(lt){return!!lt.enabled},at.isSupportEncodedTransforms=function(){var lt=!!window.RTCRtpScriptTransform;if(!lt){var ct=!!RTCRtpSender.prototype.createEncodedStreams,pt=!1;try{new ReadableStream,pt=!0}catch{console.error("Transferable streams are not supported.")}lt=ct&&pt}return lt},at.uint8arrayToBase64=function(lt){for(var ct,pt=0,ut=lt.length,ht="";pt<ut;)ct=lt.subarray(pt,Math.min(pt+32768,ut)),ht+=String.fromCharCode.apply(null,Array.from(ct)),pt+=32768;return btoa(ht)},at.isMobile=function(){return!!(navigator.userAgent.match(/Mobi/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i))},at}();et.ClientUtil=st,et.generaStreamSid=function(at,lt,ct){var pt=new Date().getTime(),ut=(0,nt.getReportSeq)();return function(ht){var ft=0;if(ht.length==0)return ft;for(var gt=0;gt<ht.length;gt++)ft=(ft<<5)-ft+ht.charCodeAt(gt),ft&=ft;return ft>>>0}("".concat(at,"_").concat(lt,"_").concat(ct,"_").concat(pt,"_").concat(ut))},et.getPlaySourceType=function(at){var lt="rtc";switch(at){case 0:case 3:default:lt="rtc";break;case 1:lt="cdn";break;case 2:lt="l3"}return lt},et.getChromeVer=function(){var at=0,lt=(navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1];return lt&&(at=parseInt(lt.split(",")[0])),at}},4671:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0});var rt=function(){function nt(){this.handlerListMap={}}return nt.prototype.addEventHandler=function(ot,it){if(this.handlerListMap[ot]||(this.handlerListMap[ot]=[]),typeof it!="function")throw new Error("Params callBack is not a Function");return this.handlerListMap[ot].indexOf(it)==-1&&this.handlerListMap[ot].push(it),!0},nt.prototype.removeEventHandler=function(ot,it){return!!this.handlerListMap[ot]&&(this.handlerListMap[ot]=it?this.handlerListMap[ot].filter(function(st){return st!==it}):[],!0)},nt.prototype.emit=function(ot){for(var it=[],st=1;st<arguments.length;st++)it[st-1]=arguments[st];this.handlerListMap[ot]&&this.handlerListMap[ot].forEach(function(at){try{setTimeout(function(){at.apply(void 0,it)},0)}catch(lt){console.error('Fail to execute callback of event "'.concat(ot,'" : ').concat(lt))}})},nt}();et.default=rt},7646:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.H264Parser=void 0;var rt=function(){function nt(ot){this.view=ot,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=ot.byteLength}return nt.prototype.FindStartCode=function(){var ot=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;ot>=3;){if(this.view.getUint8(this.offset)==0&&this.view.getUint8(this.offset+1)==0&&this.view.getUint8(this.offset+2)==1)return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&this.view.getUint8(this.offset-1)==0&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--ot,++this.offset}return!1},nt.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},nt.prototype.NextNalu=function(ot){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,this.offset>=this.view.byteLength||!this.FindStartCode()?!1:(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,ot&&(31&this.view.getUint8(this.nalu_start+this.start_code_size))!=6?!0:this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0))},nt}();et.H264Parser=rt},7139:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.OSType=void 0,function(rt){rt.WIN32="WIN32",rt.MAC="Mac",rt.ANDROID="Android",rt.LINUX="Linux",rt.IOS="iOS",rt.UNKNOWN="WTF"}(et.OSType||(et.OSType={}))},6502:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.RetryHandler=void 0;var rt=function(){function nt(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1}return nt.prototype.init=function(ot,it,st,at){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,typeof ot=="number"&&ot<3600&&(this.RETRY_MAX_TIME=ot),typeof it=="number"&&(this.RETRY_START_TIME_INTERVAL=it),typeof st=="number"&&(this.RETRY_CONTINUE_COUNT=st),typeof at=="number"&&(this.RETRY_MAX_TIME_INTERVAL=at)},nt.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0},nt.prototype.isRetrying=function(){return this.retryTimer!==null||this.startRetryTimer!==null||this.maxTimer!==null},nt}();et.RetryHandler=rt},4767:function(_e,et,rt){var nt=this&&this.__spreadArray||function(at,lt,ct){if(ct||arguments.length===2)for(var pt,ut=0,ht=lt.length;ut<ht;ut++)!pt&&ut in lt||(pt||(pt=Array.prototype.slice.call(lt,0,ut)),pt[ut]=lt[ut]);return at.concat(pt||Array.prototype.slice.call(lt))};Object.defineProperty(et,"__esModule",{value:!0}),et.SdpUtil=void 0;var ot=rt(6706),it=rt(6706),st=function(){function at(){}return at.zegoSdp=function(lt){var ct=lt.split(`\r
`),pt=[],ut=[];ct.forEach(function(ft){var gt=ft.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);gt&&gt[1]&&gt[2]&&(gt[2]==="H264/90000"&&pt.push(gt[1]),gt[2]==="opus/48000/2"&&ut.push(gt[1]))});var ht=[];return ct.map(function(ft){var gt=!0,vt=ft.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(vt&&vt[5]&&(nt(nt([],pt,!0),ut,!0).some(function(mt){return mt==vt[5]})||(gt=!1)),ft.indexOf("m=video")>-1){var yt=ft.split(" ");ft=nt([yt[0],yt[1],yt[2]],pt,!0).join(" ")}else ft.indexOf("m=audio")>-1&&(yt=ft.split(" "),ft=nt([yt[0],yt[1],yt[2]],ut,!0).join(" "));gt&&ht.push(ft)}),ht.join(`\r
`)},at.getSDPByVideDecodeType=function(lt,ct,pt,ut){var ht={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!lt.includes("m=video"))return lt;var ft=/m=video.+/.exec(lt)[0];ft=ft.match(/[\s|\d]+/g)[1].replace(" ",""),ht.str=ft,ht.arr=ht.str.split(" "),ht.arr.forEach(function(Et){var bt=new RegExp("a=rtpmap:"+Et+".+").exec(lt)[0];bt.includes("H264")?ht.obj.H264.push(Et):bt.includes("H265")?ht.obj.H265.push(Et):bt.includes("VP8")?ht.obj.VP8.push(Et):bt.includes("VP9")?ht.obj.VP9.push(Et):ht.obj.OTHER.push(Et)}),ht.obj.OTHER.forEach(function(Et){var bt=new RegExp("a=fmtp:"+Et+".+apt=(\\d+)").exec(lt),Ct=bt&&bt[1];Ct&&(ht.obj.H264.includes(Ct)?ht.obj.H264.push(Et):ht.obj.H265.includes(Ct)?ht.obj.H265.push(Et):ht.obj.VP8.includes(Ct)?ht.obj.VP8.push(Et):ht.obj.VP9.includes(Ct)&&ht.obj.VP9.push(Et))});var gt=[];if(ct==="VP9"?gt=nt(nt(nt([],ht.obj.H265,!0),ht.obj.H264,!0),ht.obj.VP8,!0):ct==="VP8"?gt=nt(nt(nt([],ht.obj.H265,!0),ht.obj.H264,!0),ht.obj.VP9,!0):ct==="H264"?gt=nt(nt(nt([],ht.obj.H265,!0),ht.obj.VP8,!0),ht.obj.VP9,!0):ct==="H265"&&(gt=nt(nt(nt([],ht.obj.VP8,!0),ht.obj.H264,!0),ht.obj.VP9,!0)),ct=="H264"&&typeof pt=="boolean"){var vt=function(Et){return function(bt){return!!bt.includes("profile-level-id=")&&(Et?!bt.includes("profile-level-id=42e01f"):bt.includes("profile-level-id=42e01f"))}},yt=function(Et){return function(bt){if(!bt.includes("profile-level-id="))return!1;switch(Et){case it.H264ProfileType.BASE_LINE:return!bt.includes("profile-level-id=42");case it.H264ProfileType.MAIN:return!bt.includes("profile-level-id=4d");case it.H264ProfileType.HIGH:return!bt.includes("profile-level-id=64");default:return!1}}},mt=function(Et){return function(){var bt=[];return ht.obj.H264.forEach(function(Ct){for(var Tt=new RegExp("a=fmtp:"+Ct+".+\\s\\n","g").exec(lt)||[],wt=0,Rt=Et;wt<Rt.length;wt++)Tt.filter(Rt[wt]).length!==0&&bt.push(Ct);var It=new RegExp("a=fmtp:"+Ct+".+apt=(\\d+)").exec(lt),St=It&&It[1];St&&bt.includes(St)&&bt.push(Ct)}),bt}};gt=gt.concat(function(){for(var Et=[],bt=0,Ct=ut!==void 0&&ut===ot.EncodecSelectionModeType.HARD_SOFT_ENCODEC_FIRST?[mt([vt(pt),yt(it.H264ProfileType.BASE_LINE)]),mt([vt(pt)]),mt([vt(!pt),yt(it.H264ProfileType.BASE_LINE)]),mt([vt(!pt)])]:[mt([yt(it.H264ProfileType.BASE_LINE),vt(pt)]),mt([yt(it.H264ProfileType.BASE_LINE),vt(!pt)]),mt([vt(pt)]),mt([vt(!pt)])];bt<Ct.length&&(Et=(0,Ct[bt])(),new Set(Et).size===ht.obj.H264.length);bt++)Et=[];return Et}())}return gt.forEach(function(Et){var bt=ht.arr.indexOf(Et);bt>=0&&ht.arr.splice(bt,1);var Ct=new RegExp("a=rtpmap:"+Et+".+\\s\\n","g"),Tt=new RegExp("a=rtcp-fb:"+Et+".+\\s\\n","g"),wt=new RegExp("a=fmtp:"+Et+".+\\s\\n","g");lt=(lt=(lt=lt.replace(Ct,"")).replace(Tt,"")).replace(wt,"")}),lt=lt.replace(ft,ht.arr.join(" "))},at}();et.SdpUtil=st},1358:function(_e,et,rt){var nt=this&&this.__awaiter||function(ct,pt,ut,ht){return new(ut||(ut=Promise))(function(ft,gt){function vt(Et){try{mt(ht.next(Et))}catch(bt){gt(bt)}}function yt(Et){try{mt(ht.throw(Et))}catch(bt){gt(bt)}}function mt(Et){var bt;Et.done?ft(Et.value):(bt=Et.value,bt instanceof ut?bt:new ut(function(Ct){Ct(bt)})).then(vt,yt)}mt((ht=ht.apply(ct,pt||[])).next())})},ot=this&&this.__generator||function(ct,pt){var ut,ht,ft,gt,vt={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return gt={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function yt(mt){return function(Et){return function(bt){if(ut)throw new TypeError("Generator is already executing.");for(;vt;)try{if(ut=1,ht&&(ft=2&bt[0]?ht.return:bt[0]?ht.throw||((ft=ht.return)&&ft.call(ht),0):ht.next)&&!(ft=ft.call(ht,bt[1])).done)return ft;switch(ht=0,ft&&(bt=[2&bt[0],ft.value]),bt[0]){case 0:case 1:ft=bt;break;case 4:return vt.label++,{value:bt[1],done:!1};case 5:vt.label++,ht=bt[1],bt=[0];continue;case 7:bt=vt.ops.pop(),vt.trys.pop();continue;default:if(ft=vt.trys,!((ft=ft.length>0&&ft[ft.length-1])||bt[0]!==6&&bt[0]!==2)){vt=0;continue}if(bt[0]===3&&(!ft||bt[1]>ft[0]&&bt[1]<ft[3])){vt.label=bt[1];break}if(bt[0]===6&&vt.label<ft[1]){vt.label=ft[1],ft=bt;break}if(ft&&vt.label<ft[2]){vt.label=ft[2],vt.ops.push(bt);break}ft[2]&&vt.ops.pop(),vt.trys.pop();continue}bt=pt.call(ct,vt)}catch(Ct){bt=[6,Ct],ht=0}finally{ut=ft=0}if(5&bt[0])throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}([mt,Et])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.WebRTCUtil=void 0;var it=rt(3529),st=rt(4395),at=rt(608),lt=function(){function ct(){}return ct.supportDetection=function(pt,ut,ht,ft){return nt(this,void 0,void 0,function(){var gt,vt,yt,mt,Et,bt,Ct,Tt;return ot(this,function(wt){switch(wt.label){case 0:return gt={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:pt,errInfo:{}},ft&&ft==="screenSharing"?(ut({result:pt,errInfo:gt.errInfo}),[2]):ft&&ft!=="customCapture"||(((vt=document.createElement("video")).captureStream||vt.mozCaptureStream)&&(gt.customCapture=!0),ft!=="customCapture")?(yt=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,mt=window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1,ft&&ft!=="camera"&&ft!=="microphone"?[3,9]:yt?mt?(gt.camera=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,1]:[3,9]):(ut({result:gt.customCapture,errInfo:gt.errInfo}),[2]);case 1:if(ft&&ft!=="camera")return[3,5];wt.label=2;case 2:return wt.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:!0})];case 3:return(Et=wt.sent())&&(gt.camera=!0)&&Et.getTracks().forEach(function(Rt){return Rt.stop()}),[3,5];case 4:return bt=wt.sent(),gt.errInfo.camera={name:bt.name,message:bt.message},console.error("camera devices detect error: ",bt.name,bt.message),[3,5];case 5:if(ft&&ft!=="microphone")return[3,9];wt.label=6;case 6:return wt.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 7:return(Ct=wt.sent())&&(gt.microphone=!0)&&Ct.getTracks().forEach(function(Rt){return Rt.stop()}),[3,9];case 8:return Tt=wt.sent(),gt.errInfo.microphone={name:Tt.name,message:Tt.message},console.error("microphone devices detect error: ",Tt.name,Tt.message),[3,9];case 9:return ft==="camera"||ft==="microphone"?(ut({result:gt[ft],errInfo:gt.errInfo}),[2]):(this.supportVideoCodeType(function(Rt,It){ft||(gt.videoCodec.H264=Rt.H264,gt.videoCodec.H265=Rt.H265,gt.videoCodec.VP8=Rt.VP8,gt.videoCodec.VP9=Rt.VP9,gt.webRTC=Rt.webRTC),It&&(typeof It=="string"?gt.errInfo.extendedDate=It:gt.errInfo.webRTC={name:It.name,message:It.message},console.error("videoCodec detect error: "+It)),ut&&ut(ft?{result:Rt[ft],errInfo:gt.errInfo}:gt)},ht,ft),[2])}})})},ct.supportVideoCodeType=function(pt,ut,ht){return nt(this,void 0,void 0,function(){var ft,gt,vt,yt,mt,Et,bt,Ct,Tt,wt;return ot(this,function(Rt){switch(Rt.label){case 0:return ft={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},ht?ut!==1||ht!=="VP8"&&ht!=="H264"?[3,2]:[4,(wt=new st.CheckModule).checkSupportByType(ht)]:[3,2];case 1:return typeof(gt=Rt.sent())=="boolean"?(ft[ht]=gt,[2,pt(ft)]):(ft[ht]=!1,[2,pt(ft,gt)]);case 2:if(ht!=="webRTC"&&ut!==1)return[3,7];Rt.label=3;case 3:return Rt.trys.push([3,5,,6]),[4,new RTCPeerConnection().createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 4:return Rt.sent(),ft.webRTC=!0,[3,6];case 5:return vt=Rt.sent(),pt&&pt(ft,vt),[3,6];case 6:if(ht==="webRTC")return[2,pt(ft)];Rt.label=7;case 7:if(ut===1){for(yt="",Et=[],bt=0,Ct=mt=["VP8","H264"];bt<Ct.length;bt++)Tt=Ct[bt],wt=new st.CheckModule,Et.push(wt.checkSupportByType(Tt));return Promise.all(Et).then(function(It){It.forEach(function(St,Pt){typeof St=="boolean"?ft[mt[Pt]]=!0:(ft[mt[Pt]]=!1,yt=St)}),yt?pt(ft,yt):pt(ft)}),[2]}try{new RTCPeerConnection().createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(It){if(ft.webRTC=!0,It&&It.sdp){var St=It.sdp.split(`\r
`);if(ft.H264=St.some(function(Pt){return Pt.startsWith("a=rtpmap:")&&Pt.indexOf("H264/")>-1}),ht==="H264"||(ft.VP8=St.some(function(Pt){return Pt.startsWith("a=rtpmap:")&&Pt.indexOf("VP8/")>-1}),ht==="VP8"))return pt(ft);ft.VP9=St.some(function(Pt){return Pt.startsWith("a=rtpmap:")&&Pt.indexOf("VP9/")>-1}),ft.H265=St.some(function(Pt){return Pt.startsWith("a=rtpmap:")&&Pt.indexOf("H265/")>-1}),pt&&pt(ft)}})}catch(It){pt&&pt(ft,It)}return[2]}})})},ct.checkScreenParams=function(pt,ut){return typeof pt=="object"&&pt.videoQuality!==void 0&&!at.ClientUtil.checkInteger(pt.videoQuality)?(ut(it.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1):typeof pt=="object"&&pt.sourceID!==void 0&&typeof pt.sourceID!="string"?(ut(it.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1):!(typeof pt=="object"&&pt.videoQuality===4&&(!at.ClientUtil.checkCameraOrScreenBitRate(pt.bitRate,ut)||!at.ClientUtil.checkParamsWithConstraintExtend(pt,ut)))},ct.checkCameraParams=function(pt,ut){return!!at.ClientUtil.checkParamsWithConstraintExtend(pt,ut)&&!!at.ClientUtil.checkCameraOrScreenBitRate(pt.bitRate,ut)},ct.base64ToUint8Array=function(pt){for(var ut=(pt+"=".repeat((4-pt.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ht=window.atob(ut),ft=new Uint8Array(ht.length),gt=0;gt<ht.length;++gt)ft[gt]=ht.charCodeAt(gt);return ft},ct.decodeString=function(pt){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(pt))))},ct.encodeString=function(pt){return Uint8Array.from(Array.from(unescape(encodeURIComponent(pt))).map(function(ut){return ut.charCodeAt(0)}))},ct}();et.WebRTCUtil=lt},5321:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(xt){for(var At,Mt=1,Nt=arguments.length;Mt<Nt;Mt++)for(var $t in At=arguments[Mt])Object.prototype.hasOwnProperty.call(At,$t)&&(xt[$t]=At[$t]);return xt},nt.apply(this,arguments)},ot=this&&this.__createBinding||(Object.create?function(xt,At,Mt,Nt){Nt===void 0&&(Nt=Mt);var $t=Object.getOwnPropertyDescriptor(At,Mt);$t&&!("get"in $t?!At.__esModule:$t.writable||$t.configurable)||($t={enumerable:!0,get:function(){return At[Mt]}}),Object.defineProperty(xt,Nt,$t)}:function(xt,At,Mt,Nt){Nt===void 0&&(Nt=Mt),xt[Nt]=At[Mt]}),it=this&&this.__setModuleDefault||(Object.create?function(xt,At){Object.defineProperty(xt,"default",{enumerable:!0,value:At})}:function(xt,At){xt.default=At}),st=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var At={};if(xt!=null)for(var Mt in xt)Mt!=="default"&&Object.prototype.hasOwnProperty.call(xt,Mt)&&ot(At,xt,Mt);return it(At,xt),At},at=this&&this.__awaiter||function(xt,At,Mt,Nt){return new(Mt||(Mt=Promise))(function($t,Ft){function jt(Kt){try{Yt(Nt.next(Kt))}catch(er){Ft(er)}}function zt(Kt){try{Yt(Nt.throw(Kt))}catch(er){Ft(er)}}function Yt(Kt){var er;Kt.done?$t(Kt.value):(er=Kt.value,er instanceof Mt?er:new Mt(function(ir){ir(er)})).then(jt,zt)}Yt((Nt=Nt.apply(xt,At||[])).next())})},lt=this&&this.__generator||function(xt,At){var Mt,Nt,$t,Ft,jt={label:0,sent:function(){if(1&$t[0])throw $t[1];return $t[1]},trys:[],ops:[]};return Ft={next:zt(0),throw:zt(1),return:zt(2)},typeof Symbol=="function"&&(Ft[Symbol.iterator]=function(){return this}),Ft;function zt(Yt){return function(Kt){return function(er){if(Mt)throw new TypeError("Generator is already executing.");for(;jt;)try{if(Mt=1,Nt&&($t=2&er[0]?Nt.return:er[0]?Nt.throw||(($t=Nt.return)&&$t.call(Nt),0):Nt.next)&&!($t=$t.call(Nt,er[1])).done)return $t;switch(Nt=0,$t&&(er=[2&er[0],$t.value]),er[0]){case 0:case 1:$t=er;break;case 4:return jt.label++,{value:er[1],done:!1};case 5:jt.label++,Nt=er[1],er=[0];continue;case 7:er=jt.ops.pop(),jt.trys.pop();continue;default:if($t=jt.trys,!(($t=$t.length>0&&$t[$t.length-1])||er[0]!==6&&er[0]!==2)){jt=0;continue}if(er[0]===3&&(!$t||er[1]>$t[0]&&er[1]<$t[3])){jt.label=er[1];break}if(er[0]===6&&jt.label<$t[1]){jt.label=$t[1],$t=er;break}if($t&&jt.label<$t[2]){jt.label=$t[2],jt.ops.push(er);break}$t[2]&&jt.ops.pop(),jt.trys.pop();continue}er=At.call(xt,jt)}catch(ir){er=[6,ir],Nt=0}finally{Mt=$t=0}if(5&er[0])throw er[1];return{value:er[0]?er[1]:void 0,done:!0}}([Yt,Kt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoWebRTC=void 0;var ct=rt(6706),pt=rt(608),ut=rt(1358),ht=rt(7325),ft=rt(1089),gt=rt(3529),vt=rt(908),yt=rt(3409),mt=rt(7560),Et=rt(1547),bt=st(rt(5515)),Ct=rt(3770),Tt=rt(4865),wt=rt(361),Rt=rt(5019),It=rt(5028),St=rt(9595),Pt=rt(9595),Ot=rt(2752),Ut=rt(6361),Bt=function(){function xt(At,Mt,Nt,$t,Ft,jt){jt===void 0&&(jt=ct.ZegoScenario.Default);var zt=this;this.mediaEleSources=[],this.logger=At,this.dataReport=Mt,this.ac=new(typeof webkitAudioContext<"u"?webkitAudioContext:AudioContext),this.ac.addEventListener("statechange",function(){zt.ac.state==="suspended"&&zt.ac.resume()}),this.checkAudioContext(),this.stateCenter=new ht.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="webrtc",this.stateCenter.settingConfig=new Pt.ZegoSettingConfig,this.RTM=$t,this.streamCenter=new yt.ZegoStreamCenterWeb(this.logger,this.stateCenter,this.dataReport,this.RTM,this.ac,this.mediaEleSources),this.rtcModules=new vt.RTCModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM,this.ac,this),this.stateCenter.browser=bt.browserDetails.browser,this.RTM.cloudSetting.setEnvVariable("sdk_version",ct.PROTO_VERSION),this.initTracer(Nt),this.RTM.cloudSetting.getSettingCache(St.RTC).then(function(Yt){zt.logger.info(ft.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(Yt));var Kt=zt.stateCenter.reporter.createSpan(ct.TRACER_LEVEL.H,{key:gt.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},gt.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event);Kt.setAttributes({files:gt.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.files([{name:St.RTC,content:JSON.stringify(Yt==null?void 0:Yt.setting),versions:JSON.stringify(Yt==null?void 0:Yt.versions),code:0,message:""}])}),Kt.end(),zt.stateCenter.settingConfig.setSetting(Yt==null?void 0:Yt.setting)}).catch(function(Yt){zt.logger.warn(ft.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(Yt))}),this.stateCenter.rtm=this.RTM,this.stateCenter.streamCenter=this.streamCenter,this.stateCenter.chargeInfosSaver.checkAndReport(),[3,4,5,6,7,8].includes(jt)?(this.stateCenter.scenario=jt,[4,5,8].includes(jt)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.logger.info(ft.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+jt+"  success")):(this.stateCenter.scenario=ct.ZegoScenario.Default,this.logger.error(ft.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+jt+"  please use valid scenario"))}return xt.prototype.checkAudioContext=function(){var At=this;if(this.ac&&this.ac.state==="suspended"){var Mt=function(){At.ac.state!=="running"?At.ac.resume():(window.removeEventListener("click",Mt),window.removeEventListener("touchstart",Mt))};window.addEventListener("click",Mt),window.addEventListener("touchstart",Mt)}},xt.prototype.mutePublishStreamVideo=function(At,Mt,Nt){return!1},xt.prototype.mutePublishStreamAudio=function(At,Mt){return!1},xt.prototype.mutePlayStreamVideo=function(At,Mt){return new Promise(function(Nt,$t){console.error("should install advanced module"),Nt(!1)})},xt.prototype.mutePlayStreamAudio=function(At,Mt){return new Promise(function(Nt,$t){console.error("should install advanced module"),Nt(!1)})},xt.prototype.muteMicrophone=function(At){return!1},xt.prototype.isMicrophoneMuted=function(){return!this.streamCenter.isMicEnabled},xt.prototype.setAudioOutput=function(At,Mt){return this.logger.info(ft.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT+" call"),typeof Mt!="string"?(this.logger.error("audiooutput is not string"),!1):this.rtcModules.playModule.setStreamAudioOutput(At,Mt)},xt.prototype.setCustomSignalUrl=function(At){if(this.logger.info(ft.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" call: "+At),At&&At.length!=0){var Mt=!0;At.forEach(function(Nt){return Nt.indexOf("wss://")!=0&&(Mt=!1)}),Mt?this.stateCenter.customUrl=At:this.logger.error(ft.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" url is not correct")}else this.logger.error(ft.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" param error")},xt.prototype.setGWNode=function(At){typeof At=="string"&&At.length>0&&(this.streamCenter.gwNode=At)},xt.prototype.setQualityMonitorCycle=function(At){return typeof At=="number"&&At>=1e3?(this.streamCenter.setQualityMonitorCycle(At),!0):(this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},xt.prototype.startPlayingStream=function(At,Mt,Nt){return this.logger.info(ft.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.startPlayingStream(At,Mt,Nt)},xt.prototype.stopPlayingStream=function(At){this.logger.info(ft.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.stopPlayingStream(At)},xt.prototype.setPlayAccelerate=function(At){this.stateCenter.playAccelerate=At},xt.prototype.setTurnOverTcpOnly=function(At){this.logger.info(ft.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY+" call "+At),typeof At=="boolean"?this.stateCenter.turnOverTcpOnly=At:this.logger.error("zc.p.stoto.0 param must be param")},xt.prototype.createStream=function(At){return this.rtcModules.publishModule.createStream(At)},xt.prototype.setRoomScenario=function(At){return[3,4,5,6,7,8].includes(At)?(this.logger.info(ft.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+At+" called"),this.stateCenter.roomList.length?(this.logger.error(ft.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+JSON.stringify(Ot.errorCodeList.SET_ROOM_SCENARIO)),!1):([ct.ZegoScenario.StandardVideoCall,ct.ZegoScenario.HighVideoCall,ct.ZegoScenario.Broadcast].includes(At)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.stateCenter.scenario=At,this.logger.info(ft.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+At+" called success"),!0)):(this.logger.error(ft.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+At+" please use valid scenario"),!1)},xt.prototype.destroyStream=function(At){this.rtcModules.publishModule.destroyStream(At)},xt.prototype.startPublishingStream=function(At,Mt,Nt,$t){return this.logger.info(ft.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.startPublishingStream(At,Mt,Nt,$t)},xt.prototype.activateSEIInsert=function(At){return console.error("should install advanced module"),!1},xt.prototype.setSEIConfig=function(At){this.stateCenter.seiConfig=At},xt.prototype.sendSEI=function(At,Mt){return this.rtcModules.publishModule.sendSEI(At,Mt)},xt.prototype.stopPublishingStream=function(At){return this.logger.info(ft.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.stopPublishingStream(At,void 0,!0)},xt.prototype.setVideoConfig=function(At,Mt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(At,Mt):new Promise(function(Nt,$t){console.error("should install advanced module"),Nt({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.setAudioConfig=function(At,Mt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(At,Mt):new Promise(function(Nt,$t){console.error("should install advanced module"),Nt({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.replaceTrack=function(At,Mt,Nt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(At,Mt,Nt):new Promise(function($t,Ft){console.error("should install advanced module"),$t({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.preloadEffect=function(At,Mt,Nt){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.preloadEffect(At,Mt,Nt):console.error("未引入混音模块")},xt.prototype.getEffectDuration=function(At){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.getEffectDuration(At):(console.error("未引入混音模块"),0)},xt.prototype.getEffectCurrentProgress=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.getEffectProgress(At,Mt):(console.error("未引入混音模块"),0)},xt.prototype.seekAudioEffect=function(At,Mt,Nt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.seekAudioEffect(At,Mt,Nt):(console.error("未引入混音模块"),!1)},xt.prototype.playEffect=function(At,Mt,Nt){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.playEffect(At,Mt,Nt):console.error("未引入混音模块")},xt.prototype.pauseEffect=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.pauseEffect(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.resumeEffect=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.resumeEffect(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.stopEffect=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopEffect(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.unloadEffect=function(At){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.unloadEffect(At):(console.error("未引入混音模块"),!1)},xt.prototype.setEffectVolume=function(At,Mt,Nt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.setEffectVolume(At,Mt,Nt):(console.error("未引入混音模块"),!1)},xt.prototype.startMixingAudio=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.startMixingAudio(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.stopMixingAudio=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopMixingAudio(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.mixingBuffer=function(At,Mt,Nt,$t){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.mixingBuffer(At,Mt,Nt,$t):console.error("未引入混音模块")},xt.prototype.stopMixingBuffer=function(At,Mt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopMixingBuffer(At,Mt):(console.error("未引入混音模块"),!1)},xt.prototype.setMixingAudioVolume=function(At,Mt,Nt){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.setMixingAudioVolume(At,Mt,Nt):(console.error("未引入混音模块"),!1)},xt.prototype.checkSystemRequirements=function(At,Mt){var Nt=this,$t=navigator&&navigator.mediaDevices&&(xt.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.logger.info(ft.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT+" call"+navigator.userAgent),new Promise(function(Ft){var jt=Nt.stateCenter.reporter.createSpan(ct.TRACER_LEVEL.H,{key:gt.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},gt.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event),zt=Mt||"all",Yt=function(Kt){jt.setAttributes({capability:gt.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(Kt)}),jt.end();var er=Nt.stateCenter.checkList.indexOf(zt);Nt.stateCenter.checkList.splice(er,1),Ft(Kt)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(zt)&&[0,1].includes(At)?Nt.stateCenter.checkList.includes(zt)||Nt.stateCenter.checkList.includes("all")?Yt({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(Nt.stateCenter.checkList.push(zt),void ut.WebRTCUtil.supportDetection($t,Yt,At,Mt)):Yt({result:!1,errInfo:{extendedDate:"param error"}})})},xt.prototype.enumDevices=function(At,Mt){return at(this,void 0,void 0,function(){var Nt,$t,Ft,jt,zt,Yt,Kt,er,ir,rr,lr,nr,hr,vr=this;return lt(this,function(yr){switch(yr.label){case 0:return this.logger.info("zc.ed.0 call"),Nt=function(){return new Promise(function(Cr,or){var ur=vr.stateCenter.reporter.createSpan(ct.TRACER_LEVEL.H,{key:gt.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},gt.ZegoRTCLogEvent.kZegoTaskEnumDevices.event);vr.rtcModules.publishModule.recordDevices(function(pr){var Er=[],Sr=!0,Ht=!0;pr.cameras.forEach(function(qt){qt.deviceID===""&&(Sr=!1),Er.push({device:qt.deviceID,device_name:qt.deviceName,type:0})}),pr.microphones.forEach(function(qt){qt.deviceID===""&&(Ht=!1),Er.push({device:qt.deviceID,device_name:qt.deviceName,type:1})}),pr.speakers.forEach(function(qt){return Er.push({device:qt.deviceID,device_name:qt.deviceName,type:2})}),ur.setAttributes({dev_list:gt.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(Er),dev_kind:gt.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_kind(Mt||"all")}),ur.end(),Cr({devices:pr,enableCamera:Sr,enableMic:Ht})},function(pr){vr.stateCenter.reporter.setError(ur,pr),or(pr)})})},[4,Nt()];case 1:return $t=yr.sent(),Ft=$t.enableCamera,jt=$t.enableMic,zt=$t.devices,At?(this.logger.info("zc.ed.0 check permission"),Yt={video:!0,audio:!0},Mt==="videoinput"?Yt.audio=!1:Mt!=="audioinput"&&Mt!=="audiooutput"||(Yt.video=!1),er=Yt.audio&&!jt,(Kt=Yt.video&&!Ft)||er?(this.logger.info("zc.ed.0 need to get device permission. needCamera: ".concat(Kt,", needMic: ").concat(er)),[4,navigator.mediaDevices.getUserMedia(Yt).catch(function(){})]):[3,4]):[3,4];case 2:return(ir=yr.sent())&&ir.getTracks().forEach(function(Cr){Cr.stop()}),[4,Nt()];case 3:rr=yr.sent(),lr=rr.devices,nr=rr.enableCamera,hr=rr.enableMic,Yt.video&&!nr&&this.logger.warn("zc.ed.0 get video device permission failed."),Yt.audio&&!hr&&this.logger.warn("zc.ed.0 get audio device permission failed."),zt=lr,yr.label=4;case 4:return[2,zt]}})})},xt.prototype.getCameras=function(){return at(this,void 0,void 0,function(){return lt(this,function(At){switch(At.label){case 0:return[4,this.enumDevices(!0,"videoinput")];case 1:return[2,At.sent().cameras]}})})},xt.prototype.getMicrophones=function(){return at(this,void 0,void 0,function(){return lt(this,function(At){switch(At.label){case 0:return[4,this.enumDevices(!0,"audioinput")];case 1:return[2,At.sent().microphones]}})})},xt.prototype.getSpeakers=function(){return at(this,void 0,void 0,function(){return lt(this,function(At){switch(At.label){case 0:return[4,this.enumDevices(!0,"audiooutput")];case 1:return[2,At.sent().speakers]}})})},xt.prototype.getAudioInfo=function(At,Mt,Nt){},xt.prototype.getSoundLevel=function(At,Mt,Nt){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(At,Mt,Nt):console.error("未引入混音模块")},xt.prototype.stopSoundLevel=function(At){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(At):console.error("未引入混音模块")},xt.handleDataAvailable=function(At){At.data&&At.data.size>0&&xt.recordedBlobs.push(At.data)},xt.prototype.startRecord=function(At){},xt.prototype.stopRecord=function(){},xt.prototype.resumeRecord=function(){},xt.prototype.pauseRecord=function(){},xt.prototype.saveRecord=function(At){},xt.prototype.useVideoDevice=function(At,Mt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(At,Mt):new Promise(function(Nt,$t){Nt({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.useAudioDevice=function(At,Mt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(At,Mt):(console.error("should use advanced module first"),new Promise(function(Nt,$t){Nt({errorCode:-1,extendedData:"should install advanced module"})}))},xt.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},xt.prototype.setSoundLevelDelegate=function(At,Mt,Nt){this.logger.info("zc.ssd.0 call"),typeof At=="boolean"?Mt&&(!this.stateCenter.checkInteger(Mt)||Mt<100||Mt>3e3)?this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.streamCenter.setSoundLevelDelegate(At,Mt,Nt):this.logger.error("zc.ssd.0 param 1 must be boolean")},xt.prototype.on=function(At,Mt){return this.rtcModules.bindListener(At,Mt)},xt.prototype.off=function(At,Mt){return this.rtcModules.deleteListener(At,Mt)},xt.prototype.getVersion=function(){return ct.PROTO_VERSION},xt.prototype.setStreamExtraInfo=function(At,Mt){return new Promise(function(Nt,$t){console.error("should use advanced module first"),$t()})},xt.prototype.addPublishCdnUrl=function(At,Mt){return this.logger.info("zg.cm.apu call ",At,Mt),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"addpush",streamID:At,pushUrl:Mt}):new Promise(function(Nt,$t){console.error("should install advanced module"),Nt({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.removePublishCdnUrl=function(At,Mt){return this.logger.info("zg.cm.apu call ",At,Mt),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"delpush",streamID:At,pushUrl:Mt}):new Promise(function(Nt,$t){console.error("should install advanced module"),Nt({errorCode:-1,extendedData:"should install advanced module"})})},xt.prototype.startMixerTask=function(At){return new Promise(function(Mt,Nt){console.error("未引入混流模块"),Nt()})},xt.prototype.setMixerTaskConfig=function(At){return new Promise(function(Mt,Nt){console.error("未引入混流模块"),Nt()})},xt.prototype.stopMixerTask=function(At){return new Promise(function(Mt,Nt){console.error("未引入混流模块"),Nt()})},xt.prototype.setCaptureVolume=function(At,Mt){return this.rtcModules.publishModule.setCaptureVolume(At,Mt)},xt.use=function(At){switch(At.type){case"AudioMix":At.install(vt.RTCModules,Et.ZegoPublish);break;case"MixStream":At.install(xt,mt.StreamHandler,vt.RTCModules);break;case"StreamCommon":At.install(xt,vt.RTCModules,mt.StreamHandler);break;case"Advance":At.install(xt,vt.RTCModules,mt.StreamHandler,Ct.ZegoPreview,Tt.PlayModule,wt.PublishModule,Et.ZegoPublish,Rt.ZegoSignal);break;case"BeautyEffect":At.install(xt,Ct.ZegoPreview);break;case"RangeAudio":case"DataChannel":case"AiDenoise":At.install(xt)}},xt.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},xt.prototype.createRealTimeSequentialDataManager=function(At){throw new Error("should use datachannel module")},xt.prototype.destroyRealTimeSequentialDataManager=function(At){throw new Error("should use datachannel module")},xt.prototype.enableDataChannel=function(At){typeof At=="boolean"&&(this.streamCenter.isDataChannelEnabled=At)},xt.prototype.addTrack=function(At,Mt){return new Promise(function(Nt,$t){throw new Error("use advanced module first")})},xt.prototype.removeTrack=function(At,Mt){return new Promise(function(Nt,$t){throw new Error("use advanced module first")})},xt.prototype.setBeautyEffect=function(At,Mt,Nt){return new Promise(function($t,Ft){console.error("should install video effect module and advanced module"),$t({errorCode:-1,extendedData:"should install video effect module and advanced module"})})},xt.prototype.setLowlightEnhance=function(At,Mt){return new Promise(function(Nt,$t){console.error("should install video effect module and advanced module"),Nt({errorCode:-1,extendedData:"should install video effect module and advanced module"})})},xt.prototype.getPublishingStreamQuality=function(At){return this.rtcModules.publishModule.getStreamStats(At)},xt.prototype.getPlayingStreamQuality=function(At){return this.rtcModules.playModule.getStreamStats(At)},xt.prototype.checkAudioTrackIsActive=function(At){return MediaStreamTrack instanceof At&&At.kind==="video"?pt.ClientUtil.checkAudioTrackIsActive(At):(this.logger.error("zc.caia.0 track type error"),!1)},xt.prototype.checkVideoTrackIsActive=function(At){return MediaStreamTrack instanceof At&&At.kind==="audio"?pt.ClientUtil.checkVideoTrackIsActive(At):(this.logger.error("zc.cvia.0 track type error"),!1)},xt.prototype.setDummyCaptureImagePath=function(At,Mt){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setDummyCaptureImagePath(At,Mt):new Promise(function(Nt,$t){console.error("should install advanced module"),Nt(!1)})},xt.prototype.setAccess=function(At){this.RTM.setAccess(At),this.stateCenter.useNetAgent=this.RTM.getSettingUnify(!0),this.RTM.setAccess(this.stateCenter.useNetAgent),this.stateCenter.useNetAgent=this.RTM.getUseNetAgent()},xt.prototype.setAudioOutputDevice=function(At,Mt){return at(this,void 0,void 0,function(){var Nt;return lt(this,function($t){switch($t.label){case 0:return(Nt=At==null?void 0:At.setSinkId)?(At.setsinkid&&(At.setsinkid.enabled=!0),[4,Nt.call(At,Mt)]):[3,2];case 1:return $t.sent(),[2,!0];case 2:throw Error("Browser not support set audio output.")}})})},xt.prototype.enableCameraCapturing=function(At,Mt){return at(this,void 0,void 0,function(){return lt(this,function(Nt){return console.error("should use advanced module first"),[2,!1]})})},xt.prototype.enableDualStream=function(At){this.rtcModules.advancedModule?this.rtcModules.advancedModule.enableDualStream(At):console.error("use advance module first")},xt.prototype.setLowStreamParameter=function(At,Mt){this.rtcModules.advancedModule?this.rtcModules.advancedModule.setLowStreamParameter(At,Mt):console.error("use advance module first")},xt.prototype.setRemoteDefaultVideoStreamType=function(At){this.logger.info("zc.srdvs call"),[0,1,2].includes(At)?this.stateCenter.streamType=At:this.logger.error("zc.srdvs streamType must be number 0 or 1 or 2")},xt.prototype.enableVideoHardwareEncoder=function(At){if(typeof At=="boolean"){var Mt=this.stateCenter.settingConfig;Mt.setUserValue("hardware_encode",At),Mt.setUserValue("camera_hard_encode",At),Mt.setUserValue("custom_hard_encode",At)}},xt.prototype.createLocalViewer=function(At){var Mt=this.streamCenter.checkPreview(At),Nt=Mt==null?void 0:Mt.getViewer();if(!Nt)throw Error("create viewer failed.");return new It.ZegoStreamView(Nt)},xt.prototype.createRemoteViewer=function(At){var Mt=this.streamCenter.checkPlayer(At),Nt=Mt==null?void 0:Mt.getViewer();if(!Nt)throw Error("create viewer failed.");return new It.ZegoStreamView(Nt)},xt.prototype.enableAiDenoise=function(At,Mt){return new Promise(function(Nt,$t){console.error("should install ai denoise module and advanced module"),$t({errorCode:Ot.errorCodeList.MODULE_NOT_IMPORTED.code,extendedData:"should install ai denoise module and advanced module"})})},xt.prototype.enableAutoSwitchDevice=function(At){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.enableAutoSwitchDevice(At);throw new Error("should use advanced module first")},xt.prototype.initTracer=function(At){this.stateCenter.reporter=At;var Mt=new Ut.CommonStates(this.RTM.stateCenter,this.stateCenter,this.streamCenter),Nt=this.getReporterVersion(ct.PROTO_VERSION);this.stateCenter.reportVersion=Nt,this.stateCenter.reporter.setCommonStates(Mt),this.stateCenter.reporter.setResource({sdk_version:ct.PROTO_VERSION,report_version:Nt})},xt.prototype.getReporterVersion=function(At){var Mt=At.split(".").map(function(Nt){return parseInt(Nt)});return Mt[0]<<20|Mt[1]<<8|Mt[2]},xt.prototype.setEngineConfig=function(At){this.stateCenter.engineConfig=nt(nt({},this.stateCenter.engineConfig),At)},xt.screenShotReady=!1,xt}();et.ZegoWebRTC=Bt,window.addEventListener("message",function(xt){var At=xt.data.type,Mt=xt.origin;Mt!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",Mt),At==="SS_PING"&&(Bt.screenShotReady=!0)})},746:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.AnalogSocket=et.SocketState=void 0;var nt,ot,it,st=rt(6706),at=rt(1089),lt=rt(3529);(function(pt){pt[pt.Connected=0]="Connected",pt[pt.Disconnected=1]="Disconnected",pt[pt.Broken=2]="Broken"})(nt||(nt={})),function(pt){pt[pt.AUTO=0]="AUTO",pt[pt.MANUAL=1]="MANUAL"}(ot||(ot={})),function(pt){pt[pt.CONNECTING=0]="CONNECTING",pt[pt.OPEN=1]="OPEN",pt[pt.CLOSING=2]="CLOSING",pt[pt.CLOSED=3]="CLOSED"}(it=et.SocketState||(et.SocketState={}));var ct=function(){function pt(ut,ht,ft,gt,vt){var yt=this;this.server=ut,this.netAgent=ht,this.signalConfig=ft,this.logger=gt,this.stateCenter=vt,this.readyState=it.CLOSED,this.isActive=!1,this.accessServerState=nt.Disconnected,this.originAccessServerState=nt.Disconnected,this.mediaServerState=nt.Disconnected,this.originMediaServerState=nt.Disconnected,this.eventHandler={accessDisconnect:function(){yt.setAccessServerState(nt.Disconnected)},accessConnect:function(){yt.setAccessServerState(nt.Connected)},accessBroken:function(){yt.setAccessServerState(nt.Broken)},mediaDisconnect:function(){yt.setMediaServerState(nt.Disconnected)},mediaConnect:function(mt){yt.setMediaServerState(nt.Connected,mt)},mediaBroken:function(){yt.setMediaServerState(nt.Broken)}},this.wsHandler=ht.getPCRequest(ut==="unified_rtc"?st.BusinessService.SERVICE_WEBRTC_SIGNAL:st.BusinessService.SERVICE_L3_WEBRTC_SIGNAL,{path:ft.path,query:ft.query}),this.setAccessServerState(ht.isConnect()?nt.Connected:nt.Disconnected),this.setMediaServerState(this.wsHandler.connectState===0?nt.Connected:nt.Disconnected)}return pt.prototype.updateAccessReadyState=function(){this.isActive&&this.accessServerState===nt.Connected&&this.mediaServerState!==nt.Connected?this.onreconnnecting&&this.onreconnnecting():this.accessServerState===nt.Disconnected&&this.logger.warn(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE+" access timeout")},pt.prototype.updateMediaReadyState=function(ut){return this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE+" "+ut),this.mediaServerState===nt.Connected?(this.originMediaServerState===nt.Broken&&ut===ot.AUTO&&this.onreconnnecting&&this.onreconnnecting(),void(this.readyState!==it.OPEN&&(this.readyState=it.OPEN,this.onopen&&this.onopen()))):this.mediaServerState===nt.Disconnected?(this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),void(this.readyState!==it.CLOSED&&(this.readyState=it.CLOSED,this.onclose&&this.onclose()))):void(this.mediaServerState===nt.Broken&&(this.readyState=it.CONNECTING,this.onerror&&this.onerror(new Event("signal connecting"))))},pt.prototype.setMediaServerState=function(ut,ht){this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" "+ut+" "+ht),this.mediaServerState!==ut?(this.originMediaServerState=this.mediaServerState,this.mediaServerState=ut,this.updateMediaReadyState(ht)):this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" same state")},pt.prototype.setAccessServerState=function(ut){this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" "+ut),this.accessServerState!==ut?(this.originAccessServerState=this.accessServerState,this.accessServerState=ut,this.updateAccessReadyState()):this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" same state")},pt.prototype.open=function(){var ut=this;this.isActive=!0,this.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_OPEN+" state "+this.mediaServerState),this.mediaServerState===nt.Disconnected&&(this.wsHandler.on("connected",this.eventHandler.mediaConnect),this.wsHandler.on("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.on("broken",this.eventHandler.mediaBroken),this.netAgent.on("connected",this.eventHandler.accessConnect),this.netAgent.on("disconnected",this.eventHandler.accessDisconnect),this.netAgent.on("broken",this.eventHandler.accessBroken),this.wsHandler.on("downLoadMessage",function(ht){ut.onmessage({data:ht})}),this.wsHandler.off("pcBrokenEvent"),this.wsHandler.on("pcBrokenEvent",function(ht){var ft=lt.ZegoRTCLogEvent.kZegoSDKProxyBroken,gt=ut.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:lt.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},ft.event);gt.setAttributes({service_no:ft.service_no(ht==null?void 0:ht.service_no)}),gt.end()}),this.wsHandler.off("pcDisconnectedEvent"),this.wsHandler.on("pcDisconnectedEvent",function(ht){var ft=lt.ZegoRTCLogEvent.kZegoSDKProxyDisconnect,gt=ut.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:lt.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},ft.event);gt.setAttributes({service_no:ft.service_no(ht==null?void 0:ht.service_no)}),gt.end()}),this.wsHandler.off("pcConnectedEvent"),this.wsHandler.on("pcConnectedEvent",function(ht){var ft=lt.ZegoRTCLogEvent.kZegoSDKProxyConnect,gt=ut.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:lt.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},ft.event);gt.setAttributes({service_no:ft.service_no(ht.service_no),recv_time:ft.recv_time(new Date().getTime()),proxy_link_sources:ft.proxy_link_sources(ht.proxy_link_sources),connect_stream:ft.connect_stream(ht.connect_stream)}),gt.end()}))},pt.prototype.close=function(){this.isActive=!1,this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),this.wsHandler.closeRequest()},pt.prototype.send=function(ut,ht,ft){var gt=this;this.wsHandler.sendRequest({payload:ut,ack:ht,isInSendMap:ft},function(vt){gt.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" fail "+vt),gt.onerror&&gt.onerror(vt)},function(vt){gt.logger.info(at.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" suc "+vt)})},pt.prototype.onopen=function(){},pt.prototype.onclose=function(ut){},pt.prototype.onerror=function(ut){},pt.prototype.onmessage=function(ut){},pt.prototype.onreconnnecting=function(){},pt}();et.AnalogSocket=ct},3544:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.BillingTimer=void 0;var nt=rt(6706),ot=rt(4418),it=function(){function st(at,lt){this.logger=at,this.stateCenter=lt,this.chargeInfosInterval=6e4,this.reporting=!1}return Object.defineProperty(st.prototype,"chargeInfosSaver",{get:function(){return this.stateCenter.chargeInfosSaver},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"streamCenter",{get:function(){return this.stateCenter.streamCenter},enumerable:!1,configurable:!0}),st.prototype.isAllPlayingCdnAndL3=function(){var at=0,lt=0,ct=this.streamCenter.playerList;for(var pt in ct){var ut=ct[pt];ut.player.state==nt.ENUM_PLAY_STATE.playing&&(at++,ut.player.resourceMode!==0&&lt++)}return at==lt&&at!==0},Object.defineProperty(st.prototype,"roomChargeInfos",{get:function(){return this._roomChargeInfos||(this._roomChargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]}),this._roomChargeInfos.timestamp_begin=new Date().getTime(),this._roomChargeInfos.timestamp_end!==0?(this._roomChargeInfos.timestamp_diff=this._roomChargeInfos.timestamp_begin-this._roomChargeInfos.timestamp_end,this._roomChargeInfos.timestamp_diff_flag=1):(this._roomChargeInfos.timestamp_diff=0,this._roomChargeInfos.timestamp_diff_flag=0),this._roomChargeInfos.timestamp_end=new Date().getTime(),this._roomChargeInfos.infos=[{is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[],no_playing:1}],this._roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"chargeInfos",{get:function(){return this.streamCenter?this.streamCenter.getChargeInfos():this.roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"shouldEnd",{get:function(){var at,lt;return!!this.reporting&&(this.shouldReportRoomTime?((at=this.stateCenter.rtm)===null||at===void 0||at.stateCenter.roomModulesList.filter(function(ct){!ct.isLogout()&&ct.isDisConnect()}),((lt=this.stateCenter.rtm)===null||lt===void 0?void 0:lt.stateCenter.roomModulesList.filter(function(ct){return!ct.isLogout()||!ct.isDisConnect()}).length)===0):!this.streamCenter||!this.streamCenter.signalList||Object.keys(this.streamCenter.signalList).length===0)},enumerable:!1,configurable:!0}),st.prototype.report=function(){this.isAllPlayingCdnAndL3()?this.logger.info("zc.bill.tm.r.0 not report"):this.logger.report(this.chargeInfos)},Object.defineProperty(st.prototype,"shouldReportRoomTime",{get:function(){var at,lt,ct;return!(!(!((at=this.stateCenter.rtm)===null||at===void 0)&&at.stateCenter.appConfig)||!(!((lt=this.stateCenter.rtm)===null||lt===void 0)&&lt.stateCenter.appConfig.speedlog_config)||((ct=this.stateCenter.rtm)===null||ct===void 0?void 0:ct.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing)!==1)},enumerable:!1,configurable:!0}),Object.defineProperty(st.prototype,"isReporting",{get:function(){return this.reporting},enumerable:!1,configurable:!0}),st.prototype.startChargeInfoTimer=function(){var at=this;if(this.chargeInfosTimer&&(clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldEnd))return this.logger.info(ot.ZEGO_BILLING_ACTION.START_CHARGE_INFO_TIMER+" chargeinfos timer report ended"),void(this.reporting=!1);this.chargeInfosTimer=setTimeout(function(){at.report(),at.startChargeInfoTimer()},this.chargeInfosInterval)},st.prototype.startChargeInfosUpload=function(){this.reporting||(this.reporting=!0,this.shouldReportRoomTime&&this.report(),this.startChargeInfoTimer(),this.logger.info("zsc.sciu.0 call"))},st.prototype.stopChargeInfosUpload=function(){this.logger.info("zsc.sciu.1 call"),this.chargeInfosTimer&&this.shouldEnd&&(this.logger.info("zsc.sciu.1 stop"),clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldReportRoomTime&&this.report(),this.reporting=!1,this.logger.info("zsc.sciu.1 chargeinfos timer report ended"))},st.prototype.samplingChargeInfos=function(){return this.chargeInfos},st}();et.BillingTimer=it},1378:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.ChargeInfosSaverWeb=void 0;var nt=rt(4418),ot=function(){function it(st,at){this.logger=st,this.stateCenter=at,this.bindListener()}return Object.defineProperty(it.prototype,"billingTimer",{get:function(){return this.stateCenter.billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(it.prototype,"KEY",{get:function(){var st;return"z_cginfos_cache_".concat((st=this.stateCenter.rtm)===null||st===void 0?void 0:st.stateCenter.appid)},enumerable:!1,configurable:!0}),it.prototype.bindListener=function(){var st=this;window.addEventListener("beforeunload",function(){if(st.billingTimer.isReporting){var at=st.billingTimer.samplingChargeInfos();st.saveChargeInfosByLocalStorage(at)}})},it.prototype.saveChargeInfosByLocalStorage=function(st){return this.logger.info(nt.ZEGO_BILLING_ACTION.CHARGEINFO_SAVING_LOCALSTORAGE+" call"),localStorage.setItem(this.KEY,JSON.stringify(st))},it.prototype.getAndRemoveChargeInfosFromLocalStorage=function(){this.logger.info(nt.ZEGO_BILLING_ACTION.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE+" call");var st=localStorage.getItem(this.KEY);return localStorage.removeItem(this.KEY),st},it.prototype.report=function(st){this.logger.report(st)},it.prototype.checkAndReport=function(){this.logger.info(nt.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" call");var st=this.getAndRemoveChargeInfosFromLocalStorage();if(st!=null){var at=JSON.parse(st);this.report(at),this.logger.info(nt.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" reported")}},it}();et.ChargeInfosSaverWeb=ot},4418:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.ZEGO_BILLING_ACTION=void 0,function(rt){rt.SAVED_CHARGEINFO_REPORT="zc.bill.scir",rt.CHARGEINFO_SAVING_LOCALSTORAGE="zc.bill.cisl",rt.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE="zc.bill.cigrl",rt.START_CHARGE_INFO_TIMER="zc.bill.tm.scit"}(et.ZEGO_BILLING_ACTION||(et.ZEGO_BILLING_ACTION={}))},4395:function(_e,et,rt){var nt=this&&this.__awaiter||function(at,lt,ct,pt){return new(ct||(ct=Promise))(function(ut,ht){function ft(yt){try{vt(pt.next(yt))}catch(mt){ht(mt)}}function gt(yt){try{vt(pt.throw(yt))}catch(mt){ht(mt)}}function vt(yt){var mt;yt.done?ut(yt.value):(mt=yt.value,mt instanceof ct?mt:new ct(function(Et){Et(mt)})).then(ft,gt)}vt((pt=pt.apply(at,lt||[])).next())})},ot=this&&this.__generator||function(at,lt){var ct,pt,ut,ht,ft={label:0,sent:function(){if(1&ut[0])throw ut[1];return ut[1]},trys:[],ops:[]};return ht={next:gt(0),throw:gt(1),return:gt(2)},typeof Symbol=="function"&&(ht[Symbol.iterator]=function(){return this}),ht;function gt(vt){return function(yt){return function(mt){if(ct)throw new TypeError("Generator is already executing.");for(;ft;)try{if(ct=1,pt&&(ut=2&mt[0]?pt.return:mt[0]?pt.throw||((ut=pt.return)&&ut.call(pt),0):pt.next)&&!(ut=ut.call(pt,mt[1])).done)return ut;switch(pt=0,ut&&(mt=[2&mt[0],ut.value]),mt[0]){case 0:case 1:ut=mt;break;case 4:return ft.label++,{value:mt[1],done:!1};case 5:ft.label++,pt=mt[1],mt=[0];continue;case 7:mt=ft.ops.pop(),ft.trys.pop();continue;default:if(ut=ft.trys,!((ut=ut.length>0&&ut[ut.length-1])||mt[0]!==6&&mt[0]!==2)){ft=0;continue}if(mt[0]===3&&(!ut||mt[1]>ut[0]&&mt[1]<ut[3])){ft.label=mt[1];break}if(mt[0]===6&&ft.label<ut[1]){ft.label=ut[1],ut=mt;break}if(ut&&ft.label<ut[2]){ft.label=ut[2],ft.ops.push(mt);break}ut[2]&&ft.ops.pop(),ft.trys.pop();continue}mt=lt.call(at,ft)}catch(Et){mt=[6,Et],pt=0}finally{ct=ut=0}if(5&mt[0])throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}([vt,yt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.CheckModule=void 0;var it=rt(4767),st=function(){function at(){var lt=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var ct=document.createElement("canvas");ct.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=ct.captureStream()}catch(pt){console.error("canvas captureStream error",pt)}this.timer=setTimeout(function(){lt.resolve("Detection timeout"),lt.hangup()},5e3)}return at.prototype.checkSupportByType=function(lt){return nt(this,void 0,void 0,function(){var ct,pt,ut=this;return ot(this,function(ht){switch(ht.label){case 0:return this.checkType=lt,ct={},this.localPc=new RTCPeerConnection(ct),this.remotePc=new RTCPeerConnection(ct),pt=new Promise(function(ft){return ut.resolve=ft}),this.localPc.addEventListener("icecandidate",function(ft){return ut.onIceCandidate(ut.localPc,ft)}),this.remotePc.addEventListener("icecandidate",function(ft){return ut.onIceCandidate(ut.remotePc,ft)}),this.remotePc.addEventListener("iceconnectionstatechange",function(ft){ut.remotePc.iceConnectionState==="connected"&&(ut.iceconnectionstatechangeResult=!0),++ut.iceconnectionstatechangeTimes==2&&ut.iceCandidate&&(clearTimeout(ut.timer),ut.resolve(ut.remotePc.iceConnectionState==="connected"||"The browser does not support ".concat(lt," format")),ut.hangup())}),this.localStream.getTracks().forEach(function(ft){return ut.localPc.addTrack(ft,ut.localStream)}),[4,this.check(lt)];case 1:return ht.sent(),[4,pt];case 2:return[2,ht.sent()]}})})},at.prototype.check=function(lt){return nt(this,void 0,void 0,function(){var ct,pt;return ot(this,function(ut){switch(ut.label){case 0:return ut.trys.push([0,2,,3]),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(ct=ut.sent()).sdp=it.SdpUtil.getSDPByVideDecodeType(ct.sdp,lt),this.onCreateOfferSuccess(ct),[3,3];case 2:return pt=ut.sent(),this.onCreateSessionDescriptionError(pt),[3,3];case 3:return[2]}})})},at.prototype.onCreateOfferSuccess=function(lt){return nt(this,void 0,void 0,function(){var ct,pt,ut,ht;return ot(this,function(ft){switch(ft.label){case 0:return ft.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(lt)];case 1:return ft.sent(),[3,3];case 2:return ct=ft.sent(),this.onSetSessionDescriptionError(ct),[2];case 3:return ft.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(lt)];case 4:return ft.sent(),[3,6];case 5:return pt=ft.sent(),this.onSetSessionDescriptionError(pt),[2];case 6:return ft.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return ut=ft.sent(),[4,this.onCreateAnswerSuccess(ut)];case 8:return ft.sent(),[3,10];case 9:return ht=ft.sent(),this.onCreateSessionDescriptionError(ht),[2];case 10:return[2]}})})},at.prototype.onCreateAnswerSuccess=function(lt){return nt(this,void 0,void 0,function(){var ct,pt;return ot(this,function(ut){switch(ut.label){case 0:return ut.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(lt)];case 1:return ut.sent(),[3,3];case 2:return ct=ut.sent(),this.onSetSessionDescriptionError(ct),[2];case 3:return ut.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(lt)];case 4:return ut.sent(),[3,6];case 5:return pt=ut.sent(),this.onSetSessionDescriptionError(pt),[2];case 6:return[2]}})})},at.prototype.onIceCandidate=function(lt,ct){return nt(this,void 0,void 0,function(){var pt;return ot(this,function(ut){switch(ut.label){case 0:return ut.trys.push([0,2,,3]),[4,this.getOtherPc(lt).addIceCandidate(ct.candidate)];case 1:return ut.sent(),[3,3];case 2:return pt=ut.sent(),console.error(this.checkType,"".concat(this.getPcName(lt)," addIceCandidate error"),pt),clearTimeout(this.timer),this.hangup(),this.resolve(pt),[3,3];case 3:return this.getPcName(lt)==="remotePc"&&ct.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&this.getPcName(lt)==="localPc"&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}})})},at.prototype.getOtherPc=function(lt){return lt===this.localPc?this.remotePc:this.localPc},at.prototype.getPcName=function(lt){return lt===this.localPc?"localPc":"remotePc"},at.prototype.onCreateSessionDescriptionError=function(lt){console.error("Failed to create session description: ".concat(lt.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(lt)},at.prototype.onSetSessionDescriptionError=function(lt){console.error("Failed to set session description: ".concat(lt.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(lt)},at.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach(function(lt){return lt.stop()})},at}();et.CheckModule=st},8493:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(gt,vt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yt,mt){yt.__proto__=mt}||function(yt,mt){for(var Et in mt)Object.prototype.hasOwnProperty.call(mt,Et)&&(yt[Et]=mt[Et])},nt(gt,vt)},function(gt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Class extends value "+String(vt)+" is not a constructor or null");function yt(){this.constructor=gt}nt(gt,vt),gt.prototype=vt===null?Object.create(vt):(yt.prototype=vt.prototype,new yt)});Object.defineProperty(et,"__esModule",{value:!0}),et.RetryDispatchHandler=void 0;var it=rt(6502),st=rt(6706),at=rt(6706),lt=rt(1089),ct=rt(3529),pt=rt(2752),ut=ct.ZegoRTCLogEvent.kZegoPublishStreamResource,ht=ct.ZegoRTCLogEvent.kZegoPlayStreamResource,ft=function(gt){function vt(yt,mt,Et,bt){var Ct=gt.call(this)||this;return Ct.retryActiveCount=1,Ct.RETRY_MAX_TIME=90,Ct.logger=yt,Ct.stateCenter=mt,Ct.rtm=Et,Ct.streamCenter=bt,Ct}return ot(vt,gt),vt.prototype.initStream=function(yt,mt,Et){this.streamID=yt,this.playOption=mt,this.isPublish=Et},vt.prototype.active=function(yt){var mt,Et,bt,Ct,Tt,wt,Rt=this;if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry call "+this.streamID),this.isPublish){var It=(Et=(mt=this.streamCenter)===null||mt===void 0?void 0:mt.publisherList[this.streamID])===null||Et===void 0?void 0:Et.publisher;Tt=It!=null&&It.isRePublish?ct.ZegoRTCLogEvent.kZegoRePublish:ct.ZegoRTCLogEvent.kZegoStartPublish,wt=ct.ZegoRTCLogEvent.kZegoPublishStreamResource}else{var St=(Ct=(bt=this.streamCenter)===null||bt===void 0?void 0:bt.playerList[this.streamID])===null||Ct===void 0?void 0:Ct.player;Tt=St!=null&&St.isRePlay?ct.ZegoRTCLogEvent.kZegoRePlay:ct.ZegoRTCLogEvent.kZegoStartPlay,wt=ct.ZegoRTCLogEvent.kZegoPlayStreamResource}var Pt=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:Tt.event,par:this.streamID},{key:""},wt.event);if(this.retryTimer)return this.logger.info(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" has active, ignore"),this.stateCenter.reporter.setError(Pt,pt.errorCodeList.DISPATCH_ERROR,"has active, ignore"),!1;var Ot=this.rtm.isDisConnect()&&this.stateCenter.networkState==at.ENUM_NETWORK_STATE.offline;if(Ot){if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" check if really offline"),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry over time, stop retry"),this.stateCenter.reporter.setError(Pt,pt.errorCodeList.DISPATCH_ERROR,"retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var Ut=this.isPublish?this.streamCenter.publisherList[this.streamID]:this.streamCenter.playerList[this.streamID];Ut&&(Ut.isReDispatch=!0)}var Bt=this.retryActiveCount-1;this.retryDispatchSpan||(this.retryDispatchSpan=Pt,this.stateCenter.reporter.setSpanInMap(Pt,{key:wt.event,par:this.streamID}));var xt=this.playOption&&this.playOption.resourceMode==2?1:0,At={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.streamCenter.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:Bt,center_ability:!0,dispatch_type:xt};return this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout(function(){Rt.retryTimer=null,Ot?Rt.retryNetCount++:Rt.retryActiveCount++;var Mt=Rt.streamCenter.getRoomByStreamID(Rt.streamID),Nt=Rt.rtm.service.sendMessage("webrtc_url",At,function($t,Ft){Rt.handleFetchWebRtcUrlRsp($t)},function($t,Ft){Rt.handleFetchWebRtcUrlRsp($t)},void 0,{sessionID:Mt==null?void 0:Mt.sessionID,roomID:Mt==null?void 0:Mt.roomID,roomSessionID:Mt==null?void 0:Mt.roomSessionID});Rt.isPublish&&Nt?Rt.streamCenter.publisherList[Rt.streamID]&&(Rt.streamCenter.publisherList[Rt.streamID].seq=Nt):Nt&&Rt.streamCenter.playerList[Rt.streamID]&&(Rt.streamCenter.playerList[Rt.streamID].seq=Nt)},typeof yt=="number"?yt:1e3*this.retryActiveInterval),this.logger.info(lt.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" call success"),!0},vt.prototype.startMaxTime=function(){var yt=this;this.maxTimer||(this.maxTimer=setTimeout(function(){yt.logger.warn("".concat(lt.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME," ").concat(yt.streamID," dispatch over max time ").concat(yt.RETRY_MAX_TIME,"s stop retry")),yt.isOverTime=!0,yt.invalid();var mt=ct.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError;mt.message=mt.message+" try max limit",yt.isPublish?yt.streamCenter.onPublishStateUpdate(at.ENUM_PUBLISH_STATE_UPDATE.error,yt.streamID,mt):yt.streamCenter.onPlayStateUpdate(at.ENUM_PLAY_STATE_UPDATE.error,yt.streamID,mt)},1e3*this.RETRY_MAX_TIME))},vt.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},vt.prototype.onactive=function(){for(var yt=[],mt=0;mt<arguments.length;mt++)yt[mt]=arguments[mt]},vt.prototype.handleFetchWebRtcUrlRsp=function(yt){var mt,Et,bt,Ct,Tt,wt,Rt,It,St,Pt,Ot;if(yt.code&&[pt.errorCodeList.TIMEOUT.code].includes(yt.code))this.active();else{if(yt.code&&[pt.errorCodeList.SOCKET_CLOSE.code].includes(yt.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.streamCenter.publisherList[this.streamID].isReDispatch=!0:this.streamCenter.playerList[this.streamID].isReDispatch=!0);var Ut=yt,Bt=Ut.body.stream_id,xt=!1,At=ct.ZegoRTCLogEvent.kZegoTaskPlayStart.error;if(this.isPublish&&(!this.streamCenter.publisherList[Bt]||Ut.header.seq!==this.streamCenter.publisherList[this.streamID].seq))return this.logger.warn(lt.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.streamCenter.playerList[this.streamID]&&Ut.header.seq===this.streamCenter.playerList[this.streamID].seq))return this.logger.warn(lt.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(this.stateCenter.clientIP=Ut.body.clientip||"",Ut.body.err_code===0||Ut.body.need_action!=2)if(Ut.body.err_code===0||Ut.body.need_action===1||[3102].includes(Ut.body.err_code)){if(this.stopMaxTime(),this.invalid(),Ut.body.urls&&Array.isArray(Ut.body.urls)&&Ut.body.urls.length>0?xt=!0:this.logger.error(lt.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),Ut.body.ptype==="push"&&this.streamCenter.publisherList[Bt]){if(!xt)return(Tt=this.retryDispatchSpan)===null||Tt===void 0||Tt.setAttributes({try_cnt:ut.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,ct.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),this.retryDispatchSpan=null,void this.streamCenter.onPublishStateUpdate(at.ENUM_PUBLISH_STATE_UPDATE.error,Bt,ct.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);var Mt=this.streamCenter.publisherList[Bt];this.stateCenter.publishStreamList[Bt]?(Mt.ttl=Ut.body.hosts_ttl?new Date().getTime()+1e3*Ut.body.hosts_ttl:0,Mt.isCenterNode=typeof Ut.body.is_center_node=="boolean"&&Ut.body.is_center_node,Mt.serverUrls=Ut.body.urls,(wt=this.retryDispatchSpan)===null||wt===void 0||wt.setAttributes({urls:ut.urls(Mt.serverUrls),is_center:ut.is_center(Mt.isCenterNode),try_cnt:ut.try_cnt(this.retryActiveCount)}),(Rt=this.retryDispatchSpan)===null||Rt===void 0||Rt.end(),this.retryDispatchSpan=null,this.streamCenter.startPublishingStream(Bt)):this.logger.error(lt.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if(Ut.body.ptype=="pull"&&this.streamCenter.playerList[Bt]){var Nt;if(!xt)return(Nt=JSON.parse(JSON.stringify(((It=Ut.body)===null||It===void 0?void 0:It.err_code)===1900001004?At.kPlayStreamNotFound:At.kPlayDispatchError))).message=Nt.message+(Ut.body.err_code?" server error:"+Ut.body.err_code:""),Ut.body.err_code===3102&&(Nt=ct.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode),(St=this.retryDispatchSpan)===null||St===void 0||St.setAttributes({try_cnt:ht.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,Nt),void this.streamCenter.onPlayStateUpdate(at.ENUM_PLAY_STATE_UPDATE.error,Bt,Nt);var $t=this.streamCenter.playerList[Bt];$t.ttl=Ut.body.hosts_ttl?new Date().getTime()+1e3*Ut.body.hosts_ttl:0,$t.isCenterNode=typeof Ut.body.is_center_node=="boolean"&&Ut.body.is_center_node,$t.serverUrls=Ut.body.urls,(Pt=this.retryDispatchSpan)===null||Pt===void 0||Pt.setAttributes({urls:ht.urls($t.serverUrls),is_center:ht.is_center($t.isCenterNode),try_cnt:ht.try_cnt(this.retryActiveCount)}),(Ot=this.retryDispatchSpan)===null||Ot===void 0||Ot.end(),this.retryDispatchSpan=null,this.streamCenter.startPlayingStream(Bt,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[Bt])}}else this.retryActiveInterval=Math.floor(3*Math.random())+3,this.retryActiveCount==2&&((Nt=JSON.parse(JSON.stringify(((bt=Ut.body)===null||bt===void 0?void 0:bt.ptype)==="pull"&&((Ct=Ut.body)===null||Ct===void 0?void 0:Ct.err_code)===1900001004?At.kPlayStreamNotFound:At.kPlayDispatchError))).message=Nt.message+(Ut.body.err_code?" server error:"+Ut.body.err_code:""),Ut.body.ptype==="push"?this.streamCenter.onPublishStateUpdate(at.ENUM_PUBLISH_STATE_UPDATE.retry,Bt,Nt):this.streamCenter.onPlayStateUpdate(at.ENUM_PLAY_STATE_UPDATE.retry,Bt,Nt)),this.active();else this.retryActiveInterval=Ut.body.action_delay/1e3||Math.floor(3*Math.random())+3,this.retryActiveCount==2&&((Nt=JSON.parse(JSON.stringify(((mt=Ut.body)===null||mt===void 0?void 0:mt.ptype)==="pull"&&((Et=Ut.body)===null||Et===void 0?void 0:Et.err_code)===1900001004?At.kPlayStreamNotFound:At.kPlayDispatchError))).message=Nt.message+(Ut.body.err_code?" server error:"+Ut.body.err_code:""),Ut.body.ptype==="push"?this.streamCenter.onPublishStateUpdate(at.ENUM_PUBLISH_STATE_UPDATE.retry,Bt,Nt):this.streamCenter.onPlayStateUpdate(at.ENUM_PLAY_STATE_UPDATE.retry,Bt,Nt)),this.active()}},vt}(it.RetryHandler);et.RetryDispatchHandler=ft},6014:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(gt,vt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yt,mt){yt.__proto__=mt}||function(yt,mt){for(var Et in mt)Object.prototype.hasOwnProperty.call(mt,Et)&&(yt[Et]=mt[Et])},nt(gt,vt)},function(gt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Class extends value "+String(vt)+" is not a constructor or null");function yt(){this.constructor=gt}nt(gt,vt),gt.prototype=vt===null?Object.create(vt):(yt.prototype=vt.prototype,new yt)});Object.defineProperty(et,"__esModule",{value:!0}),et.RetryStreamHandler=void 0;var it=rt(6706),st=rt(6502),at=rt(3529),lt=rt(1089),ct=rt(608),pt=rt(746),ut=at.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,ht=at.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,ft=function(gt){function vt(yt,mt,Et,bt){var Ct=gt.call(this)||this;return Ct.logger=yt,Ct.stateCenter=mt,Ct.streamCenter=Et,Ct.isPublish=bt,Ct.serverUrls=[],Ct}return ot(vt,gt),vt.prototype.initStream=function(yt,mt){this.streamID=yt,this.serverUrls=mt},vt.prototype.activePublish=function(yt){var mt=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var Et=this.stateCenter.networkState==it.ENUM_NETWORK_STATE.offline;if(Et){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(this.retryActiveCount==1)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var bt=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=bt>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:bt}var Ct=this.streamCenter.publisherList[this.streamID].publisher,Tt=this.serverUrls[0],wt=["unified_rtc","unified_l3"].includes(Tt);if(!wt){var Rt=this.serverUrls,It=Ct.signal?Ct.signal.server:"";Rt.forEach(function(Pt,Ot){return Ot<=Rt.indexOf(It)&&mt.serverUrls.push(Pt)}),Rt.splice(0,Rt.indexOf(It)+1),Tt=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]}var St=typeof yt=="number"?yt:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:Ct.parentSpanKey,par:this.streamID},{wait_consume:at.ZegoRTCLogEvent.kZegoStartPublish.wait_consume(St)}),this.retryTimer=setTimeout(function(){mt.logger.info("zc.tsh.a stream ".concat(mt.streamID," : connect to ").concat(wt?"unified signal server":"signal server "+Tt)),mt.retryTimer&&clearTimeout(mt.retryTimer),mt.retryTimer=null,Et?mt.retryNetCount++:mt.retryActiveCount++,mt.streamCenter.connectPublishServer(mt.streamID,Tt)},St),this.logger.info("zc.tsh.a call success. delay: "+St),!0},vt.prototype.activePull=function(yt,mt){var Et=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),mt&&(this.playStreamSuccess=mt),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var bt=this.stateCenter.networkState==it.ENUM_NETWORK_STATE.offline;if(bt){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(this.retryActiveCount==1)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var Ct=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=Ct>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:Ct}var Tt=this.streamCenter.playerList[this.streamID].player,wt=this.serverUrls,Rt=Tt.signal?Tt.signal.server:"",It=this.serverUrls[0],St=["unified_rtc","unified_l3"].includes(It);St||(wt.forEach(function(Ot,Ut){return Ut<=wt.indexOf(Rt)&&Et.serverUrls.push(Ot)}),wt.splice(0,wt.indexOf(Rt)+1),It=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]);var Pt=typeof yt=="number"?yt:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:Tt.parentSpanKey,par:this.streamID},{wait_consume:at.ZegoRTCLogEvent.kZegoStartPlay.wait_consume(Pt)}),this.retryTimer=setTimeout(function(){Et.logger.warn("zc.tsh.a stream ".concat(Et.streamID," : connect to ").concat(St?"unified signal server":"signal server "+It)),Et.retryTimer&&clearTimeout(Et.retryTimer),Et.retryTimer=null,bt?Et.retryNetCount++:Et.retryActiveCount++,Et.streamCenter.connectPlayServer(Et.streamID,Et.playStreamSuccess,It)},Pt),this.logger.info("zc.tsh.a call success. delay: "+Pt),!0},vt.prototype.startMaxTime=function(){var yt=this;this.logger.info("zc.tsh.smt ".concat(this.streamID," call")),this.maxTimer?this.logger.warn("zc.tsh.smt max timer"):(this.logger.info("zc.tsh.smt start max timer"),this.maxTimer=setTimeout(function(){if(yt.logger.warn("zc.tsh.smt ".concat(yt.streamID," over max time ").concat(yt.RETRY_MAX_TIME,"s, stop retry")),yt.isOverTime=!0,yt.invalid(),yt.isPublish){if(!yt.streamCenter.publisherList[yt.streamID])return void yt.logger.info("zc.tsh.smt streamID "+yt.streamID+" publish no found");yt.publishStateHandle(it.ENUM_PUBLISH_STATE_UPDATE.error,yt.streamID,at.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError,!0)}else{if(!yt.streamCenter.playerList[yt.streamID])return void yt.logger.info("zc.tsh.smt streamID "+yt.streamID+" play no found");yt.playStateHandle(it.ENUM_PLAY_STATE_UPDATE.error,yt.streamID,at.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError,!0)}},1e3*this.RETRY_MAX_TIME))},vt.prototype.stopMaxTime=function(){this.logger.info("zc.tsh.stmt streamID "+this.streamID+" "+!!this.maxTimer),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},vt.prototype.onactive=function(){for(var yt=[],mt=0;mt<arguments.length;mt++)yt[mt]=arguments[mt]},vt.prototype.retryNextSignal=function(yt){var mt,Et;if(this.stateCenter.networkState==it.ENUM_NETWORK_STATE.offline)return!0;if(this.isPublish){var bt=this.streamCenter.publisherList[this.streamID];if(bt.publisher.state==it.ENUM_PUBLISH_STATE.stop&&[at.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code,at.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(yt.code))return!0;if(bt.isCenterNode&&((mt=bt.publisher.signal)===null||mt===void 0?void 0:mt.wsReadyState)==pt.SocketState.OPEN)return!1;if(!bt.isCenterNode&&[at.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(yt.code)){var Ct=yt.message.match(/reason:(\d+)/);return!["26"].includes(Ct?Ct[1]:"")}return!0}var Tt=this.streamCenter.playerList[this.streamID];return Tt.player.state==it.ENUM_PLAY_STATE.stop&&[at.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code,at.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(yt.code)?!0:Tt.isCenterNode&&((Et=Tt.player.signal)===null||Et===void 0?void 0:Et.wsReadyState)==pt.SocketState.OPEN?!1:!Tt.isCenterNode&&[at.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(yt.code)?(Ct=yt.message.match(/reason:(\d+)/),!["24","26","28"].includes(Ct?Ct[1]:"")):!0},vt.prototype.publishStateHandle=function(yt,mt,Et,bt,Ct,Tt){var wt=this;this.logger.info(lt.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" call "+mt+" "+(Et?Et.code+"":"")+" "+bt+" "+JSON.stringify(Ct)+" "+Tt);var Rt=bt||this.RETRY_MAX_TIME<3;if(!Rt&&Et&&(ct.ClientUtil.isReDispatch(Et)||this.serverUrls.length==0))return this.logger.info(lt.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" stop "+Rt+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPublishStateUpdate(yt,mt,Et);var It=this.streamCenter.publisherList[mt],St=It.publisher;if(!Rt&&Et&&Et.code!==0){this.maxTimer||Rt||this.startMaxTime(),this.stateCenter.publishStreamList[mt].state=it.ENUM_PUBLISH_STREAM_STATE.retryPublish;var Pt=St.localStream,Ot=St.videoInfo,Ut=St.mediaStreamConfig,Bt=St.publishOption;if(St.sessionId!=0&&St.signal&&St.shouldSendCloseSession()&&(St.signal.sendCloseSession((0,it.getSeq)(),St.sessionId,1),St.signal.removeSession(St.sessionId),St.closeSessionSignal=!0),St.resetPublish(),!Rt&&!this.retryNextSignal(Et)){if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" retry current signal "),this.rePublishSpan(mt,Et,St),It.isCenterNode){this.logger.info(lt.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" current node "+St.gwNode+" failed "+JSON.stringify(St.retryFailGwNodes));var xt=St.retryFailGwNodes.findIndex(function(At){return At===St.gwNode});xt>=0&&St.retryFailGwNodes.splice(xt,1),St.retryFailGwNodes.push(St.gwNode),this.retryNewGwNode(St,Et,Ct,Tt)}return this.startRetryTimer=setTimeout(function(){wt.startRetryTimer&&clearTimeout(wt.startRetryTimer),wt.startRetryTimer=null,St.startPublish(mt,Pt,Ot,Ut,Bt)},1e3),void(Et&&Et.code!==0&&this.streamCenter.onPublishStateUpdate(2,mt,Et))}this.streamCenter.removeStreamFromSignal(!0,mt)}if(Rt)return this.stopMaxTime(),this.invalid(),yt===1&&St.resetPublish(),Et!=null&&Et.code&&this.stateCenter.reporter.spanSetAttributes({key:St.parentSpanKey,par:mt},Et),void this.streamCenter.onPublishStateUpdate(yt,mt,Et);Et&&Et.code!==0&&this.activePublish(void 0)&&(St&&(St.isExternal=!1),this.rePublishSpan(mt,Et,St),this.streamCenter.onPublishStateUpdate(2,mt,Et)),this.logger.info(lt.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" end "+mt)},vt.prototype.needReDispatchError=function(yt){return[at.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor.code,at.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetProbePoor.code].includes(yt.code)},vt.prototype.playStateHandle=function(yt,mt,Et,bt,Ct,Tt){var wt=this;this.logger.info(lt.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" call "+mt+" "+(Et?Et.code+"":"")+" "+bt+" "+JSON.stringify(Ct)+" "+Tt);var Rt=bt||this.RETRY_MAX_TIME<3;if(!Rt&&Et&&(ct.ClientUtil.isReDispatch(Et)||this.serverUrls.length==0))return this.logger.info(lt.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" stop "+Rt+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPlayStateUpdate(yt,mt,Et);var It=this.streamCenter.playerList[mt],St=It.player;if(!Rt&&Et&&Et.code!==0){!this.maxTimer&&!Rt&&this.startMaxTime();var Pt=St.playOption;if(St.sessionId!=0&&St.signal&&St.shouldSendCloseSession()&&(St.signal.sendCloseSession((0,it.getSeq)(),St.sessionId,1),St.signal.removeSession(St.sessionId),St.closeSessionSignal=!0),St.resetPlay(),!Rt&&!this.retryNextSignal(Et)){if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" retry current signal "),It.isCenterNode){this.logger.info(lt.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" current node "+St.gwNode+" "+JSON.stringify(St.retryFailGwNodes));var Ot=St.retryFailGwNodes.findIndex(function(Ut){return Ut===St.gwNode});Ot>=0&&St.retryFailGwNodes.splice(Ot,1),St.retryFailGwNodes.push(St.gwNode),this.retryNewGwNode(St,Et,Ct,Tt)}return this.rePlaySpan(mt,Et,St),this.startRetryTimer=setTimeout(function(){wt.startRetryTimer&&clearTimeout(wt.startRetryTimer),wt.startRetryTimer=null,St.startPlay(mt,St.getRemoteStreamSuc,Pt)},1e3),void(Et&&Et.code!==0&&this.streamCenter.onPlayStateUpdate(2,mt,Et))}this.streamCenter.removeStreamFromSignal(!1,mt)}if(Rt)return this.stopMaxTime(),this.invalid(),Et!=null&&Et.code&&this.stateCenter.reporter.spanSetAttributes({key:St.parentSpanKey,par:mt},{error:Et==null?void 0:Et.code}),void this.streamCenter.onPlayStateUpdate(yt,mt,Et);Et&&Et.code!==0&&this.activePull(void 0)&&(St&&(St.isExternal=!1),(0,it.getReportSeq)(),this.rePlaySpan(mt,Et,St),this.streamCenter.onPlayStateUpdate(2,mt,Et)),this.logger.info(lt.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" end "+mt)},vt.prototype.retryNewGwNode=function(yt,mt,Et,bt){var Ct,Tt,wt,Rt;if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" call "+yt.streamId),mt&&mt.code&&this.needReDispatchError(mt))this.retryNextGwNode(yt,!0,bt);else if(Et!=null&&Et.action)switch(Et==null?void 0:Et.action){case 1:case 5:break;case 2:default:this.retryNextGwNode(yt,!1,bt);break;case 3:var It=Et==null?void 0:Et.ins;It&&It.length>0&&(yt.gwNode=(((Ct=It[0])===null||Ct===void 0?void 0:Ct.IP)||((Tt=It[0])===null||Tt===void 0?void 0:Tt.ip))+":"+(((wt=It[0])===null||wt===void 0?void 0:wt.Port)||((Rt=It[0])===null||Rt===void 0?void 0:Rt.port)));break;case 4:yt.resetGwNodes(),this.streamCenter.clearCachedGwNodesList(yt,this.isPublish)}else this.retryNextGwNode(yt,!1,bt);this.logger.info(lt.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" "+yt.streamId+" new node "+yt.gwNode)},vt.prototype.retryNextGwNode=function(yt,mt,Et){var bt;if(this.logger.info(lt.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+yt.streamId+" "+yt.gwNode),((bt=yt.gwNodeList)===null||bt===void 0?void 0:bt.length)!==0||yt.gwNode){var Ct=yt.gwNodesTTL<new Date().getTime(),Tt=yt.iceStateDisConnect&&this.stateCenter.isMultiOuter,wt=yt.gwNodeList.findIndex(function(It){return It==yt.gwNode}),Rt=wt===yt.gwNodeList.length-1;this.logger.info(lt.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" "+yt.streamId+" ttl: "+Ct+" ice: "+Tt+" last: "+Rt),mt||Ct||yt.isLastConnected&&Tt||Rt?yt.resetGwNodes():yt.gwNode=Et?yt.gwNodeList[0]:yt.gwNodeList[++wt%yt.gwNodeList.length]}else this.logger.info(lt.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+yt.streamId+" gwNodeList is empty")},vt.prototype.rePublishSpan=function(yt,mt,Et){Et==null||Et.uploadRTCPublishStats(),this.stateCenter.reporter.spanEnd({key:at.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:yt},{error:mt==null?void 0:mt.code,message:mt==null?void 0:mt.message}),this.stateCenter.reporter.createSpan(it.TRACER_LEVEL.H,{key:at.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:yt},{key:at.ZegoRTCLogEvent.kZegoRePublish.event,par:yt},at.ZegoRTCLogEvent.kZegoRePublish.event,!0),(Et==null?void 0:Et.isRePublish)===!1&&this.stateCenter.reporter.spanSetAttributes({key:ut.event,par:yt},{retry_btime:ut.retry_btime(new Date().getTime())}),Et&&(Et.isRePublish=!0,Et.parentSpanKey=at.ZegoRTCLogEvent.kZegoRePublish.event)},vt.prototype.rePlaySpan=function(yt,mt,Et){Et==null||Et.uploadRTCPlayStats(),this.stateCenter.reporter.spanEnd({key:at.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:yt},{error:mt==null?void 0:mt.code,message:mt==null?void 0:mt.message}),this.stateCenter.reporter.createSpan(it.TRACER_LEVEL.H,{key:at.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:yt},{key:at.ZegoRTCLogEvent.kZegoRePlay.event,par:yt},at.ZegoRTCLogEvent.kZegoRePlay.event,!0),(Et==null?void 0:Et.isRePlay)===!1&&this.stateCenter.reporter.spanSetAttributes({key:ht.event,par:yt},{retry_btime:ht.retry_btime(new Date().getTime())}),Et&&(Et.isRePlay=!0,Et.parentSpanKey=at.ZegoRTCLogEvent.kZegoRePlay.event)},vt}(st.RetryHandler);et.RetryStreamHandler=ft},1691:function(_e,et,rt){var nt=this&&this.__awaiter||function(ct,pt,ut,ht){return new(ut||(ut=Promise))(function(ft,gt){function vt(Et){try{mt(ht.next(Et))}catch(bt){gt(bt)}}function yt(Et){try{mt(ht.throw(Et))}catch(bt){gt(bt)}}function mt(Et){var bt;Et.done?ft(Et.value):(bt=Et.value,bt instanceof ut?bt:new ut(function(Ct){Ct(bt)})).then(vt,yt)}mt((ht=ht.apply(ct,pt||[])).next())})},ot=this&&this.__generator||function(ct,pt){var ut,ht,ft,gt,vt={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return gt={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(gt[Symbol.iterator]=function(){return this}),gt;function yt(mt){return function(Et){return function(bt){if(ut)throw new TypeError("Generator is already executing.");for(;vt;)try{if(ut=1,ht&&(ft=2&bt[0]?ht.return:bt[0]?ht.throw||((ft=ht.return)&&ft.call(ht),0):ht.next)&&!(ft=ft.call(ht,bt[1])).done)return ft;switch(ht=0,ft&&(bt=[2&bt[0],ft.value]),bt[0]){case 0:case 1:ft=bt;break;case 4:return vt.label++,{value:bt[1],done:!1};case 5:vt.label++,ht=bt[1],bt=[0];continue;case 7:bt=vt.ops.pop(),vt.trys.pop();continue;default:if(ft=vt.trys,!((ft=ft.length>0&&ft[ft.length-1])||bt[0]!==6&&bt[0]!==2)){vt=0;continue}if(bt[0]===3&&(!ft||bt[1]>ft[0]&&bt[1]<ft[3])){vt.label=bt[1];break}if(bt[0]===6&&vt.label<ft[1]){vt.label=ft[1],ft=bt;break}if(ft&&vt.label<ft[2]){vt.label=ft[2],vt.ops.push(bt);break}ft[2]&&vt.ops.pop(),vt.trys.pop();continue}bt=pt.call(ct,vt)}catch(Ct){bt=[6,Ct],ht=0}finally{ut=ft=0}if(5&bt[0])throw bt[1];return{value:bt[0]?bt[1]:void 0,done:!0}}([mt,Et])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.GatewaySignal=void 0;var it=rt(6348),st=rt(608),at=rt(1358),lt=function(){function ct(pt){this.streamSignal=pt,this.callbackMap={}}return ct.prototype.mediaStreamSEIUUIDReq=function(pt,ut,ht,ft){return nt(this,void 0,void 0,function(){var gt=this;return ot(this,function(vt){return[2,new Promise(function(yt,mt){var Et=it.webrtc_cmd.WebrtcCmdReqMsg.encode({usr_sei_filter:{sei_filter:ft}}).finish(),bt=st.ClientUtil.uint8arrayToBase64(Et);gt.streamSignal.sendGWCmd(pt,ut,{peer_id:ht,cmd_id:5,body:bt},function(Ct,Tt,wt){var Rt=at.WebRTCUtil.base64ToUint8Array(wt.body),It=it.webrtc_cmd.WebrtcCmdRspMsg.decode(Rt);yt(It)},function(Ct){mt(Ct)})})]})})},ct.prototype.metadataAck=function(pt,ut,ht){return nt(this,void 0,void 0,function(){var ft,gt;return ot(this,function(vt){return ft=it.webrtc_cmd.WebrtcCmdRspMsg.encode({meta_data_ack:{result:1}}).finish(),gt=st.ClientUtil.uint8arrayToBase64(ft),this.streamSignal.sendGWAck(pt,ut,{peer_id:ht,cmd_id:1,body:gt}),[2]})})},ct.prototype.registerPushCallback=function(pt,ut,ht){var ft,gt=this,vt=this.callbackMap[ut];vt?vt[pt]=ht:(this.callbackMap[ut]=((ft={})[pt]=ht,ft),this.streamSignal.registerPushCallback("CmdPush",ut,function(yt,mt,Et){var bt=at.WebRTCUtil.base64ToUint8Array(Et.body),Ct=it.webrtc_cmd.WebrtcCmdReqMsg.decode(bt),Tt=Object.keys(Ct)[0];console.error("CmdPush",Tt,Ct),Tt=Tt||"meta_data_push";var wt=gt.callbackMap[mt];if(wt){var Rt=wt[Tt];Rt&&Rt(yt,mt,Et.body)}}))},ct.prototype.unregisterPushCallback=function(pt,ut){var ht=this.callbackMap[ut];ht&&(delete ht[pt],Object.keys(ht).length===0&&(this.streamSignal.unregisterPushCallback("CmdPush",ut),delete this.callbackMap[ut]))},ct}();et.GatewaySignal=lt},6454:function(_e,et,rt){Object.defineProperty(et,"__esModule",{value:!0}),et.translate=void 0;var nt=rt(2608);et.translate=function(ot,it,st){if(ot===0)return"";var at=1,lt="  Here are some explanations about the error code: ".concat(at++,". reason=").concat(ot,": ").concat(function(ct){switch(ct){case nt.CloseReason.PEER_CLOSE_REASON_NORMAL:return"Client voluntarily exits.";case nt.CloseReason.PEER_CLOSE_REASON_STATE_ERROR:return"Status error; Reason: Repeatedly received offer/answer, etc.";case nt.CloseReason.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:return"Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";case nt.CloseReason.PEER_CLOSE_REASON_VRS_PLAY_DENIED:return"Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";case nt.CloseReason.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:return"No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";case nt.CloseReason.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:return"No matching video codec; Reason: Client (Web) does not support h264 and vp8 etc.";case nt.CloseReason.PEER_CLOSE_REASON_SDP_INVALID:return"SDP parsing error; Reason: SDP format error.";default:return"unknown"}}(ot));return it&&(lt+=" ".concat(at++,". action=").concat(it,": ").concat(function(ct){switch(ct){case nt.DeniedAction.DENIED_ACTION_STOP:return"cancel pushing stream.";case nt.DeniedAction.DENIED_ACTION_RETRY_NEXT_IP:return"Try the next ip, if there is no next ip, re-request the route.";case nt.DeniedAction.DENIED_ACTION_REDIRECT:return"Redirect to the ip address specified by data.";case nt.DeniedAction.DENIED_ACTION_REDISPATCH:return"re-request route.";case nt.DeniedAction.DENIED_ACTION_RETRY:return"retry current gateway node.";default:return"unknown"}}(it))),st&&(lt+=" ".concat(at++,". err=").concat(st,": ").concat(function(ct){switch(ct){case nt.DeniedError.DENIED_ERROR_DISPATCH_FAILED:return"media scheduling failed.";case nt.DeniedError.DENIED_ERROR_EMPTY_PUBLISH_IPS:return"empty publish ips error.";case nt.DeniedError.DENIED_ERROR_EMPTY_PLAY_IPS:return"empty play ips error.";case nt.DeniedError.DENIED_ERROR_STREAM_NOT_EXSIT:return"stream does not exist.";case nt.DeniedError.DENIED_ERROR_APP_NOT_ONLINE:return"APP has been removed.";case nt.DeniedError.DENIED_ERROR_INVALID_PARAMETERS:return"invalid parameter.";case nt.DeniedError.DENIED_ERROR_NO_CLIENTIP_SET:return"client ip is not set.";case nt.DeniedError.DENIED_ERROR_PERMISSION_DENIED:return"No permission, access denied.";case nt.DeniedError.DENIED_ERROR_SET_STREAM_INFO_FAILED:return"Failed to set stream information.";case nt.DeniedError.DENIED_ERROR_INTERNAL_ERROR:return"internal error / server busy.";case nt.DeniedError.DENIED_ERROR_PUBLISH_FORBIDDEN:return"Streaming is banned.";case nt.DeniedError.DENIED_ERROR_NEW_PUBLISH:return"new publish error.";case nt.DeniedError.DENIED_ERROR_INNER_ERROR:return"inner error.";case nt.DeniedError.DENIED_ERROR_MANAGER_STOP:return"manager stop error.";case nt.DeniedError.DENIED_ERROR_PUBLISH_AUTH_FAILED:return"Stream push authentication failed.";case nt.DeniedError.DENIED_ERROR_PLAY_AUTH_FAILED:return"Stream pull authentication failed.";case nt.DeniedError.DENIED_ERROR_SERVER_STOP:return"server stoped error.";case nt.DeniedError.DENIED_ERROR_SESSION_ID:return"session id error.";case nt.DeniedError.DENIED_ERROR_MANAGER_TIMEOUT:return"manager timeout.";case nt.DeniedError.DENIED_ERROR_NEW_PUBLISH_SRC:return"new publish src.";case nt.DeniedError.DENIED_ERROR_PLAY_SESSION_LIMIT:return"Pull session limit.";case nt.DeniedError.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:return"disable ip port flexible.";case nt.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_TS:return"packet illegal ts.";case nt.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_ADDR:return"packet illegal address.";case nt.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:return"packet illegal format.";case nt.DeniedError.DENIED_ERROR_CHECK_ADDR_TIMEOUT:return"Check address timed out.";case nt.DeniedError.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:return"Check Address Illegal Signature.";case nt.DeniedError.DENIED_ERROR_CHECK_ADDR_INCONSTANT:return"Check for address changes.";case nt.DeniedError.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:return"SDP negotiation timed out, check whether the SDP is sent successfully.";case nt.DeniedError.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:return"Address negotiation timed out, check whether the Candidate is sent successfully.";case nt.DeniedError.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:return"The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";case nt.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:return"The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";case nt.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:return"The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";case nt.DeniedError.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:return"Streaming encryption failed";case nt.DeniedError.DENIED_ERROR_WEBRTC_HB_TIMEOUT:return"The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";case nt.DeniedError.DENIED_ERROR_WEBRTC_CONNECTION_LOST:return"The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";case nt.DeniedError.DENIED_ERROR_WEBRTC_NEW_SRC:return"After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";default:return"unknown"}}(st))),lt}},2608:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.DeniedError=et.DeniedAction=et.CloseReason=void 0,function(rt){rt[rt.PEER_CLOSE_REASON_NORMAL=0]="PEER_CLOSE_REASON_NORMAL",rt[rt.PEER_CLOSE_REASON_STATE_ERROR=5]="PEER_CLOSE_REASON_STATE_ERROR",rt[rt.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED=15]="PEER_CLOSE_REASON_VRS_PUBLISH_DENIED",rt[rt.PEER_CLOSE_REASON_VRS_PLAY_DENIED=18]="PEER_CLOSE_REASON_VRS_PLAY_DENIED",rt[rt.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH=21]="PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH",rt[rt.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH=22]="PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH",rt[rt.PEER_CLOSE_REASON_SDP_INVALID=23]="PEER_CLOSE_REASON_SDP_INVALID"}(et.CloseReason||(et.CloseReason={})),function(rt){rt[rt.DENIED_ACTION_STOP=1]="DENIED_ACTION_STOP",rt[rt.DENIED_ACTION_RETRY_NEXT_IP=2]="DENIED_ACTION_RETRY_NEXT_IP",rt[rt.DENIED_ACTION_REDIRECT=3]="DENIED_ACTION_REDIRECT",rt[rt.DENIED_ACTION_REDISPATCH=4]="DENIED_ACTION_REDISPATCH",rt[rt.DENIED_ACTION_RETRY=5]="DENIED_ACTION_RETRY"}(et.DeniedAction||(et.DeniedAction={})),function(rt){rt[rt.DENIED_ERROR_DISPATCH_FAILED=1001]="DENIED_ERROR_DISPATCH_FAILED",rt[rt.DENIED_ERROR_EMPTY_PUBLISH_IPS=1002]="DENIED_ERROR_EMPTY_PUBLISH_IPS",rt[rt.DENIED_ERROR_EMPTY_PLAY_IPS=1003]="DENIED_ERROR_EMPTY_PLAY_IPS",rt[rt.DENIED_ERROR_STREAM_NOT_EXSIT=1004]="DENIED_ERROR_STREAM_NOT_EXSIT",rt[rt.DENIED_ERROR_APP_NOT_ONLINE=1005]="DENIED_ERROR_APP_NOT_ONLINE",rt[rt.DENIED_ERROR_INVALID_PARAMETERS=1006]="DENIED_ERROR_INVALID_PARAMETERS",rt[rt.DENIED_ERROR_NO_CLIENTIP_SET=1007]="DENIED_ERROR_NO_CLIENTIP_SET",rt[rt.DENIED_ERROR_PERMISSION_DENIED=1008]="DENIED_ERROR_PERMISSION_DENIED",rt[rt.DENIED_ERROR_SET_STREAM_INFO_FAILED=1009]="DENIED_ERROR_SET_STREAM_INFO_FAILED",rt[rt.DENIED_ERROR_INTERNAL_ERROR=1010]="DENIED_ERROR_INTERNAL_ERROR",rt[rt.DENIED_ERROR_PUBLISH_FORBIDDEN=1011]="DENIED_ERROR_PUBLISH_FORBIDDEN",rt[rt.DENIED_ERROR_NEW_PUBLISH=1012]="DENIED_ERROR_NEW_PUBLISH",rt[rt.DENIED_ERROR_INNER_ERROR=1013]="DENIED_ERROR_INNER_ERROR",rt[rt.DENIED_ERROR_MANAGER_STOP=1014]="DENIED_ERROR_MANAGER_STOP",rt[rt.DENIED_ERROR_PUBLISH_AUTH_FAILED=1015]="DENIED_ERROR_PUBLISH_AUTH_FAILED",rt[rt.DENIED_ERROR_PLAY_AUTH_FAILED=1016]="DENIED_ERROR_PLAY_AUTH_FAILED",rt[rt.DENIED_ERROR_SERVER_STOP=2001]="DENIED_ERROR_SERVER_STOP",rt[rt.DENIED_ERROR_SESSION_ID=2002]="DENIED_ERROR_SESSION_ID",rt[rt.DENIED_ERROR_MANAGER_TIMEOUT=2003]="DENIED_ERROR_MANAGER_TIMEOUT",rt[rt.DENIED_ERROR_NEW_PUBLISH_SRC=2004]="DENIED_ERROR_NEW_PUBLISH_SRC",rt[rt.DENIED_ERROR_PLAY_SESSION_LIMIT=2005]="DENIED_ERROR_PLAY_SESSION_LIMIT",rt[rt.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE=2006]="DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE",rt[rt.DENIED_ERROR_PACKET_ILLEGAL_TS=2007]="DENIED_ERROR_PACKET_ILLEGAL_TS",rt[rt.DENIED_ERROR_PACKET_ILLEGAL_ADDR=2008]="DENIED_ERROR_PACKET_ILLEGAL_ADDR",rt[rt.DENIED_ERROR_PACKET_ILLEGAL_FORMAT=2009]="DENIED_ERROR_PACKET_ILLEGAL_FORMAT",rt[rt.DENIED_ERROR_CHECK_ADDR_TIMEOUT=2010]="DENIED_ERROR_CHECK_ADDR_TIMEOUT",rt[rt.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE=2011]="DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE",rt[rt.DENIED_ERROR_CHECK_ADDR_INCONSTANT=2012]="DENIED_ERROR_CHECK_ADDR_INCONSTANT",rt[rt.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT=3e3]="DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT",rt[rt.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT=3001]="DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT",rt[rt.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED=3002]="DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED",rt[rt.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED=3003]="DENIED_ERROR_WEBRTC_DTLS_HS_FAILED",rt[rt.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT=3004]="DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT",rt[rt.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED=3005]="DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED",rt[rt.DENIED_ERROR_WEBRTC_HB_TIMEOUT=3006]="DENIED_ERROR_WEBRTC_HB_TIMEOUT",rt[rt.DENIED_ERROR_WEBRTC_CONNECTION_LOST=3007]="DENIED_ERROR_WEBRTC_CONNECTION_LOST",rt[rt.DENIED_ERROR_WEBRTC_NEW_SRC=3008]="DENIED_ERROR_WEBRTC_NEW_SRC"}(et.DeniedError||(et.DeniedError={}))},908:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(bt){for(var Ct,Tt=1,wt=arguments.length;Tt<wt;Tt++)for(var Rt in Ct=arguments[Tt])Object.prototype.hasOwnProperty.call(Ct,Rt)&&(bt[Rt]=Ct[Rt]);return bt},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(bt,Ct,Tt,wt){return new(Tt||(Tt=Promise))(function(Rt,It){function St(Ut){try{Ot(wt.next(Ut))}catch(Bt){It(Bt)}}function Pt(Ut){try{Ot(wt.throw(Ut))}catch(Bt){It(Bt)}}function Ot(Ut){var Bt;Ut.done?Rt(Ut.value):(Bt=Ut.value,Bt instanceof Tt?Bt:new Tt(function(xt){xt(Bt)})).then(St,Pt)}Ot((wt=wt.apply(bt,Ct||[])).next())})},it=this&&this.__generator||function(bt,Ct){var Tt,wt,Rt,It,St={label:0,sent:function(){if(1&Rt[0])throw Rt[1];return Rt[1]},trys:[],ops:[]};return It={next:Pt(0),throw:Pt(1),return:Pt(2)},typeof Symbol=="function"&&(It[Symbol.iterator]=function(){return this}),It;function Pt(Ot){return function(Ut){return function(Bt){if(Tt)throw new TypeError("Generator is already executing.");for(;St;)try{if(Tt=1,wt&&(Rt=2&Bt[0]?wt.return:Bt[0]?wt.throw||((Rt=wt.return)&&Rt.call(wt),0):wt.next)&&!(Rt=Rt.call(wt,Bt[1])).done)return Rt;switch(wt=0,Rt&&(Bt=[2&Bt[0],Rt.value]),Bt[0]){case 0:case 1:Rt=Bt;break;case 4:return St.label++,{value:Bt[1],done:!1};case 5:St.label++,wt=Bt[1],Bt=[0];continue;case 7:Bt=St.ops.pop(),St.trys.pop();continue;default:if(Rt=St.trys,!((Rt=Rt.length>0&&Rt[Rt.length-1])||Bt[0]!==6&&Bt[0]!==2)){St=0;continue}if(Bt[0]===3&&(!Rt||Bt[1]>Rt[0]&&Bt[1]<Rt[3])){St.label=Bt[1];break}if(Bt[0]===6&&St.label<Rt[1]){St.label=Rt[1],Rt=Bt;break}if(Rt&&St.label<Rt[2]){St.label=Rt[2],St.ops.push(Bt);break}Rt[2]&&St.ops.pop(),St.trys.pop();continue}Bt=Ct.call(bt,St)}catch(xt){Bt=[6,xt],wt=0}finally{Tt=Rt=0}if(5&Bt[0])throw Bt[1];return{value:Bt[0]?Bt[1]:void 0,done:!0}}([Ot,Ut])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.RTCModules=void 0;var st=rt(6706),at=rt(6706),lt=rt(6706),ct=rt(3529),pt=rt(608),ut=rt(7560),ht=rt(361),ft=rt(4865),gt=rt(1089),vt=rt(2752),yt=rt(9595),mt=ct.ZegoRTCLogEvent.kZegoStartPlay,Et=function(){function bt(Ct,Tt,wt,Rt,It,St,Pt){this.logger=Ct,this.dataReport=Tt,this.stateCenter=wt,this.streamCenter=Rt,this.rtm=It,this.ac=St,this.zegoWebRtc=Pt,this.mediaEleSources=[],this.publishModule=new ht.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm,this.zegoWebRtc),this.playModule=new ft.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.initAdvance(),this.initStreamCommon(),this.initAudioMix(),this.init()}return bt.prototype.init=function(){this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler()},bt.prototype.initAudioMix=function(){},bt.prototype.initAdvance=function(){},bt.prototype.initStreamCommon=function(){},bt.prototype.bindWindowListener=function(){var Ct=this,Tt=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);window.addEventListener(Tt?"pagehide":this.stateCenter.browser==="firefox"?"beforeunload":"unload",function(){for(var wt in window.event&&(window.event.cancelBubble=!0),Ct.streamCenter.publisherList)Ct.publishModule.stopPublishingStream(wt);for(var wt in Ct.streamCenter.playerList)Ct.playModule.stopPlayingStream(wt)}),window.addEventListener("message",function(wt){var Rt=wt.data,It=Rt.type;It==="SS_DIALOG_SUCCESS"&&Ct.screenStreamFrom(Rt.streamId,Rt.canRequestAudioTrack,pt.ClientUtil.actionSuccessCallback("screenShare",Ct.stateCenter.callbackList)),It==="SS_DIALOG_CANCEL"&&pt.ClientUtil.actionSuccessCallback("screenShare",Ct.stateCenter.callbackList)(!1,null,It)}),window.addEventListener("offline",function(){if(Ct.logger.info("zc.off.0 network is broken"),Ct.stateCenter.networkState=lt.ENUM_NETWORK_STATE.offline,Ct.stateCenter.useNetAgent)Ct.logger.info("zc.off.0 use netAgent");else{for(var wt in Ct.streamCenter.publisherList)(It=Ct.streamCenter.publisherList[wt].retryStreamHandler).startMaxTime(),It.invalid();for(var wt in Ct.streamCenter.playerList){var Rt=Ct.streamCenter.playerList[wt],It=Rt.retryStreamHandler;Rt.playMode==st.PlayMode.CDN&&Rt.cdnPlayer&&(Rt.cdnPlayer.canRetry=!1),It.startMaxTime(),It.invalid()}}}),window.addEventListener("online",function(wt){for(var Rt in Ct.logger.info("zc.on.0 network is online"),Ct.stateCenter.networkState=lt.ENUM_NETWORK_STATE.online,Ct.streamCenter.publisherList){var It=Ct.streamCenter.publisherList[Rt].publisher,St=Ct.streamCenter.publisherList[Rt].retryStreamHandler;It.state==lt.ENUM_PUBLISH_STATE.stop||It.stateNego!==lt.ENUM_PUBLISH_STATE_NEGO.iceConnected?!St.isOverTime&&St.publishStateHandle(lt.ENUM_PUBLISH_STATE_UPDATE.error,Rt,ct.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError):It.state==lt.ENUM_PUBLISH_STATE.publishing&&St.stopMaxTime()}for(var Rt in Ct.streamCenter.playerList){var Pt=Ct.streamCenter.playerList[Rt].player,Ot=Ct.streamCenter.playerList[Rt].playMode,Ut=(St=Ct.streamCenter.playerList[Rt].retryStreamHandler,Ct.streamCenter.playerList[Rt].cdnPlayer);Ot==st.PlayMode.CDN&&Ut&&(Ut.canRetry=!1),Pt.state==lt.ENUM_PLAY_STATE.stop||Ot!==st.PlayMode.CDN&&Pt.stateNego!==lt.ENUM_PLAY_STATE_NEGO.iceConnected?!St.isOverTime&&St.playStateHandle(lt.ENUM_PLAY_STATE_UPDATE.error,Rt,ct.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError):Pt.state==lt.ENUM_PLAY_STATE.playing&&St.stopMaxTime()}}),document.addEventListener("visibilitychange",function(wt){var Rt="";Rt=document.visibilityState==="visible"?"foreground":"background";var It=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoAppLifeCycle.event);It.setAttribute("state",ct.ZegoRTCLogEvent.kZegoAppLifeCycle.state(Rt)),It.end()}),this.stateCenter.browser=="safari"&&(window.addEventListener("pagehide",function(wt){var Rt=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoAppLifeCycle.event);Rt.setAttribute("state",ct.ZegoRTCLogEvent.kZegoAppLifeCycle.state("background")),Rt.end()}),window.addEventListener("pageshow",function(wt){var Rt=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoAppLifeCycle.event);Rt.setAttribute("state",ct.ZegoRTCLogEvent.kZegoAppLifeCycle.state("foreground")),Rt.end()}))},bt.prototype.bindRTMListener=function(){var Ct,Tt,wt=this;this.rtm._on("_settingCanFetch",function(Rt){return ot(wt,void 0,void 0,function(){var It=this;return it(this,function(St){return this.rtm.cloudSetting.fetchSetting(yt.RTC).then(function(Pt){It.logger.info("zc.scf stream config "+JSON.stringify(Pt)),Pt&&It.stateCenter.settingConfig.setSetting(Pt.setting,["auto_to_tcp","udp_max_fail_num","probe_started_num","hardware_encode","camera_hard_encode","custom_hard_encode","camera_width","camera_height","camera_framerate","camera_audio_bitrate","camera_video_bitrate"]),It.rtm._on("_cloudSettingNotify",function(Ot,Ut){})}),[2]})})}),this.rtm._on("_appConfigRsp",function(){wt.stateCenter.appConfig=wt.rtm.getAppConfig(),wt.publishModule.startWaitPublish(),wt.playModule.startWaitPlay()}),this.rtm._on("_roomLogin",function(Rt,It){wt.stateCenter.appid=wt.rtm.getAppID(),wt.stateCenter.idName=wt.rtm.getUserID(),wt.stateCenter.nickName=wt.rtm.getUserName(),wt.stateCenter.testEnvironment=wt.rtm.isTestEnvironment(),wt.stateCenter.isMultiRoom=wt.rtm.getMultiRoom(),wt.stateCenter.useNetAgent=wt.rtm.getUseNetAgent(),wt.streamCenter.setSessionInfo(wt.stateCenter.appid,wt.stateCenter.idName,wt.stateCenter.testEnvironment);var St=wt.stateCenter.getRoomByRoomID(Rt);if(!St){var Pt=new ut.StreamHandler(wt.logger,wt.stateCenter,wt.rtm,wt.streamCenter,Rt);wt.bindStreamHandler(Pt),wt.stateCenter.roomList.push(St={roomID:Rt,streamHandler:Pt,sessionID:"",roomSessionID:"",token:It,isResetRoom:!1,streamList:[],streamInfoList:[]})}}),this.rtm._on("roomLoginResponse",function(Rt){wt.logger.info("zc.rlr call "+JSON.stringify(Rt));var It=Rt.header.room_id||Rt.body.room_id;wt.stateCenter.appConfig=wt.rtm.getAppConfig();var St=wt.rtm.getToken(It),Pt=wt.rtm.getSessionId(It),Ot=wt.rtm.getRoomSessionID(It),Ut=wt.stateCenter.getRoomByRoomID(It);if(!Ut){var Bt=new ut.StreamHandler(wt.logger,wt.stateCenter,wt.rtm,wt.streamCenter,It);wt.bindStreamHandler(Bt),wt.stateCenter.roomList.push(Ut={roomID:It,streamHandler:Bt,sessionID:Pt,roomSessionID:Ot,token:St,isResetRoom:!1,streamList:[],streamInfoList:[]})}if(Ut.sessionID=Pt,Ut.roomSessionID=Ot,wt.stateCenter.tempRoomList.length>0)for(var xt=function(Mt){var Nt=wt.stateCenter.tempRoomList[Mt],$t=Nt.roomID,Ft=Nt.streamList,jt=wt.stateCenter.roomList.find(function(zt){return zt.roomID===$t});jt&&(jt.streamList=Ft.filter(function(zt){var Yt=wt.streamCenter.stopedPlayerList[zt==null?void 0:zt.stream_id];return!!(Yt&&Yt.state<=6)}),wt.stateCenter.tempRoomList[Mt].streamList=[])},At=0;At<wt.stateCenter.tempRoomList.length;At++)xt(At);if(Rt.body.stream_fetch_flag===1)return wt.logger.info("zc.rlr stream fetch "+It),Ut.streamHandler.room=Ut,void Ut.streamHandler.fetchStreamList();Ut.streamHandler.handleStreamStart(Rt,Ut),wt.logger.info("zc.rlr end "+It)}),this.rtm._on("_connectChanged",function(Rt,It){wt.logger.info("zc.cc.0 "+Rt+" "+JSON.stringify(It)),Rt==="connecting"?wt.stateCenter.connectChanged=!0:Rt==="connected"&&(wt.stateCenter.connectChanged=!1,wt.stateCenter.useNetAgent=wt.rtm.getUseNetAgent(),wt.handleWaitPublishAndPlays(It))}),this.rtm._on("HBResponse",function(Rt){var It,St=(It=Rt==null?void 0:Rt.header)===null||It===void 0?void 0:It.room_id,Pt=wt.stateCenter.getRoomByRoomID(St);Pt==null||Pt.streamHandler.patchStreamList(Rt)}),this.rtm._on("_roomStateUpdate",function(Rt,It,St,Pt,Ot){if(It==="CONNECTED"&&wt.stateCenter.billingTimer.shouldReportRoomTime&&wt.stateCenter.billingTimer.startChargeInfosUpload(),It=="DISCONNECTED"){wt.logger.info("zc.rsu "+Rt+" disconnected "+(St?St+" ":"")+(Pt||"")+Ot),wt.stateCenter.billingTimer.stopChargeInfosUpload();var Ut=wt.stateCenter.getRoomByRoomID(Rt);if(Ut){var Bt=wt.stateCenter.roomList.findIndex(function(xt){return xt.roomID==Rt});Ut.isResetRoom=!0,Ut.streamHandler.reset(),wt.streamCenter.reset(Rt,St,Ot),wt.stateCenter.roomList.splice(Bt,1),Ot?wt.stateCenter.tempRoomList.push(Ut):wt.stateCenter.tempRoomList=wt.stateCenter.tempRoomList.filter(function(xt){return xt.roomID!==Rt})}}else wt.logger.info("zc.rsu "+Rt+" state: "+It)}),this.rtm._on("_tokenRenewed",function(Rt,It){wt.logger.info("zc.tr roomID:"+It+" "+Rt);var St=wt.stateCenter.getRoomByRoomID(It);St&&(St.token=Rt)}),this.rtm._on("_tokenExpired",function(Rt){var It,St;(((St=(It=Rt==null?void 0:Rt.body)===null||It===void 0?void 0:It.stop_stream)===null||St===void 0?void 0:St.stream_id_list)||[]).forEach(function(Pt){wt.publishModule.stopPublishingStream(Pt,vt.errorCodeList.TOKEN_EXPIRED)})}),this.rtm.liveRoomHandler.handlePushStreamMsg=function(Rt){Rt.body.stream_cmd=at.streamMap[Rt.header.sub_cmd],wt.handlePushStreamMsg(Rt)},(Ct=this.rtm.service)===null||Ct===void 0||Ct.on("push_stream_update",function(Rt){wt.handlePushStreamMsg(Rt)}),(Tt=this.rtm.service)===null||Tt===void 0||Tt.on("zegochat_js.push_room_stream_update_req",function(Rt){var It,St=((It=Rt==null?void 0:Rt.header)===null||It===void 0?void 0:It.room_id)||"",Pt=wt.stateCenter.getRoomByRoomID(St);Pt?Pt.streamHandler.handlePriPushStreamUpdateMsg(Rt):wt.logger.error(gt.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")})},bt.prototype.handleWaitPublishAndPlays=function(Ct){for(var Tt=Object.keys(this.stateCenter.waitPublishStreamList),wt=0;wt<Tt.length;wt++){var Rt=Tt[wt],It=this.stateCenter.waitPublishStreamList[Rt],St=It.localStream,Pt=It.publishOption,Ot=It.isDataChannel;if(It.retryStart){if(Pt.roomID&&Pt.roomID!==(Ct==null?void 0:Ct.roomID)){this.logger.info("zc.hwpap.0 room not connect");continue}this.publishModule.startPublishingStream(Rt,St,Pt,Ot),delete this.stateCenter.waitPublishStreamList[Rt]}}},bt.prototype.handlePushStreamMsg=function(Ct){var Tt,wt=((Tt=Ct==null?void 0:Ct.header)===null||Tt===void 0?void 0:Tt.room_id)||"",Rt=this.stateCenter.getRoomByRoomID(wt),It=this.rtm.getMsgSpan(ct.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.event,wt);if(!Rt)return this.stateCenter.reporter.setError(It,ct.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.error.ROOM_NOT_EXIST),void this.logger.error(gt.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE+" room no found");var St="";switch(Ct.body.stream_cmd){case at.ENUM_STREAM_UPDATE_CMD.added:St="add";break;case at.ENUM_STREAM_UPDATE_CMD.deleted:St="delete";break;case at.ENUM_STREAM_UPDATE_CMD.updated:St="update"}var Pt=Ct.body.stream_info.map(function(Ot){return{stream_id:Ot.stream_id,stream_extra_info:Ot.extra_info,id_name:Ot.id_name||Ot.anchor_id_name}});It.setAttributes({stream_update_type:ct.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_update_type(St),stream_seq:Ct.body.stream_seq,stream_list:ct.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_list(Pt)}),It.end(),Rt.streamHandler.handlePushStreamUpdateMsg(Ct)},bt.prototype.bindStreamCenterHandler=function(){var Ct=this;this.streamCenter.onPlayStateUpdate=function(Tt,wt,Rt,It){var St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt,zt,Yt,Kt,er,ir,rr,lr=Ct.streamCenter.playerList[wt];if(Tt==1&&lr&&pt.ClientUtil.isReDispatch(Rt)){var nr=lr.player,hr=lr.retryDispatchHandler,vr=lr.playOption;return nr.sessionId!=0&&nr.signal&&nr.shouldSendCloseSession()&&(nr.signal.sendCloseSession(Ct.stateCenter.getSeq(),nr.sessionId,1),nr.signal.removeSession(nr.sessionId),nr.closeSessionSignal=!0),nr.resetPlay(),hr.stopMaxTime(),hr.invalid(),hr.initStream(wt,vr,!1),void(Ct.rtm.isLogin()?(hr.startMaxTime(),hr.active(0)):Ct.streamCenter.playerList[wt].isReDispatch=!0)}if(lr&&lr.player&&(Tt==0||Tt==1)){var yr=lr.player.isRePlay?ct.ZegoRTCLogEvent.kZegoRePlay:ct.ZegoRTCLogEvent.kZegoStartPlay;Tt==1&&Rt&&Ct.stateCenter.reporter.spanSetAttributes({key:yr.event,par:wt},{error:Rt.code,message:Rt.message}),Ct.stateCenter.reporter.spanEnd({key:yr.event,par:wt},{url:mt.url((Pt=(St=lr==null?void 0:lr.player)===null||St===void 0?void 0:St.signal)===null||Pt===void 0?void 0:Pt.server),ip:mt.ip((Ot=lr==null?void 0:lr.player)===null||Ot===void 0?void 0:Ot.ip),peer_id:mt.peer_id((Ut=lr==null?void 0:lr.player)===null||Ut===void 0?void 0:Ut.peerID),source_type:mt.source_type((0,pt.getPlaySourceType)((Bt=lr==null?void 0:lr.player)===null||Bt===void 0?void 0:Bt.resourceMode)),net_protocol:mt.net_protocol((xt=lr==null?void 0:lr.player)===null||xt===void 0?void 0:xt.netProtocol),signal_consume:mt.signal_consume((At=lr==null?void 0:lr.player)===null||At===void 0?void 0:At.signalTime),is_center:mt.is_center(lr==null?void 0:lr.isCenterNode)}),Ct.stateCenter.reporter.spanEnd({key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:wt},{error:Rt.code,message:Rt.message},!0)}if(Tt!=0||It!=null&&It.isCDN)Tt!=1||It!=null&&It.isCDN||((er=lr==null?void 0:lr.player)===null||er===void 0||er.uploadRTCPlayStats(),Ct.stateCenter.reporter.spanEnd({key:ct.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:wt},{stop_reason:ct.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason((ir=lr==null?void 0:lr.player)===null||ir===void 0?void 0:ir.stopReason),error:Rt.code,message:Rt.message}),lr&&lr.player&&(lr.player.stopReason=""));else{var Cr=ct.ZegoRTCLogEvent.kZegoTaskStreamPlay,or=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.I,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:wt},{key:ct.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:wt},((Mt=lr==null?void 0:lr.player)===null||Mt===void 0?void 0:Mt.resourceMode)===0?ct.ZegoRTCLogEvent.kZegoTaskStreamPlay.event:ct.ZegoRTCLogEvent.kZegoTaskL3Play.event,!0);lr.player.rtcPlayCount++,or.setAttributes({tryidx:Cr.tryidx(lr.player.rtcPlayCount),url:Cr.url(($t=(Nt=lr==null?void 0:lr.player)===null||Nt===void 0?void 0:Nt.signal)===null||$t===void 0?void 0:$t.server),ip:Cr.ip((Ft=lr==null?void 0:lr.player)===null||Ft===void 0?void 0:Ft.ip),net_protocol:Cr.net_protocol((jt=lr==null?void 0:lr.player)===null||jt===void 0?void 0:jt.netProtocol),room_id:Cr.room_id((zt=lr==null?void 0:lr.room)===null||zt===void 0?void 0:zt.roomID),room_sid_string:Cr.room_sid_string((Yt=lr==null?void 0:lr.room)===null||Yt===void 0?void 0:Yt.roomSessionID),env:Cr.env(Ct.stateCenter.testEnvironment?3:1),resource_type:Cr.resource_type((0,pt.getPlaySourceType)((Kt=lr==null?void 0:lr.player)===null||Kt===void 0?void 0:Kt.resourceMode)),protocol:Cr.protocol("webrtc"),dispatch_external_ip:Cr.dispatch_external_ip(Ct.stateCenter.clientIP),stream_id:Cr.stream_id(wt)})}if(Tt===1&&Ct.streamCenter.playErrorCallBackList[wt])Ct.stateCenter.connectChanged||(Ct.logger.info("zc.opsu.1 connect changed"),Ct.streamCenter.playErrorCallBackList[wt]({errorCode:Rt&&Rt.code,extendedData:Rt&&Rt.message}),delete Ct.streamCenter.playErrorCallBackList[wt]),Ct.logger.info("zc.opsu.1 stop play called by sdk"),Ct.playModule.stopPlayingStream(wt,Rt);else{var ur=pt.ClientUtil.getPlayerStateType(Tt);(Tt===1||!((rr=lr==null?void 0:lr.player)===null||rr===void 0)&&rr.updateCBState({state:ur,code:Rt.code}))&&Ct.stateCenter.actionListener("playerStateUpdate",{state:ur,streamID:wt,errorCode:Rt&&Rt.code,extendedData:Rt&&Rt.message})}},this.streamCenter.onPublishStateUpdate=function(Tt,wt,Rt){Ct.onPublishStateUpdateHandle(Tt,wt,Rt)},this.streamCenter.onPublishQualityUpdate=function(Tt,wt){Ct.stateCenter.actionListener("publishQualityUpdate",Tt,wt)},this.streamCenter.onPlayQualityUpdate=function(Tt,wt){Ct.stateCenter.actionListener("playQualityUpdate",Tt,wt)},this.streamCenter.onRemoteCameraStatusUpdate=function(Tt,wt,Rt){var It=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:Tt},{key:""},ct.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event);It.setAttributes({stream_id:ct.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream_id(Tt),camera_status:ct.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.camera_status(wt),status_code:ct.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status_code(Rt)}),It.end(),Ct.stateCenter.actionListener("remoteCameraStatusUpdate",Tt,wt),Ct.stateCenter.actionListener("_remoteCameraStatusUpdate",Tt,Rt)},this.streamCenter.onRemoteMicStatusUpdate=function(Tt,wt,Rt){var It=Ct.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:Tt},{key:""},ct.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event);It.setAttributes({stream_id:ct.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream_id(Tt),mic_status:ct.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.mic_status(wt),status_code:ct.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status_code(Rt)}),It.end(),Ct.stateCenter.actionListener("remoteMicStatusUpdate",Tt,wt),Ct.stateCenter.actionListener("_remoteMicStatusUpdate",Tt,Rt)},this.streamCenter.onSoundLevelUpdate=function(Tt){Ct.stateCenter.actionListener("soundLevelUpdate",Tt)},this.streamCenter.onMicSoundLevelUpdate=function(Tt){Ct.stateCenter.actionListener("capturedSoundLevelUpdate",Tt)}},bt.prototype.bindStreamHandler=function(Ct){var Tt=this;Ct.onStreamUpdated=function(wt,Rt,It){var St=It.map(function(Bt){return{streamID:Bt.streamID,user:Bt.user,extraInfo:Bt.extraInfo,urlsFLV:Bt.urlFlv,urlsRTMP:Bt.urlRtmp,urlsHLS:Bt.urlHls,urlsHttpsFLV:Bt.urlHttpsFlv,urlsHttpsHLS:Bt.urlHttpsHls}}),Pt={};if(Rt===0){var Ot=It.map(function(Bt){return{stream_id:Bt.streamID,code:lt.STREAM_DELETE_REASON[Bt.closeType]&&lt.STREAM_DELETE_REASON[Bt.closeType].code||0,description:lt.STREAM_DELETE_REASON[Bt.closeType]&&lt.STREAM_DELETE_REASON[Bt.closeType].description||"unknown"}});Pt.stream_delete_reason=Ot}if(St.length>0&&Tt.stateCenter.actionListener("roomStreamUpdate",wt,pt.ClientUtil.getSteamUpdateType(Rt),St,Object.keys(Pt).length>0?JSON.stringify(Pt):""),It.length>0&&Tt.stateCenter.actionListener("_streamUpdated",Rt,It),Rt===1){var Ut=[];St.forEach(function(Bt){Bt.extraInfo&&Ut.push({streamID:Bt.streamID,user:Bt.user,extraInfo:Bt.extraInfo})}),Ut.length>0&&Tt.stateCenter.actionListener("streamExtraInfoUpdate",wt,Ut)}},Ct.onPublishStateUpdate=function(wt,Rt,It){var St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt,zt,Yt,Kt,er;Tt.logger.info("zb.opsu ",Rt);var ir=Tt.streamCenter.publisherList[Rt];if(ir&&ir.publisher&&(wt==0||wt==1)){var rr=ct.ZegoRTCLogEvent.kZegoStartPublish;Tt.stateCenter.reporter.spanEnd({key:(ir.publisher.isRePublish?ct.ZegoRTCLogEvent.kZegoRePublish:ct.ZegoRTCLogEvent.kZegoStartPublish).event,par:Rt},{error:It.code,message:It.message,url:rr.url((Pt=(St=ir==null?void 0:ir.publisher)===null||St===void 0?void 0:St.signal)===null||Pt===void 0?void 0:Pt.server),ip:rr.ip((Ot=ir==null?void 0:ir.publisher)===null||Ot===void 0?void 0:Ot.ip),peer_id:rr.peer_id((Ut=ir==null?void 0:ir.publisher)===null||Ut===void 0?void 0:Ut.peerID),source_type:rr.source_type("rtc"),net_protocol:rr.net_protocol((Bt=ir==null?void 0:ir.publisher)===null||Bt===void 0?void 0:Bt.netProtocol),is_center:rr.is_center(ir==null?void 0:ir.isCenterNode)}),Tt.stateCenter.reporter.spanEnd({key:ct.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:Rt},nt({},It),!0)}var lr=ct.ZegoRTCLogEvent.kZegoTaskRTCPublish;if(wt==0){var nr=Tt.stateCenter.reporter.createSpan(at.TRACER_LEVEL.I,{key:ct.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:Rt},{key:lr.event,par:Rt},lr.event,!0);ir.publisher.rtcPublishCount++,nr.setAttributes({tryidx:lr.tryidx(ir==null?void 0:ir.publisher.rtcPublishCount),url:lr.url((At=(xt=ir==null?void 0:ir.publisher)===null||xt===void 0?void 0:xt.signal)===null||At===void 0?void 0:At.server),ip:lr.ip(($t=(Nt=(Mt=ir==null?void 0:ir.publisher)===null||Mt===void 0?void 0:Mt.gwNode)===null||Nt===void 0?void 0:Nt.split(":"))===null||$t===void 0?void 0:$t[0]),net_protocol:lr.net_protocol((Ft=ir==null?void 0:ir.publisher)===null||Ft===void 0?void 0:Ft.netProtocol),dispatch_external_ip:lr.dispatch_external_ip(Tt.stateCenter.clientIP),room_id:lr.room_id((jt=ir==null?void 0:ir.room)===null||jt===void 0?void 0:jt.roomID),room_sid_string:lr.room_sid_string((zt=ir==null?void 0:ir.room)===null||zt===void 0?void 0:zt.roomSessionID),resource_type:lr.resource_type("rtc"),protocol:lr.protocol("webrtc")})}else wt==1&&(It.code===1012?Tt.streamCenter.stopPublishingStream(Rt,It):It.code===2002&&(Tt.streamCenter.stopPublishingStream(Rt,It),It.code=vt.errorCodeList.TOKEN_ERROR.code),(Yt=ir==null?void 0:ir.publisher)===null||Yt===void 0||Yt.uploadRTCPublishStats(),Tt.stateCenter.reporter.spanEnd({key:lr.event,par:Rt},{stop_reason:lr.stop_reason((Kt=ir==null?void 0:ir.publisher)===null||Kt===void 0?void 0:Kt.stopReason),error:It.code,message:It.message}),ir&&ir.publisher&&(ir.publisher.stopReason=""));var hr=pt.ClientUtil.getPublisherStateType(wt);(wt===1||!((er=ir==null?void 0:ir.publisher)===null||er===void 0)&&er.updateCBState({state:hr,code:It.code}))&&Tt.stateCenter.actionListener("publisherStateUpdate",{state:hr,streamID:Rt,errorCode:It.code,extendedData:It.message})},Ct.onStreamExtraInfoUpdated=function(wt,Rt){var It=Rt.map(function(St){return{streamID:St.streamID,user:St.user,extraInfo:St.extraInfo}});Tt.stateCenter.actionListener("streamExtraInfoUpdate",wt,It)}},bt.prototype.screenStreamFrom=function(Ct,Tt,wt){var Rt={};Rt.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Ct}},Rt.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Ct,maxWidth:window.screen.width,maxHeight:window.screen.height}},!Tt&&(Rt.audio=!1),navigator.mediaDevices.getUserMedia(Rt).then(function(It){wt(!0,It)}).catch(function(It){wt(!1,null,It)})},bt.prototype.onPublishStateUpdateHandle=function(Ct,Tt,wt){var Rt=this;this.logger.info("zc.opsuh.0 call");var It=this.streamCenter.publisherList[Tt],St=It.room;if(St)if(Ct==0){if(this.stateCenter.publishStreamList[Tt]){var Pt=!St.streamList.find(function(xt){return xt.stream_id==Tt&&(xt.anchor_id_name==Rt.stateCenter.idName||xt.id_name==Rt.stateCenter.idName||xt.user_id===Rt.stateCenter.idName)});[lt.ENUM_PUBLISH_STREAM_STATE.tryPublish,lt.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[Tt].state)&&Pt?(this.stateCenter.publishStreamList[Tt].state=lt.ENUM_PUBLISH_STREAM_STATE.update_info,St.streamHandler.updateStreamInfo(Tt,lt.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[Tt].extra_info,function(xt){})):(this.stateCenter.publishStreamList[Tt].state=lt.ENUM_PUBLISH_STREAM_STATE.publishing,this.WebrtcOnPublishStateUpdateHandle(Ct,Tt,wt))}}else{if(Ct==1&&It&&pt.ClientUtil.isReDispatch(wt)){var Ot=It.publisher,Ut=It.retryDispatchHandler,Bt=It.publishOption;return Ot.sessionId!=0&&Ot.signal&&Ot.shouldSendCloseSession()&&(Ot.signal.sendCloseSession(this.stateCenter.getSeq(),Ot.sessionId,1),Ot.signal.removeSession(Ot.sessionId),Ot.closeSessionSignal=!0),Ot.resetPublish(),Ut.stopMaxTime(),Ut.invalid(),Ut.initStream(Tt,Bt,!0),void(this.rtm.isLogin()?(Ut.startMaxTime(),Ut.active(0)):this.streamCenter.publisherList[Tt].isReDispatch=!0)}St.streamHandler.onPublishStateUpdate(Ct,Tt,wt),Ct==1&&(this.logger.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(Tt,wt))}else this.logger.error("zc.opsuh.0 room not exist")},bt.prototype.WebrtcOnPublishStateUpdateHandle=function(Ct,Tt,wt){if(this.stateCenter.publishStreamList[Tt].state==lt.ENUM_PUBLISH_STREAM_STATE.publishing){var Rt=this.streamCenter.getRoomByStreamID(Tt);Rt&&Rt.streamHandler.onPublishStateUpdate(Ct,Tt,wt)}},bt.prototype.bindListener=function(Ct,Tt){var wt=this.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskOnListener.event);return wt.setAttributes({listener:Ct}),this.stateCenter.listenerList[Ct]?typeof Tt!="function"?(this.logger.error("zc.o.0 listener callBack must be funciton"),this.stateCenter.reporter.setError(wt,ct.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(this.stateCenter.listenerList[Ct].indexOf(Tt)==-1&&this.stateCenter.listenerList[Ct].push(Tt),wt.end(),!0):(this.logger.error("zc.o.0 event "+Ct+" no found"),this.stateCenter.reporter.setError(wt,ct.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," event "+event+" no found"),!1)},bt.prototype.deleteListener=function(Ct,Tt){var wt=this.stateCenter.reporter.createSpan(at.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskOffListener.event);if(wt.setAttributes({listener:Ct}),!this.stateCenter.listenerList[Ct])return this.logger.error("zc.o.1 listener no found"),this.stateCenter.reporter.setError(wt,ct.ZegoRTCLogEvent.kZegoTaskOffListener.error.INPUT_PARAM," event "+event+" no found"),!1;this.logger.info("dc.o.1 "+"".concat(Ct," cb:")+typeof Tt);var Rt=this.stateCenter.listenerList[Ct];return Tt?Rt.splice(Rt.indexOf(Tt),1):this.stateCenter.listenerList[Ct]=[],wt.end(),!0},bt}();et.RTCModules=Et},1177:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.calculateCumulativeDuration=et.recordBreakDuration=et.onBreakEnd=void 0,et.onBreakEnd=function(rt,nt,ot,it,st){if(nt.breakStartTime){var at=rt-nt.breakStartTime;at>=it&&(nt.cumulativeBreakDuration+=at,ot.breakDuration+=at),nt.breakStartTime=void 0}},et.recordBreakDuration=function(rt,nt,ot,it,st,at,lt,ct,pt,ut){if(pt===void 0&&(pt=ct),ut===void 0&&(ut="video"),st>1e3&&(st=1e3),it.breakStartTime)if(ot)nt===0?(rt-it.breakStartTime>=22e3&&(0,et.onBreakEnd)(rt,it,lt,st,ut),at.breakDuration+=1e3):ct>=st?ct<500?ct+pt<1e3?((0,et.onBreakEnd)(rt-(1e3-pt),it,lt,st,ut),it.breakStartTime=rt-ct,at.breakDuration+=pt+ct,at.decodeTime+=1e3-(pt+ct)):((0,et.onBreakEnd)(rt-1e3+pt,it,lt,st,ut),it.breakStartTime=rt-1e3+pt,at.breakDuration+=1e3):ct>=500&&((0,et.onBreakEnd)(rt-ct,it,lt,st,ut),it.breakStartTime=rt-ct,at.breakDuration+=1e3):pt<=st?((0,et.onBreakEnd)(rt-1e3+pt,it,lt,st,ut),it.breakStartTime=void 0,at.breakDuration+=pt,at.decodeTime+=1e3-pt,lt.decodeDuration+=1e3-pt):at.breakDuration+=1e3;else{it.resumeRecv=!1;var ht=rt-1e3-it.breakStartTime;ht<=0&&(ht=0),it.breakStartTime=void 0,it.noBreakNoDecodeDuration+=ht,at.breakCancelDuration+=ht,lt.blankDuration+=ht}else ot?nt===0?it.resumeRecv?(it.breakStartTime=rt-1e3,at.breakDuration+=1e3):(it.noBreakNoDecodeDuration+=1e3,lt.blankDuration+=1e3):pt>st?it.resumeRecv?(it.breakStartTime=rt-pt,it.cumulativeBreakDuration+=pt,at.breakDuration+=pt,at.decodeTime+=1e3-pt,lt.breakDuration+=pt,lt.decodeDuration+=1e3-pt):(it.noBreakNoDecodeDuration+=1e3,lt.blankDuration+=1e3):(at.decodeTime+=1e3,lt.decodeDuration+=1e3):it.decodeStartTime&&(nt===0?(it.resumeRecv=!1,it.noBreakNoDecodeDuration+=1e3,lt.blankDuration+=1e3):(at.decodeTime+=1e3,lt.decodeDuration+=1e3));ot&&nt&&(it.resumeRecv=!0)},et.calculateCumulativeDuration=function(rt,nt,ot,it,st,at,lt){if(it=it>1e3?1e3:it,nt.breakDuration=0,nt.breakCancelDuration=0,nt.decodeTime=0,ot.decodeDuration=0,ot.breakDuration=0,ot.blankDuration=0,rt.decodeStartTime){var ct=at,pt=ct-rt.decodeStartTime;if(rt.decodeStartTime=void 0,rt.totalDuration+=pt,rt.breakStartTime){var ut=ct-rt.breakStartTime;rt.breakStartTime=void 0,st?ut>it&&(rt.cumulativeBreakDuration+=ut):rt.noBreakNoDecodeDuration+=ut}var ht=rt.cumulativeBreakDuration,ft=rt.totalDuration-rt.cumulativeBreakDuration-rt.noBreakNoDecodeDuration;return rt.cumulativeDecodeDuration=ft,{cumulativeBreakDuration:ht,cumulativeDecodeDuration:ft}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}}},4865:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ut){for(var ht,ft=1,gt=arguments.length;ft<gt;ft++)for(var vt in ht=arguments[ft])Object.prototype.hasOwnProperty.call(ht,vt)&&(ut[vt]=ht[vt]);return ut},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.PlayModule=void 0;var ot=rt(6706),it=rt(1089),st=rt(6706),at=rt(3529),lt=rt(608),ct=at.ZegoRTCLogEvent.kZegoTaskPlayStart,pt=function(){function ut(ht,ft,gt,vt,yt){this.logger=ht,this.dataReport=ft,this.stateCenter=gt,this.streamCenter=vt,this.rtm=yt}return ut.prototype.startPlayingStream=function(ht,ft,gt){var vt=this;return this.logger.info(it.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call ",ht),new Promise(function(yt,mt){return vt._handlePlayStream(ht,ft,yt,mt,gt)})},ut.prototype._handlePlayStream=function(ht,ft,gt,vt,yt){var mt,Et=this,bt=ct,Ct=this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.I,{key:at.ZegoRTCLogEvent.kZMInitSetting.event},{key:ct.event,par:ht},ct.event,!0),Tt=function(Nt,$t){Et.logger.error(it.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" "+($t||Nt.message)),Et.stateCenter.reporter.setError(Ct,Nt),vt&&vt(nt(nt({},Nt),{errorCode:Nt.code,extendedData:Nt.message+($t?" "+$t:"")}))};if(ht===void 0||typeof ht!="string"||ht==="")return Tt(bt.error.kPlayParamError,"stream id type error"),!1;if(ht.length>st.MAX_STREAM_ID_LENGTH)return Tt(bt.error.kPlayStreamIDToLongError,"stream id length limit "+st.MAX_STREAM_ID_LENGTH),!1;if(!lt.ClientUtil.checkIllegalCharacters(ht))return Tt(bt.error.kPlayStreamIDInvalidCharacterError),!1;if(ft!==void 0&&typeof ft!="object")return Tt(bt.error.kPlayParamError,"playOption must be object"),!1;var wt=(0,lt.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,ht),Rt=((mt={})["_play_"+ht]={stream_sid:wt},mt);this.stateCenter.reporter.setPublicPros(Rt);var It,St=nt(nt({},ft),{CDNVideo:void 0,CDNPlayer:void 0});if(Ct.setAttributes({stream_id:ct.stream_id(ht),stream_sid:ct.stream_sid(wt),play_option:ct.play_option(St),video_codec_id:ct.video_codec_id(ft==null?void 0:ft.videoCodec),use_na:ct.use_na(this.stateCenter.useNetAgent?1:0),biz_product:(ft==null?void 0:ft.resourceMode)==ot.ResourceMode.DG?1:0}),this.stateCenter.customUrl&&this.stateCenter.customUrl.length!=0)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),It=this.stateCenter.customUrl;else{var Pt=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);Pt&&Pt instanceof Array&&Pt.length>0&&(It=Pt,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(Pt)))}if(It){var Ot=this.streamCenter.setPlayStateStart(ht,ft,wt,yt);return Ot!==!0?(Tt(JSON.parse(JSON.stringify(Ot)),"cannot start play"),!1):(this.streamCenter.onPlayStateUpdate(st.ENUM_PLAY_STATE_UPDATE.retry,ht,{code:0,message:""}),this.streamCenter.playerList[ht].serverUrls=It,this.streamCenter.startPlayingStream(ht,!1,function(Nt){gt&&gt(Nt)}))}if(this.stateCenter.useNetAgent&&this.stateCenter.playAccelerate&&this.stateCenter.roomList.length>0)this.logger.info(it.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" play accelerate");else if(this.rtm.isDisConnect())return Tt(bt.error.kPlayNoLoginError),!1;this.stateCenter.pullLimited||(ht=NaN+ht),ft&&ft.videoCodec&&(ft.videoCodec=ft.videoCodec.toUpperCase());var Ut=this.stateCenter.settingConfig.getSetting("resource_mode",!0);Ut!==void 0&&(this.logger.info(it.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM," setting resource_mode "+Ut),!ft&&(ft={}),ft.resourceMode=Ut);var Bt=this.streamCenter.setPlayStateStart(ht,ft,wt,yt);if(Bt!==!0)return Tt(JSON.parse(JSON.stringify(Bt)),"cannot start play"),!1;if(this.streamCenter.onPlayStateUpdate(st.ENUM_PLAY_STATE_UPDATE.retry,ht,{code:0,message:""}),this.streamCenter.playSuccessCallBackList[ht]=function(Nt){gt&&gt(Nt)},vt&&(this.streamCenter.playErrorCallBackList[ht]=vt),ft&&ft.resourceMode&&[1,3].includes(ft.resourceMode)&&this.streamCenter.playerList[ht].playMode==ot.PlayMode.CDN)return this.streamCenter.startPlayingStream(ht,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[ht],!0);var xt=at.ZegoRTCLogEvent.kZegoStartPlay;this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.H,{key:ct.event,par:ht},{key:xt.event,par:ht},xt.event,!0).setAttributes({reason:xt.reason("StartPlay")});var At=this.stateCenter.useNetAgent;if(At)return this.stateCenter.appConfig?(this.streamCenter.playerList[ht].serverUrls=(ft==null?void 0:ft.resourceMode)===2?["unified_l3"]:["unified_rtc"],this.streamCenter.startPlayingStream(ht,At,this.streamCenter.playSuccessCallBackList[ht]),!0):(this.streamCenter.waitPlayList.push(ht),!0);var Mt=this.streamCenter.playerList[ht].retryDispatchHandler;return Mt.stopMaxTime(),Mt.invalid(),Mt.initStream(ht,ft,!1),Mt.startMaxTime(),Mt.active(0)},ut.prototype.stopPlayingStream=function(ht,ft){var gt,vt,yt,mt;this.logger.info(it.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call",ht);var Et=this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.I,{key:at.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},at.ZegoRTCLogEvent.kZegoTaskPlayStop.event);if(typeof ht!="string"||ht==="")return this.logger.error(it.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" streamid must be string and not empty"),this.stateCenter.reporter.setError(Et,at.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError,"stream id type error"),void delete this.stateCenter.reportSeqList.stopPlay[ht];var bt=this.streamCenter.playerList[ht];Et.setAttributes({stream_id:at.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_id(ht),room_id:at.ZegoRTCLogEvent.kZegoTaskPlayStop.room_id((gt=this.streamCenter.playerList[ht])===null||gt===void 0?void 0:gt.room.roomID),webrtc_sid:at.ZegoRTCLogEvent.kZegoTaskPlayStop.webrtc_sid((vt=bt==null?void 0:bt.player)===null||vt===void 0?void 0:vt.sessionId),stream_sid:at.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_sid(bt==null?void 0:bt.streamSid),biz_product:bt&&((yt=bt.playOption)===null||yt===void 0?void 0:yt.resourceMode)==ot.ResourceMode.DG?1:0});var Ct=bt&&bt.player&&bt.player.state!==st.ENUM_PLAY_STATE.stop||((mt=bt==null?void 0:bt.retryStreamHandler)===null||mt===void 0?void 0:mt.isRetrying()),Tt=[1,3].includes(bt==null?void 0:bt.player.resourceMode)&&(bt==null?void 0:bt.playMode)===ot.PlayMode.CDN;for(var wt in this.streamCenter.stopPlayingStream(ht,ft),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[wt]===ht){delete this.stateCenter.streamUrlMap[wt];break}ft?this.stateCenter.reporter.setError(Et,ft):Et.end(),Ct&&this.streamCenter.onPlayStateUpdate(st.ENUM_PLAY_STATE_UPDATE.error,ht,ft||{code:0,message:""},{isCDN:Tt}),this.logger.debug(it.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call success")},ut.prototype.mutePlayStream=function(ht,ft,gt){return new Promise(function(vt,yt){vt(!1)})},ut.prototype.setStreamAudioOutput=function(ht,ft){return!1},ut.prototype.startWaitPlay=function(){var ht=this;this.streamCenter.waitPlayList.forEach(function(ft){ht.streamCenter.startPlayingStream(ft,ht.stateCenter.useNetAgent,ht.streamCenter.playSuccessCallBackList[ft])}),this.streamCenter.waitPlayList=[]},ut.prototype.getStreamStats=function(ht){var ft,gt,vt;return this.logger.info(it.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),typeof ht=="string"&&(vt=(ft=this.streamCenter.playerList[ht])===null||ft===void 0?void 0:ft.player),vt&&(!((gt=vt==null?void 0:vt.qualityHandler)===null||gt===void 0)&&gt.currentQuality)?vt.qualityHandler.currentQuality||null:(this.logger.error("zsc.sp.0 stream is not playing"),null)},ut}();et.PlayModule=pt},5634:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(pt){for(var ut,ht=1,ft=arguments.length;ht<ft;ht++)for(var gt in ut=arguments[ht])Object.prototype.hasOwnProperty.call(ut,gt)&&(pt[gt]=ut[gt]);return pt},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.PlayStreamQuality=void 0;var ot=rt(6706),it=rt(1089),st=rt(3529),at=rt(608),lt=rt(1177),ct=function(){function pt(ut,ht,ft,gt,vt){this.player=ht,this.logger=ft,this.dataReport=gt,this.stateCenter=vt,this.playQualityList=[],this.maxQualityListCount=10,this.qualityTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,googCodecName:"",videoPacketsLost:0,videoPacketsLostRate:0,videoFramesDecoded:0,videoFramesDropped:0,videoCumulativeDecodeTime:0,videoCumulativeBreakTime:0,videoCumulativeBreakRate:0},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioJitter:0,audioLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,audioSamplingRate:0,audioSendLevel:0,googCodecName:"",audioCumulativeDecodeTime:0,audioCumulativeBreakTime:0,audioCumulativeBreakRate:0},peerToPeerDelay:0,peerToPeerPacketLostRate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=ot.ENUM_PROBE_STATE.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.playStat={},this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.videoReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.audioReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.poorQualityNum=0,this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.sampleTimes=0,this.qualitySampleInterval=1e3,this.qualityTimeInterval=ut,this.currentQuality.video.muteState=this.player.videoMuteState,this.currentQuality.audio.muteState=this.player.audioMuteState}return Object.defineProperty(pt.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),pt.prototype.getPlayStats=function(ut,ht){var ft,gt,vt,yt=this;if(ut!=null){var mt=this.sampleTimes%parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString())==0;parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString()),mt&&this.getP2PNetStats();for(var Et,bt=document.querySelectorAll("video, audio"),Ct=0;Ct<bt.length;Ct++)bt[Ct].srcObject===this.player.playStream&&(Et=bt[Ct]);var Tt={sampleTimeWindow:this.qualityTimeInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,nackCount:0,pliCount:0,audioJitter:0,videoJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.player.audioMuteState,videoMuteState:this.player.videoMuteState,soundLevel:this.player.soundLevel,muted:Et?Et.muted:void 0,paused:Et?Et.paused:void 0,volume:Et?Et.volume:void 0,sinkId:Et?Et.sinkId:void 0},wt=this.lastPlayStats.time,Rt=0,It=0,St=0,Pt=0,Ot=0,Ut=0,Bt=0,xt=null,At=null;ut.forEach(function(qt){["ssrc","inbound-rtp"].includes(qt.type)&&(qt.mediaType=="video"||qt.id.indexOf("VideoStream")>=0)&&(xt=qt),(qt.type=="inbound-rtp"||qt.type=="ssrc"&&qt.bytesReceived!=null)&&(qt.mediaType=="audio"||qt.id.indexOf("AudioStream")>=0)&&(At=qt)});var Mt=new Date().getTime(),Nt=function(qt,fr){return qt>fr?qt-fr:0};if(this.lastSampleTime||(this.lastSampleTime=Mt-1e3),xt){var $t=xt.totalInterFrameDelay,Ft=xt.framesDecoded,jt=xt.totalSquaredInterFrameDelay,zt=Nt(Ft,this.totalQuality.framesDecode);this.totalQuality.framesDecode=Ft;var Yt=Nt($t,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=$t;var Kt=Nt(jt,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=jt;var er=(Kt-Math.pow(Yt,2)/(zt||1))/(zt||1);er=er>0?er:-er;var ir=parseInt((1e3/(zt+1)).toString()),rr=1e3*Math.sqrt(er),lr=Yt/(zt||1)*1e3||ir,nr=(lr=parseInt((lr>1e3?1e3:lr).toString()))+rr;nr=parseInt((nr>1e3?1e3:nr).toString()),zt>0&&this.player.cameraStatus===0&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=Mt-1e3),this.videoBreak.decodeStartTime&&(0,lt.recordBreakDuration)(Mt,zt,this.player.cameraStatus===0&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,this.videoReliableBreak,lr,nr)}if(At){var hr=At.totalSamplesReceived,vr=At.concealedSamples,yr=At.bytesReceived,Cr=Nt(hr,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=hr;var or=Nt(vr,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=vr;var ur=Nt(yr,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=yr;var pr=parseInt((1e3*(or/(Cr||1))).toString());ur>0&&this.player.micStatus===0&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=Mt-1e3),this.audioBreak.decodeStartTime&&(0,lt.recordBreakDuration)(Mt,ur,this.player.micStatus===0&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,this.audioReliableBreak,pr,pr,"audio")}if(ht&&ht.result().forEach(function(qt){mt&&(qt.type=="ssrc"&&(qt.names().indexOf("googBandwidthLimitedResolution")>=0&&(Tt.googBandwidthLimitedResolution=qt.stat("googBandwidthLimitedResolution")),qt.names().indexOf("codecImplementationName")>=0&&(Tt.codecImplementationName=qt.stat("codecImplementationName")),qt.stat("mediaType")=="video"&&(qt.names().indexOf("googCodecName")>=0&&(Tt.videoCodecName=qt.stat("googCodecName")),qt.names().indexOf("googCurrentDelayMs")>=0&&(Bt=qt.stat("googCurrentDelayMs"))),qt.stat("mediaType")=="audio"&&(qt.names().indexOf("googCodecName")>=0&&(Tt.audioCodecName=qt.stat("googCodecName")),qt.names().indexOf("googCurrentDelayMs")>=0&&(Ut=qt.stat("googCurrentDelayMs"))),qt.names().indexOf("googCpuLimitedResolution")>=0&&(Tt.googCpuLimitedResolution=qt.stat("googCpuLimitedResolution"))),qt.type=="VideoBwe"&&qt.names().indexOf("googAvailableSendBandwidth")>=0&&(Tt.googAvailableSendBandwidth=qt.stat("googAvailableSendBandwidth")))}),mt){ut.forEach(function(qt){if((qt.type=="inbound-rtp"||qt.type=="ssrc"&&qt.bytesReceived!=null)&&(qt.mediaType=="audio"||qt.id.indexOf("AudioStream")>=0)){wt!=0&&(Tt.audioBitrate=8*(qt.bytesReceived-yt.lastPlayStats.audioBytesReceived)/(qt.timestamp-wt),(cr=qt.packetsLost-yt.lastPlayStats.audioPacketsLost)>0&&(It=cr/(cr+qt.packetsReceived-yt.lastPlayStats.audioPacketsReceived))),Tt.audioBitrate<0&&(Tt.audioBitrate=0),Tt.audioJitter=qt.jitter,qt.packetsLost>0&&(Tt.audioPacketsLost=qt.packetsLost),Tt.audioFractionLost=qt.fractionLost;var fr=qt.packetsLost-yt.lastPlayStats.audioPacketsLost;Tt.audioFPS=(qt.packetsReceived-yt.lastPlayStats.audioPacketsReceived)/(qt.timestamp-wt)*1e3,Tt.audioPacketsLostRate=fr>0?fr/(qt.packetsReceived-yt.lastPlayStats.audioPacketsReceived+fr):0,yt.lastPlayStats.audioBytesReceived=qt.bytesReceived,qt.packetsLost>0&&(yt.lastPlayStats.audioPacketsLost=qt.packetsLost),yt.lastPlayStats.audioPacketsReceived=qt.packetsReceived,yt.lastPlayStats.audioTime=qt.timestamp,yt.lastPlayStats.time=qt.timestamp,yt.lastPlayStats.audioBitrate=Tt.audioBitrate,Pt=qt.jitter}else if((qt.type=="inbound-rtp"||qt.type=="ssrc"&&qt.bytesReceived!=null)&&(qt.mediaType=="video"||qt.id.indexOf("VideoStream")>=0)){var cr;wt!=0?(Tt.videoBitrate=8*(qt.bytesReceived-yt.lastPlayStats.videoBytesReceived)/(qt.timestamp-wt),Tt.videoFPS=1e3*(qt.framesDecoded-yt.lastPlayStats.framesDecoded)/(qt.timestamp-wt),(cr=qt.packetsLost-yt.lastPlayStats.videoPacketsLost)>0&&(St=cr/(cr+qt.packetsReceived-yt.lastPlayStats.videoPacketsReceived))):typeof qt.framesPerSecond=="number"&&(Tt.videoFPS=qt.framesPerSecond),Tt.videoBitrate<0&&(Tt.videoBitrate=0),Tt.videoFPS<0&&(Tt.videoFPS=0),Tt.videoJitter=qt.jitter,Tt.nackCount=qt.nackCount,Tt.pliCount=qt.pliCount,Tt.videoFractionLost=qt.fractionLost,Tt.videoFramesDecoded=qt.framesDecoded,qt.packetsLost>0&&(Tt.videoPacketsLost=qt.packetsLost),Tt.videoPacketsLostRate=(fr=qt.packetsLost-yt.lastPlayStats.videoPacketsLost)>0?fr/(qt.packetsReceived-yt.lastPlayStats.videoPacketsReceived+fr):0,yt.lastPlayStats.videoBytesReceived=qt.bytesReceived,yt.lastPlayStats.framesDecoded=qt.framesDecoded,qt.packetsLost>0&&(yt.lastPlayStats.videoPacketsLost=qt.packetsLost),yt.lastPlayStats.videoPacketsReceived=qt.packetsReceived,yt.lastPlayStats.videoTime=qt.timestamp,yt.lastPlayStats.time=qt.timestamp,Ot=qt.jitter}else if(qt.type=="track"&&(qt.kind=="video"||qt.id.indexOf("video")>=0)||qt.frameWidth){if(Tt.frameHeight=qt.frameHeight,Tt.frameWidth=qt.frameWidth,wt===0||yt.lastPlayStats.frameHeight===qt.frameHeight&&yt.lastPlayStats.frameWidth===qt.frameWidth)wt===0&&(yt.lastPlayStats.frameHeight=qt.frameHeight,yt.lastPlayStats.frameWidth=qt.frameWidth,yt.player.isProbe||(yt.stateCenter.reporter.spanAppendAttribute({key:st.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:yt.streamId},"vinfo",{h:qt.frameHeight,fft:Date.now(),w:qt.frameWidth}),yt.stateCenter.reporter.spanAppendAttribute({key:st.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:yt.streamId},"vinfo",{h:qt.frameHeight,fft:Date.now(),w:qt.frameWidth})));else{if(!yt.player.isProbe){var Ar=yt.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.H,{key:st.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:yt.streamId},{key:""},st.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event);Ar.setAttributes({webrtc_sid:st.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.webrtc_sid(yt.sessionId),w:st.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(qt.frameWidth),h:st.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(qt.frameHeight)}),Ar.end(),yt.stateCenter.reporter.spanAppendAttribute({key:st.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:yt.streamId},"vinfo",{h:qt.frameHeight,fft:Date.now(),w:qt.frameWidth}),yt.stateCenter.reporter.spanAppendAttribute({key:st.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:yt.streamId},"vinfo",{h:qt.frameHeight,fft:Date.now(),w:qt.frameWidth})}yt.lastPlayStats.frameHeight=qt.frameHeight,yt.lastPlayStats.frameWidth=qt.frameWidth}wt!=0&&(Tt.videoTransferFPS=1e3*(qt.framesReceived-yt.lastPlayStats.framesReceived)/(qt.timestamp-wt),Tt.videoFramesDropped=qt.framesDropped-yt.lastPlayStats.framesDropped),Tt.videoTransferFPS<0&&(Tt.videoTransferFPS=0),Tt.videoFramesDropped<0&&(Tt.videoFramesDropped=0),yt.lastPlayStats.framesReceived=qt.framesReceived,yt.lastPlayStats.framesDropped=qt.framesDropped}else qt.type=="track"&&(qt.kind=="audio"||qt.id.indexOf("audio")>=0)?(Tt.audioLevel=qt.audioLevel||0,Tt.audioSendLevel=qt.totalAudioEnergy,Tt.audioSamplingRate=qt.totalSamplesDuration):qt.type=="candidate-pair"&&(qt.totalRoundTripTime!=null&&(Tt.totalRoundTripTime=qt.totalRoundTripTime),qt.currentRoundTripTime!=null&&(Tt.currentRoundTripTime=qt.currentRoundTripTime,Rt=1e3*Tt.currentRoundTripTime))}),this.lastPlayStats.googCurrentDelayMs=Number(Ut)||Number(Bt)||0,St=isNaN(St)||St<0?0:St,Ot=isNaN(Ot)||Ot<0?0:Ot,It=isNaN(It)||It<0?0:It,Pt=isNaN(Pt)||Pt<0?0:Pt;var Er=at.ClientUtil.getNetQuality(Rt,St,Ot),Sr=at.ClientUtil.getNetQuality(Rt,It,Pt);Tt.audioQuality=wt>0?at.ClientUtil.quality2QualityGrade(Sr):0,Tt.videoQuality=wt>0?at.ClientUtil.quality2QualityGrade(Er):0,this.player.stateCenter.networkState!==ot.ENUM_NETWORK_STATE.offline&&((ft=this.player.peerConnection)===null||ft===void 0?void 0:ft.connectionState)!=="disconnected"||(Tt.videoQuality=ot.QualityGrade.Die,Tt.audioQuality=ot.QualityGrade.Die);var Ht=Math.min(Er,Sr);this.netQuality=Ht,Tt.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),Tt.peerToPeerPacketLostRate=this.p2pNetStats.p2pLostRate,Ht<=ot.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,Ht<=this.player.streamCenter.l3BadQualityScore&&this.player.streamCenter.handleQualityBad(this.streamId,this.player.resourceMode,ot.PlayMode.L3)?this.logger.info(it.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+"check cdn mode"):wt>0&&this.poorQualityNum>=((vt=(gt=this.player)===null||gt===void 0?void 0:gt.streamCenter)===null||vt===void 0?void 0:vt.probeStartedNum)&&Mt>this.probeTime+this.probeInterval&&(this.logger.info(it.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+Ht+" start net probe"),this.probeState=ot.ENUM_PROBE_STATE.tryProbe,this.player.poorQualityRetryCnt++,this.player.streamCenter.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=Mt),Ht>this.player.streamCenter.l3BadQualityScore&&(this.player.streamCenter.playerList[this.streamId].qualityBadCount=0,this.player.streamCenter.l3ProtocolBadTimestamp=0,this.player.streamCenter.lastHandleL3BadTimestamp=0),this.playStat=Tt,this.uploadPlayQuality(Tt,Mt),this.updateCurrentQualityStats(Tt),wt!=0&&this.player.onPlayQualityUpdate(this.streamId,this.currentQuality)}}},pt.prototype.updateCurrentQualityStats=function(ut){var ht=ut.videoBitrate,ft=ut.videoFPS,gt=ut.videoTransferFPS,vt=ut.frameHeight,yt=ut.frameWidth,mt=ut.videoMuteState,Et=ut.videoQuality,bt=ut.videoFramesDecoded,Ct=ut.videoFramesDropped,Tt=ut.videoPacketsLost,wt=ut.videoPacketsLostRate,Rt=ut.audioBitrate,It=ut.audioCodec,St=ut.audioMuteState,Pt=ut.audioQuality,Ot=ut.audioFPS,Ut=ut.audioJitter,Bt=ut.audioLevel,xt=ut.audioPacketsLost,At=ut.audioPacketsLostRate,Mt=ut.audioSamplingRate,Nt=ut.audioSendLevel,$t=ut.nackCount,Ft=ut.pliCount,jt=ut.totalRoundTripTime,zt=ut.currentRoundTripTime,Yt=ut.peerToPeerDelay,Kt=ut.peerToPeerPacketLostRate,er=ut.sampleTimeWindow,ir={video:nt(nt({},this.currentQuality.video),{videoBitrate:ht,videoFPS:ft,videoTransferFPS:gt,frameHeight:vt,frameWidth:yt,videoQuality:Et,videoFramesDecoded:bt,videoFramesDropped:Ct,videoPacketsLost:Tt,videoPacketsLostRate:wt,muteState:mt,videoCumulativeDecodeTime:this.videoReliableBreak.decodeDuration,videoCumulativeBreakTime:this.videoReliableBreak.breakDuration,videoCumulativeBreakRate:this.videoReliableBreak.breakDuration/(this.videoReliableBreak.decodeDuration+this.videoReliableBreak.breakDuration||1)}),audio:nt(nt({},this.currentQuality.audio),{audioBitrate:Rt,audioCodec:It,audioQuality:Pt,audioFPS:Ot,audioJitter:Ut,audioLevel:Bt,audioPacketsLost:xt,audioPacketsLostRate:At,audioSamplingRate:Mt,audioSendLevel:Nt,muteState:St,audioCumulativeDecodeTime:this.audioReliableBreak.decodeDuration,audioCumulativeBreakTime:this.audioReliableBreak.breakDuration,audioCumulativeBreakRate:this.audioReliableBreak.breakDuration/(this.audioReliableBreak.decodeDuration+this.audioReliableBreak.breakDuration||1)}),nackCount:$t,pliCount:Ft,totalRoundTripTime:jt,currentRoundTripTime:zt,peerToPeerDelay:Yt,peerToPeerPacketLostRate:(Kt||0)/255,sampleTimeWindow:er};if(ut.muted!==void 0){var rr=ut.paused,lr=ut.volume,nr=ut.sinkId;ir.muted=ut.muted,ir.paused=rr,ir.volume=lr,ir.sinkId=nr}if(ut.videoCodecName!==void 0){var hr=ut.audioCodecName,vr=ut.codecImplementationName,yr=ut.googAvailableSendBandwidth;ir.video.googCodecName=ut.videoCodecName,ir.audio.googCodecName=hr,ir.codecImplementationName=vr,ir.googAvailableSendBandwidth=yr}this.currentQuality=ir},pt.prototype.uploadPlayQuality=function(ut,ht){var ft,gt;if(this.qualityUpload&&this.player.signal.isServerConnected){var vt=ht;if(this.qualityUploadLastTime==0||vt-this.qualityUploadLastTime>=2e3){if(ut.stream_type="play",ut.stream_id=this.streamId,ut.timeStamp=vt,ut.video_break_duration=this.videoBreakReport.breakDuration,ut.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,ut.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,ut.audio_break_duration=this.audioBreakReport.breakDuration,ut.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,ut.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,ut.real_sampling_interval=vt-this.lastSampleTime,!ut.frameHeight||!ut.frameWidth)for(var yt=document.querySelectorAll("video"),mt=0;mt<yt.length;mt++){var Et=yt[mt],bt=(ft=Et.srcObject)===null||ft===void 0?void 0:ft.getVideoTracks()[0];if(bt&&bt==((gt=this.player.playStream)===null||gt===void 0?void 0:gt.getVideoTracks()[0])){ut.frameHeight=Et.videoHeight||0,ut.frameWidth=Et.videoWidth||0;break}}this.lastSampleTime=vt,this.logger.info(it.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+this.streamId+" upload"+JSON.stringify(ut)),this.player.streamCenter.updateQuality(1,ut),this.qualityUploadLastTime=vt}}},pt.prototype.getP2PNetStats=function(){var ut=this;this.player.signal.getP2PNetStats((0,ot.getSeq)(),this.sessionId,this.peerID,function(ht,ft,gt){var vt=gt.p2p_rtt;ut.p2pNetStats.p2pLostRate=gt.p2p_lost_rate||0,ut.p2pNetStats.p2pRTT=vt||0},function(ht){})},pt.prototype.setPlayQualityTimer=function(){var ut=this;this.qualityTimer==null&&(this.logger.info(it.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval(function(){ut.sampleTimes++;var ht=ut.player.peerConnection;if(ht){var ft=[ht.getStats(null)];ut.player.stateCenter.browser=="chrome"&&ft.push(new Promise(function(gt,vt){ht.getStats(function(yt){return gt(yt)},function(yt){return vt(yt)})})),Promise.all(ft).then(function(gt){ut.getPlayStats(gt[0],gt[1])}).catch(function(gt){ut.logger.error(it.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+ut.streamId+" getStats error "+gt.toString())})}},1e3),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0})},pt.prototype.clearPlayQualityTimer=function(){if(this.qualityTimer!=null){clearInterval(this.qualityTimer),this.qualityTimer=null;var ut=new Date().getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},(0,lt.calculateCumulativeDuration)(this.videoBreak,this.videoBreakReport,this.videoReliableBreak,this.videoBreakThreshold,this.player.cameraStatus===0&&this.player.playMediaStatus.video,ut),(0,lt.calculateCumulativeDuration)(this.audioBreak,this.audioBreakReport,this.audioReliableBreak,this.audioBreakThreshold,this.player.micStatus===0&&this.player.playMediaStatus.audio,ut,"audio")}this.poorQualityNum=0,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0}},pt.prototype.startProbeTimeout=function(){var ut=this;this.probeTimer=setTimeout(function(){ut.logger.error(it.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" probe timeout"),ut.player.playStateUpdateError(st.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError)},this.probeTimeoutInterval)},pt.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},pt}();et.PlayStreamQuality=ct},3849:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(Rt){for(var It,St=1,Pt=arguments.length;St<Pt;St++)for(var Ot in It=arguments[St])Object.prototype.hasOwnProperty.call(It,Ot)&&(Rt[Ot]=It[Ot]);return Rt},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(Rt,It,St,Pt){return new(St||(St=Promise))(function(Ot,Ut){function Bt(Mt){try{At(Pt.next(Mt))}catch(Nt){Ut(Nt)}}function xt(Mt){try{At(Pt.throw(Mt))}catch(Nt){Ut(Nt)}}function At(Mt){var Nt;Mt.done?Ot(Mt.value):(Nt=Mt.value,Nt instanceof St?Nt:new St(function($t){$t(Nt)})).then(Bt,xt)}At((Pt=Pt.apply(Rt,It||[])).next())})},it=this&&this.__generator||function(Rt,It){var St,Pt,Ot,Ut,Bt={label:0,sent:function(){if(1&Ot[0])throw Ot[1];return Ot[1]},trys:[],ops:[]};return Ut={next:xt(0),throw:xt(1),return:xt(2)},typeof Symbol=="function"&&(Ut[Symbol.iterator]=function(){return this}),Ut;function xt(At){return function(Mt){return function(Nt){if(St)throw new TypeError("Generator is already executing.");for(;Bt;)try{if(St=1,Pt&&(Ot=2&Nt[0]?Pt.return:Nt[0]?Pt.throw||((Ot=Pt.return)&&Ot.call(Pt),0):Pt.next)&&!(Ot=Ot.call(Pt,Nt[1])).done)return Ot;switch(Pt=0,Ot&&(Nt=[2&Nt[0],Ot.value]),Nt[0]){case 0:case 1:Ot=Nt;break;case 4:return Bt.label++,{value:Nt[1],done:!1};case 5:Bt.label++,Pt=Nt[1],Nt=[0];continue;case 7:Nt=Bt.ops.pop(),Bt.trys.pop();continue;default:if(Ot=Bt.trys,!((Ot=Ot.length>0&&Ot[Ot.length-1])||Nt[0]!==6&&Nt[0]!==2)){Bt=0;continue}if(Nt[0]===3&&(!Ot||Nt[1]>Ot[0]&&Nt[1]<Ot[3])){Bt.label=Nt[1];break}if(Nt[0]===6&&Bt.label<Ot[1]){Bt.label=Ot[1],Ot=Nt;break}if(Ot&&Bt.label<Ot[2]){Bt.label=Ot[2],Bt.ops.push(Nt);break}Ot[2]&&Bt.ops.pop(),Bt.trys.pop();continue}Nt=It.call(Rt,Bt)}catch($t){Nt=[6,$t],Pt=0}finally{St=Ot=0}if(5&Nt[0])throw Nt[1];return{value:Nt[0]?Nt[1]:void 0,done:!0}}([At,Mt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoPlayWeb=void 0;var st=rt(6706),at=rt(4767),lt=rt(3409),ct=rt(608),pt=rt(3529),ut=rt(1089),ht=rt(5634),ft=rt(7646),gt=rt(1358),vt=rt(9307),yt=rt(569),mt=rt(8011),Et=rt(6454),bt=pt.ZegoRTCLogEvent.kZegoTaskPlayStart,Ct=pt.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,Tt=pt.ZegoRTCLogEvent.kZegoStartPlay,wt=function(){function Rt(It,St,Pt,Ot,Ut,Bt,xt,At){var Mt=this;this.curCBState={state:"NO_PLAY",code:0},this._state=st.ENUM_PLAY_STATE.stop,this.lastState=st.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.broadcasterStatus=st.ENUM_BROADCASTER_STATUS.stop,this.isExternal=!1,this.playQualityList=[],this.maxQualityListCount=10,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,st.getSeq)(),this.reportBeginTime=0,this.reportPlayingTime=0,this.reportPlayStateTime=0,this.streamInRoom=!0,this.playStartTime=0,this.streamRoomPushConsumed=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.playStateCount=0,this.isRePlay=!1,this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.rtcViewer=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=st.ENUM_PLAY_STATE_NEGO.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.isPeer=!1,this.peerFailCount=0,this.isProbe=!1,this.peerID=0,this.isRecvClientInfo=!1,this.videoCodec="",this.videoCodecTimes=0,this.answerSdpTime=0,this.streamConnectIP="",this.initPoster="",this.initVideoStyle="",this.firstPlay=!0,this.isProbeByDG=!1,this.useResourceTypes=[],this.tryidx=0,this._CDNPlayerClone=null,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.rtcPlayCount=0,this.signalTime=0,this.stopReason="",this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.sideMediaConfig={isSEIStart:!1,unregisterSeiFilter:"",filterSize:0},this.cachedGwNodesMode=lt.CachedNodesUseMode.DiffReUse,this.iceDisconnectedMaxTime=15e3,this._turnToTcp=!1,this.decodeVideoFrame=function(Nt,$t){if(Mt.videoCodec==="VP8")$t.terminate();else{for(var Ft=new DataView(Nt.data),jt=0,zt=new ft.H264Parser(Ft),Yt=0,Kt=!1;zt.NextNalu(Kt);)if((Yt=31&Ft.getUint8(zt.nalu_start+zt.start_code_size))!=7&&Yt!=8&&Yt!=9){if(jt=zt.nalu_start+zt.start_code_size+1,Yt!=6)break;Kt=!0;for(var er=0;Ft.getUint8(jt)===255;)er+=255,jt++;if((er+=Ft.getUint8(jt++))===243||er===5||er===100){for(var ir=0;Ft.getUint8(jt)===255;)ir+=255,jt++;if(ir+=Ft.getUint8(jt++),Nt.data.byteLength-jt<ir)break;var rr=new Uint8Array(4+ir);switch(rr[0]=0,rr[1]=0,er){case 100:rr[2]=3,rr[3]=235;break;case 5:rr[2]=3,rr[3]=236;break;case 243:rr[2]=3,rr[3]=237}for(var lr=[],nr=jt;nr<jt+ir;)Ft.getInt8(nr)!==0||Ft.getInt8(nr+1)!==0||Ft.getInt8(nr+2)!==3||Ft.getInt8(nr+3)!==0&&Ft.getInt8(nr+3)!==1&&Ft.getInt8(nr+3)!==2&&Ft.getInt8(nr+3)!==3?nr++:(lr.push(nr+2),nr+=4);for(var hr=0,vr=0;vr<ir+lr.length;vr++)lr.includes(jt)?(jt++,hr++):rr[4+vr-hr]=Ft.getUint8(jt++);var yr=!1;if(er===243)yr=!0;else if(er===5&&Mt.sideMediaConfig.unregisterSeiFilter){var Cr=rr.slice(4,4+Mt.sideMediaConfig.filterSize);gt.WebRTCUtil.decodeString(Cr)===Mt.sideMediaConfig.unregisterSeiFilter&&(yr=!0)}yr&&Mt.stateCenter.actionListener("playerRecvSEI",Mt.streamId,rr)}}$t.enqueue(Nt)}},this.decodeAudioFrame=function(Nt,$t){$t.enqueue(Nt)},this.soundMeterWorklet=null,this.streamId=It,this.logger=St,this.signal=Pt,this.dataReport=Ot,this.streamCenter=Bt,this.ac=xt,this.stateCenter=At,this.qualityHandler=new ht.PlayStreamQuality(Ut,this,this.logger,this.dataReport,this.stateCenter),this.resourceMode=this.stateCenter.settingConfig.getSetting("resource_mode"),this.initStreamReport()}return Rt.prototype.updateCBState=function(It){var St=this,Pt=Object.keys(It).some(function(Ot){return It[Ot]!==St.curCBState[Ot]});return Pt&&(this.curCBState=It),Pt},Object.defineProperty(Rt.prototype,"state",{get:function(){return this._state},set:function(It){this.lastState=this._state,this._state=It},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(It){this.qualityHandler.probeState=It},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(It){this.qualityHandler.netQuality=It},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"lastPlayStats",{get:function(){return this.qualityHandler.lastPlayStats},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"iceStateDisConnect",{get:function(){return[st.ENUM_PLAY_STATE_NEGO.iceClosed,st.ENUM_PLAY_STATE_NEGO.iceDisconnected,st.ENUM_PLAY_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"isLastConnected",{get:function(){return this.lastState===st.ENUM_PLAY_STATE.playing},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"playStat",{get:function(){return this.qualityHandler.playStat},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"ip",{get:function(){var It,St;return(St=(It=this.gwNode)===null||It===void 0?void 0:It.split(":"))===null||St===void 0?void 0:St[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),Rt.prototype.netProbeToReDispatch=function(){this.playStateUpdateError(bt.error.kPlayNetProbePoor)},Rt.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.I,{key:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:Ct.event,par:this.streamId},Ct.event,!0),this.playStartTime=this.reportBeginTime=new Date().getTime()},Rt.prototype.startPlay=function(It,St,Pt){var Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" called ",It),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),It){if(this.getRemoteStreamSuc=St,this.playOption=Pt||{},this.playMediaStatus={video:this.playOption.video===void 0||!!this.playOption.video,audio:this.playOption.audio===void 0||!!this.playOption.audio},Pt&&Pt.videoCodec&&(this.playOption.videoCodec=Pt.videoCodec),typeof(Pt==null?void 0:Pt.isSEIStart)=="boolean"&&(this.sideMediaConfig.isSEIStart=Pt==null?void 0:Pt.isSEIStart),this.sideMediaConfig.isSEIStart){var zt=ct.ClientUtil.isSupportEncodedTransforms();(!((Ot=this.playOption)===null||Ot===void 0)&&Ot.videoCodec&&((Ut=this.playOption)===null||Ut===void 0?void 0:Ut.videoCodec)!=="H264"||!zt)&&(this.sideMediaConfig.isSEIStart=!1)}!((Bt=this.stateCenter.seiConfig)===null||Bt===void 0)&&Bt.unregisterSEIFilter&&(this.sideMediaConfig.unregisterSeiFilter=(xt=this.stateCenter.seiConfig)===null||xt===void 0?void 0:xt.unregisterSEIFilter,this.sideMediaConfig.filterSize=gt.WebRTCUtil.encodeString(this.sideMediaConfig.unregisterSeiFilter).byteLength),(Pt==null?void 0:Pt.streamType)==null&&this.stateCenter.streamType!==void 0&&(this.playOption.streamType=this.stateCenter.streamType),this.stateCenter.reporter.spanSetAttributes({key:bt.event,par:It},{video_layer:bt.video_layer(this.playOption.streamType===2?-1:this.playOption.streamType||1)});var Yt=this.stateCenter.settingConfig.getSetting("play_video_codec",!0);Yt&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting play_video_codec "+Yt),this.playOption.videoCodec=Yt);var Kt=((At=this.playOption)===null||At===void 0?void 0:At.resourceMode)==st.ResourceMode.DG?1:0;this.stateCenter.reporter.spanSetAttributes({key:(this.isRePlay?pt.ZegoRTCLogEvent.kZegoRePlay:Tt).event,par:this.streamId},{is_peer:Tt.is_peer(this.isPeer)}),this.stateCenter.reporter.spanSetAttributes({key:bt.event,par:this.streamId},{audio_activate:bt.audio_activate(this.playOption.audio==1||this.playOption.audio!=0),video_activate:bt.video_activate(this.playOption.video==1||this.playOption.video!=0),biz_product:bt.biz_product(Kt)}),this.reportSpan.setAttributes({room_id:Ct.room_id((Nt=(Mt=this.streamCenter.playerList[this.streamId])===null||Mt===void 0?void 0:Mt.room)===null||Nt===void 0?void 0:Nt.roomID),room_sid_string:Ct.room_sid_string((Ft=($t=this.streamCenter.playerList[this.streamId])===null||$t===void 0?void 0:$t.room)===null||Ft===void 0?void 0:Ft.roomSessionID)}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout(function(){jt.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" waiting timeout"),jt.playStateUpdateError(bt.error.kPlayNegoTimeoutError)},this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" streamId is null")},Rt.prototype.onCreatePlaySessionSuccess=function(It){var St=this,Pt=ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.logger.info(Pt+" "+this.streamId+" success");var Ot=[];if(It.turn_server){var Ut=It.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var Bt=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(Bt)&&(this.streamCenter.maxUdpFailNum=Bt);var xt=this.streamCenter,At=xt.autoSwitchProtocol,Mt=xt.maxUdpFailNum,Nt=xt.udpFailNum;this.logger.info(Pt+"  autoToTcp: ".concat(At,", udpFailNum: ").concat(Nt,", maxUdpFailNum: ").concat(Mt,".")),At&&!this._turnToTcp&&Nt>=Mt&&(this.logger.info(Pt+" switch to tcp."),this._turnToTcp=!0);var $t=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);$t&&(this.logger.info(Pt+" setting udp_or_tcp "+$t),this._turnToTcp=$t==="tcp");var Ft=void 0,jt=Ut.filter(function(er){return er.indexOf("udp")>-1}),zt=Ut.filter(function(er){return er.indexOf("tcp")>-1});Ft=this._turnToTcp?zt.length>0?zt:jt.map(function(er){return er.replace("udp","tcp")}):jt,this.logger.info(Pt+" over tcp "+JSON.stringify(Ft)),Ot.push.apply(Ot,Ft)}It.stun_server&&Ot.push(It.stun_server);var Yt={iceTransportPolicy:"all",iceServers:[{urls:Ot,username:It.turn_username,credential:It.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(Pt+" "+this.streamId+" username: "+It.turn_username),this.logger.info(Pt+" "+this.streamId+" credential: "+It.turn_auth_key),this.createOffer(Yt);var Kt=performance.now();this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(er,ir,rr){St.onRecvMediaDesc(er,ir,rr)}),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(er,ir,rr){St.onRecvCandidateInfo(er,ir,rr)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(er,ir,rr){if(Kt){var lr=(performance.now()-Kt).toFixed(0);Kt=void 0,St.logger.info(Pt+" ".concat(St.streamId,", cmd: CloseSessionPush, cost_time: ").concat(lr))}St.onRecvCloseSession(er,ir,rr)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(er,ir,rr){St.onRecvResetSession(er,ir,rr)}),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,function(er,ir,rr){St.gotStreamStatus=!0,St.streamStatus=rr,St.playStream&&St.onRecvStreamStatus(rr)}),this.signal.registerPushCallback("PlayEventPush",this.sessionId,function(er,ir,rr){if(Kt){var lr=(performance.now()-Kt).toFixed(0);St.logger.info(Pt+" ".concat(St.streamId,", cmd: PlayEventPush, cost_time: ").concat(lr))}St.onRecvPlayEvent(er,ir,rr)}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(er,ir,rr){St.onRecvClientInfo(er,ir,rr)}),this.logger.info(Pt+" "+this.streamId+" call success")},Rt.prototype.createOffer=function(It){var St=this,Pt=ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(It),this.peerConnection.onicecandidate=function(Bt){St.onIceCandidate(Bt)},this.peerConnection.onsignalingstatechange=function(Bt){St.onConnectionStateChange(Bt)},this.peerConnection.oniceconnectionstatechange=function(Bt){St.onIceConnectionStateChange(Bt)},this.peerConnection.onconnectionstatechange=function(Bt){St.onPeerConnectionStateChange(Bt)},this.peerConnection.ontrack=function(Bt){St.onGotRemoteStream(Bt.streams[0],Bt.receiver)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(Bt){St.logger.info(Pt+" "+St.streamId+" data channel open")},this.dataChannel.onmessage=function(Bt){if(St.logger.info(Pt+" "+St.streamId+" data channel onmessage"),Bt.data instanceof Blob){var xt=new FileReader,At={};xt.readAsArrayBuffer(Bt.data),xt.onload=function(){At.data=xt.result,St.onReceivedDataChannel(At)}}else St.onReceivedDataChannel(Bt)});var Ot={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&this.playOption.video===!1&&(Ot.offerToReceiveVideo=0),this.playOption&&this.playOption.audio===!1&&(Ot.offerToReceiveAudio=0),this.logger.info(Pt+" "+this.streamId+" createOffer: "+JSON.stringify(Ot));var Ut=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(Ot).then(function(Bt){Ut&&(Ut.setAttributes({sdp:pt.ZegoRTCLogEvent.kZegoPlayCreateOffer.sdp(Bt.sdp)}),Ut.end()),St.onCreateOfferSuccess(Bt)},function(Bt){St.logger.error(Pt+" "+St.streamId+" create offer error "+Bt.toString()),Ut&&St.stateCenter.reporter.setError(Ut,{code:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError.code,message:Bt.toString()}),St.playStateUpdateError(bt.error.kCreateOfferError,!0)})},Rt.prototype.createSession=function(It){var St,Pt,Ot,Ut=this;this.sessionSeq=(0,st.getSeq)();var Bt=this.streamId;this.streamCenter.testEnvironment==1&&(Bt="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var xt=this.stateCenter.settingConfig.getSetting("gw_nodes");xt&&xt instanceof Array&&xt.length>0&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting "+JSON.stringify(xt)),this.gwNodeList=xt,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var At=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);At&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+At),this._turnToTcp=At==="tcp"),this._turnToTcp&&(this.isPeer=!1);var Mt="",Nt=[];this.stateCenter.idName&&Nt.push("zguid="+this.stateCenter.idName);var $t=((Pt=(St=this.streamCenter.publisherList[this.streamId])===null||St===void 0?void 0:St.room)===null||Pt===void 0?void 0:Pt.roomID)||((Ot=this.stateCenter.roomList[0])===null||Ot===void 0?void 0:Ot.roomID);$t&&Nt.push("zgrid="+$t),typeof this.playOption.streamType=="number"&&Nt.push("video_stream_type="+this.playOption.streamType),Nt.length>0&&(Mt=Nt.join("&"));var Ft=pt.ZegoRTCLogEvent.kZegoPlayCreateSession;if(this.isPeer){var jt=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey),zt=this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms"),Yt=new Date().getTime();this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:Bt,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:It.sdp,serverHost:this.gwNode,playBufLevel:[st.ResourceMode.L3,st.ResourceMode.DG].includes(this.resourceMode)?zt:void 0,params:Mt},function(er,ir,rr){var lr=new Date().getTime();Ut.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" create session time "+(lr-Yt)),jt&&(jt.setAttributes({webrtc_sid:ir,sdp:Ft.sdp(rr.sdp),gw_nodes:Ft.gw_nodes(rr.gw_nodes),gw_nodes_ttl:Ft.gw_nodes(rr.gw_nodes_ttl),gw_version:Ft.gw_version(rr.gw_version)}),jt.end()),Ut.stateNego!==st.ENUM_PLAY_STATE_NEGO.iceConnected&&Ut.getSpan(pt.ZegoRTCLogEvent.kZegoPlayIceConnected.event,Ut.parentSpanKey,"",!0),Ut.stateCenter.reporter.spanSetAttributes({key:bt.event,par:Ut.streamId},{gw_version:bt.gw_version(rr.gw_version)}),Ut.handleCreateSessionWithSdpResp(er,ir,rr)},function(er,ir){if(Ut.sessionSeq==ir){var rr=er==st.SEND_MSG_TIMEOUT?bt.error.kSessionTimeoutError:bt.error.kSessionRequestError;jt&&(jt.setAttributes({try_cnt:Ut.peerFailCount}),Ut.stateCenter.reporter.setError(jt,rr)),Ut.playStateUpdateError(rr)}else Ut.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")})}else{var Kt=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,1,0,Bt,this.playOption&&this.playOption.streamParams,this.gwNode,Mt,function(er,ir,rr){Kt&&(Kt.setAttributes({webrtc_sid:pt.ZegoRTCLogEvent.kZegoPlayCreateSession.webrtc_sid(ir),sdp:Ft.sdp(rr.sdp),gw_nodes:Ft.gw_nodes(rr.gw_nodes),gw_nodes_ttl:Ft.gw_nodes(rr.gw_nodes_ttl),gw_version:Ft.gw_version(rr.gw_version)}),Kt.end(),Ut.stateCenter.reporter.spanSetAttributes({key:bt.event,par:Ut.streamId},{gw_version:bt.gw_version(rr.gw_version)})),Ut.handleCreateSessionResp(er,ir,rr)},function(er,ir){if(Ut.sessionSeq==ir){var rr=er==st.SEND_MSG_TIMEOUT?bt.error.kSessionTimeoutError:bt.error.kSessionRequestError;Kt&&Ut.stateCenter.reporter.setError(Kt,rr),Ut.playStateUpdateError(rr)}else Ut.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")})}this.state=st.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" called success"),this.stateNego=st.ENUM_PLAY_STATE_NEGO.start},Rt.prototype.setGwNodes=function(It,St){var Pt;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(It==null?void 0:It.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),((Pt=It.gw_nodes)===null||Pt===void 0?void 0:Pt.length)>0){var Ot=this.sortGwNodes(It.gw_nodes,this.retryFailGwNodes,St);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(Ot,It.gw_nodes_ttl)}},Rt.prototype.resetGwNodes=function(){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},Rt.prototype.sortGwNodes=function(It,St,Pt){var Ot=JSON.parse(JSON.stringify(It));if(St.forEach(function(Bt){var xt=Ot.indexOf(Bt);xt>=0&&(Ot.splice(xt,1),Ot.push(Bt))}),!Pt){var Ut=Ot.findIndex(function(Bt){return Bt===It[0]});Ut>0&&(Ot.splice(Ut,1),Ot.unshift(It[0]))}return Ot},Rt.prototype.handleDispatchedGwNodes=function(It,St){if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(It)),Array.isArray(It)){this.gwNodeList=It.length>0?It:this.gwNodeList,this.gwNode=It.length>0?this.gwNodeList[0]:this.gwNode;var Pt=St===0?60:St;this.gwNodesTTL=Pt?new Date().getTime()+1e3*Pt:this.gwNodesTTL,It.length>0&&this.streamCenter.updateCachedGwNodesList(this,!1,It,Pt)}},Rt.prototype.handleCreateSessionResp=function(It,St,Pt){var Ot=Pt.turn_server,Ut=Ot.split("?")[0]&&Ot.split("?")[0].slice(5),Bt=this.streamCenter.server.split("?"),xt=Bt[1]&&Bt[1].slice(2);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:Pt.session_id,url:"webrtc://".concat(Ut,"/").concat(xt,"/").concat(this.streamId)}),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" sessionId:"+Pt.session_id),this.sessionSeq==It){this.stateCenter.clientIP=Pt.clientip?Pt.clientip:this.stateCenter.clientIP;var At=0,Mt=new Date().getTime();this.reportBeginTime&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(At=Mt-this.reportBeginTime)),this.signalTime=At),this.answerSdpTime=Mt,Pt.result!==0?(this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" create error"),this.playStateUpdateError(bt.error.kSessionRequestError)):(this.sessionId=Pt.session_id,this.sessionToken=Pt.session_token,this.setGwNodes(Pt,!1),this.onCreatePlaySessionSuccess(Pt))}else this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")},Rt.prototype.handleCreateSessionWithSdpResp=function(It,St,Pt){var Ot=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" sessionId:"+St),this.sessionSeq==It){this.stateCenter.clientIP=Pt.clientip?Pt.clientip:this.stateCenter.clientIP;var Ut=0,Bt=new Date().getTime();if(this.reportBeginTime&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(Ut=Bt-this.reportBeginTime)),this.signalTime=Ut),this.answerSdpTime=Bt,Pt.result!==0){if(this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session failed "+Pt.result),this.stateCenter.useNetAgent&&(Pt==null?void 0:Pt.result)===1004)return void this.playStateUpdateError(bt.error.kPlayStreamNotFound,!0);this.playStateUpdateError(bt.error.kSessionRequestError)}else{this.sessionId=St,this.sessionToken=Pt.session_token,this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session success ",this.streamId),this.setGwNodes(Pt,!1);var xt=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(At,Mt,Nt){if(xt){var $t=(performance.now()-xt).toFixed(0);xt=void 0,Ot.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" ".concat(Ot.streamId,", cmd: CloseSessionPush, cost_time: ").concat($t))}Ot.onRecvCloseSession(At,Mt,Nt)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(At,Mt,Nt){Ot.onRecvResetSession(At,Mt,Nt)}),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,function(At,Mt,Nt){Ot.gotStreamStatus=!0,Ot.streamStatus=Nt,Ot.playStream&&Ot.onRecvStreamStatus(Nt)}),this.signal.registerPushCallback("PlayEventPush",this.sessionId,function(At,Mt,Nt){if(xt){var $t=(performance.now()-xt).toFixed(0);xt=void 0,Ot.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" ".concat(Ot.streamId,", cmd: PlayEventPush, cost_time: ").concat($t))}Ot.onRecvPlayEvent(At,Mt,Nt)}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(At,Mt,Nt){Ot.onRecvClientInfo(At,Mt,Nt)}),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,function(At,Mt,Nt){Ot.onRecvPlayEvent(At,Mt,Nt)}),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,function(At,Mt,Nt){Ot.onRecvNetQualityInfo(At,Mt,Nt)}),this.onGetRemoteOfferSuccess(Pt.sdp)}}else this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" seq is not match.")},Rt.prototype.onCreateOfferSuccess=function(It){var St=this;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+It.sdp.substr(0,It.sdp.length/2)),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+It.sdp.substr(It.sdp.length/2)),It.sdp=It.sdp.replace(/sendrecv/g,"recvonly"),It.sdp=It.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var Pt=It.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?It.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(Pt){var Ot=Pt.replace(/recvonly/,"sendrecv");It.sdp=It.sdp.replace(Pt,Ot)}It.sdp=(0,yt.addSPSDescription)(It.sdp),It.sdp=(0,yt.addRRTRLine)(It.sdp),this.playOption.videoCodec&&(It.sdp=at.SdpUtil.getSDPByVideDecodeType(It.sdp,this.playOption.videoCodec));var Ut=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.event,this.parentSpanKey);Ut&&Ut.setAttributes({sdp:pt.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.sdp(It.sdp)}),this.peerConnection.setLocalDescription(It).then(function(){Ut&&Ut.end(),St.onSetLocalDescriptionSuccess(It)},function(Bt){St.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+St.streamId+" set error "+Bt.toString()),Ut&&St.stateCenter.reporter.setError(Ut,{code:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError.code,message:Bt.toString()}),St.playStateUpdateError(bt.error.kSetLocalDescError,!0)})},Rt.prototype.onSetLocalDescriptionSuccess=function(It){var St=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),this.isPeer)this.createSession(It);else{var Pt={sdp:It.sdp};this.resourceMode==2&&(Pt.min_play_buf_level_ms=500),this.answerSeq=(0,st.getSeq)();var Ot=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,Pt,function(Ut,Bt,xt){St.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+St.streamId+" sendMediaDesc resp"),Ot&&(Ot.setAttributes({webrtc_sid:pt.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.webrtc_sid(Bt),sdp:Pt.sdp}),Ot.end()),St.answerSeq==Ut&&St.sessionId==Bt?(St.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+St.streamId+" send success stateNego:waiterAnswer"),St.stateNego=st.ENUM_PLAY_STATE_NEGO.waiterAnswer,St.state=st.ENUM_PLAY_STATE.waitingServerAnswer):St.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+St.streamId+" seq or sessionId is not equal "+St.answerSeq+" "+Ut,0+St.sessionId+" "+Bt)},function(Ut,Bt){St.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+St.streamId+" failed to send "+Ut),Ot&&St.stateCenter.reporter.setError(Ot,{code:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError.code,message:Ut.toString()}),St.playStateUpdateError(bt.error.kMediaDescError)}),this.state=st.ENUM_PLAY_STATE.waitingOfferRsp}},Rt.prototype.onRecvMediaDesc=function(It,St,Pt){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received ",Pt);var Ot=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.event,this.parentSpanKey);Ot&&(Ot.setAttributes({sdp:pt.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.sdp(Pt.sdp)}),Ot.end()),this.stateNego=st.ENUM_PLAY_STATE_NEGO.waitingCandidate,this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.state===st.ENUM_PLAY_STATE.waitingServerAnswer?(this.signal.sendMediaDescAck(It,this.sessionId,0),this.onGetRemoteOfferSuccess(Pt.sdp)):this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},Rt.prototype.onGetRemoteOfferSuccess=function(It){var St,Pt=this,Ot={type:"answer",sdp:It,toJSON:function(){}},Ut=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.event,this.parentSpanKey);this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var Bt=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(Bt)&&(this.streamCenter.maxUdpFailNum=Bt);var xt=this.streamCenter,At=xt.autoSwitchProtocol,Mt=xt.maxUdpFailNum,Nt=xt.udpFailNum;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+"  autoToTcp: ".concat(At,", udpFailNum: ").concat(Nt,", maxUdpFailNum: ").concat(Mt,".")),At&&!this._turnToTcp&&Nt>=Mt&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" switch to tcp."),this._turnToTcp=!0);var $t=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);$t&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+$t),this._turnToTcp=$t==="tcp"),this._turnToTcp&&((St=Ot.sdp.match(/candidate.*/g))===null||St===void 0||St.forEach(function(Ft){var jt=Ft.replace(/udp/,"tcp");jt.includes(" tcptype ")||(jt=jt.replace(" typ host "," typ host tcptype passive ")),Ot.sdp=Ot.sdp.replace(Ft,jt)})),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" remoteSdp ",Ot.sdp),Ut&&Ut.setAttributes({sdp:pt.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.sdp(Ot.sdp),webrtc_sid:pt.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.webrtc_sid(this.sessionId)}),this.peerConnection.setRemoteDescription(new RTCSessionDescription(Ot)).then(function(){Ut&&Ut.end(),Pt.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+Pt.streamId+" set success")},function(Ft){Pt.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+Pt.streamId+" set remote error "+Ft.toString()),Ut&&(Ut.setAttributes({error:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError.code,message:Ft.toString()}),Ut.end()),Pt.playStateUpdateError(bt.error.kSetRemoteDescError,!0)}),this.state=st.ENUM_PLAY_STATE.waitingServerICE,this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" call success")},Rt.prototype.onRecvCandidateInfo=function(It,St,Pt){var Ot=this;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received ");var Ut=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.event,this.parentSpanKey);if(Ut&&(Ut.setAttributes({candidate_info:pt.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.candidate_info(Pt.infos)}),Ut.end()),this.state==st.ENUM_PLAY_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(It,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var Bt=0;Bt<Pt.infos.length;Bt++){var xt={sdpMid:Pt.infos[Bt].sdpMid,sdpMLineIndex:Pt.infos[Bt].sdpMLineIndex,candidate:Pt.infos[Bt].candidate};this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" candidate "+xt.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(xt)).then(function(){Ot.logger.debug(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+Ot.streamId+" add success")},function(Mt){Ot.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+Ot.streamId+" add error "+Mt.toString()),Ot.playStateUpdateError(bt.error.kCandidateError,!0)})}this.state=st.ENUM_PLAY_STATE.connecting;var At=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlayIceConnected.event,this.parentSpanKey,"",!0);At==null||At.setAttributes({webrtc_sid:this.sessionId}),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" call success")}else this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},Rt.prototype.onRecvPlayEvent=function(It,St,Pt){if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" received"),!this.isProbe){var Ot=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},pt.ZegoRTCLogEvent.kZegoRTCPlayEvent.event);Ot.setAttributes({event_state:pt.ZegoRTCLogEvent.kZegoRTCPlayEvent.event_state(Pt.event),webrtc_sid:St}),Ot.end()}if(this.playEvent===!0&&Pt.event==0){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" retry: "+this.streamId);var Ut=this.streamId,Bt=this.playOption;this.signal.sendCloseSession((0,st.getSeq)(),this.sessionId,1),this.resetPlay(),this.startPlay(Ut,this.getRemoteStreamSuc,Bt)}else this.playEvent=!0},Rt.prototype.onRecvClientInfo=function(It,St,Pt){this.stateCenter.clientIP!==Pt.clientip&&this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+Pt.clientip),this.stateCenter.clientIP=Pt.clientip,this.peerID=Pt.peer_id,this.streamConnectIP=Pt.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.isProbe&&this.stateNego==st.ENUM_PLAY_STATE_NEGO.iceConnected&&this.signal.sendNetProbe((0,st.getSeq)(),this.sessionId,this.peerID,function(){},function(){}),this.isRecvClientInfo=!0},Rt.prototype.onRecvNetQualityInfo=function(It,St,Pt){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" call"),this.qualityHandler.stopProbeTimeout();var Ot=0,Ut=Pt.lossrate,Bt=Pt.rtt;(this.peerID!==Pt.peer_id&&!this.isProbeByDG||typeof Ut==null||typeof Bt==null)&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" local peerID:"+this.peerID+" remote peerID:"+Pt.peer_id+" lossrate:"+Ut+" rtt:"+Bt),Ot=1),this.signal.sendNetQualityInfoPushAck((0,st.getSeq)(),this.sessionId,this.peerID,Ot),Ot==0&&typeof Ut=="number"&&typeof Bt=="number"?(this.isProbeByDG=!1,this.onCalNetQualityResult(0,ct.ClientUtil.getNetQuality(Bt,Ut))):this.onCalNetQualityResult(1)},Rt.prototype.onIceCandidate=function(It){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" called"),It.candidate!=null&&(this.logger.debug(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate "+It.candidate.candidate),this.state<st.ENUM_PLAY_STATE.connecting||this.state==st.ENUM_PLAY_STATE.stop?(this.logger.debug(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:It.candidate.candidate,sdpMid:It.candidate.sdpMid,sdpMLineIndex:It.candidate.sdpMLineIndex})):(this.logger.debug(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" send"),this.sendCandidateInfo([{candidate:It.candidate.candidate,sdpMid:It.candidate.sdpMid,sdpMLineIndex:It.candidate.sdpMLineIndex}])))},Rt.prototype.onConnectionStateChange=function(It){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+It.target.signalingState),this.state!=st.ENUM_PLAY_STATE.stop&&this.peerConnection!=null&&It.target.signalingState==="closed"&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=st.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState))},Rt.prototype.onIceConnectionStateChange=function(It){var St=this;if(this.state!=st.ENUM_PLAY_STATE.stop&&this.peerConnection!=null){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var Pt=this.getSpan(pt.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(Pt&&Pt.setAttributes({ice_state:pt.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),this.peerConnection.iceConnectionState==="connected"){if(this.stateNego=st.ENUM_PLAY_STATE_NEGO.iceConnected,this.isProbe&&this.isPeer&&(this.isRecvClientInfo||this.isProbeByDG))return this.signal.sendNetProbe((0,st.getSeq)(),this.sessionId,this.peerID,function(){},function(){}),void(this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null));if(this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),!this.isProbe&&this.reportBeginTime){var Ot=new Date().getTime()-this.reportBeginTime;this.reportSpan.setAttributes({play_begin_time:Ct.play_begin_time(Ot)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:pt.ZegoRTCLogEvent.kZegoPlayIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.answerSdpTime){var Ut=new Date().getTime()-this.answerSdpTime;this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+Ut)}this.isProbe||this.state==st.ENUM_PLAY_STATE.playing||(this.onPlayStateUpdate(st.ENUM_PLAY_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playOption.resourceMode==st.ResourceMode.DG&&this.firstPlay?null:this.playStream)),this.state=st.ENUM_PLAY_STATE.playing;var Bt=this.isRePlay?pt.ZegoRTCLogEvent.kZegoRePlay:Tt;for(var xt in this.stateCenter.reporter.spanEnd({key:Bt.event,par:this.streamId},{signal_consume:Tt.signal_consume(this.signalTime),is_peer:Tt.is_peer(this.isPeer)}),this.playStateCount++,this.continuousFailCnt=0,this.reportPlayStateTime=Date.now(),this.streamCenter.publisherList)if(this.streamCenter.publisherList[xt].publisher.state==st.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==st.ENUM_BROADCASTER_STATUS.stop){this.signal&&this.signal.sendBroadcasterStatus((0,st.getSeq)(),this.sessionId,1),this.broadcasterStatus=st.ENUM_BROADCASTER_STATUS.start;break}if(!this.isProbe){this.qualityHandler.setPlayQualityTimer();var At=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(At)&&(this.streamCenter.probeStartedNum=At)}this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),!this.hasConnectionChange()&&this.recordFirstFrameData(),this._turnToTcp||(this.streamCenter.udpFailNum=0)}else this.peerConnection.iceConnectionState==="closed"?(Pt==null||Pt.end(),this.stateNego=st.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="failed"?(Pt==null||Pt.end(),this.stateNego=st.ENUM_PLAY_STATE_NEGO.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="disconnected"&&(Pt==null||Pt.end(),this.stateNego=st.ENUM_PLAY_STATE_NEGO.iceDisconnected,this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout(function(){St.checkPlayConnectionFailedState("disconnected")},this.iceDisconnectedMaxTime)))}},Rt.prototype.onPeerConnectionStateChange=function(It){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE+" "+this.streamId+" connectionChanged "+this.peerConnection.connectionState),this.peerConnection.connectionState==="connected"&&this.recordFirstFrameData()},Rt.prototype.hasConnectionChange=function(){var It=this.stateCenter.browser;return!(It==="firefox"||It==="chrome"&&(0,ct.getChromeVer)()<72)},Rt.prototype.checkPlayConnectionFailedState=function(It){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+"  state "+this.state+" connectionState "+It),this.playStateUpdateError(bt.error.kMediaConnectionError)},Rt.prototype.resetPlay=function(){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY+" "+this.streamId+" call"),this.state=st.ENUM_PLAY_STATE.stop,this.playEvent=!1,this.isRecvClientInfo=!1,this.peerConnection!=null&&(this.peerConnection.close(),this.peerConnection=null),this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.stopVideocTimer(),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PlayEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},Rt.prototype.onRecvResetSession=function(It,St,Pt){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" received ");var Ot=this.getSpan(pt.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(Ot&&Ot.end(),St==this.sessionId){this.signal.sendCloseSessionAck(It,this.sessionId,0);var Ut=JSON.parse(JSON.stringify(bt.error.kPlaySessionClosedError));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(Ut)}else this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},Rt.prototype.onRecvCloseSession=function(It,St,Pt){var Ot=this;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(Pt)),this.stateCenter.reporter.spanSetAttributes({key:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{denied_info:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.denied_info(Pt.err_info),stop_reason:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(It,this.sessionId,0);var Ut=Pt.err_info?JSON.parse(Pt.err_info.toLowerCase()):{},Bt=Ut.action?Ut.action:null,xt=1*Pt.reason,At=JSON.parse(JSON.stringify((Ut==null?void 0:Ut.err)===1004?bt.error.kPlayStreamNotFound:bt.error.kPlaySessionClosedError));At.message+=" reason:".concat(xt," ").concat(Bt?" action:"+Bt:""," ").concat(Ut!=null&&Ut.err?" err:"+(Ut==null?void 0:Ut.err):""),At.message+=";".concat((0,Et.translate)(xt,Bt,Ut==null?void 0:Ut.err)),this.negoTimer&&clearTimeout(this.negoTimer);var Mt=!([4,8,10,11,12,14,24,26,27,28].includes(xt)||[2,3,4,5,6].includes(Bt));(Ut==null?void 0:Ut.err)===1004&&(Mt=!0);var Nt=!1;if(!this._turnToTcp){if([8,10].includes(xt)||[18,15].includes(xt)&&Bt===2&&[3001,3002].includes(Ut.err)){this.streamCenter.udpFailNum++;var $t=this.streamCenter;$t.autoSwitchProtocol&&$t.udpFailNum>=$t.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),Nt=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var Ft=this.gwNodeList.findIndex(function(zt){return zt==Ot.gwNode})===this.gwNodeList.length-1,jt=[3001,3002,3003,3004,3005,3006,3007,3008].includes(Ut.err);Ft&&jt&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.playStateUpdateError(At,Mt,Ut,Nt)},Rt.prototype.onRecvStreamStatus=function(It,St){if(St===void 0&&(St=!1),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call"),this.logger.info("".concat(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS," ").concat(this.streamId," status camera_status: ").concat(It.camera_status," mic_status: ").concat(It.mic_status)),this.reportFirstFrameData(It.camera_status,It.mic_status),(!this.hasSentStreamStatus||this.cameraStatus!==It.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(It.camera_status),It.camera_status),(!this.hasSentStreamStatus||this.micStatus!==It.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(It.mic_status),It.mic_status),this.hasSentStreamStatus=!0,this.cameraStatus=It.camera_status,this.micStatus=It.mic_status,this.videoMuteState=It.camera_status===0?"0":"1",this.audioMuteState=It.mic_status===0?"0":"1",typeof this.playOption.video=="boolean")this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" has set video option, ignore stream status");else{var Pt=this.playStream,Ot=this.rtcViewer;if(It.camera_status!==0&&It.camera_status!==20)Ot?(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" viewer clear last frame"),Ot.checkIfClearLastFrame()):Pt.getVideoTracks().forEach(function(Mt){Mt.enabled=!1,Mt.stop(),Pt.removeTrack(Mt)});else if(Pt.getVideoTracks().length===0){var Ut=this.remoteStream.clone().getVideoTracks()[0];Pt.addTrack(Ut),Ot&&Ot.setVideo(Ut,this.stateCenter.browser==="safari")}if(this.stateCenter.browser==="safari"&&St)for(var Bt=document.querySelectorAll("video, audio"),xt=0;xt<Bt.length;xt++){var At=Bt[xt];At.srcObject===this.playStream&&(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" track changed. rerender stream"),At.srcObject=this.playStream)}}this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call success")},Rt.prototype.onGotRemoteStream=function(It,St){var Pt=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" called "+It),It){if(this.sideMediaConfig.isSEIStart&&typeof St.createEncodedStreams=="function"&&(St.track.kind==="video"?this.createVideoReceiverTransform(St):St.track.kind==="audio"&&this.createAudioReceiverTransform(St)),this.playStream){this.playStream.getTracks().forEach(function(Ut){return Pt.playStream.removeTrack(Ut)});var Ot=this.rtcViewer;It.clone().getTracks().forEach(function(Ut){return ot(Pt,void 0,void 0,function(){return it(this,function(Bt){return this.playStream.addTrack(Ut),Ot&&Ot.setTrack(Ut.kind==="video",Ut,this.stateCenter.browser==="safari"),[2]})})})}else this.playStream=It.clone();this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=It,this.getVideoCodec(),this.gotStreamStatus&&this.onRecvStreamStatus(this.streamStatus,!0),this.streamCenter.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()}else this.logger.warn(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" remote stream is empty")},Rt.prototype.createVideoReceiverTransform=function(It){var St=It.createEncodedStreams(),Pt=new TransformStream({transform:this.decodeVideoFrame});this.receiverStreams=St,St.readable.pipeThrough(Pt).pipeTo(St.writable)},Rt.prototype.createAudioReceiverTransform=function(It){var St=It.createEncodedStreams(),Pt=new TransformStream({transform:this.decodeAudioFrame});St.readable.pipeThrough(Pt).pipeTo(St.writable)},Rt.prototype.sendCandidateInfo=function(It){var St=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(It=It.filter(function(Ot){return!(Ot.candidate.indexOf("tcp")>0)&&(!!Ot.candidate||void 0)}))||It.length<1)this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var Pt=this.getSpan(pt.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.event,this.parentSpanKey);Pt&&Pt.setAttributes({candidate_info:pt.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.candidate_info(It)}),this.stateNego!==st.ENUM_PLAY_STATE_NEGO.iceConnected&&(this.stateNego=st.ENUM_PLAY_STATE_NEGO.sendCandidate),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,st.getSeq)(),this.sessionId,It,function(Ot,Ut,Bt){St.logger.debug(ut.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+St.streamId+" send success"),Pt&&Pt.end()},function(Ot,Ut){St.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+St.streamId+" failed to send: "+Ot.toString()),Pt&&St.stateCenter.reporter.setError(Pt,{code:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError.code,message:Ot.toString()}),St.playStateUpdateError(bt.error.kCandidateError)})}},Rt.prototype.shouldSendCloseSession=function(){return this.state!=st.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=st.ENUM_PLAY_STATE.waitingSessionRsp},Rt.prototype.playStateUpdateError=function(It,St,Pt,Ot){if(this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" call ",this.streamId,JSON.stringify(It)),!this.isProbe){var Ut=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},pt.ZegoRTCLogEvent.kZegoTaskPlayStreamStateError.event);Ut.setAttributes({error:It==null?void 0:It.code,message:It==null?void 0:It.message}),Ut.end()}this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(st.ENUM_PLAY_STATE_UPDATE.error,this.streamId,It,St,Pt,Ot),this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" "+this.streamId+" ended")},Rt.prototype.getCameraMicStatus=function(It){return It==0?"OPEN":"MUTE"},Rt.prototype.onPlayStateUpdate=function(It,St,Pt,Ot,Ut,Bt){},Rt.prototype.onPlayQualityUpdate=function(It,St){},Rt.prototype.onRemoteCameraStatusUpdate=function(It,St,Pt){},Rt.prototype.onRemoteMicStatusUpdate=function(It,St,Pt){},Rt.prototype.getStopReason=function(It){var St="StopPlay";return It&&It.code&&(It.code===1104031?St="ReachMaxAVRetryTime":St="StopPlay"),St},Rt.prototype.stopPlay=function(It,St){var Pt,Ot,Ut,Bt;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY+" "+this.streamId+" called");var xt=this.getStopReason(It);for(var At in this.streamCenter.publisherList)if(this.streamCenter.publisherList[At].publisher.state==st.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==st.ENUM_BROADCASTER_STATUS.start){this.signal&&this.signal.sendBroadcasterStatus((0,st.getSeq)(),this.sessionId,0),this.broadcasterStatus=st.ENUM_BROADCASTER_STATUS.stop;break}if(this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,st.getSeq)(),this.sessionId,0),!this.isProbe){var Mt=Date.now()-this.reportPlayStateTime;[0,2].includes(this.resourceMode)&&this.reportSpan.setAttributes({play_state_time:Ct.play_state_time(Mt||0)}),this.uploadRTCPlayStats(),this.stateCenter.reporter.spanSetAttributes({key:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{stop_reason:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(xt)})}if(this.resetPlay(),!this.isProbe&&!St){var Nt=this.qualityHandler,$t=Nt.videoBreak,Ft=Nt.audioBreak,jt=this.resourceMode===2?"l3":"rtc",zt=((Pt={})["".concat(jt,"_a_break_time")]=Ft.cumulativeBreakDuration,Pt["".concat(jt,"_a_decode_time")]=Ft.cumulativeDecodeDuration,Pt["".concat(jt,"_v_break_time")]=$t.cumulativeBreakDuration,Pt["".concat(jt,"_v_decode_time")]=$t.cumulativeDecodeDuration,Pt.audio_cumulative_break_time=Ft.cumulativeBreakDuration,Pt.audio_cumulative_decode_time=Ft.cumulativeDecodeDuration,Pt.video_cumulative_break_time=$t.cumulativeBreakDuration,Pt.video_cumulative_decode_time=$t.cumulativeDecodeDuration,Pt);this.reportSpan.setAttributes(nt({biz_product:((Ot=this.playOption)===null||Ot===void 0?void 0:Ot.resourceMode)==st.ResourceMode.DG?1:0,webrtc_sid:Ct.webrtc_sid(this.sessionId),max_retry_interval:Ct.max_retry_interval(this.stateCenter.streamRetryTime),probe_ip_cnt:Ct.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:Ct.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:Ct.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:Ct.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),fail_cnt:Ct.fail_cnt(Math.max(this.rtcPlayCount-1,0)),continuous_fail_cnt:Ct.continuous_fail_cnt(this.continuousFailCnt),use_resource_type:Ct.use_resource_type(this.resourceMode===st.ResourceMode.DG?this.useResourceTypes:[(0,ct.getPlaySourceType)(this.resourceMode)]),use_na:pt.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.use_na(this.stateCenter.useNetAgent?1:0),play_state_cnt:Ct.first_frame_time(this.playStateCount),protocol:Ct.protocol("webrtc"),dispatch_external_ip:Ct.dispatch_external_ip(this.stateCenter.clientIP),w:Ct.w((Ut=this.playStat)===null||Ut===void 0?void 0:Ut.frameWidth),h:Ct.h((Bt=this.playStat)===null||Bt===void 0?void 0:Bt.frameHeight),stop_reason:Ct.stop_reason(xt),error:(It==null?void 0:It.code)||0,message:(It==null?void 0:It.message)||"",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},zt)),this.reportSpan.end()}this.retryFailGwNodes=[],this.isRePlay=!1,this.rtcPlayCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.continuousFailCnt=0;var Yt=this.rtcViewer;Yt&&Yt.stop()},Rt.prototype.onDisconnect=function(It){this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT+" "+this.streamId+" call"),this.playStateUpdateError(It||bt.error.kWebsocketDisconnectedError,!!It)},Rt.prototype.startSoundLevel=function(){var It,St=this;if(this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&this.remoteStream.getAudioTracks().length!=0){(It=this.soundMeterWorklet)===null||It===void 0||It.destroy(),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.remoteStream);var Pt=this.soundMeterWorklet=new mt.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);Pt.initAudioWorklet(this.ac,this.mic),Pt.onSoundLevelUpdate=function(Ot){St.soundLevel=100*Ot}}catch(Ot){this.logger.error(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" get sound level failed "+Ot)}}else this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" "+this.streamId+" remote stream no found")},Rt.prototype.stopSoundLevel=function(){var It;this.logger.info(ut.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),(It=this.soundMeterWorklet)===null||It===void 0||It.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},Rt.prototype.onCalNetQualityResult=function(It,St){},Rt.prototype.onReceivedDataChannel=function(It){var St,Pt,Ot=this,Ut=new Uint8Array(It.data,0,10),Bt=It.data.byteLength-10,xt=new Uint8Array(It.data,10,Bt);if(Ut[0]==1){var At=Ut[1],Mt=Ut[2]<<8|Ut[3],Nt=Ut[4]<<8|Ut[5],$t=new Date().getTime();if(this.first_pkt&&(this.next_sn[0]=Mt==Nt?Mt:Nt,this.first_pkt=!1),this.pkt_list.push({sn:Mt,sn0:Nt,recv_ts:$t,flags:At,payload_len:Bt,payloadArray:xt}),this.pkt_list.sort(this.compareShort),Mt==this.next_sn[0]){var Ft=this.pkt_list.filter(function(ir){return ir.sn0==Nt});if(Ft.sort(this.compareShort),Ft.find(function(ir){return 1&ir.flags})!=null&&Ft.length==this.compareShort(Mt,Nt)+1){for(var jt=0,zt=new ArrayBuffer(65536),Yt=0;Yt<Ft.length;Yt++)new Uint8Array(zt).set(Ft[Yt].payloadArray,jt),jt+=Ft[Yt].payload_len;(St=this.onDataChannelList)===null||St===void 0||St.forEach(function(ir){ir(zt,jt,Ot.streamId)}),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var Kt=function(){var ir=er.pkt_list.filter(function(vr){return vr.sn0==Ot.pkt_list[0].sn0});if(ir.sort(er.compareShort),ir.find(function(vr){return 1&vr.flags})!=null&&ir.length==er.compareShort(ir[ir.length-1].sn,ir[0].sn0)+1){for(var rr=0,lr=new ArrayBuffer(65536),nr=0;nr<ir.length;nr++)new Uint8Array(lr).set(ir[nr].payloadArray,rr),rr+=ir[nr].payload_len;er.next_sn[0]=ir[0].sn0+ir.length,(Pt=er.onDataChannelList)===null||Pt===void 0||Pt.forEach(function(vr){vr(lr,rr,Ot.streamId)}),er.pkt_list=[],er.first_pkt=!0}else if($t-ir[0].ts<4e3){var hr=ir[0].sn0;for(nr=0;nr<ir.length&&hr==ir[nr].sn;nr++)hr++;return er.next_sn[0]=hr,"break"}for(nr=0;nr<ir.length;nr++)er.pkt_list.shift()},er=this;this.pkt_list.length>0&&Kt()!=="break";);}},Rt.prototype.compareShort=function(It,St){var Pt=new Uint16Array(1);Pt[0]=It-St;var Ot=new Int16Array(1);return Ot[0]=Pt[0],Ot[0]},Rt.prototype.uploadRTCPlayStats=function(){var It,St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft,jt,zt,Yt;this.stateCenter.reporter.spanSetAttributes({key:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{lsttime:pt.ZegoRTCLogEvent.kZegoTaskStreamPlay.lsttime(parseInt(this.qualityHandler.lastPlayStats.time)),total_stat:pt.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:(It=this.lastPlayStats)===null||It===void 0?void 0:It.audioPacketsReceived,vfc:(St=this.lastPlayStats)===null||St===void 0?void 0:St.framesReceived,tfc:((Pt=this.lastPlayStats)===null||Pt===void 0?void 0:Pt.audioPacketsReceived)+((Ot=this.lastPlayStats)===null||Ot===void 0?void 0:Ot.framesReceived),vb:(Ut=this.lastPlayStats)===null||Ut===void 0?void 0:Ut.videoBytesReceived,ab:(Bt=this.lastPlayStats)===null||Bt===void 0?void 0:Bt.audioBytesReceived,tb:((xt=this.lastPlayStats)===null||xt===void 0?void 0:xt.videoBytesReceived)+((At=this.lastPlayStats)===null||At===void 0?void 0:At.audioBytesReceived),rtp_rtt:Math.round(1e3*((Mt=this.playStat)===null||Mt===void 0?void 0:Mt.currentRoundTripTime))||0,w:(Nt=this.playStat)===null||Nt===void 0?void 0:Nt.frameWidth,rtp_plr:($t=this.playStat)===null||$t===void 0?void 0:$t.videoPacketsLostRate,h:(Ft=this.playStat)===null||Ft===void 0?void 0:Ft.frameHeight,rtp_bw:!((jt=this.playStat)===null||jt===void 0)&&jt.googAvailableSendBandwidth?(zt=this.playStat)===null||zt===void 0?void 0:zt.googAvailableSendBandwidth:void 0,p2p_delay:(Yt=this.playStat)===null||Yt===void 0?void 0:Yt.peerToPeerDelay})})},Rt.prototype.getVideoCodec=function(){var It=this;this.peerConnection&&(this.peerConnection.getStats().then(function(St){St.forEach(function(Pt){if(Pt.type==="inbound-rtp"&&Pt.kind==="video"&&Pt.codecId){var Ot=St.get(Pt.codecId).mimeType.toLowerCase();Ot.indexOf("h264")>-1?It.videoCodec="H264":Ot.indexOf("vp8")>-1&&(It.videoCodec="VP8",It.sideMediaConfig.isSEIStart&&It.logger.error(ut.ZEGO_WEBRTC_ACTION.PAYER_GET_VIDEO_CODEC+" video code VP8 is not support SEI"))}})}),this.videoCodecTimes++,this.videoCodec||this.videoCodecTimes>=5)?this.stopVideocTimer():this.videoCodecTimer=setTimeout(function(){It.getVideoCodec()},100)},Rt.prototype.stopVideocTimer=function(){this.videoCodecTimer&&(clearTimeout(this.videoCodecTimer),this.videoCodecTimer=null)},Rt.prototype.getViewer=function(){return this.playStream&&!this.rtcViewer&&(this.rtcViewer=new vt.StreamView(this.playStream,this,{clearLastFrame:this.stateCenter.engineConfig.playClearLastFrame})),this.rtcViewer},Rt.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},Rt.prototype.isCustomCdn=function(){return!1},Rt.prototype.getSpan=function(It,St,Pt,Ot){return Ot===void 0&&(Ot=!1),this.isProbe?null:this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:St,bak_key:Pt,par:this.streamId},{key:It,par:this.streamId},It,Ot)},Rt.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,this.stateCenter.turnOverTcpOnly!==void 0&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},Rt.prototype.recordFirstFrameData=function(){var It;this.isProbe||this.firstFrameTime!=0||(this.firstFrameTime=new Date().getTime()-this.beginTime,this.reportSpan.setAttributes({first_frame_time:Ct.first_frame_time(this.firstFrameTime),fft_video:Ct.fft_video(this.firstFrameTime),fft_audio:Ct.fft_audio(this.firstFrameTime),biz_product:pt.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product(((It=this.playOption)===null||It===void 0?void 0:It.resourceMode)==st.ResourceMode.DG?1:0)}),this.firstVideoSpan=this.firstFrameSpan("video"),this.firstAudioSpan=this.firstFrameSpan("audio"))},Rt.prototype.reportFirstFrameData=function(It,St){It===0&&this.firstVideoSpan&&(this.firstVideoSpan.setAttributes({dev_changed:pt.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.dev_changed(this.cameraStatus!==0)}),this.firstVideoSpan.spanReport(),this.firstVideoSpan=null),St===0&&this.firstAudioSpan&&(this.firstAudioSpan.setAttributes({dev_changed:pt.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame.dev_changed(this.micStatus!==0)}),this.firstAudioSpan.spanReport(),this.firstAudioSpan=null)},Rt.prototype.firstFrameSpan=function(It){var St,Pt=It==="video"?pt.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame:pt.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame,Ot=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:pt.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},Pt.event),Ut=this.streamInRoom?2:this.streamRoomPushConsumed===0?0:1,Bt=new Date().getTime()-this.answerSdpTime;return Ot.setAttributes({webrtc_sid:Pt.webrtc_sid(this.sessionId),resource_type:Pt.resource_type((0,ct.getPlaySourceType)(this.resourceMode)),fft_consumed:Pt.fft_consumed(this.firstFrameTime),protocol:Pt.protocol("webrtc"),push_consumed:Pt.push_consumed(this.streamRoomPushConsumed),prepare_recv_consumed:Pt.prepare_recv_consumed(this.signalTime),connected_consumed:Pt.connected_consumed(Bt),reliability:Pt.reliability(Ut),biz_product:Pt.biz_product(((St=this.playOption)===null||St===void 0?void 0:St.resourceMode)==st.ResourceMode.DG?1:0)}),Ot==null||Ot.end(void 0,!1),Ot},Rt.prototype.setStreamAdd=function(){this.streamInRoom||this.streamRoomPushConsumed!==0||this.state===st.ENUM_PLAY_STATE.connecting||(this.streamRoomPushConsumed=new Date().getTime()-this.playStartTime)},Rt}();et.ZegoPlayWeb=wt},361:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(Et){for(var bt,Ct=1,Tt=arguments.length;Ct<Tt;Ct++)for(var wt in bt=arguments[Ct])Object.prototype.hasOwnProperty.call(bt,wt)&&(Et[wt]=bt[wt]);return Et},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(Et,bt,Ct,Tt){return new(Ct||(Ct=Promise))(function(wt,Rt){function It(Ot){try{Pt(Tt.next(Ot))}catch(Ut){Rt(Ut)}}function St(Ot){try{Pt(Tt.throw(Ot))}catch(Ut){Rt(Ut)}}function Pt(Ot){var Ut;Ot.done?wt(Ot.value):(Ut=Ot.value,Ut instanceof Ct?Ut:new Ct(function(Bt){Bt(Ut)})).then(It,St)}Pt((Tt=Tt.apply(Et,bt||[])).next())})},it=this&&this.__generator||function(Et,bt){var Ct,Tt,wt,Rt,It={label:0,sent:function(){if(1&wt[0])throw wt[1];return wt[1]},trys:[],ops:[]};return Rt={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(Rt[Symbol.iterator]=function(){return this}),Rt;function St(Pt){return function(Ot){return function(Ut){if(Ct)throw new TypeError("Generator is already executing.");for(;It;)try{if(Ct=1,Tt&&(wt=2&Ut[0]?Tt.return:Ut[0]?Tt.throw||((wt=Tt.return)&&wt.call(Tt),0):Tt.next)&&!(wt=wt.call(Tt,Ut[1])).done)return wt;switch(Tt=0,wt&&(Ut=[2&Ut[0],wt.value]),Ut[0]){case 0:case 1:wt=Ut;break;case 4:return It.label++,{value:Ut[1],done:!1};case 5:It.label++,Tt=Ut[1],Ut=[0];continue;case 7:Ut=It.ops.pop(),It.trys.pop();continue;default:if(wt=It.trys,!((wt=wt.length>0&&wt[wt.length-1])||Ut[0]!==6&&Ut[0]!==2)){It=0;continue}if(Ut[0]===3&&(!wt||Ut[1]>wt[0]&&Ut[1]<wt[3])){It.label=Ut[1];break}if(Ut[0]===6&&It.label<wt[1]){It.label=wt[1],wt=Ut;break}if(wt&&It.label<wt[2]){It.label=wt[2],It.ops.push(Ut);break}wt[2]&&It.ops.pop(),It.trys.pop();continue}Ut=bt.call(Et,It)}catch(Bt){Ut=[6,Bt],Tt=0}finally{Ct=wt=0}if(5&Ut[0])throw Ut[1];return{value:Ut[0]?Ut[1]:void 0,done:!0}}([Pt,Ot])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.PublishModule=void 0;var st=rt(6706),at=rt(1089),lt=rt(6706),ct=rt(3529),pt=rt(608),ut=rt(2752),ht=rt(3770),ft=rt(5321),gt=rt(1358),vt=ct.ZegoRTCLogEvent.kZegoTaskPublishStart,yt=ct.ZegoRTCLogEvent.kZegoStartPublish,mt=function(){function Et(bt,Ct,Tt,wt,Rt,It){this.logger=bt,this.dataReport=Ct,this.stateCenter=Tt,this.streamCenter=wt,this.rtm=Rt,this.zegoWebRtc=It,this.recordDevices()}return Et.prototype.createStream=function(bt){var Ct=this;this.logger.info(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" call"),bt&&bt.camera&&bt.camera.audioBitRate&&(bt.camera.audioBitrate=bt.camera.audioBitRate),bt&&bt.camera&&bt.camera.bitrate&&(bt.camera.bitRate=bt.camera.bitrate),bt&&bt.screen&&typeof bt.screen=="object"&&bt.screen.bitrate&&(bt.screen.bitRate=bt.screen.bitrate),bt&&bt.custom&&bt.custom.bitrate&&(bt.custom.bitRate=bt.custom.bitrate);var Tt={width:720,height:480},wt={width:960,height:540};if(!(bt!=null&&bt.custom)&&!(bt!=null&&bt.screen)||bt.camera||!bt){var Rt=nt({video:!0,videoQuality:4,frameRate:15,bitRate:500},{width:640,height:360});switch(this.stateCenter.scenario){case lt.ZegoScenario.StandardVideoCall:break;case lt.ZegoScenario.HighVideoCall:Rt.frameRate=25,Rt.bitRate=1500,Rt=nt(nt({},Rt),wt);break;case lt.ZegoScenario.StandardChatroom:case lt.ZegoScenario.HighQualityChatroom:Rt.video=!1;break;case lt.ZegoScenario.Broadcast:Rt.frameRate=20,Rt.bitRate=1200,Rt=nt(nt({},Rt),wt);break;default:Rt.bitRate=800,Rt=nt(nt({},Rt),Tt)}(bt=bt||{}).camera=Object.assign(Rt,bt.camera||{})}return new Promise(function(It,St){var Pt="camera",Ot=Ct.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskCreateStream.event),Ut=function(Ft){var jt=Ct.streamCenter.checkPreview(Ft),zt=Ft;if(jt&&navigator.userAgent){var Yt=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);Yt&&Yt[1]&&Yt[1].includes("15_1")&&(zt=jt.getStreamThroughCanvas(Ft),jt.localStream=zt,jt.streamFromCanvas=!0,jt.streamFromCanvasTrack=zt.getVideoTracks()[0])}if(Ct.stateCenter.engineConfig.keepAudioTrack&&zt.getAudioTracks().length==0){var Kt=jt==null?void 0:jt.getEmptyAudioTrack();Kt&&(Kt.enabled=!1,zt.addTrack(Kt),jt&&(jt.hasEmptyAudioTrack=!0))}Ot.setAttributes({media_stream_id:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.media_stream_id(Ft==null?void 0:Ft.id)}),Ot.end(),!Ct.stateCenter.deviceInfos&&Ct.recordDevices(),It(zt),Ct.streamCenter.activeSoundLevel()},Bt=function(Ft,jt){jt===void 0&&(jt=""),Ct.stateCenter.reporter.setError(Ot,Ft,jt),St({code:Ft.code,msg:Ft.message+jt})};if(window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1)return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" https or localhost required "),void Bt({code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message+" https or localhost required"});if(bt&&bt.screen){if(Pt="screen",!gt.WebRTCUtil.checkScreenParams(bt.screen,Bt))return;var xt=Ct.stateCenter.browser,At=Ct.streamCenter.getScreenConstrains(bt.screen);Ot.setAttributes({stream_type:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"),screen:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(At)});var Mt=function(Ft){Ct.streamCenter.createScreenPreviewer(Ft,At)&&Ut(Ft),Ft.getVideoTracks()[0].onended=function(){var jt=Ct.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);jt.setAttributes({stop_reason:ct.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("screenSharingEnded")}),Ft&&Ct.stopPreview(Ft),jt.end(),Ct.stateCenter.actionListener("screenSharingEnded",Ft)}};xt=="firefox"||typeof bt.screen=="object"&&bt.screen.type=="firefox"?Ct.startScreenShotFirFox("screen",At,function(Ft,jt,zt){Ft?jt&&Mt(jt):zt&&Bt(zt)}):xt=="chrome"&&ft.ZegoWebRTC.screenShotReady||typeof bt.screen=="object"&&bt.screen.type=="shot"?Ct.startScreenShotChrome(function(Ft,jt,zt){Ft?(Ct.logger.info(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" using extension"),jt&&Mt(jt)):(zt&&Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" extension "+zt),zt==="SS_DIALOG_CANCEL"||typeof(bt==null?void 0:bt.screen)=="object"&&bt.screen.type=="shot"?zt&&Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):Ct.startScreenSharing(At,function(Yt,Kt,er){Yt?Kt&&Mt(Kt):(Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" "+er),er&&Bt(er))}))}):xt=="Electron"||typeof bt.screen=="object"&&bt.screen.type=="Electron"?Ct.startScreenShotElectron(At,function(Ft,jt,zt){Ft?jt&&Mt(jt):zt&&Bt(zt)}):Ct.startScreenSharing(At,function(Ft,jt,zt){Ft?jt&&Mt(jt):zt&&Bt(zt)})}else{if(bt&&typeof bt.camera=="object"&&bt.camera.videoQuality!==void 0&&!pt.ClientUtil.checkInteger(bt.camera.videoQuality))return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" videoQuality must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number");if(bt&&bt.camera&&bt.camera.audioBitrate){if(!pt.ClientUtil.checkInteger(bt.camera.audioBitrate))return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(bt.camera.audioBitrate<6)return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot less 6 kbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(bt.camera.audioBitrate>510)return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot greater than 510 kbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps");Ct.stateCenter.audioBitRate=1e3*bt.camera.audioBitrate}if(bt&&bt.camera&&bt.camera.bitRate){if(typeof bt.camera.bitRate!="number")return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(bt.camera.bitRate>10240)return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(bt&&bt.camera&&bt.camera.channelCount!==void 0&&!pt.ClientUtil.checkInteger(bt.camera.channelCount))return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" channelCount must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must be integer number");if(bt&&bt.camera&&bt.camera.videoQuality===4&&!gt.WebRTCUtil.checkCameraParams(bt.camera,Bt))return;if(bt&&bt.custom&&bt.custom.bitRate){if(!pt.ClientUtil.checkInteger(bt.custom.bitRate))return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(bt.custom.bitRate>10240)return Ct.logger.error(at.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(bt&&bt.custom&&bt.custom.audioBitrate){if(!pt.ClientUtil.checkInteger(bt.custom.audioBitrate))return Ct.logger.error("ze.cs.0 audioBitrate must be integer number"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(bt.custom.audioBitrate<6)return Ct.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(bt.custom.audioBitrate>510)return Ct.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps")}if(bt&&bt.custom&&bt.custom.channelCount!==void 0&&bt.custom.channelCount!==1&&bt.custom.channelCount!==2)return Ct.logger.error("ze.cs.0 channelCount must number 1 or 2"),void Bt(ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must number 1 or 2");var Nt={};if(bt&&bt.camera)Pt="camera",Nt=bt.camera,Ot.setAttributes({stream_type:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"),camera:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(bt.camera)}),typeof Nt.video!="boolean"&&(Nt.video=!0),typeof Nt.audio!="boolean"&&(Nt.audio=!0);else if(bt&&bt.custom){Pt="custom",Nt=bt.custom;var $t=bt.custom.source instanceof MediaStream?"MediaStream":"HTMLElement";Ot.setAttributes({stream_type:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"),custom:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(nt(nt({},bt.custom),{source_type:$t}))})}Ct.startPreview(Nt,Pt,Ut,Bt,Ot)}})},Et.prototype.destroyStream=function(bt){this.logger.info(at.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call");var Ct=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);if(Ct.setAttributes({stop_reason:ct.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("destroyStream")}),!(bt instanceof MediaStream))return this.logger.error(at.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" localStream is not mediaStream or tracks is null"),void this.stateCenter.reporter.setError(Ct,ct.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError);bt instanceof MediaStream&&bt.getTracks().length==0&&this.logger.info(at.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" tracks is null"),this.stopPreview(bt),Ct.end()},Et.prototype.startPublishingStream=function(bt,Ct,Tt,wt){var Rt;this.logger.info(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call ",bt);var It,St=!0,Pt="",Ot=vt.error,Ut=Ot.kPublishParamError,Bt=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.I,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:vt.event,par:bt},vt.event,!0);St&&bt===void 0&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+(Pt="stream id required")),St=!1,It=Ut),!St||bt&&typeof bt=="string"||(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt="stream id type wrong")),St=!1,It=Ut),St&&bt.length>lt.MAX_STREAM_ID_LENGTH&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt="stream id length limit")),St=!1,It=Ut),St&&!pt.ClientUtil.checkIllegalCharacters(bt)&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt="stream ID contains illegal characters")),St=!1,It=Ut),St&&(!Ct||Ct instanceof MediaStream&&Ct.getTracks().length==0)&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt="localStream wrong")),St=!1,It=Ut);var xt=this.streamCenter.checkPreview(Ct);if(St&&!xt&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt="stream is not from zego")),St=!1,It=Ot.kPublishNoPreviewError),xt!=null&&xt.isVideoEffectStarting&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(Pt=(It=Ot.kPublishEffectIsStarting).message)),St=!1),St&&Tt!==void 0&&typeof Tt!="object"&&(St=!1,It=Ut,Pt="publishOption must be object"),St&&Tt!==void 0&&Tt.streamParams!==void 0&&typeof Tt.streamParams!="string"&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption streamParams must be string"),St=!1,It=Ut,Pt=" publishOption streamParams must be string"),St&&Tt!==void 0&&Tt.extraInfo!==void 0&&typeof Tt.extraInfo!="string"&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption extraInfo must be string"),St=!1,It=Ut,Pt=" publishOption extraInfo must be string"),St&&Tt!==void 0&&Tt.videoCodec!==void 0&&typeof Tt.videoCodec!="string"&&(this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption videoCodec must be string"),St=!1,It=Ut,Pt=" publishOption videoCodec must be string"),!St||!this.stateCenter.isMultiRoom||Tt&&typeof Tt.roomID=="string"&&Tt.roomID!=""||(St=!1,It=Ut,Pt=" roomID is need if set multi room"),Tt&&Tt.videoCodec&&(Tt.videoCodec=Tt.videoCodec.toUpperCase()),St&&(this.stateCenter.waitPublishStreamList[bt]={retryStart:!1,localStream:Ct,publishOption:Tt,isDataChannel:wt}),St&&this.rtm.isDisConnect()){if(this.stateCenter.connectChanged)return this.stateCenter.waitPublishStreamList[bt].retryStart=!0,this.logger.info(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" connect changed"),!1;this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" not login"),St=!1,It=Ot.kPublishNoLoginError}if(!St)throw this.logger.error(at.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+Pt),this.stateCenter.reporter.setError(Bt,It),{errorCode:It==null?void 0:It.code,extendedData:Pt};Tt||(Tt={});var At=(0,pt.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,bt),Mt=((Rt={})["_publish_"+bt]={stream_sid:At},Rt);this.stateCenter.reporter.setPublicPros(Mt),Bt.setAttributes({stream_id:vt.stream_id(bt),stream_sid:vt.stream_sid(At),publish_option:vt.publish_option(Tt),enable_camera:vt.enable_camera(!!(xt!=null&&xt.videoTrack)),enable_mic:vt.enable_mic(!!(xt!=null&&xt.audioTrack)),use_na:vt.use_na(this.stateCenter.useNetAgent?1:0)}),Tt.audioBitRate=this.stateCenter.audioBitRate;var Nt,$t=Tt.roomID?Tt.roomID:this.stateCenter.roomList[0]?this.stateCenter.roomList[0].roomID:"",Ft=this.stateCenter.getRoomByRoomID($t);if(!Ft)return this.logger.error("zc.p.sps.1 room no found"),!1;if(Bt.setAttributes({room_id:vt.room_id($t)}),this.stateCenter.customUrl&&this.stateCenter.customUrl.length!=0)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),Nt=this.stateCenter.customUrl;else{var jt=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);jt&&jt instanceof Array&&jt.length>0&&(Nt=jt,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(jt)))}if(Nt)return this.stateCenter.publishStreamList[bt]={state:lt.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:Tt.extraInfo},this.streamCenter.setPublishStateStart(Ft,bt,Ct,Tt,At,wt)?(Ft.streamHandler.onPublishStateUpdate(lt.ENUM_PUBLISH_STATE_UPDATE.retry,bt,{code:0,message:""}),this.streamCenter.publisherList[bt].serverUrls=Nt,this.streamCenter.startPublishingStream(bt)):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.streamCenter.setPublishStateStart(Ft,bt,Ct,Tt,At,wt))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.stateCenter.publishStreamList[bt]={state:lt.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:Tt.extraInfo},this.logger.info("zc.p.sps.1 start publish"),Ft.streamHandler.onPublishStateUpdate(lt.ENUM_PUBLISH_STATE_UPDATE.retry,bt,{code:0,message:""});var zt=this.stateCenter.useNetAgent,Yt=this.streamCenter.publisherList[bt];if(this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:bt},{key:yt.event,par:bt},yt.event,!0).setAttributes({reason:yt.reason("StartPublish")}),zt)return this.stateCenter.appConfig?(this.streamCenter.publisherList[bt].serverUrls=["unified_rtc"],this.streamCenter.startPublishingStream(bt,zt),!0):(this.streamCenter.waitPublishList.push(bt),!0);var Kt=Yt.retryDispatchHandler;return Kt.stopMaxTime(),Kt.invalid(),Kt.initStream(bt,Tt,!0),Kt.startMaxTime(),Kt.active(0)},Et.prototype.activateSEIInsert=function(bt,Ct,Tt){return!1},Et.prototype.sendSEI=function(bt,Ct){if(!pt.ClientUtil.isSupportEncodedTransforms())return this.logger.warn(at.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" browser not support "),!1;if(!(Ct instanceof Uint8Array))return this.logger.error(at.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData required Uint8Array"),!1;if(Ct.byteLength>4096)return this.logger.error(at.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData length limit"),!1;var Tt=this.streamCenter.publisherList[bt];return Tt&&Tt.publisher?Tt.publisher.sendSEI(Ct):(this.logger.warn(at.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" publish not exist"),!1)},Et.prototype.stopPublishingStream=function(bt,Ct,Tt){var wt,Rt,It;this.logger.info(at.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call ",bt+(Ct?Ct.toString():"")+" "+Tt);var St=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.I,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskPublishStop.event);if(typeof bt!="string"||bt=="")return this.logger.error(at.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" streamID must be string and not empty"),this.stateCenter.reporter.setError(St,ct.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError,"stream id type error"),!1;var Pt=this.streamCenter.publisherList[bt];St.setAttributes({stream_id:ct.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_id(bt),stream_sid:ct.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_sid(Pt==null?void 0:Pt.streamSid),room_id:ct.ZegoRTCLogEvent.kZegoTaskPublishStop.room_id((Rt=(wt=this.streamCenter.publisherList[bt])===null||wt===void 0?void 0:wt.room)===null||Rt===void 0?void 0:Rt.roomID),error:(Ct==null?void 0:Ct.code)||0,message:(Ct==null?void 0:Ct.message)||""});var Ot=this.streamCenter.getRoomByStreamID(bt),Ut=Pt&&Pt.publisher&&Pt.publisher.state!==lt.ENUM_PUBLISH_STATE.stop||((It=Pt==null?void 0:Pt.retryStreamHandler)===null||It===void 0?void 0:It.isRetrying());if(this.streamCenter.stopPublishingStream(bt,Ct),Tt&&delete this.stateCenter.waitPublishStreamList[bt],this.stateCenter.publishStreamList[bt]){if(this.stateCenter.publishStreamList[bt].state>=lt.ENUM_PUBLISH_STREAM_STATE.update_info&&Ot){(!Ct||Ct.code!==1102018)&&Ot.streamHandler.updateStreamInfo(bt,lt.ENUM_STREAM_SUB_CMD.liveEnd);for(var Bt=0;Bt<Ot.streamList.length;Bt++)if(Ot.streamList[Bt].stream_id==bt){!this.stateCenter.connectChanged&&Ot.streamList.splice(Bt--,1);break}}delete this.stateCenter.publishStreamList[bt]}return St.end(),Ot&&Ut&&Ot.streamHandler.onPublishStateUpdate(lt.ENUM_PUBLISH_STATE_UPDATE.error,bt,Ct||{code:0,message:""}),!0},Et.prototype.setCaptureVolume=function(bt,Ct){var Tt=this;return new Promise(function(wt){var Rt;Tt.logger.info(at.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call");var It=function(Ut){Tt.logger.error(at.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" "+Ut),wt({errorCode:ct.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code,extendedData:JSON.stringify({fail_reason:ct.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message+" "+Ut})})},St=Tt.streamCenter.ac,Pt=Tt.streamCenter.checkPreview(bt);if(bt instanceof MediaStream&&Pt)if(bt.getAudioTracks().length!=0)if(typeof Ct!="number"||Ct<0||Ct>200)It(" volume must be number between 0 to 200");else{if(Pt.gainNode)Pt.gainNode.gain.value=Ct/100;else{Pt.audioNodeQueue||Pt.initAudioNodeQueue();var Ot=St.createGain();(Rt=Pt.audioNodeQueue)===null||Rt===void 0||Rt.pushFront(Ot),Pt.gainNode=Ot,Pt.gainNode.gain.value=Ct/100}St.resume(),wt({errorCode:0,extendedData:""}),Tt.logger.info(at.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call success")}else It(" stream audioTrack no found");else It(" stream must be created by zego")})},Et.prototype.getElectronScreenSources=function(){var bt=this;return new Promise(function(Ct,Tt){var wt=window.require("electron");wt||(bt.logger.error("zc.gess.0 Electron is not exist"),Tt({message:"Electron is not exist"})),wt.desktopCapturer.getSources({types:["window","screen"]}).then(function(Rt){var It=Rt.map(function(St){return{id:St.id,name:St.name,thumbnail:St.thumbnail}});Ct(It)}).catch(function(Rt){bt.logger.error("zc.gess.0 "+Rt),Tt(Rt)})})},Et.prototype.startScreenShotChrome=function(bt){if(ft.ZegoWebRTC.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),pt.ClientUtil.registerCallback("screenShare",{success:bt},this.stateCenter.callbackList);else{var Ct='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.logger.error(Ct),bt(!1,null,{code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+Ct})}},Et.prototype.startScreenSharing=function(bt,Ct){var Tt=this;if("getDisplayMedia"in navigator.mediaDevices){var wt=navigator.mediaDevices,Rt=!1;Rt={noiseSuppression:!1,autoGainControl:!1,echoCancellation:!0},bt.ANS!==void 0&&(Rt.noiseSuppression=bt.ANS),bt.AGC!==void 0&&(Rt.autoGainControl=bt.AGC),bt.AEC!==void 0&&(Rt.echoCancellation=bt.AEC),this.logger.info("zc.b.sss video config: "+JSON.stringify(bt.video)),this.logger.info("zc.b.sss audio config: "+JSON.stringify(Rt)),wt.getDisplayMedia({audio:Rt,video:bt.video}).then(function(It){Ct(!0,It)}).catch(function(It){Tt.logger.error("zc.b.sss "+It),It.message&&It.message.toLowerCase()=="permission denied"?Ct(!1,null,ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):Ct(!1,null,{code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+It})})}else this.logger.error("zc.b.sss brower does not support getDisplayMedia"),Ct(!1,null,ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError)},Et.prototype.startScreenShotFirFox=function(bt,Ct,Tt){var wt=this,Rt={video:nt(nt({},Ct.video),{mediaSource:bt}),audio:Ct.audio};navigator.mediaDevices.getUserMedia(Rt).then(function(It){Tt(!0,It)}).catch(function(It){wt.logger.error("ze.ssf.1 "+It),Tt(!1,null,{code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+It})})},Et.prototype.startScreenShotElectron=function(bt,Ct){var Tt=this;if(!window.require("electron"))return this.logger.error("ze.sse.1 Electron is not exist"),void Ct(!1,null,{code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" Electron is not exist"});var wt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:bt.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(wt).then(function(Rt){Ct(!0,Rt)}).catch(function(Rt){Tt.logger.error("ze.sse.1 "+Rt),Ct(!1,null,{code:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:ct.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+Rt})})},Et.prototype.startPreview=function(bt,Ct,Tt,wt,Rt){var It=this,St=null;return St=new ht.ZegoPreview(this.logger,this.streamCenter.ac,this.stateCenter,this.streamCenter,Ct),this.streamCenter.previewStreamList.push(St),St.startPreview(bt,function(Pt){It.streamCenter.soundLevelDelegate&&(St==null||St.startSoundLevel()),Ct==="camera"&&((bt==null?void 0:bt.audio)===!1&&St&&(St.hasMicTrack=!1),St!=null&&St.micTrack&&(St.micTrack.enabled=It.streamCenter.isMicEnabled)),bt!=null&&bt.videoOptimizationMode&&It.streamCenter.setVideoTrackContentHint(Pt,bt==null?void 0:bt.videoOptimizationMode),It.logger.debug("zsc.sp.0 call success"),!It.stateCenter.deviceInfos&&It.recordDevices(),Tt&&Tt(Pt)},function(Pt){It.streamCenter.previewStreamList=It.streamCenter.previewStreamList.filter(function(Ot){return Ot!==St}),wt&&wt(Pt)},Rt),!0},Et.prototype.stopPreview=function(bt){if(!bt)return this.logger.warn("zsc.sp.0 localStream null"),!1;for(var Ct in this.streamCenter.publisherList)this.streamCenter.publisherList[Ct].localStream===bt&&(this.streamCenter.publisherList[Ct].localStream=null);var Tt=this.streamCenter.checkPreview(bt);return Tt?(Tt.previewSuc&&(Tt.stopPreview(),this.streamCenter.removePreview(Tt)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},Et.prototype.recordDevices=function(bt,Ct){var Tt,wt=this;this.logger.info("zsc.rd.0 call"),pt.ClientUtil.getDevices(function(Rt){wt.stateCenter.deviceInfos={microphones:Rt.microphones,speakers:Rt.speakers,cameras:Rt.cameras},bt&&bt(Rt)},function(Rt){wt.logger.warn("zsc.rd.0 getDevices err:",Rt),Ct&&Ct(Rt)}),((Tt=navigator.mediaDevices)===null||Tt===void 0?void 0:Tt.ondevicechange)!==void 0&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(Rt){wt.logger.info("zsc.rd.0 devicechange"),wt.stateCenter.deviceChangeTimer&&(clearTimeout(wt.stateCenter.deviceChangeTimer),wt.stateCenter.deviceChangeTimer=null),wt.stateCenter.deviceChangeTimer=setTimeout(function(){pt.ClientUtil.getDevices(function(It){var St,Pt,Ot,Ut,Bt,xt,At=[],Mt=[];if(wt.stateCenter.browser=="safari"&&((Pt=(St=wt.stateCenter.deviceInfos)===null||St===void 0?void 0:St.cameras)===null||Pt===void 0?void 0:Pt.length)===1&&((Ot=wt.stateCenter.deviceInfos)===null||Ot===void 0?void 0:Ot.cameras[0].deviceID)==="")wt.logger.info("zsc.rd.0 cameras not accurate");else{for(var Nt=function(ir){var rr=wt.stateCenter.deviceInfos.cameras[ir];It.cameras.find(function(lr){return lr.deviceID===rr.deviceID})||At.push(rr)},$t=0;$t<wt.stateCenter.deviceInfos.cameras.length;$t++)Nt($t);wt.stateCenter.deviceStateOut=!1;var Ft=!1;At.length>0&&(Ft=!0),At.forEach(function(ir){for(var rr in wt.streamCenter.publisherList){var lr=wt.streamCenter.publisherList[rr],nr=lr.publisher;lr.localStream&&lr.cameraLabel!==""&&lr.cameraLabel===ir.deviceName&&(Ft=!1,nr.sendStreamStatus(-6,nr.mic_status),wt.stateCenter.actionListener("_deviceError",ut.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,ir.deviceName,"camera"),wt.stateCenter.actionListener("deviceError",ut.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,ir.deviceName)),lr.localStream&&lr.localStream.getAudioTracks().length===0&&(Ft=!1)}Ft&&(wt.stateCenter.deviceStateOut=!0),wt.deviceInterruptReport(0,ir,"camera"),wt.stateCenter.actionListener("videoDeviceStateChanged","DELETE",ir)}),It.cameras.filter(function(ir){return!wt.stateCenter.deviceInfos.cameras.find(function(rr){return rr.deviceID===ir.deviceID})}).forEach(function(ir){wt.deviceInterruptReport(1,ir,"camera"),wt.stateCenter.actionListener("videoDeviceStateChanged","ADD",ir)})}wt.stateCenter.browser=="safari"&&((Bt=(Ut=wt.stateCenter.deviceInfos)===null||Ut===void 0?void 0:Ut.microphones)===null||Bt===void 0?void 0:Bt.length)===1&&((xt=wt.stateCenter.deviceInfos)===null||xt===void 0?void 0:xt.microphones[0].deviceID)===""?wt.logger.info("zsc.rd.0 microphones not accurate"):((Mt=wt.stateCenter.deviceInfos.microphones.filter(function(ir){return!It.microphones.find(function(rr){return rr.deviceID===ir.deviceID})})).forEach(function(ir){for(var rr in wt.streamCenter.publisherList){var lr=wt.streamCenter.publisherList[rr],nr=lr.publisher;lr.localStream&&lr.microLabel!==""&&(lr.microLabel===ir.deviceName||lr.microLabel!==""&&lr.microLabel.includes(ir.deviceName))&&(nr.sendStreamStatus(nr.camera_status,-6),wt.stateCenter.actionListener("_deviceError",ut.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,wt.streamCenter.publisherList[rr].microLabel,"micro"),wt.stateCenter.actionListener("deviceError",ut.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,wt.streamCenter.publisherList[rr].microLabel))}wt.deviceInterruptReport(0,ir,"micro"),wt.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Input",ir)}),It.microphones.filter(function(ir){return!wt.stateCenter.deviceInfos.microphones.find(function(rr){return rr.deviceID===ir.deviceID})}).forEach(function(ir){wt.deviceInterruptReport(1,ir,"micro"),wt.stateCenter.actionListener("audioDeviceStateChanged","ADD","Input",ir)}));var jt=wt.stateCenter.deviceInfos.speakers.filter(function(ir){return!It.speakers.find(function(rr){return rr.deviceID===ir.deviceID})}),zt=It.speakers.filter(function(ir){return!wt.stateCenter.deviceInfos.speakers.find(function(rr){return rr.deviceID===ir.deviceID})});jt.forEach(function(ir){var rr=wt.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);rr.setAttributes({reason_type:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("delete"),device:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(ir.deviceID),device_name:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(ir.deviceName)}),rr.end(),wt.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Output",ir)}),zt.forEach(function(ir){var rr=wt.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);rr.setAttributes({reason_type:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("add"),device:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(ir.deviceID),device_name:ct.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(ir.deviceName)}),rr.end(),wt.stateCenter.actionListener("audioDeviceStateChanged","ADD","Output",ir)});var Yt=nt({},wt.stateCenter.deviceInfos);if(wt.stateCenter.deviceInfos={microphones:It.microphones,speakers:It.speakers,cameras:It.cameras},wt.stateCenter.autoSwitchDeviceSetting.microphone){var Kt=wt.stateCenter.deviceInfos.microphones;Mt&&Mt.length!==0&&Kt.length!=0&&wt.streamCenter.previewStreamList.forEach(function(ir){return ot(wt,void 0,void 0,function(){var rr,lr,nr,hr,vr,yr,Cr;return it(this,function(or){switch(or.label){case 0:return rr=ir.localStream,lr=Kt[0].deviceID,hr=(nr=ir.audioTrack)==null?void 0:nr.getSettings().deviceId,vr=!1,hr&&hr==="default"?(yr=Yt.microphones.find(function(ur){return ur.deviceID==="default"}).deviceName,Cr=Kt.find(function(ur){return ur.deviceID==="default"}).deviceName,vr=Cr!==yr):hr!==""&&(vr=Mt.some(function(ur){return ur.deviceID===hr})),rr&&vr&&lr!==""?[4,this.zegoWebRtc.useAudioDevice(rr,lr)]:[3,2];case 1:or.sent(),or.label=2;case 2:return[2]}})})})}if(wt.stateCenter.autoSwitchDeviceSetting.camera){var er=wt.stateCenter.deviceInfos.cameras;At&&At.length!==0&&er.length!=0&&wt.streamCenter.previewStreamList.forEach(function(ir){return ot(wt,void 0,void 0,function(){var rr,lr,nr,hr,vr,yr,Cr;return it(this,function(or){switch(or.label){case 0:return rr=ir.localStream,lr=er[0].deviceID,hr=(nr=ir.videoTrack)==null?void 0:nr.getSettings().deviceId,vr=!1,hr&&hr==="default"?(yr=Yt.cameras.find(function(ur){return ur.deviceID==="default"}).deviceName,Cr=er.find(function(ur){return ur.deviceID==="default"}).deviceName,vr=Cr!==yr):hr!==""&&(vr=At.some(function(ur){return ur.deviceID===hr})),rr&&vr&&lr!==""?[4,this.zegoWebRtc.useVideoDevice(rr,lr)]:[3,2];case 1:or.sent(),or.label=2;case 2:return[2]}})})})}},function(It){wt.logger.warn("zsc.rd.0 getDevices err:",It)})},500)})},Et.prototype.getStreamStats=function(bt){var Ct,Tt,wt;return this.logger.info(at.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),bt instanceof MediaStream&&bt.getTracks().length>0?wt=(Ct=this.streamCenter.checkPublish(bt))===null||Ct===void 0?void 0:Ct.publisher:typeof bt=="string"&&(wt=(Tt=this.streamCenter.publisherList[bt])===null||Tt===void 0?void 0:Tt.publisher),wt?(wt==null?void 0:wt.currentQuality)||null:(this.logger.error("zsc.sp.0 stream is not publishing"),null)},Et.prototype.startWaitPublish=function(){var bt=this;this.streamCenter.waitPublishList.forEach(function(Ct){bt.streamCenter.startPublishingStream(Ct,bt.stateCenter.useNetAgent)}),this.streamCenter.waitPublishList=[]},Et.prototype.deviceInterruptReport=function(bt,Ct,Tt){var wt=Tt==="camera"?ct.ZegoRTCLogEvent.kZegoVideoDeviceChanged:ct.ZegoRTCLogEvent.kZegoAudioDeviceChanged,Rt=this.stateCenter.reporter.createSpan(st.TRACER_LEVEL.H,{key:ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},wt.event);Rt.setAttributes({changed_type:wt.interrupt(bt),device:wt.device(Ct.deviceID),device_name:wt.device_name(Ct.deviceName)}),Rt.end()},Et}();et.PublishModule=mt},3770:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ft){for(var gt,vt=1,yt=arguments.length;vt<yt;vt++)for(var mt in gt=arguments[vt])Object.prototype.hasOwnProperty.call(gt,mt)&&(ft[mt]=gt[mt]);return ft},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(ft,gt,vt,yt){return new(vt||(vt=Promise))(function(mt,Et){function bt(wt){try{Tt(yt.next(wt))}catch(Rt){Et(Rt)}}function Ct(wt){try{Tt(yt.throw(wt))}catch(Rt){Et(Rt)}}function Tt(wt){var Rt;wt.done?mt(wt.value):(Rt=wt.value,Rt instanceof vt?Rt:new vt(function(It){It(Rt)})).then(bt,Ct)}Tt((yt=yt.apply(ft,gt||[])).next())})},it=this&&this.__generator||function(ft,gt){var vt,yt,mt,Et,bt={label:0,sent:function(){if(1&mt[0])throw mt[1];return mt[1]},trys:[],ops:[]};return Et={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Ct(Tt){return function(wt){return function(Rt){if(vt)throw new TypeError("Generator is already executing.");for(;bt;)try{if(vt=1,yt&&(mt=2&Rt[0]?yt.return:Rt[0]?yt.throw||((mt=yt.return)&&mt.call(yt),0):yt.next)&&!(mt=mt.call(yt,Rt[1])).done)return mt;switch(yt=0,mt&&(Rt=[2&Rt[0],mt.value]),Rt[0]){case 0:case 1:mt=Rt;break;case 4:return bt.label++,{value:Rt[1],done:!1};case 5:bt.label++,yt=Rt[1],Rt=[0];continue;case 7:Rt=bt.ops.pop(),bt.trys.pop();continue;default:if(mt=bt.trys,!((mt=mt.length>0&&mt[mt.length-1])||Rt[0]!==6&&Rt[0]!==2)){bt=0;continue}if(Rt[0]===3&&(!mt||Rt[1]>mt[0]&&Rt[1]<mt[3])){bt.label=Rt[1];break}if(Rt[0]===6&&bt.label<mt[1]){bt.label=mt[1],mt=Rt;break}if(mt&&bt.label<mt[2]){bt.label=mt[2],bt.ops.push(Rt);break}mt[2]&&bt.ops.pop(),bt.trys.pop();continue}Rt=gt.call(ft,bt)}catch(It){Rt=[6,It],yt=0}finally{vt=mt=0}if(5&Rt[0])throw Rt[1];return{value:Rt[0]?Rt[1]:void 0,done:!0}}([Tt,wt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoPreview=void 0;var st=rt(6706),at=rt(3529),lt=rt(1089),ct=rt(9307),pt=rt(6171),ut=rt(8011),ht=function(){function ft(gt,vt,yt,mt,Et){var bt=this;this.logger=gt,this.ac=vt,this.stateCenter=yt,this.streamCenter=mt,this.previewType=Et,this.localStream=null,this.videoInfo={},this.rtcViewer=null,this.streamFromCanvas=!1,this.streamFromCanvasTrack=null,this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this._emptyAudioTrack=null,this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.cloneVideoTrack=null,this.originVideoTrack=null,this.originAudioTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.isVideoEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableDualStream=!1,this.lowStreamConfig={width:160,height:120,frameRate:15,bitRate:50},this.muteImage=null,this.hasMicTrack=!0,this.enableMicrophoneOnly=function(Ct,Tt){if(!bt.localStream)return bt.logger.error("zp.em.2 no localStream"),!1;var wt=Tt.getPublishList(bt.localStream).map(function(Rt){return Rt.publisher});return wt.length&&wt.forEach(function(Rt){Rt.sendStreamStatus(Rt.camera_status,bt.isAudioEnabled&&Ct?0:2)}),bt.micTrack?(bt.micTrack.enabled=bt.isAudioEnabled&&Ct,bt.logger.debug("zp.emo.2 call success"),!0):(bt.logger.info("zp.emo.2 no micTrack"),!0)},this.soundMeterWorklet=null,this.audioMixManager=null}return ft.prototype.getEmptyAudioTrack=function(){if(!this._emptyAudioTrack){var gt=this.streamCenter.ac.createMediaStreamDestination(),vt=gt?gt.stream:null;this._emptyAudioTrack=vt?vt.getAudioTracks()[0]:null}return this._emptyAudioTrack},Object.defineProperty(ft.prototype,"audioTrack",{get:function(){var gt;return this._audioTrack||((gt=this.localStream)===null||gt===void 0?void 0:gt.getAudioTracks()[0])||null},set:function(gt){this._audioTrack=gt},enumerable:!1,configurable:!0}),Object.defineProperty(ft.prototype,"videoTrack",{get:function(){var gt;return this._videoTrack||((gt=this.localStream)===null||gt===void 0?void 0:gt.getVideoTracks()[0])||null},set:function(gt){this._videoTrack=gt},enumerable:!1,configurable:!0}),Object.defineProperty(ft.prototype,"micTrack",{get:function(){return this.hasMicTrack&&this.previewType==="camera"&&this.audioTrack||null},enumerable:!1,configurable:!0}),Object.defineProperty(ft.prototype,"isVideoEffectStarting",{get:function(){return!!this.videoEffect&&this.videoEffect.isStarting},enumerable:!1,configurable:!0}),ft.prototype.getMediaStreamConstraints=function(gt,vt){var yt={audio:null,video:null};if(yt.audio=!0,yt.video={width:this.stateCenter.settingConfig.getSetting("camera_width")||640,height:this.stateCenter.settingConfig.getSetting("camera_height")||480,frameRate:this.stateCenter.settingConfig.getSetting("camera_framerate")||15,bitRate:this.stateCenter.settingConfig.getSetting("camera_video_bitrate")},gt.audio?gt.audioInput===void 0&&gt.ANS===void 0&&gt.AGC===void 0&&gt.AEC===void 0&&gt.channelCount===void 0?(yt.audio={},yt.audio.noiseSuppression=this.stateCenter.settingConfig.getSetting("ANS"),yt.audio.autoGainControl=this.stateCenter.settingConfig.getSetting("AGC"),yt.audio.echoCancellation=this.stateCenter.settingConfig.getSetting("AEC"),yt.audio.channelCount=1):(yt.audio={},gt.audioInput!=null&&(yt.audio.deviceId={exact:gt.audioInput}),gt.ANS!==void 0&&(yt.audio.noiseSuppression=gt.ANS),gt.AGC!==void 0&&(yt.audio.autoGainControl=gt.AGC),gt.AEC!==void 0&&(yt.audio.echoCancellation=gt.AEC),gt.channelCount!==void 0&&(yt.audio.channelCount=gt.channelCount)):gt.audio===!1&&(yt.audio=!1),gt.video){var mt=640,Et=480,bt=15,Ct=this.stateCenter.settingConfig.getSetting("camera_video_bitrate");if(gt.videoQuality===1?(mt=st.ENUM_RESOLUTION_TYPE.LOW.width,Et=st.ENUM_RESOLUTION_TYPE.LOW.height,bt=st.ENUM_RESOLUTION_TYPE.LOW.frameRate,Ct=st.ENUM_RESOLUTION_TYPE.LOW.bitRate):gt.videoQuality===2?(mt=st.ENUM_RESOLUTION_TYPE.MEDIUM.width,Et=st.ENUM_RESOLUTION_TYPE.MEDIUM.height,bt=st.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,Ct=st.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):gt.videoQuality===3?(mt=st.ENUM_RESOLUTION_TYPE.HIGH.width,Et=st.ENUM_RESOLUTION_TYPE.HIGH.height,bt=st.ENUM_RESOLUTION_TYPE.HIGH.frameRate,Ct=st.ENUM_RESOLUTION_TYPE.HIGH.bitRate):gt.videoQuality===4?(mt=gt.width||640,Et=gt.height||480,bt=gt.frameRate||15,Ct=gt.bitRate||this.stateCenter.settingConfig.getSetting("camera_video_bitrate")):this.logger.info("zp.gmsc.2 use default"),vt&&!gt.videoQuality&&(gt.width&&(mt=gt.width),gt.height&&(Et=gt.height),gt.frameRate&&(bt=gt.frameRate),gt.bitRate&&(Ct=gt.bitRate)),gt.horizontal===!1){var Tt=Et;Et=mt,mt=Tt}gt.isSwitch===!0&&(Tt=Et,Et=mt,mt=Tt),yt.video={width:mt,height:Et,frameRate:bt,bitRate:Ct},gt.facingMode!=null?yt.video.facingMode=gt.facingMode:gt.videoInput!=null&&gt.videoInput!=null&&gt.videoInput!=""&&(yt.video.deviceId={exact:gt.videoInput}),this.logger.info("zp.gmsc.2 width: "+mt+" height: "+Et+" rate: "+bt)}else gt.video===!1&&(gt.audioBitrate&&(yt.video={}),yt.video=!1);return yt},ft.prototype.startPreview=function(gt,vt,yt,mt){return ot(this,void 0,void 0,function(){var Et,bt,Ct,Tt,wt,Rt,It,St,Pt,Ot=this;return it(this,function(Ut){return this.logger.debug("zp.sv.2 called"),this.mediaStreamConfig=gt,navigator.mediaDevices===void 0||navigator.mediaDevices.getUserMedia==null?(yt&&yt(at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):(Et=function(Bt){vt(Bt)},gt.source instanceof MediaStream?(bt=gt.source.getVideoTracks(),Ct=bt.length>0?bt[0].getSettings():{width:0,height:0,frameRate:0},this.logger.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=gt.source,this.initMediaTrack(gt.source),this.videoInfo={width:Ct.width,height:Ct.height,frameRate:Ct.frameRate,bitRate:gt.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),startBitrate:gt.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:gt.minBitrate,keyFrameInterval:gt.keyFrameInterval,channelCount:gt.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*gt.audioBitrate||48e3},Et&&Et(this.localStream),[2]):gt.source instanceof HTMLMediaElement?((Tt=this.captureStream(gt.source,gt))?(this.videoInfo.bitRate=gt.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(Tt),Et&&Et(Tt)):yt&&yt(at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):((wt=this.getMediaStreamConstraints(gt)).audio&&(Rt=this.stateCenter.settingConfig.getSetting("AEC",!0),It=this.stateCenter.settingConfig.getSetting("AGC",!0),St=this.stateCenter.settingConfig.getSetting("ANS",!0),typeof Rt=="boolean"&&(this.logger.info("zp.sv.2 setting AEC "+Rt),wt.audio.echoCancellation=Rt),typeof It=="boolean"&&(this.logger.info("zp.sv.2 setting AGC "+It),wt.audio.autoGainControl=It),typeof St=="boolean"&&(this.logger.info("zp.sv.2 setting ANS "+St),wt.audio.noiseSuppression=St)),this.videoInfo=nt(nt({},wt.video),{keyFrameInterval:gt.keyFrameInterval}),this.videoInfo?(this.videoInfo.audioBitrate=1e3*gt.audioBitrate||48e3,this.videoInfo.startBitrate=gt.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),this.videoInfo.minBitrate=gt.minBitrate,this.videoInfo.keyFrameInterval=gt.keyFrameInterval):gt.audioBitrate&&(this.videoInfo={audioBitrate:1e3*gt.audioBitrate||48e3}),(Pt=this.stateCenter.settingConfig.getSetting("camera_audio_bitrate",!0))&&(this.videoInfo.audioBitrate=1e3*Pt),wt.video instanceof Object&&(wt.video.width=this.stateCenter.settingConfig.getSetting("camera_width",!0)||wt.video.width,wt.video.height=this.stateCenter.settingConfig.getSetting("camera_height",!0)||wt.video.height,wt.video.frameRate=this.stateCenter.settingConfig.getSetting("camera_framerate",!0)||wt.video.frameRate),this.mediaStreamConfig.video=!!wt.video,this.mediaStreamConfig.audio=!!wt.audio,this.logger.info("zp.sv.2 ",JSON.stringify(wt)),mt.setAttribute("preview_conf",at.ZegoRTCLogEvent.kZegoTaskCreateStream.preview_conf(wt)),gt.unlimitedCaptureResolution&&wt.video.width&&(wt.video.width={ideal:4096},wt.video.height={ideal:2160},this.logger.info("zp.sv.2 ","capture max resolution of camera")),navigator.mediaDevices.getUserMedia(wt).then(function(Bt){Ot.logger.info("zp.sv.2 success"),Ot.localStream=Bt,Ot.previewSuc=!0,Ot.initMediaTrack(Bt),Ot.videoInfo&&(Ot.videoInfo.channelCount=gt.channelCount||(Ot.audioTrack&&Ot.audioTrack.getSettings?Ot.audioTrack.getSettings().channelCount:1)),Et&&Et(Bt)},function(Bt){if(Ot.logger.info("zp.sv.2 failed ",Bt.name," ",Bt.message),yt){var xt=at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError;xt.message=xt.message+" "+Bt.name+" "+Bt.message,Bt.name==="NotAllowedError"||Bt.name==="SecurityError"?(xt=nt({},at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message=Bt.name+": "+xt.message:Bt.name==="NotReadableError"?(xt=nt({},at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message=Bt.name+": "+xt.message:Bt.name==="OverconstrainedError"&&((xt=nt({},at.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message=Bt.name+": "+xt.message+(Bt.constraint?". such as "+Bt.constraint:"")),yt(xt)}}),[2]))})})},ft.prototype.captureStream=function(gt,vt){if(!gt)return this.logger.info("zp.cs.2 no local video"),null;var yt;if(gt.captureStream)yt=gt.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!gt.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),null;yt=gt.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return yt.getTracks().length==0?(this.logger.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=yt,this.videoInfo={width:gt.videoWidth,height:gt.videoHeight,frameRate:0,bitRate:vt.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),channelCount:vt.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*vt.audioBitrate||48e3,startBitrate:vt.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:vt.minBitrate,keyFrameInterval:vt.keyFrameInterval},this.logger.debug("zp.cs.2 called success"),this.localStream)},ft.prototype.stopPreview=function(){var gt,vt,yt,mt,Et,bt,Ct;if(this.logger.info("zp.sv.2.1 called"),this.localStream){var Tt=this.rtcViewer;Tt&&Tt.stop(),this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),(gt=this.cloneVideoTrack)===null||gt===void 0||gt.stop(),this.muteImageAnID&&cancelAnimationFrame(this.muteImageAnID),(vt=this.originVideoTrack)===null||vt===void 0||vt.stop(),(yt=this.originAudioTrack)===null||yt===void 0||yt.stop(),(mt=this.videoTrack)===null||mt===void 0||mt.stop(),(Et=this.audioTrack)===null||Et===void 0||Et.stop(),(bt=this.audioMixManager)===null||bt===void 0||bt.stopAudioManager(),this.localStream.getTracks().reverse().forEach(function(wt){return wt.stop()}),this.localStream=null,(Ct=this.lowStream)===null||Ct===void 0||Ct.getTracks().reverse().forEach(function(wt){return wt.stop()}),this.lowStream=void 0,this.videoInfo={}}},ft.prototype.enableMicrophone=function(gt,vt){return!1},ft.prototype.enableCamera=function(gt,vt,yt){return!1},ft.prototype.enableCameraCapturing=function(gt){return ot(this,void 0,void 0,function(){return it(this,function(vt){return[2,!1]})})},ft.prototype.startSoundLevel=function(){var gt,vt=this;if(this.localStream&&this.localStream.getAudioTracks().length!=0){(gt=this.soundMeterWorklet)===null||gt===void 0||gt.destroy(),this.mic&&this.mic.disconnect();try{this.mic=this.ac.createMediaStreamSource(this.localStream);var yt=this.soundMeterWorklet=new ut.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);yt.initAudioWorklet(this.ac,this.mic),yt.onSoundLevelUpdate=function(mt){vt.soundLevel=100*mt}}catch(mt){this.logger.error(lt.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" get sound level failed "+mt)}}},ft.prototype.stopSoundLevel=function(){var gt;this.soundLevel=0,(gt=this.soundMeterWorklet)===null||gt===void 0||gt.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},ft.prototype.restartSoundLevel=function(){this.streamCenter.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},ft.prototype.setBeautyEffect=function(gt,vt){return ot(this,void 0,void 0,function(){return it(this,function(yt){return[2]})})},ft.prototype.replacePreviewTrack=function(gt,vt,yt){},ft.prototype.createLowStream=function(){var gt,vt,yt,mt,Et,bt=(gt=this.localStream)===null||gt===void 0?void 0:gt.getVideoTracks()[0];if(bt){var Ct=bt.getSettings().height,Tt=bt.getSettings().width,wt=navigator.userAgent,Rt=wt.toLowerCase().match(/MicroMessenger/i)=="micromessenger",It=wt.indexOf("Android")>-1||wt.indexOf("Adr")>-1;this.logger.info("zp.cls w: "+Tt+" h: "+Ct+" "+It+" "+Rt);var St=typeof((vt=this.videoInfo)===null||vt===void 0?void 0:vt.width)=="number"&&typeof((yt=this.videoInfo)===null||yt===void 0?void 0:yt.height)=="number"&&Ct==this.videoInfo.width&&Tt==this.videoInfo.height;if(Rt&&It&&St){var Pt=Ct;Ct=Tt,Tt=Pt}var Ot=Ct&&Tt?Ct/Tt:1;try{var Ut,Bt=this.lowStreamConfig,xt=Bt.width,At=Bt.frameRate;if(Ut=Math.round(Ot*this.lowStreamConfig.width),this.stateCenter.browser==="firefox")this.lowStream=this.getStreamThroughCanvas(this.localStream,{w:xt,h:Ut,fps:At});else{this.lowStream=(mt=this.localStream)===null||mt===void 0?void 0:mt.clone();var Mt=(Et=this.lowStream)===null||Et===void 0?void 0:Et.getVideoTracks()[0];Mt==null||Mt.applyConstraints({width:xt,height:Ut,frameRate:At})}}catch(Nt){this.logger.error("zp.cls "+Nt)}}},ft.prototype.initAudioNodeQueue=function(gt){if(!this.audioTrack||!this.localStream)return!1;var vt=this.createSrcNode(this.audioTrack),yt=this.createDestNode(this.localStream);return this.audioNodeQueue=new pt.AudioNodeQueue(vt,yt),!0},ft.prototype.createSrcNode=function(gt,vt){vt===void 0&&(vt=!1);var yt=gt===void 0?this.audioTrack:gt;if(this.srcNode){if(!vt)return this.srcNode;this.srcNode.disconnect(),this.logger.info("zp.csn recreate src")}var mt=new MediaStream;yt&&mt.addTrack(yt);var Et=this.srcNode=this.ac.createMediaStreamSource(mt);return this.logger.info("zp.csn "+"create src: ".concat(yt==null?void 0:yt.label)),Et},ft.prototype.createDestNode=function(gt){var vt;if(this.destNode)return this.destNode;var yt=this.destNode=this.destNode||this.ac.createMediaStreamDestination(),mt=yt.stream.getAudioTracks()[0],Et=this.rtcViewer;for(var bt in this.streamCenter.publisherList){var Ct=this.streamCenter.publisherList[bt];if(Ct.localStream==gt){var Tt=(vt=Ct.publisher.peerConnection)===null||vt===void 0?void 0:vt.getSenders().find(function(Rt){return Rt.track&&Rt.track.kind==="audio"});Tt&&(Tt.replaceTrack(mt),this.logger.info("zc.pv.cdn change sender audio track"));break}}var wt=gt.getAudioTracks()[0];return wt&&wt!==this.getEmptyAudioTrack()&&(mt.enabled=wt.enabled,gt.removeTrack(wt)),gt.addTrack(mt),Et&&Et.setAudio(mt),yt},ft.prototype.initMediaTrack=function(gt){gt.getVideoTracks().length>0&&(this.videoTrack=gt.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),gt.getAudioTracks().length>0&&(this.audioTrack=gt.getAudioTracks()[0],this.originAudioTrack=this.audioTrack)},ft.prototype.onAudioTrackChange=function(gt){},ft.prototype.getViewer=function(){return this.localStream&&!this.rtcViewer&&(this.rtcViewer=new ct.StreamView(this.localStream,this,{clearLastFrame:this.stateCenter.engineConfig.previewClearLastFrame})),this.rtcViewer},ft.prototype.getStreamThroughCanvas=function(gt,vt){if(gt.getVideoTracks().length==0)return gt;var yt=document.createElement("video"),mt=document.createElement("canvas"),Et=mt.getContext("2d");yt.setAttribute("style","display:none"),mt.setAttribute("style","display:none"),yt.setAttribute("muted",""),yt.muted=!0,yt.setAttribute("autoplay",""),yt.autoplay=!0,yt.setAttribute("playsinline",""),document.body.append(yt),document.body.append(mt),yt.srcObject=gt;var bt=function(){mt.width!==0&&(Et==null||Et.drawImage(yt,0,0,mt.width,mt.height),window.requestAnimationFrame(bt),yt.srcObject=gt)};yt.oncanplay=function(){mt.width=(vt==null?void 0:vt.w)||yt.videoWidth,mt.height=(vt==null?void 0:vt.h)||yt.videoHeight,yt.play(),bt()};var Ct=mt.captureStream((vt==null?void 0:vt.fps)||15),Tt=Ct.getVideoTracks()[0],wt=Tt.stop;if(Tt.stop=function(){wt.call(Tt),bt(),yt.remove(),mt.width=0,mt.remove()},gt instanceof MediaStream&&gt.getAudioTracks().length){var Rt=gt.getAudioTracks()[0];Ct.addTrack(Rt)}return Ct},ft.prototype.stopCanvasStreamTrack=function(){var gt;this.streamFromCanvas&&this.streamFromCanvasTrack&&((gt=this.streamFromCanvasTrack)===null||gt===void 0||gt.stop(),this.streamFromCanvasTrack=null)},ft}();et.ZegoPreview=ht},1547:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(yt){for(var mt,Et=1,bt=arguments.length;Et<bt;Et++)for(var Ct in mt=arguments[Et])Object.prototype.hasOwnProperty.call(mt,Ct)&&(yt[Ct]=mt[Ct]);return yt},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoPublish=void 0;var ot=rt(6706),it=rt(4767),st=rt(3409),at=rt(608),lt=rt(3529),ct=rt(1089),pt=rt(7646),ut=rt(6454),ht=lt.ZegoRTCLogEvent.kZegoTaskPublishStart,ft=lt.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,gt=lt.ZegoRTCLogEvent.kZegoStartPublish,vt=function(){function yt(mt,Et,bt,Ct,Tt,wt,Rt){var It=this;this.curCBState={state:"NO_PUBLISH",code:0},this._state=ot.ENUM_PUBLISH_STATE.stop,this.lastState=ot.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,videoPacketsLost:0,videoPacketsLostRate:0,googCodecName:""},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioPacketsLost:0,audioPacketsLostRate:0,googCodecName:""}},this.canvasTimer=null,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,ot.getSeq)(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,channelCount:1,audioBitrate:48e3,minBitrate:0,keyFrameInterval:2},this.mediaStreamConfig=null,this.offerSeq=0,this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.stop,this.isExternal=!1,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!1,this.peerFailCount=0,this.peerID=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=ot.ENUM_PROBE_STATE.probed,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.isUdpSuccess=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.answerSdpTime=0,this.streamConnectIP="",this.mediaSideInfos=[],this.lowMediaSideInfos=[],this.sideMediaConfig={isSEIStart:!1,SEIType:ot.ZegoSEIType.ZegoDefined,unregisterSeiFilter:"",uuidSend:!1,track:null},this.reportBeginTime=0,this.reportPublishingTime=0,this.reportPublishStateTime=0,this.isRePublish=!1,this.publishStat={},this.poorQualityNum=0,this.cachedGwNodesMode=st.CachedNodesUseMode.TheSameReUse,this.rtcPublishCount=0,this.stopReason="",this.signalTime=0,this._turnToTcp=!1,this.encodeLowVideoFrame=function(St,Pt){It.encodeFrame(St,Pt,!0)},this.encodeVideoFrame=function(St,Pt){It.encodeFrame(St,Pt,!1)},this.camera_status=2,this.mic_status=2,this.streamId=mt,this.logger=Et,this.dataReport=bt,this.qualityTimeInterval=Ct,this.streamCenter=Tt,this.stateCenter=wt,this.videoCodec=this.stateCenter.settingConfig.getSetting("publish_video_codec"),this.previewer=Rt,this.localStream=Rt.localStream,Rt.onAudioTrackChange=function(St){var Pt=It.peerConnection&&It.peerConnection.getSenders().find(function(Ot){var Ut;return((Ut=Ot.track)===null||Ut===void 0?void 0:Ut.kind)===St.kind});Pt?(Pt.replaceTrack(St),It.logger.info("zc.oatc remote audio track change success")):It.logger.warn("zc.oatc stream has not sender")},this.initStreamReport()}return yt.prototype.updateCBState=function(mt){var Et=this,bt=Object.keys(mt).some(function(Ct){return mt[Ct]!==Et.curCBState[Ct]});return bt&&(this.curCBState=mt),bt},Object.defineProperty(yt.prototype,"state",{get:function(){return this._state},set:function(mt){this.lastState=this._state,this._state=mt},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"lowStream",{get:function(){var mt;return(mt=this.previewer)===null||mt===void 0?void 0:mt.lowStream},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"iceStateDisConnect",{get:function(){return[ot.ENUM_PUBLISH_STATE_NEGO.iceClosed,ot.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,ot.ENUM_PUBLISH_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"isLastConnected",{get:function(){return this.lastState===ot.ENUM_PUBLISH_STATE.publishing},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"ip",{get:function(){var mt,Et;return(Et=(mt=this.gwNode)===null||mt===void 0?void 0:mt.split(":"))===null||Et===void 0?void 0:Et[0]},enumerable:!1,configurable:!0}),yt.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.I,{key:lt.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:ft.event,par:this.streamId},ft.event,!0),this.reportBeginTime=new Date().getTime()},yt.prototype.publishStateUpdateError=function(mt,Et,bt,Ct){this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  call ",this.streamId+" "+JSON.stringify(mt));var Tt=this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.H,{key:lt.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:""},lt.ZegoRTCLogEvent.kZegoTaskPublishStreamStateError.event);Tt.setAttributes({error:mt==null?void 0:mt.code,message:mt==null?void 0:mt.message}),Tt.end(),this.streamId&&this.onPublishStateUpdate(ot.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,mt,Et,bt,Ct),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  ended")},yt.prototype.netProbeToReDispatch=function(){this.publishStateUpdateError(lt.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor)},yt.prototype.resetPublish=function(){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH+"   "+this.streamId+" call"),this.state=ot.ENUM_PUBLISH_STATE.stop,this.publishEvent=!1,this.peerConnection==null&&this.peerConnection==null||(this.peerConnection.close(),this.peerConnection=null),this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.clearPublishQualityTimer(),this.clearCanvasTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.resetEncBitrate(),this.isUpdateSDP=!1},yt.prototype.clearPublishQualityTimer=function(){this.qualityTimer!=null&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0,this.poorQualityNum=0},yt.prototype.clearCanvasTimer=function(){this.canvasTimer!=null&&(clearInterval(this.canvasTimer),this.sideMediaConfig.track=null,this.canvasTimer=null)},yt.prototype.shouldSendCloseSession=function(){return this.state!=ot.ENUM_PUBLISH_STATE.stop&&this.state!=ot.ENUM_PUBLISH_STATE.waitingSessionRsp},yt.prototype.startPublish=function(mt,Et,bt,Ct,Tt){var wt,Rt,It,St,Pt,Ot,Ut,Bt,xt,At,Mt,Nt,$t,Ft=this;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+mt+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),mt){var jt;this.localStream=Et,this.mediaStreamConfig=Ct,this.channelCount=Ct.channelCount,this.publishOption=Tt||{},Tt!=null&&Tt.SEIType&&(this.sideMediaConfig.SEIType=Tt.SEIType),this.currentQuality.video.muteState=!((Rt=(wt=this.previewer)===null||wt===void 0?void 0:wt.videoTrack)===null||Rt===void 0)&&Rt.enabled?"0":"1",this.currentQuality.audio.muteState=this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&Ct&&(Ct.externalCapture||Ct.externalMediaStream)&&(this.localStream.onaddtrack=function(){var ir,rr,lr,nr;Ft.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+Ft.streamId+" Track added");var hr=[];!((ir=Ft.previewer)===null||ir===void 0)&&ir.videoTrack&&hr.push((rr=Ft.previewer)===null||rr===void 0?void 0:rr.videoTrack);var vr=Ft.localStream.getAudioTracks();if(hr.length>1){var yr=(lr=Ft.peerConnection)===null||lr===void 0?void 0:lr.getSenders().find(function(Cr){var or;return((or=Cr.track)===null||or===void 0?void 0:or.id)===Ft.localStream.getVideoTracks()[0].id});yr==null||yr.replaceTrack(hr[1]),Ft.localStream.removeTrack(hr[0])}else vr.length>1&&(yr=(nr=Ft.peerConnection)===null||nr===void 0?void 0:nr.getSenders().find(function(Cr){var or;return((or=Cr.track)===null||or===void 0?void 0:or.kind)===vr[1].kind}),yr==null||yr.replaceTrack(vr[1]),Ft.localStream.removeTrack(vr[0]))}),bt&&(this.videoInfo=bt),Tt&&Tt.videoCodec&&(this.videoCodec=Tt.videoCodec);var zt=(It=this.previewer)===null||It===void 0?void 0:It.previewType;switch(zt){case"camera":jt=this.stateCenter.settingConfig.getSetting("camera_video_bitrate",!0);break;case"screen":jt=this.stateCenter.settingConfig.getSetting("screen_video_bitrate",!0);break;case"custom":jt=this.stateCenter.settingConfig.getSetting("custom_video_bitrate",!0)}jt!==void 0&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+zt+" "+jt),this.videoInfo.bitRate=jt);var Yt=this.stateCenter.settingConfig.getSetting("bitrate_mode",!0);Yt&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting bitrate_mode "+Yt),this.videoInfo.startBitrate=Yt);var Kt=this.stateCenter.settingConfig.getSetting("publish_video_codec",!0);if(Kt&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting publish_video_codec "+Kt),this.videoCodec=Kt),typeof(Tt==null?void 0:Tt.isSEIStart)=="boolean"&&(this.sideMediaConfig.isSEIStart=Tt==null?void 0:Tt.isSEIStart),this.sideMediaConfig.isSEIStart){var er=at.ClientUtil.isSupportEncodedTransforms();this.videoCodec==="H264"&&er||(this.sideMediaConfig.isSEIStart=!1)}!((St=this.stateCenter.seiConfig)===null||St===void 0)&&St.unregisterSEIFilter&&(this.sideMediaConfig.unregisterSeiFilter=(Pt=this.stateCenter.seiConfig)===null||Pt===void 0?void 0:Pt.unregisterSEIFilter),this.stateCenter.reporter.spanSetAttributes({key:ht.event,par:this.streamId},{video_en_codec_id:ht.video_en_codec_id(this.videoCodec=="VP8"?2:0),audio_c_channel_count:ht.audio_c_channel_count(this.channelCount==2?2:1),audio_en_bps:ht.audio_en_bps(this.videoInfo.audioBitrate),aec_level:ht.aec_level(Ct.AEC==1?2:Ct.AEC==0?0:2),ans_level:ht.ans_level(Ct.ANS==1?2:Ct.ANS==0?0:2),agc:ht.agc(Ct.AGC==1||Ct.AGC!=0),video_activate:ht.video_activate(!!(!((Ut=(Ot=this.previewer)===null||Ot===void 0?void 0:Ot.videoTrack)===null||Ut===void 0)&&Ut.enabled)),audio_activate:ht.audio_activate(!!(!((xt=(Bt=this.previewer)===null||Bt===void 0?void 0:Bt.audioTrack)===null||xt===void 0)&&xt.enabled)),scenario:this.stateCenter.scenario}),this.reportSpan.setAttributes({room_id:ft.room_id((Mt=(At=this.streamCenter.publisherList[this.streamId])===null||At===void 0?void 0:At.room)===null||Mt===void 0?void 0:Mt.roomID),room_sid_string:ft.room_sid_string(($t=(Nt=this.streamCenter.publisherList[this.streamId])===null||Nt===void 0?void 0:Nt.room)===null||$t===void 0?void 0:$t.roomSessionID),max_retry_interval:ft.max_retry_interval(this.stateCenter.streamRetryTime),scenario:this.stateCenter.scenario,use_resource_type:ft.use_resource_type(["rtc"])}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout(function(){Ft.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" waiting timeout"),Ft.publishStateUpdateError(ht.error.kPublishNegoTimeoutError)},this.negoInterval)}else this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+mt+" streamId is null")},yt.prototype.activateSEIInsert=function(mt,Et){return new Promise(function(bt,Ct){bt(!1)})},yt.prototype.createSession=function(mt,Et){var bt,Ct,Tt,wt=this;this.sessionSeq=(0,ot.getSeq)();var Rt=this.streamId;this.streamCenter.testEnvironment==1&&(Rt="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var It=this.stateCenter.settingConfig.getSetting("gw_nodes");It&&It instanceof Array&&It.length>0&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(It)),this.gwNodeList=It,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var St=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);St&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting udp_or_tcp "+St),this._turnToTcp=St==="tcp"),this._turnToTcp&&(this.isPeer=!1);var Pt="",Ot=[];this.stateCenter.idName&&Ot.push("zguid="+this.stateCenter.idName);var Ut=((Ct=(bt=this.streamCenter.publisherList[this.streamId])===null||bt===void 0?void 0:bt.room)===null||Ct===void 0?void 0:Ct.roomID)||((Tt=this.stateCenter.roomList[0])===null||Tt===void 0?void 0:Tt.roomID);Ut&&Ot.push("zgrid="+Ut);var Bt=lt.ZegoRTCLogEvent.kZegoPublishCreateSession;if(this.isPeer){var xt=new Date().getTime();Ot.length>0&&(Pt=Ot.join("&"));var At=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:Rt,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:Et||mt.sdp,serverHost:this.gwNode,params:Pt},function(Nt,$t,Ft){var jt=new Date().getTime();wt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session time "+(jt-xt)),At.setAttributes({webrtc_sid:$t,sdp:Bt.sdp(Ft.sdp),gw_nodes:Bt.gw_nodes(Ft.gw_nodes),gw_nodes_ttl:Bt.gw_nodes(Ft.gw_nodes_ttl),gw_version:Bt.gw_version(Ft.gw_version)}),At.end(),wt.stateCenter.reporter.spanSetAttributes({key:ht.event,par:wt.streamId},{gw_version:ht.gw_version(Ft.gw_version)}),wt.stateNego!==ot.ENUM_PUBLISH_STATE_NEGO.iceConnected&&wt.getSpan(lt.ZegoRTCLogEvent.kZegoPublishIceConnected.event,wt.parentSpanKey,"",!0),wt.handleCreateSessionWithSdpResp(Nt,$t,Ft)},function(Nt,$t){if(wt.sessionSeq==$t){var Ft=Nt==ot.SEND_MSG_TIMEOUT?ht.error.kSessionTimeoutError:ht.error.kSessionRequestError;At.setAttributes({try_cnt:wt.peerFailCount}),wt.stateCenter.reporter.setError(At,Ft),wt.publishStateUpdateError(Ft)}else wt.logger.warn(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")})}else{Ot.length>0&&(Pt=Ot.join("&"));var Mt=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,0,0,Rt,this.publishOption&&this.publishOption.streamParams,this.gwNode,Pt,function(Nt,$t,Ft){Mt.setAttributes({webrtc_sid:Bt.webrtc_sid($t),gw_nodes:Bt.gw_nodes(Ft.gw_nodes),gw_nodes_ttl:Bt.gw_nodes(Ft.gw_nodes_ttl),gw_version:Bt.gw_version(Ft.gw_version)}),Mt.end(),wt.stateCenter.reporter.spanSetAttributes({key:ht.event,par:wt.streamId},{gw_version:ht.gw_version(Ft.gw_version)}),wt.handleCreateSessionResp(Nt,$t,Ft)},function(Nt,$t){if(wt.sessionSeq==$t){var Ft=Nt==ot.SEND_MSG_TIMEOUT?ht.error.kSessionTimeoutError:ht.error.kSessionRequestError;wt.stateCenter.reporter.setError(Mt,Ft),wt.publishStateUpdateError(Ft)}else wt.logger.warn(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")})}this.state=ot.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" called success"),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.start},yt.prototype.handleCreateSessionResp=function(mt,Et,bt){var Ct=bt.turn_server,Tt=Ct.split("?")[0]&&Ct.split("?")[0].slice(5),wt=this.streamCenter.server.split("?"),Rt=wt[1]&&wt[1].slice(2),It="webrtc://".concat(Tt,"/").concat(Rt,"/").concat(this.streamId);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:bt.session_id,url:It}),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" sessionId:"+bt.session_id),this.sessionSeq==mt){this.stateCenter.clientIP=bt.clientip?bt.clientip:this.stateCenter.clientIP;var St=0,Pt=new Date().getTime();this.reportBeginTime&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(St=Pt-this.reportBeginTime)),this.signalTime=St),this.answerSdpTime=Pt,bt.result!==0?(this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session failed "+bt.result),this.publishStateUpdateError(ht.error.kSessionRequestError)):(this.sessionId=bt.session_id,this.sessionToken=bt.session_token,this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session success "+this.sessionId),this.setGwNodes(bt,!1),this.onCreatePublishSessionSuccess(bt))}else this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" seq is not match.")},yt.prototype.handleCreateSessionWithSdpResp=function(mt,Et,bt){var Ct=this;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" sessionId:"+Et),this.sessionSeq==mt){this.stateCenter.clientIP=bt.clientip?bt.clientip:this.stateCenter.clientIP;var Tt=0,wt=new Date().getTime();if(this.reportBeginTime&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(Tt=wt-this.reportBeginTime)),this.signalTime=Tt),this.answerSdpTime=wt,bt.result!==0)this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session failed "+bt.result),this.publishStateUpdateError({code:ht.error.kSessionRequestError.code,message:ht.error.kSessionRequestError.message+" result:"+bt.result});else{this.sessionId=Et,this.sessionToken=bt.session_token,this.setGwNodes(bt,!1),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" get remote session success "+this.streamId);var Rt=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(It,St,Pt){if(Rt){var Ot=(performance.now()-Rt).toFixed(0);Rt=void 0,Ct.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(Ct.streamId,", cmd: CloseSessionPush, cost_time: ").concat(Ot))}Ct.onRecvCloseSession(It,St,Pt)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(It,St,Pt){Ct.onRecvResetSession(It,St,Pt)}),this.signal.registerPushCallback("PublishEventPush",this.sessionId,function(It,St,Pt){if(Rt){var Ot=(performance.now()-Rt).toFixed(0);Rt=void 0,Ct.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(Ct.streamId,", cmd: PublishEventPush, cost_time: ").concat(Ot))}Ct.onRecvPublishEvent(It,St,Pt)}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(It,St,Pt){Ct.onRecvClientInfo(It,St,Pt)}),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,function(It,St,Pt){Ct.onRecvUpdateMediaDescription(It,St,Pt)}),this.onGetRemoteOfferSuccess(bt.sdp)}}else this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")},yt.prototype.setGwNodes=function(mt,Et){var bt;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(mt==null?void 0:mt.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),((bt=mt.gw_nodes)===null||bt===void 0?void 0:bt.length)>0){var Ct=this.sortGwNodes(mt.gw_nodes,this.retryFailGwNodes,Et);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(Ct,mt.gw_nodes_ttl)}},yt.prototype.resetGwNodes=function(){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},yt.prototype.sortGwNodes=function(mt,Et,bt){var Ct=JSON.parse(JSON.stringify(mt));if(Et.forEach(function(wt){var Rt=Ct.indexOf(wt);Rt>=0&&(Ct.splice(Rt,1),Ct.push(wt))}),!bt){var Tt=Ct.findIndex(function(wt){return wt===mt[0]});Tt>0&&(Ct.splice(Tt,1),Ct.unshift(mt[0]))}return Ct},yt.prototype.handleDispatchedGwNodes=function(mt,Et){if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(mt)),Array.isArray(mt)){this.gwNodeList=mt.length>0?mt:this.gwNodeList,this.gwNode=mt.length>0?this.gwNodeList[0]:this.gwNode;var bt=Et===0?60:Et;this.gwNodesTTL=bt?new Date().getTime()+1e3*bt:this.gwNodesTTL,mt.length>0&&this.streamCenter.updateCachedGwNodesList(this,!0,mt,bt)}},yt.prototype.onCreatePublishSessionSuccess=function(mt){var Et=this,bt=ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.logger.info(bt+" "+this.streamId+" called");var Ct=[];if(mt.turn_server){var Tt=mt.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var wt=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(wt)&&(this.streamCenter.maxUdpFailNum=wt);var Rt=this.streamCenter,It=Rt.autoSwitchProtocol,St=Rt.maxUdpFailNum,Pt=Rt.udpFailNum;this.logger.info(bt+"  autoToTcp: ".concat(It,", udpFailNum: ").concat(Pt,", maxUdpFailNum: ").concat(St,".")),It&&!this._turnToTcp&&Pt>=St&&(this.logger.info(bt+" switch to tcp. "),this._turnToTcp=!0);var Ot=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);Ot&&(this.logger.info(bt+" setting udp_or_tcp "+Ot),this._turnToTcp=Ot==="tcp");var Ut=void 0,Bt=Tt.filter(function(Nt){return Nt.indexOf("udp")>-1}),xt=Tt.filter(function(Nt){return Nt.indexOf("tcp")>-1});Ut=this._turnToTcp?xt.length>0?xt:Bt.map(function(Nt){return Nt.replace("udp","tcp")}):Bt,this.logger.info(bt+" over tcp "+JSON.stringify(Ut)),Ct.push.apply(Ct,Ut)}mt.stun_server&&Ct.push(mt.stun_server);var At={iceTransportPolicy:"all",iceServers:[{urls:Ct,username:mt.turn_username,credential:mt.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(bt+" "+this.streamId+" username: "+mt.turn_username),this.logger.info(bt+" "+this.streamId+" credential: "+mt.turn_auth_key),this.createOffer(At);var Mt=performance.now();this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(Nt,$t,Ft){Et.onRecvCandidateInfo(Nt,$t,Ft)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(Nt,$t,Ft){if(Mt){var jt=(performance.now()-Mt).toFixed(0);Mt=void 0,Et.logger.info(bt+" ".concat(Et.streamId,", cmd: CloseSessionPush, cost_time: ").concat(jt))}Et.onRecvCloseSession(Nt,$t,Ft)}),this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(Nt,$t,Ft){Et.onRecvMediaDescription(Nt,$t,Ft)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(Nt,$t,Ft){Et.onRecvResetSession(Nt,$t,Ft)}),this.signal.registerPushCallback("PublishEventPush",this.sessionId,function(Nt,$t,Ft){if(Mt){var jt=(performance.now()-Mt).toFixed(0);Mt=void 0,Et.logger.info(bt+" ".concat(Et.streamId,", cmd: PublishEventPush, cost_time: ").concat(jt))}Et.onRecvPublishEvent(Nt,$t,Ft)}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(Nt,$t,Ft){Et.onRecvClientInfo(Nt,$t,Ft)}),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,function(Nt,$t,Ft){Et.onRecvUpdateMediaDescription(Nt,$t,Ft)}),this.logger.info(bt+" "+this.streamId+" call success")},yt.prototype.createOffer=function(mt){var Et,bt,Ct,Tt=this,wt=ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(mt),this.peerConnection.onicecandidate=function(Bt){Tt.onIceCandidate(Bt)},this.peerConnection.onsignalingstatechange=function(Bt){Tt.onConnectionStateChange(Bt)},this.peerConnection.oniceconnectionstatechange=function(Bt){Tt.onIceConnectionStateChange(Bt)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(Bt){Tt.logger.info(wt+" "+Tt.streamId+" data channel open"),Tt.dataChannelState=1},this.dataChannel.onclose=function(Bt){Tt.logger.error(wt+" "+Tt.streamId+" data channel close ")});var Rt=[],It=[];if(this.lowStream&&this.lowStream.getVideoTracks().forEach(function(Bt){var xt,At=(xt=Tt.peerConnection)===null||xt===void 0?void 0:xt.addTrack(Bt,Tt.lowStream);Tt.sideMediaConfig.isSEIStart&&At&&typeof At.createEncodedStreams=="function"&&Tt.createVideoSenderTransform(At,!0)}),this.localStream){if(this.localStream.getTracks().forEach(function(Bt){var xt,At=(xt=Tt.peerConnection)===null||xt===void 0?void 0:xt.addTrack(Bt,Tt.localStream);Tt.sideMediaConfig.isSEIStart&&At&&typeof At.createEncodedStreams=="function"&&(Bt.kind==="video"?Tt.createVideoSenderTransform(At):Bt.kind==="audio"&&Tt.createAudioSenderTransform(At))}),!(!((Et=this.previewer)===null||Et===void 0)&&Et.videoTrack)&&this.sideMediaConfig.isSEIStart){this.videoInfo.bitRate||(this.videoInfo.bitRate=50);var St=this.sideMediaConfig.track=this.addCanvasStreamVideoTrack(),Pt=this.peerConnection.addTrack(St,this.localStream);Pt&&St.kind=="video"&&this.createVideoSenderTransform(Pt)}!((bt=this.previewer)===null||bt===void 0)&&bt.videoTrack&&(Rt=[(Ct=this.previewer)===null||Ct===void 0?void 0:Ct.videoTrack]),It=this.localStream.getAudioTracks(),Rt.length>0&&this.logger.info(wt+" "+this.streamId+" video device: "+Rt[0].label),It.length>0&&this.logger.info(wt+" "+this.streamId+" audio device: "+It[0].label)}var Ot={offerToReceiveAudio:It.length>0?1:0,offerToReceiveVideo:Rt.length>0?1:0};this.logger.info(wt+" "+this.streamId+" createOffer: "+JSON.stringify(Ot));var Ut=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(Ot).then(function(Bt){Ut.setAttributes({sdp:lt.ZegoRTCLogEvent.kZegoPublishCreateOffer.sdp(Bt.sdp)}),Ut.end(),Tt.onCreateOfferSuccess(Bt)},function(Bt){Tt.logger.error(wt+" "+Tt.streamId+" create offer error "+Bt.toString()),Tt.stateCenter.reporter.setError(Ut,{code:ht.error.kCreateOfferError.code,message:Bt.toString()}),Tt.publishStateUpdateError(ht.error.kCreateOfferError,!0)})},yt.prototype.sendSEI=function(mt){var Et,bt;if(this.videoCodec!=="H264")return this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" code not support"),!1;if(!this.sideMediaConfig.isSEIStart)return this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" not enable to send sei"),!1;var Ct=(Et=this.peerConnection)===null||Et===void 0?void 0:Et.getSenders().filter(function(Tt){return Tt.track&&Tt.track.kind==="video"});return Ct&&typeof((bt=Ct[0])===null||bt===void 0?void 0:bt.createEncodedStreams)!="function"?(this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" browser not support"),!1):this.sideMediaConfig.SEIType==ot.ZegoSEIType.UserUnregister&&mt.byteLength<=16?(this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" inData size should greater than 16"),!1):this.mediaSideInfos.length>=10?(this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" side info count limit"),!1):(this.mediaSideInfos.push(mt.buffer),this.lowStream&&this.lowMediaSideInfos.push(mt.buffer),!0)},yt.prototype.createAudioSenderTransform=function(mt){var Et=mt.createEncodedStreams(),bt=new TransformStream({transform:this.encodeAudioFrame});Et.readable.pipeThrough(bt).pipeTo(Et.writable)},yt.prototype.encodeAudioFrame=function(mt,Et){Et.enqueue(mt)},yt.prototype.createVideoSenderTransform=function(mt,Et){Et===void 0&&(Et=!1);var bt=mt.createEncodedStreams(),Ct=new TransformStream({transform:Et?this.encodeLowVideoFrame:this.encodeVideoFrame});bt.readable.pipeThrough(Ct).pipeTo(bt.writable)},yt.prototype.encodeSEINalu=function(mt){var Et=mt.byteLength,bt=parseInt(Et/255),Ct=Et%255,Tt=1+(bt+1)+Et+1,wt=new ArrayBuffer(Tt),Rt=new DataView(wt),It=0;Rt.setUint8(It++,this.sideMediaConfig.SEIType===ot.ZegoSEIType.UserUnregister?5:243);for(var St=0;St<bt;St++)Rt.setUint8(It++,255);Rt.setUint8(It++,Ct);var Pt=new DataView(mt);for(St=0;St<(mt==null?void 0:mt.byteLength);St++)Rt.setInt8(It++,Pt.getInt8(St));Rt.setInt8(It++,128);var Ot=[];return{rbspView:Rt,ebspLength:Tt+Ot.length,ebspPreventProcessPos:Ot.map(function(Ut,Bt){return Ut+Bt})}},yt.prototype.encodeFrame=function(mt,Et,bt){var Ct=bt?this.lowMediaSideInfos:this.mediaSideInfos;if(Ct.length>0){for(var Tt=new DataView(mt.data),wt=[],Rt=0,It=0;It<Ct.length;It++){var St=this.encodeSEINalu(Ct[It]);Rt+=5+(zt=St.ebspLength),wt.push(St)}bt?this.lowMediaSideInfos=[]:this.mediaSideInfos=[];for(var Pt=new ArrayBuffer(Rt+mt.data.byteLength),Ot=new DataView(Pt),Ut=0,Bt=new pt.H264Parser(Tt),xt=0,At=!1,Mt=!1;Bt.NextNalu();){var Nt=31&Tt.getUint8(Bt.nalu_start+Bt.start_code_size);if(Nt==7)At=!0,xt+=Bt.nalu_size;else if(Nt==8)Mt=!0,xt+=Bt.nalu_size;else if(Nt==9)continue;if(At&&Mt)break}for(var $t=0;$t<xt;$t++)Ot.setInt8(Ut++,Tt.getInt8($t));for(It=0;It<wt.length;It++){var Ft=wt[It],jt=Ft.rbspView,zt=Ft.ebspLength,Yt=Ft.ebspPreventProcessPos;Ot.setUint8(Ut++,0),Ot.setUint8(Ut++,0),Ot.setUint8(Ut++,0),Ot.setUint8(Ut++,1),Ot.setUint8(Ut++,6);for(var Kt=0,er=0;er<zt;er++)Yt.indexOf(er)>-1?(Ot.setInt8(Ut++,3),Kt++):Ot.setInt8(Ut++,jt.getInt8(er-Kt))}for($t=xt;$t<mt.data.byteLength;$t++)Ot.setInt8(Ut++,Tt.getInt8($t));mt.data=Pt}Et.enqueue(mt)},yt.prototype.onCreateOfferSuccess=function(mt,Et,bt,Ct){var Tt,wt=this;Et&&(this.isUpdateSDP=!0,Ct&&(this.updateSDPCallBack=Ct)),this.videoInfo.bitRate>0&&(mt.sdp=this.updateBandwidthRestriction(mt.sdp,this.videoInfo.bitRate)),mt.sdp=mt.sdp.replace(/sendrecv/g,"sendonly");var Rt=mt.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?mt.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(Rt){var It=Rt.replace(/sendonly/,"sendrecv");mt.sdp=mt.sdp.replace(Rt,It)}mt.sdp=mt.sdp.replace(/useinbandfec=\d+/,(this.videoInfo.audioBitrate?"maxaveragebitrate="+this.videoInfo.audioBitrate:"")+(this.videoInfo.channelCount===2?";stereo=1":"")),this.localSdpOrder=mt.sdp.match(/m=(.\w*)\s/g)||[],this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),mt.sdp=it.SdpUtil.getSDPByVideDecodeType(mt.sdp,this.videoCodec),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+mt.sdp.substr(0,mt.sdp.length/2)),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+mt.sdp.substr(mt.sdp.length/2));var St=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.event,this.parentSpanKey);St.setAttributes({sdp:lt.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.sdp(mt.sdp)}),(Tt=this.peerConnection)===null||Tt===void 0||Tt.setLocalDescription(mt).then(function(){St.end(),wt.onSetLocalDescriptionSuccess(mt,bt)},function(Pt){wt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+wt.streamId+" error "+Pt.toString()),wt.stateCenter.reporter.setError(St,{code:ht.error.kSetLocalDescError.code,message:Pt.toString()}),wt.publishStateUpdateError(ht.error.kSetLocalDescError,!0)})},yt.prototype.updateBandwidthRestriction=function(mt,Et){var bt="AS";return this.stateCenter.browser==="firefox"&&(Et=1e3*(Et>>>0),bt="TIAS"),mt=mt.indexOf("b="+bt+":")===-1?mt.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+bt+":"+Et+`\r
`):(mt=mt.replace(new RegExp("b="+bt+`:.*\r
`,"g"),"b="+bt+":"+Et+`\r
`)).replace("b="+bt+":"+Et+`\r
`,"")},yt.prototype.onSetLocalDescriptionSuccess=function(mt,Et){var bt,Ct,Tt,wt,Rt=this;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),!this.isUpdateSDP&&(this.state=ot.ENUM_PUBLISH_STATE.waitingOfferRsp),Et&&(this.videoInfo=nt(nt({},this.videoInfo),Et));var It=!1,St=(bt=this.previewer)===null||bt===void 0?void 0:bt.previewType,Pt=this.stateCenter.settingConfig;St==="camera"?It=Pt.getSetting("camera_hard_encode"):St==="screen"?It=Pt.getSetting("hardware_encode"):St==="custom"&&(It=Pt.getSetting("custom_hard_encode"));var Ot=!It;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" ".concat((Ct=this.previewer)===null||Ct===void 0?void 0:Ct.previewType," software encode: ").concat(Ot,", "));var Ut=it.SdpUtil.getSDPByVideDecodeType(mt.sdp,this.videoCodec,Ot,this.stateCenter.engineConfig.encodecSelectionMode),Bt=(Tt=this.previewer.videoTrack)===null||Tt===void 0?void 0:Tt.getSettings(),xt=(Bt==null?void 0:Bt.width)||this.videoInfo.width,At=(Bt==null?void 0:Bt.height)||this.videoInfo.height,Mt=(Bt==null?void 0:Bt.frameRate)||this.videoInfo.frameRate,Nt={sdp:Ut,width:isNaN(xt)?100:xt,height:isNaN(At)?100:At,frameRate:isNaN(Mt)?15:Mt,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:Math.floor(((wt=this.videoInfo)===null||wt===void 0?void 0:wt.keyFrameInterval)||2)};if(this.offerSeq=(0,ot.getSeq)(),this.isUpdateSDP){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" update sdp");var $t=nt(nt({},Nt),{seq:this.sessionSeq,peerID:this.peerID,type:0});this.signal.sendMediaDescUpdateReq(this.offerSeq,this.sessionId,$t,function(jt,zt,Yt){},function(jt,zt){Rt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+Rt.streamId+" update sdp failed"),Rt.updateSDPCallBack&&Rt.updateSDPCallBack(-1),Rt.publishStateUpdateError(jt==ot.SEND_MSG_TIMEOUT?ht.error.kUpdateMediaDescriptionTimeOut:ht.error.kUpdateMediaDescriptionError)})}else if(this.isPeer)this.createSession(mt,Ut);else{var Ft=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,Nt,function(jt,zt,Yt){Ft.setAttributes({webrtc_sid:lt.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.webrtc_sid(zt),mediaDescription:{width:Nt.width,height:Nt.height,frameRate:Nt.frameRate,video_min_kpbs:Nt.video_min_kpbs,video_max_kpbs:Nt.video_max_kpbs,audio_kpbs:Nt.audio_kpbs,keyframe_intv:Nt.keyframe_intv},sdp:Nt.sdp}),Ft.end(),Rt.offerSeq==jt&&Rt.sessionId==zt?(Rt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+Rt.streamId+" send success"),Rt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+Rt.streamId+" send success stateNego:waiterAnswer"),Rt.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.waiterAnswer,Rt.state=ot.ENUM_PUBLISH_STATE.waitingServerAnswer):Rt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+Rt.streamId+" seq or sessionId is not equal")},function(jt,zt){Rt.stateCenter.reporter.setError(Ft,{code:ht.error.kMediaDescError.code,message:jt.toString()}),Rt.publishStateUpdateError(ht.error.kMediaDescError)}),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" call success")}},yt.prototype.onRecvUpdateMediaDescription=function(mt,Et,bt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received"),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendUpdateMediaDescAck(mt,this.sessionId,0,this.peerID),bt.type==1?this.onGetRemoteOfferSuccess(bt.sdp):this.publishStateUpdateError(ht.error.kMediaDescError)},yt.prototype.onRecvMediaDescription=function(mt,Et,bt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received");var Ct=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.event,this.parentSpanKey);Ct.setAttributes({sdp:lt.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.sdp(bt.sdp)}),Ct.end(),this.state==ot.ENUM_PUBLISH_STATE.waitingServerAnswer?(this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.waitingCandidate,this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendMediaDescAck(mt,this.sessionId,0),bt.type==1?this.onGetRemoteOfferSuccess(bt.sdp):this.publishStateUpdateError(ht.error.kMediaDescError)):this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},yt.prototype.onGetRemoteOfferSuccess=function(mt){var Et,bt,Ct,Tt=this;this.videoInfo.audioBitrate&&this.videoInfo.audioBitrate!==48e3&&(mt=mt.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=mt.match(/m=(.\w*)\s/g)||[],this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+NaN+this.remoteSdpOrder.join("")),this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var wt=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(wt)&&(this.streamCenter.maxUdpFailNum=wt);var Rt=this.streamCenter,It=Rt.autoSwitchProtocol,St=Rt.maxUdpFailNum,Pt=Rt.udpFailNum;this.logger.info("zp.oro.0  autoToTcp: ".concat(It,", udpFailNum: ").concat(Pt,", maxUdpFailNum: ").concat(St,".")),It&&!this._turnToTcp&&Pt>=St&&(this.logger.info("zp.oro.0 switch to tcp."),this._turnToTcp=!0);var Ot=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);if(Ot&&(this.logger.info("zp.oro.0 setting udp_or_tcp "+Ot),this._turnToTcp=Ot==="tcp"),this._turnToTcp&&((Et=mt.match(/candidate.*/g))===null||Et===void 0||Et.forEach(function(nr){var hr=nr.replace(/udp/,"tcp");hr.includes(" tcptype ")||(hr=hr.replace(" typ host "," typ host tcptype passive ")),mt=mt.replace(nr,hr)})),this.logger.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length){var Ut=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(mt)[0].replace(this.remoteSdpOrder[0],""),Bt=[],xt="";this.localSdpOrder.forEach(function(nr){var hr=Tt.remoteSdpOrder.findIndex(function(Cr){return Cr==nr}),vr=new RegExp(nr+"[\\s\\S]*"+(Tt.remoteSdpOrder[hr+1]||"")).exec(mt)[0].replace(Tt.remoteSdpOrder[hr+1],""),yr=/a=mid:(\w)/.exec(vr)[1];Bt.push(yr),xt+=vr||""}),mt=Ut.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+Bt.join(" "))+xt,this.localSdpOrder=[],this.remoteSdpOrder=[]}var At=mt.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/);if(this.stateCenter.browser=="chrome"){var Mt=0,Nt=0;if(this.videoInfo.bitRate&&this.videoInfo.startBitrate==="target"&&(Mt=this.videoInfo.bitRate),this.videoInfo.minBitrate)Nt=this.videoInfo.minBitrate;else if(this.previewer.previewType==="screen"){var $t=function(nr){var hr=0,vr=nr.frameRate,yr=nr.width*nr.height*(vr<=30?vr:30);return typeof yr=="number"?(hr=yr<=3888e3?200:yr<=6912e3?400:yr<=15552e3?700:yr<=27648e3?1e3:2e3)>nr.bitRate&&(hr=nr.bitRate):hr=parseInt(.6*nr.bitRate+""),{minBitrate:hr,resolution:yr}}(this.videoInfo);Nt=$t.minBitrate,this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" resolution: ".concat($t.resolution,", min bitrate: ").concat(Nt))}var Ft=[];if(Nt&&Ft.push("x-google-min-bitrate=".concat(Nt)),Mt&&Ft.push("x-google-start-bitrate=".concat(Mt)),At!==null&&Ft.length){var jt=At[3],zt=jt;zt=jt.indexOf("apt=")!==-1?"a=fmtp:96 "+Ft.join(";")+`
`+jt:"".concat(jt,";").concat(Ft.join(";")),mt=mt.replace(jt,zt)}}if(this.videoInfo.bitRate>0){var Yt="AS",Kt=this.videoInfo.bitRate;this.stateCenter.browser==="firefox"&&(Kt=1e3*(Kt>>>0),Yt="TIAS");var er=/b=AS.*(\r\n|\n)/.test(mt);mt=er?mt.replace(/AS:(\d+)/,Yt+":"+Kt):mt.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=".concat(Yt,":").concat(Kt,`
`));var ir=(bt=this.peerConnection)===null||bt===void 0?void 0:bt.getSenders().filter(function(nr){return nr.track&&nr.track.kind==="video"});ir==null||ir.forEach(function(nr){var hr,vr,yr,Cr,or,ur;if(nr&&nr.getParameters&&nr.setParameters){var pr=nr.getParameters();if(pr.encodings&&pr.encodings.length!=0||(pr.encodings=[{}]),((hr=nr.track)===null||hr===void 0?void 0:hr.id)==((vr=Tt.lowStream)===null||vr===void 0?void 0:vr.getVideoTracks()[0].id)){var Er=(yr=Tt.previewer)===null||yr===void 0?void 0:yr.lowStreamConfig.bitRate;Er&&(pr.encodings[0].maxBitrate=1e3*Er)}else{pr.encodings[0].maxBitrate=1e3*Tt.videoInfo.bitRate;var Sr=Tt.lastPublishStats.frameWidth,Ht=((or=(Cr=Tt.previewer)===null||Cr===void 0?void 0:Cr.cameraMaxResolution)===null||or===void 0?void 0:or.maxWidth)||0,qt=(ur=Tt.previewer.videoTrack)===null||ur===void 0?void 0:ur.getSettings().width,fr=Sr?Math.min(Ht,Sr):Ht;if(Ht&&qt){var cr=Math.max(fr/qt,1);pr.encodings[0].scaleResolutionDownBy=cr}}nr.setParameters(pr)}})}this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" remoteSdp:",mt);var rr={type:"answer",sdp:mt,toJSON:function(){}},lr=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.event,this.parentSpanKey);lr.setAttributes({sdp:lt.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.sdp(rr.sdp),webrtc_sid:lt.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.webrtc_sid(this.sessionId)}),(Ct=this.peerConnection)===null||Ct===void 0||Ct.setRemoteDescription(new RTCSessionDescription(rr)).then(function(){Tt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+Tt.streamId+" set success"),lr.end(),Tt.stateNego==ot.ENUM_PUBLISH_STATE_NEGO.iceConnected&&Tt.updateSDPCallBack&&(Tt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+Tt.streamId+" update sdp success"),Tt.updateSDPCallBack(0),Tt.updateSDPCallBack=void 0,Tt.isUpdateSDP=!1)},function(nr){Tt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+Tt.streamId+" failed: "+nr.toString()),lr.setAttributes({error:ht.error.kSetRemoteDescError.code,message:nr.toString()}),lr.end(),Tt.publishStateUpdateError(ht.error.kSetRemoteDescError,!0)}),this.state=ot.ENUM_PUBLISH_STATE.waitingServerICE,this.logger.debug(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" call success")},yt.prototype.onIceConnectionStateChange=function(mt){var Et=this;if(this.state!=ot.ENUM_PUBLISH_STATE.stop&&this.peerConnection!=null){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var bt=this.getSpan(lt.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);if(bt.setAttributes({ice_state:lt.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),this.peerConnection.iceConnectionState==="connected"){if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" connected state "+this.state),this.reportBeginTime){var Ct=new Date().getTime()-this.reportBeginTime;this.reportSpan.setAttributes({publish_begin_time:ft.publish_begin_time(Ct)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:lt.ZegoRTCLogEvent.kZegoPublishIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.iceConnected,this.answerSdpTime){var Tt=new Date().getTime()-this.answerSdpTime;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+Tt)}this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout(function(){var wt;Et.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats state "+Et.state),Et.state!==ot.ENUM_PUBLISH_STATE.publishing&&((wt=Et.peerConnection)===null||wt===void 0||wt.getStats().then(function(Rt){Et.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats suc"),Rt.size>0&&Et.publishSuccess()}))},1e3))}else this.peerConnection.iceConnectionState==="closed"?(bt.end(),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="failed"?(bt.end(),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="disconnected"&&(bt.end(),this.logger.warn(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected "),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout(function(){Et.checkPublishConnectionFailedState("disconnected")},this.iceDisconnectedMaxTime)))}},yt.prototype.onIceCandidate=function(mt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+mt.candidate),mt.candidate&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+mt.candidate.candidate),this.state<ot.ENUM_PUBLISH_STATE.connecting||this.state==ot.ENUM_PUBLISH_STATE.stop?this.candidateInfo.push({candidate:mt.candidate.candidate,sdpMid:mt.candidate.sdpMid,sdpMLineIndex:mt.candidate.sdpMLineIndex}):this.sendCandidateInfo([{candidate:mt.candidate.candidate,sdpMid:mt.candidate.sdpMid,sdpMLineIndex:mt.candidate.sdpMLineIndex}]))},yt.prototype.sendCandidateInfo=function(mt){var Et=this;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(mt=mt.filter(function(Ct){return Ct.candidate.indexOf("relay")>0}))||mt.length<1)this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var bt=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.event,this.parentSpanKey);bt.setAttributes({candidate_info:lt.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.candidate_info(mt)}),this.stateNego!==ot.ENUM_PUBLISH_STATE_NEGO.iceConnected&&(this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.sendCandidate),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,ot.getSeq)(),this.sessionId,mt,function(Ct,Tt,wt){Et.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+Et.streamId+" send success"),bt.end()},function(Ct,Tt){Et.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+Et.streamId+" failed to send: "+Ct.toString()),Et.stateCenter.reporter.setError(bt,{code:ht.error.kCandidateError.code,message:Ct.toString()}),Et.publishStateUpdateError(ht.error.kCandidateError)})}},yt.prototype.onConnectionStateChange=function(mt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+mt.target.signalingState),this.state!=ot.ENUM_PUBLISH_STATE.stop&&this.peerConnection!=null&&mt.target.signalingState==="closed"&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=ot.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState))},yt.prototype.onRecvCandidateInfo=function(mt,Et,bt){var Ct,Tt=this;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "+JSON.stringify(bt.infos));var wt=this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.event,this.parentSpanKey);if(wt.setAttributes({candidate_info:lt.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.candidate_info(bt.infos)}),wt.end(),this.state==ot.ENUM_PUBLISH_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(mt,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var Rt=0;Rt<bt.infos.length;Rt++){var It={sdpMid:bt.infos[Rt].sdpMid,sdpMLineIndex:bt.infos[Rt].sdpMLineIndex,candidate:bt.infos[Rt].candidate};this.logger.debug(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+""+this.streamId+" candidate "+It.candidate),(Ct=this.peerConnection)===null||Ct===void 0||Ct.addIceCandidate(new RTCIceCandidate(It)).then(function(){Tt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+Tt.streamId+" add success")},function(St){Tt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+Tt.streamId+" add error "+St.toString()),Tt.publishStateUpdateError(ht.error.kCandidateError,!0)})}this.state=ot.ENUM_PUBLISH_STATE.connecting,this.getSpan(lt.ZegoRTCLogEvent.kZegoPublishIceConnected.event,this.parentSpanKey,"",!0).setAttributes({webrtc_sid:this.sessionId})}else this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},yt.prototype.onRecvCloseSession=function(mt,Et,bt){var Ct=this;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(bt));var Tt=this.getSpan(lt.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.event,lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);Tt.setAttributes({err_info:lt.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.err_info(bt.err_info||""),reason_info:bt==null?void 0:bt.reason}),Tt.end(),this.stateCenter.reporter.spanSetAttributes({key:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{denied_info:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.denied_info(bt.err_info),stop_reason:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(mt,this.sessionId,0);var wt=bt.err_info?JSON.parse(bt.err_info.toLowerCase()):{},Rt=wt.action?wt.action:null,It=1*bt.reason,St=JSON.parse(JSON.stringify(ht.error.kPublishSessionClosedError));St.message+=" reason:".concat(It," ").concat(Rt?" action:"+Rt:""," ").concat(wt!=null&&wt.err?" err:"+(wt==null?void 0:wt.err):""),St.message+=";".concat((0,ut.translate)(It,Rt,wt==null?void 0:wt.err)),wt.err===1011&&(St=ht.error.kMediaServerForbidError),wt.err===1014&&(St=ht.error.kPublishTokenExpiredError),this.negoTimer&&clearTimeout(this.negoTimer);var Pt=!([4,8,10,11,12,14,18,24,26,27,28].includes(It)||[2,3,4,5,6].includes(Rt)),Ot=!1;if(!this._turnToTcp){if([8,10].includes(It)||[18,15].includes(It)&&Rt===2&&[3001,3002].includes(wt.err)){this.streamCenter.udpFailNum++;var Ut=this.streamCenter;Ut.autoSwitchProtocol&&Ut.udpFailNum>=Ut.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),Ot=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var Bt=this.gwNodeList.findIndex(function(At){return At==Ct.gwNode})===this.gwNodeList.length-1,xt=[3001,3002,3003,3004,3005,3006,3007,3008].includes(wt.err);Bt&&xt&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.publishStateUpdateError(St,Pt,wt,Ot)},yt.prototype.onRecvResetSession=function(mt,Et,bt){if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),this.getSpan(lt.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event).end(),Et==this.sessionId){this.signal.sendCloseSessionAck(mt,this.sessionId,0);var Ct=ht.error.kPublishSessionClosedError;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(Ct)}else this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},yt.prototype.onRecvPublishEvent=function(mt,Et,bt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT+" "+this.streamId+" received");var Ct=this.getSpan(lt.ZegoRTCLogEvent.kZegoRTCPublishEvent.event,this.parentSpanKey,lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);Ct.setAttributes({event_state:lt.ZegoRTCLogEvent.kZegoRTCPublishEvent.event_state(bt.event),webrtc_sid:Et}),Ct.end(),this.publishEvent=!0,this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null),this.stateNego===ot.ENUM_PUBLISH_STATE_NEGO.iceConnected&&bt.event==0&&this.publishSuccess()},yt.prototype.onRecvClientInfo=function(mt,Et,bt){this.stateCenter.clientIP!==bt.clientip&&this.logger.warn(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+bt.clientip),this.stateCenter.clientIP=bt.clientip,this.peerID=bt.peer_id,this.streamConnectIP=bt.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.sideMediaConfig.isSEIStart&&this.sideMediaConfig.SEIType==ot.ZegoSEIType.UserUnregister&&this.sendSEIUUID();var Ct=this.previewer;if(Ct&&Ct.activateSEIConfig!==null){var Tt=Ct==null?void 0:Ct.activateSEIConfig;this.activateSEIInsert(Tt.action,Tt.infoType)}},yt.prototype.sendSEIUUID=function(){var mt=this;this.signal.gw.mediaStreamSEIUUIDReq((0,ot.getSeq)(),this.sessionId,this.peerID,this.sideMediaConfig.unregisterSeiFilter).then(function(Et){var bt;((bt=Et==null?void 0:Et.usr_sei_filter)===null||bt===void 0?void 0:bt.result)==0&&(mt.sideMediaConfig.uuidSend=!0)}).catch(function(Et){console.error()})},yt.prototype.checkPublishConnectionFailedState=function(mt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" streamID "+this.streamId," state "+this.state+" connectionState "+mt),this.publishStateUpdateError(ht.error.kMediaConnectionError)},yt.prototype.setPublishQualityTimer=function(){var mt=this;this.qualityTimer==null&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval(function(){mt.peerConnectionGetStats()},this.qualityTimeInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:new Date().getTime(),audioTime:new Date().getTime(),time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=(0,ot.getSeq)(),this.qualityCount=0)},yt.prototype.getConnectionStatsPromiseList=function(){var mt=this,Et=[];return this.localStream.getTracks().forEach(function(bt){mt.peerConnection&&Et.push(mt.peerConnection.getStats(bt))}),Et},yt.prototype.peerConnectionGetStats=function(){var mt=this;if(this.peerConnection){var Et=this.getConnectionStatsPromiseList();this.stateCenter.browser=="chrome"&&Et.push(new Promise(function(bt,Ct){var Tt;(Tt=mt.peerConnection)===null||Tt===void 0||Tt.getStats(function(wt){return bt(wt)},function(wt){return Ct(wt)})})),Promise.all(Et).then(function(bt){bt.length!==0&&mt.getPublishStats(bt.filter(function(Ct){return Ct instanceof RTCStatsReport}),bt[bt.length-1]instanceof RTCStatsReport?null:bt[bt.length-1])}).catch(function(bt){mt.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+mt.streamId+" getStats error "+bt.toString())})}},yt.prototype.getPublishStats=function(mt,Et){var bt,Ct,Tt,wt=this;if(mt){for(var Rt,It=document.querySelectorAll("video, audio"),St=0;St<It.length;St++)It[St].srcObject===this.localStream&&(Rt=It[St]);var Pt=this.streamCenter.checkPreview(this.localStream),Ot={scenario:this.stateCenter.scenario,sampleTimeWindow:this.qualityTimeInterval,audioCodec:"opus",audioTargetBitrate:this.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.videoInfo.bitRate||0,videoTargetFPS:this.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioInputLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,sendLevel:0,samplingRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,qualityLimitationReason:"",codecImplementationName:"",videoMuteState:!((bt=Pt==null?void 0:Pt.videoTrack)===null||bt===void 0)&&bt.enabled?"0":"1",audioMuteState:this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",soundLevel:(Ct=this.previewer)===null||Ct===void 0?void 0:Ct.soundLevel,muted:Rt?Rt.muted:void 0,paused:Rt?Rt.paused:void 0,volume:Rt?Rt.volume:void 0,sinkId:Rt?Rt.sinkId:void 0},Ut=this.lastPublishStats.time,Bt=0,xt=0,At=0,Mt=0,Nt=0,$t=0;mt.forEach(function(Kt){return Kt.forEach(function(er){if((er.type=="outbound-rtp"||er.type=="ssrc"&&er.bytesSent!=null)&&er.mediaType=="audio")Ut!=0&&(Ot.audioBitrate=8*(er.bytesSent-wt.lastPublishStats.audioBytesSent)/(er.timestamp-Ut),er.retransmittedPacketsSent=er.retransmittedPacketsSent||0,er.packetsSent=er.packetsSent||0,Ot.audioFPS=(er.packetsSent-(er.retransmittedPacketsSent-wt.lastPublishStats.audioRetransmittedPacketsSent)-wt.lastPublishStats.audioPacketsSent)/(er.timestamp-Ut)*1e3||0,At=(er.retransmittedPacketsSent-wt.lastPublishStats.audioRetransmittedPacketsSent)/(er.packetsSent-wt.lastPublishStats.audioPacketsSent)),Ot.audioBitrate<0&&(Ot.audioBitrate=0),wt.lastPublishStats.audioBytesSent=er.bytesSent,wt.lastPublishStats.time=er.timestamp,wt.lastPublishStats.audioPacketsSentTimeStamp=er.packetsSent-wt.lastPublishStats.audioPacketsSent,wt.lastPublishStats.audioPacketsSent=er.packetsSent,wt.lastPublishStats.audioRetransmittedPacketsSent=er.retransmittedPacketsSent;else if((er.type=="outbound-rtp"||er.type=="ssrc"&&er.bytesSent!=null)&&er.mediaType=="video")Ot.isHardwareEncode=function(nr){if(nr){var hr=nr==null?void 0:nr.toLocaleLowerCase();if(hr!=="unknown")return hr!=="openh264"&&hr!=="libvpx"}}(er.encoderImplementation),Ut!=0&&(Ot.videoBitrate=8*(er.bytesSent-wt.lastPublishStats.videoBytesSent)/(er.timestamp-Ut),Ot.videoFPS=1e3*(er.framesEncoded-wt.lastPublishStats.framesEncoded)/(er.timestamp-Ut),Mt=(er.retransmittedPacketsSent-wt.lastPublishStats.videoRetransmittedPacketsSent)/(er.packetsSent-wt.lastPublishStats.videoPacketsSent)),Ot.videoBitrate<0&&(Ot.videoBitrate=0),Ot.videoFPS<0&&(Ot.videoFPS=0),Ot.nackCount=er.nackCount,Ot.pliCount=er.pliCount,Ot.qualityLimitationReason=er.qualityLimitationReason,wt.lastPublishStats.videoBytesSent=er.bytesSent,wt.lastPublishStats.framesEncoded=er.framesEncoded,wt.lastPublishStats.time=er.timestamp,wt.lastPublishStats.videoPacketsSentTimeStamp=er.packetsSent-wt.lastPublishStats.videoPacketsSent,wt.lastPublishStats.videoPacketsSent=er.packetsSent,wt.lastPublishStats.videoRetransmittedPacketsSent=er.retransmittedPacketsSent;else if(er.type=="remote-inbound-rtp"&&er.kind=="video"){er.packetsLost>0&&(Ot.videoPacketsLost=er.packetsLost);var ir=er.packetsLost-wt.lastPublishStats.videoPacketsLost;Ot.videoPacketsLostRate=ir>0?ir/wt.lastPublishStats.videoPacketsSentTimeStamp:0,er.packetsLost>0&&(wt.lastPublishStats.videoPacketsLost=er.packetsLost),wt.lastPublishStats.videoTime=er.timestamp,xt=1e3*er.roundTripTime,$t=er.jitter}else if(er.type=="remote-inbound-rtp"&&er.kind=="audio"){er.packetsLost>0&&(Ot.audioPacketsLost=er.packetsLost);var rr=er.packetsLost-wt.lastPublishStats.audioPacketsLost;Ot.audioPacketsLostRate=rr>0?rr/wt.lastPublishStats.audioPacketsSentTimeStamp:0,er.packetsLost>0&&(wt.lastPublishStats.audioPacketsLost=er.packetsLost),wt.lastPublishStats.audioTime=er.timestamp,Bt=1e3*er.roundTripTime,Nt=er.jitter}else if(er.type=="media-source"&&(er.kind=="audio"||er.id.toLowerCase().indexOf("audio")>=0))Ot.audioLevel=er.audioLevel||0,Ot.sendLevel=er.totalAudioEnergy,Ot.audioInputLevel=32767*er.totalAudioEnergy,Ot.samplingRate=er.totalSamplesDuration;else if(er.type=="track"&&(er.kind=="video"||er.id.indexOf("video")>=0||er.frameWidth)){if(Ot.frameHeight=er.frameHeight,Ot.frameWidth=er.frameWidth,Ut===0||wt.lastPublishStats.frameHeight===er.frameHeight&&wt.lastPublishStats.frameWidth===er.frameWidth)Ut===0&&(wt.lastPublishStats.frameHeight=er.frameHeight,wt.lastPublishStats.frameWidth=er.frameWidth);else{var lr=wt.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.H,{key:lt.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:wt.streamId},{key:""},lt.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event);lr.setAttributes({webrtc_sid:lt.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.webrtc_sid(wt.sessionId),w:lt.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(er.frameWidth),h:lt.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(er.frameHeight)}),lr.end(),wt.lastPublishStats.frameHeight=er.frameHeight,wt.lastPublishStats.frameWidth=er.frameWidth}Ut!=0&&(Ot.videoTransferFPS=1e3*(er.framesSent-wt.lastPublishStats.framesSent)/(er.timestamp-Ut)),Ot.videoTransferFPS<0&&(Ot.videoTransferFPS=0),wt.lastPublishStats.framesSent=er.framesSent}else er.type=="candidate-pair"&&(er.totalRoundTripTime!=null&&(Ot.totalRoundTripTime=er.totalRoundTripTime),er.currentRoundTripTime!=null&&(Ot.currentRoundTripTime=er.currentRoundTripTime))})}),Et&&Et.result().forEach(function(Kt){Kt.type=="ssrc"&&Kt.names().indexOf("googBandwidthLimitedResolution")>=0&&(Ot.googBandwidthLimitedResolution=Kt.stat("googBandwidthLimitedResolution")),Kt.type=="ssrc"&&Kt.stat("mediaType")=="video"&&Kt.names().indexOf("googCodecName")>=0&&(Ot.videoCodecName=Kt.stat("googCodecName")),Kt.type=="ssrc"&&Kt.stat("mediaType")=="audio"&&Kt.names().indexOf("googCodecName")>=0&&(Ot.audioCodecName=Kt.stat("googCodecName")),Kt.type=="ssrc"&&Kt.names().indexOf("googCpuLimitedResolution")>=0&&(Ot.googCpuLimitedResolution=Kt.stat("googCpuLimitedResolution")),Kt.type=="ssrc"&&Kt.names().indexOf("googFrameWidthInput")>=0&&(Ot.googFrameWidthInput=Kt.stat("googFrameWidthInput")),Kt.type=="ssrc"&&Kt.names().indexOf("googFrameHeightInput")>=0&&(Ot.googFrameHeightInput=Kt.stat("googFrameHeightInput")),Kt.type=="ssrc"&&Kt.names().indexOf("googFrameRateInput")>=0&&(Ot.googFrameRateInput=Kt.stat("googFrameRateInput")),Kt.type=="ssrc"&&Kt.names().indexOf("codecImplementationName")>=0&&(Ot.codecImplementationName=Kt.stat("codecImplementationName")),Kt.type=="VideoBwe"&&Kt.names().indexOf("googAvailableSendBandwidth")>=0&&(Ot.googAvailableSendBandwidth=Kt.stat("googAvailableSendBandwidth")),Kt.type=="VideoBwe"&&Kt.names().indexOf("googActualEncBitrate")>=0&&(Ot.googActualEncBitrate=Kt.stat("googActualEncBitrate")),Kt.type=="VideoBwe"&&Kt.names().indexOf("googTargetEncBitrate")>=0&&(Ot.googTargetEncBitrate=Kt.stat("googTargetEncBitrate")),Kt.type=="VideoBwe"&&Kt.names().indexOf("googRetransmitBitrate")>=0&&(Ot.googRetransmitBitrate=Kt.stat("googRetransmitBitrate"))}),this.stateCenter.browser==="chrome"&&this.handleEncBitrate(Number.parseInt(Ot.googTargetEncBitrate),Number.parseInt(Ot.googActualEncBitrate),Number.parseInt(Ot.googRetransmitBitrate)),xt=isNaN(xt)||xt<0?0:xt,Mt=isNaN(Mt)||Mt<0?0:Mt,$t=isNaN($t)||$t<0?0:$t,Bt=isNaN(Bt)||Bt<0?0:Bt,At=isNaN(At)||At<0?0:At,Nt=isNaN(Nt)||Nt<0?0:Nt;var Ft=at.ClientUtil.getNetQuality(xt,Mt,$t),jt=at.ClientUtil.getNetQuality(Bt,At,Nt);if(Ot.videoQuality=Ut>0?at.ClientUtil.quality2QualityGrade(Ft):0,Ot.audioQuality=Ut>0?at.ClientUtil.quality2QualityGrade(jt):0,this.stateCenter.networkState!==ot.ENUM_NETWORK_STATE.offline&&((Tt=this.peerConnection)===null||Tt===void 0?void 0:Tt.connectionState)!=="disconnected"||(Ot.videoQuality=ot.QualityGrade.Die,Ot.audioQuality=ot.QualityGrade.Die),!Ot.frameHeight||!Ot.frameWidth){var zt=this.localStream.getVideoTracks()[0];zt&&(Ot.frameHeight=zt.getSettings().height||0,Ot.frameWidth=zt.getSettings().width||0)}var Yt=Math.min(Ft,jt);this.netQuality=Yt,Yt<=ot.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,Ut>0&&this.poorQualityNum>=this.streamCenter.probeStartedNum&&new Date().getTime()>this.probeTime+this.probeInterval&&(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" netQuality "+Yt+" start net probe"),this.probeState=ot.ENUM_PROBE_STATE.tryProbe,this.poorQualityRetryCnt++,this.streamCenter.startNetProbe(!0,this,this.gwNodeList),this.probeTime=new Date().getTime()),this.updateCurrentQualityStats(Ot),this.publishStat=Ot,Ut!==0&&(this.uploadPublishQuality(Ot),this.onPublishQualityUpdate(this.streamId,this.currentQuality))}},yt.prototype.updateCurrentQualityStats=function(mt){var Et=mt.videoBitrate,bt=mt.videoFPS,Ct=mt.videoTransferFPS,Tt=mt.frameHeight,wt=mt.frameWidth,Rt=mt.videoMuteState,It=mt.videoQuality,St=mt.isHardwareEncode,Pt=mt.audioBitrate,Ot=mt.audioCodec,Ut=mt.audioMuteState,Bt=mt.audioQuality,xt=mt.audioFPS,At={video:nt(nt({},this.currentQuality.video),{videoBitrate:Et,videoFPS:bt,videoTransferFPS:Ct,frameHeight:Tt,frameWidth:wt,muteState:Rt,videoQuality:It,isHardwareEncode:St}),audio:nt(nt({},this.currentQuality.audio),{audioBitrate:Pt,audioCodec:Ot,muteState:Ut,audioQuality:Bt,audioFPS:xt}),nackCount:mt.nackCount,pliCount:mt.pliCount,totalRoundTripTime:mt.totalRoundTripTime,currentRoundTripTime:mt.currentRoundTripTime,qualityLimitationReason:mt.qualityLimitationReason};if(mt.videoPacketsLost!==void 0){var Mt=mt.videoPacketsLostRate;At.video.videoPacketsLost=mt.videoPacketsLost,At.video.videoPacketsLostRate=Mt}if(mt.audioPacketsLost!==void 0){var Nt=mt.audioPacketsLostRate;At.audio.audioPacketsLost=mt.audioPacketsLost,At.audio.audioPacketsLostRate=Nt}if(mt.muted!==void 0&&(At.muted=mt.muted,At.paused=mt.paused,At.volume=mt.volume,At.sinkId=mt.sinkId),mt.googBandwidthLimitedResolution!==void 0){var $t=mt.videoCodecName,Ft=mt.audioCodecName,jt=mt.googFrameWidthInput,zt=mt.googFrameHeightInput,Yt=mt.googCpuLimitedResolution,Kt=mt.googFrameRateInput,er=mt.codecImplementationName,ir=mt.googAvailableSendBandwidth,rr=mt.googActualEncBitrate,lr=mt.googTargetEncBitrate;At.googBandwidthLimitedResolution=mt.googBandwidthLimitedResolution,At.video.googCodecName=$t,At.audio.googCodecName=Ft,At.googCpuLimitedResolution=Yt,At.googFrameWidthInput=jt,At.googFrameHeightInput=zt,At.googFrameRateInput=Kt,At.codecImplementationName=er,At.googAvailableSendBandwidth=ir,At.googActualEncBitrate=rr,At.googTargetEncBitrate=lr}this.currentQuality=At},yt.prototype.uploadPublishQuality=function(mt){if(this.qualityUpload&&this.signal.isServerConnected){var Et=new Date().getTime();(this.qualityUploadLastTime==0||Et-this.qualityUploadLastTime>=2e3)&&(mt.stream_type="publish",mt.stream_id=this.streamId,mt.timeStamp=Et,this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+this.streamId+" upload"+JSON.stringify(mt)),this.streamCenter.updateQuality(0,mt),this.qualityUploadLastTime=Et)}},yt.prototype.getStopReason=function(mt){var Et="StopPublish";return mt&&mt.code&&(mt.code===1103051?Et="ReachMaxAVRetryTime":Et="StopPublish"),Et},yt.prototype.stopPublish=function(mt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH+"  .1 "+this.streamId+" called "+this.state+" "+JSON.stringify(mt));var Et=this.getStopReason(mt);if(Object.keys(this.streamCenter.publisherList).length=1)for(var bt in this.streamCenter.playerList){var Ct=this.streamCenter.playerList[bt].player;Ct.state==ot.ENUM_PLAY_STATE.playing&&Ct.broadcasterStatus==ot.ENUM_BROADCASTER_STATUS.start&&(this.signal&&this.signal.sendBroadcasterStatus((0,ot.getSeq)(),Ct.sessionId,0),Ct.broadcasterStatus=ot.ENUM_BROADCASTER_STATUS.stop)}this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,ot.getSeq)(),this.sessionId,0);var Tt=Date.now()-this.reportPublishStateTime;this.reportSpan.setAttributes({publish_state_time:ft.publish_state_time(Tt)}),this.stateCenter.reporter.spanSetAttributes({key:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{stop_reason:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason(Et)}),this.uploadRTCPublishStats(),this.reportSpan.setAttributes({stream_id:ft.stream_id(this.streamId),webrtc_sid:ft.webrtc_sid(this.sessionId),probe_ip_cnt:ft.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:ft.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:ft.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:ft.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),bitrate:ft.bitrate(1e3*this.videoInfo.bitRate),h:ft.h(this.videoInfo.height),w:ft.w(this.videoInfo.width),cap_w:ft.w(this.videoInfo.width),cap_h:ft.h(this.videoInfo.height),fps:ft.h(this.videoInfo.frameRate),env:ft.env(this.stateCenter.testEnvironment?3:1),fail_cnt:ft.fail_cnt(Math.max(this.rtcPublishCount-1,0)),continuous_fail_cnt:ft.continuous_fail_cnt(this.continuousFailCnt),stop_reason:ft.stop_reason(Et),error:(mt==null?void 0:mt.code)||0,message:(mt==null?void 0:mt.message)||""}),this.reportSpan.end(),this.retryFailGwNodes=[],this.resetPublish(),this.isRePublish=!1,this.rtcPublishCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0},yt.prototype.uploadRTCPublishStats=function(){var mt,Et,bt,Ct,Tt,wt,Rt,It,St,Pt,Ot,Ut,Bt,xt;this.stateCenter.reporter.spanSetAttributes({key:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{lsttime:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.lsttime(parseInt(this.lastPublishStats.time)),total_stat:lt.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:(mt=this.lastPublishStats)===null||mt===void 0?void 0:mt.audioPacketsSent,vfc:(Et=this.lastPublishStats)===null||Et===void 0?void 0:Et.framesSent,tfc:((bt=this.lastPublishStats)===null||bt===void 0?void 0:bt.audioPacketsSent)+((Ct=this.lastPublishStats)===null||Ct===void 0?void 0:Ct.framesSent),vb:(Tt=this.lastPublishStats)===null||Tt===void 0?void 0:Tt.videoBytesSent,ab:(wt=this.lastPublishStats)===null||wt===void 0?void 0:wt.audioBytesSent,tb:((Rt=this.lastPublishStats)===null||Rt===void 0?void 0:Rt.videoBytesSent)+((It=this.lastPublishStats)===null||It===void 0?void 0:It.audioBytesSent),rtp_rtt:Math.round(1e3*((St=this.publishStat)===null||St===void 0?void 0:St.currentRoundTripTime))||0,w:(Pt=this.publishStat)===null||Pt===void 0?void 0:Pt.frameWidth,rtp_plr:(Ot=this.publishStat)===null||Ot===void 0?void 0:Ot.videoPacketsLostRate,h:(Ut=this.publishStat)===null||Ut===void 0?void 0:Ut.frameHeight,rtp_bw:!((Bt=this.publishStat)===null||Bt===void 0)&&Bt.googAvailableSendBandwidth?(xt=this.publishStat)===null||xt===void 0?void 0:xt.googAvailableSendBandwidth:void 0})})},yt.prototype.onPublishStateUpdate=function(mt,Et,bt,Ct,Tt,wt){},yt.prototype.onPublishQualityUpdate=function(mt,Et){},yt.prototype.onDisconnect=function(mt){this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" call"),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" websocket disconnect"),this.publishStateUpdateError(mt||lt.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!mt)},yt.prototype.publishSuccess=function(){var mt,Et,bt,Ct;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call"),this._turnToTcp||(this.streamCenter.udpFailNum=0),this.isUpdateSDP&&this.updateSDPCallBack)return this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);var Tt=this.isRePublish?lt.ZegoRTCLogEvent.kZegoRePublish:lt.ZegoRTCLogEvent.kZegoStartPublish;for(var wt in this.stateCenter.reporter.spanEnd({key:Tt.event,par:this.streamId},{url:gt.url((mt=this.signal)===null||mt===void 0?void 0:mt.server),ip:gt.ip(this.ip),source_type:gt.source_type("rtc"),net_protocol:gt.net_protocol(this.netProtocol),is_center:gt.is_center((Et=this.streamCenter.publisherList[this.streamId])===null||Et===void 0?void 0:Et.isCenterNode),signal_consume:gt.signal_consume(this.signalTime),is_peer:gt.is_peer(this.isPeer)}),this.state!=ot.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(ot.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=ot.ENUM_PUBLISH_STATE.publishing,this.continuousFailCnt=0,this.reportPublishStateTime=Date.now(),this.streamCenter.playerList){var Rt=this.streamCenter.playerList[wt].player;Rt.state==ot.ENUM_PLAY_STATE.playing&&Rt.broadcasterStatus==ot.ENUM_BROADCASTER_STATUS.stop&&(this.signal&&this.signal.sendBroadcasterStatus((0,ot.getSeq)(),Rt.sessionId,1),Rt.broadcasterStatus=ot.ENUM_BROADCASTER_STATUS.start)}var It=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(It)&&(this.streamCenter.probeStartedNum=It),this.setPublishQualityTimer();var St=2,Pt=2,Ot=(bt=this.previewer)===null||bt===void 0?void 0:bt.videoTrack,Ut=this.localStream.getAudioTracks().length!==0&&this.localStream.getAudioTracks()[0];(Ot&&Ot.readyState==="live"&&Ot.enabled===!0||!((Ct=this.previewer)===null||Ct===void 0)&&Ct.muteImage)&&(St=0),Ut&&Ut.readyState==="live"&&Ut.enabled===!0&&(Pt=0),this.sendStreamStatus(St,Pt,!0),this.streamCenter.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call success")},yt.prototype.startSoundLevel=function(){var mt;if(this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" call streamID: "+this.streamId),this.localStream&&this.localStream.getAudioTracks().length!=0)try{(mt=this.previewer)===null||mt===void 0||mt.startSoundLevel()}catch(Et){this.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" get sound level failed "+Et)}else this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" local stream no found")},yt.prototype.stopSoundLevel=function(){var mt;this.logger.info(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),(mt=this.previewer)===null||mt===void 0||mt.stopSoundLevel()},yt.prototype.handleEncBitrate=function(mt,Et,bt){var Ct,Tt=this,wt=1e3*this.videoInfo.bitRate,Rt=0;if(Et>0){this.needIncMax||this.gotMax||(this.probeCount++,Et>=.75*mt?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=wt),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var It=at.ClientUtil.arrAvg(this.totalBitrateArray,Et,10);this.needIncMax&&(It>=1.05*wt?this.targetRate>wt&&(this.targetRate-=It>mt?It-mt:It-wt,this.targetRate=Math.max(this.targetRate,wt),this.targetRate=Math.min(this.targetRate,2*wt),Rt=this.targetRate):It<.8*wt&&(this.targetRate===0&&(this.targetRate=mt),this.targetRate=this.targetRate>=wt?this.targetRate+.08*wt:1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*wt),Rt=this.targetRate))}if(bt>0&&bt<wt){var St=at.ClientUtil.arrAvg(this.totalRetransRateArray,bt,5);this.needIncMax?St+Et>1.05*wt&&(this.targetRate-=St+Et-wt,this.targetRate=Math.max(this.targetRate,wt-St),Rt=this.targetRate):Rt=this.targetRate-St}else this.targetRate<wt&&(this.targetRate=wt,Rt=this.targetRate);if(Rt>0){Rt=at.ClientUtil.arrAvg(this.totalTargetRateArray,Rt,5);var Pt=(Ct=this.peerConnection)===null||Ct===void 0?void 0:Ct.getSenders().filter(function(Bt){return Bt.track&&Bt.track.kind==="video"});if(!Pt)return;var Ot=Pt.length>1?Pt[1]:Pt[0]?Pt[0]:null;if(!Ot)return;var Ut=Ot.getParameters();Ut.encodings||(Ut.encodings=[{}]),Ut.encodings[0].maxBitrate=Rt,Ot.setParameters(Ut).catch(function(Bt){Tt.logger.error(ct.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE+" "+Bt)})}},yt.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},yt.prototype.replacePublishedTrack=function(mt,Et,bt){return{errorCode:-1,extendedData:"should install advanced module first"}},yt.prototype.sendStreamStatus=function(mt,Et,bt,Ct){var Tt=this;bt===void 0&&(bt=!1),Ct===void 0&&(Ct=0),(bt||this.camera_status!==mt||this.mic_status!==Et)&&this.signal&&(this.camera_status=mt,this.mic_status=Et,Ct++,this.signal.sendStreamStatus((0,ot.getSeq)(),this.sessionId,mt,Et,this.streamId,function(){Tt.camera_status===mt&&Tt.mic_status===Et&&Ct<=1&&Tt.sendStreamStatus(mt,Et,!0,Ct)}))},yt.prototype.addCanvasStreamVideoTrack=function(mt){var Et=document.createElement("canvas"),bt=new Image;return bt.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==",Et.width=80,Et.height=80,this.canvasTimer=setInterval(function(){var Ct;(Ct=Et.getContext("2d"))&&Ct.drawImage(bt,0,0,16,16)},200),Et.captureStream().getVideoTracks()[0]},yt.prototype.getSpan=function(mt,Et,bt,Ct){return Ct===void 0&&(Ct=!1),this.stateCenter.reporter.createSpan(ot.TRACER_LEVEL.H,{key:Et,bak_key:bt,par:this.streamId},{key:mt,par:this.streamId},mt,Ct)},yt.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},yt.prototype.isCustomCdn=function(){var mt,Et;return((mt=this.publishOption)===null||mt===void 0?void 0:mt.cdnUrl)!==void 0&&((Et=this.publishOption)===null||Et===void 0?void 0:Et.cdnUrl)!==""},yt.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,this.stateCenter.turnOverTcpOnly!==void 0&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},yt}();et.ZegoPublish=vt},569:function(_e,et){var rt=this&&this.__spreadArray||function(nt,ot,it){if(it||arguments.length===2)for(var st,at=0,lt=ot.length;at<lt;at++)!st&&at in ot||(st||(st=Array.prototype.slice.call(ot,0,at)),st[at]=ot[at]);return nt.concat(st||Array.prototype.slice.call(ot))};Object.defineProperty(et,"__esModule",{value:!0}),et.addRRTRLine=et.addSPSDescription=void 0,et.addSPSDescription=function(nt){var ot,it=nt,st=function(lt){var ct={m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"}]};function pt(vt,yt,mt){var Et=function(Tt){return String(Number(Tt))===Tt?Number(Tt):Tt},bt=vt.name&&vt.names;vt.push&&!yt[vt.push]?yt[vt.push]=[]:bt&&!yt[vt.name]&&(yt[vt.name]={});var Ct=vt.push?{}:bt?yt[vt.name]:yt;(function(Tt,wt,Rt,It){if(It&&!Rt)wt[It]=Et(Tt[1]);else for(var St=0;St<Rt.length;St+=1)Tt[St+1]!=null&&(wt[Rt[St]]=Et(Tt[St+1]))})(mt.match(vt.reg),Ct,vt.names,vt.name),vt.push&&yt[vt.push].push(Ct)}var ut=RegExp.prototype.test.bind(/^([a-z])=(.*)/),ht=[],ft={},gt=ft;return lt.split(/(\r\n|\r|\n)/).filter(ut).forEach(function(vt){var yt=vt[0],mt=vt.slice(2);yt==="m"&&(ht.push({rtp:[],fmtp:[]}),gt=ht[ht.length-1]);for(var Et=0;Et<(ct[yt]||[]).length;Et+=1){var bt=ct[yt][Et];if(bt.reg&&bt.reg.test(mt))return pt(bt,gt,mt)}}),ft.media=ht,ft}(nt),at=[];return st.media.forEach(function(lt){lt.type==="video"&&lt.fmtp.forEach(function(ct){ot="a=fmtp:"+ct.payload+" "+ct.config,ct.config.indexOf("sps-pps-idr-in-keyframe")===-1&&at.indexOf(ot)===-1&&at.push(ot)})}),at.forEach(function(lt){it=it.replace(new RegExp(lt,"g"),lt+";sps-pps-idr-in-keyframe=1")}),it},et.addRRTRLine=function(nt){var ot=nt.split(`\r
`),it=new Map;ot.forEach(function(ct,pt){if(/^a=rtcp-fb:/.test(ct)&&ot[pt+1]&&!/^a=rtcp-fb:/.test(ot[pt+1])){var ut=ct.match(/^a=rtcp-fb:\d+/);ut&&it.set(pt+1,ut[0]+" rrtr")}});for(var st=Array.from(it),at=0;at<st.length;at++){var lt=rt([],st[at],!0);ot.splice(lt[0]+at,0,lt[1])}return nt=ot.join(`\r
`)}},1111:function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.isSupportScriptProcessor=et.createSoundProcessor=void 0,et.createSoundProcessor=function(rt,nt,ot){var it=rt.createScriptProcessor(4096,1,1);return nt.connect(it),it.connect(rt.destination),it.onaudioprocess=function(st){for(var at=st.inputBuffer.getChannelData(0),lt=0,ct=0;ct<at.length;ct++)lt<at[ct]&&(lt=at[ct]);ot&&ot(lt)},rt.resume(),it},et.isSupportScriptProcessor=function(rt){return typeof rt.createScriptProcessor=="function"}},8011:function(_e,et,rt){var nt=this&&this.__awaiter||function(pt,ut,ht,ft){return new(ht||(ht=Promise))(function(gt,vt){function yt(bt){try{Et(ft.next(bt))}catch(Ct){vt(Ct)}}function mt(bt){try{Et(ft.throw(bt))}catch(Ct){vt(Ct)}}function Et(bt){var Ct;bt.done?gt(bt.value):(Ct=bt.value,Ct instanceof ht?Ct:new ht(function(Tt){Tt(Ct)})).then(yt,mt)}Et((ft=ft.apply(pt,ut||[])).next())})},ot=this&&this.__generator||function(pt,ut){var ht,ft,gt,vt,yt={label:0,sent:function(){if(1&gt[0])throw gt[1];return gt[1]},trys:[],ops:[]};return vt={next:mt(0),throw:mt(1),return:mt(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function mt(Et){return function(bt){return function(Ct){if(ht)throw new TypeError("Generator is already executing.");for(;yt;)try{if(ht=1,ft&&(gt=2&Ct[0]?ft.return:Ct[0]?ft.throw||((gt=ft.return)&&gt.call(ft),0):ft.next)&&!(gt=gt.call(ft,Ct[1])).done)return gt;switch(ft=0,gt&&(Ct=[2&Ct[0],gt.value]),Ct[0]){case 0:case 1:gt=Ct;break;case 4:return yt.label++,{value:Ct[1],done:!1};case 5:yt.label++,ft=Ct[1],Ct=[0];continue;case 7:Ct=yt.ops.pop(),yt.trys.pop();continue;default:if(gt=yt.trys,!((gt=gt.length>0&&gt[gt.length-1])||Ct[0]!==6&&Ct[0]!==2)){yt=0;continue}if(Ct[0]===3&&(!gt||Ct[1]>gt[0]&&Ct[1]<gt[3])){yt.label=Ct[1];break}if(Ct[0]===6&&yt.label<gt[1]){yt.label=gt[1],gt=Ct;break}if(gt&&yt.label<gt[2]){yt.label=gt[2],yt.ops.push(Ct);break}gt[2]&&yt.ops.pop(),yt.trys.pop();continue}Ct=ut.call(pt,yt)}catch(Tt){Ct=[6,Tt],ft=0}finally{ht=gt=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Et,bt])}}};Object.defineProperty(et,"__esModule",{value:!0}),et.SoundMeterWorklet=et.WorkletModule=void 0;var it=rt(1111),st="zc.smw",at=new Blob([`
class VolumeMeter extends AudioWorkletProcessor {
  constructor() {
    super();
    this.volume = 0;
    this.intervalTime = 1000;
    this.tick = this.intervalTime;
    this.isStop = false;
    this.port.onmessage = event => {
      const { data } = event;
      switch (data.name) {
        case "setIntervalTime":
          this.intervalTime = data.intervalTime;
          break;
        case "stop":
          this.isStop = true;
          break;
      }
    };
  }
  process(inputs) {
    const input = inputs[0];
    if (this.isStop) {
      return false;
    }
    if (input.length > 0) {
      const buffer = input[0];
      let maxVal = this.volume;
      for (let i = 0; i < buffer.length; i++) {
        if (maxVal < buffer[i]) {
          maxVal = buffer[i];
        }
      }
      this.volume = maxVal;
      this.tick -= buffer.length;
      if (this.tick < 0) {
        this.tick += (this.intervalTime / 1000) * sampleRate;
        this.port.postMessage({ volume: this.volume });
        this.volume = 0;
      }
    }
    return true;
  }
}
try {
  registerProcessor("meter", VolumeMeter);
} catch (error) {
  
}  
`],{type:"application/javascript"}),lt=function(){function pt(){}return pt.addModuleToContext=function(ut,ht){return nt(this,void 0,void 0,function(){var ft;return ot(this,function(gt){switch(gt.label){case 0:return gt.trys.push([0,2,,3]),ht.info("zc.smw worklet addModule call"),[4,ut.audioWorklet.addModule(URL.createObjectURL(at))];case 1:return gt.sent(),ht.info("zc.smw worklet addModule success"),this.isSuccess=!0,[2];case 2:return ft=gt.sent(),ht.warn(st+" worklet addModule catch error. ".concat(ft==null?void 0:ft.message)),[3,3];case 3:return[2]}})})},pt.isSuccess=!1,pt}();et.WorkletModule=lt;var ct=function(){function pt(ut,ht){ht===void 0&&(ht=1e3),this.logger=ut,this.interval=ht,this.worklet=null,this.processor=null,this.volume=0,this.onSoundLevelUpdate=function(ft){}}return pt.prototype.preload=function(ut){return nt(this,void 0,void 0,function(){return ot(this,function(ht){switch(ht.label){case 0:return lt.isSuccess?[3,2]:[4,lt.addModuleToContext(ut,this.logger)];case 1:ht.sent(),ht.label=2;case 2:return[2]}})})},pt.prototype.initAudioWorklet=function(ut,ht){return nt(this,void 0,void 0,function(){var ft,gt=this;return ot(this,function(vt){switch(vt.label){case 0:return[4,this.preload(ut)];case 1:if(vt.sent(),this.worklet)ht.connect(this.worklet).connect(ut.destination);else try{if((0,it.isSupportScriptProcessor)(ut))throw"use script processor";(ft=this.worklet=new AudioWorkletNode(ut,"meter")).port.onmessage=function(yt){gt.onSoundLevelUpdate&&gt.onSoundLevelUpdate(yt.data.volume||0)},ht.connect(ft).connect(ut.destination),this.setInterval(this.interval)}catch(yt){this.logger.info("zc.smw not support AudioWorkletNode."+yt),this.processor=(0,it.createSoundProcessor)(ut,ht,function(mt){gt.onSoundLevelUpdate&&gt.onSoundLevelUpdate(mt||0)})}return[2]}})})},pt.prototype.setInterval=function(ut){var ht=this.worklet;this.interval=ut,ht&&ht.port.postMessage({name:"setIntervalTime",intervalTime:ut})},pt.prototype.destroy=function(){this.processor&&(this.processor.onaudioprocess=null,this.processor.disconnect()),this.worklet&&(this.worklet.port.postMessage({name:"stop"}),this.worklet.port.onmessage=null,this.worklet.port.close(),this.worklet.disconnect(),this.logger.info("zc.smw close worklet")),this.worklet=null,this.processor=null},pt}();et.SoundMeterWorklet=ct},5019:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ht){for(var ft,gt=1,vt=arguments.length;gt<vt;gt++)for(var yt in ft=arguments[gt])Object.prototype.hasOwnProperty.call(ft,yt)&&(ht[yt]=ft[yt]);return ht},nt.apply(this,arguments)};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoSignal=void 0;var ot=rt(6706),it=rt(1089),st=rt(2752),at=rt(1691),lt=rt(746),ct=["LoginReq","CreateSessionWithSdpReq","CreateSessionReq"],pt=["Peer2PeerNetStatsGetReq","Peer2PeerNetStatsGetRsp"],ut=function(){function ht(ft,gt,vt,yt){yt===void 0&&(yt=!1),this.netAgent=vt,this.useNetAgent=yt,this.sendDataMap={},this.sendDataList=new ot.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.loginTimer=null,this.successConnectedCallback=null,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=ot.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this._websocket=null,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.logger=ft,this.stateCenter=gt,this.stateCenter.streamConnectTime&&(this.tryConnectInterval=this.stateCenter.streamConnectTime),this.gw=new at.GatewaySignal(this)}return Object.defineProperty(ht.prototype,"wsReadyState",{get:function(){var ft;return(ft=this.websocket)===null||ft===void 0?void 0:ft.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(ht.prototype,"websocket",{get:function(){return this._websocket},set:function(ft){ft===null&&this.useNetAgent||(this._websocket=ft)},enumerable:!1,configurable:!0}),ht.prototype.getBrowserAndVersion=function(){var ft,gt=navigator.userAgent,vt=gt.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(vt[1])?{name:"IE",version:(ft=/\brv[ :]+([\d\.]+)/g.exec(gt)||[])[1]||""}:vt[1]==="Chrome"&&(ft=gt.match(/\bOPR|Edge\/([\d\.]+)/))!=null?{name:"Opera",version:ft[1]}:(vt=vt[2]?[vt[1],vt[2]]:[navigator.appName,navigator.appVersion,"-?"],(ft=gt.match(/version\/([\d+\.]+)/i))!=null&&vt.splice(1,1,ft[1]),{name:vt[0],version:vt[1]})},ht.prototype.setSessionInfo=function(ft,gt){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO+" call"),this.appid=ft+"",this.userid=gt},ht.prototype.onDisconnect=function(ft,gt){},ht.prototype.onUpdateHeartBeatInterval=function(ft){},ht.prototype.resetConnectTimer=function(){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER+" call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},ht.prototype.handleWsMessage=function(ft){var gt=JSON.parse(ft.data);pt.includes(gt.header.cmd)||(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= ",gt.header.cmd),this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= "+JSON.stringify(gt))),gt.header.appid==this.appid&&gt.header.user_id===this.userid?this.handleServerPush(gt):this.logger.warn(it.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" check header failed")},ht.prototype.bindWebSocketEvents=function(){var ft=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this.stateCenter.streamConnectTime?this.stateCenter.streamConnectTime:3e3,this.websocket&&(this.websocket.onclose=function(gt){if(ft.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" close msg = "+JSON.stringify(gt!=null&&gt.code?gt==null?void 0:gt.code:gt)),ft.state!=ot.ENUM_CONNECT_STATE.disconnect){if(ft.useNetAgent)return void ft.disconnectCallback();ft.successConnectedCallback=ft.connectCallback,ft.resetConnectTimer(),ft.startConnectTimer(function(vt){vt===1008&&ft.disconnectCallback(st.errorCodeList.TOKEN_EXPIRED)}),ft.resetCheckMessage()}},this.websocket.onerror=function(gt){ft.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" msg = "+JSON.stringify(gt))})},ht.prototype.resetCheckMessage=function(){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE+" call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var ft=this.sendDataList.getFirst();ft!=null;)this.sendDataList.remove(ft),ft._data.error&&ft._data.error(ot.SEND_MSG_RESET,ft._data.seq),ft=this.sendDataList.getFirst();this.sendDataMap={}},ht.prototype.handleServerPush=function(ft){switch(ft.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",ft);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",ft),ft.body.result===0&&this.addSession(ft.header.session_id,ft.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",ft),ft.body.result===0&&this.addSession(ft.header.session_id,ft.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",ft);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",ft);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",ft),this.removeSession(ft.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",ft);break;case"MediaDescPush":case"CandidateInfoPush":case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":case"NetQualityInfoPush":case"MediaDescUpdatePush":case"CmdPush":this.handlePushData(ft);break;case"CloseSessionPush":this.handlePushData(ft),this.removeSession(ft.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",ft);break;case"SessionResetPush":this.handlePushResetSessionData(ft);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",ft);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",ft);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",ft);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",ft);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",ft);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",ft);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",ft);break;case"CmdRsp":this.handleRespondData("CmdReq",ft)}},ht.prototype.disconnectCallback=function(ft,gt){this.logger.info("zc.s.dcb "+JSON.stringify(ft)+" "+gt),this.connectCallback&&(this.connectCallback(gt||-1,this.server,void 0),this.connectCallback=null);var vt=this.server;this.disconnectServer(),this.onDisconnect(vt,ft)},ht.prototype.updateToken=function(){var ft=this;this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN+" call");var gt={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this.stateCenter.anchor_info.anchor_id,sdkversion:ot.PROTO_VERSION,osinfo:navigator.appVersion};if(Object.keys(this.sessionInfos).length!=0){var vt=[];for(var yt in this.sessionInfos){var mt=parseInt(yt);vt.push({session_id:mt,session_token:this.sessionInfos[mt].token})}gt.sessions=vt}this.sendMessageWithCallback("LoginReq",this.stateCenter.getSeq(),0,gt,function(Et,bt,Ct){if(Ct.result==0){ft.token=Ct.token,ft.tokenType=Ct.tokenType;var Tt={report:Ct.report,report_interval:Ct.report_interval_ms};Ct.negoInterval&&(ft.negoInterval=Ct.negoInterval),Ct.negoTryCount&&(ft.negoTryCount=Ct.negoTryCount),Ct.negoTryMaxCount&&(ft.negoTryMaxCount=Ct.negoTryMaxCount),ft.connectCallback!=null&&(ft.connectCallback(0,ft.server,Tt),ft.connectCallback=null),ft.checkMessageTimeout()}else ft.connectCallback!=null&&(ft.connectCallback(Ct.result,ft.server,{error:Ct.strError}),ft.connectCallback=null)},function(){ft.connectCallback!=null&&(ft.connectCallback(-1,ft.server,void 0),ft.connectCallback=null)})},ht.prototype.sendMessageWithCallback=function(ft,gt,vt,yt,mt,Et){var bt,Ct=this;mt===void 0&&(mt=null),Et===void 0&&(Et=null),pt.includes(ft)||this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" call "+ft+" "+gt+" "+((bt=this.websocket)===null||bt===void 0?void 0:bt.readyState));var Tt=performance.now();if(!this.websocket||ft!=="LoginReq"&&this.websocket.readyState!==lt.SocketState.OPEN)return this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" connect not establish"),void(Et&&Et(ot.SEND_MSG_TIMEOUT,gt));var wt={header:this.getHeader(ft,gt,vt),body:yt},Rt={seq:gt,deleted:!1,cmd:ft,time:new Date().getTime(),success:function(){for(var Pt=[],Ot=0;Ot<arguments.length;Ot++)Pt[Ot]=arguments[Ot];if(ct.includes(ft)){var Ut=(performance.now()-Tt).toFixed(0);Ct.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" seq: ".concat(gt,", cmd: ").concat(ft,", cost_time: ").concat(Ut))}mt&&mt.apply(void 0,Pt)},error:Et},It=this.sendDataList.push(Rt);this.sendDataMap[Rt.seq]=It;var St=JSON.stringify(wt);pt.includes(ft)||this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" "+St),this.useNetAgent&&ft==="LoginReq"?this.websocket.send(St,void 0,!0):this.websocket.send(St),this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" success")},ht.prototype.getHeader=function(ft,gt,vt){return{version:"1.0.1",cmd:ft,appid:this.appid+"",seq:gt,user_id:this.userid,session_id:vt}},ht.prototype.connectServer=function(ft,gt,vt,yt){var mt,Et=this;if(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+vt),this.roomID=ft,this.token=gt,this.server=vt,this.state=ot.ENUM_CONNECT_STATE.connecting,this.connectCallback=yt,this.isServerConnected)this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket is connected"),this.resetConnectTimer(),this.state=ot.ENUM_CONNECT_STATE.connected;else try{if(this.useNetAgent){if(!this.stateCenter.appConfig)return void this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" no app config ");var bt=this.stateCenter.appConfig.media_config.publish_config.resource_info.find(function(St){return St.resource_type===ot.SignalResourceType.RTC});if(!bt)return void(yt&&yt(st.errorCodeList.GET_CONFIG_FAIL));var Ct=(mt=bt==null?void 0:bt.service_info)===null||mt===void 0?void 0:mt.find(function(St){return St.protocol===ot.ProtocolType.WEBRTC});if(!Ct)return void(yt&&yt(st.errorCodeList.GET_CONFIG_FAIL));var Tt=Ct.url_template.split("{IP}")[1].split("?"),wt=Tt[0],Rt=Tt[1],It={path:wt,query:Rt};this.stateCenter.isTestMode&&(It={path:wt+2,query:Rt}),this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" signal "+JSON.stringify(It)),this.websocket instanceof WebSocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),!this.websocket&&(this.websocket=new lt.AnalogSocket(this.server,this.netAgent,It,this.logger,this.stateCenter)),this.websocket.open()}else this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" need new websocket"),this.websocket&&(this.logger.warn(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close()),this.websocket=new WebSocket(this.server);this.websocket.onclose=function(St){Et.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket close call  "+JSON.stringify(St)),Et.useNetAgent&&Et.state!=ot.ENUM_CONNECT_STATE.disconnect&&(Et.successConnectedCallback=Et.connectCallback,Et.resetConnectTimer(),Et.startConnectTimer(function(Pt){Pt===1008&&Et.disconnectCallback(st.errorCodeList.TOKEN_EXPIRED)}))},this.websocket.onerror=function(St){Et.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket onerror call  "+JSON.stringify(St)),Et.stateCenter.useNetAgent&&(St!=null&&St.code)&&Et.disconnectCallback(void 0,St==null?void 0:St.code)},this.useNetAgent&&this.websocket instanceof lt.AnalogSocket?(this.websocket.onopen=function(){Et.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),Et.bindWebSocketEvents(),Et.state=ot.ENUM_CONNECT_STATE.connected,Et.websocket&&(Et.websocket.onmessage=Et.handleWsMessage.bind(Et))},this.websocket.onreconnnecting=function(){Et.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket reconnecting "+!!Et.successConnectedCallback),Et.successConnectedCallback&&(Et.connectCallback=Et.successConnectedCallback),Et.updateToken()},this.websocket.onmessage=this.handleWsMessage.bind(this),this.updateToken()):this.websocket.onopen=function(){Et.resetConnectTimer(),Et.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),Et.websocket&&(Et.websocket.onmessage=Et.handleWsMessage.bind(Et)),Et.bindWebSocketEvents(),Et.updateToken(),Et.state=ot.ENUM_CONNECT_STATE.connected}}catch(St){this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket error "+St)}this.useNetAgent||(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+this.tryConnectInterval),this.tryConnectTimer=setTimeout(function(){Et.startConnectTimer(yt)},this.tryConnectInterval))},ht.prototype.startConnectTimer=function(ft){if(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" call"),this.tryConnectCount>=ot.MAX_TRY_CONNECT_COUNT)return this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&this.websocket.readyState===lt.SocketState.OPEN?(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,ft))},ht.prototype.disconnectServer=function(){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER+" call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=ot.ENUM_CONNECT_STATE.disconnect},Object.defineProperty(ht.prototype,"isServerConnected",{get:function(){var ft;return((ft=this.websocket)===null||ft===void 0?void 0:ft.readyState)===lt.SocketState.OPEN},enumerable:!1,configurable:!0}),ht.prototype.createSession=function(ft,gt,vt,yt,mt,Et,bt,Ct,Tt){mt===void 0&&(mt=""),Et===void 0&&(Et=""),this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+yt);var wt="";ot.PROTO_VERSION.split(".").forEach(function(Rt,It){return wt+=Rt.length==1&&It==1?"0"+Rt:Rt}),this.sendMessageWithCallback("CreateSessionReq",ft,0,{type:gt,stream_id:yt,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:vt,strAuthParam:mt,sdk_version:1*wt,turn_server_host:typeof Et=="string"?Et:"",params:bt},Ct,Tt)},ht.prototype.createSessionWithSdp=function(ft,gt,vt){var yt,mt=ft.seq,Et=ft.type,bt=ft.streamId,Ct=ft.strAuthParam,Tt=ft.sdp,wt=ft.serverHost,Rt=ft.playBufLevel,It=ft.params,St=((yt=ft.videoInfo)===null||yt===void 0?void 0:yt.keyFrameInterval)||2;this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+bt);var Pt="";ot.PROTO_VERSION.split(".").forEach(function(Ut,Bt){return Pt+=Ut.length==1&&Bt==1?"0"+Ut:Ut});var Ot={type:Et,app_id:this.appid,stream_id:bt,sdp:Tt,user_id:this.userid,platform:this.platform,browser:this.browser.name,sdk_vers:parseInt(Pt),clientIp:"",media_server_host:typeof wt=="string"?wt:"",strAuthParam:Ct,params:It,keyframe_intv:parseInt(St)};Rt&&(Ot.min_play_buf_level_ms=Rt),this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" "+bt+" params: "+JSON.stringify(nt(nt({},Ot),{sdp:void 0}))),this.sendMessageWithCallback("CreateSessionWithSdpReq",mt,0,Ot,gt,vt)},ht.prototype.sendMediaDescUpdateReq=function(ft,gt,vt,yt,mt){this.sendMessageWithCallback("MediaDescUpdateReq",ft,gt,{peer_id:vt.peerID,type:vt.type,sdp:vt.sdp,width:vt.width,height:vt.height,framerate:vt.frameRate,video_min_kpbs:vt.video_min_kpbs,video_max_kpbs:vt.video_max_kpbs,audio_kpbs:vt.audio_kpbs,keyframe_intv:vt.keyframe_intv},yt,mt)},ht.prototype.removeSession=function(ft){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION+" call "+ft),this.sessionInfos[ft]&&delete this.sessionInfos[ft]},ht.prototype.sendCloseSession=function(ft,gt,vt,yt,mt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION+" call: "+gt);var Et={reason:vt};this.removeSession(gt),this.sendMessageWithCallback("CloseSessionReq",ft,gt,Et,yt,mt)},ht.prototype.sendMessage=function(ft,gt,vt,yt){if(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" call "+ft),this.websocket&&this.websocket.readyState===lt.SocketState.OPEN){var mt=this.getHeader(ft,gt,vt),Et=JSON.stringify({header:mt,body:yt});this.websocket.send(Et),this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" success")}else this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" connect not establish")},ht.prototype.handleRespondData=function(ft,gt){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" call");var vt=this.sendDataMap[gt.header.seq];if(vt!=null){delete this.sendDataMap[gt.header.seq],this.sendDataList.remove(vt);var yt=vt._data;yt.cmd!==ft?this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" command is not match"):yt.success&&yt.success(gt.header.seq,gt.header.session_id,gt.body)}else{if(gt.header.cmd=="CloseSessionRsp")return;this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" cannot find data "+ft)}},ht.prototype.addSession=function(ft,gt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION+" call"+ft),this.sessionInfos[ft]={token:gt}},ht.prototype.handlePushData=function(ft){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" call "+ft.header.cmd+" session "+ft.header.session_id);var gt=this.pushCallback[ft.header.cmd+ft.header.session_id];gt?gt.callback&&gt.callback(ft.header.seq,ft.header.session_id,ft.body):this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" no callbackData "+ft.header.cmd+" session: "+ft.header.session_id)},ht.prototype.handlePushResetSessionData=function(ft){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" call ");var gt=[];if(ft.body.cResetType==0)gt=Object.keys(this.sessionInfos);else if(ft.body.cResetType==1)for(var vt=0;vt<ft.body.session_ids.length;vt++)gt.push(ft.body.session_ids[vt]);if(this.sendResetSessionAck(ft.header.seq,0,0),gt.length!=0)for(var yt=0;yt<gt.length;yt++){var mt=this.pushCallback[ft.header.cmd+gt[yt]];mt==null?this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no callbackData "+gt[yt]):mt.callback&&mt.callback(ft.header.seq,gt[yt],ft.body)}else this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no session to callback")},ht.prototype.sendMediaDesc=function(ft,gt,vt,yt,mt,Et){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC+" call: "+gt);var bt={type:vt,sdp:yt.sdp};yt.width!=null&&(bt.width=yt.width),yt.height!=null&&(bt.height=yt.height),yt.frameRate!=null&&(bt.framerate=yt.frameRate),yt.video_min_kpbs!=null&&(bt.video_min_kpbs=yt.video_min_kpbs),yt.video_max_kpbs!=null&&(bt.video_max_kpbs=yt.video_max_kpbs),yt.audio_kpbs!=null&&(bt.audio_kpbs=yt.audio_kpbs),yt.keyframe_intv!=null&&(bt.keyframe_intv=yt.keyframe_intv),yt.min_play_buf_level_ms!=null&&(bt.min_play_buf_level_ms=yt.min_play_buf_level_ms),this.sendMessageWithCallback("MediaDescReq",ft,gt,bt,mt,Et)},ht.prototype.sendCandidateInfo=function(ft,gt,vt,yt,mt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO+" call: "+gt);for(var Et=[],bt=0;bt<vt.length;bt++)Et.push({candidate:vt[bt].candidate,sdpMid:vt[bt].sdpMid,sdpMLineIndex:vt[bt].sdpMLineIndex});this.sendMessageWithCallback("CandidateInfoReq",ft,gt,{infos:Et},yt,mt)},ht.prototype.sendMediaDescAck=function(ft,gt,vt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+gt),this.sendMessage("MediaDescAck",ft,gt,{result:vt})},ht.prototype.sendUpdateMediaDescAck=function(ft,gt,vt,yt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+gt),this.sendMessage("MediaDescUpdateAck",ft,gt,{peer_id:yt,result:vt})},ht.prototype.sendCandidateInfoAck=function(ft,gt,vt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK+" call: "+gt),this.sendMessage("CandidateInfoAck",ft,gt,{result:vt})},ht.prototype.sendCloseSessionAck=function(ft,gt,vt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK+" call: "+gt),this.sendMessage("CloseSessionAck",ft,gt,{result:vt})},ht.prototype.sendResetSessionAck=function(ft,gt,vt){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK+" call: "+gt),this.sendMessage("SessionResetAck",ft,gt,{result:vt})},ht.prototype.registerPushCallback=function(ft,gt,vt){vt&&typeof vt=="function"&&(this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK+" set callback "+gt),this.pushCallback[ft+gt]={callback:vt})},ht.prototype.unregisterPushCallback=function(ft,gt){delete this.pushCallback[ft+gt]},ht.prototype.checkMessageTimeout=function(){for(var ft,gt=this,vt=this.sendDataList.getFirst(),yt=new Date().getTime(),mt=0,Et=0,bt=0;vt!=null&&!(vt._data.time+this.sendDataTimeout>yt);)if(delete this.sendDataMap[vt._data.seq],this.sendDataList.remove(vt),++Et,this.checkMessageList.indexOf(vt._data.cmd)!=-1){if(vt._data.error==null||this.sendDataDropTimeout>0&&vt._data.time+this.sendDataDropTimeout<yt?++bt:(this.logger.warn(it.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" error cmd = "+vt._data.cmd+" seq ="+((ft=vt._data)===null||ft===void 0?void 0:ft.seq)),vt._data.error&&vt._data.error(ot.SEND_MSG_TIMEOUT,vt._data.seq)),++mt>=this.sendDataCheckOnceCount)break;vt=this.sendDataList.getFirst()}else vt=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout(function(){gt.checkMessageTimeout()},this.sendDataCheckInterval),Et==0&&bt==0||this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" call success, state: timeout="+Et+" drop="+bt)},ht.prototype.sendHeartbeat=function(){var ft=this;if(this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+"call tryHeartbeatCount:"+this.tryHeartbeatCount),Object.keys(this.sessionInfos).length!=0)if(this.state===ot.ENUM_CONNECT_STATE.connected){if(++this.tryHeartbeatCount>ot.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" heartbeat try limit"),void this.disconnectCallback();var gt=[];for(var vt in this.sessionInfos)gt.push(parseInt(vt));var yt={session_ids:gt},mt=new Date().getTime();this.sendMessageWithCallback("ClientHBReq",this.stateCenter.getSeq(),0,yt,function(Et,bt,Ct){ft.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" hb time "+(new Date().getTime()-mt)),ft.heartbeatInterval!=Ct.hb_interval&&(ft.heartbeatInterval=Ct.hb_interval,ft.onUpdateHeartBeatInterval(Ct.hb_interval)),ft.tryHeartbeatCount=0},function(Et,bt){})}else this.logger.warn(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" state error");else this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" no need to heartbeat")},ht.prototype.QualityReport=function(ft,gt,vt,yt,mt){this.logger.debug(it.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT+" call");var Et={streams:[nt(nt({},vt),{aid:gt})]};this.sendMessageWithCallback("QualityReportReq",ft,gt,Et,yt,mt)},ht.prototype.sendStreamStatus=function(ft,gt,vt,yt,mt,Et){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" call "+gt);var bt={mic_status:yt,camera_status:vt};this.logger.info("".concat(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS," stream ").concat(mt||""," status ").concat(JSON.stringify(bt))),this.sendMessageWithCallback("StreamStatusNotify",ft,gt,bt,function(){},function(Ct){Ct===ot.SEND_MSG_TIMEOUT&&Et&&Et()})},ht.prototype.ActivatePlayVideoStream=function(ft,gt,vt,yt,mt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" call");var Et={active:vt?0:1,layer:0};this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" activate video "+JSON.stringify(Et)),this.sendMessageWithCallback("ActivateVideoPlayStreamReq",ft,gt,Et,yt,mt)},ht.prototype.ActivatePlayAudioStream=function(ft,gt,vt,yt,mt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" call");var Et={active:vt?0:1,layer:0};this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" activate audio "+JSON.stringify(Et)),this.sendMessageWithCallback("ActivateAudioPlayStreamReq",ft,gt,Et,yt,mt)},ht.prototype.sendBroadcasterStatus=function(ft,gt,vt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS+" call "+gt),this.sendMessage("BroadcasterStatusNotify",ft,gt,{status:vt})},ht.prototype.sendNetProbe=function(ft,gt,vt,yt,mt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+gt),this.sendMessageWithCallback("NetQualityProbeReq",ft,gt,{peer_id:vt,action:1},yt,mt)},ht.prototype.sendNetQualityInfoPushAck=function(ft,gt,vt,yt){this.logger.info(it.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+gt),this.sendMessage("NetQualityInfoAck",ft,gt,{peer_id:vt,result:yt})},ht.prototype.activateSEIInsert=function(ft,gt,vt,yt,mt,Et,bt){},ht.prototype.getP2PNetStats=function(ft,gt,vt,yt,mt){this.sendMessageWithCallback("Peer2PeerNetStatsGetReq",ft,gt,{peer_id:vt},yt,mt)},ht.prototype.sendGWCmd=function(ft,gt,vt,yt,mt){this.sendMessageWithCallback("CmdReq",ft,gt,vt,yt,mt)},ht.prototype.sendGWAck=function(ft,gt,vt){this.sendMessage("CmdAck",ft,gt,vt)},ht}();et.ZegoSignal=ut},8935:function(_e,et,rt){var nt=this&&this.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(et,"__esModule",{value:!0}),et.AutoplayDialog=void 0;var ot=nt(rt(4671)),it="zg_autoplay_wrapper";function st(){return navigator.language.includes("zh")}var at=function(){function lt(){this.content='Media play failed. Click the "Resume"to resume.',this.dialogNode=null,this.bodyPosition="static";var ct=document.createElement("style");ct.innerHTML=".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block !important;}.".concat(it,"{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px #988e8d;border:1px solid #d1cfcf;max-width:500px;}.").concat(it," a{color:#2473E8;}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.zg_autoplay_content{margin:8px 0;}.zg_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.zg_autoplay_action_confirm:hover{opacity:0.9;}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.").concat(it,"{width:80vw;}}"),document.head.appendChild(ct),st()&&(this.content="浏览器阻止音视频播放，请点击“恢复播放”。"),this.eManager=new ot.default}return lt.getInstance=function(){return lt.instance||(lt.instance=new lt),lt.instance},lt.prototype.createDialog=function(){var ct=document.createElement("template");ct.innerHTML="<div class='zg_autoplay_mask'><div class='".concat(it,"'><div class='zg_autoplay_header'>").concat(location.host,"</div><div class='zg_autoplay_content'>").concat(this.content,"</div><div class='zg_autoplay_action_wrapper'></div></div></div>").trim();var pt=document.createElement("button");pt.className="zg_autoplay_action_confirm",pt.innerText=st()?"恢复播放":"Resume",pt.onclick=this.onConfirm.bind(this);var ut=ct.content.firstChild,ht=ut.querySelector(".zg_autoplay_action_wrapper");return ht&&ht.appendChild(pt),ut},lt.prototype.onConfirm=function(ct){ct&&ct.stopPropagation(),this.eManager.emit("allowPlay"),this.deleteDiaLog()},lt.prototype.deleteDiaLog=function(){this.dialogNode&&(document.body.removeChild(this.dialogNode),this.dialogNode=null)},lt.prototype.addDiaLog=function(){this.dialogNode=this.dialogNode||this.createDialog(),document.body.appendChild(this.dialogNode),this.dialogNode.onclick=this.onConfirm.bind(this)},lt.prototype.on=function(ct,pt){return this.eManager.addEventHandler(ct,pt)},lt.instance=null,lt}();et.AutoplayDialog=at},9307:function(_e,et,rt){var nt=this&&this.__assign||function(){return nt=Object.assign||function(ut){for(var ht,ft=1,gt=arguments.length;ft<gt;ft++)for(var vt in ht=arguments[ft])Object.prototype.hasOwnProperty.call(ht,vt)&&(ut[vt]=ht[vt]);return ut},nt.apply(this,arguments)},ot=this&&this.__awaiter||function(ut,ht,ft,gt){return new(ft||(ft=Promise))(function(vt,yt){function mt(Ct){try{bt(gt.next(Ct))}catch(Tt){yt(Tt)}}function Et(Ct){try{bt(gt.throw(Ct))}catch(Tt){yt(Tt)}}function bt(Ct){var Tt;Ct.done?vt(Ct.value):(Tt=Ct.value,Tt instanceof ft?Tt:new ft(function(wt){wt(Tt)})).then(mt,Et)}bt((gt=gt.apply(ut,ht||[])).next())})},it=this&&this.__generator||function(ut,ht){var ft,gt,vt,yt,mt={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return yt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(yt[Symbol.iterator]=function(){return this}),yt;function Et(bt){return function(Ct){return function(Tt){if(ft)throw new TypeError("Generator is already executing.");for(;mt;)try{if(ft=1,gt&&(vt=2&Tt[0]?gt.return:Tt[0]?gt.throw||((vt=gt.return)&&vt.call(gt),0):gt.next)&&!(vt=vt.call(gt,Tt[1])).done)return vt;switch(gt=0,vt&&(Tt=[2&Tt[0],vt.value]),Tt[0]){case 0:case 1:vt=Tt;break;case 4:return mt.label++,{value:Tt[1],done:!1};case 5:mt.label++,gt=Tt[1],Tt=[0];continue;case 7:Tt=mt.ops.pop(),mt.trys.pop();continue;default:if(vt=mt.trys,!((vt=vt.length>0&&vt[vt.length-1])||Tt[0]!==6&&Tt[0]!==2)){mt=0;continue}if(Tt[0]===3&&(!vt||Tt[1]>vt[0]&&Tt[1]<vt[3])){mt.label=Tt[1];break}if(Tt[0]===6&&mt.label<vt[1]){mt.label=vt[1],vt=Tt;break}if(vt&&mt.label<vt[2]){mt.label=vt[2],mt.ops.push(Tt);break}vt[2]&&mt.ops.pop(),mt.trys.pop();continue}Tt=ht.call(ut,mt)}catch(wt){Tt=[6,wt],gt=0}finally{ft=vt=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([bt,Ct])}}},st=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(et,"__esModule",{value:!0}),et.StreamView=void 0;var at=st(rt(4671)),lt=rt(3770),ct=rt(8935).AutoplayDialog.getInstance(),pt=function(){function ut(ht,ft,gt){var vt,yt,mt,Et=this;this.previewer=ft,this.video=null,this.audio=null,this.options={enableAutoplayDialog:!0,clearLastFrame:!0},this.emitPlayFailed=(vt=function(){Et.eventManager.emit("autoplayFailed"),Et.options.enableAutoplayDialog&&ct.addDiaLog()},(yt=600)===void 0&&(yt=100),function(){for(var St=[],Pt=0;Pt<arguments.length;Pt++)St[Pt]=arguments[Pt];var Ot=this;clearTimeout(mt),mt=window.setTimeout(function(){vt.apply(Ot,St)},yt)}),this.videoMuted=!1,this.audioMuted=!1,this.eventHandler={visibilitychange:function(){var St;!document.hidden&&(!((St=Et.audio)===null||St===void 0)&&St.parentNode)&&(Et.audio.srcObject=Et.audio.srcObject,Et.mountPlayer(Et.audio,!0))}},this.options=nt(nt({},this.options),gt);var bt=this.id="".concat(ht.id),Ct=document.createElement("div");Ct.id="zg-rtc-player_".concat(bt),Ct.setAttribute("style","width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");var Tt=ht.getVideoTracks()[0],wt=ht.getAudioTracks()[0],Rt=document.createElement("video");Rt.id="zg-rtc-video_".concat(bt),Rt.setAttribute("style","width:100%;height:100%;object-fit:contain;"),Rt.setAttribute("autoplay","autoplay"),Rt.setAttribute("playsinline","playsinline"),Rt.muted=!0,Rt.srcObject=new MediaStream,Tt&&Rt.srcObject.addTrack(Tt);var It=document.createElement("audio");It.id="zg-rtc-audio_".concat(bt),It.setAttribute("autoplay","autoplay"),It.setAttribute("playsinline","playsinline"),It.srcObject=new MediaStream,wt&&It.srcObject.addTrack(wt),this.wrapper=Ct,this.video=Rt,this.audio=It,this.eventManager=new at.default,ct.on("allowPlay",function(){Et.resume()}),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange)}return Object.defineProperty(ut.prototype,"isLocal",{get:function(){return this.previewer instanceof lt.ZegoPreview},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"isMounted",{get:function(){return!!this.wrapper.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"hasAudio",{get:function(){var ht,ft,gt;return!!(!((ht=this.audio)===null||ht===void 0)&&ht.parentNode)&&((gt=(ft=this.audio.srcObject)===null||ft===void 0?void 0:ft.getTracks()[0])===null||gt===void 0?void 0:gt.readyState)==="live"},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"hasVideo",{get:function(){var ht,ft,gt;return!!(!((ht=this.video)===null||ht===void 0)&&ht.parentNode)&&((gt=(ft=this.video.srcObject)===null||ft===void 0?void 0:ft.getTracks()[0])===null||gt===void 0?void 0:gt.readyState)==="live"},enumerable:!1,configurable:!0}),ut.prototype.resume=function(ht,ft){return ft===void 0&&(ft=["audio","video"]),ot(this,void 0,void 0,function(){var gt=this;return it(this,function(vt){return ft.forEach(function(yt){return ot(gt,void 0,void 0,function(){var mt;return it(this,function(Et){switch(Et.label){case 0:return mt=yt==="audio"?this.audio:this.video,(yt==="audio"?this.hasAudio:this.hasVideo)?(ht&&mt&&(mt.srcObject=mt.srcObject),[4,mt==null?void 0:mt.play()]):[3,2];case 1:Et.sent(),Et.label=2;case 2:return[2]}})})}),[2]})})},ut.prototype.checkIfClearLastFrame=function(){return ot(this,void 0,void 0,function(){return it(this,function(ht){switch(ht.label){case 0:return this.options.clearLastFrame?[4,this.resume(!0,["video"])]:[3,2];case 1:ht.sent(),ht.label=2;case 2:return[2]}})})},ut.prototype.play=function(ht,ft){ft===void 0&&(ft={});var gt=null;if(typeof ht=="string"?gt=document.getElementById(ht):ht instanceof HTMLElement&&(gt=ht),!gt)throw"Execute `play` failed, container not exist";this.options=nt(nt({},this.options),ft);var vt=this.options,yt=vt.objectFit,mt=vt.muted,Et=vt.mirror,bt=!this.isLocal;this.audio&&typeof mt=="boolean"&&(bt=!mt),this.video&&(yt!==void 0&&(this.video.style.objectFit=yt),typeof Et=="boolean"&&(this.video.style.transform=Et?"rotateY(180deg)":"")),!gt.contains(this.wrapper)&&gt.appendChild(this.wrapper),this.videoMuted=!1,this.mountPlayer(this.video,!0),this.audioMuted=!bt,this.mountPlayer(this.audio,bt)},ut.prototype.stop=function(){var ht,ft=(ht=this.wrapper)===null||ht===void 0?void 0:ht.parentNode;ft&&ft.removeChild(this.wrapper)},ut.prototype.setVideo=function(ht,ft){return ft===void 0&&(ft=!1),ot(this,void 0,void 0,function(){return it(this,function(gt){switch(gt.label){case 0:return[4,this.setTrack(!0,ht,ft)];case 1:return gt.sent(),[2]}})})},ut.prototype.setAudio=function(ht,ft){return ft===void 0&&(ft=!1),ot(this,void 0,void 0,function(){return it(this,function(gt){switch(gt.label){case 0:return[4,this.setTrack(!1,ht,ft)];case 1:return gt.sent(),[2]}})})},ut.prototype.setTrack=function(ht,ft,gt){return gt===void 0&&(gt=!1),ot(this,void 0,void 0,function(){var vt,yt,mt;return it(this,function(Et){switch(Et.label){case 0:return(vt=ht?this.video:this.audio)&&(yt=vt.srcObject)?ft?[3,1]:((mt=yt.getTracks()).forEach(function(bt){yt==null||yt.removeTrack(bt),vt.srcObject=vt.srcObject}),this.eventManager.emit("_trackChanegd",ht?"video":"audio"),[3,5]):[2];case 1:if(!(ft instanceof MediaStreamTrack))return[3,5];if((mt=yt.getTracks()).includes(ft))return[3,5];if(mt.forEach(function(bt){yt==null||yt.removeTrack(bt)}),yt.addTrack(ft),this.eventManager.emit("_trackChanegd",ft.kind,ft),this.mountPlayer(vt,!(ht?this.videoMuted:this.audioMuted)),!gt)return[3,5];Et.label=2;case 2:return Et.trys.push([2,4,,5]),[4,this.resume(!0)];case 3:return Et.sent(),[3,5];case 4:return Et.sent(),[3,5];case 5:return[2]}})})},ut.prototype.setMirror=function(ht){var ft=this.options.mirror=!!ht;this.video&&(this.video.style.transform=ft?"rotateY(180deg)":"")},ut.prototype.setVideoMuted=function(ht){return this.videoMuted=ht,this.mountPlayer(this.video,!ht)},ut.prototype.setAudioMuted=function(ht){return this.audioMuted=ht,this.mountPlayer(this.audio,!ht)},ut.prototype.setVolume=function(ht){if(this.audio){var ft=ht>100?1:ht/100;return this.audio.volume=ft,this.audio.volume==ft}return!1},ut.prototype.takeStreamSnapshot=function(ht){var ft=this.video;if(!ft||!ft.srcObject)return"";var gt=document.createElement("canvas");gt.width=this.video.videoWidth,gt.height=this.video.videoHeight;var vt=gt.getContext("2d");vt&&vt.drawImage(this.video,0,0,gt.width,gt.height);var yt=gt.toDataURL("image/"+(ht==null?void 0:ht.imageType)||0,ht==null?void 0:ht.quality),mt="png";return ht!=null&&ht.imageType&&(mt=["png","jpeg"].includes(ht==null?void 0:ht.imageType)?ht==null?void 0:ht.imageType:"png"),ht!=null&&ht.save&&gt.toBlob(function(Et){var bt=window.URL.createObjectURL(Et),Ct=document.createElement("a");Ct.style.display="none",Ct.href=bt;var Tt=(ht==null?void 0:ht.fileName)||"snapshot"+Date.now();Ct.download=Tt+"."+mt,document.body.appendChild(Ct),Ct.click(),setTimeout(function(){document.body.removeChild(Ct),window.URL.revokeObjectURL(bt)},100)}),yt},ut.prototype.mountPlayer=function(ht,ft){var gt,vt,yt=this;if(!ht||!this.wrapper)return!1;var mt=ht.tagName==="VIDEO";if(ft){if(ft&&((vt=(gt=ht==null?void 0:ht.srcObject)===null||gt===void 0?void 0:gt.getTracks()[0])===null||vt===void 0?void 0:vt.readyState)==="live"){var Et=null,bt=function(){ht.oncanplay=null,Et&&(clearTimeout(Et),Et=null),ht.play().catch(function(){yt.isMounted&&(mt&&yt.hasVideo||!mt&&yt.hasAudio)&&yt.emitPlayFailed()})};ht.muted=!1,ht.play().catch(function(){}),Et=window.setTimeout(function(){bt()},1e3),ht.oncanplay=function(){bt()},!ht.parentNode&&this.wrapper.appendChild(ht)}}else{ht.muted=!0;var Ct=ht.parentNode;Ct&&Ct.removeChild(ht)}return!0},ut.prototype.on=function(ht,ft){return!!ft&&this.eventManager.addEventHandler(ht,ft)},ut.prototype.off=function(ht,ft){return this.eventManager.removeEventHandler(ht,ft)},ut.prototype.useAudioOut=function(ht){var ft;return ot(this,void 0,void 0,function(){var gt;return it(this,function(vt){switch(vt.label){case 0:return gt=(ft=this.audio)===null||ft===void 0?void 0:ft.setSinkId,gt?[4,gt.call(this.audio,ht)]:[3,2];case 1:vt.sent(),vt.label=2;case 2:return[2]}})})},ut.prototype.destroy=function(){this.stop(),this.audio=null,this.video=null,document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},ut.prototype.getAudioElement=function(){return this.audio},ut}();et.StreamView=pt},3409:function(_e,et,rt){var nt,ot=this&&this.__extends||(nt=function(Ut,Bt){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,At){xt.__proto__=At}||function(xt,At){for(var Mt in At)Object.prototype.hasOwnProperty.call(At,Mt)&&(xt[Mt]=At[Mt])},nt(Ut,Bt)},function(Ut,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Class extends value "+String(Bt)+" is not a constructor or null");function xt(){this.constructor=Ut}nt(Ut,Bt),Ut.prototype=Bt===null?Object.create(Bt):(xt.prototype=Bt.prototype,new xt)}),it=this&&this.__assign||function(){return it=Object.assign||function(Ut){for(var Bt,xt=1,At=arguments.length;xt<At;xt++)for(var Mt in Bt=arguments[xt])Object.prototype.hasOwnProperty.call(Bt,Mt)&&(Ut[Mt]=Bt[Mt]);return Ut},it.apply(this,arguments)},st=this&&this.__awaiter||function(Ut,Bt,xt,At){return new(xt||(xt=Promise))(function(Mt,Nt){function $t(zt){try{jt(At.next(zt))}catch(Yt){Nt(Yt)}}function Ft(zt){try{jt(At.throw(zt))}catch(Yt){Nt(Yt)}}function jt(zt){var Yt;zt.done?Mt(zt.value):(Yt=zt.value,Yt instanceof xt?Yt:new xt(function(Kt){Kt(Yt)})).then($t,Ft)}jt((At=At.apply(Ut,Bt||[])).next())})},at=this&&this.__generator||function(Ut,Bt){var xt,At,Mt,Nt,$t={label:0,sent:function(){if(1&Mt[0])throw Mt[1];return Mt[1]},trys:[],ops:[]};return Nt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function Ft(jt){return function(zt){return function(Yt){if(xt)throw new TypeError("Generator is already executing.");for(;$t;)try{if(xt=1,At&&(Mt=2&Yt[0]?At.return:Yt[0]?At.throw||((Mt=At.return)&&Mt.call(At),0):At.next)&&!(Mt=Mt.call(At,Yt[1])).done)return Mt;switch(At=0,Mt&&(Yt=[2&Yt[0],Mt.value]),Yt[0]){case 0:case 1:Mt=Yt;break;case 4:return $t.label++,{value:Yt[1],done:!1};case 5:$t.label++,At=Yt[1],Yt=[0];continue;case 7:Yt=$t.ops.pop(),$t.trys.pop();continue;default:if(Mt=$t.trys,!((Mt=Mt.length>0&&Mt[Mt.length-1])||Yt[0]!==6&&Yt[0]!==2)){$t=0;continue}if(Yt[0]===3&&(!Mt||Yt[1]>Mt[0]&&Yt[1]<Mt[3])){$t.label=Yt[1];break}if(Yt[0]===6&&$t.label<Mt[1]){$t.label=Mt[1],Mt=Yt;break}if(Mt&&$t.label<Mt[2]){$t.label=Mt[2],$t.ops.push(Yt);break}Mt[2]&&$t.ops.pop(),$t.trys.pop();continue}Yt=Bt.call(Ut,$t)}catch(Kt){Yt=[6,Kt],At=0}finally{xt=Mt=0}if(5&Yt[0])throw Yt[1];return{value:Yt[0]?Yt[1]:void 0,done:!0}}([jt,zt])}}},lt=this&&this.__importDefault||function(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}};Object.defineProperty(et,"__esModule",{value:!0}),et.ZegoStreamCenterWeb=et.CachedNodesUseMode=void 0;var ct,pt=rt(6706),ut=rt(3770),ht=rt(1547),ft=rt(5740),gt=rt(6706),vt=rt(5019),yt=rt(3849),mt=rt(6014),Et=rt(8493),bt=rt(2752),Ct=rt(3529),Tt=rt(2990),wt=rt(1089),Rt=lt(rt(3720)),It=rt(608);(function(Ut){Ut[Ut.NotReUse=0]="NotReUse",Ut[Ut.TheSameReUse=1]="TheSameReUse",Ut[Ut.DiffReUse=2]="DiffReUse",Ut[Ut.AllReUse=3]="AllReUse"})(ct=et.CachedNodesUseMode||(et.CachedNodesUseMode={}));var St=Ct.ZegoRTCLogEvent.kZegoTaskPublishStart,Pt=Ct.ZegoRTCLogEvent.kZegoTaskPlayStart,Ot=function(Ut){function Bt(xt,At,Mt,Nt,$t,Ft){var jt,zt=this;return(zt=Ut.call(this)||this).logger=xt,zt.stateCenter=At,zt.dataReport=Mt,zt.rtm=Nt,zt.ac=$t,zt.mediaEleSources=Ft,zt.testEnvironment=!1,zt.heartbeatTimer=null,zt.heartbeatInterval=1e4,zt.qualityTimerInterval=3e3,zt.previewStreamList=[],zt.signalList={},zt.chargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]},zt.soundLevelDelegate=!1,zt.soundLevelInterval=1e3,zt.enableInBackground=!1,zt.isPeer=!0,zt.probeList={},zt.isMicEnabled=!0,zt.isDataChannelEnabled=!1,zt.publishQualityInfos=[],zt.playQualityInfos=[],zt.qualityUploadTimestamp=0,zt.qualityHeadTimestamp=0,zt.gwNode="",zt.playerList={},zt.stopedPlayerList={},zt.publisherList={},zt.playSuccessCallBackList={},zt.playErrorCallBackList={},zt.waitPublishList=[],zt.waitPlayList=[],zt.autoSwitchProtocol=!0,zt.udpFailNum=0,zt.maxUdpFailNum=2,zt.qualityInterval=3e3,zt.switchScore=60,zt.defaultBadQualityTime=3e4,zt.l3BadQualityTime=1e4,zt.switchDetectResultScore=60,zt.cdnBadQualityScore=60,zt.l3BadQualityScore=60,zt.multiPlaySwitchRate=.8,zt.protocolBadQualityCount=3,zt.protocolBadQualityTime=12e3,zt.protocolQualityCacheExpiredTime=18e4,zt.fallbackInhibitionTime=18e4,zt.probeExpiredTime=3e4,zt.minProbeInterval=15e3,zt.l3DetectedTimestamp=0,zt.l3DetectResult=0,zt.isL3Fallback=!1,zt.cdnProtocolBadTimestamp=0,zt.l3ProtocolBadTimestamp=0,zt.lastHandleCDNBadTimestamp=0,zt.lastHandleL3BadTimestamp=0,zt.cdnProtocolBadTime=0,zt.l3ProtocolBadTime=0,zt.probeStartedNum=3,zt.cachedGwNodesList={},zt.cachedGwNodesMode=ct.TheSameReUse,zt.tryCountConnectInterval=3e3,zt.checkMessageTimeout=function(){for(var Yt in zt.signalList)zt.signalList[Yt].signal&&zt.signalList[Yt].signal.checkMessageTimeout()},zt.getAllInUseUrl=function(){var Yt=[];for(var Kt in zt.signalList)Yt.push(Kt);return Yt},zt.onDisconnectHandle=function(Yt,Kt){if(zt.logger.info("zsc.od.0 call"),zt.signalList[Yt]){for(var er=zt.signalList[Yt],ir=0;ir<er.publishConnectedList.length;ir++){var rr=zt.publisherList[er.publishConnectedList[ir]];rr&&rr.publisher&&rr.publisher.onDisconnect(Kt)}for(ir=0;ir<er.playConnectedList.length;ir++){var lr=zt.playerList[er.playConnectedList[ir]];lr&&lr.player&&lr.player.onDisconnect(Kt)}delete zt.signalList[Yt],zt.stopSignalHeartbeat(),zt.stateCenter.billingTimer.stopChargeInfosUpload(),zt.stopSoundLevel()}},zt.eventHandler={visibilitychange:function(){var Yt=!document.hidden;!zt.enableInBackground&&zt.soundLevelDelegate&&(Yt?(zt.enableSoundLevelProcessor(!0),zt.activeSoundLevel()):(zt.soundLevelTimer&&clearTimeout(zt.soundLevelTimer),zt.soundLevelTimer=null,zt.enableSoundLevelProcessor(!1))),zt.ac.resume()}},zt.rtm._on("_roomStateUpdate",function(Yt,Kt){for(var er in zt.playerList){var ir=zt.playerList[er],rr=ir.cdnPlayer;ir.room.roomID==Yt&&rr&&ir.player.state===gt.ENUM_PLAY_STATE.playing&&ir.playMode==pt.PlayMode.CDN&&(Kt=="CONNECTED"?(rr.canRetry=!0,rr.retry()):Kt==="DISCONNECTED"&&zt.stopPlayingStream(er))}}),document.addEventListener("visibilitychange",zt.eventHandler.visibilitychange),(jt=zt.rtm.netAgent)===null||jt===void 0||jt.on("clientInfo",function(Yt){if(zt.stateCenter.accessClientIp&&(Yt!=null&&Yt.clientIP)&&zt.stateCenter.accessClientIp!==Yt.clientIP){for(var Kt in zt.logger.warn(wt.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+zt.stateCenter.accessClientIp+" "+Yt.clientIP),zt.publisherList){var er=zt.publisherList[Kt].publisher;er.resetGwNodes(),zt.clearCachedGwNodesList(er,!0)}for(var Kt in zt.playerList){var ir=zt.playerList[Kt].player;ir.resetGwNodes(),zt.clearCachedGwNodesList(ir,!1)}}zt.stateCenter.accessClientIp=Yt.clientIP,typeof(Yt==null?void 0:Yt.timeOffset)=="number"&&(zt.stateCenter.clientTimeOffset=Yt==null?void 0:Yt.timeOffset),zt.updateTimeOffsetInterval()}),zt}return ot(Bt,Ut),Object.defineProperty(Bt.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find(function(xt){return xt.previewType==="camera"})},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"microphonePreviewStream",{get:function(){return this.previewStreamList.find(function(xt){return xt.previewType==="camera"&&xt.micTrack})},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"shouldReportNoPlaying",{get:function(){return this.stateCenter.billingTimer.shouldReportRoomTime},enumerable:!1,configurable:!0}),Bt.prototype.onSignalDisconnected=function(xt){},Bt.prototype.setQualityMonitorCycle=function(xt){var At=this;return this.logger.debug("zsc.qmc.0 timeInterval "+xt),Object.keys(this.publisherList).length==0?this.qualityTimerInterval=xt:Object.keys(this.publisherList).forEach(function(Mt){At.publisherList[Mt].publisher.qualityTimeInterval=xt,At.publisherList[Mt].publisher.setPublishQualityTimer()}),!0},Bt.prototype.setSessionInfo=function(xt,At,Mt){this.logger.debug("zsc.ssi.0 called"),this.appid=xt,this.userid=At,this.testEnvironment=Mt},Bt.prototype.onPlayStateUpdate=function(xt,At,Mt,Nt){},Bt.prototype.onPlayQualityUpdate=function(xt,At){},Bt.prototype.onPublishStateUpdate=function(xt,At,Mt){},Bt.prototype.onPublishQualityUpdate=function(xt,At){},Bt.prototype.onUpdateHeartBeatIntervalHandle=function(xt){xt!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+xt),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=xt,this.startSignalHeartbeat())},Bt.prototype.setPublishStateStart=function(xt,At,Mt,Nt,$t,Ft){var jt,zt,Yt=this;this.logger.info("zsc.pss.0 call "+At);var Kt=this.checkPreview(Mt);if(!Kt)return this.logger.error("zsc.pss.0 stream not found"),!1;if(this.publisherList[At])return this.logger.error("zsc.pss.0 publisher already exist"),this.stateCenter.reporter.spanSetAttributes({key:St.event,par:At},{error:St.error.kIsPublishing.code,message:St.error.kIsPublishing.message}),!1;var er=new ht.ZegoPublish(At,this.logger,this.dataReport,this.qualityTimerInterval,this,this.stateCenter,Kt);er.state=gt.ENUM_PUBLISH_STATE.start,er.isPeer=this.isPeer,er.reportSeq=this.stateCenter.reportSeqList.startPublish[At],er.isExternal=!0,er.cachedGwNodesMode=this.cachedGwNodesMode,er.parentSpanKey=Ct.ZegoRTCLogEvent.kZegoStartPublish.event;var ir=(jt=Kt==null?void 0:Kt.videoTrack)===null||jt===void 0?void 0:jt.label,rr="",lr="",nr=Mt.getAudioTracks()[0]&&Mt.getAudioTracks()[0].label;try{rr=(zt=Kt==null?void 0:Kt.videoTrack)===null||zt===void 0?void 0:zt.getSettings().deviceId,lr=Mt.getAudioTracks()[0]&&Mt.getAudioTracks()[0].getSettings().deviceId}catch(vr){this.logger.warn("zsc.pss.0 get device id failed. error: "+vr)}var hr=new mt.RetryStreamHandler(this.logger,this.stateCenter,this,!0);return this.publisherList[At]={seq:0,room:xt,localStream:Mt,publisher:er,serverUrls:[],ttl:0,isCenterNode:!0,streamID:At,publishOption:Nt,cameraLabel:ir||"",microLabel:nr||"",cameraDeviceId:rr||"",microDeviceId:lr||"",deviceStateCount:0,retryStreamHandler:hr,retryDispatchHandler:new Et.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:Ft,streamSid:$t},er.onPublishStateUpdate=function(vr,yr,Cr,or,ur,pr){var Er=Yt.publisherList[yr];Er?Er.retryStreamHandler.publishStateHandle(vr,Er.streamID,Cr,or,ur,pr):Yt.logger.error("zsc.psuh.0 cannot find publish "+At)},er.onPublishQualityUpdate=function(vr,yr){var Cr=Yt.publisherList[vr];Cr?(Yt.stateCenter.deviceStateOut&&yr.audio.audioBitrate===0?(Cr.deviceStateCount++,Cr.deviceStateCount>=2&&(Cr.deviceStateCount=0,Yt.stateCenter.deviceStateOut=!1,Yt.logger.warn("zsc.pss.0 publish audio error by device"))):Cr.deviceStateCount=0,Yt.onPublishQualityUpdate(Cr.streamID,yr)):Yt.logger.error("zsc.psuh.0 cannot find publish "+At)},!0},Bt.prototype.startPublishingStream=function(xt,At){At===void 0&&(At=!1),this.logger.info("zsc.sps.0 call");var Mt=this.publisherList[xt];if(!Mt)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;if(!At){if(this.stateCenter.reporter.spanSetAttributes({key:St.event,par:xt},{urls:St.urls(Mt.serverUrls),is_center:St.is_center(Mt.isCenterNode)}),!Mt.serverUrls||Mt.serverUrls.length===0)return Mt.retryStreamHandler.publishStateHandle(gt.ENUM_PUBLISH_STATE_UPDATE.error,xt,bt.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!0;var Nt=Mt.serverUrls.indexOf(this.server);Nt!==-1&&(Mt.serverUrls.splice(Nt,1),Mt.serverUrls.unshift(this.server))}var $t=Mt.retryStreamHandler;return $t.invalid(),$t.init(this.stateCenter.streamRetryTime),$t.initStream(xt,Mt.serverUrls),$t.startMaxTime(),$t.activePublish(0)},Bt.prototype.updateWaitingList=function(xt,At,Mt,Nt,$t){var Ft={streamID:Mt,success:Nt,error:$t};At?xt.publishWaitingList.push(Ft):xt.playWaitingList.push(Ft)},Bt.prototype.publishStream=function(xt){var At=this.publisherList[xt].publisher;if(At){var Mt=null,Nt=null,$t=this.publisherList[xt].publishOption,Ft=this.checkPreview(this.publisherList[xt].localStream);Ft?(Mt=Ft.localStream,Nt=Ft.videoInfo,this.stateCenter.reporter.spanSetAttributes({key:St.event,par:xt},{cap_w:St.cap_w(Ft.videoInfo.width),cap_h:St.cap_h(Ft.videoInfo.height),w:St.w(Ft.videoInfo.width),h:St.h(Ft.videoInfo.height),video_en_fps:St.video_en_fps(Ft.videoInfo.frameRate),video_en_bps:St.video_en_bps(1e3*Ft.videoInfo.bitRate)}),Mt?(this.logger.info("zsc.ps.0 call success"),this.setStreamGwNode(At,!0),At.startPublish(xt,Mt,Nt,Ft.mediaStreamConfig,$t)):this.logger.error("zsc.ps.0 no localStream found")):this.logger.error("zsc.ps.0 no preview found")}else this.logger.info("zsc.ps.0 publisher don't exist")},Bt.prototype.connectPublishServer=function(xt,At){var Mt=this,Nt=this.publisherList[xt];if(!Nt)return this.logger.error("zsc.cps.0 publisher don't exist"),!1;var $t=Date.now();return this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Nt.publisher.parentSpanKey,par:xt},{key:Ct.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:xt},Ct.ZegoRTCLogEvent.kZegoPublishServerConnect.event,!0),this.connectWithReuseSignalServer(xt,!0,At,function(Ft,jt,zt){var Yt=Mt.publisherList[Ft];if(Yt){var Kt=Yt.publisher;if(Kt){var er=Date.now()-$t;Mt.stateCenter.reporter.spanSetAttributes({key:Kt.parentSpanKey,par:Ft},{dispatch_consume:Ct.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(er)}),Kt.reportSpan.setAttributes({server_url:Ct.ZegoRTCLogEvent.kZegoTaskSDKPublishStream.server_url(zt)}),Mt.stateCenter.reporter.spanSetAttributes({key:St.event,par:Ft},{server_url:St.server_url(zt)}),Mt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:Ft},{result:0,server_url:Ct.ZegoRTCLogEvent.kZegoPublishServerConnect.server_url(zt)});var ir=jt.tokenInfo;Mt.logger.info("zsc.cps.0 update token success"),ir&&ir.report&&(Kt.qualityUpload=ir.report,Kt.qualityUploadInterval=ir.report_interval),Kt.signal=jt.signal,Mt.server=zt,Mt.publishStream(Ft),Mt.getTokenSuccess()}else Mt.logger.info("zsc.cps.1 check publisher don't exist")}else Mt.logger.info("zsc.cps.0 after connect publisher don't exist")},function(Ft,jt){Mt.logger.error("zsc.cps.0 "+Ft+" connect fail "+JSON.stringify(jt));var zt=Mt.publisherList[Ft];if(zt)if(zt.publisher){var Yt,Kt=!1;jt&&jt.code===bt.errorCodeList.GET_CONFIG_FAIL.code?(Yt=it({},bt.errorCodeList.GET_CONFIG_FAIL),Kt=!0):((Yt=it({},bt.errorCodeList.CONNECT_FAILED)).message=Yt.message+" "+jt,jt===1008&&(Yt=bt.errorCodeList.TOKEN_EXPIRED,Kt=!0),jt===20010&&(Kt=!0,Yt=JSON.parse(JSON.stringify(bt.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL)))),Mt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:Ft},{result:jt,error:Yt.code,message:Yt.message}),zt.retryStreamHandler.publishStateHandle(gt.ENUM_PUBLISH_STATE_UPDATE.error,Ft,Yt,Kt)}else Mt.logger.info("zsc.cps.1 check publisher don't exist");else Mt.logger.info("zsc.cps.0 after connect publisher don't exist")}),!0},Bt.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},Bt.prototype.stopPublishingStream=function(xt,At){this.logger.info("zsc.sps.0.1 call "+xt+" "+JSON.stringify(At));var Mt=this.publisherList[xt];if(Mt){var Nt=Mt.retryStreamHandler;for(var $t in Nt&&(Nt.stopMaxTime(),Nt.invalid()),this.signalList)this.signalList[$t].publishWaitingList=this.signalList[$t].publishWaitingList.filter(function(Ft){return Ft.streamID!==xt});delete this.publisherList[xt],Mt.publisher&&(Mt.publisher.stopPublish(At),delete Mt.publisher),this.removeStreamFromSignal(!0,xt),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),this.logger.info("zsc.sps.0.1 call success")}else this.logger.warn("zsc.sps.0.1 publisher don't exist")},Bt.prototype.connectWithReuseSignalServer=function(xt,At,Mt,Nt,$t){var Ft=this;this.logger.info("zsc.crss.0 begin "+Mt);var jt=null;if(this.signalList[Mt])(jt=this.signalList[Mt]).state==gt.ENUM_SIGNAL_STATE.connected?(this.logger.info("zsc.crss.0 already connected "+Mt+" streamId: "+xt),At?jt.publishConnectedList.push(xt):jt.playConnectedList.push(xt),Nt(xt,jt,Mt)):jt.state==gt.ENUM_SIGNAL_STATE.connecting&&(this.logger.info("zsc.crss.0 signal is connecting "+Mt+" streamId: "+xt),this.updateWaitingList(jt,At,xt,Nt,$t));else{this.logger.info("zsc.crss.0 new signal "+Mt+", streamId: "+xt);var zt=["unified_rtc","unified_l3"].includes(Mt),Yt=new vt.ZegoSignal(this.logger,this.stateCenter,this.rtm.netAgent,zt);this.stateCenter.clientIP=this.rtm.netAgent.clientIP,Yt.setSessionInfo(this.appid,this.userid),zt||(Yt.onUpdateHeartBeatInterval=this.onUpdateHeartBeatIntervalHandle.bind(this)),Yt.onDisconnect=this.onDisconnectHandle;var Kt=this.publisherList[xt]||this.playerList[xt]||null,er=Kt==null?void 0:Kt.retryStreamHandler;if(this.stateCenter.streamConnectTime)Yt.tryConnectInterval=this.stateCenter.streamConnectTime;else if(er&&er.retryActiveCount){var ir=er.retryActiveCount*(er.retryActiveCount-1)/2+2;Yt.tryConnectInterval=1e3*(ir=ir>gt.MAX_RETRY_CONNECT_INTERVAL?gt.MAX_RETRY_CONNECT_INTERVAL:ir)}this.signalList[Mt]={signal:Yt,state:gt.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[Mt],At,xt,Nt,$t);var rr=Kt==null?void 0:Kt.room.token,lr=Kt==null?void 0:Kt.room.roomID;this.logger.info("zsc.crss.0 "+rr),Yt.connectServer(lr||this.stateCenter.roomList[0].roomID,rr||this.stateCenter.roomList[0].token,Mt,function(nr,hr,vr){if(jt=Ft.signalList[Mt],nr!=0){Ft.logger.info("zsc.crss.0 connect failed "+hr);for(var yr=jt.publishWaitingList,Cr=yr.length-1;Cr>=0;Cr--)(ur=yr[Cr]).error&&ur.error(ur.streamID,nr);var or=jt.playWaitingList;for(Cr=or.length-1;Cr>=0;Cr--){var ur;(ur=or[Cr]).error&&ur.error(ur.streamID,nr)}delete Ft.signalList[Mt]}else Ft.logger.info("zsc.crss.0 connected success "+hr),jt.state=gt.ENUM_SIGNAL_STATE.connected,jt.tokenInfo=vr,jt.publishWaitingList.forEach(function(pr){pr.success&&pr.success(pr.streamID,jt,hr),jt&&jt.publishConnectedList.push(pr.streamID)}),jt.playWaitingList.forEach(function(pr){pr.success&&pr.success(pr.streamID,jt,hr),jt&&jt.playConnectedList.push(pr.streamID)}),jt.publishWaitingList=[],jt.playWaitingList=[],zt||Ft.heartbeatTimer!=null||Ft.startSignalHeartbeat(),Ft.stateCenter.billingTimer.startChargeInfosUpload(),Ft.activeSoundLevel()})}},Bt.prototype.setPlayStateStart=function(xt,At,Mt,Nt){var $t=this;if(this.logger.info("zsc.pss.1 call "+xt),this.rtm.isDisConnect()&&this.stateCenter.networkState==pt.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.1 network offline"),!1;if(this.playerList[xt])return this.logger.error("zsc.pss.1 player already exist"),this.stateCenter.reporter.spanEnd({key:Pt.event,par:xt},{error:Pt.error.kIsPlaying.code,message:Pt.error.kIsPlaying.message}),Pt.error.kPlayRepeatedPullError;var Ft=this.getPlayRoom(xt)||this.stateCenter.roomList[0];if(!Ft)return this.logger.error("zsc.pss.1 not login room"),this.stateCenter.reporter.spanEnd({key:Pt.event,par:xt},{error:Pt.error.kPlayNoLoginError.code,message:Pt.error.kPlayNoLoginError.message}),Pt.error.kPlayNoLoginError;var jt=new yt.ZegoPlayWeb(xt,this.logger,null,this.dataReport,this.qualityTimerInterval,this,this.ac,this.stateCenter);!Ft.streamList.find(function(rr){return rr.stream_id===xt})&&(jt.streamInRoom=!1),At&&[0,1,2,3].includes(At.resourceMode)&&(jt.resourceMode=At.resourceMode),jt.state=gt.ENUM_PLAY_STATE.start,jt.isPeer=this.isPeer,jt.reportSeq=this.stateCenter.reportSeqList.startPlay[xt],jt.isExternal=!0,jt.cachedGwNodesMode=this.cachedGwNodesMode,jt.parentSpanKey=Ct.ZegoRTCLogEvent.kZegoStartPlay.event,jt.beginTime=new Date().getTime();var zt=new mt.RetryStreamHandler(this.logger,this.stateCenter,this,!1),Yt=pt.PlayMode.CDN,Kt="cdn",er=new Date().getTime();for(var ir in this.playerList)if(this.playerList[ir].playMode==pt.PlayMode.L3){Yt=pt.PlayMode.L3,Kt="l3";break}return this.cdnProtocolBadTimestamp&&this.cdnProtocolBadTimestamp+this.protocolQualityCacheExpiredTime>er&&this.l3ProtocolBadTimestamp==0&&(Yt=pt.PlayMode.L3,Kt="l3"),this.stateCenter.reporter.spanSetAttributes({key:Pt.event,par:xt},{resource_mode:Pt.resource_mode(jt.resourceMode),src:Pt.src(jt.resourceMode===pt.ResourceMode.DG?Kt:(0,It.getPlaySourceType)(jt.resourceMode)),room_id:Pt.room_id(Ft==null?void 0:Ft.roomID),room_sid_string:Pt.room_sid_string(Ft==null?void 0:Ft.roomSessionID),is_multi:Pt.is_multi(this.stateCenter.isMultiRoom)}),this.playerList[xt]={seq:0,room:Ft,player:jt,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:xt,playOption:At,retryStreamHandler:zt,retryDispatchHandler:new Et.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:Nt,cdnPlayer:At==null?void 0:At.CDNPlayer,playMode:Yt,streamSid:Mt},jt.onPlayStateUpdate=function(rr,lr,nr,hr,vr,yr){var Cr=$t.playerList[lr];Cr?zt.playStateHandle(rr,Cr.streamID,nr,hr,vr,yr):$t.logger.error("zsc.pss.1 cannot find play "+lr)},jt.onPlayQualityUpdate=function(rr,lr){var nr=$t.playerList[rr];nr?$t.onPlayQualityUpdate(nr.streamID,lr):$t.logger.error("zsc.pss.1 cannot find play "+rr)},jt.onRemoteCameraStatusUpdate=function(rr,lr,nr){var hr=$t.playerList[rr];hr?$t.onRemoteCameraStatusUpdate(hr.streamID,lr,nr):$t.logger.error("zsc.pss.1 cannot find play "+rr)},jt.onRemoteMicStatusUpdate=function(rr,lr,nr){var hr=$t.playerList[rr];hr?$t.onRemoteMicStatusUpdate(hr.streamID,lr,nr):$t.logger.error("zsc.pss.1 cannot find play "+rr)},!0},Bt.prototype.onRemoteMicStatusUpdate=function(xt,At,Mt){},Bt.prototype.onRemoteCameraStatusUpdate=function(xt,At,Mt){},Bt.prototype.startPlayingStream=function(xt,At,Mt,Nt){var $t;At===void 0&&(At=!1),this.logger.info("zsc.sps.1 start play called");var Ft=this.playerList[xt];if(!(($t=Ft.playOption)===null||$t===void 0)&&$t.CDNVideo&&Ft.player.firstPlay){var jt=Ft.playOption.CDNVideo;Ft.player._CDNPlayerClone=jt.cloneNode(),Ft.player.initPoster=(jt==null?void 0:jt.getAttribute("poster"))||"",Ft.player.initVideoStyle=(jt==null?void 0:jt.getAttribute("style"))||"",Ft.player.firstPlay=!1}if(Nt)return this.playCDN(xt,this.playerList[xt].playOption,this.playSuccessCallBackList[xt],this.playErrorCallBackList[xt]),!0;if(!Ft)return this.logger.error("zsc.sps.1 player don't exist"),!1;var zt=Ft.player;if(xt.indexOf("zegoprobe-")==-1&&Ft.playMode==pt.PlayMode.L3&&this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:xt},{key:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:xt},Ct.ZegoRTCLogEvent.kZegoTaskL3Play.event).setAttributes({tryidx:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(zt.tryidx),biz_product:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(Ft.playOption.resourceMode==pt.ResourceMode.DG?1:0)}),this.stateCenter.reporter.spanSetAttributes({key:Pt.event,par:xt},{urls:Pt.urls(Ft.serverUrls),is_center:Pt.is_center(Ft.isCenterNode)}),!At){if(Ft.serverUrls.length==0)return Ft.retryStreamHandler.playStateHandle(gt.ENUM_PLAY_STATE_UPDATE.error,xt,bt.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1;var Yt=Ft.serverUrls.indexOf(this.server);Yt!==-1&&(Ft.serverUrls.splice(Yt,1),Ft.serverUrls.unshift(this.server))}var Kt=Ft.retryStreamHandler;return Kt.invalid(),Kt.init(this.stateCenter.streamRetryTime),Kt.initStream(xt,Ft.serverUrls),Kt.startMaxTime(),Kt.activePull(0,Mt)},Bt.prototype.connectPlayServer=function(xt,At,Mt){var Nt=this,$t=this.playerList[xt];if(!$t)return this.logger.error("zsc.cps.1 player don't exist"),!1;this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:$t.player.parentSpanKey,par:xt},{key:Ct.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:xt},Ct.ZegoRTCLogEvent.kZegoPlayServerConnect.event,!0);var Ft=Date.now();return this.connectWithReuseSignalServer(xt,!1,Mt,function(jt,zt,Yt){var Kt=Nt.playerList[jt];if(Kt){var er=Kt.player;if(er){er.reportSpan.setAttributes({server_url:Ct.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.server_url(Yt)});var ir=Date.now()-Ft;Nt.stateCenter.reporter.spanSetAttributes({key:er.parentSpanKey,par:jt},{dispatch_consume:Ct.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(ir)}),Nt.stateCenter.reporter.spanSetAttributes({key:Pt.event,par:jt},{server_url:Pt.server_url(Yt)}),Nt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:jt},{result:0,server_url:Yt});var rr=zt.tokenInfo;Nt.logger.info("zsc.cps.1 update token success"),rr&&rr.report&&(er.qualityHandler.qualityUpload=rr.report,er.qualityHandler.qualityUploadInterval=rr.report_interval),er.signal=zt.signal,Nt.server=Yt,Nt.playStream(jt,At),Nt.getTokenSuccess()}else Nt.logger.error("zsc.cps.1 checkplayer don't exist")}else Nt.logger.error("zsc.cps.1 after connect player don't exist")},function(jt,zt){var Yt=Nt.playerList[jt];if(Yt){var Kt=it({},bt.errorCodeList.CONNECT_FAILED);Kt.message=Kt.message+" "+zt,zt===1008&&(Kt=bt.errorCodeList.TOKEN_EXPIRED),Nt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:jt},{result:zt,error:Kt.code,message:Kt.message});var er=zt==1008;zt===20010&&(er=!0,Kt=Mt==="unified_l3"?bt.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL:bt.errorCodeList.PLAYER_SESSION_REQUEST_FAIL),Yt.retryStreamHandler.playStateHandle(gt.ENUM_PLAY_STATE_UPDATE.error,jt,Kt,er)}else Nt.logger.error("zsc.cps.1 after connect player don't exist")}),!0},Bt.prototype.playStream=function(xt,At){var Mt=this.playerList[xt].player;Mt?(this.logger.info("zsc.ps.1 call success"),this.setStreamGwNode(Mt,!1),Mt.startPlay(xt,At,this.playerList[xt].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},Bt.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var xt=0;for(var At in this.signalList)xt+=1;this.heartbeatTimer&&xt==0&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},Bt.prototype.removeStreamFromSignal=function(xt,At){this.logger.info("zsc.rsfs.0 call "+xt+" "+At);var Mt=[];for(var Nt in this.signalList){var $t=this.signalList[Nt];if(xt){for(var Ft=0;Ft<$t.publishConnectedList.length;Ft++)if($t.publishConnectedList[Ft]===At){this.logger.debug("zsc.rsfs.0 found from publish"),$t.publishConnectedList.splice(Ft,1);break}for(Ft=0;Ft<$t.publishWaitingList.length;Ft++)if($t.publishWaitingList[Ft].streamID===At){this.logger.debug("zsc.rsfs.0 found from publish"),$t.publishWaitingList.splice(Ft,1);break}}else{for(var jt=0;jt<$t.playConnectedList.length;jt++)if($t.playConnectedList[jt]===At){this.logger.debug("zsc.rsfs.0 found from play"),$t.playConnectedList.splice(jt,1);break}for(jt=0;jt<$t.playWaitingList.length;jt++)if($t.playWaitingList[jt].streamID===At){this.logger.debug("zsc.rsfs.0 found from play"),$t.playWaitingList.splice(jt,1);break}}$t.publishConnectedList.length==0&&$t.playConnectedList.length==0&&$t.publishWaitingList.length==0&&$t.playWaitingList.length==0&&($t.signal.disconnectServer(),Mt.push(Nt))}for(var zt=0;zt<Mt.length;zt++)delete this.signalList[Mt[zt]],this.server==Mt[zt]&&(this.server="")},Bt.prototype.stopPlayingStream=function(xt,At,Mt){var Nt=this.playerList[xt];if(Nt){var $t=Nt.retryStreamHandler,Ft=Nt.cdnPlayer;for(var jt in $t&&($t.stopMaxTime(),$t.invalid()),this.signalList)this.signalList[jt].playWaitingList=this.signalList[jt].playWaitingList.filter(function(Yt){return Yt.streamID!==xt});if(Nt.playMode==pt.PlayMode.CDN&&Ft&&(this.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:xt}),Ft.stop()),xt.indexOf("zegoprobe-")==-1&&Nt.playMode==pt.PlayMode.L3&&this.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:xt}),delete this.playerList[xt],Nt.player){Nt.player.stopPlay(At,Mt);var zt=Nt.player.rtcViewer;zt&&zt.stop()}this.removeStreamFromSignal(!1,xt),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[xt],delete this.playErrorCallBackList[xt],this.logger.debug("zsc.sps.1.1 call success")}else this.logger.info("zsc.sps.1.1 player don't exist")},Bt.prototype.reset=function(xt,At,Mt){var Nt,$t,Ft,jt;for(var zt in this.logger.info("zsc.rs call "+xt+" "+At+" "+Mt),this.publisherList)if(this.publisherList[zt].room.roomID==xt||!xt){At===0?this.publisherList[zt].publisher.stopReason="Logout":At==1002031&&(this.publisherList[zt].publisher.stopReason="ReachMaxAVRetryTime");var Yt=At==1002031?St.error.kPublishRetryTimeoutError:{code:At||0,message:""};($t=(Nt=this.publisherList[zt].room)===null||Nt===void 0?void 0:Nt.streamHandler)===null||$t===void 0||$t.onPublishStateUpdate(gt.ENUM_PUBLISH_STATE_UPDATE.error,zt,Yt),Mt&&this.stateCenter.waitPublishStreamList[zt]?this.stateCenter.waitPublishStreamList[zt].retryStart=!0:Mt||delete this.stateCenter.waitPublishStreamList[zt],this.stopPublishingStream(zt,Yt)}var Kt=function(rr){er.playerList[rr].player.stopReason=At===0?"Logout":"ReachMaxAVRetryTime";var lr=er.playerList[rr].room;if(Mt&&((jt=(Ft=er.playerList[rr])===null||Ft===void 0?void 0:Ft.player)===null||jt===void 0?void 0:jt.state)<=gt.ENUM_PLAY_STATE.playing){var nr=er.playerList[rr],hr=nr==null?void 0:nr.player;er.stopedPlayerList[rr]={streamID:rr,playStream:hr.playStream,roomID:nr.room.roomID,playOption:nr.playOption,state:hr.state,sucCallBack:(hr==null?void 0:hr.state)!==gt.ENUM_PLAY_STATE.playing?er.playSuccessCallBackList[rr]:void 0,errCallBack:(hr==null?void 0:hr.state)!==gt.ENUM_PLAY_STATE.playing?er.playErrorCallBackList[rr]:void 0}}if(lr.roomID!=xt||!lr.streamList.find(function(Cr){return Cr.stream_id==rr})&&er.stateCenter.roomList.length!=1){if(lr.roomID==xt&&er.stateCenter.roomList.length>1){var vr=er.stateCenter.roomList.find(function(Cr){return Cr.roomID!==xt});vr?er.playerList[rr].room=vr:(er.stopPlayingStream(rr),er.onPlayStateUpdate(gt.ENUM_PLAY_STATE_UPDATE.error,rr,Pt.error.kPlayRetryTimeoutError))}}else{var yr=At==1002031?Pt.error.kPlayRetryTimeoutError:{code:At||0,message:""};er.onPlayStateUpdate(gt.ENUM_PLAY_STATE_UPDATE.error,rr,yr),er.stopPlayingStream(rr,yr)}},er=this;for(var ir in this.playerList)Kt(ir);Object.keys(this.publisherList).length==0&&Object.keys(this.playerList).length==0&&(this.probeList={}),this.waitPublishList=[],this.waitPlayList=[],this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=0,this.qualityUploadTimestamp=0,this.l3DetectedTimestamp=0,this.l3DetectResult=0,this.isL3Fallback=!1,this.cdnProtocolBadTimestamp=0,this.l3ProtocolBadTimestamp=0,this.lastHandleCDNBadTimestamp=0,this.lastHandleL3BadTimestamp=0,this.cdnProtocolBadTime=0,this.l3ProtocolBadTime=0,this.qualityWebsocket&&(this.qualityWebsocket.close(),this.qualityWebsocket=void 0),this.logger.info("zsc.rs call success")},Bt.prototype.startSignalHeartbeat=function(){var xt=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout(function(){xt.checkSignalHeartbeat()},this.heartbeatInterval)},Bt.prototype.checkSignalHeartbeat=function(){for(var xt in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[xt].signal&&this.signalList[xt].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},Bt.prototype.getChargeInfos=function(){this.logger.debug("zsc.cci.0 call");var xt={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};for(var At in this.shouldReportNoPlaying&&(xt.no_playing=1),this.chargeInfos.timestamp_begin=new Date().getTime(),this.publisherList){this.publisherList[At].publisher.state===gt.ENUM_PUBLISH_STATE.publishing&&(xt.is_publishing=1);break}xt.play_max_audio_bitrate=0;var Mt=function(Ft){var jt={width:Nt.playerList[Ft].player.qualityHandler.lastPlayStats.frameWidth,height:Nt.playerList[Ft].player.qualityHandler.lastPlayStats.frameHeight};if(!jt.height||!jt.width){var zt=Nt.playerList[Ft].player.playStream;jt=zt&&zt.getVideoTracks().length!==0?zt.getVideoTracks()[0].getSettings():void 0}var Yt={video_width:jt&&jt.width?jt.width:0,video_height:jt&&jt.height?jt.height:0,count:1};if(!xt.play_stream_resolution_infos.find(function(er){return er.video_width==Yt.video_width&&er.video_height==Yt.video_height&&(er.count++,!0)})&&xt.play_stream_resolution_infos.push(Yt),Yt.video_width==0&&Yt.video_height==0){var Kt=1e3*Nt.playerList[Ft].player.qualityHandler.lastPlayStats.audioBitrate;Kt>xt.play_max_audio_bitrate&&(xt.play_max_audio_bitrate=Kt)}},Nt=this;for(var $t in this.playerList)Mt($t);return xt.play_stream_resolution_infos.length!==0&&this.shouldReportNoPlaying&&(xt.no_playing=0),this.chargeInfos.timestamp_end!==0?(this.chargeInfos.timestamp_diff=this.chargeInfos.timestamp_begin-this.chargeInfos.timestamp_end,this.chargeInfos.timestamp_diff_flag=1):(this.chargeInfos.timestamp_diff=0,this.chargeInfos.timestamp_diff_flag=0),this.chargeInfos.timestamp_end=new Date().getTime(),this.chargeInfos.infos=[xt],this.chargeInfos},Bt.prototype.getPublisher=function(xt){var At=null;if(typeof xt=="string"&&this.publisherList[xt]&&this.publisherList[xt].publisher)At=this.publisherList[xt].publisher;else if(xt instanceof MediaStream){var Mt=this.checkPublish(xt);Mt&&(At=Mt==null?void 0:Mt.publisher)}return At},Bt.prototype.getPreviewer=function(xt){var At,Mt=null;return typeof xt=="string"&&this.publisherList[xt]&&this.publisherList[xt].publisher?Mt=(At=this.publisherList[xt].publisher)===null||At===void 0?void 0:At.previewer:xt instanceof MediaStream&&(Mt=this.checkPreview(xt)),Mt},Bt.prototype.checkPlayer=function(xt){var At=Object.values(this.playerList).find(function(Mt){return Mt.player.playStream===xt});return(At==null?void 0:At.player)||null},Bt.prototype.checkPreview=function(xt){for(var At=0;At<this.previewStreamList.length;At++)if(this.previewStreamList[At].localStream===xt)return this.previewStreamList[At];return null},Bt.prototype.checkPublish=function(xt){for(var At in this.publisherList)if(this.publisherList[At].localStream==xt)return this.publisherList[At];return null},Bt.prototype.getPublishList=function(xt){var At=[];for(var Mt in this.publisherList)this.publisherList[Mt].localStream==xt&&At.push(this.publisherList[Mt]);return At},Bt.prototype.removePreview=function(xt){for(var At=0;At<this.previewStreamList.length;At++)if(this.previewStreamList[At]===xt){this.previewStreamList.splice(At,1);break}},Bt.prototype.onPlayerStreamUrlUpdate=function(xt,At,Mt){},Bt.prototype.getScreenConstrains=function(xt){var At={};if(typeof xt=="boolean"&&xt)At={audio:!1,video:{frameRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};else if(typeof xt=="object"){switch(xt.videoQuality){case 1:At={video:{frameRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate},bitRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate};break;case 3:At={video:{frameRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate},bitRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate};break;case 4:At={video:{frameRate:xt.frameRate,width:xt.width,height:xt.height},bitRate:xt.bitRate};break;case 2:At={video:{frameRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};break;default:At={video:{frameRate:gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||gt.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate}}At.audio=typeof xt.audio=="boolean"&&xt.audio,At=it(it(it({},xt),At),{width:void 0,height:void 0,frameRate:void 0})}return At},Bt.prototype.createScreenPreviewer=function(xt,At){var Mt=new ut.ZegoPreview(this.logger,this.ac,this.stateCenter,this,"screen"),Nt=xt.getVideoTracks()[0].getSettings();return this.previewStreamList.push(Mt),Mt.mediaStreamConfig=At,xt.getAudioTracks().length>0&&(Mt.audioTrack=xt.getAudioTracks()[0]),Mt.localStream=xt,Mt.videoInfo={width:Nt.width,height:Nt.height,frameRate:Nt.frameRate||15,bitRate:(At==null?void 0:At.bitRate)||1e3,startBitrate:(At==null?void 0:At.startBitrate)||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:At==null?void 0:At.minBitrate,keyFrameInterval:At==null?void 0:At.keyFrameInterval},Mt.previewSuc=!0,Mt.previewType="screen",At!=null&&At.videoOptimizationMode&&this.setVideoTrackContentHint(xt,At==null?void 0:At.videoOptimizationMode),Mt},Bt.prototype.setSoundLevelDelegate=function(xt,At,Mt){Mt===void 0&&(Mt=!1),this.logger.info("zsc.ssd.0 call"),At&&this.setSoundLevelInterval(At),this.soundLevelDelegate=xt,this.enableInBackground=Mt,this.enableSoundLevelProcessor(xt),xt?(this.logger.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.logger.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},Bt.prototype.setSoundLevelInterval=function(xt){var At,Mt;if(xt&&this.soundLevelDelegate){for(var Nt in this.soundLevelInterval=xt,this.previewStreamList)(At=this.previewStreamList[Nt].soundMeterWorklet)===null||At===void 0||At.setInterval(xt);for(var Nt in this.playerList)(Mt=this.playerList[Nt].player.soundMeterWorklet)===null||Mt===void 0||Mt.setInterval(xt)}},Bt.prototype.enableSoundLevelProcessor=function(xt){for(var At in this.previewStreamList){var Mt=this.previewStreamList[At];xt?Mt.startSoundLevel():Mt.stopSoundLevel()}for(var At in this.playerList){var Nt=this.playerList[At].player;xt?Nt.startSoundLevel():Nt.stopSoundLevel()}},Object.defineProperty(Bt.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),Bt.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},Bt.prototype.startSoundLevel=function(){var xt=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout(function(){xt.startSoundLevel()},this.soundLevelInterval))},Bt.prototype.checkSoundLevel=function(){this.logger.debug("zsc.csl.0 call");var xt=[];for(var At in this.publisherList){var Mt=0,Nt=this.publisherList[At].publisher,$t=Nt.previewer;$t&&(Mt=$t.soundLevel),xt.push({streamID:this.getBackStreamId(Nt.streamId),soundLevel:Mt,type:"push"})}for(var At in this.playerList){var Ft=this.playerList[At].player;Ft.streamId&&!Ft.isProbe&&xt.push({streamID:this.getBackStreamId(Ft.streamId),soundLevel:Ft.soundLevel,type:"pull"})}this.soundLevelDelegate&&xt.length>0&&this.onSoundLevelUpdate(xt)},Bt.prototype.checkMicSoundLevel=function(){this.microphonePreviewStream&&this.soundLevelDelegate&&this.onMicSoundLevelUpdate(this.microphonePreviewStream.soundLevel)},Bt.prototype.getBackStreamId=function(xt){return this.testEnvironment&&xt?xt.replace("zegotest-"+this.appid+"-",""):xt},Bt.prototype.onSoundLevelUpdate=function(xt){},Bt.prototype.onMicSoundLevelUpdate=function(xt){},Bt.prototype.stopSoundLevel=function(){this.soundLevelTimer&&!this.hasRemoteStream&&this.previewStreamList.length===0&&(this.logger.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},Bt.prototype.startNetProbe=function(xt,At,Mt,Nt){var $t=this,Ft=this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},Ct.ZegoRTCLogEvent.kZegoNetProbe.event);if(this.isPeer)if(Nt){var jt="zegoprobe-"+new Date().getTime();this.setPlayStateStart(jt);var zt=this.playerList[jt]?this.playerList[jt].player:null;if(!zt)return;zt.isProbe=!0,this.playerList[jt].serverUrls=["unified_l3"],this.startPlayingStream(jt,!0,function(){}),this.playerList[jt].player.isProbeByDG=!0,zt.onCalNetQualityResult=function(Kt,er){$t.logger.info("zc.ocnqr.0 l3 detect "+Kt+" "+er),$t.stopPlayingStream(jt),$t.l3DetectResult=er,$t.l3DetectedTimestamp=new Date().getTime()}}else{var Yt=!0;Mt&&Mt.length==0&&At&&(Yt=!1,Mt=xt?this.publisherList[At.streamId].serverUrls:this.playerList[At.streamId].serverUrls),Mt&&At&&Mt.forEach(function(Kt){if(!($t.probeList[Kt]&&$t.probeList[Kt].timeStamp+9e5<new Date().getTime()||At.probeState==gt.ENUM_PROBE_STATE.probed)){var er="zegoprobe-"+new Date().getTime();$t.setPlayStateStart(er);var ir=$t.playerList[er]?$t.playerList[er].player:null;ir&&(ir.isProbe=!0,Yt?(ir.gwNode=Kt,ir.signal=At.signal,ir.startPlay(er,function(){})):$t.connectPlayServer(er,function(){},Kt),ir.onCalNetQualityResult=function(rr,lr){$t.logger.info("zc.ocnqr.0 "+ir.gwNode+" "+rr+" "+lr),$t.probeList[Kt]={result:rr,netQuality:lr,timeStamp:new Date().getTime()};var nr=Object.keys($t.probeList),hr=Mt&&Mt.every(function(vr){return nr.findIndex(function(yr){return yr===vr})>=0});At.gwNode==Kt||At.signal.server==Kt?At.netQuality=lr:$t.handleCalNetQualityResult(xt,rr,lr,At,Kt,hr),$t.stopPlayingStream(er),Ft.setAttributes({net_quality:Ct.ZegoRTCLogEvent.kZegoNetProbe.net_quality(parseInt(At.netQuality+"")),node_list:Ct.ZegoRTCLogEvent.kZegoNetProbe.node_list(Mt)}),Ft.end()})}})}else this.stateCenter.reporter.setError(Ft,{code:-1,message:"not support peer"})},Bt.prototype.handleCalNetQualityResult=function(xt,At,Mt,Nt,$t,Ft){if(this.logger.info("zc.hcqr.0 "+Nt.netQuality+" probe "+Mt+" "+$t),At===0){var jt=this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},Ct.ZegoRTCLogEvent.kZegoNetProbeResult.event),zt=!1;Mt>Math.max(75,Nt.netQuality+20)&&Nt.probeState==gt.ENUM_PROBE_STATE.tryProbe?(zt=!0,this.retryStream(Nt,xt,$t),Nt.probeState=gt.ENUM_PROBE_STATE.probed):(zt=!1,Nt.probeState==gt.ENUM_PROBE_STATE.tryProbe&&Ft&&Nt.netProbeToReDispatch(),this.logger.warn("zc.hcqr.0 "+Nt.netQuality+" probe "+Mt+" "+$t));var Yt=Ct.ZegoRTCLogEvent.kZegoNetProbeResult;jt.setAttributes({is_switch:Yt.is_switch(zt),is_publish:Yt.is_publish(xt),stream_id:Yt.stream_id(Nt.streamId),result:Yt.result(At),node:Yt.node($t),net_quality:Yt.net_quality(parseInt(Nt.netQuality+"")),probe_net_quality:Yt.probe_net_quality(parseInt(Mt+""))}),jt.end()}},Bt.prototype.retryStream=function(xt,At,Mt){if(At){var Nt=xt,$t=Nt.streamId,Ft=Nt.localStream,jt=Nt.videoInfo,zt=Nt.mediaStreamConfig,Yt=Nt.publishOption;Nt.sessionId!=0&&Nt.signal&&Nt.shouldSendCloseSession()&&(Nt.signal.sendCloseSession(this.stateCenter.getSeq(),Nt.sessionId,1),Nt.signal.removeSession(Nt.sessionId),Nt.closeSessionSignal=!0),Nt.resetPublish(),this.publisherList[$t].isCenterNode?(Nt.gwNode=Mt,Nt.startPublish($t,Ft,jt,zt,Yt)):(Nt.isExternal=!1,this.connectPublishServer($t,Mt))}else{var Kt=xt,er=($t=Kt.streamId,Kt.getRemoteStreamSuc),ir=Kt.playOption;Kt.sessionId!=0&&Kt.signal&&Kt.shouldSendCloseSession()&&(Kt.signal.sendCloseSession(this.stateCenter.getSeq(),Kt.sessionId,1),Kt.signal.removeSession(Kt.sessionId),Kt.closeSessionSignal=!0),Kt.resetPlay(),this.playerList[$t].isCenterNode?(Kt.gwNode=Mt,Kt.startPlay($t,er,ir)):(Kt.isExternal=!1,this.connectPlayServer($t,er,Mt))}},Bt.prototype.getRoomByStreamID=function(xt){return this.publisherList[xt]?this.publisherList[xt].room:this.playerList[xt]?this.playerList[xt].room:void 0},Bt.prototype.setVideoTrackContentHint=function(xt,At){if(typeof At=="string"){var Mt=At.toLowerCase();if(["default","motion","detail","text"].includes(Mt)){var Nt=xt.getVideoTracks()[0];Nt?"contentHint"in Nt?(this.logger.info("zc.svtch "+Mt),Nt.contentHint=Mt=="default"?"":Mt):this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.logger.warn("zc.svtch video track no found")}else this.logger.warn("zc.svtch videoOptimizationMode wrong")}else this.logger.warn("zc.svtch videoOptimizationMode type wrong")},Bt.prototype.getPlayRoom=function(xt){return this.stateCenter.roomList.find(function(At){return!!At.streamList.find(function(Mt){return Mt.stream_id==xt})})},Bt.prototype.getQualityHead=function(xt,At){var Mt=new Uint8Array(12);Mt[0]=0,Mt[1]=12,Mt[2]=xt.length>>8,Mt[3]=xt.length-(Mt[2]<<8),Mt[4]=At.length>>24,Mt[5]=At.length-(Mt[4]<<24)>>16,Mt[6]=At.length-(Mt[4]<<24)-(Mt[5]<<16)>>8,Mt[7]=At.length-(Mt[4]<<24)-(Mt[5]<<16)-(Mt[6]<<8);var Nt=Math.ceil(new Date().getTime()/1e3);return Mt[8]=Nt>>24,Mt[9]=Nt-(Mt[8]<<24)>>16,Mt[10]=Nt-(Mt[8]<<24)-(Mt[9]<<16)>>8,Mt[11]=Nt-(Mt[8]<<24)-(Mt[9]<<16)-(Mt[10]<<8),Mt},Bt.prototype.streamQualityUpload=function(){var xt,At=this,Mt=typeof this.stateCenter.clientTimeOffset=="number"?this.stateCenter.clientTimeOffset:Rt.default.MAX_VALUE;if(Object.keys(this.publisherList).length>0||Object.keys(this.playerList).length>0){var Nt={version:14,timestamp:Math.round(this.qualityHeadTimestamp/1e3),event:0,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,biz_type:1,time_offset:Mt,os_type:It.ClientUtil.getOsType(),sdk_version:gt.PROTO_VERSION,scenario:this.stateCenter.scenario},$t={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos,client_type:2},Ft=Tt.logreport.SpeedLogHead.create(Nt),jt=Tt.logreport.QualityEvent.create($t),zt=Tt.logreport.SpeedLogHead.encode(Ft).finish(),Yt=Tt.logreport.QualityEvent.encode(jt).finish(),Kt=this.getQualityHead(zt,Yt),er=new Uint8Array(12+zt.length+Yt.length);er.set(Kt),er.set(zt,12),er.set(Yt,12+zt.length);var ir=(xt=this.logger.url)===null||xt===void 0?void 0:xt.split("/")[2];if(!ir)return;var rr=function(){return new Promise(function(lr){if(At.qualityWebsocket&&At.qualityWebsocket.readyState!=2&&At.qualityWebsocket.readyState!=3)At.qualityWebsocket.readyState==1&&lr(At.qualityWebsocket);else{var nr=At.stateCenter.appid,hr=At.stateCenter.idName,vr=At.stateCenter.roomList[0].token,yr="wss://".concat(ir,"/ws/report/stream?appid=").concat(nr,"&product=rtc&token=").concat(encodeURIComponent(vr),"&id_name=").concat(hr);At.qualityWebsocket=new WebSocket(yr),At.qualityWebsocket.onopen=function(){At.qualityWebsocket&&lr(At.qualityWebsocket)},At.qualityWebsocket.onclose=function(){At.logger.info(wt.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" speed log socket close")}}})};rr().then(function(lr){var nr=Date.now()%1e4,hr=!1;lr.onmessage=function(vr){(vr.data+"").includes("success")&&(At.logger.info(wt.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" quality (".concat(nr,") upload success")),hr=!0),lr.onmessage=null},setTimeout(function(){return st(At,void 0,void 0,function(){return at(this,function(vr){switch(vr.label){case 0:return hr?[3,2]:[4,rr()];case 1:vr.sent().send(er),this.logger.info(wt.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" retry upload quality (".concat(nr,"), length: ")+er.length+"."),vr.label=2;case 2:return[2]}})})},3e3),lr.send(er),At.logger.info(wt.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" upload quality (".concat(nr,"), length: ")+er.length+".")})}},Bt.prototype.updateQuality=function(xt,At){var Mt=new Date().getTime(),Nt=JSON.stringify(this.publishQualityInfos).length+JSON.stringify(this.playQualityInfos).length;this.qualityUploadTimestamp!==0&&Mt-this.qualityUploadTimestamp>6e4||Nt>8e3?(this.streamQualityUpload(),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=new Date().getTime(),this.qualityUploadTimestamp=Mt):this.qualityHeadTimestamp==0&&(this.qualityHeadTimestamp=new Date().getTime(),this.qualityUploadTimestamp=Mt),xt==0?this.handlePublishQualityData(At):this.handlePlayQualityData(At)},Bt.prototype.handlePublishQualityData=function(xt){var At=this.publishQualityInfos.find(function(Nt){return Nt.stream_id==xt.stream_id&&Nt.video_width==xt.frameWidth&&Nt.video_height==xt.frameHeight});if(!At){var Mt=this.getRoomByStreamID(xt.stream_id);At={stream_id:xt.stream_id,session_id:Mt?Number(Mt.sessionID):0,video_width:xt.frameWidth,video_height:xt.frameHeight,infos:[],room_id:Mt?Mt.roomID:"",evnvironment:1,room_session_id:Mt?Number(Mt.roomSessionID):0,resource_type:2},this.publishQualityInfos.push(At)}At.infos.push({audio_bitrate:Math.round(xt.audioBitrate)||0,video_bitrate:Math.round(xt.videoBitrate)||0,video_capture_fps:Math.round(10*xt.videoFPS)||0,video_network_fps:Math.round(10*xt.videoTransferFPS)||0,uplink_plr:xt.audioPacketsLostRate,rtt:Math.round(1e3*xt.currentRoundTripTime)||0,audio_network_fps:Math.round(10*xt.audioFPS),captured_sound_level:Math.round(xt.audioLevel),sample_time_offset:Math.abs(Math.round((xt.timeStamp-this.qualityHeadTimestamp)/10))})},Bt.prototype.handlePlayQualityData=function(xt){var At,Mt=this.playQualityInfos.find(function(Ft){return Ft.stream_id==xt.stream_id&&Ft.video_width==xt.frameWidth&&Ft.video_height==xt.frameHeight});if(!Mt){var Nt=this.getRoomByStreamID(xt.stream_id),$t=(At=this.playerList[xt.stream_id])===null||At===void 0?void 0:At.player;Mt={stream_id:xt.stream_id,session_id:Nt?Number(Nt.sessionID):0,video_width:xt.frameWidth,video_height:xt.frameHeight,infos:[],room_id:Nt?Nt.roomID:"",room_session_id:Nt?Number(Nt.roomSessionID):0,resource_type:($t==null?void 0:$t.resourceMode)===0?2:3},this.playQualityInfos.push(Mt)}Mt.infos.push({audio_bitrate:Math.round(xt.audioBitrate)||0,video_bitrate:Math.round(xt.videoBitrate)||0,video_network_fps:Math.round(10*xt.videoFPS)||0,downlink_plr:Math.round(xt.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*xt.audioFPS)||0,audio_break_duration:Math.round(xt.audio_break_duration/10),video_break_duration:Math.round(xt.video_break_duration/10),rtt:Math.round(1e3*xt.currentRoundTripTime)||0,rendered_sound_level:Math.round(xt.audioLevel),audio_break_cancel_duration:Math.round(xt.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(xt.video_break_cancel_duration/10),audio_decode_time:Math.round(xt.audio_decode_time/10),video_decode_time:Math.round(xt.video_decode_time/10),real_sampling_interval:Math.round(xt.real_sampling_interval/10),video_frames_decoded:Math.round(xt.videoFramesDecoded)||0,video_frames_dropped:Math.round(xt.videoFramesDropped)||0,sample_time_offset:Math.abs(Math.round((xt.timeStamp-this.qualityHeadTimestamp)/10)),peer_to_peer_plr:xt.peerToPeerPacketLostRate,peer_to_peer_delay:xt.peerToPeerDelay})},Bt.prototype.setIsPeer=function(xt){this.isPeer=xt,Object.values(this.publisherList).forEach(function(At){At.publisher.isPeer=xt}),Object.values(this.playerList).forEach(function(At){At.player.isPeer=xt})},Bt.prototype.getCDNUrl=function(xt,At){var Mt,Nt,$t,Ft=((Mt={})[pt.ResourceMode.RTC]=1,Mt[pt.ResourceMode.CDN]=0,Mt[pt.ResourceMode.L3]=2,Mt[pt.ResourceMode.DG]=3,Mt),jt=this.stateCenter.appConfig.media_config.play_config.resource_info;if(jt.length){var zt=jt.find(function(rr){return rr.resource_type==Ft[At]});if(zt)for(var Yt=0;Yt<zt.service_info.length;Yt++){var Kt=zt.service_info[Yt],er=Kt.protocol,ir=Kt.url_template.replace("{STREAM_NAME}",xt);switch(er){case pt.ProtocolType.FLV:Nt=ir;break;case pt.ProtocolType.HLS:$t=ir}}}return{flv:Nt,hls:$t}},Bt.prototype.playCDN=function(xt,At,Mt,Nt){var $t,Ft=this;if(!At.CDNVideo)return this.logger.error("zsc.pc.1 cdn video no found"),Nt&&Nt(),!1;var jt=this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:xt},{key:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:xt},Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,!0),zt="",Yt=($t=this.getPlayRoom(xt))===null||$t===void 0?void 0:$t.streamList.find(function(Sr){return Sr.stream_id==xt}),Kt=this.playerList[xt],er=Kt.cdnPlayer,ir=Kt.playOption.resourceMode;Kt.player.streamId=xt,Kt.player.playOption=Kt.playOption,Kt.player.tryidx++,jt.setAttributes({tryidx:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(Kt.player.tryidx),biz_product:Ct.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(ir==pt.ResourceMode.DG?1:0)});var rr=Yt||{},lr=rr.urls_flv,nr=rr.urls_flv_plus,hr=rr.urls_m3u8,vr=rr.urls_m3u8_plus;if(!(Yt&&(ir!=pt.ResourceMode.CDN||lr&&hr)&&(ir!=pt.ResourceMode.DG||nr&&vr))){if(!this.stateCenter.appConfig||!ir)return this.logger.error("zsc.pss.1 stream info no found"),Nt&&Nt(),!1;var yr=this.getCDNUrl(xt,ir),Cr=yr.flv,or=yr.hls;ir==pt.ResourceMode.DG?(nr=Cr?[Cr]:[],vr=or?[or]:[]):(lr=Cr?[Cr]:[],hr=or?[or]:[])}if(!Kt||!er)return Nt&&Nt(),!1;ir===pt.ResourceMode.DG&&(Kt.player.useResourceTypes.push("cdn"),Kt.player.useResourceTypes=Array.from(new Set(Kt.player.useResourceTypes)));var ur=ir==pt.ResourceMode.DG?nr:lr,pr=ir==pt.ResourceMode.DG?vr:hr;if(er.isSupportFLV()&&(ur==null?void 0:ur.length)>0)zt=ur[0],jt.setAttributes({protocol:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("flv")});else if(er.isSupportHLS()&&(pr==null?void 0:pr.length)>0)zt=pr[0],jt.setAttributes({protocol:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("hls")});else if(!Kt.cdnUrl)return this.logger.error("zsc.pc.1 can not find cdn urls"),Nt&&Nt(),!1;if((zt=zt.replace("http://","https://"))!==Kt.cdnUrl&&Kt.player.tryidx>1){var Er=this.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:xt},{key:""},Ct.ZegoRTCLogEvent.kZegoTaskSrcChange.event);Er.setAttributes({src:Ct.ZegoRTCLogEvent.kZegoTaskSrcChange.src(zt),last_src:Ct.ZegoRTCLogEvent.kZegoTaskSrcChange.last_src(Kt.cdnUrl)}),Er.end()}return Kt.cdnUrl=zt||Kt.cdnUrl,jt.setAttributes({url:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.url(Kt.cdnUrl)}),Kt.playMode==pt.PlayMode.CDN&&(er.play(Kt.cdnUrl,At.CDNVideo),At.CDNVideo.srcObject=null,this.onPlayStateUpdate(gt.ENUM_PLAY_STATE_UPDATE.start,xt,{code:0,message:"success"},{isCDN:!0}),er.onQualityUpdate=function(Sr,Ht){Ht<=Ft.cdnBadQualityScore?Ft.handleQualityBad(xt,At.resourceMode,pt.PlayMode.CDN):(Kt.qualityBadCount=0,Ft.cdnProtocolBadTimestamp=0,Ft.lastHandleCDNBadTimestamp=0)},er.onComplete=function(){if(Kt.playMode==pt.PlayMode.CDN&&Kt.player.state==gt.ENUM_PLAY_STATE.playing)er.retry();else var Sr=Kt.player,Ht=Sr.initPoster,qt=Sr.initVideoStyle,fr=Kt.playOption.CDNVideo,cr=setTimeout(function(){clearTimeout(cr),fr&&fr.setAttribute("style",qt),fr&&fr.setAttribute("poster",Ht)},1e3)},er.onError=function(Sr){Ft.stateCenter.networkState==pt.ENUM_NETWORK_STATE.offline&&(er.canRetry=!1),jt.setAttributes({stop_reason:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.stop_reason(Sr)})},er.onCanplay=function(){if(Kt.player.state!=gt.ENUM_PLAY_STATE.playing&&(Kt.player.state=gt.ENUM_PLAY_STATE.playing,Kt.player.firstFrameTime==0)){Kt.player.firstFrameTime=Date.now()-Kt.player.beginTime;var Sr=Ft.stateCenter.reporter.createSpan(pt.TRACER_LEVEL.H,{key:Ct.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:xt},{key:""},Ct.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.event);Sr.setAttributes({fft_consumed:Ct.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.fft_consumed(Kt.player.firstFrameTime),biz_product:Ct.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product(At.resourceMode==pt.ResourceMode.DG?1:0)}),Sr.end()}},Mt&&Mt(),!0)},Bt.prototype.handleQualityBad=function(xt,At,Mt){var Nt=this;if(this.logger.info("zsc.hqb.0 call ".concat(xt," ").concat(At," ").concat(Mt)),At!==pt.ResourceMode.DG)return!1;this.fetchL3CDNCloudSetting();var $t=new Date().getTime(),Ft=0;for(var jt in this.playerList)this.playerList[jt].isQualityBad&&Ft++;Mt==pt.PlayMode.CDN?(this.cdnProtocolBadTime=this.cdnProtocolBadTime+(this.lastHandleCDNBadTimestamp==0?this.qualityInterval:$t-this.lastHandleCDNBadTimestamp),(Ft>=this.protocolBadQualityCount||this.cdnProtocolBadTime>=this.protocolBadQualityTime)&&(this.cdnProtocolBadTime=0,this.cdnProtocolBadTimestamp=new Date().getTime())):Mt==pt.PlayMode.L3&&(this.l3ProtocolBadTime=this.l3ProtocolBadTime+(this.lastHandleL3BadTimestamp==0?this.qualityInterval:$t-this.lastHandleL3BadTimestamp),(Ft>=this.protocolBadQualityCount||this.l3ProtocolBadTime>=this.protocolBadQualityTime)&&(this.l3ProtocolBadTime=0,this.l3ProtocolBadTimestamp=new Date().getTime()));var zt=!1,Yt=this.playerList[xt],Kt=Yt.qualityBadCount?Yt.qualityBadCount*this.qualityInterval:0;if((Mt==pt.PlayMode.L3&&Kt>this.l3BadQualityTime||Mt==pt.PlayMode.CDN&&this.isL3Fallback&&Kt>this.fallbackInhibitionTime||Mt==pt.PlayMode.CDN&&!this.isL3Fallback&&Kt>this.defaultBadQualityTime)&&(zt=!0),zt){for(var er in Yt.isQualityBad=!0,Ft=0,this.playerList)this.playerList[er].isQualityBad&&Ft++;if(Mt==pt.PlayMode.CDN&&(this.l3DetectedTimestamp==0||this.l3DetectedTimestamp+this.probeExpiredTime<$t&&this.l3DetectedTimestamp+this.minProbeInterval<$t)&&(this.l3DetectedTimestamp=new Date().getTime(),this.startNetProbe(!1,void 0,void 0,!0)),Ft/Object.keys(this.playerList).filter(function(rr){return!rr.includes("zegoprobe")}).length>this.multiPlaySwitchRate){this.logger.error("zsc.hqb.0 low quality "+(Mt==0?"CDN":"L3"));var ir=Object.keys(this.playerList).filter(function(rr){return!rr.includes("zegoprobe")});return ir.forEach(function(rr,lr){var nr=Nt.playerList[rr];Mt==pt.PlayMode.L3?(Nt.stopPlayingStream(rr,void 0,!0),Nt.playerList[rr]=nr,nr.isQualityBad=!1,nr.playMode=pt.PlayMode.CDN,nr.qualityBadCount=0,Nt.playCDN(rr,nr.playOption,Nt.playSuccessCallBackList[rr],Nt.playErrorCallBackList[rr])):Nt.l3DetectResult>Nt.switchDetectResultScore&&(nr.qualityBadCount=0,Nt.l3DetectedTimestamp=0,lr==ir.length-1&&(Nt.l3DetectResult=0),Nt.cdnSwitchL3(nr))}),Mt==pt.PlayMode.L3&&(this.isL3Fallback=!0),!0}}return typeof Yt.qualityBadCount=="number"?Yt.qualityBadCount++:Yt.qualityBadCount=1,!1},Bt.prototype.cdnSwitchL3=function(xt){var At,Mt=this,Nt=xt.streamID,$t=this.stateCenter.useNetAgent;if(xt.playMode=pt.PlayMode.L3,this.stopPlayingStream(Nt,void 0,!0),this.playerList[Nt]=xt,xt.isQualityBad=!1,((At=xt.playOption)===null||At===void 0?void 0:At.resourceMode)==pt.ResourceMode.DG&&(xt.player.useResourceTypes.push("l3"),xt.player.useResourceTypes=Array.from(new Set(xt.player.useResourceTypes))),$t)this.stateCenter.appConfig?(xt.serverUrls=["unified_l3"],this.startPlayingStream(Nt,$t,function(jt){var zt;Mt.logger.info("zsc.cqi.1 switch l3 success");var Yt=xt.player,Kt=Yt.initPoster,er=Yt.initVideoStyle,ir=xt.playOption.CDNVideo;if(Mt.stateCenter.browser==="safari"&&ir&&xt.player._CDNPlayerClone){var rr=ir.parentElement;if(rr){var lr=document.createElement("style"),nr=ir.cloneNode(!0),hr=Date.now().toString(16);lr.innerText=".zego_cdn_video_".concat(hr," .zego_clone_video_").concat(hr,"{width:").concat(ir.offsetWidth,"px;height:").concat(ir.offsetHeight,"px;}")+".zego_cdn_video_".concat(hr," .hide_").concat(hr,"{display:none!important;width:0;height:0}"),document.head.append(lr),nr.classList.add("zego_clone_video_".concat(hr)),nr.id=xt.streamID+"_clone",nr.src="",nr.srcObject=jt,nr.classList.add("hide_".concat(hr)),ir.before(nr),rr.classList.add("zego_cdn_video_".concat(hr));var vr=setTimeout(function(){clearTimeout(vr),ir.classList.add("hide_".concat(hr)),nr.classList.remove("hide_".concat(hr))},2e3),yr=setTimeout(function(){var or;clearTimeout(yr),xt.playOption.CDNVideo=nr,(or=xt.cdnPlayer)===null||or===void 0||or.stop(),Mt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:Nt}),rr.classList.remove("zego_cdn_video_".concat(hr)),ir.classList.remove("zego_cdn_video_".concat(hr)),nr.classList.remove("zego_clone_video_".concat(hr)),nr.id=ir.id,lr.remove(),ir.remove()},4e3)}}else{(zt=xt.cdnPlayer)===null||zt===void 0||zt.stop(),Mt.stateCenter.reporter.spanEnd({key:Ct.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:Nt});var Cr=setTimeout(function(){clearTimeout(Cr),ir&&ir.setAttribute("style",er),ir&&ir.setAttribute("poster",Kt)},1e3);jt&&(ir==null||(ir.srcObject=jt))}})):this.waitPlayList.push(Nt);else{var Ft=this.playerList[Nt].retryDispatchHandler;Ft.stopMaxTime(),Ft.invalid(),Ft.initStream(Nt,xt.playOption,!1),Ft.startMaxTime(),Ft.active(0)}},Bt.prototype.fetchL3CDNCloudSetting=function(){this.switchScore=this.stateCenter.settingConfig.getSetting("switch_score")||60,this.defaultBadQualityTime=this.stateCenter.settingConfig.getSetting("default_bad_quality_time")||3e4,this.l3BadQualityTime=this.stateCenter.settingConfig.getSetting("l3_bad_quality_time")||1e4,this.switchDetectResultScore=this.stateCenter.settingConfig.getSetting("switch_detect_result_score")||60,this.cdnBadQualityScore=this.stateCenter.settingConfig.getSetting("cdn_bad_quality_score")||60,this.l3BadQualityScore=this.stateCenter.settingConfig.getSetting("l3_bad_quality_score")||60,this.multiPlaySwitchRate=this.stateCenter.settingConfig.getSetting("multi_play_switch_rate")||.8,this.protocolBadQualityCount=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_count")||3,this.protocolBadQualityTime=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_time")||12e3,this.protocolQualityCacheExpiredTime=this.stateCenter.settingConfig.getSetting("protocol_quality_cache_expired_time	")||18e4,this.fallbackInhibitionTime=this.stateCenter.settingConfig.getSetting("fallback_inhibition_time")||18e4,this.probeExpiredTime=this.stateCenter.settingConfig.getSetting("probe_expired_time")||3e4,this.minProbeInterval=this.stateCenter.settingConfig.getSetting("min_probe_interval")||15e3},Bt.prototype.setStreamGwNode=function(xt,At){this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+xt.streamId),this.checkCachedNodesUse(xt,At),xt.gwNodesTTL&&xt.gwNodesTTL<new Date().getTime()&&(this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+xt.streamId+" ttl timeout, reset gw"),xt.gwNode="",xt.gwNodeList=[],xt.gwNodesTTL=0),this.gwNode&&(xt.gwNode=this.gwNode);var Mt=this.stateCenter.settingConfig.getSetting("gw_nodes");Mt&&Mt instanceof Array&&Mt.length>0&&(this.logger.info(wt.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(Mt)),xt.gwNodeList=Mt,xt.gwNode=xt.gwNodeList[0]||xt.gwNode),this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" end "+xt.streamId+" "+xt.gwNode)},Bt.prototype.getNodeIndex=function(xt,At){var Mt="",Nt=At?"publish":"play";switch(xt.cachedGwNodesMode){case ct.NotReUse:break;case ct.TheSameReUse:Mt=Nt+"_"+xt.streamId;break;case ct.DiffReUse:Mt=Nt;break;case ct.AllReUse:Mt="stream"}return Mt},Bt.prototype.checkCachedNodesUse=function(xt,At){if(this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+xt.streamId+" "+xt.cachedGwNodesMode),xt.isExternal)if(At&&xt.isCustomCdn())this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+xt.streamId+" custom cdn");else if(this.stateCenter.useNetAgent&&this.stateCenter.isMultiOuter)this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+xt.streamId+" multi outer");else{var Mt=this.getNodeIndex(xt,At);if(this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+xt.streamId+" "+Mt),Mt){var Nt=this.cachedGwNodesList[Mt];Nt&&Nt.gwNodesTTL>new Date().getTime()&&(Nt==null?void 0:Nt.gwNodes.length)>0&&(this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+xt.streamId+" use cache gwnodes"),xt.gwNodeList=Nt.gwNodes,xt.gwNodesTTL=Nt.gwNodesTTL,xt.gwNode=xt.gwNodeList[0])}this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" end "+xt.streamId+" "+xt.gwNode)}else this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+xt.streamId+" retry internal")},Bt.prototype.updateCachedGwNodesList=function(xt,At,Mt,Nt){if(this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" call "+xt.streamId),Nt===0)this.setCachedGwNodesMode(ct.NotReUse);else if(Nt>0){var $t=this.getNodeIndex(xt,At);this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" "+xt.streamId+" nodeIndex "+$t),$t&&(this.cachedGwNodesList[$t]={gwNodes:Mt,gwNodesTTL:new Date().getTime()+1e3*Nt})}},Bt.prototype.clearCachedGwNodesList=function(xt,At){var Mt=this.getNodeIndex(xt,At);this.logger.info(wt.ZEGO_WEBRTC_ACTION.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST+" "+xt.streamId+" nodeIndex "+Mt),Mt&&delete this.cachedGwNodesList[Mt]},Bt.prototype.setCachedGwNodesMode=function(xt){this.cachedGwNodesMode=xt,Object.values(this.publisherList).forEach(function(At){At.publisher.cachedGwNodesMode=xt}),Object.values(this.playerList).forEach(function(At){At.player.cachedGwNodesMode=xt})},Bt.prototype.updateTimeOffsetInterval=function(){var xt,At,Mt=this;typeof((xt=this.rtm)===null||xt===void 0?void 0:xt.netAgent.timeOffset)=="number"&&(this.stateCenter.clientTimeOffset=(At=this.rtm)===null||At===void 0?void 0:At.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout(function(){Mt.updateTimeOffsetInterval()},9e5)},Bt}(ft.ZegoStreamCenter);et.ZegoStreamCenterWeb=Ot},2990:function(_e,et,rt){var nt,ot=rt(2100),it=ot.Writer,st=ot.util,at=ot.roots.default||(ot.roots.default={});at.logreport=((nt={}).SpeedLogHead=function(){function lt(ut){if(ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}var ct,pt;return lt.prototype.version=0,lt.prototype.signature=st.newBuffer([]),lt.prototype.timestamp=0,lt.prototype.event=0,lt.prototype.app_id=0,lt.prototype.user_id="",lt.prototype.biz_type=0,lt.prototype.device_id="",lt.prototype.lite_sign=st.newBuffer([]),lt.prototype.token=st.newBuffer([]),lt.prototype.os_type="",lt.prototype.sdk_version="",lt.prototype.time_offset=st.Long?st.Long.fromBits(0,0,!1):0,lt.prototype.scenario=0,lt.create=function(ut){return new lt(ut)},lt.encode=function(ut,ht){return ht||(ht=it.create()),ut.version!=null&&Object.hasOwnProperty.call(ut,"version")&&ht.uint32(8).uint32(ut.version),ut.signature!=null&&Object.hasOwnProperty.call(ut,"signature")&&ht.uint32(18).bytes(ut.signature),ut.timestamp!=null&&Object.hasOwnProperty.call(ut,"timestamp")&&ht.uint32(24).uint32(ut.timestamp),ut.event!=null&&Object.hasOwnProperty.call(ut,"event")&&ht.uint32(32).uint32(ut.event),ut.app_id!=null&&Object.hasOwnProperty.call(ut,"app_id")&&ht.uint32(40).uint32(ut.app_id),ut.user_id!=null&&Object.hasOwnProperty.call(ut,"user_id")&&ht.uint32(50).string(ut.user_id),ut.biz_type!=null&&Object.hasOwnProperty.call(ut,"biz_type")&&ht.uint32(56).uint32(ut.biz_type),ut.device_id!=null&&Object.hasOwnProperty.call(ut,"device_id")&&ht.uint32(66).string(ut.device_id),ut.lite_sign!=null&&Object.hasOwnProperty.call(ut,"lite_sign")&&ht.uint32(74).bytes(ut.lite_sign),ut.token!=null&&Object.hasOwnProperty.call(ut,"token")&&ht.uint32(82).bytes(ut.token),ut.os_type!=null&&Object.hasOwnProperty.call(ut,"os_type")&&ht.uint32(90).string(ut.os_type),ut.sdk_version!=null&&Object.hasOwnProperty.call(ut,"sdk_version")&&ht.uint32(98).string(ut.sdk_version),ut.time_offset!=null&&Object.hasOwnProperty.call(ut,"time_offset")&&ht.uint32(104).int64(ut.time_offset),ut.scenario!=null&&Object.hasOwnProperty.call(ut,"scenario")&&ht.uint32(112).uint32(ut.scenario),ht},lt.ProtoVersion=(ct={},(pt=Object.create(ct))[ct[0]="PROTO_VERSION"]=0,pt[ct[1]="PROTO_VERSION1"]=1,pt[ct[2]="PROTO_VERSION2"]=2,pt[ct[3]="PROTO_VERSION3"]=3,pt[ct[4]="PROTO_VERSION4"]=4,pt[ct[5]="PROTO_VERSION5"]=5,pt[ct[6]="PROTO_VERSION6"]=6,pt[ct[7]="PROTO_VERSION7"]=7,pt[ct[8]="PROTO_VERSION8"]=8,pt[ct[9]="PROTO_VERSION9"]=9,pt[ct[10]="PROTO_VERSION10"]=10,pt[ct[11]="PROTO_VERSION11"]=11,pt[ct[12]="PROTO_VERSION12"]=12,pt[ct[13]="PROTO_VERSION13"]=13,pt[ct[14]="PROTO_VERSION14"]=14,pt),lt.Event=function(){var ut={},ht=Object.create(ut);return ht[ut[0]="QUALITY_EVENT"]=0,ht[ut[100]="NO_BILLING_EVENT"]=100,ht[ut[300]="DETECT_QUALITY_EVENT"]=300,ht}(),lt.BizType=function(){var ut={},ht=Object.create(ut);return ht[ut[0]="UNKNOWN"]=0,ht[ut[1]="LIVE"]=1,ht[ut[2]="RTV"]=2,ht}(),lt.ZegoScenario=function(){var ut={},ht=Object.create(ut);return ht[ut[0]="ZEGO_SCENARIO_GENERAL"]=0,ht[ut[1]="ZEGO_SCENARIO_COMMUNICATION"]=1,ht[ut[2]="ZEGO_SCENARIO_LIVE"]=2,ht[ut[3]="ZEGO_SCENARIO_DEFAULT"]=3,ht[ut[4]="ZEGO_SCENARIO_STANDARD_VIDEO_CALL"]=4,ht[ut[5]="ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL"]=5,ht[ut[6]="ZEGO_SCENARIO_STANDARD_CHATROOM"]=6,ht[ut[7]="ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM"]=7,ht[ut[8]="ZEGO_SCENARIO_BROADCAST"]=8,ht[ut[9]="ZEGO_SCENARIO_KARAOKE"]=9,ht[ut[99]="ZEGO_SCENARIO_UNDEFINED"]=99,ht}(),lt}(),nt.SpeedLogRsp=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.code=0,lt.prototype.message="",lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.code!=null&&Object.hasOwnProperty.call(ct,"code")&&pt.uint32(8).uint32(ct.code),ct.message!=null&&Object.hasOwnProperty.call(ct,"message")&&pt.uint32(18).string(ct.message),pt},lt}(),nt.QualityEvent=function(){function lt(ut){if(this.publish_quality_infos=[],this.play_quality_infos=[],ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}var ct,pt;return lt.prototype.hardware_infos=null,lt.prototype.publish_quality_infos=st.emptyArray,lt.prototype.play_quality_infos=st.emptyArray,lt.prototype.network_type=0,lt.prototype.charge_infos=null,lt.prototype.server_time=st.Long?st.Long.fromBits(0,0,!1):0,lt.prototype.client_type=0,lt.create=function(ut){return new lt(ut)},lt.encode=function(ut,ht){if(ht||(ht=it.create()),ut.hardware_infos!=null&&Object.hasOwnProperty.call(ut,"hardware_infos")&&at.logreport.HardwareInfos.encode(ut.hardware_infos,ht.uint32(10).fork()).ldelim(),ut.publish_quality_infos!=null&&ut.publish_quality_infos.length)for(var ft=0;ft<ut.publish_quality_infos.length;++ft)at.logreport.PublishQualityInfos.encode(ut.publish_quality_infos[ft],ht.uint32(18).fork()).ldelim();if(ut.play_quality_infos!=null&&ut.play_quality_infos.length)for(ft=0;ft<ut.play_quality_infos.length;++ft)at.logreport.PlayQualityInfos.encode(ut.play_quality_infos[ft],ht.uint32(26).fork()).ldelim();return ut.network_type!=null&&Object.hasOwnProperty.call(ut,"network_type")&&ht.uint32(32).uint32(ut.network_type),ut.charge_infos!=null&&Object.hasOwnProperty.call(ut,"charge_infos")&&at.logreport.ChargeInfos.encode(ut.charge_infos,ht.uint32(42).fork()).ldelim(),ut.server_time!=null&&Object.hasOwnProperty.call(ut,"server_time")&&ht.uint32(48).int64(ut.server_time),ut.client_type!=null&&Object.hasOwnProperty.call(ut,"client_type")&&ht.uint32(800).uint32(ut.client_type),ht},lt.ResourceType=(ct={},(pt=Object.create(ct))[ct[0]="UNKNOWN"]=0,pt[ct[1]="CDN"]=1,pt[ct[2]="RTC"]=2,pt[ct[3]="L3"]=3,pt[ct[4]="P2P"]=4,pt),lt}(),nt.HardwareInfos=function(){function lt(ct){if(this.infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.timestamp_offset_begin=0,lt.prototype.timestamp_offset_end=0,lt.prototype.infos=st.emptyArray,lt.prototype.sys_mem_total=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.timestamp_offset_begin!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_begin")&&pt.uint32(8).uint32(ct.timestamp_offset_begin),ct.timestamp_offset_end!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_end")&&pt.uint32(16).uint32(ct.timestamp_offset_end),ct.infos!=null&&ct.infos.length)for(var ut=0;ut<ct.infos.length;++ut)at.logreport.HardwareInfo.encode(ct.infos[ut],pt.uint32(26).fork()).ldelim();return ct.sys_mem_total!=null&&Object.hasOwnProperty.call(ct,"sys_mem_total")&&pt.uint32(32).uint32(ct.sys_mem_total),pt},lt}(),nt.PublishQualityInfos=function(){function lt(ct){if(this.infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.timestamp_offset_begin=0,lt.prototype.timestamp_offset_end=0,lt.prototype.stream_id="",lt.prototype.session_id=0,lt.prototype.video_width=0,lt.prototype.video_height=0,lt.prototype.ipv4=0,lt.prototype.ipv6="",lt.prototype.resource_type=0,lt.prototype.infos=st.emptyArray,lt.prototype.room_id="",lt.prototype.evnvironment=0,lt.prototype.ap="",lt.prototype.session="",lt.prototype.room_session_id=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.protocol_type=0,lt.prototype.setting_video_bitrate=0,lt.prototype.setting_audio_bitrate=0,lt.prototype.setting_video_fps=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.timestamp_offset_begin!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_begin")&&pt.uint32(8).uint32(ct.timestamp_offset_begin),ct.timestamp_offset_end!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_end")&&pt.uint32(16).uint32(ct.timestamp_offset_end),ct.stream_id!=null&&Object.hasOwnProperty.call(ct,"stream_id")&&pt.uint32(26).string(ct.stream_id),ct.session_id!=null&&Object.hasOwnProperty.call(ct,"session_id")&&pt.uint32(32).uint32(ct.session_id),ct.video_width!=null&&Object.hasOwnProperty.call(ct,"video_width")&&pt.uint32(40).uint32(ct.video_width),ct.video_height!=null&&Object.hasOwnProperty.call(ct,"video_height")&&pt.uint32(48).uint32(ct.video_height),ct.ipv4!=null&&Object.hasOwnProperty.call(ct,"ipv4")&&pt.uint32(56).uint32(ct.ipv4),ct.ipv6!=null&&Object.hasOwnProperty.call(ct,"ipv6")&&pt.uint32(66).string(ct.ipv6),ct.resource_type!=null&&Object.hasOwnProperty.call(ct,"resource_type")&&pt.uint32(72).uint32(ct.resource_type),ct.infos!=null&&ct.infos.length)for(var ut=0;ut<ct.infos.length;++ut)at.logreport.PublishQualityInfo.encode(ct.infos[ut],pt.uint32(82).fork()).ldelim();return ct.room_id!=null&&Object.hasOwnProperty.call(ct,"room_id")&&pt.uint32(90).string(ct.room_id),ct.evnvironment!=null&&Object.hasOwnProperty.call(ct,"evnvironment")&&pt.uint32(104).uint32(ct.evnvironment),ct.ap!=null&&Object.hasOwnProperty.call(ct,"ap")&&pt.uint32(114).string(ct.ap),ct.session!=null&&Object.hasOwnProperty.call(ct,"session")&&pt.uint32(122).string(ct.session),ct.room_session_id!=null&&Object.hasOwnProperty.call(ct,"room_session_id")&&pt.uint32(128).uint64(ct.room_session_id),ct.protocol_type!=null&&Object.hasOwnProperty.call(ct,"protocol_type")&&pt.uint32(136).uint32(ct.protocol_type),ct.setting_video_bitrate!=null&&Object.hasOwnProperty.call(ct,"setting_video_bitrate")&&pt.uint32(144).uint32(ct.setting_video_bitrate),ct.setting_audio_bitrate!=null&&Object.hasOwnProperty.call(ct,"setting_audio_bitrate")&&pt.uint32(152).uint32(ct.setting_audio_bitrate),ct.setting_video_fps!=null&&Object.hasOwnProperty.call(ct,"setting_video_fps")&&pt.uint32(160).uint32(ct.setting_video_fps),pt},lt}(),nt.PlayQualityInfos=function(){function lt(ct){if(this.infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.timestamp_offset_begin=0,lt.prototype.timestamp_offset_end=0,lt.prototype.stream_id="",lt.prototype.session_id=0,lt.prototype.video_width=0,lt.prototype.video_height=0,lt.prototype.ipv4=0,lt.prototype.ipv6="",lt.prototype.resource_type=0,lt.prototype.infos=st.emptyArray,lt.prototype.room_id="",lt.prototype.session="",lt.prototype.room_session_id=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.protocol_type=0,lt.prototype.product=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.timestamp_offset_begin!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_begin")&&pt.uint32(8).uint32(ct.timestamp_offset_begin),ct.timestamp_offset_end!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_end")&&pt.uint32(16).uint32(ct.timestamp_offset_end),ct.stream_id!=null&&Object.hasOwnProperty.call(ct,"stream_id")&&pt.uint32(26).string(ct.stream_id),ct.session_id!=null&&Object.hasOwnProperty.call(ct,"session_id")&&pt.uint32(32).uint32(ct.session_id),ct.video_width!=null&&Object.hasOwnProperty.call(ct,"video_width")&&pt.uint32(40).uint32(ct.video_width),ct.video_height!=null&&Object.hasOwnProperty.call(ct,"video_height")&&pt.uint32(48).uint32(ct.video_height),ct.ipv4!=null&&Object.hasOwnProperty.call(ct,"ipv4")&&pt.uint32(56).uint32(ct.ipv4),ct.ipv6!=null&&Object.hasOwnProperty.call(ct,"ipv6")&&pt.uint32(66).string(ct.ipv6),ct.resource_type!=null&&Object.hasOwnProperty.call(ct,"resource_type")&&pt.uint32(72).uint32(ct.resource_type),ct.infos!=null&&ct.infos.length)for(var ut=0;ut<ct.infos.length;++ut)at.logreport.PlayQualityInfo.encode(ct.infos[ut],pt.uint32(82).fork()).ldelim();return ct.room_id!=null&&Object.hasOwnProperty.call(ct,"room_id")&&pt.uint32(90).string(ct.room_id),ct.session!=null&&Object.hasOwnProperty.call(ct,"session")&&pt.uint32(106).string(ct.session),ct.room_session_id!=null&&Object.hasOwnProperty.call(ct,"room_session_id")&&pt.uint32(112).uint64(ct.room_session_id),ct.protocol_type!=null&&Object.hasOwnProperty.call(ct,"protocol_type")&&pt.uint32(120).uint32(ct.protocol_type),ct.product!=null&&Object.hasOwnProperty.call(ct,"product")&&pt.uint32(128).uint32(ct.product),pt},lt}(),nt.ChargeInfos=function(){function lt(ct){if(this.infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.timestamp_offset_begin=0,lt.prototype.timestamp_offset_end=0,lt.prototype.timestamp_diff_flag=0,lt.prototype.timestamp_diff=0,lt.prototype.room_id="",lt.prototype.infos=st.emptyArray,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.timestamp_offset_begin!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_begin")&&pt.uint32(8).uint32(ct.timestamp_offset_begin),ct.timestamp_offset_end!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_end")&&pt.uint32(16).uint32(ct.timestamp_offset_end),ct.timestamp_diff_flag!=null&&Object.hasOwnProperty.call(ct,"timestamp_diff_flag")&&pt.uint32(24).uint32(ct.timestamp_diff_flag),ct.timestamp_diff!=null&&Object.hasOwnProperty.call(ct,"timestamp_diff")&&pt.uint32(32).uint32(ct.timestamp_diff),ct.room_id!=null&&Object.hasOwnProperty.call(ct,"room_id")&&pt.uint32(42).string(ct.room_id),ct.infos!=null&&ct.infos.length)for(var ut=0;ut<ct.infos.length;++ut)at.logreport.ChargeInfo.encode(ct.infos[ut],pt.uint32(802).fork()).ldelim();return pt},lt}(),nt.HardwareInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.sys_cpu_used=0,lt.prototype.app_cpu_used=0,lt.prototype.sys_mem_used=0,lt.prototype.app_mem_used=0,lt.prototype.sample_time_offset=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.sys_cpu_used!=null&&Object.hasOwnProperty.call(ct,"sys_cpu_used")&&pt.uint32(8).uint32(ct.sys_cpu_used),ct.app_cpu_used!=null&&Object.hasOwnProperty.call(ct,"app_cpu_used")&&pt.uint32(16).uint32(ct.app_cpu_used),ct.sys_mem_used!=null&&Object.hasOwnProperty.call(ct,"sys_mem_used")&&pt.uint32(24).uint32(ct.sys_mem_used),ct.app_mem_used!=null&&Object.hasOwnProperty.call(ct,"app_mem_used")&&pt.uint32(32).uint32(ct.app_mem_used),ct.sample_time_offset!=null&&Object.hasOwnProperty.call(ct,"sample_time_offset")&&pt.uint32(40).uint32(ct.sample_time_offset),pt},lt}(),nt.PublishQualityInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.audio_bitrate=0,lt.prototype.video_bitrate=0,lt.prototype.video_capture_fps=0,lt.prototype.video_network_fps=0,lt.prototype.uplink_plr=0,lt.prototype.rtt=0,lt.prototype.audio_network_fps=0,lt.prototype.captured_sound_level=0,lt.prototype.quality=0,lt.prototype.sample_time_offset=0,lt.prototype.sample_time_window=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.audio_bitrate!=null&&Object.hasOwnProperty.call(ct,"audio_bitrate")&&pt.uint32(8).uint32(ct.audio_bitrate),ct.video_bitrate!=null&&Object.hasOwnProperty.call(ct,"video_bitrate")&&pt.uint32(16).uint32(ct.video_bitrate),ct.video_capture_fps!=null&&Object.hasOwnProperty.call(ct,"video_capture_fps")&&pt.uint32(24).uint32(ct.video_capture_fps),ct.video_network_fps!=null&&Object.hasOwnProperty.call(ct,"video_network_fps")&&pt.uint32(32).uint32(ct.video_network_fps),ct.uplink_plr!=null&&Object.hasOwnProperty.call(ct,"uplink_plr")&&pt.uint32(40).uint32(ct.uplink_plr),ct.rtt!=null&&Object.hasOwnProperty.call(ct,"rtt")&&pt.uint32(48).uint32(ct.rtt),ct.audio_network_fps!=null&&Object.hasOwnProperty.call(ct,"audio_network_fps")&&pt.uint32(56).uint32(ct.audio_network_fps),ct.captured_sound_level!=null&&Object.hasOwnProperty.call(ct,"captured_sound_level")&&pt.uint32(64).uint32(ct.captured_sound_level),ct.quality!=null&&Object.hasOwnProperty.call(ct,"quality")&&pt.uint32(72).uint32(ct.quality),ct.sample_time_offset!=null&&Object.hasOwnProperty.call(ct,"sample_time_offset")&&pt.uint32(80).uint32(ct.sample_time_offset),ct.sample_time_window!=null&&Object.hasOwnProperty.call(ct,"sample_time_window")&&pt.uint32(800).uint32(ct.sample_time_window),pt},lt}(),nt.PlayQualityInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.audio_bitrate=0,lt.prototype.video_bitrate=0,lt.prototype.video_network_fps=0,lt.prototype.audio_break_count=0,lt.prototype.video_break_count=0,lt.prototype.downlink_plr=0,lt.prototype.peer_to_peer_plr=0,lt.prototype.peer_to_peer_delay=0,lt.prototype.audio_network_fps=0,lt.prototype.audio_break_duration=0,lt.prototype.video_break_duration=0,lt.prototype.audio_break_rate=0,lt.prototype.video_break_rate=0,lt.prototype.audio_break_cancel=0,lt.prototype.video_break_cancel=0,lt.prototype.rtt=0,lt.prototype.rendered_sound_level=0,lt.prototype.audio_break_cancel_duration=0,lt.prototype.video_break_cancel_duration=0,lt.prototype.audio_decode_time=0,lt.prototype.video_decode_time=0,lt.prototype.real_sampling_interval=0,lt.prototype.mos=0,lt.prototype.audio_decode_fps=0,lt.prototype.video_decode_fps=0,lt.prototype.video_frames_decoded=0,lt.prototype.video_frames_dropped=0,lt.prototype.quality=0,lt.prototype.evaluation_quality=0,lt.prototype.break_stat_duration=0,lt.prototype.sample_time_offset=0,lt.prototype.sample_time_window=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.audio_bitrate!=null&&Object.hasOwnProperty.call(ct,"audio_bitrate")&&pt.uint32(8).uint32(ct.audio_bitrate),ct.video_bitrate!=null&&Object.hasOwnProperty.call(ct,"video_bitrate")&&pt.uint32(16).uint32(ct.video_bitrate),ct.video_network_fps!=null&&Object.hasOwnProperty.call(ct,"video_network_fps")&&pt.uint32(24).uint32(ct.video_network_fps),ct.audio_break_count!=null&&Object.hasOwnProperty.call(ct,"audio_break_count")&&pt.uint32(32).uint32(ct.audio_break_count),ct.video_break_count!=null&&Object.hasOwnProperty.call(ct,"video_break_count")&&pt.uint32(40).uint32(ct.video_break_count),ct.downlink_plr!=null&&Object.hasOwnProperty.call(ct,"downlink_plr")&&pt.uint32(48).uint32(ct.downlink_plr),ct.peer_to_peer_plr!=null&&Object.hasOwnProperty.call(ct,"peer_to_peer_plr")&&pt.uint32(56).uint32(ct.peer_to_peer_plr),ct.peer_to_peer_delay!=null&&Object.hasOwnProperty.call(ct,"peer_to_peer_delay")&&pt.uint32(64).uint32(ct.peer_to_peer_delay),ct.audio_network_fps!=null&&Object.hasOwnProperty.call(ct,"audio_network_fps")&&pt.uint32(72).uint32(ct.audio_network_fps),ct.audio_break_duration!=null&&Object.hasOwnProperty.call(ct,"audio_break_duration")&&pt.uint32(80).uint32(ct.audio_break_duration),ct.video_break_duration!=null&&Object.hasOwnProperty.call(ct,"video_break_duration")&&pt.uint32(88).uint32(ct.video_break_duration),ct.audio_break_rate!=null&&Object.hasOwnProperty.call(ct,"audio_break_rate")&&pt.uint32(96).uint32(ct.audio_break_rate),ct.video_break_rate!=null&&Object.hasOwnProperty.call(ct,"video_break_rate")&&pt.uint32(104).uint32(ct.video_break_rate),ct.audio_break_cancel!=null&&Object.hasOwnProperty.call(ct,"audio_break_cancel")&&pt.uint32(112).uint32(ct.audio_break_cancel),ct.video_break_cancel!=null&&Object.hasOwnProperty.call(ct,"video_break_cancel")&&pt.uint32(120).uint32(ct.video_break_cancel),ct.rtt!=null&&Object.hasOwnProperty.call(ct,"rtt")&&pt.uint32(128).uint32(ct.rtt),ct.rendered_sound_level!=null&&Object.hasOwnProperty.call(ct,"rendered_sound_level")&&pt.uint32(136).uint32(ct.rendered_sound_level),ct.audio_break_cancel_duration!=null&&Object.hasOwnProperty.call(ct,"audio_break_cancel_duration")&&pt.uint32(144).uint32(ct.audio_break_cancel_duration),ct.video_break_cancel_duration!=null&&Object.hasOwnProperty.call(ct,"video_break_cancel_duration")&&pt.uint32(152).uint32(ct.video_break_cancel_duration),ct.audio_decode_time!=null&&Object.hasOwnProperty.call(ct,"audio_decode_time")&&pt.uint32(160).uint32(ct.audio_decode_time),ct.video_decode_time!=null&&Object.hasOwnProperty.call(ct,"video_decode_time")&&pt.uint32(168).uint32(ct.video_decode_time),ct.real_sampling_interval!=null&&Object.hasOwnProperty.call(ct,"real_sampling_interval")&&pt.uint32(176).uint32(ct.real_sampling_interval),ct.mos!=null&&Object.hasOwnProperty.call(ct,"mos")&&pt.uint32(184).int32(ct.mos),ct.audio_decode_fps!=null&&Object.hasOwnProperty.call(ct,"audio_decode_fps")&&pt.uint32(192).uint32(ct.audio_decode_fps),ct.video_decode_fps!=null&&Object.hasOwnProperty.call(ct,"video_decode_fps")&&pt.uint32(200).uint32(ct.video_decode_fps),ct.video_frames_decoded!=null&&Object.hasOwnProperty.call(ct,"video_frames_decoded")&&pt.uint32(208).uint32(ct.video_frames_decoded),ct.video_frames_dropped!=null&&Object.hasOwnProperty.call(ct,"video_frames_dropped")&&pt.uint32(216).uint32(ct.video_frames_dropped),ct.quality!=null&&Object.hasOwnProperty.call(ct,"quality")&&pt.uint32(224).int32(ct.quality),ct.evaluation_quality!=null&&Object.hasOwnProperty.call(ct,"evaluation_quality")&&pt.uint32(232).int32(ct.evaluation_quality),ct.break_stat_duration!=null&&Object.hasOwnProperty.call(ct,"break_stat_duration")&&pt.uint32(240).uint32(ct.break_stat_duration),ct.sample_time_offset!=null&&Object.hasOwnProperty.call(ct,"sample_time_offset")&&pt.uint32(248).uint32(ct.sample_time_offset),ct.sample_time_window!=null&&Object.hasOwnProperty.call(ct,"sample_time_window")&&pt.uint32(800).uint32(ct.sample_time_window),pt},lt}(),nt.ChargeInfo=function(){function lt(ct){if(this.play_stream_resolution_infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.is_publishing=0,lt.prototype.play_stream_resolution_infos=st.emptyArray,lt.prototype.play_max_audio_bitrate=0,lt.prototype.no_playing=0,lt.prototype.p2p_charge_info=null,lt.prototype.sample_time_offset=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.is_publishing!=null&&Object.hasOwnProperty.call(ct,"is_publishing")&&pt.uint32(8).uint32(ct.is_publishing),ct.play_stream_resolution_infos!=null&&ct.play_stream_resolution_infos.length)for(var ut=0;ut<ct.play_stream_resolution_infos.length;++ut)at.logreport.ResolutionInfo.encode(ct.play_stream_resolution_infos[ut],pt.uint32(18).fork()).ldelim();return ct.play_max_audio_bitrate!=null&&Object.hasOwnProperty.call(ct,"play_max_audio_bitrate")&&pt.uint32(24).uint32(ct.play_max_audio_bitrate),ct.no_playing!=null&&Object.hasOwnProperty.call(ct,"no_playing")&&pt.uint32(32).uint32(ct.no_playing),ct.p2p_charge_info!=null&&Object.hasOwnProperty.call(ct,"p2p_charge_info")&&at.logreport.P2PChargeInfo.encode(ct.p2p_charge_info,pt.uint32(42).fork()).ldelim(),ct.sample_time_offset!=null&&Object.hasOwnProperty.call(ct,"sample_time_offset")&&pt.uint32(48).uint32(ct.sample_time_offset),pt},lt}(),nt.ResolutionInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.video_width=0,lt.prototype.video_height=0,lt.prototype.count=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.video_width!=null&&Object.hasOwnProperty.call(ct,"video_width")&&pt.uint32(8).uint32(ct.video_width),ct.video_height!=null&&Object.hasOwnProperty.call(ct,"video_height")&&pt.uint32(16).uint32(ct.video_height),ct.count!=null&&Object.hasOwnProperty.call(ct,"count")&&pt.uint32(24).uint32(ct.count),pt},lt}(),nt.P2PChargeInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.media_inc=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.data_inc=st.Long?st.Long.fromBits(0,0,!0):0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.media_inc!=null&&Object.hasOwnProperty.call(ct,"media_inc")&&pt.uint32(8).uint64(ct.media_inc),ct.data_inc!=null&&Object.hasOwnProperty.call(ct,"data_inc")&&pt.uint32(16).uint64(ct.data_inc),pt},lt}(),nt.NoBillingEvent=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.platform_info="",lt.prototype.room_id="",lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.platform_info!=null&&Object.hasOwnProperty.call(ct,"platform_info")&&pt.uint32(10).string(ct.platform_info),ct.room_id!=null&&Object.hasOwnProperty.call(ct,"room_id")&&pt.uint32(18).string(ct.room_id),pt},lt}(),nt.DynQualityEvent=function(){function lt(ct){if(this.dyn_quality_infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.seq_no="",lt.prototype.num=0,lt.prototype.dyn_quality_infos=st.emptyArray,lt.prototype.device_id="",lt.prototype.latitude=0,lt.prototype.longitude=0,lt.prototype.country="",lt.prototype.region="",lt.prototype.city="",lt.prototype.isp="",lt.prototype.ve_mode=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.seq_no!=null&&Object.hasOwnProperty.call(ct,"seq_no")&&pt.uint32(10).string(ct.seq_no),ct.num!=null&&Object.hasOwnProperty.call(ct,"num")&&pt.uint32(16).uint32(ct.num),ct.dyn_quality_infos!=null&&ct.dyn_quality_infos.length)for(var ut=0;ut<ct.dyn_quality_infos.length;++ut)at.logreport.DynQualityInfos.encode(ct.dyn_quality_infos[ut],pt.uint32(26).fork()).ldelim();return ct.device_id!=null&&Object.hasOwnProperty.call(ct,"device_id")&&pt.uint32(34).string(ct.device_id),ct.latitude!=null&&Object.hasOwnProperty.call(ct,"latitude")&&pt.uint32(40).uint32(ct.latitude),ct.longitude!=null&&Object.hasOwnProperty.call(ct,"longitude")&&pt.uint32(48).uint32(ct.longitude),ct.country!=null&&Object.hasOwnProperty.call(ct,"country")&&pt.uint32(58).string(ct.country),ct.region!=null&&Object.hasOwnProperty.call(ct,"region")&&pt.uint32(66).string(ct.region),ct.city!=null&&Object.hasOwnProperty.call(ct,"city")&&pt.uint32(74).string(ct.city),ct.isp!=null&&Object.hasOwnProperty.call(ct,"isp")&&pt.uint32(82).string(ct.isp),ct.ve_mode!=null&&Object.hasOwnProperty.call(ct,"ve_mode")&&pt.uint32(88).uint32(ct.ve_mode),pt},lt}(),nt.DynQualityInfos=function(){function lt(ct){if(this.infos=[],ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.timestamp_offset_begin=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.timestamp_offset_end=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.server_ip="",lt.prototype.infos=st.emptyArray,lt.prototype.network_type=0,lt.prototype.stream_id="",lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){if(pt||(pt=it.create()),ct.timestamp_offset_begin!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_begin")&&pt.uint32(8).uint64(ct.timestamp_offset_begin),ct.timestamp_offset_end!=null&&Object.hasOwnProperty.call(ct,"timestamp_offset_end")&&pt.uint32(16).uint64(ct.timestamp_offset_end),ct.server_ip!=null&&Object.hasOwnProperty.call(ct,"server_ip")&&pt.uint32(26).string(ct.server_ip),ct.infos!=null&&ct.infos.length)for(var ut=0;ut<ct.infos.length;++ut)at.logreport.DynQualityInfo.encode(ct.infos[ut],pt.uint32(34).fork()).ldelim();return ct.network_type!=null&&Object.hasOwnProperty.call(ct,"network_type")&&pt.uint32(40).uint32(ct.network_type),ct.stream_id!=null&&Object.hasOwnProperty.call(ct,"stream_id")&&pt.uint32(50).string(ct.stream_id),pt},lt}(),nt.DynQualityInfo=function(){function lt(ct){if(ct)for(var pt=Object.keys(ct),ut=0;ut<pt.length;++ut)ct[pt[ut]]!=null&&(this[pt[ut]]=ct[pt[ut]])}return lt.prototype.time=st.Long?st.Long.fromBits(0,0,!0):0,lt.prototype.plr=0,lt.prototype.rtt=0,lt.prototype.score=0,lt.prototype.sample_time=0,lt.create=function(ct){return new lt(ct)},lt.encode=function(ct,pt){return pt||(pt=it.create()),ct.time!=null&&Object.hasOwnProperty.call(ct,"time")&&pt.uint32(8).uint64(ct.time),ct.plr!=null&&Object.hasOwnProperty.call(ct,"plr")&&pt.uint32(16).uint32(ct.plr),ct.rtt!=null&&Object.hasOwnProperty.call(ct,"rtt")&&pt.uint32(24).uint32(ct.rtt),ct.score!=null&&Object.hasOwnProperty.call(ct,"score")&&pt.uint32(32).uint32(ct.score),ct.sample_time!=null&&Object.hasOwnProperty.call(ct,"sample_time")&&pt.uint32(40).uint32(ct.sample_time),pt},lt}(),nt),_e.exports=at},6348:function(_e,et,rt){var nt,ot=rt(2100),it=ot.Reader,st=ot.Writer,at=ot.util,lt=ot.roots.default||(ot.roots.default={});lt.webrtc_cmd=((nt={}).MetadataPush=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.width=0,ct.prototype.height=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.width!=null&&Object.hasOwnProperty.call(pt,"width")&&ut.uint32(8).uint32(pt.width),pt.height!=null&&Object.hasOwnProperty.call(pt,"height")&&ut.uint32(16).uint32(pt.height),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.MetadataPush;pt.pos<ht;){var gt=pt.uint32();switch(gt>>>3){case 1:ft.width=pt.uint32();break;case 2:ft.height=pt.uint32();break;default:pt.skipType(7&gt)}}return ft},ct}(),nt.MetadataAck=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.result=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.result!=null&&Object.hasOwnProperty.call(pt,"result")&&ut.uint32(8).sint32(pt.result),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.MetadataAck;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.result=pt.sint32():pt.skipType(7&gt)}return ft},ct}(),nt.VideoStreamSubscribeReq=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.type=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.type!=null&&Object.hasOwnProperty.call(pt,"type")&&ut.uint32(8).uint32(pt.type),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamSubscribeReq;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.type=pt.uint32():pt.skipType(7&gt)}return ft},ct}(),nt.VideoStreamSubscribeRsp=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.result=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.result!=null&&Object.hasOwnProperty.call(pt,"result")&&ut.uint32(8).sint32(pt.result),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamSubscribeRsp;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.result=pt.sint32():pt.skipType(7&gt)}return ft},ct}(),nt.VideoStreamFallbackTypeReq=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.type=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.type!=null&&Object.hasOwnProperty.call(pt,"type")&&ut.uint32(8).uint32(pt.type),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamFallbackTypeReq;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.type=pt.uint32():pt.skipType(7&gt)}return ft},ct}(),nt.VideoStreamFallbackTypeRsp=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.result=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.result!=null&&Object.hasOwnProperty.call(pt,"result")&&ut.uint32(8).sint32(pt.result),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamFallbackTypeRsp;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.result=pt.sint32():pt.skipType(7&gt)}return ft},ct}(),nt.VideoStreamChangePush=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.change_type=0,ct.prototype.video_type=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.change_type!=null&&Object.hasOwnProperty.call(pt,"change_type")&&ut.uint32(8).uint32(pt.change_type),pt.video_type!=null&&Object.hasOwnProperty.call(pt,"video_type")&&ut.uint32(16).uint32(pt.video_type),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamChangePush;pt.pos<ht;){var gt=pt.uint32();switch(gt>>>3){case 1:ft.change_type=pt.uint32();break;case 2:ft.video_type=pt.uint32();break;default:pt.skipType(7&gt)}}return ft},ct}(),nt.VideoStreamChangeAck=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.result=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.result!=null&&Object.hasOwnProperty.call(pt,"result")&&ut.uint32(8).sint32(pt.result),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.VideoStreamChangeAck;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.result=pt.sint32():pt.skipType(7&gt)}return ft},ct}(),nt.UserUnregisteredSEIFilterReq=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.sei_filter="",ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.sei_filter!=null&&Object.hasOwnProperty.call(pt,"sei_filter")&&ut.uint32(10).string(pt.sei_filter),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.UserUnregisteredSEIFilterReq;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.sei_filter=pt.string():pt.skipType(7&gt)}return ft},ct}(),nt.UserUnregisteredSEIFilterRsp=function(){function ct(pt){if(pt)for(var ut=Object.keys(pt),ht=0;ht<ut.length;++ht)pt[ut[ht]]!=null&&(this[ut[ht]]=pt[ut[ht]])}return ct.prototype.result=0,ct.create=function(pt){return new ct(pt)},ct.encode=function(pt,ut){return ut||(ut=st.create()),pt.result!=null&&Object.hasOwnProperty.call(pt,"result")&&ut.uint32(8).sint32(pt.result),ut},ct.decode=function(pt,ut){pt instanceof it||(pt=it.create(pt));for(var ht=ut===void 0?pt.len:pt.pos+ut,ft=new lt.webrtc_cmd.UserUnregisteredSEIFilterRsp;pt.pos<ht;){var gt=pt.uint32();gt>>>3==1?ft.result=pt.sint32():pt.skipType(7&gt)}return ft},ct}(),nt.WebrtcCmdReqMsg=function(){function ct(ut){if(ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}var pt;return ct.prototype.meta_data_push=null,ct.prototype.video_stream_sub=null,ct.prototype.video_fallback_type=null,ct.prototype.video_change_push=null,ct.prototype.usr_sei_filter=null,Object.defineProperty(ct.prototype,"body",{get:at.oneOfGetter(pt=["meta_data_push","video_stream_sub","video_fallback_type","video_change_push","usr_sei_filter"]),set:at.oneOfSetter(pt)}),ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ht){return ht||(ht=st.create()),ut.meta_data_push!=null&&Object.hasOwnProperty.call(ut,"meta_data_push")&&lt.webrtc_cmd.MetadataPush.encode(ut.meta_data_push,ht.uint32(10).fork()).ldelim(),ut.video_stream_sub!=null&&Object.hasOwnProperty.call(ut,"video_stream_sub")&&lt.webrtc_cmd.VideoStreamSubscribeReq.encode(ut.video_stream_sub,ht.uint32(18).fork()).ldelim(),ut.video_fallback_type!=null&&Object.hasOwnProperty.call(ut,"video_fallback_type")&&lt.webrtc_cmd.VideoStreamFallbackTypeReq.encode(ut.video_fallback_type,ht.uint32(26).fork()).ldelim(),ut.video_change_push!=null&&Object.hasOwnProperty.call(ut,"video_change_push")&&lt.webrtc_cmd.VideoStreamChangePush.encode(ut.video_change_push,ht.uint32(34).fork()).ldelim(),ut.usr_sei_filter!=null&&Object.hasOwnProperty.call(ut,"usr_sei_filter")&&lt.webrtc_cmd.UserUnregisteredSEIFilterReq.encode(ut.usr_sei_filter,ht.uint32(42).fork()).ldelim(),ht},ct.decode=function(ut,ht){ut instanceof it||(ut=it.create(ut));for(var ft=ht===void 0?ut.len:ut.pos+ht,gt=new lt.webrtc_cmd.WebrtcCmdReqMsg;ut.pos<ft;){var vt=ut.uint32();switch(vt>>>3){case 1:gt.meta_data_push=lt.webrtc_cmd.MetadataPush.decode(ut,ut.uint32());break;case 2:gt.video_stream_sub=lt.webrtc_cmd.VideoStreamSubscribeReq.decode(ut,ut.uint32());break;case 3:gt.video_fallback_type=lt.webrtc_cmd.VideoStreamFallbackTypeReq.decode(ut,ut.uint32());break;case 4:gt.video_change_push=lt.webrtc_cmd.VideoStreamChangePush.decode(ut,ut.uint32());break;case 5:gt.usr_sei_filter=lt.webrtc_cmd.UserUnregisteredSEIFilterReq.decode(ut,ut.uint32());break;default:ut.skipType(7&vt)}}return gt},ct}(),nt.WebrtcCmdRspMsg=function(){function ct(ut){if(ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}var pt;return ct.prototype.meta_data_ack=null,ct.prototype.video_stream_sub=null,ct.prototype.video_fallback_type=null,ct.prototype.video_change_ack=null,ct.prototype.usr_sei_filter=null,Object.defineProperty(ct.prototype,"body",{get:at.oneOfGetter(pt=["meta_data_ack","video_stream_sub","video_fallback_type","video_change_ack","usr_sei_filter"]),set:at.oneOfSetter(pt)}),ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ht){return ht||(ht=st.create()),ut.meta_data_ack!=null&&Object.hasOwnProperty.call(ut,"meta_data_ack")&&lt.webrtc_cmd.MetadataAck.encode(ut.meta_data_ack,ht.uint32(10).fork()).ldelim(),ut.video_stream_sub!=null&&Object.hasOwnProperty.call(ut,"video_stream_sub")&&lt.webrtc_cmd.VideoStreamSubscribeRsp.encode(ut.video_stream_sub,ht.uint32(18).fork()).ldelim(),ut.video_fallback_type!=null&&Object.hasOwnProperty.call(ut,"video_fallback_type")&&lt.webrtc_cmd.VideoStreamFallbackTypeRsp.encode(ut.video_fallback_type,ht.uint32(26).fork()).ldelim(),ut.video_change_ack!=null&&Object.hasOwnProperty.call(ut,"video_change_ack")&&lt.webrtc_cmd.VideoStreamChangeAck.encode(ut.video_change_ack,ht.uint32(34).fork()).ldelim(),ut.usr_sei_filter!=null&&Object.hasOwnProperty.call(ut,"usr_sei_filter")&&lt.webrtc_cmd.UserUnregisteredSEIFilterRsp.encode(ut.usr_sei_filter,ht.uint32(42).fork()).ldelim(),ht},ct.decode=function(ut,ht){ut instanceof it||(ut=it.create(ut));for(var ft=ht===void 0?ut.len:ut.pos+ht,gt=new lt.webrtc_cmd.WebrtcCmdRspMsg;ut.pos<ft;){var vt=ut.uint32();switch(vt>>>3){case 1:gt.meta_data_ack=lt.webrtc_cmd.MetadataAck.decode(ut,ut.uint32());break;case 2:gt.video_stream_sub=lt.webrtc_cmd.VideoStreamSubscribeRsp.decode(ut,ut.uint32());break;case 3:gt.video_fallback_type=lt.webrtc_cmd.VideoStreamFallbackTypeRsp.decode(ut,ut.uint32());break;case 4:gt.video_change_ack=lt.webrtc_cmd.VideoStreamChangeAck.decode(ut,ut.uint32());break;case 5:gt.usr_sei_filter=lt.webrtc_cmd.UserUnregisteredSEIFilterRsp.decode(ut,ut.uint32());break;default:ut.skipType(7&vt)}}return gt},ct}(),nt),_e.exports=lt},5515:function(_e){_e.exports=function(){function et(rt,nt,ot){function it(lt,ct){if(!nt[lt]){if(!rt[lt]){if(st)return st(lt,!0);var pt=new Error("Cannot find module '"+lt+"'");throw pt.code="MODULE_NOT_FOUND",pt}var ut=nt[lt]={exports:{}};rt[lt][0].call(ut.exports,function(ht){return it(rt[lt][1][ht]||ht)},ut,ut.exports,et,rt,nt,ot)}return nt[lt].exports}for(var st=void 0,at=0;at<ot.length;at++)it(ot[at]);return it}return et}()({1:[function(et,rt,nt){var ot=(0,et("./adapter_factory.js").adapterFactory)({window});rt.exports=ot},{"./adapter_factory.js":2}],2:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.adapterFactory=ut;var ot=pt(et("./utils")),it=pt(et("./chrome/chrome_shim")),st=pt(et("./edge/edge_shim")),at=pt(et("./firefox/firefox_shim")),lt=pt(et("./safari/safari_shim")),ct=pt(et("./common_shim"));function pt(ht){if(ht&&ht.__esModule)return ht;var ft={};if(ht!=null)for(var gt in ht)Object.prototype.hasOwnProperty.call(ht,gt)&&(ft[gt]=ht[gt]);return ft.default=ht,ft}function ut(){var ht=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},gt=ot.log,vt=ot.detectBrowser(ht),yt={browserDetails:vt,commonShim:ct,extractVersion:ot.extractVersion,disableLog:ot.disableLog,disableWarnings:ot.disableWarnings};switch(vt.browser){case"chrome":if(!it||!it.shimPeerConnection||!ft.shimChrome)return gt("Chrome shim is not included in this adapter release."),yt;gt("adapter.js shimming chrome."),yt.browserShim=it,it.shimGetUserMedia(ht),it.shimMediaStream(ht),it.shimPeerConnection(ht),it.shimOnTrack(ht),it.shimAddTrackRemoveTrack(ht),it.shimGetSendersWithDtmf(ht),it.shimGetStats(ht),it.shimSenderReceiverGetStats(ht),it.fixNegotiationNeeded(ht),ct.shimRTCIceCandidate(ht),ct.shimConnectionState(ht),ct.shimMaxMessageSize(ht),ct.shimSendThrowTypeError(ht),ct.removeAllowExtmapMixed(ht);break;case"firefox":if(!at||!at.shimPeerConnection||!ft.shimFirefox)return gt("Firefox shim is not included in this adapter release."),yt;gt("adapter.js shimming firefox."),yt.browserShim=at,at.shimGetUserMedia(ht),at.shimPeerConnection(ht),at.shimOnTrack(ht),at.shimRemoveStream(ht),at.shimSenderGetStats(ht),at.shimReceiverGetStats(ht),at.shimRTCDataChannel(ht),ct.shimRTCIceCandidate(ht),ct.shimConnectionState(ht),ct.shimMaxMessageSize(ht),ct.shimSendThrowTypeError(ht);break;case"edge":if(!st||!st.shimPeerConnection||!ft.shimEdge)return gt("MS edge shim is not included in this adapter release."),yt;gt("adapter.js shimming edge."),yt.browserShim=st,st.shimGetUserMedia(ht),st.shimGetDisplayMedia(ht),st.shimPeerConnection(ht),st.shimReplaceTrack(ht),ct.shimMaxMessageSize(ht),ct.shimSendThrowTypeError(ht);break;case"safari":if(!lt||!ft.shimSafari)return gt("Safari shim is not included in this adapter release."),yt;gt("adapter.js shimming safari."),yt.browserShim=lt,lt.shimRTCIceServerUrls(ht),lt.shimCreateOfferLegacy(ht),lt.shimCallbacksAPI(ht),lt.shimLocalStreamsAPI(ht),lt.shimRemoteStreamsAPI(ht),lt.shimTrackEventTransceiver(ht),lt.shimGetUserMedia(ht),ct.shimRTCIceCandidate(ht),ct.shimMaxMessageSize(ht),ct.shimSendThrowTypeError(ht),ct.removeAllowExtmapMixed(ht);break;default:gt("Unsupported browser!")}return yt}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=nt.shimGetUserMedia=void 0;var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},it=et("./getusermedia");Object.defineProperty(nt,"shimGetUserMedia",{enumerable:!0,get:function(){return it.shimGetUserMedia}});var st=et("./getdisplaymedia");Object.defineProperty(nt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return st.shimGetDisplayMedia}}),nt.shimMediaStream=ct,nt.shimOnTrack=pt,nt.shimGetSendersWithDtmf=ut,nt.shimGetStats=ht,nt.shimSenderReceiverGetStats=ft,nt.shimAddTrackRemoveTrackWithNative=gt,nt.shimAddTrackRemoveTrack=vt,nt.shimPeerConnection=yt,nt.fixNegotiationNeeded=mt;var at=lt(et("../utils.js"));function lt(Et){if(Et&&Et.__esModule)return Et;var bt={};if(Et!=null)for(var Ct in Et)Object.prototype.hasOwnProperty.call(Et,Ct)&&(bt[Ct]=Et[Ct]);return bt.default=Et,bt}function ct(Et){Et.MediaStream=Et.MediaStream||Et.webkitMediaStream}function pt(Et){if((Et===void 0?"undefined":ot(Et))==="object"&&Et.RTCPeerConnection&&!("ontrack"in Et.RTCPeerConnection.prototype)){Object.defineProperty(Et.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(Ct){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=Ct)},enumerable:!0,configurable:!0});var bt=Et.RTCPeerConnection.prototype.setRemoteDescription;Et.RTCPeerConnection.prototype.setRemoteDescription=function(){var Ct=this;return this._ontrackpoly||(this._ontrackpoly=function(Tt){Tt.stream.addEventListener("addtrack",function(wt){var Rt=void 0;Rt=Et.RTCPeerConnection.prototype.getReceivers?Ct.getReceivers().find(function(St){return St.track&&St.track.id===wt.track.id}):{track:wt.track};var It=new Event("track");It.track=wt.track,It.receiver=Rt,It.transceiver={receiver:Rt},It.streams=[Tt.stream],Ct.dispatchEvent(It)}),Tt.stream.getTracks().forEach(function(wt){var Rt=void 0;Rt=Et.RTCPeerConnection.prototype.getReceivers?Ct.getReceivers().find(function(St){return St.track&&St.track.id===wt.id}):{track:wt};var It=new Event("track");It.track=wt,It.receiver=Rt,It.transceiver={receiver:Rt},It.streams=[Tt.stream],Ct.dispatchEvent(It)})},this.addEventListener("addstream",this._ontrackpoly)),bt.apply(this,arguments)}}else at.wrapPeerConnectionEvent(Et,"track",function(Ct){return Ct.transceiver||Object.defineProperty(Ct,"transceiver",{value:{receiver:Ct.receiver}}),Ct})}function ut(Et){if((Et===void 0?"undefined":ot(Et))==="object"&&Et.RTCPeerConnection&&!("getSenders"in Et.RTCPeerConnection.prototype)&&"createDTMFSender"in Et.RTCPeerConnection.prototype){var bt=function(St,Pt){return{track:Pt,get dtmf(){return this._dtmf===void 0&&(this._dtmf=Pt.kind==="audio"?St.createDTMFSender(Pt):null),this._dtmf},_pc:St}};if(!Et.RTCPeerConnection.prototype.getSenders){Et.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var Ct=Et.RTCPeerConnection.prototype.addTrack;Et.RTCPeerConnection.prototype.addTrack=function(St,Pt){var Ot=Ct.apply(this,arguments);return Ot||(Ot=bt(this,St),this._senders.push(Ot)),Ot};var Tt=Et.RTCPeerConnection.prototype.removeTrack;Et.RTCPeerConnection.prototype.removeTrack=function(St){Tt.apply(this,arguments);var Pt=this._senders.indexOf(St);Pt!==-1&&this._senders.splice(Pt,1)}}var wt=Et.RTCPeerConnection.prototype.addStream;Et.RTCPeerConnection.prototype.addStream=function(St){var Pt=this;this._senders=this._senders||[],wt.apply(this,[St]),St.getTracks().forEach(function(Ot){Pt._senders.push(bt(Pt,Ot))})};var Rt=Et.RTCPeerConnection.prototype.removeStream;Et.RTCPeerConnection.prototype.removeStream=function(St){var Pt=this;this._senders=this._senders||[],Rt.apply(this,[St]),St.getTracks().forEach(function(Ot){var Ut=Pt._senders.find(function(Bt){return Bt.track===Ot});Ut&&Pt._senders.splice(Pt._senders.indexOf(Ut),1)})}}else if((Et===void 0?"undefined":ot(Et))==="object"&&Et.RTCPeerConnection&&"getSenders"in Et.RTCPeerConnection.prototype&&"createDTMFSender"in Et.RTCPeerConnection.prototype&&Et.RTCRtpSender&&!("dtmf"in Et.RTCRtpSender.prototype)){var It=Et.RTCPeerConnection.prototype.getSenders;Et.RTCPeerConnection.prototype.getSenders=function(){var St=this,Pt=It.apply(this,[]);return Pt.forEach(function(Ot){return Ot._pc=St}),Pt},Object.defineProperty(Et.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this._dtmf=this.track.kind==="audio"?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function ht(Et){if(Et.RTCPeerConnection){var bt=Et.RTCPeerConnection.prototype.getStats;Et.RTCPeerConnection.prototype.getStats=function(Ct,Tt,wt){var Rt=this,It=arguments;if(arguments.length>0&&typeof Ct=="function")return bt.apply(this,arguments);if(bt.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return bt.apply(this,[]);var St=function(Ot){var Ut={};return Ot.result().forEach(function(Bt){var xt={id:Bt.id,timestamp:Bt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[Bt.type]||Bt.type};Bt.names().forEach(function(At){xt[At]=Bt.stat(At)}),Ut[xt.id]=xt}),Ut},Pt=function(Ot){return new Map(Object.keys(Ot).map(function(Ut){return[Ut,Ot[Ut]]}))};return arguments.length>=2?bt.apply(this,[function(Ot){It[1](Pt(St(Ot)))},arguments[0]]):new Promise(function(Ot,Ut){bt.apply(Rt,[function(Bt){Ot(Pt(St(Bt)))},Ut])}).then(Tt,wt)}}}function ft(Et){if((Et===void 0?"undefined":ot(Et))==="object"&&Et.RTCPeerConnection&&Et.RTCRtpSender&&Et.RTCRtpReceiver){if(!("getStats"in Et.RTCRtpSender.prototype)){var bt=Et.RTCPeerConnection.prototype.getSenders;bt&&(Et.RTCPeerConnection.prototype.getSenders=function(){var Rt=this,It=bt.apply(this,[]);return It.forEach(function(St){return St._pc=Rt}),It});var Ct=Et.RTCPeerConnection.prototype.addTrack;Ct&&(Et.RTCPeerConnection.prototype.addTrack=function(){var Rt=Ct.apply(this,arguments);return Rt._pc=this,Rt}),Et.RTCRtpSender.prototype.getStats=function(){var Rt=this;return this._pc.getStats().then(function(It){return at.filterStats(It,Rt.track,!0)})}}if(!("getStats"in Et.RTCRtpReceiver.prototype)){var Tt=Et.RTCPeerConnection.prototype.getReceivers;Tt&&(Et.RTCPeerConnection.prototype.getReceivers=function(){var Rt=this,It=Tt.apply(this,[]);return It.forEach(function(St){return St._pc=Rt}),It}),at.wrapPeerConnectionEvent(Et,"track",function(Rt){return Rt.receiver._pc=Rt.srcElement,Rt}),Et.RTCRtpReceiver.prototype.getStats=function(){var Rt=this;return this._pc.getStats().then(function(It){return at.filterStats(It,Rt.track,!1)})}}if("getStats"in Et.RTCRtpSender.prototype&&"getStats"in Et.RTCRtpReceiver.prototype){var wt=Et.RTCPeerConnection.prototype.getStats;Et.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof Et.MediaStreamTrack){var Rt=arguments[0],It=void 0,St=void 0,Pt=void 0;return this.getSenders().forEach(function(Ot){Ot.track===Rt&&(It?Pt=!0:It=Ot)}),this.getReceivers().forEach(function(Ot){return Ot.track===Rt&&(St?Pt=!0:St=Ot),Ot.track===Rt}),Pt||It&&St?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):It?It.getStats():St?St.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return wt.apply(this,arguments)}}}}function gt(Et){Et.RTCPeerConnection.prototype.getLocalStreams=function(){var Rt=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(It){return Rt._shimmedLocalStreams[It][0]})};var bt=Et.RTCPeerConnection.prototype.addTrack;Et.RTCPeerConnection.prototype.addTrack=function(Rt,It){if(!It)return bt.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var St=bt.apply(this,arguments);return this._shimmedLocalStreams[It.id]?this._shimmedLocalStreams[It.id].indexOf(St)===-1&&this._shimmedLocalStreams[It.id].push(St):this._shimmedLocalStreams[It.id]=[It,St],St};var Ct=Et.RTCPeerConnection.prototype.addStream;Et.RTCPeerConnection.prototype.addStream=function(Rt){var It=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Rt.getTracks().forEach(function(Ot){if(It.getSenders().find(function(Ut){return Ut.track===Ot}))throw new DOMException("Track already exists.","InvalidAccessError")});var St=this.getSenders();Ct.apply(this,arguments);var Pt=this.getSenders().filter(function(Ot){return St.indexOf(Ot)===-1});this._shimmedLocalStreams[Rt.id]=[Rt].concat(Pt)};var Tt=Et.RTCPeerConnection.prototype.removeStream;Et.RTCPeerConnection.prototype.removeStream=function(Rt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[Rt.id],Tt.apply(this,arguments)};var wt=Et.RTCPeerConnection.prototype.removeTrack;Et.RTCPeerConnection.prototype.removeTrack=function(Rt){var It=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Rt&&Object.keys(this._shimmedLocalStreams).forEach(function(St){var Pt=It._shimmedLocalStreams[St].indexOf(Rt);Pt!==-1&&It._shimmedLocalStreams[St].splice(Pt,1),It._shimmedLocalStreams[St].length===1&&delete It._shimmedLocalStreams[St]}),wt.apply(this,arguments)}}function vt(Et){if(Et.RTCPeerConnection){var bt=at.detectBrowser(Et);if(Et.RTCPeerConnection.prototype.addTrack&&bt.version>=65)return gt(Et);var Ct=Et.RTCPeerConnection.prototype.getLocalStreams;Et.RTCPeerConnection.prototype.getLocalStreams=function(){var Ot=this,Ut=Ct.apply(this);return this._reverseStreams=this._reverseStreams||{},Ut.map(function(Bt){return Ot._reverseStreams[Bt.id]})};var Tt=Et.RTCPeerConnection.prototype.addStream;Et.RTCPeerConnection.prototype.addStream=function(Ot){var Ut=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Ot.getTracks().forEach(function(xt){if(Ut.getSenders().find(function(At){return At.track===xt}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[Ot.id]){var Bt=new Et.MediaStream(Ot.getTracks());this._streams[Ot.id]=Bt,this._reverseStreams[Bt.id]=Ot,Ot=Bt}Tt.apply(this,[Ot])};var wt=Et.RTCPeerConnection.prototype.removeStream;Et.RTCPeerConnection.prototype.removeStream=function(Ot){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},wt.apply(this,[this._streams[Ot.id]||Ot]),delete this._reverseStreams[this._streams[Ot.id]?this._streams[Ot.id].id:Ot.id],delete this._streams[Ot.id]},Et.RTCPeerConnection.prototype.addTrack=function(Ot,Ut){var Bt=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var xt=[].slice.call(arguments,1);if(xt.length!==1||!xt[0].getTracks().find(function(Nt){return Nt===Ot}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(Nt){return Nt.track===Ot}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var At=this._streams[Ut.id];if(At)At.addTrack(Ot),Promise.resolve().then(function(){Bt.dispatchEvent(new Event("negotiationneeded"))});else{var Mt=new Et.MediaStream([Ot]);this._streams[Ut.id]=Mt,this._reverseStreams[Mt.id]=Ut,this.addStream(Mt)}return this.getSenders().find(function(Nt){return Nt.track===Ot})},["createOffer","createAnswer"].forEach(function(Ot){var Ut=Et.RTCPeerConnection.prototype[Ot];Et.RTCPeerConnection.prototype[Ot]=function(){var Bt=this,xt=arguments;return arguments.length&&typeof arguments[0]=="function"?Ut.apply(this,[function(At){var Mt=St(Bt,At);xt[0].apply(null,[Mt])},function(At){xt[1]&&xt[1].apply(null,At)},arguments[2]]):Ut.apply(this,arguments).then(function(At){return St(Bt,At)})}});var Rt=Et.RTCPeerConnection.prototype.setLocalDescription;Et.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=Pt(this,arguments[0]),Rt.apply(this,arguments)):Rt.apply(this,arguments)};var It=Object.getOwnPropertyDescriptor(Et.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(Et.RTCPeerConnection.prototype,"localDescription",{get:function(){var Ot=It.get.apply(this);return Ot.type===""?Ot:St(this,Ot)}}),Et.RTCPeerConnection.prototype.removeTrack=function(Ot){var Ut=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!Ot._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(Ot._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var Bt=void 0;Object.keys(this._streams).forEach(function(xt){Ut._streams[xt].getTracks().find(function(At){return Ot.track===At})&&(Bt=Ut._streams[xt])}),Bt&&(Bt.getTracks().length===1?this.removeStream(this._reverseStreams[Bt.id]):Bt.removeTrack(Ot.track),this.dispatchEvent(new Event("negotiationneeded")))}}function St(Ot,Ut){var Bt=Ut.sdp;return Object.keys(Ot._reverseStreams||[]).forEach(function(xt){var At=Ot._reverseStreams[xt];Bt=Bt.replace(new RegExp(Ot._streams[At.id].id,"g"),At.id)}),new RTCSessionDescription({type:Ut.type,sdp:Bt})}function Pt(Ot,Ut){var Bt=Ut.sdp;return Object.keys(Ot._reverseStreams||[]).forEach(function(xt){var At=Ot._reverseStreams[xt],Mt=Ot._streams[At.id];Bt=Bt.replace(new RegExp(At.id,"g"),Mt.id)}),new RTCSessionDescription({type:Ut.type,sdp:Bt})}}function yt(Et){if(!Et.RTCPeerConnection&&Et.webkitRTCPeerConnection&&(Et.RTCPeerConnection=Et.webkitRTCPeerConnection),Et.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Ct){var Tt=Et.RTCPeerConnection.prototype[Ct];Et.RTCPeerConnection.prototype[Ct]=function(){return arguments[0]=new(Ct==="addIceCandidate"?Et.RTCIceCandidate:Et.RTCSessionDescription)(arguments[0]),Tt.apply(this,arguments)}});var bt=Et.RTCPeerConnection.prototype.addIceCandidate;Et.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?bt.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function mt(Et){at.wrapPeerConnectionEvent(Et,"negotiationneeded",function(bt){if(bt.target.signalingState==="stable")return bt})}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(et,rt,nt){function ot(it,st){it.navigator.mediaDevices&&"getDisplayMedia"in it.navigator.mediaDevices||it.navigator.mediaDevices&&(typeof st=="function"?it.navigator.mediaDevices.getDisplayMedia=function(at){return st(at).then(function(lt){var ct=at.video&&at.video.width,pt=at.video&&at.video.height;return at.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:lt,maxFrameRate:at.video&&at.video.frameRate||3}},ct&&(at.video.mandatory.maxWidth=ct),pt&&(at.video.mandatory.maxHeight=pt),it.navigator.mediaDevices.getUserMedia(at)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=ot},{}],5:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ct){return typeof ct}:function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct};nt.shimGetUserMedia=lt;var it=st(et("../utils.js"));function st(ct){if(ct&&ct.__esModule)return ct;var pt={};if(ct!=null)for(var ut in ct)Object.prototype.hasOwnProperty.call(ct,ut)&&(pt[ut]=ct[ut]);return pt.default=ct,pt}var at=it.log;function lt(ct){var pt=ct&&ct.navigator;if(pt.mediaDevices){var ut=it.detectBrowser(ct),ht=function(mt){if((mt===void 0?"undefined":ot(mt))!=="object"||mt.mandatory||mt.optional)return mt;var Et={};return Object.keys(mt).forEach(function(bt){if(bt!=="require"&&bt!=="advanced"&&bt!=="mediaSource"){var Ct=ot(mt[bt])==="object"?mt[bt]:{ideal:mt[bt]};Ct.exact!==void 0&&typeof Ct.exact=="number"&&(Ct.min=Ct.max=Ct.exact);var Tt=function(Rt,It){return Rt?Rt+It.charAt(0).toUpperCase()+It.slice(1):It==="deviceId"?"sourceId":It};if(Ct.ideal!==void 0){Et.optional=Et.optional||[];var wt={};typeof Ct.ideal=="number"?(wt[Tt("min",bt)]=Ct.ideal,Et.optional.push(wt),(wt={})[Tt("max",bt)]=Ct.ideal,Et.optional.push(wt)):(wt[Tt("",bt)]=Ct.ideal,Et.optional.push(wt))}Ct.exact!==void 0&&typeof Ct.exact!="number"?(Et.mandatory=Et.mandatory||{},Et.mandatory[Tt("",bt)]=Ct.exact):["min","max"].forEach(function(Rt){Ct[Rt]!==void 0&&(Et.mandatory=Et.mandatory||{},Et.mandatory[Tt(Rt,bt)]=Ct[Rt])})}}),mt.advanced&&(Et.optional=(Et.optional||[]).concat(mt.advanced)),Et},ft=function(mt,Et){if(ut.version>=61)return Et(mt);if((mt=JSON.parse(JSON.stringify(mt)))&&ot(mt.audio)==="object"){var bt=function(Rt,It,St){It in Rt&&!(St in Rt)&&(Rt[St]=Rt[It],delete Rt[It])};bt((mt=JSON.parse(JSON.stringify(mt))).audio,"autoGainControl","googAutoGainControl"),bt(mt.audio,"noiseSuppression","googNoiseSuppression"),mt.audio=ht(mt.audio)}if(mt&&ot(mt.video)==="object"){var Ct=mt.video.facingMode;Ct=Ct&&((Ct===void 0?"undefined":ot(Ct))==="object"?Ct:{ideal:Ct});var Tt=ut.version<66;if(Ct&&(Ct.exact==="user"||Ct.exact==="environment"||Ct.ideal==="user"||Ct.ideal==="environment")&&(!pt.mediaDevices.getSupportedConstraints||!pt.mediaDevices.getSupportedConstraints().facingMode||Tt)){delete mt.video.facingMode;var wt=void 0;if(Ct.exact==="environment"||Ct.ideal==="environment"?wt=["back","rear"]:Ct.exact!=="user"&&Ct.ideal!=="user"||(wt=["front"]),wt)return pt.mediaDevices.enumerateDevices().then(function(Rt){var It=(Rt=Rt.filter(function(St){return St.kind==="videoinput"})).find(function(St){return wt.some(function(Pt){return St.label.toLowerCase().includes(Pt)})});return!It&&Rt.length&&wt.includes("back")&&(It=Rt[Rt.length-1]),It&&(mt.video.deviceId=Ct.exact?{exact:It.deviceId}:{ideal:It.deviceId}),mt.video=ht(mt.video),at("chrome: "+JSON.stringify(mt)),Et(mt)})}mt.video=ht(mt.video)}return at("chrome: "+JSON.stringify(mt)),Et(mt)},gt=function(mt){return ut.version>=64?mt:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[mt.name]||mt.name,message:mt.message,constraint:mt.constraint||mt.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},vt=function(mt,Et,bt){ft(mt,function(Ct){pt.webkitGetUserMedia(Ct,Et,function(Tt){bt&&bt(gt(Tt))})})};if(pt.getUserMedia=vt.bind(pt),pt.mediaDevices.getUserMedia){var yt=pt.mediaDevices.getUserMedia.bind(pt.mediaDevices);pt.mediaDevices.getUserMedia=function(mt){return ft(mt,function(Et){return yt(Et).then(function(bt){if(Et.audio&&!bt.getAudioTracks().length||Et.video&&!bt.getVideoTracks().length)throw bt.getTracks().forEach(function(Ct){Ct.stop()}),new DOMException("","NotFoundError");return bt},function(bt){return Promise.reject(gt(bt))})})}}}}},{"../utils.js":15}],6:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt};nt.shimRTCIceCandidate=ct,nt.shimMaxMessageSize=pt,nt.shimSendThrowTypeError=ut,nt.shimConnectionState=ht,nt.removeAllowExtmapMixed=ft;var it=lt(et("sdp")),st=at(et("./utils"));function at(gt){if(gt&&gt.__esModule)return gt;var vt={};if(gt!=null)for(var yt in gt)Object.prototype.hasOwnProperty.call(gt,yt)&&(vt[yt]=gt[yt]);return vt.default=gt,vt}function lt(gt){return gt&&gt.__esModule?gt:{default:gt}}function ct(gt){if(!(!gt.RTCIceCandidate||gt.RTCIceCandidate&&"foundation"in gt.RTCIceCandidate.prototype)){var vt=gt.RTCIceCandidate;gt.RTCIceCandidate=function(yt){if((yt===void 0?"undefined":ot(yt))==="object"&&yt.candidate&&yt.candidate.indexOf("a=")===0&&((yt=JSON.parse(JSON.stringify(yt))).candidate=yt.candidate.substr(2)),yt.candidate&&yt.candidate.length){var mt=new vt(yt),Et=it.default.parseCandidate(yt.candidate),bt=Object.assign(mt,Et);return bt.toJSON=function(){return{candidate:bt.candidate,sdpMid:bt.sdpMid,sdpMLineIndex:bt.sdpMLineIndex,usernameFragment:bt.usernameFragment}},bt}return new vt(yt)},gt.RTCIceCandidate.prototype=vt.prototype,st.wrapPeerConnectionEvent(gt,"icecandidate",function(yt){return yt.candidate&&Object.defineProperty(yt,"candidate",{value:new gt.RTCIceCandidate(yt.candidate),writable:"false"}),yt})}}function pt(gt){if(!gt.RTCSctpTransport&&gt.RTCPeerConnection){var vt=st.detectBrowser(gt);"sctp"in gt.RTCPeerConnection.prototype||Object.defineProperty(gt.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var yt=function(Tt){if(!Tt||!Tt.sdp)return!1;var wt=it.default.splitSections(Tt.sdp);return wt.shift(),wt.some(function(Rt){var It=it.default.parseMLine(Rt);return It&&It.kind==="application"&&It.protocol.indexOf("SCTP")!==-1})},mt=function(Tt){var wt=Tt.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(wt===null||wt.length<2)return-1;var Rt=parseInt(wt[1],10);return Rt!=Rt?-1:Rt},Et=function(Tt){var wt=65536;return vt.browser==="firefox"&&(wt=vt.version<57?Tt===-1?16384:2147483637:vt.version<60?vt.version===57?65535:65536:2147483637),wt},bt=function(Tt,wt){var Rt=65536;vt.browser==="firefox"&&vt.version===57&&(Rt=65535);var It=it.default.matchPrefix(Tt.sdp,"a=max-message-size:");return It.length>0?Rt=parseInt(It[0].substr(19),10):vt.browser==="firefox"&&wt!==-1&&(Rt=2147483637),Rt},Ct=gt.RTCPeerConnection.prototype.setRemoteDescription;gt.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,yt(arguments[0])){var Tt=mt(arguments[0]),wt=Et(Tt),Rt=bt(arguments[0],Tt),It=void 0;It=wt===0&&Rt===0?Number.POSITIVE_INFINITY:wt===0||Rt===0?Math.max(wt,Rt):Math.min(wt,Rt);var St={};Object.defineProperty(St,"maxMessageSize",{get:function(){return It}}),this._sctp=St}return Ct.apply(this,arguments)}}}function ut(gt){if(gt.RTCPeerConnection&&"createDataChannel"in gt.RTCPeerConnection.prototype){var vt=gt.RTCPeerConnection.prototype.createDataChannel;gt.RTCPeerConnection.prototype.createDataChannel=function(){var mt=vt.apply(this,arguments);return yt(mt,this),mt},st.wrapPeerConnectionEvent(gt,"datachannel",function(mt){return yt(mt.channel,mt.target),mt})}function yt(mt,Et){var bt=mt.send;mt.send=function(){var Ct=arguments[0];if(mt.readyState==="open"&&Et.sctp&&(Ct.length||Ct.size||Ct.byteLength)>Et.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+Et.sctp.maxMessageSize+" bytes)");return bt.apply(mt,arguments)}}}function ht(gt){if(gt.RTCPeerConnection&&!("connectionState"in gt.RTCPeerConnection.prototype)){var vt=gt.RTCPeerConnection.prototype;Object.defineProperty(vt,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(vt,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(yt){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),yt&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=yt)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(yt){var mt=vt[yt];vt[yt]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(Et){var bt=Et.target;if(bt._lastConnectionState!==bt.connectionState){bt._lastConnectionState=bt.connectionState;var Ct=new Event("connectionstatechange",Et);bt.dispatchEvent(Ct)}return Et},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),mt.apply(this,arguments)}})}}function ft(gt){if(gt.RTCPeerConnection){var vt=st.detectBrowser(gt);if(!(vt.browser==="chrome"&&vt.version>=71)){var yt=gt.RTCPeerConnection.prototype.setRemoteDescription;gt.RTCPeerConnection.prototype.setRemoteDescription=function(mt){return mt&&mt.sdp&&mt.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(mt.sdp=mt.sdp.split(`
`).filter(function(Et){return Et.trim()!=="a=extmap-allow-mixed"}).join(`
`)),yt.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=nt.shimGetUserMedia=void 0;var ot=et("./getusermedia");Object.defineProperty(nt,"shimGetUserMedia",{enumerable:!0,get:function(){return ot.shimGetUserMedia}});var it=et("./getdisplaymedia");Object.defineProperty(nt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return it.shimGetDisplayMedia}}),nt.shimPeerConnection=ut,nt.shimReplaceTrack=ht;var st=pt(et("../utils")),at=et("./filtericeservers"),lt=ct(et("rtcpeerconnection-shim"));function ct(ft){return ft&&ft.__esModule?ft:{default:ft}}function pt(ft){if(ft&&ft.__esModule)return ft;var gt={};if(ft!=null)for(var vt in ft)Object.prototype.hasOwnProperty.call(ft,vt)&&(gt[vt]=ft[vt]);return gt.default=ft,gt}function ut(ft){var gt=st.detectBrowser(ft);if(ft.RTCIceGatherer&&(ft.RTCIceCandidate||(ft.RTCIceCandidate=function(mt){return mt}),ft.RTCSessionDescription||(ft.RTCSessionDescription=function(mt){return mt}),gt.version<15025)){var vt=Object.getOwnPropertyDescriptor(ft.MediaStreamTrack.prototype,"enabled");Object.defineProperty(ft.MediaStreamTrack.prototype,"enabled",{set:function(mt){vt.set.call(this,mt);var Et=new Event("enabled");Et.enabled=mt,this.dispatchEvent(Et)}})}ft.RTCRtpSender&&!("dtmf"in ft.RTCRtpSender.prototype)&&Object.defineProperty(ft.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new ft.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),ft.RTCDtmfSender&&!ft.RTCDTMFSender&&(ft.RTCDTMFSender=ft.RTCDtmfSender);var yt=(0,lt.default)(ft,gt.version);ft.RTCPeerConnection=function(mt){return mt&&mt.iceServers&&(mt.iceServers=(0,at.filterIceServers)(mt.iceServers,gt.version),st.log("ICE servers after filtering:",mt.iceServers)),new yt(mt)},ft.RTCPeerConnection.prototype=yt.prototype}function ht(ft){ft.RTCRtpSender&&!("replaceTrack"in ft.RTCRtpSender.prototype)&&(ft.RTCRtpSender.prototype.replaceTrack=ft.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.filterIceServers=st;var ot=it(et("../utils"));function it(at){if(at&&at.__esModule)return at;var lt={};if(at!=null)for(var ct in at)Object.prototype.hasOwnProperty.call(at,ct)&&(lt[ct]=at[ct]);return lt.default=at,lt}function st(at,lt){var ct=!1;return(at=JSON.parse(JSON.stringify(at))).filter(function(pt){if(pt&&(pt.urls||pt.url)){var ut=pt.urls||pt.url;pt.url&&!pt.urls&&ot.deprecated("RTCIceServer.url","RTCIceServer.urls");var ht=typeof ut=="string";return ht&&(ut=[ut]),ut=ut.filter(function(ft){if(ft.indexOf("stun:")===0)return!1;var gt=ft.startsWith("turn")&&!ft.startsWith("turn:[")&&ft.includes("transport=udp");return gt&&!ct?(ct=!0,!0):gt&&!ct}),delete pt.url,pt.urls=ht?ut[0]:ut,!!ut.length}})}},{"../utils":15}],9:[function(et,rt,nt){function ot(it){"getDisplayMedia"in it.navigator&&it.navigator.mediaDevices&&(it.navigator.mediaDevices&&"getDisplayMedia"in it.navigator.mediaDevices||(it.navigator.mediaDevices.getDisplayMedia=it.navigator.getDisplayMedia.bind(it.navigator)))}Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=ot},{}],10:[function(et,rt,nt){function ot(it){var st=it&&it.navigator,at=function(ct){return{name:{PermissionDeniedError:"NotAllowedError"}[ct.name]||ct.name,message:ct.message,constraint:ct.constraint,toString:function(){return this.name}}},lt=st.mediaDevices.getUserMedia.bind(st.mediaDevices);st.mediaDevices.getUserMedia=function(ct){return lt(ct).catch(function(pt){return Promise.reject(at(pt))})}}Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetUserMedia=ot},{}],11:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=nt.shimGetUserMedia=void 0;var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},it=et("./getusermedia");Object.defineProperty(nt,"shimGetUserMedia",{enumerable:!0,get:function(){return it.shimGetUserMedia}});var st=et("./getdisplaymedia");Object.defineProperty(nt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return st.shimGetDisplayMedia}}),nt.shimOnTrack=ct,nt.shimPeerConnection=pt,nt.shimSenderGetStats=ut,nt.shimReceiverGetStats=ht,nt.shimRemoveStream=ft,nt.shimRTCDataChannel=gt;var at=lt(et("../utils"));function lt(vt){if(vt&&vt.__esModule)return vt;var yt={};if(vt!=null)for(var mt in vt)Object.prototype.hasOwnProperty.call(vt,mt)&&(yt[mt]=vt[mt]);return yt.default=vt,yt}function ct(vt){(vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCTrackEvent&&"receiver"in vt.RTCTrackEvent.prototype&&!("transceiver"in vt.RTCTrackEvent.prototype)&&Object.defineProperty(vt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function pt(vt){var yt=at.detectBrowser(vt);if((vt===void 0?"undefined":ot(vt))==="object"&&(vt.RTCPeerConnection||vt.mozRTCPeerConnection)){!vt.RTCPeerConnection&&vt.mozRTCPeerConnection&&(vt.RTCPeerConnection=vt.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Ct){var Tt=vt.RTCPeerConnection.prototype[Ct];vt.RTCPeerConnection.prototype[Ct]=function(){return arguments[0]=new(Ct==="addIceCandidate"?vt.RTCIceCandidate:vt.RTCSessionDescription)(arguments[0]),Tt.apply(this,arguments)}});var mt=vt.RTCPeerConnection.prototype.addIceCandidate;vt.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?mt.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var Et={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},bt=vt.RTCPeerConnection.prototype.getStats;vt.RTCPeerConnection.prototype.getStats=function(Ct,Tt,wt){return bt.apply(this,[Ct||null]).then(function(Rt){if(yt.version<53&&!Tt)try{Rt.forEach(function(It){It.type=Et[It.type]||It.type})}catch(It){if(It.name!=="TypeError")throw It;Rt.forEach(function(St,Pt){Rt.set(Pt,Object.assign({},St,{type:Et[St.type]||St.type}))})}return Rt}).then(Tt,wt)}}}function ut(vt){if((vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection&&vt.RTCRtpSender&&(!vt.RTCRtpSender||!("getStats"in vt.RTCRtpSender.prototype))){var yt=vt.RTCPeerConnection.prototype.getSenders;yt&&(vt.RTCPeerConnection.prototype.getSenders=function(){var Et=this,bt=yt.apply(this,[]);return bt.forEach(function(Ct){return Ct._pc=Et}),bt});var mt=vt.RTCPeerConnection.prototype.addTrack;mt&&(vt.RTCPeerConnection.prototype.addTrack=function(){var Et=mt.apply(this,arguments);return Et._pc=this,Et}),vt.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function ht(vt){if((vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection&&vt.RTCRtpSender&&(!vt.RTCRtpSender||!("getStats"in vt.RTCRtpReceiver.prototype))){var yt=vt.RTCPeerConnection.prototype.getReceivers;yt&&(vt.RTCPeerConnection.prototype.getReceivers=function(){var mt=this,Et=yt.apply(this,[]);return Et.forEach(function(bt){return bt._pc=mt}),Et}),at.wrapPeerConnectionEvent(vt,"track",function(mt){return mt.receiver._pc=mt.srcElement,mt}),vt.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function ft(vt){vt.RTCPeerConnection&&!("removeStream"in vt.RTCPeerConnection.prototype)&&(vt.RTCPeerConnection.prototype.removeStream=function(yt){var mt=this;at.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(Et){Et.track&&yt.getTracks().includes(Et.track)&&mt.removeTrack(Et)})})}function gt(vt){vt.DataChannel&&!vt.RTCDataChannel&&(vt.RTCDataChannel=vt.DataChannel)}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(et,rt,nt){function ot(it,st){it.navigator.mediaDevices&&"getDisplayMedia"in it.navigator.mediaDevices||it.navigator.mediaDevices&&(it.navigator.mediaDevices.getDisplayMedia=function(at){if(!at||!at.video){var lt=new DOMException("getDisplayMedia without video constraints is undefined");return lt.name="NotFoundError",lt.code=8,Promise.reject(lt)}return at.video===!0?at.video={mediaSource:st}:at.video.mediaSource=st,it.navigator.mediaDevices.getUserMedia(at)})}Object.defineProperty(nt,"__esModule",{value:!0}),nt.shimGetDisplayMedia=ot},{}],13:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt};nt.shimGetUserMedia=at;var it=st(et("../utils"));function st(lt){if(lt&&lt.__esModule)return lt;var ct={};if(lt!=null)for(var pt in lt)Object.prototype.hasOwnProperty.call(lt,pt)&&(ct[pt]=lt[pt]);return ct.default=lt,ct}function at(lt){var ct=it.detectBrowser(lt),pt=lt&&lt.navigator,ut=lt&&lt.MediaStreamTrack;if(pt.getUserMedia=function(yt,mt,Et){it.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),pt.mediaDevices.getUserMedia(yt).then(mt,Et)},!(ct.version>55&&"autoGainControl"in pt.mediaDevices.getSupportedConstraints())){var ht=function(yt,mt,Et){mt in yt&&!(Et in yt)&&(yt[Et]=yt[mt],delete yt[mt])},ft=pt.mediaDevices.getUserMedia.bind(pt.mediaDevices);if(pt.mediaDevices.getUserMedia=function(yt){return(yt===void 0?"undefined":ot(yt))==="object"&&ot(yt.audio)==="object"&&(yt=JSON.parse(JSON.stringify(yt)),ht(yt.audio,"autoGainControl","mozAutoGainControl"),ht(yt.audio,"noiseSuppression","mozNoiseSuppression")),ft(yt)},ut&&ut.prototype.getSettings){var gt=ut.prototype.getSettings;ut.prototype.getSettings=function(){var yt=gt.apply(this,arguments);return ht(yt,"mozAutoGainControl","autoGainControl"),ht(yt,"mozNoiseSuppression","noiseSuppression"),yt}}if(ut&&ut.prototype.applyConstraints){var vt=ut.prototype.applyConstraints;ut.prototype.applyConstraints=function(yt){return this.kind==="audio"&&(yt===void 0?"undefined":ot(yt))==="object"&&(yt=JSON.parse(JSON.stringify(yt)),ht(yt,"autoGainControl","mozAutoGainControl"),ht(yt,"noiseSuppression","mozNoiseSuppression")),vt.apply(this,[yt])}}}}},{"../utils":15}],14:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt};nt.shimLocalStreamsAPI=at,nt.shimRemoteStreamsAPI=lt,nt.shimCallbacksAPI=ct,nt.shimGetUserMedia=pt,nt.shimConstraints=ut,nt.shimRTCIceServerUrls=ht,nt.shimTrackEventTransceiver=ft,nt.shimCreateOfferLegacy=gt;var it=st(et("../utils"));function st(vt){if(vt&&vt.__esModule)return vt;var yt={};if(vt!=null)for(var mt in vt)Object.prototype.hasOwnProperty.call(vt,mt)&&(yt[mt]=vt[mt]);return yt.default=vt,yt}function at(vt){if((vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection){if("getLocalStreams"in vt.RTCPeerConnection.prototype||(vt.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in vt.RTCPeerConnection.prototype)){var yt=vt.RTCPeerConnection.prototype.addTrack;vt.RTCPeerConnection.prototype.addStream=function(mt){var Et=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(mt)||this._localStreams.push(mt),mt.getTracks().forEach(function(bt){return yt.call(Et,bt,mt)})},vt.RTCPeerConnection.prototype.addTrack=function(mt,Et){return Et&&(this._localStreams?this._localStreams.includes(Et)||this._localStreams.push(Et):this._localStreams=[Et]),yt.call(this,mt,Et)}}"removeStream"in vt.RTCPeerConnection.prototype||(vt.RTCPeerConnection.prototype.removeStream=function(mt){var Et=this;this._localStreams||(this._localStreams=[]);var bt=this._localStreams.indexOf(mt);if(bt!==-1){this._localStreams.splice(bt,1);var Ct=mt.getTracks();this.getSenders().forEach(function(Tt){Ct.includes(Tt.track)&&Et.removeTrack(Tt)})}})}}function lt(vt){if((vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection&&("getRemoteStreams"in vt.RTCPeerConnection.prototype||(vt.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in vt.RTCPeerConnection.prototype))){Object.defineProperty(vt.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(mt){var Et=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=mt),this.addEventListener("track",this._onaddstreampoly=function(bt){bt.streams.forEach(function(Ct){if(Et._remoteStreams||(Et._remoteStreams=[]),!Et._remoteStreams.includes(Ct)){Et._remoteStreams.push(Ct);var Tt=new Event("addstream");Tt.stream=Ct,Et.dispatchEvent(Tt)}})})}});var yt=vt.RTCPeerConnection.prototype.setRemoteDescription;vt.RTCPeerConnection.prototype.setRemoteDescription=function(){var mt=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(Et){Et.streams.forEach(function(bt){if(mt._remoteStreams||(mt._remoteStreams=[]),!(mt._remoteStreams.indexOf(bt)>=0)){mt._remoteStreams.push(bt);var Ct=new Event("addstream");Ct.stream=bt,mt.dispatchEvent(Ct)}})}),yt.apply(mt,arguments)}}}function ct(vt){if((vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection){var yt=vt.RTCPeerConnection.prototype,mt=yt.createOffer,Et=yt.createAnswer,bt=yt.setLocalDescription,Ct=yt.setRemoteDescription,Tt=yt.addIceCandidate;yt.createOffer=function(Rt,It){var St=mt.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return It?(St.then(Rt,It),Promise.resolve()):St},yt.createAnswer=function(Rt,It){var St=Et.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return It?(St.then(Rt,It),Promise.resolve()):St};var wt=function(Rt,It,St){var Pt=bt.apply(this,[Rt]);return St?(Pt.then(It,St),Promise.resolve()):Pt};yt.setLocalDescription=wt,yt.setRemoteDescription=wt=function(Rt,It,St){var Pt=Ct.apply(this,[Rt]);return St?(Pt.then(It,St),Promise.resolve()):Pt},yt.addIceCandidate=wt=function(Rt,It,St){var Pt=Tt.apply(this,[Rt]);return St?(Pt.then(It,St),Promise.resolve()):Pt}}}function pt(vt){var yt=vt&&vt.navigator;if(yt.mediaDevices&&yt.mediaDevices.getUserMedia){var mt=yt.mediaDevices,Et=mt.getUserMedia.bind(mt);yt.mediaDevices.getUserMedia=function(bt){return Et(ut(bt))}}!yt.getUserMedia&&yt.mediaDevices&&yt.mediaDevices.getUserMedia&&(yt.getUserMedia=function(bt,Ct,Tt){yt.mediaDevices.getUserMedia(bt).then(Ct,Tt)}.bind(yt))}function ut(vt){return vt&&vt.video!==void 0?Object.assign({},vt,{video:it.compactObject(vt.video)}):vt}function ht(vt){var yt=vt.RTCPeerConnection;vt.RTCPeerConnection=function(mt,Et){if(mt&&mt.iceServers){for(var bt=[],Ct=0;Ct<mt.iceServers.length;Ct++){var Tt=mt.iceServers[Ct];!Tt.hasOwnProperty("urls")&&Tt.hasOwnProperty("url")?(it.deprecated("RTCIceServer.url","RTCIceServer.urls"),(Tt=JSON.parse(JSON.stringify(Tt))).urls=Tt.url,delete Tt.url,bt.push(Tt)):bt.push(mt.iceServers[Ct])}mt.iceServers=bt}return new yt(mt,Et)},vt.RTCPeerConnection.prototype=yt.prototype,"generateCertificate"in vt.RTCPeerConnection&&Object.defineProperty(vt.RTCPeerConnection,"generateCertificate",{get:function(){return yt.generateCertificate}})}function ft(vt){(vt===void 0?"undefined":ot(vt))==="object"&&vt.RTCPeerConnection&&"receiver"in vt.RTCTrackEvent.prototype&&!vt.RTCTransceiver&&Object.defineProperty(vt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function gt(vt){var yt=vt.RTCPeerConnection.prototype.createOffer;vt.RTCPeerConnection.prototype.createOffer=function(mt){if(mt){mt.offerToReceiveAudio!==void 0&&(mt.offerToReceiveAudio=!!mt.offerToReceiveAudio);var Et=this.getTransceivers().find(function(Ct){return Ct.receiver.track.kind==="audio"});mt.offerToReceiveAudio===!1&&Et?Et.direction==="sendrecv"?Et.setDirection?Et.setDirection("sendonly"):Et.direction="sendonly":Et.direction==="recvonly"&&(Et.setDirection?Et.setDirection("inactive"):Et.direction="inactive"):mt.offerToReceiveAudio!==!0||Et||this.addTransceiver("audio"),mt.offerToReceiveVideo!==void 0&&(mt.offerToReceiveVideo=!!mt.offerToReceiveVideo);var bt=this.getTransceivers().find(function(Ct){return Ct.receiver.track.kind==="video"});mt.offerToReceiveVideo===!1&&bt?bt.direction==="sendrecv"?bt.setDirection?bt.setDirection("sendonly"):bt.direction="sendonly":bt.direction==="recvonly"&&(bt.setDirection?bt.setDirection("inactive"):bt.direction="inactive"):mt.offerToReceiveVideo!==!0||bt||this.addTransceiver("video")}return yt.apply(this,arguments)}}},{"../utils":15}],15:[function(et,rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et};function it(Et,bt,Ct){return bt in Et?Object.defineProperty(Et,bt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):Et[bt]=Ct,Et}nt.extractVersion=lt,nt.wrapPeerConnectionEvent=ct,nt.disableLog=pt,nt.disableWarnings=ut,nt.log=ht,nt.deprecated=ft,nt.detectBrowser=gt,nt.compactObject=vt,nt.walkStats=yt,nt.filterStats=mt;var st=!0,at=!0;function lt(Et,bt,Ct){var Tt=Et.match(bt);return Tt&&Tt.length>=Ct&&parseInt(Tt[Ct],10)}function ct(Et,bt,Ct){if(Et.RTCPeerConnection){var Tt=Et.RTCPeerConnection.prototype,wt=Tt.addEventListener;Tt.addEventListener=function(It,St){if(It!==bt)return wt.apply(this,arguments);var Pt=function(Ot){var Ut=Ct(Ot);Ut&&St(Ut)};return this._eventMap=this._eventMap||{},this._eventMap[St]=Pt,wt.apply(this,[It,Pt])};var Rt=Tt.removeEventListener;Tt.removeEventListener=function(It,St){if(It!==bt||!this._eventMap||!this._eventMap[St])return Rt.apply(this,arguments);var Pt=this._eventMap[St];return delete this._eventMap[St],Rt.apply(this,[It,Pt])},Object.defineProperty(Tt,"on"+bt,{get:function(){return this["_on"+bt]},set:function(It){this["_on"+bt]&&(this.removeEventListener(bt,this["_on"+bt]),delete this["_on"+bt]),It&&this.addEventListener(bt,this["_on"+bt]=It)},enumerable:!0,configurable:!0})}}function pt(Et){return typeof Et!="boolean"?new Error("Argument type: "+(Et===void 0?"undefined":ot(Et))+". Please use a boolean."):(st=Et,Et?"adapter.js logging disabled":"adapter.js logging enabled")}function ut(Et){return typeof Et!="boolean"?new Error("Argument type: "+(Et===void 0?"undefined":ot(Et))+". Please use a boolean."):(at=!Et,"adapter.js deprecation warnings "+(Et?"disabled":"enabled"))}function ht(){if((typeof window>"u"?"undefined":ot(window))==="object"){if(st)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ft(Et,bt){at&&console.warn(Et+" is deprecated, please use "+bt+" instead.")}function gt(Et){var bt=Et.navigator,Ct={browser:null,version:null};if(Et===void 0||!Et.navigator)return Ct.browser="Not a browser.",Ct;if(bt.mozGetUserMedia)Ct.browser="firefox",Ct.version=lt(bt.userAgent,/Firefox\/(\d+)\./,1);else if(bt.webkitGetUserMedia||Et.isSecureContext===!1&&Et.webkitRTCPeerConnection&&!Et.RTCIceGatherer)Ct.browser="chrome",Ct.version=lt(bt.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(bt.mediaDevices&&bt.userAgent.match(/Edge\/(\d+).(\d+)$/))Ct.browser="edge",Ct.version=lt(bt.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!Et.RTCPeerConnection||!bt.userAgent.match(/AppleWebKit\/(\d+)\./))return Ct.browser="Not a supported browser.",Ct;Ct.browser="safari",Ct.version=lt(bt.userAgent,/AppleWebKit\/(\d+)\./,1)}return Ct}function vt(Et){return(Et===void 0?"undefined":ot(Et))!=="object"?Et:Object.keys(Et).reduce(function(bt,Ct){var Tt=ot(Et[Ct])==="object",wt=Tt?vt(Et[Ct]):Et[Ct],Rt=Tt&&!Object.keys(wt).length;return wt===void 0||Rt?bt:Object.assign(bt,it({},Ct,wt))},{})}function yt(Et,bt,Ct){bt&&!Ct.has(bt.id)&&(Ct.set(bt.id,bt),Object.keys(bt).forEach(function(Tt){Tt.endsWith("Id")?yt(Et,Et.get(bt[Tt]),Ct):Tt.endsWith("Ids")&&bt[Tt].forEach(function(wt){yt(Et,Et.get(wt),Ct)})}))}function mt(Et,bt,Ct){var Tt=Ct?"outbound-rtp":"inbound-rtp",wt=new Map;if(bt===null)return wt;var Rt=[];return Et.forEach(function(It){It.type==="track"&&It.trackIdentifier===bt.id&&Rt.push(It)}),Rt.forEach(function(It){Et.forEach(function(St){St.type===Tt&&St.trackId===It.id&&yt(Et,St,wt)})}),wt}},{}],16:[function(et,rt,nt){var ot=et("sdp");function it(ht){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[ht.type]||ht.type}function st(ht,ft,gt,vt,yt){var mt=ot.writeRtpDescription(ht.kind,ft);if(mt+=ot.writeIceParameters(ht.iceGatherer.getLocalParameters()),mt+=ot.writeDtlsParameters(ht.dtlsTransport.getLocalParameters(),gt==="offer"?"actpass":yt||"active"),mt+="a=mid:"+ht.mid+`\r
`,mt+=ht.rtpSender&&ht.rtpReceiver?`a=sendrecv\r
`:ht.rtpSender?`a=sendonly\r
`:ht.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,ht.rtpSender){var Et=ht.rtpSender._initialTrackId||ht.rtpSender.track.id;ht.rtpSender._initialTrackId=Et;var bt="msid:"+(vt?vt.id:"-")+" "+Et+`\r
`;mt+="a="+bt,mt+="a=ssrc:"+ht.sendEncodingParameters[0].ssrc+" "+bt,ht.sendEncodingParameters[0].rtx&&(mt+="a=ssrc:"+ht.sendEncodingParameters[0].rtx.ssrc+" "+bt,mt+="a=ssrc-group:FID "+ht.sendEncodingParameters[0].ssrc+" "+ht.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return mt+="a=ssrc:"+ht.sendEncodingParameters[0].ssrc+" cname:"+ot.localCName+`\r
`,ht.rtpSender&&ht.sendEncodingParameters[0].rtx&&(mt+="a=ssrc:"+ht.sendEncodingParameters[0].rtx.ssrc+" cname:"+ot.localCName+`\r
`),mt}function at(ht,ft){var gt=!1;return(ht=JSON.parse(JSON.stringify(ht))).filter(function(vt){if(vt&&(vt.urls||vt.url)){var yt=vt.urls||vt.url;vt.url&&!vt.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var mt=typeof yt=="string";return mt&&(yt=[yt]),yt=yt.filter(function(Et){return Et.indexOf("turn:")!==0||Et.indexOf("transport=udp")===-1||Et.indexOf("turn:[")!==-1||gt?Et.indexOf("stun:")===0&&ft>=14393&&Et.indexOf("?transport=udp")===-1:(gt=!0,!0)}),delete vt.url,vt.urls=mt?yt[0]:yt,!!yt.length}})}function lt(ht,ft){var gt={codecs:[],headerExtensions:[],fecMechanisms:[]},vt=function(mt,Et){mt=parseInt(mt,10);for(var bt=0;bt<Et.length;bt++)if(Et[bt].payloadType===mt||Et[bt].preferredPayloadType===mt)return Et[bt]},yt=function(mt,Et,bt,Ct){var Tt=vt(mt.parameters.apt,bt),wt=vt(Et.parameters.apt,Ct);return Tt&&wt&&Tt.name.toLowerCase()===wt.name.toLowerCase()};return ht.codecs.forEach(function(mt){for(var Et=0;Et<ft.codecs.length;Et++){var bt=ft.codecs[Et];if(mt.name.toLowerCase()===bt.name.toLowerCase()&&mt.clockRate===bt.clockRate){if(mt.name.toLowerCase()==="rtx"&&mt.parameters&&bt.parameters.apt&&!yt(mt,bt,ht.codecs,ft.codecs))continue;(bt=JSON.parse(JSON.stringify(bt))).numChannels=Math.min(mt.numChannels,bt.numChannels),gt.codecs.push(bt),bt.rtcpFeedback=bt.rtcpFeedback.filter(function(Ct){for(var Tt=0;Tt<mt.rtcpFeedback.length;Tt++)if(mt.rtcpFeedback[Tt].type===Ct.type&&mt.rtcpFeedback[Tt].parameter===Ct.parameter)return!0;return!1});break}}}),ht.headerExtensions.forEach(function(mt){for(var Et=0;Et<ft.headerExtensions.length;Et++){var bt=ft.headerExtensions[Et];if(mt.uri===bt.uri){gt.headerExtensions.push(bt);break}}}),gt}function ct(ht,ft,gt){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[ft][ht].indexOf(gt)!==-1}function pt(ht,ft){var gt=ht.getRemoteCandidates().find(function(vt){return ft.foundation===vt.foundation&&ft.ip===vt.ip&&ft.port===vt.port&&ft.priority===vt.priority&&ft.protocol===vt.protocol&&ft.type===vt.type});return gt||ht.addRemoteCandidate(ft),!gt}function ut(ht,ft){var gt=new Error(ft);return gt.name=ht,gt.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[ht],gt}rt.exports=function(ht,ft){function gt(bt,Ct){Ct.addTrack(bt),Ct.dispatchEvent(new ht.MediaStreamTrackEvent("addtrack",{track:bt}))}function vt(bt,Ct){Ct.removeTrack(bt),Ct.dispatchEvent(new ht.MediaStreamTrackEvent("removetrack",{track:bt}))}function yt(bt,Ct,Tt,wt){var Rt=new Event("track");Rt.track=Ct,Rt.receiver=Tt,Rt.transceiver={receiver:Tt},Rt.streams=wt,ht.setTimeout(function(){bt._dispatchEvent("track",Rt)})}var mt=function(bt){var Ct=this,Tt=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(Rt){Ct[Rt]=Tt[Rt].bind(Tt)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",bt=JSON.parse(JSON.stringify(bt||{})),this.usingBundle=bt.bundlePolicy==="max-bundle",bt.rtcpMuxPolicy==="negotiate")throw ut("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(bt.rtcpMuxPolicy||(bt.rtcpMuxPolicy="require"),bt.iceTransportPolicy){case"all":case"relay":break;default:bt.iceTransportPolicy="all"}switch(bt.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:bt.bundlePolicy="balanced"}if(bt.iceServers=at(bt.iceServers||[],ft),this._iceGatherers=[],bt.iceCandidatePoolSize)for(var wt=bt.iceCandidatePoolSize;wt>0;wt--)this._iceGatherers.push(new ht.RTCIceGatherer({iceServers:bt.iceServers,gatherPolicy:bt.iceTransportPolicy}));else bt.iceCandidatePoolSize=0;this._config=bt,this.transceivers=[],this._sdpSessionId=ot.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(mt.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(mt.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),mt.prototype.onicecandidate=null,mt.prototype.onaddstream=null,mt.prototype.ontrack=null,mt.prototype.onremovestream=null,mt.prototype.onsignalingstatechange=null,mt.prototype.oniceconnectionstatechange=null,mt.prototype.onconnectionstatechange=null,mt.prototype.onicegatheringstatechange=null,mt.prototype.onnegotiationneeded=null,mt.prototype.ondatachannel=null,mt.prototype._dispatchEvent=function(bt,Ct){this._isClosed||(this.dispatchEvent(Ct),typeof this["on"+bt]=="function"&&this["on"+bt](Ct))},mt.prototype._emitGatheringStateChange=function(){var bt=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",bt)},mt.prototype.getConfiguration=function(){return this._config},mt.prototype.getLocalStreams=function(){return this.localStreams},mt.prototype.getRemoteStreams=function(){return this.remoteStreams},mt.prototype._createTransceiver=function(bt,Ct){var Tt={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:bt,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)Tt.iceTransport=this.transceivers[0].iceTransport,Tt.dtlsTransport=this.transceivers[0].dtlsTransport;else{var wt=this._createIceAndDtlsTransports();Tt.iceTransport=wt.iceTransport,Tt.dtlsTransport=wt.dtlsTransport}return Ct||this.transceivers.push(Tt),Tt},mt.prototype.addTrack=function(bt,Ct){if(this._isClosed)throw ut("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var Tt;if(this.transceivers.find(function(Rt){return Rt.track===bt}))throw ut("InvalidAccessError","Track already exists.");for(var wt=0;wt<this.transceivers.length;wt++)this.transceivers[wt].track||this.transceivers[wt].kind!==bt.kind||(Tt=this.transceivers[wt]);return Tt||(Tt=this._createTransceiver(bt.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(Ct)===-1&&this.localStreams.push(Ct),Tt.track=bt,Tt.stream=Ct,Tt.rtpSender=new ht.RTCRtpSender(bt,Tt.dtlsTransport),Tt.rtpSender},mt.prototype.addStream=function(bt){var Ct=this;if(ft>=15025)bt.getTracks().forEach(function(wt){Ct.addTrack(wt,bt)});else{var Tt=bt.clone();bt.getTracks().forEach(function(wt,Rt){var It=Tt.getTracks()[Rt];wt.addEventListener("enabled",function(St){It.enabled=St.enabled})}),Tt.getTracks().forEach(function(wt){Ct.addTrack(wt,Tt)})}},mt.prototype.removeTrack=function(bt){if(this._isClosed)throw ut("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(bt instanceof ht.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var Ct=this.transceivers.find(function(wt){return wt.rtpSender===bt});if(!Ct)throw ut("InvalidAccessError","Sender was not created by this connection.");var Tt=Ct.stream;Ct.rtpSender.stop(),Ct.rtpSender=null,Ct.track=null,Ct.stream=null,this.transceivers.map(function(wt){return wt.stream}).indexOf(Tt)===-1&&this.localStreams.indexOf(Tt)>-1&&this.localStreams.splice(this.localStreams.indexOf(Tt),1),this._maybeFireNegotiationNeeded()},mt.prototype.removeStream=function(bt){var Ct=this;bt.getTracks().forEach(function(Tt){var wt=Ct.getSenders().find(function(Rt){return Rt.track===Tt});wt&&Ct.removeTrack(wt)})},mt.prototype.getSenders=function(){return this.transceivers.filter(function(bt){return!!bt.rtpSender}).map(function(bt){return bt.rtpSender})},mt.prototype.getReceivers=function(){return this.transceivers.filter(function(bt){return!!bt.rtpReceiver}).map(function(bt){return bt.rtpReceiver})},mt.prototype._createIceGatherer=function(bt,Ct){var Tt=this;if(Ct&&bt>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var wt=new ht.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(wt,"state",{value:"new",writable:!0}),this.transceivers[bt].bufferedCandidateEvents=[],this.transceivers[bt].bufferCandidates=function(Rt){var It=!Rt.candidate||Object.keys(Rt.candidate).length===0;wt.state=It?"completed":"gathering",Tt.transceivers[bt].bufferedCandidateEvents!==null&&Tt.transceivers[bt].bufferedCandidateEvents.push(Rt)},wt.addEventListener("localcandidate",this.transceivers[bt].bufferCandidates),wt},mt.prototype._gather=function(bt,Ct){var Tt=this,wt=this.transceivers[Ct].iceGatherer;if(!wt.onlocalcandidate){var Rt=this.transceivers[Ct].bufferedCandidateEvents;this.transceivers[Ct].bufferedCandidateEvents=null,wt.removeEventListener("localcandidate",this.transceivers[Ct].bufferCandidates),wt.onlocalcandidate=function(It){if(!(Tt.usingBundle&&Ct>0)){var St=new Event("icecandidate");St.candidate={sdpMid:bt,sdpMLineIndex:Ct};var Pt=It.candidate,Ot=!Pt||Object.keys(Pt).length===0;if(Ot)wt.state!=="new"&&wt.state!=="gathering"||(wt.state="completed");else{wt.state==="new"&&(wt.state="gathering"),Pt.component=1,Pt.ufrag=wt.getLocalParameters().usernameFragment;var Ut=ot.writeCandidate(Pt);St.candidate=Object.assign(St.candidate,ot.parseCandidate(Ut)),St.candidate.candidate=Ut,St.candidate.toJSON=function(){return{candidate:St.candidate.candidate,sdpMid:St.candidate.sdpMid,sdpMLineIndex:St.candidate.sdpMLineIndex,usernameFragment:St.candidate.usernameFragment}}}var Bt=ot.getMediaSections(Tt._localDescription.sdp);Bt[St.candidate.sdpMLineIndex]+=Ot?`a=end-of-candidates\r
`:"a="+St.candidate.candidate+`\r
`,Tt._localDescription.sdp=ot.getDescription(Tt._localDescription.sdp)+Bt.join("");var xt=Tt.transceivers.every(function(At){return At.iceGatherer&&At.iceGatherer.state==="completed"});Tt.iceGatheringState!=="gathering"&&(Tt.iceGatheringState="gathering",Tt._emitGatheringStateChange()),Ot||Tt._dispatchEvent("icecandidate",St),xt&&(Tt._dispatchEvent("icecandidate",new Event("icecandidate")),Tt.iceGatheringState="complete",Tt._emitGatheringStateChange())}},ht.setTimeout(function(){Rt.forEach(function(It){wt.onlocalcandidate(It)})},0)}},mt.prototype._createIceAndDtlsTransports=function(){var bt=this,Ct=new ht.RTCIceTransport(null);Ct.onicestatechange=function(){bt._updateIceConnectionState(),bt._updateConnectionState()};var Tt=new ht.RTCDtlsTransport(Ct);return Tt.ondtlsstatechange=function(){bt._updateConnectionState()},Tt.onerror=function(){Object.defineProperty(Tt,"state",{value:"failed",writable:!0}),bt._updateConnectionState()},{iceTransport:Ct,dtlsTransport:Tt}},mt.prototype._disposeIceAndDtlsTransports=function(bt){var Ct=this.transceivers[bt].iceGatherer;Ct&&(delete Ct.onlocalcandidate,delete this.transceivers[bt].iceGatherer);var Tt=this.transceivers[bt].iceTransport;Tt&&(delete Tt.onicestatechange,delete this.transceivers[bt].iceTransport);var wt=this.transceivers[bt].dtlsTransport;wt&&(delete wt.ondtlsstatechange,delete wt.onerror,delete this.transceivers[bt].dtlsTransport)},mt.prototype._transceive=function(bt,Ct,Tt){var wt=lt(bt.localCapabilities,bt.remoteCapabilities);Ct&&bt.rtpSender&&(wt.encodings=bt.sendEncodingParameters,wt.rtcp={cname:ot.localCName,compound:bt.rtcpParameters.compound},bt.recvEncodingParameters.length&&(wt.rtcp.ssrc=bt.recvEncodingParameters[0].ssrc),bt.rtpSender.send(wt)),Tt&&bt.rtpReceiver&&wt.codecs.length>0&&(bt.kind==="video"&&bt.recvEncodingParameters&&ft<15019&&bt.recvEncodingParameters.forEach(function(Rt){delete Rt.rtx}),wt.encodings=bt.recvEncodingParameters.length?bt.recvEncodingParameters:[{}],wt.rtcp={compound:bt.rtcpParameters.compound},bt.rtcpParameters.cname&&(wt.rtcp.cname=bt.rtcpParameters.cname),bt.sendEncodingParameters.length&&(wt.rtcp.ssrc=bt.sendEncodingParameters[0].ssrc),bt.rtpReceiver.receive(wt))},mt.prototype.setLocalDescription=function(bt){var Ct,Tt,wt=this;if(["offer","answer"].indexOf(bt.type)===-1)return Promise.reject(ut("TypeError",'Unsupported type "'+bt.type+'"'));if(!ct("setLocalDescription",bt.type,wt.signalingState)||wt._isClosed)return Promise.reject(ut("InvalidStateError","Can not set local "+bt.type+" in state "+wt.signalingState));if(bt.type==="offer")Ct=ot.splitSections(bt.sdp),Tt=Ct.shift(),Ct.forEach(function(It,St){var Pt=ot.parseRtpParameters(It);wt.transceivers[St].localCapabilities=Pt}),wt.transceivers.forEach(function(It,St){wt._gather(It.mid,St)});else if(bt.type==="answer"){Ct=ot.splitSections(wt._remoteDescription.sdp),Tt=Ct.shift();var Rt=ot.matchPrefix(Tt,"a=ice-lite").length>0;Ct.forEach(function(It,St){var Pt=wt.transceivers[St],Ot=Pt.iceGatherer,Ut=Pt.iceTransport,Bt=Pt.dtlsTransport,xt=Pt.localCapabilities,At=Pt.remoteCapabilities;if(!(ot.isRejected(It)&&ot.matchPrefix(It,"a=bundle-only").length===0||Pt.rejected)){var Mt=ot.getIceParameters(It,Tt),Nt=ot.getDtlsParameters(It,Tt);Rt&&(Nt.role="server"),wt.usingBundle&&St!==0||(wt._gather(Pt.mid,St),Ut.state==="new"&&Ut.start(Ot,Mt,Rt?"controlling":"controlled"),Bt.state==="new"&&Bt.start(Nt));var $t=lt(xt,At);wt._transceive(Pt,$t.codecs.length>0,!1)}})}return wt._localDescription={type:bt.type,sdp:bt.sdp},wt._updateSignalingState(bt.type==="offer"?"have-local-offer":"stable"),Promise.resolve()},mt.prototype.setRemoteDescription=function(bt){var Ct=this;if(["offer","answer"].indexOf(bt.type)===-1)return Promise.reject(ut("TypeError",'Unsupported type "'+bt.type+'"'));if(!ct("setRemoteDescription",bt.type,Ct.signalingState)||Ct._isClosed)return Promise.reject(ut("InvalidStateError","Can not set remote "+bt.type+" in state "+Ct.signalingState));var Tt={};Ct.remoteStreams.forEach(function(Ut){Tt[Ut.id]=Ut});var wt=[],Rt=ot.splitSections(bt.sdp),It=Rt.shift(),St=ot.matchPrefix(It,"a=ice-lite").length>0,Pt=ot.matchPrefix(It,"a=group:BUNDLE ").length>0;Ct.usingBundle=Pt;var Ot=ot.matchPrefix(It,"a=ice-options:")[0];return Ct.canTrickleIceCandidates=!!Ot&&Ot.substr(14).split(" ").indexOf("trickle")>=0,Rt.forEach(function(Ut,Bt){var xt=ot.splitLines(Ut),At=ot.getKind(Ut),Mt=ot.isRejected(Ut)&&ot.matchPrefix(Ut,"a=bundle-only").length===0,Nt=xt[0].substr(2).split(" ")[2],$t=ot.getDirection(Ut,It),Ft=ot.parseMsid(Ut),jt=ot.getMid(Ut)||ot.generateIdentifier();if(Mt||At==="application"&&(Nt==="DTLS/SCTP"||Nt==="UDP/DTLS/SCTP"))Ct.transceivers[Bt]={mid:jt,kind:At,protocol:Nt,rejected:!0};else{var zt,Yt,Kt,er,ir,rr,lr,nr,hr;!Mt&&Ct.transceivers[Bt]&&Ct.transceivers[Bt].rejected&&(Ct.transceivers[Bt]=Ct._createTransceiver(At,!0));var vr,yr,Cr=ot.parseRtpParameters(Ut);Mt||(vr=ot.getIceParameters(Ut,It),(yr=ot.getDtlsParameters(Ut,It)).role="client"),lr=ot.parseRtpEncodingParameters(Ut);var or=ot.parseRtcpParameters(Ut),ur=ot.matchPrefix(Ut,"a=end-of-candidates",It).length>0,pr=ot.matchPrefix(Ut,"a=candidate:").map(function(Ht){return ot.parseCandidate(Ht)}).filter(function(Ht){return Ht.component===1});if((bt.type==="offer"||bt.type==="answer")&&!Mt&&Pt&&Bt>0&&Ct.transceivers[Bt]&&(Ct._disposeIceAndDtlsTransports(Bt),Ct.transceivers[Bt].iceGatherer=Ct.transceivers[0].iceGatherer,Ct.transceivers[Bt].iceTransport=Ct.transceivers[0].iceTransport,Ct.transceivers[Bt].dtlsTransport=Ct.transceivers[0].dtlsTransport,Ct.transceivers[Bt].rtpSender&&Ct.transceivers[Bt].rtpSender.setTransport(Ct.transceivers[0].dtlsTransport),Ct.transceivers[Bt].rtpReceiver&&Ct.transceivers[Bt].rtpReceiver.setTransport(Ct.transceivers[0].dtlsTransport)),bt.type!=="offer"||Mt)bt.type!=="answer"||Mt||(Yt=(zt=Ct.transceivers[Bt]).iceGatherer,Kt=zt.iceTransport,er=zt.dtlsTransport,ir=zt.rtpReceiver,rr=zt.sendEncodingParameters,nr=zt.localCapabilities,Ct.transceivers[Bt].recvEncodingParameters=lr,Ct.transceivers[Bt].remoteCapabilities=Cr,Ct.transceivers[Bt].rtcpParameters=or,pr.length&&Kt.state==="new"&&(!St&&!ur||Pt&&Bt!==0?pr.forEach(function(Ht){pt(zt.iceTransport,Ht)}):Kt.setRemoteCandidates(pr)),Pt&&Bt!==0||(Kt.state==="new"&&Kt.start(Yt,vr,"controlling"),er.state==="new"&&er.start(yr)),!lt(zt.localCapabilities,zt.remoteCapabilities).codecs.filter(function(Ht){return Ht.name.toLowerCase()==="rtx"}).length&&zt.sendEncodingParameters[0].rtx&&delete zt.sendEncodingParameters[0].rtx,Ct._transceive(zt,$t==="sendrecv"||$t==="recvonly",$t==="sendrecv"||$t==="sendonly"),!ir||$t!=="sendrecv"&&$t!=="sendonly"?delete zt.rtpReceiver:(hr=ir.track,Ft?(Tt[Ft.stream]||(Tt[Ft.stream]=new ht.MediaStream),gt(hr,Tt[Ft.stream]),wt.push([hr,ir,Tt[Ft.stream]])):(Tt.default||(Tt.default=new ht.MediaStream),gt(hr,Tt.default),wt.push([hr,ir,Tt.default]))));else{(zt=Ct.transceivers[Bt]||Ct._createTransceiver(At)).mid=jt,zt.iceGatherer||(zt.iceGatherer=Ct._createIceGatherer(Bt,Pt)),pr.length&&zt.iceTransport.state==="new"&&(!ur||Pt&&Bt!==0?pr.forEach(function(Ht){pt(zt.iceTransport,Ht)}):zt.iceTransport.setRemoteCandidates(pr)),nr=ht.RTCRtpReceiver.getCapabilities(At),ft<15019&&(nr.codecs=nr.codecs.filter(function(Ht){return Ht.name!=="rtx"})),rr=zt.sendEncodingParameters||[{ssrc:1001*(2*Bt+2)}];var Er,Sr=!1;$t==="sendrecv"||$t==="sendonly"?(Sr=!zt.rtpReceiver,ir=zt.rtpReceiver||new ht.RTCRtpReceiver(zt.dtlsTransport,At),Sr&&(hr=ir.track,Ft&&Ft.stream==="-"||(Ft?(Tt[Ft.stream]||(Tt[Ft.stream]=new ht.MediaStream,Object.defineProperty(Tt[Ft.stream],"id",{get:function(){return Ft.stream}})),Object.defineProperty(hr,"id",{get:function(){return Ft.track}}),Er=Tt[Ft.stream]):(Tt.default||(Tt.default=new ht.MediaStream),Er=Tt.default)),Er&&(gt(hr,Er),zt.associatedRemoteMediaStreams.push(Er)),wt.push([hr,ir,Er]))):zt.rtpReceiver&&zt.rtpReceiver.track&&(zt.associatedRemoteMediaStreams.forEach(function(Ht){var qt=Ht.getTracks().find(function(fr){return fr.id===zt.rtpReceiver.track.id});qt&&vt(qt,Ht)}),zt.associatedRemoteMediaStreams=[]),zt.localCapabilities=nr,zt.remoteCapabilities=Cr,zt.rtpReceiver=ir,zt.rtcpParameters=or,zt.sendEncodingParameters=rr,zt.recvEncodingParameters=lr,Ct._transceive(Ct.transceivers[Bt],!1,Sr)}}}),Ct._dtlsRole===void 0&&(Ct._dtlsRole=bt.type==="offer"?"active":"passive"),Ct._remoteDescription={type:bt.type,sdp:bt.sdp},Ct._updateSignalingState(bt.type==="offer"?"have-remote-offer":"stable"),Object.keys(Tt).forEach(function(Ut){var Bt=Tt[Ut];if(Bt.getTracks().length){if(Ct.remoteStreams.indexOf(Bt)===-1){Ct.remoteStreams.push(Bt);var xt=new Event("addstream");xt.stream=Bt,ht.setTimeout(function(){Ct._dispatchEvent("addstream",xt)})}wt.forEach(function(At){Bt.id===At[2].id&&yt(Ct,At[0],At[1],[Bt])})}}),wt.forEach(function(Ut){Ut[2]||yt(Ct,Ut[0],Ut[1],[])}),ht.setTimeout(function(){Ct&&Ct.transceivers&&Ct.transceivers.forEach(function(Ut){Ut.iceTransport&&Ut.iceTransport.state==="new"&&Ut.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Ut.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},mt.prototype.close=function(){this.transceivers.forEach(function(bt){bt.iceTransport&&bt.iceTransport.stop(),bt.dtlsTransport&&bt.dtlsTransport.stop(),bt.rtpSender&&bt.rtpSender.stop(),bt.rtpReceiver&&bt.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},mt.prototype._updateSignalingState=function(bt){this.signalingState=bt;var Ct=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",Ct)},mt.prototype._maybeFireNegotiationNeeded=function(){var bt=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,ht.setTimeout(function(){if(bt.needNegotiation){bt.needNegotiation=!1;var Ct=new Event("negotiationneeded");bt._dispatchEvent("negotiationneeded",Ct)}},0))},mt.prototype._updateIceConnectionState=function(){var bt,Ct={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(wt){wt.iceTransport&&!wt.rejected&&Ct[wt.iceTransport.state]++}),bt="new",Ct.failed>0?bt="failed":Ct.checking>0?bt="checking":Ct.disconnected>0?bt="disconnected":Ct.new>0?bt="new":Ct.connected>0?bt="connected":Ct.completed>0&&(bt="completed"),bt!==this.iceConnectionState){this.iceConnectionState=bt;var Tt=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",Tt)}},mt.prototype._updateConnectionState=function(){var bt,Ct={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(wt){wt.iceTransport&&wt.dtlsTransport&&!wt.rejected&&(Ct[wt.iceTransport.state]++,Ct[wt.dtlsTransport.state]++)}),Ct.connected+=Ct.completed,bt="new",Ct.failed>0?bt="failed":Ct.connecting>0?bt="connecting":Ct.disconnected>0?bt="disconnected":Ct.new>0?bt="new":Ct.connected>0&&(bt="connected"),bt!==this.connectionState){this.connectionState=bt;var Tt=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",Tt)}},mt.prototype.createOffer=function(){var bt=this;if(bt._isClosed)return Promise.reject(ut("InvalidStateError","Can not call createOffer after close"));var Ct=bt.transceivers.filter(function(St){return St.kind==="audio"}).length,Tt=bt.transceivers.filter(function(St){return St.kind==="video"}).length,wt=arguments[0];if(wt){if(wt.mandatory||wt.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");wt.offerToReceiveAudio!==void 0&&(Ct=wt.offerToReceiveAudio===!0?1:wt.offerToReceiveAudio===!1?0:wt.offerToReceiveAudio),wt.offerToReceiveVideo!==void 0&&(Tt=wt.offerToReceiveVideo===!0?1:wt.offerToReceiveVideo===!1?0:wt.offerToReceiveVideo)}for(bt.transceivers.forEach(function(St){St.kind==="audio"?--Ct<0&&(St.wantReceive=!1):St.kind==="video"&&--Tt<0&&(St.wantReceive=!1)});Ct>0||Tt>0;)Ct>0&&(bt._createTransceiver("audio"),Ct--),Tt>0&&(bt._createTransceiver("video"),Tt--);var Rt=ot.writeSessionBoilerplate(bt._sdpSessionId,bt._sdpSessionVersion++);bt.transceivers.forEach(function(St,Pt){var Ot=St.track,Ut=St.kind,Bt=St.mid||ot.generateIdentifier();St.mid=Bt,St.iceGatherer||(St.iceGatherer=bt._createIceGatherer(Pt,bt.usingBundle));var xt=ht.RTCRtpSender.getCapabilities(Ut);ft<15019&&(xt.codecs=xt.codecs.filter(function(Mt){return Mt.name!=="rtx"})),xt.codecs.forEach(function(Mt){Mt.name==="H264"&&Mt.parameters["level-asymmetry-allowed"]===void 0&&(Mt.parameters["level-asymmetry-allowed"]="1"),St.remoteCapabilities&&St.remoteCapabilities.codecs&&St.remoteCapabilities.codecs.forEach(function(Nt){Mt.name.toLowerCase()===Nt.name.toLowerCase()&&Mt.clockRate===Nt.clockRate&&(Mt.preferredPayloadType=Nt.payloadType)})}),xt.headerExtensions.forEach(function(Mt){(St.remoteCapabilities&&St.remoteCapabilities.headerExtensions||[]).forEach(function(Nt){Mt.uri===Nt.uri&&(Mt.id=Nt.id)})});var At=St.sendEncodingParameters||[{ssrc:1001*(2*Pt+1)}];Ot&&ft>=15019&&Ut==="video"&&!At[0].rtx&&(At[0].rtx={ssrc:At[0].ssrc+1}),St.wantReceive&&(St.rtpReceiver=new ht.RTCRtpReceiver(St.dtlsTransport,Ut)),St.localCapabilities=xt,St.sendEncodingParameters=At}),bt._config.bundlePolicy!=="max-compat"&&(Rt+="a=group:BUNDLE "+bt.transceivers.map(function(St){return St.mid}).join(" ")+`\r
`),Rt+=`a=ice-options:trickle\r
`,bt.transceivers.forEach(function(St,Pt){Rt+=st(St,St.localCapabilities,"offer",St.stream,bt._dtlsRole),Rt+=`a=rtcp-rsize\r
`,!St.iceGatherer||bt.iceGatheringState==="new"||Pt!==0&&bt.usingBundle||(St.iceGatherer.getLocalCandidates().forEach(function(Ot){Ot.component=1,Rt+="a="+ot.writeCandidate(Ot)+`\r
`}),St.iceGatherer.state==="completed"&&(Rt+=`a=end-of-candidates\r
`))});var It=new ht.RTCSessionDescription({type:"offer",sdp:Rt});return Promise.resolve(It)},mt.prototype.createAnswer=function(){var bt=this;if(bt._isClosed)return Promise.reject(ut("InvalidStateError","Can not call createAnswer after close"));if(bt.signalingState!=="have-remote-offer"&&bt.signalingState!=="have-local-pranswer")return Promise.reject(ut("InvalidStateError","Can not call createAnswer in signalingState "+bt.signalingState));var Ct=ot.writeSessionBoilerplate(bt._sdpSessionId,bt._sdpSessionVersion++);bt.usingBundle&&(Ct+="a=group:BUNDLE "+bt.transceivers.map(function(Rt){return Rt.mid}).join(" ")+`\r
`),Ct+=`a=ice-options:trickle\r
`;var Tt=ot.getMediaSections(bt._remoteDescription.sdp).length;bt.transceivers.forEach(function(Rt,It){if(!(It+1>Tt)){if(Rt.rejected)return Rt.kind==="application"?Ct+=Rt.protocol==="DTLS/SCTP"?`m=application 0 DTLS/SCTP 5000\r
`:"m=application 0 "+Rt.protocol+` webrtc-datachannel\r
`:Rt.kind==="audio"?Ct+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:Rt.kind==="video"&&(Ct+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(Ct+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+Rt.mid+`\r
`);var St;Rt.stream&&(Rt.kind==="audio"?St=Rt.stream.getAudioTracks()[0]:Rt.kind==="video"&&(St=Rt.stream.getVideoTracks()[0]),St&&ft>=15019&&Rt.kind==="video"&&!Rt.sendEncodingParameters[0].rtx&&(Rt.sendEncodingParameters[0].rtx={ssrc:Rt.sendEncodingParameters[0].ssrc+1}));var Pt=lt(Rt.localCapabilities,Rt.remoteCapabilities);!Pt.codecs.filter(function(Ot){return Ot.name.toLowerCase()==="rtx"}).length&&Rt.sendEncodingParameters[0].rtx&&delete Rt.sendEncodingParameters[0].rtx,Ct+=st(Rt,Pt,"answer",Rt.stream,bt._dtlsRole),Rt.rtcpParameters&&Rt.rtcpParameters.reducedSize&&(Ct+=`a=rtcp-rsize\r
`)}});var wt=new ht.RTCSessionDescription({type:"answer",sdp:Ct});return Promise.resolve(wt)},mt.prototype.addIceCandidate=function(bt){var Ct,Tt=this;return bt&&bt.sdpMLineIndex===void 0&&!bt.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(wt,Rt){if(!Tt._remoteDescription)return Rt(ut("InvalidStateError","Can not add ICE candidate without a remote description"));if(bt&&bt.candidate!==""){var It=bt.sdpMLineIndex;if(bt.sdpMid){for(var St=0;St<Tt.transceivers.length;St++)if(Tt.transceivers[St].mid===bt.sdpMid){It=St;break}}var Pt=Tt.transceivers[It];if(!Pt)return Rt(ut("OperationError","Can not add ICE candidate"));if(Pt.rejected)return wt();var Ot=Object.keys(bt.candidate).length>0?ot.parseCandidate(bt.candidate):{};if(Ot.protocol==="tcp"&&(Ot.port===0||Ot.port===9)||Ot.component&&Ot.component!==1)return wt();if((It===0||It>0&&Pt.iceTransport!==Tt.transceivers[0].iceTransport)&&!pt(Pt.iceTransport,Ot))return Rt(ut("OperationError","Can not add ICE candidate"));var Ut=bt.candidate.trim();Ut.indexOf("a=")===0&&(Ut=Ut.substr(2)),(Ct=ot.getMediaSections(Tt._remoteDescription.sdp))[It]+="a="+(Ot.type?Ut:"end-of-candidates")+`\r
`,Tt._remoteDescription.sdp=ot.getDescription(Tt._remoteDescription.sdp)+Ct.join("")}else for(var Bt=0;Bt<Tt.transceivers.length&&(Tt.transceivers[Bt].rejected||(Tt.transceivers[Bt].iceTransport.addRemoteCandidate({}),(Ct=ot.getMediaSections(Tt._remoteDescription.sdp))[Bt]+=`a=end-of-candidates\r
`,Tt._remoteDescription.sdp=ot.getDescription(Tt._remoteDescription.sdp)+Ct.join(""),!Tt.usingBundle));Bt++);wt()})},mt.prototype.getStats=function(bt){if(bt&&bt instanceof ht.MediaStreamTrack){var Ct=null;if(this.transceivers.forEach(function(wt){wt.rtpSender&&wt.rtpSender.track===bt?Ct=wt.rtpSender:wt.rtpReceiver&&wt.rtpReceiver.track===bt&&(Ct=wt.rtpReceiver)}),!Ct)throw ut("InvalidAccessError","Invalid selector.");return Ct.getStats()}var Tt=[];return this.transceivers.forEach(function(wt){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(Rt){wt[Rt]&&Tt.push(wt[Rt].getStats())})}),Promise.all(Tt).then(function(wt){var Rt=new Map;return wt.forEach(function(It){It.forEach(function(St){Rt.set(St.id,St)})}),Rt})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(bt){var Ct=ht[bt];if(Ct&&Ct.prototype&&Ct.prototype.getStats){var Tt=Ct.prototype.getStats;Ct.prototype.getStats=function(){return Tt.apply(this).then(function(wt){var Rt=new Map;return Object.keys(wt).forEach(function(It){wt[It].type=it(wt[It]),Rt.set(It,wt[It])}),Rt})}}});var Et=["createOffer","createAnswer"];return Et.forEach(function(bt){var Ct=mt.prototype[bt];mt.prototype[bt]=function(){var Tt=arguments;return typeof Tt[0]=="function"||typeof Tt[1]=="function"?Ct.apply(this,[arguments[2]]).then(function(wt){typeof Tt[0]=="function"&&Tt[0].apply(null,[wt])},function(wt){typeof Tt[1]=="function"&&Tt[1].apply(null,[wt])}):Ct.apply(this,arguments)}}),(Et=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(bt){var Ct=mt.prototype[bt];mt.prototype[bt]=function(){var Tt=arguments;return typeof Tt[1]=="function"||typeof Tt[2]=="function"?Ct.apply(this,arguments).then(function(){typeof Tt[1]=="function"&&Tt[1].apply(null)},function(wt){typeof Tt[2]=="function"&&Tt[2].apply(null,[wt])}):Ct.apply(this,arguments)}}),["getStats"].forEach(function(bt){var Ct=mt.prototype[bt];mt.prototype[bt]=function(){var Tt=arguments;return typeof Tt[1]=="function"?Ct.apply(this,arguments).then(function(){typeof Tt[1]=="function"&&Tt[1].apply(null)}):Ct.apply(this,arguments)}}),mt}},{sdp:17}],17:[function(et,rt,nt){var ot={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};ot.localCName=ot.generateIdentifier(),ot.splitLines=function(it){return it.trim().split(`
`).map(function(st){return st.trim()})},ot.splitSections=function(it){return it.split(`
m=`).map(function(st,at){return(at>0?"m="+st:st).trim()+`\r
`})},ot.getDescription=function(it){var st=ot.splitSections(it);return st&&st[0]},ot.getMediaSections=function(it){var st=ot.splitSections(it);return st.shift(),st},ot.matchPrefix=function(it,st){return ot.splitLines(it).filter(function(at){return at.indexOf(st)===0})},ot.parseCandidate=function(it){for(var st,at={foundation:(st=it.indexOf("a=candidate:")===0?it.substring(12).split(" "):it.substring(10).split(" "))[0],component:parseInt(st[1],10),protocol:st[2].toLowerCase(),priority:parseInt(st[3],10),ip:st[4],address:st[4],port:parseInt(st[5],10),type:st[7]},lt=8;lt<st.length;lt+=2)switch(st[lt]){case"raddr":at.relatedAddress=st[lt+1];break;case"rport":at.relatedPort=parseInt(st[lt+1],10);break;case"tcptype":at.tcpType=st[lt+1];break;case"ufrag":at.ufrag=st[lt+1],at.usernameFragment=st[lt+1];break;default:at[st[lt]]=st[lt+1]}return at},ot.writeCandidate=function(it){var st=[];st.push(it.foundation),st.push(it.component),st.push(it.protocol.toUpperCase()),st.push(it.priority),st.push(it.address||it.ip),st.push(it.port);var at=it.type;return st.push("typ"),st.push(at),at!=="host"&&it.relatedAddress&&it.relatedPort&&(st.push("raddr"),st.push(it.relatedAddress),st.push("rport"),st.push(it.relatedPort)),it.tcpType&&it.protocol.toLowerCase()==="tcp"&&(st.push("tcptype"),st.push(it.tcpType)),(it.usernameFragment||it.ufrag)&&(st.push("ufrag"),st.push(it.usernameFragment||it.ufrag)),"candidate:"+st.join(" ")},ot.parseIceOptions=function(it){return it.substr(14).split(" ")},ot.parseRtpMap=function(it){var st=it.substr(9).split(" "),at={payloadType:parseInt(st.shift(),10)};return st=st[0].split("/"),at.name=st[0],at.clockRate=parseInt(st[1],10),at.channels=st.length===3?parseInt(st[2],10):1,at.numChannels=at.channels,at},ot.writeRtpMap=function(it){var st=it.payloadType;it.preferredPayloadType!==void 0&&(st=it.preferredPayloadType);var at=it.channels||it.numChannels||1;return"a=rtpmap:"+st+" "+it.name+"/"+it.clockRate+(at!==1?"/"+at:"")+`\r
`},ot.parseExtmap=function(it){var st=it.substr(9).split(" ");return{id:parseInt(st[0],10),direction:st[0].indexOf("/")>0?st[0].split("/")[1]:"sendrecv",uri:st[1]}},ot.writeExtmap=function(it){return"a=extmap:"+(it.id||it.preferredId)+(it.direction&&it.direction!=="sendrecv"?"/"+it.direction:"")+" "+it.uri+`\r
`},ot.parseFmtp=function(it){for(var st,at={},lt=it.substr(it.indexOf(" ")+1).split(";"),ct=0;ct<lt.length;ct++)at[(st=lt[ct].trim().split("="))[0].trim()]=st[1];return at},ot.writeFmtp=function(it){var st="",at=it.payloadType;if(it.preferredPayloadType!==void 0&&(at=it.preferredPayloadType),it.parameters&&Object.keys(it.parameters).length){var lt=[];Object.keys(it.parameters).forEach(function(ct){lt.push(it.parameters[ct]?ct+"="+it.parameters[ct]:ct)}),st+="a=fmtp:"+at+" "+lt.join(";")+`\r
`}return st},ot.parseRtcpFb=function(it){var st=it.substr(it.indexOf(" ")+1).split(" ");return{type:st.shift(),parameter:st.join(" ")}},ot.writeRtcpFb=function(it){var st="",at=it.payloadType;return it.preferredPayloadType!==void 0&&(at=it.preferredPayloadType),it.rtcpFeedback&&it.rtcpFeedback.length&&it.rtcpFeedback.forEach(function(lt){st+="a=rtcp-fb:"+at+" "+lt.type+(lt.parameter&&lt.parameter.length?" "+lt.parameter:"")+`\r
`}),st},ot.parseSsrcMedia=function(it){var st=it.indexOf(" "),at={ssrc:parseInt(it.substr(7,st-7),10)},lt=it.indexOf(":",st);return lt>-1?(at.attribute=it.substr(st+1,lt-st-1),at.value=it.substr(lt+1)):at.attribute=it.substr(st+1),at},ot.parseSsrcGroup=function(it){var st=it.substr(13).split(" ");return{semantics:st.shift(),ssrcs:st.map(function(at){return parseInt(at,10)})}},ot.getMid=function(it){var st=ot.matchPrefix(it,"a=mid:")[0];if(st)return st.substr(6)},ot.parseFingerprint=function(it){var st=it.substr(14).split(" ");return{algorithm:st[0].toLowerCase(),value:st[1]}},ot.getDtlsParameters=function(it,st){return{role:"auto",fingerprints:ot.matchPrefix(it+st,"a=fingerprint:").map(ot.parseFingerprint)}},ot.writeDtlsParameters=function(it,st){var at="a=setup:"+st+`\r
`;return it.fingerprints.forEach(function(lt){at+="a=fingerprint:"+lt.algorithm+" "+lt.value+`\r
`}),at},ot.getIceParameters=function(it,st){var at=ot.splitLines(it);return{usernameFragment:(at=at.concat(ot.splitLines(st))).filter(function(lt){return lt.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:at.filter(function(lt){return lt.indexOf("a=ice-pwd:")===0})[0].substr(10)}},ot.writeIceParameters=function(it){return"a=ice-ufrag:"+it.usernameFragment+`\r
a=ice-pwd:`+it.password+`\r
`},ot.parseRtpParameters=function(it){for(var st={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},at=ot.splitLines(it)[0].split(" "),lt=3;lt<at.length;lt++){var ct=at[lt],pt=ot.matchPrefix(it,"a=rtpmap:"+ct+" ")[0];if(pt){var ut=ot.parseRtpMap(pt),ht=ot.matchPrefix(it,"a=fmtp:"+ct+" ");switch(ut.parameters=ht.length?ot.parseFmtp(ht[0]):{},ut.rtcpFeedback=ot.matchPrefix(it,"a=rtcp-fb:"+ct+" ").map(ot.parseRtcpFb),st.codecs.push(ut),ut.name.toUpperCase()){case"RED":case"ULPFEC":st.fecMechanisms.push(ut.name.toUpperCase())}}}return ot.matchPrefix(it,"a=extmap:").forEach(function(ft){st.headerExtensions.push(ot.parseExtmap(ft))}),st},ot.writeRtpDescription=function(it,st){var at="";at+="m="+it+" ",at+=st.codecs.length>0?"9":"0",at+=" UDP/TLS/RTP/SAVPF ",at+=st.codecs.map(function(ct){return ct.preferredPayloadType!==void 0?ct.preferredPayloadType:ct.payloadType}).join(" ")+`\r
`,at+=`c=IN IP4 0.0.0.0\r
`,at+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,st.codecs.forEach(function(ct){at+=ot.writeRtpMap(ct),at+=ot.writeFmtp(ct),at+=ot.writeRtcpFb(ct)});var lt=0;return st.codecs.forEach(function(ct){ct.maxptime>lt&&(lt=ct.maxptime)}),lt>0&&(at+="a=maxptime:"+lt+`\r
`),at+=`a=rtcp-mux\r
`,st.headerExtensions&&st.headerExtensions.forEach(function(ct){at+=ot.writeExtmap(ct)}),at},ot.parseRtpEncodingParameters=function(it){var st,at=[],lt=ot.parseRtpParameters(it),ct=lt.fecMechanisms.indexOf("RED")!==-1,pt=lt.fecMechanisms.indexOf("ULPFEC")!==-1,ut=ot.matchPrefix(it,"a=ssrc:").map(function(vt){return ot.parseSsrcMedia(vt)}).filter(function(vt){return vt.attribute==="cname"}),ht=ut.length>0&&ut[0].ssrc,ft=ot.matchPrefix(it,"a=ssrc-group:FID").map(function(vt){return vt.substr(17).split(" ").map(function(yt){return parseInt(yt,10)})});ft.length>0&&ft[0].length>1&&ft[0][0]===ht&&(st=ft[0][1]),lt.codecs.forEach(function(vt){if(vt.name.toUpperCase()==="RTX"&&vt.parameters.apt){var yt={ssrc:ht,codecPayloadType:parseInt(vt.parameters.apt,10)};ht&&st&&(yt.rtx={ssrc:st}),at.push(yt),ct&&((yt=JSON.parse(JSON.stringify(yt))).fec={ssrc:ht,mechanism:pt?"red+ulpfec":"red"},at.push(yt))}}),at.length===0&&ht&&at.push({ssrc:ht});var gt=ot.matchPrefix(it,"b=");return gt.length&&(gt=gt[0].indexOf("b=TIAS:")===0?parseInt(gt[0].substr(7),10):gt[0].indexOf("b=AS:")===0?1e3*parseInt(gt[0].substr(5),10)*.95-16e3:void 0,at.forEach(function(vt){vt.maxBitrate=gt})),at},ot.parseRtcpParameters=function(it){var st={},at=ot.matchPrefix(it,"a=ssrc:").map(function(pt){return ot.parseSsrcMedia(pt)}).filter(function(pt){return pt.attribute==="cname"})[0];at&&(st.cname=at.value,st.ssrc=at.ssrc);var lt=ot.matchPrefix(it,"a=rtcp-rsize");st.reducedSize=lt.length>0,st.compound=lt.length===0;var ct=ot.matchPrefix(it,"a=rtcp-mux");return st.mux=ct.length>0,st},ot.parseMsid=function(it){var st,at=ot.matchPrefix(it,"a=msid:");if(at.length===1)return{stream:(st=at[0].substr(7).split(" "))[0],track:st[1]};var lt=ot.matchPrefix(it,"a=ssrc:").map(function(ct){return ot.parseSsrcMedia(ct)}).filter(function(ct){return ct.attribute==="msid"});return lt.length>0?{stream:(st=lt[0].value.split(" "))[0],track:st[1]}:void 0},ot.generateSessionId=function(){return Math.random().toString().substr(2,21)},ot.writeSessionBoilerplate=function(it,st,at){var lt=st!==void 0?st:2;return`v=0\r
o=`+(at||"thisisadapterortc")+" "+(it||ot.generateSessionId())+" "+lt+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},ot.writeMediaSection=function(it,st,at,lt){var ct=ot.writeRtpDescription(it.kind,st);if(ct+=ot.writeIceParameters(it.iceGatherer.getLocalParameters()),ct+=ot.writeDtlsParameters(it.dtlsTransport.getLocalParameters(),at==="offer"?"actpass":"active"),ct+="a=mid:"+it.mid+`\r
`,ct+=it.direction?"a="+it.direction+`\r
`:it.rtpSender&&it.rtpReceiver?`a=sendrecv\r
`:it.rtpSender?`a=sendonly\r
`:it.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,it.rtpSender){var pt="msid:"+lt.id+" "+it.rtpSender.track.id+`\r
`;ct+="a="+pt,ct+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" "+pt,it.sendEncodingParameters[0].rtx&&(ct+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" "+pt,ct+="a=ssrc-group:FID "+it.sendEncodingParameters[0].ssrc+" "+it.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ct+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" cname:"+ot.localCName+`\r
`,it.rtpSender&&it.sendEncodingParameters[0].rtx&&(ct+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" cname:"+ot.localCName+`\r
`),ct},ot.getDirection=function(it,st){for(var at=ot.splitLines(it),lt=0;lt<at.length;lt++)switch(at[lt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return at[lt].substr(2)}return st?ot.getDirection(st):"sendrecv"},ot.getKind=function(it){return ot.splitLines(it)[0].split(" ")[0].substr(2)},ot.isRejected=function(it){return it.split(" ",2)[1]==="0"},ot.parseMLine=function(it){var st=ot.splitLines(it)[0].substr(2).split(" ");return{kind:st[0],port:parseInt(st[1],10),protocol:st[2],fmt:st.slice(3).join(" ")}},ot.parseOLine=function(it){var st=ot.matchPrefix(it,"o=")[0].substr(2).split(" ");return{username:st[0],sessionId:st[1],sessionVersion:parseInt(st[2],10),netType:st[3],addressType:st[4],address:st[5]}},ot.isValidSDP=function(it){if(typeof it!="string"||it.length===0)return!1;for(var st=ot.splitLines(it),at=0;at<st.length;at++)if(st[at].length<2||st[at].charAt(1)!=="=")return!1;return!0},typeof rt=="object"&&(rt.exports=ot)},{}]},{},[1])(1)},9869:function(_e){_e.exports=function(){return rt={24:function(ot,it,st){function at(Ct){return Ct}st.r(it),(st=lt=lt||{}).LIVE_SEND_SIGNAL="zm.lv.ssg",st.LIVE_RESPOND_JOIN_LIVE="zm.lv.rjl",st.LIVE_PUSH_SIGNAL="zm.lv.pss",st.SERVICE_PUSH="zm.sv.ps",st.SERVICE_SEND="zm.sv.sd";var lt,ct={event:"/liveroom/send_end_join_live",to_user_id:at,request_id:at},pt={event:"/liveroom/send_invite_join_live",to_user_id:at,request_id:at},ut={event:"/liveroom/send_join_live_result",to_user_id:at,request_id:at,join_result:function(Ct){return Ct}},ht={event:"/liveroom/send_request_join_live",to_user_id:at,request_id:at},ft={code:1002014,msg:"room not exist"},gt={code:1002099,msg:"room inner error"},vt=(yt.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},yt.prototype.getSignalCmdContent=function(Ct,Tt,wt){return Ct={request_id:Ct,room_id:this.room.roomID,from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,to_userid:Tt},wt!=null&&(Ct.result=wt),JSON.stringify(Ct)},yt.prototype.requestJoinLive=function(Ct,Tt,wt,Rt){var It,St=this.stateCenter.getRequestId(),Pt=this.getSignalCmdContent(St,Ct);return Rt!=null&&(this.stateCenter.reporter.spanSetAttributes({key:ht.event,par:(It=this.room)==null?void 0:It.roomID},{request_id:ht.request_id(St)}),this.joinLiveCallbackMap[St]=Rt,this.sendSignalCmd(1001,Pt,Ct,Tt,wt),!0)},yt.prototype.sendSignalCmd=function(Ct,Tt,wt,Rt,It){var St=this;this.room.isLogin()?((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendSignalCmd({sub_cmd:Ct,signal_msg:Tt,dest_id_name:[wt]},function(Pt){Rt&&Rt(Pt.header.seq)},function(Pt){var Ot=gt;Pt.header&&Pt.body?It&&It(St.rtm.getServerError(Pt.body.err_code),Pt.header.seq):(Pt.code&&Pt.msg&&(Ot=Pt),It&&It(Ot,0))},this.room),this.logger.info(lt.LIVE_SEND_SIGNAL+" call success"+Ct)):this.logger.error(lt.LIVE_SEND_SIGNAL+" state error")},yt.prototype.inviteJoinLive=function(Ct,Tt,wt,Rt){var It,St=this.stateCenter.getRequestId(),Pt=this.getSignalCmdContent(St,Ct);return Rt!=null&&(this.stateCenter.reporter.spanSetAttributes({key:pt.event,par:(It=this.room)==null?void 0:It.roomID},{request_id:pt.request_id(St)}),this.joinLiveCallbackMap[St]=Rt,this.sendSignalCmd(1003,Pt,Ct,Tt,wt),!0)},yt.prototype.endJoinLive=function(Ct,Tt,wt){var Rt,It=this.stateCenter.getRequestId(),St=this.getSignalCmdContent(It,Ct);return this.stateCenter.reporter.spanSetAttributes({key:ct.event,par:(Rt=this.room)==null?void 0:Rt.roomID},{request_id:ct.request_id(It)}),this.sendSignalCmd(1004,St,Ct,Tt,wt),!0},yt.prototype.respondJoinLive=function(Ct,Tt,wt,Rt){var It=this.joinLiveRequestMap[Ct];if(!It)return this.logger.info(lt.LIVE_RESPOND_JOIN_LIVE+" no dest id name"),!1;this.stateCenter.reporter.spanSetAttributes({key:ut.event,par:(St=this.room)==null?void 0:St.roomID},{to_user_id:ut.to_user_id(It)});var St=0;return Tt=this.getSignalCmdContent(Ct,It,St=Tt===!0?1:St),this.sendSignalCmd(1002,Tt,It,wt,Rt),delete this.joinLiveRequestMap[Ct],!0},yt.prototype.handlePushSignalMsg=function(Ct){var Tt=JSON.parse(Ct.body.signal_msg);switch(this.logger.info(lt.LIVE_PUSH_SIGNAL+" hpsm= ",Tt),Ct.body.sub_cmd){case 11001:this.handlePushJoinLiveRequestMsg(Tt);break;case 11002:this.handlePushJoinLiveResultMsg(Tt);break;case 11003:this.handlePushJoinLiveInviteMsg(Tt);break;case 11004:this.handlePushJoinLiveStopMsg(Tt)}},yt.prototype.handlePushJoinLiveRequestMsg=function(Ct){var Tt,wt=Ct.request_id;typeof wt!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+" no requestId"):typeof(Tt=Ct.from_userid)!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[wt]=Tt,this.onRecvJoinLiveRequest(wt,Ct.from_userid,Ct.from_username,Ct.room_id),this.logger.info(lt.LIVE_PUSH_SIGNAL+" onRecvJoinLiveRequest "+Tt))},yt.prototype.onRecvJoinLiveRequest=function(Ct,Tt,wt,Rt){this.stateCenter.actionListener("recvJoinLiveRequest",Ct,Tt,wt,Rt)},yt.prototype.handlePushJoinLiveInviteMsg=function(Ct){var Tt,wt=Ct.request_id;typeof wt!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+"no requestId"):typeof(Tt=Ct.from_userid)!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[wt]=Tt,this.onRecvInviteJoinLiveRequest(wt,Ct.from_userid,Ct.from_username,Ct.room_id),this.logger.info(lt.LIVE_PUSH_SIGNAL+" onRecvInviteJoinLiveRequest "+Tt))},yt.prototype.onRecvInviteJoinLiveRequest=function(Ct,Tt,wt,Rt){this.stateCenter.actionListener("recvInviteJoinLiveRequest",Ct,Tt,wt,Rt)},yt.prototype.handlePushJoinLiveResultMsg=function(Ct){var Tt,wt,Rt=Ct.request_id;typeof Rt!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+" no requestId"):(Tt=Ct.result)==null?this.logger.info(lt.LIVE_PUSH_SIGNAL+" no result"):(Tt=Tt==1,this.joinLiveCallbackMap[Rt]&&((wt=this.joinLiveCallbackMap[Rt])?(this.logger.info(lt.LIVE_PUSH_SIGNAL+" joinLiveRequest/invite result "+Tt),delete this.joinLiveCallbackMap[Rt],wt(Tt,Ct.from_userid,Ct.from_username)):this.logger.info(lt.LIVE_PUSH_SIGNAL+" no callback")))},yt.prototype.handlePushJoinLiveStopMsg=function(Ct){var Tt=Ct.request_id;typeof Tt!="string"?this.logger.error(lt.LIVE_PUSH_SIGNAL+" no requestId"):(this.logger.info(lt.LIVE_PUSH_SIGNAL+" onRecvEndJoinLiveCommand "+Ct.from_userid),this.onRecvEndJoinLiveCommand(Tt,Ct.from_userid,Ct.from_username,Ct.room_id))},yt.prototype.onRecvEndJoinLiveCommand=function(Ct,Tt,wt,Rt){this.stateCenter.actionListener("recvEndJoinLiveCommand",Ct,Tt,wt,Rt)},yt);function yt(Ct,Tt,wt,Rt,It,St){this.logger=Ct,this.stateCenter=Tt,this.service=wt,this.liveRoomHandler=Rt,this.rtm=It,this.room=St,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}var mt={requestJoinLive:function(Ct,Tt,wt,Rt,It){var St=this,Pt=this.getMsgSpan(ht.event,It||((Ot=this.stateCenter.roomModulesList[0])==null?void 0:Ot.roomID),!0),Ot=this.getRoomModules(It)||this.stateCenter.roomModulesList[0];return Ot?(Pt.setAttributes({to_user_id:ht.to_user_id(Ct)}),Ot.liveHandler.requestJoinLive(Ct,function(Ut){Pt.end(),Tt(Ut)},function(Ut,Bt){St.stateCenter.reporter.setError(Pt,Ut),wt(Ut,Bt)},Rt)):(this.stateCenter.reporter.setError(Pt,ft),wt&&wt(ft,0),!1)},inviteJoinLive:function(Ct,Tt,wt,Rt,It){var St=this,Pt=this.getMsgSpan(pt.event,It||((Ot=this.stateCenter.roomModulesList[0])==null?void 0:Ot.roomID),!0),Ot=this.getRoomModules(It)||this.stateCenter.roomModulesList[0];return Ot?(Pt.setAttributes({to_user_id:pt.to_user_id(Ct)}),Ot.liveHandler.inviteJoinLive(Ct,function(Ut){Pt.end(),Tt(Ut)},function(Ut,Bt){St.stateCenter.reporter.setError(Pt,Ut),wt(Ut,Bt)},Rt)):(this.stateCenter.reporter.setError(Pt,ft),wt&&wt(ft,0),!1)},endJoinLive:function(Ct,Tt,wt,Rt){var It=this,St=this.getMsgSpan(ct.event,Rt||((Pt=this.stateCenter.roomModulesList[0])==null?void 0:Pt.roomID),!0),Pt=this.getRoomModules(Rt)||this.stateCenter.roomModulesList[0];return Pt?(St.setAttributes({to_user_id:ct.to_user_id(Ct)}),Pt.liveHandler.endJoinLive(Ct,function(Ot){St.end(),Tt(Ot)},function(Ot,Ut){It.stateCenter.reporter.setError(St,Ot),wt(Ot,Ut)})):(this.stateCenter.reporter.setError(St,ft),wt&&wt(ft,0),!1)},respondJoinLive:function(Ct,Tt,wt,Rt,It){var St=this,Pt=this.getMsgSpan(ut.event,It||((Ot=this.stateCenter.roomModulesList[0])==null?void 0:Ot.roomID),!0),Ot=this.getRoomModules(It)||this.stateCenter.roomModulesList[0];return Ot?(Pt.setAttributes({request_id:ut.request_id(Ct),join_result:ut.join_result(Tt)}),Ot.liveHandler.respondJoinLive(Ct,Tt,function(Ut){Pt.end(),wt(Ut)},function(Ut,Bt){St.stateCenter.reporter.setError(Pt,Ut),Rt(Ut,Bt)})):(this.stateCenter.reporter.setError(Pt,ft),Rt&&Rt(ft,0),!1)}},Et={handlePushSignalMsg:function(Ct){var Tt=(wt=Ct==null?void 0:Ct.header)==null?void 0:wt.room_id,wt=this.stateCenter.roomModulesList.find(function(Rt){return Rt.roomID==Tt});wt?wt.liveHandler.handlePushSignalMsg(Ct):this.logger.error(lt.SERVICE_PUSH+" room no found ignore "+JSON.stringify(Ct))}},bt={initLiveHandler:function(){this.liveHandler=new vt(this.logger,this.stateCenter,this.service,this.liveRoomHandler,this.rtm,this)}};it.default={type:"live",install:function(Ct,Tt,wt,Rt){for(var It in mt)Object.defineProperty(Ct.prototype,It,{value:mt[It],writable:!1});for(var It in Et)Object.defineProperty(wt.prototype,It,{value:Et[It],writable:!1}),Object.defineProperty(Rt.prototype,It,{value:Et[It],writable:!1});for(var It in bt)Object.defineProperty(Tt.prototype,It,{value:bt[It],writable:!1})}}}},nt={},et.m=rt,et.c=nt,et.d=function(ot,it,st){et.o(ot,it)||Object.defineProperty(ot,it,{enumerable:!0,get:st})},et.r=function(ot){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})},et.t=function(ot,it){if(1&it&&(ot=et(ot)),8&it||4&it&&typeof ot=="object"&&ot&&ot.__esModule)return ot;var st=Object.create(null);if(et.r(st),Object.defineProperty(st,"default",{enumerable:!0,value:ot}),2&it&&typeof ot!="string")for(var at in ot)et.d(st,at,function(lt){return ot[lt]}.bind(null,at));return st},et.n=function(ot){var it=ot&&ot.__esModule?function(){return ot.default}:function(){return ot};return et.d(it,"a",it),it},et.o=function(ot,it){return Object.prototype.hasOwnProperty.call(ot,it)},et.p="",et(et.s=24);function et(ot){if(nt[ot])return nt[ot].exports;var it=nt[ot]={i:ot,l:!1,exports:{}};return rt[ot].call(it.exports,it,it.exports,et),it.l=!0,it.exports}var rt,nt}()},3126:function(_e){_e.exports=function(){return rt={1:function(ot,it,st){var at=function(lt){Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=void 0;var ct=null;try{ct=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function pt($t,Ft,jt){this.low=0|$t,this.high=0|Ft,this.unsigned=!!jt}function ut($t){return($t&&$t.__isLong__)===!0}function ht($t){var Ft=Math.clz32($t&-$t);return $t?31-Ft:Ft}Object.defineProperty(pt.prototype,"__isLong__",{value:!0}),pt.isLong=ut;var ft={},gt={};function vt($t,Ft){var jt,zt,Yt;return Ft?(Yt=0<=($t>>>=0)&&$t<256)&&(zt=gt[$t])?zt:(jt=mt($t,0,!0),Yt&&(gt[$t]=jt),jt):(Yt=-128<=($t|=0)&&$t<128)&&(zt=ft[$t])?zt:(jt=mt($t,$t<0?-1:0,!1),Yt&&(ft[$t]=jt),jt)}function yt($t,Ft){if(isNaN($t))return Ft?Pt:St;if(Ft){if($t<0)return Pt;if(wt<=$t)return At}else{if($t<=-Rt)return Mt;if(Rt<=$t+1)return xt}return $t<0?yt(-$t,Ft).neg():mt($t%Tt|0,$t/Tt|0,Ft)}function mt($t,Ft,jt){return new pt($t,Ft,jt)}pt.fromInt=vt,pt.fromNumber=yt,pt.fromBits=mt;var Et=Math.pow;function bt($t,Ft,jt){if($t.length===0)throw Error("empty string");if(Ft=typeof Ft=="number"?(jt=Ft,!1):!!Ft,$t==="NaN"||$t==="Infinity"||$t==="+Infinity"||$t==="-Infinity")return Ft?Pt:St;if((jt=jt||10)<2||36<jt)throw RangeError("radix");var zt;if(0<(zt=$t.indexOf("-")))throw Error("interior hyphen");if(zt===0)return bt($t.substring(1),Ft,jt).neg();for(var Yt=yt(Et(jt,8)),Kt=St,er=0;er<$t.length;er+=8){var ir=Math.min(8,$t.length-er),rr=parseInt($t.substring(er,er+ir),jt);Kt=ir<8?(ir=yt(Et(jt,ir)),Kt.mul(ir).add(yt(rr))):(Kt=Kt.mul(Yt)).add(yt(rr))}return Kt.unsigned=Ft,Kt}function Ct($t,Ft){return typeof $t=="number"?yt($t,Ft):typeof $t=="string"?bt($t,Ft):mt($t.low,$t.high,typeof Ft=="boolean"?Ft:$t.unsigned)}pt.fromString=bt,pt.fromValue=Ct;var Tt=4294967296,wt=Tt*Tt,Rt=wt/2,It=vt(1<<24),St=vt(0),Pt=(pt.ZERO=St,vt(0,!0)),Ot=(pt.UZERO=Pt,vt(1)),Ut=(pt.ONE=Ot,vt(1,!0)),Bt=(pt.UONE=Ut,vt(-1)),xt=(pt.NEG_ONE=Bt,mt(-1,2147483647,!1)),At=(pt.MAX_VALUE=xt,mt(-1,-1,!0)),Mt=(pt.MAX_UNSIGNED_VALUE=At,mt(0,-2147483648,!1)),Nt=(pt.MIN_VALUE=Mt,pt.prototype);return Nt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Nt.toNumber=function(){return this.unsigned?(this.high>>>0)*Tt+(this.low>>>0):this.high*Tt+(this.low>>>0)},Nt.toString=function($t){if(($t=$t||10)<2||36<$t)throw RangeError("radix");if(this.isZero())return"0";var Ft,jt;if(this.isNegative())return this.eq(Mt)?(jt=yt($t),jt=(Ft=this.div(jt)).mul(jt).sub(this),Ft.toString($t)+jt.toInt().toString($t)):"-"+this.neg().toString($t);for(var zt=yt(Et($t,6),this.unsigned),Yt=this,Kt="";;){var er=Yt.div(zt),ir=(Yt.sub(er.mul(zt)).toInt()>>>0).toString($t);if((Yt=er).isZero())return ir+Kt;for(;ir.length<6;)ir="0"+ir;Kt=""+ir+Kt}},Nt.getHighBits=function(){return this.high},Nt.getHighBitsUnsigned=function(){return this.high>>>0},Nt.getLowBits=function(){return this.low},Nt.getLowBitsUnsigned=function(){return this.low>>>0},Nt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Mt)?64:this.neg().getNumBitsAbs();for(var $t=this.high!=0?this.high:this.low,Ft=31;0<Ft&&!($t&1<<Ft);Ft--);return this.high!=0?Ft+33:Ft+1},Nt.isZero=function(){return this.high===0&&this.low===0},Nt.eqz=Nt.isZero,Nt.isNegative=function(){return!this.unsigned&&this.high<0},Nt.isPositive=function(){return this.unsigned||0<=this.high},Nt.isOdd=function(){return(1&this.low)==1},Nt.isEven=function(){return(1&this.low)==0},Nt.equals=function($t){return ut($t)||($t=Ct($t)),(this.unsigned===$t.unsigned||this.high>>>31!=1||$t.high>>>31!=1)&&this.high===$t.high&&this.low===$t.low},Nt.eq=Nt.equals,Nt.notEquals=function($t){return!this.eq($t)},Nt.neq=Nt.notEquals,Nt.ne=Nt.notEquals,Nt.lessThan=function($t){return this.comp($t)<0},Nt.lt=Nt.lessThan,Nt.lessThanOrEqual=function($t){return this.comp($t)<=0},Nt.lte=Nt.lessThanOrEqual,Nt.le=Nt.lessThanOrEqual,Nt.greaterThan=function($t){return 0<this.comp($t)},Nt.gt=Nt.greaterThan,Nt.greaterThanOrEqual=function($t){return 0<=this.comp($t)},Nt.gte=Nt.greaterThanOrEqual,Nt.ge=Nt.greaterThanOrEqual,Nt.compare=function($t){if(ut($t)||($t=Ct($t)),this.eq($t))return 0;var Ft=this.isNegative(),jt=$t.isNegative();return Ft&&!jt?-1:!Ft&&jt?1:this.unsigned?$t.high>>>0>this.high>>>0||$t.high===this.high&&$t.low>>>0>this.low>>>0?-1:1:this.sub($t).isNegative()?-1:1},Nt.comp=Nt.compare,Nt.negate=function(){return!this.unsigned&&this.eq(Mt)?Mt:this.not().add(Ot)},Nt.neg=Nt.negate,Nt.add=function($t){ut($t)||($t=Ct($t));var Ft=0,jt=0,zt=0,Yt=0;return jt+=(zt=zt+((Yt+=(65535&this.low)+(65535&$t.low))>>>16)+((this.low>>>16)+($t.low>>>16)))>>>16,mt((zt&=65535)<<16|(Yt&=65535),((Ft+=(jt+=(65535&this.high)+(65535&$t.high))>>>16)+((this.high>>>16)+($t.high>>>16))&65535)<<16|(jt&=65535),this.unsigned)},Nt.subtract=function($t){return ut($t)||($t=Ct($t)),this.add($t.neg())},Nt.sub=Nt.subtract,Nt.multiply=function($t){if(this.isZero())return this;if(ut($t)||($t=Ct($t)),ct)return mt(ct.mul(this.low,this.high,$t.low,$t.high),ct.get_high(),this.unsigned);if($t.isZero())return this.unsigned?Pt:St;if(this.eq(Mt))return $t.isOdd()?Mt:St;if($t.eq(Mt))return this.isOdd()?Mt:St;if(this.isNegative())return $t.isNegative()?this.neg().mul($t.neg()):this.neg().mul($t).neg();if($t.isNegative())return this.mul($t.neg()).neg();if(this.lt(It)&&$t.lt(It))return yt(this.toNumber()*$t.toNumber(),this.unsigned);var Ft=65535&this.high,jt=this.low>>>16,zt=65535&this.low,Yt=$t.high>>>16,Kt=65535&$t.high,er=$t.low>>>16,ir=0,rr=0,lr=0,nr=(nr=0)+((rr=rr+((lr+=zt*($t=65535&$t.low))>>>16)+jt*$t)>>>16)+((rr=(65535&rr)+zt*er)>>>16);return mt((rr&=65535)<<16|(lr&=65535),((ir+=(nr+=Ft*$t)>>>16)+((nr=(65535&nr)+jt*er)>>>16)+((nr=(65535&nr)+zt*Kt)>>>16)+((this.high>>>16)*$t+Ft*er+jt*Kt+zt*Yt)&65535)<<16|(nr&=65535),this.unsigned)},Nt.mul=Nt.multiply,Nt.divide=function($t){if(($t=ut($t)?$t:Ct($t)).isZero())throw Error("division by zero");var Ft,jt,zt;if(ct)return this.unsigned||this.high!==-2147483648||$t.low!==-1||$t.high!==-1?mt((this.unsigned?ct.div_u:ct.div_s)(this.low,this.high,$t.low,$t.high),ct.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Pt:St;if(this.unsigned){if(($t=$t.unsigned?$t:$t.toUnsigned()).gt(this))return Pt;if($t.gt(this.shru(1)))return Ut;jt=Pt}else{if(this.eq(Mt))return $t.eq(Ot)||$t.eq(Bt)?Mt:$t.eq(Mt)?Ot:(zt=this.shr(1).div($t).shl(1)).eq(St)?$t.isNegative()?Ot:Bt:(Ft=this.sub($t.mul(zt)),zt.add(Ft.div($t)));if($t.eq(Mt))return this.unsigned?Pt:St;if(this.isNegative())return $t.isNegative()?this.neg().div($t.neg()):this.neg().div($t).neg();if($t.isNegative())return this.div($t.neg()).neg();jt=St}for(Ft=this;Ft.gte($t);){zt=Math.max(1,Math.floor(Ft.toNumber()/$t.toNumber()));for(var Yt=Math.ceil(Math.log(zt)/Math.LN2),Kt=Yt<=48?1:Et(2,Yt-48),er=yt(zt),ir=er.mul($t);ir.isNegative()||ir.gt(Ft);)ir=(er=yt(zt-=Kt,this.unsigned)).mul($t);er.isZero()&&(er=Ot),jt=jt.add(er),Ft=Ft.sub(ir)}return jt},Nt.div=Nt.divide,Nt.modulo=function($t){return ut($t)||($t=Ct($t)),ct?mt((this.unsigned?ct.rem_u:ct.rem_s)(this.low,this.high,$t.low,$t.high),ct.get_high(),this.unsigned):this.sub(this.div($t).mul($t))},Nt.mod=Nt.modulo,Nt.rem=Nt.modulo,Nt.not=function(){return mt(~this.low,~this.high,this.unsigned)},Nt.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Nt.clz=Nt.countLeadingZeros,Nt.countTrailingZeros=function(){return this.low?ht(this.low):ht(this.high)+32},Nt.ctz=Nt.countTrailingZeros,Nt.and=function($t){return ut($t)||($t=Ct($t)),mt(this.low&$t.low,this.high&$t.high,this.unsigned)},Nt.or=function($t){return ut($t)||($t=Ct($t)),mt(this.low|$t.low,this.high|$t.high,this.unsigned)},Nt.xor=function($t){return ut($t)||($t=Ct($t)),mt(this.low^$t.low,this.high^$t.high,this.unsigned)},Nt.shiftLeft=function($t){return ut($t)&&($t=$t.toInt()),($t&=63)==0?this:$t<32?mt(this.low<<$t,this.high<<$t|this.low>>>32-$t,this.unsigned):mt(0,this.low<<$t-32,this.unsigned)},Nt.shl=Nt.shiftLeft,Nt.shiftRight=function($t){return ut($t)&&($t=$t.toInt()),($t&=63)==0?this:$t<32?mt(this.low>>>$t|this.high<<32-$t,this.high>>$t,this.unsigned):mt(this.high>>$t-32,0<=this.high?0:-1,this.unsigned)},Nt.shr=Nt.shiftRight,Nt.shiftRightUnsigned=function($t){return ut($t)&&($t=$t.toInt()),($t&=63)==0?this:$t<32?mt(this.low>>>$t|this.high<<32-$t,this.high>>>$t,this.unsigned):mt($t===32?this.high:this.high>>>$t-32,0,this.unsigned)},Nt.shru=Nt.shiftRightUnsigned,Nt.shr_u=Nt.shiftRightUnsigned,Nt.rotateLeft=function($t){var Ft;return ut($t)&&($t=$t.toInt()),($t&=63)==0?this:$t===32?mt(this.high,this.low,this.unsigned):$t<32?mt(this.low<<$t|this.high>>>(Ft=32-$t),this.high<<$t|this.low>>>Ft,this.unsigned):mt(this.high<<($t-=32)|this.low>>>(Ft=32-$t),this.low<<$t|this.high>>>Ft,this.unsigned)},Nt.rotl=Nt.rotateLeft,Nt.rotateRight=function($t){var Ft;return ut($t)&&($t=$t.toInt()),($t&=63)==0?this:$t===32?mt(this.high,this.low,this.unsigned):$t<32?mt(this.high<<(Ft=32-$t)|this.low>>>$t,this.low<<Ft|this.high>>>$t,this.unsigned):mt(this.low<<(Ft=32-($t-=32))|this.high>>>$t,this.high<<Ft|this.low>>>$t,this.unsigned)},Nt.rotr=Nt.rotateRight,Nt.toSigned=function(){return this.unsigned?mt(this.low,this.high,!1):this},Nt.toUnsigned=function(){return this.unsigned?this:mt(this.low,this.high,!0)},Nt.toBytes=function($t){return $t?this.toBytesLE():this.toBytesBE()},Nt.toBytesLE=function(){var $t=this.high,Ft=this.low;return[255&Ft,Ft>>>8&255,Ft>>>16&255,Ft>>>24,255&$t,$t>>>8&255,$t>>>16&255,$t>>>24]},Nt.toBytesBE=function(){var $t=this.high,Ft=this.low;return[$t>>>24,$t>>>16&255,$t>>>8&255,255&$t,Ft>>>24,Ft>>>16&255,Ft>>>8&255,255&Ft]},pt.fromBytes=function($t,Ft,jt){return jt?pt.fromBytesLE($t,Ft):pt.fromBytesBE($t,Ft)},pt.fromBytesLE=function($t,Ft){return new pt($t[0]|$t[1]<<8|$t[2]<<16|$t[3]<<24,$t[4]|$t[5]<<8|$t[6]<<16|$t[7]<<24,Ft)},pt.fromBytesBE=function($t,Ft){return new pt($t[4]<<24|$t[5]<<16|$t[6]<<8|$t[7],$t[0]<<24|$t[1]<<16|$t[2]<<8|$t[3],Ft)},lt.default=pt,"default"in lt?lt.default:lt}({});(it=function(){return at}.apply(it,[]))!==void 0&&(ot.exports=it)},23:function(ot,it,st){function at(St){return St}function lt(St){return St}function ct(St){return St}st.r(it),(gt=pt=pt||{}).RTM_SEND_CUSTOM="zm.scc",gt.RTM_SEND_BCM="zm.sbcm",gt.RTM_SEND_RLM="zm.srlm",gt.RTM_SEND_BRM="zm.sbrm",gt.RTM_SEND_RAM="zm.sram",gt.MESSAGE_SEND_RELIABLE="zm.msg.sdr",gt.MESSAGE_FETCH_RELIABLE="zm.msg.frm",gt.MESSAGE_RELIABLE_RSP="zm.msg.rlr",gt.MESSAGE_RELIABLE_PUSH="zm.msg.rps",gt.MESSAGE_SEND_ROOM_MSG="zm.msg.srm",gt.MESSAGE_SEND_CUSTOM_MSG="zm.msg.scm",gt.MESSAGE_SEND_BIG_MSG="zm.msg.sbm",gt.MESSAGE_BIG_MSG_PUSH="zm.msg.bps",gt.MESSAGE_SEND_RELAY_MSG="zm.msg.slm",gt.SERVICE_PUSH="zm.sv.ps";var pt,ut,ht={INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},NOT_LOGIN:{code:1000002,msg:"not login"},IM_CONTENT_NULL:{code:1009001,msg:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,msg:"message content is too long"},IM_SEND_FAILED:{code:1009010,msg:"failed to send message"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},TRANS_FREQUENTLY:{code:1102022,msg:"trans send frequently"},FREQ_LIMITED:{code:1109001,msg:"frequency limited."}},ft={kZMLoginRoom:{event:"/sdk/login"},kZMLiveSendRoomBigIM:{event:"/liveroom/send_big_room_message",room_sid_string:at,error:{INPUT_PARAM:ht.INPUT_PARAM,IM_CONTENT_NULL:ht.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:ht.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomSendCustomCommand:{event:"/liveroom/send_custom_command",room_sid_string:at,request_id:lt,error:{INPUT_PARAM:ht.INPUT_PARAM,IM_CONTENT_NULL:ht.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:ht.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomSendRoomMessage:{event:"/liveroom/send_room_message",room_id:lt,room_sid_string:lt,msg_content_size:ct,send_seq:ct,msg_id:ct,error:{INPUT_PARAM:ht.INPUT_PARAM,IM_CONTENT_NULL:ht.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:ht.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomSendRoomExtraInfo:{event:"/liveroom/set_room_extrainfo",room_id:lt,room_sid_string:at,key:lt,value:lt,error:{INPUT_PARAM:ht.INPUT_PARAM,TRANS_FREQUENTLY:ht.TRANS_FREQUENTLY,ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomGetRoomExtraInfo:{event:"/liveroom/get_room_extrainfo",fetch_array:at,result_array:at,error:{INPUT_PARAM:ht.INPUT_PARAM,TRANS_FREQUENTLY:ht.TRANS_FREQUENTLY,ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomRecvRoomExtraInfo:{event:"/liveroom/recv_room_extrainfo",trans_type:lt,trans_seq:ct,error:{ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMLiveRecvRoomBigIM:{event:"/liveroom/recv_big_room_message",error:{ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomGetRoomMessage:{event:"/liveroom/recv_room_message",error:{ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}},kZMRoomRecvCustomCommand:{event:"/liveroom/recv_custom_command",error:{ROOM_NOT_EXIST:ht.ROOM_NOT_EXIST}}},gt=((gt=ut=ut||{})[gt.I=0]="I",gt[gt.H=10]="H",gt[gt.M=100]="M",gt[gt.L=1e3]="L",st(1)),vt=st.n(gt),yt=(mt.prototype.loginRsp=function(St){var Pt,Ot=this;if(St.body.ret_timestamp!=null&&typeof St.body.ret_timestamp=="string"&&(Pt=parseFloat(St.body.ret_timestamp),this.serverTimeOffset=Pt==0?0:St.body.ret_timestamp-new Date().getTime()),St.body.bigim_time_window&&typeof St.body.bigim_time_window=="number"&&(this.bigimTimeWindow=St.body.bigim_time_window),St.body.dati_time_window&&typeof St.body.dati_time_window=="number"&&(this.datiTimeWindow=St.body.dati_time_window),St.body.trans_seqs)for(var Ut=0;Ut<St.body.trans_seqs.length;Ut++){var Bt=St.body.trans_seqs[Ut].trans_channel,xt=St.body.trans_seqs[Ut].trans_seq_array;0<(xt=(xt=xt.filter(function(At){var Mt=At.trans_type;return At=At.trans_seq,!Ot.transSeqMap[Mt]||Ot.transSeqMap[Mt].seq<At})).map(function(At){return{trans_type:At.trans_type,trans_local_seq:At.trans_seq}})).length&&this.fetchReliableMessage(Bt,xt)}},mt.prototype.sendReliableMessage=function(St,Pt,Ot,Ut){var Bt=this;this.logger.info(pt.MESSAGE_SEND_RELIABLE+" call"),this.room.isLogin()?this.isReliable?(this.logger.error(pt.MESSAGE_SEND_RELIABLE+" send too often"),Ut(ft.kZMRoomSendRoomExtraInfo.error.TRANS_FREQUENTLY)):(this.transSeqMap[St]||(this.transSeqMap[St]={seq:0}),Pt={trans_type:St,trans_data:Pt,trans_local_seq:this.transSeqMap[St].seq,trans_channel:"clt"},this.isReliable=!0,(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendReliableMessage(Pt,function(xt){Bt.transSeqMap[St].seq=xt.body.trans_seq,Bt.logger.info(pt.MESSAGE_SEND_RELIABLE+" trans "+St+" seq "+xt.body.trans_seq),Bt.isReliable=!1,Ot({seq:xt.header.seq,errorCode:0})},function(xt){var At=ht.ROOM_INNER_ERROR;xt.body&&xt.body.err_code?(At=Bt.rtm.getServerError(xt.body.err_code),Bt.logger.error(pt.MESSAGE_SEND_ROOM_MSG+"  "+At.msg)):At=xt,Bt.isReliable=!1,Ut(At)},this.room)):(this.logger.error(pt.MESSAGE_SEND_RELIABLE+" state error"),Ut&&Ut(ht.NOT_LOGIN))},mt.prototype.fetchReliableMessage=function(St,Pt){function Ot(xt){Ut.handleFetchTransRsp(xt,Bt)}var Ut=this,Bt=(St={trans_channel:St,fetch_array:Pt},this.stateCenter.reporter.createSpan(ut.H,{key:ft.kZMLoginRoom.event,par:this.room.roomID},{key:""},ft.kZMRoomGetRoomExtraInfo.event));Bt.setAttributes({fetch_array:ft.kZMRoomGetRoomExtraInfo.fetch_array(Pt)}),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchReliableMessage(St,Ot,Ot,this.room),this.logger.info(pt.MESSAGE_FETCH_RELIABLE+" call success")},mt.prototype.handleFetchTransRsp=function(St,Pt){if(St.body&&St.body.err_code!=0)this.logger.error(pt.MESSAGE_RELIABLE_RSP+" trans send error "+St.body.err_code),this.stateCenter.tracer.setError(Pt,{code:St.body.err_code});else if(St.header&&St.body){var Ot=St.body.trans_fetch_results,Ut=[],Bt=[];if(Array.isArray(Ot)&&0<Ot.length){for(var xt=0;xt<Ot.length;xt++){var At,Mt,Nt=Ot[xt];Nt.err_code===1000001109?this.logger.warn(pt.MESSAGE_RELIABLE_RSP+" fetch trans unknown type "+Nt.err_code):(Bt.push({trans_type:At=Nt.trans_type,trans_seq:Mt=Nt.trans_seq}),Nt.err_code===1000001110?(this.logger.warn(pt.MESSAGE_RELIABLE_RSP+" fetch trans seq is wrong "+Nt.err_code),this.transSeqMap[At]={seq:Mt}):!this.transSeqMap[At]||this.transSeqMap[At].seq<Mt?(this.transSeqMap[At]={seq:Mt},Ut.push(Nt)):this.logger.warn(pt.MESSAGE_RELIABLE_RSP+" fetch trans seq wrong"))}0<Ut.length&&this.onRecvReliableMessage(Ut)}Pt.setAttributes({result_array:ft.kZMRoomGetRoomExtraInfo.result_array(Bt)}),Pt.end()}else this.logger.error(pt.MESSAGE_RELIABLE_RSP+" trans send error "+St),this.stateCenter.tracer.setError(Pt,ht.TIMEOUT)},mt.prototype.handlePushTransMsg=function(St){var Pt,Ot=St.body.trans_type,Ut=St.body.trans_seq;!this.transSeqMap[Ot]||this.transSeqMap[Ot].seq<Ut?(this.transSeqMap[Ot]={seq:Ut},((Pt=St==null?void 0:St.body)==null?void 0:Pt.trans_idname)!==this.stateCenter.idName?this.onRecvReliableMessage([St.body]):this.logger.warn(pt.MESSAGE_RELIABLE_PUSH+" id name same")):this.logger.warn(pt.MESSAGE_RELIABLE_PUSH+" trans seq wrong"),this.logger.info(pt.MESSAGE_RELIABLE_PUSH+" trans "+Ot+" seq "+Ut)},mt.prototype.sendRoomMsg=function(St,Pt,Ot,Ut,Bt,xt){var At=this;if(!this.room.isLogin())return this.logger.error(pt.MESSAGE_SEND_ROOM_MSG+" state error"),xt(ht.NOT_LOGIN),!1;var Mt=Date.parse(new Date+"");return 0<this.sendRoomMsgTime&&this.sendRoomMsgTime+this.sendRoomMsgInterval>Mt?(this.logger.info(pt.MESSAGE_SEND_ROOM_MSG+" freq error"),xt&&xt(ht.FREQ_LIMITED,0,St,Ut),!1):(this.sendRoomMsgTime=Mt,Mt=(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRoomMsg({msg_category:St,msg_type:1,msg_priority:1,msg_content:Ut},function(Nt){Bt({seq:Nt.header.seq,errorCode:0,messageID:Nt.body.msg_id})},function(Nt){var $t,Ft,jt=ht.ROOM_INNER_ERROR;Nt.header&&Nt.body?(Ft=($t=[At.rtm.getServerError(Nt.body.err_code),Nt.body.msg_id])[1],At.logger.error(pt.MESSAGE_SEND_ROOM_MSG+"  "+(jt=$t[0]).msg),xt({seq:Nt.header.seq,errorCode:(jt=jt==ht.TIMEOUT?ht.IM_SEND_FAILED:jt).code,messageID:Ft})):(Nt.code&&Nt.msg&&(jt=Nt),xt({seq:0,errorCode:jt.code,messageID:0}))},this.room),this.stateCenter.reporter.spanSetAttributes({key:ft.kZMRoomSendRoomMessage.event,par:(St=this.room)==null?void 0:St.roomID},{send_seq:ft.kZMRoomSendRoomMessage.send_seq(Mt)}),this.logger.info(pt.MESSAGE_SEND_ROOM_MSG+"  call success"),!0)},mt.prototype.handlePushRoomMsg=function(St){var Pt,Ot=[];this.stateCenter.useNetAgent?(Pt=St.body.msg_data,St.body.msg_data.forEach(function(Ut){Ut={fromUser:{userID:Ut.id_name,userName:Ut.nick_name},message:Ut.msg_content,sendTime:Ut.send_time.toNumber(),messageID:Ut.msg_id.toNumber()},Ot.push(Ut)}),St.body.server_msg_id=St.body.server_msg_id.toNumber(),St.body.ret_msg_id=St.body.ret_msg_id.toNumber()):(Pt=St.body.chat_data,St.body.chat_data.forEach(function(Ut){Ot.push(Ut={fromUser:{userID:Ut.id_name,userName:Ut.nick_name},message:Ut.msg_content,sendTime:Ut.send_time,messageID:Ut.msg_id})})),this.stateCenter.actionListener("IMRecvBroadcastMessage",this.room.roomID,Ot),this.stateCenter.actionListener("_recvRoomMsg",Pt,St.body.server_msg_id,St.body.ret_msg_id)},mt.prototype.sendCustomCommand=function(St,Pt,Ot,Ut){var Bt=this;if(!this.room.isLogin())return this.logger.error(pt.MESSAGE_SEND_CUSTOM_MSG+" state error"),Ut(ht.NOT_LOGIN),!1;Pt={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,request_id:this.stateCenter.getRequestId(),custom_content:Pt||"",room_id:this.room.roomID};var xt=(this.stateCenter.reporter.spanSetAttributes({key:ft.kZMRoomSendCustomCommand.event,par:(xt=this.room)==null?void 0:xt.roomID},{request_id:ft.kZMRoomSendCustomCommand.request_id(Pt.request_id)}),{dest_id_name:St,custom_msg:JSON.stringify(Pt)});return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendCustomCommand(xt,function(At){Ot({seq:At.header.seq,errorCode:0})},function(At){var Mt=Bt.rtm.getServerError(At.body.err_code);Bt.logger.error(pt.MESSAGE_SEND_CUSTOM_MSG+" "+Mt.msg),Ut({seq:At.header.seq,errorCode:(Mt==ht.TIMEOUT?ht.IM_SEND_FAILED:Mt).code})},this.room),this.logger.info(pt.MESSAGE_SEND_CUSTOM_MSG+" call success"),!0},mt.prototype.handlePushCustomMsg=function(St){St=[(St=JSON.parse(St.body.custommsg)).from_userid,St.from_username,St.room_id,St.custom_content],this.stateCenter.actionListener("IMRecvCustomCommand",St[2],{userID:St[0],userName:St[1]},St[3])},mt.prototype.sendBigRoomMessage=function(St,Pt,Ot,Ut,Bt,xt){var At,Mt,Nt,$t,Ft=this;this.room.isLogin()?(At=this.bigimTimeWindow,Mt=this.serverTimeOffset,Nt=new Date().getTime()+Mt,$t=this.rtm.getSeq().toString(),this.bigImCallbackMap[$t]={success:Bt,error:xt},At==0?this.sendBigRoomMessageInternal([{msg_category:St,msg_type:1,msg_content:Ut,bigmsg_client_id:$t}],function(jt){Ft.handleBigImMsgRsp(jt)},function(jt){xt&&xt(jt)}):(Bt=Math.floor(Nt/At),this.bigImLastTimeIndex<Bt&&this.bigIMmessageList.length==0?(this.bigImLastTimeIndex=Bt,this.sendBigRoomMessageInternal([{msg_category:St,msg_type:1,msg_content:Ut,bigmsg_client_id:$t}],function(jt){Ft.handleBigImMsgRsp(jt)},function(jt){xt&&xt(jt)})):(this.bigIMmessageList.push({msg_category:St,msg_type:1,msg_content:Ut,bigmsg_client_id:$t}),this.bigIMmessageList.length==1&&this.setBigImTimer(Mt,At)))):(this.logger.error(pt.MESSAGE_SEND_BIG_MSG+" state error"),xt&&xt(ht.NOT_LOGIN))},mt.prototype.sendBigRoomMessageInternal=function(St,Pt,Ot){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendBigRoomMessage({msgs:St},function(Ut){Pt(Ut)},function(Ut){var Bt=ht.ROOM_INNER_ERROR;Ut.header&&Ut.body||(Ut.code&&Ut.msg&&(Bt=Ut),Ot(Bt)),Ot(Bt)},this.room),this.logger.info(pt.MESSAGE_SEND_BIG_MSG+" sendBigRoomMessage called")},mt.prototype.handleBigImMsgRsp=function(St){this.bigimTimeWindow=St.body.bigim_time_window;for(var Pt=0;Pt<St.body.msgs.length;Pt++){var Ot,Ut=St.body.msgs[Pt].bigmsg_client_id;this.bigImCallbackMap[Ut]&&((Ot=this.bigImCallbackMap[Ut].success)!=null&&Ot({seq:St.header.seq,errorCode:0,messageID:St.body.msgs[Pt].bigmsg_id}),delete this.bigImCallbackMap[Ut])}},mt.prototype.setBigImTimer=function(St,Pt){var Ot=this;St=Pt-(new Date().getTime()+St)%Pt,Pt=this.rtm.generateRandumNumber(Pt)+St,this.bigImTimer=setTimeout(function(){Ot.onBigImTimer()},Pt)},mt.prototype.onBigImTimer=function(){for(var St=this,Pt=new Date().getTime()+this.serverTimeOffset,Ot=(this.bigImLastTimeIndex=Math.floor(Pt/this.bigimTimeWindow),[]),Ut=[],Bt=0;Bt<this.bigIMmessageList.length&&!(20<=Bt);Bt++){var xt=this.bigIMmessageList[Bt];Ot.push({msg_category:xt.msg_category,msg_type:xt.msg_type,msg_content:xt.msg_content,bigmsg_client_id:xt.bigmsg_client_id}),Ut.push(xt.bigmsg_client_id)}20<this.bigIMmessageList.length?this.bigIMmessageList.splice(0,20):this.bigIMmessageList=[],this.sendBigRoomMessageInternal(Ot,function(At){St.handleBigImMsgRsp(At)},function(At,Mt){for(var Nt=0;Nt<Ut.length;Nt++){var $t=Ut[Nt],Ft=St.bigImCallbackMap[$t];Ft&&(Ft.error!=null&&Ft.error(At,Mt),delete St.bigImCallbackMap[$t])}}),this.bigImTimer&&clearTimeout(this.bigImTimer),this.bigImTimer=null,0<this.bigIMmessageList.length&&this.setBigImTimer(this.serverTimeOffset,this.bigimTimeWindow)},mt.prototype.handlePushMergeMsg=function(St){for(var Pt=0;Pt<St.body.messages.length;Pt++)St.body.messages[Pt].sub_cmd!==14001&&St.body.messages[Pt].sub_cmd!=="/lr/push/bigim_chat"||this.handlePushBigRooMsg(St.body.messages[Pt].msg_body)},mt.prototype.handlePushBigRooMsg=function(St){var Pt;if(typeof St=="string")try{Pt=JSON.parse(St)}catch{return void this.logger.warn(pt.MESSAGE_BIG_MSG_PUSH+"parse json error")}else Pt=St;if(Pt){St=Pt.room_id;for(var Ot=[],Ut=0;Ut<Pt.msg_data.length;Ut++){var Bt=Pt.msg_data[Ut];Bt.id_name==this.stateCenter.idName?this.logger.info(pt.MESSAGE_BIG_MSG_PUSH+" self message"):Ot.push({idName:Bt.id_name,nickName:Bt.nick_name,messageId:Bt.bigmsg_id,category:Bt.msg_category,type:Bt.msg_type,content:Bt.msg_content,time:Bt.send_time||vt.a.isLong(Bt.msg_timestamp)&&Bt.msg_timestamp.toNumber()})}Ot.length==0?this.logger.info(pt.MESSAGE_BIG_MSG_PUSH+" no other pushData except self"):this.onRecvBigRoomMessage(Ot,St),this.logger.info(pt.MESSAGE_BIG_MSG_PUSH+"call success")}else this.logger.warn(pt.MESSAGE_BIG_MSG_PUSH+" cann't find message body")},mt.prototype.onRecvBigRoomMessage=function(St,Pt){var Ot=[];St.forEach(function(Ut){Ot.push(Ut={fromUser:{userID:Ut.idName,userName:Ut.nickName},message:Ut.content,sendTime:Ut.time,messageID:Ut.messageId})}),this.stateCenter.actionListener("IMRecvBarrageMessage",Pt,Ot),this.stateCenter.actionListener("_recvBigRoomMessage",St,Pt)},mt.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this.relayTimer&&(clearTimeout(this.relayTimer),this.relayTimer=null),this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer&&(clearTimeout(this.bigImTimer),this.bigImTimer=null),this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0},mt.prototype.sendRelayMessage=function(St,Pt,Ot,Ut){var Bt=this.datiTimeWindow,xt=this.serverTimeOffset;0<Bt?(this.realyMessageList.push({type:St,data:Pt,success:Ot,error:Ut}),this.realyMessageList.length==1&&this.setRelayTimer(xt,Bt)):this.sendRelayMessageInternal(St,Pt,Ot,Ut)},mt.prototype.sendRelayMessageInternal=function(St,Pt,Ot,Ut){var Bt=this;this.logger.info(pt.MESSAGE_SEND_RELAY_MSG+" call"),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRelayMessage(St={relay_type:St,relay_data:Pt},function(xt){Ot&&Ot(xt.header.seq,xt.body.relay_result)},function(xt){var At=ht.ROOM_INNER_ERROR;xt.header&&xt.body?Ut&&Ut(Bt.rtm.getServerError(xt.body.err_code),xt.header.seq):(xt.code&&xt.msg&&(At=xt),Ut&&Ut(At,0))},Pt=this.room)},mt.prototype.setRelayTimer=function(St,Pt){var Ot=this;St=new Date().getTime()+St,St=this.rtm.generateRandumNumber(2*Pt-St%Pt),this.logger.info(pt.MESSAGE_SEND_RELAY_MSG+" setTimer "+St),this.relayTimer=setTimeout(function(){Ot.onRelayTimer()},St)},mt.prototype.onRelayTimer=function(){var St;this.realyMessageList.length==0?this.logger.info(pt.MESSAGE_SEND_RELAY_MSG+"  no relay data"):(this.sendRelayMessageInternal((St=this.realyMessageList[0]).type,St.data,St.success,St.error),this.relayTimer&&clearTimeout(this.relayTimer),this.relayTimer=null,this.realyMessageList.splice(0,1),0<this.realyMessageList.length&&this.setRelayTimer(this.serverTimeOffset,this.datiTimeWindow))},mt);function mt(St,Pt,Ot,Ut,Bt,xt,At){var Mt=this;this.logger=St,this.stateCenter=Pt,this.dataReport=Ot,this.service=Ut,this.liveRoomHandler=Bt,this.rtm=xt,this.room=At,this.sendRoomMsgTime=0,this.sendRoomMsgInterval=500,this.bigImCallbackMap={},this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImTimer=null,this.relayTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.isReliable=!1,this.transSeqMap={},this.onRecvReliableMessage=function(Nt){var $t=Nt.map(function(Ft){return{key:Ft.trans_type,value:Ft.trans_data,updateUser:{userID:Ft.trans_idname,userName:Ft.trans_nickname},updateTime:vt.a.isLong(Ft.trans_send_time)?Ft.trans_send_time.toNumber():Ft.trans_send_time}});0<$t.length&&Mt.stateCenter.actionListener("roomExtraInfoUpdate",Mt.room.roomID,$t),Nt.forEach(function(Ft){Mt.stateCenter.actionListener("recvReliableMessage",Ft.trans_type,Ft.trans_seq,Ft.trans_data)})},this.realyMessageList=[]}function Et(St,Pt,Ot,Ut){var Bt=this;return Ot===void 0&&(Ot=1),Ut===void 0&&(Ut=1),new Promise(function(xt,At){var Mt,Nt=Bt.getMsgSpan(ft.kZMRoomSendRoomMessage.event,St,!0),$t=(At=Bt.stateCenter.proxyRes(Nt,function(Ft){Nt.setAttributes({msg_id:ft.kZMRoomSendRoomMessage.msg_id(Ft.messageID)}),xt(Ft)},At)).interResolve;At=At.interReject,typeof St!="string"||St==""?(Bt.logger.error(pt.RTM_SEND_BCM+" roomid must be string and not empty"),At(ft.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):Pt===void 0||Pt==""?(Bt.logger.error(pt.RTM_SEND_BCM+" message is empty"),At(ft.kZMRoomSendRoomMessage.error.IM_CONTENT_NULL)):typeof Pt!="string"?(Bt.logger.error(pt.RTM_SEND_BCM+" message must be string"),At(ft.kZMRoomSendRoomMessage.error.INPUT_PARAM," param message error")):1024<Pt.length?(Bt.logger.error(pt.RTM_SEND_BCM+" message too long"),At(ft.kZMRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG)):(Mt=Bt.getRoomModules(St),Nt.setAttributes({send_seq:ft.kZMRoomSendRoomMessage.send_seq(),msg_content:Pt}),Mt?Mt.messageHandler.sendRoomMsg(Ot,Ut,St,Pt,function(Ft){Ft.messageID&&Nt.setAttributes({msg_id:Ft.messageID}),$t(Ft)},At):At(ft.kZMRoomSendRoomMessage.error.ROOM_NOT_EXIST))})}function bt(St,Pt,Ot){var Ut=this;return new Promise(function(Bt,xt){var At,Mt,Nt=Ut.getMsgSpan(ft.kZMRoomSendCustomCommand.event,St,!0);xt=(Bt=Ut.stateCenter.proxyRes(Nt,Bt,xt)).interResolve,Bt=Bt.interReject,typeof St!="string"||St==""?(Ut.logger.error(pt.RTM_SEND_CUSTOM+" roomid must be string and not empty"),Bt(ht.INPUT_PARAM," param roomID error")):Ot instanceof Array&&!Ot.find(function($t){return typeof $t!="string"})?typeof Pt!="string"&&typeof Pt!="object"?(Ut.logger.error(pt.RTM_SEND_CUSTOM+" custom content must be a non empty string or object"),Bt(ft.kZMRoomSendCustomCommand.error.INPUT_PARAM," param command error")):typeof Pt=="string"&&1024<Pt.length?(Ut.logger.error(pt.RTM_SEND_CUSTOM+" command too long"),Bt(ft.kZMRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG)):(At=Ut.getRoomModules(St),Mt=typeof Pt=="string"?Pt:JSON.stringify(Pt),Nt.setAttributes({msg_content:Mt}),At?At.messageHandler.sendCustomCommand(Ot,Pt,xt,Bt):Bt(ft.kZMRoomSendCustomCommand.error.ROOM_NOT_EXIST)):(Ut.logger.error(pt.RTM_SEND_CUSTOM+" dstMembers must be string array"),Bt(ft.kZMRoomSendCustomCommand.error.INPUT_PARAM," param toUserList error"))})}function Ct(St,Pt,Ot,Ut){var Bt=this;return Ot===void 0&&(Ot=1),Ut===void 0&&(Ut=1),new Promise(function(xt,At){var Mt=Bt.getMsgSpan(ft.kZMLiveSendRoomBigIM.event,St);At=(xt=Bt.stateCenter.proxyRes(Mt,xt,At)).interResolve,xt=xt.interReject,typeof St!="string"||St==""?(Bt.logger.error(pt.RTM_SEND_BRM+"roomid must be string and not empty"),xt(ft.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param roomID error")):Pt===void 0||Pt==""?(Bt.logger.error(pt.RTM_SEND_BRM+" message is empty"),xt(ft.kZMLiveSendRoomBigIM.error.IM_CONTENT_NULL)):typeof Pt!="string"?(Bt.logger.error(pt.RTM_SEND_BRM+" message must be string"),xt(ft.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param message error")):1024<Pt.length?(Bt.logger.error(pt.RTM_SEND_BRM+" message too long"),xt(ft.kZMLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG)):(Mt.setAttributes({msg_content:Pt}),(Mt=Bt.getRoomModules(St))?Mt.messageHandler.sendBigRoomMessage(Ot,Ut,St,Pt,At,xt):xt(ft.kZMLiveSendRoomBigIM.error.ROOM_NOT_EXIST))})}function Tt(St,Pt,Ot){var Ut=this;return new Promise(function(Bt,xt){var At=Ut.getMsgSpan(ft.kZMRoomSendRoomExtraInfo.event,St);xt=(Bt=Ut.stateCenter.proxyRes(At,Bt,xt)).interResolve,Bt=Bt.interReject,typeof St!="string"||St==""?(Ut.logger.error(pt.RTM_SEND_BCM+" roomid must be string and not empty"),Bt(ft.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):Pt&&typeof Pt=="string"?128<Pt.length?(Ut.logger.error(pt.RTM_SEND_RLM+" type is too long"),Bt({errorCode:ft.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):Ot&&typeof Ot=="string"?4096<Ot.length?(Ut.logger.error(pt.RTM_SEND_RLM+" type is too long"),Bt({errorCode:ft.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(At.setAttributes({key:ft.kZMRoomSendRoomExtraInfo.key(Pt),value:ft.kZMRoomSendRoomExtraInfo.value(Ot)}),(At=Ut.getRoomModules(St))?At.messageHandler.sendReliableMessage(Pt,Ot,xt,Bt):Bt(ft.kZMRoomSendRoomExtraInfo.error.ROOM_NOT_EXIST)):(Ut.logger.error(pt.RTM_SEND_RLM+" data must be string"),Bt({errorCode:ft.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(Ut.logger.error(pt.RTM_SEND_RLM+" type must be string"),Bt({errorCode:ft.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code}))})}var wt={_sendBroadcastMessage:Et,sendBroadcastMessage:function(St,Pt){var Ot=this;return new Promise(function(Ut,Bt){Et.call(Ot,St,Pt).then(function(xt){Ut({errorCode:xt.errorCode,messageID:xt.messageID,extendedData:xt.extendedData})}).catch(function(xt){Bt(xt)})})},_sendCustomCommand:bt,sendCustomCommand:function(St,Pt,Ot){var Ut=this;return new Promise(function(Bt,xt){bt.call(Ut,St,Pt,Ot).then(function(At){Bt({errorCode:At.errorCode,extendedData:At.extendedData})}).catch(function(At){xt(At)})})},_sendBarrageMessage:Ct,sendBarrageMessage:function(St,Pt){var Ot=this;return new Promise(function(Ut,Bt){Ct.call(Ot,St,Pt).then(function(xt){Ut({errorCode:xt.errorCode,messageID:xt.messageID,extendedData:xt.extendedData})}).catch(function(xt){Bt(xt)})})},_setRoomExtraInfo:Tt,setRoomExtraInfo:function(St,Pt,Ot){return Tt.call(this,St,Pt,Ot)},sendRelayMessage:function(St,Pt,Ot,Ut,Bt){(Bt=this.getRoomModules(Bt)||this.stateCenter.roomModulesList[0])?Bt.messageHandler.sendRelayMessage(St,Pt,Ot,Ut):Ut&&Ut(ht.ROOM_NOT_EXIST,0)}},Rt={handlePushRoomMsg:function(St){var Pt=this.handlePushMsg(St);Pt[0].messageHandler.handlePushRoomMsg(St=Pt[1])},handlePushCustomMsg:function(St){var Pt=this.handlePushMsg(St);Pt[0].messageHandler.handlePushCustomMsg(St=Pt[1])},handlePushMergeMsg:function(St){var Pt=(Pt=St==null?void 0:St.header)==null?void 0:Pt.room_id;(Pt=this.rtm.getRoomModules(Pt))?Pt.messageHandler.handlePushMergeMsg(St):this.logger.error(pt.SERVICE_PUSH+" room no found ignore "+JSON.stringify(St))},handlePushTransMsg:function(St){var Pt,Ot=(Ut=this.handlePushMsg(St))[0],Ut=(Ut=(St=Ut[1])==null?void 0:St.header)==null?void 0:Ut.room_id;(Ut=this.rtm.getMsgSpan(ft.kZMRoomRecvRoomExtraInfo.event,Ut)).setAttributes({trans_type:ft.kZMRoomRecvRoomExtraInfo.trans_type((Pt=St==null?void 0:St.body)==null?void 0:Pt.trans_type),trans_seq:ft.kZMRoomRecvRoomExtraInfo.trans_seq((Pt=St==null?void 0:St.body)==null?void 0:Pt.trans_seq)}),Ut.end(),Ot.messageHandler.handlePushTransMsg(St)},handleBigImMsgRsp:function(St){var Pt=(Pt=St==null?void 0:St.header)==null?void 0:Pt.room_id;(Pt=this.rtm.getRoomModules(Pt))?Pt.messageHandler.handleBigImMsgRsp(St):this.logger.error(pt.SERVICE_PUSH+" room no found ignore "+JSON.stringify(St))},handlePushMsg:function(St){var Pt=(Pt=St==null?void 0:St.header)==null?void 0:Pt.room_id;if(Pt=this.rtm.getRoomModules(Pt))return[Pt,St];this.logger.error(pt.SERVICE_PUSH+" room no found ignore "+JSON.stringify(St))}},It={initMessageHandler:function(){this.messageHandler=new yt(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this.rtm,this)}};it.default={type:"message",install:function(St,Pt,Ot,Ut){for(var Bt in wt)Object.defineProperty(St.prototype,Bt,{value:wt[Bt],writable:!1});for(var Bt in Rt)Object.defineProperty(Ot.prototype,Bt,{value:Rt[Bt],writable:!1}),Object.defineProperty(Ut.prototype,Bt,{value:Rt[Bt],writable:!1});for(var Bt in It)Object.defineProperty(Pt.prototype,Bt,{value:It[Bt],writable:!1})}}}},nt={},et.m=rt,et.c=nt,et.d=function(ot,it,st){et.o(ot,it)||Object.defineProperty(ot,it,{enumerable:!0,get:st})},et.r=function(ot){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})},et.t=function(ot,it){if(1&it&&(ot=et(ot)),8&it||4&it&&typeof ot=="object"&&ot&&ot.__esModule)return ot;var st=Object.create(null);if(et.r(st),Object.defineProperty(st,"default",{enumerable:!0,value:ot}),2&it&&typeof ot!="string")for(var at in ot)et.d(st,at,function(lt){return ot[lt]}.bind(null,at));return st},et.n=function(ot){var it=ot&&ot.__esModule?function(){return ot.default}:function(){return ot};return et.d(it,"a",it),it},et.o=function(ot,it){return Object.prototype.hasOwnProperty.call(ot,it)},et.p="",et(et.s=23);function et(ot){if(nt[ot])return nt[ot].exports;var it=nt[ot]={i:ot,l:!1,exports:{}};return rt[ot].call(it.exports,it,it.exports,et),it.l=!0,it.exports}var rt,nt}()},4119:function(_e){_e.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __webpack_require__(_e){var et=__webpack_module_cache__[_e];if(et!==void 0)return et.exports;var rt=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e].call(rt.exports,rt,rt.exports,__webpack_require__),rt.exports}__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var __webpack_exports__=__webpack_require__(4780);return __webpack_exports__}()})})(ZegoExpressWebRTC);const zegoInstance=()=>new ZegoExpressWebRTCExports.ZegoExpressEngine(Number({}.VITE_ZCLOUD_APPID),{}.VITE_ZCLOUD_SERVER);function AttemptQuiz(){var xt;const et=(xt=useLocation().state)==null?void 0:xt.id,[rt,nt]=reactExports.useState({}),[ot,it]=reactExports.useState([]),[st,at]=reactExports.useState(1),[lt,ct]=reactExports.useState([]),[pt,ut]=reactExports.useState([1]),[ht,ft]=reactExports.useState(!0),[gt,vt]=reactExports.useState({roomId:et,userId:auth$1.name,token:"",userName:auth$1.name}),[yt,mt]=reactExports.useState([]),[Et,bt]=reactExports.useState(0),[Ct,Tt]=reactExports.useState(!1),wt=zegoInstance(),Rt=useNavigate(),It=At=>{const Mt=[];for(;Mt.length<At;){const Nt=Math.floor(Math.random()*At);Mt.includes(Nt)||Mt.push(Nt)}return Mt},St=()=>{alert("You are trying to change window please stay on this window"),bt(At=>At+1)},Pt=()=>{alert("There is Problem with your internet")};reactExports.useEffect(()=>{if(Ot(),{}.VITE_PRODUCTION==="true")return document.fullscreenElement||document.documentElement.requestFullscreen(),window.addEventListener("offline",Pt),window.addEventListener("blur",St),()=>{document.fullscreenElement&&document.exitFullscreen(),window.removeEventListener("blur",St),window.removeEventListener("offline",Pt)}},[]);const Ot=async()=>{const At=await QuizService.getById(et);nt(At.data);const Mt=At.data.questions.map(Nt=>{const $t=[Nt.correct_answer,...Nt.incorrect_answer],Ft=It($t.length);return mt(jt=>[...jt,Ft.indexOf(0)]),{...Nt,suffeledOptions:Ft.map(jt=>$t[jt])}});it(Mt),ct(Array.from({length:At.data.questions.length},()=>null)),ft(!1)},Ut=At=>{ct(Mt=>{const Nt=[...Mt];return Nt[st-1]=At.target.value,Nt})},Bt=async()=>{const At=lt.map(Ft=>Ft==="A"?0:Ft==="B"?1:Ft==="C"?2:Ft==="D"?3:null);let Mt=0;for(let Ft=0;Ft<lt.length;Ft++)At[Ft]===yt[Ft]&&(Mt+=1);const Nt={QuizId:et,totalMarks:lt.length,students:{username:auth$1.name,answerKey:yt,studentAnswer:At,obtainedMarks:Mt,warningCount:Et}};(await QuizResultService.set(Nt)).status===202&&Rt("/quiz")};return jsxs(Fragment,{children:[jsx(AlertDialogBox,{open:Ct,setOpen:Tt,handleSuccess:Bt,title:"You really want to Submit?",data:`Question Attempted: ${lt.filter(At=>At!==null).length}/${ot.length}`}),jsxs(Box$1,{children:[jsx(Box$1,{children:rt.duration&&jsx(ExamHeader,{instance:wt,duration:rt.duration*60,handleSuccess:Bt,setSubmitOpen:Tt,setIsLoading:ft})}),jsx(Box$1,{children:jsxs(Grid$1,{container:!0,children:[jsx(Grid$1,{item:!0,xs:9,p:3,children:jsxs(Stack$3,{sx:{position:"relative"},children:[jsx(Box$1,{children:!ht&&jsxs("div",{children:[jsx("div",{dangerouslySetInnerHTML:{__html:st+") "+ot[st-1].question}}),["A","B","C","D"].map((At,Mt)=>{const Nt=ot[st-1].suffeledOptions[Mt];return jsx("div",{style:{marginTop:5},children:jsxs("label",{children:[jsx("input",{type:"radio",value:At,name:`question-${st}`,checked:At===lt[st-1],onChange:$t=>Ut($t)}),`${At}) ${Nt}`]})},At)})]})}),jsxs(Box$1,{sx:{position:"fixed",bottom:0,display:"flex",justifyContent:"space-between",width:"70%",padding:"10px"},children:[jsx(Button$1,{variant:"contained",disabled:st===1,onClick:()=>{ut(At=>[...At,st]),at(At=>At-1)},children:"Previous"}),jsx(Button$1,{variant:"contained",disabled:st===ot.length,onClick:()=>{ut(At=>[...At,st]),at(At=>At+1)},children:"Next"})]})]})}),jsx(Grid$1,{item:!0,xs:3,children:jsx(Box$1,{component:"main",sx:{borderLeft:"2px solid black",overflowY:"scroll",height:"calc(100vh - 65px)"},children:jsx(QuestionNavigation,{zConfig:gt,selectedQuestion:st,setSelectedQuestion:at,selectedAnswers:lt,numQuestions:ot.length,instance:wt,setVisitedQuestions:ut,visitedQuestions:pt})})})]})})]})]})}const theme$1=createTheme({breakpoints:{values:{xs:0,sm:600,md:1e3,lg:1200,xl:1920}},components:{MuiButton:{defaultProps:{disableElevation:!0},styleOverrides:{root:{textTransform:"none"},sizeSmall:{padding:"6px 16px"},sizeMedium:{padding:"8px 20px"},sizeLarge:{padding:"11px 24px"},textSizeSmall:{padding:"7px 12px"},textSizeMedium:{padding:"9px 16px"},textSizeLarge:{padding:"12px 16px"}}},MuiButtonBase:{defaultProps:{disableRipple:!0}},MuiCardContent:{styleOverrides:{root:{padding:"32px 24px","&:last-child":{paddingBottom:"32px"}}}},MuiCardHeader:{defaultProps:{titleTypographyProps:{variant:"h6"},subheaderTypographyProps:{variant:"body2"}},styleOverrides:{root:{padding:"32px 24px"}}},MuiCssBaseline:{styleOverrides:{"*":{boxSizing:"border-box",margin:0,padding:0},html:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",display:"flex",flexDirection:"column",minHeight:"100%",width:"100%"},body:{display:"flex",flex:"1 1 auto",flexDirection:"column",minHeight:"100%",width:"100%"},"#__next":{display:"flex",flex:"1 1 auto",flexDirection:"column",height:"100%",width:"100%"}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:"#E6E8F0"}}},MuiTableHead:{styleOverrides:{root:{backgroundColor:"#F3F4F6",".MuiTableCell-root":{color:"#374151"},borderBottom:"none","& .MuiTableCell-root":{borderBottom:"none",fontSize:"12px",fontWeight:600,lineHeight:1,letterSpacing:.5,textTransform:"uppercase"},"& .MuiTableCell-paddingCheckbox":{paddingTop:4,paddingBottom:4}}}}},palette:{neutral:{100:"#F3F4F6",200:"#E5E7EB",300:"#D1D5DB",400:"#9CA3AF",500:"#6B7280",600:"#4B5563",700:"#374151",800:"#1F2937",900:"#111827"},action:{active:"#6B7280",focus:"rgba(55, 65, 81, 0.12)",hover:"rgba(55, 65, 81, 0.04)",selected:"rgba(55, 65, 81, 0.08)",disabledBackground:"rgba(55, 65, 81, 0.12)",disabled:"rgba(55, 65, 81, 0.26)"},background:{default:"#F9FAFC",paper:"#FFFFFF",body:"#F0F2F5"},divider:"#E6E8F0",primary:{main:"#5048E5",light:"#828DF8",dark:"#3832A0",contrastText:"#FFFFFF"},secondary:{main:"#10B981",light:"#3FC79A",dark:"#0B815A",contrastText:"#FFFFFF"},success:{main:"#14B8A6",light:"#43C6B7",dark:"#0E8074",contrastText:"#FFFFFF"},info:{main:"#2196F3",light:"#64B6F7",dark:"#0B79D0",contrastText:"#FFFFFF"},warning:{main:"#FFB020",light:"#FFBF4C",dark:"#B27B16",contrastText:"#FFFFFF"},error:{main:"#D14343",light:"#DA6868",dark:"#922E2E",contrastText:"#FFFFFF"},text:{primary:"#121828",secondary:"#65748B",disabled:"rgba(55, 65, 81, 0.48)"}},shape:{borderRadius:8},shadows:["none","0px 1px 1px rgba(100, 116, 139, 0.06), 0px 1px 2px rgba(100, 116, 139, 0.1)","0px 1px 2px rgba(100, 116, 139, 0.12)","0px 1px 4px rgba(100, 116, 139, 0.12)","0px 1px 5px rgba(100, 116, 139, 0.12)","0px 1px 6px rgba(100, 116, 139, 0.12)","0px 2px 6px rgba(100, 116, 139, 0.12)","0px 3px 6px rgba(100, 116, 139, 0.12)","0px 2px 4px rgba(31, 41, 55, 0.06), 0px 4px 6px rgba(100, 116, 139, 0.12)","0px 5px 12px rgba(100, 116, 139, 0.12)","0px 5px 14px rgba(100, 116, 139, 0.12)","0px 5px 15px rgba(100, 116, 139, 0.12)","0px 6px 15px rgba(100, 116, 139, 0.12)","0px 7px 15px rgba(100, 116, 139, 0.12)","0px 8px 15px rgba(100, 116, 139, 0.12)","0px 9px 15px rgba(100, 116, 139, 0.12)","0px 10px 15px rgba(100, 116, 139, 0.12)","0px 12px 22px -8px rgba(100, 116, 139, 0.25)","0px 13px 22px -8px rgba(100, 116, 139, 0.25)","0px 14px 24px -8px rgba(100, 116, 139, 0.25)","0px 10px 10px rgba(31, 41, 55, 0.04), 0px 20px 25px rgba(31, 41, 55, 0.1)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)"],typography:{button:{fontWeight:600},fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.5},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.57},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.75},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.57},overline:{fontSize:"0.75rem",fontWeight:600,letterSpacing:"0.5px",lineHeight:2.5,textTransform:"uppercase"},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.66},h1:{fontWeight:700,fontSize:"3.5rem",lineHeight:1.375},h2:{fontWeight:700,fontSize:"3rem",lineHeight:1.375},h3:{fontWeight:700,fontSize:"2.25rem",lineHeight:1.375},h4:{fontWeight:700,fontSize:"2rem",lineHeight:1.375},h5:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.375,margin:"16px 0 8px"},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.375}}});function toInteger(_e){if(_e===null||_e===!0||_e===!1)return NaN;var et=Number(_e);return isNaN(et)?et:et<0?Math.ceil(et):Math.floor(et)}function requiredArgs(_e,et){if(et.length<_e)throw new TypeError(_e+" argument"+(_e>1?"s":"")+" required, but only "+et.length+" present")}function _typeof$z(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$z=function(rt){return typeof rt}:_typeof$z=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$z(_e)}function toDate(_e){requiredArgs(1,arguments);var et=Object.prototype.toString.call(_e);return _e instanceof Date||_typeof$z(_e)==="object"&&et==="[object Date]"?new Date(_e.getTime()):typeof _e=="number"||et==="[object Number]"?new Date(_e):((typeof _e=="string"||et==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addDays(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return isNaN(nt)?new Date(NaN):(nt&&rt.setDate(rt.getDate()+nt),rt)}function addMonths(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);if(isNaN(nt))return new Date(NaN);if(!nt)return rt;var ot=rt.getDate(),it=new Date(rt.getTime());it.setMonth(rt.getMonth()+nt+1,0);var st=it.getDate();return ot>=st?it:(rt.setFullYear(it.getFullYear(),it.getMonth(),ot),rt)}function addMilliseconds(_e,et){requiredArgs(2,arguments);var rt=toDate(_e).getTime(),nt=toInteger(et);return new Date(rt+nt)}var MILLISECONDS_IN_HOUR=36e5;function addHours(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);return addMilliseconds(_e,rt*MILLISECONDS_IN_HOUR)}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(_e,et){var rt,nt,ot,it,st,at,lt,ct;requiredArgs(1,arguments);var pt=getDefaultOptions(),ut=toInteger((rt=(nt=(ot=(it=et==null?void 0:et.weekStartsOn)!==null&&it!==void 0?it:et==null||(st=et.locale)===null||st===void 0||(at=st.options)===null||at===void 0?void 0:at.weekStartsOn)!==null&&ot!==void 0?ot:pt.weekStartsOn)!==null&&nt!==void 0?nt:(lt=pt.locale)===null||lt===void 0||(ct=lt.options)===null||ct===void 0?void 0:ct.weekStartsOn)!==null&&rt!==void 0?rt:0);if(!(ut>=0&&ut<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ht=toDate(_e),ft=ht.getDay(),gt=(ft<ut?7:0)+ft-ut;return ht.setDate(ht.getDate()-gt),ht.setHours(0,0,0,0),ht}function getTimezoneOffsetInMilliseconds(_e){var et=new Date(Date.UTC(_e.getFullYear(),_e.getMonth(),_e.getDate(),_e.getHours(),_e.getMinutes(),_e.getSeconds(),_e.getMilliseconds()));return et.setUTCFullYear(_e.getFullYear()),_e.getTime()-et.getTime()}function startOfDay(_e){requiredArgs(1,arguments);var et=toDate(_e);return et.setHours(0,0,0,0),et}var MILLISECONDS_IN_DAY$1=864e5;function differenceInCalendarDays(_e,et){requiredArgs(2,arguments);var rt=startOfDay(_e),nt=startOfDay(et),ot=rt.getTime()-getTimezoneOffsetInMilliseconds(rt),it=nt.getTime()-getTimezoneOffsetInMilliseconds(nt);return Math.round((ot-it)/MILLISECONDS_IN_DAY$1)}var MILLISECONDS_IN_MINUTE=6e4;function addMinutes(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);return addMilliseconds(_e,rt*MILLISECONDS_IN_MINUTE)}function addSeconds(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);return addMilliseconds(_e,rt*1e3)}function addWeeks(_e,et){requiredArgs(2,arguments);var rt=toInteger(et),nt=rt*7;return addDays(_e,nt)}function addYears(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);return addMonths(_e,rt*12)}function compareAsc(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et),ot=rt.getTime()-nt.getTime();return ot<0?-1:ot>0?1:ot}var millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3;function isSameDay(_e,et){requiredArgs(2,arguments);var rt=startOfDay(_e),nt=startOfDay(et);return rt.getTime()===nt.getTime()}function _typeof$y(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$y=function(rt){return typeof rt}:_typeof$y=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$y(_e)}function isDate(_e){return requiredArgs(1,arguments),_e instanceof Date||_typeof$y(_e)==="object"&&Object.prototype.toString.call(_e)==="[object Date]"}function isValid(_e){if(requiredArgs(1,arguments),!isDate(_e)&&typeof _e!="number")return!1;var et=toDate(_e);return!isNaN(Number(et))}function differenceInCalendarMonths(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et),ot=rt.getFullYear()-nt.getFullYear(),it=rt.getMonth()-nt.getMonth();return ot*12+it}function differenceInCalendarYears(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getFullYear()-nt.getFullYear()}function compareLocalAsc(_e,et){var rt=_e.getFullYear()-et.getFullYear()||_e.getMonth()-et.getMonth()||_e.getDate()-et.getDate()||_e.getHours()-et.getHours()||_e.getMinutes()-et.getMinutes()||_e.getSeconds()-et.getSeconds()||_e.getMilliseconds()-et.getMilliseconds();return rt<0?-1:rt>0?1:rt}function differenceInDays(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et),ot=compareLocalAsc(rt,nt),it=Math.abs(differenceInCalendarDays(rt,nt));rt.setDate(rt.getDate()-ot*it);var st=Number(compareLocalAsc(rt,nt)===-ot),at=ot*(it-st);return at===0?0:at}function differenceInMilliseconds(_e,et){return requiredArgs(2,arguments),toDate(_e).getTime()-toDate(et).getTime()}var roundingMap={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function _e(et){return et<0?Math.ceil(et):Math.floor(et)}},defaultRoundingMethod="trunc";function getRoundingMethod(_e){return _e?roundingMap[_e]:roundingMap[defaultRoundingMethod]}function differenceInHours(_e,et,rt){requiredArgs(2,arguments);var nt=differenceInMilliseconds(_e,et)/millisecondsInHour;return getRoundingMethod(rt==null?void 0:rt.roundingMethod)(nt)}function differenceInMinutes(_e,et,rt){requiredArgs(2,arguments);var nt=differenceInMilliseconds(_e,et)/millisecondsInMinute;return getRoundingMethod(rt==null?void 0:rt.roundingMethod)(nt)}function endOfDay(_e){requiredArgs(1,arguments);var et=toDate(_e);return et.setHours(23,59,59,999),et}function endOfMonth(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getMonth();return et.setFullYear(et.getFullYear(),rt+1,0),et.setHours(23,59,59,999),et}function isLastDayOfMonth(_e){requiredArgs(1,arguments);var et=toDate(_e);return endOfDay(et).getTime()===endOfMonth(et).getTime()}function differenceInMonths(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et),ot=compareAsc(rt,nt),it=Math.abs(differenceInCalendarMonths(rt,nt)),st;if(it<1)st=0;else{rt.getMonth()===1&&rt.getDate()>27&&rt.setDate(30),rt.setMonth(rt.getMonth()-ot*it);var at=compareAsc(rt,nt)===-ot;isLastDayOfMonth(toDate(_e))&&it===1&&compareAsc(_e,nt)===1&&(at=!1),st=ot*(it-Number(at))}return st===0?0:st}function differenceInQuarters(_e,et,rt){requiredArgs(2,arguments);var nt=differenceInMonths(_e,et)/3;return getRoundingMethod(rt==null?void 0:rt.roundingMethod)(nt)}function differenceInSeconds(_e,et,rt){requiredArgs(2,arguments);var nt=differenceInMilliseconds(_e,et)/1e3;return getRoundingMethod(rt==null?void 0:rt.roundingMethod)(nt)}function differenceInWeeks(_e,et,rt){requiredArgs(2,arguments);var nt=differenceInDays(_e,et)/7;return getRoundingMethod(rt==null?void 0:rt.roundingMethod)(nt)}function differenceInYears(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et),ot=compareAsc(rt,nt),it=Math.abs(differenceInCalendarYears(rt,nt));rt.setFullYear(1584),nt.setFullYear(1584);var st=compareAsc(rt,nt)===-ot,at=ot*(it-Number(st));return at===0?0:at}function eachDayOfInterval(_e,et){var rt;requiredArgs(1,arguments);var nt=_e||{},ot=toDate(nt.start),it=toDate(nt.end),st=it.getTime();if(!(ot.getTime()<=st))throw new RangeError("Invalid interval");var at=[],lt=ot;lt.setHours(0,0,0,0);var ct=Number((rt=et==null?void 0:et.step)!==null&&rt!==void 0?rt:1);if(ct<1||isNaN(ct))throw new RangeError("`options.step` must be a number greater than 1");for(;lt.getTime()<=st;)at.push(toDate(lt)),lt.setDate(lt.getDate()+ct),lt.setHours(0,0,0,0);return at}function startOfMonth(_e){requiredArgs(1,arguments);var et=toDate(_e);return et.setDate(1),et.setHours(0,0,0,0),et}function endOfYear(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getFullYear();return et.setFullYear(rt+1,0,0),et.setHours(23,59,59,999),et}function startOfYear(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=new Date(0);return rt.setFullYear(et.getFullYear(),0,1),rt.setHours(0,0,0,0),rt}function endOfWeek(_e,et){var rt,nt,ot,it,st,at,lt,ct;requiredArgs(1,arguments);var pt=getDefaultOptions(),ut=toInteger((rt=(nt=(ot=(it=et==null?void 0:et.weekStartsOn)!==null&&it!==void 0?it:et==null||(st=et.locale)===null||st===void 0||(at=st.options)===null||at===void 0?void 0:at.weekStartsOn)!==null&&ot!==void 0?ot:pt.weekStartsOn)!==null&&nt!==void 0?nt:(lt=pt.locale)===null||lt===void 0||(ct=lt.options)===null||ct===void 0?void 0:ct.weekStartsOn)!==null&&rt!==void 0?rt:0);if(!(ut>=0&&ut<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ht=toDate(_e),ft=ht.getDay(),gt=(ft<ut?-7:0)+6-(ft-ut);return ht.setDate(ht.getDate()+gt),ht.setHours(23,59,59,999),ht}function subMilliseconds(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);return addMilliseconds(_e,-rt)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getTime();et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0);var nt=et.getTime(),ot=rt-nt;return Math.floor(ot/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(_e){requiredArgs(1,arguments);var et=1,rt=toDate(_e),nt=rt.getUTCDay(),ot=(nt<et?7:0)+nt-et;return rt.setUTCDate(rt.getUTCDate()-ot),rt.setUTCHours(0,0,0,0),rt}function getUTCISOWeekYear(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getUTCFullYear(),nt=new Date(0);nt.setUTCFullYear(rt+1,0,4),nt.setUTCHours(0,0,0,0);var ot=startOfUTCISOWeek(nt),it=new Date(0);it.setUTCFullYear(rt,0,4),it.setUTCHours(0,0,0,0);var st=startOfUTCISOWeek(it);return et.getTime()>=ot.getTime()?rt+1:et.getTime()>=st.getTime()?rt:rt-1}function startOfUTCISOWeekYear(_e){requiredArgs(1,arguments);var et=getUTCISOWeekYear(_e),rt=new Date(0);rt.setUTCFullYear(et,0,4),rt.setUTCHours(0,0,0,0);var nt=startOfUTCISOWeek(rt);return nt}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCISOWeek(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=startOfUTCISOWeek(et).getTime()-startOfUTCISOWeekYear(et).getTime();return Math.round(rt/MILLISECONDS_IN_WEEK$1)+1}function startOfUTCWeek(_e,et){var rt,nt,ot,it,st,at,lt,ct;requiredArgs(1,arguments);var pt=getDefaultOptions(),ut=toInteger((rt=(nt=(ot=(it=et==null?void 0:et.weekStartsOn)!==null&&it!==void 0?it:et==null||(st=et.locale)===null||st===void 0||(at=st.options)===null||at===void 0?void 0:at.weekStartsOn)!==null&&ot!==void 0?ot:pt.weekStartsOn)!==null&&nt!==void 0?nt:(lt=pt.locale)===null||lt===void 0||(ct=lt.options)===null||ct===void 0?void 0:ct.weekStartsOn)!==null&&rt!==void 0?rt:0);if(!(ut>=0&&ut<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ht=toDate(_e),ft=ht.getUTCDay(),gt=(ft<ut?7:0)+ft-ut;return ht.setUTCDate(ht.getUTCDate()-gt),ht.setUTCHours(0,0,0,0),ht}function getUTCWeekYear(_e,et){var rt,nt,ot,it,st,at,lt,ct;requiredArgs(1,arguments);var pt=toDate(_e),ut=pt.getUTCFullYear(),ht=getDefaultOptions(),ft=toInteger((rt=(nt=(ot=(it=et==null?void 0:et.firstWeekContainsDate)!==null&&it!==void 0?it:et==null||(st=et.locale)===null||st===void 0||(at=st.options)===null||at===void 0?void 0:at.firstWeekContainsDate)!==null&&ot!==void 0?ot:ht.firstWeekContainsDate)!==null&&nt!==void 0?nt:(lt=ht.locale)===null||lt===void 0||(ct=lt.options)===null||ct===void 0?void 0:ct.firstWeekContainsDate)!==null&&rt!==void 0?rt:1);if(!(ft>=1&&ft<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var gt=new Date(0);gt.setUTCFullYear(ut+1,0,ft),gt.setUTCHours(0,0,0,0);var vt=startOfUTCWeek(gt,et),yt=new Date(0);yt.setUTCFullYear(ut,0,ft),yt.setUTCHours(0,0,0,0);var mt=startOfUTCWeek(yt,et);return pt.getTime()>=vt.getTime()?ut+1:pt.getTime()>=mt.getTime()?ut:ut-1}function startOfUTCWeekYear(_e,et){var rt,nt,ot,it,st,at,lt,ct;requiredArgs(1,arguments);var pt=getDefaultOptions(),ut=toInteger((rt=(nt=(ot=(it=et==null?void 0:et.firstWeekContainsDate)!==null&&it!==void 0?it:et==null||(st=et.locale)===null||st===void 0||(at=st.options)===null||at===void 0?void 0:at.firstWeekContainsDate)!==null&&ot!==void 0?ot:pt.firstWeekContainsDate)!==null&&nt!==void 0?nt:(lt=pt.locale)===null||lt===void 0||(ct=lt.options)===null||ct===void 0?void 0:ct.firstWeekContainsDate)!==null&&rt!==void 0?rt:1),ht=getUTCWeekYear(_e,et),ft=new Date(0);ft.setUTCFullYear(ht,0,ut),ft.setUTCHours(0,0,0,0);var gt=startOfUTCWeek(ft,et);return gt}var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(_e,et){requiredArgs(1,arguments);var rt=toDate(_e),nt=startOfUTCWeek(rt,et).getTime()-startOfUTCWeekYear(rt,et).getTime();return Math.round(nt/MILLISECONDS_IN_WEEK)+1}function addLeadingZeros(_e,et){for(var rt=_e<0?"-":"",nt=Math.abs(_e).toString();nt.length<et;)nt="0"+nt;return rt+nt}var formatters$3={y:function _e(et,rt){var nt=et.getUTCFullYear(),ot=nt>0?nt:1-nt;return addLeadingZeros(rt==="yy"?ot%100:ot,rt.length)},M:function _e(et,rt){var nt=et.getUTCMonth();return rt==="M"?String(nt+1):addLeadingZeros(nt+1,2)},d:function _e(et,rt){return addLeadingZeros(et.getUTCDate(),rt.length)},a:function _e(et,rt){var nt=et.getUTCHours()/12>=1?"pm":"am";switch(rt){case"a":case"aa":return nt.toUpperCase();case"aaa":return nt;case"aaaaa":return nt[0];case"aaaa":default:return nt==="am"?"a.m.":"p.m."}},h:function _e(et,rt){return addLeadingZeros(et.getUTCHours()%12||12,rt.length)},H:function _e(et,rt){return addLeadingZeros(et.getUTCHours(),rt.length)},m:function _e(et,rt){return addLeadingZeros(et.getUTCMinutes(),rt.length)},s:function _e(et,rt){return addLeadingZeros(et.getUTCSeconds(),rt.length)},S:function _e(et,rt){var nt=rt.length,ot=et.getUTCMilliseconds(),it=Math.floor(ot*Math.pow(10,nt-3));return addLeadingZeros(it,rt.length)}};const formatters$4=formatters$3;var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function _e(et,rt,nt){var ot=et.getUTCFullYear()>0?1:0;switch(rt){case"G":case"GG":case"GGG":return nt.era(ot,{width:"abbreviated"});case"GGGGG":return nt.era(ot,{width:"narrow"});case"GGGG":default:return nt.era(ot,{width:"wide"})}},y:function _e(et,rt,nt){if(rt==="yo"){var ot=et.getUTCFullYear(),it=ot>0?ot:1-ot;return nt.ordinalNumber(it,{unit:"year"})}return formatters$4.y(et,rt)},Y:function _e(et,rt,nt,ot){var it=getUTCWeekYear(et,ot),st=it>0?it:1-it;if(rt==="YY"){var at=st%100;return addLeadingZeros(at,2)}return rt==="Yo"?nt.ordinalNumber(st,{unit:"year"}):addLeadingZeros(st,rt.length)},R:function _e(et,rt){var nt=getUTCISOWeekYear(et);return addLeadingZeros(nt,rt.length)},u:function _e(et,rt){var nt=et.getUTCFullYear();return addLeadingZeros(nt,rt.length)},Q:function _e(et,rt,nt){var ot=Math.ceil((et.getUTCMonth()+1)/3);switch(rt){case"Q":return String(ot);case"QQ":return addLeadingZeros(ot,2);case"Qo":return nt.ordinalNumber(ot,{unit:"quarter"});case"QQQ":return nt.quarter(ot,{width:"abbreviated",context:"formatting"});case"QQQQQ":return nt.quarter(ot,{width:"narrow",context:"formatting"});case"QQQQ":default:return nt.quarter(ot,{width:"wide",context:"formatting"})}},q:function _e(et,rt,nt){var ot=Math.ceil((et.getUTCMonth()+1)/3);switch(rt){case"q":return String(ot);case"qq":return addLeadingZeros(ot,2);case"qo":return nt.ordinalNumber(ot,{unit:"quarter"});case"qqq":return nt.quarter(ot,{width:"abbreviated",context:"standalone"});case"qqqqq":return nt.quarter(ot,{width:"narrow",context:"standalone"});case"qqqq":default:return nt.quarter(ot,{width:"wide",context:"standalone"})}},M:function _e(et,rt,nt){var ot=et.getUTCMonth();switch(rt){case"M":case"MM":return formatters$4.M(et,rt);case"Mo":return nt.ordinalNumber(ot+1,{unit:"month"});case"MMM":return nt.month(ot,{width:"abbreviated",context:"formatting"});case"MMMMM":return nt.month(ot,{width:"narrow",context:"formatting"});case"MMMM":default:return nt.month(ot,{width:"wide",context:"formatting"})}},L:function _e(et,rt,nt){var ot=et.getUTCMonth();switch(rt){case"L":return String(ot+1);case"LL":return addLeadingZeros(ot+1,2);case"Lo":return nt.ordinalNumber(ot+1,{unit:"month"});case"LLL":return nt.month(ot,{width:"abbreviated",context:"standalone"});case"LLLLL":return nt.month(ot,{width:"narrow",context:"standalone"});case"LLLL":default:return nt.month(ot,{width:"wide",context:"standalone"})}},w:function _e(et,rt,nt,ot){var it=getUTCWeek(et,ot);return rt==="wo"?nt.ordinalNumber(it,{unit:"week"}):addLeadingZeros(it,rt.length)},I:function _e(et,rt,nt){var ot=getUTCISOWeek(et);return rt==="Io"?nt.ordinalNumber(ot,{unit:"week"}):addLeadingZeros(ot,rt.length)},d:function _e(et,rt,nt){return rt==="do"?nt.ordinalNumber(et.getUTCDate(),{unit:"date"}):formatters$4.d(et,rt)},D:function _e(et,rt,nt){var ot=getUTCDayOfYear(et);return rt==="Do"?nt.ordinalNumber(ot,{unit:"dayOfYear"}):addLeadingZeros(ot,rt.length)},E:function _e(et,rt,nt){var ot=et.getUTCDay();switch(rt){case"E":case"EE":case"EEE":return nt.day(ot,{width:"abbreviated",context:"formatting"});case"EEEEE":return nt.day(ot,{width:"narrow",context:"formatting"});case"EEEEEE":return nt.day(ot,{width:"short",context:"formatting"});case"EEEE":default:return nt.day(ot,{width:"wide",context:"formatting"})}},e:function _e(et,rt,nt,ot){var it=et.getUTCDay(),st=(it-ot.weekStartsOn+8)%7||7;switch(rt){case"e":return String(st);case"ee":return addLeadingZeros(st,2);case"eo":return nt.ordinalNumber(st,{unit:"day"});case"eee":return nt.day(it,{width:"abbreviated",context:"formatting"});case"eeeee":return nt.day(it,{width:"narrow",context:"formatting"});case"eeeeee":return nt.day(it,{width:"short",context:"formatting"});case"eeee":default:return nt.day(it,{width:"wide",context:"formatting"})}},c:function _e(et,rt,nt,ot){var it=et.getUTCDay(),st=(it-ot.weekStartsOn+8)%7||7;switch(rt){case"c":return String(st);case"cc":return addLeadingZeros(st,rt.length);case"co":return nt.ordinalNumber(st,{unit:"day"});case"ccc":return nt.day(it,{width:"abbreviated",context:"standalone"});case"ccccc":return nt.day(it,{width:"narrow",context:"standalone"});case"cccccc":return nt.day(it,{width:"short",context:"standalone"});case"cccc":default:return nt.day(it,{width:"wide",context:"standalone"})}},i:function _e(et,rt,nt){var ot=et.getUTCDay(),it=ot===0?7:ot;switch(rt){case"i":return String(it);case"ii":return addLeadingZeros(it,rt.length);case"io":return nt.ordinalNumber(it,{unit:"day"});case"iii":return nt.day(ot,{width:"abbreviated",context:"formatting"});case"iiiii":return nt.day(ot,{width:"narrow",context:"formatting"});case"iiiiii":return nt.day(ot,{width:"short",context:"formatting"});case"iiii":default:return nt.day(ot,{width:"wide",context:"formatting"})}},a:function _e(et,rt,nt){var ot=et.getUTCHours(),it=ot/12>=1?"pm":"am";switch(rt){case"a":case"aa":return nt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"aaa":return nt.dayPeriod(it,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return nt.dayPeriod(it,{width:"narrow",context:"formatting"});case"aaaa":default:return nt.dayPeriod(it,{width:"wide",context:"formatting"})}},b:function _e(et,rt,nt){var ot=et.getUTCHours(),it;switch(ot===12?it=dayPeriodEnum.noon:ot===0?it=dayPeriodEnum.midnight:it=ot/12>=1?"pm":"am",rt){case"b":case"bb":return nt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"bbb":return nt.dayPeriod(it,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return nt.dayPeriod(it,{width:"narrow",context:"formatting"});case"bbbb":default:return nt.dayPeriod(it,{width:"wide",context:"formatting"})}},B:function _e(et,rt,nt){var ot=et.getUTCHours(),it;switch(ot>=17?it=dayPeriodEnum.evening:ot>=12?it=dayPeriodEnum.afternoon:ot>=4?it=dayPeriodEnum.morning:it=dayPeriodEnum.night,rt){case"B":case"BB":case"BBB":return nt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"BBBBB":return nt.dayPeriod(it,{width:"narrow",context:"formatting"});case"BBBB":default:return nt.dayPeriod(it,{width:"wide",context:"formatting"})}},h:function _e(et,rt,nt){if(rt==="ho"){var ot=et.getUTCHours()%12;return ot===0&&(ot=12),nt.ordinalNumber(ot,{unit:"hour"})}return formatters$4.h(et,rt)},H:function _e(et,rt,nt){return rt==="Ho"?nt.ordinalNumber(et.getUTCHours(),{unit:"hour"}):formatters$4.H(et,rt)},K:function _e(et,rt,nt){var ot=et.getUTCHours()%12;return rt==="Ko"?nt.ordinalNumber(ot,{unit:"hour"}):addLeadingZeros(ot,rt.length)},k:function _e(et,rt,nt){var ot=et.getUTCHours();return ot===0&&(ot=24),rt==="ko"?nt.ordinalNumber(ot,{unit:"hour"}):addLeadingZeros(ot,rt.length)},m:function _e(et,rt,nt){return rt==="mo"?nt.ordinalNumber(et.getUTCMinutes(),{unit:"minute"}):formatters$4.m(et,rt)},s:function _e(et,rt,nt){return rt==="so"?nt.ordinalNumber(et.getUTCSeconds(),{unit:"second"}):formatters$4.s(et,rt)},S:function _e(et,rt){return formatters$4.S(et,rt)},X:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=it.getTimezoneOffset();if(st===0)return"Z";switch(rt){case"X":return formatTimezoneWithOptionalMinutes(st);case"XXXX":case"XX":return formatTimezone(st);case"XXXXX":case"XXX":default:return formatTimezone(st,":")}},x:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=it.getTimezoneOffset();switch(rt){case"x":return formatTimezoneWithOptionalMinutes(st);case"xxxx":case"xx":return formatTimezone(st);case"xxxxx":case"xxx":default:return formatTimezone(st,":")}},O:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=it.getTimezoneOffset();switch(rt){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(st,":");case"OOOO":default:return"GMT"+formatTimezone(st,":")}},z:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=it.getTimezoneOffset();switch(rt){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(st,":");case"zzzz":default:return"GMT"+formatTimezone(st,":")}},t:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=Math.floor(it.getTime()/1e3);return addLeadingZeros(st,rt.length)},T:function _e(et,rt,nt,ot){var it=ot._originalDate||et,st=it.getTime();return addLeadingZeros(st,rt.length)}};function formatTimezoneShort(_e,et){var rt=_e>0?"-":"+",nt=Math.abs(_e),ot=Math.floor(nt/60),it=nt%60;if(it===0)return rt+String(ot);var st=et||"";return rt+String(ot)+st+addLeadingZeros(it,2)}function formatTimezoneWithOptionalMinutes(_e,et){if(_e%60===0){var rt=_e>0?"-":"+";return rt+addLeadingZeros(Math.abs(_e)/60,2)}return formatTimezone(_e,et)}function formatTimezone(_e,et){var rt=et||"",nt=_e>0?"-":"+",ot=Math.abs(_e),it=addLeadingZeros(Math.floor(ot/60),2),st=addLeadingZeros(ot%60,2);return nt+it+rt+st}const formatters$2=formatters$1;var dateLongFormatter=function _e(et,rt){switch(et){case"P":return rt.date({width:"short"});case"PP":return rt.date({width:"medium"});case"PPP":return rt.date({width:"long"});case"PPPP":default:return rt.date({width:"full"})}},timeLongFormatter=function _e(et,rt){switch(et){case"p":return rt.time({width:"short"});case"pp":return rt.time({width:"medium"});case"ppp":return rt.time({width:"long"});case"pppp":default:return rt.time({width:"full"})}},dateTimeLongFormatter=function _e(et,rt){var nt=et.match(/(P+)(p+)?/)||[],ot=nt[1],it=nt[2];if(!it)return dateLongFormatter(et,rt);var st;switch(ot){case"P":st=rt.dateTime({width:"short"});break;case"PP":st=rt.dateTime({width:"medium"});break;case"PPP":st=rt.dateTime({width:"long"});break;case"PPPP":default:st=rt.dateTime({width:"full"});break}return st.replace("{{date}}",dateLongFormatter(ot,rt)).replace("{{time}}",timeLongFormatter(it,rt))},longFormatters$2={p:timeLongFormatter,P:dateTimeLongFormatter};const longFormatters$3=longFormatters$2;var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(_e){return protectedDayOfYearTokens.indexOf(_e)!==-1}function isProtectedWeekYearToken(_e){return protectedWeekYearTokens.indexOf(_e)!==-1}function throwProtectedError(_e,et,rt){if(_e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(et,"`) for formatting years to the input `").concat(rt,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(_e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(et,"`) for formatting years to the input `").concat(rt,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(_e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(et,"`) for formatting days of the month to the input `").concat(rt,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(_e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(et,"`) for formatting days of the month to the input `").concat(rt,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function _e(et,rt,nt){var ot,it=formatDistanceLocale[et];return typeof it=="string"?ot=it:rt===1?ot=it.one:ot=it.other.replace("{{count}}",rt.toString()),nt!=null&&nt.addSuffix?nt.comparison&&nt.comparison>0?"in "+ot:ot+" ago":ot};const formatDistance$1=formatDistance;function buildFormatLongFn(_e){return function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=et.width?String(et.width):_e.defaultWidth,nt=_e.formats[rt]||_e.formats[_e.defaultWidth];return nt}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function _e(et,rt,nt,ot){return formatRelativeLocale[et]};const formatRelative$1=formatRelative;function buildLocalizeFn(_e){return function(et,rt){var nt=rt!=null&&rt.context?String(rt.context):"standalone",ot;if(nt==="formatting"&&_e.formattingValues){var it=_e.defaultFormattingWidth||_e.defaultWidth,st=rt!=null&&rt.width?String(rt.width):it;ot=_e.formattingValues[st]||_e.formattingValues[it]}else{var at=_e.defaultWidth,lt=rt!=null&&rt.width?String(rt.width):_e.defaultWidth;ot=_e.values[lt]||_e.values[at]}var ct=_e.argumentCallback?_e.argumentCallback(et):et;return ot[ct]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function _e(et,rt){var nt=Number(et),ot=nt%100;if(ot>20||ot<10)switch(ot%10){case 1:return nt+"st";case 2:return nt+"nd";case 3:return nt+"rd"}return nt+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function _e(et){return et-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;function buildMatchFn(_e){return function(et){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=rt.width,ot=nt&&_e.matchPatterns[nt]||_e.matchPatterns[_e.defaultMatchWidth],it=et.match(ot);if(!it)return null;var st=it[0],at=nt&&_e.parsePatterns[nt]||_e.parsePatterns[_e.defaultParseWidth],lt=Array.isArray(at)?findIndex(at,function(ut){return ut.test(st)}):findKey(at,function(ut){return ut.test(st)}),ct;ct=_e.valueCallback?_e.valueCallback(lt):lt,ct=rt.valueCallback?rt.valueCallback(ct):ct;var pt=et.slice(st.length);return{value:ct,rest:pt}}}function findKey(_e,et){for(var rt in _e)if(_e.hasOwnProperty(rt)&&et(_e[rt]))return rt}function findIndex(_e,et){for(var rt=0;rt<_e.length;rt++)if(et(_e[rt]))return rt}function buildMatchPatternFn(_e){return function(et){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=et.match(_e.matchPattern);if(!nt)return null;var ot=nt[0],it=et.match(_e.parsePattern);if(!it)return null;var st=_e.valueCallback?_e.valueCallback(it[0]):it[0];st=rt.valueCallback?rt.valueCallback(st):st;var at=et.slice(ot.length);return{value:st,rest:at}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function _e(et){return parseInt(et,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function _e(et){return et+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale;var formattingTokensRegExp$1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp$1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp$1=/^'([^]*?)'?$/,doubleQuoteRegExp$1=/''/g,unescapedLatinCharacterRegExp$1=/[a-zA-Z]/;function format(_e,et,rt){var nt,ot,it,st,at,lt,ct,pt,ut,ht,ft,gt,vt,yt,mt,Et,bt,Ct;requiredArgs(2,arguments);var Tt=String(et),wt=getDefaultOptions(),Rt=(nt=(ot=rt==null?void 0:rt.locale)!==null&&ot!==void 0?ot:wt.locale)!==null&&nt!==void 0?nt:defaultLocale,It=toInteger((it=(st=(at=(lt=rt==null?void 0:rt.firstWeekContainsDate)!==null&&lt!==void 0?lt:rt==null||(ct=rt.locale)===null||ct===void 0||(pt=ct.options)===null||pt===void 0?void 0:pt.firstWeekContainsDate)!==null&&at!==void 0?at:wt.firstWeekContainsDate)!==null&&st!==void 0?st:(ut=wt.locale)===null||ut===void 0||(ht=ut.options)===null||ht===void 0?void 0:ht.firstWeekContainsDate)!==null&&it!==void 0?it:1);if(!(It>=1&&It<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var St=toInteger((ft=(gt=(vt=(yt=rt==null?void 0:rt.weekStartsOn)!==null&&yt!==void 0?yt:rt==null||(mt=rt.locale)===null||mt===void 0||(Et=mt.options)===null||Et===void 0?void 0:Et.weekStartsOn)!==null&&vt!==void 0?vt:wt.weekStartsOn)!==null&&gt!==void 0?gt:(bt=wt.locale)===null||bt===void 0||(Ct=bt.options)===null||Ct===void 0?void 0:Ct.weekStartsOn)!==null&&ft!==void 0?ft:0);if(!(St>=0&&St<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Rt.localize)throw new RangeError("locale must contain localize property");if(!Rt.formatLong)throw new RangeError("locale must contain formatLong property");var Pt=toDate(_e);if(!isValid(Pt))throw new RangeError("Invalid time value");var Ot=getTimezoneOffsetInMilliseconds(Pt),Ut=subMilliseconds(Pt,Ot),Bt={firstWeekContainsDate:It,weekStartsOn:St,locale:Rt,_originalDate:Pt},xt=Tt.match(longFormattingTokensRegExp$1).map(function(At){var Mt=At[0];if(Mt==="p"||Mt==="P"){var Nt=longFormatters$3[Mt];return Nt(At,Rt.formatLong)}return At}).join("").match(formattingTokensRegExp$1).map(function(At){if(At==="''")return"'";var Mt=At[0];if(Mt==="'")return cleanEscapedString$1(At);var Nt=formatters$2[Mt];if(Nt)return!(rt!=null&&rt.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(At)&&throwProtectedError(At,et,String(_e)),!(rt!=null&&rt.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(At)&&throwProtectedError(At,et,String(_e)),Nt(Ut,At,Rt.localize,Bt);if(Mt.match(unescapedLatinCharacterRegExp$1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Mt+"`");return At}).join("");return xt}function cleanEscapedString$1(_e){var et=_e.match(escapedStringRegExp$1);return et?et[1].replace(doubleQuoteRegExp$1,"'"):_e}function assign(_e,et){if(_e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var rt in et)Object.prototype.hasOwnProperty.call(et,rt)&&(_e[rt]=et[rt]);return _e}function formatISO(_e,et){var rt,nt;requiredArgs(1,arguments);var ot=toDate(_e);if(isNaN(ot.getTime()))throw new RangeError("Invalid time value");var it=String((rt=et==null?void 0:et.format)!==null&&rt!==void 0?rt:"extended"),st=String((nt=et==null?void 0:et.representation)!==null&&nt!==void 0?nt:"complete");if(it!=="extended"&&it!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(st!=="date"&&st!=="time"&&st!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var at="",lt="",ct=it==="extended"?"-":"",pt=it==="extended"?":":"";if(st!=="time"){var ut=addLeadingZeros(ot.getDate(),2),ht=addLeadingZeros(ot.getMonth()+1,2),ft=addLeadingZeros(ot.getFullYear(),4);at="".concat(ft).concat(ct).concat(ht).concat(ct).concat(ut)}if(st!=="date"){var gt=ot.getTimezoneOffset();if(gt!==0){var vt=Math.abs(gt),yt=addLeadingZeros(Math.floor(vt/60),2),mt=addLeadingZeros(vt%60,2),Et=gt<0?"+":"-";lt="".concat(Et).concat(yt,":").concat(mt)}else lt="Z";var bt=addLeadingZeros(ot.getHours(),2),Ct=addLeadingZeros(ot.getMinutes(),2),Tt=addLeadingZeros(ot.getSeconds(),2),wt=at===""?"":"T",Rt=[bt,Ct,Tt].join(pt);at="".concat(at).concat(wt).concat(Rt).concat(lt)}return at}function getDate(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getDate();return rt}function getDay(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getDay();return rt}function getDaysInMonth(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getFullYear(),nt=et.getMonth(),ot=new Date(0);return ot.setFullYear(rt,nt+1,0),ot.setHours(0,0,0,0),ot.getDate()}function getHours$1(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getHours();return rt}function getMinutes$1(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getMinutes();return rt}function getMonth(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getMonth();return rt}function getSeconds(_e){requiredArgs(1,arguments);var et=toDate(_e),rt=et.getSeconds();return rt}function getYear(_e){return requiredArgs(1,arguments),toDate(_e).getFullYear()}function isAfter(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getTime()>nt.getTime()}function isBefore(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getTime()<nt.getTime()}function isEqual(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getTime()===nt.getTime()}function _typeof$x(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$x=function(rt){return typeof rt}:_typeof$x=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$x(_e)}function _inherits$v(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$v(_e,et)}function _setPrototypeOf$v(_e,et){return _setPrototypeOf$v=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$v(_e,et)}function _createSuper$v(_e){var et=_isNativeReflectConstruct$v();return function(){var nt=_getPrototypeOf$v(_e),ot;if(et){var it=_getPrototypeOf$v(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$v(this,ot)}}function _possibleConstructorReturn$v(_e,et){return et&&(_typeof$x(et)==="object"||typeof et=="function")?et:_assertThisInitialized$v(_e)}function _assertThisInitialized$v(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$v(_e){return _getPrototypeOf$v=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$v(_e)}function _classCallCheck$w(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$w(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$w(_e,et,rt){return et&&_defineProperties$w(_e.prototype,et),rt&&_defineProperties$w(_e,rt),_e}function _defineProperty$w(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var TIMEZONE_UNIT_PRIORITY=10,Setter=function(){function _e(){_classCallCheck$w(this,_e),_defineProperty$w(this,"subPriority",0)}return _createClass$w(_e,[{key:"validate",value:function(rt,nt){return!0}}]),_e}(),ValueSetter=function(_e){_inherits$v(rt,_e);var et=_createSuper$v(rt);function rt(nt,ot,it,st,at){var lt;return _classCallCheck$w(this,rt),lt=et.call(this),lt.value=nt,lt.validateValue=ot,lt.setValue=it,lt.priority=st,at&&(lt.subPriority=at),lt}return _createClass$w(rt,[{key:"validate",value:function(ot,it){return this.validateValue(ot,this.value,it)}},{key:"set",value:function(ot,it,st){return this.setValue(ot,it,this.value,st)}}]),rt}(Setter),DateToSystemTimezoneSetter=function(_e){_inherits$v(rt,_e);var et=_createSuper$v(rt);function rt(){var nt;_classCallCheck$w(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$w(_assertThisInitialized$v(nt),"priority",TIMEZONE_UNIT_PRIORITY),_defineProperty$w(_assertThisInitialized$v(nt),"subPriority",-1),nt}return _createClass$w(rt,[{key:"set",value:function(ot,it){if(it.timestampIsSet)return ot;var st=new Date(0);return st.setFullYear(ot.getUTCFullYear(),ot.getUTCMonth(),ot.getUTCDate()),st.setHours(ot.getUTCHours(),ot.getUTCMinutes(),ot.getUTCSeconds(),ot.getUTCMilliseconds()),st}}]),rt}(Setter);function _classCallCheck$v(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$v(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$v(_e,et,rt){return et&&_defineProperties$v(_e.prototype,et),rt&&_defineProperties$v(_e,rt),_e}var Parser=function(){function _e(){_classCallCheck$v(this,_e)}return _createClass$v(_e,[{key:"run",value:function(rt,nt,ot,it){var st=this.parse(rt,nt,ot,it);return st?{setter:new ValueSetter(st.value,this.validate,this.set,this.priority,this.subPriority),rest:st.rest}:null}},{key:"validate",value:function(rt,nt,ot){return!0}}]),_e}();function _typeof$w(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$w=function(rt){return typeof rt}:_typeof$w=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$w(_e)}function _classCallCheck$u(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$u(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$u(_e,et,rt){return et&&_defineProperties$u(_e.prototype,et),rt&&_defineProperties$u(_e,rt),_e}function _inherits$u(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$u(_e,et)}function _setPrototypeOf$u(_e,et){return _setPrototypeOf$u=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$u(_e,et)}function _createSuper$u(_e){var et=_isNativeReflectConstruct$u();return function(){var nt=_getPrototypeOf$u(_e),ot;if(et){var it=_getPrototypeOf$u(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$u(this,ot)}}function _possibleConstructorReturn$u(_e,et){return et&&(_typeof$w(et)==="object"||typeof et=="function")?et:_assertThisInitialized$u(_e)}function _assertThisInitialized$u(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$u(_e){return _getPrototypeOf$u=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$u(_e)}function _defineProperty$v(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var EraParser=function(_e){_inherits$u(rt,_e);var et=_createSuper$u(rt);function rt(){var nt;_classCallCheck$u(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$v(_assertThisInitialized$u(nt),"priority",140),_defineProperty$v(_assertThisInitialized$u(nt),"incompatibleTokens",["R","u","t","T"]),nt}return _createClass$u(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"G":case"GG":case"GGG":return st.era(ot,{width:"abbreviated"})||st.era(ot,{width:"narrow"});case"GGGGG":return st.era(ot,{width:"narrow"});case"GGGG":default:return st.era(ot,{width:"wide"})||st.era(ot,{width:"abbreviated"})||st.era(ot,{width:"narrow"})}}},{key:"set",value:function(ot,it,st){return it.era=st,ot.setUTCFullYear(st,0,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser),numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(_e,et){return _e&&{value:et(_e.value),rest:_e.rest}}function parseNumericPattern(_e,et){var rt=et.match(_e);return rt?{value:parseInt(rt[0],10),rest:et.slice(rt[0].length)}:null}function parseTimezonePattern(_e,et){var rt=et.match(_e);if(!rt)return null;if(rt[0]==="Z")return{value:0,rest:et.slice(1)};var nt=rt[1]==="+"?1:-1,ot=rt[2]?parseInt(rt[2],10):0,it=rt[3]?parseInt(rt[3],10):0,st=rt[5]?parseInt(rt[5],10):0;return{value:nt*(ot*millisecondsInHour+it*millisecondsInMinute+st*millisecondsInSecond),rest:et.slice(rt[0].length)}}function parseAnyDigitsSigned(_e){return parseNumericPattern(numericPatterns.anyDigitsSigned,_e)}function parseNDigits(_e,et){switch(_e){case 1:return parseNumericPattern(numericPatterns.singleDigit,et);case 2:return parseNumericPattern(numericPatterns.twoDigits,et);case 3:return parseNumericPattern(numericPatterns.threeDigits,et);case 4:return parseNumericPattern(numericPatterns.fourDigits,et);default:return parseNumericPattern(new RegExp("^\\d{1,"+_e+"}"),et)}}function parseNDigitsSigned(_e,et){switch(_e){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,et);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,et);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,et);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,et);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+_e+"}"),et)}}function dayPeriodEnumToHours(_e){switch(_e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(_e,et){var rt=et>0,nt=rt?et:1-et,ot;if(nt<=50)ot=_e||100;else{var it=nt+50,st=Math.floor(it/100)*100,at=_e>=it%100;ot=_e+st-(at?100:0)}return rt?ot:1-ot}function isLeapYearIndex$1(_e){return _e%400===0||_e%4===0&&_e%100!==0}function _typeof$v(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$v=function(rt){return typeof rt}:_typeof$v=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$v(_e)}function _classCallCheck$t(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$t(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$t(_e,et,rt){return et&&_defineProperties$t(_e.prototype,et),rt&&_defineProperties$t(_e,rt),_e}function _inherits$t(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$t(_e,et)}function _setPrototypeOf$t(_e,et){return _setPrototypeOf$t=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$t(_e,et)}function _createSuper$t(_e){var et=_isNativeReflectConstruct$t();return function(){var nt=_getPrototypeOf$t(_e),ot;if(et){var it=_getPrototypeOf$t(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$t(this,ot)}}function _possibleConstructorReturn$t(_e,et){return et&&(_typeof$v(et)==="object"||typeof et=="function")?et:_assertThisInitialized$t(_e)}function _assertThisInitialized$t(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$t(_e){return _getPrototypeOf$t=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$t(_e)}function _defineProperty$u(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var YearParser=function(_e){_inherits$t(rt,_e);var et=_createSuper$t(rt);function rt(){var nt;_classCallCheck$t(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$u(_assertThisInitialized$t(nt),"priority",130),_defineProperty$u(_assertThisInitialized$t(nt),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),nt}return _createClass$t(rt,[{key:"parse",value:function(ot,it,st){var at=function(ct){return{year:ct,isTwoDigitYear:it==="yy"}};switch(it){case"y":return mapValue(parseNDigits(4,ot),at);case"yo":return mapValue(st.ordinalNumber(ot,{unit:"year"}),at);default:return mapValue(parseNDigits(it.length,ot),at)}}},{key:"validate",value:function(ot,it){return it.isTwoDigitYear||it.year>0}},{key:"set",value:function(ot,it,st){var at=ot.getUTCFullYear();if(st.isTwoDigitYear){var lt=normalizeTwoDigitYear(st.year,at);return ot.setUTCFullYear(lt,0,1),ot.setUTCHours(0,0,0,0),ot}var ct=!("era"in it)||it.era===1?st.year:1-st.year;return ot.setUTCFullYear(ct,0,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$u(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$u=function(rt){return typeof rt}:_typeof$u=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$u(_e)}function _classCallCheck$s(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$s(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$s(_e,et,rt){return et&&_defineProperties$s(_e.prototype,et),rt&&_defineProperties$s(_e,rt),_e}function _inherits$s(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$s(_e,et)}function _setPrototypeOf$s(_e,et){return _setPrototypeOf$s=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$s(_e,et)}function _createSuper$s(_e){var et=_isNativeReflectConstruct$s();return function(){var nt=_getPrototypeOf$s(_e),ot;if(et){var it=_getPrototypeOf$s(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$s(this,ot)}}function _possibleConstructorReturn$s(_e,et){return et&&(_typeof$u(et)==="object"||typeof et=="function")?et:_assertThisInitialized$s(_e)}function _assertThisInitialized$s(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$s(_e){return _getPrototypeOf$s=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$s(_e)}function _defineProperty$t(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var LocalWeekYearParser=function(_e){_inherits$s(rt,_e);var et=_createSuper$s(rt);function rt(){var nt;_classCallCheck$s(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$t(_assertThisInitialized$s(nt),"priority",130),_defineProperty$t(_assertThisInitialized$s(nt),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),nt}return _createClass$s(rt,[{key:"parse",value:function(ot,it,st){var at=function(ct){return{year:ct,isTwoDigitYear:it==="YY"}};switch(it){case"Y":return mapValue(parseNDigits(4,ot),at);case"Yo":return mapValue(st.ordinalNumber(ot,{unit:"year"}),at);default:return mapValue(parseNDigits(it.length,ot),at)}}},{key:"validate",value:function(ot,it){return it.isTwoDigitYear||it.year>0}},{key:"set",value:function(ot,it,st,at){var lt=getUTCWeekYear(ot,at);if(st.isTwoDigitYear){var ct=normalizeTwoDigitYear(st.year,lt);return ot.setUTCFullYear(ct,0,at.firstWeekContainsDate),ot.setUTCHours(0,0,0,0),startOfUTCWeek(ot,at)}var pt=!("era"in it)||it.era===1?st.year:1-st.year;return ot.setUTCFullYear(pt,0,at.firstWeekContainsDate),ot.setUTCHours(0,0,0,0),startOfUTCWeek(ot,at)}}]),rt}(Parser);function _typeof$t(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$t=function(rt){return typeof rt}:_typeof$t=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$t(_e)}function _classCallCheck$r(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$r(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$r(_e,et,rt){return et&&_defineProperties$r(_e.prototype,et),rt&&_defineProperties$r(_e,rt),_e}function _inherits$r(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$r(_e,et)}function _setPrototypeOf$r(_e,et){return _setPrototypeOf$r=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$r(_e,et)}function _createSuper$r(_e){var et=_isNativeReflectConstruct$r();return function(){var nt=_getPrototypeOf$r(_e),ot;if(et){var it=_getPrototypeOf$r(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$r(this,ot)}}function _possibleConstructorReturn$r(_e,et){return et&&(_typeof$t(et)==="object"||typeof et=="function")?et:_assertThisInitialized$r(_e)}function _assertThisInitialized$r(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$r(_e){return _getPrototypeOf$r=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$r(_e)}function _defineProperty$s(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ISOWeekYearParser=function(_e){_inherits$r(rt,_e);var et=_createSuper$r(rt);function rt(){var nt;_classCallCheck$r(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$s(_assertThisInitialized$r(nt),"priority",130),_defineProperty$s(_assertThisInitialized$r(nt),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),nt}return _createClass$r(rt,[{key:"parse",value:function(ot,it){return parseNDigitsSigned(it==="R"?4:it.length,ot)}},{key:"set",value:function(ot,it,st){var at=new Date(0);return at.setUTCFullYear(st,0,4),at.setUTCHours(0,0,0,0),startOfUTCISOWeek(at)}}]),rt}(Parser);function _typeof$s(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$s=function(rt){return typeof rt}:_typeof$s=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$s(_e)}function _classCallCheck$q(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$q(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$q(_e,et,rt){return et&&_defineProperties$q(_e.prototype,et),rt&&_defineProperties$q(_e,rt),_e}function _inherits$q(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$q(_e,et)}function _setPrototypeOf$q(_e,et){return _setPrototypeOf$q=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$q(_e,et)}function _createSuper$q(_e){var et=_isNativeReflectConstruct$q();return function(){var nt=_getPrototypeOf$q(_e),ot;if(et){var it=_getPrototypeOf$q(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$q(this,ot)}}function _possibleConstructorReturn$q(_e,et){return et&&(_typeof$s(et)==="object"||typeof et=="function")?et:_assertThisInitialized$q(_e)}function _assertThisInitialized$q(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$q(_e){return _getPrototypeOf$q=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$q(_e)}function _defineProperty$r(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ExtendedYearParser=function(_e){_inherits$q(rt,_e);var et=_createSuper$q(rt);function rt(){var nt;_classCallCheck$q(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$r(_assertThisInitialized$q(nt),"priority",130),_defineProperty$r(_assertThisInitialized$q(nt),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),nt}return _createClass$q(rt,[{key:"parse",value:function(ot,it){return parseNDigitsSigned(it==="u"?4:it.length,ot)}},{key:"set",value:function(ot,it,st){return ot.setUTCFullYear(st,0,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$r(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$r=function(rt){return typeof rt}:_typeof$r=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$r(_e)}function _classCallCheck$p(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$p(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$p(_e,et,rt){return et&&_defineProperties$p(_e.prototype,et),rt&&_defineProperties$p(_e,rt),_e}function _inherits$p(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$p(_e,et)}function _setPrototypeOf$p(_e,et){return _setPrototypeOf$p=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$p(_e,et)}function _createSuper$p(_e){var et=_isNativeReflectConstruct$p();return function(){var nt=_getPrototypeOf$p(_e),ot;if(et){var it=_getPrototypeOf$p(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$p(this,ot)}}function _possibleConstructorReturn$p(_e,et){return et&&(_typeof$r(et)==="object"||typeof et=="function")?et:_assertThisInitialized$p(_e)}function _assertThisInitialized$p(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$p(_e){return _getPrototypeOf$p=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$p(_e)}function _defineProperty$q(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var QuarterParser=function(_e){_inherits$p(rt,_e);var et=_createSuper$p(rt);function rt(){var nt;_classCallCheck$p(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$q(_assertThisInitialized$p(nt),"priority",120),_defineProperty$q(_assertThisInitialized$p(nt),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),nt}return _createClass$p(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"Q":case"QQ":return parseNDigits(it.length,ot);case"Qo":return st.ordinalNumber(ot,{unit:"quarter"});case"QQQ":return st.quarter(ot,{width:"abbreviated",context:"formatting"})||st.quarter(ot,{width:"narrow",context:"formatting"});case"QQQQQ":return st.quarter(ot,{width:"narrow",context:"formatting"});case"QQQQ":default:return st.quarter(ot,{width:"wide",context:"formatting"})||st.quarter(ot,{width:"abbreviated",context:"formatting"})||st.quarter(ot,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(ot,it){return it>=1&&it<=4}},{key:"set",value:function(ot,it,st){return ot.setUTCMonth((st-1)*3,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$q(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$q=function(rt){return typeof rt}:_typeof$q=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$q(_e)}function _classCallCheck$o(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$o(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$o(_e,et,rt){return et&&_defineProperties$o(_e.prototype,et),rt&&_defineProperties$o(_e,rt),_e}function _inherits$o(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$o(_e,et)}function _setPrototypeOf$o(_e,et){return _setPrototypeOf$o=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$o(_e,et)}function _createSuper$o(_e){var et=_isNativeReflectConstruct$o();return function(){var nt=_getPrototypeOf$o(_e),ot;if(et){var it=_getPrototypeOf$o(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$o(this,ot)}}function _possibleConstructorReturn$o(_e,et){return et&&(_typeof$q(et)==="object"||typeof et=="function")?et:_assertThisInitialized$o(_e)}function _assertThisInitialized$o(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$o(_e){return _getPrototypeOf$o=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$o(_e)}function _defineProperty$p(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var StandAloneQuarterParser=function(_e){_inherits$o(rt,_e);var et=_createSuper$o(rt);function rt(){var nt;_classCallCheck$o(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$p(_assertThisInitialized$o(nt),"priority",120),_defineProperty$p(_assertThisInitialized$o(nt),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),nt}return _createClass$o(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"q":case"qq":return parseNDigits(it.length,ot);case"qo":return st.ordinalNumber(ot,{unit:"quarter"});case"qqq":return st.quarter(ot,{width:"abbreviated",context:"standalone"})||st.quarter(ot,{width:"narrow",context:"standalone"});case"qqqqq":return st.quarter(ot,{width:"narrow",context:"standalone"});case"qqqq":default:return st.quarter(ot,{width:"wide",context:"standalone"})||st.quarter(ot,{width:"abbreviated",context:"standalone"})||st.quarter(ot,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(ot,it){return it>=1&&it<=4}},{key:"set",value:function(ot,it,st){return ot.setUTCMonth((st-1)*3,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$p(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$p=function(rt){return typeof rt}:_typeof$p=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$p(_e)}function _classCallCheck$n(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$n(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$n(_e,et,rt){return et&&_defineProperties$n(_e.prototype,et),rt&&_defineProperties$n(_e,rt),_e}function _inherits$n(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$n(_e,et)}function _setPrototypeOf$n(_e,et){return _setPrototypeOf$n=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$n(_e,et)}function _createSuper$n(_e){var et=_isNativeReflectConstruct$n();return function(){var nt=_getPrototypeOf$n(_e),ot;if(et){var it=_getPrototypeOf$n(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$n(this,ot)}}function _possibleConstructorReturn$n(_e,et){return et&&(_typeof$p(et)==="object"||typeof et=="function")?et:_assertThisInitialized$n(_e)}function _assertThisInitialized$n(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$n(_e){return _getPrototypeOf$n=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$n(_e)}function _defineProperty$o(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var MonthParser=function(_e){_inherits$n(rt,_e);var et=_createSuper$n(rt);function rt(){var nt;_classCallCheck$n(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$o(_assertThisInitialized$n(nt),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty$o(_assertThisInitialized$n(nt),"priority",110),nt}return _createClass$n(rt,[{key:"parse",value:function(ot,it,st){var at=function(ct){return ct-1};switch(it){case"M":return mapValue(parseNumericPattern(numericPatterns.month,ot),at);case"MM":return mapValue(parseNDigits(2,ot),at);case"Mo":return mapValue(st.ordinalNumber(ot,{unit:"month"}),at);case"MMM":return st.month(ot,{width:"abbreviated",context:"formatting"})||st.month(ot,{width:"narrow",context:"formatting"});case"MMMMM":return st.month(ot,{width:"narrow",context:"formatting"});case"MMMM":default:return st.month(ot,{width:"wide",context:"formatting"})||st.month(ot,{width:"abbreviated",context:"formatting"})||st.month(ot,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(ot,it){return it>=0&&it<=11}},{key:"set",value:function(ot,it,st){return ot.setUTCMonth(st,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$o(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$o=function(rt){return typeof rt}:_typeof$o=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$o(_e)}function _classCallCheck$m(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$m(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$m(_e,et,rt){return et&&_defineProperties$m(_e.prototype,et),rt&&_defineProperties$m(_e,rt),_e}function _inherits$m(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$m(_e,et)}function _setPrototypeOf$m(_e,et){return _setPrototypeOf$m=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$m(_e,et)}function _createSuper$m(_e){var et=_isNativeReflectConstruct$m();return function(){var nt=_getPrototypeOf$m(_e),ot;if(et){var it=_getPrototypeOf$m(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$m(this,ot)}}function _possibleConstructorReturn$m(_e,et){return et&&(_typeof$o(et)==="object"||typeof et=="function")?et:_assertThisInitialized$m(_e)}function _assertThisInitialized$m(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$m(_e){return _getPrototypeOf$m=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$m(_e)}function _defineProperty$n(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var StandAloneMonthParser=function(_e){_inherits$m(rt,_e);var et=_createSuper$m(rt);function rt(){var nt;_classCallCheck$m(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$n(_assertThisInitialized$m(nt),"priority",110),_defineProperty$n(_assertThisInitialized$m(nt),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),nt}return _createClass$m(rt,[{key:"parse",value:function(ot,it,st){var at=function(ct){return ct-1};switch(it){case"L":return mapValue(parseNumericPattern(numericPatterns.month,ot),at);case"LL":return mapValue(parseNDigits(2,ot),at);case"Lo":return mapValue(st.ordinalNumber(ot,{unit:"month"}),at);case"LLL":return st.month(ot,{width:"abbreviated",context:"standalone"})||st.month(ot,{width:"narrow",context:"standalone"});case"LLLLL":return st.month(ot,{width:"narrow",context:"standalone"});case"LLLL":default:return st.month(ot,{width:"wide",context:"standalone"})||st.month(ot,{width:"abbreviated",context:"standalone"})||st.month(ot,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(ot,it){return it>=0&&it<=11}},{key:"set",value:function(ot,it,st){return ot.setUTCMonth(st,1),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function setUTCWeek(_e,et,rt){requiredArgs(2,arguments);var nt=toDate(_e),ot=toInteger(et),it=getUTCWeek(nt,rt)-ot;return nt.setUTCDate(nt.getUTCDate()-it*7),nt}function _typeof$n(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$n=function(rt){return typeof rt}:_typeof$n=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$n(_e)}function _classCallCheck$l(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$l(_e,et,rt){return et&&_defineProperties$l(_e.prototype,et),rt&&_defineProperties$l(_e,rt),_e}function _inherits$l(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$l(_e,et)}function _setPrototypeOf$l(_e,et){return _setPrototypeOf$l=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$l(_e,et)}function _createSuper$l(_e){var et=_isNativeReflectConstruct$l();return function(){var nt=_getPrototypeOf$l(_e),ot;if(et){var it=_getPrototypeOf$l(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$l(this,ot)}}function _possibleConstructorReturn$l(_e,et){return et&&(_typeof$n(et)==="object"||typeof et=="function")?et:_assertThisInitialized$l(_e)}function _assertThisInitialized$l(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$l(_e){return _getPrototypeOf$l=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$l(_e)}function _defineProperty$m(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var LocalWeekParser=function(_e){_inherits$l(rt,_e);var et=_createSuper$l(rt);function rt(){var nt;_classCallCheck$l(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$m(_assertThisInitialized$l(nt),"priority",100),_defineProperty$m(_assertThisInitialized$l(nt),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),nt}return _createClass$l(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"w":return parseNumericPattern(numericPatterns.week,ot);case"wo":return st.ordinalNumber(ot,{unit:"week"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=1&&it<=53}},{key:"set",value:function(ot,it,st,at){return startOfUTCWeek(setUTCWeek(ot,st,at),at)}}]),rt}(Parser);function setUTCISOWeek(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et),ot=getUTCISOWeek(rt)-nt;return rt.setUTCDate(rt.getUTCDate()-ot*7),rt}function _typeof$m(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$m=function(rt){return typeof rt}:_typeof$m=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$m(_e)}function _classCallCheck$k(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$k(_e,et,rt){return et&&_defineProperties$k(_e.prototype,et),rt&&_defineProperties$k(_e,rt),_e}function _inherits$k(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$k(_e,et)}function _setPrototypeOf$k(_e,et){return _setPrototypeOf$k=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$k(_e,et)}function _createSuper$k(_e){var et=_isNativeReflectConstruct$k();return function(){var nt=_getPrototypeOf$k(_e),ot;if(et){var it=_getPrototypeOf$k(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$k(this,ot)}}function _possibleConstructorReturn$k(_e,et){return et&&(_typeof$m(et)==="object"||typeof et=="function")?et:_assertThisInitialized$k(_e)}function _assertThisInitialized$k(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$k(_e){return _getPrototypeOf$k=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$k(_e)}function _defineProperty$l(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ISOWeekParser=function(_e){_inherits$k(rt,_e);var et=_createSuper$k(rt);function rt(){var nt;_classCallCheck$k(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$l(_assertThisInitialized$k(nt),"priority",100),_defineProperty$l(_assertThisInitialized$k(nt),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),nt}return _createClass$k(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"I":return parseNumericPattern(numericPatterns.week,ot);case"Io":return st.ordinalNumber(ot,{unit:"week"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=1&&it<=53}},{key:"set",value:function(ot,it,st){return startOfUTCISOWeek(setUTCISOWeek(ot,st))}}]),rt}(Parser);function _typeof$l(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$l=function(rt){return typeof rt}:_typeof$l=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$l(_e)}function _classCallCheck$j(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$j(_e,et,rt){return et&&_defineProperties$j(_e.prototype,et),rt&&_defineProperties$j(_e,rt),_e}function _inherits$j(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$j(_e,et)}function _setPrototypeOf$j(_e,et){return _setPrototypeOf$j=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$j(_e,et)}function _createSuper$j(_e){var et=_isNativeReflectConstruct$j();return function(){var nt=_getPrototypeOf$j(_e),ot;if(et){var it=_getPrototypeOf$j(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$j(this,ot)}}function _possibleConstructorReturn$j(_e,et){return et&&(_typeof$l(et)==="object"||typeof et=="function")?et:_assertThisInitialized$j(_e)}function _assertThisInitialized$j(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$j(_e){return _getPrototypeOf$j=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$j(_e)}function _defineProperty$k(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(_e){_inherits$j(rt,_e);var et=_createSuper$j(rt);function rt(){var nt;_classCallCheck$j(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$k(_assertThisInitialized$j(nt),"priority",90),_defineProperty$k(_assertThisInitialized$j(nt),"subPriority",1),_defineProperty$k(_assertThisInitialized$j(nt),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),nt}return _createClass$j(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"d":return parseNumericPattern(numericPatterns.date,ot);case"do":return st.ordinalNumber(ot,{unit:"date"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){var st=ot.getUTCFullYear(),at=isLeapYearIndex$1(st),lt=ot.getUTCMonth();return at?it>=1&&it<=DAYS_IN_MONTH_LEAP_YEAR[lt]:it>=1&&it<=DAYS_IN_MONTH[lt]}},{key:"set",value:function(ot,it,st){return ot.setUTCDate(st),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$k(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$k=function(rt){return typeof rt}:_typeof$k=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$k(_e)}function _classCallCheck$i(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$i(_e,et,rt){return et&&_defineProperties$i(_e.prototype,et),rt&&_defineProperties$i(_e,rt),_e}function _inherits$i(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$i(_e,et)}function _setPrototypeOf$i(_e,et){return _setPrototypeOf$i=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$i(_e,et)}function _createSuper$i(_e){var et=_isNativeReflectConstruct$i();return function(){var nt=_getPrototypeOf$i(_e),ot;if(et){var it=_getPrototypeOf$i(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$i(this,ot)}}function _possibleConstructorReturn$i(_e,et){return et&&(_typeof$k(et)==="object"||typeof et=="function")?et:_assertThisInitialized$i(_e)}function _assertThisInitialized$i(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$i(_e){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$i(_e)}function _defineProperty$j(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var DayOfYearParser=function(_e){_inherits$i(rt,_e);var et=_createSuper$i(rt);function rt(){var nt;_classCallCheck$i(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$j(_assertThisInitialized$i(nt),"priority",90),_defineProperty$j(_assertThisInitialized$i(nt),"subpriority",1),_defineProperty$j(_assertThisInitialized$i(nt),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),nt}return _createClass$i(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,ot);case"Do":return st.ordinalNumber(ot,{unit:"date"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){var st=ot.getUTCFullYear(),at=isLeapYearIndex$1(st);return at?it>=1&&it<=366:it>=1&&it<=365}},{key:"set",value:function(ot,it,st){return ot.setUTCMonth(0,st),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function setUTCDay(_e,et,rt){var nt,ot,it,st,at,lt,ct,pt;requiredArgs(2,arguments);var ut=getDefaultOptions(),ht=toInteger((nt=(ot=(it=(st=rt==null?void 0:rt.weekStartsOn)!==null&&st!==void 0?st:rt==null||(at=rt.locale)===null||at===void 0||(lt=at.options)===null||lt===void 0?void 0:lt.weekStartsOn)!==null&&it!==void 0?it:ut.weekStartsOn)!==null&&ot!==void 0?ot:(ct=ut.locale)===null||ct===void 0||(pt=ct.options)===null||pt===void 0?void 0:pt.weekStartsOn)!==null&&nt!==void 0?nt:0);if(!(ht>=0&&ht<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ft=toDate(_e),gt=toInteger(et),vt=ft.getUTCDay(),yt=gt%7,mt=(yt+7)%7,Et=(mt<ht?7:0)+gt-vt;return ft.setUTCDate(ft.getUTCDate()+Et),ft}function _typeof$j(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$j=function(rt){return typeof rt}:_typeof$j=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$j(_e)}function _classCallCheck$h(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$h(_e,et,rt){return et&&_defineProperties$h(_e.prototype,et),rt&&_defineProperties$h(_e,rt),_e}function _inherits$h(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$h(_e,et)}function _setPrototypeOf$h(_e,et){return _setPrototypeOf$h=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$h(_e,et)}function _createSuper$h(_e){var et=_isNativeReflectConstruct$h();return function(){var nt=_getPrototypeOf$h(_e),ot;if(et){var it=_getPrototypeOf$h(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$h(this,ot)}}function _possibleConstructorReturn$h(_e,et){return et&&(_typeof$j(et)==="object"||typeof et=="function")?et:_assertThisInitialized$h(_e)}function _assertThisInitialized$h(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$h(_e){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$h(_e)}function _defineProperty$i(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var DayParser=function(_e){_inherits$h(rt,_e);var et=_createSuper$h(rt);function rt(){var nt;_classCallCheck$h(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$i(_assertThisInitialized$h(nt),"priority",90),_defineProperty$i(_assertThisInitialized$h(nt),"incompatibleTokens",["D","i","e","c","t","T"]),nt}return _createClass$h(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"E":case"EE":case"EEE":return st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"});case"EEEEE":return st.day(ot,{width:"narrow",context:"formatting"});case"EEEEEE":return st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"});case"EEEE":default:return st.day(ot,{width:"wide",context:"formatting"})||st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(ot,it){return it>=0&&it<=6}},{key:"set",value:function(ot,it,st,at){return ot=setUTCDay(ot,st,at),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$i(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$i=function(rt){return typeof rt}:_typeof$i=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$i(_e)}function _classCallCheck$g(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$g(_e,et,rt){return et&&_defineProperties$g(_e.prototype,et),rt&&_defineProperties$g(_e,rt),_e}function _inherits$g(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$g(_e,et)}function _setPrototypeOf$g(_e,et){return _setPrototypeOf$g=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$g(_e,et)}function _createSuper$g(_e){var et=_isNativeReflectConstruct$g();return function(){var nt=_getPrototypeOf$g(_e),ot;if(et){var it=_getPrototypeOf$g(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$g(this,ot)}}function _possibleConstructorReturn$g(_e,et){return et&&(_typeof$i(et)==="object"||typeof et=="function")?et:_assertThisInitialized$g(_e)}function _assertThisInitialized$g(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$g(_e){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$g(_e)}function _defineProperty$h(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var LocalDayParser=function(_e){_inherits$g(rt,_e);var et=_createSuper$g(rt);function rt(){var nt;_classCallCheck$g(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$h(_assertThisInitialized$g(nt),"priority",90),_defineProperty$h(_assertThisInitialized$g(nt),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),nt}return _createClass$g(rt,[{key:"parse",value:function(ot,it,st,at){var lt=function(pt){var ut=Math.floor((pt-1)/7)*7;return(pt+at.weekStartsOn+6)%7+ut};switch(it){case"e":case"ee":return mapValue(parseNDigits(it.length,ot),lt);case"eo":return mapValue(st.ordinalNumber(ot,{unit:"day"}),lt);case"eee":return st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"});case"eeeee":return st.day(ot,{width:"narrow",context:"formatting"});case"eeeeee":return st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"});case"eeee":default:return st.day(ot,{width:"wide",context:"formatting"})||st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(ot,it){return it>=0&&it<=6}},{key:"set",value:function(ot,it,st,at){return ot=setUTCDay(ot,st,at),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$h(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$h=function(rt){return typeof rt}:_typeof$h=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$h(_e)}function _classCallCheck$f(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$f(_e,et,rt){return et&&_defineProperties$f(_e.prototype,et),rt&&_defineProperties$f(_e,rt),_e}function _inherits$f(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$f(_e,et)}function _setPrototypeOf$f(_e,et){return _setPrototypeOf$f=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$f(_e,et)}function _createSuper$f(_e){var et=_isNativeReflectConstruct$f();return function(){var nt=_getPrototypeOf$f(_e),ot;if(et){var it=_getPrototypeOf$f(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$f(this,ot)}}function _possibleConstructorReturn$f(_e,et){return et&&(_typeof$h(et)==="object"||typeof et=="function")?et:_assertThisInitialized$f(_e)}function _assertThisInitialized$f(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$f(_e){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$f(_e)}function _defineProperty$g(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var StandAloneLocalDayParser=function(_e){_inherits$f(rt,_e);var et=_createSuper$f(rt);function rt(){var nt;_classCallCheck$f(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$g(_assertThisInitialized$f(nt),"priority",90),_defineProperty$g(_assertThisInitialized$f(nt),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),nt}return _createClass$f(rt,[{key:"parse",value:function(ot,it,st,at){var lt=function(pt){var ut=Math.floor((pt-1)/7)*7;return(pt+at.weekStartsOn+6)%7+ut};switch(it){case"c":case"cc":return mapValue(parseNDigits(it.length,ot),lt);case"co":return mapValue(st.ordinalNumber(ot,{unit:"day"}),lt);case"ccc":return st.day(ot,{width:"abbreviated",context:"standalone"})||st.day(ot,{width:"short",context:"standalone"})||st.day(ot,{width:"narrow",context:"standalone"});case"ccccc":return st.day(ot,{width:"narrow",context:"standalone"});case"cccccc":return st.day(ot,{width:"short",context:"standalone"})||st.day(ot,{width:"narrow",context:"standalone"});case"cccc":default:return st.day(ot,{width:"wide",context:"standalone"})||st.day(ot,{width:"abbreviated",context:"standalone"})||st.day(ot,{width:"short",context:"standalone"})||st.day(ot,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(ot,it){return it>=0&&it<=6}},{key:"set",value:function(ot,it,st,at){return ot=setUTCDay(ot,st,at),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function setUTCISODay(_e,et){requiredArgs(2,arguments);var rt=toInteger(et);rt%7===0&&(rt=rt-7);var nt=1,ot=toDate(_e),it=ot.getUTCDay(),st=rt%7,at=(st+7)%7,lt=(at<nt?7:0)+rt-it;return ot.setUTCDate(ot.getUTCDate()+lt),ot}function _typeof$g(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$g=function(rt){return typeof rt}:_typeof$g=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$g(_e)}function _classCallCheck$e(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$e(_e,et,rt){return et&&_defineProperties$e(_e.prototype,et),rt&&_defineProperties$e(_e,rt),_e}function _inherits$e(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$e(_e,et)}function _setPrototypeOf$e(_e,et){return _setPrototypeOf$e=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$e(_e,et)}function _createSuper$e(_e){var et=_isNativeReflectConstruct$e();return function(){var nt=_getPrototypeOf$e(_e),ot;if(et){var it=_getPrototypeOf$e(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$e(this,ot)}}function _possibleConstructorReturn$e(_e,et){return et&&(_typeof$g(et)==="object"||typeof et=="function")?et:_assertThisInitialized$e(_e)}function _assertThisInitialized$e(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$e(_e){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$e(_e)}function _defineProperty$f(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ISODayParser=function(_e){_inherits$e(rt,_e);var et=_createSuper$e(rt);function rt(){var nt;_classCallCheck$e(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$f(_assertThisInitialized$e(nt),"priority",90),_defineProperty$f(_assertThisInitialized$e(nt),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),nt}return _createClass$e(rt,[{key:"parse",value:function(ot,it,st){var at=function(ct){return ct===0?7:ct};switch(it){case"i":case"ii":return parseNDigits(it.length,ot);case"io":return st.ordinalNumber(ot,{unit:"day"});case"iii":return mapValue(st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"}),at);case"iiiii":return mapValue(st.day(ot,{width:"narrow",context:"formatting"}),at);case"iiiiii":return mapValue(st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"}),at);case"iiii":default:return mapValue(st.day(ot,{width:"wide",context:"formatting"})||st.day(ot,{width:"abbreviated",context:"formatting"})||st.day(ot,{width:"short",context:"formatting"})||st.day(ot,{width:"narrow",context:"formatting"}),at)}}},{key:"validate",value:function(ot,it){return it>=1&&it<=7}},{key:"set",value:function(ot,it,st){return ot=setUTCISODay(ot,st),ot.setUTCHours(0,0,0,0),ot}}]),rt}(Parser);function _typeof$f(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$f=function(rt){return typeof rt}:_typeof$f=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$f(_e)}function _classCallCheck$d(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$d(_e,et,rt){return et&&_defineProperties$d(_e.prototype,et),rt&&_defineProperties$d(_e,rt),_e}function _inherits$d(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$d(_e,et)}function _setPrototypeOf$d(_e,et){return _setPrototypeOf$d=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$d(_e,et)}function _createSuper$d(_e){var et=_isNativeReflectConstruct$d();return function(){var nt=_getPrototypeOf$d(_e),ot;if(et){var it=_getPrototypeOf$d(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$d(this,ot)}}function _possibleConstructorReturn$d(_e,et){return et&&(_typeof$f(et)==="object"||typeof et=="function")?et:_assertThisInitialized$d(_e)}function _assertThisInitialized$d(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$d(_e){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$d(_e)}function _defineProperty$e(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var AMPMParser=function(_e){_inherits$d(rt,_e);var et=_createSuper$d(rt);function rt(){var nt;_classCallCheck$d(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$e(_assertThisInitialized$d(nt),"priority",80),_defineProperty$e(_assertThisInitialized$d(nt),"incompatibleTokens",["b","B","H","k","t","T"]),nt}return _createClass$d(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"a":case"aa":case"aaa":return st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"aaaaa":return st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"aaaa":default:return st.dayPeriod(ot,{width:"wide",context:"formatting"})||st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(ot,it,st){return ot.setUTCHours(dayPeriodEnumToHours(st),0,0,0),ot}}]),rt}(Parser);function _typeof$e(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(rt){return typeof rt}:_typeof$e=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$e(_e)}function _classCallCheck$c(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$c(_e,et,rt){return et&&_defineProperties$c(_e.prototype,et),rt&&_defineProperties$c(_e,rt),_e}function _inherits$c(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$c(_e,et)}function _setPrototypeOf$c(_e,et){return _setPrototypeOf$c=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$c(_e,et)}function _createSuper$c(_e){var et=_isNativeReflectConstruct$c();return function(){var nt=_getPrototypeOf$c(_e),ot;if(et){var it=_getPrototypeOf$c(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$c(this,ot)}}function _possibleConstructorReturn$c(_e,et){return et&&(_typeof$e(et)==="object"||typeof et=="function")?et:_assertThisInitialized$c(_e)}function _assertThisInitialized$c(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$c(_e){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$c(_e)}function _defineProperty$d(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var AMPMMidnightParser=function(_e){_inherits$c(rt,_e);var et=_createSuper$c(rt);function rt(){var nt;_classCallCheck$c(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$d(_assertThisInitialized$c(nt),"priority",80),_defineProperty$d(_assertThisInitialized$c(nt),"incompatibleTokens",["a","B","H","k","t","T"]),nt}return _createClass$c(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"b":case"bb":case"bbb":return st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"bbbbb":return st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"bbbb":default:return st.dayPeriod(ot,{width:"wide",context:"formatting"})||st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(ot,it,st){return ot.setUTCHours(dayPeriodEnumToHours(st),0,0,0),ot}}]),rt}(Parser);function _typeof$d(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$d=function(rt){return typeof rt}:_typeof$d=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$d(_e)}function _classCallCheck$b(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$b(_e,et,rt){return et&&_defineProperties$b(_e.prototype,et),rt&&_defineProperties$b(_e,rt),_e}function _inherits$b(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$b(_e,et)}function _setPrototypeOf$b(_e,et){return _setPrototypeOf$b=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$b(_e,et)}function _createSuper$b(_e){var et=_isNativeReflectConstruct$b();return function(){var nt=_getPrototypeOf$b(_e),ot;if(et){var it=_getPrototypeOf$b(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$b(this,ot)}}function _possibleConstructorReturn$b(_e,et){return et&&(_typeof$d(et)==="object"||typeof et=="function")?et:_assertThisInitialized$b(_e)}function _assertThisInitialized$b(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$b(_e){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$b(_e)}function _defineProperty$c(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var DayPeriodParser=function(_e){_inherits$b(rt,_e);var et=_createSuper$b(rt);function rt(){var nt;_classCallCheck$b(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$c(_assertThisInitialized$b(nt),"priority",80),_defineProperty$c(_assertThisInitialized$b(nt),"incompatibleTokens",["a","b","t","T"]),nt}return _createClass$b(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"B":case"BB":case"BBB":return st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"BBBBB":return st.dayPeriod(ot,{width:"narrow",context:"formatting"});case"BBBB":default:return st.dayPeriod(ot,{width:"wide",context:"formatting"})||st.dayPeriod(ot,{width:"abbreviated",context:"formatting"})||st.dayPeriod(ot,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(ot,it,st){return ot.setUTCHours(dayPeriodEnumToHours(st),0,0,0),ot}}]),rt}(Parser);function _typeof$c(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$c=function(rt){return typeof rt}:_typeof$c=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$c(_e)}function _classCallCheck$a(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$a(_e,et,rt){return et&&_defineProperties$a(_e.prototype,et),rt&&_defineProperties$a(_e,rt),_e}function _inherits$a(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$a(_e,et)}function _setPrototypeOf$a(_e,et){return _setPrototypeOf$a=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$a(_e,et)}function _createSuper$a(_e){var et=_isNativeReflectConstruct$a();return function(){var nt=_getPrototypeOf$a(_e),ot;if(et){var it=_getPrototypeOf$a(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$a(this,ot)}}function _possibleConstructorReturn$a(_e,et){return et&&(_typeof$c(et)==="object"||typeof et=="function")?et:_assertThisInitialized$a(_e)}function _assertThisInitialized$a(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(_e){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$a(_e)}function _defineProperty$b(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var Hour1to12Parser=function(_e){_inherits$a(rt,_e);var et=_createSuper$a(rt);function rt(){var nt;_classCallCheck$a(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$b(_assertThisInitialized$a(nt),"priority",70),_defineProperty$b(_assertThisInitialized$a(nt),"incompatibleTokens",["H","K","k","t","T"]),nt}return _createClass$a(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"h":return parseNumericPattern(numericPatterns.hour12h,ot);case"ho":return st.ordinalNumber(ot,{unit:"hour"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=1&&it<=12}},{key:"set",value:function(ot,it,st){var at=ot.getUTCHours()>=12;return at&&st<12?ot.setUTCHours(st+12,0,0,0):!at&&st===12?ot.setUTCHours(0,0,0,0):ot.setUTCHours(st,0,0,0),ot}}]),rt}(Parser);function _typeof$b(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$b=function(rt){return typeof rt}:_typeof$b=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$b(_e)}function _classCallCheck$9(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$9(_e,et,rt){return et&&_defineProperties$9(_e.prototype,et),rt&&_defineProperties$9(_e,rt),_e}function _inherits$9(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$9(_e,et)}function _setPrototypeOf$9(_e,et){return _setPrototypeOf$9=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$9(_e,et)}function _createSuper$9(_e){var et=_isNativeReflectConstruct$9();return function(){var nt=_getPrototypeOf$9(_e),ot;if(et){var it=_getPrototypeOf$9(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$9(this,ot)}}function _possibleConstructorReturn$9(_e,et){return et&&(_typeof$b(et)==="object"||typeof et=="function")?et:_assertThisInitialized$9(_e)}function _assertThisInitialized$9(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$9(_e){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$9(_e)}function _defineProperty$a(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var Hour0to23Parser=function(_e){_inherits$9(rt,_e);var et=_createSuper$9(rt);function rt(){var nt;_classCallCheck$9(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$a(_assertThisInitialized$9(nt),"priority",70),_defineProperty$a(_assertThisInitialized$9(nt),"incompatibleTokens",["a","b","h","K","k","t","T"]),nt}return _createClass$9(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"H":return parseNumericPattern(numericPatterns.hour23h,ot);case"Ho":return st.ordinalNumber(ot,{unit:"hour"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=0&&it<=23}},{key:"set",value:function(ot,it,st){return ot.setUTCHours(st,0,0,0),ot}}]),rt}(Parser);function _typeof$a(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$a=function(rt){return typeof rt}:_typeof$a=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$a(_e)}function _classCallCheck$8(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$8(_e,et,rt){return et&&_defineProperties$8(_e.prototype,et),rt&&_defineProperties$8(_e,rt),_e}function _inherits$8(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$8(_e,et)}function _setPrototypeOf$8(_e,et){return _setPrototypeOf$8=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$8(_e,et)}function _createSuper$8(_e){var et=_isNativeReflectConstruct$8();return function(){var nt=_getPrototypeOf$8(_e),ot;if(et){var it=_getPrototypeOf$8(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$8(this,ot)}}function _possibleConstructorReturn$8(_e,et){return et&&(_typeof$a(et)==="object"||typeof et=="function")?et:_assertThisInitialized$8(_e)}function _assertThisInitialized$8(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$8(_e){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$8(_e)}function _defineProperty$9(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var Hour0To11Parser=function(_e){_inherits$8(rt,_e);var et=_createSuper$8(rt);function rt(){var nt;_classCallCheck$8(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$9(_assertThisInitialized$8(nt),"priority",70),_defineProperty$9(_assertThisInitialized$8(nt),"incompatibleTokens",["h","H","k","t","T"]),nt}return _createClass$8(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"K":return parseNumericPattern(numericPatterns.hour11h,ot);case"Ko":return st.ordinalNumber(ot,{unit:"hour"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=0&&it<=11}},{key:"set",value:function(ot,it,st){var at=ot.getUTCHours()>=12;return at&&st<12?ot.setUTCHours(st+12,0,0,0):ot.setUTCHours(st,0,0,0),ot}}]),rt}(Parser);function _typeof$9(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$9=function(rt){return typeof rt}:_typeof$9=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$9(_e)}function _classCallCheck$7(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$7(_e,et,rt){return et&&_defineProperties$7(_e.prototype,et),rt&&_defineProperties$7(_e,rt),_e}function _inherits$7(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$7(_e,et)}function _setPrototypeOf$7(_e,et){return _setPrototypeOf$7=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$7(_e,et)}function _createSuper$7(_e){var et=_isNativeReflectConstruct$7();return function(){var nt=_getPrototypeOf$7(_e),ot;if(et){var it=_getPrototypeOf$7(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$7(this,ot)}}function _possibleConstructorReturn$7(_e,et){return et&&(_typeof$9(et)==="object"||typeof et=="function")?et:_assertThisInitialized$7(_e)}function _assertThisInitialized$7(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$7(_e){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$7(_e)}function _defineProperty$8(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var Hour1To24Parser=function(_e){_inherits$7(rt,_e);var et=_createSuper$7(rt);function rt(){var nt;_classCallCheck$7(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$8(_assertThisInitialized$7(nt),"priority",70),_defineProperty$8(_assertThisInitialized$7(nt),"incompatibleTokens",["a","b","h","H","K","t","T"]),nt}return _createClass$7(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"k":return parseNumericPattern(numericPatterns.hour24h,ot);case"ko":return st.ordinalNumber(ot,{unit:"hour"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=1&&it<=24}},{key:"set",value:function(ot,it,st){var at=st<=24?st%24:st;return ot.setUTCHours(at,0,0,0),ot}}]),rt}(Parser);function _typeof$8(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$8=function(rt){return typeof rt}:_typeof$8=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$8(_e)}function _classCallCheck$6(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$6(_e,et,rt){return et&&_defineProperties$6(_e.prototype,et),rt&&_defineProperties$6(_e,rt),_e}function _inherits$6(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$6(_e,et)}function _setPrototypeOf$6(_e,et){return _setPrototypeOf$6=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$6(_e,et)}function _createSuper$6(_e){var et=_isNativeReflectConstruct$6();return function(){var nt=_getPrototypeOf$6(_e),ot;if(et){var it=_getPrototypeOf$6(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$6(this,ot)}}function _possibleConstructorReturn$6(_e,et){return et&&(_typeof$8(et)==="object"||typeof et=="function")?et:_assertThisInitialized$6(_e)}function _assertThisInitialized$6(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$6(_e){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$6(_e)}function _defineProperty$7(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var MinuteParser=function(_e){_inherits$6(rt,_e);var et=_createSuper$6(rt);function rt(){var nt;_classCallCheck$6(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$7(_assertThisInitialized$6(nt),"priority",60),_defineProperty$7(_assertThisInitialized$6(nt),"incompatibleTokens",["t","T"]),nt}return _createClass$6(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"m":return parseNumericPattern(numericPatterns.minute,ot);case"mo":return st.ordinalNumber(ot,{unit:"minute"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=0&&it<=59}},{key:"set",value:function(ot,it,st){return ot.setUTCMinutes(st,0,0),ot}}]),rt}(Parser);function _typeof$7(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$7=function(rt){return typeof rt}:_typeof$7=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$7(_e)}function _classCallCheck$5(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$5(_e,et,rt){return et&&_defineProperties$5(_e.prototype,et),rt&&_defineProperties$5(_e,rt),_e}function _inherits$5(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$5(_e,et)}function _setPrototypeOf$5(_e,et){return _setPrototypeOf$5=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$5(_e,et)}function _createSuper$5(_e){var et=_isNativeReflectConstruct$5();return function(){var nt=_getPrototypeOf$5(_e),ot;if(et){var it=_getPrototypeOf$5(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$5(this,ot)}}function _possibleConstructorReturn$5(_e,et){return et&&(_typeof$7(et)==="object"||typeof et=="function")?et:_assertThisInitialized$5(_e)}function _assertThisInitialized$5(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$5(_e){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$5(_e)}function _defineProperty$6(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var SecondParser=function(_e){_inherits$5(rt,_e);var et=_createSuper$5(rt);function rt(){var nt;_classCallCheck$5(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$6(_assertThisInitialized$5(nt),"priority",50),_defineProperty$6(_assertThisInitialized$5(nt),"incompatibleTokens",["t","T"]),nt}return _createClass$5(rt,[{key:"parse",value:function(ot,it,st){switch(it){case"s":return parseNumericPattern(numericPatterns.second,ot);case"so":return st.ordinalNumber(ot,{unit:"second"});default:return parseNDigits(it.length,ot)}}},{key:"validate",value:function(ot,it){return it>=0&&it<=59}},{key:"set",value:function(ot,it,st){return ot.setUTCSeconds(st,0),ot}}]),rt}(Parser);function _typeof$6(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(rt){return typeof rt}:_typeof$6=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$6(_e)}function _classCallCheck$4(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$4(_e,et,rt){return et&&_defineProperties$4(_e.prototype,et),rt&&_defineProperties$4(_e,rt),_e}function _inherits$4(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$4(_e,et)}function _setPrototypeOf$4(_e,et){return _setPrototypeOf$4=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$4(_e,et)}function _createSuper$4(_e){var et=_isNativeReflectConstruct$4();return function(){var nt=_getPrototypeOf$4(_e),ot;if(et){var it=_getPrototypeOf$4(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$4(this,ot)}}function _possibleConstructorReturn$4(_e,et){return et&&(_typeof$6(et)==="object"||typeof et=="function")?et:_assertThisInitialized$4(_e)}function _assertThisInitialized$4(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$4(_e){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$4(_e)}function _defineProperty$5(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var FractionOfSecondParser=function(_e){_inherits$4(rt,_e);var et=_createSuper$4(rt);function rt(){var nt;_classCallCheck$4(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$5(_assertThisInitialized$4(nt),"priority",30),_defineProperty$5(_assertThisInitialized$4(nt),"incompatibleTokens",["t","T"]),nt}return _createClass$4(rt,[{key:"parse",value:function(ot,it){var st=function(lt){return Math.floor(lt*Math.pow(10,-it.length+3))};return mapValue(parseNDigits(it.length,ot),st)}},{key:"set",value:function(ot,it,st){return ot.setUTCMilliseconds(st),ot}}]),rt}(Parser);function _typeof$5(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(rt){return typeof rt}:_typeof$5=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$5(_e)}function _classCallCheck$3(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$3(_e,et,rt){return et&&_defineProperties$3(_e.prototype,et),rt&&_defineProperties$3(_e,rt),_e}function _inherits$3(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$3(_e,et)}function _setPrototypeOf$3(_e,et){return _setPrototypeOf$3=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$3(_e,et)}function _createSuper$3(_e){var et=_isNativeReflectConstruct$3();return function(){var nt=_getPrototypeOf$3(_e),ot;if(et){var it=_getPrototypeOf$3(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$3(this,ot)}}function _possibleConstructorReturn$3(_e,et){return et&&(_typeof$5(et)==="object"||typeof et=="function")?et:_assertThisInitialized$3(_e)}function _assertThisInitialized$3(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(_e){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$3(_e)}function _defineProperty$4(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ISOTimezoneWithZParser=function(_e){_inherits$3(rt,_e);var et=_createSuper$3(rt);function rt(){var nt;_classCallCheck$3(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$4(_assertThisInitialized$3(nt),"priority",10),_defineProperty$4(_assertThisInitialized$3(nt),"incompatibleTokens",["t","T","x"]),nt}return _createClass$3(rt,[{key:"parse",value:function(ot,it){switch(it){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,ot);case"XX":return parseTimezonePattern(timezonePatterns.basic,ot);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,ot);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,ot);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,ot)}}},{key:"set",value:function(ot,it,st){return it.timestampIsSet?ot:new Date(ot.getTime()-st)}}]),rt}(Parser);function _typeof$4(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(rt){return typeof rt}:_typeof$4=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$4(_e)}function _classCallCheck$2(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$2(_e,et,rt){return et&&_defineProperties$2(_e.prototype,et),rt&&_defineProperties$2(_e,rt),_e}function _inherits$2(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$2(_e,et)}function _setPrototypeOf$2(_e,et){return _setPrototypeOf$2=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$2(_e,et)}function _createSuper$2(_e){var et=_isNativeReflectConstruct$2();return function(){var nt=_getPrototypeOf$2(_e),ot;if(et){var it=_getPrototypeOf$2(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$2(this,ot)}}function _possibleConstructorReturn$2(_e,et){return et&&(_typeof$4(et)==="object"||typeof et=="function")?et:_assertThisInitialized$2(_e)}function _assertThisInitialized$2(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(_e){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$2(_e)}function _defineProperty$3(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var ISOTimezoneParser=function(_e){_inherits$2(rt,_e);var et=_createSuper$2(rt);function rt(){var nt;_classCallCheck$2(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$3(_assertThisInitialized$2(nt),"priority",10),_defineProperty$3(_assertThisInitialized$2(nt),"incompatibleTokens",["t","T","X"]),nt}return _createClass$2(rt,[{key:"parse",value:function(ot,it){switch(it){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,ot);case"xx":return parseTimezonePattern(timezonePatterns.basic,ot);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,ot);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,ot);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,ot)}}},{key:"set",value:function(ot,it,st){return it.timestampIsSet?ot:new Date(ot.getTime()-st)}}]),rt}(Parser);function _typeof$3(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(rt){return typeof rt}:_typeof$3=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$3(_e)}function _classCallCheck$1(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass$1(_e,et,rt){return et&&_defineProperties$1(_e.prototype,et),rt&&_defineProperties$1(_e,rt),_e}function _inherits$1(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf$1(_e,et)}function _setPrototypeOf$1(_e,et){return _setPrototypeOf$1=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf$1(_e,et)}function _createSuper$1(_e){var et=_isNativeReflectConstruct$1();return function(){var nt=_getPrototypeOf$1(_e),ot;if(et){var it=_getPrototypeOf$1(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn$1(this,ot)}}function _possibleConstructorReturn$1(_e,et){return et&&(_typeof$3(et)==="object"||typeof et=="function")?et:_assertThisInitialized$1(_e)}function _assertThisInitialized$1(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(_e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf$1(_e)}function _defineProperty$2(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var TimestampSecondsParser=function(_e){_inherits$1(rt,_e);var et=_createSuper$1(rt);function rt(){var nt;_classCallCheck$1(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$2(_assertThisInitialized$1(nt),"priority",40),_defineProperty$2(_assertThisInitialized$1(nt),"incompatibleTokens","*"),nt}return _createClass$1(rt,[{key:"parse",value:function(ot){return parseAnyDigitsSigned(ot)}},{key:"set",value:function(ot,it,st){return[new Date(st*1e3),{timestampIsSet:!0}]}}]),rt}(Parser);function _typeof$2(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(rt){return typeof rt}:_typeof$2=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$2(_e)}function _classCallCheck(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_e,et){for(var rt=0;rt<et.length;rt++){var nt=et[rt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(_e,nt.key,nt)}}function _createClass(_e,et,rt){return et&&_defineProperties(_e.prototype,et),rt&&_defineProperties(_e,rt),_e}function _inherits(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf(_e,et)}function _setPrototypeOf(_e,et){return _setPrototypeOf=Object.setPrototypeOf||function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf(_e,et)}function _createSuper(_e){var et=_isNativeReflectConstruct();return function(){var nt=_getPrototypeOf(_e),ot;if(et){var it=_getPrototypeOf(this).constructor;ot=Reflect.construct(nt,arguments,it)}else ot=nt.apply(this,arguments);return _possibleConstructorReturn(this,ot)}}function _possibleConstructorReturn(_e,et){return et&&(_typeof$2(et)==="object"||typeof et=="function")?et:_assertThisInitialized(_e)}function _assertThisInitialized(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(_e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf(_e)}function _defineProperty$1(_e,et,rt){return et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}var TimestampMillisecondsParser=function(_e){_inherits(rt,_e);var et=_createSuper(rt);function rt(){var nt;_classCallCheck(this,rt);for(var ot=arguments.length,it=new Array(ot),st=0;st<ot;st++)it[st]=arguments[st];return nt=et.call.apply(et,[this].concat(it)),_defineProperty$1(_assertThisInitialized(nt),"priority",20),_defineProperty$1(_assertThisInitialized(nt),"incompatibleTokens","*"),nt}return _createClass(rt,[{key:"parse",value:function(ot){return parseAnyDigitsSigned(ot)}},{key:"set",value:function(ot,it,st){return[new Date(st),{timestampIsSet:!0}]}}]),rt}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser};function _typeof$1(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(rt){return typeof rt}:_typeof$1=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$1(_e)}function _createForOfIteratorHelper(_e,et){var rt;if(typeof Symbol>"u"||_e[Symbol.iterator]==null){if(Array.isArray(_e)||(rt=_unsupportedIterableToArray(_e))||et&&_e&&typeof _e.length=="number"){rt&&(_e=rt);var nt=0,ot=function(){};return{s:ot,n:function(){return nt>=_e.length?{done:!0}:{done:!1,value:_e[nt++]}},e:function(ct){throw ct},f:ot}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var it=!0,st=!1,at;return{s:function(){rt=_e[Symbol.iterator]()},n:function(){var ct=rt.next();return it=ct.done,ct},e:function(ct){st=!0,at=ct},f:function(){try{!it&&rt.return!=null&&rt.return()}finally{if(st)throw at}}}}function _unsupportedIterableToArray(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,et);var rt=Object.prototype.toString.call(_e).slice(8,-1);if(rt==="Object"&&_e.constructor&&(rt=_e.constructor.name),rt==="Map"||rt==="Set")return Array.from(_e);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return _arrayLikeToArray(_e,et)}}function _arrayLikeToArray(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var rt=0,nt=new Array(et);rt<et;rt++)nt[rt]=_e[rt];return nt}var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse$1(_e,et,rt,nt){var ot,it,st,at,lt,ct,pt,ut,ht,ft,gt,vt,yt,mt,Et,bt,Ct,Tt;requiredArgs(3,arguments);var wt=String(_e),Rt=String(et),It=getDefaultOptions(),St=(ot=(it=nt==null?void 0:nt.locale)!==null&&it!==void 0?it:It.locale)!==null&&ot!==void 0?ot:defaultLocale;if(!St.match)throw new RangeError("locale must contain match property");var Pt=toInteger((st=(at=(lt=(ct=nt==null?void 0:nt.firstWeekContainsDate)!==null&&ct!==void 0?ct:nt==null||(pt=nt.locale)===null||pt===void 0||(ut=pt.options)===null||ut===void 0?void 0:ut.firstWeekContainsDate)!==null&&lt!==void 0?lt:It.firstWeekContainsDate)!==null&&at!==void 0?at:(ht=It.locale)===null||ht===void 0||(ft=ht.options)===null||ft===void 0?void 0:ft.firstWeekContainsDate)!==null&&st!==void 0?st:1);if(!(Pt>=1&&Pt<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Ot=toInteger((gt=(vt=(yt=(mt=nt==null?void 0:nt.weekStartsOn)!==null&&mt!==void 0?mt:nt==null||(Et=nt.locale)===null||Et===void 0||(bt=Et.options)===null||bt===void 0?void 0:bt.weekStartsOn)!==null&&yt!==void 0?yt:It.weekStartsOn)!==null&&vt!==void 0?vt:(Ct=It.locale)===null||Ct===void 0||(Tt=Ct.options)===null||Tt===void 0?void 0:Tt.weekStartsOn)!==null&&gt!==void 0?gt:0);if(!(Ot>=0&&Ot<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(Rt==="")return wt===""?toDate(rt):new Date(NaN);var Ut={firstWeekContainsDate:Pt,weekStartsOn:Ot,locale:St},Bt=[new DateToSystemTimezoneSetter],xt=Rt.match(longFormattingTokensRegExp).map(function(nr){var hr=nr[0];if(hr in longFormatters$3){var vr=longFormatters$3[hr];return vr(nr,St.formatLong)}return nr}).join("").match(formattingTokensRegExp),At=[],Mt=_createForOfIteratorHelper(xt),Nt;try{var $t=function(){var hr=Nt.value;!(nt!=null&&nt.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(hr)&&throwProtectedError(hr,Rt,_e),!(nt!=null&&nt.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(hr)&&throwProtectedError(hr,Rt,_e);var vr=hr[0],yr=parsers[vr];if(yr){var Cr=yr.incompatibleTokens;if(Array.isArray(Cr)){var or=At.find(function(pr){return Cr.includes(pr.token)||pr.token===vr});if(or)throw new RangeError("The format string mustn't contain `".concat(or.fullToken,"` and `").concat(hr,"` at the same time"))}else if(yr.incompatibleTokens==="*"&&At.length>0)throw new RangeError("The format string mustn't contain `".concat(hr,"` and any other token at the same time"));At.push({token:vr,fullToken:hr});var ur=yr.run(wt,hr,St.match,Ut);if(!ur)return{v:new Date(NaN)};Bt.push(ur.setter),wt=ur.rest}else{if(vr.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+vr+"`");if(hr==="''"?hr="'":vr==="'"&&(hr=cleanEscapedString(hr)),wt.indexOf(hr)===0)wt=wt.slice(hr.length);else return{v:new Date(NaN)}}};for(Mt.s();!(Nt=Mt.n()).done;){var Ft=$t();if(_typeof$1(Ft)==="object")return Ft.v}}catch(nr){Mt.e(nr)}finally{Mt.f()}if(wt.length>0&&notWhitespaceRegExp.test(wt))return new Date(NaN);var jt=Bt.map(function(nr){return nr.priority}).sort(function(nr,hr){return hr-nr}).filter(function(nr,hr,vr){return vr.indexOf(nr)===hr}).map(function(nr){return Bt.filter(function(hr){return hr.priority===nr}).sort(function(hr,vr){return vr.subPriority-hr.subPriority})}).map(function(nr){return nr[0]}),zt=toDate(rt);if(isNaN(zt.getTime()))return new Date(NaN);var Yt=subMilliseconds(zt,getTimezoneOffsetInMilliseconds(zt)),Kt={},er=_createForOfIteratorHelper(jt),ir;try{for(er.s();!(ir=er.n()).done;){var rr=ir.value;if(!rr.validate(Yt,Ut))return new Date(NaN);var lr=rr.set(Yt,Kt,Ut);Array.isArray(lr)?(Yt=lr[0],assign(Kt,lr[1])):Yt=lr}}catch(nr){er.e(nr)}finally{er.f()}return Yt}function cleanEscapedString(_e){return _e.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function startOfHour(_e){requiredArgs(1,arguments);var et=toDate(_e);return et.setMinutes(0,0,0),et}function isSameHour(_e,et){requiredArgs(2,arguments);var rt=startOfHour(_e),nt=startOfHour(et);return rt.getTime()===nt.getTime()}function isSameMonth(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getFullYear()===nt.getFullYear()&&rt.getMonth()===nt.getMonth()}function isSameYear(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toDate(et);return rt.getFullYear()===nt.getFullYear()}function isWithinInterval(_e,et){requiredArgs(2,arguments);var rt=toDate(_e).getTime(),nt=toDate(et.start).getTime(),ot=toDate(et.end).getTime();if(!(nt<=ot))throw new RangeError("Invalid interval");return rt>=nt&&rt<=ot}function parseISO(_e,et){var rt;requiredArgs(1,arguments);var nt=toInteger((rt=et==null?void 0:et.additionalDigits)!==null&&rt!==void 0?rt:2);if(nt!==2&&nt!==1&&nt!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof _e=="string"||Object.prototype.toString.call(_e)==="[object String]"))return new Date(NaN);var ot=splitDateString(_e),it;if(ot.date){var st=parseYear(ot.date,nt);it=parseDate(st.restDateString,st.year)}if(!it||isNaN(it.getTime()))return new Date(NaN);var at=it.getTime(),lt=0,ct;if(ot.time&&(lt=parseTime(ot.time),isNaN(lt)))return new Date(NaN);if(ot.timezone){if(ct=parseTimezone(ot.timezone),isNaN(ct))return new Date(NaN)}else{var pt=new Date(at+lt),ut=new Date(0);return ut.setFullYear(pt.getUTCFullYear(),pt.getUTCMonth(),pt.getUTCDate()),ut.setHours(pt.getUTCHours(),pt.getUTCMinutes(),pt.getUTCSeconds(),pt.getUTCMilliseconds()),ut}return new Date(at+lt+ct)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex$1=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(_e){var et={},rt=_e.split(patterns.dateTimeDelimiter),nt;if(rt.length>2)return et;if(/:/.test(rt[0])?nt=rt[0]:(et.date=rt[0],nt=rt[1],patterns.timeZoneDelimiter.test(et.date)&&(et.date=_e.split(patterns.timeZoneDelimiter)[0],nt=_e.substr(et.date.length,_e.length))),nt){var ot=patterns.timezone.exec(nt);ot?(et.time=nt.replace(ot[1],""),et.timezone=ot[1]):et.time=nt}return et}function parseYear(_e,et){var rt=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+et)+"})|(\\d{2}|[+-]\\d{"+(2+et)+"})$)"),nt=_e.match(rt);if(!nt)return{year:NaN,restDateString:""};var ot=nt[1]?parseInt(nt[1]):null,it=nt[2]?parseInt(nt[2]):null;return{year:it===null?ot:it*100,restDateString:_e.slice((nt[1]||nt[2]).length)}}function parseDate(_e,et){if(et===null)return new Date(NaN);var rt=_e.match(dateRegex$1);if(!rt)return new Date(NaN);var nt=!!rt[4],ot=parseDateUnit(rt[1]),it=parseDateUnit(rt[2])-1,st=parseDateUnit(rt[3]),at=parseDateUnit(rt[4]),lt=parseDateUnit(rt[5])-1;if(nt)return validateWeekDate(et,at,lt)?dayOfISOWeekYear(et,at,lt):new Date(NaN);var ct=new Date(0);return!validateDate$1(et,it,st)||!validateDayOfYearDate(et,ot)?new Date(NaN):(ct.setUTCFullYear(et,it,Math.max(ot,st)),ct)}function parseDateUnit(_e){return _e?parseInt(_e):1}function parseTime(_e){var et=_e.match(timeRegex);if(!et)return NaN;var rt=parseTimeUnit(et[1]),nt=parseTimeUnit(et[2]),ot=parseTimeUnit(et[3]);return validateTime$1(rt,nt,ot)?rt*millisecondsInHour+nt*millisecondsInMinute+ot*1e3:NaN}function parseTimeUnit(_e){return _e&&parseFloat(_e.replace(",","."))||0}function parseTimezone(_e){if(_e==="Z")return 0;var et=_e.match(timezoneRegex);if(!et)return 0;var rt=et[1]==="+"?-1:1,nt=parseInt(et[2]),ot=et[3]&&parseInt(et[3])||0;return validateTimezone(nt,ot)?rt*(nt*millisecondsInHour+ot*millisecondsInMinute):NaN}function dayOfISOWeekYear(_e,et,rt){var nt=new Date(0);nt.setUTCFullYear(_e,0,4);var ot=nt.getUTCDay()||7,it=(et-1)*7+rt+1-ot;return nt.setUTCDate(nt.getUTCDate()+it),nt}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(_e){return _e%400===0||_e%4===0&&_e%100!==0}function validateDate$1(_e,et,rt){return et>=0&&et<=11&&rt>=1&&rt<=(daysInMonths[et]||(isLeapYearIndex(_e)?29:28))}function validateDayOfYearDate(_e,et){return et>=1&&et<=(isLeapYearIndex(_e)?366:365)}function validateWeekDate(_e,et,rt){return et>=1&&et<=53&&rt>=0&&rt<=6}function validateTime$1(_e,et,rt){return _e===24?et===0&&rt===0:rt>=0&&rt<60&&et>=0&&et<60&&_e>=0&&_e<25}function validateTimezone(_e,et){return et>=0&&et<=59}function setMonth(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et),ot=rt.getFullYear(),it=rt.getDate(),st=new Date(0);st.setFullYear(ot,nt,15),st.setHours(0,0,0,0);var at=getDaysInMonth(st);return rt.setMonth(nt,Math.min(it,at)),rt}function setDate(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return rt.setDate(nt),rt}function setHours(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return rt.setHours(nt),rt}function setMinutes(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return rt.setMinutes(nt),rt}function setSeconds(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return rt.setSeconds(nt),rt}function setYear(_e,et){requiredArgs(2,arguments);var rt=toDate(_e),nt=toInteger(et);return isNaN(rt.getTime())?new Date(NaN):(rt.setFullYear(nt),rt)}function Quiz$1(){const[_e,et]=reactExports.useState([]),rt=(ot,it)=>{const st=new Date().getTime();return ot=new Date(ot).getTime(),it=new Date(it).getTime(),st>=ot&&st<it},nt=async()=>{const ot=await QuizService.get();et(ot.data.map(it=>({...it,startDate:format(new Date(it.startDate),"MMM,dd yyyy hh:mm aa"),endDate:format(new Date(it.endDate),"MMM,dd yyyy hh:mm aa"),isAvailable:rt(it.startDate,it.endDate)})))};return reactExports.useEffect(()=>{nt()},[]),jsxs(Fragment,{children:[jsx(Box$1,{display:"flex",justifyContent:"center",children:jsx(Typography$1,{variant:"h3",children:"Quiz"})}),_e.length===0?jsx(Typography$1,{textAlign:"center",m:5,variant:"h6",children:"There is no Quiz Available Come Back Later"}):_e.map(ot=>{var it,st;return jsx(Box$1,{sx:{flexGrow:1},children:jsxs(Grid$1,{container:!0,sx:{background:"linear-gradient(195deg, rgba(66, 66, 74, 0.8), rgba(25, 25, 25, 0.8))",color:"white",marginTop:2,padding:3,borderRadius:"0.75rem"},children:[jsxs(Grid$1,{item:!0,xs:10,children:[jsxs(Typography$1,{variant:"h3",children:[ot.name," ",jsx("br",{})]}),jsxs(Typography$1,{variant:"h6",children:[ot.description," ",jsx("br",{})]}),jsxs(Box$1,{children:["From :"," ",jsx("span",{style:{color:theme$1.palette.success.main},children:ot.startDate})," "]}),jsxs(Box$1,{children:["To :"," ",jsx("span",{style:{color:theme$1.palette.error.main},children:ot.endDate})]})]}),jsx(Grid$1,{item:!0,xs:2,alignItems:"center",display:"flex",children:ot.isAvailable?jsx(Link$2,{to:"start",state:{id:ot._id},children:jsx(Button$1,{variant:"contained",color:"secondary",children:"Start Quiz"})}):jsx(Button$1,{variant:"contained",sx:{opacity:.5},color:"error",children:"Start Quiz"})}),jsx(Divider$1,{style:{width:"100%",margin:"10px 0"}}),jsxs(Typography$1,{children:["By: ",((it=ot==null?void 0:ot.author)==null?void 0:it.firstName)+" "+((st=ot==null?void 0:ot.author)==null?void 0:st.lastName)]})]})},ot._id)})]})}var Menu={},_interopRequireDefault$g=interopRequireDefaultExports;Object.defineProperty(Menu,"__esModule",{value:!0});var default_1$g=Menu.default=void 0,_createSvgIcon$g=_interopRequireDefault$g(requireCreateSvgIcon()),_jsxRuntime$g=require$$2,_default$g=(0,_createSvgIcon$g.default)((0,_jsxRuntime$g.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");default_1$g=Menu.default=_default$g;const avatar="/assets/avatar-removebg-preview-0d504ae1.png";var SignalCellularAlt={},_interopRequireDefault$f=interopRequireDefaultExports;Object.defineProperty(SignalCellularAlt,"__esModule",{value:!0});var default_1$f=SignalCellularAlt.default=void 0,_createSvgIcon$f=_interopRequireDefault$f(requireCreateSvgIcon()),_jsxRuntime$f=require$$2,_default$f=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"M17 4h3v16h-3zM5 14h3v6H5zm6-5h3v11h-3z"}),"SignalCellularAlt");default_1$f=SignalCellularAlt.default=_default$f;var Person={},_interopRequireDefault$e=interopRequireDefaultExports;Object.defineProperty(Person,"__esModule",{value:!0});var default_1$e=Person.default=void 0,_createSvgIcon$e=_interopRequireDefault$e(requireCreateSvgIcon()),_jsxRuntime$e=require$$2,_default$e=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");default_1$e=Person.default=_default$e;var LibraryBooks={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(LibraryBooks,"__esModule",{value:!0});var default_1$d=LibraryBooks.default=void 0,_createSvgIcon$d=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$d=require$$2,_default$d=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"}),"LibraryBooks");default_1$d=LibraryBooks.default=_default$d;var LiveTv={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(LiveTv,"__esModule",{value:!0});var default_1$c=LiveTv.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=require$$2,_default$c=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2zm0 14H3V8h18v12zM9 10v8l7-4z"}),"LiveTv");default_1$c=LiveTv.default=_default$c;var Autorenew={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(Autorenew,"__esModule",{value:!0});var default_1$b=Autorenew.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=require$$2,_default$b=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");default_1$b=Autorenew.default=_default$b;var EmojiEvents={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(EmojiEvents,"__esModule",{value:!0});var default_1$a=EmojiEvents.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=require$$2,_default$a=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"}),"EmojiEvents");default_1$a=EmojiEvents.default=_default$a;var Settings$1={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(Settings$1,"__esModule",{value:!0});var default_1$9=Settings$1.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=require$$2,_default$9=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");default_1$9=Settings$1.default=_default$9;const adminSidebarItems=[{href:"/dashboard",icon:jsx(default_1$f,{fontSize:"small"}),title:"Dashboard"},{href:"/user",icon:jsx(default_1$e,{fontSize:"small"}),title:"User"},{href:"/quiz",icon:jsx(default_1$d,{fontSize:"small"}),title:"Quiz"},{href:"/stream",icon:jsx(default_1$c,{fontSize:"small"}),title:"Stream"},{href:"/phase",icon:jsx(default_1$b,{fontSize:"small"}),title:"Change Phase"},{href:"/result",icon:jsx(default_1$a,{fontSize:"small"}),title:"Result"},{href:"/settings",icon:jsx(default_1$9,{fontSize:"small"}),title:"Settings"}],homeMenuItem=[{title:"Home",link:"/"},{title:"About Us",link:"/about-us"},{title:"Contact Us",link:"/contact-us"}],adminMenuItem=[{title:"Dashboard",link:"/admin/dashboard"},{title:"setting",link:"admin/settings"}],userMenuItem=[],quizPhase=[{value:"init",title:"Initial"},{value:"start",title:"Start"},{value:"end",title:"End"},{value:"result",title:"Result"}],UserNavbarRoot=newStyled(AppBar$1)(({theme:_e})=>({backgroundColor:"rgba(255, 255, 255, 0.8)",color:"black",backdropFilter:"blur(5px)",boxShadow:_e.shadows[3],borderRadius:15,left:0,right:0,margin:"15px auto",width:"calc(100% - 100px)"})),UserNavbar=()=>{const[_e,et]=React$1.useState(null),[rt,nt]=React$1.useState(null),ot=homeMenuItem,it=auth$1.roles==="admin"?adminMenuItem:userMenuItem,st=useNavigate(),at=ut=>{et(ut.currentTarget)},lt=()=>{et(null)},ct=ut=>{nt(ut.currentTarget)},pt=()=>{nt(null)};return jsx(Fragment,{children:jsx(UserNavbarRoot,{children:jsxs(Toolbar$1,{sx:{minHeight:64},children:[jsx(IconButton$1,{onClick:ct,sx:{display:{xs:"inline-flex",lg:"none"}},children:jsx(default_1$g,{fontSize:"small"})}),jsx(Menu$2,{sx:{mt:"45px",display:{xs:"inline-flex",lg:"none"}},id:"menu-appbar",anchorEl:rt,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(rt),onClose:pt,children:ot.map(ut=>jsx(MenuItem$1,{component:Link$2,to:ut.link,onClick:pt,children:jsx(Typography$1,{textAlign:"center",children:ut.title})},ut.title))}),jsx(Tooltip$2,{title:"Home",children:jsx(Avatar$1,{src:logo})}),jsx(Tooltip$2,{title:"Home",children:jsx(Typography$1,{sx:{ml:1},children:"GrabIn"})}),jsx(Box$1,{sx:{flexGrow:1}}),jsx(Box$1,{sx:{display:{lg:"flex",xs:"none"},alignItems:"center"},children:ot.map(ut=>jsx(Button$1,{component:Link$2,to:ut.link,children:ut.title},ut.title))}),auth$1.isAuthenticated?jsxs(Fragment,{children:[jsx(Avatar$1,{sx:{backgroundColor:"black",cursor:"pointer",height:40,width:40,ml:3},src:avatar,onClick:at}),jsxs(Menu$2,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:_e,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(_e),onClose:lt,children:[jsxs(Box$1,{sx:{py:1.5,px:2,width:"120px"},children:[jsx(Typography$1,{variant:"overline",children:"Account"}),jsx(Typography$1,{color:"text.secondary",variant:"body2",children:auth$1.name})]}),jsx(Divider$1,{}),it.map(ut=>jsxs("div",{children:[jsx(MenuItem$1,{component:Link$2,to:ut.link,onClick:lt,children:jsx(Typography$1,{textAlign:"center",children:ut.title})},ut.title),jsx(Divider$1,{})]},ut.title)),jsx(MenuItem$1,{onClick:()=>{auth$1.logout(),st("/",{replace:!0})},children:jsx(Typography$1,{textAlign:"center",children:"Logout"})},"logout")]})]}):jsxs(Fragment,{children:[jsx(Button$1,{component:Link$2,underline:"hover",to:"/login",children:"Log in"}),jsx(Button$1,{component:Link$2,underline:"hover",to:"/register",children:"Register"})]})]})})})},bgImg="/assets/coding-f2b678f5.jpeg";function Footer(){return jsx(Grid$1,{container:!0,spacing:2,marginTop:"10px",paddingBottom:"30px",direction:"column",alignItems:"center",justifyContent:"center",children:jsx(Grid$1,{item:!0,xs:3,children:jsx(Typography$1,{children:"All rights reserved. Copyright © 2023 by GrabIn Team."})})})}var typedExports={},typed={get exports(){return typedExports},set exports(_e){typedExports=_e}};/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.12
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */(function(_e,et){(function(nt,ot){_e.exports=ot()})(commonjsGlobal$1,function(){return function(rt){var nt={};function ot(it){if(nt[it])return nt[it].exports;var st=nt[it]={exports:{},id:it,loaded:!1};return rt[it].call(st.exports,st,st.exports,ot),st.loaded=!0,st.exports}return ot.m=rt,ot.c=nt,ot.p="",ot(0)}([function(rt,nt,ot){Object.defineProperty(nt,"__esModule",{value:!0});var it=function(){function pt(ut,ht){for(var ft=0;ft<ht.length;ft++){var gt=ht[ft];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(ut,gt.key,gt)}}return function(ut,ht,ft){return ht&&pt(ut.prototype,ht),ft&&pt(ut,ft),ut}}();function st(pt,ut){if(!(pt instanceof ut))throw new TypeError("Cannot call a class as a function")}var at=ot(1),lt=ot(3),ct=function(){function pt(ut,ht){st(this,pt),at.initializer.load(this,ht,ut),this.begin()}return it(pt,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var ht=arguments.length<=0||arguments[0]===void 0?!0:arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,ht&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var ht=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){!ht.currentElContent||ht.currentElContent.length===0?ht.typewrite(ht.strings[ht.sequence[ht.arrayPos]],ht.strPos):ht.backspace(ht.currentElContent,ht.currentElContent.length)},this.startDelay)}},{key:"typewrite",value:function(ht,ft){var gt=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var vt=this.humanizer(this.typeSpeed),yt=1;if(this.pause.status===!0){this.setPauseStatus(ht,ft,!0);return}this.timeout=setTimeout(function(){ft=lt.htmlParser.typeHtmlChars(ht,ft,gt);var mt=0,Et=ht.substr(ft);if(Et.charAt(0)==="^"&&/^\^\d+/.test(Et)){var bt=1;Et=/\d+/.exec(Et)[0],bt+=Et.length,mt=parseInt(Et),gt.temporaryPause=!0,gt.options.onTypingPaused(gt.arrayPos,gt),ht=ht.substring(0,ft)+ht.substring(ft+bt),gt.toggleBlinking(!0)}if(Et.charAt(0)==="`"){for(;ht.substr(ft+yt).charAt(0)!=="`"&&(yt++,!(ft+yt>ht.length)););var Ct=ht.substring(0,ft),Tt=ht.substring(Ct.length+1,ft+yt),wt=ht.substring(ft+yt+1);ht=Ct+Tt+wt,yt--}gt.timeout=setTimeout(function(){gt.toggleBlinking(!1),ft>=ht.length?gt.doneTyping(ht,ft):gt.keepTyping(ht,ft,yt),gt.temporaryPause&&(gt.temporaryPause=!1,gt.options.onTypingResumed(gt.arrayPos,gt))},mt)},vt)}},{key:"keepTyping",value:function(ht,ft,gt){ft===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),ft+=gt;var vt=ht.substr(0,ft);this.replaceText(vt),this.typewrite(ht,ft)}},{key:"doneTyping",value:function(ht,ft){var gt=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),!(this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount))&&(this.timeout=setTimeout(function(){gt.backspace(ht,ft)},this.backDelay))}},{key:"backspace",value:function(ht,ft){var gt=this;if(this.pause.status===!0){this.setPauseStatus(ht,ft,!1);return}if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var vt=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){ft=lt.htmlParser.backSpaceHtmlChars(ht,ft,gt);var yt=ht.substr(0,ft);if(gt.replaceText(yt),gt.smartBackspace){var mt=gt.strings[gt.arrayPos+1];mt&&yt===mt.substr(0,ft)?gt.stopNum=ft:gt.stopNum=0}ft>gt.stopNum?(ft--,gt.backspace(ht,ft)):ft<=gt.stopNum&&(gt.arrayPos++,gt.arrayPos===gt.strings.length?(gt.arrayPos=0,gt.options.onLastStringBackspaced(),gt.shuffleStringsIfNeeded(),gt.begin()):gt.typewrite(gt.strings[gt.sequence[gt.arrayPos]],ft))},vt)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(ht,ft,gt){this.pause.typewrite=gt,this.pause.curString=ht,this.pause.curStrPos=ft}},{key:"toggleBlinking",value:function(ht){this.cursor&&(this.pause.status||this.cursorBlinking!==ht&&(this.cursorBlinking=ht,ht?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))}},{key:"humanizer",value:function(ht){return Math.round(Math.random()*ht/2)+ht}},{key:"shuffleStringsIfNeeded",value:function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))}},{key:"initFadeOut",value:function(){var ht=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){ht.arrayPos++,ht.replaceText(""),ht.strings.length>ht.arrayPos?ht.typewrite(ht.strings[ht.sequence[ht.arrayPos]],0):(ht.typewrite(ht.strings[0],0),ht.arrayPos=0)},this.fadeOutDelay)}},{key:"replaceText",value:function(ht){this.attr?this.el.setAttribute(this.attr,ht):this.isInput?this.el.value=ht:this.contentType==="html"?this.el.innerHTML=ht:this.el.textContent=ht}},{key:"bindFocusEvents",value:function(){var ht=this;this.isInput&&(this.el.addEventListener("focus",function(ft){ht.stop()}),this.el.addEventListener("blur",function(ft){ht.el.value&&ht.el.value.length!==0||ht.start()}))}},{key:"insertCursor",value:function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))}}]),pt}();nt.default=ct,rt.exports=nt.default},function(rt,nt,ot){Object.defineProperty(nt,"__esModule",{value:!0});var it=Object.assign||function(ft){for(var gt=1;gt<arguments.length;gt++){var vt=arguments[gt];for(var yt in vt)Object.prototype.hasOwnProperty.call(vt,yt)&&(ft[yt]=vt[yt])}return ft},st=function(){function ft(gt,vt){for(var yt=0;yt<vt.length;yt++){var mt=vt[yt];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(gt,mt.key,mt)}}return function(gt,vt,yt){return vt&&ft(gt.prototype,vt),yt&&ft(gt,yt),gt}}();function at(ft){return ft&&ft.__esModule?ft:{default:ft}}function lt(ft,gt){if(!(ft instanceof gt))throw new TypeError("Cannot call a class as a function")}var ct=ot(2),pt=at(ct),ut=function(){function ft(){lt(this,ft)}return st(ft,[{key:"load",value:function(vt,yt,mt){if(typeof mt=="string"?vt.el=document.querySelector(mt):vt.el=mt,vt.options=it({},pt.default,yt),vt.isInput=vt.el.tagName.toLowerCase()==="input",vt.attr=vt.options.attr,vt.bindInputFocusEvents=vt.options.bindInputFocusEvents,vt.showCursor=vt.isInput?!1:vt.options.showCursor,vt.cursorChar=vt.options.cursorChar,vt.cursorBlinking=!0,vt.elContent=vt.attr?vt.el.getAttribute(vt.attr):vt.el.textContent,vt.contentType=vt.options.contentType,vt.typeSpeed=vt.options.typeSpeed,vt.startDelay=vt.options.startDelay,vt.backSpeed=vt.options.backSpeed,vt.smartBackspace=vt.options.smartBackspace,vt.backDelay=vt.options.backDelay,vt.fadeOut=vt.options.fadeOut,vt.fadeOutClass=vt.options.fadeOutClass,vt.fadeOutDelay=vt.options.fadeOutDelay,vt.isPaused=!1,vt.strings=vt.options.strings.map(function(wt){return wt.trim()}),typeof vt.options.stringsElement=="string"?vt.stringsElement=document.querySelector(vt.options.stringsElement):vt.stringsElement=vt.options.stringsElement,vt.stringsElement){vt.strings=[],vt.stringsElement.style.display="none";var Et=Array.prototype.slice.apply(vt.stringsElement.children),bt=Et.length;if(bt)for(var Ct=0;Ct<bt;Ct+=1){var Tt=Et[Ct];vt.strings.push(Tt.innerHTML.trim())}}vt.strPos=0,vt.arrayPos=0,vt.stopNum=0,vt.loop=vt.options.loop,vt.loopCount=vt.options.loopCount,vt.curLoop=0,vt.shuffle=vt.options.shuffle,vt.sequence=[],vt.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},vt.typingComplete=!1;for(var Ct in vt.strings)vt.sequence[Ct]=Ct;vt.currentElContent=this.getCurrentElContent(vt),vt.autoInsertCss=vt.options.autoInsertCss,this.appendAnimationCss(vt)}},{key:"getCurrentElContent",value:function(vt){var yt="";return vt.attr?yt=vt.el.getAttribute(vt.attr):vt.isInput?yt=vt.el.value:vt.contentType==="html"?yt=vt.el.innerHTML:yt=vt.el.textContent,yt}},{key:"appendAnimationCss",value:function(vt){var yt="data-typed-js-css";if(vt.autoInsertCss&&!(!vt.showCursor&&!vt.fadeOut)&&!document.querySelector("["+yt+"]")){var mt=document.createElement("style");mt.type="text/css",mt.setAttribute(yt,!0);var Et="";vt.showCursor&&(Et+=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `),vt.fadeOut&&(Et+=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `),mt.length!==0&&(mt.innerHTML=Et,document.body.appendChild(mt))}}}]),ft}();nt.default=ut;var ht=new ut;nt.initializer=ht},function(rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(st){},onComplete:function(st){},preStringTyped:function(st,at){},onStringTyped:function(st,at){},onLastStringBackspaced:function(st){},onTypingPaused:function(st,at){},onTypingResumed:function(st,at){},onReset:function(st){},onStop:function(st,at){},onStart:function(st,at){},onDestroy:function(st){}};nt.default=ot,rt.exports=nt.default},function(rt,nt){Object.defineProperty(nt,"__esModule",{value:!0});var ot=function(){function lt(ct,pt){for(var ut=0;ut<pt.length;ut++){var ht=pt[ut];ht.enumerable=ht.enumerable||!1,ht.configurable=!0,"value"in ht&&(ht.writable=!0),Object.defineProperty(ct,ht.key,ht)}}return function(ct,pt,ut){return pt&&lt(ct.prototype,pt),ut&&lt(ct,ut),ct}}();function it(lt,ct){if(!(lt instanceof ct))throw new TypeError("Cannot call a class as a function")}var st=function(){function lt(){it(this,lt)}return ot(lt,[{key:"typeHtmlChars",value:function(pt,ut,ht){if(ht.contentType!=="html")return ut;var ft=pt.substr(ut).charAt(0);if(ft==="<"||ft==="&"){var gt="";for(ft==="<"?gt=">":gt=";";pt.substr(ut+1).charAt(0)!==gt&&(ut++,!(ut+1>pt.length)););ut++}return ut}},{key:"backSpaceHtmlChars",value:function(pt,ut,ht){if(ht.contentType!=="html")return ut;var ft=pt.substr(ut).charAt(0);if(ft===">"||ft===";"){var gt="";for(ft===">"?gt="<":gt="&";pt.substr(ut-1).charAt(0)!==gt&&(ut--,!(ut<0)););ut--}return ut}}]),lt}();nt.default=st;var at=new st;nt.htmlParser=at}])})})(typed);const Typed=getDefaultExportFromCjs(typedExports),TypedEffect=({sentences:_e,title:et})=>{const rt=React$1.useRef(null),nt=React$1.useRef(null);return React$1.useEffect(()=>{const ot={strings:_e,typeSpeed:100,backSpeed:100,loop:!0};return nt.current=new Typed(rt.current,ot),()=>{nt.current.destroy()}},[_e]),jsxs("div",{className:"wrap",style:{width:"500px",height:"180px"},children:[jsx(Typography$1,{variant:"h1",children:et}),jsx("div",{className:"type-wrap",children:jsx(Typography$1,{variant:"h5",children:jsx("span",{ref:rt})})})]})},UserLayoutRoot=styled$1("div")(({theme:_e})=>({backgroundColor:_e.palette.background.body})),sentences=["Create a detailed project plan with specific milestones and deadlines to keep yourself on track.","Break down complex tasks into smaller, more manageable ones to make the project less daunting.","Set priorities and focus on the most important tasks first.","Eliminate distractions by minimizing interruptions, turning off notifications, and setting specific work hours.","Consider delegating tasks to team members or outsourcing certain aspects of the project to speed up the process.","Don't be afraid to ask for help or seek guidance from more experienced colleagues or mentors.","Stay motivated and engaged by celebrating small successes and milestones along the way."];function UserLayout(){return jsxs(UserLayoutRoot,{children:[jsxs(Box$1,{sx:{display:"flex",flex:"1 1 auto",background:`url(${bgImg}) center top / cover transparent`,flexDirection:"column",width:"100%",backgroundSize:"cover",height:"75vh",color:theme$1.palette.background.paper},children:[jsx(Box$1,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"50px",height:"100%"},children:jsx(TypedEffect,{sentences,title:"GrabIn"})}),jsx(UserNavbar,{})]}),jsx(Box$1,{children:jsx(Paper$1,{sx:{margin:"-64px 24px 32px",minHeight:"55vh",boxShadow:"rgb(0 0 0 / 5%) 0rem 1.25rem 1.6875rem 0rem",backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"saturate(200%) blur(30px)",border:"0px solid rgba(0, 0, 0, 0.125)",backgroundClip:"border-box",overflow:"visible",borderRadius:"0.75rem",padding:"16px"},children:jsx(Outlet,{})})}),jsx(Footer,{})]})}const UserRoutes=[jsxs(Route,{element:jsx(UserLayout,{}),children:[jsx(Route,{path:"/",element:jsx(Home,{})},"home"),",",jsx(Route,{path:"/about-us",element:jsx(AboutUs,{})},"about"),",",jsx(Route,{path:"/contact-us",element:jsx(ContactUs,{})},"contact"),",",jsx(Route,{path:"/unauthorized",element:jsx(Unauthorized,{})}),",",jsx(Route,{path:"/page-not-found",element:jsx(PageNotFound,{})}),",",jsx(Route,{element:jsx(RequireAuth,{allowedRoles:["student","admin"]}),children:jsx(Route,{path:"/quiz",element:jsx(Quiz$1,{})},"quiz")},"Student")]},"UserLayout"),jsx(Route,{element:jsx(RequireAuth,{allowedRoles:["student"]}),children:jsx(Route,{path:"/quiz",children:jsx(Route,{path:"start",element:jsx(AttemptQuiz,{})})},"quiz")},"Student")];/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function round(_e){return _e+.5|0}const lim=(_e,et,rt)=>Math.max(Math.min(_e,rt),et);function p2b(_e){return lim(round(_e*2.55),0,255)}function n2b(_e){return lim(round(_e*255),0,255)}function b2n(_e){return lim(round(_e/2.55)/100,0,1)}function n2p(_e){return lim(round(_e*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=_e=>hex[_e&15],h2=_e=>hex[(_e&240)>>4]+hex[_e&15],eq=_e=>(_e&240)>>4===(_e&15),isShort=_e=>eq(_e.r)&&eq(_e.g)&&eq(_e.b)&&eq(_e.a);function hexParse(_e){var et=_e.length,rt;return _e[0]==="#"&&(et===4||et===5?rt={r:255&map$1[_e[1]]*17,g:255&map$1[_e[2]]*17,b:255&map$1[_e[3]]*17,a:et===5?map$1[_e[4]]*17:255}:(et===7||et===9)&&(rt={r:map$1[_e[1]]<<4|map$1[_e[2]],g:map$1[_e[3]]<<4|map$1[_e[4]],b:map$1[_e[5]]<<4|map$1[_e[6]],a:et===9?map$1[_e[7]]<<4|map$1[_e[8]]:255})),rt}const alpha=(_e,et)=>_e<255?et(_e):"";function hexString(_e){var et=isShort(_e)?h1:h2;return _e?"#"+et(_e.r)+et(_e.g)+et(_e.b)+alpha(_e.a,et):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(_e,et,rt){const nt=et*Math.min(rt,1-rt),ot=(it,st=(it+_e/30)%12)=>rt-nt*Math.max(Math.min(st-3,9-st,1),-1);return[ot(0),ot(8),ot(4)]}function hsv2rgbn(_e,et,rt){const nt=(ot,it=(ot+_e/60)%6)=>rt-rt*et*Math.max(Math.min(it,4-it,1),0);return[nt(5),nt(3),nt(1)]}function hwb2rgbn(_e,et,rt){const nt=hsl2rgbn(_e,1,.5);let ot;for(et+rt>1&&(ot=1/(et+rt),et*=ot,rt*=ot),ot=0;ot<3;ot++)nt[ot]*=1-et-rt,nt[ot]+=et;return nt}function hueValue(_e,et,rt,nt,ot){return _e===ot?(et-rt)/nt+(et<rt?6:0):et===ot?(rt-_e)/nt+2:(_e-et)/nt+4}function rgb2hsl(_e){const rt=_e.r/255,nt=_e.g/255,ot=_e.b/255,it=Math.max(rt,nt,ot),st=Math.min(rt,nt,ot),at=(it+st)/2;let lt,ct,pt;return it!==st&&(pt=it-st,ct=at>.5?pt/(2-it-st):pt/(it+st),lt=hueValue(rt,nt,ot,pt,it),lt=lt*60+.5),[lt|0,ct||0,at]}function calln(_e,et,rt,nt){return(Array.isArray(et)?_e(et[0],et[1],et[2]):_e(et,rt,nt)).map(n2b)}function hsl2rgb(_e,et,rt){return calln(hsl2rgbn,_e,et,rt)}function hwb2rgb(_e,et,rt){return calln(hwb2rgbn,_e,et,rt)}function hsv2rgb(_e,et,rt){return calln(hsv2rgbn,_e,et,rt)}function hue(_e){return(_e%360+360)%360}function hueParse(_e){const et=HUE_RE.exec(_e);let rt=255,nt;if(!et)return;et[5]!==nt&&(rt=et[6]?p2b(+et[5]):n2b(+et[5]));const ot=hue(+et[2]),it=+et[3]/100,st=+et[4]/100;return et[1]==="hwb"?nt=hwb2rgb(ot,it,st):et[1]==="hsv"?nt=hsv2rgb(ot,it,st):nt=hsl2rgb(ot,it,st),{r:nt[0],g:nt[1],b:nt[2],a:rt}}function rotate(_e,et){var rt=rgb2hsl(_e);rt[0]=hue(rt[0]+et),rt=hsl2rgb(rt),_e.r=rt[0],_e.g=rt[1],_e.b=rt[2]}function hslString(_e){if(!_e)return;const et=rgb2hsl(_e),rt=et[0],nt=n2p(et[1]),ot=n2p(et[2]);return _e.a<255?`hsla(${rt}, ${nt}%, ${ot}%, ${b2n(_e.a)})`:`hsl(${rt}, ${nt}%, ${ot}%)`}const map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const _e={},et=Object.keys(names$1),rt=Object.keys(map$2);let nt,ot,it,st,at;for(nt=0;nt<et.length;nt++){for(st=at=et[nt],ot=0;ot<rt.length;ot++)it=rt[ot],at=at.replace(it,map$2[it]);it=parseInt(names$1[st],16),_e[at]=[it>>16&255,it>>8&255,it&255]}return _e}let names;function nameParse(_e){names||(names=unpack(),names.transparent=[0,0,0,0]);const et=names[_e.toLowerCase()];return et&&{r:et[0],g:et[1],b:et[2],a:et.length===4?et[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(_e){const et=RGB_RE.exec(_e);let rt=255,nt,ot,it;if(et){if(et[7]!==nt){const st=+et[7];rt=et[8]?p2b(st):lim(st*255,0,255)}return nt=+et[1],ot=+et[3],it=+et[5],nt=255&(et[2]?p2b(nt):lim(nt,0,255)),ot=255&(et[4]?p2b(ot):lim(ot,0,255)),it=255&(et[6]?p2b(it):lim(it,0,255)),{r:nt,g:ot,b:it,a:rt}}}function rgbString(_e){return _e&&(_e.a<255?`rgba(${_e.r}, ${_e.g}, ${_e.b}, ${b2n(_e.a)})`:`rgb(${_e.r}, ${_e.g}, ${_e.b})`)}const to=_e=>_e<=.0031308?_e*12.92:Math.pow(_e,1/2.4)*1.055-.055,from=_e=>_e<=.04045?_e/12.92:Math.pow((_e+.055)/1.055,2.4);function interpolate$1(_e,et,rt){const nt=from(b2n(_e.r)),ot=from(b2n(_e.g)),it=from(b2n(_e.b));return{r:n2b(to(nt+rt*(from(b2n(et.r))-nt))),g:n2b(to(ot+rt*(from(b2n(et.g))-ot))),b:n2b(to(it+rt*(from(b2n(et.b))-it))),a:_e.a+rt*(et.a-_e.a)}}function modHSL(_e,et,rt){if(_e){let nt=rgb2hsl(_e);nt[et]=Math.max(0,Math.min(nt[et]+nt[et]*rt,et===0?360:1)),nt=hsl2rgb(nt),_e.r=nt[0],_e.g=nt[1],_e.b=nt[2]}}function clone$1(_e,et){return _e&&Object.assign(et||{},_e)}function fromObject(_e){var et={r:0,g:0,b:0,a:255};return Array.isArray(_e)?_e.length>=3&&(et={r:_e[0],g:_e[1],b:_e[2],a:255},_e.length>3&&(et.a=n2b(_e[3]))):(et=clone$1(_e,{r:0,g:0,b:0,a:1}),et.a=n2b(et.a)),et}function functionParse(_e){return _e.charAt(0)==="r"?rgbParse(_e):hueParse(_e)}class Color{constructor(et){if(et instanceof Color)return et;const rt=typeof et;let nt;rt==="object"?nt=fromObject(et):rt==="string"&&(nt=hexParse(et)||nameParse(et)||functionParse(et)),this._rgb=nt,this._valid=!!nt}get valid(){return this._valid}get rgb(){var et=clone$1(this._rgb);return et&&(et.a=b2n(et.a)),et}set rgb(et){this._rgb=fromObject(et)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(et,rt){if(et){const nt=this.rgb,ot=et.rgb;let it;const st=rt===it?.5:rt,at=2*st-1,lt=nt.a-ot.a,ct=((at*lt===-1?at:(at+lt)/(1+at*lt))+1)/2;it=1-ct,nt.r=255&ct*nt.r+it*ot.r+.5,nt.g=255&ct*nt.g+it*ot.g+.5,nt.b=255&ct*nt.b+it*ot.b+.5,nt.a=st*nt.a+(1-st)*ot.a,this.rgb=nt}return this}interpolate(et,rt){return et&&(this._rgb=interpolate$1(this._rgb,et._rgb,rt)),this}clone(){return new Color(this.rgb)}alpha(et){return this._rgb.a=n2b(et),this}clearer(et){const rt=this._rgb;return rt.a*=1-et,this}greyscale(){const et=this._rgb,rt=round(et.r*.3+et.g*.59+et.b*.11);return et.r=et.g=et.b=rt,this}opaquer(et){const rt=this._rgb;return rt.a*=1+et,this}negate(){const et=this._rgb;return et.r=255-et.r,et.g=255-et.g,et.b=255-et.b,this}lighten(et){return modHSL(this._rgb,2,et),this}darken(et){return modHSL(this._rgb,2,-et),this}saturate(et){return modHSL(this._rgb,1,et),this}desaturate(et){return modHSL(this._rgb,1,-et),this}rotate(et){return rotate(this._rgb,et),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function noop$5(){}const uid=(()=>{let _e=0;return()=>_e++})();function isNullOrUndef(_e){return _e===null||typeof _e>"u"}function isArray(_e){if(Array.isArray&&Array.isArray(_e))return!0;const et=Object.prototype.toString.call(_e);return et.slice(0,7)==="[object"&&et.slice(-6)==="Array]"}function isObject$1(_e){return _e!==null&&Object.prototype.toString.call(_e)==="[object Object]"}function isNumberFinite(_e){return(typeof _e=="number"||_e instanceof Number)&&isFinite(+_e)}function finiteOrDefault(_e,et){return isNumberFinite(_e)?_e:et}function valueOrDefault(_e,et){return typeof _e>"u"?et:_e}const toDimension=(_e,et)=>typeof _e=="string"&&_e.endsWith("%")?parseFloat(_e)/100*et:+_e;function callback(_e,et,rt){if(_e&&typeof _e.call=="function")return _e.apply(rt,et)}function each$1(_e,et,rt,nt){let ot,it,st;if(isArray(_e))if(it=_e.length,nt)for(ot=it-1;ot>=0;ot--)et.call(rt,_e[ot],ot);else for(ot=0;ot<it;ot++)et.call(rt,_e[ot],ot);else if(isObject$1(_e))for(st=Object.keys(_e),it=st.length,ot=0;ot<it;ot++)et.call(rt,_e[st[ot]],st[ot])}function _elementsEqual(_e,et){let rt,nt,ot,it;if(!_e||!et||_e.length!==et.length)return!1;for(rt=0,nt=_e.length;rt<nt;++rt)if(ot=_e[rt],it=et[rt],ot.datasetIndex!==it.datasetIndex||ot.index!==it.index)return!1;return!0}function clone(_e){if(isArray(_e))return _e.map(clone);if(isObject$1(_e)){const et=Object.create(null),rt=Object.keys(_e),nt=rt.length;let ot=0;for(;ot<nt;++ot)et[rt[ot]]=clone(_e[rt[ot]]);return et}return _e}function isValidKey$2(_e){return["__proto__","prototype","constructor"].indexOf(_e)===-1}function _merger(_e,et,rt,nt){if(!isValidKey$2(_e))return;const ot=et[_e],it=rt[_e];isObject$1(ot)&&isObject$1(it)?merge(ot,it,nt):et[_e]=clone(it)}function merge(_e,et,rt){const nt=isArray(et)?et:[et],ot=nt.length;if(!isObject$1(_e))return _e;rt=rt||{};const it=rt.merger||_merger;let st;for(let at=0;at<ot;++at){if(st=nt[at],!isObject$1(st))continue;const lt=Object.keys(st);for(let ct=0,pt=lt.length;ct<pt;++ct)it(lt[ct],_e,st,rt)}return _e}function mergeIf(_e,et){return merge(_e,et,{merger:_mergerIf})}function _mergerIf(_e,et,rt){if(!isValidKey$2(_e))return;const nt=et[_e],ot=rt[_e];isObject$1(nt)&&isObject$1(ot)?mergeIf(nt,ot):Object.prototype.hasOwnProperty.call(et,_e)||(et[_e]=clone(ot))}const keyResolvers={"":_e=>_e,x:_e=>_e.x,y:_e=>_e.y};function _splitKey(_e){const et=_e.split("."),rt=[];let nt="";for(const ot of et)nt+=ot,nt.endsWith("\\")?nt=nt.slice(0,-1)+".":(rt.push(nt),nt="");return rt}function _getKeyResolver(_e){const et=_splitKey(_e);return rt=>{for(const nt of et){if(nt==="")break;rt=rt&&rt[nt]}return rt}}function resolveObjectKey(_e,et){return(keyResolvers[et]||(keyResolvers[et]=_getKeyResolver(et)))(_e)}function _capitalize(_e){return _e.charAt(0).toUpperCase()+_e.slice(1)}const defined=_e=>typeof _e<"u",isFunction$1=_e=>typeof _e=="function",setsEqual=(_e,et)=>{if(_e.size!==et.size)return!1;for(const rt of _e)if(!et.has(rt))return!1;return!0};function _isClickEvent(_e){return _e.type==="mouseup"||_e.type==="click"||_e.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(_e,et,rt){return Math.abs(_e-et)<rt}function niceNum(_e){const et=Math.round(_e);_e=almostEquals(_e,et,_e/1e3)?et:_e;const rt=Math.pow(10,Math.floor(log10(_e))),nt=_e/rt;return(nt<=1?1:nt<=2?2:nt<=5?5:10)*rt}function _factorize(_e){const et=[],rt=Math.sqrt(_e);let nt;for(nt=1;nt<rt;nt++)_e%nt===0&&(et.push(nt),et.push(_e/nt));return rt===(rt|0)&&et.push(rt),et.sort((ot,it)=>ot-it).pop(),et}function isNumber$1(_e){return!isNaN(parseFloat(_e))&&isFinite(_e)}function almostWhole(_e,et){const rt=Math.round(_e);return rt-et<=_e&&rt+et>=_e}function _setMinAndMaxByKey(_e,et,rt){let nt,ot,it;for(nt=0,ot=_e.length;nt<ot;nt++)it=_e[nt][rt],isNaN(it)||(et.min=Math.min(et.min,it),et.max=Math.max(et.max,it))}function toRadians(_e){return _e*(PI/180)}function toDegrees(_e){return _e*(180/PI)}function _decimalPlaces(_e){if(!isNumberFinite(_e))return;let et=1,rt=0;for(;Math.round(_e*et)/et!==_e;)et*=10,rt++;return rt}function getAngleFromPoint(_e,et){const rt=et.x-_e.x,nt=et.y-_e.y,ot=Math.sqrt(rt*rt+nt*nt);let it=Math.atan2(nt,rt);return it<-.5*PI&&(it+=TAU),{angle:it,distance:ot}}function distanceBetweenPoints(_e,et){return Math.sqrt(Math.pow(et.x-_e.x,2)+Math.pow(et.y-_e.y,2))}function _normalizeAngle(_e){return(_e%TAU+TAU)%TAU}function _angleBetween(_e,et,rt,nt){const ot=_normalizeAngle(_e),it=_normalizeAngle(et),st=_normalizeAngle(rt),at=_normalizeAngle(it-ot),lt=_normalizeAngle(st-ot),ct=_normalizeAngle(ot-it),pt=_normalizeAngle(ot-st);return ot===it||ot===st||nt&&it===st||at>lt&&ct<pt}function _limitValue(_e,et,rt){return Math.max(et,Math.min(rt,_e))}function _int16Range(_e){return _limitValue(_e,-32768,32767)}function _isBetween(_e,et,rt,nt=1e-6){return _e>=Math.min(et,rt)-nt&&_e<=Math.max(et,rt)+nt}function _lookup(_e,et,rt){rt=rt||(st=>_e[st]<et);let nt=_e.length-1,ot=0,it;for(;nt-ot>1;)it=ot+nt>>1,rt(it)?ot=it:nt=it;return{lo:ot,hi:nt}}const _lookupByKey=(_e,et,rt,nt)=>_lookup(_e,rt,nt?ot=>{const it=_e[ot][et];return it<rt||it===rt&&_e[ot+1][et]===rt}:ot=>_e[ot][et]<rt),_rlookupByKey=(_e,et,rt)=>_lookup(_e,rt,nt=>_e[nt][et]>=rt);function _filterBetween(_e,et,rt){let nt=0,ot=_e.length;for(;nt<ot&&_e[nt]<et;)nt++;for(;ot>nt&&_e[ot-1]>rt;)ot--;return nt>0||ot<_e.length?_e.slice(nt,ot):_e}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(_e,et){if(_e._chartjs){_e._chartjs.listeners.push(et);return}Object.defineProperty(_e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[et]}}),arrayEvents.forEach(rt=>{const nt="_onData"+_capitalize(rt),ot=_e[rt];Object.defineProperty(_e,rt,{configurable:!0,enumerable:!1,value(...it){const st=ot.apply(this,it);return _e._chartjs.listeners.forEach(at=>{typeof at[nt]=="function"&&at[nt](...it)}),st}})})}function unlistenArrayEvents(_e,et){const rt=_e._chartjs;if(!rt)return;const nt=rt.listeners,ot=nt.indexOf(et);ot!==-1&&nt.splice(ot,1),!(nt.length>0)&&(arrayEvents.forEach(it=>{delete _e[it]}),delete _e._chartjs)}function _arrayUnique(_e){const et=new Set;let rt,nt;for(rt=0,nt=_e.length;rt<nt;++rt)et.add(_e[rt]);return et.size===nt?_e:Array.from(et)}const requestAnimFrame=function(){return typeof window>"u"?function(_e){return _e()}:window.requestAnimationFrame}();function throttled(_e,et){let rt=[],nt=!1;return function(...ot){rt=ot,nt||(nt=!0,requestAnimFrame.call(window,()=>{nt=!1,_e.apply(et,rt)}))}}function debounce(_e,et){let rt;return function(...nt){return et?(clearTimeout(rt),rt=setTimeout(_e,et,nt)):_e.apply(this,nt),et}}const _toLeftRightCenter=_e=>_e==="start"?"left":_e==="end"?"right":"center",_alignStartEnd=(_e,et,rt)=>_e==="start"?et:_e==="end"?rt:(et+rt)/2,atEdge=_e=>_e===0||_e===1,elasticIn=(_e,et,rt)=>-(Math.pow(2,10*(_e-=1))*Math.sin((_e-et)*TAU/rt)),elasticOut=(_e,et,rt)=>Math.pow(2,-10*_e)*Math.sin((_e-et)*TAU/rt)+1,effects={linear:_e=>_e,easeInQuad:_e=>_e*_e,easeOutQuad:_e=>-_e*(_e-2),easeInOutQuad:_e=>(_e/=.5)<1?.5*_e*_e:-.5*(--_e*(_e-2)-1),easeInCubic:_e=>_e*_e*_e,easeOutCubic:_e=>(_e-=1)*_e*_e+1,easeInOutCubic:_e=>(_e/=.5)<1?.5*_e*_e*_e:.5*((_e-=2)*_e*_e+2),easeInQuart:_e=>_e*_e*_e*_e,easeOutQuart:_e=>-((_e-=1)*_e*_e*_e-1),easeInOutQuart:_e=>(_e/=.5)<1?.5*_e*_e*_e*_e:-.5*((_e-=2)*_e*_e*_e-2),easeInQuint:_e=>_e*_e*_e*_e*_e,easeOutQuint:_e=>(_e-=1)*_e*_e*_e*_e+1,easeInOutQuint:_e=>(_e/=.5)<1?.5*_e*_e*_e*_e*_e:.5*((_e-=2)*_e*_e*_e*_e+2),easeInSine:_e=>-Math.cos(_e*HALF_PI)+1,easeOutSine:_e=>Math.sin(_e*HALF_PI),easeInOutSine:_e=>-.5*(Math.cos(PI*_e)-1),easeInExpo:_e=>_e===0?0:Math.pow(2,10*(_e-1)),easeOutExpo:_e=>_e===1?1:-Math.pow(2,-10*_e)+1,easeInOutExpo:_e=>atEdge(_e)?_e:_e<.5?.5*Math.pow(2,10*(_e*2-1)):.5*(-Math.pow(2,-10*(_e*2-1))+2),easeInCirc:_e=>_e>=1?_e:-(Math.sqrt(1-_e*_e)-1),easeOutCirc:_e=>Math.sqrt(1-(_e-=1)*_e),easeInOutCirc:_e=>(_e/=.5)<1?-.5*(Math.sqrt(1-_e*_e)-1):.5*(Math.sqrt(1-(_e-=2)*_e)+1),easeInElastic:_e=>atEdge(_e)?_e:elasticIn(_e,.075,.3),easeOutElastic:_e=>atEdge(_e)?_e:elasticOut(_e,.075,.3),easeInOutElastic(_e){return atEdge(_e)?_e:_e<.5?.5*elasticIn(_e*2,.1125,.45):.5+.5*elasticOut(_e*2-1,.1125,.45)},easeInBack(_e){return _e*_e*((1.70158+1)*_e-1.70158)},easeOutBack(_e){return(_e-=1)*_e*((1.70158+1)*_e+1.70158)+1},easeInOutBack(_e){let et=1.70158;return(_e/=.5)<1?.5*(_e*_e*(((et*=1.525)+1)*_e-et)):.5*((_e-=2)*_e*(((et*=1.525)+1)*_e+et)+2)},easeInBounce:_e=>1-effects.easeOutBounce(1-_e),easeOutBounce(_e){return _e<1/2.75?7.5625*_e*_e:_e<2/2.75?7.5625*(_e-=1.5/2.75)*_e+.75:_e<2.5/2.75?7.5625*(_e-=2.25/2.75)*_e+.9375:7.5625*(_e-=2.625/2.75)*_e+.984375},easeInOutBounce:_e=>_e<.5?effects.easeInBounce(_e*2)*.5:effects.easeOutBounce(_e*2-1)*.5+.5};function isPatternOrGradient(_e){if(_e&&typeof _e=="object"){const et=_e.toString();return et==="[object CanvasPattern]"||et==="[object CanvasGradient]"}return!1}function color(_e){return isPatternOrGradient(_e)?_e:new Color(_e)}function getHoverColor(_e){return isPatternOrGradient(_e)?_e:new Color(_e).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(_e){_e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),_e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:et=>et!=="onProgress"&&et!=="onComplete"&&et!=="fn"}),_e.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),_e.describe("animations",{_fallback:"animation"}),_e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:et=>et|0}}}})}function applyLayoutsDefaults(_e){_e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(_e,et){et=et||{};const rt=_e+JSON.stringify(et);let nt=intlCache.get(rt);return nt||(nt=new Intl.NumberFormat(_e,et),intlCache.set(rt,nt)),nt}function formatNumber(_e,et,rt){return getNumberFormat(et,rt).format(_e)}const formatters={values(_e){return isArray(_e)?_e:""+_e},numeric(_e,et,rt){if(_e===0)return"0";const nt=this.chart.options.locale;let ot,it=_e;if(rt.length>1){const ct=Math.max(Math.abs(rt[0].value),Math.abs(rt[rt.length-1].value));(ct<1e-4||ct>1e15)&&(ot="scientific"),it=calculateDelta(_e,rt)}const st=log10(Math.abs(it)),at=Math.max(Math.min(-1*Math.floor(st),20),0),lt={notation:ot,minimumFractionDigits:at,maximumFractionDigits:at};return Object.assign(lt,this.options.ticks.format),formatNumber(_e,nt,lt)},logarithmic(_e,et,rt){if(_e===0)return"0";const nt=rt[et].significand||_e/Math.pow(10,Math.floor(log10(_e)));return[1,2,3,5,10,15].includes(nt)||et>.8*rt.length?formatters.numeric.call(this,_e,et,rt):""}};function calculateDelta(_e,et){let rt=et.length>3?et[2].value-et[1].value:et[1].value-et[0].value;return Math.abs(rt)>=1&&_e!==Math.floor(_e)&&(rt=_e-Math.floor(_e)),rt}var Ticks={formatters};function applyScaleDefaults(_e){_e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(et,rt)=>rt.lineWidth,tickColor:(et,rt)=>rt.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),_e.route("scale.ticks","color","","color"),_e.route("scale.grid","color","","borderColor"),_e.route("scale.border","color","","borderColor"),_e.route("scale.title","color","","color"),_e.describe("scale",{_fallback:!1,_scriptable:et=>!et.startsWith("before")&&!et.startsWith("after")&&et!=="callback"&&et!=="parser",_indexable:et=>et!=="borderDash"&&et!=="tickBorderDash"&&et!=="dash"}),_e.describe("scales",{_fallback:"scale"}),_e.describe("scale.ticks",{_scriptable:et=>et!=="backdropPadding"&&et!=="callback",_indexable:et=>et!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(_e,et){if(!et)return _e;const rt=et.split(".");for(let nt=0,ot=rt.length;nt<ot;++nt){const it=rt[nt];_e=_e[it]||(_e[it]=Object.create(null))}return _e}function set(_e,et,rt){return typeof et=="string"?merge(getScope$1(_e,et),rt):merge(getScope$1(_e,""),et)}class Defaults{constructor(et,rt){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=nt=>nt.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(nt,ot)=>getHoverColor(ot.backgroundColor),this.hoverBorderColor=(nt,ot)=>getHoverColor(ot.borderColor),this.hoverColor=(nt,ot)=>getHoverColor(ot.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(et),this.apply(rt)}set(et,rt){return set(this,et,rt)}get(et){return getScope$1(this,et)}describe(et,rt){return set(descriptors,et,rt)}override(et,rt){return set(overrides,et,rt)}route(et,rt,nt,ot){const it=getScope$1(this,et),st=getScope$1(this,nt),at="_"+rt;Object.defineProperties(it,{[at]:{value:it[rt],writable:!0},[rt]:{enumerable:!0,get(){const lt=this[at],ct=st[ot];return isObject$1(lt)?Object.assign({},ct,lt):valueOrDefault(lt,ct)},set(lt){this[at]=lt}}})}apply(et){et.forEach(rt=>rt(this))}}var defaults=new Defaults({_scriptable:_e=>!_e.startsWith("on"),_indexable:_e=>_e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(_e){return!_e||isNullOrUndef(_e.size)||isNullOrUndef(_e.family)?null:(_e.style?_e.style+" ":"")+(_e.weight?_e.weight+" ":"")+_e.size+"px "+_e.family}function _measureText(_e,et,rt,nt,ot){let it=et[ot];return it||(it=et[ot]=_e.measureText(ot).width,rt.push(ot)),it>nt&&(nt=it),nt}function _longestText(_e,et,rt,nt){nt=nt||{};let ot=nt.data=nt.data||{},it=nt.garbageCollect=nt.garbageCollect||[];nt.font!==et&&(ot=nt.data={},it=nt.garbageCollect=[],nt.font=et),_e.save(),_e.font=et;let st=0;const at=rt.length;let lt,ct,pt,ut,ht;for(lt=0;lt<at;lt++)if(ut=rt[lt],ut!=null&&isArray(ut)!==!0)st=_measureText(_e,ot,it,st,ut);else if(isArray(ut))for(ct=0,pt=ut.length;ct<pt;ct++)ht=ut[ct],ht!=null&&!isArray(ht)&&(st=_measureText(_e,ot,it,st,ht));_e.restore();const ft=it.length/2;if(ft>rt.length){for(lt=0;lt<ft;lt++)delete ot[it[lt]];it.splice(0,ft)}return st}function _alignPixel(_e,et,rt){const nt=_e.currentDevicePixelRatio,ot=rt!==0?Math.max(rt/2,.5):0;return Math.round((et-ot)*nt)/nt+ot}function clearCanvas(_e,et){et=et||_e.getContext("2d"),et.save(),et.resetTransform(),et.clearRect(0,0,_e.width,_e.height),et.restore()}function drawPoint(_e,et,rt,nt){drawPointLegend(_e,et,rt,nt,null)}function drawPointLegend(_e,et,rt,nt,ot){let it,st,at,lt,ct,pt,ut,ht;const ft=et.pointStyle,gt=et.rotation,vt=et.radius;let yt=(gt||0)*RAD_PER_DEG;if(ft&&typeof ft=="object"&&(it=ft.toString(),it==="[object HTMLImageElement]"||it==="[object HTMLCanvasElement]")){_e.save(),_e.translate(rt,nt),_e.rotate(yt),_e.drawImage(ft,-ft.width/2,-ft.height/2,ft.width,ft.height),_e.restore();return}if(!(isNaN(vt)||vt<=0)){switch(_e.beginPath(),ft){default:ot?_e.ellipse(rt,nt,ot/2,vt,0,0,TAU):_e.arc(rt,nt,vt,0,TAU),_e.closePath();break;case"triangle":pt=ot?ot/2:vt,_e.moveTo(rt+Math.sin(yt)*pt,nt-Math.cos(yt)*vt),yt+=TWO_THIRDS_PI,_e.lineTo(rt+Math.sin(yt)*pt,nt-Math.cos(yt)*vt),yt+=TWO_THIRDS_PI,_e.lineTo(rt+Math.sin(yt)*pt,nt-Math.cos(yt)*vt),_e.closePath();break;case"rectRounded":ct=vt*.516,lt=vt-ct,st=Math.cos(yt+QUARTER_PI)*lt,ut=Math.cos(yt+QUARTER_PI)*(ot?ot/2-ct:lt),at=Math.sin(yt+QUARTER_PI)*lt,ht=Math.sin(yt+QUARTER_PI)*(ot?ot/2-ct:lt),_e.arc(rt-ut,nt-at,ct,yt-PI,yt-HALF_PI),_e.arc(rt+ht,nt-st,ct,yt-HALF_PI,yt),_e.arc(rt+ut,nt+at,ct,yt,yt+HALF_PI),_e.arc(rt-ht,nt+st,ct,yt+HALF_PI,yt+PI),_e.closePath();break;case"rect":if(!gt){lt=Math.SQRT1_2*vt,pt=ot?ot/2:lt,_e.rect(rt-pt,nt-lt,2*pt,2*lt);break}yt+=QUARTER_PI;case"rectRot":ut=Math.cos(yt)*(ot?ot/2:vt),st=Math.cos(yt)*vt,at=Math.sin(yt)*vt,ht=Math.sin(yt)*(ot?ot/2:vt),_e.moveTo(rt-ut,nt-at),_e.lineTo(rt+ht,nt-st),_e.lineTo(rt+ut,nt+at),_e.lineTo(rt-ht,nt+st),_e.closePath();break;case"crossRot":yt+=QUARTER_PI;case"cross":ut=Math.cos(yt)*(ot?ot/2:vt),st=Math.cos(yt)*vt,at=Math.sin(yt)*vt,ht=Math.sin(yt)*(ot?ot/2:vt),_e.moveTo(rt-ut,nt-at),_e.lineTo(rt+ut,nt+at),_e.moveTo(rt+ht,nt-st),_e.lineTo(rt-ht,nt+st);break;case"star":ut=Math.cos(yt)*(ot?ot/2:vt),st=Math.cos(yt)*vt,at=Math.sin(yt)*vt,ht=Math.sin(yt)*(ot?ot/2:vt),_e.moveTo(rt-ut,nt-at),_e.lineTo(rt+ut,nt+at),_e.moveTo(rt+ht,nt-st),_e.lineTo(rt-ht,nt+st),yt+=QUARTER_PI,ut=Math.cos(yt)*(ot?ot/2:vt),st=Math.cos(yt)*vt,at=Math.sin(yt)*vt,ht=Math.sin(yt)*(ot?ot/2:vt),_e.moveTo(rt-ut,nt-at),_e.lineTo(rt+ut,nt+at),_e.moveTo(rt+ht,nt-st),_e.lineTo(rt-ht,nt+st);break;case"line":st=ot?ot/2:Math.cos(yt)*vt,at=Math.sin(yt)*vt,_e.moveTo(rt-st,nt-at),_e.lineTo(rt+st,nt+at);break;case"dash":_e.moveTo(rt,nt),_e.lineTo(rt+Math.cos(yt)*(ot?ot/2:vt),nt+Math.sin(yt)*vt);break;case!1:_e.closePath();break}_e.fill(),et.borderWidth>0&&_e.stroke()}}function _isPointInArea(_e,et,rt){return rt=rt||.5,!et||_e&&_e.x>et.left-rt&&_e.x<et.right+rt&&_e.y>et.top-rt&&_e.y<et.bottom+rt}function clipArea(_e,et){_e.save(),_e.beginPath(),_e.rect(et.left,et.top,et.right-et.left,et.bottom-et.top),_e.clip()}function unclipArea(_e){_e.restore()}function renderText(_e,et,rt,nt,ot,it={}){const st=isArray(et)?et:[et],at=it.strokeWidth>0&&it.strokeColor!=="";let lt,ct;for(_e.save(),_e.font=ot.string,setRenderOpts(_e,it),lt=0;lt<st.length;++lt)ct=st[lt],it.backdrop&&drawBackdrop(_e,it.backdrop),at&&(it.strokeColor&&(_e.strokeStyle=it.strokeColor),isNullOrUndef(it.strokeWidth)||(_e.lineWidth=it.strokeWidth),_e.strokeText(ct,rt,nt,it.maxWidth)),_e.fillText(ct,rt,nt,it.maxWidth),decorateText(_e,rt,nt,ct,it),nt+=ot.lineHeight;_e.restore()}function setRenderOpts(_e,et){et.translation&&_e.translate(et.translation[0],et.translation[1]),isNullOrUndef(et.rotation)||_e.rotate(et.rotation),et.color&&(_e.fillStyle=et.color),et.textAlign&&(_e.textAlign=et.textAlign),et.textBaseline&&(_e.textBaseline=et.textBaseline)}function decorateText(_e,et,rt,nt,ot){if(ot.strikethrough||ot.underline){const it=_e.measureText(nt),st=et-it.actualBoundingBoxLeft,at=et+it.actualBoundingBoxRight,lt=rt-it.actualBoundingBoxAscent,ct=rt+it.actualBoundingBoxDescent,pt=ot.strikethrough?(lt+ct)/2:ct;_e.strokeStyle=_e.fillStyle,_e.beginPath(),_e.lineWidth=ot.decorationWidth||2,_e.moveTo(st,pt),_e.lineTo(at,pt),_e.stroke()}}function drawBackdrop(_e,et){const rt=_e.fillStyle;_e.fillStyle=et.color,_e.fillRect(et.left,et.top,et.width,et.height),_e.fillStyle=rt}function addRoundedRectPath(_e,et){const{x:rt,y:nt,w:ot,h:it,radius:st}=et;_e.arc(rt+st.topLeft,nt+st.topLeft,st.topLeft,-HALF_PI,PI,!0),_e.lineTo(rt,nt+it-st.bottomLeft),_e.arc(rt+st.bottomLeft,nt+it-st.bottomLeft,st.bottomLeft,PI,HALF_PI,!0),_e.lineTo(rt+ot-st.bottomRight,nt+it),_e.arc(rt+ot-st.bottomRight,nt+it-st.bottomRight,st.bottomRight,HALF_PI,0,!0),_e.lineTo(rt+ot,nt+st.topRight),_e.arc(rt+ot-st.topRight,nt+st.topRight,st.topRight,0,-HALF_PI,!0),_e.lineTo(rt+st.topLeft,nt)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(_e,et){const rt=(""+_e).match(LINE_HEIGHT);if(!rt||rt[1]==="normal")return et*1.2;switch(_e=+rt[2],rt[3]){case"px":return _e;case"%":_e/=100;break}return et*_e}const numberOrZero=_e=>+_e||0;function _readValueToProps(_e,et){const rt={},nt=isObject$1(et),ot=nt?Object.keys(et):et,it=isObject$1(_e)?nt?st=>valueOrDefault(_e[st],_e[et[st]]):st=>_e[st]:()=>_e;for(const st of ot)rt[st]=numberOrZero(it(st));return rt}function toTRBL(_e){return _readValueToProps(_e,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(_e){return _readValueToProps(_e,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(_e){const et=toTRBL(_e);return et.width=et.left+et.right,et.height=et.top+et.bottom,et}function toFont(_e,et){_e=_e||{},et=et||defaults.font;let rt=valueOrDefault(_e.size,et.size);typeof rt=="string"&&(rt=parseInt(rt,10));let nt=valueOrDefault(_e.style,et.style);nt&&!(""+nt).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+nt+'"'),nt=void 0);const ot={family:valueOrDefault(_e.family,et.family),lineHeight:toLineHeight(valueOrDefault(_e.lineHeight,et.lineHeight),rt),size:rt,style:nt,weight:valueOrDefault(_e.weight,et.weight),string:""};return ot.string=toFontString(ot),ot}function resolve(_e,et,rt,nt){let ot=!0,it,st,at;for(it=0,st=_e.length;it<st;++it)if(at=_e[it],at!==void 0&&(et!==void 0&&typeof at=="function"&&(at=at(et),ot=!1),rt!==void 0&&isArray(at)&&(at=at[rt%at.length],ot=!1),at!==void 0))return nt&&!ot&&(nt.cacheable=!1),at}function _addGrace(_e,et,rt){const{min:nt,max:ot}=_e,it=toDimension(et,(ot-nt)/2),st=(at,lt)=>rt&&at===0?0:at+lt;return{min:st(nt,-Math.abs(it)),max:st(ot,it)}}function createContext(_e,et){return Object.assign(Object.create(_e),et)}function _createResolver(_e,et=[""],rt=_e,nt,ot=()=>_e[0]){defined(nt)||(nt=_resolve("_fallback",_e));const it={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:_e,_rootScopes:rt,_fallback:nt,_getTarget:ot,override:st=>_createResolver([st,..._e],et,rt,nt)};return new Proxy(it,{deleteProperty(st,at){return delete st[at],delete st._keys,delete _e[0][at],!0},get(st,at){return _cached(st,at,()=>_resolveWithPrefixes(at,et,_e,st))},getOwnPropertyDescriptor(st,at){return Reflect.getOwnPropertyDescriptor(st._scopes[0],at)},getPrototypeOf(){return Reflect.getPrototypeOf(_e[0])},has(st,at){return getKeysFromAllScopes(st).includes(at)},ownKeys(st){return getKeysFromAllScopes(st)},set(st,at,lt){const ct=st._storage||(st._storage=ot());return st[at]=ct[at]=lt,delete st._keys,!0}})}function _attachContext(_e,et,rt,nt){const ot={_cacheable:!1,_proxy:_e,_context:et,_subProxy:rt,_stack:new Set,_descriptors:_descriptors(_e,nt),setContext:it=>_attachContext(_e,it,rt,nt),override:it=>_attachContext(_e.override(it),et,rt,nt)};return new Proxy(ot,{deleteProperty(it,st){return delete it[st],delete _e[st],!0},get(it,st,at){return _cached(it,st,()=>_resolveWithContext(it,st,at))},getOwnPropertyDescriptor(it,st){return it._descriptors.allKeys?Reflect.has(_e,st)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(_e,st)},getPrototypeOf(){return Reflect.getPrototypeOf(_e)},has(it,st){return Reflect.has(_e,st)},ownKeys(){return Reflect.ownKeys(_e)},set(it,st,at){return _e[st]=at,delete it[st],!0}})}function _descriptors(_e,et={scriptable:!0,indexable:!0}){const{_scriptable:rt=et.scriptable,_indexable:nt=et.indexable,_allKeys:ot=et.allKeys}=_e;return{allKeys:ot,scriptable:rt,indexable:nt,isScriptable:isFunction$1(rt)?rt:()=>rt,isIndexable:isFunction$1(nt)?nt:()=>nt}}const readKey=(_e,et)=>_e?_e+_capitalize(et):et,needsSubResolver=(_e,et)=>isObject$1(et)&&_e!=="adapters"&&(Object.getPrototypeOf(et)===null||et.constructor===Object);function _cached(_e,et,rt){if(Object.prototype.hasOwnProperty.call(_e,et))return _e[et];const nt=rt();return _e[et]=nt,nt}function _resolveWithContext(_e,et,rt){const{_proxy:nt,_context:ot,_subProxy:it,_descriptors:st}=_e;let at=nt[et];return isFunction$1(at)&&st.isScriptable(et)&&(at=_resolveScriptable(et,at,_e,rt)),isArray(at)&&at.length&&(at=_resolveArray(et,at,_e,st.isIndexable)),needsSubResolver(et,at)&&(at=_attachContext(at,ot,it&&it[et],st)),at}function _resolveScriptable(_e,et,rt,nt){const{_proxy:ot,_context:it,_subProxy:st,_stack:at}=rt;if(at.has(_e))throw new Error("Recursion detected: "+Array.from(at).join("->")+"->"+_e);return at.add(_e),et=et(it,st||nt),at.delete(_e),needsSubResolver(_e,et)&&(et=createSubResolver(ot._scopes,ot,_e,et)),et}function _resolveArray(_e,et,rt,nt){const{_proxy:ot,_context:it,_subProxy:st,_descriptors:at}=rt;if(defined(it.index)&&nt(_e))et=et[it.index%et.length];else if(isObject$1(et[0])){const lt=et,ct=ot._scopes.filter(pt=>pt!==lt);et=[];for(const pt of lt){const ut=createSubResolver(ct,ot,_e,pt);et.push(_attachContext(ut,it,st&&st[_e],at))}}return et}function resolveFallback(_e,et,rt){return isFunction$1(_e)?_e(et,rt):_e}const getScope=(_e,et)=>_e===!0?et:typeof _e=="string"?resolveObjectKey(et,_e):void 0;function addScopes(_e,et,rt,nt,ot){for(const it of et){const st=getScope(rt,it);if(st){_e.add(st);const at=resolveFallback(st._fallback,rt,ot);if(defined(at)&&at!==rt&&at!==nt)return at}else if(st===!1&&defined(nt)&&rt!==nt)return null}return!1}function createSubResolver(_e,et,rt,nt){const ot=et._rootScopes,it=resolveFallback(et._fallback,rt,nt),st=[..._e,...ot],at=new Set;at.add(nt);let lt=addScopesFromKey(at,st,rt,it||rt,nt);return lt===null||defined(it)&&it!==rt&&(lt=addScopesFromKey(at,st,it,lt,nt),lt===null)?!1:_createResolver(Array.from(at),[""],ot,it,()=>subGetTarget(et,rt,nt))}function addScopesFromKey(_e,et,rt,nt,ot){for(;rt;)rt=addScopes(_e,et,rt,nt,ot);return rt}function subGetTarget(_e,et,rt){const nt=_e._getTarget();et in nt||(nt[et]={});const ot=nt[et];return isArray(ot)&&isObject$1(rt)?rt:ot||{}}function _resolveWithPrefixes(_e,et,rt,nt){let ot;for(const it of et)if(ot=_resolve(readKey(it,_e),rt),defined(ot))return needsSubResolver(_e,ot)?createSubResolver(rt,nt,_e,ot):ot}function _resolve(_e,et){for(const rt of et){if(!rt)continue;const nt=rt[_e];if(defined(nt))return nt}}function getKeysFromAllScopes(_e){let et=_e._keys;return et||(et=_e._keys=resolveKeysFromAllScopes(_e._scopes)),et}function resolveKeysFromAllScopes(_e){const et=new Set;for(const rt of _e)for(const nt of Object.keys(rt).filter(ot=>!ot.startsWith("_")))et.add(nt);return Array.from(et)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(_e){let et=_e.parentNode;return et&&et.toString()==="[object ShadowRoot]"&&(et=et.host),et}function parseMaxStyle(_e,et,rt){let nt;return typeof _e=="string"?(nt=parseInt(_e,10),_e.indexOf("%")!==-1&&(nt=nt/100*et.parentNode[rt])):nt=_e,nt}const getComputedStyle=_e=>_e.ownerDocument.defaultView.getComputedStyle(_e,null);function getStyle(_e,et){return getComputedStyle(_e).getPropertyValue(et)}const positions=["top","right","bottom","left"];function getPositionedStyle(_e,et,rt){const nt={};rt=rt?"-"+rt:"";for(let ot=0;ot<4;ot++){const it=positions[ot];nt[it]=parseFloat(_e[et+"-"+it+rt])||0}return nt.width=nt.left+nt.right,nt.height=nt.top+nt.bottom,nt}const useOffsetPos=(_e,et,rt)=>(_e>0||et>0)&&(!rt||!rt.shadowRoot);function getCanvasPosition(_e,et){const rt=_e.touches,nt=rt&&rt.length?rt[0]:_e,{offsetX:ot,offsetY:it}=nt;let st=!1,at,lt;if(useOffsetPos(ot,it,_e.target))at=ot,lt=it;else{const ct=et.getBoundingClientRect();at=nt.clientX-ct.left,lt=nt.clientY-ct.top,st=!0}return{x:at,y:lt,box:st}}function getRelativePosition(_e,et){if("native"in _e)return _e;const{canvas:rt,currentDevicePixelRatio:nt}=et,ot=getComputedStyle(rt),it=ot.boxSizing==="border-box",st=getPositionedStyle(ot,"padding"),at=getPositionedStyle(ot,"border","width"),{x:lt,y:ct,box:pt}=getCanvasPosition(_e,rt),ut=st.left+(pt&&at.left),ht=st.top+(pt&&at.top);let{width:ft,height:gt}=et;return it&&(ft-=st.width+at.width,gt-=st.height+at.height),{x:Math.round((lt-ut)/ft*rt.width/nt),y:Math.round((ct-ht)/gt*rt.height/nt)}}function getContainerSize(_e,et,rt){let nt,ot;if(et===void 0||rt===void 0){const it=_getParentNode(_e);if(!it)et=_e.clientWidth,rt=_e.clientHeight;else{const st=it.getBoundingClientRect(),at=getComputedStyle(it),lt=getPositionedStyle(at,"border","width"),ct=getPositionedStyle(at,"padding");et=st.width-ct.width-lt.width,rt=st.height-ct.height-lt.height,nt=parseMaxStyle(at.maxWidth,it,"clientWidth"),ot=parseMaxStyle(at.maxHeight,it,"clientHeight")}}return{width:et,height:rt,maxWidth:nt||INFINITY,maxHeight:ot||INFINITY}}const round1=_e=>Math.round(_e*10)/10;function getMaximumSize(_e,et,rt,nt){const ot=getComputedStyle(_e),it=getPositionedStyle(ot,"margin"),st=parseMaxStyle(ot.maxWidth,_e,"clientWidth")||INFINITY,at=parseMaxStyle(ot.maxHeight,_e,"clientHeight")||INFINITY,lt=getContainerSize(_e,et,rt);let{width:ct,height:pt}=lt;if(ot.boxSizing==="content-box"){const ht=getPositionedStyle(ot,"border","width"),ft=getPositionedStyle(ot,"padding");ct-=ft.width+ht.width,pt-=ft.height+ht.height}return ct=Math.max(0,ct-it.width),pt=Math.max(0,nt?ct/nt:pt-it.height),ct=round1(Math.min(ct,st,lt.maxWidth)),pt=round1(Math.min(pt,at,lt.maxHeight)),ct&&!pt&&(pt=round1(ct/2)),(et!==void 0||rt!==void 0)&&nt&&lt.height&&pt>lt.height&&(pt=lt.height,ct=round1(Math.floor(pt*nt))),{width:ct,height:pt}}function retinaScale(_e,et,rt){const nt=et||1,ot=Math.floor(_e.height*nt),it=Math.floor(_e.width*nt);_e.height=Math.floor(_e.height),_e.width=Math.floor(_e.width);const st=_e.canvas;return st.style&&(rt||!st.style.height&&!st.style.width)&&(st.style.height=`${_e.height}px`,st.style.width=`${_e.width}px`),_e.currentDevicePixelRatio!==nt||st.height!==ot||st.width!==it?(_e.currentDevicePixelRatio=nt,st.height=ot,st.width=it,_e.ctx.setTransform(nt,0,0,nt,0,0),!0):!1}const supportsEventListenerOptions=function(){let _e=!1;try{const et={get passive(){return _e=!0,!1}};window.addEventListener("test",null,et),window.removeEventListener("test",null,et)}catch{}return _e}();function readUsedSize(_e,et){const rt=getStyle(_e,et),nt=rt&&rt.match(/^(\d+)(\.\d+)?px$/);return nt?+nt[1]:void 0}const getRightToLeftAdapter=function(_e,et){return{x(rt){return _e+_e+et-rt},setWidth(rt){et=rt},textAlign(rt){return rt==="center"?rt:rt==="right"?"left":"right"},xPlus(rt,nt){return rt-nt},leftForLtr(rt,nt){return rt-nt}}},getLeftToRightAdapter=function(){return{x(_e){return _e},setWidth(_e){},textAlign(_e){return _e},xPlus(_e,et){return _e+et},leftForLtr(_e,et){return _e}}};function getRtlAdapter(_e,et,rt){return _e?getRightToLeftAdapter(et,rt):getLeftToRightAdapter()}function overrideTextDirection(_e,et){let rt,nt;(et==="ltr"||et==="rtl")&&(rt=_e.canvas.style,nt=[rt.getPropertyValue("direction"),rt.getPropertyPriority("direction")],rt.setProperty("direction",et,"important"),_e.prevTextDirection=nt)}function restoreTextDirection(_e,et){et!==void 0&&(delete _e.prevTextDirection,_e.canvas.style.setProperty("direction",et[0],et[1]))}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(et,rt,nt,ot){const it=rt.listeners[ot],st=rt.duration;it.forEach(at=>at({chart:et,initial:rt.initial,numSteps:st,currentStep:Math.min(nt-rt.start,st)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(et=Date.now()){let rt=0;this._charts.forEach((nt,ot)=>{if(!nt.running||!nt.items.length)return;const it=nt.items;let st=it.length-1,at=!1,lt;for(;st>=0;--st)lt=it[st],lt._active?(lt._total>nt.duration&&(nt.duration=lt._total),lt.tick(et),at=!0):(it[st]=it[it.length-1],it.pop());at&&(ot.draw(),this._notify(ot,nt,et,"progress")),it.length||(nt.running=!1,this._notify(ot,nt,et,"complete"),nt.initial=!1),rt+=it.length}),this._lastDate=et,rt===0&&(this._running=!1)}_getAnims(et){const rt=this._charts;let nt=rt.get(et);return nt||(nt={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},rt.set(et,nt)),nt}listen(et,rt,nt){this._getAnims(et).listeners[rt].push(nt)}add(et,rt){!rt||!rt.length||this._getAnims(et).items.push(...rt)}has(et){return this._getAnims(et).items.length>0}start(et){const rt=this._charts.get(et);rt&&(rt.running=!0,rt.start=Date.now(),rt.duration=rt.items.reduce((nt,ot)=>Math.max(nt,ot._duration),0),this._refresh())}running(et){if(!this._running)return!1;const rt=this._charts.get(et);return!(!rt||!rt.running||!rt.items.length)}stop(et){const rt=this._charts.get(et);if(!rt||!rt.items.length)return;const nt=rt.items;let ot=nt.length-1;for(;ot>=0;--ot)nt[ot].cancel();rt.items=[],this._notify(et,rt,Date.now(),"complete")}remove(et){return this._charts.delete(et)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(_e,et,rt){return rt>.5?et:_e},color(_e,et,rt){const nt=color(_e||transparent),ot=nt.valid&&color(et||transparent);return ot&&ot.valid?ot.mix(nt,rt).hexString():et},number(_e,et,rt){return _e+(et-_e)*rt}};class Animation{constructor(et,rt,nt,ot){const it=rt[nt];ot=resolve([et.to,ot,it,et.from]);const st=resolve([et.from,it,ot]);this._active=!0,this._fn=et.fn||interpolators[et.type||typeof st],this._easing=effects[et.easing]||effects.linear,this._start=Math.floor(Date.now()+(et.delay||0)),this._duration=this._total=Math.floor(et.duration),this._loop=!!et.loop,this._target=rt,this._prop=nt,this._from=st,this._to=ot,this._promises=void 0}active(){return this._active}update(et,rt,nt){if(this._active){this._notify(!1);const ot=this._target[this._prop],it=nt-this._start,st=this._duration-it;this._start=nt,this._duration=Math.floor(Math.max(st,et.duration)),this._total+=it,this._loop=!!et.loop,this._to=resolve([et.to,rt,ot,et.from]),this._from=resolve([et.from,ot,rt])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(et){const rt=et-this._start,nt=this._duration,ot=this._prop,it=this._from,st=this._loop,at=this._to;let lt;if(this._active=it!==at&&(st||rt<nt),!this._active){this._target[ot]=at,this._notify(!0);return}if(rt<0){this._target[ot]=it;return}lt=rt/nt%2,lt=st&&lt>1?2-lt:lt,lt=this._easing(Math.min(1,Math.max(0,lt))),this._target[ot]=this._fn(it,at,lt)}wait(){const et=this._promises||(this._promises=[]);return new Promise((rt,nt)=>{et.push({res:rt,rej:nt})})}_notify(et){const rt=et?"res":"rej",nt=this._promises||[];for(let ot=0;ot<nt.length;ot++)nt[ot][rt]()}}class Animations{constructor(et,rt){this._chart=et,this._properties=new Map,this.configure(rt)}configure(et){if(!isObject$1(et))return;const rt=Object.keys(defaults.animation),nt=this._properties;Object.getOwnPropertyNames(et).forEach(ot=>{const it=et[ot];if(!isObject$1(it))return;const st={};for(const at of rt)st[at]=it[at];(isArray(it.properties)&&it.properties||[ot]).forEach(at=>{(at===ot||!nt.has(at))&&nt.set(at,st)})})}_animateOptions(et,rt){const nt=rt.options,ot=resolveTargetOptions(et,nt);if(!ot)return[];const it=this._createAnimations(ot,nt);return nt.$shared&&awaitAll(et.options.$animations,nt).then(()=>{et.options=nt},()=>{}),it}_createAnimations(et,rt){const nt=this._properties,ot=[],it=et.$animations||(et.$animations={}),st=Object.keys(rt),at=Date.now();let lt;for(lt=st.length-1;lt>=0;--lt){const ct=st[lt];if(ct.charAt(0)==="$")continue;if(ct==="options"){ot.push(...this._animateOptions(et,rt));continue}const pt=rt[ct];let ut=it[ct];const ht=nt.get(ct);if(ut)if(ht&&ut.active()){ut.update(ht,pt,at);continue}else ut.cancel();if(!ht||!ht.duration){et[ct]=pt;continue}it[ct]=ut=new Animation(ht,et,ct,pt),ot.push(ut)}return ot}update(et,rt){if(this._properties.size===0){Object.assign(et,rt);return}const nt=this._createAnimations(et,rt);if(nt.length)return animator.add(this._chart,nt),!0}}function awaitAll(_e,et){const rt=[],nt=Object.keys(et);for(let ot=0;ot<nt.length;ot++){const it=_e[nt[ot]];it&&it.active()&&rt.push(it.wait())}return Promise.all(rt)}function resolveTargetOptions(_e,et){if(!et)return;let rt=_e.options;if(!rt){_e.options=et;return}return rt.$shared&&(_e.options=rt=Object.assign({},rt,{$shared:!1,$animations:{}})),rt}function scaleClip(_e,et){const rt=_e&&_e.options||{},nt=rt.reverse,ot=rt.min===void 0?et:0,it=rt.max===void 0?et:0;return{start:nt?it:ot,end:nt?ot:it}}function defaultClip(_e,et,rt){if(rt===!1)return!1;const nt=scaleClip(_e,rt),ot=scaleClip(et,rt);return{top:ot.end,right:nt.end,bottom:ot.start,left:nt.start}}function toClip(_e){let et,rt,nt,ot;return isObject$1(_e)?(et=_e.top,rt=_e.right,nt=_e.bottom,ot=_e.left):et=rt=nt=ot=_e,{top:et,right:rt,bottom:nt,left:ot,disabled:_e===!1}}function getSortedDatasetIndices(_e,et){const rt=[],nt=_e._getSortedDatasetMetas(et);let ot,it;for(ot=0,it=nt.length;ot<it;++ot)rt.push(nt[ot].index);return rt}function applyStack(_e,et,rt,nt={}){const ot=_e.keys,it=nt.mode==="single";let st,at,lt,ct;if(et!==null){for(st=0,at=ot.length;st<at;++st){if(lt=+ot[st],lt===rt){if(nt.all)continue;break}ct=_e.values[lt],isNumberFinite(ct)&&(it||et===0||sign(et)===sign(ct))&&(et+=ct)}return et}}function convertObjectDataToArray(_e){const et=Object.keys(_e),rt=new Array(et.length);let nt,ot,it;for(nt=0,ot=et.length;nt<ot;++nt)it=et[nt],rt[nt]={x:it,y:_e[it]};return rt}function isStacked(_e,et){const rt=_e&&_e.options.stacked;return rt||rt===void 0&&et.stack!==void 0}function getStackKey(_e,et,rt){return`${_e.id}.${et.id}.${rt.stack||rt.type}`}function getUserBounds(_e){const{min:et,max:rt,minDefined:nt,maxDefined:ot}=_e.getUserBounds();return{min:nt?et:Number.NEGATIVE_INFINITY,max:ot?rt:Number.POSITIVE_INFINITY}}function getOrCreateStack(_e,et,rt){const nt=_e[et]||(_e[et]={});return nt[rt]||(nt[rt]={})}function getLastIndexInStack(_e,et,rt,nt){for(const ot of et.getMatchingVisibleMetas(nt).reverse()){const it=_e[ot.index];if(rt&&it>0||!rt&&it<0)return ot.index}return null}function updateStacks(_e,et){const{chart:rt,_cachedMeta:nt}=_e,ot=rt._stacks||(rt._stacks={}),{iScale:it,vScale:st,index:at}=nt,lt=it.axis,ct=st.axis,pt=getStackKey(it,st,nt),ut=et.length;let ht;for(let ft=0;ft<ut;++ft){const gt=et[ft],{[lt]:vt,[ct]:yt}=gt,mt=gt._stacks||(gt._stacks={});ht=mt[ct]=getOrCreateStack(ot,pt,vt),ht[at]=yt,ht._top=getLastIndexInStack(ht,st,!0,nt.type),ht._bottom=getLastIndexInStack(ht,st,!1,nt.type);const Et=ht._visualValues||(ht._visualValues={});Et[at]=yt}}function getFirstScaleId(_e,et){const rt=_e.scales;return Object.keys(rt).filter(nt=>rt[nt].axis===et).shift()}function createDatasetContext(_e,et){return createContext(_e,{active:!1,dataset:void 0,datasetIndex:et,index:et,mode:"default",type:"dataset"})}function createDataContext(_e,et,rt){return createContext(_e,{active:!1,dataIndex:et,parsed:void 0,raw:void 0,element:rt,index:et,mode:"default",type:"data"})}function clearStacks(_e,et){const rt=_e.controller.index,nt=_e.vScale&&_e.vScale.axis;if(nt){et=et||_e._parsed;for(const ot of et){const it=ot._stacks;if(!it||it[nt]===void 0||it[nt][rt]===void 0)return;delete it[nt][rt],it[nt]._visualValues!==void 0&&it[nt]._visualValues[rt]!==void 0&&delete it[nt]._visualValues[rt]}}}const isDirectUpdateMode=_e=>_e==="reset"||_e==="none",cloneIfNotShared=(_e,et)=>et?_e:Object.assign({},_e),createStack=(_e,et,rt)=>_e&&!et.hidden&&et._stacked&&{keys:getSortedDatasetIndices(rt,!0),values:null};class DatasetController{constructor(et,rt){this.chart=et,this._ctx=et.ctx,this.index=rt,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const et=this._cachedMeta;this.configure(),this.linkScales(),et._stacked=isStacked(et.vScale,et),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(et){this.index!==et&&clearStacks(this._cachedMeta),this.index=et}linkScales(){const et=this.chart,rt=this._cachedMeta,nt=this.getDataset(),ot=(ut,ht,ft,gt)=>ut==="x"?ht:ut==="r"?gt:ft,it=rt.xAxisID=valueOrDefault(nt.xAxisID,getFirstScaleId(et,"x")),st=rt.yAxisID=valueOrDefault(nt.yAxisID,getFirstScaleId(et,"y")),at=rt.rAxisID=valueOrDefault(nt.rAxisID,getFirstScaleId(et,"r")),lt=rt.indexAxis,ct=rt.iAxisID=ot(lt,it,st,at),pt=rt.vAxisID=ot(lt,st,it,at);rt.xScale=this.getScaleForId(it),rt.yScale=this.getScaleForId(st),rt.rScale=this.getScaleForId(at),rt.iScale=this.getScaleForId(ct),rt.vScale=this.getScaleForId(pt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(et){return this.chart.scales[et]}_getOtherScale(et){const rt=this._cachedMeta;return et===rt.iScale?rt.vScale:rt.iScale}reset(){this._update("reset")}_destroy(){const et=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),et._stacked&&clearStacks(et)}_dataCheck(){const et=this.getDataset(),rt=et.data||(et.data=[]),nt=this._data;if(isObject$1(rt))this._data=convertObjectDataToArray(rt);else if(nt!==rt){if(nt){unlistenArrayEvents(nt,this);const ot=this._cachedMeta;clearStacks(ot),ot._parsed=[]}rt&&Object.isExtensible(rt)&&listenArrayEvents(rt,this),this._syncList=[],this._data=rt}}addElements(){const et=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(et.dataset=new this.datasetElementType)}buildOrUpdateElements(et){const rt=this._cachedMeta,nt=this.getDataset();let ot=!1;this._dataCheck();const it=rt._stacked;rt._stacked=isStacked(rt.vScale,rt),rt.stack!==nt.stack&&(ot=!0,clearStacks(rt),rt.stack=nt.stack),this._resyncElements(et),(ot||it!==rt._stacked)&&updateStacks(this,rt._parsed)}configure(){const et=this.chart.config,rt=et.datasetScopeKeys(this._type),nt=et.getOptionScopes(this.getDataset(),rt,!0);this.options=et.createResolver(nt,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(et,rt){const{_cachedMeta:nt,_data:ot}=this,{iScale:it,_stacked:st}=nt,at=it.axis;let lt=et===0&&rt===ot.length?!0:nt._sorted,ct=et>0&&nt._parsed[et-1],pt,ut,ht;if(this._parsing===!1)nt._parsed=ot,nt._sorted=!0,ht=ot;else{isArray(ot[et])?ht=this.parseArrayData(nt,ot,et,rt):isObject$1(ot[et])?ht=this.parseObjectData(nt,ot,et,rt):ht=this.parsePrimitiveData(nt,ot,et,rt);const ft=()=>ut[at]===null||ct&&ut[at]<ct[at];for(pt=0;pt<rt;++pt)nt._parsed[pt+et]=ut=ht[pt],lt&&(ft()&&(lt=!1),ct=ut);nt._sorted=lt}st&&updateStacks(this,ht)}parsePrimitiveData(et,rt,nt,ot){const{iScale:it,vScale:st}=et,at=it.axis,lt=st.axis,ct=it.getLabels(),pt=it===st,ut=new Array(ot);let ht,ft,gt;for(ht=0,ft=ot;ht<ft;++ht)gt=ht+nt,ut[ht]={[at]:pt||it.parse(ct[gt],gt),[lt]:st.parse(rt[gt],gt)};return ut}parseArrayData(et,rt,nt,ot){const{xScale:it,yScale:st}=et,at=new Array(ot);let lt,ct,pt,ut;for(lt=0,ct=ot;lt<ct;++lt)pt=lt+nt,ut=rt[pt],at[lt]={x:it.parse(ut[0],pt),y:st.parse(ut[1],pt)};return at}parseObjectData(et,rt,nt,ot){const{xScale:it,yScale:st}=et,{xAxisKey:at="x",yAxisKey:lt="y"}=this._parsing,ct=new Array(ot);let pt,ut,ht,ft;for(pt=0,ut=ot;pt<ut;++pt)ht=pt+nt,ft=rt[ht],ct[pt]={x:it.parse(resolveObjectKey(ft,at),ht),y:st.parse(resolveObjectKey(ft,lt),ht)};return ct}getParsed(et){return this._cachedMeta._parsed[et]}getDataElement(et){return this._cachedMeta.data[et]}applyStack(et,rt,nt){const ot=this.chart,it=this._cachedMeta,st=rt[et.axis],at={keys:getSortedDatasetIndices(ot,!0),values:rt._stacks[et.axis]._visualValues};return applyStack(at,st,it.index,{mode:nt})}updateRangeFromParsed(et,rt,nt,ot){const it=nt[rt.axis];let st=it===null?NaN:it;const at=ot&&nt._stacks[rt.axis];ot&&at&&(ot.values=at,st=applyStack(ot,it,this._cachedMeta.index)),et.min=Math.min(et.min,st),et.max=Math.max(et.max,st)}getMinMax(et,rt){const nt=this._cachedMeta,ot=nt._parsed,it=nt._sorted&&et===nt.iScale,st=ot.length,at=this._getOtherScale(et),lt=createStack(rt,nt,this.chart),ct={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:pt,max:ut}=getUserBounds(at);let ht,ft;function gt(){ft=ot[ht];const vt=ft[at.axis];return!isNumberFinite(ft[et.axis])||pt>vt||ut<vt}for(ht=0;ht<st&&!(!gt()&&(this.updateRangeFromParsed(ct,et,ft,lt),it));++ht);if(it){for(ht=st-1;ht>=0;--ht)if(!gt()){this.updateRangeFromParsed(ct,et,ft,lt);break}}return ct}getAllParsedValues(et){const rt=this._cachedMeta._parsed,nt=[];let ot,it,st;for(ot=0,it=rt.length;ot<it;++ot)st=rt[ot][et.axis],isNumberFinite(st)&&nt.push(st);return nt}getMaxOverflow(){return!1}getLabelAndValue(et){const rt=this._cachedMeta,nt=rt.iScale,ot=rt.vScale,it=this.getParsed(et);return{label:nt?""+nt.getLabelForValue(it[nt.axis]):"",value:ot?""+ot.getLabelForValue(it[ot.axis]):""}}_update(et){const rt=this._cachedMeta;this.update(et||"default"),rt._clip=toClip(valueOrDefault(this.options.clip,defaultClip(rt.xScale,rt.yScale,this.getMaxOverflow())))}update(et){}draw(){const et=this._ctx,rt=this.chart,nt=this._cachedMeta,ot=nt.data||[],it=rt.chartArea,st=[],at=this._drawStart||0,lt=this._drawCount||ot.length-at,ct=this.options.drawActiveElementsOnTop;let pt;for(nt.dataset&&nt.dataset.draw(et,it,at,lt),pt=at;pt<at+lt;++pt){const ut=ot[pt];ut.hidden||(ut.active&&ct?st.push(ut):ut.draw(et,it))}for(pt=0;pt<st.length;++pt)st[pt].draw(et,it)}getStyle(et,rt){const nt=rt?"active":"default";return et===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(nt):this.resolveDataElementOptions(et||0,nt)}getContext(et,rt,nt){const ot=this.getDataset();let it;if(et>=0&&et<this._cachedMeta.data.length){const st=this._cachedMeta.data[et];it=st.$context||(st.$context=createDataContext(this.getContext(),et,st)),it.parsed=this.getParsed(et),it.raw=ot.data[et],it.index=it.dataIndex=et}else it=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),it.dataset=ot,it.index=it.datasetIndex=this.index;return it.active=!!rt,it.mode=nt,it}resolveDatasetElementOptions(et){return this._resolveElementOptions(this.datasetElementType.id,et)}resolveDataElementOptions(et,rt){return this._resolveElementOptions(this.dataElementType.id,rt,et)}_resolveElementOptions(et,rt="default",nt){const ot=rt==="active",it=this._cachedDataOpts,st=et+"-"+rt,at=it[st],lt=this.enableOptionSharing&&defined(nt);if(at)return cloneIfNotShared(at,lt);const ct=this.chart.config,pt=ct.datasetElementScopeKeys(this._type,et),ut=ot?[`${et}Hover`,"hover",et,""]:[et,""],ht=ct.getOptionScopes(this.getDataset(),pt),ft=Object.keys(defaults.elements[et]),gt=()=>this.getContext(nt,ot,rt),vt=ct.resolveNamedOptions(ht,ft,gt,ut);return vt.$shared&&(vt.$shared=lt,it[st]=Object.freeze(cloneIfNotShared(vt,lt))),vt}_resolveAnimations(et,rt,nt){const ot=this.chart,it=this._cachedDataOpts,st=`animation-${rt}`,at=it[st];if(at)return at;let lt;if(ot.options.animation!==!1){const pt=this.chart.config,ut=pt.datasetAnimationScopeKeys(this._type,rt),ht=pt.getOptionScopes(this.getDataset(),ut);lt=pt.createResolver(ht,this.getContext(et,nt,rt))}const ct=new Animations(ot,lt&&lt.animations);return lt&&lt._cacheable&&(it[st]=Object.freeze(ct)),ct}getSharedOptions(et){if(et.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},et))}includeOptions(et,rt){return!rt||isDirectUpdateMode(et)||this.chart._animationsDisabled}_getSharedOptions(et,rt){const nt=this.resolveDataElementOptions(et,rt),ot=this._sharedOptions,it=this.getSharedOptions(nt),st=this.includeOptions(rt,it)||it!==ot;return this.updateSharedOptions(it,rt,nt),{sharedOptions:it,includeOptions:st}}updateElement(et,rt,nt,ot){isDirectUpdateMode(ot)?Object.assign(et,nt):this._resolveAnimations(rt,ot).update(et,nt)}updateSharedOptions(et,rt,nt){et&&!isDirectUpdateMode(rt)&&this._resolveAnimations(void 0,rt).update(et,nt)}_setStyle(et,rt,nt,ot){et.active=ot;const it=this.getStyle(rt,ot);this._resolveAnimations(rt,nt,ot).update(et,{options:!ot&&this.getSharedOptions(it)||it})}removeHoverStyle(et,rt,nt){this._setStyle(et,nt,"active",!1)}setHoverStyle(et,rt,nt){this._setStyle(et,nt,"active",!0)}_removeDatasetHoverStyle(){const et=this._cachedMeta.dataset;et&&this._setStyle(et,void 0,"active",!1)}_setDatasetHoverStyle(){const et=this._cachedMeta.dataset;et&&this._setStyle(et,void 0,"active",!0)}_resyncElements(et){const rt=this._data,nt=this._cachedMeta.data;for(const[at,lt,ct]of this._syncList)this[at](lt,ct);this._syncList=[];const ot=nt.length,it=rt.length,st=Math.min(it,ot);st&&this.parse(0,st),it>ot?this._insertElements(ot,it-ot,et):it<ot&&this._removeElements(it,ot-it)}_insertElements(et,rt,nt=!0){const ot=this._cachedMeta,it=ot.data,st=et+rt;let at;const lt=ct=>{for(ct.length+=rt,at=ct.length-1;at>=st;at--)ct[at]=ct[at-rt]};for(lt(it),at=et;at<st;++at)it[at]=new this.dataElementType;this._parsing&&lt(ot._parsed),this.parse(et,rt),nt&&this.updateElements(it,et,rt,"reset")}updateElements(et,rt,nt,ot){}_removeElements(et,rt){const nt=this._cachedMeta;if(this._parsing){const ot=nt._parsed.splice(et,rt);nt._stacked&&clearStacks(nt,ot)}nt.data.splice(et,rt)}_sync(et){if(this._parsing)this._syncList.push(et);else{const[rt,nt,ot]=et;this[rt](nt,ot)}this.chart._dataChanges.push([this.index,...et])}_onDataPush(){const et=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-et,et])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(et,rt){rt&&this._sync(["_removeElements",et,rt]);const nt=arguments.length-2;nt&&this._sync(["_insertElements",et,nt])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Un(DatasetController,"defaults",{}),Un(DatasetController,"datasetElementType",null),Un(DatasetController,"dataElementType",null);function getAllScaleValues(_e,et){if(!_e._cache.$bar){const rt=_e.getMatchingVisibleMetas(et);let nt=[];for(let ot=0,it=rt.length;ot<it;ot++)nt=nt.concat(rt[ot].controller.getAllParsedValues(_e));_e._cache.$bar=_arrayUnique(nt.sort((ot,it)=>ot-it))}return _e._cache.$bar}function computeMinSampleSize(_e){const et=_e.iScale,rt=getAllScaleValues(et,_e.type);let nt=et._length,ot,it,st,at;const lt=()=>{st===32767||st===-32768||(defined(at)&&(nt=Math.min(nt,Math.abs(st-at)||nt)),at=st)};for(ot=0,it=rt.length;ot<it;++ot)st=et.getPixelForValue(rt[ot]),lt();for(at=void 0,ot=0,it=et.ticks.length;ot<it;++ot)st=et.getPixelForTick(ot),lt();return nt}function computeFitCategoryTraits(_e,et,rt,nt){const ot=rt.barThickness;let it,st;return isNullOrUndef(ot)?(it=et.min*rt.categoryPercentage,st=rt.barPercentage):(it=ot*nt,st=1),{chunk:it/nt,ratio:st,start:et.pixels[_e]-it/2}}function computeFlexCategoryTraits(_e,et,rt,nt){const ot=et.pixels,it=ot[_e];let st=_e>0?ot[_e-1]:null,at=_e<ot.length-1?ot[_e+1]:null;const lt=rt.categoryPercentage;st===null&&(st=it-(at===null?et.end-et.start:at-it)),at===null&&(at=it+it-st);const ct=it-(it-Math.min(st,at))/2*lt;return{chunk:Math.abs(at-st)/2*lt/nt,ratio:rt.barPercentage,start:ct}}function parseFloatBar(_e,et,rt,nt){const ot=rt.parse(_e[0],nt),it=rt.parse(_e[1],nt),st=Math.min(ot,it),at=Math.max(ot,it);let lt=st,ct=at;Math.abs(st)>Math.abs(at)&&(lt=at,ct=st),et[rt.axis]=ct,et._custom={barStart:lt,barEnd:ct,start:ot,end:it,min:st,max:at}}function parseValue(_e,et,rt,nt){return isArray(_e)?parseFloatBar(_e,et,rt,nt):et[rt.axis]=rt.parse(_e,nt),et}function parseArrayOrPrimitive(_e,et,rt,nt){const ot=_e.iScale,it=_e.vScale,st=ot.getLabels(),at=ot===it,lt=[];let ct,pt,ut,ht;for(ct=rt,pt=rt+nt;ct<pt;++ct)ht=et[ct],ut={},ut[ot.axis]=at||ot.parse(st[ct],ct),lt.push(parseValue(ht,ut,it,ct));return lt}function isFloatBar(_e){return _e&&_e.barStart!==void 0&&_e.barEnd!==void 0}function barSign(_e,et,rt){return _e!==0?sign(_e):(et.isHorizontal()?1:-1)*(et.min>=rt?1:-1)}function borderProps(_e){let et,rt,nt,ot,it;return _e.horizontal?(et=_e.base>_e.x,rt="left",nt="right"):(et=_e.base<_e.y,rt="bottom",nt="top"),et?(ot="end",it="start"):(ot="start",it="end"),{start:rt,end:nt,reverse:et,top:ot,bottom:it}}function setBorderSkipped(_e,et,rt,nt){let ot=et.borderSkipped;const it={};if(!ot){_e.borderSkipped=it;return}if(ot===!0){_e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:st,end:at,reverse:lt,top:ct,bottom:pt}=borderProps(_e);ot==="middle"&&rt&&(_e.enableBorderRadius=!0,(rt._top||0)===nt?ot=ct:(rt._bottom||0)===nt?ot=pt:(it[parseEdge(pt,st,at,lt)]=!0,ot=ct)),it[parseEdge(ot,st,at,lt)]=!0,_e.borderSkipped=it}function parseEdge(_e,et,rt,nt){return nt?(_e=swap(_e,et,rt),_e=startEnd(_e,rt,et)):_e=startEnd(_e,et,rt),_e}function swap(_e,et,rt){return _e===et?rt:_e===rt?et:_e}function startEnd(_e,et,rt){return _e==="start"?et:_e==="end"?rt:_e}function setInflateAmount(_e,{inflateAmount:et},rt){_e.inflateAmount=et==="auto"?rt===1?.33:0:et}class BarController extends DatasetController{parsePrimitiveData(et,rt,nt,ot){return parseArrayOrPrimitive(et,rt,nt,ot)}parseArrayData(et,rt,nt,ot){return parseArrayOrPrimitive(et,rt,nt,ot)}parseObjectData(et,rt,nt,ot){const{iScale:it,vScale:st}=et,{xAxisKey:at="x",yAxisKey:lt="y"}=this._parsing,ct=it.axis==="x"?at:lt,pt=st.axis==="x"?at:lt,ut=[];let ht,ft,gt,vt;for(ht=nt,ft=nt+ot;ht<ft;++ht)vt=rt[ht],gt={},gt[it.axis]=it.parse(resolveObjectKey(vt,ct),ht),ut.push(parseValue(resolveObjectKey(vt,pt),gt,st,ht));return ut}updateRangeFromParsed(et,rt,nt,ot){super.updateRangeFromParsed(et,rt,nt,ot);const it=nt._custom;it&&rt===this._cachedMeta.vScale&&(et.min=Math.min(et.min,it.min),et.max=Math.max(et.max,it.max))}getMaxOverflow(){return 0}getLabelAndValue(et){const rt=this._cachedMeta,{iScale:nt,vScale:ot}=rt,it=this.getParsed(et),st=it._custom,at=isFloatBar(st)?"["+st.start+", "+st.end+"]":""+ot.getLabelForValue(it[ot.axis]);return{label:""+nt.getLabelForValue(it[nt.axis]),value:at}}initialize(){this.enableOptionSharing=!0,super.initialize();const et=this._cachedMeta;et.stack=this.getDataset().stack}update(et){const rt=this._cachedMeta;this.updateElements(rt.data,0,rt.data.length,et)}updateElements(et,rt,nt,ot){const it=ot==="reset",{index:st,_cachedMeta:{vScale:at}}=this,lt=at.getBasePixel(),ct=at.isHorizontal(),pt=this._getRuler(),{sharedOptions:ut,includeOptions:ht}=this._getSharedOptions(rt,ot);for(let ft=rt;ft<rt+nt;ft++){const gt=this.getParsed(ft),vt=it||isNullOrUndef(gt[at.axis])?{base:lt,head:lt}:this._calculateBarValuePixels(ft),yt=this._calculateBarIndexPixels(ft,pt),mt=(gt._stacks||{})[at.axis],Et={horizontal:ct,base:vt.base,enableBorderRadius:!mt||isFloatBar(gt._custom)||st===mt._top||st===mt._bottom,x:ct?vt.head:yt.center,y:ct?yt.center:vt.head,height:ct?yt.size:Math.abs(vt.size),width:ct?Math.abs(vt.size):yt.size};ht&&(Et.options=ut||this.resolveDataElementOptions(ft,et[ft].active?"active":ot));const bt=Et.options||et[ft].options;setBorderSkipped(Et,bt,mt,st),setInflateAmount(Et,bt,pt.ratio),this.updateElement(et[ft],ft,Et,ot)}}_getStacks(et,rt){const{iScale:nt}=this._cachedMeta,ot=nt.getMatchingVisibleMetas(this._type).filter(lt=>lt.controller.options.grouped),it=nt.options.stacked,st=[],at=lt=>{const ct=lt.controller.getParsed(rt),pt=ct&&ct[lt.vScale.axis];if(isNullOrUndef(pt)||isNaN(pt))return!0};for(const lt of ot)if(!(rt!==void 0&&at(lt))&&((it===!1||st.indexOf(lt.stack)===-1||it===void 0&&lt.stack===void 0)&&st.push(lt.stack),lt.index===et))break;return st.length||st.push(void 0),st}_getStackCount(et){return this._getStacks(void 0,et).length}_getStackIndex(et,rt,nt){const ot=this._getStacks(et,nt),it=rt!==void 0?ot.indexOf(rt):-1;return it===-1?ot.length-1:it}_getRuler(){const et=this.options,rt=this._cachedMeta,nt=rt.iScale,ot=[];let it,st;for(it=0,st=rt.data.length;it<st;++it)ot.push(nt.getPixelForValue(this.getParsed(it)[nt.axis],it));const at=et.barThickness;return{min:at||computeMinSampleSize(rt),pixels:ot,start:nt._startPixel,end:nt._endPixel,stackCount:this._getStackCount(),scale:nt,grouped:et.grouped,ratio:at?1:et.categoryPercentage*et.barPercentage}}_calculateBarValuePixels(et){const{_cachedMeta:{vScale:rt,_stacked:nt,index:ot},options:{base:it,minBarLength:st}}=this,at=it||0,lt=this.getParsed(et),ct=lt._custom,pt=isFloatBar(ct);let ut=lt[rt.axis],ht=0,ft=nt?this.applyStack(rt,lt,nt):ut,gt,vt;ft!==ut&&(ht=ft-ut,ft=ut),pt&&(ut=ct.barStart,ft=ct.barEnd-ct.barStart,ut!==0&&sign(ut)!==sign(ct.barEnd)&&(ht=0),ht+=ut);const yt=!isNullOrUndef(it)&&!pt?it:ht;let mt=rt.getPixelForValue(yt);if(this.chart.getDataVisibility(et)?gt=rt.getPixelForValue(ht+ft):gt=mt,vt=gt-mt,Math.abs(vt)<st){vt=barSign(vt,rt,at)*st,ut===at&&(mt-=vt/2);const Et=rt.getPixelForDecimal(0),bt=rt.getPixelForDecimal(1),Ct=Math.min(Et,bt),Tt=Math.max(Et,bt);mt=Math.max(Math.min(mt,Tt),Ct),gt=mt+vt,nt&&!pt&&(lt._stacks[rt.axis]._visualValues[ot]=rt.getValueForPixel(gt)-rt.getValueForPixel(mt))}if(mt===rt.getPixelForValue(at)){const Et=sign(vt)*rt.getLineWidthForValue(at)/2;mt+=Et,vt-=Et}return{size:vt,base:mt,head:gt,center:gt+vt/2}}_calculateBarIndexPixels(et,rt){const nt=rt.scale,ot=this.options,it=ot.skipNull,st=valueOrDefault(ot.maxBarThickness,1/0);let at,lt;if(rt.grouped){const ct=it?this._getStackCount(et):rt.stackCount,pt=ot.barThickness==="flex"?computeFlexCategoryTraits(et,rt,ot,ct):computeFitCategoryTraits(et,rt,ot,ct),ut=this._getStackIndex(this.index,this._cachedMeta.stack,it?et:void 0);at=pt.start+pt.chunk*ut+pt.chunk/2,lt=Math.min(st,pt.chunk*pt.ratio)}else at=nt.getPixelForValue(this.getParsed(et)[nt.axis],et),lt=Math.min(st,rt.min*rt.ratio);return{base:at-lt/2,head:at+lt/2,center:at,size:lt}}draw(){const et=this._cachedMeta,rt=et.vScale,nt=et.data,ot=nt.length;let it=0;for(;it<ot;++it)this.getParsed(it)[rt.axis]!==null&&nt[it].draw(this._ctx)}}Un(BarController,"id","bar"),Un(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Un(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{static override(et){Object.assign(DateAdapterBase.prototype,et)}constructor(et){this.options=et||{}}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch$1(_e,et,rt,nt){const{controller:ot,data:it,_sorted:st}=_e,at=ot._cachedMeta.iScale;if(at&&et===at.axis&&et!=="r"&&st&&it.length){const lt=at._reversePixels?_rlookupByKey:_lookupByKey;if(nt){if(ot._sharedOptions){const ct=it[0],pt=typeof ct.getRange=="function"&&ct.getRange(et);if(pt){const ut=lt(it,et,rt-pt),ht=lt(it,et,rt+pt);return{lo:ut.lo,hi:ht.hi}}}}else return lt(it,et,rt)}return{lo:0,hi:it.length-1}}function evaluateInteractionItems(_e,et,rt,nt,ot){const it=_e.getSortedVisibleDatasetMetas(),st=rt[et];for(let at=0,lt=it.length;at<lt;++at){const{index:ct,data:pt}=it[at],{lo:ut,hi:ht}=binarySearch$1(it[at],et,st,ot);for(let ft=ut;ft<=ht;++ft){const gt=pt[ft];gt.skip||nt(gt,ct,ft)}}}function getDistanceMetricForAxis(_e){const et=_e.indexOf("x")!==-1,rt=_e.indexOf("y")!==-1;return function(nt,ot){const it=et?Math.abs(nt.x-ot.x):0,st=rt?Math.abs(nt.y-ot.y):0;return Math.sqrt(Math.pow(it,2)+Math.pow(st,2))}}function getIntersectItems(_e,et,rt,nt,ot){const it=[];return!ot&&!_e.isPointInArea(et)||evaluateInteractionItems(_e,rt,et,function(at,lt,ct){!ot&&!_isPointInArea(at,_e.chartArea,0)||at.inRange(et.x,et.y,nt)&&it.push({element:at,datasetIndex:lt,index:ct})},!0),it}function getNearestRadialItems(_e,et,rt,nt){let ot=[];function it(st,at,lt){const{startAngle:ct,endAngle:pt}=st.getProps(["startAngle","endAngle"],nt),{angle:ut}=getAngleFromPoint(st,{x:et.x,y:et.y});_angleBetween(ut,ct,pt)&&ot.push({element:st,datasetIndex:at,index:lt})}return evaluateInteractionItems(_e,rt,et,it),ot}function getNearestCartesianItems(_e,et,rt,nt,ot,it){let st=[];const at=getDistanceMetricForAxis(rt);let lt=Number.POSITIVE_INFINITY;function ct(pt,ut,ht){const ft=pt.inRange(et.x,et.y,ot);if(nt&&!ft)return;const gt=pt.getCenterPoint(ot);if(!(!!it||_e.isPointInArea(gt))&&!ft)return;const yt=at(et,gt);yt<lt?(st=[{element:pt,datasetIndex:ut,index:ht}],lt=yt):yt===lt&&st.push({element:pt,datasetIndex:ut,index:ht})}return evaluateInteractionItems(_e,rt,et,ct),st}function getNearestItems(_e,et,rt,nt,ot,it){return!it&&!_e.isPointInArea(et)?[]:rt==="r"&&!nt?getNearestRadialItems(_e,et,rt,ot):getNearestCartesianItems(_e,et,rt,nt,ot,it)}function getAxisItems(_e,et,rt,nt,ot){const it=[],st=rt==="x"?"inXRange":"inYRange";let at=!1;return evaluateInteractionItems(_e,rt,et,(lt,ct,pt)=>{lt[st](et[rt],ot)&&(it.push({element:lt,datasetIndex:ct,index:pt}),at=at||lt.inRange(et.x,et.y,ot))}),nt&&!at?[]:it}var Interaction={evaluateInteractionItems,modes:{index(_e,et,rt,nt){const ot=getRelativePosition(et,_e),it=rt.axis||"x",st=rt.includeInvisible||!1,at=rt.intersect?getIntersectItems(_e,ot,it,nt,st):getNearestItems(_e,ot,it,!1,nt,st),lt=[];return at.length?(_e.getSortedVisibleDatasetMetas().forEach(ct=>{const pt=at[0].index,ut=ct.data[pt];ut&&!ut.skip&&lt.push({element:ut,datasetIndex:ct.index,index:pt})}),lt):[]},dataset(_e,et,rt,nt){const ot=getRelativePosition(et,_e),it=rt.axis||"xy",st=rt.includeInvisible||!1;let at=rt.intersect?getIntersectItems(_e,ot,it,nt,st):getNearestItems(_e,ot,it,!1,nt,st);if(at.length>0){const lt=at[0].datasetIndex,ct=_e.getDatasetMeta(lt).data;at=[];for(let pt=0;pt<ct.length;++pt)at.push({element:ct[pt],datasetIndex:lt,index:pt})}return at},point(_e,et,rt,nt){const ot=getRelativePosition(et,_e),it=rt.axis||"xy",st=rt.includeInvisible||!1;return getIntersectItems(_e,ot,it,nt,st)},nearest(_e,et,rt,nt){const ot=getRelativePosition(et,_e),it=rt.axis||"xy",st=rt.includeInvisible||!1;return getNearestItems(_e,ot,it,rt.intersect,nt,st)},x(_e,et,rt,nt){const ot=getRelativePosition(et,_e);return getAxisItems(_e,ot,"x",rt.intersect,nt)},y(_e,et,rt,nt){const ot=getRelativePosition(et,_e);return getAxisItems(_e,ot,"y",rt.intersect,nt)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(_e,et){return _e.filter(rt=>rt.pos===et)}function filterDynamicPositionByAxis(_e,et){return _e.filter(rt=>STATIC_POSITIONS.indexOf(rt.pos)===-1&&rt.box.axis===et)}function sortByWeight(_e,et){return _e.sort((rt,nt)=>{const ot=et?nt:rt,it=et?rt:nt;return ot.weight===it.weight?ot.index-it.index:ot.weight-it.weight})}function wrapBoxes(_e){const et=[];let rt,nt,ot,it,st,at;for(rt=0,nt=(_e||[]).length;rt<nt;++rt)ot=_e[rt],{position:it,options:{stack:st,stackWeight:at=1}}=ot,et.push({index:rt,box:ot,pos:it,horizontal:ot.isHorizontal(),weight:ot.weight,stack:st&&it+st,stackWeight:at});return et}function buildStacks(_e){const et={};for(const rt of _e){const{stack:nt,pos:ot,stackWeight:it}=rt;if(!nt||!STATIC_POSITIONS.includes(ot))continue;const st=et[nt]||(et[nt]={count:0,placed:0,weight:0,size:0});st.count++,st.weight+=it}return et}function setLayoutDims(_e,et){const rt=buildStacks(_e),{vBoxMaxWidth:nt,hBoxMaxHeight:ot}=et;let it,st,at;for(it=0,st=_e.length;it<st;++it){at=_e[it];const{fullSize:lt}=at.box,ct=rt[at.stack],pt=ct&&at.stackWeight/ct.weight;at.horizontal?(at.width=pt?pt*nt:lt&&et.availableWidth,at.height=ot):(at.width=nt,at.height=pt?pt*ot:lt&&et.availableHeight)}return rt}function buildLayoutBoxes(_e){const et=wrapBoxes(_e),rt=sortByWeight(et.filter(ct=>ct.box.fullSize),!0),nt=sortByWeight(filterByPosition(et,"left"),!0),ot=sortByWeight(filterByPosition(et,"right")),it=sortByWeight(filterByPosition(et,"top"),!0),st=sortByWeight(filterByPosition(et,"bottom")),at=filterDynamicPositionByAxis(et,"x"),lt=filterDynamicPositionByAxis(et,"y");return{fullSize:rt,leftAndTop:nt.concat(it),rightAndBottom:ot.concat(lt).concat(st).concat(at),chartArea:filterByPosition(et,"chartArea"),vertical:nt.concat(ot).concat(lt),horizontal:it.concat(st).concat(at)}}function getCombinedMax(_e,et,rt,nt){return Math.max(_e[rt],et[rt])+Math.max(_e[nt],et[nt])}function updateMaxPadding(_e,et){_e.top=Math.max(_e.top,et.top),_e.left=Math.max(_e.left,et.left),_e.bottom=Math.max(_e.bottom,et.bottom),_e.right=Math.max(_e.right,et.right)}function updateDims(_e,et,rt,nt){const{pos:ot,box:it}=rt,st=_e.maxPadding;if(!isObject$1(ot)){rt.size&&(_e[ot]-=rt.size);const ut=nt[rt.stack]||{size:0,count:1};ut.size=Math.max(ut.size,rt.horizontal?it.height:it.width),rt.size=ut.size/ut.count,_e[ot]+=rt.size}it.getPadding&&updateMaxPadding(st,it.getPadding());const at=Math.max(0,et.outerWidth-getCombinedMax(st,_e,"left","right")),lt=Math.max(0,et.outerHeight-getCombinedMax(st,_e,"top","bottom")),ct=at!==_e.w,pt=lt!==_e.h;return _e.w=at,_e.h=lt,rt.horizontal?{same:ct,other:pt}:{same:pt,other:ct}}function handleMaxPadding(_e){const et=_e.maxPadding;function rt(nt){const ot=Math.max(et[nt]-_e[nt],0);return _e[nt]+=ot,ot}_e.y+=rt("top"),_e.x+=rt("left"),rt("right"),rt("bottom")}function getMargins(_e,et){const rt=et.maxPadding;function nt(ot){const it={left:0,top:0,right:0,bottom:0};return ot.forEach(st=>{it[st]=Math.max(et[st],rt[st])}),it}return nt(_e?["left","right"]:["top","bottom"])}function fitBoxes(_e,et,rt,nt){const ot=[];let it,st,at,lt,ct,pt;for(it=0,st=_e.length,ct=0;it<st;++it){at=_e[it],lt=at.box,lt.update(at.width||et.w,at.height||et.h,getMargins(at.horizontal,et));const{same:ut,other:ht}=updateDims(et,rt,at,nt);ct|=ut&&ot.length,pt=pt||ht,lt.fullSize||ot.push(at)}return ct&&fitBoxes(ot,et,rt,nt)||pt}function setBoxDims(_e,et,rt,nt,ot){_e.top=rt,_e.left=et,_e.right=et+nt,_e.bottom=rt+ot,_e.width=nt,_e.height=ot}function placeBoxes(_e,et,rt,nt){const ot=rt.padding;let{x:it,y:st}=et;for(const at of _e){const lt=at.box,ct=nt[at.stack]||{count:1,placed:0,weight:1},pt=at.stackWeight/ct.weight||1;if(at.horizontal){const ut=et.w*pt,ht=ct.size||lt.height;defined(ct.start)&&(st=ct.start),lt.fullSize?setBoxDims(lt,ot.left,st,rt.outerWidth-ot.right-ot.left,ht):setBoxDims(lt,et.left+ct.placed,st,ut,ht),ct.start=st,ct.placed+=ut,st=lt.bottom}else{const ut=et.h*pt,ht=ct.size||lt.width;defined(ct.start)&&(it=ct.start),lt.fullSize?setBoxDims(lt,it,ot.top,ht,rt.outerHeight-ot.bottom-ot.top):setBoxDims(lt,it,et.top+ct.placed,ht,ut),ct.start=it,ct.placed+=ut,it=lt.right}}et.x=it,et.y=st}var layouts={addBox(_e,et){_e.boxes||(_e.boxes=[]),et.fullSize=et.fullSize||!1,et.position=et.position||"top",et.weight=et.weight||0,et._layers=et._layers||function(){return[{z:0,draw(rt){et.draw(rt)}}]},_e.boxes.push(et)},removeBox(_e,et){const rt=_e.boxes?_e.boxes.indexOf(et):-1;rt!==-1&&_e.boxes.splice(rt,1)},configure(_e,et,rt){et.fullSize=rt.fullSize,et.position=rt.position,et.weight=rt.weight},update(_e,et,rt,nt){if(!_e)return;const ot=toPadding(_e.options.layout.padding),it=Math.max(et-ot.width,0),st=Math.max(rt-ot.height,0),at=buildLayoutBoxes(_e.boxes),lt=at.vertical,ct=at.horizontal;each$1(_e.boxes,vt=>{typeof vt.beforeLayout=="function"&&vt.beforeLayout()});const pt=lt.reduce((vt,yt)=>yt.box.options&&yt.box.options.display===!1?vt:vt+1,0)||1,ut=Object.freeze({outerWidth:et,outerHeight:rt,padding:ot,availableWidth:it,availableHeight:st,vBoxMaxWidth:it/2/pt,hBoxMaxHeight:st/2}),ht=Object.assign({},ot);updateMaxPadding(ht,toPadding(nt));const ft=Object.assign({maxPadding:ht,w:it,h:st,x:ot.left,y:ot.top},ot),gt=setLayoutDims(lt.concat(ct),ut);fitBoxes(at.fullSize,ft,ut,gt),fitBoxes(lt,ft,ut,gt),fitBoxes(ct,ft,ut,gt)&&fitBoxes(lt,ft,ut,gt),handleMaxPadding(ft),placeBoxes(at.leftAndTop,ft,ut,gt),ft.x+=ft.w,ft.y+=ft.h,placeBoxes(at.rightAndBottom,ft,ut,gt),_e.chartArea={left:ft.left,top:ft.top,right:ft.left+ft.w,bottom:ft.top+ft.h,height:ft.h,width:ft.w},each$1(at.chartArea,vt=>{const yt=vt.box;Object.assign(yt,_e.chartArea),yt.update(ft.w,ft.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(et,rt){}releaseContext(et){return!1}addEventListener(et,rt,nt){}removeEventListener(et,rt,nt){}getDevicePixelRatio(){return 1}getMaximumSize(et,rt,nt,ot){return rt=Math.max(0,rt||et.width),nt=nt||et.height,{width:rt,height:Math.max(0,ot?Math.floor(rt/ot):nt)}}isAttached(et){return!0}updateConfig(et){}}class BasicPlatform extends BasePlatform{acquireContext(et){return et&&et.getContext&&et.getContext("2d")||null}updateConfig(et){et.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=_e=>_e===null||_e==="";function initCanvas(_e,et){const rt=_e.style,nt=_e.getAttribute("height"),ot=_e.getAttribute("width");if(_e[EXPANDO_KEY]={initial:{height:nt,width:ot,style:{display:rt.display,height:rt.height,width:rt.width}}},rt.display=rt.display||"block",rt.boxSizing=rt.boxSizing||"border-box",isNullOrEmpty(ot)){const it=readUsedSize(_e,"width");it!==void 0&&(_e.width=it)}if(isNullOrEmpty(nt))if(_e.style.height==="")_e.height=_e.width/(et||2);else{const it=readUsedSize(_e,"height");it!==void 0&&(_e.height=it)}return _e}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(_e,et,rt){_e.addEventListener(et,rt,eventListenerOptions)}function removeListener(_e,et,rt){_e.canvas.removeEventListener(et,rt,eventListenerOptions)}function fromNativeEvent(_e,et){const rt=EVENT_TYPES[_e.type]||_e.type,{x:nt,y:ot}=getRelativePosition(_e,et);return{type:rt,chart:et,native:_e,x:nt!==void 0?nt:null,y:ot!==void 0?ot:null}}function nodeListContains(_e,et){for(const rt of _e)if(rt===et||rt.contains(et))return!0}function createAttachObserver(_e,et,rt){const nt=_e.canvas,ot=new MutationObserver(it=>{let st=!1;for(const at of it)st=st||nodeListContains(at.addedNodes,nt),st=st&&!nodeListContains(at.removedNodes,nt);st&&rt()});return ot.observe(document,{childList:!0,subtree:!0}),ot}function createDetachObserver(_e,et,rt){const nt=_e.canvas,ot=new MutationObserver(it=>{let st=!1;for(const at of it)st=st||nodeListContains(at.removedNodes,nt),st=st&&!nodeListContains(at.addedNodes,nt);st&&rt()});return ot.observe(document,{childList:!0,subtree:!0}),ot}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const _e=window.devicePixelRatio;_e!==oldDevicePixelRatio&&(oldDevicePixelRatio=_e,drpListeningCharts.forEach((et,rt)=>{rt.currentDevicePixelRatio!==_e&&et()}))}function listenDevicePixelRatioChanges(_e,et){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(_e,et)}function unlistenDevicePixelRatioChanges(_e){drpListeningCharts.delete(_e),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(_e,et,rt){const nt=_e.canvas,ot=nt&&_getParentNode(nt);if(!ot)return;const it=throttled((at,lt)=>{const ct=ot.clientWidth;rt(at,lt),ct<ot.clientWidth&&rt()},window),st=new ResizeObserver(at=>{const lt=at[0],ct=lt.contentRect.width,pt=lt.contentRect.height;ct===0&&pt===0||it(ct,pt)});return st.observe(ot),listenDevicePixelRatioChanges(_e,it),st}function releaseObserver(_e,et,rt){rt&&rt.disconnect(),et==="resize"&&unlistenDevicePixelRatioChanges(_e)}function createProxyAndListen(_e,et,rt){const nt=_e.canvas,ot=throttled(it=>{_e.ctx!==null&&rt(fromNativeEvent(it,_e))},_e);return addListener(nt,et,ot),ot}class DomPlatform extends BasePlatform{acquireContext(et,rt){const nt=et&&et.getContext&&et.getContext("2d");return nt&&nt.canvas===et?(initCanvas(et,rt),nt):null}releaseContext(et){const rt=et.canvas;if(!rt[EXPANDO_KEY])return!1;const nt=rt[EXPANDO_KEY].initial;["height","width"].forEach(it=>{const st=nt[it];isNullOrUndef(st)?rt.removeAttribute(it):rt.setAttribute(it,st)});const ot=nt.style||{};return Object.keys(ot).forEach(it=>{rt.style[it]=ot[it]}),rt.width=rt.width,delete rt[EXPANDO_KEY],!0}addEventListener(et,rt,nt){this.removeEventListener(et,rt);const ot=et.$proxies||(et.$proxies={}),st={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[rt]||createProxyAndListen;ot[rt]=st(et,rt,nt)}removeEventListener(et,rt){const nt=et.$proxies||(et.$proxies={}),ot=nt[rt];if(!ot)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[rt]||removeListener)(et,rt,ot),nt[rt]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(et,rt,nt,ot){return getMaximumSize(et,rt,nt,ot)}isAttached(et){const rt=_getParentNode(et);return!!(rt&&rt.isConnected)}}function _detectPlatform(_e){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&_e instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var Zo;let Element$1=(Zo=class{constructor(){Un(this,"active",!1)}tooltipPosition(et){const{x:rt,y:nt}=this.getProps(["x","y"],et);return{x:rt,y:nt}}hasValue(){return isNumber$1(this.x)&&isNumber$1(this.y)}getProps(et,rt){const nt=this.$animations;if(!rt||!nt)return this;const ot={};return et.forEach(it=>{ot[it]=nt[it]&&nt[it].active()?nt[it]._to:this[it]}),ot}},Un(Zo,"defaults",{}),Un(Zo,"defaultRoutes"),Zo);function autoSkip(_e,et){const rt=_e.options.ticks,nt=determineMaxTicks(_e),ot=Math.min(rt.maxTicksLimit||nt,nt),it=rt.major.enabled?getMajorIndices(et):[],st=it.length,at=it[0],lt=it[st-1],ct=[];if(st>ot)return skipMajors(et,ct,it,st/ot),ct;const pt=calculateSpacing(it,et,ot);if(st>0){let ut,ht;const ft=st>1?Math.round((lt-at)/(st-1)):null;for(skip(et,ct,pt,isNullOrUndef(ft)?0:at-ft,at),ut=0,ht=st-1;ut<ht;ut++)skip(et,ct,pt,it[ut],it[ut+1]);return skip(et,ct,pt,lt,isNullOrUndef(ft)?et.length:lt+ft),ct}return skip(et,ct,pt),ct}function determineMaxTicks(_e){const et=_e.options.offset,rt=_e._tickSize(),nt=_e._length/rt+(et?0:1),ot=_e._maxLength/rt;return Math.floor(Math.min(nt,ot))}function calculateSpacing(_e,et,rt){const nt=getEvenSpacing(_e),ot=et.length/rt;if(!nt)return Math.max(ot,1);const it=_factorize(nt);for(let st=0,at=it.length-1;st<at;st++){const lt=it[st];if(lt>ot)return lt}return Math.max(ot,1)}function getMajorIndices(_e){const et=[];let rt,nt;for(rt=0,nt=_e.length;rt<nt;rt++)_e[rt].major&&et.push(rt);return et}function skipMajors(_e,et,rt,nt){let ot=0,it=rt[0],st;for(nt=Math.ceil(nt),st=0;st<_e.length;st++)st===it&&(et.push(_e[st]),ot++,it=rt[ot*nt])}function skip(_e,et,rt,nt,ot){const it=valueOrDefault(nt,0),st=Math.min(valueOrDefault(ot,_e.length),_e.length);let at=0,lt,ct,pt;for(rt=Math.ceil(rt),ot&&(lt=ot-nt,rt=lt/Math.floor(lt/rt)),pt=it;pt<0;)at++,pt=Math.round(it+at*rt);for(ct=Math.max(it,0);ct<st;ct++)ct===pt&&(et.push(_e[ct]),at++,pt=Math.round(it+at*rt))}function getEvenSpacing(_e){const et=_e.length;let rt,nt;if(et<2)return!1;for(nt=_e[0],rt=1;rt<et;++rt)if(_e[rt]-_e[rt-1]!==nt)return!1;return nt}const reverseAlign=_e=>_e==="left"?"right":_e==="right"?"left":_e,offsetFromEdge=(_e,et,rt)=>et==="top"||et==="left"?_e[et]+rt:_e[et]-rt,getTicksLimit=(_e,et)=>Math.min(et||_e,_e);function sample(_e,et){const rt=[],nt=_e.length/et,ot=_e.length;let it=0;for(;it<ot;it+=nt)rt.push(_e[Math.floor(it)]);return rt}function getPixelForGridLine(_e,et,rt){const nt=_e.ticks.length,ot=Math.min(et,nt-1),it=_e._startPixel,st=_e._endPixel,at=1e-6;let lt=_e.getPixelForTick(ot),ct;if(!(rt&&(nt===1?ct=Math.max(lt-it,st-lt):et===0?ct=(_e.getPixelForTick(1)-lt)/2:ct=(lt-_e.getPixelForTick(ot-1))/2,lt+=ot<et?ct:-ct,lt<it-at||lt>st+at)))return lt}function garbageCollect(_e,et){each$1(_e,rt=>{const nt=rt.gc,ot=nt.length/2;let it;if(ot>et){for(it=0;it<ot;++it)delete rt.data[nt[it]];nt.splice(0,ot)}})}function getTickMarkLength(_e){return _e.drawTicks?_e.tickLength:0}function getTitleHeight(_e,et){if(!_e.display)return 0;const rt=toFont(_e.font,et),nt=toPadding(_e.padding);return(isArray(_e.text)?_e.text.length:1)*rt.lineHeight+nt.height}function createScaleContext(_e,et){return createContext(_e,{scale:et,type:"scale"})}function createTickContext(_e,et,rt){return createContext(_e,{tick:rt,index:et,type:"tick"})}function titleAlign(_e,et,rt){let nt=_toLeftRightCenter(_e);return(rt&&et!=="right"||!rt&&et==="right")&&(nt=reverseAlign(nt)),nt}function titleArgs(_e,et,rt,nt){const{top:ot,left:it,bottom:st,right:at,chart:lt}=_e,{chartArea:ct,scales:pt}=lt;let ut=0,ht,ft,gt;const vt=st-ot,yt=at-it;if(_e.isHorizontal()){if(ft=_alignStartEnd(nt,it,at),isObject$1(rt)){const mt=Object.keys(rt)[0],Et=rt[mt];gt=pt[mt].getPixelForValue(Et)+vt-et}else rt==="center"?gt=(ct.bottom+ct.top)/2+vt-et:gt=offsetFromEdge(_e,rt,et);ht=at-it}else{if(isObject$1(rt)){const mt=Object.keys(rt)[0],Et=rt[mt];ft=pt[mt].getPixelForValue(Et)-yt+et}else rt==="center"?ft=(ct.left+ct.right)/2-yt+et:ft=offsetFromEdge(_e,rt,et);gt=_alignStartEnd(nt,st,ot),ut=rt==="left"?-HALF_PI:HALF_PI}return{titleX:ft,titleY:gt,maxWidth:ht,rotation:ut}}class Scale extends Element$1{constructor(et){super(),this.id=et.id,this.type=et.type,this.options=void 0,this.ctx=et.ctx,this.chart=et.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(et){this.options=et.setContext(this.getContext()),this.axis=et.axis,this._userMin=this.parse(et.min),this._userMax=this.parse(et.max),this._suggestedMin=this.parse(et.suggestedMin),this._suggestedMax=this.parse(et.suggestedMax)}parse(et,rt){return et}getUserBounds(){let{_userMin:et,_userMax:rt,_suggestedMin:nt,_suggestedMax:ot}=this;return et=finiteOrDefault(et,Number.POSITIVE_INFINITY),rt=finiteOrDefault(rt,Number.NEGATIVE_INFINITY),nt=finiteOrDefault(nt,Number.POSITIVE_INFINITY),ot=finiteOrDefault(ot,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(et,nt),max:finiteOrDefault(rt,ot),minDefined:isNumberFinite(et),maxDefined:isNumberFinite(rt)}}getMinMax(et){let{min:rt,max:nt,minDefined:ot,maxDefined:it}=this.getUserBounds(),st;if(ot&&it)return{min:rt,max:nt};const at=this.getMatchingVisibleMetas();for(let lt=0,ct=at.length;lt<ct;++lt)st=at[lt].controller.getMinMax(this,et),ot||(rt=Math.min(rt,st.min)),it||(nt=Math.max(nt,st.max));return rt=it&&rt>nt?nt:rt,nt=ot&&rt>nt?rt:nt,{min:finiteOrDefault(rt,finiteOrDefault(nt,rt)),max:finiteOrDefault(nt,finiteOrDefault(rt,nt))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const et=this.chart.data;return this.options.labels||(this.isHorizontal()?et.xLabels:et.yLabels)||et.labels||[]}getLabelItems(et=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(et))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(et,rt,nt){const{beginAtZero:ot,grace:it,ticks:st}=this.options,at=st.sampleSize;this.beforeUpdate(),this.maxWidth=et,this.maxHeight=rt,this._margins=nt=Object.assign({left:0,right:0,top:0,bottom:0},nt),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+nt.left+nt.right:this.height+nt.top+nt.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,it,ot),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const lt=at<this.ticks.length;this._convertTicksToLabels(lt?sample(this.ticks,at):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),st.display&&(st.autoSkip||st.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),lt&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let et=this.options.reverse,rt,nt;this.isHorizontal()?(rt=this.left,nt=this.right):(rt=this.top,nt=this.bottom,et=!et),this._startPixel=rt,this._endPixel=nt,this._reversePixels=et,this._length=nt-rt,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(et){this.chart.notifyPlugins(et,this.getContext()),callback(this.options[et],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(et){const rt=this.options.ticks;let nt,ot,it;for(nt=0,ot=et.length;nt<ot;nt++)it=et[nt],it.label=callback(rt.callback,[it.value,nt,et],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const et=this.options,rt=et.ticks,nt=getTicksLimit(this.ticks.length,et.ticks.maxTicksLimit),ot=rt.minRotation||0,it=rt.maxRotation;let st=ot,at,lt,ct;if(!this._isVisible()||!rt.display||ot>=it||nt<=1||!this.isHorizontal()){this.labelRotation=ot;return}const pt=this._getLabelSizes(),ut=pt.widest.width,ht=pt.highest.height,ft=_limitValue(this.chart.width-ut,0,this.maxWidth);at=et.offset?this.maxWidth/nt:ft/(nt-1),ut+6>at&&(at=ft/(nt-(et.offset?.5:1)),lt=this.maxHeight-getTickMarkLength(et.grid)-rt.padding-getTitleHeight(et.title,this.chart.options.font),ct=Math.sqrt(ut*ut+ht*ht),st=toDegrees(Math.min(Math.asin(_limitValue((pt.highest.height+6)/at,-1,1)),Math.asin(_limitValue(lt/ct,-1,1))-Math.asin(_limitValue(ht/ct,-1,1)))),st=Math.max(ot,Math.min(it,st))),this.labelRotation=st}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const et={width:0,height:0},{chart:rt,options:{ticks:nt,title:ot,grid:it}}=this,st=this._isVisible(),at=this.isHorizontal();if(st){const lt=getTitleHeight(ot,rt.options.font);if(at?(et.width=this.maxWidth,et.height=getTickMarkLength(it)+lt):(et.height=this.maxHeight,et.width=getTickMarkLength(it)+lt),nt.display&&this.ticks.length){const{first:ct,last:pt,widest:ut,highest:ht}=this._getLabelSizes(),ft=nt.padding*2,gt=toRadians(this.labelRotation),vt=Math.cos(gt),yt=Math.sin(gt);if(at){const mt=nt.mirror?0:yt*ut.width+vt*ht.height;et.height=Math.min(this.maxHeight,et.height+mt+ft)}else{const mt=nt.mirror?0:vt*ut.width+yt*ht.height;et.width=Math.min(this.maxWidth,et.width+mt+ft)}this._calculatePadding(ct,pt,yt,vt)}}this._handleMargins(),at?(this.width=this._length=rt.width-this._margins.left-this._margins.right,this.height=et.height):(this.width=et.width,this.height=this._length=rt.height-this._margins.top-this._margins.bottom)}_calculatePadding(et,rt,nt,ot){const{ticks:{align:it,padding:st},position:at}=this.options,lt=this.labelRotation!==0,ct=at!=="top"&&this.axis==="x";if(this.isHorizontal()){const pt=this.getPixelForTick(0)-this.left,ut=this.right-this.getPixelForTick(this.ticks.length-1);let ht=0,ft=0;lt?ct?(ht=ot*et.width,ft=nt*rt.height):(ht=nt*et.height,ft=ot*rt.width):it==="start"?ft=rt.width:it==="end"?ht=et.width:it!=="inner"&&(ht=et.width/2,ft=rt.width/2),this.paddingLeft=Math.max((ht-pt+st)*this.width/(this.width-pt),0),this.paddingRight=Math.max((ft-ut+st)*this.width/(this.width-ut),0)}else{let pt=rt.height/2,ut=et.height/2;it==="start"?(pt=0,ut=et.height):it==="end"&&(pt=rt.height,ut=0),this.paddingTop=pt+st,this.paddingBottom=ut+st}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:et,position:rt}=this.options;return rt==="top"||rt==="bottom"||et==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(et){this.beforeTickToLabelConversion(),this.generateTickLabels(et);let rt,nt;for(rt=0,nt=et.length;rt<nt;rt++)isNullOrUndef(et[rt].label)&&(et.splice(rt,1),nt--,rt--);this.afterTickToLabelConversion()}_getLabelSizes(){let et=this._labelSizes;if(!et){const rt=this.options.ticks.sampleSize;let nt=this.ticks;rt<nt.length&&(nt=sample(nt,rt)),this._labelSizes=et=this._computeLabelSizes(nt,nt.length,this.options.ticks.maxTicksLimit)}return et}_computeLabelSizes(et,rt,nt){const{ctx:ot,_longestTextCache:it}=this,st=[],at=[],lt=Math.floor(rt/getTicksLimit(rt,nt));let ct=0,pt=0,ut,ht,ft,gt,vt,yt,mt,Et,bt,Ct,Tt;for(ut=0;ut<rt;ut+=lt){if(gt=et[ut].label,vt=this._resolveTickFontOptions(ut),ot.font=yt=vt.string,mt=it[yt]=it[yt]||{data:{},gc:[]},Et=vt.lineHeight,bt=Ct=0,!isNullOrUndef(gt)&&!isArray(gt))bt=_measureText(ot,mt.data,mt.gc,bt,gt),Ct=Et;else if(isArray(gt))for(ht=0,ft=gt.length;ht<ft;++ht)Tt=gt[ht],!isNullOrUndef(Tt)&&!isArray(Tt)&&(bt=_measureText(ot,mt.data,mt.gc,bt,Tt),Ct+=Et);st.push(bt),at.push(Ct),ct=Math.max(bt,ct),pt=Math.max(Ct,pt)}garbageCollect(it,rt);const wt=st.indexOf(ct),Rt=at.indexOf(pt),It=St=>({width:st[St]||0,height:at[St]||0});return{first:It(0),last:It(rt-1),widest:It(wt),highest:It(Rt),widths:st,heights:at}}getLabelForValue(et){return et}getPixelForValue(et,rt){return NaN}getValueForPixel(et){}getPixelForTick(et){const rt=this.ticks;return et<0||et>rt.length-1?null:this.getPixelForValue(rt[et].value)}getPixelForDecimal(et){this._reversePixels&&(et=1-et);const rt=this._startPixel+et*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,rt,0):rt)}getDecimalForPixel(et){const rt=(et-this._startPixel)/this._length;return this._reversePixels?1-rt:rt}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:et,max:rt}=this;return et<0&&rt<0?rt:et>0&&rt>0?et:0}getContext(et){const rt=this.ticks||[];if(et>=0&&et<rt.length){const nt=rt[et];return nt.$context||(nt.$context=createTickContext(this.getContext(),et,nt))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const et=this.options.ticks,rt=toRadians(this.labelRotation),nt=Math.abs(Math.cos(rt)),ot=Math.abs(Math.sin(rt)),it=this._getLabelSizes(),st=et.autoSkipPadding||0,at=it?it.widest.width+st:0,lt=it?it.highest.height+st:0;return this.isHorizontal()?lt*nt>at*ot?at/nt:lt/ot:lt*ot<at*nt?lt/nt:at/ot}_isVisible(){const et=this.options.display;return et!=="auto"?!!et:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(et){const rt=this.axis,nt=this.chart,ot=this.options,{grid:it,position:st,border:at}=ot,lt=it.offset,ct=this.isHorizontal(),ut=this.ticks.length+(lt?1:0),ht=getTickMarkLength(it),ft=[],gt=at.setContext(this.getContext()),vt=gt.display?gt.width:0,yt=vt/2,mt=function(Mt){return _alignPixel(nt,Mt,vt)};let Et,bt,Ct,Tt,wt,Rt,It,St,Pt,Ot,Ut,Bt;if(st==="top")Et=mt(this.bottom),Rt=this.bottom-ht,St=Et-yt,Ot=mt(et.top)+yt,Bt=et.bottom;else if(st==="bottom")Et=mt(this.top),Ot=et.top,Bt=mt(et.bottom)-yt,Rt=Et+yt,St=this.top+ht;else if(st==="left")Et=mt(this.right),wt=this.right-ht,It=Et-yt,Pt=mt(et.left)+yt,Ut=et.right;else if(st==="right")Et=mt(this.left),Pt=et.left,Ut=mt(et.right)-yt,wt=Et+yt,It=this.left+ht;else if(rt==="x"){if(st==="center")Et=mt((et.top+et.bottom)/2+.5);else if(isObject$1(st)){const Mt=Object.keys(st)[0],Nt=st[Mt];Et=mt(this.chart.scales[Mt].getPixelForValue(Nt))}Ot=et.top,Bt=et.bottom,Rt=Et+yt,St=Rt+ht}else if(rt==="y"){if(st==="center")Et=mt((et.left+et.right)/2);else if(isObject$1(st)){const Mt=Object.keys(st)[0],Nt=st[Mt];Et=mt(this.chart.scales[Mt].getPixelForValue(Nt))}wt=Et-yt,It=wt-ht,Pt=et.left,Ut=et.right}const xt=valueOrDefault(ot.ticks.maxTicksLimit,ut),At=Math.max(1,Math.ceil(ut/xt));for(bt=0;bt<ut;bt+=At){const Mt=this.getContext(bt),Nt=it.setContext(Mt),$t=at.setContext(Mt),Ft=Nt.lineWidth,jt=Nt.color,zt=$t.dash||[],Yt=$t.dashOffset,Kt=Nt.tickWidth,er=Nt.tickColor,ir=Nt.tickBorderDash||[],rr=Nt.tickBorderDashOffset;Ct=getPixelForGridLine(this,bt,lt),Ct!==void 0&&(Tt=_alignPixel(nt,Ct,Ft),ct?wt=It=Pt=Ut=Tt:Rt=St=Ot=Bt=Tt,ft.push({tx1:wt,ty1:Rt,tx2:It,ty2:St,x1:Pt,y1:Ot,x2:Ut,y2:Bt,width:Ft,color:jt,borderDash:zt,borderDashOffset:Yt,tickWidth:Kt,tickColor:er,tickBorderDash:ir,tickBorderDashOffset:rr}))}return this._ticksLength=ut,this._borderValue=Et,ft}_computeLabelItems(et){const rt=this.axis,nt=this.options,{position:ot,ticks:it}=nt,st=this.isHorizontal(),at=this.ticks,{align:lt,crossAlign:ct,padding:pt,mirror:ut}=it,ht=getTickMarkLength(nt.grid),ft=ht+pt,gt=ut?-pt:ft,vt=-toRadians(this.labelRotation),yt=[];let mt,Et,bt,Ct,Tt,wt,Rt,It,St,Pt,Ot,Ut,Bt="middle";if(ot==="top")wt=this.bottom-gt,Rt=this._getXAxisLabelAlignment();else if(ot==="bottom")wt=this.top+gt,Rt=this._getXAxisLabelAlignment();else if(ot==="left"){const At=this._getYAxisLabelAlignment(ht);Rt=At.textAlign,Tt=At.x}else if(ot==="right"){const At=this._getYAxisLabelAlignment(ht);Rt=At.textAlign,Tt=At.x}else if(rt==="x"){if(ot==="center")wt=(et.top+et.bottom)/2+ft;else if(isObject$1(ot)){const At=Object.keys(ot)[0],Mt=ot[At];wt=this.chart.scales[At].getPixelForValue(Mt)+ft}Rt=this._getXAxisLabelAlignment()}else if(rt==="y"){if(ot==="center")Tt=(et.left+et.right)/2-ft;else if(isObject$1(ot)){const At=Object.keys(ot)[0],Mt=ot[At];Tt=this.chart.scales[At].getPixelForValue(Mt)}Rt=this._getYAxisLabelAlignment(ht).textAlign}rt==="y"&&(lt==="start"?Bt="top":lt==="end"&&(Bt="bottom"));const xt=this._getLabelSizes();for(mt=0,Et=at.length;mt<Et;++mt){bt=at[mt],Ct=bt.label;const At=it.setContext(this.getContext(mt));It=this.getPixelForTick(mt)+it.labelOffset,St=this._resolveTickFontOptions(mt),Pt=St.lineHeight,Ot=isArray(Ct)?Ct.length:1;const Mt=Ot/2,Nt=At.color,$t=At.textStrokeColor,Ft=At.textStrokeWidth;let jt=Rt;st?(Tt=It,Rt==="inner"&&(mt===Et-1?jt=this.options.reverse?"left":"right":mt===0?jt=this.options.reverse?"right":"left":jt="center"),ot==="top"?ct==="near"||vt!==0?Ut=-Ot*Pt+Pt/2:ct==="center"?Ut=-xt.highest.height/2-Mt*Pt+Pt:Ut=-xt.highest.height+Pt/2:ct==="near"||vt!==0?Ut=Pt/2:ct==="center"?Ut=xt.highest.height/2-Mt*Pt:Ut=xt.highest.height-Ot*Pt,ut&&(Ut*=-1),vt!==0&&!At.showLabelBackdrop&&(Tt+=Pt/2*Math.sin(vt))):(wt=It,Ut=(1-Ot)*Pt/2);let zt;if(At.showLabelBackdrop){const Yt=toPadding(At.backdropPadding),Kt=xt.heights[mt],er=xt.widths[mt];let ir=Ut-Yt.top,rr=0-Yt.left;switch(Bt){case"middle":ir-=Kt/2;break;case"bottom":ir-=Kt;break}switch(Rt){case"center":rr-=er/2;break;case"right":rr-=er;break}zt={left:rr,top:ir,width:er+Yt.width,height:Kt+Yt.height,color:At.backdropColor}}yt.push({label:Ct,font:St,textOffset:Ut,options:{rotation:vt,color:Nt,strokeColor:$t,strokeWidth:Ft,textAlign:jt,textBaseline:Bt,translation:[Tt,wt],backdrop:zt}})}return yt}_getXAxisLabelAlignment(){const{position:et,ticks:rt}=this.options;if(-toRadians(this.labelRotation))return et==="top"?"left":"right";let ot="center";return rt.align==="start"?ot="left":rt.align==="end"?ot="right":rt.align==="inner"&&(ot="inner"),ot}_getYAxisLabelAlignment(et){const{position:rt,ticks:{crossAlign:nt,mirror:ot,padding:it}}=this.options,st=this._getLabelSizes(),at=et+it,lt=st.widest.width;let ct,pt;return rt==="left"?ot?(pt=this.right+it,nt==="near"?ct="left":nt==="center"?(ct="center",pt+=lt/2):(ct="right",pt+=lt)):(pt=this.right-at,nt==="near"?ct="right":nt==="center"?(ct="center",pt-=lt/2):(ct="left",pt=this.left)):rt==="right"?ot?(pt=this.left+it,nt==="near"?ct="right":nt==="center"?(ct="center",pt-=lt/2):(ct="left",pt-=lt)):(pt=this.left+at,nt==="near"?ct="left":nt==="center"?(ct="center",pt+=lt/2):(ct="right",pt=this.right)):ct="right",{textAlign:ct,x:pt}}_computeLabelArea(){if(this.options.ticks.mirror)return;const et=this.chart,rt=this.options.position;if(rt==="left"||rt==="right")return{top:0,left:this.left,bottom:et.height,right:this.right};if(rt==="top"||rt==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:et.width}}drawBackground(){const{ctx:et,options:{backgroundColor:rt},left:nt,top:ot,width:it,height:st}=this;rt&&(et.save(),et.fillStyle=rt,et.fillRect(nt,ot,it,st),et.restore())}getLineWidthForValue(et){const rt=this.options.grid;if(!this._isVisible()||!rt.display)return 0;const ot=this.ticks.findIndex(it=>it.value===et);return ot>=0?rt.setContext(this.getContext(ot)).lineWidth:0}drawGrid(et){const rt=this.options.grid,nt=this.ctx,ot=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(et));let it,st;const at=(lt,ct,pt)=>{!pt.width||!pt.color||(nt.save(),nt.lineWidth=pt.width,nt.strokeStyle=pt.color,nt.setLineDash(pt.borderDash||[]),nt.lineDashOffset=pt.borderDashOffset,nt.beginPath(),nt.moveTo(lt.x,lt.y),nt.lineTo(ct.x,ct.y),nt.stroke(),nt.restore())};if(rt.display)for(it=0,st=ot.length;it<st;++it){const lt=ot[it];rt.drawOnChartArea&&at({x:lt.x1,y:lt.y1},{x:lt.x2,y:lt.y2},lt),rt.drawTicks&&at({x:lt.tx1,y:lt.ty1},{x:lt.tx2,y:lt.ty2},{color:lt.tickColor,width:lt.tickWidth,borderDash:lt.tickBorderDash,borderDashOffset:lt.tickBorderDashOffset})}}drawBorder(){const{chart:et,ctx:rt,options:{border:nt,grid:ot}}=this,it=nt.setContext(this.getContext()),st=nt.display?it.width:0;if(!st)return;const at=ot.setContext(this.getContext(0)).lineWidth,lt=this._borderValue;let ct,pt,ut,ht;this.isHorizontal()?(ct=_alignPixel(et,this.left,st)-st/2,pt=_alignPixel(et,this.right,at)+at/2,ut=ht=lt):(ut=_alignPixel(et,this.top,st)-st/2,ht=_alignPixel(et,this.bottom,at)+at/2,ct=pt=lt),rt.save(),rt.lineWidth=it.width,rt.strokeStyle=it.color,rt.beginPath(),rt.moveTo(ct,ut),rt.lineTo(pt,ht),rt.stroke(),rt.restore()}drawLabels(et){if(!this.options.ticks.display)return;const nt=this.ctx,ot=this._computeLabelArea();ot&&clipArea(nt,ot);const it=this.getLabelItems(et);for(const st of it){const at=st.options,lt=st.font,ct=st.label,pt=st.textOffset;renderText(nt,ct,0,pt,lt,at)}ot&&unclipArea(nt)}drawTitle(){const{ctx:et,options:{position:rt,title:nt,reverse:ot}}=this;if(!nt.display)return;const it=toFont(nt.font),st=toPadding(nt.padding),at=nt.align;let lt=it.lineHeight/2;rt==="bottom"||rt==="center"||isObject$1(rt)?(lt+=st.bottom,isArray(nt.text)&&(lt+=it.lineHeight*(nt.text.length-1))):lt+=st.top;const{titleX:ct,titleY:pt,maxWidth:ut,rotation:ht}=titleArgs(this,lt,rt,at);renderText(et,nt.text,0,0,it,{color:nt.color,maxWidth:ut,rotation:ht,textAlign:titleAlign(at,rt,ot),textBaseline:"middle",translation:[ct,pt]})}draw(et){this._isVisible()&&(this.drawBackground(),this.drawGrid(et),this.drawBorder(),this.drawTitle(),this.drawLabels(et))}_layers(){const et=this.options,rt=et.ticks&&et.ticks.z||0,nt=valueOrDefault(et.grid&&et.grid.z,-1),ot=valueOrDefault(et.border&&et.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:rt,draw:it=>{this.draw(it)}}]:[{z:nt,draw:it=>{this.drawBackground(),this.drawGrid(it),this.drawTitle()}},{z:ot,draw:()=>{this.drawBorder()}},{z:rt,draw:it=>{this.drawLabels(it)}}]}getMatchingVisibleMetas(et){const rt=this.chart.getSortedVisibleDatasetMetas(),nt=this.axis+"AxisID",ot=[];let it,st;for(it=0,st=rt.length;it<st;++it){const at=rt[it];at[nt]===this.id&&(!et||at.type===et)&&ot.push(at)}return ot}_resolveTickFontOptions(et){const rt=this.options.ticks.setContext(this.getContext(et));return toFont(rt.font)}_maxDigits(){const et=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/et}}class TypedRegistry{constructor(et,rt,nt){this.type=et,this.scope=rt,this.override=nt,this.items=Object.create(null)}isForType(et){return Object.prototype.isPrototypeOf.call(this.type.prototype,et.prototype)}register(et){const rt=Object.getPrototypeOf(et);let nt;isIChartComponent(rt)&&(nt=this.register(rt));const ot=this.items,it=et.id,st=this.scope+"."+it;if(!it)throw new Error("class does not have id: "+et);return it in ot||(ot[it]=et,registerDefaults(et,st,nt),this.override&&defaults.override(et.id,et.overrides)),st}get(et){return this.items[et]}unregister(et){const rt=this.items,nt=et.id,ot=this.scope;nt in rt&&delete rt[nt],ot&&nt in defaults[ot]&&(delete defaults[ot][nt],this.override&&delete overrides[nt])}}function registerDefaults(_e,et,rt){const nt=merge(Object.create(null),[rt?defaults.get(rt):{},defaults.get(et),_e.defaults]);defaults.set(et,nt),_e.defaultRoutes&&routeDefaults(et,_e.defaultRoutes),_e.descriptors&&defaults.describe(et,_e.descriptors)}function routeDefaults(_e,et){Object.keys(et).forEach(rt=>{const nt=rt.split("."),ot=nt.pop(),it=[_e].concat(nt).join("."),st=et[rt].split("."),at=st.pop(),lt=st.join(".");defaults.route(it,ot,lt,at)})}function isIChartComponent(_e){return"id"in _e&&"defaults"in _e}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...et){this._each("register",et)}remove(...et){this._each("unregister",et)}addControllers(...et){this._each("register",et,this.controllers)}addElements(...et){this._each("register",et,this.elements)}addPlugins(...et){this._each("register",et,this.plugins)}addScales(...et){this._each("register",et,this.scales)}getController(et){return this._get(et,this.controllers,"controller")}getElement(et){return this._get(et,this.elements,"element")}getPlugin(et){return this._get(et,this.plugins,"plugin")}getScale(et){return this._get(et,this.scales,"scale")}removeControllers(...et){this._each("unregister",et,this.controllers)}removeElements(...et){this._each("unregister",et,this.elements)}removePlugins(...et){this._each("unregister",et,this.plugins)}removeScales(...et){this._each("unregister",et,this.scales)}_each(et,rt,nt){[...rt].forEach(ot=>{const it=nt||this._getRegistryForType(ot);nt||it.isForType(ot)||it===this.plugins&&ot.id?this._exec(et,it,ot):each$1(ot,st=>{const at=nt||this._getRegistryForType(st);this._exec(et,at,st)})})}_exec(et,rt,nt){const ot=_capitalize(et);callback(nt["before"+ot],[],nt),rt[et](nt),callback(nt["after"+ot],[],nt)}_getRegistryForType(et){for(let rt=0;rt<this._typedRegistries.length;rt++){const nt=this._typedRegistries[rt];if(nt.isForType(et))return nt}return this.plugins}_get(et,rt,nt){const ot=rt.get(et);if(ot===void 0)throw new Error('"'+et+'" is not a registered '+nt+".");return ot}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(et,rt,nt,ot){rt==="beforeInit"&&(this._init=this._createDescriptors(et,!0),this._notify(this._init,et,"install"));const it=ot?this._descriptors(et).filter(ot):this._descriptors(et),st=this._notify(it,et,rt,nt);return rt==="afterDestroy"&&(this._notify(it,et,"stop"),this._notify(this._init,et,"uninstall")),st}_notify(et,rt,nt,ot){ot=ot||{};for(const it of et){const st=it.plugin,at=st[nt],lt=[rt,ot,it.options];if(callback(at,lt,st)===!1&&ot.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(et){if(this._cache)return this._cache;const rt=this._cache=this._createDescriptors(et);return this._notifyStateChanges(et),rt}_createDescriptors(et,rt){const nt=et&&et.config,ot=valueOrDefault(nt.options&&nt.options.plugins,{}),it=allPlugins(nt);return ot===!1&&!rt?[]:createDescriptors(et,it,ot,rt)}_notifyStateChanges(et){const rt=this._oldCache||[],nt=this._cache,ot=(it,st)=>it.filter(at=>!st.some(lt=>at.plugin.id===lt.plugin.id));this._notify(ot(rt,nt),et,"stop"),this._notify(ot(nt,rt),et,"start")}}function allPlugins(_e){const et={},rt=[],nt=Object.keys(registry.plugins.items);for(let it=0;it<nt.length;it++)rt.push(registry.getPlugin(nt[it]));const ot=_e.plugins||[];for(let it=0;it<ot.length;it++){const st=ot[it];rt.indexOf(st)===-1&&(rt.push(st),et[st.id]=!0)}return{plugins:rt,localIds:et}}function getOpts(_e,et){return!et&&_e===!1?null:_e===!0?{}:_e}function createDescriptors(_e,{plugins:et,localIds:rt},nt,ot){const it=[],st=_e.getContext();for(const at of et){const lt=at.id,ct=getOpts(nt[lt],ot);ct!==null&&it.push({plugin:at,options:pluginOpts(_e.config,{plugin:at,local:rt[lt]},ct,st)})}return it}function pluginOpts(_e,{plugin:et,local:rt},nt,ot){const it=_e.pluginScopeKeys(et),st=_e.getOptionScopes(nt,it);return rt&&et.defaults&&st.push(et.defaults),_e.createResolver(st,ot,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(_e,et){const rt=defaults.datasets[_e]||{};return((et.datasets||{})[_e]||{}).indexAxis||et.indexAxis||rt.indexAxis||"x"}function getAxisFromDefaultScaleID(_e,et){let rt=_e;return _e==="_index_"?rt=et:_e==="_value_"&&(rt=et==="x"?"y":"x"),rt}function getDefaultScaleIDFromAxis(_e,et){return _e===et?"_index_":"_value_"}function axisFromPosition(_e){if(_e==="top"||_e==="bottom")return"x";if(_e==="left"||_e==="right")return"y"}function determineAxis(_e,et){if(_e==="x"||_e==="y"||_e==="r"||(_e=et.axis||axisFromPosition(et.position)||_e.length>1&&determineAxis(_e[0].toLowerCase(),et),_e))return _e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function mergeScaleConfig(_e,et){const rt=overrides[_e.type]||{scales:{}},nt=et.scales||{},ot=getIndexAxis(_e.type,et),it=Object.create(null);return Object.keys(nt).forEach(st=>{const at=nt[st];if(!isObject$1(at))return console.error(`Invalid scale configuration for scale: ${st}`);if(at._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${st}`);const lt=determineAxis(st,at),ct=getDefaultScaleIDFromAxis(lt,ot),pt=rt.scales||{};it[st]=mergeIf(Object.create(null),[{axis:lt},at,pt[lt],pt[ct]])}),_e.data.datasets.forEach(st=>{const at=st.type||_e.type,lt=st.indexAxis||getIndexAxis(at,et),pt=(overrides[at]||{}).scales||{};Object.keys(pt).forEach(ut=>{const ht=getAxisFromDefaultScaleID(ut,lt),ft=st[ht+"AxisID"]||ht;it[ft]=it[ft]||Object.create(null),mergeIf(it[ft],[{axis:ht},nt[ft],pt[ut]])})}),Object.keys(it).forEach(st=>{const at=it[st];mergeIf(at,[defaults.scales[at.type],defaults.scale])}),it}function initOptions(_e){const et=_e.options||(_e.options={});et.plugins=valueOrDefault(et.plugins,{}),et.scales=mergeScaleConfig(_e,et)}function initData(_e){return _e=_e||{},_e.datasets=_e.datasets||[],_e.labels=_e.labels||[],_e}function initConfig(_e){return _e=_e||{},_e.data=initData(_e.data),initOptions(_e),_e}const keyCache=new Map,keysCached=new Set;function cachedKeys(_e,et){let rt=keyCache.get(_e);return rt||(rt=et(),keyCache.set(_e,rt),keysCached.add(rt)),rt}const addIfFound=(_e,et,rt)=>{const nt=resolveObjectKey(et,rt);nt!==void 0&&_e.add(nt)};class Config{constructor(et){this._config=initConfig(et),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(et){this._config.type=et}get data(){return this._config.data}set data(et){this._config.data=initData(et)}get options(){return this._config.options}set options(et){this._config.options=et}get plugins(){return this._config.plugins}update(){const et=this._config;this.clearCache(),initOptions(et)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(et){return cachedKeys(et,()=>[[`datasets.${et}`,""]])}datasetAnimationScopeKeys(et,rt){return cachedKeys(`${et}.transition.${rt}`,()=>[[`datasets.${et}.transitions.${rt}`,`transitions.${rt}`],[`datasets.${et}`,""]])}datasetElementScopeKeys(et,rt){return cachedKeys(`${et}-${rt}`,()=>[[`datasets.${et}.elements.${rt}`,`datasets.${et}`,`elements.${rt}`,""]])}pluginScopeKeys(et){const rt=et.id,nt=this.type;return cachedKeys(`${nt}-plugin-${rt}`,()=>[[`plugins.${rt}`,...et.additionalOptionScopes||[]]])}_cachedScopes(et,rt){const nt=this._scopeCache;let ot=nt.get(et);return(!ot||rt)&&(ot=new Map,nt.set(et,ot)),ot}getOptionScopes(et,rt,nt){const{options:ot,type:it}=this,st=this._cachedScopes(et,nt),at=st.get(rt);if(at)return at;const lt=new Set;rt.forEach(pt=>{et&&(lt.add(et),pt.forEach(ut=>addIfFound(lt,et,ut))),pt.forEach(ut=>addIfFound(lt,ot,ut)),pt.forEach(ut=>addIfFound(lt,overrides[it]||{},ut)),pt.forEach(ut=>addIfFound(lt,defaults,ut)),pt.forEach(ut=>addIfFound(lt,descriptors,ut))});const ct=Array.from(lt);return ct.length===0&&ct.push(Object.create(null)),keysCached.has(rt)&&st.set(rt,ct),ct}chartOptionScopes(){const{options:et,type:rt}=this;return[et,overrides[rt]||{},defaults.datasets[rt]||{},{type:rt},defaults,descriptors]}resolveNamedOptions(et,rt,nt,ot=[""]){const it={$shared:!0},{resolver:st,subPrefixes:at}=getResolver(this._resolverCache,et,ot);let lt=st;if(needContext(st,rt)){it.$shared=!1,nt=isFunction$1(nt)?nt():nt;const ct=this.createResolver(et,nt,at);lt=_attachContext(st,nt,ct)}for(const ct of rt)it[ct]=lt[ct];return it}createResolver(et,rt,nt=[""],ot){const{resolver:it}=getResolver(this._resolverCache,et,nt);return isObject$1(rt)?_attachContext(it,rt,void 0,ot):it}}function getResolver(_e,et,rt){let nt=_e.get(et);nt||(nt=new Map,_e.set(et,nt));const ot=rt.join();let it=nt.get(ot);return it||(it={resolver:_createResolver(et,rt),subPrefixes:rt.filter(at=>!at.toLowerCase().includes("hover"))},nt.set(ot,it)),it}const hasFunction=_e=>isObject$1(_e)&&Object.getOwnPropertyNames(_e).reduce((et,rt)=>et||isFunction$1(_e[rt]),!1);function needContext(_e,et){const{isScriptable:rt,isIndexable:nt}=_descriptors(_e);for(const ot of et){const it=rt(ot),st=nt(ot),at=(st||it)&&_e[ot];if(it&&(isFunction$1(at)||hasFunction(at))||st&&isArray(at))return!0}return!1}var version$4="4.2.1";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(_e,et){return _e==="top"||_e==="bottom"||KNOWN_POSITIONS.indexOf(_e)===-1&&et==="x"}function compare2Level(_e,et){return function(rt,nt){return rt[_e]===nt[_e]?rt[et]-nt[et]:rt[_e]-nt[_e]}}function onAnimationsComplete(_e){const et=_e.chart,rt=et.options.animation;et.notifyPlugins("afterRender"),callback(rt&&rt.onComplete,[_e],et)}function onAnimationProgress(_e){const et=_e.chart,rt=et.options.animation;callback(rt&&rt.onProgress,[_e],et)}function getCanvas(_e){return _isDomSupported()&&typeof _e=="string"?_e=document.getElementById(_e):_e&&_e.length&&(_e=_e[0]),_e&&_e.canvas&&(_e=_e.canvas),_e}const instances={},getChart=_e=>{const et=getCanvas(_e);return Object.values(instances).filter(rt=>rt.canvas===et).pop()};function moveNumericKeys(_e,et,rt){const nt=Object.keys(_e);for(const ot of nt){const it=+ot;if(it>=et){const st=_e[ot];delete _e[ot],(rt>0||it>et)&&(_e[it+rt]=st)}}}function determineLastEvent(_e,et,rt,nt){return!rt||_e.type==="mouseout"?null:nt?et:_e}function getDatasetArea(_e){const{xScale:et,yScale:rt}=_e;if(et&&rt)return{left:et.left,right:et.right,top:rt.top,bottom:rt.bottom}}var Oo;let Chart$1=(Oo=class{static register(...et){registry.add(...et),invalidatePlugins()}static unregister(...et){registry.remove(...et),invalidatePlugins()}constructor(et,rt){const nt=this.config=new Config(rt),ot=getCanvas(et),it=getChart(ot);if(it)throw new Error("Canvas is already in use. Chart with ID '"+it.id+"' must be destroyed before the canvas with ID '"+it.canvas.id+"' can be reused.");const st=nt.createResolver(nt.chartOptionScopes(),this.getContext());this.platform=new(nt.platform||_detectPlatform(ot)),this.platform.updateConfig(nt);const at=this.platform.acquireContext(ot,st.aspectRatio),lt=at&&at.canvas,ct=lt&&lt.height,pt=lt&&lt.width;if(this.id=uid(),this.ctx=at,this.canvas=lt,this.width=pt,this.height=ct,this._options=st,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(ut=>this.update(ut),st.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!at||!lt){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:et,maintainAspectRatio:rt},width:nt,height:ot,_aspectRatio:it}=this;return isNullOrUndef(et)?rt&&it?it:ot?nt/ot:null:et}get data(){return this.config.data}set data(et){this.config.data=et}get options(){return this._options}set options(et){this.config.options=et}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(et,rt){animator.running(this)?this._resizeBeforeDraw={width:et,height:rt}:this._resize(et,rt)}_resize(et,rt){const nt=this.options,ot=this.canvas,it=nt.maintainAspectRatio&&this.aspectRatio,st=this.platform.getMaximumSize(ot,et,rt,it),at=nt.devicePixelRatio||this.platform.getDevicePixelRatio(),lt=this.width?"resize":"attach";this.width=st.width,this.height=st.height,this._aspectRatio=this.aspectRatio,retinaScale(this,at,!0)&&(this.notifyPlugins("resize",{size:st}),callback(nt.onResize,[this,st],this),this.attached&&this._doResize(lt)&&this.render())}ensureScalesHaveIDs(){const rt=this.options.scales||{};each$1(rt,(nt,ot)=>{nt.id=ot})}buildOrUpdateScales(){const et=this.options,rt=et.scales,nt=this.scales,ot=Object.keys(nt).reduce((st,at)=>(st[at]=!1,st),{});let it=[];rt&&(it=it.concat(Object.keys(rt).map(st=>{const at=rt[st],lt=determineAxis(st,at),ct=lt==="r",pt=lt==="x";return{options:at,dposition:ct?"chartArea":pt?"bottom":"left",dtype:ct?"radialLinear":pt?"category":"linear"}}))),each$1(it,st=>{const at=st.options,lt=at.id,ct=determineAxis(lt,at),pt=valueOrDefault(at.type,st.dtype);(at.position===void 0||positionIsHorizontal(at.position,ct)!==positionIsHorizontal(st.dposition))&&(at.position=st.dposition),ot[lt]=!0;let ut=null;if(lt in nt&&nt[lt].type===pt)ut=nt[lt];else{const ht=registry.getScale(pt);ut=new ht({id:lt,type:pt,ctx:this.ctx,chart:this}),nt[ut.id]=ut}ut.init(at,et)}),each$1(ot,(st,at)=>{st||delete nt[at]}),each$1(nt,st=>{layouts.configure(this,st,st.options),layouts.addBox(this,st)})}_updateMetasets(){const et=this._metasets,rt=this.data.datasets.length,nt=et.length;if(et.sort((ot,it)=>ot.index-it.index),nt>rt){for(let ot=rt;ot<nt;++ot)this._destroyDatasetMeta(ot);et.splice(rt,nt-rt)}this._sortedMetasets=et.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:et,data:{datasets:rt}}=this;et.length>rt.length&&delete this._stacks,et.forEach((nt,ot)=>{rt.filter(it=>it===nt._dataset).length===0&&this._destroyDatasetMeta(ot)})}buildOrUpdateControllers(){const et=[],rt=this.data.datasets;let nt,ot;for(this._removeUnreferencedMetasets(),nt=0,ot=rt.length;nt<ot;nt++){const it=rt[nt];let st=this.getDatasetMeta(nt);const at=it.type||this.config.type;if(st.type&&st.type!==at&&(this._destroyDatasetMeta(nt),st=this.getDatasetMeta(nt)),st.type=at,st.indexAxis=it.indexAxis||getIndexAxis(at,this.options),st.order=it.order||0,st.index=nt,st.label=""+it.label,st.visible=this.isDatasetVisible(nt),st.controller)st.controller.updateIndex(nt),st.controller.linkScales();else{const lt=registry.getController(at),{datasetElementType:ct,dataElementType:pt}=defaults.datasets[at];Object.assign(lt,{dataElementType:registry.getElement(pt),datasetElementType:ct&&registry.getElement(ct)}),st.controller=new lt(this,nt),et.push(st.controller)}}return this._updateMetasets(),et}_resetElements(){each$1(this.data.datasets,(et,rt)=>{this.getDatasetMeta(rt).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(et){const rt=this.config;rt.update();const nt=this._options=rt.createResolver(rt.chartOptionScopes(),this.getContext()),ot=this._animationsDisabled=!nt.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:et,cancelable:!0})===!1)return;const it=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let st=0;for(let ct=0,pt=this.data.datasets.length;ct<pt;ct++){const{controller:ut}=this.getDatasetMeta(ct),ht=!ot&&it.indexOf(ut)===-1;ut.buildOrUpdateElements(ht),st=Math.max(+ut.getMaxOverflow(),st)}st=this._minPadding=nt.layout.autoPadding?st:0,this._updateLayout(st),ot||each$1(it,ct=>{ct.reset()}),this._updateDatasets(et),this.notifyPlugins("afterUpdate",{mode:et}),this._layers.sort(compare2Level("z","_idx"));const{_active:at,_lastEvent:lt}=this;lt?this._eventHandler(lt,!0):at.length&&this._updateHoverStyles(at,at,!0),this.render()}_updateScales(){each$1(this.scales,et=>{layouts.removeBox(this,et)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const et=this.options,rt=new Set(Object.keys(this._listeners)),nt=new Set(et.events);(!setsEqual(rt,nt)||!!this._responsiveListeners!==et.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:et}=this,rt=this._getUniformDataChanges()||[];for(const{method:nt,start:ot,count:it}of rt){const st=nt==="_removeElements"?-it:it;moveNumericKeys(et,ot,st)}}_getUniformDataChanges(){const et=this._dataChanges;if(!et||!et.length)return;this._dataChanges=[];const rt=this.data.datasets.length,nt=it=>new Set(et.filter(st=>st[0]===it).map((st,at)=>at+","+st.splice(1).join(","))),ot=nt(0);for(let it=1;it<rt;it++)if(!setsEqual(ot,nt(it)))return;return Array.from(ot).map(it=>it.split(",")).map(it=>({method:it[1],start:+it[2],count:+it[3]}))}_updateLayout(et){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,et);const rt=this.chartArea,nt=rt.width<=0||rt.height<=0;this._layers=[],each$1(this.boxes,ot=>{nt&&ot.position==="chartArea"||(ot.configure&&ot.configure(),this._layers.push(...ot._layers()))},this),this._layers.forEach((ot,it)=>{ot._idx=it}),this.notifyPlugins("afterLayout")}_updateDatasets(et){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:et,cancelable:!0})!==!1){for(let rt=0,nt=this.data.datasets.length;rt<nt;++rt)this.getDatasetMeta(rt).controller.configure();for(let rt=0,nt=this.data.datasets.length;rt<nt;++rt)this._updateDataset(rt,isFunction$1(et)?et({datasetIndex:rt}):et);this.notifyPlugins("afterDatasetsUpdate",{mode:et})}}_updateDataset(et,rt){const nt=this.getDatasetMeta(et),ot={meta:nt,index:et,mode:rt,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",ot)!==!1&&(nt.controller._update(rt),ot.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",ot))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let et;if(this._resizeBeforeDraw){const{width:nt,height:ot}=this._resizeBeforeDraw;this._resize(nt,ot),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const rt=this._layers;for(et=0;et<rt.length&&rt[et].z<=0;++et)rt[et].draw(this.chartArea);for(this._drawDatasets();et<rt.length;++et)rt[et].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(et){const rt=this._sortedMetasets,nt=[];let ot,it;for(ot=0,it=rt.length;ot<it;++ot){const st=rt[ot];(!et||st.visible)&&nt.push(st)}return nt}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const et=this.getSortedVisibleDatasetMetas();for(let rt=et.length-1;rt>=0;--rt)this._drawDataset(et[rt]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(et){const rt=this.ctx,nt=et._clip,ot=!nt.disabled,it=getDatasetArea(et)||this.chartArea,st={meta:et,index:et.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",st)!==!1&&(ot&&clipArea(rt,{left:nt.left===!1?0:it.left-nt.left,right:nt.right===!1?this.width:it.right+nt.right,top:nt.top===!1?0:it.top-nt.top,bottom:nt.bottom===!1?this.height:it.bottom+nt.bottom}),et.controller.draw(),ot&&unclipArea(rt),st.cancelable=!1,this.notifyPlugins("afterDatasetDraw",st))}isPointInArea(et){return _isPointInArea(et,this.chartArea,this._minPadding)}getElementsAtEventForMode(et,rt,nt,ot){const it=Interaction.modes[rt];return typeof it=="function"?it(this,et,nt,ot):[]}getDatasetMeta(et){const rt=this.data.datasets[et],nt=this._metasets;let ot=nt.filter(it=>it&&it._dataset===rt).pop();return ot||(ot={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:rt&&rt.order||0,index:et,_dataset:rt,_parsed:[],_sorted:!1},nt.push(ot)),ot}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(et){const rt=this.data.datasets[et];if(!rt)return!1;const nt=this.getDatasetMeta(et);return typeof nt.hidden=="boolean"?!nt.hidden:!rt.hidden}setDatasetVisibility(et,rt){const nt=this.getDatasetMeta(et);nt.hidden=!rt}toggleDataVisibility(et){this._hiddenIndices[et]=!this._hiddenIndices[et]}getDataVisibility(et){return!this._hiddenIndices[et]}_updateVisibility(et,rt,nt){const ot=nt?"show":"hide",it=this.getDatasetMeta(et),st=it.controller._resolveAnimations(void 0,ot);defined(rt)?(it.data[rt].hidden=!nt,this.update()):(this.setDatasetVisibility(et,nt),st.update(it,{visible:nt}),this.update(at=>at.datasetIndex===et?ot:void 0))}hide(et,rt){this._updateVisibility(et,rt,!1)}show(et,rt){this._updateVisibility(et,rt,!0)}_destroyDatasetMeta(et){const rt=this._metasets[et];rt&&rt.controller&&rt.controller._destroy(),delete this._metasets[et]}_stop(){let et,rt;for(this.stop(),animator.remove(this),et=0,rt=this.data.datasets.length;et<rt;++et)this._destroyDatasetMeta(et)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:et,ctx:rt}=this;this._stop(),this.config.clearCache(),et&&(this.unbindEvents(),clearCanvas(et,rt),this.platform.releaseContext(rt),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...et){return this.canvas.toDataURL(...et)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const et=this._listeners,rt=this.platform,nt=(it,st)=>{rt.addEventListener(this,it,st),et[it]=st},ot=(it,st,at)=>{it.offsetX=st,it.offsetY=at,this._eventHandler(it)};each$1(this.options.events,it=>nt(it,ot))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const et=this._responsiveListeners,rt=this.platform,nt=(lt,ct)=>{rt.addEventListener(this,lt,ct),et[lt]=ct},ot=(lt,ct)=>{et[lt]&&(rt.removeEventListener(this,lt,ct),delete et[lt])},it=(lt,ct)=>{this.canvas&&this.resize(lt,ct)};let st;const at=()=>{ot("attach",at),this.attached=!0,this.resize(),nt("resize",it),nt("detach",st)};st=()=>{this.attached=!1,ot("resize",it),this._stop(),this._resize(0,0),nt("attach",at)},rt.isAttached(this.canvas)?at():st()}unbindEvents(){each$1(this._listeners,(et,rt)=>{this.platform.removeEventListener(this,rt,et)}),this._listeners={},each$1(this._responsiveListeners,(et,rt)=>{this.platform.removeEventListener(this,rt,et)}),this._responsiveListeners=void 0}updateHoverStyle(et,rt,nt){const ot=nt?"set":"remove";let it,st,at,lt;for(rt==="dataset"&&(it=this.getDatasetMeta(et[0].datasetIndex),it.controller["_"+ot+"DatasetHoverStyle"]()),at=0,lt=et.length;at<lt;++at){st=et[at];const ct=st&&this.getDatasetMeta(st.datasetIndex).controller;ct&&ct[ot+"HoverStyle"](st.element,st.datasetIndex,st.index)}}getActiveElements(){return this._active||[]}setActiveElements(et){const rt=this._active||[],nt=et.map(({datasetIndex:it,index:st})=>{const at=this.getDatasetMeta(it);if(!at)throw new Error("No dataset found at index "+it);return{datasetIndex:it,element:at.data[st],index:st}});!_elementsEqual(nt,rt)&&(this._active=nt,this._lastEvent=null,this._updateHoverStyles(nt,rt))}notifyPlugins(et,rt,nt){return this._plugins.notify(this,et,rt,nt)}isPluginEnabled(et){return this._plugins._cache.filter(rt=>rt.plugin.id===et).length===1}_updateHoverStyles(et,rt,nt){const ot=this.options.hover,it=(lt,ct)=>lt.filter(pt=>!ct.some(ut=>pt.datasetIndex===ut.datasetIndex&&pt.index===ut.index)),st=it(rt,et),at=nt?et:it(et,rt);st.length&&this.updateHoverStyle(st,ot.mode,!1),at.length&&ot.mode&&this.updateHoverStyle(at,ot.mode,!0)}_eventHandler(et,rt){const nt={event:et,replay:rt,cancelable:!0,inChartArea:this.isPointInArea(et)},ot=st=>(st.options.events||this.options.events).includes(et.native.type);if(this.notifyPlugins("beforeEvent",nt,ot)===!1)return;const it=this._handleEvent(et,rt,nt.inChartArea);return nt.cancelable=!1,this.notifyPlugins("afterEvent",nt,ot),(it||nt.changed)&&this.render(),this}_handleEvent(et,rt,nt){const{_active:ot=[],options:it}=this,st=rt,at=this._getActiveElements(et,ot,nt,st),lt=_isClickEvent(et),ct=determineLastEvent(et,this._lastEvent,nt,lt);nt&&(this._lastEvent=null,callback(it.onHover,[et,at,this],this),lt&&callback(it.onClick,[et,at,this],this));const pt=!_elementsEqual(at,ot);return(pt||rt)&&(this._active=at,this._updateHoverStyles(at,ot,rt)),this._lastEvent=ct,pt}_getActiveElements(et,rt,nt,ot){if(et.type==="mouseout")return[];if(!nt)return rt;const it=this.options.hover;return this.getElementsAtEventForMode(et,it.mode,it,ot)}},Un(Oo,"defaults",defaults),Un(Oo,"instances",instances),Un(Oo,"overrides",overrides),Un(Oo,"registry",registry),Un(Oo,"version",version$4),Un(Oo,"getChart",getChart),Oo);function invalidatePlugins(){return each$1(Chart$1.instances,_e=>_e._plugins.invalidate())}function getBarBounds(_e,et){const{x:rt,y:nt,base:ot,width:it,height:st}=_e.getProps(["x","y","base","width","height"],et);let at,lt,ct,pt,ut;return _e.horizontal?(ut=st/2,at=Math.min(rt,ot),lt=Math.max(rt,ot),ct=nt-ut,pt=nt+ut):(ut=it/2,at=rt-ut,lt=rt+ut,ct=Math.min(nt,ot),pt=Math.max(nt,ot)),{left:at,top:ct,right:lt,bottom:pt}}function skipOrLimit(_e,et,rt,nt){return _e?0:_limitValue(et,rt,nt)}function parseBorderWidth(_e,et,rt){const nt=_e.options.borderWidth,ot=_e.borderSkipped,it=toTRBL(nt);return{t:skipOrLimit(ot.top,it.top,0,rt),r:skipOrLimit(ot.right,it.right,0,et),b:skipOrLimit(ot.bottom,it.bottom,0,rt),l:skipOrLimit(ot.left,it.left,0,et)}}function parseBorderRadius(_e,et,rt){const{enableBorderRadius:nt}=_e.getProps(["enableBorderRadius"]),ot=_e.options.borderRadius,it=toTRBLCorners(ot),st=Math.min(et,rt),at=_e.borderSkipped,lt=nt||isObject$1(ot);return{topLeft:skipOrLimit(!lt||at.top||at.left,it.topLeft,0,st),topRight:skipOrLimit(!lt||at.top||at.right,it.topRight,0,st),bottomLeft:skipOrLimit(!lt||at.bottom||at.left,it.bottomLeft,0,st),bottomRight:skipOrLimit(!lt||at.bottom||at.right,it.bottomRight,0,st)}}function boundingRects(_e){const et=getBarBounds(_e),rt=et.right-et.left,nt=et.bottom-et.top,ot=parseBorderWidth(_e,rt/2,nt/2),it=parseBorderRadius(_e,rt/2,nt/2);return{outer:{x:et.left,y:et.top,w:rt,h:nt,radius:it},inner:{x:et.left+ot.l,y:et.top+ot.t,w:rt-ot.l-ot.r,h:nt-ot.t-ot.b,radius:{topLeft:Math.max(0,it.topLeft-Math.max(ot.t,ot.l)),topRight:Math.max(0,it.topRight-Math.max(ot.t,ot.r)),bottomLeft:Math.max(0,it.bottomLeft-Math.max(ot.b,ot.l)),bottomRight:Math.max(0,it.bottomRight-Math.max(ot.b,ot.r))}}}}function inRange(_e,et,rt,nt){const ot=et===null,it=rt===null,at=_e&&!(ot&&it)&&getBarBounds(_e,nt);return at&&(ot||_isBetween(et,at.left,at.right))&&(it||_isBetween(rt,at.top,at.bottom))}function hasRadius(_e){return _e.topLeft||_e.topRight||_e.bottomLeft||_e.bottomRight}function addNormalRectPath(_e,et){_e.rect(et.x,et.y,et.w,et.h)}function inflateRect(_e,et,rt={}){const nt=_e.x!==rt.x?-et:0,ot=_e.y!==rt.y?-et:0,it=(_e.x+_e.w!==rt.x+rt.w?et:0)-nt,st=(_e.y+_e.h!==rt.y+rt.h?et:0)-ot;return{x:_e.x+nt,y:_e.y+ot,w:_e.w+it,h:_e.h+st,radius:_e.radius}}class BarElement extends Element$1{constructor(et){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,et&&Object.assign(this,et)}draw(et){const{inflateAmount:rt,options:{borderColor:nt,backgroundColor:ot}}=this,{inner:it,outer:st}=boundingRects(this),at=hasRadius(st.radius)?addRoundedRectPath:addNormalRectPath;et.save(),(st.w!==it.w||st.h!==it.h)&&(et.beginPath(),at(et,inflateRect(st,rt,it)),et.clip(),at(et,inflateRect(it,-rt,st)),et.fillStyle=nt,et.fill("evenodd")),et.beginPath(),at(et,inflateRect(it,rt)),et.fillStyle=ot,et.fill(),et.restore()}inRange(et,rt,nt){return inRange(this,et,rt,nt)}inXRange(et,rt){return inRange(this,et,null,rt)}inYRange(et,rt){return inRange(this,null,et,rt)}getCenterPoint(et){const{x:rt,y:nt,base:ot,horizontal:it}=this.getProps(["x","y","base","horizontal"],et);return{x:it?(rt+ot)/2:rt,y:it?nt:(nt+ot)/2}}getRange(et){return et==="x"?this.width/2:this.height/2}}Un(BarElement,"id","bar"),Un(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Un(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Title extends Element$1{constructor(et){super(),this.chart=et.chart,this.options=et.options,this.ctx=et.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(et,rt){const nt=this.options;if(this.left=0,this.top=0,!nt.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=et,this.height=this.bottom=rt;const ot=isArray(nt.text)?nt.text.length:1;this._padding=toPadding(nt.padding);const it=ot*toFont(nt.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=it:this.width=it}isHorizontal(){const et=this.options.position;return et==="top"||et==="bottom"}_drawArgs(et){const{top:rt,left:nt,bottom:ot,right:it,options:st}=this,at=st.align;let lt=0,ct,pt,ut;return this.isHorizontal()?(pt=_alignStartEnd(at,nt,it),ut=rt+et,ct=it-nt):(st.position==="left"?(pt=nt+et,ut=_alignStartEnd(at,ot,rt),lt=PI*-.5):(pt=it-et,ut=_alignStartEnd(at,rt,ot),lt=PI*.5),ct=ot-rt),{titleX:pt,titleY:ut,maxWidth:ct,rotation:lt}}draw(){const et=this.ctx,rt=this.options;if(!rt.display)return;const nt=toFont(rt.font),it=nt.lineHeight/2+this._padding.top,{titleX:st,titleY:at,maxWidth:lt,rotation:ct}=this._drawArgs(it);renderText(et,rt.text,0,0,nt,{color:rt.color,maxWidth:lt,rotation:ct,textAlign:_toLeftRightCenter(rt.align),textBaseline:"middle",translation:[st,at]})}}function createTitle(_e,et){const rt=new Title({ctx:_e.ctx,options:et,chart:_e});layouts.configure(_e,rt,et),layouts.addBox(_e,rt),_e.titleBlock=rt}var plugin_title={id:"title",_element:Title,start(_e,et,rt){createTitle(_e,rt)},stop(_e){const et=_e.titleBlock;layouts.removeBox(_e,et),delete _e.titleBlock},beforeUpdate(_e,et,rt){const nt=_e.titleBlock;layouts.configure(_e,nt,rt),nt.options=rt},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(_e){if(!_e.length)return!1;let et,rt,nt=0,ot=0,it=0;for(et=0,rt=_e.length;et<rt;++et){const st=_e[et].element;if(st&&st.hasValue()){const at=st.tooltipPosition();nt+=at.x,ot+=at.y,++it}}return{x:nt/it,y:ot/it}},nearest(_e,et){if(!_e.length)return!1;let rt=et.x,nt=et.y,ot=Number.POSITIVE_INFINITY,it,st,at;for(it=0,st=_e.length;it<st;++it){const lt=_e[it].element;if(lt&&lt.hasValue()){const ct=lt.getCenterPoint(),pt=distanceBetweenPoints(et,ct);pt<ot&&(ot=pt,at=lt)}}if(at){const lt=at.tooltipPosition();rt=lt.x,nt=lt.y}return{x:rt,y:nt}}};function pushOrConcat(_e,et){return et&&(isArray(et)?Array.prototype.push.apply(_e,et):_e.push(et)),_e}function splitNewlines(_e){return(typeof _e=="string"||_e instanceof String)&&_e.indexOf(`
`)>-1?_e.split(`
`):_e}function createTooltipItem(_e,et){const{element:rt,datasetIndex:nt,index:ot}=et,it=_e.getDatasetMeta(nt).controller,{label:st,value:at}=it.getLabelAndValue(ot);return{chart:_e,label:st,parsed:it.getParsed(ot),raw:_e.data.datasets[nt].data[ot],formattedValue:at,dataset:it.getDataset(),dataIndex:ot,datasetIndex:nt,element:rt}}function getTooltipSize(_e,et){const rt=_e.chart.ctx,{body:nt,footer:ot,title:it}=_e,{boxWidth:st,boxHeight:at}=et,lt=toFont(et.bodyFont),ct=toFont(et.titleFont),pt=toFont(et.footerFont),ut=it.length,ht=ot.length,ft=nt.length,gt=toPadding(et.padding);let vt=gt.height,yt=0,mt=nt.reduce((Ct,Tt)=>Ct+Tt.before.length+Tt.lines.length+Tt.after.length,0);if(mt+=_e.beforeBody.length+_e.afterBody.length,ut&&(vt+=ut*ct.lineHeight+(ut-1)*et.titleSpacing+et.titleMarginBottom),mt){const Ct=et.displayColors?Math.max(at,lt.lineHeight):lt.lineHeight;vt+=ft*Ct+(mt-ft)*lt.lineHeight+(mt-1)*et.bodySpacing}ht&&(vt+=et.footerMarginTop+ht*pt.lineHeight+(ht-1)*et.footerSpacing);let Et=0;const bt=function(Ct){yt=Math.max(yt,rt.measureText(Ct).width+Et)};return rt.save(),rt.font=ct.string,each$1(_e.title,bt),rt.font=lt.string,each$1(_e.beforeBody.concat(_e.afterBody),bt),Et=et.displayColors?st+2+et.boxPadding:0,each$1(nt,Ct=>{each$1(Ct.before,bt),each$1(Ct.lines,bt),each$1(Ct.after,bt)}),Et=0,rt.font=pt.string,each$1(_e.footer,bt),rt.restore(),yt+=gt.width,{width:yt,height:vt}}function determineYAlign(_e,et){const{y:rt,height:nt}=et;return rt<nt/2?"top":rt>_e.height-nt/2?"bottom":"center"}function doesNotFitWithAlign(_e,et,rt,nt){const{x:ot,width:it}=nt,st=rt.caretSize+rt.caretPadding;if(_e==="left"&&ot+it+st>et.width||_e==="right"&&ot-it-st<0)return!0}function determineXAlign(_e,et,rt,nt){const{x:ot,width:it}=rt,{width:st,chartArea:{left:at,right:lt}}=_e;let ct="center";return nt==="center"?ct=ot<=(at+lt)/2?"left":"right":ot<=it/2?ct="left":ot>=st-it/2&&(ct="right"),doesNotFitWithAlign(ct,_e,et,rt)&&(ct="center"),ct}function determineAlignment(_e,et,rt){const nt=rt.yAlign||et.yAlign||determineYAlign(_e,rt);return{xAlign:rt.xAlign||et.xAlign||determineXAlign(_e,et,rt,nt),yAlign:nt}}function alignX(_e,et){let{x:rt,width:nt}=_e;return et==="right"?rt-=nt:et==="center"&&(rt-=nt/2),rt}function alignY(_e,et,rt){let{y:nt,height:ot}=_e;return et==="top"?nt+=rt:et==="bottom"?nt-=ot+rt:nt-=ot/2,nt}function getBackgroundPoint(_e,et,rt,nt){const{caretSize:ot,caretPadding:it,cornerRadius:st}=_e,{xAlign:at,yAlign:lt}=rt,ct=ot+it,{topLeft:pt,topRight:ut,bottomLeft:ht,bottomRight:ft}=toTRBLCorners(st);let gt=alignX(et,at);const vt=alignY(et,lt,ct);return lt==="center"?at==="left"?gt+=ct:at==="right"&&(gt-=ct):at==="left"?gt-=Math.max(pt,ht)+ot:at==="right"&&(gt+=Math.max(ut,ft)+ot),{x:_limitValue(gt,0,nt.width-et.width),y:_limitValue(vt,0,nt.height-et.height)}}function getAlignedX(_e,et,rt){const nt=toPadding(rt.padding);return et==="center"?_e.x+_e.width/2:et==="right"?_e.x+_e.width-nt.right:_e.x+nt.left}function getBeforeAfterBodyLines(_e){return pushOrConcat([],splitNewlines(_e))}function createTooltipContext(_e,et,rt){return createContext(_e,{tooltip:et,tooltipItems:rt,type:"tooltip"})}function overrideCallbacks(_e,et){const rt=et&&et.dataset&&et.dataset.tooltip&&et.dataset.tooltip.callbacks;return rt?_e.override(rt):_e}const defaultCallbacks={beforeTitle:noop$5,title(_e){if(_e.length>0){const et=_e[0],rt=et.chart.data.labels,nt=rt?rt.length:0;if(this&&this.options&&this.options.mode==="dataset")return et.dataset.label||"";if(et.label)return et.label;if(nt>0&&et.dataIndex<nt)return rt[et.dataIndex]}return""},afterTitle:noop$5,beforeBody:noop$5,beforeLabel:noop$5,label(_e){if(this&&this.options&&this.options.mode==="dataset")return _e.label+": "+_e.formattedValue||_e.formattedValue;let et=_e.dataset.label||"";et&&(et+=": ");const rt=_e.formattedValue;return isNullOrUndef(rt)||(et+=rt),et},labelColor(_e){const rt=_e.chart.getDatasetMeta(_e.datasetIndex).controller.getStyle(_e.dataIndex);return{borderColor:rt.borderColor,backgroundColor:rt.backgroundColor,borderWidth:rt.borderWidth,borderDash:rt.borderDash,borderDashOffset:rt.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(_e){const rt=_e.chart.getDatasetMeta(_e.datasetIndex).controller.getStyle(_e.dataIndex);return{pointStyle:rt.pointStyle,rotation:rt.rotation}},afterLabel:noop$5,afterBody:noop$5,beforeFooter:noop$5,footer:noop$5,afterFooter:noop$5};function invokeCallbackWithFallback(_e,et,rt,nt){const ot=_e[et].call(rt,nt);return typeof ot>"u"?defaultCallbacks[et].call(rt,nt):ot}class Tooltip extends Element$1{constructor(et){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=et.chart,this.options=et.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(et){this.options=et,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const et=this._cachedAnimations;if(et)return et;const rt=this.chart,nt=this.options.setContext(this.getContext()),ot=nt.enabled&&rt.options.animation&&nt.animations,it=new Animations(this.chart,ot);return ot._cacheable&&(this._cachedAnimations=Object.freeze(it)),it}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(et,rt){const{callbacks:nt}=rt,ot=invokeCallbackWithFallback(nt,"beforeTitle",this,et),it=invokeCallbackWithFallback(nt,"title",this,et),st=invokeCallbackWithFallback(nt,"afterTitle",this,et);let at=[];return at=pushOrConcat(at,splitNewlines(ot)),at=pushOrConcat(at,splitNewlines(it)),at=pushOrConcat(at,splitNewlines(st)),at}getBeforeBody(et,rt){return getBeforeAfterBodyLines(invokeCallbackWithFallback(rt.callbacks,"beforeBody",this,et))}getBody(et,rt){const{callbacks:nt}=rt,ot=[];return each$1(et,it=>{const st={before:[],lines:[],after:[]},at=overrideCallbacks(nt,it);pushOrConcat(st.before,splitNewlines(invokeCallbackWithFallback(at,"beforeLabel",this,it))),pushOrConcat(st.lines,invokeCallbackWithFallback(at,"label",this,it)),pushOrConcat(st.after,splitNewlines(invokeCallbackWithFallback(at,"afterLabel",this,it))),ot.push(st)}),ot}getAfterBody(et,rt){return getBeforeAfterBodyLines(invokeCallbackWithFallback(rt.callbacks,"afterBody",this,et))}getFooter(et,rt){const{callbacks:nt}=rt,ot=invokeCallbackWithFallback(nt,"beforeFooter",this,et),it=invokeCallbackWithFallback(nt,"footer",this,et),st=invokeCallbackWithFallback(nt,"afterFooter",this,et);let at=[];return at=pushOrConcat(at,splitNewlines(ot)),at=pushOrConcat(at,splitNewlines(it)),at=pushOrConcat(at,splitNewlines(st)),at}_createItems(et){const rt=this._active,nt=this.chart.data,ot=[],it=[],st=[];let at=[],lt,ct;for(lt=0,ct=rt.length;lt<ct;++lt)at.push(createTooltipItem(this.chart,rt[lt]));return et.filter&&(at=at.filter((pt,ut,ht)=>et.filter(pt,ut,ht,nt))),et.itemSort&&(at=at.sort((pt,ut)=>et.itemSort(pt,ut,nt))),each$1(at,pt=>{const ut=overrideCallbacks(et.callbacks,pt);ot.push(invokeCallbackWithFallback(ut,"labelColor",this,pt)),it.push(invokeCallbackWithFallback(ut,"labelPointStyle",this,pt)),st.push(invokeCallbackWithFallback(ut,"labelTextColor",this,pt))}),this.labelColors=ot,this.labelPointStyles=it,this.labelTextColors=st,this.dataPoints=at,at}update(et,rt){const nt=this.options.setContext(this.getContext()),ot=this._active;let it,st=[];if(!ot.length)this.opacity!==0&&(it={opacity:0});else{const at=positioners[nt.position].call(this,ot,this._eventPosition);st=this._createItems(nt),this.title=this.getTitle(st,nt),this.beforeBody=this.getBeforeBody(st,nt),this.body=this.getBody(st,nt),this.afterBody=this.getAfterBody(st,nt),this.footer=this.getFooter(st,nt);const lt=this._size=getTooltipSize(this,nt),ct=Object.assign({},at,lt),pt=determineAlignment(this.chart,nt,ct),ut=getBackgroundPoint(nt,ct,pt,this.chart);this.xAlign=pt.xAlign,this.yAlign=pt.yAlign,it={opacity:1,x:ut.x,y:ut.y,width:lt.width,height:lt.height,caretX:at.x,caretY:at.y}}this._tooltipItems=st,this.$context=void 0,it&&this._resolveAnimations().update(this,it),et&&nt.external&&nt.external.call(this,{chart:this.chart,tooltip:this,replay:rt})}drawCaret(et,rt,nt,ot){const it=this.getCaretPosition(et,nt,ot);rt.lineTo(it.x1,it.y1),rt.lineTo(it.x2,it.y2),rt.lineTo(it.x3,it.y3)}getCaretPosition(et,rt,nt){const{xAlign:ot,yAlign:it}=this,{caretSize:st,cornerRadius:at}=nt,{topLeft:lt,topRight:ct,bottomLeft:pt,bottomRight:ut}=toTRBLCorners(at),{x:ht,y:ft}=et,{width:gt,height:vt}=rt;let yt,mt,Et,bt,Ct,Tt;return it==="center"?(Ct=ft+vt/2,ot==="left"?(yt=ht,mt=yt-st,bt=Ct+st,Tt=Ct-st):(yt=ht+gt,mt=yt+st,bt=Ct-st,Tt=Ct+st),Et=yt):(ot==="left"?mt=ht+Math.max(lt,pt)+st:ot==="right"?mt=ht+gt-Math.max(ct,ut)-st:mt=this.caretX,it==="top"?(bt=ft,Ct=bt-st,yt=mt-st,Et=mt+st):(bt=ft+vt,Ct=bt+st,yt=mt+st,Et=mt-st),Tt=bt),{x1:yt,x2:mt,x3:Et,y1:bt,y2:Ct,y3:Tt}}drawTitle(et,rt,nt){const ot=this.title,it=ot.length;let st,at,lt;if(it){const ct=getRtlAdapter(nt.rtl,this.x,this.width);for(et.x=getAlignedX(this,nt.titleAlign,nt),rt.textAlign=ct.textAlign(nt.titleAlign),rt.textBaseline="middle",st=toFont(nt.titleFont),at=nt.titleSpacing,rt.fillStyle=nt.titleColor,rt.font=st.string,lt=0;lt<it;++lt)rt.fillText(ot[lt],ct.x(et.x),et.y+st.lineHeight/2),et.y+=st.lineHeight+at,lt+1===it&&(et.y+=nt.titleMarginBottom-at)}}_drawColorBox(et,rt,nt,ot,it){const st=this.labelColors[nt],at=this.labelPointStyles[nt],{boxHeight:lt,boxWidth:ct,boxPadding:pt}=it,ut=toFont(it.bodyFont),ht=getAlignedX(this,"left",it),ft=ot.x(ht),gt=lt<ut.lineHeight?(ut.lineHeight-lt)/2:0,vt=rt.y+gt;if(it.usePointStyle){const yt={radius:Math.min(ct,lt)/2,pointStyle:at.pointStyle,rotation:at.rotation,borderWidth:1},mt=ot.leftForLtr(ft,ct)+ct/2,Et=vt+lt/2;et.strokeStyle=it.multiKeyBackground,et.fillStyle=it.multiKeyBackground,drawPoint(et,yt,mt,Et),et.strokeStyle=st.borderColor,et.fillStyle=st.backgroundColor,drawPoint(et,yt,mt,Et)}else{et.lineWidth=isObject$1(st.borderWidth)?Math.max(...Object.values(st.borderWidth)):st.borderWidth||1,et.strokeStyle=st.borderColor,et.setLineDash(st.borderDash||[]),et.lineDashOffset=st.borderDashOffset||0;const yt=ot.leftForLtr(ft,ct-pt),mt=ot.leftForLtr(ot.xPlus(ft,1),ct-pt-2),Et=toTRBLCorners(st.borderRadius);Object.values(Et).some(bt=>bt!==0)?(et.beginPath(),et.fillStyle=it.multiKeyBackground,addRoundedRectPath(et,{x:yt,y:vt,w:ct,h:lt,radius:Et}),et.fill(),et.stroke(),et.fillStyle=st.backgroundColor,et.beginPath(),addRoundedRectPath(et,{x:mt,y:vt+1,w:ct-2,h:lt-2,radius:Et}),et.fill()):(et.fillStyle=it.multiKeyBackground,et.fillRect(yt,vt,ct,lt),et.strokeRect(yt,vt,ct,lt),et.fillStyle=st.backgroundColor,et.fillRect(mt,vt+1,ct-2,lt-2))}et.fillStyle=this.labelTextColors[nt]}drawBody(et,rt,nt){const{body:ot}=this,{bodySpacing:it,bodyAlign:st,displayColors:at,boxHeight:lt,boxWidth:ct,boxPadding:pt}=nt,ut=toFont(nt.bodyFont);let ht=ut.lineHeight,ft=0;const gt=getRtlAdapter(nt.rtl,this.x,this.width),vt=function(It){rt.fillText(It,gt.x(et.x+ft),et.y+ht/2),et.y+=ht+it},yt=gt.textAlign(st);let mt,Et,bt,Ct,Tt,wt,Rt;for(rt.textAlign=st,rt.textBaseline="middle",rt.font=ut.string,et.x=getAlignedX(this,yt,nt),rt.fillStyle=nt.bodyColor,each$1(this.beforeBody,vt),ft=at&&yt!=="right"?st==="center"?ct/2+pt:ct+2+pt:0,Ct=0,wt=ot.length;Ct<wt;++Ct){for(mt=ot[Ct],Et=this.labelTextColors[Ct],rt.fillStyle=Et,each$1(mt.before,vt),bt=mt.lines,at&&bt.length&&(this._drawColorBox(rt,et,Ct,gt,nt),ht=Math.max(ut.lineHeight,lt)),Tt=0,Rt=bt.length;Tt<Rt;++Tt)vt(bt[Tt]),ht=ut.lineHeight;each$1(mt.after,vt)}ft=0,ht=ut.lineHeight,each$1(this.afterBody,vt),et.y-=it}drawFooter(et,rt,nt){const ot=this.footer,it=ot.length;let st,at;if(it){const lt=getRtlAdapter(nt.rtl,this.x,this.width);for(et.x=getAlignedX(this,nt.footerAlign,nt),et.y+=nt.footerMarginTop,rt.textAlign=lt.textAlign(nt.footerAlign),rt.textBaseline="middle",st=toFont(nt.footerFont),rt.fillStyle=nt.footerColor,rt.font=st.string,at=0;at<it;++at)rt.fillText(ot[at],lt.x(et.x),et.y+st.lineHeight/2),et.y+=st.lineHeight+nt.footerSpacing}}drawBackground(et,rt,nt,ot){const{xAlign:it,yAlign:st}=this,{x:at,y:lt}=et,{width:ct,height:pt}=nt,{topLeft:ut,topRight:ht,bottomLeft:ft,bottomRight:gt}=toTRBLCorners(ot.cornerRadius);rt.fillStyle=ot.backgroundColor,rt.strokeStyle=ot.borderColor,rt.lineWidth=ot.borderWidth,rt.beginPath(),rt.moveTo(at+ut,lt),st==="top"&&this.drawCaret(et,rt,nt,ot),rt.lineTo(at+ct-ht,lt),rt.quadraticCurveTo(at+ct,lt,at+ct,lt+ht),st==="center"&&it==="right"&&this.drawCaret(et,rt,nt,ot),rt.lineTo(at+ct,lt+pt-gt),rt.quadraticCurveTo(at+ct,lt+pt,at+ct-gt,lt+pt),st==="bottom"&&this.drawCaret(et,rt,nt,ot),rt.lineTo(at+ft,lt+pt),rt.quadraticCurveTo(at,lt+pt,at,lt+pt-ft),st==="center"&&it==="left"&&this.drawCaret(et,rt,nt,ot),rt.lineTo(at,lt+ut),rt.quadraticCurveTo(at,lt,at+ut,lt),rt.closePath(),rt.fill(),ot.borderWidth>0&&rt.stroke()}_updateAnimationTarget(et){const rt=this.chart,nt=this.$animations,ot=nt&&nt.x,it=nt&&nt.y;if(ot||it){const st=positioners[et.position].call(this,this._active,this._eventPosition);if(!st)return;const at=this._size=getTooltipSize(this,et),lt=Object.assign({},st,this._size),ct=determineAlignment(rt,et,lt),pt=getBackgroundPoint(et,lt,ct,rt);(ot._to!==pt.x||it._to!==pt.y)&&(this.xAlign=ct.xAlign,this.yAlign=ct.yAlign,this.width=at.width,this.height=at.height,this.caretX=st.x,this.caretY=st.y,this._resolveAnimations().update(this,pt))}}_willRender(){return!!this.opacity}draw(et){const rt=this.options.setContext(this.getContext());let nt=this.opacity;if(!nt)return;this._updateAnimationTarget(rt);const ot={width:this.width,height:this.height},it={x:this.x,y:this.y};nt=Math.abs(nt)<.001?0:nt;const st=toPadding(rt.padding),at=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;rt.enabled&&at&&(et.save(),et.globalAlpha=nt,this.drawBackground(it,et,ot,rt),overrideTextDirection(et,rt.textDirection),it.y+=st.top,this.drawTitle(it,et,rt),this.drawBody(it,et,rt),this.drawFooter(it,et,rt),restoreTextDirection(et,rt.textDirection),et.restore())}getActiveElements(){return this._active||[]}setActiveElements(et,rt){const nt=this._active,ot=et.map(({datasetIndex:at,index:lt})=>{const ct=this.chart.getDatasetMeta(at);if(!ct)throw new Error("Cannot find a dataset at index "+at);return{datasetIndex:at,element:ct.data[lt],index:lt}}),it=!_elementsEqual(nt,ot),st=this._positionChanged(ot,rt);(it||st)&&(this._active=ot,this._eventPosition=rt,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(et,rt,nt=!0){if(rt&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const ot=this.options,it=this._active||[],st=this._getActiveElements(et,it,rt,nt),at=this._positionChanged(st,et),lt=rt||!_elementsEqual(st,it)||at;return lt&&(this._active=st,(ot.enabled||ot.external)&&(this._eventPosition={x:et.x,y:et.y},this.update(!0,rt))),lt}_getActiveElements(et,rt,nt,ot){const it=this.options;if(et.type==="mouseout")return[];if(!ot)return rt;const st=this.chart.getElementsAtEventForMode(et,it.mode,it,nt);return it.reverse&&st.reverse(),st}_positionChanged(et,rt){const{caretX:nt,caretY:ot,options:it}=this,st=positioners[it.position].call(this,et,rt);return st!==!1&&(nt!==st.x||ot!==st.y)}}Un(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(_e,et,rt){rt&&(_e.tooltip=new Tooltip({chart:_e,options:rt}))},beforeUpdate(_e,et,rt){_e.tooltip&&_e.tooltip.initialize(rt)},reset(_e,et,rt){_e.tooltip&&_e.tooltip.initialize(rt)},afterDraw(_e){const et=_e.tooltip;if(et&&et._willRender()){const rt={tooltip:et};if(_e.notifyPlugins("beforeTooltipDraw",{...rt,cancelable:!0})===!1)return;et.draw(_e.ctx),_e.notifyPlugins("afterTooltipDraw",rt)}},afterEvent(_e,et){if(_e.tooltip){const rt=et.replay;_e.tooltip.handleEvent(et.event,rt,et.inChartArea)&&(et.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(_e,et)=>et.bodyFont.size,boxWidth:(_e,et)=>et.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:_e=>_e!=="filter"&&_e!=="itemSort"&&_e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(_e,et,rt,nt)=>(typeof et=="string"?(rt=_e.push(et)-1,nt.unshift({index:rt,label:et})):isNaN(et)&&(rt=null),rt);function findOrAddLabel(_e,et,rt,nt){const ot=_e.indexOf(et);if(ot===-1)return addIfString(_e,et,rt,nt);const it=_e.lastIndexOf(et);return ot!==it?rt:ot}const validIndex=(_e,et)=>_e===null?null:_limitValue(Math.round(_e),0,et);function _getLabelForValue(_e){const et=this.getLabels();return _e>=0&&_e<et.length?et[_e]:_e}class CategoryScale extends Scale{constructor(et){super(et),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(et){const rt=this._addedLabels;if(rt.length){const nt=this.getLabels();for(const{index:ot,label:it}of rt)nt[ot]===it&&nt.splice(ot,1);this._addedLabels=[]}super.init(et)}parse(et,rt){if(isNullOrUndef(et))return null;const nt=this.getLabels();return rt=isFinite(rt)&&nt[rt]===et?rt:findOrAddLabel(nt,et,valueOrDefault(rt,et),this._addedLabels),validIndex(rt,nt.length-1)}determineDataLimits(){const{minDefined:et,maxDefined:rt}=this.getUserBounds();let{min:nt,max:ot}=this.getMinMax(!0);this.options.bounds==="ticks"&&(et||(nt=0),rt||(ot=this.getLabels().length-1)),this.min=nt,this.max=ot}buildTicks(){const et=this.min,rt=this.max,nt=this.options.offset,ot=[];let it=this.getLabels();it=et===0&&rt===it.length-1?it:it.slice(et,rt+1),this._valueRange=Math.max(it.length-(nt?0:1),1),this._startValue=this.min-(nt?.5:0);for(let st=et;st<=rt;st++)ot.push({value:st});return ot}getLabelForValue(et){return _getLabelForValue.call(this,et)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(et){return typeof et!="number"&&(et=this.parse(et)),et===null?NaN:this.getPixelForDecimal((et-this._startValue)/this._valueRange)}getPixelForTick(et){const rt=this.ticks;return et<0||et>rt.length-1?null:this.getPixelForValue(rt[et].value)}getValueForPixel(et){return Math.round(this._startValue+this.getDecimalForPixel(et)*this._valueRange)}getBasePixel(){return this.bottom}}Un(CategoryScale,"id","category"),Un(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(_e,et){const rt=[],{bounds:ot,step:it,min:st,max:at,precision:lt,count:ct,maxTicks:pt,maxDigits:ut,includeBounds:ht}=_e,ft=it||1,gt=pt-1,{min:vt,max:yt}=et,mt=!isNullOrUndef(st),Et=!isNullOrUndef(at),bt=!isNullOrUndef(ct),Ct=(yt-vt)/(ut+1);let Tt=niceNum((yt-vt)/gt/ft)*ft,wt,Rt,It,St;if(Tt<1e-14&&!mt&&!Et)return[{value:vt},{value:yt}];St=Math.ceil(yt/Tt)-Math.floor(vt/Tt),St>gt&&(Tt=niceNum(St*Tt/gt/ft)*ft),isNullOrUndef(lt)||(wt=Math.pow(10,lt),Tt=Math.ceil(Tt*wt)/wt),ot==="ticks"?(Rt=Math.floor(vt/Tt)*Tt,It=Math.ceil(yt/Tt)*Tt):(Rt=vt,It=yt),mt&&Et&&it&&almostWhole((at-st)/it,Tt/1e3)?(St=Math.round(Math.min((at-st)/Tt,pt)),Tt=(at-st)/St,Rt=st,It=at):bt?(Rt=mt?st:Rt,It=Et?at:It,St=ct-1,Tt=(It-Rt)/St):(St=(It-Rt)/Tt,almostEquals(St,Math.round(St),Tt/1e3)?St=Math.round(St):St=Math.ceil(St));const Pt=Math.max(_decimalPlaces(Tt),_decimalPlaces(Rt));wt=Math.pow(10,isNullOrUndef(lt)?Pt:lt),Rt=Math.round(Rt*wt)/wt,It=Math.round(It*wt)/wt;let Ot=0;for(mt&&(ht&&Rt!==st?(rt.push({value:st}),Rt<st&&Ot++,almostEquals(Math.round((Rt+Ot*Tt)*wt)/wt,st,relativeLabelSize(st,Ct,_e))&&Ot++):Rt<st&&Ot++);Ot<St;++Ot)rt.push({value:Math.round((Rt+Ot*Tt)*wt)/wt});return Et&&ht&&It!==at?rt.length&&almostEquals(rt[rt.length-1].value,at,relativeLabelSize(at,Ct,_e))?rt[rt.length-1].value=at:rt.push({value:at}):(!Et||It===at)&&rt.push({value:It}),rt}function relativeLabelSize(_e,et,{horizontal:rt,minRotation:nt}){const ot=toRadians(nt),it=(rt?Math.sin(ot):Math.cos(ot))||.001,st=.75*et*(""+_e).length;return Math.min(et/it,st)}class LinearScaleBase extends Scale{constructor(et){super(et),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(et,rt){return isNullOrUndef(et)||(typeof et=="number"||et instanceof Number)&&!isFinite(+et)?null:+et}handleTickRangeOptions(){const{beginAtZero:et}=this.options,{minDefined:rt,maxDefined:nt}=this.getUserBounds();let{min:ot,max:it}=this;const st=lt=>ot=rt?ot:lt,at=lt=>it=nt?it:lt;if(et){const lt=sign(ot),ct=sign(it);lt<0&&ct<0?at(0):lt>0&&ct>0&&st(0)}if(ot===it){let lt=it===0?1:Math.abs(it*.05);at(it+lt),et||st(ot-lt)}this.min=ot,this.max=it}getTickLimit(){const et=this.options.ticks;let{maxTicksLimit:rt,stepSize:nt}=et,ot;return nt?(ot=Math.ceil(this.max/nt)-Math.floor(this.min/nt)+1,ot>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${nt} would result generating up to ${ot} ticks. Limiting to 1000.`),ot=1e3)):(ot=this.computeTickLimit(),rt=rt||11),rt&&(ot=Math.min(rt,ot)),ot}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const et=this.options,rt=et.ticks;let nt=this.getTickLimit();nt=Math.max(2,nt);const ot={maxTicks:nt,bounds:et.bounds,min:et.min,max:et.max,precision:rt.precision,step:rt.stepSize,count:rt.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:rt.minRotation||0,includeBounds:rt.includeBounds!==!1},it=this._range||this,st=generateTicks$1(ot,it);return et.bounds==="ticks"&&_setMinAndMaxByKey(st,this,"value"),et.reverse?(st.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),st}configure(){const et=this.ticks;let rt=this.min,nt=this.max;if(super.configure(),this.options.offset&&et.length){const ot=(nt-rt)/Math.max(et.length-1,1)/2;rt-=ot,nt+=ot}this._startValue=rt,this._endValue=nt,this._valueRange=nt-rt}getLabelForValue(et){return formatNumber(et,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:et,max:rt}=this.getMinMax(!0);this.min=isNumberFinite(et)?et:0,this.max=isNumberFinite(rt)?rt:1,this.handleTickRangeOptions()}computeTickLimit(){const et=this.isHorizontal(),rt=et?this.width:this.height,nt=toRadians(this.options.ticks.minRotation),ot=(et?Math.sin(nt):Math.cos(nt))||.001,it=this._resolveTickFontOptions(0);return Math.ceil(rt/Math.min(40,it.lineHeight/ot))}getPixelForValue(et){return et===null?NaN:this.getPixelForDecimal((et-this._startValue)/this._valueRange)}getValueForPixel(et){return this._startValue+this.getDecimalForPixel(et)*this._valueRange}}Un(LinearScale,"id","linear"),Un(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=_e=>Math.floor(log10(_e)),changeExponent=(_e,et)=>Math.pow(10,log10Floor(_e)+et);function isMajor(_e){return _e/Math.pow(10,log10Floor(_e))===1}function steps(_e,et,rt){const nt=Math.pow(10,rt),ot=Math.floor(_e/nt);return Math.ceil(et/nt)-ot}function startExp(_e,et){const rt=et-_e;let nt=log10Floor(rt);for(;steps(_e,et,nt)>10;)nt++;for(;steps(_e,et,nt)<10;)nt--;return Math.min(nt,log10Floor(_e))}function generateTicks(_e,{min:et,max:rt}){et=finiteOrDefault(_e.min,et);const nt=[],ot=log10Floor(et);let it=startExp(et,rt),st=it<0?Math.pow(10,Math.abs(it)):1;const at=Math.pow(10,it),lt=ot>it?Math.pow(10,ot):0,ct=Math.round((et-lt)*st)/st,pt=Math.floor((et-lt)/at/10)*at*10;let ut=Math.floor((ct-pt)/Math.pow(10,it)),ht=finiteOrDefault(_e.min,Math.round((lt+pt+ut*Math.pow(10,it))*st)/st);for(;ht<rt;)nt.push({value:ht,major:isMajor(ht),significand:ut}),ut>=10?ut=ut<15?15:20:ut++,ut>=20&&(it++,ut=2,st=it>=0?1:st),ht=Math.round((lt+pt+ut*Math.pow(10,it))*st)/st;const ft=finiteOrDefault(_e.max,ht);return nt.push({value:ft,major:isMajor(ft),significand:ut}),nt}class LogarithmicScale extends Scale{constructor(et){super(et),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(et,rt){const nt=LinearScaleBase.prototype.parse.apply(this,[et,rt]);if(nt===0){this._zero=!0;return}return isNumberFinite(nt)&&nt>0?nt:null}determineDataLimits(){const{min:et,max:rt}=this.getMinMax(!0);this.min=isNumberFinite(et)?Math.max(0,et):null,this.max=isNumberFinite(rt)?Math.max(0,rt):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=et===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:et,maxDefined:rt}=this.getUserBounds();let nt=this.min,ot=this.max;const it=at=>nt=et?nt:at,st=at=>ot=rt?ot:at;nt===ot&&(nt<=0?(it(1),st(10)):(it(changeExponent(nt,-1)),st(changeExponent(ot,1)))),nt<=0&&it(changeExponent(ot,-1)),ot<=0&&st(changeExponent(nt,1)),this.min=nt,this.max=ot}buildTicks(){const et=this.options,rt={min:this._userMin,max:this._userMax},nt=generateTicks(rt,this);return et.bounds==="ticks"&&_setMinAndMaxByKey(nt,this,"value"),et.reverse?(nt.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),nt}getLabelForValue(et){return et===void 0?"0":formatNumber(et,this.chart.options.locale,this.options.ticks.format)}configure(){const et=this.min;super.configure(),this._startValue=log10(et),this._valueRange=log10(this.max)-log10(et)}getPixelForValue(et){return(et===void 0||et===0)&&(et=this.min),et===null||isNaN(et)?NaN:this.getPixelForDecimal(et===this.min?0:(log10(et)-this._startValue)/this._valueRange)}getValueForPixel(et){const rt=this.getDecimalForPixel(et);return Math.pow(10,this._startValue+rt*this._valueRange)}}Un(LogarithmicScale,"id","logarithmic"),Un(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(_e){const et=_e.ticks;if(et.display&&_e.display){const rt=toPadding(et.backdropPadding);return valueOrDefault(et.font&&et.font.size,defaults.font.size)+rt.height}return 0}function measureLabelSize(_e,et,rt){return rt=isArray(rt)?rt:[rt],{w:_longestText(_e,et.string,rt),h:rt.length*et.lineHeight}}function determineLimits(_e,et,rt,nt,ot){return _e===nt||_e===ot?{start:et-rt/2,end:et+rt/2}:_e<nt||_e>ot?{start:et-rt,end:et}:{start:et,end:et+rt}}function fitWithPointLabels(_e){const et={l:_e.left+_e._padding.left,r:_e.right-_e._padding.right,t:_e.top+_e._padding.top,b:_e.bottom-_e._padding.bottom},rt=Object.assign({},et),nt=[],ot=[],it=_e._pointLabels.length,st=_e.options.pointLabels,at=st.centerPointLabels?PI/it:0;for(let lt=0;lt<it;lt++){const ct=st.setContext(_e.getPointLabelContext(lt));ot[lt]=ct.padding;const pt=_e.getPointPosition(lt,_e.drawingArea+ot[lt],at),ut=toFont(ct.font),ht=measureLabelSize(_e.ctx,ut,_e._pointLabels[lt]);nt[lt]=ht;const ft=_normalizeAngle(_e.getIndexAngle(lt)+at),gt=Math.round(toDegrees(ft)),vt=determineLimits(gt,pt.x,ht.w,0,180),yt=determineLimits(gt,pt.y,ht.h,90,270);updateLimits(rt,et,ft,vt,yt)}_e.setCenterPoint(et.l-rt.l,rt.r-et.r,et.t-rt.t,rt.b-et.b),_e._pointLabelItems=buildPointLabelItems(_e,nt,ot)}function updateLimits(_e,et,rt,nt,ot){const it=Math.abs(Math.sin(rt)),st=Math.abs(Math.cos(rt));let at=0,lt=0;nt.start<et.l?(at=(et.l-nt.start)/it,_e.l=Math.min(_e.l,et.l-at)):nt.end>et.r&&(at=(nt.end-et.r)/it,_e.r=Math.max(_e.r,et.r+at)),ot.start<et.t?(lt=(et.t-ot.start)/st,_e.t=Math.min(_e.t,et.t-lt)):ot.end>et.b&&(lt=(ot.end-et.b)/st,_e.b=Math.max(_e.b,et.b+lt))}function buildPointLabelItems(_e,et,rt){const nt=[],ot=_e._pointLabels.length,it=_e.options,st=getTickBackdropHeight(it)/2,at=_e.drawingArea,lt=it.pointLabels.centerPointLabels?PI/ot:0;for(let ct=0;ct<ot;ct++){const pt=_e.getPointPosition(ct,at+st+rt[ct],lt),ut=Math.round(toDegrees(_normalizeAngle(pt.angle+HALF_PI))),ht=et[ct],ft=yForAngle(pt.y,ht.h,ut),gt=getTextAlignForAngle(ut),vt=leftForTextAlign(pt.x,ht.w,gt);nt.push({x:pt.x,y:ft,textAlign:gt,left:vt,top:ft,right:vt+ht.w,bottom:ft+ht.h})}return nt}function getTextAlignForAngle(_e){return _e===0||_e===180?"center":_e<180?"left":"right"}function leftForTextAlign(_e,et,rt){return rt==="right"?_e-=et:rt==="center"&&(_e-=et/2),_e}function yForAngle(_e,et,rt){return rt===90||rt===270?_e-=et/2:(rt>270||rt<90)&&(_e-=et),_e}function drawPointLabels(_e,et){const{ctx:rt,options:{pointLabels:nt}}=_e;for(let ot=et-1;ot>=0;ot--){const it=nt.setContext(_e.getPointLabelContext(ot)),st=toFont(it.font),{x:at,y:lt,textAlign:ct,left:pt,top:ut,right:ht,bottom:ft}=_e._pointLabelItems[ot],{backdropColor:gt}=it;if(!isNullOrUndef(gt)){const vt=toTRBLCorners(it.borderRadius),yt=toPadding(it.backdropPadding);rt.fillStyle=gt;const mt=pt-yt.left,Et=ut-yt.top,bt=ht-pt+yt.width,Ct=ft-ut+yt.height;Object.values(vt).some(Tt=>Tt!==0)?(rt.beginPath(),addRoundedRectPath(rt,{x:mt,y:Et,w:bt,h:Ct,radius:vt}),rt.fill()):rt.fillRect(mt,Et,bt,Ct)}renderText(rt,_e._pointLabels[ot],at,lt+st.lineHeight/2,st,{color:it.color,textAlign:ct,textBaseline:"middle"})}}function pathRadiusLine(_e,et,rt,nt){const{ctx:ot}=_e;if(rt)ot.arc(_e.xCenter,_e.yCenter,et,0,TAU);else{let it=_e.getPointPosition(0,et);ot.moveTo(it.x,it.y);for(let st=1;st<nt;st++)it=_e.getPointPosition(st,et),ot.lineTo(it.x,it.y)}}function drawRadiusLine(_e,et,rt,nt,ot){const it=_e.ctx,st=et.circular,{color:at,lineWidth:lt}=et;!st&&!nt||!at||!lt||rt<0||(it.save(),it.strokeStyle=at,it.lineWidth=lt,it.setLineDash(ot.dash),it.lineDashOffset=ot.dashOffset,it.beginPath(),pathRadiusLine(_e,rt,st,nt),it.closePath(),it.stroke(),it.restore())}function createPointLabelContext(_e,et,rt){return createContext(_e,{label:rt,index:et,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(et){super(et),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const et=this._padding=toPadding(getTickBackdropHeight(this.options)/2),rt=this.width=this.maxWidth-et.width,nt=this.height=this.maxHeight-et.height;this.xCenter=Math.floor(this.left+rt/2+et.left),this.yCenter=Math.floor(this.top+nt/2+et.top),this.drawingArea=Math.floor(Math.min(rt,nt)/2)}determineDataLimits(){const{min:et,max:rt}=this.getMinMax(!1);this.min=isNumberFinite(et)&&!isNaN(et)?et:0,this.max=isNumberFinite(rt)&&!isNaN(rt)?rt:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(et){LinearScaleBase.prototype.generateTickLabels.call(this,et),this._pointLabels=this.getLabels().map((rt,nt)=>{const ot=callback(this.options.pointLabels.callback,[rt,nt],this);return ot||ot===0?ot:""}).filter((rt,nt)=>this.chart.getDataVisibility(nt))}fit(){const et=this.options;et.display&&et.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(et,rt,nt,ot){this.xCenter+=Math.floor((et-rt)/2),this.yCenter+=Math.floor((nt-ot)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(et,rt,nt,ot))}getIndexAngle(et){const rt=TAU/(this._pointLabels.length||1),nt=this.options.startAngle||0;return _normalizeAngle(et*rt+toRadians(nt))}getDistanceFromCenterForValue(et){if(isNullOrUndef(et))return NaN;const rt=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-et)*rt:(et-this.min)*rt}getValueForDistanceFromCenter(et){if(isNullOrUndef(et))return NaN;const rt=et/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-rt:this.min+rt}getPointLabelContext(et){const rt=this._pointLabels||[];if(et>=0&&et<rt.length){const nt=rt[et];return createPointLabelContext(this.getContext(),et,nt)}}getPointPosition(et,rt,nt=0){const ot=this.getIndexAngle(et)-HALF_PI+nt;return{x:Math.cos(ot)*rt+this.xCenter,y:Math.sin(ot)*rt+this.yCenter,angle:ot}}getPointPositionForValue(et,rt){return this.getPointPosition(et,this.getDistanceFromCenterForValue(rt))}getBasePosition(et){return this.getPointPositionForValue(et||0,this.getBaseValue())}getPointLabelPosition(et){const{left:rt,top:nt,right:ot,bottom:it}=this._pointLabelItems[et];return{left:rt,top:nt,right:ot,bottom:it}}drawBackground(){const{backgroundColor:et,grid:{circular:rt}}=this.options;if(et){const nt=this.ctx;nt.save(),nt.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),rt,this._pointLabels.length),nt.closePath(),nt.fillStyle=et,nt.fill(),nt.restore()}}drawGrid(){const et=this.ctx,rt=this.options,{angleLines:nt,grid:ot,border:it}=rt,st=this._pointLabels.length;let at,lt,ct;if(rt.pointLabels.display&&drawPointLabels(this,st),ot.display&&this.ticks.forEach((pt,ut)=>{if(ut!==0){lt=this.getDistanceFromCenterForValue(pt.value);const ht=this.getContext(ut),ft=ot.setContext(ht),gt=it.setContext(ht);drawRadiusLine(this,ft,lt,st,gt)}}),nt.display){for(et.save(),at=st-1;at>=0;at--){const pt=nt.setContext(this.getPointLabelContext(at)),{color:ut,lineWidth:ht}=pt;!ht||!ut||(et.lineWidth=ht,et.strokeStyle=ut,et.setLineDash(pt.borderDash),et.lineDashOffset=pt.borderDashOffset,lt=this.getDistanceFromCenterForValue(rt.ticks.reverse?this.min:this.max),ct=this.getPointPosition(at,lt),et.beginPath(),et.moveTo(this.xCenter,this.yCenter),et.lineTo(ct.x,ct.y),et.stroke())}et.restore()}}drawBorder(){}drawLabels(){const et=this.ctx,rt=this.options,nt=rt.ticks;if(!nt.display)return;const ot=this.getIndexAngle(0);let it,st;et.save(),et.translate(this.xCenter,this.yCenter),et.rotate(ot),et.textAlign="center",et.textBaseline="middle",this.ticks.forEach((at,lt)=>{if(lt===0&&!rt.reverse)return;const ct=nt.setContext(this.getContext(lt)),pt=toFont(ct.font);if(it=this.getDistanceFromCenterForValue(this.ticks[lt].value),ct.showLabelBackdrop){et.font=pt.string,st=et.measureText(at.label).width,et.fillStyle=ct.backdropColor;const ut=toPadding(ct.backdropPadding);et.fillRect(-st/2-ut.left,-it-pt.size/2-ut.top,st+ut.width,pt.size+ut.height)}renderText(et,at.label,0,-it,pt,{color:ct.color})}),et.restore()}drawTitle(){}}Un(RadialLinearScale,"id","radialLinear"),Un(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(et){return et},padding:5,centerPointLabels:!1}}),Un(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Un(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(_e,et){return _e-et}function parse(_e,et){if(isNullOrUndef(et))return null;const rt=_e._adapter,{parser:nt,round:ot,isoWeekday:it}=_e._parseOpts;let st=et;return typeof nt=="function"&&(st=nt(st)),isNumberFinite(st)||(st=typeof nt=="string"?rt.parse(st,nt):rt.parse(st)),st===null?null:(ot&&(st=ot==="week"&&(isNumber$1(it)||it===!0)?rt.startOf(st,"isoWeek",it):rt.startOf(st,ot)),+st)}function determineUnitForAutoTicks(_e,et,rt,nt){const ot=UNITS.length;for(let it=UNITS.indexOf(_e);it<ot-1;++it){const st=INTERVALS[UNITS[it]],at=st.steps?st.steps:Number.MAX_SAFE_INTEGER;if(st.common&&Math.ceil((rt-et)/(at*st.size))<=nt)return UNITS[it]}return UNITS[ot-1]}function determineUnitForFormatting(_e,et,rt,nt,ot){for(let it=UNITS.length-1;it>=UNITS.indexOf(rt);it--){const st=UNITS[it];if(INTERVALS[st].common&&_e._adapter.diff(ot,nt,st)>=et-1)return st}return UNITS[rt?UNITS.indexOf(rt):0]}function determineMajorUnit(_e){for(let et=UNITS.indexOf(_e)+1,rt=UNITS.length;et<rt;++et)if(INTERVALS[UNITS[et]].common)return UNITS[et]}function addTick(_e,et,rt){if(!rt)_e[et]=!0;else if(rt.length){const{lo:nt,hi:ot}=_lookup(rt,et),it=rt[nt]>=et?rt[nt]:rt[ot];_e[it]=!0}}function setMajorTicks(_e,et,rt,nt){const ot=_e._adapter,it=+ot.startOf(et[0].value,nt),st=et[et.length-1].value;let at,lt;for(at=it;at<=st;at=+ot.add(at,1,nt))lt=rt[at],lt>=0&&(et[lt].major=!0);return et}function ticksFromTimestamps(_e,et,rt){const nt=[],ot={},it=et.length;let st,at;for(st=0;st<it;++st)at=et[st],ot[at]=st,nt.push({value:at,major:!1});return it===0||!rt?nt:setMajorTicks(_e,nt,ot,rt)}class TimeScale extends Scale{constructor(et){super(et),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(et,rt={}){const nt=et.time||(et.time={}),ot=this._adapter=new adapters._date(et.adapters.date);ot.init(rt),mergeIf(nt.displayFormats,ot.formats()),this._parseOpts={parser:nt.parser,round:nt.round,isoWeekday:nt.isoWeekday},super.init(et),this._normalized=rt.normalized}parse(et,rt){return et===void 0?null:parse(this,et)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const et=this.options,rt=this._adapter,nt=et.time.unit||"day";let{min:ot,max:it,minDefined:st,maxDefined:at}=this.getUserBounds();function lt(ct){!st&&!isNaN(ct.min)&&(ot=Math.min(ot,ct.min)),!at&&!isNaN(ct.max)&&(it=Math.max(it,ct.max))}(!st||!at)&&(lt(this._getLabelBounds()),(et.bounds!=="ticks"||et.ticks.source!=="labels")&&lt(this.getMinMax(!1))),ot=isNumberFinite(ot)&&!isNaN(ot)?ot:+rt.startOf(Date.now(),nt),it=isNumberFinite(it)&&!isNaN(it)?it:+rt.endOf(Date.now(),nt)+1,this.min=Math.min(ot,it-1),this.max=Math.max(ot+1,it)}_getLabelBounds(){const et=this.getLabelTimestamps();let rt=Number.POSITIVE_INFINITY,nt=Number.NEGATIVE_INFINITY;return et.length&&(rt=et[0],nt=et[et.length-1]),{min:rt,max:nt}}buildTicks(){const et=this.options,rt=et.time,nt=et.ticks,ot=nt.source==="labels"?this.getLabelTimestamps():this._generate();et.bounds==="ticks"&&ot.length&&(this.min=this._userMin||ot[0],this.max=this._userMax||ot[ot.length-1]);const it=this.min,st=this.max,at=_filterBetween(ot,it,st);return this._unit=rt.unit||(nt.autoSkip?determineUnitForAutoTicks(rt.minUnit,this.min,this.max,this._getLabelCapacity(it)):determineUnitForFormatting(this,at.length,rt.minUnit,this.min,this.max)),this._majorUnit=!nt.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(ot),et.reverse&&at.reverse(),ticksFromTimestamps(this,at,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(et=>+et.value))}initOffsets(et=[]){let rt=0,nt=0,ot,it;this.options.offset&&et.length&&(ot=this.getDecimalForValue(et[0]),et.length===1?rt=1-ot:rt=(this.getDecimalForValue(et[1])-ot)/2,it=this.getDecimalForValue(et[et.length-1]),et.length===1?nt=it:nt=(it-this.getDecimalForValue(et[et.length-2]))/2);const st=et.length<3?.5:.25;rt=_limitValue(rt,0,st),nt=_limitValue(nt,0,st),this._offsets={start:rt,end:nt,factor:1/(rt+1+nt)}}_generate(){const et=this._adapter,rt=this.min,nt=this.max,ot=this.options,it=ot.time,st=it.unit||determineUnitForAutoTicks(it.minUnit,rt,nt,this._getLabelCapacity(rt)),at=valueOrDefault(ot.ticks.stepSize,1),lt=st==="week"?it.isoWeekday:!1,ct=isNumber$1(lt)||lt===!0,pt={};let ut=rt,ht,ft;if(ct&&(ut=+et.startOf(ut,"isoWeek",lt)),ut=+et.startOf(ut,ct?"day":st),et.diff(nt,rt,st)>1e5*at)throw new Error(rt+" and "+nt+" are too far apart with stepSize of "+at+" "+st);const gt=ot.ticks.source==="data"&&this.getDataTimestamps();for(ht=ut,ft=0;ht<nt;ht=+et.add(ht,at,st),ft++)addTick(pt,ht,gt);return(ht===nt||ot.bounds==="ticks"||ft===1)&&addTick(pt,ht,gt),Object.keys(pt).sort((vt,yt)=>vt-yt).map(vt=>+vt)}getLabelForValue(et){const rt=this._adapter,nt=this.options.time;return nt.tooltipFormat?rt.format(et,nt.tooltipFormat):rt.format(et,nt.displayFormats.datetime)}format(et,rt){const ot=this.options.time.displayFormats,it=this._unit,st=rt||ot[it];return this._adapter.format(et,st)}_tickFormatFunction(et,rt,nt,ot){const it=this.options,st=it.ticks.callback;if(st)return callback(st,[et,rt,nt],this);const at=it.time.displayFormats,lt=this._unit,ct=this._majorUnit,pt=lt&&at[lt],ut=ct&&at[ct],ht=nt[rt],ft=ct&&ut&&ht&&ht.major;return this._adapter.format(et,ot||(ft?ut:pt))}generateTickLabels(et){let rt,nt,ot;for(rt=0,nt=et.length;rt<nt;++rt)ot=et[rt],ot.label=this._tickFormatFunction(ot.value,rt,et)}getDecimalForValue(et){return et===null?NaN:(et-this.min)/(this.max-this.min)}getPixelForValue(et){const rt=this._offsets,nt=this.getDecimalForValue(et);return this.getPixelForDecimal((rt.start+nt)*rt.factor)}getValueForPixel(et){const rt=this._offsets,nt=this.getDecimalForPixel(et)/rt.factor-rt.end;return this.min+nt*(this.max-this.min)}_getLabelSize(et){const rt=this.options.ticks,nt=this.ctx.measureText(et).width,ot=toRadians(this.isHorizontal()?rt.maxRotation:rt.minRotation),it=Math.cos(ot),st=Math.sin(ot),at=this._resolveTickFontOptions(0).size;return{w:nt*it+at*st,h:nt*st+at*it}}_getLabelCapacity(et){const rt=this.options.time,nt=rt.displayFormats,ot=nt[rt.unit]||nt.millisecond,it=this._tickFormatFunction(et,0,ticksFromTimestamps(this,[et],this._majorUnit),ot),st=this._getLabelSize(it),at=Math.floor(this.isHorizontal()?this.width/st.w:this.height/st.h)-1;return at>0?at:1}getDataTimestamps(){let et=this._cache.data||[],rt,nt;if(et.length)return et;const ot=this.getMatchingVisibleMetas();if(this._normalized&&ot.length)return this._cache.data=ot[0].controller.getAllParsedValues(this);for(rt=0,nt=ot.length;rt<nt;++rt)et=et.concat(ot[rt].controller.getAllParsedValues(this));return this._cache.data=this.normalize(et)}getLabelTimestamps(){const et=this._cache.labels||[];let rt,nt;if(et.length)return et;const ot=this.getLabels();for(rt=0,nt=ot.length;rt<nt;++rt)et.push(parse(this,ot[rt]));return this._cache.labels=this._normalized?et:this.normalize(et)}normalize(et){return _arrayUnique(et.sort(sorter))}}Un(TimeScale,"id","time"),Un(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate(_e,et,rt){let nt=0,ot=_e.length-1,it,st,at,lt;rt?(et>=_e[nt].pos&&et<=_e[ot].pos&&({lo:nt,hi:ot}=_lookupByKey(_e,"pos",et)),{pos:it,time:at}=_e[nt],{pos:st,time:lt}=_e[ot]):(et>=_e[nt].time&&et<=_e[ot].time&&({lo:nt,hi:ot}=_lookupByKey(_e,"time",et)),{time:it,pos:at}=_e[nt],{time:st,pos:lt}=_e[ot]);const ct=st-it;return ct?at+(lt-at)*(et-it)/ct:at}class TimeSeriesScale extends TimeScale{constructor(et){super(et),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const et=this._getTimestampsForTable(),rt=this._table=this.buildLookupTable(et);this._minPos=interpolate(rt,this.min),this._tableRange=interpolate(rt,this.max)-this._minPos,super.initOffsets(et)}buildLookupTable(et){const{min:rt,max:nt}=this,ot=[],it=[];let st,at,lt,ct,pt;for(st=0,at=et.length;st<at;++st)ct=et[st],ct>=rt&&ct<=nt&&ot.push(ct);if(ot.length<2)return[{time:rt,pos:0},{time:nt,pos:1}];for(st=0,at=ot.length;st<at;++st)pt=ot[st+1],lt=ot[st-1],ct=ot[st],Math.round((pt+lt)/2)!==ct&&it.push({time:ct,pos:st/(at-1)});return it}_getTimestampsForTable(){let et=this._cache.all||[];if(et.length)return et;const rt=this.getDataTimestamps(),nt=this.getLabelTimestamps();return rt.length&&nt.length?et=this.normalize(rt.concat(nt)):et=rt.length?rt:nt,et=this._cache.all=et,et}getDecimalForValue(et){return(interpolate(this._table,et)-this._minPos)/this._tableRange}getValueForPixel(et){const rt=this._offsets,nt=this.getDecimalForPixel(et)/rt.factor-rt.end;return interpolate(this._table,nt*this._tableRange+this._minPos,!0)}}Un(TimeSeriesScale,"id","timeseries"),Un(TimeSeriesScale,"defaults",TimeScale.defaults);const defaultDatasetIdKey="label";function reforwardRef(_e,et){typeof _e=="function"?_e(et):_e&&(_e.current=et)}function setOptions(_e,et){const rt=_e.options;rt&&et&&Object.assign(rt,et)}function setLabels(_e,et){_e.labels=et}function setDatasets(_e,et){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const nt=[];_e.datasets=et.map(ot=>{const it=_e.datasets.find(st=>st[rt]===ot[rt]);return!it||!ot.data||nt.includes(it)?{...ot}:(nt.push(it),Object.assign(it,ot),it)})}function cloneData(_e){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const rt={labels:[],datasets:[]};return setLabels(rt,_e.labels),setDatasets(rt,_e.datasets,et),rt}function ChartComponent(_e,et){const{height:rt=150,width:nt=300,redraw:ot=!1,datasetIdKey:it,type:st,data:at,options:lt,plugins:ct=[],fallbackContent:pt,updateMode:ut,...ht}=_e,ft=reactExports.useRef(null),gt=reactExports.useRef(),vt=()=>{ft.current&&(gt.current=new Chart$1(ft.current,{type:st,data:cloneData(at,it),options:lt&&{...lt},plugins:ct}),reforwardRef(et,gt.current))},yt=()=>{reforwardRef(et,null),gt.current&&(gt.current.destroy(),gt.current=null)};return reactExports.useEffect(()=>{!ot&&gt.current&&lt&&setOptions(gt.current,lt)},[ot,lt]),reactExports.useEffect(()=>{!ot&&gt.current&&setLabels(gt.current.config.data,at.labels)},[ot,at.labels]),reactExports.useEffect(()=>{!ot&&gt.current&&at.datasets&&setDatasets(gt.current.config.data,at.datasets,it)},[ot,at.datasets]),reactExports.useEffect(()=>{gt.current&&(ot?(yt(),setTimeout(vt)):gt.current.update(ut))},[ot,lt,at.labels,at.datasets,ut]),reactExports.useEffect(()=>{gt.current&&(yt(),setTimeout(vt))},[st]),reactExports.useEffect(()=>(vt(),()=>yt()),[]),React$1.createElement("canvas",Object.assign({ref:ft,role:"img",height:rt,width:nt},ht),pt)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(_e,et){return Chart$1.register(et),reactExports.forwardRef((rt,nt)=>React$1.createElement(Chart,Object.assign({},rt,{ref:nt,type:_e})))}const Bar=createTypedChart("bar",BarController);Chart$1.register(CategoryScale,LinearScale,BarElement,plugin_title,plugin_tooltip);function BarChart({title:_e,labels:et,values:rt}){return jsx(Bar,{options:{responsive:!0,plugins:{title:{display:!0,text:_e}}},data:{labels:et,datasets:[{data:rt,backgroundColor:"#5048E2"}]}})}var PermIdentity={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(PermIdentity,"__esModule",{value:!0});var default_1$8=PermIdentity.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=require$$2,_default$8=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),"PermIdentity");default_1$8=PermIdentity.default=_default$8;var NoAccounts={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(NoAccounts,"__esModule",{value:!0});var default_1$7=NoAccounts.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=require$$2,_default$7=(0,_createSvgIcon$7.default)([(0,_jsxRuntime$7.jsx)("path",{d:"M15.18 10.94c.2-.44.32-.92.32-1.44C15.5 7.57 13.93 6 12 6c-.52 0-1 .12-1.44.32l4.62 4.62z"},"0"),(0,_jsxRuntime$7.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 13c-2.32 0-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-1.85.63-3.55 1.69-4.9l2.86 2.86c.21 1.56 1.43 2.79 2.99 2.99l2.2 2.2c-.57-.1-1.15-.15-1.74-.15zm6.31 1.9L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.54-1.69 4.9z"},"1")],"NoAccounts");default_1$7=NoAccounts.default=_default$7;const labels=["January","February","March","April","May","June","July","Augest","September","Octomber","November","December"],values=[34,71,17,18,62,44,55,43,23,18,32,66],cardItems=[{title:"Users",icon:jsx(default_1$8,{}),gradiant:"linear-gradient(45deg,#0288d1,#26c6da)",subTitle:"New",subTitleValue:10,total:132},{title:"Quiz",icon:jsx(default_1$d,{}),gradiant:"linear-gradient(45deg,#ff5252,#f48fb1)",subTitle:"New",subTitleValue:13,total:78},{title:"Completed",icon:jsx(default_1$a,{}),gradiant:"linear-gradient(45deg,#ff6f00,#ffca28)",subTitle:"Today",subTitleValue:2,total:23},{title:"Cheaters",icon:jsx(default_1$7,{}),gradiant:"linear-gradient(45deg,#43a047,#1de9b6)",subTitle:"This week",subTitleValue:3,total:13}];function Dashboard(){return reactExports.useEffect(()=>{},[]),jsxs(Fragment,{children:[jsx(Grid$1,{container:!0,spacing:2,children:cardItems.map(_e=>jsx(Grid$1,{item:!0,xs:12,sm:6,lg:3,children:jsxs(Box$1,{sx:{background:_e.gradiant,borderRadius:2,display:"flex",padding:2,justifyContent:"space-between"},children:[jsxs(Box$1,{textAlign:"center",spacing:2,children:[jsx(Avatar$1,{sx:{background:"rgba(0,0,0,.18)",width:48,height:48},children:_e.icon}),jsx("br",{}),jsx(Typography$1,{sx:{color:"white"},children:_e.title})]}),jsxs(Box$1,{textAlign:"end",spacing:2,children:[jsx(Typography$1,{sx:{color:"white"},children:_e.subTitleValue}),jsx(Typography$1,{sx:{color:"white"},children:_e.subTitle}),jsx("br",{}),jsx(Typography$1,{sx:{color:"white"},children:_e.total})]})]})}))}),jsx(BarChart,{title:"Number of Student Register in Past Months",labels,values}),jsx(BarChart,{title:"Number of Quiz Created in Past Months",labels,values})]})}function ViewStream(){const et=useLocation().state,rt={roomId:et.roomId,token:"",userId:auth$1.name,userName:auth$1.name},nt=zegoInstance();reactExports.useEffect(()=>(ot(),nt.on("roomStreamUpdate",async(it,st,at,lt)=>{st==="ADD"&&at.map(async ct=>{if(et.students.includes(ct.user.userID)){const pt=ct.streamID,ut=await nt.startPlayingStream(pt);nt.createRemoteStreamView(ut).play("remote-stream-"+ct.user.userID,{enableAutoplayDialog:!0})}})}),()=>{nt&&nt.logoutRoom(rt.roomId)}),[]);const ot=async()=>{const it=await JWTService.generateToken({userId:rt.userId});rt.token=it.data;try{await nt.loginRoom(rt.roomId,rt.token,{userID:rt.userId,userName:rt.userName})}catch(st){alert("Create Room Err: ",JSON.stringify(st))}};return jsxs(Fragment,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Link$2,{to:"..",children:jsx(Button$1,{color:"error",variant:"contained",children:"Back"})}),jsx(Typography$1,{variant:"h6",children:"View Stream"}),jsx(Box$1,{})]}),jsx(Grid$1,{container:!0,spacing:2,children:et.students.map(it=>jsx(Fragment,{children:jsxs(Grid$1,{item:!0,xs:6,children:[jsx("center",{children:jsx("h1",{children:it})}),jsx("div",{style:{height:"50vh"},id:`remote-stream-${it}`},it)]})}))})]})}const GridApiContext=reactExports.createContext(void 0);function useGridApiContext(){const _e=reactExports.useContext(GridApiContext);if(_e===void 0)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join(`
`));return _e}const GridRootPropsContext=reactExports.createContext(void 0),useGridRootProps=()=>{const _e=reactExports.useContext(GridRootPropsContext);if(!_e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return _e};function getDataGridUtilityClass(_e){return generateUtilityClass("MuiDataGrid",_e)}const gridClasses=generateUtilityClasses("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLinkOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","root--densityStandard","root--densityComfortable","root--densityCompact","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),useUtilityClasses$Y=_e=>{const{classes:et}=_e;return composeClasses({root:["main"]},getDataGridUtilityClass,et)},GridMainContainerRoot=styled$1("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(_e,et)=>et.main})(()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}));function GridMainContainer(_e){const rt={classes:useGridRootProps().classes},nt=useUtilityClasses$Y(rt);return jsx(GridMainContainerRoot,{className:nt.root,children:_e.children})}function createDetectElementResize(_e,et){var rt=function(Ct){var Tt=Ct.__resizeTriggers__,wt=Tt.firstElementChild,Rt=Tt.lastElementChild,It=wt.firstElementChild;Rt.scrollLeft=Rt.scrollWidth,Rt.scrollTop=Rt.scrollHeight,It.style.width=wt.offsetWidth+1+"px",It.style.height=wt.offsetHeight+1+"px",wt.scrollLeft=wt.scrollWidth,wt.scrollTop=wt.scrollHeight},nt=function(Ct){return Ct.offsetWidth!=Ct.__resizeLast__.width||Ct.offsetHeight!=Ct.__resizeLast__.height},ot=function(Ct){if(!(Ct.target.className.indexOf("contract-trigger")<0&&Ct.target.className.indexOf("expand-trigger")<0)){var Tt=this;rt(this),this.__resizeRAF__&&et.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=et.requestAnimationFrame(function(){nt(Tt)&&(Tt.__resizeLast__.width=Tt.offsetWidth,Tt.__resizeLast__.height=Tt.offsetHeight,Tt.__resizeListeners__.forEach(function(wt){wt.call(Tt,Ct)}))})}},it=!1,st="",at="animationstart",lt="Webkit Moz O ms".split(" "),ct="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),pt="";{var ut=document.createElement("fakeelement");if(ut.style.animationName!==void 0&&(it=!0),it===!1){for(var ht=0;ht<lt.length;ht++)if(ut.style[lt[ht]+"AnimationName"]!==void 0){pt=lt[ht],st="-"+pt.toLowerCase()+"-",at=ct[ht],it=!0;break}}}var ft="resizeanim",gt="@"+st+"keyframes "+ft+" { from { opacity: 0; } to { opacity: 0; } } ",vt=st+"animation: 1ms "+ft+"; ",yt=function(Ct,Tt){if(!Tt.getElementById("muiDetectElementResize")){var wt=(gt||"")+".Mui-resizeTriggers { "+(vt||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',Rt=Tt.constructor.name==="ShadowRoot"?Tt:Ct.head||Ct.getElementsByTagName("head")[0],It=Ct.createElement("style");It.id="muiDetectElementResize",It.type="text/css",_e!=null&&It.setAttribute("nonce",_e),It.styleSheet?It.styleSheet.cssText=wt:It.appendChild(Ct.createTextNode(wt)),Rt.appendChild(It)}},mt=function(Ct,Tt){if(!Ct.__resizeTriggers__){var wt=Ct.ownerDocument,Rt=et.getComputedStyle(Ct);Rt&&Rt.position=="static"&&(Ct.style.position="relative"),yt(wt,Ct.getRootNode()),Ct.__resizeLast__={},Ct.__resizeListeners__=[],(Ct.__resizeTriggers__=wt.createElement("div")).className="Mui-resizeTriggers",Ct.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',Ct.appendChild(Ct.__resizeTriggers__),rt(Ct),Ct.addEventListener("scroll",ot,!0),at&&(Ct.__resizeTriggers__.__animationListener__=function(St){St.animationName==ft&&rt(Ct)},Ct.__resizeTriggers__.addEventListener(at,Ct.__resizeTriggers__.__animationListener__))}Ct.__resizeListeners__.push(Tt)},Et=function(Ct,Tt){if(Ct.__resizeListeners__.splice(Ct.__resizeListeners__.indexOf(Tt),1),!Ct.__resizeListeners__.length){Ct.removeEventListener("scroll",ot,!0),Ct.__resizeTriggers__.__animationListener__&&(Ct.__resizeTriggers__.removeEventListener(at,Ct.__resizeTriggers__.__animationListener__),Ct.__resizeTriggers__.__animationListener__=null);try{Ct.__resizeTriggers__=!Ct.removeChild(Ct.__resizeTriggers__)}catch{}}};return{addResizeListener:mt,removeResizeListener:Et}}const _excluded$1g=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],GridAutoSizer=reactExports.forwardRef(function _e(et,rt){const{children:nt,defaultHeight:ot=null,defaultWidth:it=null,disableHeight:st=!1,disableWidth:at=!1,nonce:lt,onResize:ct,style:pt}=et,ut=_objectWithoutPropertiesLoose(et,_excluded$1g),[ht,ft]=reactExports.useState({height:ot,width:it}),gt=reactExports.useRef(null),vt=reactExports.useRef(null),yt=useEventCallback(()=>{if(vt.current){const Ct=vt.current.offsetHeight||0,Tt=vt.current.offsetWidth||0,Rt=ownerWindow(vt.current).getComputedStyle(vt.current),It=parseInt(Rt.paddingLeft,10)||0,St=parseInt(Rt.paddingRight,10)||0,Pt=parseInt(Rt.paddingTop,10)||0,Ot=parseInt(Rt.paddingBottom,10)||0,Ut=Ct-Pt-Ot,Bt=Tt-It-St;(!st&&ht.height!==Ut||!at&&ht.width!==Bt)&&(ft({height:Ut,width:Bt}),ct&&ct({height:Ut,width:Bt}))}});useEnhancedEffect$1(()=>{var Ct;if(vt.current=gt.current.parentElement,!vt)return;const Tt=ownerWindow((Ct=vt.current)!=null?Ct:void 0),wt=createDetectElementResize(lt,Tt);return wt.addResizeListener(vt.current,yt),yt(),()=>{wt.removeResizeListener(vt.current,yt)}},[lt,yt]);const mt={overflow:"visible"},Et={};st||(mt.height=0,Et.height=ht.height),at||(mt.width=0,Et.width=ht.width);const bt=useForkRef(gt,rt);return jsx("div",_extends({ref:bt,style:_extends({},mt,pt)},ut,{children:ht.height===null&&ht.width===null?null:nt(Et)}))}),buildWarning=(_e,et="warning")=>{let rt=!1;const nt=Array.isArray(_e)?_e.join(`
`):_e;return()=>{rt||(rt=!0,et==="error"?console.error(nt):console.warn(nt))}},wrapWithWarningOnCall=(_e,et)=>_e;function isOutputSelector(_e){return _e.acceptsApiRef}buildWarning(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);const useGridSelector=(_e,et)=>isOutputSelector(et)?et(_e):et(_e.current.state);var NOT_FOUND="NOT_FOUND";function createSingletonCache(_e){var et;return{get:function(nt){return et&&_e(et.key,nt)?et.value:NOT_FOUND},put:function(nt,ot){et={key:nt,value:ot}},getEntries:function(){return et?[et]:[]},clear:function(){et=void 0}}}function createLruCache(_e,et){var rt=[];function nt(at){var lt=rt.findIndex(function(pt){return et(at,pt.key)});if(lt>-1){var ct=rt[lt];return lt>0&&(rt.splice(lt,1),rt.unshift(ct)),ct.value}return NOT_FOUND}function ot(at,lt){nt(at)===NOT_FOUND&&(rt.unshift({key:at,value:lt}),rt.length>_e&&rt.pop())}function it(){return rt}function st(){rt=[]}return{get:nt,put:ot,getEntries:it,clear:st}}var defaultEqualityCheck=function _e(et,rt){return et===rt};function createCacheKeyComparator(_e){return function(rt,nt){if(rt===null||nt===null||rt.length!==nt.length)return!1;for(var ot=rt.length,it=0;it<ot;it++)if(!_e(rt[it],nt[it]))return!1;return!0}}function defaultMemoize(_e,et){var rt=typeof et=="object"?et:{equalityCheck:et},nt=rt.equalityCheck,ot=nt===void 0?defaultEqualityCheck:nt,it=rt.maxSize,st=it===void 0?1:it,at=rt.resultEqualityCheck,lt=createCacheKeyComparator(ot),ct=st===1?createSingletonCache(lt):createLruCache(st,lt);function pt(){var ut=ct.get(arguments);if(ut===NOT_FOUND){if(ut=_e.apply(null,arguments),at){var ht=ct.getEntries(),ft=ht.find(function(gt){return at(gt.value,ut)});ft&&(ut=ft.value)}ct.put(arguments,ut)}return ut}return pt.clearCache=function(){return ct.clear()},pt}function getDependencies(_e){var et=Array.isArray(_e[0])?_e[0]:_e;if(!et.every(function(nt){return typeof nt=="function"})){var rt=et.map(function(nt){return typeof nt=="function"?"function "+(nt.name||"unnamed")+"()":typeof nt}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+rt+"]")}return et}function createSelectorCreator(_e){for(var et=arguments.length,rt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];var ot=function(){for(var st=arguments.length,at=new Array(st),lt=0;lt<st;lt++)at[lt]=arguments[lt];var ct=0,pt,ut={memoizeOptions:void 0},ht=at.pop();if(typeof ht=="object"&&(ut=ht,ht=at.pop()),typeof ht!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof ht+"]");var ft=ut,gt=ft.memoizeOptions,vt=gt===void 0?rt:gt,yt=Array.isArray(vt)?vt:[vt],mt=getDependencies(at),Et=_e.apply(void 0,[function(){return ct++,ht.apply(null,arguments)}].concat(yt)),bt=_e(function(){for(var Tt=[],wt=mt.length,Rt=0;Rt<wt;Rt++)Tt.push(mt[Rt].apply(null,arguments));return pt=Et.apply(null,Tt),pt});return Object.assign(bt,{resultFunc:ht,memoizedResultFunc:Et,dependencies:mt,lastResult:function(){return pt},recomputations:function(){return ct},resetRecomputations:function(){return ct=0}}),bt};return ot}var createSelector$1=createSelectorCreator(defaultMemoize);const cacheContainer={cache:null};buildWarning(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]);const createSelector=(..._e)=>{cacheContainer.cache===null&&(cacheContainer.cache={});const et=(...rt)=>{const[nt,ot]=rt,it=!!nt.current,st=it?nt.current.instanceId:ot??"default",at=it?nt.current.state:nt;cacheContainer.cache===null&&(cacheContainer.cache={});const{cache:lt}=cacheContainer;if(lt[st]&&lt[st].get(_e))return lt[st].get(_e)(at,st);const ct=createSelector$1(..._e);return lt[st]||(lt[st]=new Map),lt[st].set(_e,ct),ct(at,st)};return et.acceptsApiRef=!0,et},unstable_resetCreateSelectorCache=_e=>{typeof _e<"u"?cacheContainer.cache&&cacheContainer.cache[_e]&&delete cacheContainer.cache[_e]:cacheContainer.cache=null},gridRowsStateSelector=_e=>_e.rows,gridRowCountSelector=createSelector(gridRowsStateSelector,_e=>_e.totalRowCount),gridRowsLoadingSelector=createSelector(gridRowsStateSelector,_e=>_e.loading),gridTopLevelRowCountSelector=createSelector(gridRowsStateSelector,_e=>_e.totalTopLevelRowCount),gridRowsLookupSelector=createSelector(gridRowsStateSelector,_e=>_e.idRowsLookup),gridRowsIdToIdLookupSelector=createSelector(gridRowsStateSelector,_e=>_e.idToIdLookup),gridRowTreeSelector=createSelector(gridRowsStateSelector,_e=>_e.tree),gridRowGroupingNameSelector=createSelector(gridRowsStateSelector,_e=>_e.groupingName),gridRowTreeDepthSelector=createSelector(gridRowsStateSelector,_e=>_e.treeDepth),gridRowIdsSelector=createSelector(gridRowsStateSelector,_e=>_e.ids),gridAdditionalRowGroupsSelector=createSelector(gridRowsStateSelector,_e=>_e==null?void 0:_e.additionalRowGroups),gridPinnedRowsSelector=createSelector(gridAdditionalRowGroupsSelector,_e=>_e==null?void 0:_e.pinnedRows),gridPinnedRowsCountSelector=createSelector(gridPinnedRowsSelector,_e=>{var et,rt;return((_e==null||(et=_e.top)==null?void 0:et.length)||0)+((_e==null||(rt=_e.bottom)==null?void 0:rt.length)||0)}),gridSortingStateSelector=_e=>_e.sorting,gridSortedRowIdsSelector=createSelector(gridSortingStateSelector,_e=>_e.sortedRows),gridSortedRowEntriesSelector=createSelector(gridSortedRowIdsSelector,gridRowsLookupSelector,(_e,et)=>_e.map(rt=>({id:rt,model:et[rt]}))),gridSortModelSelector=createSelector(gridSortingStateSelector,_e=>_e.sortModel),gridSortColumnLookupSelector=createSelector(gridSortModelSelector,_e=>_e.reduce((rt,nt,ot)=>(rt[nt.field]={sortDirection:nt.sort,sortIndex:_e.length>1?ot+1:void 0},rt),{})),gridColumnsSelector=_e=>_e.columns,gridColumnFieldsSelector=createSelector(gridColumnsSelector,_e=>_e.all),gridColumnLookupSelector=createSelector(gridColumnsSelector,_e=>_e.lookup),gridColumnDefinitionsSelector=createSelector(gridColumnFieldsSelector,gridColumnLookupSelector,(_e,et)=>_e.map(rt=>et[rt])),gridColumnVisibilityModelSelector=createSelector(gridColumnsSelector,_e=>_e.columnVisibilityModel),gridVisibleColumnDefinitionsSelector=createSelector(gridColumnDefinitionsSelector,gridColumnVisibilityModelSelector,(_e,et)=>_e.filter(rt=>et[rt.field]!==!1));createSelector(gridVisibleColumnDefinitionsSelector,_e=>_e.map(et=>et.field));const gridColumnPositionsSelector=createSelector(gridVisibleColumnDefinitionsSelector,_e=>{const et=[];let rt=0;for(let nt=0;nt<_e.length;nt+=1)et.push(rt),rt+=_e[nt].computedWidth;return et}),gridColumnsTotalWidthSelector=createSelector(gridVisibleColumnDefinitionsSelector,gridColumnPositionsSelector,(_e,et)=>{const rt=_e.length;return rt===0?0:et[rt-1]+_e[rt-1].computedWidth}),gridFilterableColumnDefinitionsSelector=createSelector(gridColumnDefinitionsSelector,_e=>_e.filter(et=>et.filterable)),gridFilterableColumnLookupSelector=createSelector(gridColumnDefinitionsSelector,_e=>_e.reduce((et,rt)=>(rt.filterable&&(et[rt.field]=rt),et),{}));wrapWithWarningOnCall(createSelector(gridFilterableColumnDefinitionsSelector,_e=>_e.map(et=>et.field)));wrapWithWarningOnCall(createSelector(gridVisibleColumnDefinitionsSelector,_e=>_e.length));const gridColumnsMetaSelector=wrapWithWarningOnCall(createSelector(gridColumnPositionsSelector,gridColumnsTotalWidthSelector,(_e,et)=>({totalWidth:et,positions:_e}))),gridFilterStateSelector=_e=>_e.filter,gridFilterModelSelector=createSelector(gridFilterStateSelector,_e=>_e.filterModel),gridQuickFilterValuesSelector=createSelector(gridFilterModelSelector,_e=>_e.quickFilterValues),gridVisibleRowsLookupSelector=createSelector(gridFilterStateSelector,_e=>_e.visibleRowsLookup),gridFilteredRowsLookupSelector=createSelector(gridFilterStateSelector,_e=>_e.filteredRowsLookup);createSelector(gridFilterStateSelector,_e=>_e.filteredDescendantCountLookup);const gridVisibleSortedRowEntriesSelector=createSelector(gridVisibleRowsLookupSelector,gridSortedRowEntriesSelector,(_e,et)=>et.filter(rt=>_e[rt.id]!==!1)),gridVisibleSortedRowIdsSelector=createSelector(gridVisibleSortedRowEntriesSelector,_e=>_e.map(et=>et.id)),gridFilteredSortedRowEntriesSelector=createSelector(gridFilteredRowsLookupSelector,gridSortedRowEntriesSelector,(_e,et)=>et.filter(rt=>_e[rt.id]!==!1)),gridFilteredSortedRowIdsSelector=createSelector(gridFilteredSortedRowEntriesSelector,_e=>_e.map(et=>et.id)),gridVisibleSortedTopLevelRowEntriesSelector=createSelector(gridVisibleSortedRowEntriesSelector,gridRowTreeSelector,gridRowTreeDepthSelector,(_e,et,rt)=>rt<2?_e:_e.filter(nt=>{var ot;return((ot=et[nt.id])==null?void 0:ot.depth)===0})),gridVisibleRowCountSelector=createSelector(gridVisibleSortedRowEntriesSelector,_e=>_e.length),gridVisibleTopLevelRowCountSelector=createSelector(gridVisibleSortedTopLevelRowEntriesSelector,_e=>_e.length),gridFilterActiveItemsSelector=createSelector(gridFilterModelSelector,gridColumnLookupSelector,(_e,et)=>{var rt;return(rt=_e.items)==null?void 0:rt.filter(nt=>{var ot,it;if(!nt.columnField)return!1;const st=et[nt.columnField];if(!(st!=null&&st.filterOperators)||(st==null||(ot=st.filterOperators)==null?void 0:ot.length)===0)return!1;const at=st.filterOperators.find(lt=>lt.value===nt.operatorValue);return at?!at.InputComponent||nt.value!=null&&((it=nt.value)==null?void 0:it.toString())!=="":!1})}),gridFilterActiveItemsLookupSelector=createSelector(gridFilterActiveItemsSelector,_e=>_e.reduce((rt,nt)=>(rt[nt.columnField]?rt[nt.columnField].push(nt):rt[nt.columnField]=[nt],rt),{})),gridDensitySelector=_e=>_e.density,gridDensityValueSelector=createSelector(gridDensitySelector,_e=>_e.value),gridDensityRowHeightSelector=createSelector(gridDensitySelector,_e=>_e.rowHeight),gridDensityHeaderHeightSelector=createSelector(gridDensitySelector,_e=>_e.headerHeight),gridDensityHeaderGroupingMaxDepthSelector=createSelector(gridDensitySelector,_e=>_e.headerGroupingMaxDepth),gridDensityFactorSelector=createSelector(gridDensitySelector,_e=>_e.factor),gridDensityTotalHeaderHeightSelector=createSelector(gridDensitySelector,_e=>_e.headerHeight*(1+_e.headerGroupingMaxDepth));function GridOverlayWrapper(_e){var et,rt;const nt=useGridApiContext(),ot=useGridRootProps(),it=useGridSelector(nt,gridDensityTotalHeaderHeightSelector),[st,at]=reactExports.useState(()=>{var pt,ut;return(pt=(ut=nt.current.getRootDimensions())==null?void 0:ut.viewportInnerSize)!=null?pt:null}),lt=reactExports.useCallback(()=>{var pt,ut;at((pt=(ut=nt.current.getRootDimensions())==null?void 0:ut.viewportInnerSize)!=null?pt:null)},[nt]);useEnhancedEffect$1(()=>nt.current.subscribeEvent("viewportInnerSizeChange",lt),[nt,lt]);let ct=(et=st==null?void 0:st.height)!=null?et:0;return ot.autoHeight&&ct===0&&(ct="auto"),st?jsx("div",_extends({style:{height:ct,width:(rt=st==null?void 0:st.width)!=null?rt:0,position:"absolute",top:it,bottom:ct==="auto"?0:void 0}},_e)):null}function GridOverlays(){const _e=useGridApiContext(),et=useGridRootProps(),rt=useGridSelector(_e,gridRowCountSelector),nt=useGridSelector(_e,gridVisibleRowCountSelector),ot=useGridSelector(_e,gridRowsLoadingSelector),it=!ot&&rt===0,st=!ot&&rt>0&&nt===0;let at=null;if(it){var lt;at=jsx(et.components.NoRowsOverlay,_extends({},(lt=et.componentsProps)==null?void 0:lt.noRowsOverlay))}if(st){var ct;at=jsx(et.components.NoResultsOverlay,_extends({},(ct=et.componentsProps)==null?void 0:ct.noResultsOverlay))}if(ot){var pt;at=jsx(et.components.LoadingOverlay,_extends({},(pt=et.componentsProps)==null?void 0:pt.loadingOverlay))}return at===null?null:jsx(GridOverlayWrapper,{children:at})}function GridBody(_e){const{children:et,VirtualScrollerComponent:rt,ColumnHeadersComponent:nt}=_e,ot=useGridApiContext(),it=useGridRootProps(),st=useGridSelector(ot,gridDensityTotalHeaderHeightSelector),[at,lt]=reactExports.useState(it.disableVirtualization),ct=reactExports.useCallback(()=>{lt(!0)},[]),pt=reactExports.useCallback(()=>{lt(!1)},[]);reactExports.useEffect(()=>{lt(it.disableVirtualization)},[it.disableVirtualization]),ot.current.unstable_disableVirtualization=ct,ot.current.unstable_enableVirtualization=pt;const ut=reactExports.useRef(null),ht=reactExports.useRef(null),ft=reactExports.useRef(null),gt=reactExports.useRef(null);ot.current.columnHeadersContainerElementRef=ht,ot.current.columnHeadersElementRef=ut,ot.current.windowRef=ft,ot.current.renderingZoneRef=gt;const vt=reactExports.useCallback(yt=>{ot.current.publishEvent("resize",yt)},[ot]);return jsxs(GridMainContainer,{children:[jsx(GridOverlays,{}),jsx(nt,{ref:ht,innerRef:ut}),jsx(GridAutoSizer,{nonce:it.nonce,disableHeight:it.autoHeight,onResize:vt,children:yt=>{const mt={width:yt.width,height:yt.height?yt.height-st:"auto",marginTop:st};return jsx(rt,{ref:ft,style:mt,disableVirtualization:at})}}),et]})}function useGridLogger(_e,et){const rt=reactExports.useRef(null);if(rt.current)return rt.current;const nt=_e.current.getLogger(et);return rt.current=nt,nt}class ErrorBoundary extends reactExports.Component{static getDerivedStateFromError(et){return{hasError:!0,error:et}}componentDidCatch(et,rt){this.props.api.current&&(this.logError(et),this.props.api.current.showError({error:et,errorInfo:rt}))}logError(et,rt){this.props.logger.error(`An unexpected error occurred. Error: ${et&&et.message}. `,et,rt)}render(){var et;return this.props.hasError||(et=this.state)!=null&&et.hasError?this.props.render(this.state):this.props.children}}function GridErrorHandler(_e){const{children:et}=_e,rt=useGridApiContext(),nt=useGridLogger(rt,"GridErrorHandler"),ot=useGridRootProps(),it=rt.current.state.error;return jsx(ErrorBoundary,{hasError:it!=null,api:rt,logger:nt,render:st=>{var at;return jsx(GridMainContainer,{children:jsx(ot.components.ErrorOverlay,_extends({},st,it,(at=ot.componentsProps)==null?void 0:at.errorOverlay))})},children:et})}function GridFooterPlaceholder(){var _e;const et=useGridApiContext(),rt=useGridRootProps(),nt=reactExports.useRef(null);return et.current.footerRef=nt,rt.hideFooter?null:jsx("div",{ref:nt,children:jsx(rt.components.Footer,_extends({},(_e=rt.componentsProps)==null?void 0:_e.footer))})}function GridHeaderPlaceholder(){var _e;const et=useGridApiContext(),rt=useGridRootProps(),nt=reactExports.useRef(null);return et.current.headerRef=nt,jsx("div",{ref:nt,children:jsx(rt.components.Header,_extends({},(_e=rt.componentsProps)==null?void 0:_e.header))})}var GridEditModes;(function(_e){_e.Cell="cell",_e.Row="row"})(GridEditModes||(GridEditModes={}));var GridCellModes;(function(_e){_e.Edit="edit",_e.View="view"})(GridCellModes||(GridCellModes={}));var GridRowModes;(function(_e){_e.Edit="edit",_e.View="view"})(GridRowModes||(GridRowModes={}));const GridFeatureModeConstant={client:"client",server:"server"};var GridLinkOperator;(function(_e){_e.And="and",_e.Or="or"})(GridLinkOperator||(GridLinkOperator={}));var GridCellEditStartReasons;(function(_e){_e.enterKeyDown="enterKeyDown",_e.cellDoubleClick="cellDoubleClick",_e.printableKeyDown="printableKeyDown",_e.deleteKeyDown="deleteKeyDown"})(GridCellEditStartReasons||(GridCellEditStartReasons={}));var GridCellEditStopReasons;(function(_e){_e.cellFocusOut="cellFocusOut",_e.escapeKeyDown="escapeKeyDown",_e.enterKeyDown="enterKeyDown",_e.tabKeyDown="tabKeyDown",_e.shiftTabKeyDown="shiftTabKeyDown"})(GridCellEditStopReasons||(GridCellEditStopReasons={}));var GridRowEditStartReasons;(function(_e){_e.enterKeyDown="enterKeyDown",_e.cellDoubleClick="cellDoubleClick",_e.printableKeyDown="printableKeyDown",_e.deleteKeyDown="deleteKeyDown"})(GridRowEditStartReasons||(GridRowEditStartReasons={}));var GridRowEditStopReasons;(function(_e){_e.rowFocusOut="rowFocusOut",_e.escapeKeyDown="escapeKeyDown",_e.enterKeyDown="enterKeyDown",_e.tabKeyDown="tabKeyDown",_e.shiftTabKeyDown="shiftTabKeyDown"})(GridRowEditStopReasons||(GridRowEditStopReasons={}));var GridDensityTypes;(function(_e){_e.Compact="compact",_e.Standard="standard",_e.Comfortable="comfortable"})(GridDensityTypes||(GridDensityTypes={}));function isLeaf(_e){return _e.field!==void 0}const gridFocusStateSelector=_e=>_e.focus,gridFocusCellSelector=createSelector(gridFocusStateSelector,_e=>_e.cell),gridFocusColumnHeaderSelector=createSelector(gridFocusStateSelector,_e=>_e.columnHeader),gridTabIndexStateSelector=_e=>_e.tabIndex,gridTabIndexCellSelector=createSelector(gridTabIndexStateSelector,_e=>_e.cell),gridTabIndexColumnHeaderSelector=createSelector(gridTabIndexStateSelector,_e=>_e.columnHeader),_excluded$1f=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","onClick","onDoubleClick","onMouseDown","onMouseUp","onKeyDown","onDragEnter","onDragOver"];let cachedSupportsPreventScroll;function doesSupportPreventScroll(){return cachedSupportsPreventScroll===void 0&&document.createElement("div").focus({get preventScroll(){return cachedSupportsPreventScroll=!0,!1}}),cachedSupportsPreventScroll}const useUtilityClasses$X=_e=>{const{align:et,showRightBorder:rt,isEditable:nt,classes:ot}=_e,it={root:["cell",`cell--text${capitalize(et)}`,nt&&"cell--editable",rt&&"withBorder"],content:["cellContent"]};return composeClasses(it,getDataGridUtilityClass,ot)};function GridCell(_e){const{align:et,children:rt,colIndex:nt,cellMode:ot,field:it,formattedValue:st,hasFocus:at,height:lt,isEditable:ct,rowId:pt,tabIndex:ut,value:ht,width:ft,className:gt,showRightBorder:vt,colSpan:yt,disableDragEvents:mt,onClick:Et,onDoubleClick:bt,onMouseDown:Ct,onMouseUp:Tt,onKeyDown:wt,onDragEnter:Rt,onDragOver:It}=_e,St=_objectWithoutPropertiesLoose(_e,_excluded$1f),Pt=st??ht,Ot=reactExports.useRef(null),Ut=reactExports.useRef(null),Bt=useGridApiContext(),xt=useGridRootProps(),At={align:et,showRightBorder:vt,isEditable:ct,classes:xt.classes},Mt=useUtilityClasses$X(At),Nt=reactExports.useCallback(rr=>lr=>{const nr=Bt.current.getCellParams(pt,it||"");Bt.current.publishEvent(rr,nr,lr),Tt&&Tt(lr)},[Bt,it,Tt,pt]),$t=reactExports.useCallback(rr=>lr=>{const nr=Bt.current.getCellParams(pt,it||"");Bt.current.publishEvent(rr,nr,lr),Ct&&Ct(lr)},[Bt,it,Ct,pt]),Ft=reactExports.useCallback((rr,lr)=>nr=>{if(!nr.currentTarget.contains(nr.target)||!Bt.current.getRow(pt))return;const hr=Bt.current.getCellParams(pt,it||"");Bt.current.publishEvent(rr,hr,nr),lr&&lr(nr)},[Bt,it,pt]),jt={minWidth:ft,maxWidth:ft,minHeight:lt,maxHeight:lt==="auto"?"none":lt};reactExports.useEffect(()=>{if(!at||ot===GridCellModes.Edit)return;const rr=ownerDocument(Bt.current.rootElementRef.current);if(Ot.current&&!Ot.current.contains(rr.activeElement)){const lr=Ot.current.querySelector('[tabindex="0"]'),nr=Ut.current||lr||Ot.current;if(doesSupportPreventScroll())nr.focus({preventScroll:!0});else{const hr=Bt.current.getScrollPosition();nr.focus(),Bt.current.scroll(hr)}}},[at,ot,Bt]);let zt=St.onFocus;const Kt=Bt.current.getColumn(it).type==="actions",er=()=>{if(rt==null){const rr=Pt==null?void 0:Pt.toString();return jsx("div",{title:rr,className:Mt.content,children:rr})}return reactExports.isValidElement(rt)&&Kt?reactExports.cloneElement(rt,{focusElementRef:Ut}):rt},ir=mt?null:{onDragEnter:Ft("cellDragEnter",Rt),onDragOver:Ft("cellDragOver",It)};return jsx("div",_extends({ref:Ot,className:clsx(gt,Mt.root),role:"cell","data-field":it,"data-colindex":nt,"aria-colindex":nt+1,"aria-colspan":yt,style:jt,tabIndex:(ot==="view"||!ct)&&!Kt?ut:-1,onClick:Ft("cellClick",Et),onDoubleClick:Ft("cellDoubleClick",bt),onMouseDown:$t("cellMouseDown"),onMouseUp:Nt("cellMouseUp"),onKeyDown:Ft("cellKeyDown",wt)},ir,St,{onFocus:zt,children:er()}))}const _excluded$1e=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","getValue"],useUtilityClasses$W=_e=>{const{classes:et}=_e;return composeClasses({root:["booleanCell"]},getDataGridUtilityClass,et)},GridBooleanCellRaw=_e=>{const{value:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$1e),nt=useGridApiContext(),ot=useGridRootProps(),it={classes:ot.classes},st=useUtilityClasses$W(it),at=reactExports.useMemo(()=>et?ot.components.BooleanCellTrueIcon:ot.components.BooleanCellFalseIcon,[ot.components.BooleanCellFalseIcon,ot.components.BooleanCellTrueIcon,et]);return jsx(at,_extends({fontSize:"small",className:st.root,titleAccess:nt.current.getLocaleText(et?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(et)},rt))},GridBooleanCell=reactExports.memo(GridBooleanCellRaw),renderBooleanCell=_e=>_e.rowNode.isAutoGenerated?"":jsx(GridBooleanCell,_extends({},_e)),_excluded$1d=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange"],useUtilityClasses$V=_e=>{const{classes:et}=_e;return composeClasses({root:["editBooleanCell"]},getDataGridUtilityClass,et)};function GridEditBooleanCell(_e){var et;const{id:rt,value:nt,field:ot,className:it,hasFocus:st,onValueChange:at}=_e,lt=_objectWithoutPropertiesLoose(_e,_excluded$1d),ct=useGridApiContext(),pt=reactExports.useRef(null),ut=useId(),[ht,ft]=reactExports.useState(nt),gt=useGridRootProps(),vt={classes:gt.classes},yt=useUtilityClasses$V(vt),mt=reactExports.useCallback(async Et=>{const bt=Et.target.checked;at&&await at(Et,bt),ft(bt),await ct.current.setEditCellValue({id:rt,field:ot,value:bt},Et)},[ct,ot,rt,at]);return reactExports.useEffect(()=>{ft(nt)},[nt]),useEnhancedEffect$1(()=>{st&&pt.current.focus()},[st]),jsx("label",_extends({htmlFor:ut,className:clsx(yt.root,it)},lt,{children:jsx(gt.components.BaseCheckbox,_extends({id:ut,inputRef:pt,checked:Boolean(ht),onChange:mt,size:"small"},(et=gt.componentsProps)==null?void 0:et.baseCheckbox))}))}const renderEditBooleanCell=_e=>jsx(GridEditBooleanCell,_extends({},_e)),_excluded$1c=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","inputProps","isValidating","isProcessingProps","onValueChange"],StyledInputBase=styled$1(InputBase$1)({fontSize:"inherit"}),useUtilityClasses$U=_e=>{const{classes:et}=_e;return composeClasses({root:["editInputCell"]},getDataGridUtilityClass,et)};function GridEditDateCell(_e){const{id:et,value:rt,field:nt,colDef:ot,hasFocus:it,inputProps:st,onValueChange:at}=_e,lt=_objectWithoutPropertiesLoose(_e,_excluded$1c),ct=ot.type==="dateTime",pt=useGridApiContext(),ut=reactExports.useRef(),ht=reactExports.useMemo(()=>{let bt;rt==null?bt=null:rt instanceof Date?bt=rt:bt=new Date((rt??"").toString());let Ct;return bt==null||Number.isNaN(bt.getTime())?Ct="":Ct=new Date(bt.getTime()-bt.getTimezoneOffset()*60*1e3).toISOString().substr(0,ct?16:10),{parsed:bt,formatted:Ct}},[rt,ct]),[ft,gt]=reactExports.useState(ht),yt={classes:useGridRootProps().classes},mt=useUtilityClasses$U(yt),Et=reactExports.useCallback(async bt=>{const Ct=bt.target.value;let Tt;if(Ct==="")Tt=null;else{const[wt,Rt]=Ct.split("T"),[It,St,Pt]=wt.split("-");if(Tt=new Date,Tt.setFullYear(Number(It),Number(St)-1,Number(Pt)),Tt.setHours(0,0,0,0),Rt){const[Ot,Ut]=Rt.split(":");Tt.setHours(Number(Ot),Number(Ut),0,0)}}at&&await at(bt,Tt),gt({parsed:Tt,formatted:Ct}),pt.current.setEditCellValue({id:et,field:nt,value:Tt},bt)},[pt,nt,et,at]);return reactExports.useEffect(()=>{gt(bt=>{var Ct,Tt;return ht.parsed!==bt.parsed&&((Ct=ht.parsed)==null?void 0:Ct.getTime())!==((Tt=bt.parsed)==null?void 0:Tt.getTime())?ht:bt})},[ht]),useEnhancedEffect$1(()=>{it&&ut.current.focus()},[it]),jsx(StyledInputBase,_extends({inputRef:ut,fullWidth:!0,className:mt.root,type:ct?"datetime-local":"date",inputProps:_extends({max:ct?"9999-12-31T23:59":"9999-12-31"},st),value:ft.formatted,onChange:Et},lt))}const renderEditDateCell=_e=>jsx(GridEditDateCell,_extends({},_e)),GridArrowUpwardIcon=createSvgIcon$1(jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),GridArrowDownwardIcon=createSvgIcon$1(jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),GridKeyboardArrowRight=createSvgIcon$1(jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),GridExpandMoreIcon=createSvgIcon$1(jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),GridFilterListIcon=createSvgIcon$1(jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),GridFilterAltIcon=createSvgIcon$1(jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),GridSearchIcon=createSvgIcon$1(jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");createSvgIcon$1(jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");createSvgIcon$1(jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const GridColumnIcon=createSvgIcon$1(jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),GridSeparatorIcon=createSvgIcon$1(jsx("path",{d:"M11 19V5h2v14z"}),"Separator"),GridViewHeadlineIcon=createSvgIcon$1(jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),GridTableRowsIcon=createSvgIcon$1(jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),GridViewStreamIcon=createSvgIcon$1(jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),GridTripleDotsVerticalIcon=createSvgIcon$1(jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),GridCloseIcon=createSvgIcon$1(jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),GridAddIcon=createSvgIcon$1(jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),GridRemoveIcon=createSvgIcon$1(jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),GridLoadIcon=createSvgIcon$1(jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),GridDragIcon=createSvgIcon$1(jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),GridSaveAltIcon=createSvgIcon$1(jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),GridCheckIcon=createSvgIcon$1(jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),GridMoreVertIcon=createSvgIcon$1(jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");function getValueFromOption(_e){return typeof _e=="object"&&_e!==null?_e.value:_e}function getValueFromValueOptions(_e,et){if(et===void 0)return;const rt=et.find(nt=>{const ot=getValueFromOption(nt);return String(ot)===String(_e)});return getValueFromOption(rt)}const _excluded$1b=["item","applyValue","type","apiRef","focusElementRef"],renderSingleSelectOptions$2=({valueOptions:_e,valueFormatter:et,field:rt},nt,ot)=>(typeof _e=="function"?["",..._e({field:rt})]:["",..._e||[]]).map(st=>{const at=typeof st=="object",lt=at?st.value:st,ct=at?st.value:st,pt=et&&st!==""?et({value:st,field:rt,api:nt}):st,ut=at?st.label:pt;return jsx(ot,{value:ct,children:ut},lt)}),SUBMIT_FILTER_STROKE_TIME=500;function GridFilterInputValue(_e){var et,rt,nt,ot,it;const{item:st,applyValue:at,type:lt,apiRef:ct,focusElementRef:pt}=_e,ut=_objectWithoutPropertiesLoose(_e,_excluded$1b),ht=reactExports.useRef(),[ft,gt]=reactExports.useState((et=st.value)!=null?et:""),[vt,yt]=reactExports.useState(!1),mt=useId(),Et=useGridRootProps(),Ct=(nt=(((rt=Et.componentsProps)==null?void 0:rt.baseSelect)||{}).native)!=null?nt:!0,Tt=lt==="singleSelect"?{select:!0,SelectProps:_extends({native:Ct},(ot=Et.componentsProps)==null?void 0:ot.baseSelect),children:renderSingleSelectOptions$2(ct.current.getColumn(st.columnField),ct.current,Ct?"option":MenuItem$1)}:{},wt=reactExports.useCallback(It=>{let St=It.target.value;if(lt==="singleSelect"){const Pt=ct.current.getColumn(st.columnField),Ot=typeof Pt.valueOptions=="function"?Pt.valueOptions({field:Pt.field}):Pt.valueOptions;St=getValueFromValueOptions(St,Ot)}clearTimeout(ht.current),gt(String(St)),yt(!0),ht.current=setTimeout(()=>{at(_extends({},st,{value:St})),yt(!1)},SUBMIT_FILTER_STROKE_TIME)},[ct,at,st,lt]);reactExports.useEffect(()=>()=>{clearTimeout(ht.current)},[]),reactExports.useEffect(()=>{var It;const St=(It=st.value)!=null?It:"";gt(String(St))},[st.value]);const Rt=vt?{endAdornment:jsx(GridLoadIcon,{})}:ut.InputProps;return jsx(Et.components.BaseTextField,_extends({id:mt,label:ct.current.getLocaleText("filterPanelInputLabel"),placeholder:ct.current.getLocaleText("filterPanelInputPlaceholder"),value:ft,onChange:wt,variant:"standard",type:lt||"text",InputProps:Rt,InputLabelProps:{shrink:!0},inputRef:pt},Tt,ut,(it=Et.componentsProps)==null?void 0:it.baseTextField))}const _excluded$1a=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","isValidating","debounceMs","isProcessingProps","onValueChange"],useUtilityClasses$T=_e=>{const{classes:et}=_e;return composeClasses({root:["editInputCell"]},getDataGridUtilityClass,et)},GridEditInputCellRoot=styled$1(InputBase$1,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(_e,et)=>et.editInputCell})(({theme:_e})=>_extends({},_e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),GridEditInputCell=reactExports.forwardRef((_e,et)=>{var rt,nt;const ot=useGridRootProps(),{id:it,value:st,field:at,colDef:lt,hasFocus:ct,debounceMs:pt=(rt=ot.experimentalFeatures)!=null&&rt.newEditingApi?200:SUBMIT_FILTER_STROKE_TIME,isProcessingProps:ut,onValueChange:ht}=_e,ft=_objectWithoutPropertiesLoose(_e,_excluded$1a),gt=useGridApiContext(),vt=reactExports.useRef(),[yt,mt]=reactExports.useState(st),Et={classes:ot.classes},bt=useUtilityClasses$T(Et),Ct=reactExports.useCallback(async wt=>{var Rt;const It=wt.target.value;ht&&await ht(wt,It);const St=gt.current.getColumn(at);let Pt=It;St.valueParser&&(Rt=ot.experimentalFeatures)!=null&&Rt.newEditingApi&&(Pt=St.valueParser(It,gt.current.getCellParams(it,at))),mt(Pt),gt.current.setEditCellValue({id:it,field:at,value:Pt,debounceMs:pt,unstable_skipValueParser:!0},wt)},[gt,pt,at,it,ht,(nt=ot.experimentalFeatures)==null?void 0:nt.newEditingApi]),Tt=gt.current.unstable_getEditCellMeta?gt.current.unstable_getEditCellMeta(it,at):{};return reactExports.useEffect(()=>{Tt.changeReason!=="debouncedSetEditCellValue"&&mt(st)},[Tt.changeReason,st]),useEnhancedEffect$1(()=>{ct&&vt.current.focus()},[ct]),jsx(GridEditInputCellRoot,_extends({ref:et,inputRef:vt,className:bt.root,fullWidth:!0,type:lt.type==="number"?lt.type:"text",value:yt??"",onChange:Ct,endAdornment:ut?jsx(GridLoadIcon,{}):void 0},ft))}),renderEditInputCell=_e=>jsx(GridEditInputCell,_extends({},_e)),isEscapeKey=_e=>_e==="Escape",isEnterKey=_e=>_e==="Enter",isTabKey=_e=>_e==="Tab",isSpaceKey=_e=>_e===" ",isArrowKeys=_e=>_e.indexOf("Arrow")===0,isHomeOrEndKeys=_e=>_e==="Home"||_e==="End",isPageKeys=_e=>_e.indexOf("Page")===0,isDeleteKeys=_e=>_e==="Delete"||_e==="Backspace";function isPrintableKey(_e){return _e.key.length===1&&_e.ctrlKey===!1&&_e.metaKey===!1}const GRID_CELL_EXIT_EDIT_MODE_KEYS=["Enter","Escape","Tab"],GRID_CELL_EDIT_COMMIT_KEYS=["Enter","Tab"],isCellEnterEditModeKeys=_e=>isEnterKey(_e.key)||isDeleteKeys(_e.key)||isPrintableKey(_e),isCellExitEditModeKeys=_e=>GRID_CELL_EXIT_EDIT_MODE_KEYS.indexOf(_e)>-1,isCellEditCommitKeys=_e=>GRID_CELL_EDIT_COMMIT_KEYS.indexOf(_e)>-1,isNavigationKey=_e=>isHomeOrEndKeys(_e)||isArrowKeys(_e)||isPageKeys(_e)||isSpaceKey(_e),isKeyboardEvent$1=_e=>!!_e.key,isHideMenuKey=_e=>isTabKey(_e)||isEscapeKey(_e),_excluded$19=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen"],renderSingleSelectOptions$1=(_e,et)=>{const rt=typeof _e=="object",nt=rt?_e.value:_e,ot=rt?_e.value:_e,it=rt?_e.label:_e;return jsx(et,{value:ot,children:it},nt)};function isKeyboardEvent(_e){return!!_e.key}function GridEditSingleSelectCell(_e){var et,rt,nt;const ot=useGridRootProps(),{id:it,value:st,api:at,field:lt,row:ct,colDef:pt,hasFocus:ut,error:ht,onValueChange:ft,initialOpen:gt=ot.editMode===GridEditModes.Cell}=_e,vt=_objectWithoutPropertiesLoose(_e,_excluded$19),yt=useGridApiContext(),mt=reactExports.useRef(),Et=reactExports.useRef(),[bt,Ct]=reactExports.useState(gt),wt=(rt=(((et=ot.componentsProps)==null?void 0:et.baseSelect)||{}).native)!=null?rt:!1;let Rt;typeof pt.valueOptions=="function"?Rt=pt.valueOptions({id:it,row:ct,field:lt}):Rt=pt.valueOptions,pt.valueFormatter&&(Rt=Rt.map(Ot=>{if(typeof Ot=="object")return Ot;const Ut={field:lt,api:at,value:Ot};return{value:Ot,label:String(pt.valueFormatter(Ut))}}));const It=async Ot=>{var Ut;Ct(!1);const Bt=Ot.target,xt=getValueFromValueOptions(Bt.value,Rt);ft&&await ft(Ot,xt);const At=await yt.current.setEditCellValue({id:it,field:lt,value:xt},Ot);if((Ut=ot.experimentalFeatures)!=null&&Ut.newEditingApi||ot.editMode===GridEditModes.Row||At===!1)return;if(await Promise.resolve(yt.current.commitCellChange({id:it,field:lt},Ot))&&(yt.current.setCellMode(it,lt,"view"),Ot.key)){const Nt=yt.current.getCellParams(it,lt);yt.current.publishEvent("cellNavigationKeyDown",Nt,Ot)}},St=(Ot,Ut)=>{if(ot.editMode===GridEditModes.Row){Ct(!1);return}if(Ut==="backdropClick"||isEscapeKey(Ot.key)){var Bt;(Bt=ot.experimentalFeatures)!=null&&Bt.newEditingApi?yt.current.stopCellEditMode({id:it,field:lt,ignoreModifications:!0}):yt.current.setCellMode(it,lt,"view")}},Pt=Ot=>{isKeyboardEvent(Ot)&&Ot.key==="Enter"||Ct(!0)};return useEnhancedEffect$1(()=>{ut&&Et.current.focus()},[ut]),jsx(ot.components.BaseSelect,_extends({ref:mt,inputRef:Et,value:st,onChange:It,open:bt,onOpen:Pt,MenuProps:{onClose:St},error:ht,native:wt,fullWidth:!0},vt,(nt=ot.componentsProps)==null?void 0:nt.baseSelect,{children:Rt.map(Ot=>renderSingleSelectOptions$1(Ot,wt?"option":MenuItem$1))}))}const renderEditSingleSelectCell=_e=>jsx(GridEditSingleSelectCell,_extends({},_e)),_excluded$18=["open","target","onClickAway","children","position","className","onExited"],useUtilityClasses$S=_e=>{const{classes:et}=_e;return composeClasses({root:["menu"]},getDataGridUtilityClass,et)},GridMenuRoot=styled$1(Popper$1,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(_e,et)=>et.menu})(({theme:_e})=>({zIndex:_e.zIndex.modal,[`& .${gridClasses.menuList}`]:{outline:0}})),transformOrigin={"bottom-start":"top left","bottom-end":"top right"},GridMenu=_e=>{var et;const{open:rt,target:nt,onClickAway:ot,children:it,position:st,className:at,onExited:lt}=_e,ct=_objectWithoutPropertiesLoose(_e,_excluded$18),pt=useGridApiContext(),ut=reactExports.useRef(nt),ht=reactExports.useRef(rt),ft=useGridRootProps(),gt={classes:ft.classes},vt=useUtilityClasses$S(gt);reactExports.useEffect(()=>{ht.current&&ut.current&&ut.current.focus();const mt=rt?"menuOpen":"menuClose";pt.current.publishEvent(mt,{target:nt}),ht.current=rt,ut.current=nt},[pt,rt,nt]);const yt=mt=>Et=>{mt&&mt(),lt&&lt(Et)};return jsx(GridMenuRoot,_extends({as:ft.components.BasePopper,className:clsx(at,vt.root),open:rt,anchorEl:nt,transition:!0,placement:st},ct,(et=ft.componentsProps)==null?void 0:et.basePopper,{children:({TransitionProps:mt,placement:Et})=>jsx(ClickAwayListener,{onClickAway:ot,mouseEvent:"onMouseDown",children:jsx(Grow$1,_extends({},mt,{style:{transformOrigin:transformOrigin[Et]},onExited:yt(mt==null?void 0:mt.onExited),children:jsx(Paper$1,{children:it})}))})}))},_excluded$17=["colDef","id","api","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","getValue","tabIndex","position","focusElementRef"],hasActions=_e=>typeof _e.getActions=="function",GridActionsCell=_e=>{const{colDef:et,id:rt,hasFocus:nt,tabIndex:ot,position:it="bottom-end",focusElementRef:st}=_e,at=_objectWithoutPropertiesLoose(_e,_excluded$17),[lt,ct]=reactExports.useState(-1),[pt,ut]=reactExports.useState(!1),ht=useGridApiContext(),ft=reactExports.useRef(null),gt=reactExports.useRef(null),vt=reactExports.useRef(!1),yt=reactExports.useRef({}),mt=useId(),Et=useId(),bt=useGridRootProps();if(reactExports.useLayoutEffect(()=>{nt||Object.entries(yt.current).forEach(([xt,At])=>{At==null||At.stop({},()=>{delete yt.current[xt]})})},[nt]),reactExports.useEffect(()=>{if(lt<0||!ft.current||lt>=ft.current.children.length)return;ft.current.children[lt].focus({preventScroll:!0})},[lt]),reactExports.useEffect(()=>{nt||(ct(-1),vt.current=!1)},[nt]),reactExports.useImperativeHandle(st,()=>({focus(){vt.current||ct(0)}}),[]),!hasActions(et))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const Ct=et.getActions(ht.current.getRowParams(rt)),Tt=Ct.filter(xt=>!xt.props.showInMenu),wt=Ct.filter(xt=>xt.props.showInMenu),Rt=Tt.length+(wt.length?1:0);reactExports.useEffect(()=>{lt>=Rt&&ct(Rt-1)},[lt,Rt]);const It=()=>{ut(!0),ct(Rt-1),vt.current=!0},St=()=>{ut(!1)},Pt=xt=>At=>{yt.current[xt]=At},Ot=(xt,At)=>Mt=>{ct(xt),vt.current=!0,At&&At(Mt)},Ut=xt=>{if(Rt<=1)return;let At=lt;xt.key==="ArrowRight"?At+=1:xt.key==="ArrowLeft"&&(At-=1),!(At<0||At>=Rt)&&At!==lt&&(xt.preventDefault(),xt.stopPropagation(),ct(At))},Bt=xt=>{xt.key==="Tab"&&xt.preventDefault(),["Tab","Enter","Escape"].includes(xt.key)&&St()};return jsxs("div",_extends({role:"menu",ref:ft,tabIndex:-1,className:gridClasses.actionsCell,onKeyDown:Ut},at,{children:[Tt.map((xt,At)=>reactExports.cloneElement(xt,{key:At,touchRippleRef:Pt(At),onClick:Ot(At,xt.props.onClick),tabIndex:lt===At?ot:-1})),wt.length>0&&Et&&jsx(IconButton$1,{ref:gt,id:Et,"aria-label":ht.current.getLocaleText("actionsCellMore"),"aria-controls":mt,"aria-expanded":pt?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:It,touchRippleRef:Pt(Et),tabIndex:lt===Tt.length?ot:-1,children:jsx(bt.components.MoreActionsIcon,{fontSize:"small"})}),wt.length>0&&jsx(GridMenu,{onClickAway:St,onClick:St,open:pt,target:gt.current,position:it,children:jsx(MenuList$1,{id:mt,className:gridClasses.menuList,onKeyDown:Bt,"aria-labelledby":Et,variant:"menu",autoFocusItem:!0,children:wt.map((xt,At)=>reactExports.cloneElement(xt,{key:At}))})})]}))},renderActionsCell=_e=>jsx(GridActionsCell,_extends({},_e)),_excluded$16=["field","align","width","contentWidth"],useUtilityClasses$R=_e=>{const{align:et,classes:rt}=_e,nt={root:["cell","cellSkeleton",`cell--text${capitalize(et)}`]};return composeClasses(nt,getDataGridUtilityClass,rt)};function GridSkeletonCell(_e){const{align:et,width:rt,contentWidth:nt}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded$16),st={classes:useGridRootProps().classes,align:et},at=useUtilityClasses$R(st);return jsx("div",_extends({className:at.root,style:{width:rt}},ot,{children:jsx(Skeleton$1,{width:`${nt}%`})}))}const GridRootStyles=styled$1("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(_e,et)=>[{[`&.${gridClasses.autoHeight}`]:et.autoHeight},{[`&.${gridClasses.aggregationColumnHeader}`]:et.aggregationColumnHeader},{[`&.${gridClasses["aggregationColumnHeader--alignLeft"]}`]:et["aggregationColumnHeader--alignLeft"]},{[`&.${gridClasses["aggregationColumnHeader--alignCenter"]}`]:et["aggregationColumnHeader--alignCenter"]},{[`&.${gridClasses["aggregationColumnHeader--alignRight"]}`]:et["aggregationColumnHeader--alignRight"]},{[`&.${gridClasses.aggregationColumnHeaderLabel}`]:et.aggregationColumnHeaderLabel},{[`& .${gridClasses.editBooleanCell}`]:et.editBooleanCell},{[`& .${gridClasses["cell--editing"]}`]:et["cell--editing"]},{[`& .${gridClasses["cell--textCenter"]}`]:et["cell--textCenter"]},{[`& .${gridClasses["cell--textLeft"]}`]:et["cell--textLeft"]},{[`& .${gridClasses["cell--textRight"]}`]:et["cell--textRight"]},{[`& .${gridClasses["cell--withRenderer"]}`]:et["cell--withRenderer"]},{[`& .${gridClasses.cell}`]:et.cell},{[`& .${gridClasses.cellContent}`]:et.cellContent},{[`& .${gridClasses.cellCheckbox}`]:et.cellCheckbox},{[`& .${gridClasses.cellSkeleton}`]:et.cellSkeleton},{[`& .${gridClasses.checkboxInput}`]:et.checkboxInput},{[`& .${gridClasses["columnHeader--alignCenter"]}`]:et["columnHeader--alignCenter"]},{[`& .${gridClasses["columnHeader--alignLeft"]}`]:et["columnHeader--alignLeft"]},{[`& .${gridClasses["columnHeader--alignRight"]}`]:et["columnHeader--alignRight"]},{[`& .${gridClasses["columnHeader--dragging"]}`]:et["columnHeader--dragging"]},{[`& .${gridClasses["columnHeader--moving"]}`]:et["columnHeader--moving"]},{[`& .${gridClasses["columnHeader--numeric"]}`]:et["columnHeader--numeric"]},{[`& .${gridClasses["columnHeader--sortable"]}`]:et["columnHeader--sortable"]},{[`& .${gridClasses["columnHeader--sorted"]}`]:et["columnHeader--sorted"]},{[`& .${gridClasses.columnHeader}`]:et.columnHeader},{[`& .${gridClasses.columnHeaderCheckbox}`]:et.columnHeaderCheckbox},{[`& .${gridClasses.columnHeaderDraggableContainer}`]:et.columnHeaderDraggableContainer},{[`& .${gridClasses.columnHeaderTitleContainer}`]:et.columnHeaderTitleContainer},{[`& .${gridClasses["columnSeparator--resizable"]}`]:et["columnSeparator--resizable"]},{[`& .${gridClasses["columnSeparator--resizing"]}`]:et["columnSeparator--resizing"]},{[`& .${gridClasses.columnSeparator}`]:et.columnSeparator},{[`& .${gridClasses.filterIcon}`]:et.filterIcon},{[`& .${gridClasses.iconSeparator}`]:et.iconSeparator},{[`& .${gridClasses.menuIcon}`]:et.menuIcon},{[`& .${gridClasses.menuIconButton}`]:et.menuIconButton},{[`& .${gridClasses.menuOpen}`]:et.menuOpen},{[`& .${gridClasses.menuList}`]:et.menuList},{[`& .${gridClasses["row--editable"]}`]:et["row--editable"]},{[`& .${gridClasses["row--editing"]}`]:et["row--editing"]},{[`& .${gridClasses["row--dragging"]}`]:et["row--dragging"]},{[`& .${gridClasses.row}`]:et.row},{[`& .${gridClasses.rowReorderCellPlaceholder}`]:et.rowReorderCellPlaceholder},{[`& .${gridClasses.rowReorderCell}`]:et.rowReorderCell},{[`& .${gridClasses["rowReorderCell--draggable"]}`]:et["rowReorderCell--draggable"]},{[`& .${gridClasses.sortIcon}`]:et.sortIcon},{[`& .${gridClasses.withBorder}`]:et.withBorder},{[`& .${gridClasses.treeDataGroupingCell}`]:et.treeDataGroupingCell},{[`& .${gridClasses.treeDataGroupingCellToggle}`]:et.treeDataGroupingCellToggle},{[`& .${gridClasses.detailPanelToggleCell}`]:et.detailPanelToggleCell},{[`& .${gridClasses["detailPanelToggleCell--expanded"]}`]:et["detailPanelToggleCell--expanded"]},et.root]})(({theme:_e})=>{const et=_e.palette.mode==="light"?lighten(alpha$1(_e.palette.divider,1),.88):darken(alpha$1(_e.palette.divider,1),.68);return _extends({flex:1,boxSizing:"border-box",position:"relative",border:`1px solid ${et}`,borderRadius:_e.shape.borderRadius,color:_e.palette.text.primary},_e.typography.body2,{outline:"none",height:"100%",display:"flex",flexDirection:"column",[`&.${gridClasses.autoHeight}`]:{height:"auto",[`& .${gridClasses["row--lastVisible"]} .${gridClasses.cell}`]:{borderBottomColor:"transparent"}},[`& .${gridClasses["virtualScrollerContent--overflowed"]} .${gridClasses["row--lastVisible"]} .${gridClasses.cell}`]:{borderBottomColor:"transparent"},[`& .${gridClasses.columnHeader}, & .${gridClasses.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${gridClasses.columnHeader}:focus-within, & .${gridClasses.cell}:focus-within`]:{outline:`solid ${alpha$1(_e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${gridClasses.columnHeader}:focus, & .${gridClasses.cell}:focus`]:{outline:`solid ${_e.palette.primary.main} 1px`},[`& .${gridClasses.columnHeaderCheckbox}, & .${gridClasses.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${gridClasses.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${gridClasses["columnHeader--sorted"]} .${gridClasses.iconButtonContainer}, & .${gridClasses["columnHeader--filtered"]} .${gridClasses.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${gridClasses.columnHeader}:not(.${gridClasses["columnHeader--sorted"]}) .${gridClasses.sortIcon}`]:{opacity:0,transition:_e.transitions.create(["opacity"],{duration:_e.transitions.duration.shorter})},[`& .${gridClasses.columnHeader}:not(.${gridClasses["columnHeader--sorted"]}):hover .${gridClasses.sortIcon}`]:{opacity:.5},[`& .${gridClasses.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},[`& .${gridClasses.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${gridClasses["columnHeader--filledGroup"]} .${gridClasses.columnHeaderTitleContainer}`]:{borderBottom:`solid ${et} 1px`,boxSizing:"border-box"},[`& .${gridClasses["columnHeader--filledGroup"]}.${gridClasses["columnHeader--showColumnBorder"]} .${gridClasses.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${gridClasses["columnHeader--filledGroup"]}.${gridClasses["columnHeader--showColumnBorder"]}`]:{borderBottom:`solid ${et} 1px`,boxSizing:"border-box"},[`& .${gridClasses.sortIcon}, & .${gridClasses.filterIcon}`]:{fontSize:"inherit"},[`& .${gridClasses["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${gridClasses["columnHeader--alignCenter"]} .${gridClasses.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${gridClasses["columnHeader--alignRight"]} .${gridClasses.columnHeaderDraggableContainer}, & .${gridClasses["columnHeader--alignRight"]} .${gridClasses.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${gridClasses["columnHeader--alignCenter"]} .${gridClasses.menuIcon}, & .${gridClasses["columnHeader--alignRight"]} .${gridClasses.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${gridClasses["columnHeader--alignRight"]} .${gridClasses.menuIcon}, & .${gridClasses["columnHeader--alignRight"]} .${gridClasses.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${gridClasses["columnHeader--moving"]}`]:{backgroundColor:_e.palette.action.hover},[`& .${gridClasses.columnSeparator}`]:{position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:et},[`& .${gridClasses["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${gridClasses["columnSeparator--sideRight"]}`]:{right:-12},[`& .${gridClasses["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:_e.palette.text.primary,"@media (hover: none)":{color:et}},[`&.${gridClasses["columnSeparator--resizing"]}`]:{color:_e.palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${gridClasses.iconSeparator}`]:{color:"inherit"},[`& .${gridClasses.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`& .${gridClasses.columnHeader}:hover`]:{[`& .${gridClasses.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${gridClasses.menuIcon}`]:{width:"auto",visibility:"visible"}},[`.${gridClasses.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${gridClasses.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:_e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity+_e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:alpha$1(_e.palette.primary.main,_e.palette.action.selectedOpacity)}}}},[`& .${gridClasses.cell}`]:{display:"flex",alignItems:"center",borderBottom:`1px solid ${et}`},[`& .${gridClasses.row}:not(.${gridClasses["row--dynamicHeight"]}) > .${gridClasses.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${gridClasses.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${gridClasses.cell}.${gridClasses["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:_e.shadows[2],backgroundColor:_e.palette.background.paper,"&:focus-within":{outline:`solid ${_e.palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${gridClasses["row--editing"]}`]:{boxShadow:_e.shadows[2]},[`& .${gridClasses["row--editing"]} .${gridClasses.cell}`]:{boxShadow:_e.shadows[0],backgroundColor:_e.palette.background.paper},[`& .${gridClasses.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${gridClasses.booleanCell}[data-value="true"]`]:{color:_e.palette.text.secondary},[`& .${gridClasses.booleanCell}[data-value="false"]`]:{color:_e.palette.text.disabled},[`& .${gridClasses.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:_e.spacing(1)},[`& .${gridClasses.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:_e.palette.action.disabledOpacity},[`& .${gridClasses["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${gridClasses.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`& .${gridClasses.withBorder}`]:{borderRight:`1px solid ${et}`},[`& .${gridClasses["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${gridClasses["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${gridClasses["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${gridClasses.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${gridClasses.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${gridClasses["columnHeader--dragging"]}, & .${gridClasses["row--dragging"]}`]:{background:_e.palette.background.paper,padding:"0 12px",borderRadius:_e.shape.borderRadius,opacity:_e.palette.action.disabledOpacity},[`& .${gridClasses["row--dragging"]}`]:{background:_e.palette.background.paper,padding:"0 12px",borderRadius:_e.shape.borderRadius,opacity:_e.palette.action.disabledOpacity,[`& .${gridClasses.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${gridClasses.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${gridClasses.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:_e.spacing(2)},[`& .${gridClasses.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${gridClasses.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:_e.spacing(2)}})}),_excluded$15=["children","className"],useUtilityClasses$Q=_e=>{const{autoHeight:et,density:rt,classes:nt}=_e,ot={root:["root",et&&"autoHeight",`root--density${capitalize(rt)}`]};return composeClasses(ot,getDataGridUtilityClass,nt)},GridRoot=reactExports.forwardRef(function _e(et,rt){const nt=useGridRootProps(),{children:ot,className:it}=et,st=_objectWithoutPropertiesLoose(et,_excluded$15),at=useGridApiContext(),lt=useGridSelector(at,gridVisibleColumnDefinitionsSelector),ct=useGridSelector(at,gridRowCountSelector),pt=useGridSelector(at,gridDensityValueSelector),ut=useGridSelector(at,gridDensityHeaderGroupingMaxDepthSelector),ht=reactExports.useRef(null),ft=useForkRef(ht,rt),gt=useGridSelector(at,gridPinnedRowsCountSelector),vt={density:pt,classes:nt.classes,autoHeight:nt.autoHeight},yt=useUtilityClasses$Q(vt);at.current.rootElementRef=ht;const[mt,Et]=reactExports.useState(!1);return useEnhancedEffect$1(()=>{Et(!0)},[]),useEnhancedEffect$1(()=>{mt&&at.current.unstable_updateGridDimensionsRef()},[at,mt]),mt?jsx(GridRootStyles,_extends({ref:ft,className:clsx(it,yt.root),role:"grid","aria-colcount":lt.length,"aria-rowcount":ut+1+gt+ct,"aria-multiselectable":!nt.disableMultipleSelection,"aria-label":nt["aria-label"],"aria-labelledby":nt["aria-labelledby"]},st,{children:ot})):null}),_excluded$14=["className"],useUtilityClasses$P=_e=>{const{classes:et}=_e;return composeClasses({root:["footerContainer"]},getDataGridUtilityClass,et)},GridFooterContainerRoot=styled$1("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(_e,et)=>et.footerContainer})(({theme:_e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:`1px solid ${_e.palette.mode==="light"?lighten(alpha$1(_e.palette.divider,1),.88):darken(alpha$1(_e.palette.divider,1),.68)}`})),GridFooterContainer=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$14),st={classes:useGridRootProps().classes},at=useUtilityClasses$P(st);return jsx(GridFooterContainerRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))}),_excluded$13=["className"],useUtilityClasses$O=_e=>{const{classes:et}=_e;return composeClasses({root:["overlay"]},getDataGridUtilityClass,et)},GridOverlayRoot=styled$1("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(_e,et)=>et.overlay})(({theme:_e})=>({position:"absolute",top:0,zIndex:4,width:"100%",height:"100%",pointerEvents:"none",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:alpha$1(_e.palette.background.default,_e.palette.action.disabledOpacity)})),GridOverlay=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$13),st={classes:useGridRootProps().classes},at=useUtilityClasses$O(st);return jsx(GridOverlayRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))}),_excluded$12=["className","children"],useUtilityClasses$N=_e=>{const{classes:et}=_e;return composeClasses({root:["toolbarContainer"]},getDataGridUtilityClass,et)},GridToolbarContainerRoot=styled$1("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(_e,et)=>et.toolbarContainer})(({theme:_e})=>({display:"flex",alignItems:"center",flexWrap:"wrap",padding:_e.spacing(.5,.5,0)})),GridToolbarContainer=reactExports.forwardRef(function _e(et,rt){const{className:nt,children:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$12),at={classes:useGridRootProps().classes},lt=useUtilityClasses$N(at);return ot?jsx(GridToolbarContainerRoot,_extends({ref:rt,className:clsx(nt,lt.root)},it,{children:ot})):null}),_excluded$11=["className"],useUtilityClasses$M=_e=>{const{classes:et}=_e;return composeClasses({root:["iconButtonContainer"]},getDataGridUtilityClass,et)},GridIconButtonContainerRoot=styled$1("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(_e,et)=>et.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),GridIconButtonContainer=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$11),st={classes:useGridRootProps().classes},at=useUtilityClasses$M(st);return jsx(GridIconButtonContainerRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))}),useUtilityClasses$L=_e=>{const{classes:et}=_e;return composeClasses({icon:["sortIcon"]},getDataGridUtilityClass,et)};function getIcon(_e,et,rt,nt){let ot;const it={};return et==="asc"?ot=_e.ColumnSortedAscendingIcon:et==="desc"?ot=_e.ColumnSortedDescendingIcon:(ot=_e.ColumnUnsortedIcon,it.sortingOrder=nt),ot?jsx(ot,_extends({fontSize:"small",className:rt},it)):null}function GridColumnHeaderSortIconRaw(_e){const{direction:et,index:rt,sortingOrder:nt}=_e,ot=useGridApiContext(),it=useGridRootProps(),st=_extends({},_e,{classes:it.classes}),at=useUtilityClasses$L(st),lt=getIcon(it.components,et,at.icon,nt);if(!lt)return null;const ct=jsx(IconButton$1,{tabIndex:-1,"aria-label":ot.current.getLocaleText("columnHeaderSortIconLabel"),title:ot.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",children:lt});return jsxs(GridIconButtonContainer,{children:[rt!=null&&jsx(Badge$1,{badgeContent:rt,color:"default",children:ct}),rt==null&&ct]})}const GridColumnHeaderSortIcon=reactExports.memo(GridColumnHeaderSortIconRaw),useUtilityClasses$K=_e=>{const{classes:et,open:rt}=_e;return composeClasses({root:["menuIcon",rt&&"menuOpen"],button:["menuIconButton"]},getDataGridUtilityClass,et)},ColumnHeaderMenuIcon=reactExports.memo(_e=>{const{column:et,open:rt,columnMenuId:nt,columnMenuButtonId:ot,iconButtonRef:it}=_e,st=useGridApiContext(),at=useGridRootProps(),lt=_extends({},_e,{classes:at.classes}),ct=useUtilityClasses$K(lt),pt=reactExports.useCallback(ut=>{ut.preventDefault(),ut.stopPropagation(),st.current.toggleColumnMenu(et.field)},[st,et.field]);return jsx("div",{className:ct.root,children:jsx(IconButton$1,{ref:it,tabIndex:-1,className:ct.button,"aria-label":st.current.getLocaleText("columnMenuLabel"),title:st.current.getLocaleText("columnMenuLabel"),size:"small",onClick:pt,"aria-expanded":rt?"true":void 0,"aria-haspopup":"true","aria-controls":nt,id:ot,children:jsx(at.components.ColumnMenuIcon,{fontSize:"small"})})})});function GridColumnHeaderMenu({columnMenuId:_e,columnMenuButtonId:et,ContentComponent:rt,contentComponentProps:nt,field:ot,open:it,target:st,onExited:at}){const lt=useGridApiContext(),ct=lt.current.getColumn(ot),pt=reactExports.useCallback(ut=>{ut.stopPropagation(),lt.current.hideColumnMenu()},[lt]);return st?jsx(GridMenu,{placement:`bottom-${ct.align==="right"?"start":"end"}`,open:it,target:st,onClickAway:pt,onExited:at,children:jsx(rt,_extends({currentColumn:ct,hideMenu:pt,open:it,id:_e,labelledby:et},nt))}):null}function isOverflown(_e){return _e.scrollHeight>_e.clientHeight||_e.scrollWidth>_e.clientWidth}function findParentElementFromClassName(_e,et){return _e.closest(`.${et}`)}function escapeOperandAttributeSelector(_e){return _e.replace(/["\\]/g,"\\$&")}function getGridColumnHeaderElement(_e,et){return _e.querySelector(`[role="columnheader"][data-field="${escapeOperandAttributeSelector(et)}"]`)}function getGridRowElementSelector(_e){return`.${gridClasses.row}[data-id="${escapeOperandAttributeSelector(String(_e))}"]`}function getGridRowElement(_e,et){return _e.querySelector(getGridRowElementSelector(et))}function getGridCellElement(_e,{id:et,field:rt}){const nt=getGridRowElementSelector(et),ot=`.${gridClasses.cell}[data-field="${escapeOperandAttributeSelector(rt)}"]`,it=`${nt} ${ot}`;return _e.querySelector(it)}const _excluded$10=["className"],useUtilityClasses$J=_e=>{const{classes:et}=_e;return composeClasses({root:["columnHeaderTitle"]},getDataGridUtilityClass,et)},GridColumnHeaderTitleRoot=styled$1("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(_e,et)=>et.columnHeaderTitle})(({theme:_e})=>({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:_e.typography.fontWeightMedium})),ColumnHeaderInnerTitle=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$10),st={classes:useGridRootProps().classes},at=useUtilityClasses$J(st);return jsx(GridColumnHeaderTitleRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))});function GridColumnHeaderTitle(_e){var et;const{label:rt,description:nt,columnWidth:ot}=_e,it=useGridRootProps(),st=reactExports.useRef(null),[at,lt]=reactExports.useState("");return reactExports.useEffect(()=>{if(!nt&&st&&st.current){const ct=isOverflown(st.current);lt(ct?rt:"")}},[st,ot,nt,rt]),jsx(it.components.BaseTooltip,_extends({title:nt||at},(et=it.componentsProps)==null?void 0:et.baseTooltip,{children:jsx(ColumnHeaderInnerTitle,{ref:st,children:rt})}))}const _excluded$$=["resizable","resizing","height","side"];var GridColumnHeaderSeparatorSides;(function(_e){_e.Left="left",_e.Right="right"})(GridColumnHeaderSeparatorSides||(GridColumnHeaderSeparatorSides={}));const useUtilityClasses$I=_e=>{const{resizable:et,resizing:rt,classes:nt,side:ot}=_e,it={root:["columnSeparator",et&&"columnSeparator--resizable",rt&&"columnSeparator--resizing",ot&&`columnSeparator--side${capitalize(ot)}`],icon:["iconSeparator"]};return composeClasses(it,getDataGridUtilityClass,nt)};function GridColumnHeaderSeparatorRaw(_e){const{height:et,side:rt=GridColumnHeaderSeparatorSides.Right}=_e,nt=_objectWithoutPropertiesLoose(_e,_excluded$$),ot=useGridRootProps(),it=_extends({},_e,{side:rt,classes:ot.classes}),st=useUtilityClasses$I(it),at=reactExports.useCallback(lt=>{lt.preventDefault(),lt.stopPropagation()},[]);return jsx("div",_extends({className:st.root,style:{minHeight:et,opacity:ot.showColumnRightBorder?0:1}},nt,{onClick:at,children:jsx(ot.components.ColumnResizeIcon,{className:st.icon})}))}const GridColumnHeaderSeparator=reactExports.memo(GridColumnHeaderSeparatorRaw),_excluded$_=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","disableHeaderSeparator"],GridGenericColumnHeaderItem=reactExports.forwardRef(function _e(et,rt){const{classes:nt,columnMenuOpen:ot,colIndex:it,height:st,isResizing:at,sortDirection:lt,hasFocus:ct,tabIndex:pt,separatorSide:ut,isDraggable:ht,headerComponent:ft,description:gt,width:vt,columnMenuIconButton:yt=null,columnMenu:mt=null,columnTitleIconButtons:Et=null,headerClassName:bt,label:Ct,resizable:Tt,draggableContainerProps:wt,columnHeaderSeparatorProps:Rt,disableHeaderSeparator:It}=et,St=_objectWithoutPropertiesLoose(et,_excluded$_),Pt=useGridApiContext(),Ot=useGridRootProps(),Ut=reactExports.useRef(null),[Bt,xt]=reactExports.useState(ot),At=useForkRef(Ut,rt);let Mt="none";return lt!=null&&(Mt=lt==="asc"?"ascending":"descending"),reactExports.useEffect(()=>{Bt||xt(ot)},[Bt,ot]),reactExports.useLayoutEffect(()=>{const Nt=Pt.current.state.columnMenu;if(ct&&!Nt.open){const Ft=Ut.current.querySelector('[tabindex="0"]')||Ut.current;Ft==null||Ft.focus(),Pt.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[Pt,ct]),jsxs("div",_extends({ref:At,className:clsx(nt.root,bt),style:{height:st,width:vt,minWidth:vt,maxWidth:vt},role:"columnheader",tabIndex:pt,"aria-colindex":it+1,"aria-sort":Mt,"aria-label":ft==null?Ct:void 0},St,{children:[jsxs("div",_extends({className:nt.draggableContainer,draggable:ht},wt,{children:[jsxs("div",{className:nt.titleContainer,children:[jsx("div",{className:nt.titleContainerContent,children:ft!==void 0?ft:jsx(GridColumnHeaderTitle,{label:Ct,description:gt,columnWidth:vt})}),Et]}),yt]})),!It&&jsx(GridColumnHeaderSeparator,_extends({resizable:!Ot.disableColumnResize&&!!Tt,resizing:at,height:st,side:ut},Rt)),mt]}))}),useUtilityClasses$H=_e=>{const{column:et,classes:rt,isDragging:nt,sortDirection:ot,showRightBorder:it,filterItemsCounter:st}=_e,at=ot!=null,lt=st!=null&&st>0,ct=et.type==="number",pt={root:["columnHeader",et.headerAlign==="left"&&"columnHeader--alignLeft",et.headerAlign==="center"&&"columnHeader--alignCenter",et.headerAlign==="right"&&"columnHeader--alignRight",et.sortable&&"columnHeader--sortable",nt&&"columnHeader--moving",at&&"columnHeader--sorted",lt&&"columnHeader--filtered",ct&&"columnHeader--numeric",it&&"withBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return composeClasses(pt,getDataGridUtilityClass,rt)};function GridColumnHeaderItem(_e){var et,rt,nt,ot,it;const{column:st,columnMenuOpen:at,colIndex:lt,headerHeight:ct,isResizing:pt,isLastColumn:ut,sortDirection:ht,sortIndex:ft,filterItemsCounter:gt,hasFocus:vt,tabIndex:yt,extendRowFullWidth:mt,disableReorder:Et,separatorSide:bt}=_e,Ct=useGridApiContext(),Tt=useGridRootProps(),wt=reactExports.useRef(null),Rt=useId(),It=useId(),St=reactExports.useRef(null),[Pt,Ot]=reactExports.useState(at),{hasScrollX:Ut,hasScrollY:Bt}=(et=Ct.current.getRootDimensions())!=null?et:{hasScrollX:!1,hasScrollY:!1},xt=reactExports.useMemo(()=>!Tt.disableColumnReorder&&!Et&&!st.disableReorder,[Tt.disableColumnReorder,Et,st.disableReorder]);let At;st.renderHeader&&(At=st.renderHeader(Ct.current.getColumnHeaderParams(st.field)));const Nt=ut?!(ut&&Ut&&!Bt)&&!mt:Tt.showColumnRightBorder,$t=_extends({},_e,{classes:Tt.classes,showRightBorder:Nt}),Ft=useUtilityClasses$H($t),jt=reactExports.useCallback(yr=>Cr=>{Cr.currentTarget.contains(Cr.target)&&Ct.current.publishEvent(yr,Ct.current.getColumnHeaderParams(st.field),Cr)},[Ct,st.field]),zt=reactExports.useMemo(()=>({onClick:jt("columnHeaderClick"),onDoubleClick:jt("columnHeaderDoubleClick"),onMouseOver:jt("columnHeaderOver"),onMouseOut:jt("columnHeaderOut"),onMouseEnter:jt("columnHeaderEnter"),onMouseLeave:jt("columnHeaderLeave"),onKeyDown:jt("columnHeaderKeyDown"),onFocus:jt("columnHeaderFocus"),onBlur:jt("columnHeaderBlur")}),[jt]),Yt=reactExports.useMemo(()=>xt?{onDragStart:jt("columnHeaderDragStart"),onDragEnter:jt("columnHeaderDragEnter"),onDragOver:jt("columnHeaderDragOver"),onDragEnd:jt("columnHeaderDragEnd")}:{},[xt,jt]),Kt=reactExports.useMemo(()=>({onMouseDown:jt("columnSeparatorMouseDown")}),[jt]);reactExports.useEffect(()=>{Pt||Ot(at)},[Pt,at]);const er=reactExports.useCallback(()=>{Ot(!1)},[]),ir=!Tt.disableColumnMenu&&!st.disableColumnMenu&&jsx(ColumnHeaderMenuIcon,{column:st,columnMenuId:Rt,columnMenuButtonId:It,open:Pt,iconButtonRef:St}),rr=jsx(GridColumnHeaderMenu,{columnMenuId:Rt,columnMenuButtonId:It,field:st.field,open:at,target:St.current,ContentComponent:Tt.components.ColumnMenu,contentComponentProps:(rt=Tt.componentsProps)==null?void 0:rt.columnMenu,onExited:er}),lr=(nt=st.sortingOrder)!=null?nt:Tt.sortingOrder,nr=jsxs(reactExports.Fragment,{children:[!Tt.disableColumnFilter&&jsx(Tt.components.ColumnHeaderFilterIconButton,_extends({field:st.field,counter:gt},(ot=Tt.componentsProps)==null?void 0:ot.columnHeaderFilterIconButton)),st.sortable&&!st.hideSortIcons&&jsx(GridColumnHeaderSortIcon,{direction:ht,index:ft,sortingOrder:lr})]});reactExports.useLayoutEffect(()=>{const yr=Ct.current.state.columnMenu;if(vt&&!yr.open){const or=wt.current.querySelector('[tabindex="0"]')||wt.current;or==null||or.focus(),Ct.current.columnHeadersContainerElementRef.current.scrollLeft=0}},[Ct,vt]);const hr=typeof st.headerClassName=="function"?st.headerClassName({field:st.field,colDef:st}):st.headerClassName,vr=(it=st.headerName)!=null?it:st.field;return jsx(GridGenericColumnHeaderItem,_extends({ref:wt,classes:Ft,columnMenuOpen:at,colIndex:lt,height:ct,isResizing:pt,sortDirection:ht,hasFocus:vt,tabIndex:yt,separatorSide:bt,isDraggable:xt,headerComponent:At,description:st.description,elementId:st.field,width:st.computedWidth,columnMenuIconButton:ir,columnTitleIconButtons:nr,headerClassName:hr,label:vr,resizable:!Tt.disableColumnResize&&!!st.resizable,"data-field":st.field,columnMenu:rr,draggableContainerProps:Yt,columnHeaderSeparatorProps:Kt},zt))}const gridPreferencePanelStateSelector=_e=>_e.preferencePanel;var GridPreferencePanelsValue;(function(_e){_e.filters="filters",_e.columns="columns"})(GridPreferencePanelsValue||(GridPreferencePanelsValue={}));const useUtilityClasses$G=_e=>{const{classes:et}=_e;return composeClasses({icon:["filterIcon"]},getDataGridUtilityClass,et)};function GridColumnHeaderFilterIconButton(_e){var et;const{counter:rt,field:nt,onClick:ot}=_e,it=useGridApiContext(),st=useGridRootProps(),at=_extends({},_e,{classes:st.classes}),lt=useUtilityClasses$G(at),ct=reactExports.useCallback(ut=>{ut.preventDefault(),ut.stopPropagation();const{open:ht,openedPanelValue:ft}=gridPreferencePanelStateSelector(it.current.state);ht&&ft===GridPreferencePanelsValue.filters?it.current.hideFilterPanel():it.current.showFilterPanel(),ot&&ot(it.current.getColumnHeaderParams(nt),ut)},[it,nt,ot]);if(!rt)return null;const pt=jsx(IconButton$1,{onClick:ct,color:"default","aria-label":it.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,children:jsx(st.components.ColumnFilteredIcon,{className:lt.icon,fontSize:"small"})});return jsx(st.components.BaseTooltip,_extends({title:it.current.getLocaleText("columnHeaderFiltersTooltipActive")(rt),enterDelay:1e3},(et=st.componentsProps)==null?void 0:et.baseTooltip,{children:jsxs(GridIconButtonContainer,{children:[rt>1&&jsx(Badge$1,{badgeContent:rt,color:"default",children:pt}),rt===1&&pt]})}))}const _excluded$Z=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","getValue","api"],useUtilityClasses$F=_e=>{const{classes:et}=_e;return composeClasses({root:["checkboxInput"]},getDataGridUtilityClass,et)},GridCellCheckboxForwardRef=reactExports.forwardRef(function _e(et,rt){var nt;const{field:ot,id:it,value:st,rowNode:at,hasFocus:lt,tabIndex:ct}=et,pt=_objectWithoutPropertiesLoose(et,_excluded$Z),ut=useGridApiContext(),ht=useGridRootProps(),ft={classes:ht.classes},gt=useUtilityClasses$F(ft),vt=reactExports.useRef(null),yt=reactExports.useRef(),mt=useForkRef(vt,rt),Et=ut.current.getCellElement(it,ot),bt=Rt=>{const It={value:Rt.target.checked,id:it};ut.current.publishEvent("rowSelectionCheckboxChange",It,Rt)};reactExports.useLayoutEffect(()=>{ct===0&&Et&&(Et.tabIndex=-1)},[Et,ct]),reactExports.useEffect(()=>{if(lt){var Rt;const It=(Rt=vt.current)==null?void 0:Rt.querySelector("input");It==null||It.focus({preventScroll:!0})}else yt.current&&yt.current.stop({})},[lt]);const Ct=reactExports.useCallback(Rt=>{isSpaceKey(Rt.key)&&Rt.stopPropagation(),isNavigationKey(Rt.key)&&!Rt.shiftKey&&ut.current.publishEvent("cellNavigationKeyDown",et,Rt)},[ut,et]);if(at.position==="footer")return null;const Tt=ut.current.isRowSelectable(it),wt=ut.current.getLocaleText(st?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return at.isPinned?null:jsx(ht.components.BaseCheckbox,_extends({ref:mt,tabIndex:ct,checked:st,onChange:bt,className:gt.root,inputProps:{"aria-label":wt},onKeyDown:Ct,disabled:!Tt,touchRippleRef:yt},(nt=ht.componentsProps)==null?void 0:nt.baseCheckbox,pt))}),GridCellCheckboxRenderer=GridCellCheckboxForwardRef,gridSelectionStateSelector=_e=>_e.selection,selectedGridRowsCountSelector=createSelector(gridSelectionStateSelector,_e=>_e.length),selectedGridRowsSelector=createSelector(gridSelectionStateSelector,gridRowsLookupSelector,(_e,et)=>new Map(_e.map(rt=>[rt,et[rt]]))),selectedIdsLookupSelector=createSelector(gridSelectionStateSelector,_e=>_e.reduce((et,rt)=>(et[rt]=rt,et),{})),gridPaginationSelector=_e=>_e.pagination,gridPageSelector=createSelector(gridPaginationSelector,_e=>_e.page),gridPageSizeSelector=createSelector(gridPaginationSelector,_e=>_e.pageSize);createSelector(gridPaginationSelector,_e=>_e.pageCount);const gridPaginationRowRangeSelector=createSelector(gridPaginationSelector,gridRowTreeSelector,gridRowTreeDepthSelector,gridVisibleSortedRowEntriesSelector,gridVisibleSortedTopLevelRowEntriesSelector,(_e,et,rt,nt,ot)=>{const it=ot.length,st=Math.min(_e.pageSize*_e.page,it-1),at=Math.min(st+_e.pageSize-1,it-1);if(st===-1||at===-1)return null;if(rt<2)return{firstRowIndex:st,lastRowIndex:at};const lt=ot[st],ct=at-st+1,pt=nt.findIndex(ft=>ft.id===lt.id);let ut=pt,ht=0;for(;ut<nt.length&&ht<=ct;){const ft=nt[ut],gt=et[ft.id].depth;(ht<ct||gt>0)&&(ut+=1),gt===0&&(ht+=1)}return{firstRowIndex:pt,lastRowIndex:ut-1}}),gridPaginatedVisibleSortedGridRowEntriesSelector=createSelector(gridVisibleSortedRowEntriesSelector,gridPaginationRowRangeSelector,(_e,et)=>et?_e.slice(et.firstRowIndex,et.lastRowIndex+1):[]),gridPaginatedVisibleSortedGridRowIdsSelector=createSelector(gridVisibleSortedRowIdsSelector,gridPaginationRowRangeSelector,(_e,et)=>et?_e.slice(et.firstRowIndex,et.lastRowIndex+1):[]),_excluded$Y=["field","colDef"],useUtilityClasses$E=_e=>{const{classes:et}=_e;return composeClasses({root:["checkboxInput"]},getDataGridUtilityClass,et)},GridHeaderCheckbox=reactExports.forwardRef(function _e(et,rt){var nt;const ot=_objectWithoutPropertiesLoose(et,_excluded$Y),[,it]=reactExports.useState(!1),st=useGridApiContext(),at=useGridRootProps(),lt={classes:at.classes},ct=useUtilityClasses$E(lt),pt=useGridSelector(st,gridTabIndexColumnHeaderSelector),ut=useGridSelector(st,gridSelectionStateSelector),ht=useGridSelector(st,gridVisibleSortedRowIdsSelector),ft=useGridSelector(st,gridPaginatedVisibleSortedGridRowIdsSelector),gt=reactExports.useMemo(()=>typeof at.isRowSelectable!="function"?ut:ut.filter(It=>st.current.getRow(It)?at.isRowSelectable(st.current.getRowParams(It)):!1),[st,at.isRowSelectable,ut]),vt=reactExports.useMemo(()=>(!at.pagination||!at.checkboxSelectionVisibleOnly?ht:ft).reduce((St,Pt)=>(St[Pt]=!0,St),{}),[at.pagination,at.checkboxSelectionVisibleOnly,ft,ht]),yt=reactExports.useMemo(()=>gt.filter(It=>vt[It]).length,[gt,vt]),mt=yt>0&&yt<Object.keys(vt).length,Et=yt>0,bt=It=>{const St={value:It.target.checked};st.current.publishEvent("headerSelectionCheckboxChange",St)},Ct=pt!==null&&pt.field===et.field?0:-1;reactExports.useLayoutEffect(()=>{const It=st.current.getColumnHeaderElement(et.field);Ct===0&&It&&(It.tabIndex=-1)},[Ct,st,et.field]);const Tt=reactExports.useCallback(It=>{It.key===" "&&st.current.publishEvent("headerSelectionCheckboxChange",{value:!Et}),isNavigationKey(It.key)&&!It.shiftKey&&st.current.publishEvent("columnHeaderNavigationKeyDown",et,It)},[st,et,Et]),wt=reactExports.useCallback(()=>{it(It=>!It)},[]);reactExports.useEffect(()=>st.current.subscribeEvent("selectionChange",wt),[st,wt]);const Rt=st.current.getLocaleText(Et?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return jsx(at.components.BaseCheckbox,_extends({ref:rt,indeterminate:mt,checked:Et,onChange:bt,className:ct.root,inputProps:{"aria-label":Rt},tabIndex:Ct,onKeyDown:Tt},(nt=at.componentsProps)==null?void 0:nt.baseCheckbox,ot))}),GridColumnsMenuItem=_e=>{const{onClick:et}=_e,rt=useGridApiContext(),nt=useGridRootProps(),ot=reactExports.useCallback(it=>{et(it),rt.current.showPreferences(GridPreferencePanelsValue.columns)},[rt,et]);return nt.disableColumnSelector?null:jsx(MenuItem$1,{onClick:ot,children:rt.current.getLocaleText("columnMenuShowColumns")})},GridFilterMenuItem=_e=>{const{column:et,onClick:rt}=_e,nt=useGridApiContext(),ot=useGridRootProps(),it=reactExports.useCallback(st=>{rt(st),nt.current.showFilterPanel(et==null?void 0:et.field)},[nt,et==null?void 0:et.field,rt]);return ot.disableColumnFilter||!(et!=null&&et.filterable)?null:jsx(MenuItem$1,{onClick:it,children:nt.current.getLocaleText("columnMenuFilter")})},_excluded$X=["hideMenu","currentColumn","open","id","labelledby","className","children"],GridColumnMenuContainer=reactExports.forwardRef(function _e(et,rt){const{hideMenu:nt,open:ot,id:it,labelledby:st,className:at,children:lt}=et,ct=_objectWithoutPropertiesLoose(et,_excluded$X),pt=reactExports.useCallback(ut=>{isTabKey(ut.key)&&ut.preventDefault(),isHideMenuKey(ut.key)&&nt(ut)},[nt]);return jsx(MenuList$1,_extends({id:it,ref:rt,className:clsx(gridClasses.menuList,at),"aria-labelledby":st,onKeyDown:pt,autoFocus:ot},ct,{children:lt}))}),sortModelDisableMultiColumnsSortingWarning=buildWarning(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),sanitizeSortModel=(_e,et)=>et&&_e.length>1?(sortModelDisableMultiColumnsSortingWarning(),[_e[0]]):_e,mergeStateWithSortModel=(_e,et)=>rt=>_extends({},rt,{sorting:_extends({},rt.sorting,{sortModel:sanitizeSortModel(_e,et)})}),isDesc=_e=>_e==="desc",parseSortItem=(_e,et)=>{const rt=et.current.getColumn(_e.field);if(!rt)return null;const nt=isDesc(_e.sort)?(...it)=>-1*rt.sortComparator(...it):rt.sortComparator;return{getSortCellParams:it=>({id:it,field:rt.field,rowNode:et.current.getRowNode(it),value:et.current.getCellValue(it,rt.field),api:et.current}),comparator:nt}},compareRows=(_e,et,rt)=>_e.reduce((nt,ot,it)=>{if(nt!==0)return nt;const st=et.params[it],at=rt.params[it];return nt=ot.comparator(st.value,at.value,st,at),nt},0),buildAggregatedSortingApplier=(_e,et)=>{const rt=_e.map(nt=>parseSortItem(nt,et)).filter(nt=>!!nt);return rt.length===0?null:nt=>nt.map(ot=>({node:ot,params:rt.map(it=>it.getSortCellParams(ot.id))})).sort((ot,it)=>compareRows(rt,ot,it)).map(ot=>ot.node.id)},getNextGridSortDirection=(_e,et)=>{const rt=_e.indexOf(et);return!et||rt===-1||rt+1===_e.length?_e[0]:_e[rt+1]},gridNillComparator=(_e,et)=>_e==null&&et!=null?-1:et==null&&_e!=null?1:_e==null&&et==null?0:null,collator$2=new Intl.Collator,gridStringOrNumberComparator=(_e,et)=>{const rt=gridNillComparator(_e,et);return rt!==null?rt:typeof _e=="string"?collator$2.compare(_e.toString(),et.toString()):_e-et},gridNumberComparator=(_e,et)=>{const rt=gridNillComparator(_e,et);return rt!==null?rt:Number(_e)-Number(et)},gridDateComparator=(_e,et)=>{const rt=gridNillComparator(_e,et);return rt!==null?rt:_e>et?1:_e<et?-1:0};function isNumber(_e){return typeof _e=="number"}function isFunction(_e){return typeof _e=="function"}function localStorageAvailable(){try{const _e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(_e,_e),window.localStorage.removeItem(_e),!0}catch{return!1}}function escapeRegExp(_e){return _e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const clamp=(_e,et,rt)=>Math.max(et,Math.min(rt,_e));function isDeepEqual(_e,et){if(_e===et)return!0;if(_e&&et&&typeof _e=="object"&&typeof et=="object"){if(_e.constructor!==et.constructor)return!1;if(Array.isArray(_e)){const ot=_e.length;if(ot!==et.length)return!1;for(let it=0;it<ot;it+=1)if(!isDeepEqual(_e[it],et[it]))return!1;return!0}if(_e instanceof Map&&et instanceof Map){if(_e.size!==et.size)return!1;const ot=Array.from(_e.entries());for(let it=0;it<ot.length;it+=1)if(!et.has(ot[it][0]))return!1;for(let it=0;it<ot.length;it+=1){const st=ot[it];if(!isDeepEqual(st[1],et.get(st[0])))return!1}return!0}if(_e instanceof Set&&et instanceof Set){if(_e.size!==et.size)return!1;const ot=Array.from(_e.entries());for(let it=0;it<ot.length;it+=1)if(!et.has(ot[it][0]))return!1;return!0}if(ArrayBuffer.isView(_e)&&ArrayBuffer.isView(et)){const ot=_e.length;if(ot!==et.length)return!1;for(let it=0;it<ot;it+=1)if(_e[it]!==et[it])return!1;return!0}if(_e.constructor===RegExp)return _e.source===et.source&&_e.flags===et.flags;if(_e.valueOf!==Object.prototype.valueOf)return _e.valueOf()===et.valueOf();if(_e.toString!==Object.prototype.toString)return _e.toString()===et.toString();const rt=Object.keys(_e),nt=rt.length;if(nt!==Object.keys(et).length)return!1;for(let ot=0;ot<nt;ot+=1)if(!Object.prototype.hasOwnProperty.call(et,rt[ot]))return!1;for(let ot=0;ot<nt;ot+=1){const it=rt[ot];if(!isDeepEqual(_e[it],et[it]))return!1}return!0}return _e!==_e&&et!==et}function mulberry32(_e){return()=>{let et=_e+=1831565813;return et=Math.imul(et^et>>>15,et|1),et^=et+Math.imul(et^et>>>7,et|61),((et^et>>>14)>>>0)/4294967296}}function randomNumberBetween(_e,et,rt){const nt=mulberry32(_e);return()=>et+(rt-et)*nt()}function deepClone(_e){return typeof structuredClone=="function"?structuredClone(_e):JSON.parse(JSON.stringify(_e))}const _excluded$W=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function GridFilterInputMultipleValue(_e){const{item:et,applyValue:rt,type:nt,apiRef:ot,focusElementRef:it,color:st,error:at,helperText:lt,size:ct,variant:pt}=_e,ut=_objectWithoutPropertiesLoose(_e,_excluded$W),ht={color:st,error:at,helperText:lt,size:ct,variant:pt},[ft,gt]=reactExports.useState(et.value||[]),vt=useId(),yt=useGridRootProps();reactExports.useEffect(()=>{var Et;const bt=(Et=et.value)!=null?Et:[];gt(bt.map(String))},[et.value]);const mt=reactExports.useCallback((Et,bt)=>{gt(bt.map(String)),rt(_extends({},et,{value:[...bt]}))},[rt,et]);return jsx(Autocomplete$1,_extends({multiple:!0,freeSolo:!0,options:[],filterOptions:(Et,bt)=>{const{inputValue:Ct}=bt;return Ct==null||Ct===""?[]:[Ct]},id:vt,value:ft,onChange:mt,renderTags:(Et,bt)=>Et.map((Ct,Tt)=>jsx(Chip$1,_extends({variant:"outlined",size:"small",label:Ct},bt({index:Tt})))),renderInput:Et=>{var bt;return jsx(yt.components.BaseTextField,_extends({},Et,{label:ot.current.getLocaleText("filterPanelInputLabel"),placeholder:ot.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:_extends({},Et.InputLabelProps,{shrink:!0}),inputRef:it,type:nt||"text"},ht,(bt=yt.componentsProps)==null?void 0:bt.baseTextField))}},ut))}const getGridStringQuickFilterFn=_e=>{if(!_e)return null;const et=new RegExp(escapeRegExp(_e),"i");return({value:rt})=>rt!=null?et.test(rt.toString()):!1},getGridStringOperators=(_e=!1)=>[{value:"contains",getApplyFilterFn:et=>{if(!et.value)return null;const rt=_e?et.value:et.value.trim(),nt=new RegExp(escapeRegExp(rt),"i");return({value:ot})=>ot!=null?nt.test(ot.toString()):!1},InputComponent:GridFilterInputValue},{value:"equals",getApplyFilterFn:et=>{if(!et.value)return null;const rt=_e?et.value:et.value.trim(),nt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:ot})=>ot!=null?nt.compare(rt,ot.toString())===0:!1},InputComponent:GridFilterInputValue},{value:"startsWith",getApplyFilterFn:et=>{if(!et.value)return null;const rt=_e?et.value:et.value.trim(),nt=new RegExp(`^${escapeRegExp(rt)}.*$`,"i");return({value:ot})=>ot!=null?nt.test(ot.toString()):!1},InputComponent:GridFilterInputValue},{value:"endsWith",getApplyFilterFn:et=>{if(!et.value)return null;const rt=_e?et.value:et.value.trim(),nt=new RegExp(`.*${escapeRegExp(rt)}$`,"i");return({value:ot})=>ot!=null?nt.test(ot.toString()):!1},InputComponent:GridFilterInputValue},{value:"isEmpty",getApplyFilterFn:()=>({value:et})=>et===""||et==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:et})=>et!==""&&et!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:et=>{if(!Array.isArray(et.value)||et.value.length===0)return null;const rt=_e?et.value:et.value.map(ot=>ot.trim()),nt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:ot})=>ot!=null?rt.some(it=>nt.compare(it,ot.toString()||"")===0):!1},InputComponent:GridFilterInputMultipleValue}],GRID_STRING_COL_DEF={width:100,minWidth:50,maxWidth:1/0,hide:!1,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:gridStringOrNumberComparator,type:"string",align:"left",filterOperators:getGridStringOperators(),renderEditCell:renderEditInputCell,getApplyQuickFilterFn:getGridStringQuickFilterFn},GRID_ACTIONS_COLUMN_TYPE="actions",GRID_ACTIONS_COL_DEF=_extends({},GRID_STRING_COL_DEF,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:renderActionsCell,getApplyQuickFilterFn:void 0}),_excluded$V=["item","applyValue","apiRef","focusElementRef"];function GridFilterInputBoolean(_e){var et,rt,nt,ot;const{item:it,applyValue:st,apiRef:at,focusElementRef:lt}=_e,ct=_objectWithoutPropertiesLoose(_e,_excluded$V),[pt,ut]=reactExports.useState(it.value||""),ht=useGridRootProps(),gt=(rt=(((et=ht.componentsProps)==null?void 0:et.baseSelect)||{}).native)!=null?rt:!0,vt=gt?"option":MenuItem$1,yt=reactExports.useCallback(mt=>{const Et=mt.target.value;ut(Et),st(_extends({},it,{value:Et}))},[st,it]);return reactExports.useEffect(()=>{ut(it.value||"")},[it.value]),jsxs(ht.components.BaseTextField,_extends({label:at.current.getLocaleText("filterPanelInputLabel"),value:pt,onChange:yt,select:!0,variant:"standard",SelectProps:_extends({native:gt,displayEmpty:!0},(nt=ht.componentsProps)==null?void 0:nt.baseSelect),InputLabelProps:{shrink:!0},inputRef:lt},ct,(ot=ht.componentsProps)==null?void 0:ot.baseTextField,{children:[jsx(vt,{value:"",children:at.current.getLocaleText("filterValueAny")}),jsx(vt,{value:"true",children:at.current.getLocaleText("filterValueTrue")}),jsx(vt,{value:"false",children:at.current.getLocaleText("filterValueFalse")})]}))}const getGridBooleanOperators=()=>[{value:"is",getApplyFilterFn:_e=>{if(!_e.value)return null;const et=_e.value==="true";return({value:rt})=>Boolean(rt)===et},InputComponent:GridFilterInputBoolean}];function gridBooleanFormatter({value:_e,api:et}){return _e?et.getLocaleText("booleanCellTrueLabel"):et.getLocaleText("booleanCellFalseLabel")}const GRID_BOOLEAN_COL_DEF=_extends({},GRID_STRING_COL_DEF,{type:"boolean",align:"center",headerAlign:"center",renderCell:renderBooleanCell,renderEditCell:renderEditBooleanCell,sortComparator:gridNumberComparator,valueFormatter:gridBooleanFormatter,filterOperators:getGridBooleanOperators(),getApplyQuickFilterFn:void 0,aggregable:!1}),GRID_CHECKBOX_SELECTION_FIELD="__check__",GRID_CHECKBOX_SELECTION_COL_DEF=_extends({},GRID_BOOLEAN_COL_DEF,{field:GRID_CHECKBOX_SELECTION_FIELD,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,valueGetter:_e=>selectedIdsLookupSelector(_e.api.state,_e.api.instanceId)[_e.id]!==void 0,renderHeader:_e=>jsx(GridHeaderCheckbox,_extends({},_e)),renderCell:_e=>jsx(GridCellCheckboxRenderer,_extends({},_e))}),_excluded$U=["item","applyValue","type","apiRef","focusElementRef","InputProps"],SUBMIT_FILTER_DATE_STROKE_TIME=500;function GridFilterInputDate(_e){var et,rt;const{item:nt,applyValue:ot,type:it,apiRef:st,focusElementRef:at,InputProps:lt}=_e,ct=_objectWithoutPropertiesLoose(_e,_excluded$U),pt=reactExports.useRef(),[ut,ht]=reactExports.useState((et=nt.value)!=null?et:""),[ft,gt]=reactExports.useState(!1),vt=useId(),yt=useGridRootProps(),mt=reactExports.useCallback(Et=>{const bt=Et.target.value;clearTimeout(pt.current),ht(String(bt)),gt(!0),pt.current=setTimeout(()=>{ot(_extends({},nt,{value:bt})),gt(!1)},SUBMIT_FILTER_DATE_STROKE_TIME)},[ot,nt]);return reactExports.useEffect(()=>()=>{clearTimeout(pt.current)},[]),reactExports.useEffect(()=>{var Et;const bt=(Et=nt.value)!=null?Et:"";ht(String(bt))},[nt.value]),jsx(yt.components.BaseTextField,_extends({id:vt,label:st.current.getLocaleText("filterPanelInputLabel"),placeholder:st.current.getLocaleText("filterPanelInputPlaceholder"),value:ut,onChange:mt,variant:"standard",type:it||"text",InputLabelProps:{shrink:!0},inputRef:at,InputProps:_extends({},ft?{endAdornment:jsx(GridLoadIcon,{})}:{},lt,{inputProps:_extends({max:it==="datetime-local"?"9999-12-31T23:59":"9999-12-31"},lt==null?void 0:lt.inputProps)})},ct,(rt=yt.componentsProps)==null?void 0:rt.baseTextField))}const dateRegex=/(\d+)-(\d+)-(\d+)/,dateTimeRegex=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function buildApplyFilterFn(_e,et,rt,nt){if(!_e.value)return null;const[ot,it,st,at,lt]=_e.value.match(rt?dateTimeRegex:dateRegex).slice(1).map(Number),ct=new Date(ot,it-1,st,at||0,lt||0).getTime();return({value:pt})=>{if(!pt)return!1;const ut=pt instanceof Date?pt:new Date(pt.toString());if(nt)return et(ut.getTime(),ct);const ft=(pt instanceof Date?new Date(ut):ut).setHours(rt?ut.getHours():0,rt?ut.getMinutes():0,0,0);return et(ft,ct)}}const getGridDateOperators=_e=>[{value:"is",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt===nt,_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt!==nt,_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt>nt,_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt>=nt,_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt<nt,_e,!_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:et=>buildApplyFilterFn(et,(rt,nt)=>rt<=nt,_e),InputComponent:GridFilterInputDate,InputComponentProps:{type:_e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>({value:et})=>et==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:et})=>et!=null,requiresFilterValue:!1}];function gridDateFormatter({value:_e}){return _e instanceof Date?_e.toLocaleDateString():_e??""}function gridDateTimeFormatter({value:_e}){return _e instanceof Date?_e.toLocaleString():_e??""}const GRID_DATE_COL_DEF=_extends({},GRID_STRING_COL_DEF,{type:"date",sortComparator:gridDateComparator,valueFormatter:gridDateFormatter,filterOperators:getGridDateOperators(),renderEditCell:renderEditDateCell,getApplyQuickFilterFn:void 0}),GRID_DATETIME_COL_DEF=_extends({},GRID_STRING_COL_DEF,{type:"dateTime",sortComparator:gridDateComparator,valueFormatter:gridDateTimeFormatter,filterOperators:getGridDateOperators(!0),renderEditCell:renderEditDateCell,getApplyQuickFilterFn:void 0}),parseNumericValue=_e=>_e==null?null:Number(_e),getGridNumericQuickFilterFn=_e=>_e==null||Number.isNaN(_e)||_e===""?null:({value:et})=>parseNumericValue(et)===parseNumericValue(_e),getGridNumericOperators=()=>[{label:"=",value:"=",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>parseNumericValue(et)===_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>parseNumericValue(et)!==_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>et==null?!1:parseNumericValue(et)>_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>et==null?!1:parseNumericValue(et)>=_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>et==null?!1:parseNumericValue(et)<_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:_e=>_e.value==null||Number.isNaN(_e.value)?null:({value:et})=>et==null?!1:parseNumericValue(et)<=_e.value,InputComponent:GridFilterInputValue,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>({value:_e})=>_e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:_e})=>_e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:_e=>!Array.isArray(_e.value)||_e.value.length===0?null:({value:et})=>et!=null&&_e.value.includes(Number(et)),InputComponent:GridFilterInputMultipleValue,InputComponentProps:{type:"number"}}],GRID_NUMERIC_COL_DEF=_extends({},GRID_STRING_COL_DEF,{type:"number",align:"right",headerAlign:"right",sortComparator:gridNumberComparator,valueParser:_e=>_e===""?null:Number(_e),valueFormatter:({value:_e})=>isNumber(_e)?_e.toLocaleString():_e||"",filterOperators:getGridNumericOperators(),getApplyQuickFilterFn:getGridNumericQuickFilterFn}),_excluded$T=["item","applyValue","type","apiRef","focusElementRef"],renderSingleSelectOptions=({valueOptions:_e,valueFormatter:et,field:rt},nt,ot)=>(typeof _e=="function"?["",..._e({field:rt})]:["",..._e||[]]).map(st=>{const at=typeof st=="object",lt=at?st.value:st,ct=at?st.value:st,pt=et&&st!==""?et({value:st,field:rt,api:nt}):st,ut=at?st.label:pt;return jsx(ot,{value:ct,children:ut},lt)});function GridFilterInputSingleSelect(_e){var et,rt,nt,ot,it;const{item:st,applyValue:at,type:lt,apiRef:ct,focusElementRef:pt}=_e,ut=_objectWithoutPropertiesLoose(_e,_excluded$T),[ht,ft]=reactExports.useState((et=st.value)!=null?et:""),gt=useId(),vt=useGridRootProps(),mt=(nt=(((rt=vt.componentsProps)==null?void 0:rt.baseSelect)||{}).native)!=null?nt:!0,Et=st.columnField?ct.current.getColumn(st.columnField):null,bt=reactExports.useMemo(()=>{if(Et!==null)return typeof Et.valueOptions=="function"?Et.valueOptions({field:Et.field}):Et.valueOptions},[Et]),Ct=reactExports.useCallback(Tt=>{let wt=Tt.target.value;wt=getValueFromValueOptions(wt,bt),ft(String(wt)),at(_extends({},st,{value:wt}))},[at,st,bt]);return reactExports.useEffect(()=>{var Tt;let wt;if(bt!==void 0){if(wt=getValueFromValueOptions(st.value,bt),wt!==st.value){at(_extends({},st,{value:wt}));return}}else wt=st.value;wt=(Tt=wt)!=null?Tt:"",ft(String(wt))},[st,bt,at]),jsx(vt.components.BaseTextField,_extends({id:gt,label:ct.current.getLocaleText("filterPanelInputLabel"),placeholder:ct.current.getLocaleText("filterPanelInputPlaceholder"),value:ht,onChange:Ct,variant:"standard",type:lt||"text",InputLabelProps:{shrink:!0},inputRef:pt,select:!0,SelectProps:_extends({native:mt},(ot=vt.componentsProps)==null?void 0:ot.baseSelect)},ut,(it=vt.componentsProps)==null?void 0:it.baseTextField,{children:renderSingleSelectOptions(ct.current.getColumn(st.columnField),ct.current,mt?"option":MenuItem$1)}))}const _excluded$S=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],isOptionEqualToValue=(_e,et)=>getValueFromOption(_e)===getValueFromOption(et),filter=createFilterOptions();function GridFilterInputMultipleSingleSelect(_e){const{item:et,applyValue:rt,apiRef:nt,focusElementRef:ot,color:it,error:st,helperText:at,size:lt,variant:ct="standard"}=_e,pt=_objectWithoutPropertiesLoose(_e,_excluded$S),ut={color:it,error:st,helperText:at,size:lt,variant:ct},ht=useId(),ft=useGridRootProps(),gt=et.columnField?nt.current.getColumn(et.columnField):null,vt=reactExports.useMemo(()=>gt!=null&&gt.valueOptions?typeof gt.valueOptions=="function"?gt.valueOptions({field:gt.field}):gt.valueOptions:[],[gt]),yt=reactExports.useMemo(()=>vt==null?void 0:vt.map(getValueFromOption),[vt]),{valueFormatter:mt,field:Et}=nt.current.getColumn(et.columnField),bt=wt=>typeof wt=="object"?wt.label:mt&&wt!==""?mt({value:wt,field:Et,api:nt.current}):wt,Ct=reactExports.useMemo(()=>Array.isArray(et.value)?vt!==void 0?et.value.map(Rt=>{const It=getValueFromOption(Rt);return(yt==null?void 0:yt.findIndex(Pt=>Pt===It))||0}).filter(Rt=>Rt>=0).map(Rt=>vt[Rt]):et.value:[],[et.value,vt,yt]);reactExports.useEffect(()=>{(!Array.isArray(et.value)||Ct.length!==et.value.length)&&rt(_extends({},et,{value:Ct.map(getValueFromOption)}))},[et,Ct,rt]);const Tt=reactExports.useCallback((wt,Rt)=>{rt(_extends({},et,{value:[...Rt.map(getValueFromOption)]}))},[rt,et]);return jsx(Autocomplete$1,_extends({multiple:!0,options:vt,isOptionEqualToValue,filterOptions:filter,id:ht,value:Ct,onChange:Tt,renderTags:(wt,Rt)=>wt.map((It,St)=>jsx(Chip$1,_extends({variant:"outlined",size:"small",label:bt(It)},Rt({index:St})))),renderInput:wt=>{var Rt;return jsx(ft.components.BaseTextField,_extends({},wt,{label:nt.current.getLocaleText("filterPanelInputLabel"),placeholder:nt.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:_extends({},wt.InputLabelProps,{shrink:!0}),inputRef:ot,type:"singleSelect"},ut,(Rt=ft.componentsProps)==null?void 0:Rt.baseTextField))}},pt))}const parseObjectValue=_e=>_e==null||typeof _e!="object"?_e:_e.value,getGridSingleSelectQuickFilterFn=(_e,et,rt)=>{if(!_e)return null;const{valueOptions:nt,valueFormatter:ot,field:it}=et,st=[parseObjectValue(_e).toString()],at=typeof nt=="function"?nt({field:it}):nt||[];return at&&at.forEach(lt=>{let ct,pt;typeof lt=="object"?(ct=lt.value,pt=lt.label):(ct=lt,ot?pt=ot({value:lt,field:it,api:rt.current}):pt=lt),pt.slice(0,_e.length).toLowerCase()===_e.toLowerCase()&&(st.includes(ct)||st.push(ct.toString()))}),({value:lt})=>lt!=null?st.includes(parseObjectValue(lt).toString()):!1},getGridSingleSelectOperators=()=>[{value:"is",getApplyFilterFn:_e=>_e.value==null||_e.value===""?null:({value:et})=>parseObjectValue(et)===parseObjectValue(_e.value),InputComponent:GridFilterInputSingleSelect},{value:"not",getApplyFilterFn:_e=>_e.value==null||_e.value===""?null:({value:et})=>parseObjectValue(et)!==parseObjectValue(_e.value),InputComponent:GridFilterInputSingleSelect},{value:"isAnyOf",getApplyFilterFn:_e=>{if(!Array.isArray(_e.value)||_e.value.length===0)return null;const et=_e.value.map(parseObjectValue);return({value:rt})=>et.includes(parseObjectValue(rt))},InputComponent:GridFilterInputMultipleSingleSelect}],GRID_SINGLE_SELECT_COL_DEF=_extends({},GRID_STRING_COL_DEF,{type:"singleSelect",renderEditCell:renderEditSingleSelectCell,filterOperators:getGridSingleSelectOperators(),getApplyQuickFilterFn:getGridSingleSelectQuickFilterFn}),DEFAULT_GRID_COL_TYPE_KEY="__default__",getGridDefaultColumnTypes=()=>({string:GRID_STRING_COL_DEF,number:GRID_NUMERIC_COL_DEF,date:GRID_DATE_COL_DEF,dateTime:GRID_DATETIME_COL_DEF,boolean:GRID_BOOLEAN_COL_DEF,singleSelect:GRID_SINGLE_SELECT_COL_DEF,[GRID_ACTIONS_COLUMN_TYPE]:GRID_ACTIONS_COL_DEF,[DEFAULT_GRID_COL_TYPE_KEY]:GRID_STRING_COL_DEF}),COLUMNS_DIMENSION_PROPERTIES=["maxWidth","minWidth","width","flex"],computeColumnTypes=(_e={})=>{const et=_extends({},getGridDefaultColumnTypes());return Object.entries(_e).forEach(([rt,nt])=>{et[rt]?et[rt]=_extends({},et[rt],nt):et[rt]=_extends({},et[nt.extendType||DEFAULT_GRID_COL_TYPE_KEY],nt)}),et};function computeFlexColumnsWidth({initialFreeSpace:_e,totalFlexUnits:et,flexColumns:rt}){const nt={all:{},frozenFields:[],freeze:it=>{const st=nt.all[it];st&&st.frozen!==!0&&(nt.all[it].frozen=!0,nt.frozenFields.push(it))}};function ot(){if(nt.frozenFields.length===rt.length)return;const it={min:{},max:{}};let st=_e,at=et,lt=0;nt.frozenFields.forEach(ct=>{st-=nt.all[ct].computedWidth,at-=nt.all[ct].flex});for(let ct=0;ct<rt.length;ct+=1){const pt=rt[ct];if(nt.all[pt.field]&&nt.all[pt.field].frozen===!0)continue;let ht=st/at*pt.flex;ht<pt.minWidth?(lt+=pt.minWidth-ht,ht=pt.minWidth,it.min[pt.field]=!0):ht>pt.maxWidth&&(lt+=pt.maxWidth-ht,ht=pt.maxWidth,it.max[pt.field]=!0),nt.all[pt.field]={frozen:!1,computedWidth:ht,flex:pt.flex}}lt<0?Object.keys(it.max).forEach(ct=>{nt.freeze(ct)}):lt>0?Object.keys(it.min).forEach(ct=>{nt.freeze(ct)}):rt.forEach(({field:ct})=>{nt.freeze(ct)}),ot()}return ot(),nt.all}const hydrateColumnsWidth=(_e,et)=>{const rt={};let nt=0,ot=0;const it=[];_e.all.forEach(at=>{const lt=_extends({},_e.lookup[at]);if(_e.columnVisibilityModel[at]===!1)lt.computedWidth=0;else{let ct;lt.flex&&lt.flex>0?(nt+=lt.flex,ct=0,it.push(lt)):ct=clamp(lt.width,lt.minWidth,lt.maxWidth),ot+=ct,lt.computedWidth=ct}rt[at]=lt});const st=Math.max(et-ot,0);if(nt>0&&et>0){const at=computeFlexColumnsWidth({initialFreeSpace:st,totalFlexUnits:nt,flexColumns:it});Object.keys(at).forEach(lt=>{rt[lt].computedWidth=at[lt].computedWidth})}return _extends({},_e,{lookup:rt})},applyInitialState=(_e,et)=>{if(!et)return _e;const{orderedFields:rt=[],dimensions:nt={}}=et,ot=Object.keys(nt);if(ot.length===0&&rt.length===0)return _e;const it={},st=[];for(let pt=0;pt<rt.length;pt+=1){const ut=rt[pt];_e.lookup[ut]&&(it[ut]=!0,st.push(ut))}const at=st.length===0?_e.all:[...st,..._e.all.filter(pt=>!it[pt])],lt=_extends({},_e.lookup);for(let pt=0;pt<ot.length;pt+=1){const ut=ot[pt],ht=_extends({},lt[ut],{hasBeenResized:!0});Object.entries(nt[ut]).forEach(([ft,gt])=>{ht[ft]=gt===-1?1/0:gt}),lt[ut]=ht}return{all:at,lookup:lt}},getGridColDef=(_e,et)=>!et||!_e[et]?_e[DEFAULT_GRID_COL_TYPE_KEY]:_e[et],createColumnsState=({apiRef:_e,columnsToUpsert:et,initialState:rt,columnTypes:nt,currentColumnVisibilityModel:ot=gridColumnVisibilityModelSelector(_e),shouldRegenColumnVisibilityModelFromColumns:it,keepOnlyColumnsToUpsert:st=!1})=>{var at,lt,ct,pt;const ut=!_e.current.state.columns;let ht;if(ut)ht={all:[],lookup:{}};else{const Ct=gridColumnsSelector(_e.current.state);ht={all:st?[]:[...Ct.all],lookup:_extends({},Ct.lookup)}}let ft={};st&&!ut&&(ft=Object.keys(ht.lookup).reduce((Ct,Tt)=>_extends({},Ct,{[Tt]:!1}),{}));const gt={};et.forEach(Ct=>{const{field:Tt}=Ct;gt[Tt]=!0,ft[Tt]=!0;let wt=ht.lookup[Tt];wt==null?(wt=_extends({},getGridColDef(nt,Ct.type),{field:Tt,hasBeenResized:!1}),ht.all.push(Tt)):st&&ht.all.push(Tt);let Rt=wt.hasBeenResized;COLUMNS_DIMENSION_PROPERTIES.forEach(It=>{Ct[It]!==void 0&&(Rt=!0,Ct[It]===-1&&(Ct[It]=1/0))}),ht.lookup[Tt]=_extends({},wt,{hide:Ct.hide==null?!1:Ct.hide},Ct,{hasBeenResized:Rt})}),st&&!ut&&Object.keys(ht.lookup).forEach(Ct=>{ft[Ct]||delete ht.lookup[Ct]});const vt=_extends({},ht.lookup),yt=_e.current.unstable_applyPipeProcessors("hydrateColumns",ht);let mt={};if(it){let Ct=!1;const Tt=_extends({},ot);ut?yt.all.forEach(wt=>{Tt[wt]=!ht.lookup[wt].hide}):st&&Object.keys(Tt).forEach(wt=>{yt.lookup[wt]||(delete Tt[wt],Ct=!0)}),yt.all.forEach(wt=>{if(!gt[wt]&&vt[wt]===yt.lookup[wt])return;let Rt=ot[wt];Rt===void 0&&(ut?Rt=!0:Rt=!!gridColumnsSelector(_e.current.state).lookup[wt]);const It=!yt.lookup[wt].hide;It!==Rt&&(Ct=!0,Tt[wt]=It)}),Ct||ut?mt=Tt:mt=ot}else mt=ot;const Et=applyInitialState(yt,rt),bt=_extends({},Et,{columnVisibilityModel:mt});return hydrateColumnsWidth(bt,(at=(lt=(ct=_e.current).getRootDimensions)==null||(pt=lt.call(ct))==null?void 0:pt.viewportInnerSize.width)!=null?at:0)},mergeColumnsState=_e=>et=>_extends({},et,{columns:_e});function getFirstNonSpannedColumnToRender({firstColumnToRender:_e,apiRef:et,firstRowToRender:rt,lastRowToRender:nt,visibleRows:ot}){let it=_e;for(let st=rt;st<nt;st+=1)if(ot[st]){const lt=ot[st].id,ct=et.current.unstable_getCellColSpanInfo(lt,_e);ct&&ct.spannedByColSpan&&(it=ct.leftVisibleCellIndex)}return it}function getFirstColumnIndexToRender({firstColumnIndex:_e,minColumnIndex:et,columnBuffer:rt,firstRowToRender:nt,lastRowToRender:ot,apiRef:it,visibleRows:st}){const at=Math.max(_e-rt,et);return getFirstNonSpannedColumnToRender({firstColumnToRender:at,apiRef:it,firstRowToRender:nt,lastRowToRender:ot,visibleRows:st})}const HideGridColMenuItem=_e=>{const{column:et,onClick:rt}=_e,nt=useGridApiContext(),ot=useGridRootProps(),it=reactExports.useRef(),lt=gridVisibleColumnDefinitionsSelector(nt).filter(pt=>pt.disableColumnMenu!==!0).length===1,ct=reactExports.useCallback(pt=>{lt||(rt(pt),it.current=setTimeout(()=>{nt.current.setColumnVisibility(et==null?void 0:et.field,!1)},100))},[nt,et==null?void 0:et.field,rt,lt]);return reactExports.useEffect(()=>()=>clearTimeout(it.current),[]),ot.disableColumnSelector||et.hideable===!1?null:jsx(MenuItem$1,{onClick:ct,disabled:lt,children:nt.current.getLocaleText("columnMenuHideColumn")})};function SortGridMenuItems(_e){var et;const{column:rt,onClick:nt}=_e,ot=useGridApiContext(),it=useGridSelector(ot,gridSortModelSelector),st=useGridRootProps(),at=(et=rt.sortingOrder)!=null?et:st.sortingOrder,lt=reactExports.useMemo(()=>{if(!rt)return null;const pt=it.find(ut=>ut.field===rt.field);return pt==null?void 0:pt.sort},[rt,it]),ct=reactExports.useCallback(pt=>{nt(pt);const ut=pt.currentTarget.getAttribute("data-value")||null;ot.current.sortColumn(rt,ut)},[ot,rt,nt]);return!rt||!rt.sortable?null:jsxs(reactExports.Fragment,{children:[at.includes(null)?jsx(MenuItem$1,{onClick:ct,disabled:lt==null,children:ot.current.getLocaleText("columnMenuUnsort")}):null,at.includes("asc")?jsx(MenuItem$1,{onClick:ct,"data-value":"asc",disabled:lt==="asc",children:ot.current.getLocaleText("columnMenuSortAsc")}):null,at.includes("desc")?jsx(MenuItem$1,{onClick:ct,"data-value":"desc",disabled:lt==="desc",children:ot.current.getLocaleText("columnMenuSortDesc")}):null]})}const GridColumnMenu=reactExports.forwardRef(function _e(et,rt){const{hideMenu:nt,currentColumn:ot}=et,it=useGridApiContext(),st=[jsx(SortGridMenuItems,{onClick:nt,column:ot}),jsx(GridFilterMenuItem,{onClick:nt,column:ot}),jsx(HideGridColMenuItem,{onClick:nt,column:ot}),jsx(GridColumnsMenuItem,{onClick:nt,column:ot})],at=it.current.unstable_applyPipeProcessors("columnMenu",st,ot);return jsx(GridColumnMenuContainer,_extends({ref:rt},et,{children:at.map((lt,ct)=>reactExports.cloneElement(lt,{key:ct,onClick:nt,column:ot}))}))}),_excluded$R=["className"],useUtilityClasses$D=_e=>{const{classes:et}=_e;return composeClasses({root:["panelContent"]},getDataGridUtilityClass,et)},GridPanelContentRoot=styled$1("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(_e,et)=>et.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function GridPanelContent(_e){const{className:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$R),ot={classes:useGridRootProps().classes},it=useUtilityClasses$D(ot);return jsx(GridPanelContentRoot,_extends({className:clsx(et,it.root)},rt))}const _excluded$Q=["className"],useUtilityClasses$C=_e=>{const{classes:et}=_e;return composeClasses({root:["panelFooter"]},getDataGridUtilityClass,et)},GridPanelFooterRoot=styled$1("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(_e,et)=>et.panelFooter})(({theme:_e})=>({padding:_e.spacing(.5),display:"flex",justifyContent:"space-between"}));function GridPanelFooter(_e){const{className:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$Q),ot={classes:useGridRootProps().classes},it=useUtilityClasses$C(ot);return jsx(GridPanelFooterRoot,_extends({className:clsx(et,it.root)},rt))}const _excluded$P=["className"],useUtilityClasses$B=_e=>{const{classes:et}=_e;return composeClasses({root:["panelHeader"]},getDataGridUtilityClass,et)},GridPanelHeaderRoot=styled$1("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(_e,et)=>et.panelHeader})(({theme:_e})=>({padding:_e.spacing(1)}));function GridPanelHeader(_e){const{className:et}=_e,rt=_objectWithoutPropertiesLoose(_e,_excluded$P),ot={classes:useGridRootProps().classes},it=useUtilityClasses$B(ot);return jsx(GridPanelHeaderRoot,_extends({className:clsx(et,it.root)},rt))}const _excluded$O=["className","slotProps"],useUtilityClasses$A=_e=>{const{classes:et}=_e;return composeClasses({root:["panelWrapper"]},getDataGridUtilityClass,et)},GridPanelWrapperRoot=styled$1("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(_e,et)=>et.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),isEnabled=()=>!0,GridPanelWrapper=reactExports.forwardRef(function _e(et,rt){const{className:nt,slotProps:ot={}}=et,it=_objectWithoutPropertiesLoose(et,_excluded$O),at={classes:useGridRootProps().classes},lt=useUtilityClasses$A(at);return jsx(FocusTrap,_extends({open:!0,disableEnforceFocus:!0,isEnabled},ot.TrapFocus,{children:jsx(GridPanelWrapperRoot,_extends({ref:rt,tabIndex:-1,className:clsx(nt,lt.root)},it))}))}),GRID_EXPERIMENTAL_ENABLED=!1,_excluded$N=["sort","searchPredicate","autoFocusSearchField"],useUtilityClasses$z=_e=>{const{classes:et}=_e;return composeClasses({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},getDataGridUtilityClass,et)},GridColumnsPanelRoot=styled$1("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(_e,et)=>et.columnsPanel})(()=>({padding:"8px 0px 8px 8px"})),GridColumnsPanelRowRoot=styled$1("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(_e,et)=>et.columnsPanelRow})(({theme:_e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${switchClasses$1.root}`]:{marginRight:_e.spacing(.5)}})),GridIconButtonRoot=styled$1(IconButton$1)({justifyContent:"flex-end"}),collator$1=new Intl.Collator,defaultSearchPredicate=(_e,et)=>(_e.headerName||_e.field).toLowerCase().indexOf(et)>-1;function GridColumnsPanel(_e){var et,rt,nt;const ot=useGridApiContext(),it=reactExports.useRef(null),st=useGridSelector(ot,gridColumnDefinitionsSelector),at=useGridSelector(ot,gridColumnVisibilityModelSelector),lt=useGridRootProps(),[ct,pt]=reactExports.useState(""),ut={classes:lt.classes},ht=useUtilityClasses$z(ut),{sort:ft,searchPredicate:gt=defaultSearchPredicate,autoFocusSearchField:vt=!0}=_e,yt=_objectWithoutPropertiesLoose(_e,_excluded$N),mt=reactExports.useMemo(()=>{switch(ft){case"asc":return[...st].sort((St,Pt)=>collator$1.compare(St.headerName||St.field,Pt.headerName||Pt.field));case"desc":return[...st].sort((St,Pt)=>-collator$1.compare(St.headerName||St.field,Pt.headerName||Pt.field));default:return st}},[st,ft]),Et=St=>{const{name:Pt}=St.target;ot.current.setColumnVisibility(Pt,at[Pt]===!1)},bt=reactExports.useCallback(St=>{if(ot.current.unstable_caches.columns.isUsingColumnVisibilityModel){const Pt=gridColumnVisibilityModelSelector(ot),Ot=_extends({},Pt);return st.forEach(Ut=>{Ut.hideable&&(St?delete Ot[Ut.field]:Ot[Ut.field]=!1)}),ot.current.setColumnVisibilityModel(Ot)}return ot.current.updateColumns(st.map(Pt=>Pt.hideable!==!1?{field:Pt.field,hide:!St}:Pt))},[ot,st]),Ct=reactExports.useCallback(St=>{pt(St.target.value)},[]),Tt=reactExports.useMemo(()=>{if(!ct)return mt;const St=ct.toLowerCase();return mt.filter(Pt=>gt(Pt,St))},[mt,ct,gt]),wt=reactExports.useRef(null);reactExports.useEffect(()=>{vt?it.current.focus():wt.current&&typeof wt.current.focus=="function"&&wt.current.focus()},[vt]);let Rt=!1;const It=St=>Rt===!1&&St.hideable!==!1?(Rt=!0,!0):!1;return jsxs(GridPanelWrapper,_extends({},yt,{children:[jsx(GridPanelHeader,{children:jsx(lt.components.BaseTextField,_extends({label:ot.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:ot.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:it,value:ct,onChange:Ct,variant:"standard",fullWidth:!0},(et=lt.componentsProps)==null?void 0:et.baseTextField))}),jsx(GridPanelContent,{children:jsx(GridColumnsPanelRoot,{className:ht.root,children:Tt.map(St=>{var Pt;return jsxs(GridColumnsPanelRowRoot,{className:ht.columnsPanelRow,children:[jsx(FormControlLabel$1,{control:jsx(lt.components.BaseSwitch,_extends({disabled:St.hideable===!1,checked:at[St.field]!==!1,onClick:Et,name:St.field,size:"small",inputRef:It(St)?wt:void 0},(Pt=lt.componentsProps)==null?void 0:Pt.baseSwitch)),label:St.headerName||St.field}),!lt.disableColumnReorder&&GRID_EXPERIMENTAL_ENABLED&&jsx(GridIconButtonRoot,{draggable:!0,"aria-label":ot.current.getLocaleText("columnsPanelDragIconLabel"),title:ot.current.getLocaleText("columnsPanelDragIconLabel"),size:"small",disabled:!0,children:jsx(GridDragIcon,{})})]},St.field)})})}),jsxs(GridPanelFooter,{children:[jsx(lt.components.BaseButton,_extends({onClick:()=>bt(!1)},(rt=lt.componentsProps)==null?void 0:rt.baseButton,{children:ot.current.getLocaleText("columnsPanelHideAllButton")})),jsx(lt.components.BaseButton,_extends({onClick:()=>bt(!0)},(nt=lt.componentsProps)==null?void 0:nt.baseButton,{children:ot.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))}const _excluded$M=["children","className","classes"],gridPanelClasses=generateUtilityClasses("MuiDataGrid",["panel","paper"]),GridPanelRoot=styled$1(Popper$1,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(_e,et)=>et.panel})(({theme:_e})=>({zIndex:_e.zIndex.modal})),GridPaperRoot=styled$1(Paper$1,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(_e,et)=>et.paper})(({theme:_e})=>({backgroundColor:_e.palette.background.paper,minWidth:300,maxHeight:450,display:"flex"})),GridPanel=reactExports.forwardRef((_e,et)=>{var rt;const{children:nt,className:ot}=_e,it=_objectWithoutPropertiesLoose(_e,_excluded$M),st=useGridApiContext(),at=gridPanelClasses,[lt,ct]=reactExports.useState(!1),pt=reactExports.useCallback(()=>{st.current.hidePreferences()},[st]),ut=reactExports.useCallback(gt=>{isEscapeKey(gt.key)&&st.current.hidePreferences()},[st]),ht=reactExports.useMemo(()=>[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{ct(!0)},effect:()=>()=>{ct(!1)}}],[]),ft=(rt=st.current.columnHeadersContainerElementRef)==null?void 0:rt.current;return ft?jsx(GridPanelRoot,_extends({ref:et,placement:"bottom-start",className:clsx(ot,at.panel),anchorEl:ft,modifiers:ht},it,{children:jsx(ClickAwayListener,{mouseEvent:"onMouseUp",onClickAway:pt,children:jsx(GridPaperRoot,{className:at.paper,elevation:8,onKeyDown:ut,children:lt&&nt})})})):null}),GridPreferencesPanel=reactExports.forwardRef(function _e(et,rt){var nt,ot,it;const st=useGridApiContext(),at=useGridSelector(st,gridColumnDefinitionsSelector),lt=useGridRootProps(),ct=useGridSelector(st,gridPreferencePanelStateSelector),pt=st.current.unstable_applyPipeProcessors("preferencePanel",null,(nt=ct.openedPanelValue)!=null?nt:GridPreferencePanelsValue.filters);return jsx(lt.components.Panel,_extends({ref:rt,as:lt.components.BasePopper,open:at.length>0&&ct.open},(ot=lt.componentsProps)==null?void 0:ot.panel,et,(it=lt.componentsProps)==null?void 0:it.basePopper,{children:pt}))}),_excluded$L=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","linkOperators","columnsSort","deleteIconProps","linkOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],_excluded2$4=["InputComponentProps"],useUtilityClasses$y=_e=>{const{classes:et}=_e;return composeClasses({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],linkOperatorInput:["filterFormLinkOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},getDataGridUtilityClass,et)},GridFilterFormRoot=styled$1("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(_e,et)=>et.filterForm})(({theme:_e})=>({display:"flex",padding:_e.spacing(1)})),FilterFormDeleteIcon=styled$1(FormControl$1,{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(_e,et)=>et.filterFormDeleteIcon})(({theme:_e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:_e.spacing(.5),marginBottom:_e.spacing(.2)})),FilterFormLinkOperatorInput=styled$1(FormControl$1,{name:"MuiDataGrid",slot:"FilterFormLinkOperatorInput",overridesResolver:(_e,et)=>et.filterFormLinkOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),FilterFormColumnInput=styled$1(FormControl$1,{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(_e,et)=>et.filterFormColumnInput})({width:150}),FilterFormOperatorInput=styled$1(FormControl$1,{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(_e,et)=>et.filterFormOperatorInput})({width:120}),FilterFormValueInput=styled$1(FormControl$1,{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(_e,et)=>et.filterFormValueInput})({width:190}),getLinkOperatorLocaleKey=_e=>{switch(_e){case GridLinkOperator.And:return"filterPanelOperatorAnd";case GridLinkOperator.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `linkOperator` property in the `GridFilterPanel`.")}},getColumnLabel=_e=>_e.headerName||_e.field,collator=new Intl.Collator,GridFilterForm=reactExports.forwardRef(function _e(et,rt){var nt,ot,it,st,at,lt,ct;const{item:pt,hasMultipleFilters:ut,deleteFilter:ht,applyFilterChanges:ft,multiFilterOperator:gt,showMultiFilterOperators:vt,disableMultiFilterOperator:yt,applyMultiFilterOperatorChanges:mt,focusElementRef:Et,linkOperators:bt=[GridLinkOperator.And,GridLinkOperator.Or],columnsSort:Ct,deleteIconProps:Tt={},linkOperatorInputProps:wt={},operatorInputProps:Rt={},columnInputProps:It={},valueInputProps:St={}}=et,Pt=_objectWithoutPropertiesLoose(et,_excluded$L),Ot=useGridApiContext(),Ut=useGridSelector(Ot,gridFilterableColumnDefinitionsSelector),Bt=useId(),xt=useId(),At=useId(),Mt=useId(),Nt=useGridRootProps(),$t={classes:Nt.classes},Ft=useUtilityClasses$y($t),jt=reactExports.useRef(null),zt=reactExports.useRef(null),Yt=ut&&bt.length>0,Kt=((nt=Nt.componentsProps)==null?void 0:nt.baseFormControl)||{},ir=(it=(((ot=Nt.componentsProps)==null?void 0:ot.baseSelect)||{}).native)!=null?it:!0,rr=ir?"option":MenuItem$1,{InputComponentProps:lr}=St,nr=_objectWithoutPropertiesLoose(St,_excluded2$4),hr=reactExports.useMemo(()=>{switch(Ct){case"asc":return Ut.sort((Er,Sr)=>collator.compare(getColumnLabel(Er),getColumnLabel(Sr)));case"desc":return Ut.sort((Er,Sr)=>-collator.compare(getColumnLabel(Er),getColumnLabel(Sr)));default:return Ut}},[Ut,Ct]),vr=pt.columnField?Ot.current.getColumn(pt.columnField):null,yr=reactExports.useMemo(()=>{var Er;return!pt.operatorValue||!vr?null:(Er=vr.filterOperators)==null?void 0:Er.find(Sr=>Sr.value===pt.operatorValue)},[pt,vr]),Cr=reactExports.useCallback(Er=>{const Sr=Er.target.value,Ht=Ot.current.getColumn(Sr);if(Ht.field===vr.field)return;const qt=Ht.filterOperators.find(cr=>cr.value===pt.operatorValue)||Ht.filterOperators[0],fr=!qt.InputComponent||qt.InputComponent!==(yr==null?void 0:yr.InputComponent);ft(_extends({},pt,{columnField:Sr,operatorValue:qt.value,value:fr?void 0:pt.value}))},[Ot,ft,pt,vr,yr]),or=reactExports.useCallback(Er=>{const Sr=Er.target.value,Ht=vr==null?void 0:vr.filterOperators.find(fr=>fr.value===Sr),qt=!(Ht!=null&&Ht.InputComponent)||(Ht==null?void 0:Ht.InputComponent)!==(yr==null?void 0:yr.InputComponent);ft(_extends({},pt,{operatorValue:Sr,value:qt?void 0:pt.value}))},[ft,pt,vr,yr]),ur=reactExports.useCallback(Er=>{const Sr=Er.target.value===GridLinkOperator.And.toString()?GridLinkOperator.And:GridLinkOperator.Or;mt(Sr)},[mt]),pr=()=>{Nt.disableMultipleColumnsFiltering?pt.value===void 0?ht(pt):ft(_extends({},pt,{value:void 0})):ht(pt)};return reactExports.useImperativeHandle(Et,()=>({focus:()=>{if(yr!=null&&yr.InputComponent){var Er;jt==null||(Er=jt.current)==null||Er.focus()}else zt.current.focus()}}),[yr]),jsxs(GridFilterFormRoot,_extends({ref:rt,className:Ft.root},Pt,{children:[jsx(FilterFormDeleteIcon,_extends({variant:"standard",as:Nt.components.BaseFormControl},Kt,Tt,{className:clsx(Ft.deleteIcon,Kt.className,Tt.className),children:jsx(IconButton$1,{"aria-label":Ot.current.getLocaleText("filterPanelDeleteIconLabel"),title:Ot.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:pr,size:"small",children:jsx(Nt.components.FilterPanelDeleteIcon,{fontSize:"small"})})})),jsx(FilterFormLinkOperatorInput,_extends({variant:"standard",as:Nt.components.BaseFormControl},Kt,wt,{sx:_extends({display:Yt?"flex":"none",visibility:vt?"visible":"hidden"},Kt.sx||{},wt.sx||{}),className:clsx(Ft.linkOperatorInput,Kt.className,wt.className),children:jsx(Nt.components.BaseSelect,_extends({inputProps:{"aria-label":Ot.current.getLocaleText("filterPanelLinkOperator")},value:gt,onChange:ur,disabled:!!yt||bt.length===1,native:ir},(st=Nt.componentsProps)==null?void 0:st.baseSelect,{children:bt.map(Er=>jsx(rr,{value:Er.toString(),children:Ot.current.getLocaleText(getLinkOperatorLocaleKey(Er))},Er.toString()))}))})),jsxs(FilterFormColumnInput,_extends({variant:"standard",as:Nt.components.BaseFormControl},Kt,It,{className:clsx(Ft.columnInput,Kt.className,It.className),children:[jsx(InputLabel$1,{htmlFor:Bt,id:xt,children:Ot.current.getLocaleText("filterPanelColumns")}),jsx(Nt.components.BaseSelect,_extends({labelId:xt,id:Bt,label:Ot.current.getLocaleText("filterPanelColumns"),value:pt.columnField||"",onChange:Cr,native:ir},(at=Nt.componentsProps)==null?void 0:at.baseSelect,{children:hr.map(Er=>jsx(rr,{value:Er.field,children:getColumnLabel(Er)},Er.field))}))]})),jsxs(FilterFormOperatorInput,_extends({variant:"standard",as:Nt.components.BaseFormControl},Kt,Rt,{className:clsx(Ft.operatorInput,Kt.className,Rt.className),children:[jsx(InputLabel$1,{htmlFor:At,id:Mt,children:Ot.current.getLocaleText("filterPanelOperators")}),jsx(Nt.components.BaseSelect,_extends({labelId:Mt,label:Ot.current.getLocaleText("filterPanelOperators"),id:At,value:pt.operatorValue,onChange:or,native:ir,inputRef:zt},(lt=Nt.componentsProps)==null?void 0:lt.baseSelect,{children:vr==null||(ct=vr.filterOperators)==null?void 0:ct.map(Er=>jsx(rr,{value:Er.value,children:Er.label||Ot.current.getLocaleText(`filterOperator${capitalize(Er.value)}`)},Er.value))}))]})),jsx(FilterFormValueInput,_extends({variant:"standard",as:Nt.components.BaseFormControl},Kt,nr,{className:clsx(Ft.valueInput,Kt.className,nr.className),children:yr!=null&&yr.InputComponent?jsx(yr.InputComponent,_extends({apiRef:Ot,item:pt,applyValue:ft,focusElementRef:jt},yr.InputComponentProps,lr)):null}))]}))}),_excluded$K=["linkOperators","columnsSort","filterFormProps","children"],GridFilterPanel=reactExports.forwardRef(function _e(et,rt){var nt;const ot=useGridApiContext(),it=useGridRootProps(),st=useGridSelector(ot,gridFilterModelSelector),at=useGridSelector(ot,gridFilterableColumnDefinitionsSelector),lt=reactExports.useRef(null),{linkOperators:ct=[GridLinkOperator.And,GridLinkOperator.Or],columnsSort:pt,filterFormProps:ut}=et,ht=_objectWithoutPropertiesLoose(et,_excluded$K),ft=reactExports.useCallback(Ct=>{ot.current.upsertFilterItem(Ct)},[ot]),gt=reactExports.useCallback(Ct=>{ot.current.setFilterLinkOperator(Ct)},[ot]),vt=reactExports.useCallback(()=>{const Ct=at.find(Tt=>{var wt;return(wt=Tt.filterOperators)==null?void 0:wt.length});return Ct?{columnField:Ct.field,operatorValue:Ct.filterOperators[0].value,id:Math.round(Math.random()*1e5)}:null},[at]),yt=reactExports.useMemo(()=>{if(st.items.length)return st.items;const Ct=vt();return Ct?[Ct]:[]},[st.items,vt]),mt=yt.length>1,Et=()=>{const Ct=vt();Ct&&ot.current.upsertFilterItems([...yt,Ct])},bt=reactExports.useCallback(Ct=>{const Tt=yt.length===1;ot.current.deleteFilterItem(Ct),Tt&&ot.current.hideFilterPanel()},[ot,yt.length]);return reactExports.useEffect(()=>{ct.length>0&&st.linkOperator&&!ct.includes(st.linkOperator)&&gt(ct[0])},[ct,gt,st.linkOperator]),reactExports.useEffect(()=>{yt.length>0&&lt.current.focus()},[yt.length]),jsxs(GridPanelWrapper,_extends({ref:rt},ht,{children:[jsx(GridPanelContent,{children:yt.map((Ct,Tt)=>jsx(GridFilterForm,_extends({item:Ct,applyFilterChanges:ft,deleteFilter:bt,hasMultipleFilters:mt,showMultiFilterOperators:Tt>0,multiFilterOperator:st.linkOperator,disableMultiFilterOperator:Tt!==1,applyMultiFilterOperatorChanges:gt,focusElementRef:Tt===yt.length-1?lt:null,linkOperators:ct,columnsSort:pt},ut),Ct.id==null?Tt:Ct.id))}),!it.disableMultipleColumnsFiltering&&jsx(GridPanelFooter,{children:jsx(it.components.BaseButton,_extends({onClick:Et,startIcon:jsx(GridAddIcon,{})},(nt=it.componentsProps)==null?void 0:nt.baseButton,{children:ot.current.getLocaleText("filterPanelAddFilter")}))})]}))}),_excluded$J=["onClick"],GridToolbarColumnsButton=reactExports.forwardRef(function _e(et,rt){var nt;const{onClick:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$J),st=useGridApiContext(),at=useGridRootProps(),{open:lt,openedPanelValue:ct}=useGridSelector(st,gridPreferencePanelStateSelector),pt=ut=>{lt&&ct===GridPreferencePanelsValue.columns?st.current.hidePreferences():st.current.showPreferences(GridPreferencePanelsValue.columns),ot==null||ot(ut)};return at.disableColumnSelector?null:jsx(at.components.BaseButton,_extends({ref:rt,size:"small","aria-label":st.current.getLocaleText("toolbarColumnsLabel"),startIcon:jsx(at.components.ColumnSelectorIcon,{})},it,{onClick:pt},(nt=at.componentsProps)==null?void 0:nt.baseButton,{children:st.current.getLocaleText("toolbarColumns")}))}),_excluded$I=["onClick"],GridToolbarDensitySelector=reactExports.forwardRef(function _e(et,rt){var nt;const{onClick:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$I),st=useGridApiContext(),at=useGridRootProps(),lt=useGridSelector(st,gridDensityValueSelector),ct=useId(),pt=useId(),[ut,ht]=reactExports.useState(!1),ft=reactExports.useRef(null),gt=useForkRef(rt,ft),vt=[{icon:jsx(at.components.DensityCompactIcon,{}),label:st.current.getLocaleText("toolbarDensityCompact"),value:GridDensityTypes.Compact},{icon:jsx(at.components.DensityStandardIcon,{}),label:st.current.getLocaleText("toolbarDensityStandard"),value:GridDensityTypes.Standard},{icon:jsx(at.components.DensityComfortableIcon,{}),label:st.current.getLocaleText("toolbarDensityComfortable"),value:GridDensityTypes.Comfortable}],yt=reactExports.useMemo(()=>{switch(lt){case GridDensityTypes.Compact:return jsx(at.components.DensityCompactIcon,{});case GridDensityTypes.Comfortable:return jsx(at.components.DensityComfortableIcon,{});default:return jsx(at.components.DensityStandardIcon,{})}},[lt,at]),mt=wt=>{ht(Rt=>!Rt),ot==null||ot(wt)},Et=wt=>{var Rt;ft.current===wt.target||(Rt=ft.current)!=null&&Rt.contains(wt.target)||ht(!1)},bt=wt=>{st.current.setDensity(wt),ht(!1)},Ct=wt=>{isTabKey(wt.key)&&wt.preventDefault(),isHideMenuKey(wt.key)&&ht(!1)};if(at.disableDensitySelector)return null;const Tt=vt.map((wt,Rt)=>jsxs(MenuItem$1,{onClick:()=>bt(wt.value),selected:wt.value===lt,children:[jsx(ListItemIcon$1,{children:wt.icon}),wt.label]},Rt));return jsxs(reactExports.Fragment,{children:[jsx(at.components.BaseButton,_extends({ref:gt,size:"small",startIcon:yt,"aria-label":st.current.getLocaleText("toolbarDensityLabel"),"aria-expanded":ut?"true":void 0,"aria-haspopup":"menu","aria-controls":pt,id:ct},it,{onClick:mt},(nt=at.componentsProps)==null?void 0:nt.baseButton,{children:st.current.getLocaleText("toolbarDensity")})),jsx(GridMenu,{open:ut,target:ft.current,onClickAway:Et,position:"bottom-start",children:jsx(MenuList$1,{id:pt,className:gridClasses.menuList,"aria-labelledby":ct,onKeyDown:Ct,autoFocusItem:ut,children:Tt})})]})}),_excluded$H=["componentsProps"],useUtilityClasses$x=_e=>{const{classes:et}=_e;return composeClasses({root:["toolbarFilterList"]},getDataGridUtilityClass,et)},GridToolbarFilterListRoot=styled$1("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(_e,et)=>et.toolbarFilterList})(({theme:_e})=>({margin:_e.spacing(1,1,.5),padding:_e.spacing(0,1)})),GridToolbarFilterButton=reactExports.forwardRef(function _e(et,rt){var nt,ot;const{componentsProps:it={}}=et,st=_objectWithoutPropertiesLoose(et,_excluded$H),at=it.button||{},lt=useGridApiContext(),ct=useGridRootProps(),pt=useGridSelector(lt,gridFilterActiveItemsSelector),ut=useGridSelector(lt,gridColumnLookupSelector),ht=useGridSelector(lt,gridPreferencePanelStateSelector),ft={classes:ct.classes},gt=useUtilityClasses$x(ft),vt=reactExports.useMemo(()=>{if(ht.open)return lt.current.getLocaleText("toolbarFiltersTooltipHide");if(pt.length===0)return lt.current.getLocaleText("toolbarFiltersTooltipShow");const mt=bt=>ut[bt.columnField].filterOperators.find(Ct=>Ct.value===bt.operatorValue).label||lt.current.getLocaleText(`filterOperator${capitalize(bt.operatorValue)}`).toString(),Et=bt=>{const{getValueAsString:Ct}=ut[bt.columnField].filterOperators.find(Tt=>Tt.value===bt.operatorValue);return Ct?Ct(bt.value):bt.value};return jsxs("div",{children:[lt.current.getLocaleText("toolbarFiltersTooltipActive")(pt.length),jsx(GridToolbarFilterListRoot,{className:gt.root,children:pt.map((bt,Ct)=>_extends({},ut[bt.columnField]&&jsx("li",{children:`${ut[bt.columnField].headerName||bt.columnField}
                  ${mt(bt)}
                  ${bt.value?Et(bt):""}`},Ct)))})]})},[lt,ht.open,pt,ut,gt]),yt=mt=>{var Et;const{open:bt,openedPanelValue:Ct}=ht;bt&&Ct===GridPreferencePanelsValue.filters?lt.current.hideFilterPanel():lt.current.showFilterPanel(),(Et=at.onClick)==null||Et.call(at,mt)};return ct.disableColumnFilter?null:jsx(ct.components.BaseTooltip,_extends({title:vt,enterDelay:1e3},st,(nt=ct.componentsProps)==null?void 0:nt.baseTooltip,{children:jsx(ct.components.BaseButton,_extends({ref:rt,size:"small","aria-label":lt.current.getLocaleText("toolbarFiltersLabel"),startIcon:jsx(Badge$1,{badgeContent:pt.length,color:"primary",children:jsx(ct.components.OpenFilterButtonIcon,{})})},at,{onClick:yt},(ot=ct.componentsProps)==null?void 0:ot.baseButton,{children:lt.current.getLocaleText("toolbarFilters")}))}))}),_excluded$G=["children","onClick"],GridToolbarExportContainer=reactExports.forwardRef(function _e(et,rt){var nt;const{children:ot,onClick:it}=et,st=_objectWithoutPropertiesLoose(et,_excluded$G),at=useGridApiContext(),lt=useGridRootProps(),ct=useId(),pt=useId(),[ut,ht]=reactExports.useState(!1),ft=reactExports.useRef(null),gt=useForkRef(rt,ft),vt=bt=>{ht(Ct=>!Ct),it==null||it(bt)},yt=()=>ht(!1),mt=bt=>{isTabKey(bt.key)&&bt.preventDefault(),isHideMenuKey(bt.key)&&yt()},Et=bt=>{var Ct;ft.current===bt.target||(Ct=ft.current)!=null&&Ct.contains(bt.target)||ht(!1)};return ot==null?null:jsxs(reactExports.Fragment,{children:[jsx(lt.components.BaseButton,_extends({ref:gt,size:"small",startIcon:jsx(lt.components.ExportIcon,{}),"aria-expanded":ut?"true":void 0,"aria-label":at.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-labelledby":pt,id:ct},st,{onClick:vt},(nt=lt.componentsProps)==null?void 0:nt.baseButton,{children:at.current.getLocaleText("toolbarExport")})),jsx(GridMenu,{open:ut,target:ft.current,onClickAway:Et,position:"bottom-start",children:jsx(MenuList$1,{id:pt,className:gridClasses.menuList,"aria-labelledby":ct,onKeyDown:mt,autoFocusItem:ut,children:reactExports.Children.map(ot,bt=>reactExports.isValidElement(bt)?reactExports.cloneElement(bt,{hideMenu:yt}):bt)})})]})}),_excluded$F=["hideMenu","options"],_excluded2$3=["hideMenu","options"],_excluded3=["csvOptions","printOptions","excelOptions"],GridCsvExportMenuItem=_e=>{const et=useGridApiContext(),{hideMenu:rt,options:nt}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded$F);return jsx(MenuItem$1,_extends({onClick:()=>{et.current.exportDataAsCsv(nt),rt==null||rt()}},ot,{children:et.current.getLocaleText("toolbarExportCSV")}))},GridPrintExportMenuItem=_e=>{const et=useGridApiContext(),{hideMenu:rt,options:nt}=_e,ot=_objectWithoutPropertiesLoose(_e,_excluded2$3);return jsx(MenuItem$1,_extends({onClick:()=>{et.current.exportDataAsPrint(nt),rt==null||rt()}},ot,{children:et.current.getLocaleText("toolbarExportPrint")}))},GridToolbarExport=reactExports.forwardRef(function _e(et,rt){const{csvOptions:nt={},printOptions:ot={},excelOptions:it}=et,st=_objectWithoutPropertiesLoose(et,_excluded3),lt=useGridApiContext().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:it,csvOptions:nt,printOptions:ot}).sort((ct,pt)=>ct.componentName>pt.componentName?1:-1);return lt.length===0?null:jsx(GridToolbarExportContainer,_extends({},st,{ref:rt,children:lt.map((ct,pt)=>reactExports.cloneElement(ct.component,{key:pt}))}))}),getDefaultGridFilterModel=()=>({items:[],linkOperator:GridLinkOperator.And,quickFilterValues:[],quickFilterLogicOperator:GridLinkOperator.And}),_excluded$E=["quickFilterParser","quickFilterFormatter","debounceMs"],GridToolbarQuickFilterRoot=styled$1(TextField$1,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(_e,et)=>et.toolbarQuickFilter})(({theme:_e})=>({width:"auto",paddingBottom:_e.spacing(.5),"& input":{marginLeft:_e.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${_e.palette.divider}`},[`& input[type=search]::-ms-clear,
& input[type=search]::-ms-reveal`]:{display:"none",width:0,height:0},[`& input[type="search"]::-webkit-search-decoration,
  & input[type="search"]::-webkit-search-cancel-button,
  & input[type="search"]::-webkit-search-results-button,
  & input[type="search"]::-webkit-search-results-decoration`]:{display:"none"}})),defaultSearchValueParser=_e=>_e.split(" ").filter(et=>et!==""),defaultSearchValueFormatter=_e=>_e.join(" ");function GridToolbarQuickFilter(_e){var et;const{quickFilterParser:rt=defaultSearchValueParser,quickFilterFormatter:nt=defaultSearchValueFormatter,debounceMs:ot=500}=_e,it=_objectWithoutPropertiesLoose(_e,_excluded$E),st=useGridApiContext(),at=useGridRootProps(),lt=useGridSelector(st,gridQuickFilterValuesSelector),[ct,pt]=reactExports.useState(()=>nt(lt??[])),[ut,ht]=reactExports.useState(lt);reactExports.useEffect(()=>{isDeepEqual(ut,lt)||(ht(lt),pt(mt=>isDeepEqual(rt(mt),lt)?mt:nt(lt??[])))},[ut,lt,nt,rt]);const ft=reactExports.useCallback(mt=>{st.current.setQuickFilterValues(rt(mt))},[st,rt]),gt=reactExports.useMemo(()=>debounce$2(ft,ot),[ft,ot]),vt=reactExports.useCallback(mt=>{const Et=mt.target.value;pt(Et),gt(Et)},[gt]),yt=reactExports.useCallback(()=>{pt(""),ft("")},[ft]);return jsx(GridToolbarQuickFilterRoot,_extends({as:at.components.BaseTextField,variant:"standard",value:ct,onChange:vt,placeholder:st.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":st.current.getLocaleText("toolbarQuickFilterLabel"),type:"search",InputProps:{startAdornment:jsx(at.components.QuickFilterIcon,{fontSize:"small"}),endAdornment:jsx(IconButton$1,{"aria-label":st.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:ct?"visible":"hidden"},onClick:yt,children:jsx(at.components.QuickFilterClearIcon,{fontSize:"small"})})}},it,(et=at.componentsProps)==null?void 0:et.baseTextField))}const _excluded$D=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],GridToolbar=reactExports.forwardRef(function _e(et,rt){const{csvOptions:nt,printOptions:ot,excelOptions:it,showQuickFilter:st=!1,quickFilterProps:at={}}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$D),ct=useGridRootProps();return ct.disableColumnFilter&&ct.disableColumnSelector&&ct.disableDensitySelector&&!st?null:jsxs(GridToolbarContainer,_extends({ref:rt},lt,{children:[jsx(GridToolbarColumnsButton,{}),jsx(GridToolbarFilterButton,{}),jsx(GridToolbarDensitySelector,{}),jsx(GridToolbarExport,{csvOptions:nt,printOptions:ot,excelOptions:it}),jsx(Box$1,{sx:{flex:1}}),st&&jsx(GridToolbarQuickFilter,_extends({},at))]}))}),_excluded$C=["className","rowCount","visibleRowCount"],useUtilityClasses$w=_e=>{const{classes:et}=_e;return composeClasses({root:["rowCount"]},getDataGridUtilityClass,et)},GridRowCountRoot=styled$1("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(_e,et)=>et.rowCount})(({theme:_e})=>({alignItems:"center",display:"flex",margin:_e.spacing(0,2)})),GridRowCount=reactExports.forwardRef(function _e(et,rt){const{className:nt,rowCount:ot,visibleRowCount:it}=et,st=_objectWithoutPropertiesLoose(et,_excluded$C),at=useGridApiContext(),ct={classes:useGridRootProps().classes},pt=useUtilityClasses$w(ct);if(ot===0)return null;const ut=it<ot?at.current.getLocaleText("footerTotalVisibleRows")(it,ot):ot.toLocaleString();return jsxs(GridRowCountRoot,_extends({ref:rt,className:clsx(pt.root,nt)},st,{children:[at.current.getLocaleText("footerTotalRows")," ",ut]}))}),_excluded$B=["className","selectedRowCount"],useUtilityClasses$v=_e=>{const{classes:et}=_e;return composeClasses({root:["selectedRowCount"]},getDataGridUtilityClass,et)},GridSelectedRowCountRoot=styled$1("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(_e,et)=>et.selectedRowCount})(({theme:_e})=>({alignItems:"center",display:"flex",margin:_e.spacing(0,2),visibility:"hidden",width:0,height:0,[_e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),GridSelectedRowCount=reactExports.forwardRef(function _e(et,rt){const{className:nt,selectedRowCount:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$B),st=useGridApiContext(),lt={classes:useGridRootProps().classes},ct=useUtilityClasses$v(lt),pt=st.current.getLocaleText("footerRowSelected")(ot);return jsx(GridSelectedRowCountRoot,_extends({ref:rt,className:clsx(ct.root,nt)},it,{children:pt}))}),GridFooter=reactExports.forwardRef(function _e(et,rt){var nt;const ot=useGridApiContext(),it=useGridRootProps(),st=useGridSelector(ot,gridTopLevelRowCountSelector),at=useGridSelector(ot,selectedGridRowsCountSelector),lt=useGridSelector(ot,gridVisibleTopLevelRowCountSelector),ct=!it.hideFooterSelectedRowCount&&at>0?jsx(GridSelectedRowCount,{selectedRowCount:at}):jsx("div",{}),pt=!it.hideFooterRowCount&&!it.pagination?jsx(GridRowCount,{rowCount:st,visibleRowCount:lt}):null,ut=it.pagination&&!it.hideFooterPagination&&it.components.Pagination&&jsx(it.components.Pagination,_extends({},(nt=it.componentsProps)==null?void 0:nt.pagination));return jsxs(GridFooterContainer,_extends({ref:rt},et,{children:[ct,pt,ut]}))}),GridHeader=reactExports.forwardRef(function _e(et,rt){var nt,ot;const it=useGridRootProps();return jsxs("div",_extends({ref:rt},et,{children:[jsx(it.components.PreferencesPanel,_extends({},(nt=it.componentsProps)==null?void 0:nt.preferencesPanel)),it.components.Toolbar&&jsx(it.components.Toolbar,_extends({},(ot=it.componentsProps)==null?void 0:ot.toolbar))]}))}),GridLoadingOverlay=reactExports.forwardRef(function _e(et,rt){return jsx(GridOverlay,_extends({ref:rt},et,{children:jsx(CircularProgress$1,{})}))}),GridNoRowsOverlay=reactExports.forwardRef(function _e(et,rt){const ot=useGridApiContext().current.getLocaleText("noRowsLabel");return jsx(GridOverlay,_extends({ref:rt},et,{children:ot}))}),GridPaginationRoot=styled$1(TablePagination$1)(({theme:_e})=>({[`& .${tablePaginationClasses$1.selectLabel}`]:{display:"none",[_e.breakpoints.up("sm")]:{display:"block"}},[`& .${tablePaginationClasses$1.input}`]:{display:"none",[_e.breakpoints.up("sm")]:{display:"inline-flex"}}})),GridPagination=reactExports.forwardRef(function _e(et,rt){var nt;const ot=useGridApiContext(),it=useGridRootProps(),st=useGridSelector(ot,gridPaginationSelector),at=reactExports.useMemo(()=>Math.floor(st.rowCount/(st.pageSize||1)),[st.rowCount,st.pageSize]),lt=reactExports.useCallback(pt=>{const ut=Number(pt.target.value);ot.current.setPageSize(ut)},[ot]),ct=reactExports.useCallback((pt,ut)=>{ot.current.setPage(ut)},[ot]);return jsx(GridPaginationRoot,_extends({ref:rt,component:"div",count:st.rowCount,page:st.page<=at?st.page:at,rowsPerPageOptions:(nt=it.rowsPerPageOptions)!=null&&nt.includes(st.pageSize)?it.rowsPerPageOptions:[],rowsPerPage:st.pageSize,onPageChange:ct,onRowsPerPageChange:lt},ot.current.getLocaleText("MuiTablePagination"),et))}),getVisibleRows=(_e,et)=>{let rt,nt;return et.pagination&&et.paginationMode==="client"?(nt=gridPaginationRowRangeSelector(_e),rt=gridPaginatedVisibleSortedGridRowEntriesSelector(_e)):(rt=gridVisibleSortedRowEntriesSelector(_e),rt.length===0?nt=null:nt={firstRowIndex:0,lastRowIndex:rt.length-1}),{rows:rt,range:nt}},useGridVisibleRows=(_e,et)=>{const rt=getVisibleRows(_e,et);return reactExports.useMemo(()=>({rows:rt.rows,range:rt.range}),[rt.rows,rt.range])},GRID_DETAIL_PANEL_TOGGLE_FIELD="__detail_panel_toggle__",_excluded$A=["selected","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","cellFocus","cellTabIndex","editRowsState","isLastVisible","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],_excluded2$2=["changeReason"],useUtilityClasses$u=_e=>{const{editable:et,editing:rt,selected:nt,isLastVisible:ot,rowHeight:it,classes:st}=_e;return composeClasses({root:["row",nt&&"selected",et&&"row--editable",rt&&"row--editing",ot&&"row--lastVisible",it==="auto"&&"row--dynamicHeight"]},getDataGridUtilityClass,st)},EmptyCell=({width:_e})=>_e?jsx("div",{className:"MuiDataGrid-cell",style:{width:_e}}):null,GridRow=reactExports.forwardRef(function _e(et,rt){var nt;const{selected:ot,rowId:it,row:st,index:at,style:lt,position:ct,rowHeight:pt,className:ut,visibleColumns:ht,renderedColumns:ft,containerWidth:gt,firstColumnToRender:vt,cellFocus:yt,cellTabIndex:mt,editRowsState:Et,isLastVisible:bt=!1,onClick:Ct,onDoubleClick:Tt,onMouseEnter:wt,onMouseLeave:Rt}=et,It=_objectWithoutPropertiesLoose(et,_excluded$A),St=useGridApiContext(),Pt=reactExports.useRef(null),Ot=useGridRootProps(),Ut=useGridVisibleRows(St,Ot),Bt=useGridSelector(St,gridColumnsTotalWidthSelector),xt=useGridSelector(St,gridSortModelSelector),At=useGridSelector(St,gridRowTreeDepthSelector),Mt=useGridSelector(St,gridDensityHeaderGroupingMaxDepthSelector),Nt=useForkRef(Pt,rt),$t=at+Mt+2,{hasScrollX:Ft,hasScrollY:jt}=(nt=St.current.getRootDimensions())!=null?nt:{hasScrollX:!1,hasScrollY:!1},zt={selected:ot,isLastVisible:bt,classes:Ot.classes,editing:St.current.getRowMode(it)===GridRowModes.Edit,editable:Ot.editMode===GridEditModes.Row,rowHeight:pt},Yt=useUtilityClasses$u(zt);reactExports.useLayoutEffect(()=>{pt==="auto"&&Pt.current&&typeof ResizeObserver>"u"&&St.current.unstable_storeRowHeightMeasurement(it,Pt.current.clientHeight,ct)},[St,pt,it,ct]),reactExports.useLayoutEffect(()=>{if(Ut.range){const Ht=St.current.getRowIndexRelativeToVisibleRows(it);Ht!=null&&St.current.unstable_setLastMeasuredRowIndex(Ht)}const pr=Pt.current;if(!pr||pt!=="auto"||typeof ResizeObserver>"u")return;const Sr=new ResizeObserver(Ht=>{const[qt]=Ht,fr=qt.borderBoxSize&&qt.borderBoxSize.length>0?qt.borderBoxSize[0].blockSize:qt.contentRect.height;St.current.unstable_storeRowHeightMeasurement(it,fr,ct)});return Sr.observe(pr),()=>Sr.disconnect()},[St,Ut.range,at,pt,it,ct]);const Kt=reactExports.useCallback((pr,Er)=>Sr=>{Sr.target.nodeType===1&&!Sr.currentTarget.contains(Sr.target)||St.current.getRow(it)&&(St.current.publishEvent(pr,St.current.getRowParams(it),Sr),Er&&Er(Sr))},[St,it]),er=reactExports.useCallback(pr=>{const Er=findParentElementFromClassName(pr.target,gridClasses.cell),Sr=Er==null?void 0:Er.getAttribute("data-field");Sr&&(Sr===GRID_CHECKBOX_SELECTION_COL_DEF.field||Sr===GRID_DETAIL_PANEL_TOGGLE_FIELD||Sr==="__reorder__"||St.current.getCellMode(it,Sr)===GridCellModes.Edit||St.current.getColumn(Sr).type===GRID_ACTIONS_COLUMN_TYPE)||Kt("rowClick",Ct)(pr)},[St,Ct,Kt,it]),ir=reactExports.useCallback((pr,Er)=>{var Sr;const Ht=St.current.getCellParams(it,pr.field),qt=[],fr=Ot.disableColumnReorder&&pr.disableReorder||!Ot.rowReordering&&!!xt.length&&At>1&&Object.keys(Et).length>0;pr.cellClassName&&qt.push(clsx(typeof pr.cellClassName=="function"?pr.cellClassName(Ht):pr.cellClassName));const cr=Et[it]?Et[it][pr.field]:null;let Ar=null;if(cr==null&&pr.renderCell){var Gr;Ar=pr.renderCell(_extends({},Ht,{api:St.current})),qt.push(clsx(gridClasses["cell--withRenderer"],(Gr=Ot.classes)==null?void 0:Gr["cell--withRenderer"]))}if(cr!=null&&pr.renderEditCell){var Qr;let qr=st;St.current.unstable_getRowWithUpdatedValues&&(qr=St.current.unstable_getRowWithUpdatedValues(it,pr.field));const dr=_objectWithoutPropertiesLoose(cr,_excluded2$2),mr=_extends({},Ht,{row:qr},dr,{api:St.current});Ar=pr.renderEditCell(mr),qt.push(clsx(gridClasses["cell--editing"],(Qr=Ot.classes)==null?void 0:Qr["cell--editing"]))}Ot.getCellClassName&&qt.push(Ot.getCellClassName(Ht));const hn=yt!==null&&yt.id===it&&yt.field===pr.field,sn=mt!==null&&mt.id===it&&mt.field===pr.field&&Ht.cellMode==="view"?0:-1;return jsx(Ot.components.Cell,_extends({value:Ht.value,field:pr.field,width:Er.width,rowId:it,height:pt,showRightBorder:Er.showRightBorder,formattedValue:Ht.formattedValue,align:pr.align||"left",cellMode:Ht.cellMode,colIndex:Er.indexRelativeToAllColumns,isEditable:Ht.isEditable,hasFocus:hn,tabIndex:sn,className:clsx(qt),colSpan:Er.colSpan,disableDragEvents:fr},(Sr=Ot.componentsProps)==null?void 0:Sr.cell,{children:Ar}),pr.field)},[St,mt,Et,yt,Ot,st,pt,it,At,xt.length]),rr=St.current.unstable_getRowInternalSizes(it);let lr=pt;if(lr==="auto"&&rr){let pr=0;const Er=Object.entries(rr).reduce((Sr,[Ht,qt])=>/^base[A-Z]/.test(Ht)?(pr+=1,qt>Sr?qt:Sr):Sr,0);Er>0&&pr>1&&(lr=Er)}const nr=_extends({},lt,{maxHeight:pt==="auto"?"none":pt,minHeight:lr});if(rr!=null&&rr.spacingTop){const pr=Ot.rowSpacingType==="border"?"borderTopWidth":"marginTop";nr[pr]=rr.spacingTop}if(rr!=null&&rr.spacingBottom){const pr=Ot.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let Er=nr[pr];typeof Er!="number"&&(Er=parseInt(Er||"0",10)),Er+=rr.spacingBottom,nr[pr]=Er}const hr=St.current.unstable_applyPipeProcessors("rowClassName",[],it);if(typeof Ot.getRowClassName=="function"){var vr;const pr=at-(((vr=Ut.range)==null?void 0:vr.firstRowIndex)||0),Er=_extends({},St.current.getRowParams(it),{isFirstVisible:pr===0,isLastVisible:pr===Ut.rows.length-1,indexRelativeToCurrentPage:pr});hr.push(Ot.getRowClassName(Er))}const yr=randomNumberBetween(1e4,20,80),Cr=[];for(let pr=0;pr<ft.length;pr+=1){const Er=ft[pr],Sr=vt+pr,Ht=Sr===ht.length-1,fr=Ht?!(Ht&&Ft&&!jt)&&Ot.disableExtendRowFullWidth:Ot.showCellRightBorder,cr=St.current.unstable_getCellColSpanInfo(it,Sr);if(cr&&!cr.spannedByColSpan)if(st){const{colSpan:Ar,width:Gr}=cr.cellProps,Qr={width:Gr,colSpan:Ar,showRightBorder:fr,indexRelativeToAllColumns:Sr};Cr.push(ir(Er,Qr))}else{const{width:Ar}=cr.cellProps,Gr=Math.round(yr());Cr.push(jsx(Ot.components.SkeletonCell,{width:Ar,contentWidth:Gr,field:Er.field,align:Er.align},Er.field))}}const or=gt-Bt,ur=st?{onClick:er,onDoubleClick:Kt("rowDoubleClick",Tt),onMouseEnter:Kt("rowMouseEnter",wt),onMouseLeave:Kt("rowMouseLeave",Rt)}:null;return jsxs("div",_extends({ref:Nt,"data-id":it,"data-rowindex":at,role:"row",className:clsx(...hr,Yt.root,ut),"aria-rowindex":$t,"aria-selected":ot,style:nr},ur,It,{children:[Cr,or>0&&jsx(EmptyCell,{width:or})]}))}),CLEANUP_TIMER_LOOP_MILLIS=1e3;class TimerBasedCleanupTracking{constructor(et=CLEANUP_TIMER_LOOP_MILLIS){this.timeouts=new Map,this.cleanupTimeout=CLEANUP_TIMER_LOOP_MILLIS,this.cleanupTimeout=et}register(et,rt,nt){this.timeouts||(this.timeouts=new Map);const ot=setTimeout(()=>{typeof rt=="function"&&rt(),this.timeouts.delete(nt.cleanupToken)},this.cleanupTimeout);this.timeouts.set(nt.cleanupToken,ot)}unregister(et){const rt=this.timeouts.get(et.cleanupToken);rt&&(this.timeouts.delete(et.cleanupToken),clearTimeout(rt))}reset(){this.timeouts&&(this.timeouts.forEach((et,rt)=>{this.unregister({cleanupToken:rt})}),this.timeouts=void 0)}}class FinalizationRegistryBasedCleanupTracking{constructor(){this.registry=new FinalizationRegistry(et=>{typeof et=="function"&&et()})}register(et,rt,nt){this.registry.register(et,rt,nt)}unregister(et){this.registry.unregister(et)}reset(){}}var GridSignature;(function(_e){_e.DataGrid="DataGrid",_e.DataGridPro="DataGridPro"})(GridSignature||(GridSignature={}));class ObjectToBeRetainedByReact{}function createUseGridApiEventHandler(_e){let et=0;return function(nt,ot,it,st){_e.registry===null&&(_e.registry=typeof FinalizationRegistry<"u"?new FinalizationRegistryBasedCleanupTracking:new TimerBasedCleanupTracking);const[at]=reactExports.useState(new ObjectToBeRetainedByReact),lt=reactExports.useRef(null),ct=reactExports.useRef();ct.current=it;const pt=reactExports.useRef(null);if(!lt.current&&ct.current){const ut=(ht,ft,gt)=>{if(!ft.defaultMuiPrevented){var vt;(vt=ct.current)==null||vt.call(ct,ht,ft,gt)}};lt.current=nt.current.subscribeEvent(ot,ut,st),et+=1,pt.current={cleanupToken:et},_e.registry.register(at,()=>{var ht;(ht=lt.current)==null||ht.call(lt),lt.current=null,pt.current=null},pt.current)}else!ct.current&&lt.current&&(lt.current(),lt.current=null,pt.current&&(_e.registry.unregister(pt.current),pt.current=null));reactExports.useEffect(()=>{if(!lt.current&&ct.current){const ut=(ht,ft,gt)=>{if(!ft.defaultMuiPrevented){var vt;(vt=ct.current)==null||vt.call(ct,ht,ft,gt)}};lt.current=nt.current.subscribeEvent(ot,ut,st)}return pt.current&&_e.registry&&(_e.registry.unregister(pt.current),pt.current=null),()=>{var ut;(ut=lt.current)==null||ut.call(lt),lt.current=null}},[nt,ot,st])}}const registryContainer={registry:null},useGridApiEventHandler=createUseGridApiEventHandler(registryContainer),optionsSubscriberOptions={isFirst:!0};function useGridApiOptionHandler(_e,et,rt){useGridApiEventHandler(_e,et,rt,optionsSubscriberOptions)}const CLIFF=1,SLOP=1.5,useUtilityClasses$t=_e=>{const{scrollDirection:et,classes:rt}=_e,nt={root:["scrollArea",`scrollArea--${et}`]};return composeClasses(nt,getDataGridUtilityClass,rt)},GridScrollAreaRawRoot=styled$1("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(_e,et)=>[{[`&.${gridClasses["scrollArea--left"]}`]:et["scrollArea--left"]},{[`&.${gridClasses["scrollArea--right"]}`]:et["scrollArea--right"]},et.scrollArea]})(()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${gridClasses["scrollArea--left"]}`]:{left:0},[`&.${gridClasses["scrollArea--right"]}`]:{right:0}}));function GridScrollAreaRaw(_e){const{scrollDirection:et}=_e,rt=reactExports.useRef(null),nt=useGridApiContext(),ot=reactExports.useRef(),[it,st]=reactExports.useState(!1),at=useGridSelector(nt,gridDensityHeaderHeightSelector),lt=reactExports.useRef({left:0,top:0}),ct=useGridRootProps(),pt=_extends({},_e,{classes:ct.classes}),ut=useUtilityClasses$t(pt),ht=reactExports.useCallback(vt=>{lt.current=vt},[]),ft=reactExports.useCallback(vt=>{let yt;if(et==="left")yt=vt.clientX-rt.current.getBoundingClientRect().right;else if(et==="right")yt=Math.max(1,vt.clientX-rt.current.getBoundingClientRect().left);else throw new Error("MUI: Wrong drag direction");yt=(yt-CLIFF)*SLOP+CLIFF,clearTimeout(ot.current),ot.current=setTimeout(()=>{nt.current.scroll({left:lt.current.left+yt,top:lt.current.top})})},[et,nt]);reactExports.useEffect(()=>()=>{clearTimeout(ot.current)},[]);const gt=reactExports.useCallback(()=>{st(vt=>!vt)},[]);return useGridApiEventHandler(nt,"rowsScroll",ht),useGridApiEventHandler(nt,"columnHeaderDragStart",gt),useGridApiEventHandler(nt,"columnHeaderDragEnd",gt),it?jsx(GridScrollAreaRawRoot,{ref:rt,className:clsx(ut.root),onDragOver:ft,style:{height:at}}):null}const GridScrollArea=reactExports.memo(GridScrollAreaRaw),GridContextProvider=({apiRef:_e,props:et,children:rt})=>jsx(GridRootPropsContext.Provider,{value:et,children:jsx(GridApiContext.Provider,{value:_e,children:rt})}),forceDebug=localStorageAvailable()&&window.localStorage.getItem("DEBUG")!=null,noop$4=()=>{},noopLogger={debug:noop$4,info:noop$4,warn:noop$4,error:noop$4},LOG_LEVELS=["debug","info","warn","error"];function getAppender(_e,et,rt=console){const nt=LOG_LEVELS.indexOf(et);if(nt===-1)throw new Error(`MUI: Log level ${et} not recognized.`);return LOG_LEVELS.reduce((it,st,at)=>(at>=nt?it[st]=(...lt)=>{const[ct,...pt]=lt;rt[st](`MUI: ${_e} - ${ct}`,...pt)}:it[st]=noop$4,it),{})}const useGridLoggerFactory=(_e,et)=>{_e.current.getLogger=reactExports.useCallback(rt=>forceDebug?getAppender(rt,"debug",et.logger):et.logLevel?getAppender(rt,et.logLevel.toString(),et.logger):noopLogger,[et.logLevel,et.logger])};function useGridApiMethod(_e,et,rt){const nt=reactExports.useRef(et),[ot]=reactExports.useState(Object.keys(et)),it=reactExports.useCallback(()=>{_e.current&&ot.forEach(st=>{_e.current.hasOwnProperty(st)||(_e.current[st]=(...at)=>nt.current[st](...at))})},[ot,_e]);reactExports.useEffect(()=>{nt.current=et},[et]),reactExports.useEffect(()=>{it()},[it]),it()}class EventManager{constructor(){this.maxListeners=10,this.warnOnce=!1,this.events={}}on(et,rt,nt={}){let ot=this.events[et];ot||(ot={highPriority:new Map,regular:new Map},this.events[et]=ot),nt.isFirst?ot.highPriority.set(rt,!0):ot.regular.set(rt,!0)}removeListener(et,rt){this.events[et]&&(this.events[et].regular.delete(rt),this.events[et].highPriority.delete(rt))}removeAllListeners(){this.events={}}emit(et,...rt){const nt=this.events[et];if(!nt)return;const ot=Array.from(nt.highPriority.keys()),it=Array.from(nt.regular.keys());for(let st=ot.length-1;st>=0;st-=1){const at=ot[st];nt.highPriority.has(at)&&at.apply(this,rt)}for(let st=0;st<it.length;st+=1){const at=it[st];nt.regular.has(at)&&at.apply(this,rt)}}once(et,rt){const nt=this;this.on(et,function ot(...it){nt.removeListener(et,ot),rt.apply(nt,it)})}}const isSyntheticEvent=_e=>_e.isPropagationStopped!==void 0;let globalId=0;function useGridApiInitialization(_e,et){const rt=reactExports.useRef();rt.current||(rt.current={unstable_eventManager:new EventManager,unstable_caches:{},state:{},instanceId:globalId},globalId+=1),reactExports.useImperativeHandle(_e,()=>rt.current,[rt]);const nt=reactExports.useCallback((...st)=>{const[at,lt,ct={}]=st;if(ct.defaultMuiPrevented=!1,isSyntheticEvent(ct)&&ct.isPropagationStopped())return;const pt=et.signature===GridSignature.DataGridPro?{api:rt.current}:{};rt.current.unstable_eventManager.emit(at,lt,ct,pt)},[rt,et.signature]),ot=reactExports.useCallback((st,at,lt)=>{rt.current.unstable_eventManager.on(st,at,lt);const ct=rt.current;return()=>{ct.unstable_eventManager.removeListener(st,at)}},[rt]),it=reactExports.useCallback(st=>{rt.current.publishEvent("componentError",st)},[rt]);return useGridApiMethod(rt,{subscribeEvent:ot,publishEvent:nt,showError:it}),reactExports.useEffect(()=>{const st=rt.current;return()=>{unstable_resetCreateSelectorCache(st.instanceId),st.publishEvent("unmount")}},[rt]),rt}function useGridErrorHandler(_e,et){const rt=reactExports.useCallback(nt=>{_e.current.setState(ot=>_extends({},ot,{error:nt}))},[_e]);reactExports.useEffect(()=>{et.error?rt({error:et.error}):rt(null)},[rt,et.error]),useGridApiEventHandler(_e,"componentError",rt)}const useGridLocaleText=(_e,et)=>{const nt={getLocaleText:reactExports.useCallback(ot=>{if(et.localeText[ot]==null)throw new Error(`Missing translation for key ${ot}.`);return et.localeText[ot]},[et.localeText])};useGridApiMethod(_e,nt)};function _typeof(_e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(_e)}function _toPrimitive(_e,et){if(_typeof(_e)!=="object"||_e===null)return _e;var rt=_e[Symbol.toPrimitive];if(rt!==void 0){var nt=rt.call(_e,et||"default");if(_typeof(nt)!=="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _toPropertyKey(_e){var et=_toPrimitive(_e,"string");return _typeof(et)==="symbol"?et:String(et)}const useGridPipeProcessing=_e=>{const et=reactExports.useRef({}),rt=reactExports.useCallback(lt=>{lt&&Object.values(lt.appliers).forEach(ct=>{ct()})},[]),nt=reactExports.useCallback((lt,ct,pt)=>{et.current[lt]||(et.current[lt]={processors:new Map,appliers:{}});const ut=et.current[lt];return ut.processors.get(ct)!==pt&&(ut.processors.set(ct,pt),rt(ut)),()=>{et.current[lt].processors.set(ct,null)}},[rt]),ot=reactExports.useCallback((lt,ct,pt)=>(et.current[lt]||(et.current[lt]={processors:new Map,appliers:{}}),et.current[lt].appliers[ct]=pt,()=>{const ut=et.current[lt].appliers,ht=_objectWithoutPropertiesLoose(ut,[ct].map(_toPropertyKey));et.current[lt].appliers=ht}),[]),it=reactExports.useCallback(lt=>{const ct=et.current[lt];rt(ct)},[rt]),st=reactExports.useCallback((...lt)=>{const[ct,pt,ut]=lt;return et.current[ct]?Array.from(et.current[ct].processors.values()).reduce((ft,gt)=>gt?gt(ft,ut):ft,pt):pt},[]);useGridApiMethod(_e,{unstable_registerPipeProcessor:nt,unstable_registerPipeApplier:ot,unstable_requestPipeProcessorsApplication:it,unstable_applyPipeProcessors:st})},useFirstRender=_e=>{const et=reactExports.useRef(!0);et.current&&(et.current=!1,_e())},useGridRegisterPipeProcessor=(_e,et,rt)=>{const nt=reactExports.useRef(),ot=reactExports.useRef(`mui-${Math.round(Math.random()*1e9)}`),it=reactExports.useCallback(()=>{nt.current=_e.current.unstable_registerPipeProcessor(et,ot.current,rt)},[_e,rt,et]);useFirstRender(()=>{it()});const st=reactExports.useRef(!0);reactExports.useEffect(()=>(st.current?st.current=!1:it(),()=>{nt.current&&(nt.current(),nt.current=null)}),[it])},useGridRegisterPipeApplier=(_e,et,rt)=>{const nt=reactExports.useRef(),ot=reactExports.useRef(`mui-${Math.round(Math.random()*1e9)}`),it=reactExports.useCallback(()=>{nt.current=_e.current.unstable_registerPipeApplier(et,ot.current,rt)},[_e,rt,et]);useFirstRender(()=>{it()});const st=reactExports.useRef(!0);reactExports.useEffect(()=>(st.current?st.current=!1:it(),()=>{nt.current&&(nt.current(),nt.current=null)}),[it])},useGridRegisterStrategyProcessor=(_e,et,rt,nt)=>{const ot=reactExports.useCallback(()=>{_e.current.unstable_registerStrategyProcessor(et,rt,nt)},[_e,nt,rt,et]);useFirstRender(()=>{ot()});const it=reactExports.useRef(!0);reactExports.useEffect(()=>{it.current?it.current=!1:ot()},[ot])},GRID_DEFAULT_STRATEGY="none",GRID_STRATEGIES_PROCESSORS={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},useGridStrategyProcessing=_e=>{const et=reactExports.useRef(new Map),rt=reactExports.useRef({}),nt=reactExports.useCallback((lt,ct,pt)=>{const ut=()=>{const gt=rt.current[ct],vt=_objectWithoutPropertiesLoose(gt,[lt].map(_toPropertyKey));rt.current[ct]=vt};rt.current[ct]||(rt.current[ct]={});const ht=rt.current[ct],ft=ht[lt];return ht[lt]=pt,!ft||ft===pt||lt===_e.current.unstable_getActiveStrategy(GRID_STRATEGIES_PROCESSORS[ct])&&_e.current.publishEvent("activeStrategyProcessorChange",ct),ut},[_e]),ot=reactExports.useCallback((lt,ct)=>{const pt=_e.current.unstable_getActiveStrategy(GRID_STRATEGIES_PROCESSORS[lt]);if(pt==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const ut=rt.current[lt];if(!ut||!ut[pt])throw new Error(`No processor found for processor "${lt}" on strategy "${pt}"`);const ht=ut[pt];return ht(ct)},[_e]),it=reactExports.useCallback(lt=>{var ct;const ut=Array.from(et.current.entries()).find(([,ht])=>ht.group!==lt?!1:ht.isAvailable());return(ct=ut==null?void 0:ut[0])!=null?ct:GRID_DEFAULT_STRATEGY},[]),st=reactExports.useCallback((lt,ct,pt)=>{et.current.set(ct,{group:lt,isAvailable:pt}),_e.current.publishEvent("strategyAvailabilityChange")},[_e]);useGridApiMethod(_e,{unstable_registerStrategyProcessor:nt,unstable_applyStrategyProcessor:ot,unstable_getActiveStrategy:it,unstable_setStrategyAvailability:st})},useGridNativeEventListener=(_e,et,rt,nt,ot)=>{const it=useGridLogger(_e,"useNativeEventListener"),[st,at]=reactExports.useState(!1),lt=reactExports.useRef(nt),ct=reactExports.useCallback(pt=>lt.current&&lt.current(pt),[]);reactExports.useEffect(()=>{lt.current=nt},[nt]),reactExports.useEffect(()=>{let pt;if(isFunction(et)?pt=et():pt=et&&et.current?et.current:null,pt&&rt&&!st){it.debug(`Binding native ${rt} event`),pt.addEventListener(rt,ct,ot);const ut=pt;at(!0);const ht=()=>{it.debug(`Clearing native ${rt} event`),ut.removeEventListener(rt,ct,ot)};_e.current.subscribeEvent("unmount",ht)}},[et,ct,rt,st,it,ot,_e])},_excluded$z=["stateId"],useGridStateInitialization=(_e,et)=>{const rt=reactExports.useRef({}),[,nt]=reactExports.useState(),ot=reactExports.useCallback(ct=>{const{stateId:pt}=ct,ut=_objectWithoutPropertiesLoose(ct,_excluded$z);rt.current[pt]=_extends({},ut,{stateId:pt})},[]),it=reactExports.useCallback((ct,pt)=>{let ut;if(isFunction(ct)?ut=ct(_e.current.state):ut=ct,_e.current.state===ut)return!1;let ht=!1;const ft=[];if(Object.keys(rt.current).forEach(gt=>{const vt=rt.current[gt],yt=vt.stateSelector(_e.current.state,_e.current.instanceId),mt=vt.stateSelector(ut,_e.current.instanceId);mt!==yt&&(ft.push({stateId:vt.stateId,hasPropChanged:mt!==vt.propModel}),vt.propModel!==void 0&&mt!==vt.propModel&&(ht=!0))}),ft.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${ft[0].stateId}, therefore, you're not allowed to update ${ft.map(gt=>gt.stateId).join(", ")} in the same transaction.`);if(ht||(_e.current.state=ut,_e.current.publishEvent&&_e.current.publishEvent("stateChange",ut)),ft.length===1){const{stateId:gt,hasPropChanged:vt}=ft[0],yt=rt.current[gt],mt=yt.stateSelector(ut,_e.current.instanceId);if(yt.propOnChange&&vt){const Et=et.signature===GridSignature.DataGridPro?{api:_e.current,reason:pt}:{reason:pt};yt.propOnChange(mt,Et)}ht||_e.current.publishEvent(yt.changeEvent,mt,{reason:pt})}return!ht},[_e,et.signature]),st=reactExports.useCallback((ct,pt,ut)=>_e.current.setState(ht=>_extends({},ht,{[ct]:pt(ht[ct])}),ut),[_e]),at=reactExports.useCallback(()=>nt(()=>_e.current.state),[_e]);useGridApiMethod(_e,{setState:it,forceUpdate:at,unstable_updateControlState:st,unstable_registerControlState:ot})},useGridInitialization=(_e,et)=>{const rt=useGridApiInitialization(_e,et);return useGridLoggerFactory(rt,et),useGridErrorHandler(rt,et),useGridStateInitialization(rt,et),useGridPipeProcessing(rt),useGridStrategyProcessing(rt),useGridLocaleText(rt,et),rt},useGridInitializeState=(_e,et,rt)=>{const nt=reactExports.useRef(!1);nt.current||(et.current.state=_e(et.current.state,rt,et),nt.current=!0)};function writeToClipboardPolyfill(_e){const et=document.createElement("span");et.style.whiteSpace="pre",et.style.userSelect="all",et.style.opacity="0px",et.textContent=_e,document.body.appendChild(et);const rt=document.createRange();rt.selectNode(et);const nt=window.getSelection();nt.removeAllRanges(),nt.addRange(rt);try{document.execCommand("copy")}finally{document.body.removeChild(et)}}function hasNativeSelection(_e){var et;return((et=window.getSelection())==null?void 0:et.toString())!==""?!0:_e?(_e.selectionEnd||0)-(_e.selectionStart||0)>0:!1}const useGridClipboard=_e=>{const et=reactExports.useCallback((ot=!1)=>{if(_e.current.getSelectedRows().size===0)return;const it=_e.current.getDataAsCsv({includeHeaders:ot,delimiter:"	"});navigator.clipboard?navigator.clipboard.writeText(it).catch(()=>{writeToClipboardPolyfill(it)}):writeToClipboardPolyfill(it)},[_e]),rt=reactExports.useCallback(ot=>{const it=ot.ctrlKey||ot.metaKey||ot.altKey;String.fromCharCode(ot.keyCode)!=="C"||!it||hasNativeSelection(ot.target)||_e.current.unstable_copySelectedRowsToClipboard(ot.altKey)},[_e]);useGridNativeEventListener(_e,_e.current.rootElementRef,"keydown",rt),useGridApiMethod(_e,{unstable_copySelectedRowsToClipboard:et})},gridColumnMenuSelector=_e=>_e.columnMenu,columnMenuStateInitializer=_e=>_extends({},_e,{columnMenu:{open:!1}}),useGridColumnMenu=_e=>{const et=useGridLogger(_e,"useGridColumnMenu"),rt=reactExports.useCallback(at=>{_e.current.setState(ct=>ct.columnMenu.open&&ct.columnMenu.field===at?ct:(et.debug("Opening Column Menu"),_extends({},ct,{columnMenu:{open:!0,field:at}})))&&(_e.current.hidePreferences(),_e.current.forceUpdate())},[_e,et]),nt=reactExports.useCallback(()=>{_e.current.setState(lt=>!lt.columnMenu.open&&lt.columnMenu.field===void 0?lt:(et.debug("Hiding Column Menu"),_extends({},lt,{columnMenu:_extends({},lt.columnMenu,{open:!1,field:void 0})})))&&_e.current.forceUpdate()},[_e,et]),ot=reactExports.useCallback(at=>{et.debug("Toggle Column Menu");const lt=gridColumnMenuSelector(_e.current.state);!lt.open||lt.field!==at?rt(at):nt()},[_e,et,rt,nt]);useGridApiMethod(_e,{showColumnMenu:rt,hideColumnMenu:nt,toggleColumnMenu:ot});const st=reactExports.useCallback((at,lt)=>{if(!lt.target.classList.contains(gridClasses.menuIconButton)||!lt.relatedTarget)return;const ct=lt.relatedTarget.classList.contains(gridClasses.menuList),pt=lt.relatedTarget.getAttribute("role")==="menuitem";(ct||pt)&&_e.current.setColumnHeaderFocus(at.field)},[_e]);useGridApiEventHandler(_e,"columnResizeStart",nt),useGridApiEventHandler(_e,"columnHeaderFocus",st),useGridApiEventHandler(_e,"virtualScrollerWheel",_e.current.hideColumnMenu),useGridApiEventHandler(_e,"virtualScrollerTouchMove",_e.current.hideColumnMenu)},columnsStateInitializer=(_e,et,rt)=>{var nt,ot,it,st,at,lt,ct;const pt=!!et.columnVisibilityModel||!!((nt=et.initialState)!=null&&(ot=nt.columns)!=null&&ot.columnVisibilityModel);rt.current.unstable_caches.columns={isUsingColumnVisibilityModel:pt};const ut=computeColumnTypes(et.columnTypes),ht=createColumnsState({apiRef:rt,columnTypes:ut,columnsToUpsert:et.columns,initialState:(it=et.initialState)==null?void 0:it.columns,shouldRegenColumnVisibilityModelFromColumns:!pt,currentColumnVisibilityModel:(st=(at=et.columnVisibilityModel)!=null?at:(lt=et.initialState)==null||(ct=lt.columns)==null?void 0:ct.columnVisibilityModel)!=null?st:{},keepOnlyColumnsToUpsert:!0});return _extends({},_e,{columns:ht})};function useGridColumns(_e,et){var rt,nt;const ot=useGridLogger(_e,"useGridColumns"),it=reactExports.useMemo(()=>computeColumnTypes(et.columnTypes),[et.columnTypes]),st=reactExports.useRef(et.columns),at=reactExports.useRef(it);_e.current.unstable_registerControlState({stateId:"visibleColumns",propModel:et.columnVisibilityModel,propOnChange:et.onColumnVisibilityModelChange,stateSelector:gridColumnVisibilityModelSelector,changeEvent:"columnVisibilityModelChange"});const lt=reactExports.useCallback(Bt=>{ot.debug("Updating columns state."),_e.current.setState(mergeColumnsState(Bt)),_e.current.forceUpdate(),_e.current.publishEvent("columnsChange",Bt.all)},[ot,_e]),ct=reactExports.useCallback(Bt=>gridColumnLookupSelector(_e)[Bt],[_e]),pt=reactExports.useCallback(()=>gridColumnDefinitionsSelector(_e),[_e]),ut=reactExports.useCallback(()=>gridVisibleColumnDefinitionsSelector(_e),[_e]),ht=reactExports.useCallback(()=>gridColumnsMetaSelector(_e),[_e]),ft=reactExports.useCallback((Bt,xt=!0)=>(xt?gridVisibleColumnDefinitionsSelector(_e):gridColumnDefinitionsSelector(_e)).findIndex(Mt=>Mt.field===Bt),[_e]),gt=reactExports.useCallback(Bt=>{const xt=ft(Bt);return gridColumnPositionsSelector(_e)[xt]},[_e,ft]),vt=reactExports.useCallback(Bt=>{gridColumnVisibilityModelSelector(_e)!==Bt&&(_e.current.setState(At=>_extends({},At,{columns:createColumnsState({apiRef:_e,columnTypes:it,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!1,currentColumnVisibilityModel:Bt,keepOnlyColumnsToUpsert:!1})})),_e.current.forceUpdate())},[_e,it]),yt=reactExports.useCallback(Bt=>{const xt=createColumnsState({apiRef:_e,columnTypes:it,columnsToUpsert:Bt,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!0,keepOnlyColumnsToUpsert:!1});lt(xt)},[_e,lt,it]),mt=reactExports.useCallback(Bt=>_e.current.updateColumns([Bt]),[_e]),Et=reactExports.useCallback((Bt,xt)=>{if(_e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var At;const Mt=gridColumnVisibilityModelSelector(_e),Nt=(At=Mt[Bt])!=null?At:!0;if(xt!==Nt){const $t=_extends({},Mt,{[Bt]:xt});_e.current.setColumnVisibilityModel($t)}}else{const Mt=_e.current.getColumn(Bt),Nt=_extends({},Mt,{hide:!xt});_e.current.updateColumns([Nt]);const $t={field:Bt,colDef:Nt,isVisible:xt};_e.current.publishEvent("columnVisibilityChange",$t)}},[_e]),bt=reactExports.useCallback((Bt,xt)=>{const At=gridColumnFieldsSelector(_e),Mt=At.findIndex(jt=>jt===Bt);if(Mt===xt)return;ot.debug(`Moving column ${Bt} to index ${xt}`);const Nt=[...At],$t=Nt.splice(Mt,1)[0];Nt.splice(xt,0,$t),lt(_extends({},gridColumnsSelector(_e.current.state),{all:Nt}));const Ft={field:Bt,element:_e.current.getColumnHeaderElement(Bt),colDef:_e.current.getColumn(Bt),targetIndex:xt,oldIndex:Mt};_e.current.publishEvent("columnOrderChange",Ft)},[_e,ot,lt]),Ct=reactExports.useCallback((Bt,xt)=>{ot.debug(`Updating column ${Bt} width to ${xt}`);const At=_e.current.getColumn(Bt),Mt=_extends({},At,{width:xt});_e.current.updateColumns([Mt]),_e.current.publishEvent("columnWidthChange",{element:_e.current.getColumnHeaderElement(Bt),colDef:Mt,width:xt})},[_e,ot]);useGridApiMethod(_e,{getColumn:ct,getAllColumns:pt,getColumnIndex:ft,getColumnPosition:gt,getVisibleColumns:ut,getColumnsMeta:ht,updateColumn:mt,updateColumns:yt,setColumnVisibilityModel:vt,setColumnVisibility:Et,setColumnIndex:bt,setColumnWidth:Ct});const wt=reactExports.useCallback((Bt,xt)=>{const At={};if(_e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var Mt,Nt,$t;const zt=gridColumnVisibilityModelSelector(_e);(!xt.exportOnlyDirtyModels||et.columnVisibilityModel!=null||Object.keys((Mt=(Nt=et.initialState)==null||($t=Nt.columns)==null?void 0:$t.columnVisibilityModel)!=null?Mt:{}).length>0||Object.keys(zt).length>0)&&(At.columnVisibilityModel=zt)}At.orderedFields=gridColumnFieldsSelector(_e);const Ft=gridColumnDefinitionsSelector(_e),jt={};return Ft.forEach(zt=>{if(zt.hasBeenResized){const Yt={};COLUMNS_DIMENSION_PROPERTIES.forEach(Kt=>{let er=zt[Kt];er===1/0&&(er=-1),Yt[Kt]=er}),jt[zt.field]=Yt}}),Object.keys(jt).length>0&&(At.dimensions=jt),_extends({},Bt,{columns:At})},[_e,et.columnVisibilityModel,(rt=et.initialState)==null?void 0:rt.columns]),Rt=reactExports.useCallback((Bt,xt)=>{var At;const Mt=_e.current.unstable_caches.columns.isUsingColumnVisibilityModel?(At=xt.stateToRestore.columns)==null?void 0:At.columnVisibilityModel:void 0,Nt=xt.stateToRestore.columns;if(Mt==null&&Nt==null)return Bt;const $t=createColumnsState({apiRef:_e,columnTypes:it,columnsToUpsert:[],initialState:Nt,shouldRegenColumnVisibilityModelFromColumns:!_e.current.unstable_caches.columns.isUsingColumnVisibilityModel,currentColumnVisibilityModel:Mt,keepOnlyColumnsToUpsert:!1});return _e.current.setState(mergeColumnsState($t)),Nt!=null&&_e.current.publishEvent("columnsChange",$t.all),Bt},[_e,it]),It=reactExports.useCallback((Bt,xt)=>{if(xt===GridPreferencePanelsValue.columns){var At;const Mt=et.components.ColumnsPanel;return jsx(Mt,_extends({},(At=et.componentsProps)==null?void 0:At.columnsPanel))}return Bt},[et.components.ColumnsPanel,(nt=et.componentsProps)==null?void 0:nt.columnsPanel]);useGridRegisterPipeProcessor(_e,"exportState",wt),useGridRegisterPipeProcessor(_e,"restoreState",Rt),useGridRegisterPipeProcessor(_e,"preferencePanel",It);const St=reactExports.useRef(null);useGridApiEventHandler(_e,"viewportInnerSizeChange",Bt=>{St.current!==Bt.width&&(St.current=Bt.width,lt(hydrateColumnsWidth(gridColumnsSelector(_e.current.state),Bt.width)))}),useGridApiOptionHandler(_e,"columnVisibilityChange",et.onColumnVisibilityChange);const Ot=reactExports.useCallback(()=>{ot.info("Columns pipe processing have changed, regenerating the columns");const Bt=createColumnsState({apiRef:_e,columnTypes:it,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!_e.current.unstable_caches.columns.isUsingColumnVisibilityModel,keepOnlyColumnsToUpsert:!1});lt(Bt)},[_e,ot,lt,it]);useGridRegisterPipeApplier(_e,"hydrateColumns",Ot);const Ut=reactExports.useRef(!0);reactExports.useEffect(()=>{if(Ut.current){Ut.current=!1;return}if(ot.info(`GridColumns have changed, new length ${et.columns.length}`),st.current===et.columns&&at.current===it)return;const Bt=createColumnsState({apiRef:_e,columnTypes:it,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!_e.current.unstable_caches.columns.isUsingColumnVisibilityModel,columnsToUpsert:et.columns,keepOnlyColumnsToUpsert:!0});st.current=et.columns,at.current=it,lt(Bt)},[ot,_e,lt,et.columns,it]),reactExports.useEffect(()=>{et.columnVisibilityModel!==void 0&&_e.current.setColumnVisibilityModel(et.columnVisibilityModel)},[_e,ot,et.columnVisibilityModel])}const gridColumnGroupingSelector=_e=>_e.columnGrouping,gridColumnGroupsLookupSelector=createSelector(gridColumnGroupingSelector,_e=>_e.lookup),_excluded$y=["groupId","children"];function hasGroupPath(_e){return _e.groupPath!==void 0}const recurrentUnwrapGroupingColumnModel=(_e,et,rt)=>{if(isLeaf(_e)){if(rt[_e.field]!==void 0)throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${_e.field} occurrs two times in the grouping model:`,`- ${rt[_e.field].join(" > ")}`,`- ${et.join(" > ")}`].join(`
`));rt[_e.field]=et;return}const{groupId:nt,children:ot}=_e;ot.forEach(it=>{recurrentUnwrapGroupingColumnModel(it,[...et,nt],rt)})},unwrapGroupingColumnModel=_e=>{if(!_e)return{};const et={};return _e.forEach(rt=>{recurrentUnwrapGroupingColumnModel(rt,[],et)}),et},createGroupLookup=_e=>{let et={};return _e.forEach(rt=>{if(isLeaf(rt))return;const{groupId:nt,children:ot}=rt,it=_objectWithoutPropertiesLoose(rt,_excluded$y);if(!nt)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");ot||console.warn(`MUI: group groupId=${nt} has no children.`);const st=_extends({},it,{groupId:nt}),at=createGroupLookup(ot);if(at[nt]!==void 0||et[nt]!==void 0)throw new Error(`MUI: The groupId ${nt} is used multiple times in the columnGroupingModel.`);et=_extends({},et,at,{[nt]:st})}),_extends({},et)},columnGroupsStateInitializer=(_e,et)=>{var rt;const nt=createGroupLookup((rt=et.columnGroupingModel)!=null?rt:[]);return _extends({},_e,{columnGrouping:{lookup:nt,groupCollapsedModel:{}}})},useGridColumnGrouping=(_e,et)=>{var rt;const nt=reactExports.useCallback(at=>{var lt,ct;return(lt=(ct=gridColumnLookupSelector(_e)[at])==null?void 0:ct.groupPath)!=null?lt:[]},[_e]),ot=reactExports.useCallback(()=>gridColumnGroupsLookupSelector(_e),[_e]);useGridApiMethod(_e,{unstable_getColumnGroupPath:nt,unstable_getAllGroupDetails:ot});const st=reactExports.useRef(!0);reactExports.useEffect(()=>{var at,lt;if(st.current){st.current=!1;return}if(!((at=et.experimentalFeatures)!=null&&at.columnGrouping))return;const ct=createGroupLookup((lt=et.columnGroupingModel)!=null?lt:[]);_e.current.setState(pt=>_extends({},pt,{columnGrouping:_extends({},pt.columnGrouping,{lookup:ct})}))},[_e,et.columnGroupingModel,(rt=et.experimentalFeatures)==null?void 0:rt.columnGrouping])},COMPACT_DENSITY_FACTOR=.7,COMFORTABLE_DENSITY_FACTOR=1.3,getUpdatedDensityState=(_e,et,rt,nt)=>{switch(_e){case GridDensityTypes.Compact:return{value:_e,headerHeight:Math.floor(et*COMPACT_DENSITY_FACTOR),rowHeight:Math.floor(rt*COMPACT_DENSITY_FACTOR),headerGroupingMaxDepth:nt,factor:COMPACT_DENSITY_FACTOR};case GridDensityTypes.Comfortable:return{value:_e,headerHeight:Math.floor(et*COMFORTABLE_DENSITY_FACTOR),rowHeight:Math.floor(rt*COMFORTABLE_DENSITY_FACTOR),headerGroupingMaxDepth:nt,factor:COMFORTABLE_DENSITY_FACTOR};default:return{value:_e,headerHeight:et,rowHeight:rt,headerGroupingMaxDepth:nt,factor:1}}},densityStateInitializer=(_e,et)=>{let rt;if(et.columnGroupingModel==null||Object.keys(et.columnGroupingModel).length===0)rt=0;else{const nt=unwrapGroupingColumnModel(et.columnGroupingModel),ot=_e.columns,it=ot.all.filter(st=>ot.columnVisibilityModel[st]!==!1);it.length===0?rt=0:rt=Math.max(...it.map(st=>{var at,lt;return(at=(lt=nt[st])==null?void 0:lt.length)!=null?at:0}))}return _extends({},_e,{density:getUpdatedDensityState(et.density,et.headerHeight,et.rowHeight,rt)})},useGridDensity=(_e,et)=>{const rt=useGridSelector(_e,gridVisibleColumnDefinitionsSelector),nt=rt.length>0?Math.max(...rt.map(at=>{var lt,ct;return(lt=(ct=at.groupPath)==null?void 0:ct.length)!=null?lt:0})):0,ot=useGridLogger(_e,"useDensity"),it=reactExports.useCallback((at,lt=et.headerHeight,ct=et.rowHeight,pt=nt)=>{ot.debug(`Set grid density to ${at}`),_e.current.setState(ut=>{const ht=gridDensitySelector(ut),ft=getUpdatedDensityState(at,lt,ct,pt);return isDeepEqual(ht,ft)?ut:_extends({},ut,{density:ft})}),_e.current.forceUpdate()},[ot,_e,et.headerHeight,et.rowHeight,nt]);reactExports.useEffect(()=>{_e.current.setDensity(et.density,et.headerHeight,et.rowHeight,nt)},[_e,et.density,et.rowHeight,et.headerHeight,nt]),useGridApiMethod(_e,{setDensity:it})};function exportAs(_e,et="csv",rt=document.title||"untitled"){const nt=`${rt}.${et}`;if("download"in HTMLAnchorElement.prototype){const ot=URL.createObjectURL(_e),it=document.createElement("a");it.href=ot,it.download=nt,it.click(),setTimeout(()=>{URL.revokeObjectURL(ot)});return}throw new Error("MUI: exportAs not supported")}const serializeCellValue=(_e,et)=>{if(typeof _e=="string"){const rt=_e.replace(/"/g,'""');return[et,`
`,"\r"].some(nt=>rt.includes(nt))?`"${rt}"`:rt}return _e};buildWarning(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);const serializeRow=(_e,et,rt,nt)=>et.map(ot=>{const it=rt(_e,ot.field);return serializeCellValue(it.formattedValue,nt)});function buildCSV(_e){const{columns:et,rowIds:rt,getCellParams:nt,delimiterCharacter:ot,includeHeaders:it}=_e,st=rt.reduce((lt,ct)=>`${lt}${serializeRow(ct,et,nt,ot).join(ot)}\r
`,"").trim();return it?`${`${et.filter(lt=>lt.field!==GRID_CHECKBOX_SELECTION_COL_DEF.field).map(lt=>serializeCellValue(lt.headerName||lt.field,ot)).join(ot)}\r
`}${st}`.trim():st}const getColumnsToExport=({apiRef:_e,options:et})=>{const rt=gridColumnDefinitionsSelector(_e);return et.fields?et.fields.map(ot=>rt.find(it=>it.field===ot)).filter(ot=>!!ot):(et.allColumns?rt:gridVisibleColumnDefinitionsSelector(_e)).filter(ot=>!ot.disableExport)},defaultGetRowsToExport=({apiRef:_e})=>{var et,rt;const nt=gridFilteredSortedRowIdsSelector(_e),ot=gridRowTreeSelector(_e),it=_e.current.getSelectedRows(),st=nt.filter(pt=>{var ut;return((ut=ot[pt].position)!=null?ut:"body")==="body"}),at=gridPinnedRowsSelector(_e),lt=(at==null||(et=at.top)==null?void 0:et.map(pt=>pt.id))||[],ct=(at==null||(rt=at.bottom)==null?void 0:rt.map(pt=>pt.id))||[];return st.unshift(...lt),st.push(...ct),it.size>0?st.filter(pt=>it.has(pt)):st},useGridCsvExport=_e=>{const et=useGridLogger(_e,"useGridCsvExport"),rt=reactExports.useCallback((st={})=>{var at,lt;et.debug("Get data as CSV");const ct=getColumnsToExport({apiRef:_e,options:st}),ut=((at=st.getRowsToExport)!=null?at:defaultGetRowsToExport)({apiRef:_e});return buildCSV({columns:ct,rowIds:ut,getCellParams:_e.current.getCellParams,delimiterCharacter:st.delimiter||",",includeHeaders:(lt=st.includeHeaders)!=null?lt:!0})},[et,_e]),nt=reactExports.useCallback(st=>{et.debug("Export data as CSV");const at=rt(st),lt=new Blob([st!=null&&st.utf8WithBom?new Uint8Array([239,187,191]):"",at],{type:"text/csv"});exportAs(lt,"csv",st==null?void 0:st.fileName)},[et,rt]);useGridApiMethod(_e,{getDataAsCsv:rt,exportDataAsCsv:nt});const it=reactExports.useCallback((st,at)=>{var lt;return(lt=at.csvOptions)!=null&&lt.disableToolbarButton?st:[...st,{component:jsx(GridCsvExportMenuItem,{options:at.csvOptions}),componentName:"csvExport"}]},[]);useGridRegisterPipeProcessor(_e,"exportMenu",it)},gridRowsMetaSelector=_e=>_e.rowsMeta;function raf(){return new Promise(_e=>{requestAnimationFrame(()=>{_e()})})}function getChromeVersion(){const _e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return _e?parseInt(_e[2],10):null}const useGridPrintExport=(_e,et)=>{const rt=useGridLogger(_e,"useGridPrintExport"),nt=reactExports.useRef(null),ot=reactExports.useRef(null),it=reactExports.useRef({});reactExports.useEffect(()=>{nt.current=ownerDocument(_e.current.rootElementRef.current)},[_e]);const st=reactExports.useCallback((ft,gt)=>new Promise(vt=>{if(!ft&&!gt){vt();return}const yt=getColumnsToExport({apiRef:_e,options:{fields:ft,allColumns:gt}}).map(bt=>bt.field),mt=gridColumnDefinitionsSelector(_e),Et={};mt.forEach(bt=>{Et[bt.field]=yt.includes(bt.field)}),_e.current.setColumnVisibilityModel(Et),vt()}),[_e]),at=reactExports.useCallback(ft=>{const gt=document.createElement("iframe");return gt.style.position="absolute",gt.style.width="0px",gt.style.height="0px",gt.title=ft||document.title,gt},[]),lt=reactExports.useCallback((ft,gt)=>{var vt,yt;const mt=_extends({copyStyles:!0,hideToolbar:!1,hideFooter:!1},gt),Et=ft.contentDocument;if(!Et)return;const bt=gridDensityTotalHeaderHeightSelector(_e),Ct=gridRowsMetaSelector(_e.current.state),Tt=_e.current.rootElementRef.current,wt=Tt.cloneNode(!0),Rt=wt.querySelector(`.${gridClasses.virtualScroller}`);Rt.style.height="auto",Rt.style.width="auto",Rt.parentElement.style.width="auto",Rt.parentElement.style.height="auto";const It=wt.querySelector(`.${gridClasses.main}`);It.style.overflow="visible";const St=getChromeVersion();St&&St>=108&&(wt.style.contain="size");const Ot=wt.querySelector(`.${gridClasses.columnHeaders}`).querySelector(`.${gridClasses.columnHeadersInner}`);Ot.style.width="100%";let Ut=((vt=Tt.querySelector(`.${gridClasses.toolbarContainer}`))==null?void 0:vt.clientHeight)||0,Bt=((yt=Tt.querySelector(`.${gridClasses.footerContainer}`))==null?void 0:yt.clientHeight)||0;if(mt.hideToolbar){var xt;(xt=wt.querySelector(`.${gridClasses.toolbarContainer}`))==null||xt.remove(),Ut=0}if(mt.hideFooter){var At;(At=wt.querySelector(`.${gridClasses.footerContainer}`))==null||At.remove(),Bt=0}wt.style.height=`${Ct.currentPageTotalHeight+bt+Ut+Bt}px`;const Mt=document.createElement("div");Mt.appendChild(wt),Et.body.innerHTML=Mt.innerHTML;const Nt=typeof mt.pageStyle=="function"?mt.pageStyle():mt.pageStyle;if(typeof Nt=="string"){const $t=Et.createElement("style");$t.appendChild(Et.createTextNode(Nt)),Et.head.appendChild($t)}if(mt.bodyClassName&&Et.body.classList.add(...mt.bodyClassName.split(" ")),mt.copyStyles){const $t=nt.current.querySelectorAll("style, link[rel='stylesheet']");for(let Ft=0;Ft<$t.length;Ft+=1){const jt=$t[Ft];if(jt.tagName==="STYLE"){const zt=Et.createElement(jt.tagName),Yt=jt.sheet;if(Yt){let Kt="";for(let er=0;er<Yt.cssRules.length;er+=1)typeof Yt.cssRules[er].cssText=="string"&&(Kt+=`${Yt.cssRules[er].cssText}\r
`);zt.appendChild(Et.createTextNode(Kt)),Et.head.appendChild(zt)}}else if(jt.getAttribute("href")){const zt=Et.createElement(jt.tagName);for(let Yt=0;Yt<jt.attributes.length;Yt+=1){const Kt=jt.attributes[Yt];Kt&&zt.setAttribute(Kt.nodeName,Kt.nodeValue||"")}Et.head.appendChild(zt)}}}ft.contentWindow.print()},[_e,nt]),ct=reactExports.useCallback(ft=>{var gt,vt;nt.current.body.removeChild(ft),_e.current.restoreState(ot.current||{}),(gt=ot.current)!=null&&(vt=gt.columns)!=null&&vt.columnVisibilityModel||_e.current.setColumnVisibilityModel(it.current),_e.current.unstable_enableVirtualization(),ot.current=null,it.current={}},[_e]),ut={exportDataAsPrint:reactExports.useCallback(async ft=>{if(rt.debug("Export data as Print"),!_e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");if(ot.current=_e.current.exportState(),it.current=gridColumnVisibilityModelSelector(_e),et.pagination){const vt=gridVisibleRowCountSelector(_e);_e.current.setPageSize(vt)}await st(ft==null?void 0:ft.fields,ft==null?void 0:ft.allColumns),_e.current.unstable_disableVirtualization(),await raf();const gt=at(ft==null?void 0:ft.fileName);gt.onload=()=>{lt(gt,ft),gt.contentWindow.matchMedia("print").addEventListener("change",yt=>{yt.matches===!1&&ct(gt)})},nt.current.body.appendChild(gt)},[et,rt,_e,at,lt,ct,st])};useGridApiMethod(_e,ut);const ht=reactExports.useCallback((ft,gt)=>{var vt;return(vt=gt.printOptions)!=null&&vt.disableToolbarButton?ft:[...ft,{component:jsx(GridPrintExportMenuItem,{options:gt.printOptions}),componentName:"printExport"}]},[]);useGridRegisterPipeProcessor(_e,"exportMenu",ht)},_excluded$x=["rowsBeforePartialUpdates"];function checkGridRowIdIsValid(_e,et,rt="A row was provided without id in the rows prop:"){if(_e==null)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",rt,JSON.stringify(et)].join(`
`))}const getRowIdFromRowModel=(_e,et,rt)=>{const nt=et?et(_e):_e.id;return checkGridRowIdIsValid(nt,_e,rt),nt},createRowsInternalCache=({rows:_e,getRowId:et,loading:rt,rowCount:nt})=>{const ot={rowsBeforePartialUpdates:_e,loadingPropBeforePartialUpdates:rt,rowCountPropBeforePartialUpdates:nt,idRowsLookup:{},idToIdLookup:{},ids:[]};for(let it=0;it<_e.length;it+=1){const st=_e[it],at=getRowIdFromRowModel(st,et);ot.idRowsLookup[at]=st,ot.idToIdLookup[at]=at,ot.ids.push(at)}return ot},getRowsStateFromCache=({apiRef:_e,previousTree:et,rowCountProp:rt,loadingProp:nt})=>{const ot=_e.current.unstable_caches.rows,it=_objectWithoutPropertiesLoose(ot,_excluded$x),st=rt??0,at=_e.current.unstable_applyStrategyProcessor("rowTreeCreation",_extends({},it,{previousTree:et})),lt=_e.current.unstable_applyPipeProcessors("hydrateRows",at),ct=lt.treeDepth===1?lt.ids.length:Object.values(lt.tree).filter(pt=>pt.parent==null&&!pt.isPinned).length;return _extends({},lt,{groupingResponseBeforeRowHydration:at,loading:nt,totalRowCount:Math.max(st,lt.ids.length),totalTopLevelRowCount:Math.max(st,ct)})},getTreeNodeDescendants=(_e,et,rt)=>{var nt;const ot=(nt=_e[et])==null?void 0:nt.children;if(ot==null)return[];const it=[];for(let st=0;st<ot.length;st+=1){const at=ot[st],lt=_e[at];(!rt||!lt.isAutoGenerated)&&it.push(at),it.push(...getTreeNodeDescendants(_e,lt.id,rt))}return it};function calculatePinnedRowsHeight(_e){var et,rt;const nt=gridPinnedRowsSelector(_e),ot=(nt==null||(et=nt.top)==null?void 0:et.reduce((st,at)=>(st+=_e.current.unstable_getRowHeight(at.id),st),0))||0,it=(nt==null||(rt=nt.bottom)==null?void 0:rt.reduce((st,at)=>(st+=_e.current.unstable_getRowHeight(at.id),st),0))||0;return{top:ot,bottom:it}}const cleanFilterItem=(_e,et)=>{const rt=_extends({},_e);if(rt.id==null&&(rt.id=Math.round(Math.random()*1e5)),rt.operatorValue==null){const nt=gridColumnLookupSelector(et)[rt.columnField];rt.operatorValue=nt&&nt.filterOperators[0].value}return rt},filterModelDisableMultiColumnsFilteringWarning=buildWarning(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),filterModelMissingItemIdWarning=buildWarning("MUI: The 'id' field is required on `filterModel.items` when you use multiple filters.","error"),filterModelMissingItemOperatorWarning=buildWarning(["MUI: One of your filtering item have no `operatorValue` provided.","This property will become required on `@mui/x-data-grid@6.X`."]),sanitizeFilterModel=(_e,et,rt)=>{const nt=_e.items.length>1;let ot;nt&&et?(filterModelDisableMultiColumnsFilteringWarning(),ot=[_e.items[0]]):ot=_e.items;const it=nt&&ot.some(at=>at.id==null),st=ot.some(at=>at.operatorValue==null);return it&&filterModelMissingItemIdWarning(),st&&filterModelMissingItemOperatorWarning(),st||it?_extends({},_e,{items:ot.map(at=>cleanFilterItem(at,rt))}):_e.items!==ot?_extends({},_e,{items:ot}):_e},mergeStateWithFilterModel=(_e,et,rt)=>nt=>_extends({},nt,{filterModel:sanitizeFilterModel(_e,et,rt)}),getFilterCallbackFromItem=(_e,et)=>{if(!_e.columnField||!_e.operatorValue)return null;const rt=et.current.getColumn(_e.columnField);if(!rt)return null;let nt;if(rt.valueParser){var ot;const pt=rt.valueParser;nt=Array.isArray(_e.value)?(ot=_e.value)==null?void 0:ot.map(ut=>pt(ut)):pt(_e.value)}else nt=_e.value;const it=_extends({},_e,{value:nt}),st=rt.filterOperators;if(!(st!=null&&st.length))throw new Error(`MUI: No filter operators found for column '${rt.field}'.`);const at=st.find(pt=>pt.value===it.operatorValue);if(!at)throw new Error(`MUI: No filter operator found for column '${rt.field}' and operator value '${it.operatorValue}'.`);const lt=at.getApplyFilterFn(it,rt);return typeof lt!="function"?null:{fn:pt=>{const ut=et.current.getCellParams(pt,it.columnField);return lt(ut)},item:it}},buildAggregatedFilterItemsApplier=(_e,et)=>{const{items:rt}=_e,nt=rt.map(ot=>getFilterCallbackFromItem(ot,et)).filter(ot=>!!ot);return nt.length===0?null:(ot,it)=>{const st={};return(it?nt.filter(lt=>it(lt.item.columnField)):nt).forEach(lt=>{st[lt.item.id]=lt.fn(ot)}),st}},buildAggregatedQuickFilterApplier=(_e,et)=>{const{quickFilterValues:rt=[]}=_e;if(rt.length===0)return null;const nt=gridColumnFieldsSelector(et),ot={};nt.forEach(st=>{const at=et.current.getColumn(st),lt=at==null?void 0:at.getApplyQuickFilterFn;lt&&(ot[st]=rt.map(ct=>lt(ct,at,et)))});const it=rt.filter((st,at)=>Object.keys(ot).some(lt=>ot[lt][at]!=null));return it.length===0?null:(st,at)=>{const lt={},ct=[];Object.keys(ot).forEach(ut=>{(!at||at(ut))&&(lt[ut]=et.current.getCellParams(st,ut),ct.push(ut))});const pt={};return it.forEach((ut,ht)=>{const ft=ct.some(gt=>{var vt,yt;return ot[gt][ht]==null?!1:(vt=(yt=ot[gt])[ht])==null?void 0:vt.call(yt,lt[gt])});pt[ut]=ft}),pt}},buildAggregatedFilterApplier=(_e,et)=>{const rt=buildAggregatedFilterItemsApplier(_e,et),nt=buildAggregatedQuickFilterApplier(_e,et);return(ot,it)=>({passingFilterItems:rt&&rt(ot,it),passingQuickFilterValues:nt&&nt(ot,it)})},passFilterLogic=(_e,et,rt,nt)=>{var ot,it;const st=rt.items.filter(ut=>getFilterCallbackFromItem(ut,nt)!==null),at=_e.filter(ut=>ut!=null),lt=et.filter(ut=>ut!=null),ct=(ot=rt.quickFilterLogicOperator)!=null?ot:getDefaultGridFilterModel().quickFilterLogicOperator,pt=(it=rt.linkOperator)!=null?it:getDefaultGridFilterModel().linkOperator;if(at.length>0){const ut=ht=>at.some(ft=>ft[ht.id]);if(pt===GridLinkOperator.And){if(!st.every(ut))return!1}else if(!st.some(ut))return!1}if(lt.length>0&&rt.quickFilterValues!=null){const ut=ht=>lt.some(ft=>ft[ht]);if(ct===GridLinkOperator.And){if(!rt.quickFilterValues.every(ut))return!1}else if(!rt.quickFilterValues.some(ut))return!1}return!0},filterStateInitializer=(_e,et,rt)=>{var nt,ot,it,st;const at=(nt=(ot=et.filterModel)!=null?ot:(it=et.initialState)==null||(st=it.filter)==null?void 0:st.filterModel)!=null?nt:getDefaultGridFilterModel();return _extends({},_e,{filter:{filterModel:sanitizeFilterModel(at,et.disableMultipleColumnsFiltering,rt),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},useGridFilter=(_e,et)=>{var rt,nt,ot;const it=useGridLogger(_e,"useGridFilter");_e.current.unstable_registerControlState({stateId:"filter",propModel:et.filterModel,propOnChange:et.onFilterModelChange,stateSelector:gridFilterModelSelector,changeEvent:"filterModelChange"});const st=reactExports.useCallback(()=>{_e.current.setState(It=>{const St=gridFilterModelSelector(It,_e.current.instanceId),Pt=et.filterMode===GridFeatureModeConstant.client?buildAggregatedFilterApplier(St,_e):null,Ot=_e.current.unstable_applyStrategyProcessor("filtering",{isRowMatchingFilters:Pt,filterModel:St??getDefaultGridFilterModel()});return _extends({},It,{filter:_extends({},It.filter,Ot)})}),_e.current.publishEvent("filteredRowsSet")},[et.filterMode,_e]),at=reactExports.useCallback(()=>{st(),_e.current.forceUpdate()},[_e,st]),lt=reactExports.useCallback(It=>{const St=gridFilterModelSelector(_e),Pt=[...St.items],Ot=Pt.findIndex(Ut=>Ut.id===It.id);Ot===-1?Pt.push(It):Pt[Ot]=It,_e.current.setFilterModel(_extends({},St,{items:Pt}),"upsertFilterItem")},[_e]),ct=reactExports.useCallback(It=>{const St=gridFilterModelSelector(_e),Pt=[...St.items];It.forEach(Ot=>{const Ut=It.findIndex(Bt=>Bt.id===Ot.id);Ut===-1?Pt.push(Ot):Pt[Ut]=Ot}),_e.current.setFilterModel(_extends({},St,{items:It}),"upsertFilterItems")},[_e]),pt=reactExports.useCallback(It=>{const St=gridFilterModelSelector(_e),Pt=St.items.filter(Ot=>Ot.id!==It.id);Pt.length!==St.items.length&&_e.current.setFilterModel(_extends({},St,{items:Pt}),"deleteFilterItem")},[_e]),ut=reactExports.useCallback(It=>{if(it.debug("Displaying filter panel"),It){const St=gridFilterModelSelector(_e),Pt=St.items.filter(Bt=>{var xt;if(Bt.value!==void 0)return!0;const Mt=(xt=_e.current.getColumn(Bt.columnField).filterOperators)==null?void 0:xt.find($t=>$t.value===Bt.operatorValue);return!(typeof(Mt==null?void 0:Mt.requiresFilterValue)>"u"?!0:Mt==null?void 0:Mt.requiresFilterValue)});let Ot;Pt.find(Bt=>Bt.columnField===It)?Ot=Pt:et.disableMultipleColumnsFiltering?Ot=[cleanFilterItem({columnField:It},_e)]:Ot=[...Pt,cleanFilterItem({columnField:It},_e)],_e.current.setFilterModel(_extends({},St,{items:Ot}))}_e.current.showPreferences(GridPreferencePanelsValue.filters)},[_e,it,et.disableMultipleColumnsFiltering]),ht=reactExports.useCallback(()=>{it.debug("Hiding filter panel"),_e.current.hidePreferences()},[_e,it]),ft=reactExports.useCallback(It=>{const St=gridFilterModelSelector(_e);St.linkOperator!==It&&_e.current.setFilterModel(_extends({},St,{linkOperator:It}),"changeLogicOperator")},[_e]),gt=reactExports.useCallback(It=>{const St=gridFilterModelSelector(_e);isDeepEqual(St.quickFilterValues,It)||_e.current.setFilterModel(_extends({},St,{quickFilterValues:[...It]}))},[_e]),vt=reactExports.useCallback((It,St)=>{gridFilterModelSelector(_e)!==It&&(it.debug("Setting filter model"),_e.current.unstable_updateControlState("filter",mergeStateWithFilterModel(It,et.disableMultipleColumnsFiltering,_e),St),_e.current.unstable_applyFilters())},[_e,it,et.disableMultipleColumnsFiltering]),yt=reactExports.useCallback(()=>{const It=gridVisibleSortedRowEntriesSelector(_e);return new Map(It.map(St=>[St.id,St.model]))},[_e]);useGridApiMethod(_e,{setFilterLinkOperator:ft,unstable_applyFilters:at,deleteFilterItem:pt,upsertFilterItem:lt,upsertFilterItems:ct,setFilterModel:vt,showFilterPanel:ut,hideFilterPanel:ht,getVisibleRowModels:yt,setQuickFilterValues:gt});const Et=reactExports.useCallback((It,St)=>{var Pt,Ot;const Ut=gridFilterModelSelector(_e);return!St.exportOnlyDirtyModels||et.filterModel!=null||((Pt=et.initialState)==null||(Ot=Pt.filter)==null?void 0:Ot.filterModel)!=null||!isDeepEqual(Ut,getDefaultGridFilterModel())?_extends({},It,{filter:{filterModel:Ut}}):It},[_e,et.filterModel,(rt=et.initialState)==null||(nt=rt.filter)==null?void 0:nt.filterModel]),bt=reactExports.useCallback((It,St)=>{var Pt;const Ot=(Pt=St.stateToRestore.filter)==null?void 0:Pt.filterModel;return Ot==null?It:(_e.current.unstable_updateControlState("filter",mergeStateWithFilterModel(Ot,et.disableMultipleColumnsFiltering,_e),"restoreState"),_extends({},It,{callbacks:[...It.callbacks,_e.current.unstable_applyFilters]}))},[_e,et.disableMultipleColumnsFiltering]),Ct=reactExports.useCallback((It,St)=>{if(St===GridPreferencePanelsValue.filters){var Pt;const Ot=et.components.FilterPanel;return jsx(Ot,_extends({},(Pt=et.componentsProps)==null?void 0:Pt.filterPanel))}return It},[et.components.FilterPanel,(ot=et.componentsProps)==null?void 0:ot.filterPanel]),Tt=reactExports.useCallback(It=>{if(et.filterMode===GridFeatureModeConstant.client&&It.isRowMatchingFilters){const St=gridRowIdsSelector(_e),Pt={};for(let Ot=0;Ot<St.length;Ot+=1){const Ut=St[Ot];let Bt;if(typeof Ut=="string"&&Ut.startsWith("auto-generated-group-footer"))Bt=!0;else{const{passingFilterItems:xt,passingQuickFilterValues:At}=It.isRowMatchingFilters(Ut);Bt=passFilterLogic([xt],[At],It.filterModel,_e)}Pt[Ut]=Bt}return{filteredRowsLookup:Pt,visibleRowsLookup:Pt,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}},[_e,et.filterMode]);useGridRegisterPipeProcessor(_e,"exportState",Et),useGridRegisterPipeProcessor(_e,"restoreState",bt),useGridRegisterPipeProcessor(_e,"preferencePanel",Ct),useGridRegisterStrategyProcessor(_e,GRID_DEFAULT_STRATEGY,"filtering",Tt);const wt=reactExports.useCallback(()=>{it.debug("onColUpdated - GridColumns changed, applying filters");const It=gridFilterModelSelector(_e),St=gridFilterableColumnLookupSelector(_e),Pt=It.items.filter(Ot=>Ot.columnField&&St[Ot.columnField]);Pt.length<It.items.length&&_e.current.setFilterModel(_extends({},It,{items:Pt}))},[_e,it]),Rt=reactExports.useCallback(It=>{It==="filtering"&&_e.current.unstable_applyFilters()},[_e]);useGridApiEventHandler(_e,"rowsSet",st),useGridApiEventHandler(_e,"rowExpansionChange",_e.current.unstable_applyFilters),useGridApiEventHandler(_e,"columnsChange",wt),useGridApiEventHandler(_e,"activeStrategyProcessorChange",Rt),useFirstRender(()=>{_e.current.unstable_applyFilters()}),reactExports.useEffect(()=>{et.filterModel!==void 0&&_e.current.setFilterModel(et.filterModel)},[_e,it,et.filterModel])},focusStateInitializer=_e=>_extends({},_e,{focus:{cell:null,columnHeader:null},tabIndex:{cell:null,columnHeader:null}}),useGridFocus=(_e,et)=>{const rt=useGridLogger(_e,"useGridFocus"),nt=reactExports.useRef(null),ot=reactExports.useCallback((yt,mt)=>{yt&&_e.current.getRow(yt.id)&&_e.current.publishEvent("cellFocusOut",_e.current.getCellParams(yt.id,yt.field),mt)},[_e]),it=reactExports.useCallback((yt,mt)=>{const Et=gridFocusCellSelector(_e);(Et==null?void 0:Et.id)===yt&&(Et==null?void 0:Et.field)===mt||(_e.current.setState(bt=>(rt.debug(`Focusing on cell with id=${yt} and field=${mt}`),_extends({},bt,{tabIndex:{cell:{id:yt,field:mt},columnHeader:null},focus:{cell:{id:yt,field:mt},columnHeader:null}}))),_e.current.forceUpdate(),_e.current.getRow(yt)&&(Et&&ot(Et,{}),_e.current.publishEvent("cellFocusIn",_e.current.getCellParams(yt,mt))))},[_e,rt,ot]),st=reactExports.useCallback((yt,mt={})=>{const Et=gridFocusCellSelector(_e);ot(Et,mt),_e.current.setState(bt=>(rt.debug(`Focusing on column header with colIndex=${yt}`),_extends({},bt,{tabIndex:{columnHeader:{field:yt},cell:null},focus:{columnHeader:{field:yt},cell:null}}))),_e.current.forceUpdate()},[_e,rt,ot]),at=reactExports.useCallback((yt,mt,Et)=>{let bt=_e.current.getColumnIndex(mt),Ct=_e.current.getRowIndexRelativeToVisibleRows(yt);const Tt=gridVisibleColumnDefinitionsSelector(_e);Et==="right"?bt+=1:Et==="left"?bt-=1:Ct+=1;const wt=getVisibleRows(_e,{pagination:et.pagination,paginationMode:et.paginationMode});bt>=Tt.length?(Ct+=1,Ct<wt.rows.length&&(bt=0)):bt<0&&(Ct-=1,Ct>=0&&(bt=Tt.length-1)),Ct=clamp(Ct,0,wt.rows.length-1);const Rt=wt.rows[Ct],It=_e.current.unstable_getCellColSpanInfo(Rt.id,bt);It&&It.spannedByColSpan&&(Et==="left"||Et==="below"?bt=It.leftVisibleCellIndex:Et==="right"&&(bt=It.rightVisibleCellIndex)),bt=clamp(bt,0,Tt.length-1);const St=Tt[bt];_e.current.setCellFocus(Rt.id,St.field)},[_e,et.pagination,et.paginationMode]),lt=reactExports.useCallback(({id:yt,field:mt})=>{_e.current.setCellFocus(yt,mt)},[_e]),ct=reactExports.useCallback((yt,mt)=>{mt.key==="Enter"||mt.key==="Tab"||isNavigationKey(mt.key)||_e.current.setCellFocus(yt.id,yt.field)},[_e]),pt=reactExports.useCallback(({field:yt},mt)=>{mt.target===mt.currentTarget&&_e.current.setColumnHeaderFocus(yt,mt)},[_e]),ut=reactExports.useCallback(()=>{rt.debug("Clearing focus"),_e.current.setState(yt=>_extends({},yt,{focus:{cell:null,columnHeader:null}}))},[rt,_e]),ht=reactExports.useCallback(yt=>{nt.current=yt},[]),ft=reactExports.useCallback(yt=>{const mt=nt.current;nt.current=null;const Et=gridFocusCellSelector(_e);if(!Et){mt&&_e.current.setCellFocus(mt.id,mt.field);return}if((mt==null?void 0:mt.id)===Et.id&&(mt==null?void 0:mt.field)===Et.field)return;const bt=_e.current.getCellElement(Et.id,Et.field);bt!=null&&bt.contains(yt.target)||(mt?_e.current.setCellFocus(mt.id,mt.field):(_e.current.setState(Ct=>_extends({},Ct,{focus:{cell:null,columnHeader:null}})),_e.current.forceUpdate(),ot(Et,yt)))},[_e,ot]),gt=reactExports.useCallback(yt=>{if(yt.cellMode==="view")return;const mt=gridFocusCellSelector(_e);((mt==null?void 0:mt.id)!==yt.id||(mt==null?void 0:mt.field)!==yt.field)&&_e.current.setCellFocus(yt.id,yt.field)},[_e]),vt=reactExports.useCallback(()=>{const yt=gridFocusCellSelector(_e);yt&&!_e.current.getRow(yt.id)&&_e.current.setState(mt=>_extends({},mt,{focus:{cell:null,columnHeader:null}}))},[_e]);useGridApiMethod(_e,{setCellFocus:it,setColumnHeaderFocus:st,unstable_moveFocusToRelativeCell:at}),reactExports.useEffect(()=>{const yt=ownerDocument(_e.current.rootElementRef.current);return yt.addEventListener("click",ft),()=>{yt.removeEventListener("click",ft)}},[_e,ft]),useGridApiEventHandler(_e,"columnHeaderBlur",ut),useGridApiEventHandler(_e,"cellDoubleClick",lt),useGridApiEventHandler(_e,"cellMouseDown",ht),useGridApiEventHandler(_e,"cellKeyDown",ct),useGridApiEventHandler(_e,"cellModeChange",gt),useGridApiEventHandler(_e,"columnHeaderFocus",pt),useGridApiEventHandler(_e,"rowsSet",vt)};function enrichPageRowsWithPinnedRows(_e,et){const rt=gridPinnedRowsSelector(_e)||{};return[...rt.top||[],...et,...rt.bottom||[]]}const useGridKeyboardNavigation=(_e,et)=>{const rt=useGridLogger(_e,"useGridKeyboardNavigation"),nt=useGridVisibleRows(_e,et).rows,ot=reactExports.useMemo(()=>enrichPageRowsWithPinnedRows(_e,nt),[_e,nt]),it=reactExports.useCallback((ut,ht,ft="left")=>{const gt=gridVisibleSortedRowEntriesSelector(_e),vt=_e.current.unstable_getCellColSpanInfo(ht,ut);vt&&vt.spannedByColSpan&&(ft==="left"?ut=vt.leftVisibleCellIndex:ft==="right"&&(ut=vt.rightVisibleCellIndex));const yt=gt.findIndex(Et=>Et.id===ht);rt.debug(`Navigating to cell row ${yt}, col ${ut}`),_e.current.scrollToIndexes({colIndex:ut,rowIndex:yt});const mt=_e.current.getVisibleColumns()[ut].field;_e.current.setCellFocus(ht,mt)},[_e,rt]),st=reactExports.useCallback((ut,ht)=>{rt.debug(`Navigating to header col ${ut}`),_e.current.scrollToIndexes({colIndex:ut});const ft=_e.current.getVisibleColumns()[ut].field;_e.current.setColumnHeaderFocus(ft,ht)},[_e,rt]),at=reactExports.useCallback(ut=>ot[ut].id,[ot]),lt=reactExports.useCallback((ut,ht)=>{const ft=_e.current.getRootDimensions();if(ot.length===0||!ft)return;const gt=_e.current.unstable_getViewportPageSize(),vt=ut.field?_e.current.getColumnIndex(ut.field):0,yt=ot.findIndex(wt=>wt.id===ut.id),mt=0,Et=ot.length-1,bt=0,Ct=gridVisibleColumnDefinitionsSelector(_e).length-1;let Tt=!0;switch(ht.key){case"ArrowDown":case"Enter":{yt<Et&&it(vt,at(yt+1));break}case"ArrowUp":{yt>mt?it(vt,at(yt-1)):st(vt,ht);break}case"ArrowRight":{vt<Ct&&it(vt+1,at(yt),"right");break}case"ArrowLeft":{vt>bt&&it(vt-1,at(yt));break}case"Tab":{ht.shiftKey&&vt>bt?it(vt-1,at(yt),"left"):!ht.shiftKey&&vt<Ct&&it(vt+1,at(yt),"right");break}case" ":{if(ut.field===GRID_DETAIL_PANEL_TOGGLE_FIELD)break;const Rt=ut.colDef;if(Rt&&Rt.type==="treeDataGroup")break;!ht.shiftKey&&yt<Et&&it(vt,at(Math.min(yt+gt,Et)));break}case"PageDown":{yt<Et&&it(vt,at(Math.min(yt+gt,Et)));break}case"PageUp":{const wt=Math.max(yt-gt,mt);wt!==yt&&wt>=mt?it(vt,at(wt)):st(vt,ht);break}case"Home":{ht.ctrlKey||ht.metaKey||ht.shiftKey?it(bt,at(mt)):it(bt,at(yt));break}case"End":{ht.ctrlKey||ht.metaKey||ht.shiftKey?it(Ct,at(Et)):it(Ct,at(yt));break}default:Tt=!1}Tt&&ht.preventDefault()},[_e,ot,it,st,at]),ct=reactExports.useCallback((ut,ht)=>{const ft=ht.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);if(!!ft&&ft.contains(ht.target)&&ut.field!==GRID_CHECKBOX_SELECTION_COL_DEF.field||!_e.current.getRootDimensions())return;const yt=_e.current.unstable_getViewportPageSize(),mt=ut.field?_e.current.getColumnIndex(ut.field):0,Et=0,bt=ot.length-1,Ct=0,Tt=gridVisibleColumnDefinitionsSelector(_e).length-1;let wt=!0;switch(ht.key){case"ArrowDown":{it(mt,at(Et));break}case"ArrowRight":{mt<Tt&&st(mt+1,ht);break}case"ArrowLeft":{mt>Ct&&st(mt-1,ht);break}case"PageDown":{bt!==null&&it(mt,at(Math.min(Et+yt,bt)));break}case"Home":{st(Ct,ht);break}case"End":{st(Tt,ht);break}case"Enter":{(ht.ctrlKey||ht.metaKey)&&_e.current.toggleColumnMenu(ut.field);break}case" ":break;default:wt=!1}wt&&ht.preventDefault()},[_e,ot,it,st,at]),pt=reactExports.useCallback((ut,ht)=>{if(!ht.currentTarget.contains(ht.target))return;const ft=_e.current.getCellParams(ut.id,ut.field);ft.cellMode!==GridCellModes.Edit&&isNavigationKey(ht.key)&&_e.current.publishEvent("cellNavigationKeyDown",ft,ht)},[_e]);useGridApiEventHandler(_e,"cellNavigationKeyDown",lt),useGridApiEventHandler(_e,"columnHeaderKeyDown",ct),useGridApiEventHandler(_e,"cellKeyDown",pt)},defaultPageSize=_e=>_e?0:100,mergeStateWithPageSize=_e=>et=>_extends({},et,{pagination:_extends({},et.pagination,{pageSize:_e})}),useGridPageSize=(_e,et)=>{var rt,nt;const ot=useGridLogger(_e,"useGridPageSize"),it=useGridSelector(_e,gridDensityRowHeightSelector);_e.current.unstable_registerControlState({stateId:"pageSize",propModel:et.pageSize,propOnChange:et.onPageSizeChange,stateSelector:gridPageSizeSelector,changeEvent:"pageSizeChange"});const at={setPageSize:reactExports.useCallback(ut=>{ut!==gridPageSizeSelector(_e)&&(ot.debug(`Setting page size to ${ut}`),_e.current.setState(mergeStateWithPageSize(ut)),_e.current.forceUpdate())},[_e,ot])};useGridApiMethod(_e,at);const lt=reactExports.useCallback((ut,ht)=>{var ft,gt;const vt=gridPageSizeSelector(_e);return!ht.exportOnlyDirtyModels||et.pageSize!=null||((ft=et.initialState)==null||(gt=ft.pagination)==null?void 0:gt.pageSize)!=null||vt!==defaultPageSize(et.autoPageSize)?_extends({},ut,{pagination:_extends({},ut.pagination,{pageSize:vt})}):ut},[_e,et.pageSize,(rt=et.initialState)==null||(nt=rt.pagination)==null?void 0:nt.pageSize,et.autoPageSize]),ct=reactExports.useCallback((ut,ht)=>{var ft;const gt=(ft=ht.stateToRestore.pagination)==null?void 0:ft.pageSize;return gt!=null&&_e.current.setState(mergeStateWithPageSize(gt)),ut},[_e]);useGridRegisterPipeProcessor(_e,"exportState",lt),useGridRegisterPipeProcessor(_e,"restoreState",ct);const pt=reactExports.useCallback(()=>{const ut=_e.current.getRootDimensions();if(!et.autoPageSize||!ut)return;const ht=calculatePinnedRowsHeight(_e),ft=Math.floor((ut.viewportInnerSize.height-ht.top-ht.bottom)/it);_e.current.setPageSize(ft)},[_e,et.autoPageSize,it]);useGridApiEventHandler(_e,"viewportInnerSizeChange",pt),reactExports.useEffect(()=>{et.pageSize!=null&&!et.autoPageSize&&_e.current.setPageSize(et.pageSize)},[_e,et.autoPageSize,et.pageSize]),reactExports.useEffect(()=>{pt()},[pt])},getPageCount=(_e,et)=>et>0&&_e>0?Math.ceil(_e/et):0,applyValidPage=_e=>_e.pageCount?_extends({},_e,{page:Math.max(Math.min(_e.page,_e.pageCount-1),0)}):_e,mergeStateWithPage=_e=>et=>_extends({},et,{pagination:applyValidPage(_extends({},et.pagination,{page:_e}))});buildWarning(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error");const useGridPage=(_e,et)=>{var rt,nt;const ot=useGridLogger(_e,"useGridPage"),it=useGridSelector(_e,gridVisibleTopLevelRowCountSelector);_e.current.unstable_registerControlState({stateId:"page",propModel:et.page,propOnChange:et.onPageChange,stateSelector:gridPageSelector,changeEvent:"pageChange"});const at={setPage:reactExports.useCallback(ht=>{ot.debug(`Setting page to ${ht}`),_e.current.setState(mergeStateWithPage(ht)),_e.current.forceUpdate()},[_e,ot])};useGridApiMethod(_e,at);const lt=reactExports.useCallback((ht,ft)=>{var gt,vt;const yt=gridPageSelector(_e);return!ft.exportOnlyDirtyModels||et.page!=null||((gt=et.initialState)==null||(vt=gt.pagination)==null?void 0:vt.page)!=null||yt!==0?_extends({},ht,{pagination:_extends({},ht.pagination,{page:yt})}):ht},[_e,et.page,(rt=et.initialState)==null||(nt=rt.pagination)==null?void 0:nt.page]),ct=reactExports.useCallback((ht,ft)=>{var gt,vt;const yt=(gt=(vt=ft.stateToRestore.pagination)==null?void 0:vt.page)!=null?gt:gridPageSelector(_e);return _e.current.setState(mergeStateWithPage(yt)),ht},[_e]);useGridRegisterPipeProcessor(_e,"exportState",lt),useGridRegisterPipeProcessor(_e,"restoreState",ct);const pt=ht=>{_e.current.setState(ft=>{const gt=getPageCount(ft.pagination.rowCount,ht);return _extends({},ft,{pagination:applyValidPage(_extends({},ft.pagination,{pageCount:gt,page:ft.pagination.page}))})}),_e.current.forceUpdate()},ut=()=>_e.current.scrollToIndexes({rowIndex:gridPageSelector(_e)*gridPageSizeSelector(_e)});useGridApiEventHandler(_e,"pageSizeChange",pt),useGridApiEventHandler(_e,"pageChange",ut),reactExports.useEffect(()=>{},[et.rowCount,et.paginationMode]),reactExports.useEffect(()=>{_e.current.setState(ht=>{const ft=et.rowCount!==void 0?et.rowCount:it,gt=getPageCount(ft,ht.pagination.pageSize),vt=et.page==null?ht.pagination.page:et.page;return _extends({},ht,{pagination:applyValidPage(_extends({},ht.pagination,{page:vt,rowCount:ft,pageCount:gt}))})}),_e.current.forceUpdate()},[it,et.rowCount,et.page,et.paginationMode,_e])},paginationStateInitializer=(_e,et)=>{var rt,nt,ot,it,st,at,lt,ct;let pt;return et.pageSize!=null?pt=et.pageSize:((rt=et.initialState)==null||(nt=rt.pagination)==null?void 0:nt.pageSize)!=null?pt=et.initialState.pagination.pageSize:pt=defaultPageSize(et.autoPageSize),_extends({},_e,{pagination:{pageSize:pt,page:(ot=(it=et.page)!=null?it:(st=et.initialState)==null||(at=st.pagination)==null?void 0:at.page)!=null?ot:0,pageCount:getPageCount((lt=et.rowCount)!=null?lt:0,pt),rowCount:(ct=et.rowCount)!=null?ct:0}})},useGridPagination=(_e,et)=>{useGridPageSize(_e,et),useGridPage(_e,et)},preferencePanelStateInitializer=(_e,et)=>{var rt,nt;return _extends({},_e,{preferencePanel:(rt=(nt=et.initialState)==null?void 0:nt.preferencePanel)!=null?rt:{open:!1}})},useGridPreferencesPanel=(_e,et)=>{var rt;const nt=useGridLogger(_e,"useGridPreferencesPanel"),ot=reactExports.useRef(),it=reactExports.useRef(),st=reactExports.useCallback(()=>{nt.debug("Hiding Preferences Panel");const ht=gridPreferencePanelStateSelector(_e.current.state);ht.openedPanelValue&&_e.current.publishEvent("preferencePanelClose",{openedPanelValue:ht.openedPanelValue}),_e.current.setState(ft=>_extends({},ft,{preferencePanel:{open:!1}})),_e.current.forceUpdate()},[_e,nt]),at=reactExports.useCallback(()=>{it.current=setTimeout(()=>clearTimeout(ot.current),0)},[]),lt=reactExports.useCallback(()=>{ot.current=setTimeout(st,100)},[st]),ct=reactExports.useCallback(ht=>{nt.debug("Opening Preferences Panel"),at(),_e.current.setState(ft=>_extends({},ft,{preferencePanel:_extends({},ft.preferencePanel,{open:!0,openedPanelValue:ht})})),_e.current.publishEvent("preferencePanelOpen",{openedPanelValue:ht}),_e.current.forceUpdate()},[nt,at,_e]);useGridApiMethod(_e,{showPreferences:ct,hidePreferences:lt});const pt=reactExports.useCallback((ht,ft)=>{var gt;const vt=gridPreferencePanelStateSelector(_e.current.state);return!ft.exportOnlyDirtyModels||((gt=et.initialState)==null?void 0:gt.preferencePanel)!=null||vt.open?_extends({},ht,{preferencePanel:vt}):ht},[_e,(rt=et.initialState)==null?void 0:rt.preferencePanel]),ut=reactExports.useCallback((ht,ft)=>{const gt=ft.stateToRestore.preferencePanel;return gt!=null&&_e.current.setState(vt=>_extends({},vt,{preferencePanel:gt})),ht},[_e]);useGridRegisterPipeProcessor(_e,"exportState",pt),useGridRegisterPipeProcessor(_e,"restoreState",ut),reactExports.useEffect(()=>()=>{clearTimeout(ot.current),clearTimeout(it.current)},[])},gridEditRowsStateSelector=_e=>_e.editRows;function isPromise(_e){return typeof _e.then=="function"}const useCellEditing=(_e,et)=>{var rt;const nt=useGridLogger(_e,"useGridEditRows"),ot=bt=>(...Ct)=>{et.editMode===GridEditModes.Cell&&bt(...Ct)},it=reactExports.useCallback((bt,Ct,Tt)=>{_e.current.getCellMode(bt,Ct)!==Tt&&(nt.debug(`Switching cell id: ${bt} field: ${Ct} to mode: ${Tt}`),_e.current.setState(wt=>{const Rt=_extends({},wt.editRows);return Rt[bt]=_extends({},Rt[bt]),Tt===GridCellModes.Edit?Rt[bt][Ct]={value:_e.current.getCellValue(bt,Ct)}:(delete Rt[bt][Ct],Object.keys(Rt[bt]).length||delete Rt[bt]),_extends({},wt,{editRows:Rt})}),_e.current.forceUpdate(),_e.current.publishEvent("cellModeChange",_e.current.getCellParams(bt,Ct)))},[_e,nt]),st=reactExports.useCallback((bt,Ct)=>{const Tt=gridEditRowsStateSelector(_e.current.state);return Tt[bt]&&Tt[bt][Ct]?GridCellModes.Edit:GridCellModes.View},[_e]),at=reactExports.useCallback((bt,Ct={})=>{var Tt;const{id:wt,field:Rt}=bt;_e.current.unstable_runPendingEditCellValueMutation(wt,Rt);const It=_e.current.getEditRowsModel();if(!It[wt]||!It[wt][Rt])throw new Error(`MUI: Cell at id: ${wt} and field: ${Rt} is not in edit mode.`);const St=It[wt][Rt],Pt=_e.current.getColumn(Rt),Ot=_e.current.getRow(wt);if((Tt=et.experimentalFeatures)!=null&&Tt.preventCommitWhileValidating){const xt=It[wt][Rt];if(xt.isValidating||xt.error)return!1}const Ut=_extends({},bt,{value:St.value});let Bt=!!St.error;if(!Bt&&typeof Pt.preProcessEditCellProps=="function"){const xt=Pt.preProcessEditCellProps({id:wt,row:Ot,props:St});if(isPromise(xt))return xt.then(At=>(_e.current.unstable_setEditCellProps({id:wt,field:Rt,props:At}),At.error?!1:(_e.current.publishEvent("cellEditCommit",Ut,Ct),!0)));_e.current.unstable_setEditCellProps({id:wt,field:Rt,props:xt}),Bt=!!xt.error}return Bt?!1:(_e.current.publishEvent("cellEditCommit",Ut,Ct),!0)},[_e,(rt=et.experimentalFeatures)==null?void 0:rt.preventCommitWhileValidating]),lt=reactExports.useCallback(bt=>{const Ct=_e.current.getColumn(bt.field),Tt=_e.current.getRow(bt.id);return new Promise(wt=>{let Rt={value:bt.value};const St=_e.current.getEditRowsModel()[bt.id][bt.field];if(typeof Ct.preProcessEditCellProps!="function"){_e.current.unstable_setEditCellProps(_extends({},bt,{props:Rt})),wt(!0);return}Rt=_e.current.unstable_setEditCellProps(_extends({},bt,{props:_extends({},St,{isValidating:!0})})),Promise.resolve(Ct.preProcessEditCellProps({id:bt.id,row:Tt,props:_extends({},Rt,{value:_e.current.unstable_parseValue(bt.id,bt.field,bt.value)})})).then(Pt=>{_e.current.unstable_setEditCellProps(_extends({},bt,{props:_extends({},Pt,{isValidating:!1})})),wt(!Pt.error)})})},[_e]);useGridApiMethod(_e,{setCellMode:it,getCellMode:st,commitCellChange:at,unstable_setCellEditingEditCellValue:lt});const pt=reactExports.useCallback(async(bt,Ct)=>{if(Ct.which===229)return;const{id:Tt,field:wt,cellMode:Rt,isEditable:It}=bt;if(!It)return;const St=Rt===GridCellModes.Edit,Pt=Ct.ctrlKey||Ct.metaKey||Ct.altKey;if(!St&&isCellEnterEditModeKeys(Ct)&&!Pt&&!(Ct.key===" "&&Ct.shiftKey)&&_e.current.publishEvent("cellEditStart",bt,Ct),!St&&isDeleteKeys(Ct.key)&&(_e.current.setEditCellValue({id:Tt,field:wt,value:""}),_e.current.commitCellChange({id:Tt,field:wt},Ct),_e.current.publishEvent("cellEditStop",bt,Ct)),St&&isCellEditCommitKeys(Ct.key)){const Ot={id:Tt,field:wt};if(!await _e.current.commitCellChange(Ot,Ct))return}St&&isCellExitEditModeKeys(Ct.key)&&_e.current.publishEvent("cellEditStop",bt,Ct)},[_e]),ut=reactExports.useCallback((bt,Ct)=>{bt.isEditable&&_e.current.publishEvent("cellEditStart",bt,Ct)},[_e]),ht=async(bt,Ct)=>{bt.cellMode!==GridCellModes.View&&(await _e.current.commitCellChange(bt,Ct),_e.current.publishEvent("cellEditStop",bt,Ct))},ft=useEventCallback((bt,Ct)=>{ht(bt,Ct)}),gt=useEventCallback(()=>{const bt=gridFocusCellSelector(_e);if(!bt)return;const Ct=_e.current.getCellParams(bt.id,bt.field);ht(Ct,{})}),vt=reactExports.useCallback((bt,Ct)=>{bt.isEditable&&(_e.current.setCellMode(bt.id,bt.field,GridCellModes.Edit),isKeyboardEvent$1(Ct)&&isPrintableKey(Ct)&&_e.current.unstable_setEditCellProps({id:bt.id,field:bt.field,props:{value:""}}))},[_e]),yt=reactExports.useCallback((bt,Ct)=>{if(_e.current.setCellMode(bt.id,bt.field,GridCellModes.View),!!isKeyboardEvent$1(Ct)){if(isCellEditCommitKeys(Ct.key)){_e.current.publishEvent("cellNavigationKeyDown",bt,Ct);return}(Ct.key==="Escape"||isDeleteKeys(Ct.key))&&_e.current.setCellFocus(bt.id,bt.field)}},[_e]),mt=reactExports.useCallback(bt=>{const{id:Ct,field:Tt}=bt,wt=_e.current.getEditRowsModel(),{value:Rt}=wt[Ct][Tt];nt.debug(`Setting cell id: ${Ct} field: ${Tt} to value: ${Rt==null?void 0:Rt.toString()}`);const It=_e.current.getRow(Ct);if(It){const St=_e.current.getColumn(bt.field);let Pt=_extends({},It,{[Tt]:Rt});St.valueSetter&&(Pt=St.valueSetter({row:It,value:Rt})),_e.current.updateRows([Pt])}},[_e,nt]),Et=reactExports.useCallback(bt=>{const Ct=_e.current.getRow(bt.id),Tt=_e.current.getColumn(bt.field),wt=Tt.preProcessEditCellProps?Tt.preProcessEditCellProps({id:bt.id,row:Ct,props:bt.props}):bt.props;isPromise(wt)?wt.then(Rt=>{_e.current.unstable_setEditCellProps(_extends({},bt,{props:Rt}))}):_e.current.unstable_setEditCellProps(_extends({},bt,{props:wt}))},[_e]);useGridApiEventHandler(_e,"cellKeyDown",ot(pt)),useGridApiEventHandler(_e,"cellDoubleClick",ot(ut)),useGridApiEventHandler(_e,"cellFocusOut",ot(ft)),useGridApiEventHandler(_e,"columnHeaderDragStart",ot(gt)),useGridApiEventHandler(_e,"cellEditStart",ot(vt)),useGridApiEventHandler(_e,"cellEditStop",ot(yt)),useGridApiEventHandler(_e,"cellEditCommit",ot(mt)),useGridApiEventHandler(_e,"editCellPropsChange",ot(Et)),useGridApiOptionHandler(_e,"cellEditCommit",et.onCellEditCommit),useGridApiOptionHandler(_e,"cellEditStart",et.onCellEditStart),useGridApiOptionHandler(_e,"cellEditStop",et.onCellEditStop)},useGridRowEditing$1=(_e,et)=>{var rt,nt;const ot=reactExports.useRef(null),it=reactExports.useRef(null),st=useGridSelector(_e,gridColumnDefinitionsSelector),at=Rt=>(...It)=>{et.editMode===GridEditModes.Row&&Rt(...It)},lt=reactExports.useCallback((Rt,It)=>{It!==_e.current.getRowMode(Rt)&&(_e.current.setState(St=>{const Pt=_extends({},St.editRows);return It===GridRowModes.Edit?(Pt[Rt]={},st.forEach(Ot=>{const Ut=_e.current.getCellParams(Rt,Ot.field);Ut.isEditable&&(Pt[Rt][Ot.field]={value:Ut.value})})):delete Pt[Rt],_extends({},St,{editRows:Pt})}),_e.current.forceUpdate())},[_e,st]),ct=reactExports.useCallback(Rt=>et.editMode===GridEditModes.Cell?GridRowModes.View:gridEditRowsStateSelector(_e.current.state)[Rt]?GridRowModes.Edit:GridRowModes.View,[_e,et.editMode]),pt=reactExports.useCallback((Rt,It={})=>{var St;if(et.editMode===GridEditModes.Cell)throw new Error("MUI: You can't commit changes when the edit mode is 'cell'.");_e.current.unstable_runPendingEditCellValueMutation(Rt);const Ot=_e.current.getEditRowsModel()[Rt];if(!Ot)throw new Error(`MUI: Row at id: ${Rt} is not being edited.`);if((St=et.experimentalFeatures)!=null&&St.preventCommitWhileValidating&&!Object.keys(Ot).reduce((At,Mt)=>At&&!Ot[Mt].isValidating&&!Ot[Mt].error,!0)||Object.values(Ot).some(xt=>!!xt.error))return!1;const Bt=Object.keys(Ot).filter(xt=>typeof _e.current.getColumn(xt).preProcessEditCellProps=="function");if(Bt.length>0){const xt=_e.current.getRow(Rt),At=Bt.map(async Mt=>{const Nt=_e.current.getColumn(Mt),$t=await Promise.resolve(Nt.preProcessEditCellProps({id:Rt,row:xt,props:Ot[Mt]}));return _e.current.unstable_setEditCellProps({id:Rt,field:Mt,props:$t}),$t.error});return Promise.all(At).then(Mt=>Mt.some(Nt=>!!Nt)?!1:(_e.current.publishEvent("rowEditCommit",Rt,It),!0))}return _e.current.publishEvent("rowEditCommit",Rt,It),!0},[_e,et.editMode,(rt=et.experimentalFeatures)==null?void 0:rt.preventCommitWhileValidating]),ut=reactExports.useCallback(Rt=>{const St=_e.current.getEditRowsModel()[Rt.id],Pt=_e.current.getRow(Rt.id);let Ot=!0;return new Promise(Ut=>{Object.keys(St).forEach(async Bt=>{const xt=_e.current.getColumn(Bt);let At=Bt===Rt.field?{value:Rt.value}:St[Bt];At=_e.current.unstable_setEditCellProps({id:Rt.id,field:Bt,props:_extends({},At,{isValidating:!0})}),xt.preProcessEditCellProps&&(At=await Promise.resolve(xt.preProcessEditCellProps({id:Rt.id,row:Pt,props:_extends({},At,{value:Bt===Rt.field?_e.current.unstable_parseValue(Rt.id,Bt,Rt.value):At.value})}))),At.error&&(Ot=!1),_e.current.unstable_setEditCellProps({id:Rt.id,field:Bt,props:_extends({},At,{isValidating:!1})})}),Ut(Ot)})},[_e]);useGridApiMethod(_e,{setRowMode:lt,getRowMode:ct,commitRowChange:pt,unstable_setRowEditingEditCellValue:ut});const ft=reactExports.useCallback(async(Rt,It)=>{if(It.which===229)return;const{cellMode:St,isEditable:Pt}=Rt;if(!Pt)return;const Ot=St===GridCellModes.Edit,Ut=_e.current.getRowParams(Rt.id);if(Ot)if(It.key==="Enter"){var Bt;if(!await _e.current.commitRowChange(Rt.id)&&(Bt=et.experimentalFeatures)!=null&&Bt.preventCommitWhileValidating)return;_e.current.publishEvent("rowEditStop",Ut,It)}else It.key==="Escape"&&_e.current.publishEvent("rowEditStop",Ut,It);else It.key==="Enter"&&_e.current.publishEvent("rowEditStart",Ut,It)},[_e,(nt=et.experimentalFeatures)==null?void 0:nt.preventCommitWhileValidating]),gt=reactExports.useCallback((Rt,It)=>{if(!Rt.isEditable)return;const St=_e.current.getRowParams(Rt.id);_e.current.publishEvent("rowEditStart",St,It)},[_e]),vt=reactExports.useCallback(Rt=>{const It=_e.current.getRow(Rt.id),Pt=_e.current.getEditRowsModel()[Rt.id];Object.keys(Pt).forEach(async Ot=>{const Ut=_e.current.getColumn(Ot);if(Ut.preProcessEditCellProps){const Bt=Ot===Rt.field?Rt.props:Pt[Ot],xt=await Promise.resolve(Ut.preProcessEditCellProps({id:Rt.id,row:It,props:Bt}));_e.current.unstable_setEditCellProps({id:Rt.id,field:Ot,props:xt})}else Ot===Rt.field&&_e.current.unstable_setEditCellProps(Rt)})},[_e]),yt=reactExports.useCallback(Rt=>{_e.current.setRowMode(Rt.id,GridRowModes.Edit)},[_e]),mt=reactExports.useCallback((Rt,It)=>{_e.current.setRowMode(Rt.id,GridRowModes.View),It.key==="Enter"&&_e.current.publishEvent("cellNavigationKeyDown",Rt,It)},[_e]),Et=reactExports.useCallback(Rt=>{const St=_e.current.getEditRowsModel()[Rt];if(!St)throw new Error(`MUI: Row at id: ${Rt} is not being edited.`);const Pt=_e.current.getRow(Rt);if(Pt){let Ot=_extends({},Pt);Object.keys(St).forEach(Ut=>{const Bt=_e.current.getColumn(Ut),xt=St[Ut].value;Bt.valueSetter?Ot=Bt.valueSetter({row:Ot,value:xt}):Ot[Ut]=xt}),_e.current.updateRows([Ot])}},[_e]),bt=reactExports.useCallback(Rt=>{it.current=Rt},[]),Ct=async(Rt,It)=>{Rt.cellMode!==GridCellModes.View&&(it.current=null,ot.current=setTimeout(async()=>{var St;if(((St=it.current)==null?void 0:St.id)!==Rt.id){await _e.current.commitRowChange(Rt.id,It);const Pt=_e.current.getRowParams(Rt.id);_e.current.publishEvent("rowEditStop",Pt,It)}}))},Tt=useEventCallback((Rt,It)=>{Ct(Rt,It)}),wt=useEventCallback(()=>{const Rt=gridFocusCellSelector(_e);if(!Rt)return;const It=_e.current.getCellParams(Rt.id,Rt.field);Ct(It,{})});useGridApiEventHandler(_e,"cellKeyDown",at(ft)),useGridApiEventHandler(_e,"cellDoubleClick",at(gt)),useGridApiEventHandler(_e,"editCellPropsChange",at(vt)),useGridApiEventHandler(_e,"rowEditStart",at(yt)),useGridApiEventHandler(_e,"rowEditStop",at(mt)),useGridApiEventHandler(_e,"rowEditCommit",at(Et)),useGridApiEventHandler(_e,"cellFocusIn",at(bt)),useGridApiEventHandler(_e,"cellFocusOut",at(Tt)),useGridApiEventHandler(_e,"columnHeaderDragStart",at(wt)),useGridApiOptionHandler(_e,"rowEditCommit",et.onRowEditCommit),useGridApiOptionHandler(_e,"rowEditStart",et.onRowEditStart),useGridApiOptionHandler(_e,"rowEditStop",et.onRowEditStop)},editingStateInitializer$1=_e=>_extends({},_e,{editRows:{}});function useGridEditing$1(_e,et){var rt;const nt=useGridLogger(_e,"useGridEditRows");useCellEditing(_e,et),useGridRowEditing$1(_e,et);const ot=reactExports.useRef({});_e.current.unstable_registerControlState({stateId:"editRows",propModel:et.editRowsModel,propOnChange:et.onEditRowsModelChange,stateSelector:gridEditRowsStateSelector,changeEvent:"editRowsModelChange"});const it=reactExports.useCallback(vt=>!vt.rowNode.isAutoGenerated&&!vt.rowNode.isPinned&&!!vt.colDef.editable&&!!vt.colDef.renderEditCell&&(!et.isCellEditable||et.isCellEditable(vt)),[et.isCellEditable]),st=(vt,yt,mt,Et)=>{if(!mt){Et();return}if(ot.current[vt]||(ot.current[vt]={}),ot.current[vt][yt]){const[Tt]=ot.current[vt][yt];clearTimeout(Tt)}const bt=()=>{Et();const[Tt]=ot.current[vt][yt];clearTimeout(Tt),delete ot.current[vt][yt]},Ct=setTimeout(()=>{Et(),delete ot.current[vt][yt]},mt);ot.current[vt][yt]=[Ct,bt]},at=reactExports.useCallback((vt,yt)=>{if(ot.current[vt]){if(!yt)Object.keys(ot.current[vt]).forEach(mt=>{const[,Et]=ot.current[vt][mt];Et()});else if(ot.current[vt][yt]){const[,mt]=ot.current[vt][yt];mt()}}},[]),lt=reactExports.useCallback((vt,yt={})=>{st(vt.id,vt.field,vt.debounceMs,()=>{var mt;if((mt=et.experimentalFeatures)!=null&&mt.preventCommitWhileValidating)return et.editMode==="row"?_e.current.unstable_setRowEditingEditCellValue(vt):_e.current.unstable_setCellEditingEditCellValue(vt);const Et={id:vt.id,field:vt.field,props:{value:vt.value}};return _e.current.publishEvent("editCellPropsChange",Et,yt)})},[_e,et.editMode,(rt=et.experimentalFeatures)==null?void 0:rt.preventCommitWhileValidating]),ct=reactExports.useCallback((vt,yt,mt)=>{const Et=_e.current.getColumn(yt);return Et.valueParser?Et.valueParser(mt,_e.current.getCellParams(vt,yt)):mt},[_e]),pt=reactExports.useCallback(vt=>{const{id:yt,field:mt,props:Et}=vt;return nt.debug(`Setting cell props on id: ${yt} field: ${mt}`),_e.current.setState(Ct=>{const Tt=_extends({},Ct.editRows);return Tt[yt]=_extends({},Ct.editRows[yt]),Tt[yt][mt]=_extends({},Et,{value:ct(yt,mt,Et.value)}),_extends({},Ct,{editRows:Tt})}),_e.current.forceUpdate(),gridEditRowsStateSelector(_e.current.state)[yt][mt]},[_e,nt,ct]),ut=reactExports.useCallback(vt=>{gridEditRowsStateSelector(_e.current.state)!==vt&&(nt.debug("Setting editRows model"),_e.current.setState(mt=>_extends({},mt,{editRows:vt})),_e.current.forceUpdate())},[_e,nt]),ht=reactExports.useCallback(()=>gridEditRowsStateSelector(_e.current.state),[_e]),ft=reactExports.useCallback((vt,yt)=>{const mt=yt.detail>1;vt.isEditable&&vt.cellMode===GridCellModes.View&&mt&&yt.preventDefault()},[]);useGridApiEventHandler(_e,"cellMouseDown",ft),useGridApiOptionHandler(_e,"editCellPropsChange",et.onEditCellPropsChange),useGridApiMethod(_e,{isCellEditable:it,setEditRowsModel:ut,getEditRowsModel:ht,setEditCellValue:lt,unstable_setEditCellProps:pt,unstable_parseValue:ct,unstable_runPendingEditCellValueMutation:at}),reactExports.useEffect(()=>{et.editRowsModel!==void 0&&_e.current.setEditRowsModel(et.editRowsModel)},[_e,et.editRowsModel])}const _excluded$w=["id","field"],_excluded2$1=["id","field"],missingOnProcessRowUpdateErrorWarning$1=buildWarning(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),useGridCellEditing=(_e,et)=>{const[rt,nt]=reactExports.useState({}),ot=reactExports.useRef(rt),it=reactExports.useRef({}),{processRowUpdate:st,onProcessRowUpdateError:at,cellModesModel:lt,onCellModesModelChange:ct,signature:pt}=et,ut=xt=>(...At)=>{et.editMode===GridEditModes.Cell&&xt(...At)},ht=reactExports.useCallback((xt,At)=>{const Mt=_e.current.getCellParams(xt,At);if(!_e.current.isCellEditable(Mt))throw new Error(`MUI: The cell with id=${xt} and field=${At} is not editable.`)},[_e]),ft=reactExports.useCallback((xt,At,Mt)=>{if(_e.current.getCellMode(xt,At)!==Mt)throw new Error(`MUI: The cell with id=${xt} and field=${At} is not in ${Mt} mode.`)},[_e]),gt=reactExports.useCallback((xt,At)=>{if(!xt.isEditable||xt.cellMode===GridCellModes.Edit)return;const Mt=_extends({},xt,{reason:GridCellEditStartReasons.cellDoubleClick});_e.current.publishEvent("cellEditStart",Mt,At)},[_e]),vt=reactExports.useCallback((xt,At)=>{if(xt.cellMode===GridCellModes.View||_e.current.getCellMode(xt.id,xt.field)===GridCellModes.View)return;const Mt=_extends({},xt,{reason:GridCellEditStopReasons.cellFocusOut});_e.current.publishEvent("cellEditStop",Mt,At)},[_e]),yt=reactExports.useCallback((xt,At)=>{if(xt.cellMode===GridCellModes.Edit){if(At.which===229)return;let Mt;if(At.key==="Escape"?Mt=GridCellEditStopReasons.escapeKeyDown:At.key==="Enter"?Mt=GridCellEditStopReasons.enterKeyDown:At.key==="Tab"&&(Mt=At.shiftKey?GridCellEditStopReasons.shiftTabKeyDown:GridCellEditStopReasons.tabKeyDown,At.preventDefault()),Mt){const Nt=_extends({},xt,{reason:Mt});_e.current.publishEvent("cellEditStop",Nt,At)}}else if(xt.isEditable){let Mt;if(At.key===" "&&At.shiftKey)return;if(isPrintableKey(At)||(At.ctrlKey||At.metaKey)&&At.key==="v"?Mt=GridCellEditStartReasons.printableKeyDown:At.key==="Enter"?Mt=GridCellEditStartReasons.enterKeyDown:(At.key==="Delete"||At.key==="Backspace")&&(Mt=GridCellEditStartReasons.deleteKeyDown),Mt){const Nt=_extends({},xt,{reason:Mt,key:At.key});_e.current.publishEvent("cellEditStart",Nt,At)}}},[_e]),mt=reactExports.useCallback(xt=>{const{id:At,field:Mt,reason:Nt,key:$t}=xt,Ft={id:At,field:Mt};Nt===GridCellEditStartReasons.printableKeyDown?reactExports.version.startsWith("18")?Ft.initialValue=$t:Ft.deleteValue=!0:Nt===GridCellEditStartReasons.deleteKeyDown&&(Ft.deleteValue=!0),_e.current.startCellEditMode(Ft)},[_e]),Et=reactExports.useCallback(xt=>{const{id:At,field:Mt,reason:Nt}=xt;_e.current.unstable_runPendingEditCellValueMutation(At,Mt);let $t;Nt===GridCellEditStopReasons.enterKeyDown?$t="below":Nt===GridCellEditStopReasons.tabKeyDown?$t="right":Nt===GridCellEditStopReasons.shiftTabKeyDown&&($t="left");let Ft=Nt==="escapeKeyDown";gridEditRowsStateSelector(_e.current.state)[At][Mt].isProcessingProps&&!et.disableIgnoreModificationsIfProcessingProps&&(Ft=!0),_e.current.stopCellEditMode({id:At,field:Mt,ignoreModifications:Ft,cellToFocusAfter:$t})},[_e,et.disableIgnoreModificationsIfProcessingProps]);useGridApiEventHandler(_e,"cellDoubleClick",ut(gt)),useGridApiEventHandler(_e,"cellFocusOut",ut(vt)),useGridApiEventHandler(_e,"cellKeyDown",ut(yt)),useGridApiEventHandler(_e,"cellEditStart",ut(mt)),useGridApiEventHandler(_e,"cellEditStop",ut(Et)),useGridApiOptionHandler(_e,"cellEditStart",et.onCellEditStart),useGridApiOptionHandler(_e,"cellEditStop",et.onCellEditStop);const bt=reactExports.useCallback((xt,At)=>{const Mt=gridEditRowsStateSelector(_e.current.state);return Mt[xt]&&Mt[xt][At]?GridCellModes.Edit:GridCellModes.View},[_e]),Ct=useEventCallback(xt=>{const At=xt!==et.cellModesModel;if(ct&&At){const Mt=pt===GridSignature.DataGridPro?{api:_e.current}:{};ct(xt,Mt)}et.cellModesModel&&At||(nt(xt),ot.current=xt,_e.current.publishEvent("cellModesModelChange",xt))}),Tt=reactExports.useCallback((xt,At,Mt)=>{const Nt=_extends({},ot.current);if(Mt!==null)Nt[xt]=_extends({},Nt[xt],{[At]:_extends({},Mt)});else{const $t=Nt[xt],Ft=_objectWithoutPropertiesLoose($t,[At].map(_toPropertyKey));Nt[xt]=Ft,Object.keys(Nt[xt]).length===0&&delete Nt[xt]}Ct(Nt)},[Ct]),wt=reactExports.useCallback((xt,At,Mt)=>{_e.current.setState(Nt=>{const $t=_extends({},Nt.editRows);return Mt!==null?$t[xt]=_extends({},$t[xt],{[At]:_extends({},Mt)}):(delete $t[xt][At],Object.keys($t[xt]).length===0&&delete $t[xt]),_extends({},Nt,{editRows:$t})}),_e.current.forceUpdate()},[_e]),Rt=reactExports.useCallback(xt=>{const{id:At,field:Mt}=xt,Nt=_objectWithoutPropertiesLoose(xt,_excluded$w);ht(At,Mt),ft(At,Mt,GridCellModes.View),Tt(At,Mt,_extends({mode:GridCellModes.Edit},Nt))},[ht,ft,Tt]),It=useEventCallback(xt=>{const{id:At,field:Mt,deleteValue:Nt,initialValue:$t}=xt;let Ft=_e.current.getCellValue(At,Mt);(Nt||$t)&&(Ft=Nt?"":$t),wt(At,Mt,{value:Ft,error:!1,isProcessingProps:!1}),_e.current.setCellFocus(At,Mt)}),St=reactExports.useCallback(xt=>{const{id:At,field:Mt}=xt,Nt=_objectWithoutPropertiesLoose(xt,_excluded2$1);ft(At,Mt,GridCellModes.Edit),Tt(At,Mt,_extends({mode:GridCellModes.View},Nt))},[ft,Tt]),Pt=useEventCallback(async xt=>{const{id:At,field:Mt,ignoreModifications:Nt,cellToFocusAfter:$t="none"}=xt;ft(At,Mt,GridCellModes.Edit),_e.current.unstable_runPendingEditCellValueMutation(At,Mt);const Ft=()=>{wt(At,Mt,null),Tt(At,Mt,null),$t!=="none"&&_e.current.unstable_moveFocusToRelativeCell(At,Mt,$t)};if(Nt){Ft();return}const jt=gridEditRowsStateSelector(_e.current.state),{error:zt,isProcessingProps:Yt}=jt[At][Mt];if(zt||Yt){it.current[At][Mt].mode=GridCellModes.Edit,Tt(At,Mt,{mode:GridCellModes.Edit});return}const Kt=_e.current.unstable_getRowWithUpdatedValuesFromCellEditing(At,Mt);if(st){const er=ir=>{it.current[At][Mt].mode=GridCellModes.Edit,Tt(At,Mt,{mode:GridCellModes.Edit}),at?at(ir):missingOnProcessRowUpdateErrorWarning$1()};try{const ir=_e.current.getRow(At);Promise.resolve(st(Kt,ir)).then(rr=>{_e.current.updateRows([rr]),Ft()}).catch(er)}catch(ir){er(ir)}}else _e.current.updateRows([Kt]),Ft()}),Ot=reactExports.useCallback(async xt=>{var At,Mt;const{id:Nt,field:$t,value:Ft,debounceMs:jt,unstable_skipValueParser:zt}=xt;ht(Nt,$t),ft(Nt,$t,GridCellModes.Edit);const Yt=_e.current.getColumn($t),Kt=_e.current.getRow(Nt);let er=Ft;Yt.valueParser&&!zt&&(er=Yt.valueParser(Ft,_e.current.getCellParams(Nt,$t)));let ir=gridEditRowsStateSelector(_e.current.state),rr=_extends({},ir[Nt][$t],{value:er,changeReason:jt?"debouncedSetEditCellValue":"setEditCellValue"});if(Yt.preProcessEditCellProps){const lr=Ft!==ir[Nt][$t].value;rr=_extends({},rr,{isProcessingProps:!0}),wt(Nt,$t,rr),rr=await Promise.resolve(Yt.preProcessEditCellProps({id:Nt,row:Kt,props:rr,hasChanged:lr}))}return _e.current.getCellMode(Nt,$t)===GridCellModes.View?!1:(ir=gridEditRowsStateSelector(_e.current.state),rr=_extends({},rr,{isProcessingProps:!1}),rr.value=Yt.preProcessEditCellProps?ir[Nt][$t].value:er,wt(Nt,$t,rr),ir=gridEditRowsStateSelector(_e.current.state),!((At=ir[Nt])!=null&&(Mt=At[$t])!=null&&Mt.error))},[_e,ht,ft,wt]),Ut=reactExports.useCallback((xt,At)=>{const Mt=_e.current.getColumn(At),Nt=gridEditRowsStateSelector(_e.current.state),{value:$t}=Nt[xt][At],Ft=_e.current.getRow(xt);return Mt.valueSetter?Mt.valueSetter({value:$t,row:Ft}):_extends({},Ft,{[At]:$t})},[_e]);useGridApiMethod(_e,{getCellMode:bt,startCellEditMode:Rt,stopCellEditMode:St,unstable_setCellEditingEditCellValue:Ot,unstable_getRowWithUpdatedValuesFromCellEditing:Ut}),reactExports.useEffect(()=>{lt&&Ct(lt)},[lt,Ct]),reactExports.useEffect(()=>{const xt=gridRowsIdToIdLookupSelector(_e),At=it.current;it.current=deepClone(rt),Object.entries(rt).forEach(([Mt,Nt])=>{Object.entries(Nt).forEach(([$t,Ft])=>{var jt,zt,Yt;const Kt=((jt=At[Mt])==null||(zt=jt[$t])==null?void 0:zt.mode)||GridCellModes.View,er=(Yt=xt[Mt])!=null?Yt:Mt;Ft.mode===GridCellModes.Edit&&Kt===GridCellModes.View?It(_extends({id:er,field:$t},Ft)):Ft.mode===GridCellModes.View&&Kt===GridCellModes.Edit&&Pt(_extends({id:er,field:$t},Ft))})})},[_e,rt,It,Pt])},_excluded$v=["id"],_excluded2=["id"],missingOnProcessRowUpdateErrorWarning=buildWarning(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),useGridRowEditing=(_e,et)=>{const[rt,nt]=reactExports.useState({}),ot=reactExports.useRef(rt),it=reactExports.useRef({}),st=reactExports.useRef(null),at=reactExports.useRef(null),{processRowUpdate:lt,onProcessRowUpdateError:ct,rowModesModel:pt,onRowModesModelChange:ut,signature:ht}=et,ft=$t=>(...Ft)=>{et.editMode===GridEditModes.Row&&$t(...Ft)},gt=reactExports.useCallback(($t,Ft)=>{const jt=_e.current.getCellParams($t,Ft);if(!_e.current.isCellEditable(jt))throw new Error(`MUI: The cell with id=${$t} and field=${Ft} is not editable.`)},[_e]),vt=reactExports.useCallback(($t,Ft)=>{if(_e.current.getRowMode($t)!==Ft)throw new Error(`MUI: The row with id=${$t} is not in ${Ft} mode.`)},[_e]),yt=reactExports.useCallback(($t,Ft)=>{if(!$t.isEditable||_e.current.getRowMode($t.id)===GridRowModes.Edit)return;const jt=_e.current.getRowParams($t.id),zt=_extends({},jt,{field:$t.field,reason:GridRowEditStartReasons.cellDoubleClick});_e.current.publishEvent("rowEditStart",zt,Ft)},[_e]),mt=reactExports.useCallback($t=>{at.current=$t},[]),Et=reactExports.useCallback(($t,Ft)=>{$t.isEditable&&_e.current.getRowMode($t.id)!==GridRowModes.View&&(at.current=null,st.current=setTimeout(()=>{var jt;if(st.current=null,((jt=at.current)==null?void 0:jt.id)!==$t.id){if(!_e.current.getRow($t.id)||_e.current.getRowMode($t.id)===GridRowModes.View)return;const zt=_e.current.getRowParams($t.id),Yt=_extends({},zt,{field:$t.field,reason:GridRowEditStopReasons.rowFocusOut});_e.current.publishEvent("rowEditStop",Yt,Ft)}}))},[_e]);reactExports.useEffect(()=>()=>{clearTimeout(st.current)},[]);const bt=reactExports.useCallback(($t,Ft)=>{if($t.cellMode===GridRowModes.Edit){if(Ft.which===229)return;let jt;if(Ft.key==="Escape")jt=GridRowEditStopReasons.escapeKeyDown;else if(Ft.key==="Enter")jt=GridRowEditStopReasons.enterKeyDown;else if(Ft.key==="Tab"){const zt=gridColumnFieldsSelector(_e).filter(Yt=>_e.current.isCellEditable(_e.current.getCellParams($t.id,Yt)));Ft.shiftKey?$t.field===zt[0]&&(jt=GridRowEditStopReasons.shiftTabKeyDown):$t.field===zt[zt.length-1]&&(jt=GridRowEditStopReasons.tabKeyDown),jt&&Ft.preventDefault()}if(jt){const zt=_e.current.getRowParams($t.id),Yt=_extends({},zt,{reason:jt,field:$t.field});_e.current.publishEvent("rowEditStop",Yt,Ft)}}else if($t.isEditable){let jt;if(Ft.key===" "&&Ft.shiftKey)return;if(isPrintableKey(Ft)||(Ft.ctrlKey||Ft.metaKey)&&Ft.key==="v"?jt=GridRowEditStartReasons.printableKeyDown:Ft.key==="Enter"?jt=GridRowEditStartReasons.enterKeyDown:(Ft.key==="Delete"||Ft.key==="Backspace")&&(jt=GridRowEditStartReasons.deleteKeyDown),jt){const zt=_e.current.getRowParams($t.id),Yt=_extends({},zt,{field:$t.field,key:Ft.key,reason:jt});_e.current.publishEvent("rowEditStart",Yt,Ft)}}},[_e]),Ct=reactExports.useCallback($t=>{const{id:Ft,field:jt,reason:zt,key:Yt}=$t,Kt={id:Ft,fieldToFocus:jt};zt===GridRowEditStartReasons.printableKeyDown?reactExports.version.startsWith("18")?Kt.initialValue=Yt:Kt.deleteValue=!!jt:zt===GridRowEditStartReasons.deleteKeyDown&&(Kt.deleteValue=!!jt),_e.current.startRowEditMode(Kt)},[_e]),Tt=reactExports.useCallback($t=>{const{id:Ft,reason:jt,field:zt}=$t;_e.current.unstable_runPendingEditCellValueMutation(Ft);let Yt;jt===GridRowEditStopReasons.enterKeyDown?Yt="below":jt===GridRowEditStopReasons.tabKeyDown?Yt="right":jt===GridRowEditStopReasons.shiftTabKeyDown&&(Yt="left");let Kt=jt==="escapeKeyDown";const er=gridEditRowsStateSelector(_e.current.state);!Kt&&!et.disableIgnoreModificationsIfProcessingProps&&(Kt=Object.values(er[Ft]).some(ir=>ir.isProcessingProps)),_e.current.stopRowEditMode({id:Ft,ignoreModifications:Kt,field:zt,cellToFocusAfter:Yt})},[_e,et.disableIgnoreModificationsIfProcessingProps]);useGridApiEventHandler(_e,"cellDoubleClick",ft(yt)),useGridApiEventHandler(_e,"cellFocusIn",ft(mt)),useGridApiEventHandler(_e,"cellFocusOut",ft(Et)),useGridApiEventHandler(_e,"cellKeyDown",ft(bt)),useGridApiEventHandler(_e,"rowEditStart",ft(Ct)),useGridApiEventHandler(_e,"rowEditStop",ft(Tt)),useGridApiOptionHandler(_e,"rowEditStart",et.onRowEditStart),useGridApiOptionHandler(_e,"rowEditStop",et.onRowEditStop);const wt=reactExports.useCallback($t=>{if(et.editMode===GridEditModes.Cell)return GridRowModes.View;const Ft=gridEditRowsStateSelector(_e.current.state);return Ft[$t]&&Object.keys(Ft[$t]).length>0?GridRowModes.Edit:GridRowModes.View},[_e,et.editMode]),Rt=useEventCallback($t=>{const Ft=$t!==et.rowModesModel;if(ut&&Ft){const jt=ht===GridSignature.DataGridPro?{api:_e.current}:{};ut($t,jt)}et.rowModesModel&&Ft||(nt($t),ot.current=$t,_e.current.publishEvent("rowModesModelChange",$t))}),It=reactExports.useCallback(($t,Ft)=>{const jt=_extends({},ot.current);Ft!==null?jt[$t]=_extends({},Ft):delete jt[$t],Rt(jt)},[Rt]),St=reactExports.useCallback(($t,Ft)=>{_e.current.setState(jt=>{const zt=_extends({},jt.editRows);return Ft!==null?zt[$t]=Ft:delete zt[$t],_extends({},jt,{editRows:zt})}),_e.current.forceUpdate()},[_e]),Pt=reactExports.useCallback(($t,Ft,jt)=>{_e.current.setState(zt=>{const Yt=_extends({},zt.editRows);return jt!==null?Yt[$t]=_extends({},Yt[$t],{[Ft]:_extends({},jt)}):(delete Yt[$t][Ft],Object.keys(Yt[$t]).length===0&&delete Yt[$t]),_extends({},zt,{editRows:Yt})}),_e.current.forceUpdate()},[_e]),Ot=reactExports.useCallback($t=>{const{id:Ft}=$t,jt=_objectWithoutPropertiesLoose($t,_excluded$v);vt(Ft,GridRowModes.View),It(Ft,_extends({mode:GridRowModes.Edit},jt))},[vt,It]),Ut=useEventCallback($t=>{const{id:Ft,fieldToFocus:jt,deleteValue:zt,initialValue:Yt}=$t,er=gridColumnFieldsSelector(_e).reduce((ir,rr)=>{if(!_e.current.getCellParams(Ft,rr).isEditable)return ir;let nr=_e.current.getCellValue(Ft,rr);return jt===rr&&(zt||Yt)&&(nr=zt?"":Yt),ir[rr]={value:nr,error:!1,isProcessingProps:!1},ir},{});St(Ft,er),jt&&_e.current.setCellFocus(Ft,jt)}),Bt=reactExports.useCallback($t=>{const{id:Ft}=$t,jt=_objectWithoutPropertiesLoose($t,_excluded2);vt(Ft,GridRowModes.Edit),It(Ft,_extends({mode:GridRowModes.View},jt))},[vt,It]),xt=useEventCallback($t=>{const{id:Ft,ignoreModifications:jt,field:zt,cellToFocusAfter:Yt="none"}=$t;_e.current.unstable_runPendingEditCellValueMutation(Ft);const Kt=()=>{Yt!=="none"&&zt&&_e.current.unstable_moveFocusToRelativeCell(Ft,zt,Yt),St(Ft,null),It(Ft,null)};if(jt){Kt();return}const er=gridEditRowsStateSelector(_e.current.state),ir=_e.current.getRow(Ft);if(Object.values(er[Ft]).some(hr=>hr.isProcessingProps)){it.current[Ft].mode=GridRowModes.Edit;return}if(Object.values(er[Ft]).some(hr=>hr.error)){it.current[Ft].mode=GridRowModes.Edit,It(Ft,{mode:GridRowModes.Edit});return}const nr=_e.current.unstable_getRowWithUpdatedValuesFromRowEditing(Ft);if(lt){const hr=vr=>{it.current[Ft].mode=GridRowModes.Edit,It(Ft,{mode:GridRowModes.Edit}),ct?ct(vr):missingOnProcessRowUpdateErrorWarning()};try{Promise.resolve(lt(nr,ir)).then(vr=>{_e.current.updateRows([vr]),Kt()}).catch(hr)}catch(vr){hr(vr)}}else _e.current.updateRows([nr]),Kt()}),At=reactExports.useCallback($t=>{const{id:Ft,field:jt,value:zt,debounceMs:Yt,unstable_skipValueParser:Kt}=$t;gt(Ft,jt);const er=_e.current.getColumn(jt),ir=_e.current.getRow(Ft);let rr=zt;er.valueParser&&!Kt&&(rr=er.valueParser(zt,_e.current.getCellParams(Ft,jt)));let lr=gridEditRowsStateSelector(_e.current.state),nr=_extends({},lr[Ft][jt],{value:rr,changeReason:Yt?"debouncedSetEditCellValue":"setEditCellValue"});return er.preProcessEditCellProps||Pt(Ft,jt,nr),new Promise(hr=>{const vr=[];if(er.preProcessEditCellProps){const yr=nr.value!==lr[Ft][jt].value;nr=_extends({},nr,{isProcessingProps:!0}),Pt(Ft,jt,nr);const Cr=lr[Ft],or=_objectWithoutPropertiesLoose(Cr,[jt].map(_toPropertyKey)),ur=Promise.resolve(er.preProcessEditCellProps({id:Ft,row:ir,props:nr,hasChanged:yr,otherFieldsProps:or})).then(pr=>{if(_e.current.getRowMode(Ft)===GridRowModes.View){hr(!1);return}lr=gridEditRowsStateSelector(_e.current.state),pr=_extends({},pr,{isProcessingProps:!1}),pr.value=er.preProcessEditCellProps?lr[Ft][jt].value:rr,Pt(Ft,jt,pr)});vr.push(ur)}Object.entries(lr[Ft]).forEach(([yr,Cr])=>{if(yr===jt)return;const or=_e.current.getColumn(yr);if(!or.preProcessEditCellProps)return;Cr=_extends({},Cr,{isProcessingProps:!0}),Pt(Ft,yr,Cr),lr=gridEditRowsStateSelector(_e.current.state);const ur=lr[Ft],pr=_objectWithoutPropertiesLoose(ur,[yr].map(_toPropertyKey)),Er=Promise.resolve(or.preProcessEditCellProps({id:Ft,row:ir,props:Cr,hasChanged:!1,otherFieldsProps:pr})).then(Sr=>{if(_e.current.getRowMode(Ft)===GridRowModes.View){hr(!1);return}Sr=_extends({},Sr,{isProcessingProps:!1}),Pt(Ft,yr,Sr)});vr.push(Er)}),Promise.all(vr).then(()=>{_e.current.getRowMode(Ft)===GridRowModes.Edit?(lr=gridEditRowsStateSelector(_e.current.state),hr(!lr[Ft][jt].error)):hr(!1)})})},[_e,gt,Pt]),Mt=reactExports.useCallback($t=>{const Ft=gridEditRowsStateSelector(_e.current.state),jt=_e.current.getRow($t);let zt=_extends({},jt);return Object.entries(Ft[$t]).forEach(([Yt,Kt])=>{const er=_e.current.getColumn(Yt);er.valueSetter?zt=er.valueSetter({value:Kt.value,row:zt}):zt[Yt]=Kt.value}),zt},[_e]);useGridApiMethod(_e,{getRowMode:wt,startRowEditMode:Ot,stopRowEditMode:Bt,unstable_setRowEditingEditCellValue:At,unstable_getRowWithUpdatedValuesFromRowEditing:Mt}),reactExports.useEffect(()=>{pt&&Rt(pt)},[pt,Rt]),reactExports.useEffect(()=>{const $t=gridRowsIdToIdLookupSelector(_e),Ft=it.current;it.current=deepClone(rt),Object.entries(rt).forEach(([jt,zt])=>{var Yt,Kt;const er=((Yt=Ft[jt])==null?void 0:Yt.mode)||GridRowModes.View,ir=(Kt=$t[jt])!=null?Kt:jt;zt.mode===GridRowModes.Edit&&er===GridRowModes.View?Ut(_extends({id:ir},zt)):zt.mode===GridRowModes.View&&er===GridRowModes.Edit&&xt(_extends({id:ir},zt))})},[_e,rt,Ut,xt])},editingStateInitializer=_e=>_extends({},_e,{editRows:{}}),useGridEditing=(_e,et)=>{useGridCellEditing(_e,et),useGridRowEditing(_e,et);const rt=reactExports.useRef({}),{isCellEditable:nt}=et,ot=reactExports.useCallback(ut=>ut.rowNode.isAutoGenerated||!ut.colDef.editable||!ut.colDef.renderEditCell?!1:nt?nt(ut):!ut.rowNode.isPinned,[nt]),it=(ut,ht,ft,gt)=>{if(!ft){gt();return}if(rt.current[ut]||(rt.current[ut]={}),rt.current[ut][ht]){const[mt]=rt.current[ut][ht];clearTimeout(mt)}const vt=()=>{const[mt]=rt.current[ut][ht];clearTimeout(mt),gt(),delete rt.current[ut][ht]},yt=setTimeout(()=>{gt(),delete rt.current[ut][ht]},ft);rt.current[ut][ht]=[yt,vt]};reactExports.useEffect(()=>{const ut=rt.current;return()=>{Object.entries(ut).forEach(([ht,ft])=>{Object.keys(ft).forEach(gt=>{const[vt]=ut[ht][gt];clearTimeout(vt),delete ut[ht][gt]})})}},[]);const st=reactExports.useCallback((ut,ht)=>{if(rt.current[ut]){if(!ht)Object.keys(rt.current[ut]).forEach(ft=>{const[,gt]=rt.current[ut][ft];gt()});else if(rt.current[ut][ht]){const[,ft]=rt.current[ut][ht];ft()}}},[]),at=reactExports.useCallback(ut=>{const{id:ht,field:ft,debounceMs:gt}=ut;return new Promise(vt=>{it(ht,ft,gt,async()=>{const yt=et.editMode===GridEditModes.Row?_e.current.unstable_setRowEditingEditCellValue:_e.current.unstable_setCellEditingEditCellValue;if(_e.current.getCellMode(ht,ft)===GridCellModes.Edit){const mt=await yt(ut);vt(mt)}})})},[_e,et.editMode]),lt=reactExports.useCallback((ut,ht)=>et.editMode===GridEditModes.Cell?_e.current.unstable_getRowWithUpdatedValuesFromCellEditing(ut,ht):_e.current.unstable_getRowWithUpdatedValuesFromRowEditing(ut),[_e,et.editMode]),ct=reactExports.useCallback((ut,ht)=>({changeReason:gridEditRowsStateSelector(_e.current.state)[ut][ht].changeReason}),[_e]);useGridApiMethod(_e,{isCellEditable:ot,setEditCellValue:at,unstable_runPendingEditCellValueMutation:st,unstable_getRowWithUpdatedValues:lt,unstable_getEditCellMeta:ct})},rowsStateInitializer=(_e,et,rt)=>(rt.current.unstable_caches.rows=createRowsInternalCache({rows:et.rows,getRowId:et.getRowId,loading:et.loading,rowCount:et.rowCount}),_extends({},_e,{rows:getRowsStateFromCache({apiRef:rt,previousTree:null,rowCountProp:et.rowCount,loadingProp:et.loading})})),useGridRows=(_e,et)=>{const rt=useGridLogger(_e,"useGridRows"),nt=useGridVisibleRows(_e,et),ot=reactExports.useRef(Date.now()),it=reactExports.useRef(null),st=reactExports.useCallback(Pt=>{var Ot;return(Ot=gridRowsLookupSelector(_e)[Pt])!=null?Ot:null},[_e]),at=reactExports.useMemo(()=>nt.rows.reduce((Pt,{id:Ot},Ut)=>(Pt[Ot]=Ut,Pt),{}),[nt.rows]),lt=reactExports.useCallback((Pt,Ot)=>{const Ut=()=>{it.current=null,ot.current=Date.now(),_e.current.setState(xt=>_extends({},xt,{rows:getRowsStateFromCache({apiRef:_e,previousTree:gridRowTreeSelector(_e),rowCountProp:et.rowCount,loadingProp:et.loading})})),_e.current.publishEvent("rowsSet"),_e.current.forceUpdate()};if(it.current&&(clearTimeout(it.current),it.current=null),_e.current.unstable_caches.rows=Pt,!Ot){Ut();return}const Bt=et.throttleRowsMs-(Date.now()-ot.current);if(Bt>0){it.current=setTimeout(Ut,Bt);return}Ut()},[et.throttleRowsMs,et.rowCount,et.loading,_e]),ct=reactExports.useCallback(Pt=>{rt.debug(`Updating all rows, new length ${Pt.length}`);const Ot=createRowsInternalCache({rows:Pt,getRowId:et.getRowId,loading:et.loading,rowCount:et.rowCount}),Ut=_e.current.unstable_caches.rows;Ot.rowsBeforePartialUpdates=Ut.rowsBeforePartialUpdates,lt(Ot,!0)},[rt,et.getRowId,et.loading,et.rowCount,lt,_e]),pt=reactExports.useCallback(Pt=>{if(et.signature===GridSignature.DataGrid&&Pt.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const Ot=new Map;Pt.forEach(At=>{const Mt=getRowIdFromRowModel(At,et.getRowId,"A row was provided without id when calling updateRows():");Ot.has(Mt)?Ot.set(Mt,_extends({},Ot.get(Mt),At)):Ot.set(Mt,At)});const Ut=[],Bt=_e.current.unstable_caches.rows,xt={rowsBeforePartialUpdates:Bt.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:Bt.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:Bt.rowCountPropBeforePartialUpdates,idRowsLookup:_extends({},Bt.idRowsLookup),idToIdLookup:_extends({},Bt.idToIdLookup),ids:[...Bt.ids]};Ot.forEach((At,Mt)=>{if(At._action==="delete"){delete xt.idRowsLookup[Mt],delete xt.idToIdLookup[Mt],Ut.push(Mt);return}if(!_e.current.getRow(Mt)){xt.idRowsLookup[Mt]=At,xt.idToIdLookup[Mt]=Mt,xt.ids.push(Mt);return}xt.idRowsLookup[Mt]=_extends({},_e.current.getRow(Mt),At)}),Ut.length>0&&(xt.ids=xt.ids.filter(At=>!Ut.includes(At))),lt(xt,!0)},[et.signature,et.getRowId,lt,_e]),ut=reactExports.useCallback(()=>{const Pt=gridRowIdsSelector(_e),Ot=gridRowsLookupSelector(_e);return new Map(Pt.map(Ut=>[Ut,Ot[Ut]]))},[_e]),ht=reactExports.useCallback(()=>gridRowCountSelector(_e),[_e]),ft=reactExports.useCallback(()=>gridRowIdsSelector(_e),[_e]),gt=reactExports.useCallback(Pt=>at[Pt],[at]),vt=reactExports.useCallback((Pt,Ot)=>{const Ut=_e.current.getRowNode(Pt);if(!Ut)throw new Error(`MUI: No row with id #${Pt} found`);const Bt=_extends({},Ut,{childrenExpanded:Ot});_e.current.setState(xt=>_extends({},xt,{rows:_extends({},xt.rows,{tree:_extends({},xt.rows.tree,{[Pt]:Bt})})})),_e.current.forceUpdate(),_e.current.publishEvent("rowExpansionChange",Bt)},[_e]),yt=reactExports.useCallback(Pt=>{var Ot;return(Ot=gridRowTreeSelector(_e)[Pt])!=null?Ot:null},[_e]),mt=reactExports.useCallback(({skipAutoGeneratedRows:Pt=!0,groupId:Ot,applySorting:Ut,applyFiltering:Bt})=>{const xt=gridRowTreeSelector(_e);let At;if(Ut){const Mt=xt[Ot];if(!Mt)return[];const Nt=gridSortedRowIdsSelector(_e);At=[];const $t=Nt.findIndex(Ft=>Ft===Ot)+1;for(let Ft=$t;Ft<Nt.length&&xt[Nt[Ft]].depth>Mt.depth;Ft+=1){const jt=Nt[Ft],zt=xt[jt];(!Pt||!zt.isAutoGenerated)&&At.push(jt)}}else At=getTreeNodeDescendants(xt,Ot,Pt);if(Bt){const Mt=gridFilteredRowsLookupSelector(_e);At=At.filter(Nt=>Mt[Nt]!==!1)}return At},[_e]),Et=reactExports.useCallback((Pt,Ot)=>{const Ut=gridRowIdsSelector(_e),Bt=Ut.findIndex(At=>At===Pt);if(Bt===-1||Bt===Ot)return;rt.debug(`Moving row ${Pt} to index ${Ot}`);const xt=[...Ut];xt.splice(Ot,0,xt.splice(Bt,1)[0]),_e.current.setState(At=>_extends({},At,{rows:_extends({},At.rows,{ids:xt})})),_e.current.unstable_caches.rows.ids=xt,_e.current.publishEvent("rowsSet")},[_e,rt]),bt=reactExports.useCallback((Pt,Ot)=>{if(et.signature===GridSignature.DataGrid&&Ot.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(Ot.length===0)return;const Bt=[...gridRowIdsSelector(_e)],xt=gridRowsLookupSelector(_e),At=gridRowsIdToIdLookupSelector(_e),Mt=gridRowTreeSelector(_e),Nt=_extends({},xt),$t=_extends({},At),Ft=_extends({},Mt),jt=Ot.map(zt=>({id:getRowIdFromRowModel(zt,et.getRowId,"A row was provided without id when calling replaceRows()."),model:zt}));jt.forEach((zt,Yt)=>{const[Kt]=Bt.splice(Pt+Yt,1,zt.id);delete Nt[Kt],delete $t[Kt],delete Ft[Kt]}),jt.forEach(zt=>{const Yt={id:zt.id,parent:null,depth:0,groupingKey:null,groupingField:null};Nt[zt.id]=zt.model,$t[zt.id]=zt.id,Ft[zt.id]=Yt}),_e.current.unstable_caches.rows.idRowsLookup=Nt,_e.current.unstable_caches.rows.idToIdLookup=$t,_e.current.unstable_caches.rows.ids=Bt,_e.current.setState(zt=>{const Yt={idRowsLookup:Nt,idToIdLookup:$t,tree:Ft,ids:Bt};return _extends({},zt,{rows:_extends({},zt.rows,Yt,{groupingResponseBeforeRowHydration:_extends({},zt.rows.groupingResponseBeforeRowHydration,Yt)})})}),_e.current.publishEvent("rowsSet")},[_e,et.signature,et.getRowId]),Ct={getRow:st,getRowModels:ut,getRowsCount:ht,getAllRowIds:ft,setRows:ct,setRowIndex:Et,updateRows:pt,setRowChildrenExpansion:vt,getRowNode:yt,getRowIndexRelativeToVisibleRows:gt,getRowGroupChildren:mt,unstable_replaceRows:bt},Tt=reactExports.useCallback(()=>{rt.info("Row grouping pre-processing have changed, regenerating the row tree");let Pt;_e.current.unstable_caches.rows.rowsBeforePartialUpdates===et.rows?Pt=_e.current.unstable_caches.rows:Pt=createRowsInternalCache({rows:et.rows,getRowId:et.getRowId,loading:et.loading,rowCount:et.rowCount}),lt(Pt,!1)},[rt,_e,et.rows,et.getRowId,et.loading,et.rowCount,lt]),wt=reactExports.useCallback(Pt=>{Pt==="rowTreeCreation"&&Tt()},[Tt]),Rt=reactExports.useCallback(()=>{_e.current.unstable_getActiveStrategy("rowTree")!==gridRowGroupingNameSelector(_e)&&Tt()},[_e,Tt]);useGridApiEventHandler(_e,"activeStrategyProcessorChange",wt),useGridApiEventHandler(_e,"strategyAvailabilityChange",Rt);const It=reactExports.useCallback(()=>{_e.current.setState(Pt=>_extends({},Pt,{rows:_extends({},Pt.rows,_e.current.unstable_applyPipeProcessors("hydrateRows",Pt.rows.groupingResponseBeforeRowHydration))})),_e.current.publishEvent("rowsSet"),_e.current.forceUpdate()},[_e]);useGridRegisterPipeApplier(_e,"hydrateRows",It),useGridApiMethod(_e,Ct),reactExports.useEffect(()=>()=>{it.current!==null&&clearTimeout(it.current)},[]);const St=reactExports.useRef(!0);reactExports.useEffect(()=>{if(St.current){St.current=!1;return}const Pt=_e.current.unstable_caches.rows.rowsBeforePartialUpdates===et.rows,Ot=_e.current.unstable_caches.rows.loadingPropBeforePartialUpdates===et.loading,Ut=_e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates===et.rowCount;if(Pt){Ot||(_e.current.setState(Bt=>_extends({},Bt,{rows:_extends({},Bt.rows,{loading:et.loading})})),_e.current.unstable_caches.rows.loadingPropBeforePartialUpdates=et.loading,_e.current.forceUpdate()),Ut||(_e.current.setState(Bt=>_extends({},Bt,{rows:_extends({},Bt.rows,{totalRowCount:Math.max(et.rowCount||0,Bt.rows.totalRowCount),totalTopLevelRowCount:Math.max(et.rowCount||0,Bt.rows.totalTopLevelRowCount)})})),_e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates=et.rowCount,_e.current.forceUpdate());return}rt.debug(`Updating all rows, new length ${et.rows.length}`),lt(createRowsInternalCache({rows:et.rows,getRowId:et.getRowId,loading:et.loading,rowCount:et.rowCount}),!1)},[et.rows,et.rowCount,et.getRowId,et.loading,rt,lt,_e])},flatRowTreeCreationMethod=({ids:_e,idRowsLookup:et,idToIdLookup:rt,previousTree:nt})=>{const ot={};for(let it=0;it<_e.length;it+=1){const st=_e[it];nt&&nt[st]&&nt[st].depth===0&&nt[st].parent==null&&!nt[st].isPinned?ot[st]=nt[st]:ot[st]={id:st,depth:0,parent:null,groupingKey:"",groupingField:null}}return{groupingName:GRID_DEFAULT_STRATEGY,tree:ot,treeDepth:1,idRowsLookup:et,idToIdLookup:rt,ids:_e}},useGridRowsPreProcessors=_e=>{useGridRegisterStrategyProcessor(_e,GRID_DEFAULT_STRATEGY,"rowTreeCreation",flatRowTreeCreationMethod)};buildWarning(["MUI: You are calling getValue. This method is deprecated and will be removed in the next major version.","Instead, you can access the data from `params.row`."]);function useGridParamsApi(_e){const et=reactExports.useCallback(ut=>({field:ut,colDef:_e.current.getColumn(ut)}),[_e]),rt=reactExports.useCallback((...ut)=>_e.current.getCellValue(...ut),[_e]),nt=reactExports.useCallback(ut=>{const ht=_e.current.getRow(ut);if(!ht)throw new Error(`No row with id #${ut} found`);return{id:ut,columns:_e.current.getAllColumns(),row:ht,getValue:rt}},[_e,rt]),ot=reactExports.useCallback((ut,ht)=>{const ft=_e.current.getRow(ut),gt=_e.current.getRowNode(ut);if(!ft||!gt)throw new Error(`No row with id #${ut} found`);const vt=gridFocusCellSelector(_e),yt=gridTabIndexCellSelector(_e);return{id:ut,field:ht,row:ft,rowNode:gt,value:ft[ht],colDef:_e.current.getColumn(ht),cellMode:_e.current.getCellMode(ut,ht),getValue:rt,api:_e.current,hasFocus:vt!==null&&vt.field===ht&&vt.id===ut,tabIndex:yt&&yt.field===ht&&yt.id===ut?0:-1}},[_e,rt]),it=reactExports.useCallback((ut,ht)=>{const ft=_e.current.getColumn(ht),gt=_e.current.getCellValue(ut,ht),vt=_e.current.getRow(ut),yt=_e.current.getRowNode(ut);if(!vt||!yt)throw new Error(`No row with id #${ut} found`);const mt=gridFocusCellSelector(_e),Et=gridTabIndexCellSelector(_e),bt={id:ut,field:ht,row:vt,rowNode:yt,colDef:ft,cellMode:_e.current.getCellMode(ut,ht),getValue:rt,hasFocus:mt!==null&&mt.field===ht&&mt.id===ut,tabIndex:Et&&Et.field===ht&&Et.id===ut?0:-1,value:gt,formattedValue:gt};return ft&&ft.valueFormatter&&(bt.formattedValue=ft.valueFormatter({id:ut,field:bt.field,value:bt.value,api:_e.current})),bt.isEditable=ft&&_e.current.isCellEditable(bt),bt},[_e,rt]),st=reactExports.useCallback((ut,ht)=>{const ft=_e.current.getColumn(ht);if(!ft||!ft.valueGetter){const gt=_e.current.getRow(ut);if(!gt)throw new Error(`No row with id #${ut} found`);return gt[ht]}return ft.valueGetter(ot(ut,ht))},[_e,ot]),at=reactExports.useCallback(ut=>_e.current.rootElementRef.current?getGridColumnHeaderElement(_e.current.rootElementRef.current,ut):null,[_e]),lt=reactExports.useCallback(ut=>_e.current.rootElementRef.current?getGridRowElement(_e.current.rootElementRef.current,ut):null,[_e]),ct=reactExports.useCallback((ut,ht)=>_e.current.rootElementRef.current?getGridCellElement(_e.current.rootElementRef.current,{id:ut,field:ht}):null,[_e]);useGridApiMethod(_e,{getCellValue:st,getCellParams:it,getCellElement:ct,getRowParams:nt,getRowElement:lt,getColumnHeaderParams:et,getColumnHeaderElement:at})}const getSelectionModelPropValue=(_e,et)=>_e==null||Array.isArray(_e)?_e:et&&et[0]===_e?et:[_e],selectionStateInitializer=(_e,et)=>{var rt;return _extends({},_e,{selection:(rt=getSelectionModelPropValue(et.selectionModel))!=null?rt:[]})},useGridSelection=(_e,et)=>{const rt=useGridLogger(_e,"useGridSelection"),nt=reactExports.useMemo(()=>getSelectionModelPropValue(et.selectionModel,gridSelectionStateSelector(_e.current.state)),[_e,et.selectionModel]),ot=reactExports.useRef(null);_e.current.unstable_registerControlState({stateId:"selection",propModel:nt,propOnChange:et.onSelectionModelChange,stateSelector:gridSelectionStateSelector,changeEvent:"selectionChange"});const{checkboxSelection:it,disableMultipleSelection:st,disableSelectionOnClick:at,pagination:lt,paginationMode:ct,isRowSelectable:pt}=et,ut=!st||it,ht=useGridVisibleRows(_e,et),ft=reactExports.useCallback(xt=>{var At;let Mt=xt;const Nt=(At=ot.current)!=null?At:xt,$t=_e.current.isRowSelected(xt);if($t){const Ft=gridVisibleSortedRowIdsSelector(_e),jt=Ft.findIndex(Yt=>Yt===Nt),zt=Ft.findIndex(Yt=>Yt===Mt);if(jt===zt)return;jt>zt?Mt=Ft[zt+1]:Mt=Ft[zt-1]}ot.current=xt,_e.current.selectRowRange({startId:Nt,endId:Mt},!$t)},[_e]),gt=reactExports.useCallback(xt=>{gridSelectionStateSelector(_e.current.state)!==xt&&(rt.debug("Setting selection model"),_e.current.setState(Mt=>_extends({},Mt,{selection:xt})),_e.current.forceUpdate())},[_e,rt]),vt=reactExports.useCallback(xt=>gridSelectionStateSelector(_e.current.state).includes(xt),[_e]),yt=reactExports.useCallback(xt=>{if(pt&&!pt(_e.current.getRowParams(xt)))return!1;const At=_e.current.getRowNode(xt);return!((At==null?void 0:At.position)==="footer"||At!=null&&At.isPinned)},[_e,pt]),mt=reactExports.useCallback(()=>selectedGridRowsSelector(_e),[_e]),Et=reactExports.useCallback((xt,At=!0,Mt=!1)=>{if(_e.current.isRowSelectable(xt))if(ot.current=xt,Mt)rt.debug(`Setting selection for row ${xt}`),_e.current.setSelectionModel(At?[xt]:[]);else{rt.debug(`Toggling selection for row ${xt}`);const $t=gridSelectionStateSelector(_e.current.state).filter(jt=>jt!==xt);At&&$t.push(xt),($t.length<2||ut)&&_e.current.setSelectionModel($t)}},[_e,rt,ut]),bt=reactExports.useCallback((xt,At=!0,Mt=!1)=>{rt.debug("Setting selection for several rows");const Nt=xt.filter(jt=>_e.current.isRowSelectable(jt));let $t;if(Mt)$t=At?Nt:[];else{const jt=_extends({},selectedIdsLookupSelector(_e));Nt.forEach(zt=>{At?jt[zt]=zt:delete jt[zt]}),$t=Object.values(jt)}($t.length<2||ut)&&_e.current.setSelectionModel($t)},[_e,rt,ut]),Ct=reactExports.useCallback(({startId:xt,endId:At},Mt=!0,Nt)=>{if(!_e.current.getRow(xt)||!_e.current.getRow(At))return;rt.debug(`Expanding selection from row ${xt} to row ${At}`);const $t=gridVisibleSortedRowIdsSelector(_e),Ft=$t.indexOf(xt),jt=$t.indexOf(At),[zt,Yt]=Ft>jt?[jt,Ft]:[Ft,jt],Kt=$t.slice(zt,Yt+1);_e.current.selectRows(Kt,Mt,Nt)},[_e,rt]);useGridApiMethod(_e,{selectRow:Et,selectRows:bt,selectRowRange:Ct,setSelectionModel:gt,getSelectedRows:mt,isRowSelected:vt,isRowSelectable:yt});const wt=reactExports.useCallback(()=>{if(et.keepNonExistentRowsSelected)return;const xt=gridSelectionStateSelector(_e.current.state),At=gridRowsLookupSelector(_e),Mt=_extends({},selectedIdsLookupSelector(_e));let Nt=!1;xt.forEach($t=>{At[$t]||(delete Mt[$t],Nt=!0)}),Nt&&_e.current.setSelectionModel(Object.values(Mt))},[_e,et.keepNonExistentRowsSelected]),Rt=reactExports.useCallback((xt,At)=>{const Mt=At.metaKey||At.ctrlKey,Nt=!it&&!Mt&&!isKeyboardEvent$1(At),$t=!ut||Nt,Ft=_e.current.isRowSelected(xt);$t?_e.current.selectRow(xt,Nt?!0:!Ft,!0):_e.current.selectRow(xt,!Ft,!1)},[_e,ut,it]),It=reactExports.useCallback((xt,At)=>{var Mt;if(at)return;const Nt=(Mt=At.target.closest(`.${gridClasses.cell}`))==null?void 0:Mt.getAttribute("data-field");Nt===GRID_CHECKBOX_SELECTION_COL_DEF.field||Nt===GRID_DETAIL_PANEL_TOGGLE_FIELD||Nt&&_e.current.getColumn(Nt).type===GRID_ACTIONS_COLUMN_TYPE||_e.current.getRowNode(xt.id).isPinned||(At.shiftKey&&(ut||it)?ft(xt.id):Rt(xt.id,At))},[at,ut,it,_e,ft,Rt]),St=reactExports.useCallback((xt,At)=>{if(ut&&At.shiftKey){var Mt;(Mt=window.getSelection())==null||Mt.removeAllRanges()}},[ut]),Pt=reactExports.useCallback((xt,At)=>{At.nativeEvent.shiftKey?ft(xt.id):_e.current.selectRow(xt.id,xt.value)},[_e,ft]),Ot=reactExports.useCallback(xt=>{const Mt=et.checkboxSelectionVisibleOnly&&et.pagination?gridPaginatedVisibleSortedGridRowIdsSelector(_e):gridVisibleSortedRowIdsSelector(_e);_e.current.selectRows(Mt,xt.value)},[_e,et.checkboxSelectionVisibleOnly,et.pagination]),Ut=reactExports.useCallback((xt,At)=>{if(_e.current.getCellMode(xt.id,xt.field)!==GridCellModes.Edit&&At.currentTarget.contains(At.target)){if(isNavigationKey(At.key)&&At.shiftKey){const Mt=gridFocusCellSelector(_e);if(Mt&&Mt.id!==xt.id){At.preventDefault();const Nt=_e.current.isRowSelected(Mt.id);if(!ut){_e.current.selectRow(Mt.id,!Nt,!0);return}const $t=_e.current.getRowIndexRelativeToVisibleRows(Mt.id),Ft=_e.current.getRowIndexRelativeToVisibleRows(xt.id);let jt,zt;$t>Ft?Nt?(jt=Ft,zt=$t-1):(jt=Ft,zt=$t):Nt?(jt=$t+1,zt=Ft):(jt=$t,zt=Ft);const Yt=ht.rows.slice(jt,zt+1).map(Kt=>Kt.id);_e.current.selectRows(Yt,!Nt);return}}if(At.key===" "&&At.shiftKey){At.preventDefault(),Rt(xt.id,At);return}At.key.toLowerCase()==="a"&&(At.ctrlKey||At.metaKey)&&(At.preventDefault(),bt(_e.current.getAllRowIds(),!0))}},[_e,Rt,bt,ht.rows,ut]);useGridApiEventHandler(_e,"sortedRowsSet",wt),useGridApiEventHandler(_e,"rowClick",It),useGridApiEventHandler(_e,"rowSelectionCheckboxChange",Pt),useGridApiEventHandler(_e,"headerSelectionCheckboxChange",Ot),useGridApiEventHandler(_e,"cellMouseDown",St),useGridApiEventHandler(_e,"cellKeyDown",Ut),reactExports.useEffect(()=>{nt!==void 0&&_e.current.setSelectionModel(nt)},[_e,nt]);const Bt=nt!=null;reactExports.useEffect(()=>{if(Bt)return;const xt=gridSelectionStateSelector(_e.current.state);if(yt){const At=xt.filter(Mt=>yt(Mt));At.length<xt.length&&_e.current.setSelectionModel(At)}},[_e,yt,Bt]),reactExports.useEffect(()=>{const xt=gridSelectionStateSelector(_e.current.state);if(!ut&&xt.length>1){const{rows:At}=getVisibleRows(_e,{pagination:lt,paginationMode:ct}),Mt=At.reduce(($t,{id:Ft})=>($t[Ft]=!0,$t),{}),Nt=xt.find($t=>{let Ft=!0;return yt&&(Ft=yt($t)),Ft&&Mt[$t]});_e.current.setSelectionModel(Nt!==void 0?[Nt]:[])}},[_e,ut,it,st,yt,lt,ct])},GRID_DEFAULT_LOCALE_TEXT={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",errorOverlayDefaultLabel:"An error occurred.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:_e=>_e!==1?`${_e} active filters`:`${_e} active filter`,toolbarQuickFilterPlaceholder:"Search…",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelDeleteIconLabel:"Delete",filterPanelLinkOperator:"Logic operator",filterPanelOperators:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:_e=>_e!==1?`${_e} active filters`:`${_e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:_e=>_e!==1?`${_e.toLocaleString()} rows selected`:`${_e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(_e,et)=>`${_e.toLocaleString()} of ${et.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:_e=>`Group by ${_e}`,unGroupColumn:_e=>`Stop grouping by ${_e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"},_excluded$u=["sortingOrder"],GridColumnUnsortedIcon=reactExports.memo(function _e(et){const{sortingOrder:rt}=et,nt=_objectWithoutPropertiesLoose(et,_excluded$u),ot=useGridRootProps(),[it]=rt,st=it==="asc"?ot.components.ColumnSortedAscendingIcon:ot.components.ColumnSortedDescendingIcon;return st?jsx(st,_extends({},nt)):null}),_excluded$t=["error","hasError","errorInfo"],ErrorOverlay=reactExports.forwardRef(function _e(et,rt){const{error:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$t),it=useGridApiContext(),st=it.current.getLocaleText("errorOverlayDefaultLabel"),at=useGridSelector(it,gridDensityRowHeightSelector);return jsx(GridOverlay,_extends({ref:rt,sx:{width:"100%",minHeight:2*at}},ot,{children:(nt==null?void 0:nt.message)||st}))}),GridNoResultsOverlay=reactExports.forwardRef(function _e(et,rt){const ot=useGridApiContext().current.getLocaleText("noResultsOverlayLabel");return jsx(GridOverlay,_extends({ref:rt},et,{children:ot}))}),DEFAULT_GRID_ICON_SLOTS_COMPONENTS={BooleanCellTrueIcon:GridCheckIcon,BooleanCellFalseIcon:GridCloseIcon,ColumnMenuIcon:GridTripleDotsVerticalIcon,OpenFilterButtonIcon:GridFilterListIcon,FilterPanelDeleteIcon:GridCloseIcon,ColumnFilteredIcon:GridFilterAltIcon,ColumnSelectorIcon:GridColumnIcon,ColumnUnsortedIcon:GridColumnUnsortedIcon,ColumnSortedAscendingIcon:GridArrowUpwardIcon,ColumnSortedDescendingIcon:GridArrowDownwardIcon,ColumnResizeIcon:GridSeparatorIcon,DensityCompactIcon:GridViewHeadlineIcon,DensityStandardIcon:GridTableRowsIcon,DensityComfortableIcon:GridViewStreamIcon,ExportIcon:GridSaveAltIcon,MoreActionsIcon:GridMoreVertIcon,TreeDataCollapseIcon:GridExpandMoreIcon,TreeDataExpandIcon:GridKeyboardArrowRight,GroupingCriteriaCollapseIcon:GridExpandMoreIcon,GroupingCriteriaExpandIcon:GridKeyboardArrowRight,DetailPanelExpandIcon:GridAddIcon,DetailPanelCollapseIcon:GridRemoveIcon,RowReorderIcon:GridDragIcon,QuickFilterIcon:GridSearchIcon,QuickFilterClearIcon:GridCloseIcon},DATA_GRID_DEFAULT_SLOTS_COMPONENTS=_extends({},DEFAULT_GRID_ICON_SLOTS_COMPONENTS,{BaseCheckbox:MUICheckbox,BaseTextField:TextField$1,BaseFormControl:FormControl$1,BaseSelect:Select$1,BaseSwitch:MUISwitch,BaseButton:Button$1,BaseTooltip:Tooltip$2,BasePopper:Popper$1,Cell:GridCell,SkeletonCell:GridSkeletonCell,ColumnHeaderFilterIconButton:GridColumnHeaderFilterIconButton,ColumnMenu:GridColumnMenu,ErrorOverlay,Footer:GridFooter,Header:GridHeader,Toolbar:null,PreferencesPanel:GridPreferencesPanel,LoadingOverlay:GridLoadingOverlay,NoResultsOverlay:GridNoResultsOverlay,NoRowsOverlay:GridNoRowsOverlay,Pagination:GridPagination,FilterPanel:GridFilterPanel,ColumnsPanel:GridColumnsPanel,Panel:GridPanel,Row:GridRow}),useUtilityClasses$s=_e=>{const{classes:et}=_e;return reactExports.useMemo(()=>composeClasses({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},getDataGridUtilityClass,et),[et])},useGridSelectionPreProcessors=(_e,et)=>{const rt={classes:et.classes},nt=useUtilityClasses$s(rt),ot=reactExports.useCallback(it=>{const st=_extends({},GRID_CHECKBOX_SELECTION_COL_DEF,{cellClassName:nt.cellCheckbox,headerClassName:nt.columnHeaderCheckbox,headerName:_e.current.getLocaleText("checkboxSelectionHeaderName")}),at=et.checkboxSelection,lt=it.lookup[GRID_CHECKBOX_SELECTION_FIELD]!=null;return at&&!lt?(it.lookup[GRID_CHECKBOX_SELECTION_FIELD]=st,it.all=[GRID_CHECKBOX_SELECTION_FIELD,...it.all]):!at&&lt?(delete it.lookup[GRID_CHECKBOX_SELECTION_FIELD],it.all=it.all.filter(ct=>ct!==GRID_CHECKBOX_SELECTION_FIELD)):at&&lt&&(it.lookup[GRID_CHECKBOX_SELECTION_FIELD]=_extends({},st,it.lookup[GRID_CHECKBOX_SELECTION_FIELD])),it},[_e,nt,et.checkboxSelection]);useGridRegisterPipeProcessor(_e,"hydrateColumns",ot)},sortingStateInitializer=(_e,et)=>{var rt,nt,ot,it;const st=(rt=(nt=et.sortModel)!=null?nt:(ot=et.initialState)==null||(it=ot.sorting)==null?void 0:it.sortModel)!=null?rt:[];return _extends({},_e,{sorting:{sortModel:sanitizeSortModel(st,et.disableMultipleColumnsSorting),sortedRows:[]}})},useGridSorting=(_e,et)=>{var rt,nt;const ot=useGridLogger(_e,"useGridSorting");_e.current.unstable_registerControlState({stateId:"sortModel",propModel:et.sortModel,propOnChange:et.onSortModelChange,stateSelector:gridSortModelSelector,changeEvent:"sortModelChange"});const it=reactExports.useCallback((Rt,It)=>{const St=gridSortModelSelector(_e),Pt=St.findIndex(Ut=>Ut.field===Rt);let Ot=[...St];return Pt>-1?It?Ot.splice(Pt,1,It):Ot.splice(Pt,1):Ot=[...St,It],Ot},[_e]),st=reactExports.useCallback((Rt,It)=>{var St;const Ot=gridSortModelSelector(_e).find(Bt=>Bt.field===Rt.field);if(Ot){var Ut;const Bt=It===void 0?getNextGridSortDirection((Ut=Rt.sortingOrder)!=null?Ut:et.sortingOrder,Ot.sort):It;return Bt==null?void 0:_extends({},Ot,{sort:Bt})}return{field:Rt.field,sort:It===void 0?getNextGridSortDirection((St=Rt.sortingOrder)!=null?St:et.sortingOrder):It}},[_e,et.sortingOrder]),at=reactExports.useCallback(()=>{_e.current.setState(Rt=>{if(et.sortingMode===GridFeatureModeConstant.server)return ot.debug("Skipping sorting rows as sortingMode = server"),_extends({},Rt,{sorting:_extends({},Rt.sorting,{sortedRows:gridRowIdsSelector(Rt,_e.current.instanceId)})});const It=gridSortModelSelector(Rt,_e.current.instanceId),St=buildAggregatedSortingApplier(It,_e),Pt=_e.current.unstable_applyStrategyProcessor("sorting",{sortRowList:St});return _extends({},Rt,{sorting:_extends({},Rt.sorting,{sortedRows:Pt})})}),_e.current.publishEvent("sortedRowsSet"),_e.current.forceUpdate()},[_e,ot,et.sortingMode]),lt=reactExports.useCallback(Rt=>{gridSortModelSelector(_e)!==Rt&&(ot.debug("Setting sort model"),_e.current.setState(mergeStateWithSortModel(Rt,et.disableMultipleColumnsSorting)),_e.current.forceUpdate(),_e.current.applySorting())},[_e,ot,et.disableMultipleColumnsSorting]),ct=reactExports.useCallback((Rt,It,St)=>{if(!Rt.sortable)return;const Pt=st(Rt,It);let Ot;!St||et.disableMultipleColumnsSorting?Ot=Pt?[Pt]:[]:Ot=it(Rt.field,Pt),_e.current.setSortModel(Ot)},[_e,it,st,et.disableMultipleColumnsSorting]),pt=reactExports.useCallback(()=>gridSortModelSelector(_e),[_e]),ut=reactExports.useCallback(()=>gridSortedRowEntriesSelector(_e).map(It=>It.model),[_e]),ht=reactExports.useCallback(()=>gridSortedRowIdsSelector(_e),[_e]),ft=reactExports.useCallback(Rt=>_e.current.getSortedRowIds().indexOf(Rt),[_e]),gt=reactExports.useCallback(Rt=>_e.current.getSortedRowIds()[Rt],[_e]);useGridApiMethod(_e,{getSortModel:pt,getSortedRows:ut,getSortedRowIds:ht,getRowIndex:ft,getRowIdFromRowIndex:gt,setSortModel:lt,sortColumn:ct,applySorting:at});const yt=reactExports.useCallback((Rt,It)=>{var St,Pt;const Ot=gridSortModelSelector(_e);return!It.exportOnlyDirtyModels||et.sortModel!=null||((St=et.initialState)==null||(Pt=St.sorting)==null?void 0:Pt.sortModel)!=null||Ot.length>0?_extends({},Rt,{sorting:{sortModel:Ot}}):Rt},[_e,et.sortModel,(rt=et.initialState)==null||(nt=rt.sorting)==null?void 0:nt.sortModel]),mt=reactExports.useCallback((Rt,It)=>{var St;const Pt=(St=It.stateToRestore.sorting)==null?void 0:St.sortModel;return Pt==null?Rt:(_e.current.setState(mergeStateWithSortModel(Pt,et.disableMultipleColumnsSorting)),_extends({},Rt,{callbacks:[...Rt.callbacks,_e.current.applySorting]}))},[_e,et.disableMultipleColumnsSorting]),Et=reactExports.useCallback(Rt=>{const It=gridRowTreeSelector(_e);if(!Rt.sortRowList){const Ot=[],Ut=[];return gridRowIdsSelector(_e).forEach(Bt=>{It[Bt].isPinned||(It[Bt].position==="footer"?Ut.push(Bt):Ot.push(Bt))}),[...Ot,...Ut]}const St=[],Pt=[];return Object.values(It).forEach(Ot=>{Ot.isPinned||(Ot.position==="footer"?Pt.push(Ot.id):St.push(Ot))}),[...Rt.sortRowList(St),...Pt]},[_e]);useGridRegisterPipeProcessor(_e,"exportState",yt),useGridRegisterPipeProcessor(_e,"restoreState",mt),useGridRegisterStrategyProcessor(_e,GRID_DEFAULT_STRATEGY,"sorting",Et);const bt=reactExports.useCallback(({colDef:Rt},It)=>{const St=It.shiftKey||It.metaKey||It.ctrlKey;ct(Rt,void 0,St)},[ct]),Ct=reactExports.useCallback(({colDef:Rt},It)=>{isEnterKey(It.key)&&!It.ctrlKey&&!It.metaKey&&ct(Rt,void 0,It.shiftKey)},[ct]),Tt=reactExports.useCallback(()=>{const Rt=gridSortModelSelector(_e),It=gridColumnLookupSelector(_e);if(Rt.length>0){const St=Rt.filter(Pt=>It[Pt.field]);St.length<Rt.length&&_e.current.setSortModel(St)}},[_e]),wt=reactExports.useCallback(Rt=>{Rt==="sorting"&&_e.current.applySorting()},[_e]);useGridApiEventHandler(_e,"columnHeaderClick",bt),useGridApiEventHandler(_e,"columnHeaderKeyDown",Ct),useGridApiEventHandler(_e,"rowsSet",_e.current.applySorting),useGridApiEventHandler(_e,"columnsChange",Tt),useGridApiEventHandler(_e,"activeStrategyProcessorChange",wt),useFirstRender(()=>{_e.current.applySorting()}),reactExports.useEffect(()=>{et.sortModel!==void 0&&_e.current.setSortModel(et.sortModel)},[_e,et.sortModel])};function scrollIntoView(_e){const{clientHeight:et,scrollTop:rt,offsetHeight:nt,offsetTop:ot}=_e,it=ot+nt;if(nt>et)return ot;if(it-et>rt)return it-et;if(ot<rt)return ot}const useGridScroll=(_e,et)=>{const rt=useGridLogger(_e,"useGridScroll"),nt=_e.current.columnHeadersElementRef,ot=_e.current.windowRef,it=useGridSelector(_e,gridVisibleSortedRowEntriesSelector),st=reactExports.useCallback(pt=>{const ut=gridRowCountSelector(_e),ht=gridVisibleColumnDefinitionsSelector(_e);if(!(pt.rowIndex==null)&&ut===0||ht.length===0)return!1;rt.debug(`Scrolling to cell at row ${pt.rowIndex}, col: ${pt.colIndex} `);let gt={};if(pt.colIndex!=null){const Et=gridColumnPositionsSelector(_e);let bt;if(typeof pt.rowIndex<"u"){var vt;const Ct=(vt=it[pt.rowIndex])==null?void 0:vt.id,Tt=_e.current.unstable_getCellColSpanInfo(Ct,pt.colIndex);Tt&&!Tt.spannedByColSpan&&(bt=Tt.cellProps.width)}typeof bt>"u"&&(bt=ht[pt.colIndex].computedWidth),gt.left=scrollIntoView({clientHeight:ot.current.clientWidth,scrollTop:ot.current.scrollLeft,offsetHeight:bt,offsetTop:Et[pt.colIndex]})}if(pt.rowIndex!=null){var yt,mt;const Et=gridRowsMetaSelector(_e.current.state),bt=gridPageSelector(_e),Ct=gridPageSizeSelector(_e),Tt=et.pagination?pt.rowIndex-bt*Ct:pt.rowIndex,wt=Et.positions[Tt+1]?Et.positions[Tt+1]-Et.positions[Tt]:Et.currentPageTotalHeight-Et.positions[Tt],Rt=((yt=ot.current.querySelector(`.${gridClasses["pinnedRows--top"]}`))==null?void 0:yt.clientHeight)||0,It=((mt=ot.current.querySelector(`.${gridClasses["pinnedRows--bottom"]}`))==null?void 0:mt.clientHeight)||0;gt.top=scrollIntoView({clientHeight:ot.current.clientHeight-Rt-It,scrollTop:ot.current.scrollTop,offsetHeight:wt,offsetTop:Et.positions[Tt]})}return gt=_e.current.unstable_applyPipeProcessors("scrollToIndexes",gt,pt),typeof gt.left!==void 0||typeof gt.top!==void 0?(_e.current.scroll(gt),!0):!1},[rt,_e,ot,et.pagination,it]),at=reactExports.useCallback(pt=>{ot.current&&pt.left!=null&&nt.current&&(nt.current.scrollLeft=pt.left,ot.current.scrollLeft=pt.left,rt.debug(`Scrolling left: ${pt.left}`)),ot.current&&pt.top!=null&&(ot.current.scrollTop=pt.top,rt.debug(`Scrolling top: ${pt.top}`)),rt.debug("Scrolling, updating container, and viewport")},[ot,nt,rt]),lt=reactExports.useCallback(()=>ot!=null&&ot.current?{top:ot.current.scrollTop,left:ot.current.scrollLeft}:{top:0,left:0},[ot]);useGridApiMethod(_e,{scroll:at,scrollToIndexes:st,getScrollPosition:lt})};function useGridEvents(_e,et){useGridApiOptionHandler(_e,"columnHeaderClick",et.onColumnHeaderClick),useGridApiOptionHandler(_e,"columnHeaderDoubleClick",et.onColumnHeaderDoubleClick),useGridApiOptionHandler(_e,"columnHeaderOver",et.onColumnHeaderOver),useGridApiOptionHandler(_e,"columnHeaderOut",et.onColumnHeaderOut),useGridApiOptionHandler(_e,"columnHeaderEnter",et.onColumnHeaderEnter),useGridApiOptionHandler(_e,"columnHeaderLeave",et.onColumnHeaderLeave),useGridApiOptionHandler(_e,"columnOrderChange",et.onColumnOrderChange),useGridApiOptionHandler(_e,"cellClick",et.onCellClick),useGridApiOptionHandler(_e,"cellDoubleClick",et.onCellDoubleClick),useGridApiOptionHandler(_e,"cellKeyDown",et.onCellKeyDown),useGridApiOptionHandler(_e,"cellFocusOut",et.onCellFocusOut),useGridApiOptionHandler(_e,"preferencePanelClose",et.onPreferencePanelClose),useGridApiOptionHandler(_e,"preferencePanelOpen",et.onPreferencePanelOpen),useGridApiOptionHandler(_e,"menuOpen",et.onMenuOpen),useGridApiOptionHandler(_e,"menuClose",et.onMenuClose),useGridApiOptionHandler(_e,"rowDoubleClick",et.onRowDoubleClick),useGridApiOptionHandler(_e,"rowClick",et.onRowClick),useGridApiOptionHandler(_e,"componentError",et.onError),useGridApiOptionHandler(_e,"stateChange",et.onStateChange)}const hasScroll=({content:_e,container:et,scrollBarSize:rt})=>{const nt=_e.width>et.width,ot=_e.height>et.height;let it=!1,st=!1;return(nt||ot)&&(it=nt,st=_e.height+(it?rt:0)>et.height,st&&(it=_e.width+rt>et.width)),{hasScrollX:it,hasScrollY:st}};function useGridDimensions(_e,et){const rt=useGridLogger(_e,"useResizeContainer"),nt=reactExports.useRef(!1),ot=reactExports.useRef(null),it=reactExports.useRef(null),st=useGridSelector(_e,gridRowsMetaSelector),at=useGridSelector(_e,gridDensityTotalHeaderHeightSelector),lt=reactExports.useCallback(()=>{var yt;const mt=(yt=_e.current.rootElementRef)==null?void 0:yt.current,Et=gridColumnsTotalWidthSelector(_e),bt=calculatePinnedRowsHeight(_e);if(!ot.current)return;let Ct;if(et.scrollbarSize!=null)Ct=et.scrollbarSize;else if(!Et||!mt)Ct=0;else{const Ut=ownerDocument(mt).createElement("div");Ut.style.width="99px",Ut.style.height="99px",Ut.style.position="absolute",Ut.style.overflow="scroll",Ut.className="scrollDiv",mt.appendChild(Ut),Ct=Ut.offsetWidth-Ut.clientWidth,mt.removeChild(Ut)}let Tt,wt,Rt;if(et.autoHeight)Rt=!1,wt=Math.round(Et)>ot.current.width,Tt={width:ot.current.width,height:st.currentPageTotalHeight+(wt?Ct:0)};else{Tt={width:ot.current.width,height:ot.current.height-at};const Ot=hasScroll({content:{width:Math.round(Et),height:st.currentPageTotalHeight},container:{width:Tt.width,height:Tt.height-bt.top-bt.bottom},scrollBarSize:Ct});Rt=Ot.hasScrollY,wt=Ot.hasScrollX}const It={width:Tt.width-(Rt?Ct:0),height:Tt.height-(wt?Ct:0)},St={viewportOuterSize:Tt,viewportInnerSize:It,hasScrollX:wt,hasScrollY:Rt,scrollBarSize:Ct},Pt=it.current;it.current=St,(St.viewportInnerSize.width!==(Pt==null?void 0:Pt.viewportInnerSize.width)||St.viewportInnerSize.height!==(Pt==null?void 0:Pt.viewportInnerSize.height))&&_e.current.publishEvent("viewportInnerSizeChange",St.viewportInnerSize)},[_e,et.scrollbarSize,et.autoHeight,at,st.currentPageTotalHeight]),ct=reactExports.useCallback(()=>{lt(),_e.current.publishEvent("debouncedResize",ot.current)},[_e,lt]),pt=reactExports.useCallback(()=>it.current,[]),ut=reactExports.useCallback(()=>{const yt=_e.current.getRootDimensions();if(!yt)return 0;const mt=getVisibleRows(_e,{pagination:et.pagination,paginationMode:et.paginationMode});if(et.getRowHeight){const bt=_e.current.unstable_getRenderContext(),Ct=bt.lastRowIndex-bt.firstRowIndex;return Math.min(Ct-1,mt.rows.length)}const Et=Math.floor(yt.viewportInnerSize.height/gridDensityRowHeightSelector(_e));return Math.min(Et,mt.rows.length)},[_e,et.pagination,et.paginationMode,et.getRowHeight]);useGridApiMethod(_e,{resize:ct,getRootDimensions:pt,unstable_getViewportPageSize:ut,unstable_updateGridDimensionsRef:lt});const ft=reactExports.useMemo(()=>debounce$2(ct,60),[ct]),gt=reactExports.useRef(!0),vt=reactExports.useCallback(yt=>{ot.current=yt;const mt=/jsdom/.test(window.navigator.userAgent);if(yt.height===0&&!nt.current&&!et.autoHeight&&!mt&&(rt.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),nt.current=!0),yt.width===0&&!nt.current&&!mt&&(rt.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),nt.current=!0),gt.current){ct(),gt.current=!1;return}ft()},[et.autoHeight,ft,rt,ct]);useEnhancedEffect$1(()=>lt(),[lt]),useGridApiOptionHandler(_e,"sortedRowsSet",lt),useGridApiOptionHandler(_e,"pageChange",lt),useGridApiOptionHandler(_e,"pageSizeChange",lt),useGridApiOptionHandler(_e,"columnsChange",lt),useGridApiEventHandler(_e,"resize",vt),useGridApiOptionHandler(_e,"debouncedResize",et.onResize)}const rowsMetaStateInitializer=_e=>_extends({},_e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),useGridRowsMeta=(_e,et)=>{const{getRowHeight:rt,getRowSpacing:nt,getEstimatedRowHeight:ot}=et,it=reactExports.useRef({}),st=reactExports.useRef(-1),at=reactExports.useRef(!1),lt=useGridSelector(_e,gridDensityRowHeightSelector),ct=useGridSelector(_e,gridFilterStateSelector),pt=useGridSelector(_e,gridPaginationSelector),ut=useGridSelector(_e,gridSortingStateSelector),ht=useGridVisibleRows(_e,et),ft=useGridSelector(_e,gridPinnedRowsSelector),gt=reactExports.useCallback(()=>{var St,Pt;at.current=!1;const Ot=gridDensityFactorSelector(_e.current.state,_e.current.instanceId),Ut=At=>{it.current[At.id]||(it.current[At.id]={sizes:{baseCenter:lt},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:Mt,needsFirstMeasurement:Nt,sizes:$t}=it.current[At.id];let Ft=lt;const jt=$t.baseCenter;if(Mt)Ft=jt;else if(rt){const rr=rt(_extends({},At,{densityFactor:Ot}));if(rr==="auto"){if(Nt){const lr=ot?ot(_extends({},At,{densityFactor:Ot})):lt;Ft=lr??lt}else Ft=jt;at.current=!0,it.current[At.id].autoHeight=!0}else Ft=rr??lt,it.current[At.id].needsFirstMeasurement=!1,it.current[At.id].autoHeight=!1}else it.current[At.id].needsFirstMeasurement=!1;const zt=Object.entries($t).reduce((rr,[lr,nr])=>(/^base[A-Z]/.test(lr)&&(rr[lr]=nr),rr),{}),Yt=_extends({},zt,{baseCenter:Ft});if(nt){var Kt,er;const rr=_e.current.getRowIndexRelativeToVisibleRows(At.id),lr=nt(_extends({},At,{isFirstVisible:rr===0,isLastVisible:rr===ht.rows.length-1,indexRelativeToCurrentPage:rr}));Yt.spacingTop=(Kt=lr.top)!=null?Kt:0,Yt.spacingBottom=(er=lr.bottom)!=null?er:0}const ir=_e.current.unstable_applyPipeProcessors("rowHeight",Yt,At);return it.current[At.id].sizes=ir,ir},Bt=[],xt=ht.rows.reduce((At,Mt)=>{Bt.push(At);let Nt=0,$t=0;const Ft=Ut(Mt);return Object.entries(Ft).forEach(([jt,zt])=>{/^base[A-Z]/.test(jt)?Nt=zt>Nt?zt:Nt:$t+=zt}),At+Nt+$t},0);ft==null||(St=ft.top)==null||St.forEach(At=>{Ut(At)}),ft==null||(Pt=ft.bottom)==null||Pt.forEach(At=>{Ut(At)}),_e.current.setState(At=>_extends({},At,{rowsMeta:{currentPageTotalHeight:xt,positions:Bt}})),at.current||(st.current=1/0),_e.current.forceUpdate()},[_e,ht.rows,lt,rt,nt,ot,ft]),vt=reactExports.useCallback(St=>{const Pt=it.current[St];return Pt?Pt.sizes.baseCenter:lt},[lt]),yt=St=>{var Pt;return(Pt=it.current[St])==null?void 0:Pt.sizes},mt=reactExports.useCallback((St,Pt)=>{it.current[St].sizes.baseCenter=Pt,it.current[St].isResized=!0,it.current[St].needsFirstMeasurement=!1,gt()},[gt]),Et=reactExports.useMemo(()=>debounce$2(gt),[gt]),bt=reactExports.useCallback((St,Pt,Ot)=>{if(!it.current[St]||!it.current[St].autoHeight)return;const Ut=it.current[St].sizes[`base${capitalize(Ot)}`]!==Pt;it.current[St].needsFirstMeasurement=!1,it.current[St].sizes[`base${capitalize(Ot)}`]=Pt,Ut&&Et()},[Et]),Ct=reactExports.useCallback(St=>{var Pt;return((Pt=it.current[St])==null?void 0:Pt.autoHeight)||!1},[]),Tt=reactExports.useCallback(()=>st.current,[]),wt=reactExports.useCallback(St=>{at.current&&St>st.current&&(st.current=St)},[]),Rt=reactExports.useCallback(()=>{it.current={},gt()},[gt]);reactExports.useEffect(()=>{gt()},[lt,ct,pt,ut,gt]),useGridRegisterPipeApplier(_e,"rowHeight",gt),useGridApiMethod(_e,{unstable_getLastMeasuredRowIndex:Tt,unstable_setLastMeasuredRowIndex:wt,unstable_rowHasAutoHeight:Ct,unstable_getRowHeight:vt,unstable_getRowInternalSizes:yt,unstable_setRowHeight:mt,unstable_storeRowHeightMeasurement:bt,resetRowHeights:Rt})},useGridStatePersistence=_e=>{const et=reactExports.useCallback((ot={})=>_e.current.unstable_applyPipeProcessors("exportState",{},ot),[_e]),rt=reactExports.useCallback(ot=>{_e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:ot}).callbacks.forEach(st=>{st()}),_e.current.forceUpdate()},[_e]);useGridApiMethod(_e,{exportState:et,restoreState:rt})},useGridColumnSpanning=_e=>{const et=reactExports.useRef({}),rt=reactExports.useCallback((lt,ct,pt)=>{const ut=et.current;ut[lt]||(ut[lt]={}),ut[lt][ct]=pt},[]),nt=reactExports.useCallback((lt,ct)=>{var pt;return(pt=et.current[lt])==null?void 0:pt[ct]},[]),ot=reactExports.useCallback(lt=>{const{columnIndex:ct,rowId:pt,minFirstColumnIndex:ut,maxLastColumnIndex:ht,columns:ft}=lt,gt=ft.length,vt=ft[ct],yt=typeof vt.colSpan=="function"?vt.colSpan(_e.current.getCellParams(pt,vt.field)):vt.colSpan;if(!yt||yt===1)return rt(pt,ct,{spannedByColSpan:!1,cellProps:{colSpan:1,width:vt.computedWidth}}),{colSpan:1};let mt=vt.computedWidth;for(let Et=1;Et<yt;Et+=1){const bt=ct+Et;if(bt>=ut&&bt<ht){const Ct=ft[bt];mt+=Ct.computedWidth,rt(pt,ct+Et,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(ct+yt,gt-1),leftVisibleCellIndex:ct})}rt(pt,ct,{spannedByColSpan:!1,cellProps:{colSpan:yt,width:mt}})}return{colSpan:yt}},[_e,rt]),it=reactExports.useCallback(({rowId:lt,minFirstColumn:ct,maxLastColumn:pt,columns:ut})=>{for(let ht=ct;ht<pt;ht+=1){const ft=ot({columnIndex:ht,rowId:lt,minFirstColumnIndex:ct,maxLastColumnIndex:pt,columns:ut});ft.colSpan>1&&(ht+=ft.colSpan-1)}},[ot]);useGridApiMethod(_e,{unstable_getCellColSpanInfo:nt,unstable_calculateColSpan:it});const at=reactExports.useCallback(()=>{et.current={}},[]);useGridApiEventHandler(_e,"columnOrderChange",at)},useGridColumnGroupingPreProcessors=(_e,et)=>{var rt;const nt=reactExports.useCallback(ot=>{var it;if(!((it=et.experimentalFeatures)!=null&&it.columnGrouping))return ot;const st=unwrapGroupingColumnModel(et.columnGroupingModel);return ot.all.forEach(at=>{var lt,ct;const pt=(lt=st[at])!=null?lt:[],ut=ot.lookup[at];hasGroupPath(ut)&&isDeepEqual(pt,ut==null?void 0:ut.groupPath)||(ot.lookup[at]=_extends({},ot.lookup[at],{groupPath:(ct=st[at])!=null?ct:[]}))}),ot},[et.columnGroupingModel,(rt=et.experimentalFeatures)==null?void 0:rt.columnGrouping]);useGridRegisterPipeProcessor(_e,"hydrateColumns",nt)},useDataGridComponent=_e=>{var et,rt;const nt=useGridInitialization(void 0,_e);return useGridColumnGroupingPreProcessors(nt,_e),useGridSelectionPreProcessors(nt,_e),useGridRowsPreProcessors(nt),useGridInitializeState(selectionStateInitializer,nt,_e),useGridInitializeState(columnsStateInitializer,nt,_e),useGridInitializeState(columnGroupsStateInitializer,nt,_e),useGridInitializeState(rowsStateInitializer,nt,_e),useGridInitializeState((et=_e.experimentalFeatures)!=null&&et.newEditingApi?editingStateInitializer:editingStateInitializer$1,nt,_e),useGridInitializeState(focusStateInitializer,nt,_e),useGridInitializeState(sortingStateInitializer,nt,_e),useGridInitializeState(preferencePanelStateInitializer,nt,_e),useGridInitializeState(filterStateInitializer,nt,_e),useGridInitializeState(densityStateInitializer,nt,_e),useGridInitializeState(paginationStateInitializer,nt,_e),useGridInitializeState(rowsMetaStateInitializer,nt,_e),useGridInitializeState(columnMenuStateInitializer,nt,_e),useGridKeyboardNavigation(nt,_e),useGridSelection(nt,_e),useGridColumns(nt,_e),useGridRows(nt,_e),useGridParamsApi(nt),useGridColumnSpanning(nt),useGridColumnGrouping(nt,_e),((rt=_e.experimentalFeatures)!=null&&rt.newEditingApi?useGridEditing:useGridEditing$1)(nt,_e),useGridFocus(nt,_e),useGridPreferencesPanel(nt,_e),useGridFilter(nt,_e),useGridSorting(nt,_e),useGridDensity(nt,_e),useGridPagination(nt,_e),useGridRowsMeta(nt,_e),useGridScroll(nt,_e),useGridColumnMenu(nt),useGridCsvExport(nt),useGridPrintExport(nt,_e),useGridClipboard(nt),useGridDimensions(nt,_e),useGridEvents(nt,_e),useGridStatePersistence(nt),nt},DATA_GRID_FORCED_PROPS={apiRef:void 0,disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},MAX_PAGE_SIZE=100,DATA_GRID_PROPS_DEFAULT_VALUES={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,density:GridDensityTypes.Standard,disableExtendRowFullWidth:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleSelection:!1,disableMultipleColumnsSorting:!1,disableSelectionOnClick:!1,disableVirtualization:!1,disableIgnoreModificationsIfProcessingProps:!1,editMode:GridEditModes.Cell,filterMode:GridFeatureModeConstant.client,headerHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:GridFeatureModeConstant.client,rowHeight:52,rowsPerPageOptions:[25,50,100],rowSpacingType:"margin",showCellRightBorder:!1,showColumnRightBorder:!1,sortingOrder:["asc","desc",null],sortingMode:GridFeatureModeConstant.client,throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1},useDataGridProps=_e=>{if(_e.pageSize>MAX_PAGE_SIZE)throw new Error("'props.pageSize' cannot exceed 100 in DataGrid.");const et=useThemeProps({props:_e,name:"MuiDataGrid"}),rt=reactExports.useMemo(()=>_extends({},GRID_DEFAULT_LOCALE_TEXT,et.localeText),[et.localeText]),nt=reactExports.useMemo(()=>{const ot=et.components;if(!ot)return _extends({},DATA_GRID_DEFAULT_SLOTS_COMPONENTS);const it={};return Object.entries(DATA_GRID_DEFAULT_SLOTS_COMPONENTS).forEach(([st,at])=>{it[st]=ot[st]===void 0?at:ot[st]}),it},[et.components]);return reactExports.useMemo(()=>_extends({},DATA_GRID_PROPS_DEFAULT_VALUES,et,{localeText:rt,components:nt},DATA_GRID_FORCED_PROPS),[et,rt,nt])},_excluded$s=["className"],useUtilityClasses$r=_e=>{const{classes:et}=_e;return composeClasses({root:["virtualScroller"]},getDataGridUtilityClass,et)},VirtualScrollerRoot=styled$1("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(_e,et)=>et.virtualScroller})({overflow:"auto",position:"relative","@media print":{overflow:"hidden"}}),GridVirtualScroller=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$s),st={classes:useGridRootProps().classes},at=useUtilityClasses$r(st);return jsx(VirtualScrollerRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))}),_excluded$r=["className","style"],useUtilityClasses$q=_e=>{const{classes:et,overflowedContent:rt}=_e;return composeClasses({root:["virtualScrollerContent",rt&&"virtualScrollerContent--overflowed"]},getDataGridUtilityClass,et)},VirtualScrollerContentRoot=styled$1("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(_e,et)=>et.virtualScrollerContent})({}),GridVirtualScrollerContent=reactExports.forwardRef(function _e(et,rt){const{className:nt,style:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$r),st=useGridRootProps(),at={classes:st.classes,overflowedContent:!st.autoHeight&&(ot==null?void 0:ot.minHeight)==="auto"},lt=useUtilityClasses$q(at);return jsx(VirtualScrollerContentRoot,_extends({ref:rt,className:clsx(lt.root,nt),style:ot},it))}),_excluded$q=["className"],useUtilityClasses$p=_e=>{const{classes:et}=_e;return composeClasses({root:["virtualScrollerRenderZone"]},getDataGridUtilityClass,et)},VirtualScrollerRenderZoneRoot=styled$1("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(_e,et)=>et.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),GridVirtualScrollerRenderZone=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$q),st={classes:useGridRootProps().classes},at=useUtilityClasses$p(st);return jsx(VirtualScrollerRenderZoneRoot,_extends({ref:rt,className:clsx(at.root,nt)},ot))}),_excluded$p=["style"];function binarySearch(_e,et,rt=0,nt=et.length){if(et.length<=0)return-1;if(rt>=nt)return rt;const ot=rt+Math.floor((nt-rt)/2),it=et[ot];return _e<=it?binarySearch(_e,et,rt,ot):binarySearch(_e,et,ot+1,nt)}function exponentialSearch(_e,et,rt){let nt=1;for(;rt<et.length&&et[rt]<_e;)rt+=nt,nt*=2;return binarySearch(_e,et,Math.floor(rt/2),Math.min(rt,et.length))}const getRenderableIndexes=({firstIndex:_e,lastIndex:et,buffer:rt,minFirstIndex:nt,maxLastIndex:ot})=>[clamp(_e-rt,nt,ot),clamp(et+rt,nt,ot)],areRenderContextsEqual=(_e,et)=>_e===et?!0:_e.firstRowIndex===et.firstRowIndex&&_e.lastRowIndex===et.lastRowIndex&&_e.firstColumnIndex===et.firstColumnIndex&&_e.lastColumnIndex===et.lastColumnIndex,useGridVirtualScroller=_e=>{var et,rt;const nt=useGridApiContext(),ot=useGridRootProps(),it=useGridSelector(nt,gridVisibleColumnDefinitionsSelector),{ref:st,disableVirtualization:at,onRenderZonePositioning:lt,renderZoneMinColumnIndex:ct=0,renderZoneMaxColumnIndex:pt=it.length,getRowProps:ut}=_e,ht=useGridSelector(nt,gridColumnPositionsSelector),ft=useGridSelector(nt,gridColumnsTotalWidthSelector),gt=useGridSelector(nt,gridDensityRowHeightSelector),vt=useGridSelector(nt,gridFocusCellSelector),yt=useGridSelector(nt,gridTabIndexCellSelector),mt=useGridSelector(nt,gridRowsMetaSelector),Et=useGridSelector(nt,gridEditRowsStateSelector),bt=useGridSelector(nt,selectedIdsLookupSelector),Ct=useGridVisibleRows(nt,ot),Tt=reactExports.useRef(null),wt=reactExports.useRef(null),Rt=useForkRef(st,wt),[It,St]=reactExports.useState(null),Pt=reactExports.useRef(It),Ot=reactExports.useRef({top:0,left:0}),[Ut,Bt]=reactExports.useState({width:null,height:null}),xt=reactExports.useRef(ft),At=reactExports.useCallback(nr=>{var hr,vr;const yr=nt.current.unstable_getLastMeasuredRowIndex();let Cr=yr===1/0;(hr=Ct.range)!=null&&hr.lastRowIndex&&!Cr&&(Cr=yr>=Ct.range.lastRowIndex);const or=clamp(yr-(((vr=Ct.range)==null?void 0:vr.firstRowIndex)||0),0,mt.positions.length);return Cr||mt.positions[or]>=nr?binarySearch(nr,mt.positions):exponentialSearch(nr,mt.positions,or)},[nt,(et=Ct.range)==null?void 0:et.firstRowIndex,(rt=Ct.range)==null?void 0:rt.lastRowIndex,mt.positions]),Mt=reactExports.useCallback(()=>{if(at)return{firstRowIndex:0,lastRowIndex:Ct.rows.length,firstColumnIndex:0,lastColumnIndex:it.length};const{top:nr,left:hr}=Ot.current,vr=Math.min(At(nr),mt.positions.length-1),yr=ot.autoHeight?vr+Ct.rows.length:At(nr+Ut.height);let Cr=!1,or=0,ur=ht.length;const[pr,Er]=getRenderableIndexes({firstIndex:vr,lastIndex:yr,minFirstIndex:0,maxLastIndex:Ct.rows.length,buffer:ot.rowBuffer});for(let Sr=pr;Sr<Er&&!Cr;Sr+=1){const Ht=Ct.rows[Sr];Cr=nt.current.unstable_rowHasAutoHeight(Ht.id)}return Cr||(or=binarySearch(hr,ht),ur=binarySearch(hr+Ut.width,ht)),{firstRowIndex:vr,lastRowIndex:yr,firstColumnIndex:or,lastColumnIndex:ur}},[at,At,mt.positions.length,ot.autoHeight,ot.rowBuffer,Ct.rows,ht,it.length,nt,Ut]);useEnhancedEffect$1(()=>{at?Tt.current.style.transform="translate3d(0px, 0px, 0px)":(wt.current.scrollLeft=0,wt.current.scrollTop=0)},[at]),useEnhancedEffect$1(()=>{Bt({width:wt.current.clientWidth,height:wt.current.clientHeight})},[mt.currentPageTotalHeight]);const Nt=reactExports.useCallback(nr=>{Bt({width:nr.width,height:nr.height})},[]);useGridApiEventHandler(nt,"resize",Nt);const $t=reactExports.useCallback(nr=>{const[hr,vr]=getRenderableIndexes({firstIndex:nr.firstRowIndex,lastIndex:nr.lastRowIndex,minFirstIndex:0,maxLastIndex:Ct.rows.length,buffer:ot.rowBuffer}),[yr]=getRenderableIndexes({firstIndex:nr.firstColumnIndex,lastIndex:nr.lastColumnIndex,minFirstIndex:ct,maxLastIndex:pt,buffer:ot.columnBuffer}),Cr=getFirstNonSpannedColumnToRender({firstColumnToRender:yr,apiRef:nt,firstRowToRender:hr,lastRowToRender:vr,visibleRows:Ct.rows}),or=gridRowsMetaSelector(nt.current.state).positions[hr],ur=gridColumnPositionsSelector(nt)[Cr];Tt.current.style.transform=`translate3d(${ur}px, ${or}px, 0px)`,typeof lt=="function"&&lt({top:or,left:ur})},[nt,Ct.rows,lt,ct,pt,ot.columnBuffer,ot.rowBuffer]),Ft=reactExports.useCallback(nr=>{if(Pt.current&&areRenderContextsEqual(nr,Pt.current)){$t(nr);return}St(nr),$t(nr);const[hr,vr]=getRenderableIndexes({firstIndex:nr.firstRowIndex,lastIndex:nr.lastRowIndex,minFirstIndex:0,maxLastIndex:Ct.rows.length,buffer:ot.rowBuffer});nt.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:hr,lastRowToRender:vr}),Pt.current=nr},[nt,St,Pt,Ct.rows.length,ot.rowBuffer,$t]);useEnhancedEffect$1(()=>{if(Ut.width==null)return;const nr=Mt();Ft(nr);const{top:hr,left:vr}=Ot.current,yr={top:hr,left:vr,renderContext:nr};nt.current.publishEvent("rowsScroll",yr)},[nt,Mt,Ut.width,Ft]);const jt=nr=>{const{scrollTop:hr,scrollLeft:vr}=nr.currentTarget;if(Ot.current.top=hr,Ot.current.left=vr,vr<0||hr<0||!Pt.current)return;const yr=at?Pt.current:Mt(),Cr=Math.abs(yr.firstRowIndex-Pt.current.firstRowIndex),or=Math.abs(yr.lastRowIndex-Pt.current.lastRowIndex),ur=Math.abs(yr.firstColumnIndex-Pt.current.firstColumnIndex),pr=Math.abs(yr.lastColumnIndex-Pt.current.lastColumnIndex),Er=Cr>=ot.rowThreshold||or>=ot.rowThreshold||ur>=ot.columnThreshold||pr>=ot.columnThreshold||xt.current!==ft;nt.current.publishEvent("rowsScroll",{top:hr,left:vr,renderContext:Er?yr:Pt.current},nr),Er&&(reactDomExports.flushSync(()=>{Ft(yr)}),xt.current=ft)},zt=nr=>{nt.current.publishEvent("virtualScrollerWheel",{},nr)},Yt=nr=>{nt.current.publishEvent("virtualScrollerTouchMove",{},nr)},Kt=(nr={renderContext:It})=>{const{renderContext:hr,minFirstColumn:vr=ct,maxLastColumn:yr=pt,availableSpace:Cr=Ut.width,rowIndexOffset:or=0,position:ur="center"}=nr;if(!hr||Cr==null)return null;const pr=at?0:ot.rowBuffer,Er=at?0:ot.columnBuffer,[Sr,Ht]=getRenderableIndexes({firstIndex:hr.firstRowIndex,lastIndex:hr.lastRowIndex,minFirstIndex:0,maxLastIndex:Ct.rows.length,buffer:pr}),qt=[];if(nr.rows)nr.rows.forEach(qr=>{qt.push(qr),nt.current.unstable_calculateColSpan({rowId:qr.id,minFirstColumn:vr,maxLastColumn:yr,columns:it})});else{if(!Ct.range)return null;for(let qr=Sr;qr<Ht;qr+=1){const dr=Ct.rows[qr];qt.push(dr),nt.current.unstable_calculateColSpan({rowId:dr.id,minFirstColumn:vr,maxLastColumn:yr,columns:it})}}const[fr,cr]=getRenderableIndexes({firstIndex:hr.firstColumnIndex,lastIndex:hr.lastColumnIndex,minFirstIndex:vr,maxLastIndex:yr,buffer:Er}),Ar=getFirstNonSpannedColumnToRender({firstColumnToRender:fr,apiRef:nt,firstRowToRender:Sr,lastRowToRender:Ht,visibleRows:Ct.rows}),Gr=it.slice(Ar,cr),Qr=[];for(let qr=0;qr<qt.length;qr+=1){var hn,sn;const{id:dr,model:mr}=qt[qr],br=Sr+qr===Ct.rows.length-1,Rr=nt.current.unstable_rowHasAutoHeight(dr)?"auto":nt.current.unstable_getRowHeight(dr);let Pr;bt[dr]==null?Pr=!1:Pr=nt.current.isRowSelectable(dr),Qr.push(jsx(ot.components.Row,_extends({row:mr,rowId:dr,rowHeight:Rr,cellFocus:vt,cellTabIndex:yt,editRowsState:Et,renderedColumns:Gr,visibleColumns:it,firstColumnToRender:Ar,lastColumnToRender:cr,selected:Pr,index:or+((Ct==null||(hn=Ct.range)==null?void 0:hn.firstRowIndex)||0)+Sr+qr,containerWidth:Cr,isLastVisible:br,position:ur},typeof ut=="function"?ut(dr,mr):{},(sn=ot.componentsProps)==null?void 0:sn.row),dr))}return Qr},er=Ut.width&&ft>Ut.width,ir=reactExports.useMemo(()=>{const nr=Math.max(mt.currentPageTotalHeight,1);let hr=!1;wt!=null&&wt.current&&nr<=(wt==null?void 0:wt.current.clientHeight)&&(hr=!0);const vr={width:er?ft:"auto",height:nr,minHeight:hr?"100%":"auto"};return ot.autoHeight&&Ct.rows.length===0&&(vr.height=2*gt),vr},[wt,ft,mt.currentPageTotalHeight,Ct.rows.length,er,ot.autoHeight,gt]);reactExports.useEffect(()=>{nt.current.publishEvent("virtualScrollerContentSizeChange")},[nt,ir]),ot.autoHeight&&Ct.rows.length===0&&(ir.height=2*gt);const rr={};er||(rr.overflowX="hidden"),ot.autoHeight&&(rr.overflowY="hidden");const lr=reactExports.useCallback(()=>Pt.current,[]);return nt.current.unstable_getRenderContext=lr,{renderContext:It,updateRenderZonePosition:$t,getRows:Kt,getRootProps:(nr={})=>{let{style:hr={}}=nr,vr=_objectWithoutPropertiesLoose(nr,_excluded$p);return _extends({ref:Rt,onScroll:jt,onWheel:zt,onTouchMove:Yt,style:_extends({},hr,rr)},vr)},getContentProps:({style:nr={}}={})=>({style:_extends({},nr,ir)}),getRenderZoneProps:()=>({ref:Tt})}},_excluded$o=["className","disableVirtualization"],DataGridVirtualScroller=reactExports.forwardRef(function _e(et,rt){const{className:nt,disableVirtualization:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$o),{getRootProps:st,getContentProps:at,getRenderZoneProps:lt,getRows:ct}=useGridVirtualScroller({ref:rt,disableVirtualization:ot});return jsx(GridVirtualScroller,_extends({className:nt},st(it),{children:jsx(GridVirtualScrollerContent,_extends({},at(),{children:jsx(GridVirtualScrollerRenderZone,_extends({},lt(),{children:ct()}))}))}))}),useUtilityClasses$o=_e=>{const{classes:et,headerAlign:rt,isDragging:nt,showRightBorder:ot,showColumnBorder:it,groupId:st}=_e;return composeClasses({root:["columnHeader",rt==="left"&&"columnHeader--alignLeft",rt==="center"&&"columnHeader--alignCenter",rt==="right"&&"columnHeader--alignRight",nt&&"columnHeader--moving",ot&&"withBorder",it&&"columnHeader--showColumnBorder",st===null?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]},getDataGridUtilityClass,et)};function GridColumnGroupHeader(_e){var et,rt;const{groupId:nt,width:ot,depth:it,maxDepth:st,fields:at,height:lt,colIndex:ct,isLastColumn:pt,extendRowFullWidth:ut}=_e,ht=useGridRootProps(),ft=useGridApiContext(),gt=useGridSelector(ft,gridColumnGroupsLookupSelector),{hasScrollX:vt,hasScrollY:yt}=(et=ft.current.getRootDimensions())!=null?et:{hasScrollX:!1,hasScrollY:!1},mt=nt?gt[nt]:{},{headerName:Et=nt??"",description:bt="",headerAlign:Ct=void 0}=mt;let Tt;const wt=nt&&((rt=gt[nt])==null?void 0:rt.renderHeaderGroup),Rt={groupId:nt,headerName:Et,description:bt,depth:it,maxDepth:st,fields:at,colIndex:ct,isLastColumn:pt};nt&&wt&&(Tt=wt(Rt));const St=pt?!(pt&&vt&&!yt)&&!ut:ht.showColumnRightBorder,Pt=ht.showColumnRightBorder,Ot=_extends({},_e,{classes:ht.classes,showRightBorder:St,showColumnBorder:Pt,headerAlign:Ct,depth:it,isDragging:!1}),Ut=Et??nt,Bt=useId(),xt=nt===null?`empty-group-cell-${Bt}`:nt,At=useUtilityClasses$o(Ot),Mt=typeof mt.headerClassName=="function"?mt.headerClassName(Rt):mt.headerClassName;return jsx(GridGenericColumnHeaderItem,{classes:At,columnMenuOpen:!1,colIndex:ct,height:lt,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:-1,isDraggable:!1,headerComponent:Tt,headerClassName:Mt,description:bt,elementId:xt,width:ot,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:Ut,"aria-colspan":at.length,"data-fields":`|-${at.join("-|-")}-|`,disableHeaderSeparator:!0})}const GridColumnHeaderRow=styled$1("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(_e,et)=>et.columnHeaderRow})(()=>({display:"flex"}));function isUIEvent(_e){return!!_e.target}const useGridColumnHeaders=_e=>{const{innerRef:et,minColumnIndex:rt=0}=_e,[nt,ot]=reactExports.useState(""),[it,st]=reactExports.useState(""),at=useGridApiContext(),lt=useGridSelector(at,gridVisibleColumnDefinitionsSelector),ct=useGridSelector(at,gridColumnPositionsSelector),pt=useGridSelector(at,gridTabIndexColumnHeaderSelector),ut=useGridSelector(at,gridTabIndexCellSelector),ht=useGridSelector(at,gridFocusColumnHeaderSelector),ft=useGridSelector(at,gridDensityHeaderHeightSelector),gt=useGridSelector(at,gridDensityHeaderGroupingMaxDepthSelector),vt=useGridSelector(at,gridDensityTotalHeaderHeightSelector),yt=useGridSelector(at,gridFilterActiveItemsLookupSelector),mt=useGridSelector(at,gridSortColumnLookupSelector),Et=useGridSelector(at,gridColumnMenuSelector),bt=useGridRootProps(),Ct=reactExports.useRef(null),Tt=useForkRef(et,Ct),[wt,Rt]=reactExports.useState(null),It=reactExports.useRef(wt),St=reactExports.useRef(0),Pt=useGridVisibleRows(at,bt);reactExports.useEffect(()=>{at.current.columnHeadersContainerElementRef.current.scrollLeft=0},[at]);const Ot=reactExports.useRef(defaultMemoize(getFirstColumnIndexToRender,{equalityCheck:(Kt,er)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every(ir=>Kt[ir]===er[ir])})),Ut=reactExports.useCallback(Kt=>{const[er,ir]=getRenderableIndexes({firstIndex:Kt.firstRowIndex,lastIndex:Kt.lastRowIndex,minFirstIndex:0,maxLastIndex:Pt.rows.length,buffer:bt.rowBuffer}),rr=Ot.current({firstColumnIndex:Kt.firstColumnIndex,minColumnIndex:rt,columnBuffer:bt.columnBuffer,firstRowToRender:er,lastRowToRender:ir,apiRef:at,visibleRows:Pt.rows}),lr=rr>0?St.current-ct[rr]:St.current;Ct.current.style.transform=`translate3d(${-lr}px, 0px, 0px)`},[ct,rt,bt.columnBuffer,at,Pt.rows,bt.rowBuffer]);reactExports.useLayoutEffect(()=>{wt&&Ut(wt)},[wt,Ut]);const Bt=reactExports.useCallback(({left:Kt,renderContext:er=null},ir)=>{var rr,lr;if(!Ct.current||St.current===Kt&&((rr=It.current)==null?void 0:rr.firstColumnIndex)===(er==null?void 0:er.firstColumnIndex)&&((lr=It.current)==null?void 0:lr.lastColumnIndex)===(er==null?void 0:er.lastColumnIndex))return;St.current=Kt;let nr=!1;er!==It.current||!It.current?(isUIEvent(ir)?(reactDomExports.flushSync(()=>{Rt(er)}),nr=!0):Rt(er),It.current=er):nr=!0,er&&nr&&Ut(er)},[Ut]),xt=reactExports.useCallback(Kt=>st(Kt.field),[]),At=reactExports.useCallback(()=>st(""),[]),Mt=reactExports.useCallback(Kt=>ot(Kt.field),[]),Nt=reactExports.useCallback(()=>ot(""),[]);useGridApiEventHandler(at,"columnResizeStart",xt),useGridApiEventHandler(at,"columnResizeStop",At),useGridApiEventHandler(at,"columnHeaderDragStart",Mt),useGridApiEventHandler(at,"columnHeaderDragEnd",Nt),useGridApiEventHandler(at,"rowsScroll",Bt);const $t=Kt=>{const{renderContext:er=wt,minFirstColumn:ir=rt,maxLastColumn:rr=lt.length}=Kt||{};if(!er)return null;const[lr,nr]=getRenderableIndexes({firstIndex:er.firstRowIndex,lastIndex:er.lastRowIndex,minFirstIndex:0,maxLastIndex:Pt.rows.length,buffer:bt.rowBuffer}),hr=Ot.current({firstColumnIndex:er.firstColumnIndex,minColumnIndex:ir,columnBuffer:bt.columnBuffer,apiRef:at,firstRowToRender:lr,lastRowToRender:nr,visibleRows:Pt.rows}),vr=Math.min(er.lastColumnIndex+bt.columnBuffer,rr);return{renderedColumns:lt.slice(hr,vr),firstColumnToRender:hr,lastColumnToRender:vr,minFirstColumn:ir,maxLastColumn:rr}},Ft=(Kt,er={})=>{const ir=$t(Kt);if(ir==null)return null;const{renderedColumns:rr,firstColumnToRender:lr}=ir,nr=[];for(let hr=0;hr<rr.length;hr+=1){const vr=rr[hr],yr=lr+hr,Cr=yr===0,or=!(pt===null&&ut===null),ur=pt!==null&&pt.field===vr.field||Cr&&!or?0:-1,pr=ht!==null&&ht.field===vr.field,Er=Et.open&&Et.field===vr.field;nr.push(jsx(GridColumnHeaderItem,_extends({},mt[vr.field],{columnMenuOpen:Er,filterItemsCounter:yt[vr.field]&&yt[vr.field].length,headerHeight:ft,isDragging:vr.field===nt,column:vr,colIndex:yr,isResizing:it===vr.field,isLastColumn:yr===lt.length-1,extendRowFullWidth:!bt.disableExtendRowFullWidth,hasFocus:pr,tabIndex:ur},er),vr.field))}return jsx(GridColumnHeaderRow,{role:"row","aria-rowindex":gt+1,children:nr})},jt=(Kt=[],er)=>Kt.slice(0,er+1),zt=Kt=>{if(gt===0)return null;const er=$t(Kt);if(er==null||er.renderedColumns.length===0)return null;const{renderedColumns:ir,firstColumnToRender:rr,lastColumnToRender:lr,maxLastColumn:nr}=er,hr=[],vr=[];for(let Gr=0;Gr<gt;Gr+=1){var yr,Cr,or;const Qr=[];let hn=0,sn=rr-1;const qr=(yr=lt[rr])==null||(Cr=yr.groupPath)==null?void 0:Cr[Gr],dr=jt((or=lt[rr])==null?void 0:or.groupPath,Gr);for(;qr!==null&&sn>=rt&&(ur=lt[sn])!=null&&ur.groupPath&&isDeepEqual(jt((pr=lt[sn])==null?void 0:pr.groupPath,Gr),dr);){var ur,pr,Er;const Rr=lt[sn];if(hn+=(Er=Rr.computedWidth)!=null?Er:0,Qr.length===0){var Sr;Qr.push({width:(Sr=Rr.computedWidth)!=null?Sr:0,fields:[Rr.field],groupId:qr,groupParents:dr,colIndex:sn})}else{var Ht;Qr[0].width+=(Ht=Rr.computedWidth)!=null?Ht:0,Qr[0].fields.push(Rr.field),Qr[0].colIndex=sn}sn-=1}const mr=ir.reduce((Rr,Pr,Or)=>{var Nr;const Br=Rr[Rr.length-1];if(Pr.groupPath&&Pr.groupPath.length>Gr){var jr;if(Br&&Br.groupId===Pr.groupPath[Gr]){var $r;return[...Rr.slice(0,Rr.length-1),_extends({},Br,{width:Br.width+(($r=Pr.computedWidth)!=null?$r:0),fields:[...Br.fields,Pr.field]})]}return[...Rr,{groupId:Pr.groupPath[Gr],groupParents:jt(Pr.groupPath,Gr),width:(jr=Pr.computedWidth)!=null?jr:0,fields:[Pr.field],colIndex:rr+Or}]}if(Br&&Br.groupId===null&&isDeepEqual(jt(Pr.groupPath,Gr),Br.groupParents)){var Fr;return[...Rr.slice(0,Rr.length-1),_extends({},Br,{width:Br.width+((Fr=Pr.computedWidth)!=null?Fr:0),fields:[...Br.fields,Pr.field]})]}return[...Rr,{groupId:null,groupParents:jt(Pr.groupPath,Gr),width:(Nr=Pr.computedWidth)!=null?Nr:0,fields:[Pr.field],colIndex:rr+Or}]},Qr);sn=lr;const br=mr[mr.length-1].groupId;for(;br!==null&&sn<nr&&(qt=lt[sn])!=null&&qt.groupPath&&((fr=lt[sn])==null||(cr=fr.groupPath)==null?void 0:cr[Gr])===br;){var qt,fr,cr,Ar;const Rr=lt[sn];mr[mr.length-1].width+=(Ar=Rr.computedWidth)!=null?Ar:0,mr[mr.length-1].fields.push(Rr.field),sn+=1}vr.push({leftOverflow:hn,elements:[...mr]})}return vr.forEach((Gr,Qr)=>{hr.push(jsx(GridColumnHeaderRow,{style:{height:`${ft}px`,transform:`translateX(-${Gr.leftOverflow}px)`},role:"row","aria-rowindex":Qr+1,children:Gr.elements.map(({groupId:hn,width:sn,fields:qr,colIndex:dr},mr)=>jsx(GridColumnGroupHeader,{groupId:hn,width:sn,fields:qr,colIndex:dr,depth:Qr,isLastColumn:dr===lt.length-qr.length,extendRowFullWidth:!bt.disableExtendRowFullWidth,maxDepth:vr.length,height:ft},mr))},Qr))}),hr},Yt={minHeight:vt,maxHeight:vt,lineHeight:`${ft}px`};return{renderContext:wt,getColumnHeaders:Ft,getColumnGroupHeaders:zt,isDragging:!!nt,getRootProps:(Kt={})=>_extends({style:Yt},Kt),getInnerProps:()=>({ref:Tt,role:"rowgroup"})}},_excluded$n=["className"],useUtilityClasses$n=_e=>{const{classes:et}=_e;return composeClasses({root:["columnHeaders"]},getDataGridUtilityClass,et)},GridColumnHeadersRoot=styled$1("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(_e,et)=>et.columnHeaders})(({theme:_e})=>({position:"absolute",top:0,left:0,right:0,overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:`1px solid ${_e.palette.mode==="light"?lighten(alpha$1(_e.palette.divider,1),.88):darken(alpha$1(_e.palette.divider,1),.68)}`,borderTopLeftRadius:_e.shape.borderRadius,borderTopRightRadius:_e.shape.borderRadius})),GridColumnHeaders=reactExports.forwardRef(function _e(et,rt){const{className:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$n),st={classes:useGridRootProps().classes},at=useUtilityClasses$n(st);return jsx(GridColumnHeadersRoot,_extends({ref:rt,className:clsx(nt,at.root)},ot))}),_excluded$m=["isDragging","className"],useUtilityClasses$m=_e=>{const{isDragging:et,hasScrollX:rt,classes:nt}=_e;return composeClasses({root:["columnHeadersInner",et&&"columnHeaderDropZone",rt&&"columnHeadersInner--scrollable"]},getDataGridUtilityClass,nt)},GridColumnHeadersInnerRoot=styled$1("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(_e,et)=>[{[`&.${gridClasses.columnHeaderDropZone}`]:et.columnHeaderDropZone},et.columnHeadersInner]})(()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${gridClasses.columnHeaderDropZone} .${gridClasses.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${gridClasses["columnHeadersInner--scrollable"]} .${gridClasses.columnHeader}:last-child`]:{borderRight:"none"}})),GridColumnHeadersInner=reactExports.forwardRef(function _e(et,rt){var nt,ot;const{isDragging:it,className:st}=et,at=_objectWithoutPropertiesLoose(et,_excluded$m),lt=useGridApiContext(),ct=useGridRootProps(),pt={isDragging:it,hasScrollX:(nt=(ot=lt.current.getRootDimensions())==null?void 0:ot.hasScrollX)!=null?nt:!1,classes:ct.classes},ut=useUtilityClasses$m(pt);return jsx(GridColumnHeadersInnerRoot,_extends({ref:rt,className:clsx(st,ut.root)},at))}),_excluded$l=["innerRef","className"],DataGridColumnHeaders=reactExports.forwardRef(function _e(et,rt){const{innerRef:nt}=et,ot=_objectWithoutPropertiesLoose(et,_excluded$l),{isDragging:it,getRootProps:st,getInnerProps:at,getColumnHeaders:lt,getColumnGroupHeaders:ct}=useGridColumnHeaders({innerRef:nt});return jsxs(GridColumnHeaders,_extends({ref:rt},st(ot),{children:[jsx(GridScrollArea,{scrollDirection:"left"}),jsxs(GridColumnHeadersInner,_extends({isDragging:it},at(),{children:[ct(),lt()]})),jsx(GridScrollArea,{scrollDirection:"right"})]}))}),DataGridRaw=reactExports.forwardRef(function _e(et,rt){const nt=useDataGridProps(et),ot=useDataGridComponent(nt);return jsx(GridContextProvider,{apiRef:ot,props:nt,children:jsx(GridRoot,{className:nt.className,style:nt.style,sx:nt.sx,ref:rt,children:jsxs(GridErrorHandler,{children:[jsx(GridHeaderPlaceholder,{}),jsx(GridBody,{ColumnHeadersComponent:DataGridColumnHeaders,VirtualScrollerComponent:DataGridVirtualScroller}),jsx(GridFooterPlaceholder,{})]})})})}),DataGrid=reactExports.memo(DataGridRaw);DataGridRaw.propTypes={"aria-label":propTypesExports.string,"aria-labelledby":propTypesExports.string,autoHeight:propTypesExports.bool,autoPageSize:propTypesExports.bool,cellModesModel:propTypesExports.object,checkboxSelection:propTypesExports.bool,classes:propTypesExports.object,columnBuffer:propTypesExports.number,columnGroupingModel:propTypesExports.arrayOf(propTypesExports.object),columns:chainPropTypes(propTypesExports.array.isRequired),columnThreshold:propTypesExports.number,columnTypes:propTypesExports.object,columnVisibilityModel:propTypesExports.object,components:propTypesExports.object,componentsProps:propTypesExports.object,density:propTypesExports.oneOf(["comfortable","compact","standard"]),disableColumnFilter:propTypesExports.bool,disableColumnMenu:propTypesExports.bool,disableColumnSelector:propTypesExports.bool,disableDensitySelector:propTypesExports.bool,disableExtendRowFullWidth:propTypesExports.bool,disableIgnoreModificationsIfProcessingProps:propTypesExports.bool,disableSelectionOnClick:propTypesExports.bool,disableVirtualization:propTypesExports.bool,editMode:propTypesExports.oneOf(["cell","row"]),editRowsModel:propTypesExports.object,error:propTypesExports.any,experimentalFeatures:propTypesExports.shape({columnGrouping:propTypesExports.bool,newEditingApi:propTypesExports.bool,preventCommitWhileValidating:propTypesExports.bool,warnIfFocusStateIsNotSynced:propTypesExports.bool}),filterMode:propTypesExports.oneOf(["client","server"]),filterModel:propTypesExports.shape({items:propTypesExports.arrayOf(propTypesExports.shape({columnField:propTypesExports.string.isRequired,id:propTypesExports.oneOfType([propTypesExports.number,propTypesExports.string]),operatorValue:propTypesExports.string,value:propTypesExports.any})).isRequired,linkOperator:propTypesExports.oneOf(["and","or"]),quickFilterLogicOperator:propTypesExports.oneOf(["and","or"]),quickFilterValues:propTypesExports.array}),getCellClassName:propTypesExports.func,getDetailPanelContent:propTypesExports.func,getEstimatedRowHeight:propTypesExports.func,getRowClassName:propTypesExports.func,getRowHeight:propTypesExports.func,getRowId:propTypesExports.func,getRowSpacing:propTypesExports.func,headerHeight:propTypesExports.number,hideFooter:propTypesExports.bool,hideFooterPagination:propTypesExports.bool,hideFooterSelectedRowCount:propTypesExports.bool,initialState:propTypesExports.object,isCellEditable:propTypesExports.func,isRowSelectable:propTypesExports.func,keepNonExistentRowsSelected:propTypesExports.bool,loading:propTypesExports.bool,localeText:propTypesExports.object,logger:propTypesExports.shape({debug:propTypesExports.func.isRequired,error:propTypesExports.func.isRequired,info:propTypesExports.func.isRequired,warn:propTypesExports.func.isRequired}),logLevel:propTypesExports.oneOf(["debug","error","info","warn",!1]),nonce:propTypesExports.string,onCellClick:propTypesExports.func,onCellDoubleClick:propTypesExports.func,onCellEditCommit:propTypesExports.func,onCellEditStart:propTypesExports.func,onCellEditStop:propTypesExports.func,onCellFocusOut:propTypesExports.func,onCellKeyDown:propTypesExports.func,onCellModesModelChange:propTypesExports.func,onColumnHeaderClick:propTypesExports.func,onColumnHeaderDoubleClick:propTypesExports.func,onColumnHeaderEnter:propTypesExports.func,onColumnHeaderLeave:propTypesExports.func,onColumnHeaderOut:propTypesExports.func,onColumnHeaderOver:propTypesExports.func,onColumnOrderChange:propTypesExports.func,onColumnVisibilityChange:propTypesExports.func,onColumnVisibilityModelChange:propTypesExports.func,onEditCellPropsChange:propTypesExports.func,onEditRowsModelChange:propTypesExports.func,onError:propTypesExports.func,onFilterModelChange:propTypesExports.func,onMenuClose:propTypesExports.func,onMenuOpen:propTypesExports.func,onPageChange:propTypesExports.func,onPageSizeChange:propTypesExports.func,onPreferencePanelClose:propTypesExports.func,onPreferencePanelOpen:propTypesExports.func,onProcessRowUpdateError:propTypesExports.func,onResize:propTypesExports.func,onRowClick:propTypesExports.func,onRowDoubleClick:propTypesExports.func,onRowEditCommit:propTypesExports.func,onRowEditStart:propTypesExports.func,onRowEditStop:propTypesExports.func,onRowModesModelChange:propTypesExports.func,onSelectionModelChange:propTypesExports.func,onSortModelChange:propTypesExports.func,onStateChange:propTypesExports.func,page:propTypesExports.number,pageSize:chainPropTypes(propTypesExports.number),pagination:_e=>_e.pagination===!1?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join(`
`)):null,paginationMode:propTypesExports.oneOf(["client","server"]),processRowUpdate:propTypesExports.func,rowBuffer:propTypesExports.number,rowCount:propTypesExports.number,rowHeight:propTypesExports.number,rowModesModel:propTypesExports.object,rows:propTypesExports.arrayOf(propTypesExports.object).isRequired,rowSpacingType:propTypesExports.oneOf(["border","margin"]),rowsPerPageOptions:propTypesExports.arrayOf(propTypesExports.number),rowThreshold:propTypesExports.number,scrollbarSize:propTypesExports.number,selectionModel:chainPropTypes(propTypesExports.oneOfType([propTypesExports.number,propTypesExports.string,propTypesExports.array])),showCellRightBorder:propTypesExports.bool,showColumnRightBorder:propTypesExports.bool,sortingMode:propTypesExports.oneOf(["client","server"]),sortingOrder:propTypesExports.arrayOf(propTypesExports.oneOf(["asc","desc"])),sortModel:propTypesExports.arrayOf(propTypesExports.shape({field:propTypesExports.string.isRequired,sort:propTypesExports.oneOf(["asc","desc"])})),sx:propTypesExports.oneOfType([propTypesExports.arrayOf(propTypesExports.oneOfType([propTypesExports.func,propTypesExports.object,propTypesExports.bool])),propTypesExports.func,propTypesExports.object])};function BasicTable({rows:_e,columns:et,hideColumns:rt}){const[nt,ot]=reactExports.useState(20),[it,st]=reactExports.useState(et),at=ct=>{const pt=it.map(ut=>ut.field===ct.field?{...ut,hide:!ct.isVisible}:ut);st(pt)},lt=it.filter(ct=>!rt.includes(ct.field));return jsx(Box$1,{sx:{height:400,width:1},children:jsx(DataGrid,{getRowId:ct=>ct._id,autoHeight:!0,rows:_e,pageSize:nt,rowsPerPageOptions:[10,20,30,40,50,100],onPageSizeChange:ct=>ot(ct),columns:lt,onColumnVisibilityChange:at,components:{Toolbar:GridToolbar}})})}var Edit={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Edit,"__esModule",{value:!0});var default_1$6=Edit.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=require$$2,_default$6=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");default_1$6=Edit.default=_default$6;var Delete={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(Delete,"__esModule",{value:!0});var default_1$5=Delete.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=require$$2,_default$5=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");default_1$5=Delete.default=_default$5;function SnackbarDisplay({snackbarData:_e,setSnackbarData:et}){const rt=nt=>{nt!=="clickaway"&&et({open:!1,message:"",type:"success"})};return jsx(Fragment,{children:jsx(Snackbar$1,{open:_e.open,autoHideDuration:5e3,onClose:rt,children:jsx(Alert$1,{onClose:rt,severity:_e.type,sx:{width:"100%"},children:_e.message})})})}function Quiz(){const[_e,et]=reactExports.useState([]),[rt,nt]=reactExports.useState({open:!1,message:"",type:"success"}),[ot,it]=reactExports.useState(!1),[st,at]=reactExports.useState(""),lt=async ht=>{const ft=await QuizService.delete({id:ht});ft.status===202?(it(!1),nt({open:!0,message:ft.data.message})):alert("There is some error try again after some time")},ct=[{field:"_id",headerName:"Id",width:50},{field:"name",headerName:"Name",width:100},{field:"description",headerName:"Description",width:200},{field:"studentNames",headerName:"Students",width:250},{field:"numberOfQuestions",headerName:"No. of Questions",renderCell:ht=>{const ft=ht.row;return jsx(Typography$1,{children:ft.questions.length})}},{field:"actions",headerName:"Actions",sortable:!1,width:150,renderCell:ht=>{const ft=ht.row;return jsxs(Fragment,{children:[jsx(IconButton$1,{component:Link$2,to:"edit",state:{id:ft._id},color:"primary",children:jsx(default_1$6,{})}),jsx(IconButton$1,{onClick:()=>{at(ft._id),it(!0)},color:"error",children:jsx(default_1$5,{})})]})}}],pt=["_id"],ut=async()=>{const ht=await QuizService.get();et(ht.data)};return reactExports.useEffect(()=>{ut()},[rt]),jsxs(Fragment,{children:[jsxs(Box$1,{children:[jsx(AlertDialogBox,{open:ot,setOpen:it,handleSuccess:()=>lt(st),title:"Are Your You want to delete quiz ?",data:"Ok Delete it"}),jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$1,{}),jsx(Typography$1,{variant:"h6",children:"Quiz"}),jsx(Box$1,{children:jsx(Link$2,{to:"add",children:jsx(Button$1,{variant:"contained",children:"Add Quiz"})})})]}),jsx(Divider$1,{sx:{margin:"10px 0 20px"}}),jsx(Box$1,{textAlign:"center",children:jsx(BasicTable,{rows:_e,columns:ct,hideColumns:pt})})]}),jsx(SnackbarDisplay,{snackbarData:rt,setSnackbarData:nt})]})}function Stream(){const[_e,et]=reactExports.useState(""),[rt,nt]=React$1.useState([]),[ot,it]=React$1.useState(""),[st,at]=React$1.useState(""),[lt,ct]=React$1.useState([]),[pt,ut]=React$1.useState([]),ht=useNavigate(),ft=()=>{ht("view",{state:{roomId:st,students:pt}})},gt=async()=>{const yt=await QuizService.get();et(yt.data),nt(yt.data.map(mt=>mt.name))},vt=yt=>{const{target:{value:mt}}=yt;ut(typeof mt=="string"?mt.split(","):mt)};return reactExports.useEffect(()=>{gt()},[]),jsxs(Fragment,{children:[jsxs(Box$3,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$3,{}),jsx(Typography$1,{variant:"h6",children:"Select Students"}),jsx(Box$3,{})]}),jsx("form",{children:jsxs(Box$3,{display:"flex",flexDirection:"column",gap:2,children:[jsxs(FormControl$1,{fullWidth:!0,children:[jsx(InputLabel$1,{id:"demo-simple-select-label",children:"Quiz"}),jsx(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:ot,label:"Quiz",onChange:yt=>{it(yt.target.value),_e.map(mt=>{mt.name===yt.target.value&&(at(mt._id),ct(mt.studentNames))})},children:rt&&rt.map(yt=>jsx(MenuItem$1,{value:yt,children:yt},yt))})]}),jsxs(FormControl$1,{fullWidth:!0,children:[jsx(InputLabel$1,{children:"Student"}),jsx(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:pt,multiple:!0,label:"Student",onChange:vt,children:lt&&lt.map(yt=>jsx(MenuItem$1,{value:yt,children:yt},yt))})]}),jsx(Button$1,{variant:"contained",onClick:ft,children:"Submit"})]})})]})}var Search={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(Search,"__esModule",{value:!0});var default_1$4=Search.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=require$$2,_default$4=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");default_1$4=Search.default=_default$4;var Notifications={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Notifications,"__esModule",{value:!0});var default_1$3=Notifications.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=require$$2,_default$3=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications");default_1$3=Notifications.default=_default$3;var Group={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Group,"__esModule",{value:!0});var default_1$2=Group.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=require$$2,_default$2=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");default_1$2=Group.default=_default$2;const AccountPopover=_e=>{const{anchorEl:et,onClose:rt,open:nt,...ot}=_e,it=useNavigate();return jsxs(Popover$1,{anchorEl:et,anchorOrigin:{horizontal:"left",vertical:"bottom"},onClose:rt,open:nt,PaperProps:{sx:{width:"300px"}},...ot,children:[jsxs(Box$1,{sx:{py:1.5,px:2},children:[jsx(Typography$1,{variant:"overline",children:"Account"}),jsx(Typography$1,{color:"text.secondary",variant:"body2",children:auth$1.name})]}),jsx(MenuList$1,{disablePadding:!0,sx:{"& > *":{"&:first-of-type":{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:"1px"},padding:"12px 16px"}},children:jsx(MenuItem$1,{onClick:()=>{auth$1.logout(),it("/",{replace:!0})},children:"Sign out"})})]})},DashboardNavbarRoot=newStyled(AppBar$1)(({theme:_e})=>({backgroundColor:_e.palette.background.paper,boxShadow:_e.shadows[3]})),DashboardNavbar=_e=>{const{onSidebarOpen:et,...rt}=_e,nt=reactExports.useRef(null),[ot,it]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsx(DashboardNavbarRoot,{sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}},...rt,children:jsxs(Toolbar$1,{disableGutters:!0,sx:{minHeight:64,left:0,px:2},children:[jsx(IconButton$1,{onClick:et,sx:{display:{xs:"inline-flex",lg:"none"}},children:jsx(default_1$g,{fontSize:"small"})}),jsx(Tooltip$2,{title:"Search",children:jsx(IconButton$1,{sx:{ml:1},children:jsx(default_1$4,{fontSize:"small"})})}),jsx(Box$1,{sx:{flexGrow:1}}),jsx(Tooltip$2,{title:"Contacts",children:jsx(IconButton$1,{sx:{ml:1},children:jsx(default_1$2,{})})}),jsx(Tooltip$2,{title:"Notifications",children:jsx(IconButton$1,{sx:{ml:1},children:jsx(Badge$1,{badgeContent:4,color:"primary",children:jsx(default_1$3,{})})})}),jsx(Avatar$1,{onClick:()=>it(!0),ref:nt,sx:{backgroundColor:"black",cursor:"pointer",height:40,width:40,ml:1},src:avatar})]})}),jsx(AccountPopover,{anchorEl:nt.current,open:ot,onClose:()=>it(!1)})]})};DashboardNavbar.propTypes={onSidebarOpen:propTypesExports.func};const NavItem=_e=>{const{href:et,icon:rt,title:nt,...ot}=_e,it=useNavigate(),st=useLocation(),at=et?st.pathname.split("/")[2]===et.split("/")[1]:!1;return jsx(ListItem$1,{disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2},...ot,children:jsx(Button$1,{component:"a",startIcon:rt,onClick:()=>it("/admin"+et),disableRipple:!0,sx:{backgroundColor:at&&"rgba(255,255,255, 0.08)",borderRadius:1,color:at?"secondary.main":"neutral.300",fontWeight:at&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:at?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}},children:jsx(Box$1,{sx:{flexGrow:1},children:nt})})})};NavItem.propTypes={href:propTypesExports.string,icon:propTypesExports.node,title:propTypesExports.string};const items=adminSidebarItems,DashboardSidebar=_e=>{const{open:et,onClose:rt}=_e,nt=useTheme(),ot=useMediaQuery(nt.breakpoints.up("lg"),{defaultMatches:!0,noSsr:!1}),it=jsx(Fragment,{children:jsxs(Box$1,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[jsx("div",{children:jsxs(Box$1,{sx:{p:3,display:"flex",alignItems:"center",gap:5},children:[jsx(Avatar$1,{src:logo}),jsx(Typography$1,{children:"Procto Vigil"})]})}),jsx(Divider$1,{sx:{borderColor:"#2D3748",my:1}}),jsx(Box$1,{sx:{flexGrow:1},children:items.map(st=>jsx(NavItem,{icon:st.icon,href:st.href,title:st.title},st.title))}),jsx(Divider$1,{sx:{borderColor:"#2D3748"}})]})});return ot?jsx(Drawer$1,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent",children:it}):jsx(Drawer$1,{anchor:"left",onClose:rt,open:et,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:st=>st.zIndex.appBar+100},variant:"temporary",children:it})};DashboardSidebar.propTypes={onClose:propTypesExports.func,open:propTypesExports.bool};function BreadcrumbsItem(){const et=useLocation().pathname.split("/").splice(2);let rt="/admin";return jsxs(Breadcrumbs$1,{children:[jsx(Link$1,{underline:"hover",color:"inherit",href:"/",children:"Home"}),et.map((nt,ot)=>(rt+="/"+nt,jsx(Link$1,{underline:"hover",color:"inherit",href:rt,children:nt},ot)))]})}const DashboardLayoutRoot=styled$1("div")(({theme:_e})=>({display:"flex",flex:"1 1 auto",maxWidth:"100%",paddingTop:64,[_e.breakpoints.up("lg")]:{paddingLeft:280}})),AdminLayout=()=>{const[_e,et]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsx(DashboardLayoutRoot,{children:jsx(Box$1,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:jsxs(Box$1,{children:[jsx(Paper$1,{sx:{m:2,p:2,backgroundColor:theme$1.palette.neutral[300]},varient:"outlined",children:jsx(BreadcrumbsItem,{})}),jsx(Paper$1,{sx:{m:2,p:1,backgroundColor:theme$1.palette.neutral[200]},varient:"outlined",children:jsx(Card$1,{sx:{p:2,gap:3,display:"flex",flexDirection:"column"},children:jsx(Outlet,{})})})]})})}),jsx(DashboardNavbar,{onSidebarOpen:()=>et(!0)}),jsx(DashboardSidebar,{onClose:()=>et(!1),open:_e})]})};function ViewUser(){const[_e,et]=reactExports.useState([]),rt=async()=>{const it=await UserService.get();et(it.data)};return reactExports.useEffect(()=>{rt()},[]),jsx(Fragment,{children:jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$1,{}),jsx(Typography$1,{variant:"h6",children:"Student"}),jsx(Box$1,{})]}),jsx(Divider$1,{sx:{margin:"10px 0 20px"}}),jsxs(Box$1,{textAlign:"center",children:[" ",jsx(BasicTable,{rows:_e,columns:[{field:"_id",headerName:"Id",width:50},{field:"username",headerName:"Username",width:150},{field:"name",headerName:"Name",width:150,renderCell:it=>{const st=it.row;return jsx(Typography$1,{children:st.firstName+" "+st.lastName})}},{field:"email",headerName:"E-mail",width:250},{field:"roles",headerName:"Roles"},{field:"actions",headerName:"Actions",sortable:!1,width:150,renderCell:it=>{const st=it.row;return jsxs(Fragment,{children:[jsx(IconButton$1,{component:Link$2,to:"edit",state:{id:st._id},color:"primary",children:jsx(default_1$6,{})}),jsx(IconButton$1,{onClick:()=>{setDeleteId(st._id),setDeleteDialogBox(!0)},color:"error",children:jsx(default_1$5,{})})]})}}],hideColumns:["_id"]})]})]})})}function TextBox({label:_e="lebel",type:et="text",variant:rt="outlined",fullWidth:nt=!0,multiline:ot=!1,rows:it=2,disabled:st=!1,...at}){return jsx(Fragment,{children:jsx(FormControl$1,{fullWidth:nt,children:jsx(TextField$1,{id:"outlined-basic",type:et,label:_e,variant:rt,multiline:ot,rows:it,disabled:st,...at})})})}function useFormInput(_e){const[et,rt]=reactExports.useState(_e);function nt(it){const st=typeof it;it.target&&it.target.value?rt(it.target.value):rt(st==="string"||st==="number"?it:"")}return{value:et,onChange:nt}}function arrayIncludes(_e,et){return Array.isArray(et)?et.every(rt=>_e.indexOf(rt)!==-1):_e.indexOf(et)!==-1}const onSpaceOrEnter=(_e,et)=>rt=>{(rt.key==="Enter"||rt.key===" ")&&(_e(rt),rt.preventDefault(),rt.stopPropagation()),et&&et(rt)},getActiveElement=(_e=document)=>{const et=_e.activeElement;return et?et.shadowRoot?getActiveElement(et.shadowRoot):et:null};function getPickersMonthUtilityClass(_e){return generateUtilityClass("PrivatePickersMonth",_e)}const pickersMonthClasses=generateUtilityClasses("PrivatePickersMonth",["root","selected"]),_excluded$k=["disabled","onSelect","selected","value","tabIndex","hasFocus","onFocus","onBlur"],useUtilityClasses$l=_e=>{const{classes:et,selected:rt}=_e;return composeClasses({root:["root",rt&&"selected"]},getPickersMonthUtilityClass,et)},PickersMonthRoot=styled$1(Typography$1,{name:"PrivatePickersMonth",slot:"Root",overridesResolver:(_e,et)=>[et.root,{[`&.${pickersMonthClasses.selected}`]:et.selected}]})(({theme:_e})=>_extends({flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",color:"unset",backgroundColor:"transparent",border:0,outline:0},_e.typography.subtitle1,{margin:"8px 0",height:36,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity)},"&:disabled":{pointerEvents:"none",color:_e.palette.text.secondary},[`&.${pickersMonthClasses.selected}`]:{color:_e.palette.primary.contrastText,backgroundColor:_e.palette.primary.main,"&:focus, &:hover":{backgroundColor:_e.palette.primary.dark}}})),noop$3=()=>{},PickersMonth=_e=>{const{disabled:et,onSelect:rt,selected:nt,value:ot,tabIndex:it,hasFocus:st,onFocus:at=noop$3,onBlur:lt=noop$3}=_e,ct=_objectWithoutPropertiesLoose(_e,_excluded$k),pt=useUtilityClasses$l(_e),ut=()=>{rt(ot)},ht=reactExports.useRef(null);return useEnhancedEffect$1(()=>{if(st){var ft;(ft=ht.current)==null||ft.focus()}},[st]),jsx(PickersMonthRoot,_extends({ref:ht,component:"button",type:"button",className:pt.root,tabIndex:it,onClick:ut,onKeyDown:onSpaceOrEnter(ut),color:nt?"primary":void 0,variant:nt?"h5":"subtitle1",disabled:et,onFocus:ft=>at(ft,ot),onBlur:ft=>lt(ft,ot)},ct))},getPickersLocalization=_e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:_extends({},_e)}}}}),enUSPickers={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:_e=>_e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",inputModeToggleButtonAriaLabel:(_e,et)=>_e?`text input view is open, go to ${et} view`:`${et} view is open, go to text input view`,start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerDefaultToolbarTitle:"Select date",dateTimePickerDefaultToolbarTitle:"Select date & time",timePickerDefaultToolbarTitle:"Select time",dateRangePickerDefaultToolbarTitle:"Select date range",clockLabelText:(_e,et,rt)=>`Select ${_e}. ${et===null?"No time selected":`Selected time is ${rt.format(et,"fullTime")}`}`,hoursClockNumberText:_e=>`${_e} hours`,minutesClockNumberText:_e=>`${_e} minutes`,secondsClockNumberText:_e=>`${_e} seconds`,openDatePickerDialogue:(_e,et)=>_e&&et.isValid(et.date(_e))?`Choose date, selected date is ${et.format(et.date(_e),"fullDate")}`:"Choose date",openTimePickerDialogue:(_e,et)=>_e&&et.isValid(et.date(_e))?`Choose time, selected time is ${et.format(et.date(_e),"fullTime")}`:"Choose time",timeTableLabel:"pick time",dateTableLabel:"pick date"},DEFAULT_LOCALE=enUSPickers;getPickersLocalization(enUSPickers);const MuiPickersAdapterContext=reactExports.createContext(null);function LocalizationProvider(_e){const et=useThemeProps({props:_e,name:"MuiLocalizationProvider"}),{children:rt,dateAdapter:nt,dateFormats:ot,dateLibInstance:it,locale:st,adapterLocale:at,localeText:lt}=et,ct=reactExports.useMemo(()=>new nt({locale:at??st,formats:ot,instance:it}),[nt,st,at,ot,it]),pt=reactExports.useMemo(()=>({minDate:ct.date("1900-01-01T00:00:00.000"),maxDate:ct.date("2099-12-31T00:00:00.000")}),[ct]),ut=reactExports.useMemo(()=>({utils:ct,defaultDates:pt,localeText:_extends({},DEFAULT_LOCALE,lt??{})}),[pt,ct,lt]);return jsx(MuiPickersAdapterContext.Provider,{value:ut,children:rt})}const useLocalizationContext=()=>{const _e=reactExports.useContext(MuiPickersAdapterContext);if(_e===null)throw new Error("MUI: Can not find utils in context. It looks like you forgot to wrap your component in LocalizationProvider, or pass dateAdapter prop directly.");return _e},useUtils=()=>useLocalizationContext().utils,useDefaultDates=()=>useLocalizationContext().defaultDates,useLocaleText=()=>useLocalizationContext().localeText,useNow=()=>{const _e=useUtils();return reactExports.useRef(_e.date()).current};function getMonthPickerUtilityClass(_e){return generateUtilityClass("MuiMonthPicker",_e)}generateUtilityClasses("MuiMonthPicker",["root"]);const findClosestEnabledDate=({date:_e,disableFuture:et,disablePast:rt,maxDate:nt,minDate:ot,isDateDisabled:it,utils:st})=>{const at=st.startOfDay(st.date());rt&&st.isBefore(ot,at)&&(ot=at),et&&st.isAfter(nt,at)&&(nt=at);let lt=_e,ct=_e;for(st.isBefore(_e,ot)&&(lt=st.date(ot),ct=null),st.isAfter(_e,nt)&&(ct&&(ct=st.date(nt)),lt=null);lt||ct;){if(lt&&st.isAfter(lt,nt)&&(lt=null),ct&&st.isBefore(ct,ot)&&(ct=null),lt){if(!it(lt))return lt;lt=st.addDays(lt,1)}if(ct){if(!it(ct))return ct;ct=st.addDays(ct,-1)}}return null},parsePickerInputValue=(_e,et)=>{const rt=_e.date(et);return _e.isValid(rt)?rt:null},parseNonNullablePickerDate=(_e,et,rt)=>{if(et==null)return rt;const nt=_e.date(et);return _e.isValid(nt)?nt:rt},_excluded$j=["className","date","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange"],useUtilityClasses$k=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getMonthPickerUtilityClass,et)};function useMonthPickerDefaultizedProps(_e,et){const rt=useUtils(),nt=useDefaultDates(),ot=useThemeProps({props:_e,name:et});return _extends({disableFuture:!1,disablePast:!1},ot,{minDate:parseNonNullablePickerDate(rt,ot.minDate,nt.minDate),maxDate:parseNonNullablePickerDate(rt,ot.maxDate,nt.maxDate)})}const MonthPickerRoot=styled$1("div",{name:"MuiMonthPicker",slot:"Root",overridesResolver:(_e,et)=>et.root})({width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch",margin:"0 4px"}),MonthPicker=reactExports.forwardRef(function _e(et,rt){const nt=useUtils(),ot=useNow(),it=useMonthPickerDefaultizedProps(et,"MuiMonthPicker"),{className:st,date:at,disabled:lt,disableFuture:ct,disablePast:pt,maxDate:ut,minDate:ht,onChange:ft,shouldDisableMonth:gt,readOnly:vt,disableHighlightToday:yt,autoFocus:mt=!1,onMonthFocus:Et,hasFocus:bt,onFocusedViewChange:Ct}=it,Tt=_objectWithoutPropertiesLoose(it,_excluded$j),wt=it,Rt=useUtilityClasses$k(wt),It=useTheme$1(),St=reactExports.useMemo(()=>at??nt.startOfMonth(ot),[ot,nt,at]),Pt=reactExports.useMemo(()=>at!=null?nt.getMonth(at):yt?null:nt.getMonth(ot),[ot,at,nt,yt]),[Ot,Ut]=reactExports.useState(()=>Pt||nt.getMonth(ot)),Bt=reactExports.useCallback(Kt=>{const er=nt.startOfMonth(pt&&nt.isAfter(ot,ht)?ot:ht),ir=nt.startOfMonth(ct&&nt.isBefore(ot,ut)?ot:ut);return nt.isBefore(Kt,er)||nt.isAfter(Kt,ir)?!0:gt?gt(Kt):!1},[ct,pt,ut,ht,ot,gt,nt]),xt=Kt=>{if(vt)return;const er=nt.setMonth(St,Kt);ft(er,"finish")},[At,Mt]=useControlled({name:"MonthPicker",state:"hasFocus",controlled:bt,default:mt}),Nt=reactExports.useCallback(Kt=>{Mt(Kt),Ct&&Ct(Kt)},[Mt,Ct]),$t=reactExports.useCallback(Kt=>{Bt(nt.setMonth(St,Kt))||(Ut(Kt),Nt(!0),Et&&Et(Kt))},[Bt,nt,St,Nt,Et]);reactExports.useEffect(()=>{Ut(Kt=>Pt!==null&&Kt!==Pt?Pt:Kt)},[Pt]);const Ft=useEventCallback(Kt=>{switch(Kt.key){case"ArrowUp":$t((12+Ot-3)%12),Kt.preventDefault();break;case"ArrowDown":$t((12+Ot+3)%12),Kt.preventDefault();break;case"ArrowLeft":$t((12+Ot+(It.direction==="ltr"?-1:1))%12),Kt.preventDefault();break;case"ArrowRight":$t((12+Ot+(It.direction==="ltr"?1:-1))%12),Kt.preventDefault();break}}),jt=reactExports.useCallback((Kt,er)=>{$t(er)},[$t]),zt=reactExports.useCallback(()=>{Nt(!1)},[Nt]),Yt=nt.getMonth(ot);return jsx(MonthPickerRoot,_extends({ref:rt,className:clsx(Rt.root,st),ownerState:wt,onKeyDown:Ft},Tt,{children:nt.getMonthArray(St).map(Kt=>{const er=nt.getMonth(Kt),ir=nt.format(Kt,"monthShort"),rr=lt||Bt(Kt);return jsx(PickersMonth,{value:er,selected:er===Pt,tabIndex:er===Ot&&!rr?0:-1,hasFocus:At&&er===Ot,onSelect:xt,onFocus:jt,onBlur:zt,disabled:rr,"aria-current":Yt===er?"date":void 0,children:ir},ir)})}))});function useValidation(_e,et,rt){const{value:nt,onError:ot}=_e,it=useLocalizationContext(),st=reactExports.useRef(null),at=et({adapter:it,value:nt,props:_e});return reactExports.useEffect(()=>{ot&&!rt(at,st.current)&&ot(at,nt),st.current=at},[rt,ot,st,at,nt]),at}const validateDate=({props:_e,value:et,adapter:rt})=>{const nt=rt.utils.date(),ot=rt.utils.date(et),it=parseNonNullablePickerDate(rt.utils,_e.minDate,rt.defaultDates.minDate),st=parseNonNullablePickerDate(rt.utils,_e.maxDate,rt.defaultDates.maxDate);if(ot===null)return null;switch(!0){case!rt.utils.isValid(et):return"invalidDate";case Boolean(_e.shouldDisableDate&&_e.shouldDisableDate(ot)):return"shouldDisableDate";case Boolean(_e.disableFuture&&rt.utils.isAfterDay(ot,nt)):return"disableFuture";case Boolean(_e.disablePast&&rt.utils.isBeforeDay(ot,nt)):return"disablePast";case Boolean(it&&rt.utils.isBeforeDay(ot,it)):return"minDate";case Boolean(st&&rt.utils.isAfterDay(ot,st)):return"maxDate";default:return null}},useIsDayDisabled=({shouldDisableDate:_e,minDate:et,maxDate:rt,disableFuture:nt,disablePast:ot})=>{const it=useLocalizationContext();return reactExports.useCallback(st=>validateDate({adapter:it,value:st,props:{shouldDisableDate:_e,minDate:et,maxDate:rt,disableFuture:nt,disablePast:ot}})!==null,[it,_e,et,rt,nt,ot])},createCalendarStateReducer=(_e,et,rt)=>(nt,ot)=>{switch(ot.type){case"changeMonth":return _extends({},nt,{slideDirection:ot.direction,currentMonth:ot.newMonth,isMonthSwitchingAnimating:!_e});case"finishMonthSwitchingAnimation":return _extends({},nt,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(nt.focusedDay!=null&&ot.focusedDay!=null&&rt.isSameDay(ot.focusedDay,nt.focusedDay))return nt;const it=ot.focusedDay!=null&&!et&&!rt.isSameMonth(nt.currentMonth,ot.focusedDay);return _extends({},nt,{focusedDay:ot.focusedDay,isMonthSwitchingAnimating:it&&!_e&&!ot.withoutMonthSwitchingAnimation,currentMonth:it?rt.startOfMonth(ot.focusedDay):nt.currentMonth,slideDirection:ot.focusedDay!=null&&rt.isAfterDay(ot.focusedDay,nt.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},useCalendarState=({date:_e,defaultCalendarMonth:et,disableFuture:rt,disablePast:nt,disableSwitchToMonthOnDayFocus:ot=!1,maxDate:it,minDate:st,onMonthChange:at,reduceAnimations:lt,shouldDisableDate:ct})=>{var pt;const ut=useNow(),ht=useUtils(),ft=reactExports.useRef(createCalendarStateReducer(Boolean(lt),ot,ht)).current,[gt,vt]=reactExports.useReducer(ft,{isMonthSwitchingAnimating:!1,focusedDay:_e||ut,currentMonth:ht.startOfMonth((pt=_e??et)!=null?pt:ut),slideDirection:"left"}),yt=reactExports.useCallback(Tt=>{vt(_extends({type:"changeMonth"},Tt)),at&&at(Tt.newMonth)},[at]),mt=reactExports.useCallback(Tt=>{const wt=Tt??ut;ht.isSameMonth(wt,gt.currentMonth)||yt({newMonth:ht.startOfMonth(wt),direction:ht.isAfterDay(wt,gt.currentMonth)?"left":"right"})},[gt.currentMonth,yt,ut,ht]),Et=useIsDayDisabled({shouldDisableDate:ct,minDate:st,maxDate:it,disableFuture:rt,disablePast:nt}),bt=reactExports.useCallback(()=>{vt({type:"finishMonthSwitchingAnimation"})},[]),Ct=reactExports.useCallback((Tt,wt)=>{Et(Tt)||vt({type:"changeFocusedDay",focusedDay:Tt,withoutMonthSwitchingAnimation:wt})},[Et]);return{calendarState:gt,changeMonth:mt,changeFocusedDay:Ct,isDateDisabled:Et,onMonthSwitchingAnimationEnd:bt,handleChangeMonth:yt}},getPickersFadeTransitionGroupUtilityClass=_e=>generateUtilityClass("MuiPickersFadeTransitionGroup",_e);generateUtilityClasses("MuiPickersFadeTransitionGroup",["root"]);const useUtilityClasses$j=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getPickersFadeTransitionGroupUtilityClass,et)},animationDuration=500,PickersFadeTransitionGroupRoot=styled$1(TransitionGroup$1,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"block",position:"relative"});function PickersFadeTransitionGroup(_e){const et=useThemeProps({props:_e,name:"MuiPickersFadeTransitionGroup"}),{children:rt,className:nt,reduceAnimations:ot,transKey:it}=et,st=useUtilityClasses$j(et);return ot?rt:jsx(PickersFadeTransitionGroupRoot,{className:clsx(st.root,nt),children:jsx(Fade$1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:animationDuration,enter:animationDuration/2,exit:0},children:rt},it)})}const DAY_SIZE=36,DAY_MARGIN=2,DIALOG_WIDTH=320,VIEW_HEIGHT=358;function getPickersDayUtilityClass(_e){return generateUtilityClass("MuiPickersDay",_e)}const pickersDayClasses=generateUtilityClasses("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),_excluded$i=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today"],useUtilityClasses$i=_e=>{const{selected:et,disableMargin:rt,disableHighlightToday:nt,today:ot,disabled:it,outsideCurrentMonth:st,showDaysOutsideCurrentMonth:at,classes:lt}=_e;return composeClasses({root:["root",et&&"selected",it&&"disabled",!rt&&"dayWithMargin",!nt&&ot&&"today",st&&at&&"dayOutsideMonth",st&&!at&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},getPickersDayUtilityClass,lt)},styleArg=({theme:_e,ownerState:et})=>_extends({},_e.typography.caption,{width:DAY_SIZE,height:DAY_SIZE,borderRadius:"50%",padding:0,backgroundColor:_e.palette.background.paper,color:_e.palette.text.primary,"&:hover":{backgroundColor:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity)},"&:focus":{backgroundColor:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity),[`&.${pickersDayClasses.selected}`]:{willChange:"background-color",backgroundColor:_e.palette.primary.dark}},[`&.${pickersDayClasses.selected}`]:{color:_e.palette.primary.contrastText,backgroundColor:_e.palette.primary.main,fontWeight:_e.typography.fontWeightMedium,transition:_e.transitions.create("background-color",{duration:_e.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:_e.palette.primary.dark}},[`&.${pickersDayClasses.disabled}`]:{color:_e.palette.text.disabled}},!et.disableMargin&&{margin:`0 ${DAY_MARGIN}px`},et.outsideCurrentMonth&&et.showDaysOutsideCurrentMonth&&{color:_e.palette.text.secondary},!et.disableHighlightToday&&et.today&&{[`&:not(.${pickersDayClasses.selected})`]:{border:`1px solid ${_e.palette.text.secondary}`}}),overridesResolver=(_e,et)=>{const{ownerState:rt}=_e;return[et.root,!rt.disableMargin&&et.dayWithMargin,!rt.disableHighlightToday&&rt.today&&et.today,!rt.outsideCurrentMonth&&rt.showDaysOutsideCurrentMonth&&et.dayOutsideMonth,rt.outsideCurrentMonth&&!rt.showDaysOutsideCurrentMonth&&et.hiddenDaySpacingFiller]},PickersDayRoot=styled$1(ButtonBase$1,{name:"MuiPickersDay",slot:"Root",overridesResolver})(styleArg),PickersDayFiller=styled$1("div",{name:"MuiPickersDay",slot:"Root",overridesResolver})(({theme:_e,ownerState:et})=>_extends({},styleArg({theme:_e,ownerState:et}),{opacity:0,pointerEvents:"none"})),noop$2=()=>{},PickersDayRaw=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiPickersDay"}),{autoFocus:ot=!1,className:it,day:st,disabled:at=!1,disableHighlightToday:lt=!1,disableMargin:ct=!1,isAnimating:pt,onClick:ut,onDaySelect:ht,onFocus:ft=noop$2,onBlur:gt=noop$2,onKeyDown:vt=noop$2,onMouseDown:yt,outsideCurrentMonth:mt,selected:Et=!1,showDaysOutsideCurrentMonth:bt=!1,children:Ct,today:Tt=!1}=nt,wt=_objectWithoutPropertiesLoose(nt,_excluded$i),Rt=_extends({},nt,{autoFocus:ot,disabled:at,disableHighlightToday:lt,disableMargin:ct,selected:Et,showDaysOutsideCurrentMonth:bt,today:Tt}),It=useUtilityClasses$i(Rt),St=useUtils(),Pt=reactExports.useRef(null),Ot=useForkRef(Pt,rt);useEnhancedEffect$1(()=>{ot&&!at&&!pt&&!mt&&Pt.current.focus()},[ot,at,pt,mt]);const Ut=xt=>{yt&&yt(xt),mt&&xt.preventDefault()},Bt=xt=>{at||ht(st,"finish"),mt&&xt.currentTarget.focus(),ut&&ut(xt)};return mt&&!bt?jsx(PickersDayFiller,{className:clsx(It.root,It.hiddenDaySpacingFiller,it),ownerState:Rt,role:wt.role}):jsx(PickersDayRoot,_extends({className:clsx(It.root,it),ownerState:Rt,ref:Ot,centerRipple:!0,disabled:at,tabIndex:Et?0:-1,onKeyDown:xt=>vt(xt,st),onFocus:xt=>ft(xt,st),onBlur:xt=>gt(xt,st),onClick:Bt,onMouseDown:Ut},wt,{children:Ct||St.format(st,"dayOfMonth")}))}),areDayPropsEqual=(_e,et)=>_e.autoFocus===et.autoFocus&&_e.isAnimating===et.isAnimating&&_e.today===et.today&&_e.disabled===et.disabled&&_e.selected===et.selected&&_e.disableMargin===et.disableMargin&&_e.showDaysOutsideCurrentMonth===et.showDaysOutsideCurrentMonth&&_e.disableHighlightToday===et.disableHighlightToday&&_e.className===et.className&&_e.sx===et.sx&&_e.outsideCurrentMonth===et.outsideCurrentMonth&&_e.onFocus===et.onFocus&&_e.onBlur===et.onBlur&&_e.onDaySelect===et.onDaySelect,PickersDay=reactExports.memo(PickersDayRaw,areDayPropsEqual),getPickersSlideTransitionUtilityClass=_e=>generateUtilityClass("PrivatePickersSlideTransition",_e),pickersSlideTransitionClasses=generateUtilityClasses("PrivatePickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),_excluded$h=["children","className","reduceAnimations","slideDirection","transKey"],useUtilityClasses$h=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getPickersSlideTransitionUtilityClass,et)},slideAnimationDuration=350,PickersSlideTransitionRoot=styled$1(TransitionGroup$1,{name:"PrivatePickersSlideTransition",slot:"Root",overridesResolver:(_e,et)=>[et.root,{[`.${pickersSlideTransitionClasses["slideEnter-left"]}`]:et["slideEnter-left"]},{[`.${pickersSlideTransitionClasses["slideEnter-right"]}`]:et["slideEnter-right"]},{[`.${pickersSlideTransitionClasses.slideEnterActive}`]:et.slideEnterActive},{[`.${pickersSlideTransitionClasses.slideExit}`]:et.slideExit},{[`.${pickersSlideTransitionClasses["slideExitActiveLeft-left"]}`]:et["slideExitActiveLeft-left"]},{[`.${pickersSlideTransitionClasses["slideExitActiveLeft-right"]}`]:et["slideExitActiveLeft-right"]}]})(({theme:_e})=>{const et=_e.transitions.create("transform",{duration:slideAnimationDuration,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${pickersSlideTransitionClasses["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${pickersSlideTransitionClasses["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${pickersSlideTransitionClasses.slideEnterActive}`]:{transform:"translate(0%)",transition:et},[`& .${pickersSlideTransitionClasses.slideExit}`]:{transform:"translate(0%)"},[`& .${pickersSlideTransitionClasses["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:et,zIndex:0},[`& .${pickersSlideTransitionClasses["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:et,zIndex:0}}}),PickersSlideTransition=_e=>{const{children:et,className:rt,reduceAnimations:nt,slideDirection:ot,transKey:it}=_e,st=_objectWithoutPropertiesLoose(_e,_excluded$h),at=useUtilityClasses$h(_e);if(nt)return jsx("div",{className:clsx(at.root,rt),children:et});const lt={exit:pickersSlideTransitionClasses.slideExit,enterActive:pickersSlideTransitionClasses.slideEnterActive,enter:pickersSlideTransitionClasses[`slideEnter-${ot}`],exitActive:pickersSlideTransitionClasses[`slideExitActiveLeft-${ot}`]};return jsx(PickersSlideTransitionRoot,{className:clsx(at.root,rt),childFactory:ct=>reactExports.cloneElement(ct,{classNames:lt}),role:"presentation",children:jsx(CSSTransition$1,_extends({mountOnEnter:!0,unmountOnExit:!0,timeout:slideAnimationDuration,classNames:lt},st,{children:et}),it)})},getDayPickerUtilityClass=_e=>generateUtilityClass("MuiDayPicker",_e);generateUtilityClasses("MuiDayPicker",["header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer"]);const useUtilityClasses$g=_e=>{const{classes:et}=_e;return composeClasses({header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"]},getDayPickerUtilityClass,et)},defaultDayOfWeekFormatter=_e=>_e.charAt(0).toUpperCase(),weeksContainerHeight=(DAY_SIZE+DAY_MARGIN*2)*6,PickersCalendarDayHeader=styled$1("div",{name:"MuiDayPicker",slot:"Header",overridesResolver:(_e,et)=>et.header})({display:"flex",justifyContent:"center",alignItems:"center"}),PickersCalendarWeekDayLabel=styled$1(Typography$1,{name:"MuiDayPicker",slot:"WeekDayLabel",overridesResolver:(_e,et)=>et.weekDayLabel})(({theme:_e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:_e.palette.text.secondary})),PickersCalendarLoadingContainer=styled$1("div",{name:"MuiDayPicker",slot:"LoadingContainer",overridesResolver:(_e,et)=>et.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:weeksContainerHeight}),PickersCalendarSlideTransition=styled$1(PickersSlideTransition,{name:"MuiDayPicker",slot:"SlideTransition",overridesResolver:(_e,et)=>et.slideTransition})({minHeight:weeksContainerHeight}),PickersCalendarWeekContainer=styled$1("div",{name:"MuiDayPicker",slot:"MonthContainer",overridesResolver:(_e,et)=>et.monthContainer})({overflow:"hidden"}),PickersCalendarWeek=styled$1("div",{name:"MuiDayPicker",slot:"WeekContainer",overridesResolver:(_e,et)=>et.weekContainer})({margin:`${DAY_MARGIN}px 0`,display:"flex",justifyContent:"center"});function DayPicker(_e){const et=useNow(),rt=useUtils(),nt=useThemeProps({props:_e,name:"MuiDayPicker"}),ot=useUtilityClasses$g(nt),{onFocusedDayChange:it,className:st,currentMonth:at,selectedDays:lt,disabled:ct,disableHighlightToday:pt,focusedDay:ut,isMonthSwitchingAnimating:ht,loading:ft,onSelectedDaysChange:gt,onMonthSwitchingAnimationEnd:vt,readOnly:yt,reduceAnimations:mt,renderDay:Et,renderLoading:bt=()=>jsx("span",{children:"..."}),showDaysOutsideCurrentMonth:Ct,slideDirection:Tt,TransitionProps:wt,disablePast:Rt,disableFuture:It,minDate:St,maxDate:Pt,shouldDisableDate:Ot,dayOfWeekFormatter:Ut=defaultDayOfWeekFormatter,hasFocus:Bt,onFocusedViewChange:xt,gridLabelId:At}=nt,Mt=useIsDayDisabled({shouldDisableDate:Ot,minDate:St,maxDate:Pt,disablePast:Rt,disableFuture:It}),[Nt,$t]=reactExports.useState(()=>ut||et),Ft=reactExports.useCallback(Cr=>{xt&&xt(Cr)},[xt]),jt=reactExports.useCallback((Cr,or="finish")=>{yt||gt(Cr,or)},[gt,yt]),zt=reactExports.useCallback(Cr=>{Mt(Cr)||(it(Cr),$t(Cr),Ft(!0))},[Mt,it,Ft]),Yt=useTheme();function Kt(Cr,or){switch(Cr.key){case"ArrowUp":zt(rt.addDays(or,-7)),Cr.preventDefault();break;case"ArrowDown":zt(rt.addDays(or,7)),Cr.preventDefault();break;case"ArrowLeft":{const ur=rt.addDays(or,Yt.direction==="ltr"?-1:1),pr=Yt.direction==="ltr"?rt.getPreviousMonth(or):rt.getNextMonth(or),Er=findClosestEnabledDate({utils:rt,date:ur,minDate:Yt.direction==="ltr"?rt.startOfMonth(pr):ur,maxDate:Yt.direction==="ltr"?ur:rt.endOfMonth(pr),isDateDisabled:Mt});zt(Er||ur),Cr.preventDefault();break}case"ArrowRight":{const ur=rt.addDays(or,Yt.direction==="ltr"?1:-1),pr=Yt.direction==="ltr"?rt.getNextMonth(or):rt.getPreviousMonth(or),Er=findClosestEnabledDate({utils:rt,date:ur,minDate:Yt.direction==="ltr"?ur:rt.startOfMonth(pr),maxDate:Yt.direction==="ltr"?rt.endOfMonth(pr):ur,isDateDisabled:Mt});zt(Er||ur),Cr.preventDefault();break}case"Home":zt(rt.startOfWeek(or)),Cr.preventDefault();break;case"End":zt(rt.endOfWeek(or)),Cr.preventDefault();break;case"PageUp":zt(rt.getNextMonth(or)),Cr.preventDefault();break;case"PageDown":zt(rt.getPreviousMonth(or)),Cr.preventDefault();break}}function er(Cr,or){zt(or)}function ir(Cr,or){Bt&&rt.isSameDay(Nt,or)&&Ft(!1)}const rr=rt.getMonth(at),lr=lt.filter(Cr=>!!Cr).map(Cr=>rt.startOfDay(Cr)),nr=rr,hr=reactExports.useMemo(()=>reactExports.createRef(),[nr]),vr=rt.startOfWeek(et),yr=reactExports.useMemo(()=>{const Cr=rt.startOfMonth(at),or=rt.endOfMonth(at);return Mt(Nt)||rt.isAfterDay(Nt,or)||rt.isBeforeDay(Nt,Cr)?findClosestEnabledDate({utils:rt,date:Nt,minDate:Cr,maxDate:or,disablePast:Rt,disableFuture:It,isDateDisabled:Mt}):Nt},[at,It,Rt,Nt,Mt,rt]);return jsxs("div",{role:"grid","aria-labelledby":At,children:[jsx(PickersCalendarDayHeader,{role:"row",className:ot.header,children:rt.getWeekdays().map((Cr,or)=>{var ur;return jsx(PickersCalendarWeekDayLabel,{variant:"caption",role:"columnheader","aria-label":rt.format(rt.addDays(vr,or),"weekday"),className:ot.weekDayLabel,children:(ur=Ut==null?void 0:Ut(Cr))!=null?ur:Cr},Cr+or.toString())})}),ft?jsx(PickersCalendarLoadingContainer,{className:ot.loadingContainer,children:bt()}):jsx(PickersCalendarSlideTransition,_extends({transKey:nr,onExited:vt,reduceAnimations:mt,slideDirection:Tt,className:clsx(st,ot.slideTransition)},wt,{nodeRef:hr,children:jsx(PickersCalendarWeekContainer,{ref:hr,role:"rowgroup",className:ot.monthContainer,children:rt.getWeekArray(at).map(Cr=>jsx(PickersCalendarWeek,{role:"row",className:ot.weekContainer,children:Cr.map(or=>{const ur=yr!==null&&rt.isSameDay(or,yr),pr=lr.some(Ht=>rt.isSameDay(Ht,or)),Er=rt.isSameDay(or,et),Sr={key:or==null?void 0:or.toString(),day:or,isAnimating:ht,disabled:ct||Mt(or),autoFocus:Bt&&ur,today:Er,outsideCurrentMonth:rt.getMonth(or)!==rr,selected:pr,disableHighlightToday:pt,showDaysOutsideCurrentMonth:Ct,onKeyDown:Kt,onFocus:er,onBlur:ir,onDaySelect:jt,tabIndex:ur?0:-1,role:"gridcell","aria-selected":pr};return Er&&(Sr["aria-current"]="date"),Et?Et(or,lr,Sr):reactExports.createElement(PickersDay,_extends({},Sr,{key:Sr.key}))})},`week-${Cr[0]}`))})}))]})}function useViews({onChange:_e,onViewChange:et,openTo:rt,view:nt,views:ot}){var it,st;const[at,lt]=useControlled({name:"Picker",state:"view",controlled:nt,default:rt&&arrayIncludes(ot,rt)?rt:ot[0]}),ct=(it=ot[ot.indexOf(at)-1])!=null?it:null,pt=(st=ot[ot.indexOf(at)+1])!=null?st:null,ut=reactExports.useCallback(gt=>{lt(gt),et&&et(gt)},[lt,et]),ht=reactExports.useCallback(()=>{pt&&ut(pt)},[pt,ut]);return{handleChangeAndOpenNext:reactExports.useCallback((gt,vt)=>{const yt=vt==="finish",mt=yt&&Boolean(pt)?"partial":vt;_e(gt,mt),yt&&ht()},[pt,_e,ht]),nextView:pt,previousView:ct,openNext:ht,openView:at,setOpenView:ut}}const ArrowDropDown=createSvgIcon$1(jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ArrowLeft=createSvgIcon$1(jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),ArrowRight=createSvgIcon$1(jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),Calendar=createSvgIcon$1(jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),Clock$1=createSvgIcon$1(jsxs(reactExports.Fragment,{children:[jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),DateRange=createSvgIcon$1(jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),Pen=createSvgIcon$1(jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Pen"),Time=createSvgIcon$1(jsxs(reactExports.Fragment,{children:[jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");function getPickersArrowSwitcherUtilityClass(_e){return generateUtilityClass("MuiPickersArrowSwitcher",_e)}generateUtilityClasses("MuiPickersArrowSwitcher",["root","spacer","button"]);const _excluded$g=["children","className","components","componentsProps","isLeftDisabled","isLeftHidden","isRightDisabled","isRightHidden","leftArrowButtonText","onLeftClick","onRightClick","rightArrowButtonText"],useUtilityClasses$f=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],spacer:["spacer"],button:["button"]},getPickersArrowSwitcherUtilityClass,et)},PickersArrowSwitcherRoot=styled$1("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"flex"}),PickersArrowSwitcherSpacer=styled$1("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(_e,et)=>et.spacer})(({theme:_e})=>({width:_e.spacing(3)})),PickersArrowSwitcherButton=styled$1(IconButton$1,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(_e,et)=>et.button})(({ownerState:_e})=>_extends({},_e.hidden&&{visibility:"hidden"})),PickersArrowSwitcher=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiPickersArrowSwitcher"}),{children:ot,className:it,components:st,componentsProps:at,isLeftDisabled:lt,isLeftHidden:ct,isRightDisabled:pt,isRightHidden:ut,leftArrowButtonText:ht,onLeftClick:ft,onRightClick:gt,rightArrowButtonText:vt}=nt,yt=_objectWithoutPropertiesLoose(nt,_excluded$g),Et=useTheme().direction==="rtl",bt=(at==null?void 0:at.leftArrowButton)||{},Ct=(st==null?void 0:st.LeftArrowIcon)||ArrowLeft,Tt=(at==null?void 0:at.rightArrowButton)||{},wt=(st==null?void 0:st.RightArrowIcon)||ArrowRight,Rt=nt,It=useUtilityClasses$f(Rt);return jsxs(PickersArrowSwitcherRoot,_extends({ref:rt,className:clsx(It.root,it),ownerState:Rt},yt,{children:[jsx(PickersArrowSwitcherButton,_extends({as:st==null?void 0:st.LeftArrowButton,size:"small","aria-label":ht,title:ht,disabled:lt,edge:"end",onClick:ft},bt,{className:clsx(It.button,bt.className),ownerState:_extends({},Rt,bt,{hidden:ct}),children:Et?jsx(wt,{}):jsx(Ct,{})})),ot?jsx(Typography$1,{variant:"subtitle1",component:"span",children:ot}):jsx(PickersArrowSwitcherSpacer,{className:It.spacer,ownerState:Rt}),jsx(PickersArrowSwitcherButton,_extends({as:st==null?void 0:st.RightArrowButton,size:"small","aria-label":vt,title:vt,edge:"start",disabled:pt,onClick:gt},Tt,{className:clsx(It.button,Tt.className),ownerState:_extends({},Rt,Tt,{hidden:ut}),children:Et?jsx(Ct,{}):jsx(wt,{})}))]}))}),getMeridiem=(_e,et)=>_e?et.getHours(_e)>=12?"pm":"am":null,convertValueToMeridiem=(_e,et,rt)=>rt&&(_e>=12?"pm":"am")!==et?et==="am"?_e-12:_e+12:_e,convertToMeridiem=(_e,et,rt,nt)=>{const ot=convertValueToMeridiem(nt.getHours(_e),et,rt);return nt.setHours(_e,ot)},getSecondsInDay=(_e,et)=>et.getHours(_e)*3600+et.getMinutes(_e)*60+et.getSeconds(_e),createIsAfterIgnoreDatePart=(_e=!1,et)=>(rt,nt)=>_e?et.isAfter(rt,nt):getSecondsInDay(rt,et)>getSecondsInDay(nt,et);function useNextMonthDisabled(_e,{disableFuture:et,maxDate:rt}){const nt=useUtils();return reactExports.useMemo(()=>{const ot=nt.date(),it=nt.startOfMonth(et&&nt.isBefore(ot,rt)?ot:rt);return!nt.isAfter(it,_e)},[et,rt,_e,nt])}function usePreviousMonthDisabled(_e,{disablePast:et,minDate:rt}){const nt=useUtils();return reactExports.useMemo(()=>{const ot=nt.date(),it=nt.startOfMonth(et&&nt.isAfter(ot,rt)?ot:rt);return!nt.isBefore(it,_e)},[et,rt,_e,nt])}function useMeridiemMode(_e,et,rt){const nt=useUtils(),ot=getMeridiem(_e,nt),it=reactExports.useCallback(st=>{const at=_e==null?null:convertToMeridiem(_e,st,Boolean(et),nt);rt(at,"partial")},[et,_e,rt,nt]);return{meridiemMode:ot,handleMeridiemChange:it}}const buildDeprecatedPropsWarning=_e=>()=>{},getPickersCalendarHeaderUtilityClass=_e=>generateUtilityClass("MuiPickersCalendarHeader",_e);generateUtilityClasses("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);const useUtilityClasses$e=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},getPickersCalendarHeaderUtilityClass,et)},PickersCalendarHeaderRoot=styled$1("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),PickersCalendarHeaderLabelContainer=styled$1("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(_e,et)=>et.labelContainer})(({theme:_e})=>_extends({display:"flex",maxHeight:30,overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},_e.typography.body1,{fontWeight:_e.typography.fontWeightMedium})),PickersCalendarHeaderLabel=styled$1("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(_e,et)=>et.label})({marginRight:6}),PickersCalendarHeaderSwitchViewButton=styled$1(IconButton$1,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(_e,et)=>et.switchViewButton})({marginRight:"auto"}),PickersCalendarHeaderSwitchViewIcon=styled$1(ArrowDropDown,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(_e,et)=>et.switchViewIcon})(({theme:_e,ownerState:et})=>_extends({willChange:"transform",transition:_e.transitions.create("transform"),transform:"rotate(0deg)"},et.openView==="year"&&{transform:"rotate(180deg)"})),deprecatedPropsWarning$1=buildDeprecatedPropsWarning();function PickersCalendarHeader(_e){const et=useThemeProps({props:_e,name:"MuiPickersCalendarHeader"}),{components:rt={},componentsProps:nt={},currentMonth:ot,disabled:it,disableFuture:st,disablePast:at,getViewSwitchingButtonText:lt,leftArrowButtonText:ct,maxDate:pt,minDate:ut,onMonthChange:ht,onViewChange:ft,openView:gt,reduceAnimations:vt,rightArrowButtonText:yt,views:mt,labelId:Et}=et;deprecatedPropsWarning$1({leftArrowButtonText:ct,rightArrowButtonText:yt,getViewSwitchingButtonText:lt});const bt=useLocaleText(),Ct=ct??bt.previousMonth,Tt=yt??bt.nextMonth,wt=lt??bt.calendarViewSwitchingButtonAriaLabel,Rt=useUtils(),It=useUtilityClasses$e(et),St=nt.switchViewButton||{},Pt=()=>ht(Rt.getNextMonth(ot),"left"),Ot=()=>ht(Rt.getPreviousMonth(ot),"right"),Ut=useNextMonthDisabled(ot,{disableFuture:st,maxDate:pt}),Bt=usePreviousMonthDisabled(ot,{disablePast:at,minDate:ut}),xt=()=>{if(!(mt.length===1||!ft||it))if(mt.length===2)ft(mt.find(Mt=>Mt!==gt)||mt[0]);else{const Mt=mt.indexOf(gt)!==0?0:1;ft(mt[Mt])}};if(mt.length===1&&mt[0]==="year")return null;const At=et;return jsxs(PickersCalendarHeaderRoot,{ownerState:At,className:It.root,children:[jsxs(PickersCalendarHeaderLabelContainer,{role:"presentation",onClick:xt,ownerState:At,"aria-live":"polite",className:It.labelContainer,children:[jsx(PickersFadeTransitionGroup,{reduceAnimations:vt,transKey:Rt.format(ot,"monthAndYear"),children:jsx(PickersCalendarHeaderLabel,{id:Et,ownerState:At,className:It.label,children:Rt.format(ot,"monthAndYear")})}),mt.length>1&&!it&&jsx(PickersCalendarHeaderSwitchViewButton,_extends({size:"small",as:rt.SwitchViewButton,"aria-label":wt(gt),className:It.switchViewButton},St,{children:jsx(PickersCalendarHeaderSwitchViewIcon,{as:rt.SwitchViewIcon,ownerState:At,className:It.switchViewIcon})}))]}),jsx(Fade$1,{in:gt==="day",children:jsx(PickersArrowSwitcher,{leftArrowButtonText:Ct,rightArrowButtonText:Tt,components:rt,componentsProps:nt,onLeftClick:Ot,onRightClick:Pt,isLeftDisabled:Bt,isRightDisabled:Ut})})]})}const WrapperVariantContext=reactExports.createContext(null);function getPickersYearUtilityClass(_e){return generateUtilityClass("PrivatePickersYear",_e)}const pickersYearClasses=generateUtilityClasses("PrivatePickersYear",["root","modeDesktop","modeMobile","yearButton","selected","disabled"]),_excluded$f=["autoFocus","className","children","disabled","onClick","onKeyDown","value","tabIndex","onFocus","onBlur"],useUtilityClasses$d=_e=>{const{wrapperVariant:et,disabled:rt,selected:nt,classes:ot}=_e,it={root:["root",et&&`mode${capitalize(et)}`],yearButton:["yearButton",rt&&"disabled",nt&&"selected"]};return composeClasses(it,getPickersYearUtilityClass,ot)},PickersYearRoot=styled$1("div",{name:"PrivatePickersYear",slot:"Root",overridesResolver:(_e,et)=>[et.root,{[`&.${pickersYearClasses.modeDesktop}`]:et.modeDesktop},{[`&.${pickersYearClasses.modeMobile}`]:et.modeMobile}]})(({ownerState:_e})=>_extends({flexBasis:"33.3%",display:"flex",alignItems:"center",justifyContent:"center"},(_e==null?void 0:_e.wrapperVariant)==="desktop"&&{flexBasis:"25%"})),PickersYearButton=styled$1("button",{name:"PrivatePickersYear",slot:"Button",overridesResolver:(_e,et)=>[et.button,{[`&.${pickersYearClasses.disabled}`]:et.disabled},{[`&.${pickersYearClasses.selected}`]:et.selected}]})(({theme:_e})=>_extends({color:"unset",backgroundColor:"transparent",border:0,outline:0},_e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:alpha$1(_e.palette.action.active,_e.palette.action.hoverOpacity)},[`&.${pickersYearClasses.disabled}`]:{color:_e.palette.text.secondary},[`&.${pickersYearClasses.selected}`]:{color:_e.palette.primary.contrastText,backgroundColor:_e.palette.primary.main,"&:focus, &:hover":{backgroundColor:_e.palette.primary.dark}}})),noop$1=()=>{},PickersYear=reactExports.forwardRef(function _e(et,rt){const{autoFocus:nt,className:ot,children:it,disabled:st,onClick:at,onKeyDown:lt,value:ct,tabIndex:pt,onFocus:ut=noop$1,onBlur:ht=noop$1}=et,ft=_objectWithoutPropertiesLoose(et,_excluded$f),gt=reactExports.useRef(null),vt=useForkRef(gt,rt),yt=reactExports.useContext(WrapperVariantContext),mt=_extends({},et,{wrapperVariant:yt}),Et=useUtilityClasses$d(mt);return reactExports.useEffect(()=>{nt&&gt.current.focus()},[nt]),jsx(PickersYearRoot,{className:clsx(Et.root,ot),ownerState:mt,children:jsx(PickersYearButton,_extends({ref:vt,disabled:st,type:"button",tabIndex:st?-1:pt,onClick:bt=>at(bt,ct),onKeyDown:bt=>lt(bt,ct),onFocus:bt=>ut(bt,ct),onBlur:bt=>ht(bt,ct),className:Et.yearButton,ownerState:mt},ft,{children:it}))})});function getYearPickerUtilityClass(_e){return generateUtilityClass("MuiYearPicker",_e)}generateUtilityClasses("MuiYearPicker",["root"]);const useUtilityClasses$c=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getYearPickerUtilityClass,et)};function useYearPickerDefaultizedProps(_e,et){const rt=useUtils(),nt=useDefaultDates(),ot=useThemeProps({props:_e,name:et});return _extends({disablePast:!1,disableFuture:!1},ot,{minDate:parseNonNullablePickerDate(rt,ot.minDate,nt.minDate),maxDate:parseNonNullablePickerDate(rt,ot.maxDate,nt.maxDate)})}const YearPickerRoot=styled$1("div",{name:"MuiYearPicker",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",maxHeight:"304px"}),YearPicker=reactExports.forwardRef(function _e(et,rt){const nt=useNow(),ot=useTheme(),it=useUtils(),st=useYearPickerDefaultizedProps(et,"MuiYearPicker"),{autoFocus:at,className:lt,date:ct,disabled:pt,disableFuture:ut,disablePast:ht,maxDate:ft,minDate:gt,onChange:vt,readOnly:yt,shouldDisableYear:mt,disableHighlightToday:Et,onYearFocus:bt,hasFocus:Ct,onFocusedViewChange:Tt}=st,wt=st,Rt=useUtilityClasses$c(wt),It=reactExports.useMemo(()=>ct??it.startOfYear(nt),[nt,it,ct]),St=reactExports.useMemo(()=>ct!=null?it.getYear(ct):Et?null:it.getYear(nt),[nt,ct,it,Et]),Pt=reactExports.useContext(WrapperVariantContext),Ot=reactExports.useRef(null),[Ut,Bt]=reactExports.useState(()=>St||it.getYear(nt)),[xt,At]=useControlled({name:"YearPicker",state:"hasFocus",controlled:Ct,default:at}),Mt=reactExports.useCallback(lr=>{At(lr),Tt&&Tt(lr)},[At,Tt]),Nt=reactExports.useCallback(lr=>!!(ht&&it.isBeforeYear(lr,nt)||ut&&it.isAfterYear(lr,nt)||gt&&it.isBeforeYear(lr,gt)||ft&&it.isAfterYear(lr,ft)||mt&&mt(lr)),[ut,ht,ft,gt,nt,mt,it]),$t=(lr,nr,hr="finish")=>{if(yt)return;const vr=it.setYear(It,nr);vt(vr,hr)},Ft=reactExports.useCallback(lr=>{Nt(it.setYear(It,lr))||(Bt(lr),Mt(!0),bt==null||bt(lr))},[Nt,it,It,Mt,bt]);reactExports.useEffect(()=>{Bt(lr=>St!==null&&lr!==St?St:lr)},[St]);const jt=Pt==="desktop"?4:3,zt=reactExports.useCallback((lr,nr)=>{switch(lr.key){case"ArrowUp":Ft(nr-jt),lr.preventDefault();break;case"ArrowDown":Ft(nr+jt),lr.preventDefault();break;case"ArrowLeft":Ft(nr+(ot.direction==="ltr"?-1:1)),lr.preventDefault();break;case"ArrowRight":Ft(nr+(ot.direction==="ltr"?1:-1)),lr.preventDefault();break}},[Ft,ot.direction,jt]),Yt=reactExports.useCallback((lr,nr)=>{Ft(nr)},[Ft]),Kt=reactExports.useCallback((lr,nr)=>{Ut===nr&&Mt(!1)},[Ut,Mt]),er=it.getYear(nt),ir=reactExports.useRef(null),rr=useForkRef(rt,ir);return reactExports.useEffect(()=>{if(at||ir.current===null)return;const lr=ir.current.querySelector('[tabindex="0"]');if(!lr)return;const nr=lr.offsetHeight,hr=lr.offsetTop,vr=ir.current.clientHeight,yr=ir.current.scrollTop,Cr=hr+nr;nr>vr||hr<yr||(ir.current.scrollTop=Cr-vr/2-nr/2)},[at]),jsx(YearPickerRoot,{ref:rr,className:clsx(Rt.root,lt),ownerState:wt,children:it.getYearRange(gt,ft).map(lr=>{const nr=it.getYear(lr),hr=nr===St;return jsx(PickersYear,{selected:hr,value:nr,onClick:$t,onKeyDown:zt,autoFocus:xt&&nr===Ut,ref:hr?Ot:void 0,disabled:pt||Nt(lr),tabIndex:nr===Ut?0:-1,onFocus:Yt,onBlur:Kt,"aria-current":er===nr?"date":void 0,children:it.format(lr,"year")},it.format(lr,"year"))})})}),PickerViewRoot=styled$1("div")({overflowX:"hidden",width:DIALOG_WIDTH,maxHeight:VIEW_HEIGHT,display:"flex",flexDirection:"column",margin:"0 auto"}),defaultReduceAnimations=typeof navigator<"u"&&/(android)/i.test(navigator.userAgent),getCalendarPickerUtilityClass=_e=>generateUtilityClass("MuiCalendarPicker",_e);generateUtilityClasses("MuiCalendarPicker",["root","viewTransitionContainer"]);const _excluded$e=["autoFocus","onViewChange","date","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","classes"],useUtilityClasses$b=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},getCalendarPickerUtilityClass,et)};function useCalendarPickerDefaultizedProps(_e,et){const rt=useUtils(),nt=useDefaultDates(),ot=useThemeProps({props:_e,name:et});return _extends({loading:!1,disablePast:!1,disableFuture:!1,openTo:"day",views:["year","day"],reduceAnimations:defaultReduceAnimations,renderLoading:()=>jsx("span",{children:"..."})},ot,{minDate:parseNonNullablePickerDate(rt,ot.minDate,nt.minDate),maxDate:parseNonNullablePickerDate(rt,ot.maxDate,nt.maxDate)})}const CalendarPickerRoot=styled$1(PickerViewRoot,{name:"MuiCalendarPicker",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"flex",flexDirection:"column"}),CalendarPickerViewTransitionContainer=styled$1(PickersFadeTransitionGroup,{name:"MuiCalendarPicker",slot:"ViewTransitionContainer",overridesResolver:(_e,et)=>et.viewTransitionContainer})({}),CalendarPicker=reactExports.forwardRef(function _e(et,rt){const nt=useUtils(),ot=useId(),it=useCalendarPickerDefaultizedProps(et,"MuiCalendarPicker"),{autoFocus:st,onViewChange:at,date:lt,disableFuture:ct,disablePast:pt,defaultCalendarMonth:ut,onChange:ht,onYearChange:ft,onMonthChange:gt,reduceAnimations:vt,shouldDisableDate:yt,shouldDisableMonth:mt,shouldDisableYear:Et,view:bt,views:Ct,openTo:Tt,className:wt,disabled:Rt,readOnly:It,minDate:St,maxDate:Pt,disableHighlightToday:Ot,focusedView:Ut,onFocusedViewChange:Bt}=it,xt=_objectWithoutPropertiesLoose(it,_excluded$e),{openView:At,setOpenView:Mt,openNext:Nt}=useViews({view:bt,views:Ct,openTo:Tt,onChange:ht,onViewChange:at}),{calendarState:$t,changeFocusedDay:Ft,changeMonth:jt,handleChangeMonth:zt,isDateDisabled:Yt,onMonthSwitchingAnimationEnd:Kt}=useCalendarState({date:lt,defaultCalendarMonth:ut,reduceAnimations:vt,onMonthChange:gt,minDate:St,maxDate:Pt,shouldDisableDate:yt,disablePast:pt,disableFuture:ct}),er=reactExports.useCallback((qt,fr)=>{const cr=nt.startOfMonth(qt),Ar=nt.endOfMonth(qt),Gr=Yt(qt)?findClosestEnabledDate({utils:nt,date:qt,minDate:nt.isBefore(St,cr)?cr:St,maxDate:nt.isAfter(Pt,Ar)?Ar:Pt,disablePast:pt,disableFuture:ct,isDateDisabled:Yt}):qt;Gr?(ht(Gr,fr),gt==null||gt(cr)):(Nt(),jt(cr)),Ft(Gr,!0)},[Ft,ct,pt,Yt,Pt,St,ht,gt,jt,Nt,nt]),ir=reactExports.useCallback((qt,fr)=>{const cr=nt.startOfYear(qt),Ar=nt.endOfYear(qt),Gr=Yt(qt)?findClosestEnabledDate({utils:nt,date:qt,minDate:nt.isBefore(St,cr)?cr:St,maxDate:nt.isAfter(Pt,Ar)?Ar:Pt,disablePast:pt,disableFuture:ct,isDateDisabled:Yt}):qt;Gr?(ht(Gr,fr),ft==null||ft(Gr)):(Nt(),jt(cr)),Ft(Gr,!0)},[Ft,ct,pt,Yt,Pt,St,ht,ft,Nt,nt,jt]),rr=reactExports.useCallback((qt,fr)=>ht(lt&&qt?nt.mergeDateAndTime(qt,lt):qt,fr),[nt,lt,ht]);reactExports.useEffect(()=>{lt&&jt(lt)},[lt]);const lr=it,nr=useUtilityClasses$b(lr),hr={disablePast:pt,disableFuture:ct,maxDate:Pt,minDate:St},vr=Rt&&lt||St,yr=Rt&&lt||Pt,Cr={disableHighlightToday:Ot,readOnly:It,disabled:Rt},or=`${ot}-grid-label`,[ur,pr]=useControlled({name:"DayPicker",state:"focusedView",controlled:Ut,default:st?At:null}),Er=ur!==null,Sr=useEventCallback(qt=>fr=>{if(Bt){Bt(qt)(fr);return}pr(fr?qt:cr=>cr===qt?null:cr)}),Ht=reactExports.useRef(At);return reactExports.useEffect(()=>{Ht.current!==At&&(Ht.current=At,Sr(At)(!0))},[At,Sr]),jsxs(CalendarPickerRoot,{ref:rt,className:clsx(nr.root,wt),ownerState:lr,children:[jsx(PickersCalendarHeader,_extends({},xt,{views:Ct,openView:At,currentMonth:$t.currentMonth,onViewChange:Mt,onMonthChange:(qt,fr)=>zt({newMonth:qt,direction:fr}),minDate:vr,maxDate:yr,disabled:Rt,disablePast:pt,disableFuture:ct,reduceAnimations:vt,labelId:or})),jsx(CalendarPickerViewTransitionContainer,{reduceAnimations:vt,className:nr.viewTransitionContainer,transKey:At,ownerState:lr,children:jsxs("div",{children:[At==="year"&&jsx(YearPicker,_extends({},xt,hr,Cr,{autoFocus:st,date:lt,onChange:ir,shouldDisableYear:Et,hasFocus:Er,onFocusedViewChange:Sr("year")})),At==="month"&&jsx(MonthPicker,_extends({},hr,Cr,{autoFocus:st,hasFocus:Er,className:wt,date:lt,onChange:er,shouldDisableMonth:mt,onFocusedViewChange:Sr("month")})),At==="day"&&jsx(DayPicker,_extends({},xt,$t,hr,Cr,{autoFocus:st,onMonthSwitchingAnimationEnd:Kt,onFocusedDayChange:Ft,reduceAnimations:vt,selectedDays:[lt],onSelectedDaysChange:rr,shouldDisableDate:yt,hasFocus:Er,onFocusedViewChange:Sr("day"),gridLabelId:or}))]})})]})}),CLOCK_WIDTH=220,CLOCK_HOUR_WIDTH=36,clockCenter={x:CLOCK_WIDTH/2,y:CLOCK_WIDTH/2},baseClockPoint={x:clockCenter.x,y:0},cx=baseClockPoint.x-clockCenter.x,cy=baseClockPoint.y-clockCenter.y,rad2deg=_e=>_e*(180/Math.PI),getAngleValue=(_e,et,rt)=>{const nt=et-clockCenter.x,ot=rt-clockCenter.y,it=Math.atan2(cx,cy)-Math.atan2(nt,ot);let st=rad2deg(it);st=Math.round(st/_e)*_e,st%=360;const at=Math.floor(st/_e)||0,lt=nt**2+ot**2,ct=Math.sqrt(lt);return{value:at,distance:ct}},getMinutes=(_e,et,rt=1)=>{const nt=rt*6;let{value:ot}=getAngleValue(nt,_e,et);return ot=ot*rt%60,ot},getHours=(_e,et,rt)=>{const{value:nt,distance:ot}=getAngleValue(30,_e,et);let it=nt||12;return rt?it%=12:ot<CLOCK_WIDTH/2-CLOCK_HOUR_WIDTH&&(it+=12,it%=24),it};function getClockPointerUtilityClass(_e){return generateUtilityClass("MuiClockPointer",_e)}generateUtilityClasses("MuiClockPointer",["root","thumb"]);const _excluded$d=["className","hasSelected","isInner","type","value"],useUtilityClasses$a=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],thumb:["thumb"]},getClockPointerUtilityClass,et)},ClockPointerRoot=styled$1("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e,ownerState:et})=>_extends({width:2,backgroundColor:_e.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},et.shouldAnimate&&{transition:_e.transitions.create(["transform","height"])})),ClockPointerThumb=styled$1("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(_e,et)=>et.thumb})(({theme:_e,ownerState:et})=>_extends({width:4,height:4,backgroundColor:_e.palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${CLOCK_HOUR_WIDTH/2}px)`,border:`${(CLOCK_HOUR_WIDTH-4)/2}px solid ${_e.palette.primary.main}`,boxSizing:"content-box"},et.hasSelected&&{backgroundColor:_e.palette.primary.main}));function ClockPointer(_e){const et=useThemeProps({props:_e,name:"MuiClockPointer"}),{className:rt,isInner:nt,type:ot,value:it}=et,st=_objectWithoutPropertiesLoose(et,_excluded$d),at=reactExports.useRef(ot);reactExports.useEffect(()=>{at.current=ot},[ot]);const lt=_extends({},et,{shouldAnimate:at.current!==ot}),ct=useUtilityClasses$a(lt);return jsx(ClockPointerRoot,_extends({style:(()=>{let ht=360/(ot==="hours"?12:60)*it;return ot==="hours"&&it>12&&(ht-=360),{height:Math.round((nt?.26:.4)*CLOCK_WIDTH),transform:`rotateZ(${ht}deg)`}})(),className:clsx(rt,ct.root),ownerState:lt},st,{children:jsx(ClockPointerThumb,{ownerState:lt,className:ct.thumb})}))}function getClockUtilityClass(_e){return generateUtilityClass("MuiClock",_e)}generateUtilityClasses("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton"]);const useUtilityClasses$9=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"]},getClockUtilityClass,et)},ClockRoot=styled$1("div",{name:"MuiClock",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:_e.spacing(2)})),ClockClock=styled$1("div",{name:"MuiClock",slot:"Clock",overridesResolver:(_e,et)=>et.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),ClockWrapper=styled$1("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(_e,et)=>et.wrapper})({"&:focus":{outline:"none"}}),ClockSquareMask=styled$1("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(_e,et)=>et.squareMask})(({ownerState:_e})=>_extends({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},_e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}})),ClockPin=styled$1("div",{name:"MuiClock",slot:"Pin",overridesResolver:(_e,et)=>et.pin})(({theme:_e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:_e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),ClockAmButton=styled$1(IconButton$1,{name:"MuiClock",slot:"AmButton",overridesResolver:(_e,et)=>et.amButton})(({theme:_e,ownerState:et})=>_extends({zIndex:1,position:"absolute",bottom:et.ampmInClock?64:8,left:8},et.meridiemMode==="am"&&{backgroundColor:_e.palette.primary.main,color:_e.palette.primary.contrastText,"&:hover":{backgroundColor:_e.palette.primary.light}})),ClockPmButton=styled$1(IconButton$1,{name:"MuiClock",slot:"PmButton",overridesResolver:(_e,et)=>et.pmButton})(({theme:_e,ownerState:et})=>_extends({zIndex:1,position:"absolute",bottom:et.ampmInClock?64:8,right:8},et.meridiemMode==="pm"&&{backgroundColor:_e.palette.primary.main,color:_e.palette.primary.contrastText,"&:hover":{backgroundColor:_e.palette.primary.light}}));function Clock(_e){const et=useThemeProps({props:_e,name:"MuiClock"}),{ampm:rt,ampmInClock:nt,autoFocus:ot,children:it,date:st,getClockLabelText:at,handleMeridiemChange:lt,isTimeDisabled:ct,meridiemMode:pt,minutesStep:ut=1,onChange:ht,selectedId:ft,type:gt,value:vt,disabled:yt,readOnly:mt,className:Et}=et,bt=et,Ct=useUtils(),Tt=reactExports.useContext(WrapperVariantContext),wt=reactExports.useRef(!1),Rt=useUtilityClasses$9(bt),It=ct(vt,gt),St=!rt&&gt==="hours"&&(vt<1||vt>12),Pt=(jt,zt)=>{yt||mt||ct(jt,gt)||ht(jt,zt)},Ot=(jt,zt)=>{let{offsetX:Yt,offsetY:Kt}=jt;if(Yt===void 0){const ir=jt.target.getBoundingClientRect();Yt=jt.changedTouches[0].clientX-ir.left,Kt=jt.changedTouches[0].clientY-ir.top}const er=gt==="seconds"||gt==="minutes"?getMinutes(Yt,Kt,ut):getHours(Yt,Kt,Boolean(rt));Pt(er,zt)},Ut=jt=>{wt.current=!0,Ot(jt,"shallow")},Bt=jt=>{wt.current&&(Ot(jt,"finish"),wt.current=!1)},xt=jt=>{jt.buttons>0&&Ot(jt.nativeEvent,"shallow")},At=jt=>{wt.current&&(wt.current=!1),Ot(jt.nativeEvent,"finish")},Mt=reactExports.useMemo(()=>gt==="hours"?!0:vt%5===0,[gt,vt]),Nt=gt==="minutes"?ut:1,$t=reactExports.useRef(null);useEnhancedEffect$1(()=>{ot&&$t.current.focus()},[ot]);const Ft=jt=>{if(!wt.current)switch(jt.key){case"Home":Pt(0,"partial"),jt.preventDefault();break;case"End":Pt(gt==="minutes"?59:23,"partial"),jt.preventDefault();break;case"ArrowUp":Pt(vt+Nt,"partial"),jt.preventDefault();break;case"ArrowDown":Pt(vt-Nt,"partial"),jt.preventDefault();break}};return jsxs(ClockRoot,{className:clsx(Et,Rt.root),children:[jsxs(ClockClock,{className:Rt.clock,children:[jsx(ClockSquareMask,{onTouchMove:Ut,onTouchEnd:Bt,onMouseUp:At,onMouseMove:xt,ownerState:{disabled:yt},className:Rt.squareMask}),!It&&jsxs(reactExports.Fragment,{children:[jsx(ClockPin,{className:Rt.pin}),st&&jsx(ClockPointer,{type:gt,value:vt,isInner:St,hasSelected:Mt})]}),jsx(ClockWrapper,{"aria-activedescendant":ft,"aria-label":at(gt,st,Ct),ref:$t,role:"listbox",onKeyDown:Ft,tabIndex:0,className:Rt.wrapper,children:it})]}),rt&&(Tt==="desktop"||nt)&&jsxs(reactExports.Fragment,{children:[jsx(ClockAmButton,{onClick:mt?void 0:()=>lt("am"),disabled:yt||pt===null,ownerState:bt,className:Rt.amButton,children:jsx(Typography$1,{variant:"caption",children:"AM"})}),jsx(ClockPmButton,{disabled:yt||pt===null,onClick:mt?void 0:()=>lt("pm"),ownerState:bt,className:Rt.pmButton,children:jsx(Typography$1,{variant:"caption",children:"PM"})})]})]})}function getClockNumberUtilityClass(_e){return generateUtilityClass("MuiClockNumber",_e)}const clockNumberClasses=generateUtilityClasses("MuiClockNumber",["root","selected","disabled"]),_excluded$c=["className","disabled","index","inner","label","selected"],useUtilityClasses$8=_e=>{const{classes:et,selected:rt,disabled:nt}=_e;return composeClasses({root:["root",rt&&"selected",nt&&"disabled"]},getClockNumberUtilityClass,et)},ClockNumberRoot=styled$1("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(_e,et)=>[et.root,{[`&.${clockNumberClasses.disabled}`]:et.disabled},{[`&.${clockNumberClasses.selected}`]:et.selected}]})(({theme:_e,ownerState:et})=>_extends({height:CLOCK_HOUR_WIDTH,width:CLOCK_HOUR_WIDTH,position:"absolute",left:`calc((100% - ${CLOCK_HOUR_WIDTH}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:_e.palette.text.primary,fontFamily:_e.typography.fontFamily,"&:focused":{backgroundColor:_e.palette.background.paper},[`&.${clockNumberClasses.selected}`]:{color:_e.palette.primary.contrastText},[`&.${clockNumberClasses.disabled}`]:{pointerEvents:"none",color:_e.palette.text.disabled}},et.inner&&_extends({},_e.typography.body2,{color:_e.palette.text.secondary})));function ClockNumber(_e){const et=useThemeProps({props:_e,name:"MuiClockNumber"}),{className:rt,disabled:nt,index:ot,inner:it,label:st,selected:at}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$c),ct=et,pt=useUtilityClasses$8(ct),ut=ot%12/12*Math.PI*2-Math.PI/2,ht=(CLOCK_WIDTH-CLOCK_HOUR_WIDTH-2)/2*(it?.65:1),ft=Math.round(Math.cos(ut)*ht),gt=Math.round(Math.sin(ut)*ht);return jsx(ClockNumberRoot,_extends({className:clsx(rt,pt.root),"aria-disabled":nt?!0:void 0,"aria-selected":at?!0:void 0,role:"option",style:{transform:`translate(${ft}px, ${gt+(CLOCK_WIDTH-CLOCK_HOUR_WIDTH)/2}px`},ownerState:ct},lt,{children:st}))}const getHourNumbers=({ampm:_e,date:et,getClockNumberText:rt,isDisabled:nt,selectedId:ot,utils:it})=>{const st=et?it.getHours(et):null,at=[],lt=_e?1:0,ct=_e?12:23,pt=ut=>st===null?!1:_e?ut===12?st===12||st===0:st===ut||st-12===ut:st===ut;for(let ut=lt;ut<=ct;ut+=1){let ht=ut.toString();ut===0&&(ht="00");const ft=!_e&&(ut===0||ut>12);ht=it.formatNumber(ht);const gt=pt(ut);at.push(jsx(ClockNumber,{id:gt?ot:void 0,index:ut,inner:ft,selected:gt,disabled:nt(ut),label:ht,"aria-label":rt(ht)},ut))}return at},getMinutesNumbers=({utils:_e,value:et,isDisabled:rt,getClockNumberText:nt,selectedId:ot})=>{const it=_e.formatNumber;return[[5,it("05")],[10,it("10")],[15,it("15")],[20,it("20")],[25,it("25")],[30,it("30")],[35,it("35")],[40,it("40")],[45,it("45")],[50,it("50")],[55,it("55")],[0,it("00")]].map(([st,at],lt)=>{const ct=st===et;return jsx(ClockNumber,{label:at,id:ct?ot:void 0,index:lt+1,inner:!1,disabled:rt(st),selected:ct,"aria-label":nt(at)},st)})};function getClockPickerUtilityClass(_e){return generateUtilityClass("MuiClockPicker",_e)}generateUtilityClasses("MuiClockPicker",["root","arrowSwitcher"]);const useUtilityClasses$7=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],arrowSwitcher:["arrowSwitcher"]},getClockPickerUtilityClass,et)},ClockPickerRoot=styled$1(PickerViewRoot,{name:"MuiClockPicker",slot:"Root",overridesResolver:(_e,et)=>et.root})({display:"flex",flexDirection:"column"}),ClockPickerArrowSwitcher=styled$1(PickersArrowSwitcher,{name:"MuiClockPicker",slot:"ArrowSwitcher",overridesResolver:(_e,et)=>et.arrowSwitcher})({position:"absolute",right:12,top:15}),deprecatedPropsWarning=buildDeprecatedPropsWarning(),ClockPicker=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiClockPicker"}),{ampm:ot=!1,ampmInClock:it=!1,autoFocus:st,components:at,componentsProps:lt,date:ct,disableIgnoringDatePartForTimeValidation:pt,getClockLabelText:ut,getHoursClockNumberText:ht,getMinutesClockNumberText:ft,getSecondsClockNumberText:gt,leftArrowButtonText:vt,maxTime:yt,minTime:mt,minutesStep:Et=1,rightArrowButtonText:bt,shouldDisableTime:Ct,showViewSwitcher:Tt,onChange:wt,view:Rt,views:It=["hours","minutes"],openTo:St,onViewChange:Pt,className:Ot,disabled:Ut,readOnly:Bt}=nt;deprecatedPropsWarning({leftArrowButtonText:vt,rightArrowButtonText:bt,getClockLabelText:ut,getHoursClockNumberText:ht,getMinutesClockNumberText:ft,getSecondsClockNumberText:gt});const xt=useLocaleText(),At=vt??xt.openPreviousView,Mt=bt??xt.openNextView,Nt=ut??xt.clockLabelText,$t=ht??xt.hoursClockNumberText,Ft=ft??xt.minutesClockNumberText,jt=gt??xt.secondsClockNumberText,{openView:zt,setOpenView:Yt,nextView:Kt,previousView:er,handleChangeAndOpenNext:ir}=useViews({view:Rt,views:It,openTo:St,onViewChange:Pt,onChange:wt}),rr=useNow(),lr=useUtils(),nr=reactExports.useMemo(()=>ct||lr.setSeconds(lr.setMinutes(lr.setHours(rr,0),0),0),[ct,rr,lr]),{meridiemMode:hr,handleMeridiemChange:vr}=useMeridiemMode(nr,ot,ir),yr=reactExports.useCallback((Er,Sr)=>{const Ht=createIsAfterIgnoreDatePart(pt,lr),qt=({start:cr,end:Ar})=>!(mt&&Ht(mt,Ar)||yt&&Ht(cr,yt)),fr=(cr,Ar=1)=>cr%Ar!==0?!1:Ct?!Ct(cr,Sr):!0;switch(Sr){case"hours":{const cr=convertValueToMeridiem(Er,hr,ot),Ar=lr.setHours(nr,cr),Gr=lr.setSeconds(lr.setMinutes(Ar,0),0),Qr=lr.setSeconds(lr.setMinutes(Ar,59),59);return!qt({start:Gr,end:Qr})||!fr(cr)}case"minutes":{const cr=lr.setMinutes(nr,Er),Ar=lr.setSeconds(cr,0),Gr=lr.setSeconds(cr,59);return!qt({start:Ar,end:Gr})||!fr(Er,Et)}case"seconds":{const cr=lr.setSeconds(nr,Er);return!qt({start:cr,end:cr})||!fr(Er)}default:throw new Error("not supported")}},[ot,nr,pt,yt,hr,mt,Et,Ct,lr]),Cr=useId(),or=reactExports.useMemo(()=>{switch(zt){case"hours":{const Er=(Sr,Ht)=>{const qt=convertValueToMeridiem(Sr,hr,ot);ir(lr.setHours(nr,qt),Ht)};return{onChange:Er,value:lr.getHours(nr),children:getHourNumbers({date:ct,utils:lr,ampm:ot,onChange:Er,getClockNumberText:$t,isDisabled:Sr=>Ut||yr(Sr,"hours"),selectedId:Cr})}}case"minutes":{const Er=lr.getMinutes(nr),Sr=(Ht,qt)=>{ir(lr.setMinutes(nr,Ht),qt)};return{value:Er,onChange:Sr,children:getMinutesNumbers({utils:lr,value:Er,onChange:Sr,getClockNumberText:Ft,isDisabled:Ht=>Ut||yr(Ht,"minutes"),selectedId:Cr})}}case"seconds":{const Er=lr.getSeconds(nr),Sr=(Ht,qt)=>{ir(lr.setSeconds(nr,Ht),qt)};return{value:Er,onChange:Sr,children:getMinutesNumbers({utils:lr,value:Er,onChange:Sr,getClockNumberText:jt,isDisabled:Ht=>Ut||yr(Ht,"seconds"),selectedId:Cr})}}default:throw new Error("You must provide the type for ClockView")}},[zt,lr,ct,ot,$t,Ft,jt,hr,ir,nr,yr,Cr,Ut]),ur=nt,pr=useUtilityClasses$7(ur);return jsxs(ClockPickerRoot,{ref:rt,className:clsx(pr.root,Ot),ownerState:ur,children:[Tt&&jsx(ClockPickerArrowSwitcher,{className:pr.arrowSwitcher,leftArrowButtonText:At,rightArrowButtonText:Mt,components:at,componentsProps:lt,onLeftClick:()=>Yt(er),onRightClick:()=>Yt(Kt),isLeftDisabled:!er,isRightDisabled:!Kt,ownerState:ur}),jsx(Clock,_extends({autoFocus:st,date:ct,ampmInClock:it,type:zt,ampm:ot,getClockLabelText:Nt,minutesStep:Et,isTimeDisabled:yr,meridiemMode:hr,handleMeridiemChange:vr,selectedId:Cr,disabled:Ut,readOnly:Bt},or))]})});function getPickersToolbarUtilityClass(_e){return generateUtilityClass("MuiPickersToolbar",_e)}const pickersToolbarClasses=generateUtilityClasses("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"]),useUtilityClasses$6=_e=>{const{classes:et,isLandscape:rt}=_e;return composeClasses({root:["root"],content:["content"],penIconButton:["penIconButton",rt&&"penIconButtonLandscape"]},getPickersToolbarUtilityClass,et)},PickersToolbarRoot=styled$1("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e,ownerState:et})=>_extends({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:_e.spacing(2,3)},et.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),PickersToolbarContent=styled$1(Grid$1,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(_e,et)=>et.content})(({ownerState:_e})=>_extends({flex:1},!_e.isLandscape&&{alignItems:"center"})),PickersToolbarPenIconButton=styled$1(IconButton$1,{name:"MuiPickersToolbar",slot:"PenIconButton",overridesResolver:(_e,et)=>[{[`&.${pickersToolbarClasses.penIconButtonLandscape}`]:et.penIconButtonLandscape},et.penIconButton]})({}),getViewTypeIcon=_e=>_e==="clock"?jsx(Clock$1,{color:"inherit"}):jsx(Calendar,{color:"inherit"}),PickersToolbar=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiPickersToolbar"}),{children:ot,className:it,getMobileKeyboardInputViewButtonText:st,isLandscape:at,isMobileKeyboardViewOpen:lt,landscapeDirection:ct="column",toggleMobileKeyboardView:pt,toolbarTitle:ut,viewType:ht="calendar"}=nt,ft=nt,gt=useLocaleText(),vt=useUtilityClasses$6(ft);return jsxs(PickersToolbarRoot,{ref:rt,className:clsx(vt.root,it),ownerState:ft,children:[jsx(Typography$1,{color:"text.secondary",variant:"overline",children:ut}),jsxs(PickersToolbarContent,{container:!0,justifyContent:"space-between",className:vt.content,ownerState:ft,direction:at?ct:"row",alignItems:at?"flex-start":"flex-end",children:[ot,jsx(PickersToolbarPenIconButton,{onClick:pt,className:vt.penIconButton,ownerState:ft,color:"inherit","aria-label":st?st(lt,ht):gt.inputModeToggleButtonAriaLabel(lt,ht),children:lt?getViewTypeIcon(ht):jsx(Pen,{color:"inherit"})})]})]})}),_excluded$b=["onAccept","onClear","onCancel","onSetToday","actions"],PickersActionBar=_e=>{const{onAccept:et,onClear:rt,onCancel:nt,onSetToday:ot,actions:it}=_e,st=_objectWithoutPropertiesLoose(_e,_excluded$b),at=reactExports.useContext(WrapperVariantContext),lt=useLocaleText(),ct=typeof it=="function"?it(at):it;if(ct==null||ct.length===0)return null;const pt=ct==null?void 0:ct.map(ut=>{switch(ut){case"clear":return jsx(Button$1,{onClick:rt,children:lt.clearButtonLabel},ut);case"cancel":return jsx(Button$1,{onClick:nt,children:lt.cancelButtonLabel},ut);case"accept":return jsx(Button$1,{onClick:et,children:lt.okButtonLabel},ut);case"today":return jsx(Button$1,{onClick:ot,children:lt.todayButtonLabel},ut);default:return null}});return jsx(DialogActions$1,_extends({},st,{children:pt}))};function getPickersPopperUtilityClass(_e){return generateUtilityClass("MuiPickersPopper",_e)}generateUtilityClasses("MuiPickersPopper",["root","paper"]);const _excluded$a=["onClick","onTouchStart"],useUtilityClasses$5=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],paper:["paper"]},getPickersPopperUtilityClass,et)},PickersPopperRoot=styled$1(Popper$1,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>({zIndex:_e.zIndex.modal})),PickersPopperPaper=styled$1(Paper$1,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(_e,et)=>et.paper})(({ownerState:_e})=>_extends({transformOrigin:"top center",outline:0},_e.placement==="top"&&{transformOrigin:"bottom center"}));function clickedRootScrollbar(_e,et){return et.documentElement.clientWidth<_e.clientX||et.documentElement.clientHeight<_e.clientY}function useClickAwayListener(_e,et){const rt=reactExports.useRef(!1),nt=reactExports.useRef(!1),ot=reactExports.useRef(null),it=reactExports.useRef(!1);reactExports.useEffect(()=>{if(!_e)return;function lt(){it.current=!0}return document.addEventListener("mousedown",lt,!0),document.addEventListener("touchstart",lt,!0),()=>{document.removeEventListener("mousedown",lt,!0),document.removeEventListener("touchstart",lt,!0),it.current=!1}},[_e]);const st=useEventCallback(lt=>{if(!it.current)return;const ct=nt.current;nt.current=!1;const pt=ownerDocument(ot.current);if(!ot.current||"clientX"in lt&&clickedRootScrollbar(lt,pt))return;if(rt.current){rt.current=!1;return}let ut;lt.composedPath?ut=lt.composedPath().indexOf(ot.current)>-1:ut=!pt.documentElement.contains(lt.target)||ot.current.contains(lt.target),!ut&&!ct&&et(lt)}),at=()=>{nt.current=!0};return reactExports.useEffect(()=>{if(_e){const lt=ownerDocument(ot.current),ct=()=>{rt.current=!0};return lt.addEventListener("touchstart",st),lt.addEventListener("touchmove",ct),()=>{lt.removeEventListener("touchstart",st),lt.removeEventListener("touchmove",ct)}}},[_e,st]),reactExports.useEffect(()=>{if(_e){const lt=ownerDocument(ot.current);return lt.addEventListener("click",st),()=>{lt.removeEventListener("click",st),nt.current=!1}}},[_e,st]),[ot,at,at]}function PickersPopper(_e){var et;const rt=useThemeProps({props:_e,name:"MuiPickersPopper"}),{anchorEl:nt,children:ot,containerRef:it=null,onBlur:st,onClose:at,onClear:lt,onAccept:ct,onCancel:pt,onSetToday:ut,open:ht,PopperProps:ft,role:gt,TransitionComponent:vt=Grow$1,TrapFocusProps:yt,PaperProps:mt={},components:Et,componentsProps:bt}=rt;reactExports.useEffect(()=>{function Ft(jt){ht&&(jt.key==="Escape"||jt.key==="Esc")&&at()}return document.addEventListener("keydown",Ft),()=>{document.removeEventListener("keydown",Ft)}},[at,ht]);const Ct=reactExports.useRef(null);reactExports.useEffect(()=>{gt!=="tooltip"&&(ht?Ct.current=getActiveElement(document):Ct.current&&Ct.current instanceof HTMLElement&&setTimeout(()=>{Ct.current instanceof HTMLElement&&Ct.current.focus()}))},[ht,gt]);const[Tt,wt,Rt]=useClickAwayListener(ht,st??at),It=reactExports.useRef(null),St=useForkRef(It,it),Pt=useForkRef(St,Tt),Ot=rt,Ut=useUtilityClasses$5(Ot),{onClick:Bt,onTouchStart:xt}=mt,At=_objectWithoutPropertiesLoose(mt,_excluded$a),Mt=Ft=>{Ft.key==="Escape"&&(Ft.stopPropagation(),at())},Nt=(et=Et==null?void 0:Et.ActionBar)!=null?et:PickersActionBar,$t=(Et==null?void 0:Et.PaperContent)||reactExports.Fragment;return jsx(PickersPopperRoot,_extends({transition:!0,role:gt,open:ht,anchorEl:nt,onKeyDown:Mt,className:Ut.root},ft,{children:({TransitionProps:Ft,placement:jt})=>jsx(FocusTrap,_extends({open:ht,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:gt==="tooltip",isEnabled:()=>!0},yt,{children:jsx(vt,_extends({},Ft,{children:jsx(PickersPopperPaper,_extends({tabIndex:-1,elevation:8,ref:Pt,onClick:zt=>{wt(zt),Bt&&Bt(zt)},onTouchStart:zt=>{Rt(zt),xt&&xt(zt)},ownerState:_extends({},Ot,{placement:jt}),className:Ut.paper},At,{children:jsxs($t,_extends({},bt==null?void 0:bt.paperContent,{children:[ot,jsx(Nt,_extends({onAccept:ct,onClear:lt,onCancel:pt,onSetToday:ut,actions:[]},bt==null?void 0:bt.actionBar))]}))}))}))}))}))}function DesktopWrapper(_e){const{children:et,DateInputProps:rt,KeyboardDateInputComponent:nt,onClear:ot,onDismiss:it,onCancel:st,onAccept:at,onSetToday:lt,open:ct,PopperProps:pt,PaperProps:ut,TransitionComponent:ht,components:ft,componentsProps:gt}=_e,vt=reactExports.useRef(null),yt=useForkRef(rt.inputRef,vt);return jsxs(WrapperVariantContext.Provider,{value:"desktop",children:[jsx(nt,_extends({},rt,{inputRef:yt})),jsx(PickersPopper,{role:"dialog",open:ct,anchorEl:vt.current,TransitionComponent:ht,PopperProps:pt,PaperProps:ut,onClose:it,onCancel:st,onClear:ot,onAccept:at,onSetToday:lt,components:ft,componentsProps:gt,children:et})]})}const useRifm=_e=>{const[,et]=reactExports.useReducer(lt=>lt+1,0),rt=reactExports.useRef(null),{replace:nt,append:ot}=_e,it=nt?nt(_e.format(_e.value)):_e.format(_e.value),st=reactExports.useRef(!1),at=lt=>{const ct=lt.target.value;rt.current=[ct,lt.target,ct.length>it.length,st.current,it===_e.format(ct)],et()};return reactExports.useLayoutEffect(()=>{if(rt.current==null)return;let[lt,ct,pt,ut,ht]=rt.current;rt.current=null;const ft=ut&&ht,vt=lt.slice(ct.selectionStart).search(_e.accept||/\d/g),yt=vt!==-1?vt:0,mt=wt=>(wt.match(_e.accept||/\d/g)||[]).join(""),Et=mt(lt.substr(0,ct.selectionStart)),bt=wt=>{let Rt=0,It=0;for(let St=0;St!==Et.length;++St){let Pt=wt.indexOf(Et[St],Rt)+1,Ot=mt(wt).indexOf(Et[St],It)+1;Ot-It>1&&(Pt=Rt,Ot=It),It=Math.max(Ot,It),Rt=Math.max(Rt,Pt)}return Rt};if(_e.mask===!0&&pt&&!ht){let wt=bt(lt);const Rt=mt(lt.substr(wt))[0];wt=lt.indexOf(Rt,wt),lt=`${lt.substr(0,wt)}${lt.substr(wt+1)}`}let Ct=_e.format(lt);ot!=null&&ct.selectionStart===lt.length&&!ht&&(pt?Ct=ot(Ct):mt(Ct.slice(-1))===""&&(Ct=Ct.slice(0,-1)));const Tt=nt?nt(Ct):Ct;return it===Tt?et():_e.onChange(Tt),()=>{let wt=bt(Ct);if(_e.mask!=null&&(pt||ut&&!ft))for(;Ct[wt]&&mt(Ct[wt])==="";)wt+=1;ct.selectionStart=ct.selectionEnd=wt+(ft?1+yt:0)}}),reactExports.useEffect(()=>{const lt=pt=>{pt.code==="Delete"&&(st.current=!0)},ct=pt=>{pt.code==="Delete"&&(st.current=!1)};return document.addEventListener("keydown",lt),document.addEventListener("keyup",ct),()=>{document.removeEventListener("keydown",lt),document.removeEventListener("keyup",ct)}},[]),{value:rt.current!=null?rt.current[0]:it,onChange:at}},getDisplayDate=(_e,et,rt)=>{const nt=_e.date(et);return et===null?"":_e.isValid(nt)?_e.formatByString(nt,rt):""},MASK_USER_INPUT_SYMBOL="_",staticDateWith2DigitTokens="2019-11-21T22:30:00.000",staticDateWith1DigitTokens="2019-01-01T09:00:00.000";function getMaskFromCurrentFormat(_e,et,rt,nt){if(_e)return _e;const it=nt.formatByString(nt.date(staticDateWith1DigitTokens),et).replace(rt,MASK_USER_INPUT_SYMBOL),st=nt.formatByString(nt.date(staticDateWith2DigitTokens),et).replace(rt,"_");return it===st?it:""}function checkMaskIsValidForCurrentFormat(_e,et,rt,nt){if(!_e)return!1;const it=nt.formatByString(nt.date(staticDateWith1DigitTokens),et).replace(rt,MASK_USER_INPUT_SYMBOL),st=nt.formatByString(nt.date(staticDateWith2DigitTokens),et).replace(rt,"_"),at=st===it&&_e===st;return!at&&nt.lib,at}const maskedDateFormatter=(_e,et)=>rt=>{let nt=0;return rt.split("").map((ot,it)=>{if(et.lastIndex=0,nt>_e.length-1)return"";const st=_e[nt],at=_e[nt+1],lt=et.test(ot)?ot:"",ct=st===MASK_USER_INPUT_SYMBOL?lt:st+lt;return nt+=ct.length,it===rt.length-1&&at&&at!==MASK_USER_INPUT_SYMBOL?ct?ct+at:"":ct}).join("")},useMaskedInput=({acceptRegex:_e=/[\d]/gi,disabled:et,disableMaskedInput:rt,ignoreInvalidInputs:nt,inputFormat:ot,inputProps:it,label:st,mask:at,onChange:lt,rawValue:ct,readOnly:pt,rifmFormatter:ut,TextFieldProps:ht,validationError:ft})=>{const gt=useUtils(),vt=gt.getFormatHelperText(ot),{shouldUseMaskedInput:yt,maskToUse:mt}=reactExports.useMemo(()=>{if(rt)return{shouldUseMaskedInput:!1,maskToUse:""};const xt=getMaskFromCurrentFormat(at,ot,_e,gt);return{shouldUseMaskedInput:checkMaskIsValidForCurrentFormat(xt,ot,_e,gt),maskToUse:xt}},[_e,rt,ot,at,gt]),Et=reactExports.useMemo(()=>yt&&mt?maskedDateFormatter(mt,_e):xt=>xt,[_e,mt,yt]),bt=ct===null?null:gt.date(ct),[Ct,Tt]=reactExports.useState(bt),[wt,Rt]=reactExports.useState(getDisplayDate(gt,ct,ot)),It=reactExports.useRef(),St=reactExports.useRef(gt.locale),Pt=reactExports.useRef(ot);reactExports.useEffect(()=>{const xt=ct!==It.current,At=gt.locale!==St.current,Mt=ot!==Pt.current;if(It.current=ct,St.current=gt.locale,Pt.current=ot,!xt&&!At&&!Mt)return;const Nt=ct===null?null:gt.date(ct),$t=ct===null||gt.isValid(Nt);let Ft=Ct===null&&Nt===null;if(Ct!==null&&Nt!==null){const zt=gt.isEqual(Ct,Nt);if(zt)Ft=!0;else{const Yt=Math.abs(gt.getDiff(Ct,Nt));Ft=Yt===0?zt:Yt<1e3}}if(!At&&!Mt&&(!$t||Ft))return;const jt=getDisplayDate(gt,ct,ot);Tt(Nt),Rt(jt)},[gt,ct,ot,Ct]);const Ot=xt=>{const At=xt===""||xt===at?"":xt;Rt(At);const Mt=At===null?null:gt.parse(At,ot);nt&&!gt.isValid(Mt)||(Tt(Mt),lt(Mt,At||void 0))},Ut=useRifm({value:wt,onChange:Ot,format:ut||Et});return _extends({label:st,disabled:et,error:ft,inputProps:_extends({},yt?Ut:{value:wt,onChange:xt=>{Ot(xt.currentTarget.value)}},{disabled:et,placeholder:vt,readOnly:pt,type:yt?"tel":"text"},it)},ht)},_excluded$9=["className","components","disableOpenPicker","getOpenDialogAriaText","InputAdornmentProps","InputProps","inputRef","openPicker","OpenPickerButtonProps","renderInput"],KeyboardDateInput=reactExports.forwardRef(function _e(et,rt){const{className:nt,components:ot={},disableOpenPicker:it,getOpenDialogAriaText:st,InputAdornmentProps:at,InputProps:lt,inputRef:ct,openPicker:pt,OpenPickerButtonProps:ut,renderInput:ht}=et,ft=_objectWithoutPropertiesLoose(et,_excluded$9),gt=useLocaleText(),vt=st??gt.openDatePickerDialogue,yt=useUtils(),mt=useMaskedInput(ft),Et=(at==null?void 0:at.position)||"end",bt=ot.OpenPickerIcon||Calendar;return ht(_extends({ref:rt,inputRef:ct,className:nt},mt,{InputProps:_extends({},lt,{[`${Et}Adornment`]:it?void 0:jsx(InputAdornment$1,_extends({position:Et},at,{children:jsx(IconButton$1,_extends({edge:Et,disabled:ft.disabled||ft.readOnly,"aria-label":vt(ft.rawValue,yt)},ut,{onClick:pt,children:jsx(bt,{})}))}))})}))});function getOrientation(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const useIsLandscape=(_e,et)=>{const[rt,nt]=reactExports.useState(getOrientation);return useEnhancedEffect$1(()=>{const it=()=>{nt(getOrientation())};return window.addEventListener("orientationchange",it),()=>{window.removeEventListener("orientationchange",it)}},[]),arrayIncludes(_e,["hours","minutes","seconds"])?!1:(et||rt)==="landscape"},useFocusManagement=({autoFocus:_e,openView:et})=>{const[rt,nt]=reactExports.useState(_e?et:null),ot=reactExports.useCallback(it=>st=>{nt(st?it:at=>it===at?null:at)},[]);return{focusedView:rt,setFocusedView:ot}};function getCalendarOrClockPickerUtilityClass(_e){return generateUtilityClass("MuiCalendarOrClockPicker",_e)}generateUtilityClasses("MuiCalendarOrClockPicker",["root","mobileKeyboardInputView"]);const _excluded$8=["autoFocus","className","parsedValue","DateInputProps","isMobileKeyboardViewOpen","onDateChange","onViewChange","openTo","orientation","showToolbar","toggleMobileKeyboardView","ToolbarComponent","toolbarFormat","toolbarPlaceholder","toolbarTitle","views","dateRangeIcon","timeIcon","hideTabs","classes"],useUtilityClasses$4=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],mobileKeyboardInputView:["mobileKeyboardInputView"]},getCalendarOrClockPickerUtilityClass,et)},MobileKeyboardInputView=styled$1("div",{name:"MuiCalendarOrClockPicker",slot:"MobileKeyboardInputView",overridesResolver:(_e,et)=>et.mobileKeyboardInputView})({padding:"16px 24px"}),PickerRoot=styled$1("div",{name:"MuiCalendarOrClockPicker",slot:"Root",overridesResolver:(_e,et)=>et.root})(({ownerState:_e})=>_extends({display:"flex",flexDirection:"column"},_e.isLandscape&&{flexDirection:"row"})),MobileKeyboardTextFieldProps={fullWidth:!0},isDatePickerView=_e=>_e==="year"||_e==="month"||_e==="day",isTimePickerView=_e=>_e==="hours"||_e==="minutes"||_e==="seconds";function CalendarOrClockPicker(_e){var et,rt;const nt=useThemeProps({props:_e,name:"MuiCalendarOrClockPicker"}),{autoFocus:ot,parsedValue:it,DateInputProps:st,isMobileKeyboardViewOpen:at,onDateChange:lt,onViewChange:ct,openTo:pt,orientation:ut,showToolbar:ht,toggleMobileKeyboardView:ft,ToolbarComponent:gt=()=>null,toolbarFormat:vt,toolbarPlaceholder:yt,toolbarTitle:mt,views:Et,dateRangeIcon:bt,timeIcon:Ct,hideTabs:Tt}=nt,wt=_objectWithoutPropertiesLoose(nt,_excluded$8),Rt=(et=wt.components)==null?void 0:et.Tabs,It=useIsLandscape(Et,ut),St=reactExports.useContext(WrapperVariantContext),Pt=useUtilityClasses$4(nt),Ot=ht??St!=="desktop",Ut=!Tt&&typeof window<"u"&&window.innerHeight>667,Bt=reactExports.useCallback((jt,zt)=>{lt(jt,St,zt)},[lt,St]),xt=reactExports.useCallback(jt=>{at&&ft(),ct&&ct(jt)},[at,ct,ft]),{openView:At,setOpenView:Mt,handleChangeAndOpenNext:Nt}=useViews({view:void 0,views:Et,openTo:pt,onChange:Bt,onViewChange:xt}),{focusedView:$t,setFocusedView:Ft}=useFocusManagement({autoFocus:ot,openView:At});return jsxs(PickerRoot,{ownerState:{isLandscape:It},className:Pt.root,children:[Ot&&jsx(gt,_extends({},wt,{views:Et,isLandscape:It,parsedValue:it,onChange:Bt,setOpenView:Mt,openView:At,toolbarTitle:mt,toolbarFormat:vt,toolbarPlaceholder:yt,isMobileKeyboardViewOpen:at,toggleMobileKeyboardView:ft})),Ut&&!!Rt&&jsx(Rt,_extends({dateRangeIcon:bt,timeIcon:Ct,view:At,onChange:Mt},(rt=wt.componentsProps)==null?void 0:rt.tabs)),jsx(PickerViewRoot,{children:at?jsx(MobileKeyboardInputView,{className:Pt.mobileKeyboardInputView,children:jsx(KeyboardDateInput,_extends({},st,{ignoreInvalidInputs:!0,disableOpenPicker:!0,TextFieldProps:MobileKeyboardTextFieldProps}))}):jsxs(reactExports.Fragment,{children:[isDatePickerView(At)&&jsx(CalendarPicker,_extends({autoFocus:ot,date:it,onViewChange:Mt,onChange:Nt,view:At,views:Et.filter(isDatePickerView),focusedView:$t,onFocusedViewChange:Ft},wt)),isTimePickerView(At)&&jsx(ClockPicker,_extends({},wt,{autoFocus:ot,date:it,view:At,views:Et.filter(isTimePickerView),onChange:Nt,onViewChange:Mt,showViewSwitcher:St==="desktop"}))]})})]})}const useOpenState=({open:_e,onOpen:et,onClose:rt})=>{const nt=reactExports.useRef(typeof _e=="boolean").current,[ot,it]=reactExports.useState(!1);reactExports.useEffect(()=>{if(nt){if(typeof _e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");it(_e)}},[nt,_e]);const st=reactExports.useCallback(at=>{nt||it(at),at&&et&&et(),!at&&rt&&rt()},[nt,et,rt]);return{isOpen:ot,setIsOpen:st}},usePickerState=(_e,et)=>{const{onAccept:rt,onChange:nt,value:ot,closeOnSelect:it}=_e,st=useUtils(),{isOpen:at,setIsOpen:lt}=useOpenState(_e),ct=reactExports.useMemo(()=>et.parseInput(st,ot),[et,st,ot]),[pt,ut]=reactExports.useState(ct),[ht,ft]=reactExports.useState(()=>({committed:ct,draft:ct,resetFallback:ct})),gt=reactExports.useCallback(wt=>{ft(Rt=>{switch(wt.action){case"setAll":case"acceptAndClose":return{draft:wt.value,committed:wt.value,resetFallback:wt.value};case"setCommitted":return _extends({},Rt,{draft:wt.value,committed:wt.value});case"setDraft":return _extends({},Rt,{draft:wt.value});default:return Rt}}),(wt.forceOnChangeCall||!wt.skipOnChangeCall&&!et.areValuesEqual(st,ht.committed,wt.value))&&nt(wt.value),wt.action==="acceptAndClose"&&(lt(!1),rt&&!et.areValuesEqual(st,ht.resetFallback,wt.value)&&rt(wt.value))},[rt,nt,lt,ht,st,et]);reactExports.useEffect(()=>{st.isValid(ct)&&ut(ct)},[st,ct]),reactExports.useEffect(()=>{at&&gt({action:"setAll",value:ct,skipOnChangeCall:!0})},[at]),et.areValuesEqual(st,ht.committed,ct)||gt({action:"setCommitted",value:ct,skipOnChangeCall:!0});const vt=reactExports.useMemo(()=>({open:at,onClear:()=>{gt({value:et.emptyValue,action:"acceptAndClose",forceOnChangeCall:!et.areValuesEqual(st,ot,et.emptyValue)})},onAccept:()=>{gt({value:ht.draft,action:"acceptAndClose",forceOnChangeCall:!et.areValuesEqual(st,ot,ct)})},onDismiss:()=>{gt({value:ht.committed,action:"acceptAndClose"})},onCancel:()=>{gt({value:ht.resetFallback,action:"acceptAndClose"})},onSetToday:()=>{gt({value:et.getTodayValue(st),action:"acceptAndClose"})}}),[gt,at,st,ht,et,ot,ct]),[yt,mt]=reactExports.useState(!1),Et=reactExports.useMemo(()=>({parsedValue:ht.draft,isMobileKeyboardViewOpen:yt,toggleMobileKeyboardView:()=>mt(!yt),onDateChange:(wt,Rt,It="partial")=>{switch(It){case"shallow":return gt({action:"setDraft",value:wt,skipOnChangeCall:!0});case"partial":return gt({action:"setDraft",value:wt});case"finish":return gt(it??Rt==="desktop"?{value:wt,action:"acceptAndClose"}:{value:wt,action:"setCommitted"});default:throw new Error("MUI: Invalid selectionState passed to `onDateChange`")}}}),[gt,yt,ht.draft,it]),bt=reactExports.useCallback((wt,Rt)=>{const It=et.valueReducer?et.valueReducer(st,pt,wt):wt;nt(It,Rt)},[nt,et,pt,st]),Ct=reactExports.useMemo(()=>({onChange:bt,open:at,rawValue:ot,openPicker:()=>lt(!0)}),[bt,at,ot,lt]),Tt={pickerProps:Et,inputProps:Ct,wrapperProps:vt};return reactExports.useDebugValue(Tt,()=>({MuiPickerState:{dateState:ht,other:Tt}})),Tt},PickersModalDialogRoot=styled$1(Dialog$1)({[`& .${dialogClasses$1.container}`]:{outline:0},[`& .${dialogClasses$1.paper}`]:{outline:0,minWidth:DIALOG_WIDTH}}),PickersModalDialogContent=styled$1(DialogContent$1)({"&:first-of-type":{padding:0}}),PickersModalDialog=_e=>{var et;const{children:rt,DialogProps:nt={},onAccept:ot,onClear:it,onDismiss:st,onCancel:at,onSetToday:lt,open:ct,components:pt,componentsProps:ut}=_e,ht=(et=pt==null?void 0:pt.ActionBar)!=null?et:PickersActionBar;return jsxs(PickersModalDialogRoot,_extends({open:ct,onClose:st},nt,{children:[jsx(PickersModalDialogContent,{children:rt}),jsx(ht,_extends({onAccept:ot,onClear:it,onCancel:at,onSetToday:lt,actions:["cancel","accept"]},ut==null?void 0:ut.actionBar))]}))},_excluded$7=["children","DateInputProps","DialogProps","onAccept","onClear","onDismiss","onCancel","onSetToday","open","PureDateInputComponent","components","componentsProps"];function MobileWrapper(_e){const{children:et,DateInputProps:rt,DialogProps:nt,onAccept:ot,onClear:it,onDismiss:st,onCancel:at,onSetToday:lt,open:ct,PureDateInputComponent:pt,components:ut,componentsProps:ht}=_e,ft=_objectWithoutPropertiesLoose(_e,_excluded$7);return jsxs(WrapperVariantContext.Provider,{value:"mobile",children:[jsx(pt,_extends({components:ut},ft,rt)),jsx(PickersModalDialog,{DialogProps:nt,onAccept:ot,onClear:it,onDismiss:st,onCancel:at,onSetToday:lt,open:ct,components:ut,componentsProps:ht,children:et})]})}const PureDateInput=reactExports.forwardRef(function _e(et,rt){const{disabled:nt,getOpenDialogAriaText:ot,inputFormat:it,InputProps:st,inputRef:at,label:lt,openPicker:ct,rawValue:pt,renderInput:ut,TextFieldProps:ht={},validationError:ft,className:gt}=et,vt=useLocaleText(),yt=ot??vt.openDatePickerDialogue,mt=useUtils(),Et=reactExports.useMemo(()=>_extends({},st,{readOnly:!0}),[st]),bt=getDisplayDate(mt,pt,it),Ct=useEventCallback(Tt=>{Tt.stopPropagation(),ct()});return ut(_extends({label:lt,disabled:nt,ref:rt,inputRef:at,error:ft,InputProps:Et,className:gt},!et.readOnly&&!et.disabled&&{onClick:Ct},{inputProps:_extends({disabled:nt,readOnly:!0,"aria-readonly":!0,"aria-label":yt(pt,mt),value:bt},!et.readOnly&&{onClick:Ct},{onKeyDown:onSpaceOrEnter(ct)})},ht))});function useDateTimePickerDefaultizedProps(_e,et){var rt,nt,ot,it,st;const at=useThemeProps({props:_e,name:et}),lt=useUtils(),ct=useDefaultDates(),pt=(rt=at.ampm)!=null?rt:lt.is12HourCycleInCurrentLocale();if(at.orientation!=null&&at.orientation!=="portrait")throw new Error("We are not supporting custom orientation for DateTimePicker yet :(");return _extends({ampm:pt,orientation:"portrait",openTo:"day",views:["year","day","hours","minutes"],ampmInClock:!0,acceptRegex:pt?/[\dap]/gi:/\d/gi,disableMaskedInput:!1,inputFormat:pt?lt.formats.keyboardDateTime12h:lt.formats.keyboardDateTime24h,disableIgnoringDatePartForTimeValidation:Boolean(at.minDateTime||at.maxDateTime),disablePast:!1,disableFuture:!1},at,{minDate:parseNonNullablePickerDate(lt,(nt=at.minDateTime)!=null?nt:at.minDate,ct.minDate),maxDate:parseNonNullablePickerDate(lt,(ot=at.maxDateTime)!=null?ot:at.maxDate,ct.maxDate),minTime:(it=at.minDateTime)!=null?it:at.minTime,maxTime:(st=at.maxDateTime)!=null?st:at.maxTime})}const dateTimePickerValueManager={emptyValue:null,getTodayValue:_e=>_e.date(),parseInput:parsePickerInputValue,areValuesEqual:(_e,et,rt)=>_e.isEqual(et,rt)};function getPickersToolbarTextUtilityClass(_e){return generateUtilityClass("PrivatePickersToolbarText",_e)}const pickersToolbarTextClasses=generateUtilityClasses("PrivatePickersToolbarText",["root","selected"]),_excluded$6=["className","selected","value"],useUtilityClasses$3=_e=>{const{classes:et,selected:rt}=_e;return composeClasses({root:["root",rt&&"selected"]},getPickersToolbarTextUtilityClass,et)},PickersToolbarTextRoot=styled$1(Typography$1,{name:"PrivatePickersToolbarText",slot:"Root",overridesResolver:(_e,et)=>[et.root,{[`&.${pickersToolbarTextClasses.selected}`]:et.selected}]})(({theme:_e})=>({transition:_e.transitions.create("color"),color:_e.palette.text.secondary,[`&.${pickersToolbarTextClasses.selected}`]:{color:_e.palette.text.primary}})),PickersToolbarText=reactExports.forwardRef(function _e(et,rt){const{className:nt,value:ot}=et,it=_objectWithoutPropertiesLoose(et,_excluded$6),st=useUtilityClasses$3(et);return jsx(PickersToolbarTextRoot,_extends({ref:rt,className:clsx(nt,st.root),component:"span"},it,{children:ot}))}),_excluded$5=["align","className","selected","typographyClassName","value","variant"],useUtilityClasses$2=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getPickersToolbarUtilityClass,et)},PickersToolbarButtonRoot=styled$1(Button$1,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(_e,et)=>et.root})({padding:0,minWidth:16,textTransform:"none"}),PickersToolbarButton=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiPickersToolbarButton"}),{align:ot,className:it,selected:st,typographyClassName:at,value:lt,variant:ct}=nt,pt=_objectWithoutPropertiesLoose(nt,_excluded$5),ut=useUtilityClasses$2(nt);return jsx(PickersToolbarButtonRoot,_extends({variant:"text",ref:rt,className:clsx(it,ut.root)},pt,{children:jsx(PickersToolbarText,{align:ot,className:at,variant:ct,value:lt,selected:st})}))});function getDateTimePickerToolbarUtilityClass(_e){return generateUtilityClass("MuiDateTimePickerToolbar",_e)}generateUtilityClasses("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","separator"]);const _excluded$4=["ampm","parsedValue","isMobileKeyboardViewOpen","onChange","openView","setOpenView","toggleMobileKeyboardView","toolbarFormat","toolbarPlaceholder","toolbarTitle","views"],useUtilityClasses$1=_e=>{const{classes:et}=_e;return composeClasses({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer"],separator:["separator"]},getDateTimePickerToolbarUtilityClass,et)},DateTimePickerToolbarRoot=styled$1(PickersToolbar,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(_e,et)=>et.root})(({theme:_e})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",[`& .${pickersToolbarClasses.penIconButton}`]:_extends({position:"absolute",top:8},_e.direction==="rtl"?{left:8}:{right:8})})),DateTimePickerToolbarDateContainer=styled$1("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(_e,et)=>et.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),DateTimePickerToolbarTimeContainer=styled$1("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(_e,et)=>et.timeContainer})({display:"flex"}),DateTimePickerToolbarSeparator=styled$1(PickersToolbarText,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(_e,et)=>et.separator})({margin:"0 4px 0 2px",cursor:"default"});function DateTimePickerToolbar(_e){const et=useThemeProps({props:_e,name:"MuiDateTimePickerToolbar"}),{ampm:rt,parsedValue:nt,isMobileKeyboardViewOpen:ot,openView:it,setOpenView:st,toggleMobileKeyboardView:at,toolbarFormat:lt,toolbarPlaceholder:ct="––",toolbarTitle:pt,views:ut}=et,ht=_objectWithoutPropertiesLoose(et,_excluded$4),ft=et,gt=useUtils(),vt=useLocaleText(),yt=useUtilityClasses$1(ft),mt=pt??vt.dateTimePickerDefaultToolbarTitle,Et=Ct=>rt?gt.format(Ct,"hours12h"):gt.format(Ct,"hours24h"),bt=reactExports.useMemo(()=>nt?lt?gt.formatByString(nt,lt):gt.format(nt,"shortDate"):ct,[nt,lt,ct,gt]);return jsxs(DateTimePickerToolbarRoot,_extends({toolbarTitle:mt,isMobileKeyboardViewOpen:ot,toggleMobileKeyboardView:at,className:yt.root},ht,{isLandscape:!1,ownerState:ft,children:[jsxs(DateTimePickerToolbarDateContainer,{className:yt.dateContainer,ownerState:ft,children:[ut.includes("year")&&jsx(PickersToolbarButton,{tabIndex:-1,variant:"subtitle1",onClick:()=>st("year"),selected:it==="year",value:nt?gt.format(nt,"year"):"–"}),ut.includes("day")&&jsx(PickersToolbarButton,{tabIndex:-1,variant:"h4",onClick:()=>st("day"),selected:it==="day",value:bt})]}),jsxs(DateTimePickerToolbarTimeContainer,{className:yt.timeContainer,ownerState:ft,children:[ut.includes("hours")&&jsx(PickersToolbarButton,{variant:"h3",onClick:()=>st("hours"),selected:it==="hours",value:nt?Et(nt):"--"}),ut.includes("minutes")&&jsxs(reactExports.Fragment,{children:[jsx(DateTimePickerToolbarSeparator,{variant:"h3",value:":",className:yt.separator,ownerState:ft}),jsx(PickersToolbarButton,{variant:"h3",onClick:()=>st("minutes"),selected:it==="minutes",value:nt?gt.format(nt,"minutes"):"--"})]}),ut.includes("seconds")&&jsxs(reactExports.Fragment,{children:[jsx(DateTimePickerToolbarSeparator,{variant:"h3",value:":",className:yt.separator,ownerState:ft}),jsx(PickersToolbarButton,{variant:"h3",onClick:()=>st("seconds"),selected:it==="seconds",value:nt?gt.format(nt,"seconds"):"--"})]})]})]}))}const validateTime=({adapter:_e,value:et,props:rt})=>{const{minTime:nt,maxTime:ot,minutesStep:it,shouldDisableTime:st,disableIgnoringDatePartForTimeValidation:at}=rt,lt=_e.utils.date(et),ct=createIsAfterIgnoreDatePart(at,_e.utils);if(et===null)return null;switch(!0){case!_e.utils.isValid(et):return"invalidDate";case Boolean(nt&&ct(nt,lt)):return"minTime";case Boolean(ot&&ct(lt,ot)):return"maxTime";case Boolean(st&&st(_e.utils.getHours(lt),"hours")):return"shouldDisableTime-hours";case Boolean(st&&st(_e.utils.getMinutes(lt),"minutes")):return"shouldDisableTime-minutes";case Boolean(st&&st(_e.utils.getSeconds(lt),"seconds")):return"shouldDisableTime-seconds";case Boolean(it&&_e.utils.getMinutes(lt)%it!==0):return"minutesStep";default:return null}},_excluded$3=["minDate","maxDate","disableFuture","shouldDisableDate","disablePast"],validateDateTime=({props:_e,value:et,adapter:rt})=>{const{minDate:nt,maxDate:ot,disableFuture:it,shouldDisableDate:st,disablePast:at}=_e,lt=_objectWithoutPropertiesLoose(_e,_excluded$3),ct=validateDate({adapter:rt,value:et,props:{minDate:nt,maxDate:ot,disableFuture:it,shouldDisableDate:st,disablePast:at}});return ct!==null?ct:validateTime({adapter:rt,value:et,props:lt})},isSameDateTimeError=(_e,et)=>_e===et;function useDateTimeValidation(_e){return useValidation(_e,validateDateTime,isSameDateTimeError)}function getDateTimePickerTabsUtilityClass(_e){return generateUtilityClass("MuiDateTimePickerTabs",_e)}generateUtilityClasses("MuiDateTimePickerTabs",["root"]);const viewToTab=_e=>["day","month","year"].includes(_e)?"date":"time",tabToView=_e=>_e==="date"?"day":"hours",useUtilityClasses=_e=>{const{classes:et}=_e;return composeClasses({root:["root"]},getDateTimePickerTabsUtilityClass,et)},DateTimePickerTabsRoot=styled$1(Tabs$1,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(_e,et)=>et.root})(({ownerState:_e,theme:et})=>_extends({boxShadow:`0 -1px 0 0 inset ${et.palette.divider}`},_e.wrapperVariant==="desktop"&&{order:1,boxShadow:`0 1px 0 0 inset ${et.palette.divider}`,[`& .${tabsClasses$1.indicator}`]:{bottom:"auto",top:0}})),DateTimePickerTabs=function _e(et){const rt=useThemeProps({props:et,name:"MuiDateTimePickerTabs"}),{dateRangeIcon:nt=jsx(DateRange,{}),onChange:ot,timeIcon:it=jsx(Time,{}),view:st}=rt,at=useLocaleText(),lt=reactExports.useContext(WrapperVariantContext),ct=_extends({},rt,{wrapperVariant:lt}),pt=useUtilityClasses(ct),ut=(ht,ft)=>{ot(tabToView(ft))};return jsxs(DateTimePickerTabsRoot,{ownerState:ct,variant:"fullWidth",value:viewToTab(st),onChange:ut,className:pt.root,children:[jsx(Tab$1,{value:"date","aria-label":at.dateTableLabel,icon:jsx(reactExports.Fragment,{children:nt})}),jsx(Tab$1,{value:"time","aria-label":at.timeTableLabel,icon:jsx(reactExports.Fragment,{children:it})})]})},_excluded$2=["onChange","PaperProps","PopperProps","ToolbarComponent","TransitionComponent","value","components","componentsProps","hideTabs"],DesktopDateTimePicker=reactExports.forwardRef(function _e(et,rt){const nt=useDateTimePickerDefaultizedProps(et,"MuiDesktopDateTimePicker"),ot=useDateTimeValidation(nt)!==null,{pickerProps:it,inputProps:st,wrapperProps:at}=usePickerState(nt,dateTimePickerValueManager),{PaperProps:lt,PopperProps:ct,ToolbarComponent:pt=DateTimePickerToolbar,TransitionComponent:ut,components:ht,componentsProps:ft,hideTabs:gt=!0}=nt,vt=_objectWithoutPropertiesLoose(nt,_excluded$2),yt=reactExports.useMemo(()=>_extends({Tabs:DateTimePickerTabs},ht),[ht]),mt=_extends({},st,vt,{components:yt,componentsProps:ft,ref:rt,validationError:ot});return jsx(DesktopWrapper,_extends({},at,{DateInputProps:mt,KeyboardDateInputComponent:KeyboardDateInput,PopperProps:ct,PaperProps:lt,TransitionComponent:ut,components:yt,componentsProps:ft,children:jsx(CalendarOrClockPicker,_extends({},it,{autoFocus:!0,toolbarTitle:nt.label||nt.toolbarTitle,ToolbarComponent:pt,DateInputProps:mt,components:yt,componentsProps:ft,hideTabs:gt},vt))}))}),_excluded$1=["ToolbarComponent","value","onChange","components","componentsProps","hideTabs"],MobileDateTimePicker=reactExports.forwardRef(function _e(et,rt){const nt=useDateTimePickerDefaultizedProps(et,"MuiMobileDateTimePicker"),ot=useDateTimeValidation(nt)!==null,{pickerProps:it,inputProps:st,wrapperProps:at}=usePickerState(nt,dateTimePickerValueManager),{ToolbarComponent:lt=DateTimePickerToolbar,components:ct,componentsProps:pt,hideTabs:ut=!1}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$1),ft=reactExports.useMemo(()=>_extends({Tabs:DateTimePickerTabs},ct),[ct]),gt=_extends({},st,ht,{components:ft,componentsProps:pt,ref:rt,validationError:ot});return jsx(MobileWrapper,_extends({},ht,at,{DateInputProps:gt,PureDateInputComponent:PureDateInput,components:ft,componentsProps:pt,children:jsx(CalendarOrClockPicker,_extends({},it,{autoFocus:!0,toolbarTitle:nt.label||nt.toolbarTitle,ToolbarComponent:lt,DateInputProps:gt,components:ft,componentsProps:pt,hideTabs:ut},ht))}))}),_excluded=["desktopModeMediaQuery","DialogProps","PopperProps","TransitionComponent"],DateTimePicker=reactExports.forwardRef(function _e(et,rt){const nt=useThemeProps({props:et,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:ot="@media (pointer: fine)",DialogProps:it,PopperProps:st,TransitionComponent:at}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded);return useMediaQuery(ot,{defaultMatches:!0})?jsx(DesktopDateTimePicker,_extends({ref:rt,PopperProps:st,TransitionComponent:at},lt)):jsx(MobileDateTimePicker,_extends({ref:rt,DialogProps:it},lt))});var longFormattersExports={},longFormatters$1={get exports(){return longFormattersExports},set exports(_e){longFormattersExports=_e}};(function(_e,et){Object.defineProperty(et,"__esModule",{value:!0}),et.default=void 0;var rt=function(lt,ct){switch(lt){case"P":return ct.date({width:"short"});case"PP":return ct.date({width:"medium"});case"PPP":return ct.date({width:"long"});case"PPPP":default:return ct.date({width:"full"})}},nt=function(lt,ct){switch(lt){case"p":return ct.time({width:"short"});case"pp":return ct.time({width:"medium"});case"ppp":return ct.time({width:"long"});case"pppp":default:return ct.time({width:"full"})}},ot=function(lt,ct){var pt=lt.match(/(P+)(p+)?/)||[],ut=pt[1],ht=pt[2];if(!ht)return rt(lt,ct);var ft;switch(ut){case"P":ft=ct.dateTime({width:"short"});break;case"PP":ft=ct.dateTime({width:"medium"});break;case"PPP":ft=ct.dateTime({width:"long"});break;case"PPPP":default:ft=ct.dateTime({width:"full"});break}return ft.replace("{{date}}",rt(ut,ct)).replace("{{time}}",nt(ht,ct))},it={p:nt,P:ot},st=it;et.default=st,_e.exports=et.default})(longFormatters$1,longFormattersExports);const longFormatters=getDefaultExportFromCjs(longFormattersExports);var defaultFormats={dayOfMonth:"d",fullDate:"PP",fullDateWithWeekday:"PPPP",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aaa",fullDateTime24h:"PP HH:mm",fullTime:"p",fullTime12h:"hh:mm aaa",fullTime24h:"HH:mm",hours12h:"hh",hours24h:"HH",keyboardDate:"P",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aaa",keyboardDateTime24h:"P HH:mm",minutes:"mm",month:"LLLL",monthAndDate:"MMMM d",monthAndYear:"LLLL yyyy",monthShort:"MMM",weekday:"EEEE",weekdayShort:"EEE",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",seconds:"ss",shortDate:"MMM d",year:"yyyy"},DateFnsUtils=function(){function _e(et){var rt=this,nt=et===void 0?{}:et,ot=nt.locale,it=nt.formats;this.lib="date-fns",this.is12HourCycleInCurrentLocale=function(){return rt.locale?/a/.test(rt.locale.formatLong.time()):!0},this.getFormatHelperText=function(st){var at=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lt=rt.locale||defaultLocale;return st.match(at).map(function(ct){var pt=ct[0];if(pt==="p"||pt==="P"){var ut=longFormatters[pt];return ut(ct,lt.formatLong,{})}return ct}).join("").replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase()},this.parseISO=function(st){return parseISO(st)},this.toISO=function(st){return formatISO(st,{format:"extended"})},this.getCurrentLocaleCode=function(){var st;return((st=rt.locale)===null||st===void 0?void 0:st.code)||"en-US"},this.addSeconds=function(st,at){return addSeconds(st,at)},this.addMinutes=function(st,at){return addMinutes(st,at)},this.addHours=function(st,at){return addHours(st,at)},this.addDays=function(st,at){return addDays(st,at)},this.addWeeks=function(st,at){return addWeeks(st,at)},this.addMonths=function(st,at){return addMonths(st,at)},this.addYears=function(st,at){return addYears(st,at)},this.isValid=function(st){return isValid(rt.date(st))},this.getDiff=function(st,at,lt){switch(lt){case"years":return differenceInYears(st,rt.date(at));case"quarters":return differenceInQuarters(st,rt.date(at));case"months":return differenceInMonths(st,rt.date(at));case"weeks":return differenceInWeeks(st,rt.date(at));case"days":return differenceInDays(st,rt.date(at));case"hours":return differenceInHours(st,rt.date(at));case"minutes":return differenceInMinutes(st,rt.date(at));case"seconds":return differenceInSeconds(st,rt.date(at));default:return differenceInMilliseconds(st,rt.date(at))}},this.isAfter=function(st,at){return isAfter(st,at)},this.isBefore=function(st,at){return isBefore(st,at)},this.startOfDay=function(st){return startOfDay(st)},this.endOfDay=function(st){return endOfDay(st)},this.getHours=function(st){return getHours$1(st)},this.setHours=function(st,at){return setHours(st,at)},this.setMinutes=function(st,at){return setMinutes(st,at)},this.getSeconds=function(st){return getSeconds(st)},this.setSeconds=function(st,at){return setSeconds(st,at)},this.isSameDay=function(st,at){return isSameDay(st,at)},this.isSameMonth=function(st,at){return isSameMonth(st,at)},this.isSameYear=function(st,at){return isSameYear(st,at)},this.isSameHour=function(st,at){return isSameHour(st,at)},this.startOfYear=function(st){return startOfYear(st)},this.endOfYear=function(st){return endOfYear(st)},this.startOfMonth=function(st){return startOfMonth(st)},this.endOfMonth=function(st){return endOfMonth(st)},this.startOfWeek=function(st){return startOfWeek(st,{locale:rt.locale})},this.endOfWeek=function(st){return endOfWeek(st,{locale:rt.locale})},this.getYear=function(st){return getYear(st)},this.setYear=function(st,at){return setYear(st,at)},this.date=function(st){return typeof st>"u"?new Date:st===null?null:new Date(st)},this.toJsDate=function(st){return st},this.parse=function(st,at){return st===""?null:parse$1(st,at,new Date,{locale:rt.locale})},this.format=function(st,at){return rt.formatByString(st,rt.formats[at])},this.formatByString=function(st,at){return format(st,at,{locale:rt.locale})},this.isEqual=function(st,at){return st===null&&at===null?!0:isEqual(st,at)},this.isNull=function(st){return st===null},this.isAfterDay=function(st,at){return isAfter(st,endOfDay(at))},this.isBeforeDay=function(st,at){return isBefore(st,startOfDay(at))},this.isBeforeYear=function(st,at){return isBefore(st,startOfYear(at))},this.isAfterYear=function(st,at){return isAfter(st,endOfYear(at))},this.isWithinRange=function(st,at){var lt=at[0],ct=at[1];return isWithinInterval(st,{start:lt,end:ct})},this.formatNumber=function(st){return st},this.getMinutes=function(st){return getMinutes$1(st)},this.getDate=function(st){return getDate(st)},this.setDate=function(st,at){return setDate(st,at)},this.getMonth=function(st){return getMonth(st)},this.getDaysInMonth=function(st){return getDaysInMonth(st)},this.setMonth=function(st,at){return setMonth(st,at)},this.getMeridiemText=function(st){return st==="am"?"AM":"PM"},this.getNextMonth=function(st){return addMonths(st,1)},this.getPreviousMonth=function(st){return addMonths(st,-1)},this.getMonthArray=function(st){for(var at=startOfYear(st),lt=[at];lt.length<12;){var ct=lt[lt.length-1];lt.push(rt.getNextMonth(ct))}return lt},this.mergeDateAndTime=function(st,at){return rt.setSeconds(rt.setMinutes(rt.setHours(st,rt.getHours(at)),rt.getMinutes(at)),rt.getSeconds(at))},this.getWeekdays=function(){var st=new Date;return eachDayOfInterval({start:startOfWeek(st,{locale:rt.locale}),end:endOfWeek(st,{locale:rt.locale})}).map(function(at){return rt.formatByString(at,"EEEEEE")})},this.getWeekArray=function(st){for(var at=startOfWeek(startOfMonth(st),{locale:rt.locale}),lt=endOfWeek(endOfMonth(st),{locale:rt.locale}),ct=0,pt=at,ut=[],ht=null;isBefore(pt,lt);){var ft=Math.floor(ct/7);ut[ft]=ut[ft]||[];var gt=getDay(pt);ht!==gt&&(ht=gt,ut[ft].push(pt),ct+=1),pt=addDays(pt,1)}return ut},this.getYearRange=function(st,at){for(var lt=startOfYear(st),ct=endOfYear(at),pt=[],ut=lt;isBefore(ut,ct);)pt.push(ut),ut=addYears(ut,1);return pt},this.locale=ot,this.formats=Object.assign({},defaultFormats,it)}return _e}();const formatTokenMap={y:"year",yy:"year",yyy:"year",yyyy:"year",MMMM:"month",MM:"month",DD:"day",d:"day",dd:"day",H:"hour",HH:"hour",h:"hour",hh:"hour",mm:"minute",ss:"second",a:"am-pm",aa:"am-pm",aaa:"am-pm"};class AdapterDateFns extends DateFnsUtils{constructor(...et){super(...et),this.formatTokenMap=formatTokenMap,this.expandFormat=rt=>{const nt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return rt.match(nt).map(ot=>{const it=ot[0];if(it==="p"||it==="P"){const st=longFormatters[it],at=this.locale||defaultLocale;return st(ot,at.formatLong,{})}return ot}).join("")},this.getFormatHelperText=rt=>this.expandFormat(rt).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase()}}function DateTime({label:_e="Date",inputFormat:et="dd/MMM/yyyy hh:mm aa",value:rt,setValue:nt}){return jsx(Fragment,{children:jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:jsx(DateTimePicker,{label:_e,inputFormat:et,disableMaskedInput:!0,disablePast:!0,value:rt,onChange:ot=>{nt(ot)},renderInput:ot=>jsx(TextField$1,{...ot})})})})}const ITEM_HEIGHT=48,ITEM_PADDING_TOP=8,MenuProps={PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5+ITEM_PADDING_TOP,width:350}}};function getStyles(_e,et,rt){return{fontWeight:et.indexOf(_e)===-1?rt.typography.fontWeightRegular:rt.typography.fontWeightMedium}}function SelectChip({label:_e="Chip",names:et,studentNames:rt,setstudentNames:nt}){const ot=useTheme();return jsx(Fragment,{children:jsxs(FormControl$1,{sx:{m:1},children:[jsx(InputLabel$1,{id:"demo-multiple-chip-label",children:_e}),jsx(Select$1,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:rt,onChange:st=>{const{target:{value:at}}=st;nt(typeof at=="string"?at.split(","):at)},input:jsx(OutlinedInput$1,{id:"select-multiple-chip",label:_e}),renderValue:st=>jsx(Box$1,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:st.map(at=>jsx(Chip$1,{label:at},at))}),MenuProps,children:et.map(st=>jsx(MenuItem$1,{value:st,style:getStyles(st,rt,ot),children:st},st))})]})})}const Accordion=styled$1(_e=>jsx(MuiAccordion,{disableGutters:!0,elevation:0,square:!0,..._e}))(({theme:_e})=>({border:`1px solid ${_e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),AccordionSummary=styled$1(_e=>jsx(MuiAccordionSummary,{expandIcon:jsx(default_1$h,{sx:{fontSize:"0.9rem"}}),..._e}))(({theme:_e})=>({backgroundColor:_e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:_e.spacing(1)}})),AccordionDetails=styled$1(MuiAccordionDetails)(({theme:_e})=>({padding:_e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));function QuestionAdd({questions:_e,setQuestions:et}){const[rt,nt]=React$1.useState("panel1"),ot=pt=>(ut,ht)=>{nt(ht?pt:!1)},it=()=>{et([..._e,{question:"",incorrect_answer:["","",""],correct_answer:""}])},st=(pt,ut)=>{pt.preventDefault(),pt.stopPropagation();const ht=[..._e];ht.splice(ut,1),et(ht)},at=(pt,ut)=>{const{name:ht,value:ft}=pt.target,gt=[..._e];gt[ut][ht]=ft,et(gt)},lt=(pt,ut,ht)=>{const{value:ft}=pt.target,gt=[..._e];gt[ut].incorrect_answer[ht]=ft,et(gt)},ct=(pt,ut)=>{const{value:ht}=pt.target,ft=[..._e];ft[ut].correct_answer=ht,et(ft)};return jsxs(Fragment,{children:[jsxs(Box$3,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$3,{}),jsx(Typography$1,{textAlign:"center",variant:"h6",children:"Add Questions"}),jsx(Button$1,{color:"secondary",onClick:it,variant:"contained",children:"+"})]}),_e.map((pt,ut)=>jsxs(Accordion,{expanded:rt===`panel${ut+1}`,onChange:ot(`panel${ut+1}`),children:[jsx(AccordionSummary,{"aria-controls":"panel1d-content",id:"panel1d-header",children:jsxs(Typography$1,{children:["Question ",ut+1]})}),jsx(AccordionDetails,{children:jsxs(Stack$1,{spacing:1,children:[jsx(FormControl$1,{fullWidth:!0,children:jsx(TextField$1,{id:"outlined-basic",name:"question",onChange:ht=>at(ht,ut),value:pt.question,label:"Question",variant:"outlined"})}),pt.incorrect_answer.map((ht,ft)=>jsx(FormControl$1,{fullWidth:!0,children:jsx(TextField$1,{id:"outlined-basic",name:`option${ft+1}`,value:ht,onChange:gt=>lt(gt,ut,ft),label:`Incorrect option ${ft+1}`,variant:"outlined"})},ft)),jsx(FormControl$1,{children:jsx(TextField$1,{id:"outlined-basic",name:"correct_answer",value:pt.correct_answer,onChange:ht=>ct(ht,ut),label:"Correct option",variant:"outlined"})}),jsx(FormControl$1,{fullWidth:!0,children:jsx(Button$1,{variant:"contained",color:"error",onClick:ht=>st(ht,ut),children:"-"})})]})})]},ut))]})}function AddQuiz(){const _e=useFormInput(""),[et,rt]=reactExports.useState([]),nt=useFormInput(auth$1.name),ot=useFormInput(""),it=useFormInput(""),[st,at]=reactExports.useState(new Date),[lt,ct]=reactExports.useState(new Date),pt=useFormInput(""),[ut,ht]=reactExports.useState([]),[ft,gt]=reactExports.useState([{question:"",incorrect_answer:["","",""],correct_answer:""}]),vt=useNavigate(),yt=async()=>{const bt=await UserService.getStudents();rt(bt.data.map(Ct=>Ct.username))};reactExports.useEffect(()=>{yt()},[]);const mt=async()=>{const Ct=(await axios$1.get(`https://opentdb.com/api.php?amount=${_e.value}&type=multiple`)).data.results.map(Tt=>({question:Tt.question,incorrect_answer:Tt.incorrect_answers,correct_answer:Tt.correct_answer}));gt(Ct)};return jsx(Fragment,{children:jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Link$2,{to:"..",children:jsx(Button$1,{color:"error",variant:"contained",children:"Cancel"})}),jsx(Typography$1,{variant:"h6",children:"Add Quiz"}),jsx(Button$1,{color:"secondary",onClick:async()=>{const bt={author:auth$1.name,name:ot.value,description:it.value,startDate:st,endDate:lt,duration:pt.value,studentNames:ut,questions:ft},Ct=await QuizService.set(bt);Ct.status===202?vt(window.history.back()):alert("There is Some error ",JSON.stringify(Ct))},variant:"contained",children:"Save Quiz"})]}),jsx(Divider$1,{sx:{margin:"10px"}}),jsx("form",{children:jsxs(Stack$1,{spacing:3,children:[jsx(TextBox,{label:"Author",disabled:!0,...nt}),jsx(TextBox,{label:"Name",...ot}),jsx(TextBox,{label:"Description",...it}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(DateTime,{label:"Start Date",value:st,setValue:at}),jsx(DateTime,{label:"End Date",value:lt,setValue:ct}),jsx(TextBox,{label:"Duration (in minutes)",type:"number",fullWidth:!1,...pt})]}),jsx(SelectChip,{label:"Students",names:et,studentNames:ut,setstudentNames:ht}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{alignItems:"center"},children:[jsx(Typography$1,{children:"Enter Number of Random Questions"}),jsx(TextBox,{label:"Number of Questions",type:"number",fullWidth:!1,..._e}),jsx(Button$1,{variant:"contained",onClick:mt,children:"Submit"})]}),jsx(QuestionAdd,{questions:ft,setQuestions:gt})]})})]})})}function EditQuiz(){const _e=useLocation(),{id:et}=_e.state,rt=useFormInput(""),[nt,ot]=reactExports.useState([]),it=useFormInput(""),st=useFormInput(""),at=useFormInput(""),[lt,ct]=reactExports.useState(new Date),[pt,ut]=reactExports.useState(new Date),ht=useFormInput(""),[ft,gt]=reactExports.useState([]),[vt,yt]=reactExports.useState([{question:"",incorrect_answer:["","",""],correct_answer:""}]),mt=useNavigate(),Et=async()=>{const Tt=await UserService.getStudents();ot(Tt.data.map(wt=>wt.username))};reactExports.useEffect(()=>{Et()},[]),reactExports.useEffect(()=>{(async()=>{const wt=await QuizService.getById(et);it.onChange(wt.data.author.firstName+" "+wt.data.author.lastName),st.onChange(wt.data.name),at.onChange(wt.data.description),ct(wt.data.startDate),ut(wt.data.endDate),ht.onChange(wt.data.duration),gt(wt.data.studentNames),yt(wt.data.questions)})()},[et]);const bt=async()=>{const wt=(await axios$1.get(`https://opentdb.com/api.php?amount=${rt.value}&type=multiple`)).data.results.map(Rt=>({question:Rt.question,incorrect_answer:Rt.incorrect_answers,correct_answer:Rt.correct_answer}));yt(wt)};return jsx(Fragment,{children:jsxs(Fragment,{children:[" ",jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Link$2,{to:"..",children:jsx(Button$1,{color:"error",variant:"contained",children:"Cancel"})}),jsx(Typography$1,{variant:"h6",children:"Update Quiz"}),jsx(Button$1,{color:"secondary",onClick:async()=>{const Tt={_id:et,name:st.value,description:at.value,startDate:lt,endDate:pt,duration:ht.value,studentNames:ft,questions:vt},wt=await QuizService.update(Tt);wt.status===202?mt("/admin/quiz"):alert("There is Some error ",JSON.stringify(wt))},variant:"contained",children:"Update"})]}),jsx(Divider$1,{sx:{margin:"10px"}}),jsx("form",{children:jsxs(Stack$1,{spacing:3,children:[jsx(TextBox,{label:"Author",disabled:!0,...it}),jsx(TextBox,{label:"Name",...st}),jsx(TextBox,{label:"Description",...at}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(DateTime,{label:"Start Date",value:lt,setValue:ct}),jsx(DateTime,{label:"End Date",value:pt,setValue:ut}),jsx(TextBox,{label:"Duration (in minutes)",type:"number",fullWidth:!1,...ht})]}),jsx(SelectChip,{label:"Students",names:nt,studentNames:ft,setstudentNames:gt}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{alignItems:"center"},children:[jsx(Typography$1,{children:"Enter Number of Random Questions"}),jsx(TextBox,{label:"Number of Questions",type:"number",fullWidth:!1,...rt}),jsx(Button$1,{variant:"contained",onClick:bt,children:"Submit"})]}),jsx(QuestionAdd,{questions:vt,setQuestions:yt})]})})]})]})})}function EditUser(){const _e=useFormInput(""),et=useFormInput(""),rt=useFormInput(""),nt=useFormInput(""),ot=useFormInput(""),it=useFormInput(""),[st,at]=reactExports.useState(""),lt=useFormInput(""),ct=useFormInput(""),pt=useFormInput(""),ut=useFormInput(""),ht=useFormInput(""),[ft,gt]=reactExports.useState(""),vt=useFormInput(""),yt=useFormInput(""),mt=useFormInput(""),[Et,bt]=reactExports.useState("");return jsx(Fragment,{children:jsxs(AdminLayout,{children:[" ",jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Link$2,{to:"..",children:jsx(Button$1,{color:"error",variant:"contained",children:"Cancel"})}),jsx(Typography$1,{variant:"h6",children:"Update User"}),jsx(Button$1,{color:"secondary",onClick:async()=>{_e.value,et.value},variant:"contained",children:"Update"})]}),jsx(Divider$1,{sx:{margin:"10px"}}),jsx("form",{children:jsxs(Stack$1,{spacing:3,children:[jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(TextBox,{label:"First Name",..._e}),jsx(TextBox,{label:"Last Name",...et})]}),jsx(TextBox,{label:"Email",...rt}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(TextBox,{label:"Mobile",...nt}),jsx(TextBox,{label:"Age",...ot})]}),jsx(TextBox,{label:"Address",multiline:!0,rows:4,...it}),jsxs(FormControl$1,{children:[jsx(FormLabel$1,{id:"demo-row-radio-buttons-group-label",children:"Gender"}),jsxs(RadioGroup$1,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:st,onChange:Tt=>at(Tt.target.value),children:[jsx(FormControlLabel$1,{value:"male",control:jsx(Radio$1,{}),label:"Male"}),jsx(FormControlLabel$1,{value:"female",control:jsx(Radio$1,{}),label:"Female"}),jsx(FormControlLabel$1,{value:"other",control:jsx(Radio$1,{}),label:"Other"})]})]}),jsx(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:jsx(TextBox,{label:"Percentage",...lt,fullWidth:!1})}),jsx(TextBox,{label:"department",...ct}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(TextBox,{label:"College Name",...pt}),jsx(TextBox,{label:"Qualification",...ut})]}),jsxs(FormControl$1,{fullWidth:!0,children:[jsx(InputLabel$1,{id:"demo-simple-select-label",children:"Age"}),jsxs(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Age",...ht,children:[jsx(MenuItem$1,{value:10,children:"Ten"}),jsx(MenuItem$1,{value:20,children:"Twenty"}),jsx(MenuItem$1,{value:30,children:"Thirty"})]})]}),jsx(TextBox,{label:"Familiar Technologies",multiline:!0,rows:4,...vt}),jsxs(FormControl$1,{children:[jsx(FormLabel$1,{id:"demo-row-radio-buttons-group-label",children:"Applicant Type"}),jsxs(RadioGroup$1,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:ft,onChange:Tt=>gt(Tt.target.value),children:[jsx(FormControlLabel$1,{value:"fresher",control:jsx(Radio$1,{}),label:"Fresher"}),jsx(FormControlLabel$1,{value:"experience",control:jsx(Radio$1,{}),label:"Experience"})]})]}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(TextBox,{label:"Year Of Experince",...yt}),jsx(TextBox,{label:"Past Experince Technologies",multiline:!0,rows:4,...mt})]}),jsxs(Button$1,{variant:"contained",component:"label",children:["Upload Resume",jsx("input",{type:"file",value:Et,onChange:Tt=>bt(Tt.target.value),hidden:!0})]}),jsx(Typography$1,{children:Et})]})})]})]})})}function Settings(){const _e=useNavigate(),[et,rt]=reactExports.useState(!1),[nt,ot]=reactExports.useState(!1),[it,st]=reactExports.useState({}),at=useFormInput(""),lt=useFormInput(""),ct=useFormInput(""),pt=useFormInput(""),ut=async()=>{const vt=(await UserService.find({email:auth$1.email})).data[0];st(vt),at.onChange(vt.username),lt.onChange(vt.firstName),ct.onChange(vt.lastName),pt.onChange(vt.email)};reactExports.useEffect(()=>{ut()},[]);const ht=async()=>{const gt=await UserService.delete({username:auth$1.name});auth$1.logout(),gt.status===202?_e("/"):alert("User Delte Err: ",JSON.stringify(gt))},ft=async()=>{const gt={...it,username:at.value,firstName:lt.value,lastName:ct.value,email:pt.value};(await UserService.update(gt)).status===202?ot(!1):alert("There is Some Error!")};return jsxs(Fragment,{children:[jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$1,{}),jsx(Typography$1,{variant:"h6",children:"Edit Profile"}),jsx(Box$1,{})]}),jsx(Divider$1,{sx:{margin:"10px"}}),jsx("form",{children:jsxs(Stack$1,{spacing:3,children:[jsx(TextBox,{label:"Username",...at}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{alignItems:"center"},children:[jsx(TextBox,{label:"First Name",...lt}),jsx(TextBox,{label:"Last Name",...ct})]}),jsx(TextBox,{label:"Email",...pt}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{alignItems:"center"},children:[jsx(Button$1,{variant:"contained",onClick:()=>rt(!0),color:"error",children:"Delete Account"}),jsx(Button$1,{variant:"contained",onClick:()=>ot(!0),color:"secondary",children:"Save Changes"})]})]})})]}),jsx(AlertDialogBox,{open:et,setOpen:rt,handleSuccess:ht,title:"Are you sure you want to delte account",data:"After You delete your account all the quiz you created will be delted permanatntly are you really sure about that?"}),jsx(AlertDialogBox,{open:nt,setOpen:ot,handleSuccess:ft,title:"Are you sure you want to save changes",data:"Once You agree Changes will be done permanantly Are you Sure ?"})]})}function ViewPhase(){const[_e,et]=reactExports.useState([]),[rt,nt]=reactExports.useState({open:!1,message:"",type:"success"}),ot=[{field:"_id",headerName:"Id",width:50},{field:"name",headerName:"Name",width:100},{field:"phase",headerName:"Phase",width:100,renderCell:at=>{const lt=at.row;return jsx(Typography$1,{children:quizPhase.map(ct=>ct.value===lt.phase&&ct.title)})}},{field:"actions",headerName:"Actions",sortable:!1,width:150,renderCell:at=>{const lt=at.row;return jsx(Fragment,{children:jsx(IconButton$1,{component:Link$2,to:"edit",state:{id:lt._id},color:"primary",children:jsx(default_1$6,{})})})}}],it=["_id"],st=async()=>{const at=await QuizService.get();et(at.data)};return reactExports.useEffect(()=>{st()},[rt]),jsxs(Fragment,{children:[jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$1,{}),jsx(Typography$1,{variant:"h6",children:"Change Phase"}),jsx(Box$1,{})]}),jsx(Divider$1,{sx:{margin:"10px 0 20px"}}),jsx(Box$1,{textAlign:"center",children:jsx(BasicTable,{rows:_e,columns:ot,hideColumns:it})})]}),jsx(SnackbarDisplay,{snackbarData:rt,setSnackbarData:nt})]})}function EditPhase(){const _e=useLocation(),{id:et}=_e.state,rt=useFormInput(""),[nt,ot]=reactExports.useState(""),it=useNavigate();return reactExports.useEffect(()=>{(async()=>{const lt=await QuizService.getById(et);rt.onChange(lt.data.name),ot(lt.data.phase)})()},[]),jsx(Fragment,{children:jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Link$2,{to:"..",children:jsx(Button$1,{color:"error",variant:"contained",children:"Cancel"})}),jsx(Typography$1,{variant:"h6",children:"Update Quiz"}),jsx(Button$1,{color:"secondary",onClick:async()=>{const at={_id:et,name:rt.value,phase:nt},lt=await QuizService.update(at);lt.status===202?it("/admin/phase"):alert("There is Some error ",JSON.stringify(lt.data))},variant:"contained",children:"Update"})]}),jsx(Divider$1,{sx:{margin:"10px"}}),jsx("form",{children:jsxs(Stack$3,{spacing:3,children:[jsx(TextBox,{label:"Name",disabled:!0,...rt}),jsxs(FormControl$1,{fullWidth:!0,children:[jsx(InputLabel$1,{id:"demo-simple-select-label",children:"Phase"}),jsx(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:nt,label:"Phase",onChange:at=>ot(at.target.value),children:quizPhase.map(at=>jsx(MenuItem$1,{value:at.value,children:at.title},at.value))})]})]})})]})})}function ViewResult(){const[_e,et]=reactExports.useState([]),[rt,nt]=reactExports.useState([]),ot=useFormInput(""),[it,st]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{const ht=(await QuizResultService.get()).data.map(ft=>ft.QuizId);nt(ht),ot.onChange(ht[0]._id)})()},[]);const at=async()=>{if(ot.value!==""){const pt=await QuizResultService.getById(ot.value);et(pt.data.students),st(pt.data.totalMarks)}},lt=[{field:"_id",headerName:"Id",width:50},{field:"username",headerName:"Username",width:150,renderCell:pt=>pt.row.user.username},{field:"name",headerName:"Name",width:150,renderCell:pt=>{const ut=pt.row;return jsx(Typography$1,{children:ut.user.firstName+" "+ut.user.lastName})}},{field:"obtainedMarks",headerName:"Obtained Marks",width:200},{field:"totalMarks",headerName:"Total Marks",width:150,renderCell:pt=>pt.row.answerKey.length}],ct=["_id"];return jsxs(Box$1,{children:[jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsx(Box$1,{}),jsx(Typography$1,{variant:"h6",children:"Results"}),jsx(Box$1,{})]}),jsx(Divider$1,{sx:{margin:"10px 0 20px"}}),jsxs(Grid$1,{container:!0,alignItems:"center",spacing:2,children:[jsx(Grid$1,{item:!0,xs:6,children:jsxs(FormControl$1,{fullWidth:!0,children:[jsx(InputLabel$1,{id:"demo-simple-select-label",children:"Quiz"}),jsx(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Quiz",...ot,children:rt.map(pt=>jsx(MenuItem$1,{value:pt._id,children:pt.name},pt._id))})]})}),jsx(Grid$1,{item:!0,xs:6,children:jsx(Button$1,{variant:"contained",onClick:at,children:"Get Student"})})]}),jsx(Box$1,{textAlign:"center",children:ot.value!==""&&jsx(BasicTable,{rows:_e,columns:lt,hideColumns:ct})})]})}const AdminRoutes=jsxs(Route,{path:"/admin",children:[jsx(Route,{element:jsx(PageNotFound,{}),index:!0}),jsxs(Route,{element:jsx(AdminLayout,{}),children:[jsx(Route,{path:"dashboard",element:jsx(Dashboard,{})}),jsxs(Route,{path:"user",children:[jsx(Route,{index:!0,element:jsx(ViewUser,{})}),jsx(Route,{path:"edit",element:jsx(EditUser,{})})]}),jsxs(Route,{path:"quiz",children:[jsx(Route,{index:!0,element:jsx(Quiz,{})}),jsx(Route,{path:"add",element:jsx(AddQuiz,{})}),jsx(Route,{path:"edit",element:jsx(EditQuiz,{})})]}),jsxs(Route,{path:"stream",children:[jsx(Route,{index:!0,element:jsx(Stream,{})}),jsx(Route,{path:"view",element:jsx(ViewStream,{})})]}),jsxs(Route,{path:"phase",children:[jsx(Route,{index:!0,element:jsx(ViewPhase,{})}),jsx(Route,{path:"edit",element:jsx(EditPhase,{})})]}),jsx(Route,{path:"result",children:jsx(Route,{index:!0,element:jsx(ViewResult,{})})}),jsx(Route,{path:"settings",children:jsx(Route,{index:!0,element:jsx(Settings,{})})})]})]},"Admin"),side="/assets/side-57d38b00.jpg";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(_e,et){if(!_e)throw assertionError(et)},assertionError=function(_e){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+_e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(_e){const et=[];let rt=0;for(let nt=0;nt<_e.length;nt++){let ot=_e.charCodeAt(nt);ot<128?et[rt++]=ot:ot<2048?(et[rt++]=ot>>6|192,et[rt++]=ot&63|128):(ot&64512)===55296&&nt+1<_e.length&&(_e.charCodeAt(nt+1)&64512)===56320?(ot=65536+((ot&1023)<<10)+(_e.charCodeAt(++nt)&1023),et[rt++]=ot>>18|240,et[rt++]=ot>>12&63|128,et[rt++]=ot>>6&63|128,et[rt++]=ot&63|128):(et[rt++]=ot>>12|224,et[rt++]=ot>>6&63|128,et[rt++]=ot&63|128)}return et},byteArrayToString=function(_e){const et=[];let rt=0,nt=0;for(;rt<_e.length;){const ot=_e[rt++];if(ot<128)et[nt++]=String.fromCharCode(ot);else if(ot>191&&ot<224){const it=_e[rt++];et[nt++]=String.fromCharCode((ot&31)<<6|it&63)}else if(ot>239&&ot<365){const it=_e[rt++],st=_e[rt++],at=_e[rt++],lt=((ot&7)<<18|(it&63)<<12|(st&63)<<6|at&63)-65536;et[nt++]=String.fromCharCode(55296+(lt>>10)),et[nt++]=String.fromCharCode(56320+(lt&1023))}else{const it=_e[rt++],st=_e[rt++];et[nt++]=String.fromCharCode((ot&15)<<12|(it&63)<<6|st&63)}}return et.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(_e,et){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const rt=et?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let ot=0;ot<_e.length;ot+=3){const it=_e[ot],st=ot+1<_e.length,at=st?_e[ot+1]:0,lt=ot+2<_e.length,ct=lt?_e[ot+2]:0,pt=it>>2,ut=(it&3)<<4|at>>4;let ht=(at&15)<<2|ct>>6,ft=ct&63;lt||(ft=64,st||(ht=64)),nt.push(rt[pt],rt[ut],rt[ht],rt[ft])}return nt.join("")},encodeString(_e,et){return this.HAS_NATIVE_SUPPORT&&!et?btoa(_e):this.encodeByteArray(stringToByteArray$1(_e),et)},decodeString(_e,et){return this.HAS_NATIVE_SUPPORT&&!et?atob(_e):byteArrayToString(this.decodeStringToByteArray(_e,et))},decodeStringToByteArray(_e,et){this.init_();const rt=et?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let ot=0;ot<_e.length;){const it=rt[_e.charAt(ot++)],at=ot<_e.length?rt[_e.charAt(ot)]:0;++ot;const ct=ot<_e.length?rt[_e.charAt(ot)]:64;++ot;const ut=ot<_e.length?rt[_e.charAt(ot)]:64;if(++ot,it==null||at==null||ct==null||ut==null)throw new DecodeBase64StringError;const ht=it<<2|at>>4;if(nt.push(ht),ct!==64){const ft=at<<4&240|ct>>2;if(nt.push(ft),ut!==64){const gt=ct<<6&192|ut;nt.push(gt)}}}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(_e){const et=stringToByteArray$1(_e);return base64.encodeByteArray(et,!0)},base64urlEncodeWithoutPadding=function(_e){return base64Encode(_e).replace(/\./g,"")},base64Decode=function(_e){try{return base64.decodeString(_e,!0)}catch(et){console.error("base64Decode failed: ",et)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(_e){return deepExtend(void 0,_e)}function deepExtend(_e,et){if(!(et instanceof Object))return et;switch(et.constructor){case Date:const rt=et;return new Date(rt.getTime());case Object:_e===void 0&&(_e={});break;case Array:_e=[];break;default:return et}for(const rt in et)!et.hasOwnProperty(rt)||!isValidKey$1(rt)||(_e[rt]=deepExtend(_e[rt],et[rt]));return _e}function isValidKey$1(_e){return _e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof process.env>"u")return;const _e={}.__FIREBASE_DEFAULTS__;if(_e)return JSON.parse(_e)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let _e;try{_e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const et=_e&&base64Decode(_e[1]);return et&&JSON.parse(et)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(_e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_e}`);return}},getDefaultEmulatorHost=_e=>{var et,rt;return(rt=(et=getDefaults())===null||et===void 0?void 0:et.emulatorHosts)===null||rt===void 0?void 0:rt[_e]},getDefaultEmulatorHostnameAndPort=_e=>{const et=getDefaultEmulatorHost(_e);if(!et)return;const rt=et.lastIndexOf(":");if(rt<=0||rt+1===et.length)throw new Error(`Invalid host ${et} with no separate hostname and port!`);const nt=parseInt(et.substring(rt+1),10);return et[0]==="["?[et.substring(1,rt-1),nt]:[et.substring(0,rt),nt]},getDefaultAppConfig=()=>{var _e;return(_e=getDefaults())===null||_e===void 0?void 0:_e.config},getExperimentalSetting=_e=>{var et;return(et=getDefaults())===null||et===void 0?void 0:et[`_${_e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((et,rt)=>{this.resolve=et,this.reject=rt})}wrapCallback(et){return(rt,nt)=>{rt?this.reject(rt):this.resolve(nt),typeof et=="function"&&(this.promise.catch(()=>{}),et.length===1?et(rt):et(rt,nt))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(_e,et){if(_e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rt={alg:"none",type:"JWT"},nt=et||"demo-project",ot=_e.iat||0,it=_e.sub||_e.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${nt}`,aud:nt,iat:ot,exp:ot+3600,auth_time:ot,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},_e),at="";return[base64urlEncodeWithoutPadding(JSON.stringify(rt)),base64urlEncodeWithoutPadding(JSON.stringify(st)),at].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const _e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof _e=="object"&&_e.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const _e=getUA();return _e.indexOf("MSIE ")>=0||_e.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((_e,et)=>{try{let rt=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",ot=self.indexedDB.open(nt);ot.onsuccess=()=>{ot.result.close(),rt||self.indexedDB.deleteDatabase(nt),_e(!0)},ot.onupgradeneeded=()=>{rt=!1},ot.onerror=()=>{var it;et(((it=ot.error)===null||it===void 0?void 0:it.message)||"")}}catch(rt){et(rt)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(et,rt,nt){super(rt),this.code=et,this.customData=nt,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(et,rt,nt){this.service=et,this.serviceName=rt,this.errors=nt}create(et,...rt){const nt=rt[0]||{},ot=`${this.service}/${et}`,it=this.errors[et],st=it?replaceTemplate(it,nt):"Error",at=`${this.serviceName}: ${st} (${ot}).`;return new FirebaseError(ot,at,nt)}}function replaceTemplate(_e,et){return _e.replace(PATTERN,(rt,nt)=>{const ot=et[nt];return ot!=null?String(ot):`<${nt}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(_e){return JSON.parse(_e)}function stringify(_e){return JSON.stringify(_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode=function(_e){let et={},rt={},nt={},ot="";try{const it=_e.split(".");et=jsonEval(base64Decode(it[0])||""),rt=jsonEval(base64Decode(it[1])||""),ot=it[2],nt=rt.d||{},delete rt.d}catch{}return{header:et,claims:rt,data:nt,signature:ot}},isValidFormat=function(_e){const et=decode(_e),rt=et.claims;return!!rt&&typeof rt=="object"&&rt.hasOwnProperty("iat")},isAdmin=function(_e){const et=decode(_e).claims;return typeof et=="object"&&et.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains(_e,et){return Object.prototype.hasOwnProperty.call(_e,et)}function safeGet(_e,et){if(Object.prototype.hasOwnProperty.call(_e,et))return _e[et]}function isEmpty(_e){for(const et in _e)if(Object.prototype.hasOwnProperty.call(_e,et))return!1;return!0}function map(_e,et,rt){const nt={};for(const ot in _e)Object.prototype.hasOwnProperty.call(_e,ot)&&(nt[ot]=et.call(rt,_e[ot],ot,_e));return nt}function deepEqual(_e,et){if(_e===et)return!0;const rt=Object.keys(_e),nt=Object.keys(et);for(const ot of rt){if(!nt.includes(ot))return!1;const it=_e[ot],st=et[ot];if(isObject(it)&&isObject(st)){if(!deepEqual(it,st))return!1}else if(it!==st)return!1}for(const ot of nt)if(!rt.includes(ot))return!1;return!0}function isObject(_e){return _e!==null&&typeof _e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(_e){const et=[];for(const[rt,nt]of Object.entries(_e))Array.isArray(nt)?nt.forEach(ot=>{et.push(encodeURIComponent(rt)+"="+encodeURIComponent(ot))}):et.push(encodeURIComponent(rt)+"="+encodeURIComponent(nt));return et.length?"&"+et.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let et=1;et<this.blockSize;++et)this.pad_[et]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(et,rt){rt||(rt=0);const nt=this.W_;if(typeof et=="string")for(let ut=0;ut<16;ut++)nt[ut]=et.charCodeAt(rt)<<24|et.charCodeAt(rt+1)<<16|et.charCodeAt(rt+2)<<8|et.charCodeAt(rt+3),rt+=4;else for(let ut=0;ut<16;ut++)nt[ut]=et[rt]<<24|et[rt+1]<<16|et[rt+2]<<8|et[rt+3],rt+=4;for(let ut=16;ut<80;ut++){const ht=nt[ut-3]^nt[ut-8]^nt[ut-14]^nt[ut-16];nt[ut]=(ht<<1|ht>>>31)&4294967295}let ot=this.chain_[0],it=this.chain_[1],st=this.chain_[2],at=this.chain_[3],lt=this.chain_[4],ct,pt;for(let ut=0;ut<80;ut++){ut<40?ut<20?(ct=at^it&(st^at),pt=1518500249):(ct=it^st^at,pt=1859775393):ut<60?(ct=it&st|at&(it|st),pt=2400959708):(ct=it^st^at,pt=3395469782);const ht=(ot<<5|ot>>>27)+ct+lt+pt+nt[ut]&4294967295;lt=at,at=st,st=(it<<30|it>>>2)&4294967295,it=ot,ot=ht}this.chain_[0]=this.chain_[0]+ot&4294967295,this.chain_[1]=this.chain_[1]+it&4294967295,this.chain_[2]=this.chain_[2]+st&4294967295,this.chain_[3]=this.chain_[3]+at&4294967295,this.chain_[4]=this.chain_[4]+lt&4294967295}update(et,rt){if(et==null)return;rt===void 0&&(rt=et.length);const nt=rt-this.blockSize;let ot=0;const it=this.buf_;let st=this.inbuf_;for(;ot<rt;){if(st===0)for(;ot<=nt;)this.compress_(et,ot),ot+=this.blockSize;if(typeof et=="string"){for(;ot<rt;)if(it[st]=et.charCodeAt(ot),++st,++ot,st===this.blockSize){this.compress_(it),st=0;break}}else for(;ot<rt;)if(it[st]=et[ot],++st,++ot,st===this.blockSize){this.compress_(it),st=0;break}}this.inbuf_=st,this.total_+=rt}digest(){const et=[];let rt=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let ot=this.blockSize-1;ot>=56;ot--)this.buf_[ot]=rt&255,rt/=256;this.compress_(this.buf_);let nt=0;for(let ot=0;ot<5;ot++)for(let it=24;it>=0;it-=8)et[nt]=this.chain_[ot]>>it&255,++nt;return et}}function createSubscribe(_e,et){const rt=new ObserverProxy(_e,et);return rt.subscribe.bind(rt)}class ObserverProxy{constructor(et,rt){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=rt,this.task.then(()=>{et(this)}).catch(nt=>{this.error(nt)})}next(et){this.forEachObserver(rt=>{rt.next(et)})}error(et){this.forEachObserver(rt=>{rt.error(et)}),this.close(et)}complete(){this.forEachObserver(et=>{et.complete()}),this.close()}subscribe(et,rt,nt){let ot;if(et===void 0&&rt===void 0&&nt===void 0)throw new Error("Missing Observer.");implementsAnyMethods(et,["next","error","complete"])?ot=et:ot={next:et,error:rt,complete:nt},ot.next===void 0&&(ot.next=noop),ot.error===void 0&&(ot.error=noop),ot.complete===void 0&&(ot.complete=noop);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ot.error(this.finalError):ot.complete()}catch{}}),this.observers.push(ot),it}unsubscribeOne(et){this.observers===void 0||this.observers[et]===void 0||(delete this.observers[et],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(et){if(!this.finalized)for(let rt=0;rt<this.observers.length;rt++)this.sendOne(rt,et)}sendOne(et,rt){this.task.then(()=>{if(this.observers!==void 0&&this.observers[et]!==void 0)try{rt(this.observers[et])}catch(nt){typeof console<"u"&&console.error&&console.error(nt)}})}close(et){this.finalized||(this.finalized=!0,et!==void 0&&(this.finalError=et),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(_e,et){if(typeof _e!="object"||_e===null)return!1;for(const rt of et)if(rt in _e&&typeof _e[rt]=="function")return!0;return!1}function noop(){}function errorPrefix(_e,et){return`${_e} failed: ${et} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(_e){const et=[];let rt=0;for(let nt=0;nt<_e.length;nt++){let ot=_e.charCodeAt(nt);if(ot>=55296&&ot<=56319){const it=ot-55296;nt++,assert(nt<_e.length,"Surrogate pair missing trail surrogate.");const st=_e.charCodeAt(nt)-56320;ot=65536+(it<<10)+st}ot<128?et[rt++]=ot:ot<2048?(et[rt++]=ot>>6|192,et[rt++]=ot&63|128):ot<65536?(et[rt++]=ot>>12|224,et[rt++]=ot>>6&63|128,et[rt++]=ot&63|128):(et[rt++]=ot>>18|240,et[rt++]=ot>>12&63|128,et[rt++]=ot>>6&63|128,et[rt++]=ot&63|128)}return et},stringLength=function(_e){let et=0;for(let rt=0;rt<_e.length;rt++){const nt=_e.charCodeAt(rt);nt<128?et++:nt<2048?et+=2:nt>=55296&&nt<=56319?(et+=4,rt++):et+=3}return et};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(_e){return _e&&_e._delegate?_e._delegate:_e}class Component{constructor(et,rt,nt){this.name=et,this.instanceFactory=rt,this.type=nt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(et){return this.instantiationMode=et,this}setMultipleInstances(et){return this.multipleInstances=et,this}setServiceProps(et){return this.serviceProps=et,this}setInstanceCreatedCallback(et){return this.onInstanceCreated=et,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(et,rt){this.name=et,this.container=rt,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(et){const rt=this.normalizeInstanceIdentifier(et);if(!this.instancesDeferred.has(rt)){const nt=new Deferred;if(this.instancesDeferred.set(rt,nt),this.isInitialized(rt)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:rt});ot&&nt.resolve(ot)}catch{}}return this.instancesDeferred.get(rt).promise}getImmediate(et){var rt;const nt=this.normalizeInstanceIdentifier(et==null?void 0:et.identifier),ot=(rt=et==null?void 0:et.optional)!==null&&rt!==void 0?rt:!1;if(this.isInitialized(nt)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:nt})}catch(it){if(ot)return null;throw it}else{if(ot)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(et){if(et.name!==this.name)throw Error(`Mismatching Component ${et.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=et,!!this.shouldAutoInitialize()){if(isComponentEager(et))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[rt,nt]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(rt);try{const it=this.getOrInitializeService({instanceIdentifier:ot});nt.resolve(it)}catch{}}}}clearInstance(et=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(et),this.instancesOptions.delete(et),this.instances.delete(et)}async delete(){const et=Array.from(this.instances.values());await Promise.all([...et.filter(rt=>"INTERNAL"in rt).map(rt=>rt.INTERNAL.delete()),...et.filter(rt=>"_delete"in rt).map(rt=>rt._delete())])}isComponentSet(){return this.component!=null}isInitialized(et=DEFAULT_ENTRY_NAME$1){return this.instances.has(et)}getOptions(et=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(et)||{}}initialize(et={}){const{options:rt={}}=et,nt=this.normalizeInstanceIdentifier(et.instanceIdentifier);if(this.isInitialized(nt))throw Error(`${this.name}(${nt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:nt,options:rt});for(const[it,st]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(it);nt===at&&st.resolve(ot)}return ot}onInit(et,rt){var nt;const ot=this.normalizeInstanceIdentifier(rt),it=(nt=this.onInitCallbacks.get(ot))!==null&&nt!==void 0?nt:new Set;it.add(et),this.onInitCallbacks.set(ot,it);const st=this.instances.get(ot);return st&&et(st,ot),()=>{it.delete(et)}}invokeOnInitCallbacks(et,rt){const nt=this.onInitCallbacks.get(rt);if(nt)for(const ot of nt)try{ot(et,rt)}catch{}}getOrInitializeService({instanceIdentifier:et,options:rt={}}){let nt=this.instances.get(et);if(!nt&&this.component&&(nt=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(et),options:rt}),this.instances.set(et,nt),this.instancesOptions.set(et,rt),this.invokeOnInitCallbacks(nt,et),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,et,nt)}catch{}return nt||null}normalizeInstanceIdentifier(et=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?et:DEFAULT_ENTRY_NAME$1:et}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(_e){return _e===DEFAULT_ENTRY_NAME$1?void 0:_e}function isComponentEager(_e){return _e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(et){this.name=et,this.providers=new Map}addComponent(et){const rt=this.getProvider(et.name);if(rt.isComponentSet())throw new Error(`Component ${et.name} has already been registered with ${this.name}`);rt.setComponent(et)}addOrOverwriteComponent(et){this.getProvider(et.name).isComponentSet()&&this.providers.delete(et.name),this.addComponent(et)}getProvider(et){if(this.providers.has(et))return this.providers.get(et);const rt=new Provider$1(et,this);return this.providers.set(et,rt),rt}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(_e){_e[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(_e,et,...rt)=>{if(et<_e.logLevel)return;const nt=new Date().toISOString(),ot=ConsoleMethod[et];if(ot)console[ot](`[${nt}]  ${_e.name}:`,...rt);else throw new Error(`Attempted to log a message with an invalid logType (value: ${et})`)};class Logger{constructor(et){this.name=et,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(et){if(!(et in LogLevel))throw new TypeError(`Invalid value "${et}" assigned to \`logLevel\``);this._logLevel=et}setLogLevel(et){this._logLevel=typeof et=="string"?levelStringToEnum[et]:et}get logHandler(){return this._logHandler}set logHandler(et){if(typeof et!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=et}get userLogHandler(){return this._userLogHandler}set userLogHandler(et){this._userLogHandler=et}debug(...et){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...et),this._logHandler(this,LogLevel.DEBUG,...et)}log(...et){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...et),this._logHandler(this,LogLevel.VERBOSE,...et)}info(...et){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...et),this._logHandler(this,LogLevel.INFO,...et)}warn(...et){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...et),this._logHandler(this,LogLevel.WARN,...et)}error(...et){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...et),this._logHandler(this,LogLevel.ERROR,...et)}}const instanceOfAny=(_e,et)=>et.some(rt=>_e instanceof rt);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(_e){const et=new Promise((rt,nt)=>{const ot=()=>{_e.removeEventListener("success",it),_e.removeEventListener("error",st)},it=()=>{rt(wrap(_e.result)),ot()},st=()=>{nt(_e.error),ot()};_e.addEventListener("success",it),_e.addEventListener("error",st)});return et.then(rt=>{rt instanceof IDBCursor&&cursorRequestMap.set(rt,_e)}).catch(()=>{}),reverseTransformCache.set(et,_e),et}function cacheDonePromiseForTransaction(_e){if(transactionDoneMap.has(_e))return;const et=new Promise((rt,nt)=>{const ot=()=>{_e.removeEventListener("complete",it),_e.removeEventListener("error",st),_e.removeEventListener("abort",st)},it=()=>{rt(),ot()},st=()=>{nt(_e.error||new DOMException("AbortError","AbortError")),ot()};_e.addEventListener("complete",it),_e.addEventListener("error",st),_e.addEventListener("abort",st)});transactionDoneMap.set(_e,et)}let idbProxyTraps={get(_e,et,rt){if(_e instanceof IDBTransaction){if(et==="done")return transactionDoneMap.get(_e);if(et==="objectStoreNames")return _e.objectStoreNames||transactionStoreNamesMap.get(_e);if(et==="store")return rt.objectStoreNames[1]?void 0:rt.objectStore(rt.objectStoreNames[0])}return wrap(_e[et])},set(_e,et,rt){return _e[et]=rt,!0},has(_e,et){return _e instanceof IDBTransaction&&(et==="done"||et==="store")?!0:et in _e}};function replaceTraps(_e){idbProxyTraps=_e(idbProxyTraps)}function wrapFunction(_e){return _e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(et,...rt){const nt=_e.call(unwrap(this),et,...rt);return transactionStoreNamesMap.set(nt,et.sort?et.sort():[et]),wrap(nt)}:getCursorAdvanceMethods().includes(_e)?function(...et){return _e.apply(unwrap(this),et),wrap(cursorRequestMap.get(this))}:function(...et){return wrap(_e.apply(unwrap(this),et))}}function transformCachableValue(_e){return typeof _e=="function"?wrapFunction(_e):(_e instanceof IDBTransaction&&cacheDonePromiseForTransaction(_e),instanceOfAny(_e,getIdbProxyableTypes())?new Proxy(_e,idbProxyTraps):_e)}function wrap(_e){if(_e instanceof IDBRequest)return promisifyRequest(_e);if(transformCache.has(_e))return transformCache.get(_e);const et=transformCachableValue(_e);return et!==_e&&(transformCache.set(_e,et),reverseTransformCache.set(et,_e)),et}const unwrap=_e=>reverseTransformCache.get(_e);function openDB(_e,et,{blocked:rt,upgrade:nt,blocking:ot,terminated:it}={}){const st=indexedDB.open(_e,et),at=wrap(st);return nt&&st.addEventListener("upgradeneeded",lt=>{nt(wrap(st.result),lt.oldVersion,lt.newVersion,wrap(st.transaction),lt)}),rt&&st.addEventListener("blocked",lt=>rt(lt.oldVersion,lt.newVersion,lt)),at.then(lt=>{it&&lt.addEventListener("close",()=>it()),ot&&lt.addEventListener("versionchange",ct=>ot(ct.oldVersion,ct.newVersion,ct))}).catch(()=>{}),at}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(_e,et){if(!(_e instanceof IDBDatabase&&!(et in _e)&&typeof et=="string"))return;if(cachedMethods.get(et))return cachedMethods.get(et);const rt=et.replace(/FromIndex$/,""),nt=et!==rt,ot=writeMethods.includes(rt);if(!(rt in(nt?IDBIndex:IDBObjectStore).prototype)||!(ot||readMethods.includes(rt)))return;const it=async function(st,...at){const lt=this.transaction(st,ot?"readwrite":"readonly");let ct=lt.store;return nt&&(ct=ct.index(at.shift())),(await Promise.all([ct[rt](...at),ot&&lt.done]))[0]};return cachedMethods.set(et,it),it}replaceTraps(_e=>({..._e,get:(et,rt,nt)=>getMethod(et,rt)||_e.get(et,rt,nt),has:(et,rt)=>!!getMethod(et,rt)||_e.has(et,rt)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(isVersionServiceProvider(rt)){const nt=rt.getImmediate();return`${nt.library}/${nt.version}`}else return null}).filter(rt=>rt).join(" ")}}function isVersionServiceProvider(_e){const et=_e.getComponent();return(et==null?void 0:et.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3$1="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$3="9.22.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3$1]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(_e,et){try{_e.container.addComponent(et)}catch(rt){logger$1.debug(`Component ${et.name} failed to register with FirebaseApp ${_e.name}`,rt)}}function _registerComponent(_e){const et=_e.name;if(_components.has(et))return logger$1.debug(`There were multiple attempts to register component ${et}.`),!1;_components.set(et,_e);for(const rt of _apps.values())_addComponent(rt,_e);return!0}function _getProvider(_e,et){const rt=_e.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),_e.container.getProvider(et)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(et,rt,nt){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$3;function initializeApp(_e,et={}){let rt=_e;typeof et!="object"&&(et={name:et});const nt=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},et),ot=nt.name;if(typeof ot!="string"||!ot)throw ERROR_FACTORY.create("bad-app-name",{appName:String(ot)});if(rt||(rt=getDefaultAppConfig()),!rt)throw ERROR_FACTORY.create("no-options");const it=_apps.get(ot);if(it){if(deepEqual(rt,it.options)&&deepEqual(nt,it.config))return it;throw ERROR_FACTORY.create("duplicate-app",{appName:ot})}const st=new ComponentContainer(ot);for(const lt of _components.values())st.addComponent(lt);const at=new FirebaseAppImpl(rt,nt,st);return _apps.set(ot,at),at}function getApp(_e=DEFAULT_ENTRY_NAME){const et=_apps.get(_e);if(!et&&_e===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!et)throw ERROR_FACTORY.create("no-app",{appName:_e});return et}function registerVersion(_e,et,rt){var nt;let ot=(nt=PLATFORM_LOG_STRING[_e])!==null&&nt!==void 0?nt:_e;rt&&(ot+=`-${rt}`);const it=ot.match(/\s|\//),st=et.match(/\s|\//);if(it||st){const at=[`Unable to register library "${ot}" with version "${et}":`];it&&at.push(`library name "${ot}" contains illegal characters (whitespace or "/")`),it&&st&&at.push("and"),st&&at.push(`version name "${et}" contains illegal characters (whitespace or "/")`),logger$1.warn(at.join(" "));return}_registerComponent(new Component(`${ot}-version`,()=>({library:ot,version:et}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(_e,et)=>{switch(et){case 0:_e.createObjectStore(STORE_NAME)}}}).catch(_e=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:_e.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(_e){try{return await(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(_e))}catch(et){if(et instanceof FirebaseError)logger$1.warn(et.message);else{const rt=ERROR_FACTORY.create("idb-get",{originalErrorMessage:et==null?void 0:et.message});logger$1.warn(rt.message)}}}async function writeHeartbeatsToIndexedDB(_e,et){try{const nt=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await nt.objectStore(STORE_NAME).put(et,computeKey(_e)),await nt.done}catch(rt){if(rt instanceof FirebaseError)logger$1.warn(rt.message);else{const nt=ERROR_FACTORY.create("idb-set",{originalErrorMessage:rt==null?void 0:rt.message});logger$1.warn(nt.message)}}}function computeKey(_e){return`${_e.name}!${_e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(et){this.container=et,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(rt),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}async triggerHeartbeat(){const rt=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nt=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===nt||this._heartbeatsCache.heartbeats.some(ot=>ot.date===nt)))return this._heartbeatsCache.heartbeats.push({date:nt,agent:rt}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(ot=>{const it=new Date(ot.date).valueOf();return Date.now()-it<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const et=getUTCDateString(),{heartbeatsToSend:rt,unsentEntries:nt}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),ot=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:rt}));return this._heartbeatsCache.lastSentHeartbeatDate=et,nt.length>0?(this._heartbeatsCache.heartbeats=nt,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),ot}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(_e,et=MAX_HEADER_BYTES){const rt=[];let nt=_e.slice();for(const ot of _e){const it=rt.find(st=>st.agent===ot.agent);if(it){if(it.dates.push(ot.date),countBytes(rt)>et){it.dates.pop();break}}else if(rt.push({agent:ot.agent,dates:[ot.date]}),countBytes(rt)>et){rt.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:nt}}class HeartbeatStorageImpl{constructor(et){this.app=et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(et){var rt;if(await this._canUseIndexedDBPromise){const ot=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(rt=et.lastSentHeartbeatDate)!==null&&rt!==void 0?rt:ot.lastSentHeartbeatDate,heartbeats:et.heartbeats})}else return}async add(et){var rt;if(await this._canUseIndexedDBPromise){const ot=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(rt=et.lastSentHeartbeatDate)!==null&&rt!==void 0?rt:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...et.heartbeats]})}else return}}function countBytes(_e){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:_e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(_e){_registerComponent(new Component("platform-logger",et=>new PlatformLoggerServiceImpl(et),"PRIVATE")),_registerComponent(new Component("heartbeat",et=>new HeartbeatServiceImpl(et),"PRIVATE")),registerVersion(name$o,version$1$1,_e),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var name$3="firebase",version$2="9.22.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$2,"app");function __rest(_e,et){var rt={};for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&et.indexOf(nt)<0&&(rt[nt]=_e[nt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ot=0,nt=Object.getOwnPropertySymbols(_e);ot<nt.length;ot++)et.indexOf(nt[ot])<0&&Object.prototype.propertyIsEnumerable.call(_e,nt[ot])&&(rt[nt[ot]]=_e[nt[ot]]);return rt}function _prodErrorMap(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logWarn(_e,...et){logClient$1.logLevel<=LogLevel.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${_e}`,...et)}function _logError(_e,...et){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${_e}`,...et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(_e,...et){throw createErrorInternal(_e,...et)}function _createError(_e,...et){return createErrorInternal(_e,...et)}function _errorWithCustomMessage(_e,et,rt){const nt=Object.assign(Object.assign({},prodErrorMap()),{[et]:rt});return new ErrorFactory("auth","Firebase",nt).create(et,{appName:_e.name})}function createErrorInternal(_e,...et){if(typeof _e!="string"){const rt=et[0],nt=[...et.slice(1)];return nt[0]&&(nt[0].appName=_e.name),_e._errorFactory.create(rt,...nt)}return _DEFAULT_AUTH_ERROR_FACTORY.create(_e,...et)}function _assert(_e,et,...rt){if(!_e)throw createErrorInternal(et,...rt)}function debugFail(_e){const et="INTERNAL ASSERTION FAILED: "+_e;throw _logError(et),new Error(et)}function debugAssert(_e,et){_e||debugFail(et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var _e;return typeof self<"u"&&((_e=self.location)===null||_e===void 0?void 0:_e.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var _e;return typeof self<"u"&&((_e=self.location)===null||_e===void 0?void 0:_e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const _e=navigator;return _e.languages&&_e.languages[0]||_e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(et,rt){this.shortDelay=et,this.longDelay=rt,debugAssert(rt>et,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(_e,et){debugAssert(_e.emulator,"Emulator should always be set here");const{url:rt}=_e.emulator;return et?`${rt}${et.startsWith("/")?et.slice(1):et}`:rt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(et,rt,nt){this.fetchImpl=et,rt&&(this.headersImpl=rt),nt&&(this.responseImpl=nt)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(_e,et){return _e.tenantId&&!et.tenantId?Object.assign(Object.assign({},et),{tenantId:_e.tenantId}):et}async function _performApiRequest(_e,et,rt,nt,ot={}){return _performFetchWithErrorHandling(_e,ot,async()=>{let it={},st={};nt&&(et==="GET"?st=nt:it={body:JSON.stringify(nt)});const at=querystring(Object.assign({key:_e.config.apiKey},st)).slice(1),lt=await _e._getAdditionalHeaders();return lt["Content-Type"]="application/json",_e.languageCode&&(lt["X-Firebase-Locale"]=_e.languageCode),FetchProvider.fetch()(_getFinalTarget(_e,_e.config.apiHost,rt,at),Object.assign({method:et,headers:lt,referrerPolicy:"no-referrer"},it))})}async function _performFetchWithErrorHandling(_e,et,rt){_e._canInitEmulator=!1;const nt=Object.assign(Object.assign({},SERVER_ERROR_MAP),et);try{const ot=new NetworkTimeout(_e),it=await Promise.race([rt(),ot.promise]);ot.clearNetworkTimeout();const st=await it.json();if("needConfirmation"in st)throw _makeTaggedError(_e,"account-exists-with-different-credential",st);if(it.ok&&!("errorMessage"in st))return st;{const at=it.ok?st.errorMessage:st.error.message,[lt,ct]=at.split(" : ");if(lt==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(_e,"credential-already-in-use",st);if(lt==="EMAIL_EXISTS")throw _makeTaggedError(_e,"email-already-in-use",st);if(lt==="USER_DISABLED")throw _makeTaggedError(_e,"user-disabled",st);const pt=nt[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(ct)throw _errorWithCustomMessage(_e,pt,ct);_fail(_e,pt)}}catch(ot){if(ot instanceof FirebaseError)throw ot;_fail(_e,"network-request-failed",{message:String(ot)})}}async function _performSignInRequest(_e,et,rt,nt,ot={}){const it=await _performApiRequest(_e,et,rt,nt,ot);return"mfaPendingCredential"in it&&_fail(_e,"multi-factor-auth-required",{_serverResponse:it}),it}function _getFinalTarget(_e,et,rt,nt){const ot=`${et}${rt}?${nt}`;return _e.config.emulator?_emulatorUrl(_e.config,ot):`${_e.config.apiScheme}://${ot}`}class NetworkTimeout{constructor(et){this.auth=et,this.timer=null,this.promise=new Promise((rt,nt)=>{this.timer=setTimeout(()=>nt(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(_e,et,rt){const nt={appName:_e.name};rt.email&&(nt.email=rt.email),rt.phoneNumber&&(nt.phoneNumber=rt.phoneNumber);const ot=_createError(_e,et,nt);return ot.customData._tokenResponse=rt,ot}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(_e,et){return _performApiRequest(_e,"POST","/v1/accounts:delete",et)}async function getAccountInfo(_e,et){return _performApiRequest(_e,"POST","/v1/accounts:lookup",et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(_e){if(_e)try{const et=new Date(Number(_e));if(!isNaN(et.getTime()))return et.toUTCString()}catch{}}async function getIdTokenResult(_e,et=!1){const rt=getModularInstance(_e),nt=await rt.getIdToken(et),ot=_parseToken(nt);_assert(ot&&ot.exp&&ot.auth_time&&ot.iat,rt.auth,"internal-error");const it=typeof ot.firebase=="object"?ot.firebase:void 0,st=it==null?void 0:it.sign_in_provider;return{claims:ot,token:nt,authTime:utcTimestampToDateString(secondsStringToMilliseconds(ot.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(ot.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(ot.exp)),signInProvider:st||null,signInSecondFactor:(it==null?void 0:it.sign_in_second_factor)||null}}function secondsStringToMilliseconds(_e){return Number(_e)*1e3}function _parseToken(_e){const[et,rt,nt]=_e.split(".");if(et===void 0||rt===void 0||nt===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const ot=base64Decode(rt);return ot?JSON.parse(ot):(_logError("Failed to decode base64 JWT payload"),null)}catch(ot){return _logError("Caught error parsing JWT payload as JSON",ot==null?void 0:ot.toString()),null}}function _tokenExpiresIn(_e){const et=_parseToken(_e);return _assert(et,"internal-error"),_assert(typeof et.exp<"u","internal-error"),_assert(typeof et.iat<"u","internal-error"),Number(et.exp)-Number(et.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(_e,et,rt=!1){if(rt)return et;try{return await et}catch(nt){throw nt instanceof FirebaseError&&isUserInvalidated(nt)&&_e.auth.currentUser===_e&&await _e.auth.signOut(),nt}}function isUserInvalidated({code:_e}){return _e==="auth/user-disabled"||_e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(et){this.user=et,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(et){var rt;if(et){const nt=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),nt}else{this.errorBackoff=3e4;const ot=((rt=this.user.stsTokenManager.expirationTime)!==null&&rt!==void 0?rt:0)-Date.now()-3e5;return Math.max(0,ot)}}schedule(et=!1){if(!this.isRunning)return;const rt=this.getInterval(et);this.timerId=setTimeout(async()=>{await this.iteration()},rt)}async iteration(){try{await this.user.getIdToken(!0)}catch(et){(et==null?void 0:et.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(et,rt){this.createdAt=et,this.lastLoginAt=rt,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(et){this.createdAt=et.createdAt,this.lastLoginAt=et.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(_e){var et;const rt=_e.auth,nt=await _e.getIdToken(),ot=await _logoutIfInvalidated(_e,getAccountInfo(rt,{idToken:nt}));_assert(ot==null?void 0:ot.users.length,rt,"internal-error");const it=ot.users[0];_e._notifyReloadListener(it);const st=!((et=it.providerUserInfo)===null||et===void 0)&&et.length?extractProviderData(it.providerUserInfo):[],at=mergeProviderData(_e.providerData,st),lt=_e.isAnonymous,ct=!(_e.email&&it.passwordHash)&&!(at!=null&&at.length),pt=lt?ct:!1,ut={uid:it.localId,displayName:it.displayName||null,photoURL:it.photoUrl||null,email:it.email||null,emailVerified:it.emailVerified||!1,phoneNumber:it.phoneNumber||null,tenantId:it.tenantId||null,providerData:at,metadata:new UserMetadata(it.createdAt,it.lastLoginAt),isAnonymous:pt};Object.assign(_e,ut)}async function reload(_e){const et=getModularInstance(_e);await _reloadWithoutSaving(et),await et.auth._persistUserIfCurrent(et),et.auth._notifyListenersIfCurrent(et)}function mergeProviderData(_e,et){return[..._e.filter(nt=>!et.some(ot=>ot.providerId===nt.providerId)),...et]}function extractProviderData(_e){return _e.map(et=>{var{providerId:rt}=et,nt=__rest(et,["providerId"]);return{providerId:rt,uid:nt.rawId||"",displayName:nt.displayName||null,email:nt.email||null,phoneNumber:nt.phoneNumber||null,photoURL:nt.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(_e,et){const rt=await _performFetchWithErrorHandling(_e,{},async()=>{const nt=querystring({grant_type:"refresh_token",refresh_token:et}).slice(1),{tokenApiHost:ot,apiKey:it}=_e.config,st=_getFinalTarget(_e,ot,"/v1/token",`key=${it}`),at=await _e._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(st,{method:"POST",headers:at,body:nt})});return{accessToken:rt.access_token,expiresIn:rt.expires_in,refreshToken:rt.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(et){_assert(et.idToken,"internal-error"),_assert(typeof et.idToken<"u","internal-error"),_assert(typeof et.refreshToken<"u","internal-error");const rt="expiresIn"in et&&typeof et.expiresIn<"u"?Number(et.expiresIn):_tokenExpiresIn(et.idToken);this.updateTokensAndExpiration(et.idToken,et.refreshToken,rt)}async getToken(et,rt=!1){return _assert(!this.accessToken||this.refreshToken,et,"user-token-expired"),!rt&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(et,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(et,rt){const{accessToken:nt,refreshToken:ot,expiresIn:it}=await requestStsToken(et,rt);this.updateTokensAndExpiration(nt,ot,Number(it))}updateTokensAndExpiration(et,rt,nt){this.refreshToken=rt||null,this.accessToken=et||null,this.expirationTime=Date.now()+nt*1e3}static fromJSON(et,rt){const{refreshToken:nt,accessToken:ot,expirationTime:it}=rt,st=new StsTokenManager;return nt&&(_assert(typeof nt=="string","internal-error",{appName:et}),st.refreshToken=nt),ot&&(_assert(typeof ot=="string","internal-error",{appName:et}),st.accessToken=ot),it&&(_assert(typeof it=="number","internal-error",{appName:et}),st.expirationTime=it),st}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(et){this.accessToken=et.accessToken,this.refreshToken=et.refreshToken,this.expirationTime=et.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(_e,et){_assert(typeof _e=="string"||typeof _e>"u","internal-error",{appName:et})}class UserImpl{constructor(et){var{uid:rt,auth:nt,stsTokenManager:ot}=et,it=__rest(et,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=rt,this.auth=nt,this.stsTokenManager=ot,this.accessToken=ot.accessToken,this.displayName=it.displayName||null,this.email=it.email||null,this.emailVerified=it.emailVerified||!1,this.phoneNumber=it.phoneNumber||null,this.photoURL=it.photoURL||null,this.isAnonymous=it.isAnonymous||!1,this.tenantId=it.tenantId||null,this.providerData=it.providerData?[...it.providerData]:[],this.metadata=new UserMetadata(it.createdAt||void 0,it.lastLoginAt||void 0)}async getIdToken(et){const rt=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,et));return _assert(rt,this.auth,"internal-error"),this.accessToken!==rt&&(this.accessToken=rt,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),rt}getIdTokenResult(et){return getIdTokenResult(this,et)}reload(){return reload(this)}_assign(et){this!==et&&(_assert(this.uid===et.uid,this.auth,"internal-error"),this.displayName=et.displayName,this.photoURL=et.photoURL,this.email=et.email,this.emailVerified=et.emailVerified,this.phoneNumber=et.phoneNumber,this.isAnonymous=et.isAnonymous,this.tenantId=et.tenantId,this.providerData=et.providerData.map(rt=>Object.assign({},rt)),this.metadata._copy(et.metadata),this.stsTokenManager._assign(et.stsTokenManager))}_clone(et){const rt=new UserImpl(Object.assign(Object.assign({},this),{auth:et,stsTokenManager:this.stsTokenManager._clone()}));return rt.metadata._copy(this.metadata),rt}_onReload(et){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=et,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(et){this.reloadListener?this.reloadListener(et):this.reloadUserInfo=et}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(et,rt=!1){let nt=!1;et.idToken&&et.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(et),nt=!0),rt&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),nt&&this.auth._notifyListenersIfCurrent(this)}async delete(){const et=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:et})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(et=>Object.assign({},et)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(et,rt){var nt,ot,it,st,at,lt,ct,pt;const ut=(nt=rt.displayName)!==null&&nt!==void 0?nt:void 0,ht=(ot=rt.email)!==null&&ot!==void 0?ot:void 0,ft=(it=rt.phoneNumber)!==null&&it!==void 0?it:void 0,gt=(st=rt.photoURL)!==null&&st!==void 0?st:void 0,vt=(at=rt.tenantId)!==null&&at!==void 0?at:void 0,yt=(lt=rt._redirectEventId)!==null&&lt!==void 0?lt:void 0,mt=(ct=rt.createdAt)!==null&&ct!==void 0?ct:void 0,Et=(pt=rt.lastLoginAt)!==null&&pt!==void 0?pt:void 0,{uid:bt,emailVerified:Ct,isAnonymous:Tt,providerData:wt,stsTokenManager:Rt}=rt;_assert(bt&&Rt,et,"internal-error");const It=StsTokenManager.fromJSON(this.name,Rt);_assert(typeof bt=="string",et,"internal-error"),assertStringOrUndefined(ut,et.name),assertStringOrUndefined(ht,et.name),_assert(typeof Ct=="boolean",et,"internal-error"),_assert(typeof Tt=="boolean",et,"internal-error"),assertStringOrUndefined(ft,et.name),assertStringOrUndefined(gt,et.name),assertStringOrUndefined(vt,et.name),assertStringOrUndefined(yt,et.name),assertStringOrUndefined(mt,et.name),assertStringOrUndefined(Et,et.name);const St=new UserImpl({uid:bt,auth:et,email:ht,emailVerified:Ct,displayName:ut,isAnonymous:Tt,photoURL:gt,phoneNumber:ft,tenantId:vt,stsTokenManager:It,createdAt:mt,lastLoginAt:Et});return wt&&Array.isArray(wt)&&(St.providerData=wt.map(Pt=>Object.assign({},Pt))),yt&&(St._redirectEventId=yt),St}static async _fromIdTokenResponse(et,rt,nt=!1){const ot=new StsTokenManager;ot.updateFromServerResponse(rt);const it=new UserImpl({uid:rt.localId,auth:et,stsTokenManager:ot,isAnonymous:nt});return await _reloadWithoutSaving(it),it}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(_e){debugAssert(_e instanceof Function,"Expected a class definition");let et=instanceCache.get(_e);return et?(debugAssert(et instanceof _e,"Instance stored in cache mismatched with class"),et):(et=new _e,instanceCache.set(_e,et),et)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(et,rt){this.storage[et]=rt}async _get(et){const rt=this.storage[et];return rt===void 0?null:rt}async _remove(et){delete this.storage[et]}_addListener(et,rt){}_removeListener(et,rt){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(_e,et,rt){return`firebase:${_e}:${et}:${rt}`}class PersistenceUserManager{constructor(et,rt,nt){this.persistence=et,this.auth=rt,this.userKey=nt;const{config:ot,name:it}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,ot.apiKey,it),this.fullPersistenceKey=_persistenceKeyName("persistence",ot.apiKey,it),this.boundEventHandler=rt._onStorageEvent.bind(rt),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(et){return this.persistence._set(this.fullUserKey,et.toJSON())}async getCurrentUser(){const et=await this.persistence._get(this.fullUserKey);return et?UserImpl._fromJSON(this.auth,et):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(et){if(this.persistence===et)return;const rt=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=et,rt)return this.setCurrentUser(rt)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(et,rt,nt="authUser"){if(!rt.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),et,nt);const ot=(await Promise.all(rt.map(async ct=>{if(await ct._isAvailable())return ct}))).filter(ct=>ct);let it=ot[0]||_getInstance(inMemoryPersistence);const st=_persistenceKeyName(nt,et.config.apiKey,et.name);let at=null;for(const ct of rt)try{const pt=await ct._get(st);if(pt){const ut=UserImpl._fromJSON(et,pt);ct!==it&&(at=ut),it=ct;break}}catch{}const lt=ot.filter(ct=>ct._shouldAllowMigration);return!it._shouldAllowMigration||!lt.length?new PersistenceUserManager(it,et,nt):(it=lt[0],at&&await it._set(st,at.toJSON()),await Promise.all(rt.map(async ct=>{if(ct!==it)try{await ct._remove(st)}catch{}})),new PersistenceUserManager(it,et,nt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(_e){const et=_e.toLowerCase();if(et.includes("opera/")||et.includes("opr/")||et.includes("opios/"))return"Opera";if(_isIEMobile(et))return"IEMobile";if(et.includes("msie")||et.includes("trident/"))return"IE";if(et.includes("edge/"))return"Edge";if(_isFirefox(et))return"Firefox";if(et.includes("silk/"))return"Silk";if(_isBlackBerry(et))return"Blackberry";if(_isWebOS(et))return"Webos";if(_isSafari(et))return"Safari";if((et.includes("chrome/")||_isChromeIOS(et))&&!et.includes("edge/"))return"Chrome";if(_isAndroid(et))return"Android";{const rt=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,nt=_e.match(rt);if((nt==null?void 0:nt.length)===2)return nt[1]}return"Other"}function _isFirefox(_e=getUA()){return/firefox\//i.test(_e)}function _isSafari(_e=getUA()){const et=_e.toLowerCase();return et.includes("safari/")&&!et.includes("chrome/")&&!et.includes("crios/")&&!et.includes("android")}function _isChromeIOS(_e=getUA()){return/crios\//i.test(_e)}function _isIEMobile(_e=getUA()){return/iemobile/i.test(_e)}function _isAndroid(_e=getUA()){return/android/i.test(_e)}function _isBlackBerry(_e=getUA()){return/blackberry/i.test(_e)}function _isWebOS(_e=getUA()){return/webos/i.test(_e)}function _isIOS(_e=getUA()){return/iphone|ipad|ipod/i.test(_e)||/macintosh/i.test(_e)&&/mobile/i.test(_e)}function _isIOSStandalone(_e=getUA()){var et;return _isIOS(_e)&&!!(!((et=window.navigator)===null||et===void 0)&&et.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(_e=getUA()){return _isIOS(_e)||_isAndroid(_e)||_isWebOS(_e)||_isBlackBerry(_e)||/windows phone/i.test(_e)||_isIEMobile(_e)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(_e,et=[]){let rt;switch(_e){case"Browser":rt=_getBrowserName(getUA());break;case"Worker":rt=`${_getBrowserName(getUA())}-${_e}`;break;default:rt=_e}const nt=et.length?et.join(","):"FirebaseCore-web";return`${rt}/JsCore/${SDK_VERSION$1}/${nt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getRecaptchaParams(_e){return(await _performApiRequest(_e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function getRecaptchaConfig(_e,et){return _performApiRequest(_e,"GET","/v2/recaptchaConfig",_addTidIfNecessary(_e,et))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isV2(_e){return _e!==void 0&&_e.getResponse!==void 0}function isEnterprise(_e){return _e!==void 0&&_e.enterprise!==void 0}class RecaptchaConfig{constructor(et){if(this.siteKey="",this.emailPasswordEnabled=!1,et.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=et.recaptchaKey.split("/")[3],this.emailPasswordEnabled=et.recaptchaEnforcementState.some(rt=>rt.provider==="EMAIL_PASSWORD_PROVIDER"&&rt.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var _e,et;return(et=(_e=document.getElementsByTagName("head"))===null||_e===void 0?void 0:_e[0])!==null&&et!==void 0?et:document}function _loadJS(_e){return new Promise((et,rt)=>{const nt=document.createElement("script");nt.setAttribute("src",_e),nt.onload=et,nt.onerror=ot=>{const it=_createError("internal-error");it.customData=ot,rt(it)},nt.type="text/javascript",nt.charset="UTF-8",getScriptParentElement().appendChild(nt)})}function _generateCallbackName(_e){return`__${_e}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_URL="https://www.google.com/recaptcha/enterprise.js?render=",RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(et){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(et)}async verify(et="verify",rt=!1){async function nt(it){if(!rt){if(it.tenantId==null&&it._agentRecaptchaConfig!=null)return it._agentRecaptchaConfig.siteKey;if(it.tenantId!=null&&it._tenantRecaptchaConfigs[it.tenantId]!==void 0)return it._tenantRecaptchaConfigs[it.tenantId].siteKey}return new Promise(async(st,at)=>{getRecaptchaConfig(it,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(lt=>{if(lt.recaptchaKey===void 0)at(new Error("recaptcha Enterprise site key undefined"));else{const ct=new RecaptchaConfig(lt);return it.tenantId==null?it._agentRecaptchaConfig=ct:it._tenantRecaptchaConfigs[it.tenantId]=ct,st(ct.siteKey)}}).catch(lt=>{at(lt)})})}function ot(it,st,at){const lt=window.grecaptcha;isEnterprise(lt)?lt.enterprise.ready(()=>{lt.enterprise.execute(it,{action:et}).then(ct=>{st(ct)}).catch(()=>{st(FAKE_TOKEN)})}):at(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((it,st)=>{nt(this.auth).then(at=>{if(!rt&&isEnterprise(window.grecaptcha))ot(at,it,st);else{if(typeof window>"u"){st(new Error("RecaptchaVerifier is only supported in browser"));return}_loadJS(RECAPTCHA_ENTERPRISE_URL+at).then(()=>{ot(at,it,st)}).catch(lt=>{st(lt)})}}).catch(at=>{st(at)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(et){this.auth=et,this.queue=[]}pushCallback(et,rt){const nt=it=>new Promise((st,at)=>{try{const lt=et(it);st(lt)}catch(lt){at(lt)}});nt.onAbort=rt,this.queue.push(nt);const ot=this.queue.length-1;return()=>{this.queue[ot]=()=>Promise.resolve()}}async runMiddleware(et){if(this.auth.currentUser===et)return;const rt=[];try{for(const nt of this.queue)await nt(et),nt.onAbort&&rt.push(nt.onAbort)}catch(nt){rt.reverse();for(const ot of rt)try{ot()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:nt==null?void 0:nt.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(et,rt,nt,ot){this.app=et,this.heartbeatServiceProvider=rt,this.appCheckServiceProvider=nt,this.config=ot,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=et.name,this.clientVersion=ot.sdkClientVersion}_initializeWithPersistence(et,rt){return rt&&(this._popupRedirectResolver=_getInstance(rt)),this._initializationPromise=this.queue(async()=>{var nt,ot;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,et),!this._deleted)){if(!((nt=this._popupRedirectResolver)===null||nt===void 0)&&nt._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(rt),this.lastNotifiedUid=((ot=this.currentUser)===null||ot===void 0?void 0:ot.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const et=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!et)){if(this.currentUser&&et&&this.currentUser.uid===et.uid){this._currentUser._assign(et),await this.currentUser.getIdToken();return}await this._updateCurrentUser(et,!0)}}async initializeCurrentUser(et){var rt;const nt=await this.assertedPersistence.getCurrentUser();let ot=nt,it=!1;if(et&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const st=(rt=this.redirectUser)===null||rt===void 0?void 0:rt._redirectEventId,at=ot==null?void 0:ot._redirectEventId,lt=await this.tryRedirectSignIn(et);(!st||st===at)&&(lt!=null&&lt.user)&&(ot=lt.user,it=!0)}if(!ot)return this.directlySetCurrentUser(null);if(!ot._redirectEventId){if(it)try{await this.beforeStateQueue.runMiddleware(ot)}catch(st){ot=nt,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(st))}return ot?this.reloadAndSetCurrentUserOrClear(ot):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===ot._redirectEventId?this.directlySetCurrentUser(ot):this.reloadAndSetCurrentUserOrClear(ot)}async tryRedirectSignIn(et){let rt=null;try{rt=await this._popupRedirectResolver._completeRedirectFn(this,et,!0)}catch{await this._setRedirectUser(null)}return rt}async reloadAndSetCurrentUserOrClear(et){try{await _reloadWithoutSaving(et)}catch(rt){if((rt==null?void 0:rt.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(et)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(et){const rt=et?getModularInstance(et):null;return rt&&_assert(rt.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(rt&&rt._clone(this))}async _updateCurrentUser(et,rt=!1){if(!this._deleted)return et&&_assert(this.tenantId===et.tenantId,this,"tenant-id-mismatch"),rt||await this.beforeStateQueue.runMiddleware(et),this.queue(async()=>{await this.directlySetCurrentUser(et),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(et){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(et))})}async initializeRecaptchaConfig(){const et=await getRecaptchaConfig(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),rt=new RecaptchaConfig(et);this.tenantId==null?this._agentRecaptchaConfig=rt:this._tenantRecaptchaConfigs[this.tenantId]=rt,rt.emailPasswordEnabled&&new RecaptchaEnterpriseVerifier(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(et){this._errorFactory=new ErrorFactory("auth","Firebase",et())}onAuthStateChanged(et,rt,nt){return this.registerStateListener(this.authStateSubscription,et,rt,nt)}beforeAuthStateChanged(et,rt){return this.beforeStateQueue.pushCallback(et,rt)}onIdTokenChanged(et,rt,nt){return this.registerStateListener(this.idTokenSubscription,et,rt,nt)}toJSON(){var et;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(et=this._currentUser)===null||et===void 0?void 0:et.toJSON()}}async _setRedirectUser(et,rt){const nt=await this.getOrInitRedirectPersistenceManager(rt);return et===null?nt.removeCurrentUser():nt.setCurrentUser(et)}async getOrInitRedirectPersistenceManager(et){if(!this.redirectPersistenceManager){const rt=et&&_getInstance(et)||this._popupRedirectResolver;_assert(rt,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(rt._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(et){var rt,nt;return this._isInitialized&&await this.queue(async()=>{}),((rt=this._currentUser)===null||rt===void 0?void 0:rt._redirectEventId)===et?this._currentUser:((nt=this.redirectUser)===null||nt===void 0?void 0:nt._redirectEventId)===et?this.redirectUser:null}async _persistUserIfCurrent(et){if(et===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(et))}_notifyListenersIfCurrent(et){et===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var et,rt;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const nt=(rt=(et=this.currentUser)===null||et===void 0?void 0:et.uid)!==null&&rt!==void 0?rt:null;this.lastNotifiedUid!==nt&&(this.lastNotifiedUid=nt,this.authStateSubscription.next(this.currentUser))}registerStateListener(et,rt,nt,ot){if(this._deleted)return()=>{};const it=typeof rt=="function"?rt:rt.next.bind(rt),st=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(st,this,"internal-error"),st.then(()=>it(this.currentUser)),typeof rt=="function"?et.addObserver(rt,nt,ot):et.addObserver(rt)}async directlySetCurrentUser(et){this.currentUser&&this.currentUser!==et&&this._currentUser._stopProactiveRefresh(),et&&this.isProactiveRefreshEnabled&&et._startProactiveRefresh(),this.currentUser=et,et?await this.assertedPersistence.setCurrentUser(et):await this.assertedPersistence.removeCurrentUser()}queue(et){return this.operations=this.operations.then(et,et),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(et){!et||this.frameworks.includes(et)||(this.frameworks.push(et),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var et;const rt={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(rt["X-Firebase-gmpid"]=this.app.options.appId);const nt=await((et=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||et===void 0?void 0:et.getHeartbeatsHeader());nt&&(rt["X-Firebase-Client"]=nt);const ot=await this._getAppCheckToken();return ot&&(rt["X-Firebase-AppCheck"]=ot),rt}async _getAppCheckToken(){var et;const rt=await((et=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||et===void 0?void 0:et.getToken());return rt!=null&&rt.error&&_logWarn(`Error while retrieving App Check token: ${rt.error}`),rt==null?void 0:rt.token}}function _castAuth(_e){return getModularInstance(_e)}class Subscription{constructor(et){this.auth=et,this.observer=null,this.addObserver=createSubscribe(rt=>this.observer=rt)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(_e,et){const rt=_getProvider(_e,"auth");if(rt.isInitialized()){const ot=rt.getImmediate(),it=rt.getOptions();if(deepEqual(it,et??{}))return ot;_fail(ot,"already-initialized")}return rt.initialize({options:et})}function _initializeAuthInstance(_e,et){const rt=(et==null?void 0:et.persistence)||[],nt=(Array.isArray(rt)?rt:[rt]).map(_getInstance);et!=null&&et.errorMap&&_e._updateErrorMap(et.errorMap),_e._initializeWithPersistence(nt,et==null?void 0:et.popupRedirectResolver)}function connectAuthEmulator(_e,et,rt){const nt=_castAuth(_e);_assert(nt._canInitEmulator,nt,"emulator-config-failed"),_assert(/^https?:\/\//.test(et),nt,"invalid-emulator-scheme");const ot=!!(rt!=null&&rt.disableWarnings),it=extractProtocol(et),{host:st,port:at}=extractHostAndPort(et),lt=at===null?"":`:${at}`;nt.config.emulator={url:`${it}//${st}${lt}/`},nt.settings.appVerificationDisabledForTesting=!0,nt.emulatorConfig=Object.freeze({host:st,port:at,protocol:it.replace(":",""),options:Object.freeze({disableWarnings:ot})}),ot||emitEmulatorWarning()}function extractProtocol(_e){const et=_e.indexOf(":");return et<0?"":_e.substr(0,et+1)}function extractHostAndPort(_e){const et=extractProtocol(_e),rt=/(\/\/)?([^?#/]+)/.exec(_e.substr(et.length));if(!rt)return{host:"",port:null};const nt=rt[2].split("@").pop()||"",ot=/^(\[[^\]]+\])(:|$)/.exec(nt);if(ot){const it=ot[1];return{host:it,port:parsePort(nt.substr(it.length+1))}}else{const[it,st]=nt.split(":");return{host:it,port:parsePort(st)}}}function parsePort(_e){if(!_e)return null;const et=Number(_e);return isNaN(et)?null:et}function emitEmulatorWarning(){function _e(){const et=document.createElement("p"),rt=et.style;et.innerText="Running in emulator mode. Do not use with production credentials.",rt.position="fixed",rt.width="100%",rt.backgroundColor="#ffffff",rt.border=".1em solid #000000",rt.color="#b50000",rt.bottom="0px",rt.left="0px",rt.margin="0px",rt.zIndex="10000",rt.textAlign="center",et.classList.add("firebase-emulator-warning"),document.body.appendChild(et)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_e):_e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(et,rt){this.providerId=et,this.signInMethod=rt}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(et){return debugFail("not implemented")}_linkToIdToken(et,rt){return debugFail("not implemented")}_getReauthenticationResolver(et){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(_e,et){return _performSignInRequest(_e,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(_e,et))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(et){const rt=new OAuthCredential(et.providerId,et.signInMethod);return et.idToken||et.accessToken?(et.idToken&&(rt.idToken=et.idToken),et.accessToken&&(rt.accessToken=et.accessToken),et.nonce&&!et.pendingToken&&(rt.nonce=et.nonce),et.pendingToken&&(rt.pendingToken=et.pendingToken)):et.oauthToken&&et.oauthTokenSecret?(rt.accessToken=et.oauthToken,rt.secret=et.oauthTokenSecret):_fail("argument-error"),rt}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(et){const rt=typeof et=="string"?JSON.parse(et):et,{providerId:nt,signInMethod:ot}=rt,it=__rest(rt,["providerId","signInMethod"]);if(!nt||!ot)return null;const st=new OAuthCredential(nt,ot);return st.idToken=it.idToken||void 0,st.accessToken=it.accessToken||void 0,st.secret=it.secret,st.nonce=it.nonce,st.pendingToken=it.pendingToken||null,st}_getIdTokenResponse(et){const rt=this.buildRequest();return signInWithIdp(et,rt)}_linkToIdToken(et,rt){const nt=this.buildRequest();return nt.idToken=rt,signInWithIdp(et,nt)}_getReauthenticationResolver(et){const rt=this.buildRequest();return rt.autoCreate=!1,signInWithIdp(et,rt)}buildRequest(){const et={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)et.pendingToken=this.pendingToken;else{const rt={};this.idToken&&(rt.id_token=this.idToken),this.accessToken&&(rt.access_token=this.accessToken),this.secret&&(rt.oauth_token_secret=this.secret),rt.providerId=this.providerId,this.nonce&&!this.pendingToken&&(rt.nonce=this.nonce),et.postBody=querystring(rt)}return et}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode(_e,et){return _performApiRequest(_e,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(_e,et))}async function signInWithPhoneNumber$1(_e,et){return _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,et))}async function linkWithPhoneNumber$1(_e,et){const rt=await _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,et));if(rt.temporaryProof)throw _makeTaggedError(_e,"account-exists-with-different-credential",rt);return rt}const VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting(_e,et){const rt=Object.assign(Object.assign({},et),{operation:"REAUTH"});return _performSignInRequest(_e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(_e,rt),VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PhoneAuthCredential extends AuthCredential{constructor(et){super("phone","phone"),this.params=et}static _fromVerification(et,rt){return new PhoneAuthCredential({verificationId:et,verificationCode:rt})}static _fromTokenResponse(et,rt){return new PhoneAuthCredential({phoneNumber:et,temporaryProof:rt})}_getIdTokenResponse(et){return signInWithPhoneNumber$1(et,this._makeVerificationRequest())}_linkToIdToken(et,rt){return linkWithPhoneNumber$1(et,Object.assign({idToken:rt},this._makeVerificationRequest()))}_getReauthenticationResolver(et){return verifyPhoneNumberForExisting(et,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:et,phoneNumber:rt,verificationId:nt,verificationCode:ot}=this.params;return et&&rt?{temporaryProof:et,phoneNumber:rt}:{sessionInfo:nt,code:ot}}toJSON(){const et={providerId:this.providerId};return this.params.phoneNumber&&(et.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(et.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(et.verificationCode=this.params.verificationCode),this.params.verificationId&&(et.verificationId=this.params.verificationId),et}static fromJSON(et){typeof et=="string"&&(et=JSON.parse(et));const{verificationId:rt,verificationCode:nt,phoneNumber:ot,temporaryProof:it}=et;return!nt&&!rt&&!ot&&!it?null:new PhoneAuthCredential({verificationId:rt,verificationCode:nt,phoneNumber:ot,temporaryProof:it})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(et){this.providerId=et,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(et){this.defaultLanguageCode=et}setCustomParameters(et){return this.customParameters=et,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(et){return this.scopes.includes(et)||this.scopes.push(et),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(et){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:et})}static credentialFromResult(et){return FacebookAuthProvider.credentialFromTaggedObject(et)}static credentialFromError(et){return FacebookAuthProvider.credentialFromTaggedObject(et.customData||{})}static credentialFromTaggedObject({_tokenResponse:et}){if(!et||!("oauthAccessToken"in et)||!et.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(et.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(et,rt){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:et,accessToken:rt})}static credentialFromResult(et){return GoogleAuthProvider.credentialFromTaggedObject(et)}static credentialFromError(et){return GoogleAuthProvider.credentialFromTaggedObject(et.customData||{})}static credentialFromTaggedObject({_tokenResponse:et}){if(!et)return null;const{oauthIdToken:rt,oauthAccessToken:nt}=et;if(!rt&&!nt)return null;try{return GoogleAuthProvider.credential(rt,nt)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(et){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:et})}static credentialFromResult(et){return GithubAuthProvider.credentialFromTaggedObject(et)}static credentialFromError(et){return GithubAuthProvider.credentialFromTaggedObject(et.customData||{})}static credentialFromTaggedObject({_tokenResponse:et}){if(!et||!("oauthAccessToken"in et)||!et.oauthAccessToken)return null;try{return GithubAuthProvider.credential(et.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(et,rt){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:et,oauthTokenSecret:rt})}static credentialFromResult(et){return TwitterAuthProvider.credentialFromTaggedObject(et)}static credentialFromError(et){return TwitterAuthProvider.credentialFromTaggedObject(et.customData||{})}static credentialFromTaggedObject({_tokenResponse:et}){if(!et)return null;const{oauthAccessToken:rt,oauthTokenSecret:nt}=et;if(!rt||!nt)return null;try{return TwitterAuthProvider.credential(rt,nt)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(et){this.user=et.user,this.providerId=et.providerId,this._tokenResponse=et._tokenResponse,this.operationType=et.operationType}static async _fromIdTokenResponse(et,rt,nt,ot=!1){const it=await UserImpl._fromIdTokenResponse(et,nt,ot),st=providerIdForResponse(nt);return new UserCredentialImpl({user:it,providerId:st,_tokenResponse:nt,operationType:rt})}static async _forOperation(et,rt,nt){await et._updateTokensIfNecessary(nt,!0);const ot=providerIdForResponse(nt);return new UserCredentialImpl({user:et,providerId:ot,_tokenResponse:nt,operationType:rt})}}function providerIdForResponse(_e){return _e.providerId?_e.providerId:"phoneNumber"in _e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(et,rt,nt,ot){var it;super(rt.code,rt.message),this.operationType=nt,this.user=ot,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:et.name,tenantId:(it=et.tenantId)!==null&&it!==void 0?it:void 0,_serverResponse:rt.customData._serverResponse,operationType:nt}}static _fromErrorAndOperation(et,rt,nt,ot){return new MultiFactorError(et,rt,nt,ot)}}function _processCredentialSavingMfaContextIfNecessary(_e,et,rt,nt){return(et==="reauthenticate"?rt._getReauthenticationResolver(_e):rt._getIdTokenResponse(_e)).catch(it=>{throw it.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(_e,it,et,nt):it})}async function _link$1(_e,et,rt=!1){const nt=await _logoutIfInvalidated(_e,et._linkToIdToken(_e.auth,await _e.getIdToken()),rt);return UserCredentialImpl._forOperation(_e,"link",nt)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(_e,et,rt=!1){const{auth:nt}=_e,ot="reauthenticate";try{const it=await _logoutIfInvalidated(_e,_processCredentialSavingMfaContextIfNecessary(nt,ot,et,_e),rt);_assert(it.idToken,nt,"internal-error");const st=_parseToken(it.idToken);_assert(st,nt,"internal-error");const{sub:at}=st;return _assert(_e.uid===at,nt,"user-mismatch"),UserCredentialImpl._forOperation(_e,ot,it)}catch(it){throw(it==null?void 0:it.code)==="auth/user-not-found"&&_fail(nt,"user-mismatch"),it}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(_e,et,rt=!1){const nt="signIn",ot=await _processCredentialSavingMfaContextIfNecessary(_e,nt,et),it=await UserCredentialImpl._fromIdTokenResponse(_e,nt,ot);return rt||await _e._updateCurrentUser(it.user),it}async function signInWithCredential(_e,et){return _signInWithCredential(_castAuth(_e),et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithCustomToken$1(_e,et){return _performSignInRequest(_e,"POST","/v1/accounts:signInWithCustomToken",_addTidIfNecessary(_e,et))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithCustomToken(_e,et){const rt=_castAuth(_e),nt=await signInWithCustomToken$1(rt,{token:et,returnSecureToken:!0}),ot=await UserCredentialImpl._fromIdTokenResponse(rt,"signIn",nt);return await rt._updateCurrentUser(ot.user),ot}function onIdTokenChanged(_e,et,rt,nt){return getModularInstance(_e).onIdTokenChanged(et,rt,nt)}function beforeAuthStateChanged(_e,et,rt){return getModularInstance(_e).beforeAuthStateChanged(et,rt)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startEnrollPhoneMfa(_e,et){return _performApiRequest(_e,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(_e,et))}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(et,rt){this.storageRetriever=et,this.type=rt}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(et,rt){return this.storage.setItem(et,JSON.stringify(rt)),Promise.resolve()}_get(et){const rt=this.storage.getItem(et);return Promise.resolve(rt?JSON.parse(rt):null)}_remove(et){return this.storage.removeItem(et),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const _e=getUA();return _isSafari(_e)||_isIOS(_e)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(et,rt)=>this.onStorageEvent(et,rt),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(et){for(const rt of Object.keys(this.listeners)){const nt=this.storage.getItem(rt),ot=this.localCache[rt];nt!==ot&&et(rt,ot,nt)}}onStorageEvent(et,rt=!1){if(!et.key){this.forAllChangedKeys((st,at,lt)=>{this.notifyListeners(st,lt)});return}const nt=et.key;if(rt?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const st=this.storage.getItem(nt);if(et.newValue!==st)et.newValue!==null?this.storage.setItem(nt,et.newValue):this.storage.removeItem(nt);else if(this.localCache[nt]===et.newValue&&!rt)return}const ot=()=>{const st=this.storage.getItem(nt);!rt&&this.localCache[nt]===st||this.notifyListeners(nt,st)},it=this.storage.getItem(nt);_isIE10()&&it!==et.newValue&&et.newValue!==et.oldValue?setTimeout(ot,IE10_LOCAL_STORAGE_SYNC_DELAY):ot()}notifyListeners(et,rt){this.localCache[et]=rt;const nt=this.listeners[et];if(nt)for(const ot of Array.from(nt))ot(rt&&JSON.parse(rt))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((et,rt,nt)=>{this.onStorageEvent(new StorageEvent("storage",{key:et,oldValue:rt,newValue:nt}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(et,rt){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[et]||(this.listeners[et]=new Set,this.localCache[et]=this.storage.getItem(et)),this.listeners[et].add(rt)}_removeListener(et,rt){this.listeners[et]&&(this.listeners[et].delete(rt),this.listeners[et].size===0&&delete this.listeners[et]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(et,rt){await super._set(et,rt),this.localCache[et]=JSON.stringify(rt)}async _get(et){const rt=await super._get(et);return this.localCache[et]=JSON.stringify(rt),rt}async _remove(et){await super._remove(et),delete this.localCache[et]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(et,rt){}_removeListener(et,rt){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(_e){return Promise.all(_e.map(async et=>{try{return{fulfilled:!0,value:await et}}catch(rt){return{fulfilled:!1,reason:rt}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(et){this.eventTarget=et,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(et){const rt=this.receivers.find(ot=>ot.isListeningto(et));if(rt)return rt;const nt=new Receiver(et);return this.receivers.push(nt),nt}isListeningto(et){return this.eventTarget===et}async handleEvent(et){const rt=et,{eventId:nt,eventType:ot,data:it}=rt.data,st=this.handlersMap[ot];if(!(st!=null&&st.size))return;rt.ports[0].postMessage({status:"ack",eventId:nt,eventType:ot});const at=Array.from(st).map(async ct=>ct(rt.origin,it)),lt=await _allSettled(at);rt.ports[0].postMessage({status:"done",eventId:nt,eventType:ot,response:lt})}_subscribe(et,rt){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[et]||(this.handlersMap[et]=new Set),this.handlersMap[et].add(rt)}_unsubscribe(et,rt){this.handlersMap[et]&&rt&&this.handlersMap[et].delete(rt),(!rt||this.handlersMap[et].size===0)&&delete this.handlersMap[et],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(_e="",et=10){let rt="";for(let nt=0;nt<et;nt++)rt+=Math.floor(Math.random()*10);return _e+rt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(et){this.target=et,this.handlers=new Set}removeMessageHandler(et){et.messageChannel&&(et.messageChannel.port1.removeEventListener("message",et.onMessage),et.messageChannel.port1.close()),this.handlers.delete(et)}async _send(et,rt,nt=50){const ot=typeof MessageChannel<"u"?new MessageChannel:null;if(!ot)throw new Error("connection_unavailable");let it,st;return new Promise((at,lt)=>{const ct=_generateEventId("",20);ot.port1.start();const pt=setTimeout(()=>{lt(new Error("unsupported_event"))},nt);st={messageChannel:ot,onMessage(ut){const ht=ut;if(ht.data.eventId===ct)switch(ht.data.status){case"ack":clearTimeout(pt),it=setTimeout(()=>{lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(it),at(ht.data.response);break;default:clearTimeout(pt),clearTimeout(it),lt(new Error("invalid_response"));break}}},this.handlers.add(st),ot.port1.addEventListener("message",st.onMessage),this.target.postMessage({eventType:et,eventId:ct,data:rt},[ot.port2])}).finally(()=>{st&&this.removeMessageHandler(st)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(_e){_window().location.href=_e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var _e;return((_e=navigator==null?void 0:navigator.serviceWorker)===null||_e===void 0?void 0:_e.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(et){this.request=et}toPromise(){return new Promise((et,rt)=>{this.request.addEventListener("success",()=>{et(this.request.result)}),this.request.addEventListener("error",()=>{rt(this.request.error)})})}}function getObjectStore(_e,et){return _e.transaction([DB_OBJECTSTORE_NAME],et?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const _e=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(_e).toPromise()}function _openDatabase(){const _e=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((et,rt)=>{_e.addEventListener("error",()=>{rt(_e.error)}),_e.addEventListener("upgradeneeded",()=>{const nt=_e.result;try{nt.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(ot){rt(ot)}}),_e.addEventListener("success",async()=>{const nt=_e.result;nt.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?et(nt):(nt.close(),await _deleteDatabase(),et(await _openDatabase()))})})}async function _putObject(_e,et,rt){const nt=getObjectStore(_e,!0).put({[DB_DATA_KEYPATH]:et,value:rt});return new DBPromise(nt).toPromise()}async function getObject(_e,et){const rt=getObjectStore(_e,!1).get(et),nt=await new DBPromise(rt).toPromise();return nt===void 0?null:nt.value}function _deleteObject(_e,et){const rt=getObjectStore(_e,!0).delete(et);return new DBPromise(rt).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(et){let rt=0;for(;;)try{const nt=await this._openDb();return await et(nt)}catch(nt){if(rt++>_TRANSACTION_RETRY_COUNT)throw nt;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(et,rt)=>({keyProcessed:(await this._poll()).includes(rt.key)})),this.receiver._subscribe("ping",async(et,rt)=>["keyChanged"])}async initializeSender(){var et,rt;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const nt=await this.sender._send("ping",{},800);nt&&!((et=nt[0])===null||et===void 0)&&et.fulfilled&&!((rt=nt[0])===null||rt===void 0)&&rt.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(et){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:et},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const et=await _openDatabase();return await _putObject(et,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(et,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(et){this.pendingWrites++;try{await et()}finally{this.pendingWrites--}}async _set(et,rt){return this._withPendingWrite(async()=>(await this._withRetries(nt=>_putObject(nt,et,rt)),this.localCache[et]=rt,this.notifyServiceWorker(et)))}async _get(et){const rt=await this._withRetries(nt=>getObject(nt,et));return this.localCache[et]=rt,rt}async _remove(et){return this._withPendingWrite(async()=>(await this._withRetries(rt=>_deleteObject(rt,et)),delete this.localCache[et],this.notifyServiceWorker(et)))}async _poll(){const et=await this._withRetries(ot=>{const it=getObjectStore(ot,!1).getAll();return new DBPromise(it).toPromise()});if(!et)return[];if(this.pendingWrites!==0)return[];const rt=[],nt=new Set;for(const{fbase_key:ot,value:it}of et)nt.add(ot),JSON.stringify(this.localCache[ot])!==JSON.stringify(it)&&(this.notifyListeners(ot,it),rt.push(ot));for(const ot of Object.keys(this.localCache))this.localCache[ot]&&!nt.has(ot)&&(this.notifyListeners(ot,null),rt.push(ot));return rt}notifyListeners(et,rt){this.localCache[et]=rt;const nt=this.listeners[et];if(nt)for(const ot of Array.from(nt))ot(rt)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(et,rt){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[et]||(this.listeners[et]=new Set,this._get(et)),this.listeners[et].add(rt)}_removeListener(et,rt){this.listeners[et]&&(this.listeners[et].delete(rt),this.listeners[et].size===0&&delete this.listeners[et]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function startSignInPhoneMfa(_e,et){return _performApiRequest(_e,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(_e,et))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _SOLVE_TIME_MS=500,_EXPIRATION_TIME_MS=6e4,_WIDGET_ID_START=1e12;class MockReCaptcha{constructor(et){this.auth=et,this.counter=_WIDGET_ID_START,this._widgets=new Map}render(et,rt){const nt=this.counter;return this._widgets.set(nt,new MockWidget(et,this.auth.name,rt||{})),this.counter++,nt}reset(et){var rt;const nt=et||_WIDGET_ID_START;(rt=this._widgets.get(nt))===null||rt===void 0||rt.delete(),this._widgets.delete(nt)}getResponse(et){var rt;const nt=et||_WIDGET_ID_START;return((rt=this._widgets.get(nt))===null||rt===void 0?void 0:rt.getResponse())||""}async execute(et){var rt;const nt=et||_WIDGET_ID_START;return(rt=this._widgets.get(nt))===null||rt===void 0||rt.execute(),""}}class MockWidget{constructor(et,rt,nt){this.params=nt,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ot=typeof et=="string"?document.getElementById(et):et;_assert(ot,"argument-error",{appName:rt}),this.container=ot,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=generateRandomAlphaNumericString(50);const{callback:et,"expired-callback":rt}=this.params;if(et)try{et(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,rt)try{rt()}catch{}this.isVisible&&this.execute()},_EXPIRATION_TIME_MS)},_SOLVE_TIME_MS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function generateRandomAlphaNumericString(_e){const et=[],rt="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let nt=0;nt<_e;nt++)et.push(rt.charAt(Math.floor(Math.random()*rt.length)));return et.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _JSLOAD_CALLBACK=_generateCallbackName("rcb"),NETWORK_TIMEOUT_DELAY=new Delay(3e4,6e4),RECAPTCHA_BASE="https://www.google.com/recaptcha/api.js?";class ReCaptchaLoaderImpl{constructor(){var et;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((et=_window().grecaptcha)===null||et===void 0)&&et.render)}load(et,rt=""){return _assert(isHostLanguageValid(rt),et,"argument-error"),this.shouldResolveImmediately(rt)&&isV2(_window().grecaptcha)?Promise.resolve(_window().grecaptcha):new Promise((nt,ot)=>{const it=_window().setTimeout(()=>{ot(_createError(et,"network-request-failed"))},NETWORK_TIMEOUT_DELAY.get());_window()[_JSLOAD_CALLBACK]=()=>{_window().clearTimeout(it),delete _window()[_JSLOAD_CALLBACK];const at=_window().grecaptcha;if(!at||!isV2(at)){ot(_createError(et,"internal-error"));return}const lt=at.render;at.render=(ct,pt)=>{const ut=lt(ct,pt);return this.counter++,ut},this.hostLanguage=rt,nt(at)};const st=`${RECAPTCHA_BASE}?${querystring({onload:_JSLOAD_CALLBACK,render:"explicit",hl:rt})}`;_loadJS(st).catch(()=>{clearTimeout(it),ot(_createError(et,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(et){var rt;return!!(!((rt=_window().grecaptcha)===null||rt===void 0)&&rt.render)&&(et===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function isHostLanguageValid(_e){return _e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_e)}class MockReCaptchaLoaderImpl{async load(et){return new MockReCaptcha(et)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECAPTCHA_VERIFIER_TYPE="recaptcha",DEFAULT_PARAMS={theme:"light",type:"image"};class RecaptchaVerifier{constructor(et,rt=Object.assign({},DEFAULT_PARAMS),nt){this.parameters=rt,this.type=RECAPTCHA_VERIFIER_TYPE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_castAuth(nt),this.isInvisible=this.parameters.size==="invisible",_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ot=typeof et=="string"?document.getElementById(et):et;_assert(ot,this.auth,"argument-error"),this.container=ot,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MockReCaptchaLoaderImpl:new ReCaptchaLoaderImpl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const et=await this.render(),rt=this.getAssertedRecaptcha(),nt=rt.getResponse(et);return nt||new Promise(ot=>{const it=st=>{st&&(this.tokenChangeListeners.delete(it),ot(st))};this.tokenChangeListeners.add(it),this.isInvisible&&rt.execute(et)})}render(){try{this.assertNotDestroyed()}catch(et){return Promise.reject(et)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(et=>{throw this.renderPromise=null,et}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(et=>{this.container.removeChild(et)})}validateStartingState(){_assert(!this.parameters.sitekey,this.auth,"argument-error"),_assert(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_assert(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(et){return rt=>{if(this.tokenChangeListeners.forEach(nt=>nt(rt)),typeof et=="function")et(rt);else if(typeof et=="string"){const nt=_window()[et];typeof nt=="function"&&nt(rt)}}}assertNotDestroyed(){_assert(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let et=this.container;if(!this.isInvisible){const rt=document.createElement("div");et.appendChild(rt),et=rt}this.widgetId=this.getAssertedRecaptcha().render(et,this.parameters)}return this.widgetId}async init(){_assert(_isHttpOrHttps()&&!_isWorker(),this.auth,"internal-error"),await domReady(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const et=await getRecaptchaParams(this.auth);_assert(et,this.auth,"internal-error"),this.parameters.sitekey=et}getAssertedRecaptcha(){return _assert(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function domReady(){let _e=null;return new Promise(et=>{if(document.readyState==="complete"){et();return}_e=()=>et(),window.addEventListener("load",_e)}).catch(et=>{throw _e&&window.removeEventListener("load",_e),et})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ConfirmationResultImpl{constructor(et,rt){this.verificationId=et,this.onConfirmation=rt}confirm(et){const rt=PhoneAuthCredential._fromVerification(this.verificationId,et);return this.onConfirmation(rt)}}async function signInWithPhoneNumber(_e,et,rt){const nt=_castAuth(_e),ot=await _verifyPhoneNumber(nt,et,getModularInstance(rt));return new ConfirmationResultImpl(ot,it=>signInWithCredential(nt,it))}async function _verifyPhoneNumber(_e,et,rt){var nt;const ot=await rt.verify();try{_assert(typeof ot=="string",_e,"argument-error"),_assert(rt.type===RECAPTCHA_VERIFIER_TYPE,_e,"argument-error");let it;if(typeof et=="string"?it={phoneNumber:et}:it=et,"session"in it){const st=it.session;if("phoneNumber"in it)return _assert(st.type==="enroll",_e,"internal-error"),(await startEnrollPhoneMfa(_e,{idToken:st.credential,phoneEnrollmentInfo:{phoneNumber:it.phoneNumber,recaptchaToken:ot}})).phoneSessionInfo.sessionInfo;{_assert(st.type==="signin",_e,"internal-error");const at=((nt=it.multiFactorHint)===null||nt===void 0?void 0:nt.uid)||it.multiFactorUid;return _assert(at,_e,"missing-multi-factor-info"),(await startSignInPhoneMfa(_e,{mfaPendingCredential:st.credential,mfaEnrollmentId:at,phoneSignInInfo:{recaptchaToken:ot}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:st}=await sendPhoneVerificationCode(_e,{phoneNumber:it.phoneNumber,recaptchaToken:ot});return st}}finally{rt._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(_e,et){return et?_getInstance(et):(_assert(_e._popupRedirectResolver,_e,"argument-error"),_e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(et){super("custom","custom"),this.params=et}_getIdTokenResponse(et){return signInWithIdp(et,this._buildIdpRequest())}_linkToIdToken(et,rt){return signInWithIdp(et,this._buildIdpRequest(rt))}_getReauthenticationResolver(et){return signInWithIdp(et,this._buildIdpRequest())}_buildIdpRequest(et){const rt={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return et&&(rt.idToken=et),rt}}function _signIn(_e){return _signInWithCredential(_e.auth,new IdpCredential(_e),_e.bypassAuthState)}function _reauth(_e){const{auth:et,user:rt}=_e;return _assert(rt,et,"internal-error"),_reauthenticate(rt,new IdpCredential(_e),_e.bypassAuthState)}async function _link(_e){const{auth:et,user:rt}=_e;return _assert(rt,et,"internal-error"),_link$1(rt,new IdpCredential(_e),_e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(et,rt,nt,ot,it=!1){this.auth=et,this.resolver=nt,this.user=ot,this.bypassAuthState=it,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(rt)?rt:[rt]}execute(){return new Promise(async(et,rt)=>{this.pendingPromise={resolve:et,reject:rt};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nt){this.reject(nt)}})}async onAuthEvent(et){const{urlResponse:rt,sessionId:nt,postBody:ot,tenantId:it,error:st,type:at}=et;if(st){this.reject(st);return}const lt={auth:this.auth,requestUri:rt,sessionId:nt,tenantId:it||void 0,postBody:ot||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(at)(lt))}catch(ct){this.reject(ct)}}onError(et){this.reject(et)}getIdpTask(et){switch(et){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(et){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(et),this.unregisterAndCleanUp()}reject(et){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(et),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(et,rt,nt,ot,it){super(et,rt,ot,it),this.provider=nt,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const et=await this.execute();return _assert(et,this.auth,"internal-error"),et}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const et=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],et),this.authWindow.associatedEvent=et,this.resolver._originValidation(this.auth).catch(rt=>{this.reject(rt)}),this.resolver._isIframeWebStorageSupported(this.auth,rt=>{rt||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var et;return((et=this.authWindow)===null||et===void 0?void 0:et.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const et=()=>{var rt,nt;if(!((nt=(rt=this.authWindow)===null||rt===void 0?void 0:rt.window)===null||nt===void 0)&&nt.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(et,_POLL_WINDOW_CLOSE_TIMEOUT.get())};et()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(et,rt,nt=!1){super(et,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],rt,void 0,nt),this.eventId=null}async execute(){let et=redirectOutcomeMap.get(this.auth._key());if(!et){try{const nt=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;et=()=>Promise.resolve(nt)}catch(rt){et=()=>Promise.reject(rt)}redirectOutcomeMap.set(this.auth._key(),et)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),et()}async onAuthEvent(et){if(et.type==="signInViaRedirect")return super.onAuthEvent(et);if(et.type==="unknown"){this.resolve(null);return}if(et.eventId){const rt=await this.auth._redirectUserForId(et.eventId);if(rt)return this.user=rt,super.onAuthEvent(et);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(_e,et){const rt=pendingRedirectKey(et),nt=resolverPersistence(_e);if(!await nt._isAvailable())return!1;const ot=await nt._get(rt)==="true";return await nt._remove(rt),ot}function _overrideRedirectResult(_e,et){redirectOutcomeMap.set(_e._key(),et)}function resolverPersistence(_e){return _getInstance(_e._redirectPersistence)}function pendingRedirectKey(_e){return _persistenceKeyName(PENDING_REDIRECT_KEY,_e.config.apiKey,_e.name)}async function _getRedirectResult(_e,et,rt=!1){const nt=_castAuth(_e),ot=_withDefaultResolver(nt,et),st=await new RedirectAction(nt,ot,rt).execute();return st&&!rt&&(delete st.user._redirectEventId,await nt._persistUserIfCurrent(st.user),await nt._setRedirectUser(null,et)),st}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(et){this.auth=et,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(et){this.consumers.add(et),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,et)&&(this.sendToConsumer(this.queuedRedirectEvent,et),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(et){this.consumers.delete(et)}onEvent(et){if(this.hasEventBeenHandled(et))return!1;let rt=!1;return this.consumers.forEach(nt=>{this.isEventForConsumer(et,nt)&&(rt=!0,this.sendToConsumer(et,nt),this.saveEventToCache(et))}),this.hasHandledPotentialRedirect||!isRedirectEvent(et)||(this.hasHandledPotentialRedirect=!0,rt||(this.queuedRedirectEvent=et,rt=!0)),rt}sendToConsumer(et,rt){var nt;if(et.error&&!isNullRedirectEvent(et)){const ot=((nt=et.error.code)===null||nt===void 0?void 0:nt.split("auth/")[1])||"internal-error";rt.onError(_createError(this.auth,ot))}else rt.onAuthEvent(et)}isEventForConsumer(et,rt){const nt=rt.eventId===null||!!et.eventId&&et.eventId===rt.eventId;return rt.filter.includes(et.type)&&nt}hasEventBeenHandled(et){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(et))}saveEventToCache(et){this.cachedEventUids.add(eventUid(et)),this.lastProcessedEventTime=Date.now()}}function eventUid(_e){return[_e.type,_e.eventId,_e.sessionId,_e.tenantId].filter(et=>et).join("-")}function isNullRedirectEvent({type:_e,error:et}){return _e==="unknown"&&(et==null?void 0:et.code)==="auth/no-auth-event"}function isRedirectEvent(_e){switch(_e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(_e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(_e,et={}){return _performApiRequest(_e,"GET","/v1/projects",et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(_e){if(_e.config.emulator)return;const{authorizedDomains:et}=await _getProjectConfig(_e);for(const rt of et)try{if(matchDomain(rt))return}catch{}_fail(_e,"unauthorized-domain")}function matchDomain(_e){const et=_getCurrentUrl(),{protocol:rt,hostname:nt}=new URL(et);if(_e.startsWith("chrome-extension://")){const st=new URL(_e);return st.hostname===""&&nt===""?rt==="chrome-extension:"&&_e.replace("chrome-extension://","")===et.replace("chrome-extension://",""):rt==="chrome-extension:"&&st.hostname===nt}if(!HTTP_REGEX.test(rt))return!1;if(IP_ADDRESS_REGEX.test(_e))return nt===_e;const ot=_e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ot+"|"+ot+")$","i").test(nt)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const _e=_window().___jsl;if(_e!=null&&_e.H){for(const et of Object.keys(_e.H))if(_e.H[et].r=_e.H[et].r||[],_e.H[et].L=_e.H[et].L||[],_e.H[et].r=[..._e.H[et].L],_e.CP)for(let rt=0;rt<_e.CP.length;rt++)_e.CP[rt]=null}}function loadGapi(_e){return new Promise((et,rt)=>{var nt,ot,it;function st(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{et(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),rt(_createError(_e,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((ot=(nt=_window().gapi)===null||nt===void 0?void 0:nt.iframes)===null||ot===void 0)&&ot.Iframe)et(gapi.iframes.getContext());else if(!((it=_window().gapi)===null||it===void 0)&&it.load)st();else{const at=_generateCallbackName("iframefcb");return _window()[at]=()=>{gapi.load?st():rt(_createError(_e,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${at}`).catch(lt=>rt(lt))}}).catch(et=>{throw cachedGApiLoader=null,et})}let cachedGApiLoader=null;function _loadGapi(_e){return cachedGApiLoader=cachedGApiLoader||loadGapi(_e),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(_e){const et=_e.config;_assert(et.authDomain,_e,"auth-domain-config-required");const rt=et.emulator?_emulatorUrl(et,EMULATED_IFRAME_PATH):`https://${_e.config.authDomain}/${IFRAME_PATH}`,nt={apiKey:et.apiKey,appName:_e.name,v:SDK_VERSION$1},ot=EID_FROM_APIHOST.get(_e.config.apiHost);ot&&(nt.eid=ot);const it=_e._getFrameworks();return it.length&&(nt.fw=it.join(",")),`${rt}?${querystring(nt).slice(1)}`}async function _openIframe(_e){const et=await _loadGapi(_e),rt=_window().gapi;return _assert(rt,_e,"internal-error"),et.open({where:document.body,url:getIframeUrl(_e),messageHandlersFilter:rt.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},nt=>new Promise(async(ot,it)=>{await nt.restyle({setHideOnLeave:!1});const st=_createError(_e,"network-request-failed"),at=_window().setTimeout(()=>{it(st)},PING_TIMEOUT.get());function lt(){_window().clearTimeout(at),ot(nt)}nt.ping(lt).then(lt,()=>{it(st)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(et){this.window=et,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(_e,et,rt,nt=DEFAULT_WIDTH,ot=DEFAULT_HEIGHT){const it=Math.max((window.screen.availHeight-ot)/2,0).toString(),st=Math.max((window.screen.availWidth-nt)/2,0).toString();let at="";const lt=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:nt.toString(),height:ot.toString(),top:it,left:st}),ct=getUA().toLowerCase();rt&&(at=_isChromeIOS(ct)?TARGET_BLANK:rt),_isFirefox(ct)&&(et=et||FIREFOX_EMPTY_URL,lt.scrollbars="yes");const pt=Object.entries(lt).reduce((ht,[ft,gt])=>`${ht}${ft}=${gt},`,"");if(_isIOSStandalone(ct)&&at!=="_self")return openAsNewWindowIOS(et||"",at),new AuthPopup(null);const ut=window.open(et||"",at,pt);_assert(ut,_e,"popup-blocked");try{ut.focus()}catch{}return new AuthPopup(ut)}function openAsNewWindowIOS(_e,et){const rt=document.createElement("a");rt.href=_e,rt.target=et;const nt=document.createEvent("MouseEvent");nt.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),rt.dispatchEvent(nt)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(_e,et,rt,nt,ot,it){_assert(_e.config.authDomain,_e,"auth-domain-config-required"),_assert(_e.config.apiKey,_e,"invalid-api-key");const st={apiKey:_e.config.apiKey,appName:_e.name,authType:rt,redirectUrl:nt,v:SDK_VERSION$1,eventId:ot};if(et instanceof FederatedAuthProvider){et.setDefaultLanguage(_e.languageCode),st.providerId=et.providerId||"",isEmpty(et.getCustomParameters())||(st.customParameters=JSON.stringify(et.getCustomParameters()));for(const[pt,ut]of Object.entries(it||{}))st[pt]=ut}if(et instanceof BaseOAuthProvider){const pt=et.getScopes().filter(ut=>ut!=="");pt.length>0&&(st.scopes=pt.join(","))}_e.tenantId&&(st.tid=_e.tenantId);const at=st;for(const pt of Object.keys(at))at[pt]===void 0&&delete at[pt];const lt=await _e._getAppCheckToken(),ct=lt?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(lt)}`:"";return`${getHandlerBase(_e)}?${querystring(at).slice(1)}${ct}`}function getHandlerBase({config:_e}){return _e.emulator?_emulatorUrl(_e,EMULATOR_WIDGET_PATH):`https://${_e.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(et,rt,nt,ot){var it;debugAssert((it=this.eventManagers[et._key()])===null||it===void 0?void 0:it.manager,"_initialize() not called before _openPopup()");const st=await _getRedirectUrl(et,rt,nt,_getCurrentUrl(),ot);return _open(et,st,_generateEventId())}async _openRedirect(et,rt,nt,ot){await this._originValidation(et);const it=await _getRedirectUrl(et,rt,nt,_getCurrentUrl(),ot);return _setWindowLocation(it),new Promise(()=>{})}_initialize(et){const rt=et._key();if(this.eventManagers[rt]){const{manager:ot,promise:it}=this.eventManagers[rt];return ot?Promise.resolve(ot):(debugAssert(it,"If manager is not set, promise should be"),it)}const nt=this.initAndGetManager(et);return this.eventManagers[rt]={promise:nt},nt.catch(()=>{delete this.eventManagers[rt]}),nt}async initAndGetManager(et){const rt=await _openIframe(et),nt=new AuthEventManager(et);return rt.register("authEvent",ot=>(_assert(ot==null?void 0:ot.authEvent,et,"invalid-auth-event"),{status:nt.onEvent(ot.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[et._key()]={manager:nt},this.iframes[et._key()]=rt,nt}_isIframeWebStorageSupported(et,rt){this.iframes[et._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},ot=>{var it;const st=(it=ot==null?void 0:ot[0])===null||it===void 0?void 0:it[WEB_STORAGE_SUPPORT_KEY];st!==void 0&&rt(!!st),_fail(et,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(et){const rt=et._key();return this.originValidationPromises[rt]||(this.originValidationPromises[rt]=_validateOrigin(et)),this.originValidationPromises[rt]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$1="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(et){this.auth=et,this.internalListeners=new Map}getUid(){var et;return this.assertAuthConfigured(),((et=this.auth.currentUser)===null||et===void 0?void 0:et.uid)||null}async getToken(et){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(et)}:null}addAuthTokenListener(et){if(this.assertAuthConfigured(),this.internalListeners.has(et))return;const rt=this.auth.onIdTokenChanged(nt=>{et((nt==null?void 0:nt.stsTokenManager.accessToken)||null)});this.internalListeners.set(et,rt),this.updateProactiveRefresh()}removeAuthTokenListener(et){this.assertAuthConfigured();const rt=this.internalListeners.get(et);rt&&(this.internalListeners.delete(et),rt(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(_e){switch(_e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(_e){_registerComponent(new Component("auth",(et,{options:rt})=>{const nt=et.getProvider("app").getImmediate(),ot=et.getProvider("heartbeat"),it=et.getProvider("app-check-internal"),{apiKey:st,authDomain:at}=nt.options;_assert(st&&!st.includes(":"),"invalid-api-key",{appName:nt.name});const lt={apiKey:st,authDomain:at,clientPlatform:_e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(_e)},ct=new AuthImpl(nt,ot,it,lt);return _initializeAuthInstance(ct,rt),ct},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((et,rt,nt)=>{et.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",et=>{const rt=_castAuth(et.getProvider("auth").getImmediate());return(nt=>new AuthInterop(nt))(rt)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$1,getVersionForPlatform(_e)),registerVersion(name$2,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=_e=>async et=>{const rt=et&&await et.getIdTokenResult(),nt=rt&&(new Date().getTime()-Date.parse(rt.issuedAtTime))/1e3;if(nt&&nt>authIdTokenMaxAge)return;const ot=rt==null?void 0:rt.token;lastPostedIdToken!==ot&&(lastPostedIdToken=ot,await fetch(_e,{method:ot?"POST":"DELETE",headers:ot?{Authorization:`Bearer ${ot}`}:{}}))};function getAuth(_e=getApp()){const et=_getProvider(_e,"auth");if(et.isInitialized())return et.getImmediate();const rt=initializeAuth(_e,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),nt=getExperimentalSetting("authTokenSyncURL");if(nt){const it=mintCookieFactory(nt);beforeAuthStateChanged(rt,it,()=>it(rt.currentUser)),onIdTokenChanged(rt,st=>it(st))}const ot=getDefaultEmulatorHost("auth");return ot&&connectAuthEmulator(rt,`http://${ot}`),rt}registerAuth("Browser");const name$1="@firebase/database",version="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(_e){SDK_VERSION=_e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(et){this.domStorage_=et,this.prefix_="firebase:"}set(et,rt){rt==null?this.domStorage_.removeItem(this.prefixedName_(et)):this.domStorage_.setItem(this.prefixedName_(et),stringify(rt))}get(et){const rt=this.domStorage_.getItem(this.prefixedName_(et));return rt==null?null:jsonEval(rt)}remove(et){this.domStorage_.removeItem(this.prefixedName_(et))}prefixedName_(et){return this.prefix_+et}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(et,rt){rt==null?delete this.cache_[et]:this.cache_[et]=rt}get(et){return contains(this.cache_,et)?this.cache_[et]:null}remove(et){delete this.cache_[et]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(_e){try{if(typeof window<"u"&&typeof window[_e]<"u"){const et=window[_e];return et.setItem("firebase:sentinel","cache"),et.removeItem("firebase:sentinel"),new DOMStorageWrapper(et)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let _e=1;return function(){return _e++}}(),sha1=function(_e){const et=stringToByteArray(_e),rt=new Sha1;rt.update(et);const nt=rt.digest();return base64.encodeByteArray(nt)},buildLogMessage_=function(..._e){let et="";for(let rt=0;rt<_e.length;rt++){const nt=_e[rt];Array.isArray(nt)||nt&&typeof nt=="object"&&typeof nt.length=="number"?et+=buildLogMessage_.apply(null,nt):typeof nt=="object"?et+=stringify(nt):et+=nt,et+=" "}return et};let logger=null,firstLog_=!0;const enableLogging$1=function(_e,et){assert(!et||_e===!0||_e===!1,"Can't turn on custom loggers persistently."),_e===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),et&&SessionStorage.set("logging_enabled",!0)):typeof _e=="function"?logger=_e:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(..._e){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const et=buildLogMessage_.apply(null,_e);logger(et)}},logWrapper=function(_e){return function(...et){log(_e,...et)}},error$1=function(..._e){const et="FIREBASE INTERNAL ERROR: "+buildLogMessage_(..._e);logClient.error(et)},fatal=function(..._e){const et=`FIREBASE FATAL ERROR: ${buildLogMessage_(..._e)}`;throw logClient.error(et),new Error(et)},warn=function(..._e){const et="FIREBASE WARNING: "+buildLogMessage_(..._e);logClient.warn(et)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(_e){return typeof _e=="number"&&(_e!==_e||_e===Number.POSITIVE_INFINITY||_e===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(_e){if(document.readyState==="complete")_e();else{let et=!1;const rt=function(){if(!document.body){setTimeout(rt,Math.floor(10));return}et||(et=!0,_e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",rt,!1),window.addEventListener("load",rt,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&rt()}),window.attachEvent("onload",rt))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(_e,et){if(_e===et)return 0;if(_e===MIN_NAME||et===MAX_NAME)return-1;if(et===MIN_NAME||_e===MAX_NAME)return 1;{const rt=tryParseInt(_e),nt=tryParseInt(et);return rt!==null?nt!==null?rt-nt===0?_e.length-et.length:rt-nt:-1:nt!==null?1:_e<et?-1:1}},stringCompare=function(_e,et){return _e===et?0:_e<et?-1:1},requireKey=function(_e,et){if(et&&_e in et)return et[_e];throw new Error("Missing required key ("+_e+") in object: "+stringify(et))},ObjectToUniqueKey=function(_e){if(typeof _e!="object"||_e===null)return stringify(_e);const et=[];for(const nt in _e)et.push(nt);et.sort();let rt="{";for(let nt=0;nt<et.length;nt++)nt!==0&&(rt+=","),rt+=stringify(et[nt]),rt+=":",rt+=ObjectToUniqueKey(_e[et[nt]]);return rt+="}",rt},splitStringBySize=function(_e,et){const rt=_e.length;if(rt<=et)return[_e];const nt=[];for(let ot=0;ot<rt;ot+=et)ot+et>rt?nt.push(_e.substring(ot,rt)):nt.push(_e.substring(ot,ot+et));return nt};function each(_e,et){for(const rt in _e)_e.hasOwnProperty(rt)&&et(rt,_e[rt])}const doubleToIEEE754String=function(_e){assert(!isInvalidJSONNumber(_e),"Invalid JSON number");const et=11,rt=52,nt=(1<<et-1)-1;let ot,it,st,at,lt;_e===0?(it=0,st=0,ot=1/_e===-1/0?1:0):(ot=_e<0,_e=Math.abs(_e),_e>=Math.pow(2,1-nt)?(at=Math.min(Math.floor(Math.log(_e)/Math.LN2),nt),it=at+nt,st=Math.round(_e*Math.pow(2,rt-at)-Math.pow(2,rt))):(it=0,st=Math.round(_e/Math.pow(2,1-nt-rt))));const ct=[];for(lt=rt;lt;lt-=1)ct.push(st%2?1:0),st=Math.floor(st/2);for(lt=et;lt;lt-=1)ct.push(it%2?1:0),it=Math.floor(it/2);ct.push(ot?1:0),ct.reverse();const pt=ct.join("");let ut="";for(lt=0;lt<64;lt+=8){let ht=parseInt(pt.substr(lt,8),2).toString(16);ht.length===1&&(ht="0"+ht),ut=ut+ht}return ut.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(_e){if(INTEGER_REGEXP_.test(_e)){const et=Number(_e);if(et>=INTEGER_32_MIN&&et<=INTEGER_32_MAX)return et}return null},exceptionGuard=function(_e){try{_e()}catch(et){setTimeout(()=>{const rt=et.stack||"";throw warn("Exception was thrown by user callback.",rt),et},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(_e,et){const rt=setTimeout(_e,et);return typeof rt=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(rt):typeof rt=="object"&&rt.unref&&rt.unref(),rt};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(et,rt){this.appName_=et,this.appCheckProvider=rt,this.appCheck=rt==null?void 0:rt.getImmediate({optional:!0}),this.appCheck||rt==null||rt.get().then(nt=>this.appCheck=nt)}getToken(et){return this.appCheck?this.appCheck.getToken(et):new Promise((rt,nt)=>{setTimeout(()=>{this.appCheck?this.getToken(et).then(rt,nt):rt(null)},0)})}addTokenChangeListener(et){var rt;(rt=this.appCheckProvider)===null||rt===void 0||rt.get().then(nt=>nt.addTokenListener(et))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(et,rt,nt){this.appName_=et,this.firebaseOptions_=rt,this.authProvider_=nt,this.auth_=null,this.auth_=nt.getImmediate({optional:!0}),this.auth_||nt.onInit(ot=>this.auth_=ot)}getToken(et){return this.auth_?this.auth_.getToken(et).catch(rt=>rt&&rt.code==="auth/token-not-initialized"?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(rt)):new Promise((rt,nt)=>{setTimeout(()=>{this.auth_?this.getToken(et).then(rt,nt):rt(null)},0)})}addTokenChangeListener(et){this.auth_?this.auth_.addAuthTokenListener(et):this.authProvider_.get().then(rt=>rt.addAuthTokenListener(et))}removeTokenChangeListener(et){this.authProvider_.get().then(rt=>rt.removeAuthTokenListener(et))}notifyForInvalidToken(){let et='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?et+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?et+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':et+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(et)}}class EmulatorTokenProvider{constructor(et){this.accessToken=et}getToken(et){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(et){et(this.accessToken)}removeTokenChangeListener(et){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(et,rt,nt,ot,it=!1,st="",at=!1,lt=!1){this.secure=rt,this.namespace=nt,this.webSocketOnly=ot,this.nodeAdmin=it,this.persistenceKey=st,this.includeNamespaceInQueryParams=at,this.isUsingEmulator=lt,this._host=et.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+et)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(et){et!==this.internalHost&&(this.internalHost=et,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let et=this.toURLString();return this.persistenceKey&&(et+="<"+this.persistenceKey+">"),et}toURLString(){const et=this.secure?"https://":"http://",rt=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${et}${this.host}/${rt}`}}function repoInfoNeedsQueryParam(_e){return _e.host!==_e.internalHost||_e.isCustomHost()||_e.includeNamespaceInQueryParams}function repoInfoConnectionURL(_e,et,rt){assert(typeof et=="string","typeof type must == string"),assert(typeof rt=="object","typeof params must == object");let nt;if(et===WEBSOCKET)nt=(_e.secure?"wss://":"ws://")+_e.internalHost+"/.ws?";else if(et===LONG_POLLING)nt=(_e.secure?"https://":"http://")+_e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+et);repoInfoNeedsQueryParam(_e)&&(rt.ns=_e.namespace);const ot=[];return each(rt,(it,st)=>{ot.push(it+"="+st)}),nt+ot.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(et,rt=1){contains(this.counters_,et)||(this.counters_[et]=0),this.counters_[et]+=rt}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(_e){const et=_e.toString();return collections[et]||(collections[et]=new StatsCollection),collections[et]}function statsManagerGetOrCreateReporter(_e,et){const rt=_e.toString();return reporters[rt]||(reporters[rt]=et()),reporters[rt]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(et){this.onMessage_=et,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(et,rt){this.closeAfterResponse=et,this.onClose=rt,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(et,rt){for(this.pendingResponses[et]=rt;this.pendingResponses[this.currentResponseNum];){const nt=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let ot=0;ot<nt.length;++ot)nt[ot]&&exceptionGuard(()=>{this.onMessage_(nt[ot])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(et,rt,nt,ot,it,st,at){this.connId=et,this.repoInfo=rt,this.applicationId=nt,this.appCheckToken=ot,this.authToken=it,this.transportSessionId=st,this.lastSessionId=at,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(et),this.stats_=statsManagerGetCollection(rt),this.urlFn=lt=>(this.appCheckToken&&(lt[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(rt,LONG_POLLING,lt))}open(et,rt){this.curSegmentNum=0,this.onDisconnect_=rt,this.myPacketOrderer=new PacketReceiver(et),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...it)=>{const[st,at,lt,ct,pt]=it;if(this.incrementIncomingBytes_(it),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,st===FIREBASE_LONGPOLL_START_PARAM)this.id=at,this.password=lt;else if(st===FIREBASE_LONGPOLL_CLOSE_COMMAND)at?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(at,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+st)},(...it)=>{const[st,at]=it;this.incrementIncomingBytes_(it),this.myPacketOrderer.handleResponse(st,at)},()=>{this.onClosed_()},this.urlFn);const nt={};nt[FIREBASE_LONGPOLL_START_PARAM]="t",nt[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(nt[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),nt[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(nt[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(nt[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(nt[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(nt[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(nt[REFERER_PARAM]=FORGE_REF);const ot=this.urlFn(nt);this.log_("Connecting via long-poll to "+ot),this.scriptTagHolder.addTag(ot,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(et){const rt=stringify(et);this.bytesSent+=rt.length,this.stats_.incrementCounter("bytes_sent",rt.length);const nt=base64Encode(rt),ot=splitStringBySize(nt,MAX_PAYLOAD_SIZE);for(let it=0;it<ot.length;it++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,ot.length,ot[it]),this.curSegmentNum++}addDisconnectPingFrame(et,rt){this.myDisconnFrame=document.createElement("iframe");const nt={};nt[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",nt[FIREBASE_LONGPOLL_ID_PARAM]=et,nt[FIREBASE_LONGPOLL_PW_PARAM]=rt,this.myDisconnFrame.src=this.urlFn(nt),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(et){const rt=stringify(et).length;this.bytesReceived+=rt,this.stats_.incrementCounter("bytes_received",rt)}}class FirebaseIFrameScriptHolder{constructor(et,rt,nt,ot){this.onDisconnect=nt,this.urlFn=ot,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=et,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=rt,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let it="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(it='<script>document.domain="'+document.domain+'";<\/script>');const st="<html><body>"+it+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(st),this.myIFrame.doc.close()}catch(at){log("frame writing exception"),at.stack&&log(at.stack),log(at)}}}static createIFrame_(){const et=document.createElement("iframe");if(et.style.display="none",document.body){document.body.appendChild(et);try{et.contentWindow.document||log("No IE domain setting required")}catch{const nt=document.domain;et.src="javascript:void((function(){document.open();document.domain='"+nt+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return et.contentDocument?et.doc=et.contentDocument:et.contentWindow?et.doc=et.contentWindow.document:et.document&&(et.doc=et.document),et}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const et=this.onDisconnect;et&&(this.onDisconnect=null,et())}startLongPoll(et,rt){for(this.myID=et,this.myPW=rt,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const et={};et[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,et[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,et[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let rt=this.urlFn(et),nt="",ot=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+nt.length<=MAX_URL_DATA_SIZE;){const st=this.pendingSegs.shift();nt=nt+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+ot+"="+st.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+ot+"="+st.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+ot+"="+st.d,ot++}return rt=rt+nt,this.addLongPollTag_(rt,this.currentSerial),!0}else return!1}enqueueSegment(et,rt,nt){this.pendingSegs.push({seg:et,ts:rt,d:nt}),this.alive&&this.newRequest_()}addLongPollTag_(et,rt){this.outstandingRequests.add(rt);const nt=()=>{this.outstandingRequests.delete(rt),this.newRequest_()},ot=setTimeout(nt,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),it=()=>{clearTimeout(ot),nt()};this.addTag(et,it)}addTag(et,rt){setTimeout(()=>{try{if(!this.sendNewPolls)return;const nt=this.myIFrame.doc.createElement("script");nt.type="text/javascript",nt.async=!0,nt.src=et,nt.onload=nt.onreadystatechange=function(){const ot=nt.readyState;(!ot||ot==="loaded"||ot==="complete")&&(nt.onload=nt.onreadystatechange=null,nt.parentNode&&nt.parentNode.removeChild(nt),rt())},nt.onerror=()=>{log("Long-poll script failed to load: "+et),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(nt)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(et,rt,nt,ot,it,st,at){this.connId=et,this.applicationId=nt,this.appCheckToken=ot,this.authToken=it,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(rt),this.connURL=WebSocketConnection.connectionURL_(rt,st,at,ot,nt),this.nodeAdmin=rt.nodeAdmin}static connectionURL_(et,rt,nt,ot,it){const st={};return st[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(st[REFERER_PARAM]=FORGE_REF),rt&&(st[TRANSPORT_SESSION_PARAM]=rt),nt&&(st[LAST_SESSION_PARAM]=nt),ot&&(st[APP_CHECK_TOKEN_PARAM]=ot),it&&(st[APPLICATION_ID_PARAM]=it),repoInfoConnectionURL(et,WEBSOCKET,st)}open(et,rt){this.onDisconnect=rt,this.onMessage=et,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let nt;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],nt)}catch(nt){this.log_("Error instantiating WebSocket.");const ot=nt.message||nt.data;ot&&this.log_(ot),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=nt=>{this.handleIncomingFrame(nt)},this.mySock.onerror=nt=>{this.log_("WebSocket error.  Closing connection.");const ot=nt.message||nt.data;ot&&this.log_(ot),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let et=!1;if(typeof navigator<"u"&&navigator.userAgent){const rt=/Android ([0-9]{0,}\.[0-9]{0,})/,nt=navigator.userAgent.match(rt);nt&&nt.length>1&&parseFloat(nt[1])<4.4&&(et=!0)}return!et&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(et){if(this.frames.push(et),this.frames.length===this.totalFrames){const rt=this.frames.join("");this.frames=null;const nt=jsonEval(rt);this.onMessage(nt)}}handleNewFrameCount_(et){this.totalFrames=et,this.frames=[]}extractFrameCount_(et){if(assert(this.frames===null,"We already have a frame buffer"),et.length<=6){const rt=Number(et);if(!isNaN(rt))return this.handleNewFrameCount_(rt),null}return this.handleNewFrameCount_(1),et}handleIncomingFrame(et){if(this.mySock===null)return;const rt=et.data;if(this.bytesReceived+=rt.length,this.stats_.incrementCounter("bytes_received",rt.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(rt);else{const nt=this.extractFrameCount_(rt);nt!==null&&this.appendFrame_(nt)}}send(et){this.resetKeepAlive();const rt=stringify(et);this.bytesSent+=rt.length,this.stats_.incrementCounter("bytes_sent",rt.length);const nt=splitStringBySize(rt,WEBSOCKET_MAX_FRAME_SIZE);nt.length>1&&this.sendString_(String(nt.length));for(let ot=0;ot<nt.length;ot++)this.sendString_(nt[ot])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(et){try{this.mySock.send(et)}catch(rt){this.log_("Exception thrown from WebSocket.send():",rt.message||rt.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(et){this.initTransports_(et)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(et){const rt=WebSocketConnection&&WebSocketConnection.isAvailable();let nt=rt&&!WebSocketConnection.previouslyFailed();if(et.webSocketOnly&&(rt||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),nt=!0),nt)this.transports_=[WebSocketConnection];else{const ot=this.transports_=[];for(const it of TransportManager.ALL_TRANSPORTS)it&&it.isAvailable()&&ot.push(it);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(et,rt,nt,ot,it,st,at,lt,ct,pt){this.id=et,this.repoInfo_=rt,this.applicationId_=nt,this.appCheckToken_=ot,this.authToken_=it,this.onMessage_=st,this.onReady_=at,this.onDisconnect_=lt,this.onKill_=ct,this.lastSessionId=pt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(rt),this.log_("Connection created"),this.start_()}start_(){const et=this.transportManager_.initialTransport();this.conn_=new et(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=et.responsesRequiredToBeHealthy||0;const rt=this.connReceiver_(this.conn_),nt=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(rt,nt)},Math.floor(0));const ot=et.healthyTimeout||0;ot>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(ot)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(et){return rt=>{et===this.conn_?this.onConnectionLost_(rt):et===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(et){return rt=>{this.state_!==2&&(et===this.rx_?this.onPrimaryMessageReceived_(rt):et===this.secondaryConn_?this.onSecondaryMessageReceived_(rt):this.log_("message on old connection"))}}sendRequest(et){const rt={t:"d",d:et};this.sendData_(rt)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(et){if(MESSAGE_TYPE in et){const rt=et[MESSAGE_TYPE];rt===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():rt===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):rt===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(et){const rt=requireKey("t",et),nt=requireKey("d",et);if(rt==="c")this.onSecondaryControl_(nt);else if(rt==="d")this.pendingDataMessages.push(nt);else throw new Error("Unknown protocol layer: "+rt)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(et){const rt=requireKey("t",et),nt=requireKey("d",et);rt==="c"?this.onControl_(nt):rt==="d"&&this.onDataMessage_(nt)}onDataMessage_(et){this.onPrimaryResponse_(),this.onMessage_(et)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(et){const rt=requireKey(MESSAGE_TYPE,et);if(MESSAGE_DATA in et){const nt=et[MESSAGE_DATA];if(rt===SERVER_HELLO){const ot=Object.assign({},nt);this.repoInfo_.isUsingEmulator&&(ot.h=this.repoInfo_.host),this.onHandshake_(ot)}else if(rt===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let ot=0;ot<this.pendingDataMessages.length;++ot)this.onDataMessage_(this.pendingDataMessages[ot]);this.pendingDataMessages=[],this.tryCleanupConnection()}else rt===CONTROL_SHUTDOWN?this.onConnectionShutdown_(nt):rt===CONTROL_RESET?this.onReset_(nt):rt===CONTROL_ERROR?error$1("Server Error: "+nt):rt===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error$1("Unknown control packet command: "+rt)}}onHandshake_(et){const rt=et.ts,nt=et.v,ot=et.h;this.sessionId=et.s,this.repoInfo_.host=ot,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,rt),PROTOCOL_VERSION!==nt&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const et=this.transportManager_.upgradeTransport();et&&this.startUpgrade_(et)}startUpgrade_(et){this.secondaryConn_=new et(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=et.responsesRequiredToBeHealthy||0;const rt=this.connReceiver_(this.secondaryConn_),nt=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(rt,nt),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(et){this.log_("Reset packet received.  New host: "+et),this.repoInfo_.host=et,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(et,rt){this.log_("Realtime connection established."),this.conn_=et,this.state_=1,this.onReady_&&(this.onReady_(rt,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const et=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===et||this.rx_===et)&&this.close()}onConnectionLost_(et){this.conn_=null,!et&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(et){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(et),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(et){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(et)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(et,rt,nt,ot){}merge(et,rt,nt,ot){}refreshAuthToken(et){}refreshAppCheckToken(et){}onDisconnectPut(et,rt,nt){}onDisconnectMerge(et,rt,nt){}onDisconnectCancel(et,rt){}reportStats(et){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventEmitter{constructor(et){this.allowedEvents_=et,this.listeners_={},assert(Array.isArray(et)&&et.length>0,"Requires a non-empty array")}trigger(et,...rt){if(Array.isArray(this.listeners_[et])){const nt=[...this.listeners_[et]];for(let ot=0;ot<nt.length;ot++)nt[ot].callback.apply(nt[ot].context,rt)}}on(et,rt,nt){this.validateEventType_(et),this.listeners_[et]=this.listeners_[et]||[],this.listeners_[et].push({callback:rt,context:nt});const ot=this.getInitialEvent(et);ot&&rt.apply(nt,ot)}off(et,rt,nt){this.validateEventType_(et);const ot=this.listeners_[et]||[];for(let it=0;it<ot.length;it++)if(ot[it].callback===rt&&(!nt||nt===ot[it].context)){ot.splice(it,1);return}}validateEventType_(et){assert(this.allowedEvents_.find(rt=>rt===et),"Unknown event: "+et)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(et){return assert(et==="online","Unknown event type: "+et),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;class Path{constructor(et,rt){if(rt===void 0){this.pieces_=et.split("/");let nt=0;for(let ot=0;ot<this.pieces_.length;ot++)this.pieces_[ot].length>0&&(this.pieces_[nt]=this.pieces_[ot],nt++);this.pieces_.length=nt,this.pieceNum_=0}else this.pieces_=et,this.pieceNum_=rt}toString(){let et="";for(let rt=this.pieceNum_;rt<this.pieces_.length;rt++)this.pieces_[rt]!==""&&(et+="/"+this.pieces_[rt]);return et||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(_e){return _e.pieceNum_>=_e.pieces_.length?null:_e.pieces_[_e.pieceNum_]}function pathGetLength(_e){return _e.pieces_.length-_e.pieceNum_}function pathPopFront(_e){let et=_e.pieceNum_;return et<_e.pieces_.length&&et++,new Path(_e.pieces_,et)}function pathGetBack(_e){return _e.pieceNum_<_e.pieces_.length?_e.pieces_[_e.pieces_.length-1]:null}function pathToUrlEncodedString(_e){let et="";for(let rt=_e.pieceNum_;rt<_e.pieces_.length;rt++)_e.pieces_[rt]!==""&&(et+="/"+encodeURIComponent(String(_e.pieces_[rt])));return et||"/"}function pathSlice(_e,et=0){return _e.pieces_.slice(_e.pieceNum_+et)}function pathParent(_e){if(_e.pieceNum_>=_e.pieces_.length)return null;const et=[];for(let rt=_e.pieceNum_;rt<_e.pieces_.length-1;rt++)et.push(_e.pieces_[rt]);return new Path(et,0)}function pathChild(_e,et){const rt=[];for(let nt=_e.pieceNum_;nt<_e.pieces_.length;nt++)rt.push(_e.pieces_[nt]);if(et instanceof Path)for(let nt=et.pieceNum_;nt<et.pieces_.length;nt++)rt.push(et.pieces_[nt]);else{const nt=et.split("/");for(let ot=0;ot<nt.length;ot++)nt[ot].length>0&&rt.push(nt[ot])}return new Path(rt,0)}function pathIsEmpty(_e){return _e.pieceNum_>=_e.pieces_.length}function newRelativePath(_e,et){const rt=pathGetFront(_e),nt=pathGetFront(et);if(rt===null)return et;if(rt===nt)return newRelativePath(pathPopFront(_e),pathPopFront(et));throw new Error("INTERNAL ERROR: innerPath ("+et+") is not within outerPath ("+_e+")")}function pathEquals(_e,et){if(pathGetLength(_e)!==pathGetLength(et))return!1;for(let rt=_e.pieceNum_,nt=et.pieceNum_;rt<=_e.pieces_.length;rt++,nt++)if(_e.pieces_[rt]!==et.pieces_[nt])return!1;return!0}function pathContains(_e,et){let rt=_e.pieceNum_,nt=et.pieceNum_;if(pathGetLength(_e)>pathGetLength(et))return!1;for(;rt<_e.pieces_.length;){if(_e.pieces_[rt]!==et.pieces_[nt])return!1;++rt,++nt}return!0}class ValidationPath{constructor(et,rt){this.errorPrefix_=rt,this.parts_=pathSlice(et,0),this.byteLength_=Math.max(1,this.parts_.length);for(let nt=0;nt<this.parts_.length;nt++)this.byteLength_+=stringLength(this.parts_[nt]);validationPathCheckValid(this)}}function validationPathPush(_e,et){_e.parts_.length>0&&(_e.byteLength_+=1),_e.parts_.push(et),_e.byteLength_+=stringLength(et),validationPathCheckValid(_e)}function validationPathPop(_e){const et=_e.parts_.pop();_e.byteLength_-=stringLength(et),_e.parts_.length>0&&(_e.byteLength_-=1)}function validationPathCheckValid(_e){if(_e.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(_e.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+_e.byteLength_+").");if(_e.parts_.length>MAX_PATH_DEPTH)throw new Error(_e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(_e))}function validationPathToErrorString(_e){return _e.parts_.length===0?"":"in property '"+_e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let et,rt;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(rt="visibilitychange",et="hidden"):typeof document.mozHidden<"u"?(rt="mozvisibilitychange",et="mozHidden"):typeof document.msHidden<"u"?(rt="msvisibilitychange",et="msHidden"):typeof document.webkitHidden<"u"&&(rt="webkitvisibilitychange",et="webkitHidden")),this.visible_=!0,rt&&document.addEventListener(rt,()=>{const nt=!document[et];nt!==this.visible_&&(this.visible_=nt,this.trigger("visible",nt))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(et){return assert(et==="visible","Unknown event type: "+et),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(et,rt,nt,ot,it,st,at,lt){if(super(),this.repoInfo_=et,this.applicationId_=rt,this.onDataUpdate_=nt,this.onConnectStatus_=ot,this.onServerInfoUpdate_=it,this.authTokenProvider_=st,this.appCheckTokenProvider_=at,this.authOverride_=lt,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,lt&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),et.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(et,rt,nt){const ot=++this.requestNumber_,it={r:ot,a:et,b:rt};this.log_(stringify(it)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(it),nt&&(this.requestCBHash_[ot]=nt)}get(et){this.initConnection_();const rt=new Deferred,ot={action:"g",request:{p:et._path.toString(),q:et._queryObject},onComplete:st=>{const at=st.d;st.s==="ok"?rt.resolve(at):rt.reject(at)}};this.outstandingGets_.push(ot),this.outstandingGetCount_++;const it=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(it),rt.promise}listen(et,rt,nt,ot){this.initConnection_();const it=et._queryIdentifier,st=et._path.toString();this.log_("Listen called for "+st+" "+it),this.listens.has(st)||this.listens.set(st,new Map),assert(et._queryParams.isDefault()||!et._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(st).has(it),"listen() called twice for same path/queryId.");const at={onComplete:ot,hashFn:rt,query:et,tag:nt};this.listens.get(st).set(it,at),this.connected_&&this.sendListen_(at)}sendGet_(et){const rt=this.outstandingGets_[et];this.sendRequest("g",rt.request,nt=>{delete this.outstandingGets_[et],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),rt.onComplete&&rt.onComplete(nt)})}sendListen_(et){const rt=et.query,nt=rt._path.toString(),ot=rt._queryIdentifier;this.log_("Listen on "+nt+" for "+ot);const it={p:nt},st="q";et.tag&&(it.q=rt._queryObject,it.t=et.tag),it.h=et.hashFn(),this.sendRequest(st,it,at=>{const lt=at.d,ct=at.s;PersistentConnection.warnOnListenWarnings_(lt,rt),(this.listens.get(nt)&&this.listens.get(nt).get(ot))===et&&(this.log_("listen response",at),ct!=="ok"&&this.removeListen_(nt,ot),et.onComplete&&et.onComplete(ct,lt))})}static warnOnListenWarnings_(et,rt){if(et&&typeof et=="object"&&contains(et,"w")){const nt=safeGet(et,"w");if(Array.isArray(nt)&&~nt.indexOf("no_index")){const ot='".indexOn": "'+rt._queryParams.getIndex().toString()+'"',it=rt._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${ot} at ${it} to your security rules for better performance.`)}}}refreshAuthToken(et){this.authToken_=et,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(et)}reduceReconnectDelayIfAdminCredential_(et){(et&&et.length===40||isAdmin(et))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(et){this.appCheckToken_=et,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const et=this.authToken_,rt=isValidFormat(et)?"auth":"gauth",nt={cred:et};this.authOverride_===null?nt.noauth=!0:typeof this.authOverride_=="object"&&(nt.authvar=this.authOverride_),this.sendRequest(rt,nt,ot=>{const it=ot.s,st=ot.d||"error";this.authToken_===et&&(it==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(it,st))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},et=>{const rt=et.s,nt=et.d||"error";rt==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(rt,nt)})}unlisten(et,rt){const nt=et._path.toString(),ot=et._queryIdentifier;this.log_("Unlisten called for "+nt+" "+ot),assert(et._queryParams.isDefault()||!et._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(nt,ot)&&this.connected_&&this.sendUnlisten_(nt,ot,et._queryObject,rt)}sendUnlisten_(et,rt,nt,ot){this.log_("Unlisten on "+et+" for "+rt);const it={p:et},st="n";ot&&(it.q=nt,it.t=ot),this.sendRequest(st,it)}onDisconnectPut(et,rt,nt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",et,rt,nt):this.onDisconnectRequestQueue_.push({pathString:et,action:"o",data:rt,onComplete:nt})}onDisconnectMerge(et,rt,nt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",et,rt,nt):this.onDisconnectRequestQueue_.push({pathString:et,action:"om",data:rt,onComplete:nt})}onDisconnectCancel(et,rt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",et,null,rt):this.onDisconnectRequestQueue_.push({pathString:et,action:"oc",data:null,onComplete:rt})}sendOnDisconnect_(et,rt,nt,ot){const it={p:rt,d:nt};this.log_("onDisconnect "+et,it),this.sendRequest(et,it,st=>{ot&&setTimeout(()=>{ot(st.s,st.d)},Math.floor(0))})}put(et,rt,nt,ot){this.putInternal("p",et,rt,nt,ot)}merge(et,rt,nt,ot){this.putInternal("m",et,rt,nt,ot)}putInternal(et,rt,nt,ot,it){this.initConnection_();const st={p:rt,d:nt};it!==void 0&&(st.h=it),this.outstandingPuts_.push({action:et,request:st,onComplete:ot}),this.outstandingPutCount_++;const at=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(at):this.log_("Buffering put: "+rt)}sendPut_(et){const rt=this.outstandingPuts_[et].action,nt=this.outstandingPuts_[et].request,ot=this.outstandingPuts_[et].onComplete;this.outstandingPuts_[et].queued=this.connected_,this.sendRequest(rt,nt,it=>{this.log_(rt+" response",it),delete this.outstandingPuts_[et],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),ot&&ot(it.s,it.d)})}reportStats(et){if(this.connected_){const rt={c:et};this.log_("reportStats",rt),this.sendRequest("s",rt,nt=>{if(nt.s!=="ok"){const it=nt.d;this.log_("reportStats","Error sending stats: "+it)}})}}onDataMessage_(et){if("r"in et){this.log_("from server: "+stringify(et));const rt=et.r,nt=this.requestCBHash_[rt];nt&&(delete this.requestCBHash_[rt],nt(et.b))}else{if("error"in et)throw"A server-side error has occurred: "+et.error;"a"in et&&this.onDataPush_(et.a,et.b)}}onDataPush_(et,rt){this.log_("handleServerMessage",et,rt),et==="d"?this.onDataUpdate_(rt.p,rt.d,!1,rt.t):et==="m"?this.onDataUpdate_(rt.p,rt.d,!0,rt.t):et==="c"?this.onListenRevoked_(rt.p,rt.q):et==="ac"?this.onAuthRevoked_(rt.s,rt.d):et==="apc"?this.onAppCheckRevoked_(rt.s,rt.d):et==="sd"?this.onSecurityDebugPacket_(rt):error$1("Unrecognized action received from server: "+stringify(et)+`
Are you using the latest client?`)}onReady_(et,rt){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(et),this.lastSessionId=rt,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(et){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(et))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(et){et&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=et}onOnline_(et){et?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const et=new Date().getTime()-this.lastConnectionAttemptTime_;let rt=Math.max(0,this.reconnectDelay_-et);rt=Math.random()*rt,this.log_("Trying to reconnect in "+rt+"ms"),this.scheduleConnect_(rt),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const et=this.onDataMessage_.bind(this),rt=this.onReady_.bind(this),nt=this.onRealtimeDisconnect_.bind(this),ot=this.id+":"+PersistentConnection.nextConnectionId_++,it=this.lastSessionId;let st=!1,at=null;const lt=function(){at?at.close():(st=!0,nt())},ct=function(ut){assert(at,"sendRequest call when we're not connected not allowed."),at.sendRequest(ut)};this.realtime_={close:lt,sendRequest:ct};const pt=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[ut,ht]=await Promise.all([this.authTokenProvider_.getToken(pt),this.appCheckTokenProvider_.getToken(pt)]);st?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=ut&&ut.accessToken,this.appCheckToken_=ht&&ht.token,at=new Connection(ot,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,et,rt,nt,ft=>{warn(ft+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},it))}catch(ut){this.log_("Failed to get token: "+ut),st||(this.repoInfo_.nodeAdmin&&warn(ut),lt())}}}interrupt(et){log("Interrupting connection for reason: "+et),this.interruptReasons_[et]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(et){log("Resuming connection for reason: "+et),delete this.interruptReasons_[et],isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(et){const rt=et-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:rt})}cancelSentTransactions_(){for(let et=0;et<this.outstandingPuts_.length;et++){const rt=this.outstandingPuts_[et];rt&&"h"in rt.request&&rt.queued&&(rt.onComplete&&rt.onComplete("disconnect"),delete this.outstandingPuts_[et],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(et,rt){let nt;rt?nt=rt.map(it=>ObjectToUniqueKey(it)).join("$"):nt="default";const ot=this.removeListen_(et,nt);ot&&ot.onComplete&&ot.onComplete("permission_denied")}removeListen_(et,rt){const nt=new Path(et).toString();let ot;if(this.listens.has(nt)){const it=this.listens.get(nt);ot=it.get(rt),it.delete(rt),it.size===0&&this.listens.delete(nt)}else ot=void 0;return ot}onAuthRevoked_(et,rt){log("Auth token revoked: "+et+"/"+rt),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(et==="invalid_token"||et==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(et,rt){log("App check token revoked: "+et+"/"+rt),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(et==="invalid_token"||et==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(et){this.securityDebugCallback_?this.securityDebugCallback_(et):"msg"in et&&console.log("FIREBASE: "+et.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const et of this.listens.values())for(const rt of et.values())this.sendListen_(rt);for(let et=0;et<this.outstandingPuts_.length;et++)this.outstandingPuts_[et]&&this.sendPut_(et);for(;this.onDisconnectRequestQueue_.length;){const et=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(et.action,et.pathString,et.data,et.onComplete)}for(let et=0;et<this.outstandingGets_.length;et++)this.outstandingGets_[et]&&this.sendGet_(et)}sendConnectStats_(){const et={};let rt="js";et["sdk."+rt+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?et["framework.cordova"]=1:isReactNative()&&(et["framework.reactnative"]=1),this.reportStats(et)}shouldReconnect_(){const et=OnlineMonitor.getInstance().currentlyOnline();return isEmpty(this.interruptReasons_)&&et}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(et,rt){this.name=et,this.node=rt}static Wrap(et,rt){return new NamedNode(et,rt)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(et,rt){const nt=new NamedNode(MIN_NAME,et),ot=new NamedNode(MIN_NAME,rt);return this.compare(nt,ot)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(et){__EMPTY_NODE=et}compare(et,rt){return nameCompare(et.name,rt.name)}isDefinedOn(et){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(et,rt){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(et,rt){return assert(typeof et=="string","KeyIndex indexValue must always be a string."),new NamedNode(et,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(et,rt,nt,ot,it=null){this.isReverse_=ot,this.resultGenerator_=it,this.nodeStack_=[];let st=1;for(;!et.isEmpty();)if(et=et,st=rt?nt(et.key,rt):1,ot&&(st*=-1),st<0)this.isReverse_?et=et.left:et=et.right;else if(st===0){this.nodeStack_.push(et);break}else this.nodeStack_.push(et),this.isReverse_?et=et.right:et=et.left}getNext(){if(this.nodeStack_.length===0)return null;let et=this.nodeStack_.pop(),rt;if(this.resultGenerator_?rt=this.resultGenerator_(et.key,et.value):rt={key:et.key,value:et.value},this.isReverse_)for(et=et.left;!et.isEmpty();)this.nodeStack_.push(et),et=et.right;else for(et=et.right;!et.isEmpty();)this.nodeStack_.push(et),et=et.left;return rt}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const et=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(et.key,et.value):{key:et.key,value:et.value}}}class LLRBNode{constructor(et,rt,nt,ot,it){this.key=et,this.value=rt,this.color=nt??LLRBNode.RED,this.left=ot??SortedMap.EMPTY_NODE,this.right=it??SortedMap.EMPTY_NODE}copy(et,rt,nt,ot,it){return new LLRBNode(et??this.key,rt??this.value,nt??this.color,ot??this.left,it??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(et){return this.left.inorderTraversal(et)||!!et(this.key,this.value)||this.right.inorderTraversal(et)}reverseTraversal(et){return this.right.reverseTraversal(et)||et(this.key,this.value)||this.left.reverseTraversal(et)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(et,rt,nt){let ot=this;const it=nt(et,ot.key);return it<0?ot=ot.copy(null,null,null,ot.left.insert(et,rt,nt),null):it===0?ot=ot.copy(null,rt,null,null,null):ot=ot.copy(null,null,null,null,ot.right.insert(et,rt,nt)),ot.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let et=this;return!et.left.isRed_()&&!et.left.left.isRed_()&&(et=et.moveRedLeft_()),et=et.copy(null,null,null,et.left.removeMin_(),null),et.fixUp_()}remove(et,rt){let nt,ot;if(nt=this,rt(et,nt.key)<0)!nt.left.isEmpty()&&!nt.left.isRed_()&&!nt.left.left.isRed_()&&(nt=nt.moveRedLeft_()),nt=nt.copy(null,null,null,nt.left.remove(et,rt),null);else{if(nt.left.isRed_()&&(nt=nt.rotateRight_()),!nt.right.isEmpty()&&!nt.right.isRed_()&&!nt.right.left.isRed_()&&(nt=nt.moveRedRight_()),rt(et,nt.key)===0){if(nt.right.isEmpty())return SortedMap.EMPTY_NODE;ot=nt.right.min_(),nt=nt.copy(ot.key,ot.value,null,null,nt.right.removeMin_())}nt=nt.copy(null,null,null,null,nt.right.remove(et,rt))}return nt.fixUp_()}isRed_(){return this.color}fixUp_(){let et=this;return et.right.isRed_()&&!et.left.isRed_()&&(et=et.rotateLeft_()),et.left.isRed_()&&et.left.left.isRed_()&&(et=et.rotateRight_()),et.left.isRed_()&&et.right.isRed_()&&(et=et.colorFlip_()),et}moveRedLeft_(){let et=this.colorFlip_();return et.right.left.isRed_()&&(et=et.copy(null,null,null,null,et.right.rotateRight_()),et=et.rotateLeft_(),et=et.colorFlip_()),et}moveRedRight_(){let et=this.colorFlip_();return et.left.left.isRed_()&&(et=et.rotateRight_(),et=et.colorFlip_()),et}rotateLeft_(){const et=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,et,null)}rotateRight_(){const et=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,et)}colorFlip_(){const et=this.left.copy(null,null,!this.left.color,null,null),rt=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,et,rt)}checkMaxDepth_(){const et=this.check_();return Math.pow(2,et)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const et=this.left.check_();if(et!==this.right.check_())throw new Error("Black depths differ");return et+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(et,rt,nt,ot,it){return this}insert(et,rt,nt){return new LLRBNode(et,rt,null)}remove(et,rt){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(et){return!1}reverseTraversal(et){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(et,rt=SortedMap.EMPTY_NODE){this.comparator_=et,this.root_=rt}insert(et,rt){return new SortedMap(this.comparator_,this.root_.insert(et,rt,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(et){return new SortedMap(this.comparator_,this.root_.remove(et,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(et){let rt,nt=this.root_;for(;!nt.isEmpty();){if(rt=this.comparator_(et,nt.key),rt===0)return nt.value;rt<0?nt=nt.left:rt>0&&(nt=nt.right)}return null}getPredecessorKey(et){let rt,nt=this.root_,ot=null;for(;!nt.isEmpty();)if(rt=this.comparator_(et,nt.key),rt===0){if(nt.left.isEmpty())return ot?ot.key:null;for(nt=nt.left;!nt.right.isEmpty();)nt=nt.right;return nt.key}else rt<0?nt=nt.left:rt>0&&(ot=nt,nt=nt.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(et){return this.root_.inorderTraversal(et)}reverseTraversal(et){return this.root_.reverseTraversal(et)}getIterator(et){return new SortedMapIterator(this.root_,null,this.comparator_,!1,et)}getIteratorFrom(et,rt){return new SortedMapIterator(this.root_,et,this.comparator_,!1,rt)}getReverseIteratorFrom(et,rt){return new SortedMapIterator(this.root_,et,this.comparator_,!0,rt)}getReverseIterator(et){return new SortedMapIterator(this.root_,null,this.comparator_,!0,et)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(_e,et){return nameCompare(_e.name,et.name)}function NAME_COMPARATOR(_e,et){return nameCompare(_e,et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(_e){MAX_NODE$2=_e}const priorityHashText=function(_e){return typeof _e=="number"?"number:"+doubleToIEEE754String(_e):"string:"+_e},validatePriorityNode=function(_e){if(_e.isLeafNode()){const et=_e.val();assert(typeof et=="string"||typeof et=="number"||typeof et=="object"&&contains(et,".sv"),"Priority must be a string or number.")}else assert(_e===MAX_NODE$2||_e.isEmpty(),"priority of unexpected type.");assert(_e===MAX_NODE$2||_e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(et,rt=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=et,this.priorityNode_=rt,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(et){__childrenNodeConstructor=et}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(et){return new LeafNode(this.value_,et)}getImmediateChild(et){return et===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(et){return pathIsEmpty(et)?this:pathGetFront(et)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(et,rt){return null}updateImmediateChild(et,rt){return et===".priority"?this.updatePriority(rt):rt.isEmpty()&&et!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(et,rt).updatePriority(this.priorityNode_)}updateChild(et,rt){const nt=pathGetFront(et);return nt===null?rt:rt.isEmpty()&&nt!==".priority"?this:(assert(nt!==".priority"||pathGetLength(et)===1,".priority must be the last token in a path"),this.updateImmediateChild(nt,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(et),rt)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(et,rt){return!1}val(et){return et&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let et="";this.priorityNode_.isEmpty()||(et+="priority:"+priorityHashText(this.priorityNode_.val())+":");const rt=typeof this.value_;et+=rt+":",rt==="number"?et+=doubleToIEEE754String(this.value_):et+=this.value_,this.lazyHash_=sha1(et)}return this.lazyHash_}getValue(){return this.value_}compareTo(et){return et===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:et instanceof LeafNode.__childrenNodeConstructor?-1:(assert(et.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(et))}compareToLeafNode_(et){const rt=typeof et.value_,nt=typeof this.value_,ot=LeafNode.VALUE_TYPE_ORDER.indexOf(rt),it=LeafNode.VALUE_TYPE_ORDER.indexOf(nt);return assert(ot>=0,"Unknown leaf type: "+rt),assert(it>=0,"Unknown leaf type: "+nt),ot===it?nt==="object"?0:this.value_<et.value_?-1:this.value_===et.value_?0:1:it-ot}withIndex(){return this}isIndexed(){return!0}equals(et){if(et===this)return!0;if(et.isLeafNode()){const rt=et;return this.value_===rt.value_&&this.priorityNode_.equals(rt.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(_e){nodeFromJSON$1=_e}function setMaxNode(_e){MAX_NODE$1=_e}class PriorityIndex extends Index{compare(et,rt){const nt=et.node.getPriority(),ot=rt.node.getPriority(),it=nt.compareTo(ot);return it===0?nameCompare(et.name,rt.name):it}isDefinedOn(et){return!et.getPriority().isEmpty()}indexedValueChanged(et,rt){return!et.getPriority().equals(rt.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(et,rt){const nt=nodeFromJSON$1(et);return new NamedNode(rt,new LeafNode("[PRIORITY-POST]",nt))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(et){const rt=it=>parseInt(Math.log(it)/LOG_2,10),nt=it=>parseInt(Array(it+1).join("1"),2);this.count=rt(et+1),this.current_=this.count-1;const ot=nt(this.count);this.bits_=et+1&ot}nextBitIsOne(){const et=!(this.bits_&1<<this.current_);return this.current_--,et}}const buildChildSet=function(_e,et,rt,nt){_e.sort(et);const ot=function(lt,ct){const pt=ct-lt;let ut,ht;if(pt===0)return null;if(pt===1)return ut=_e[lt],ht=rt?rt(ut):ut,new LLRBNode(ht,ut.node,LLRBNode.BLACK,null,null);{const ft=parseInt(pt/2,10)+lt,gt=ot(lt,ft),vt=ot(ft+1,ct);return ut=_e[ft],ht=rt?rt(ut):ut,new LLRBNode(ht,ut.node,LLRBNode.BLACK,gt,vt)}},it=function(lt){let ct=null,pt=null,ut=_e.length;const ht=function(gt,vt){const yt=ut-gt,mt=ut;ut-=gt;const Et=ot(yt+1,mt),bt=_e[yt],Ct=rt?rt(bt):bt;ft(new LLRBNode(Ct,bt.node,vt,null,Et))},ft=function(gt){ct?(ct.left=gt,ct=gt):(pt=gt,ct=gt)};for(let gt=0;gt<lt.count;++gt){const vt=lt.nextBitIsOne(),yt=Math.pow(2,lt.count-(gt+1));vt?ht(yt,LLRBNode.BLACK):(ht(yt,LLRBNode.BLACK),ht(yt,LLRBNode.RED))}return pt},st=new Base12Num(_e.length),at=it(st);return new SortedMap(nt||et,at)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(et,rt){this.indexes_=et,this.indexSet_=rt}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(et){const rt=safeGet(this.indexes_,et);if(!rt)throw new Error("No index defined for "+et);return rt instanceof SortedMap?rt:null}hasIndex(et){return contains(this.indexSet_,et.toString())}addIndex(et,rt){assert(et!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const nt=[];let ot=!1;const it=rt.getIterator(NamedNode.Wrap);let st=it.getNext();for(;st;)ot=ot||et.isDefinedOn(st.node),nt.push(st),st=it.getNext();let at;ot?at=buildChildSet(nt,et.getCompare()):at=fallbackObject;const lt=et.toString(),ct=Object.assign({},this.indexSet_);ct[lt]=et;const pt=Object.assign({},this.indexes_);return pt[lt]=at,new IndexMap(pt,ct)}addToIndexes(et,rt){const nt=map(this.indexes_,(ot,it)=>{const st=safeGet(this.indexSet_,it);if(assert(st,"Missing index implementation for "+it),ot===fallbackObject)if(st.isDefinedOn(et.node)){const at=[],lt=rt.getIterator(NamedNode.Wrap);let ct=lt.getNext();for(;ct;)ct.name!==et.name&&at.push(ct),ct=lt.getNext();return at.push(et),buildChildSet(at,st.getCompare())}else return fallbackObject;else{const at=rt.get(et.name);let lt=ot;return at&&(lt=lt.remove(new NamedNode(et.name,at))),lt.insert(et,et.node)}});return new IndexMap(nt,this.indexSet_)}removeFromIndexes(et,rt){const nt=map(this.indexes_,ot=>{if(ot===fallbackObject)return ot;{const it=rt.get(et.name);return it?ot.remove(new NamedNode(et.name,it)):ot}});return new IndexMap(nt,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(et,rt,nt){this.children_=et,this.priorityNode_=rt,this.indexMap_=nt,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(et){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,et,this.indexMap_)}getImmediateChild(et){if(et===".priority")return this.getPriority();{const rt=this.children_.get(et);return rt===null?EMPTY_NODE:rt}}getChild(et){const rt=pathGetFront(et);return rt===null?this:this.getImmediateChild(rt).getChild(pathPopFront(et))}hasChild(et){return this.children_.get(et)!==null}updateImmediateChild(et,rt){if(assert(rt,"We should always be passing snapshot nodes"),et===".priority")return this.updatePriority(rt);{const nt=new NamedNode(et,rt);let ot,it;rt.isEmpty()?(ot=this.children_.remove(et),it=this.indexMap_.removeFromIndexes(nt,this.children_)):(ot=this.children_.insert(et,rt),it=this.indexMap_.addToIndexes(nt,this.children_));const st=ot.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(ot,st,it)}}updateChild(et,rt){const nt=pathGetFront(et);if(nt===null)return rt;{assert(pathGetFront(et)!==".priority"||pathGetLength(et)===1,".priority must be the last token in a path");const ot=this.getImmediateChild(nt).updateChild(pathPopFront(et),rt);return this.updateImmediateChild(nt,ot)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(et){if(this.isEmpty())return null;const rt={};let nt=0,ot=0,it=!0;if(this.forEachChild(PRIORITY_INDEX,(st,at)=>{rt[st]=at.val(et),nt++,it&&ChildrenNode.INTEGER_REGEXP_.test(st)?ot=Math.max(ot,Number(st)):it=!1}),!et&&it&&ot<2*nt){const st=[];for(const at in rt)st[at]=rt[at];return st}else return et&&!this.getPriority().isEmpty()&&(rt[".priority"]=this.getPriority().val()),rt}hash(){if(this.lazyHash_===null){let et="";this.getPriority().isEmpty()||(et+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(rt,nt)=>{const ot=nt.hash();ot!==""&&(et+=":"+rt+":"+ot)}),this.lazyHash_=et===""?"":sha1(et)}return this.lazyHash_}getPredecessorChildName(et,rt,nt){const ot=this.resolveIndex_(nt);if(ot){const it=ot.getPredecessorKey(new NamedNode(et,rt));return it?it.name:null}else return this.children_.getPredecessorKey(et)}getFirstChildName(et){const rt=this.resolveIndex_(et);if(rt){const nt=rt.minKey();return nt&&nt.name}else return this.children_.minKey()}getFirstChild(et){const rt=this.getFirstChildName(et);return rt?new NamedNode(rt,this.children_.get(rt)):null}getLastChildName(et){const rt=this.resolveIndex_(et);if(rt){const nt=rt.maxKey();return nt&&nt.name}else return this.children_.maxKey()}getLastChild(et){const rt=this.getLastChildName(et);return rt?new NamedNode(rt,this.children_.get(rt)):null}forEachChild(et,rt){const nt=this.resolveIndex_(et);return nt?nt.inorderTraversal(ot=>rt(ot.name,ot.node)):this.children_.inorderTraversal(rt)}getIterator(et){return this.getIteratorFrom(et.minPost(),et)}getIteratorFrom(et,rt){const nt=this.resolveIndex_(rt);if(nt)return nt.getIteratorFrom(et,ot=>ot);{const ot=this.children_.getIteratorFrom(et.name,NamedNode.Wrap);let it=ot.peek();for(;it!=null&&rt.compare(it,et)<0;)ot.getNext(),it=ot.peek();return ot}}getReverseIterator(et){return this.getReverseIteratorFrom(et.maxPost(),et)}getReverseIteratorFrom(et,rt){const nt=this.resolveIndex_(rt);if(nt)return nt.getReverseIteratorFrom(et,ot=>ot);{const ot=this.children_.getReverseIteratorFrom(et.name,NamedNode.Wrap);let it=ot.peek();for(;it!=null&&rt.compare(it,et)>0;)ot.getNext(),it=ot.peek();return ot}}compareTo(et){return this.isEmpty()?et.isEmpty()?0:-1:et.isLeafNode()||et.isEmpty()?1:et===MAX_NODE?-1:0}withIndex(et){if(et===KEY_INDEX||this.indexMap_.hasIndex(et))return this;{const rt=this.indexMap_.addIndex(et,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,rt)}}isIndexed(et){return et===KEY_INDEX||this.indexMap_.hasIndex(et)}equals(et){if(et===this)return!0;if(et.isLeafNode())return!1;{const rt=et;if(this.getPriority().equals(rt.getPriority()))if(this.children_.count()===rt.children_.count()){const nt=this.getIterator(PRIORITY_INDEX),ot=rt.getIterator(PRIORITY_INDEX);let it=nt.getNext(),st=ot.getNext();for(;it&&st;){if(it.name!==st.name||!it.node.equals(st.node))return!1;it=nt.getNext(),st=ot.getNext()}return it===null&&st===null}else return!1;else return!1}}resolveIndex_(et){return et===KEY_INDEX?null:this.indexMap_.get(et.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(et){return et===this?0:1}equals(et){return et===this}getPriority(){return this}getImmediateChild(et){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(_e,et=null){if(_e===null)return ChildrenNode.EMPTY_NODE;if(typeof _e=="object"&&".priority"in _e&&(et=_e[".priority"]),assert(et===null||typeof et=="string"||typeof et=="number"||typeof et=="object"&&".sv"in et,"Invalid priority type found: "+typeof et),typeof _e=="object"&&".value"in _e&&_e[".value"]!==null&&(_e=_e[".value"]),typeof _e!="object"||".sv"in _e){const rt=_e;return new LeafNode(rt,nodeFromJSON(et))}if(!(_e instanceof Array)&&USE_HINZE){const rt=[];let nt=!1;if(each(_e,(st,at)=>{if(st.substring(0,1)!=="."){const lt=nodeFromJSON(at);lt.isEmpty()||(nt=nt||!lt.getPriority().isEmpty(),rt.push(new NamedNode(st,lt)))}}),rt.length===0)return ChildrenNode.EMPTY_NODE;const it=buildChildSet(rt,NAME_ONLY_COMPARATOR,st=>st.name,NAME_COMPARATOR);if(nt){const st=buildChildSet(rt,PRIORITY_INDEX.getCompare());return new ChildrenNode(it,nodeFromJSON(et),new IndexMap({".priority":st},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(it,nodeFromJSON(et),IndexMap.Default)}else{let rt=ChildrenNode.EMPTY_NODE;return each(_e,(nt,ot)=>{if(contains(_e,nt)&&nt.substring(0,1)!=="."){const it=nodeFromJSON(ot);(it.isLeafNode()||!it.isEmpty())&&(rt=rt.updateImmediateChild(nt,it))}}),rt.updatePriority(nodeFromJSON(et))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(et){super(),this.indexPath_=et,assert(!pathIsEmpty(et)&&pathGetFront(et)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(et){return et.getChild(this.indexPath_)}isDefinedOn(et){return!et.getChild(this.indexPath_).isEmpty()}compare(et,rt){const nt=this.extractChild(et.node),ot=this.extractChild(rt.node),it=nt.compareTo(ot);return it===0?nameCompare(et.name,rt.name):it}makePost(et,rt){const nt=nodeFromJSON(et),ot=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,nt);return new NamedNode(rt,ot)}maxPost(){const et=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,et)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(et,rt){const nt=et.node.compareTo(rt.node);return nt===0?nameCompare(et.name,rt.name):nt}isDefinedOn(et){return!0}indexedValueChanged(et,rt){return!et.equals(rt)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(et,rt){const nt=nodeFromJSON(et);return new NamedNode(rt,nt)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(_e){return{type:"value",snapshotNode:_e}}function changeChildAdded(_e,et){return{type:"child_added",snapshotNode:et,childName:_e}}function changeChildRemoved(_e,et){return{type:"child_removed",snapshotNode:et,childName:_e}}function changeChildChanged(_e,et,rt){return{type:"child_changed",snapshotNode:et,childName:_e,oldSnap:rt}}function changeChildMoved(_e,et){return{type:"child_moved",snapshotNode:et,childName:_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const et=new QueryParams;return et.limitSet_=this.limitSet_,et.limit_=this.limit_,et.startSet_=this.startSet_,et.startAfterSet_=this.startAfterSet_,et.indexStartValue_=this.indexStartValue_,et.startNameSet_=this.startNameSet_,et.indexStartName_=this.indexStartName_,et.endSet_=this.endSet_,et.endBeforeSet_=this.endBeforeSet_,et.indexEndValue_=this.indexEndValue_,et.endNameSet_=this.endNameSet_,et.indexEndName_=this.indexEndName_,et.index_=this.index_,et.viewFrom_=this.viewFrom_,et}}function queryParamsToRestQueryStringParameters(_e){const et={};if(_e.isDefault())return et;let rt;if(_e.index_===PRIORITY_INDEX?rt="$priority":_e.index_===VALUE_INDEX?rt="$value":_e.index_===KEY_INDEX?rt="$key":(assert(_e.index_ instanceof PathIndex,"Unrecognized index type!"),rt=_e.index_.toString()),et.orderBy=stringify(rt),_e.startSet_){const nt=_e.startAfterSet_?"startAfter":"startAt";et[nt]=stringify(_e.indexStartValue_),_e.startNameSet_&&(et[nt]+=","+stringify(_e.indexStartName_))}if(_e.endSet_){const nt=_e.endBeforeSet_?"endBefore":"endAt";et[nt]=stringify(_e.indexEndValue_),_e.endNameSet_&&(et[nt]+=","+stringify(_e.indexEndName_))}return _e.limitSet_&&(_e.isViewFromLeft()?et.limitToFirst=_e.limit_:et.limitToLast=_e.limit_),et}function queryParamsGetQueryObject(_e){const et={};if(_e.startSet_&&(et.sp=_e.indexStartValue_,_e.startNameSet_&&(et.sn=_e.indexStartName_),et.sin=!_e.startAfterSet_),_e.endSet_&&(et.ep=_e.indexEndValue_,_e.endNameSet_&&(et.en=_e.indexEndName_),et.ein=!_e.endBeforeSet_),_e.limitSet_){et.l=_e.limit_;let rt=_e.viewFrom_;rt===""&&(_e.isViewFromLeft()?rt="l":rt="r"),et.vf=rt}return _e.index_!==PRIORITY_INDEX&&(et.i=_e.index_.toString()),et}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(et,rt,nt,ot){super(),this.repoInfo_=et,this.onDataUpdate_=rt,this.authTokenProvider_=nt,this.appCheckTokenProvider_=ot,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(et){throw new Error("Method not implemented.")}static getListenId_(et,rt){return rt!==void 0?"tag$"+rt:(assert(et._queryParams.isDefault(),"should have a tag if it's not a default query."),et._path.toString())}listen(et,rt,nt,ot){const it=et._path.toString();this.log_("Listen called for "+it+" "+et._queryIdentifier);const st=ReadonlyRestClient.getListenId_(et,nt),at={};this.listens_[st]=at;const lt=queryParamsToRestQueryStringParameters(et._queryParams);this.restRequest_(it+".json",lt,(ct,pt)=>{let ut=pt;if(ct===404&&(ut=null,ct=null),ct===null&&this.onDataUpdate_(it,ut,!1,nt),safeGet(this.listens_,st)===at){let ht;ct?ct===401?ht="permission_denied":ht="rest_error:"+ct:ht="ok",ot(ht,null)}})}unlisten(et,rt){const nt=ReadonlyRestClient.getListenId_(et,rt);delete this.listens_[nt]}get(et){const rt=queryParamsToRestQueryStringParameters(et._queryParams),nt=et._path.toString(),ot=new Deferred;return this.restRequest_(nt+".json",rt,(it,st)=>{let at=st;it===404&&(at=null,it=null),it===null?(this.onDataUpdate_(nt,at,!1,null),ot.resolve(at)):ot.reject(new Error(at))}),ot.promise}refreshAuthToken(et){}restRequest_(et,rt={},nt){return rt.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([ot,it])=>{ot&&ot.accessToken&&(rt.auth=ot.accessToken),it&&it.token&&(rt.ac=it.token);const st=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+et+"?ns="+this.repoInfo_.namespace+querystring(rt);this.log_("Sending REST request for "+st);const at=new XMLHttpRequest;at.onreadystatechange=()=>{if(nt&&at.readyState===4){this.log_("REST Response for "+st+" received. status:",at.status,"response:",at.responseText);let lt=null;if(at.status>=200&&at.status<300){try{lt=jsonEval(at.responseText)}catch{warn("Failed to parse JSON response for "+st+": "+at.responseText)}nt(null,lt)}else at.status!==401&&at.status!==404&&warn("Got unsuccessful REST response for "+st+" Status: "+at.status),nt(at.status);nt=null}},at.open("GET",st,!0),at.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(et){return this.rootNode_.getChild(et)}updateSnapshot(et,rt){this.rootNode_=this.rootNode_.updateChild(et,rt)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(_e,et,rt){if(pathIsEmpty(et))_e.value=rt,_e.children.clear();else if(_e.value!==null)_e.value=_e.value.updateChild(et,rt);else{const nt=pathGetFront(et);_e.children.has(nt)||_e.children.set(nt,newSparseSnapshotTree());const ot=_e.children.get(nt);et=pathPopFront(et),sparseSnapshotTreeRemember(ot,et,rt)}}function sparseSnapshotTreeForEachTree(_e,et,rt){_e.value!==null?rt(et,_e.value):sparseSnapshotTreeForEachChild(_e,(nt,ot)=>{const it=new Path(et.toString()+"/"+nt);sparseSnapshotTreeForEachTree(ot,it,rt)})}function sparseSnapshotTreeForEachChild(_e,et){_e.children.forEach((rt,nt)=>{et(nt,rt)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(et){this.collection_=et,this.last_=null}get(){const et=this.collection_.get(),rt=Object.assign({},et);return this.last_&&each(this.last_,(nt,ot)=>{rt[nt]=rt[nt]-ot}),this.last_=et,rt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(et,rt){this.server_=rt,this.statsToReport_={},this.statsListener_=new StatsListener(et);const nt=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(nt))}reportStats_(){const et=this.statsListener_.get(),rt={};let nt=!1;each(et,(ot,it)=>{it>0&&contains(this.statsToReport_,ot)&&(rt[ot]=it,nt=!0)}),nt&&this.server_.reportStats(rt),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(_e){_e[_e.OVERWRITE=0]="OVERWRITE",_e[_e.MERGE=1]="MERGE",_e[_e.ACK_USER_WRITE=2]="ACK_USER_WRITE",_e[_e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(_e){return{fromUser:!1,fromServer:!0,queryId:_e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(et,rt,nt){this.path=et,this.affectedTree=rt,this.revert=nt,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(et){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const rt=this.affectedTree.subtree(new Path(et));return new AckUserWrite(newEmptyPath(),rt,this.revert)}}else return assert(pathGetFront(this.path)===et,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(et,rt,nt){this.source=et,this.path=rt,this.snap=nt,this.type=OperationType.OVERWRITE}operationForChild(et){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(et)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(et,rt,nt){this.source=et,this.path=rt,this.children=nt,this.type=OperationType.MERGE}operationForChild(et){if(pathIsEmpty(this.path)){const rt=this.children.subtree(new Path(et));return rt.isEmpty()?null:rt.value?new Overwrite(this.source,newEmptyPath(),rt.value):new Merge(this.source,newEmptyPath(),rt)}else return assert(pathGetFront(this.path)===et,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(et,rt,nt){this.node_=et,this.fullyInitialized_=rt,this.filtered_=nt}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(et){if(pathIsEmpty(et))return this.isFullyInitialized()&&!this.filtered_;const rt=pathGetFront(et);return this.isCompleteForChild(rt)}isCompleteForChild(et){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(et)}getNode(){return this.node_}}function eventGeneratorGenerateEventsForChanges(_e,et,rt,nt){const ot=[],it=[];return et.forEach(st=>{st.type==="child_changed"&&_e.index_.indexedValueChanged(st.oldSnap,st.snapshotNode)&&it.push(changeChildMoved(st.childName,st.snapshotNode))}),eventGeneratorGenerateEventsForType(_e,ot,"child_removed",et,nt,rt),eventGeneratorGenerateEventsForType(_e,ot,"child_added",et,nt,rt),eventGeneratorGenerateEventsForType(_e,ot,"child_moved",it,nt,rt),eventGeneratorGenerateEventsForType(_e,ot,"child_changed",et,nt,rt),eventGeneratorGenerateEventsForType(_e,ot,"value",et,nt,rt),ot}function eventGeneratorGenerateEventsForType(_e,et,rt,nt,ot,it){const st=nt.filter(at=>at.type===rt);st.sort((at,lt)=>eventGeneratorCompareChanges(_e,at,lt)),st.forEach(at=>{const lt=eventGeneratorMaterializeSingleChange(_e,at,it);ot.forEach(ct=>{ct.respondsTo(at.type)&&et.push(ct.createEvent(lt,_e.query_))})})}function eventGeneratorMaterializeSingleChange(_e,et,rt){return et.type==="value"||et.type==="child_removed"||(et.prevName=rt.getPredecessorChildName(et.childName,et.snapshotNode,_e.index_)),et}function eventGeneratorCompareChanges(_e,et,rt){if(et.childName==null||rt.childName==null)throw assertionError("Should only compare child_ events.");const nt=new NamedNode(et.childName,et.snapshotNode),ot=new NamedNode(rt.childName,rt.snapshotNode);return _e.index_.compare(nt,ot)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(_e,et){return{eventCache:_e,serverCache:et}}function viewCacheUpdateEventSnap(_e,et,rt,nt){return newViewCache(new CacheNode(et,rt,nt),_e.serverCache)}function viewCacheUpdateServerSnap(_e,et,rt,nt){return newViewCache(_e.eventCache,new CacheNode(et,rt,nt))}function viewCacheGetCompleteEventSnap(_e){return _e.eventCache.isFullyInitialized()?_e.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(_e){return _e.serverCache.isFullyInitialized()?_e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(et,rt=EmptyChildren()){this.value=et,this.children=rt}static fromObject(et){let rt=new ImmutableTree(null);return each(et,(nt,ot)=>{rt=rt.set(new Path(nt),ot)}),rt}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(et,rt){if(this.value!=null&&rt(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(et))return null;{const nt=pathGetFront(et),ot=this.children.get(nt);if(ot!==null){const it=ot.findRootMostMatchingPathAndValue(pathPopFront(et),rt);return it!=null?{path:pathChild(new Path(nt),it.path),value:it.value}:null}else return null}}findRootMostValueAndPath(et){return this.findRootMostMatchingPathAndValue(et,()=>!0)}subtree(et){if(pathIsEmpty(et))return this;{const rt=pathGetFront(et),nt=this.children.get(rt);return nt!==null?nt.subtree(pathPopFront(et)):new ImmutableTree(null)}}set(et,rt){if(pathIsEmpty(et))return new ImmutableTree(rt,this.children);{const nt=pathGetFront(et),it=(this.children.get(nt)||new ImmutableTree(null)).set(pathPopFront(et),rt),st=this.children.insert(nt,it);return new ImmutableTree(this.value,st)}}remove(et){if(pathIsEmpty(et))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const rt=pathGetFront(et),nt=this.children.get(rt);if(nt){const ot=nt.remove(pathPopFront(et));let it;return ot.isEmpty()?it=this.children.remove(rt):it=this.children.insert(rt,ot),this.value===null&&it.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,it)}else return this}}get(et){if(pathIsEmpty(et))return this.value;{const rt=pathGetFront(et),nt=this.children.get(rt);return nt?nt.get(pathPopFront(et)):null}}setTree(et,rt){if(pathIsEmpty(et))return rt;{const nt=pathGetFront(et),it=(this.children.get(nt)||new ImmutableTree(null)).setTree(pathPopFront(et),rt);let st;return it.isEmpty()?st=this.children.remove(nt):st=this.children.insert(nt,it),new ImmutableTree(this.value,st)}}fold(et){return this.fold_(newEmptyPath(),et)}fold_(et,rt){const nt={};return this.children.inorderTraversal((ot,it)=>{nt[ot]=it.fold_(pathChild(et,ot),rt)}),rt(et,this.value,nt)}findOnPath(et,rt){return this.findOnPath_(et,newEmptyPath(),rt)}findOnPath_(et,rt,nt){const ot=this.value?nt(rt,this.value):!1;if(ot)return ot;if(pathIsEmpty(et))return null;{const it=pathGetFront(et),st=this.children.get(it);return st?st.findOnPath_(pathPopFront(et),pathChild(rt,it),nt):null}}foreachOnPath(et,rt){return this.foreachOnPath_(et,newEmptyPath(),rt)}foreachOnPath_(et,rt,nt){if(pathIsEmpty(et))return this;{this.value&&nt(rt,this.value);const ot=pathGetFront(et),it=this.children.get(ot);return it?it.foreachOnPath_(pathPopFront(et),pathChild(rt,ot),nt):new ImmutableTree(null)}}foreach(et){this.foreach_(newEmptyPath(),et)}foreach_(et,rt){this.children.inorderTraversal((nt,ot)=>{ot.foreach_(pathChild(et,nt),rt)}),this.value&&rt(et,this.value)}foreachChild(et){this.children.inorderTraversal((rt,nt)=>{nt.value&&et(rt,nt.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(et){this.writeTree_=et}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(_e,et,rt){if(pathIsEmpty(et))return new CompoundWrite(new ImmutableTree(rt));{const nt=_e.writeTree_.findRootMostValueAndPath(et);if(nt!=null){const ot=nt.path;let it=nt.value;const st=newRelativePath(ot,et);return it=it.updateChild(st,rt),new CompoundWrite(_e.writeTree_.set(ot,it))}else{const ot=new ImmutableTree(rt),it=_e.writeTree_.setTree(et,ot);return new CompoundWrite(it)}}}function compoundWriteAddWrites(_e,et,rt){let nt=_e;return each(rt,(ot,it)=>{nt=compoundWriteAddWrite(nt,pathChild(et,ot),it)}),nt}function compoundWriteRemoveWrite(_e,et){if(pathIsEmpty(et))return CompoundWrite.empty();{const rt=_e.writeTree_.setTree(et,new ImmutableTree(null));return new CompoundWrite(rt)}}function compoundWriteHasCompleteWrite(_e,et){return compoundWriteGetCompleteNode(_e,et)!=null}function compoundWriteGetCompleteNode(_e,et){const rt=_e.writeTree_.findRootMostValueAndPath(et);return rt!=null?_e.writeTree_.get(rt.path).getChild(newRelativePath(rt.path,et)):null}function compoundWriteGetCompleteChildren(_e){const et=[],rt=_e.writeTree_.value;return rt!=null?rt.isLeafNode()||rt.forEachChild(PRIORITY_INDEX,(nt,ot)=>{et.push(new NamedNode(nt,ot))}):_e.writeTree_.children.inorderTraversal((nt,ot)=>{ot.value!=null&&et.push(new NamedNode(nt,ot.value))}),et}function compoundWriteChildCompoundWrite(_e,et){if(pathIsEmpty(et))return _e;{const rt=compoundWriteGetCompleteNode(_e,et);return rt!=null?new CompoundWrite(new ImmutableTree(rt)):new CompoundWrite(_e.writeTree_.subtree(et))}}function compoundWriteIsEmpty(_e){return _e.writeTree_.isEmpty()}function compoundWriteApply(_e,et){return applySubtreeWrite(newEmptyPath(),_e.writeTree_,et)}function applySubtreeWrite(_e,et,rt){if(et.value!=null)return rt.updateChild(_e,et.value);{let nt=null;return et.children.inorderTraversal((ot,it)=>{ot===".priority"?(assert(it.value!==null,"Priority writes must always be leaf nodes"),nt=it.value):rt=applySubtreeWrite(pathChild(_e,ot),it,rt)}),!rt.getChild(_e).isEmpty()&&nt!==null&&(rt=rt.updateChild(pathChild(_e,".priority"),nt)),rt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(_e,et){return newWriteTreeRef(et,_e)}function writeTreeAddOverwrite(_e,et,rt,nt,ot){assert(nt>_e.lastWriteId,"Stacking an older write on top of newer ones"),ot===void 0&&(ot=!0),_e.allWrites.push({path:et,snap:rt,writeId:nt,visible:ot}),ot&&(_e.visibleWrites=compoundWriteAddWrite(_e.visibleWrites,et,rt)),_e.lastWriteId=nt}function writeTreeGetWrite(_e,et){for(let rt=0;rt<_e.allWrites.length;rt++){const nt=_e.allWrites[rt];if(nt.writeId===et)return nt}return null}function writeTreeRemoveWrite(_e,et){const rt=_e.allWrites.findIndex(at=>at.writeId===et);assert(rt>=0,"removeWrite called with nonexistent writeId.");const nt=_e.allWrites[rt];_e.allWrites.splice(rt,1);let ot=nt.visible,it=!1,st=_e.allWrites.length-1;for(;ot&&st>=0;){const at=_e.allWrites[st];at.visible&&(st>=rt&&writeTreeRecordContainsPath_(at,nt.path)?ot=!1:pathContains(nt.path,at.path)&&(it=!0)),st--}if(ot){if(it)return writeTreeResetTree_(_e),!0;if(nt.snap)_e.visibleWrites=compoundWriteRemoveWrite(_e.visibleWrites,nt.path);else{const at=nt.children;each(at,lt=>{_e.visibleWrites=compoundWriteRemoveWrite(_e.visibleWrites,pathChild(nt.path,lt))})}return!0}else return!1}function writeTreeRecordContainsPath_(_e,et){if(_e.snap)return pathContains(_e.path,et);for(const rt in _e.children)if(_e.children.hasOwnProperty(rt)&&pathContains(pathChild(_e.path,rt),et))return!0;return!1}function writeTreeResetTree_(_e){_e.visibleWrites=writeTreeLayerTree_(_e.allWrites,writeTreeDefaultFilter_,newEmptyPath()),_e.allWrites.length>0?_e.lastWriteId=_e.allWrites[_e.allWrites.length-1].writeId:_e.lastWriteId=-1}function writeTreeDefaultFilter_(_e){return _e.visible}function writeTreeLayerTree_(_e,et,rt){let nt=CompoundWrite.empty();for(let ot=0;ot<_e.length;++ot){const it=_e[ot];if(et(it)){const st=it.path;let at;if(it.snap)pathContains(rt,st)?(at=newRelativePath(rt,st),nt=compoundWriteAddWrite(nt,at,it.snap)):pathContains(st,rt)&&(at=newRelativePath(st,rt),nt=compoundWriteAddWrite(nt,newEmptyPath(),it.snap.getChild(at)));else if(it.children){if(pathContains(rt,st))at=newRelativePath(rt,st),nt=compoundWriteAddWrites(nt,at,it.children);else if(pathContains(st,rt))if(at=newRelativePath(st,rt),pathIsEmpty(at))nt=compoundWriteAddWrites(nt,newEmptyPath(),it.children);else{const lt=safeGet(it.children,pathGetFront(at));if(lt){const ct=lt.getChild(pathPopFront(at));nt=compoundWriteAddWrite(nt,newEmptyPath(),ct)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return nt}function writeTreeCalcCompleteEventCache(_e,et,rt,nt,ot){if(!nt&&!ot){const it=compoundWriteGetCompleteNode(_e.visibleWrites,et);if(it!=null)return it;{const st=compoundWriteChildCompoundWrite(_e.visibleWrites,et);if(compoundWriteIsEmpty(st))return rt;if(rt==null&&!compoundWriteHasCompleteWrite(st,newEmptyPath()))return null;{const at=rt||ChildrenNode.EMPTY_NODE;return compoundWriteApply(st,at)}}}else{const it=compoundWriteChildCompoundWrite(_e.visibleWrites,et);if(!ot&&compoundWriteIsEmpty(it))return rt;if(!ot&&rt==null&&!compoundWriteHasCompleteWrite(it,newEmptyPath()))return null;{const st=function(ct){return(ct.visible||ot)&&(!nt||!~nt.indexOf(ct.writeId))&&(pathContains(ct.path,et)||pathContains(et,ct.path))},at=writeTreeLayerTree_(_e.allWrites,st,et),lt=rt||ChildrenNode.EMPTY_NODE;return compoundWriteApply(at,lt)}}}function writeTreeCalcCompleteEventChildren(_e,et,rt){let nt=ChildrenNode.EMPTY_NODE;const ot=compoundWriteGetCompleteNode(_e.visibleWrites,et);if(ot)return ot.isLeafNode()||ot.forEachChild(PRIORITY_INDEX,(it,st)=>{nt=nt.updateImmediateChild(it,st)}),nt;if(rt){const it=compoundWriteChildCompoundWrite(_e.visibleWrites,et);return rt.forEachChild(PRIORITY_INDEX,(st,at)=>{const lt=compoundWriteApply(compoundWriteChildCompoundWrite(it,new Path(st)),at);nt=nt.updateImmediateChild(st,lt)}),compoundWriteGetCompleteChildren(it).forEach(st=>{nt=nt.updateImmediateChild(st.name,st.node)}),nt}else{const it=compoundWriteChildCompoundWrite(_e.visibleWrites,et);return compoundWriteGetCompleteChildren(it).forEach(st=>{nt=nt.updateImmediateChild(st.name,st.node)}),nt}}function writeTreeCalcEventCacheAfterServerOverwrite(_e,et,rt,nt,ot){assert(nt||ot,"Either existingEventSnap or existingServerSnap must exist");const it=pathChild(et,rt);if(compoundWriteHasCompleteWrite(_e.visibleWrites,it))return null;{const st=compoundWriteChildCompoundWrite(_e.visibleWrites,it);return compoundWriteIsEmpty(st)?ot.getChild(rt):compoundWriteApply(st,ot.getChild(rt))}}function writeTreeCalcCompleteChild(_e,et,rt,nt){const ot=pathChild(et,rt),it=compoundWriteGetCompleteNode(_e.visibleWrites,ot);if(it!=null)return it;if(nt.isCompleteForChild(rt)){const st=compoundWriteChildCompoundWrite(_e.visibleWrites,ot);return compoundWriteApply(st,nt.getNode().getImmediateChild(rt))}else return null}function writeTreeShadowingWrite(_e,et){return compoundWriteGetCompleteNode(_e.visibleWrites,et)}function writeTreeCalcIndexedSlice(_e,et,rt,nt,ot,it,st){let at;const lt=compoundWriteChildCompoundWrite(_e.visibleWrites,et),ct=compoundWriteGetCompleteNode(lt,newEmptyPath());if(ct!=null)at=ct;else if(rt!=null)at=compoundWriteApply(lt,rt);else return[];if(at=at.withIndex(st),!at.isEmpty()&&!at.isLeafNode()){const pt=[],ut=st.getCompare(),ht=it?at.getReverseIteratorFrom(nt,st):at.getIteratorFrom(nt,st);let ft=ht.getNext();for(;ft&&pt.length<ot;)ut(ft,nt)!==0&&pt.push(ft),ft=ht.getNext();return pt}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(_e,et,rt,nt){return writeTreeCalcCompleteEventCache(_e.writeTree,_e.treePath,et,rt,nt)}function writeTreeRefCalcCompleteEventChildren(_e,et){return writeTreeCalcCompleteEventChildren(_e.writeTree,_e.treePath,et)}function writeTreeRefCalcEventCacheAfterServerOverwrite(_e,et,rt,nt){return writeTreeCalcEventCacheAfterServerOverwrite(_e.writeTree,_e.treePath,et,rt,nt)}function writeTreeRefShadowingWrite(_e,et){return writeTreeShadowingWrite(_e.writeTree,pathChild(_e.treePath,et))}function writeTreeRefCalcIndexedSlice(_e,et,rt,nt,ot,it){return writeTreeCalcIndexedSlice(_e.writeTree,_e.treePath,et,rt,nt,ot,it)}function writeTreeRefCalcCompleteChild(_e,et,rt){return writeTreeCalcCompleteChild(_e.writeTree,_e.treePath,et,rt)}function writeTreeRefChild(_e,et){return newWriteTreeRef(pathChild(_e.treePath,et),_e.writeTree)}function newWriteTreeRef(_e,et){return{treePath:_e,writeTree:et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(et){const rt=et.type,nt=et.childName;assert(rt==="child_added"||rt==="child_changed"||rt==="child_removed","Only child changes supported for tracking"),assert(nt!==".priority","Only non-priority child changes can be tracked.");const ot=this.changeMap.get(nt);if(ot){const it=ot.type;if(rt==="child_added"&&it==="child_removed")this.changeMap.set(nt,changeChildChanged(nt,et.snapshotNode,ot.snapshotNode));else if(rt==="child_removed"&&it==="child_added")this.changeMap.delete(nt);else if(rt==="child_removed"&&it==="child_changed")this.changeMap.set(nt,changeChildRemoved(nt,ot.oldSnap));else if(rt==="child_changed"&&it==="child_added")this.changeMap.set(nt,changeChildAdded(nt,et.snapshotNode));else if(rt==="child_changed"&&it==="child_changed")this.changeMap.set(nt,changeChildChanged(nt,et.snapshotNode,ot.oldSnap));else throw assertionError("Illegal combination of changes: "+et+" occurred after "+ot)}else this.changeMap.set(nt,et)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(et){return null}getChildAfterChild(et,rt,nt){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(et,rt,nt=null){this.writes_=et,this.viewCache_=rt,this.optCompleteServerCache_=nt}getCompleteChild(et){const rt=this.viewCache_.eventCache;if(rt.isCompleteForChild(et))return rt.getNode().getImmediateChild(et);{const nt=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,et,nt)}}getChildAfterChild(et,rt,nt){const ot=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),it=writeTreeRefCalcIndexedSlice(this.writes_,ot,rt,1,nt,et);return it.length===0?null:it[0]}}function viewProcessorAssertIndexed(_e,et){assert(et.eventCache.getNode().isIndexed(_e.filter.getIndex()),"Event snap not indexed"),assert(et.serverCache.getNode().isIndexed(_e.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(_e,et,rt,nt,ot){const it=new ChildChangeAccumulator;let st,at;if(rt.type===OperationType.OVERWRITE){const ct=rt;ct.source.fromUser?st=viewProcessorApplyUserOverwrite(_e,et,ct.path,ct.snap,nt,ot,it):(assert(ct.source.fromServer,"Unknown source."),at=ct.source.tagged||et.serverCache.isFiltered()&&!pathIsEmpty(ct.path),st=viewProcessorApplyServerOverwrite(_e,et,ct.path,ct.snap,nt,ot,at,it))}else if(rt.type===OperationType.MERGE){const ct=rt;ct.source.fromUser?st=viewProcessorApplyUserMerge(_e,et,ct.path,ct.children,nt,ot,it):(assert(ct.source.fromServer,"Unknown source."),at=ct.source.tagged||et.serverCache.isFiltered(),st=viewProcessorApplyServerMerge(_e,et,ct.path,ct.children,nt,ot,at,it))}else if(rt.type===OperationType.ACK_USER_WRITE){const ct=rt;ct.revert?st=viewProcessorRevertUserWrite(_e,et,ct.path,nt,ot,it):st=viewProcessorAckUserWrite(_e,et,ct.path,ct.affectedTree,nt,ot,it)}else if(rt.type===OperationType.LISTEN_COMPLETE)st=viewProcessorListenComplete(_e,et,rt.path,nt,it);else throw assertionError("Unknown operation type: "+rt.type);const lt=it.getChanges();return viewProcessorMaybeAddValueEvent(et,st,lt),{viewCache:st,changes:lt}}function viewProcessorMaybeAddValueEvent(_e,et,rt){const nt=et.eventCache;if(nt.isFullyInitialized()){const ot=nt.getNode().isLeafNode()||nt.getNode().isEmpty(),it=viewCacheGetCompleteEventSnap(_e);(rt.length>0||!_e.eventCache.isFullyInitialized()||ot&&!nt.getNode().equals(it)||!nt.getNode().getPriority().equals(it.getPriority()))&&rt.push(changeValue(viewCacheGetCompleteEventSnap(et)))}}function viewProcessorGenerateEventCacheAfterServerEvent(_e,et,rt,nt,ot,it){const st=et.eventCache;if(writeTreeRefShadowingWrite(nt,rt)!=null)return et;{let at,lt;if(pathIsEmpty(rt))if(assert(et.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),et.serverCache.isFiltered()){const ct=viewCacheGetCompleteServerSnap(et),pt=ct instanceof ChildrenNode?ct:ChildrenNode.EMPTY_NODE,ut=writeTreeRefCalcCompleteEventChildren(nt,pt);at=_e.filter.updateFullNode(et.eventCache.getNode(),ut,it)}else{const ct=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(et));at=_e.filter.updateFullNode(et.eventCache.getNode(),ct,it)}else{const ct=pathGetFront(rt);if(ct===".priority"){assert(pathGetLength(rt)===1,"Can't have a priority with additional path components");const pt=st.getNode();lt=et.serverCache.getNode();const ut=writeTreeRefCalcEventCacheAfterServerOverwrite(nt,rt,pt,lt);ut!=null?at=_e.filter.updatePriority(pt,ut):at=st.getNode()}else{const pt=pathPopFront(rt);let ut;if(st.isCompleteForChild(ct)){lt=et.serverCache.getNode();const ht=writeTreeRefCalcEventCacheAfterServerOverwrite(nt,rt,st.getNode(),lt);ht!=null?ut=st.getNode().getImmediateChild(ct).updateChild(pt,ht):ut=st.getNode().getImmediateChild(ct)}else ut=writeTreeRefCalcCompleteChild(nt,ct,et.serverCache);ut!=null?at=_e.filter.updateChild(st.getNode(),ct,ut,pt,ot,it):at=st.getNode()}}return viewCacheUpdateEventSnap(et,at,st.isFullyInitialized()||pathIsEmpty(rt),_e.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(_e,et,rt,nt,ot,it,st,at){const lt=et.serverCache;let ct;const pt=st?_e.filter:_e.filter.getIndexedFilter();if(pathIsEmpty(rt))ct=pt.updateFullNode(lt.getNode(),nt,null);else if(pt.filtersNodes()&&!lt.isFiltered()){const ft=lt.getNode().updateChild(rt,nt);ct=pt.updateFullNode(lt.getNode(),ft,null)}else{const ft=pathGetFront(rt);if(!lt.isCompleteForPath(rt)&&pathGetLength(rt)>1)return et;const gt=pathPopFront(rt),yt=lt.getNode().getImmediateChild(ft).updateChild(gt,nt);ft===".priority"?ct=pt.updatePriority(lt.getNode(),yt):ct=pt.updateChild(lt.getNode(),ft,yt,gt,NO_COMPLETE_CHILD_SOURCE,null)}const ut=viewCacheUpdateServerSnap(et,ct,lt.isFullyInitialized()||pathIsEmpty(rt),pt.filtersNodes()),ht=new WriteTreeCompleteChildSource(ot,ut,it);return viewProcessorGenerateEventCacheAfterServerEvent(_e,ut,rt,ot,ht,at)}function viewProcessorApplyUserOverwrite(_e,et,rt,nt,ot,it,st){const at=et.eventCache;let lt,ct;const pt=new WriteTreeCompleteChildSource(ot,et,it);if(pathIsEmpty(rt))ct=_e.filter.updateFullNode(et.eventCache.getNode(),nt,st),lt=viewCacheUpdateEventSnap(et,ct,!0,_e.filter.filtersNodes());else{const ut=pathGetFront(rt);if(ut===".priority")ct=_e.filter.updatePriority(et.eventCache.getNode(),nt),lt=viewCacheUpdateEventSnap(et,ct,at.isFullyInitialized(),at.isFiltered());else{const ht=pathPopFront(rt),ft=at.getNode().getImmediateChild(ut);let gt;if(pathIsEmpty(ht))gt=nt;else{const vt=pt.getCompleteChild(ut);vt!=null?pathGetBack(ht)===".priority"&&vt.getChild(pathParent(ht)).isEmpty()?gt=vt:gt=vt.updateChild(ht,nt):gt=ChildrenNode.EMPTY_NODE}if(ft.equals(gt))lt=et;else{const vt=_e.filter.updateChild(at.getNode(),ut,gt,ht,pt,st);lt=viewCacheUpdateEventSnap(et,vt,at.isFullyInitialized(),_e.filter.filtersNodes())}}}return lt}function viewProcessorCacheHasChild(_e,et){return _e.eventCache.isCompleteForChild(et)}function viewProcessorApplyUserMerge(_e,et,rt,nt,ot,it,st){let at=et;return nt.foreach((lt,ct)=>{const pt=pathChild(rt,lt);viewProcessorCacheHasChild(et,pathGetFront(pt))&&(at=viewProcessorApplyUserOverwrite(_e,at,pt,ct,ot,it,st))}),nt.foreach((lt,ct)=>{const pt=pathChild(rt,lt);viewProcessorCacheHasChild(et,pathGetFront(pt))||(at=viewProcessorApplyUserOverwrite(_e,at,pt,ct,ot,it,st))}),at}function viewProcessorApplyMerge(_e,et,rt){return rt.foreach((nt,ot)=>{et=et.updateChild(nt,ot)}),et}function viewProcessorApplyServerMerge(_e,et,rt,nt,ot,it,st,at){if(et.serverCache.getNode().isEmpty()&&!et.serverCache.isFullyInitialized())return et;let lt=et,ct;pathIsEmpty(rt)?ct=nt:ct=new ImmutableTree(null).setTree(rt,nt);const pt=et.serverCache.getNode();return ct.children.inorderTraversal((ut,ht)=>{if(pt.hasChild(ut)){const ft=et.serverCache.getNode().getImmediateChild(ut),gt=viewProcessorApplyMerge(_e,ft,ht);lt=viewProcessorApplyServerOverwrite(_e,lt,new Path(ut),gt,ot,it,st,at)}}),ct.children.inorderTraversal((ut,ht)=>{const ft=!et.serverCache.isCompleteForChild(ut)&&ht.value===null;if(!pt.hasChild(ut)&&!ft){const gt=et.serverCache.getNode().getImmediateChild(ut),vt=viewProcessorApplyMerge(_e,gt,ht);lt=viewProcessorApplyServerOverwrite(_e,lt,new Path(ut),vt,ot,it,st,at)}}),lt}function viewProcessorAckUserWrite(_e,et,rt,nt,ot,it,st){if(writeTreeRefShadowingWrite(ot,rt)!=null)return et;const at=et.serverCache.isFiltered(),lt=et.serverCache;if(nt.value!=null){if(pathIsEmpty(rt)&&lt.isFullyInitialized()||lt.isCompleteForPath(rt))return viewProcessorApplyServerOverwrite(_e,et,rt,lt.getNode().getChild(rt),ot,it,at,st);if(pathIsEmpty(rt)){let ct=new ImmutableTree(null);return lt.getNode().forEachChild(KEY_INDEX,(pt,ut)=>{ct=ct.set(new Path(pt),ut)}),viewProcessorApplyServerMerge(_e,et,rt,ct,ot,it,at,st)}else return et}else{let ct=new ImmutableTree(null);return nt.foreach((pt,ut)=>{const ht=pathChild(rt,pt);lt.isCompleteForPath(ht)&&(ct=ct.set(pt,lt.getNode().getChild(ht)))}),viewProcessorApplyServerMerge(_e,et,rt,ct,ot,it,at,st)}}function viewProcessorListenComplete(_e,et,rt,nt,ot){const it=et.serverCache,st=viewCacheUpdateServerSnap(et,it.getNode(),it.isFullyInitialized()||pathIsEmpty(rt),it.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(_e,st,rt,nt,NO_COMPLETE_CHILD_SOURCE,ot)}function viewProcessorRevertUserWrite(_e,et,rt,nt,ot,it){let st;if(writeTreeRefShadowingWrite(nt,rt)!=null)return et;{const at=new WriteTreeCompleteChildSource(nt,et,ot),lt=et.eventCache.getNode();let ct;if(pathIsEmpty(rt)||pathGetFront(rt)===".priority"){let pt;if(et.serverCache.isFullyInitialized())pt=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(et));else{const ut=et.serverCache.getNode();assert(ut instanceof ChildrenNode,"serverChildren would be complete if leaf node"),pt=writeTreeRefCalcCompleteEventChildren(nt,ut)}pt=pt,ct=_e.filter.updateFullNode(lt,pt,it)}else{const pt=pathGetFront(rt);let ut=writeTreeRefCalcCompleteChild(nt,pt,et.serverCache);ut==null&&et.serverCache.isCompleteForChild(pt)&&(ut=lt.getImmediateChild(pt)),ut!=null?ct=_e.filter.updateChild(lt,pt,ut,pathPopFront(rt),at,it):et.eventCache.getNode().hasChild(pt)?ct=_e.filter.updateChild(lt,pt,ChildrenNode.EMPTY_NODE,pathPopFront(rt),at,it):ct=lt,ct.isEmpty()&&et.serverCache.isFullyInitialized()&&(st=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(et)),st.isLeafNode()&&(ct=_e.filter.updateFullNode(ct,st,it)))}return st=et.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(nt,newEmptyPath())!=null,viewCacheUpdateEventSnap(et,ct,st,_e.filter.filtersNodes())}}function viewGetCompleteServerCache(_e,et){const rt=viewCacheGetCompleteServerSnap(_e.viewCache_);return rt&&(_e.query._queryParams.loadsAllData()||!pathIsEmpty(et)&&!rt.getImmediateChild(pathGetFront(et)).isEmpty())?rt.getChild(et):null}function viewApplyOperation(_e,et,rt,nt){et.type===OperationType.MERGE&&et.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(_e.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(_e.viewCache_),"Missing event cache, even though we have a server cache"));const ot=_e.viewCache_,it=viewProcessorApplyOperation(_e.processor_,ot,et,rt,nt);return viewProcessorAssertIndexed(_e.processor_,it.viewCache),assert(it.viewCache.serverCache.isFullyInitialized()||!ot.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),_e.viewCache_=it.viewCache,viewGenerateEventsForChanges_(_e,it.changes,it.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(_e,et,rt,nt){const ot=nt?[nt]:_e.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(_e.eventGenerator_,et,rt,ot)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;function syncPointSetReferenceConstructor(_e){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=_e}function syncPointApplyOperation(_e,et,rt,nt){const ot=et.source.queryId;if(ot!==null){const it=_e.views.get(ot);return assert(it!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(it,et,rt,nt)}else{let it=[];for(const st of _e.views.values())it=it.concat(viewApplyOperation(st,et,rt,nt));return it}}function syncPointGetCompleteServerCache(_e,et){let rt=null;for(const nt of _e.views.values())rt=rt||viewGetCompleteServerCache(nt,et);return rt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(_e){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=_e}class SyncTree{constructor(et){this.listenProvider_=et,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(_e,et,rt,nt,ot){return writeTreeAddOverwrite(_e.pendingWriteTree_,et,rt,nt,ot),ot?syncTreeApplyOperationToSyncPoints_(_e,new Overwrite(newOperationSourceUser(),et,rt)):[]}function syncTreeAckUserWrite(_e,et,rt=!1){const nt=writeTreeGetWrite(_e.pendingWriteTree_,et);if(writeTreeRemoveWrite(_e.pendingWriteTree_,et)){let it=new ImmutableTree(null);return nt.snap!=null?it=it.set(newEmptyPath(),!0):each(nt.children,st=>{it=it.set(new Path(st),!0)}),syncTreeApplyOperationToSyncPoints_(_e,new AckUserWrite(nt.path,it,rt))}else return[]}function syncTreeApplyServerOverwrite(_e,et,rt){return syncTreeApplyOperationToSyncPoints_(_e,new Overwrite(newOperationSourceServer(),et,rt))}function syncTreeApplyServerMerge(_e,et,rt){const nt=ImmutableTree.fromObject(rt);return syncTreeApplyOperationToSyncPoints_(_e,new Merge(newOperationSourceServer(),et,nt))}function syncTreeApplyTaggedQueryOverwrite(_e,et,rt,nt){const ot=syncTreeQueryKeyForTag_(_e,nt);if(ot!=null){const it=syncTreeParseQueryKey_(ot),st=it.path,at=it.queryId,lt=newRelativePath(st,et),ct=new Overwrite(newOperationSourceServerTaggedQuery(at),lt,rt);return syncTreeApplyTaggedOperation_(_e,st,ct)}else return[]}function syncTreeApplyTaggedQueryMerge(_e,et,rt,nt){const ot=syncTreeQueryKeyForTag_(_e,nt);if(ot){const it=syncTreeParseQueryKey_(ot),st=it.path,at=it.queryId,lt=newRelativePath(st,et),ct=ImmutableTree.fromObject(rt),pt=new Merge(newOperationSourceServerTaggedQuery(at),lt,ct);return syncTreeApplyTaggedOperation_(_e,st,pt)}else return[]}function syncTreeCalcCompleteEventCache(_e,et,rt){const ot=_e.pendingWriteTree_,it=_e.syncPointTree_.findOnPath(et,(st,at)=>{const lt=newRelativePath(st,et),ct=syncPointGetCompleteServerCache(at,lt);if(ct)return ct});return writeTreeCalcCompleteEventCache(ot,et,it,rt,!0)}function syncTreeApplyOperationToSyncPoints_(_e,et){return syncTreeApplyOperationHelper_(et,_e.syncPointTree_,null,writeTreeChildWrites(_e.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(_e,et,rt,nt){if(pathIsEmpty(_e.path))return syncTreeApplyOperationDescendantsHelper_(_e,et,rt,nt);{const ot=et.get(newEmptyPath());rt==null&&ot!=null&&(rt=syncPointGetCompleteServerCache(ot,newEmptyPath()));let it=[];const st=pathGetFront(_e.path),at=_e.operationForChild(st),lt=et.children.get(st);if(lt&&at){const ct=rt?rt.getImmediateChild(st):null,pt=writeTreeRefChild(nt,st);it=it.concat(syncTreeApplyOperationHelper_(at,lt,ct,pt))}return ot&&(it=it.concat(syncPointApplyOperation(ot,_e,nt,rt))),it}}function syncTreeApplyOperationDescendantsHelper_(_e,et,rt,nt){const ot=et.get(newEmptyPath());rt==null&&ot!=null&&(rt=syncPointGetCompleteServerCache(ot,newEmptyPath()));let it=[];return et.children.inorderTraversal((st,at)=>{const lt=rt?rt.getImmediateChild(st):null,ct=writeTreeRefChild(nt,st),pt=_e.operationForChild(st);pt&&(it=it.concat(syncTreeApplyOperationDescendantsHelper_(pt,at,lt,ct)))}),ot&&(it=it.concat(syncPointApplyOperation(ot,_e,nt,rt))),it}function syncTreeQueryKeyForTag_(_e,et){return _e.tagToQueryMap.get(et)}function syncTreeParseQueryKey_(_e){const et=_e.indexOf("$");return assert(et!==-1&&et<_e.length-1,"Bad queryKey."),{queryId:_e.substr(et+1),path:new Path(_e.substr(0,et))}}function syncTreeApplyTaggedOperation_(_e,et,rt){const nt=_e.syncPointTree_.get(et);assert(nt,"Missing sync point for query tag that we're tracking");const ot=writeTreeChildWrites(_e.pendingWriteTree_,et);return syncPointApplyOperation(nt,rt,ot,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(et){this.node_=et}getImmediateChild(et){const rt=this.node_.getImmediateChild(et);return new ExistingValueProvider(rt)}node(){return this.node_}}class DeferredValueProvider{constructor(et,rt){this.syncTree_=et,this.path_=rt}getImmediateChild(et){const rt=pathChild(this.path_,et);return new DeferredValueProvider(this.syncTree_,rt)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(_e){return _e=_e||{},_e.timestamp=_e.timestamp||new Date().getTime(),_e},resolveDeferredLeafValue=function(_e,et,rt){if(!_e||typeof _e!="object")return _e;if(assert(".sv"in _e,"Unexpected leaf node or priority contents"),typeof _e[".sv"]=="string")return resolveScalarDeferredValue(_e[".sv"],et,rt);if(typeof _e[".sv"]=="object")return resolveComplexDeferredValue(_e[".sv"],et);assert(!1,"Unexpected server value: "+JSON.stringify(_e,null,2))},resolveScalarDeferredValue=function(_e,et,rt){switch(_e){case"timestamp":return rt.timestamp;default:assert(!1,"Unexpected server value: "+_e)}},resolveComplexDeferredValue=function(_e,et,rt){_e.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(_e,null,2));const nt=_e.increment;typeof nt!="number"&&assert(!1,"Unexpected increment value: "+nt);const ot=et.node();if(assert(ot!==null&&typeof ot<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!ot.isLeafNode())return nt;const st=ot.getValue();return typeof st!="number"?nt:st+nt},resolveDeferredValueTree=function(_e,et,rt,nt){return resolveDeferredValue(et,new DeferredValueProvider(rt,_e),nt)},resolveDeferredValueSnapshot=function(_e,et,rt){return resolveDeferredValue(_e,new ExistingValueProvider(et),rt)};function resolveDeferredValue(_e,et,rt){const nt=_e.getPriority().val(),ot=resolveDeferredLeafValue(nt,et.getImmediateChild(".priority"),rt);let it;if(_e.isLeafNode()){const st=_e,at=resolveDeferredLeafValue(st.getValue(),et,rt);return at!==st.getValue()||ot!==st.getPriority().val()?new LeafNode(at,nodeFromJSON(ot)):_e}else{const st=_e;return it=st,ot!==st.getPriority().val()&&(it=it.updatePriority(new LeafNode(ot))),st.forEachChild(PRIORITY_INDEX,(at,lt)=>{const ct=resolveDeferredValue(lt,et.getImmediateChild(at),rt);ct!==lt&&(it=it.updateImmediateChild(at,ct))}),it}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(et="",rt=null,nt={children:{},childCount:0}){this.name=et,this.parent=rt,this.node=nt}}function treeSubTree(_e,et){let rt=et instanceof Path?et:new Path(et),nt=_e,ot=pathGetFront(rt);for(;ot!==null;){const it=safeGet(nt.node.children,ot)||{children:{},childCount:0};nt=new Tree(ot,nt,it),rt=pathPopFront(rt),ot=pathGetFront(rt)}return nt}function treeGetValue(_e){return _e.node.value}function treeSetValue(_e,et){_e.node.value=et,treeUpdateParents(_e)}function treeHasChildren(_e){return _e.node.childCount>0}function treeIsEmpty(_e){return treeGetValue(_e)===void 0&&!treeHasChildren(_e)}function treeForEachChild(_e,et){each(_e.node.children,(rt,nt)=>{et(new Tree(rt,_e,nt))})}function treeForEachDescendant(_e,et,rt,nt){rt&&!nt&&et(_e),treeForEachChild(_e,ot=>{treeForEachDescendant(ot,et,!0,nt)}),rt&&nt&&et(_e)}function treeForEachAncestor(_e,et,rt){let nt=rt?_e:_e.parent;for(;nt!==null;){if(et(nt))return!0;nt=nt.parent}return!1}function treeGetPath(_e){return new Path(_e.parent===null?_e.name:treeGetPath(_e.parent)+"/"+_e.name)}function treeUpdateParents(_e){_e.parent!==null&&treeUpdateChild(_e.parent,_e.name,_e)}function treeUpdateChild(_e,et,rt){const nt=treeIsEmpty(rt),ot=contains(_e.node.children,et);nt&&ot?(delete _e.node.children[et],_e.node.childCount--,treeUpdateParents(_e)):!nt&&!ot&&(_e.node.children[et]=rt.node,_e.node.childCount++,treeUpdateParents(_e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(_e){return typeof _e=="string"&&_e.length!==0&&!INVALID_KEY_REGEX_.test(_e)},isValidPathString=function(_e){return typeof _e=="string"&&_e.length!==0&&!INVALID_PATH_REGEX_.test(_e)},isValidRootPathString=function(_e){return _e&&(_e=_e.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(_e)},validateFirebaseData=function(_e,et,rt){const nt=rt instanceof Path?new ValidationPath(rt,_e):rt;if(et===void 0)throw new Error(_e+"contains undefined "+validationPathToErrorString(nt));if(typeof et=="function")throw new Error(_e+"contains a function "+validationPathToErrorString(nt)+" with contents = "+et.toString());if(isInvalidJSONNumber(et))throw new Error(_e+"contains "+et.toString()+" "+validationPathToErrorString(nt));if(typeof et=="string"&&et.length>MAX_LEAF_SIZE_/3&&stringLength(et)>MAX_LEAF_SIZE_)throw new Error(_e+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(nt)+" ('"+et.substring(0,50)+"...')");if(et&&typeof et=="object"){let ot=!1,it=!1;if(each(et,(st,at)=>{if(st===".value")ot=!0;else if(st!==".priority"&&st!==".sv"&&(it=!0,!isValidKey(st)))throw new Error(_e+" contains an invalid key ("+st+") "+validationPathToErrorString(nt)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(nt,st),validateFirebaseData(_e,at,nt),validationPathPop(nt)}),ot&&it)throw new Error(_e+' contains ".value" child '+validationPathToErrorString(nt)+" in addition to actual children.")}},validateUrl=function(_e,et){const rt=et.path.toString();if(typeof et.repoInfo.host!="string"||et.repoInfo.host.length===0||!isValidKey(et.repoInfo.namespace)&&et.repoInfo.host.split(":")[0]!=="localhost"||rt.length!==0&&!isValidRootPathString(rt))throw new Error(errorPrefix(_e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(_e,et){let rt=null;for(let nt=0;nt<et.length;nt++){const ot=et[nt],it=ot.getPath();rt!==null&&!pathEquals(it,rt.path)&&(_e.eventLists_.push(rt),rt=null),rt===null&&(rt={events:[],path:it}),rt.events.push(ot)}rt&&_e.eventLists_.push(rt)}function eventQueueRaiseEventsForChangedPath(_e,et,rt){eventQueueQueueEvents(_e,rt),eventQueueRaiseQueuedEventsMatchingPredicate(_e,nt=>pathContains(nt,et)||pathContains(et,nt))}function eventQueueRaiseQueuedEventsMatchingPredicate(_e,et){_e.recursionDepth_++;let rt=!0;for(let nt=0;nt<_e.eventLists_.length;nt++){const ot=_e.eventLists_[nt];if(ot){const it=ot.path;et(it)?(eventListRaise(_e.eventLists_[nt]),_e.eventLists_[nt]=null):rt=!1}}rt&&(_e.eventLists_=[]),_e.recursionDepth_--}function eventListRaise(_e){for(let et=0;et<_e.events.length;et++){const rt=_e.events[et];if(rt!==null){_e.events[et]=null;const nt=rt.getEventRunner();logger&&log("event: "+rt.toString()),exceptionGuard(nt)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(et,rt,nt,ot){this.repoInfo_=et,this.forceRestClient_=rt,this.authTokenProvider_=nt,this.appCheckProvider_=ot,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(_e,et,rt){if(_e.stats_=statsManagerGetCollection(_e.repoInfo_),_e.forceRestClient_||beingCrawled())_e.server_=new ReadonlyRestClient(_e.repoInfo_,(nt,ot,it,st)=>{repoOnDataUpdate(_e,nt,ot,it,st)},_e.authTokenProvider_,_e.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(_e,!0),0);else{if(typeof rt<"u"&&rt!==null){if(typeof rt!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(rt)}catch(nt){throw new Error("Invalid authOverride provided: "+nt)}}_e.persistentConnection_=new PersistentConnection(_e.repoInfo_,et,(nt,ot,it,st)=>{repoOnDataUpdate(_e,nt,ot,it,st)},nt=>{repoOnConnectStatus(_e,nt)},nt=>{repoOnServerInfoUpdate(_e,nt)},_e.authTokenProvider_,_e.appCheckProvider_,rt),_e.server_=_e.persistentConnection_}_e.authTokenProvider_.addTokenChangeListener(nt=>{_e.server_.refreshAuthToken(nt)}),_e.appCheckProvider_.addTokenChangeListener(nt=>{_e.server_.refreshAppCheckToken(nt.token)}),_e.statsReporter_=statsManagerGetOrCreateReporter(_e.repoInfo_,()=>new StatsReporter(_e.stats_,_e.server_)),_e.infoData_=new SnapshotHolder,_e.infoSyncTree_=new SyncTree({startListening:(nt,ot,it,st)=>{let at=[];const lt=_e.infoData_.getNode(nt._path);return lt.isEmpty()||(at=syncTreeApplyServerOverwrite(_e.infoSyncTree_,nt._path,lt),setTimeout(()=>{st("ok")},0)),at},stopListening:()=>{}}),repoUpdateInfo(_e,"connected",!1),_e.serverSyncTree_=new SyncTree({startListening:(nt,ot,it,st)=>(_e.server_.listen(nt,it,ot,(at,lt)=>{const ct=st(at,lt);eventQueueRaiseEventsForChangedPath(_e.eventQueue_,nt._path,ct)}),[]),stopListening:(nt,ot)=>{_e.server_.unlisten(nt,ot)}})}function repoServerTime(_e){const rt=_e.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return new Date().getTime()+rt}function repoGenerateServerValues(_e){return generateWithValues({timestamp:repoServerTime(_e)})}function repoOnDataUpdate(_e,et,rt,nt,ot){_e.dataUpdateCount++;const it=new Path(et);rt=_e.interceptServerDataCallback_?_e.interceptServerDataCallback_(et,rt):rt;let st=[];if(ot)if(nt){const lt=map(rt,ct=>nodeFromJSON(ct));st=syncTreeApplyTaggedQueryMerge(_e.serverSyncTree_,it,lt,ot)}else{const lt=nodeFromJSON(rt);st=syncTreeApplyTaggedQueryOverwrite(_e.serverSyncTree_,it,lt,ot)}else if(nt){const lt=map(rt,ct=>nodeFromJSON(ct));st=syncTreeApplyServerMerge(_e.serverSyncTree_,it,lt)}else{const lt=nodeFromJSON(rt);st=syncTreeApplyServerOverwrite(_e.serverSyncTree_,it,lt)}let at=it;st.length>0&&(at=repoRerunTransactions(_e,it)),eventQueueRaiseEventsForChangedPath(_e.eventQueue_,at,st)}function repoOnConnectStatus(_e,et){repoUpdateInfo(_e,"connected",et),et===!1&&repoRunOnDisconnectEvents(_e)}function repoOnServerInfoUpdate(_e,et){each(et,(rt,nt)=>{repoUpdateInfo(_e,rt,nt)})}function repoUpdateInfo(_e,et,rt){const nt=new Path("/.info/"+et),ot=nodeFromJSON(rt);_e.infoData_.updateSnapshot(nt,ot);const it=syncTreeApplyServerOverwrite(_e.infoSyncTree_,nt,ot);eventQueueRaiseEventsForChangedPath(_e.eventQueue_,nt,it)}function repoGetNextWriteId(_e){return _e.nextWriteId_++}function repoRunOnDisconnectEvents(_e){repoLog(_e,"onDisconnectEvents");const et=repoGenerateServerValues(_e),rt=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(_e.onDisconnect_,newEmptyPath(),(ot,it)=>{const st=resolveDeferredValueTree(ot,it,_e.serverSyncTree_,et);sparseSnapshotTreeRemember(rt,ot,st)});let nt=[];sparseSnapshotTreeForEachTree(rt,newEmptyPath(),(ot,it)=>{nt=nt.concat(syncTreeApplyServerOverwrite(_e.serverSyncTree_,ot,it));const st=repoAbortTransactions(_e,ot);repoRerunTransactions(_e,st)}),_e.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(_e.eventQueue_,newEmptyPath(),nt)}function repoInterrupt(_e){_e.persistentConnection_&&_e.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(_e,...et){let rt="";_e.persistentConnection_&&(rt=_e.persistentConnection_.id+":"),log(rt,...et)}function repoGetLatestState(_e,et,rt){return syncTreeCalcCompleteEventCache(_e.serverSyncTree_,et,rt)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(_e,et=_e.transactionQueueTree_){if(et||repoPruneCompletedTransactionsBelowNode(_e,et),treeGetValue(et)){const rt=repoBuildTransactionQueue(_e,et);assert(rt.length>0,"Sending zero length transaction queue"),rt.every(ot=>ot.status===0)&&repoSendTransactionQueue(_e,treeGetPath(et),rt)}else treeHasChildren(et)&&treeForEachChild(et,rt=>{repoSendReadyTransactions(_e,rt)})}function repoSendTransactionQueue(_e,et,rt){const nt=rt.map(ct=>ct.currentWriteId),ot=repoGetLatestState(_e,et,nt);let it=ot;const st=ot.hash();for(let ct=0;ct<rt.length;ct++){const pt=rt[ct];assert(pt.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),pt.status=1,pt.retryCount++;const ut=newRelativePath(et,pt.path);it=it.updateChild(ut,pt.currentOutputSnapshotRaw)}const at=it.val(!0),lt=et;_e.server_.put(lt.toString(),at,ct=>{repoLog(_e,"transaction put response",{path:lt.toString(),status:ct});let pt=[];if(ct==="ok"){const ut=[];for(let ht=0;ht<rt.length;ht++)rt[ht].status=2,pt=pt.concat(syncTreeAckUserWrite(_e.serverSyncTree_,rt[ht].currentWriteId)),rt[ht].onComplete&&ut.push(()=>rt[ht].onComplete(null,!0,rt[ht].currentOutputSnapshotResolved)),rt[ht].unwatcher();repoPruneCompletedTransactionsBelowNode(_e,treeSubTree(_e.transactionQueueTree_,et)),repoSendReadyTransactions(_e,_e.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(_e.eventQueue_,et,pt);for(let ht=0;ht<ut.length;ht++)exceptionGuard(ut[ht])}else{if(ct==="datastale")for(let ut=0;ut<rt.length;ut++)rt[ut].status===3?rt[ut].status=4:rt[ut].status=0;else{warn("transaction at "+lt.toString()+" failed: "+ct);for(let ut=0;ut<rt.length;ut++)rt[ut].status=4,rt[ut].abortReason=ct}repoRerunTransactions(_e,et)}},st)}function repoRerunTransactions(_e,et){const rt=repoGetAncestorTransactionNode(_e,et),nt=treeGetPath(rt),ot=repoBuildTransactionQueue(_e,rt);return repoRerunTransactionQueue(_e,ot,nt),nt}function repoRerunTransactionQueue(_e,et,rt){if(et.length===0)return;const nt=[];let ot=[];const st=et.filter(at=>at.status===0).map(at=>at.currentWriteId);for(let at=0;at<et.length;at++){const lt=et[at],ct=newRelativePath(rt,lt.path);let pt=!1,ut;if(assert(ct!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),lt.status===4)pt=!0,ut=lt.abortReason,ot=ot.concat(syncTreeAckUserWrite(_e.serverSyncTree_,lt.currentWriteId,!0));else if(lt.status===0)if(lt.retryCount>=MAX_TRANSACTION_RETRIES)pt=!0,ut="maxretry",ot=ot.concat(syncTreeAckUserWrite(_e.serverSyncTree_,lt.currentWriteId,!0));else{const ht=repoGetLatestState(_e,lt.path,st);lt.currentInputSnapshot=ht;const ft=et[at].update(ht.val());if(ft!==void 0){validateFirebaseData("transaction failed: Data returned ",ft,lt.path);let gt=nodeFromJSON(ft);typeof ft=="object"&&ft!=null&&contains(ft,".priority")||(gt=gt.updatePriority(ht.getPriority()));const yt=lt.currentWriteId,mt=repoGenerateServerValues(_e),Et=resolveDeferredValueSnapshot(gt,ht,mt);lt.currentOutputSnapshotRaw=gt,lt.currentOutputSnapshotResolved=Et,lt.currentWriteId=repoGetNextWriteId(_e),st.splice(st.indexOf(yt),1),ot=ot.concat(syncTreeApplyUserOverwrite(_e.serverSyncTree_,lt.path,Et,lt.currentWriteId,lt.applyLocally)),ot=ot.concat(syncTreeAckUserWrite(_e.serverSyncTree_,yt,!0))}else pt=!0,ut="nodata",ot=ot.concat(syncTreeAckUserWrite(_e.serverSyncTree_,lt.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(_e.eventQueue_,rt,ot),ot=[],pt&&(et[at].status=2,function(ht){setTimeout(ht,Math.floor(0))}(et[at].unwatcher),et[at].onComplete&&(ut==="nodata"?nt.push(()=>et[at].onComplete(null,!1,et[at].currentInputSnapshot)):nt.push(()=>et[at].onComplete(new Error(ut),!1,null))))}repoPruneCompletedTransactionsBelowNode(_e,_e.transactionQueueTree_);for(let at=0;at<nt.length;at++)exceptionGuard(nt[at]);repoSendReadyTransactions(_e,_e.transactionQueueTree_)}function repoGetAncestorTransactionNode(_e,et){let rt,nt=_e.transactionQueueTree_;for(rt=pathGetFront(et);rt!==null&&treeGetValue(nt)===void 0;)nt=treeSubTree(nt,rt),et=pathPopFront(et),rt=pathGetFront(et);return nt}function repoBuildTransactionQueue(_e,et){const rt=[];return repoAggregateTransactionQueuesForNode(_e,et,rt),rt.sort((nt,ot)=>nt.order-ot.order),rt}function repoAggregateTransactionQueuesForNode(_e,et,rt){const nt=treeGetValue(et);if(nt)for(let ot=0;ot<nt.length;ot++)rt.push(nt[ot]);treeForEachChild(et,ot=>{repoAggregateTransactionQueuesForNode(_e,ot,rt)})}function repoPruneCompletedTransactionsBelowNode(_e,et){const rt=treeGetValue(et);if(rt){let nt=0;for(let ot=0;ot<rt.length;ot++)rt[ot].status!==2&&(rt[nt]=rt[ot],nt++);rt.length=nt,treeSetValue(et,rt.length>0?rt:void 0)}treeForEachChild(et,nt=>{repoPruneCompletedTransactionsBelowNode(_e,nt)})}function repoAbortTransactions(_e,et){const rt=treeGetPath(repoGetAncestorTransactionNode(_e,et)),nt=treeSubTree(_e.transactionQueueTree_,et);return treeForEachAncestor(nt,ot=>{repoAbortTransactionsOnNode(_e,ot)}),repoAbortTransactionsOnNode(_e,nt),treeForEachDescendant(nt,ot=>{repoAbortTransactionsOnNode(_e,ot)}),rt}function repoAbortTransactionsOnNode(_e,et){const rt=treeGetValue(et);if(rt){const nt=[];let ot=[],it=-1;for(let st=0;st<rt.length;st++)rt[st].status===3||(rt[st].status===1?(assert(it===st-1,"All SENT items should be at beginning of queue."),it=st,rt[st].status=3,rt[st].abortReason="set"):(assert(rt[st].status===0,"Unexpected transaction status in abort"),rt[st].unwatcher(),ot=ot.concat(syncTreeAckUserWrite(_e.serverSyncTree_,rt[st].currentWriteId,!0)),rt[st].onComplete&&nt.push(rt[st].onComplete.bind(null,new Error("set"),!1,null))));it===-1?treeSetValue(et,void 0):rt.length=it+1,eventQueueRaiseEventsForChangedPath(_e.eventQueue_,treeGetPath(et),ot);for(let st=0;st<nt.length;st++)exceptionGuard(nt[st])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(_e){let et="";const rt=_e.split("/");for(let nt=0;nt<rt.length;nt++)if(rt[nt].length>0){let ot=rt[nt];try{ot=decodeURIComponent(ot.replace(/\+/g," "))}catch{}et+="/"+ot}return et}function decodeQuery(_e){const et={};_e.charAt(0)==="?"&&(_e=_e.substring(1));for(const rt of _e.split("&")){if(rt.length===0)continue;const nt=rt.split("=");nt.length===2?et[decodeURIComponent(nt[0])]=decodeURIComponent(nt[1]):warn(`Invalid query segment '${rt}' in query '${_e}'`)}return et}const parseRepoInfo=function(_e,et){const rt=parseDatabaseURL(_e),nt=rt.namespace;rt.domain==="firebase.com"&&fatal(rt.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!nt||nt==="undefined")&&rt.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),rt.secure||warnIfPageIsSecure();const ot=rt.scheme==="ws"||rt.scheme==="wss";return{repoInfo:new RepoInfo(rt.host,rt.secure,nt,ot,et,"",nt!==rt.subdomain),path:new Path(rt.pathString)}},parseDatabaseURL=function(_e){let et="",rt="",nt="",ot="",it="",st=!0,at="https",lt=443;if(typeof _e=="string"){let ct=_e.indexOf("//");ct>=0&&(at=_e.substring(0,ct-1),_e=_e.substring(ct+2));let pt=_e.indexOf("/");pt===-1&&(pt=_e.length);let ut=_e.indexOf("?");ut===-1&&(ut=_e.length),et=_e.substring(0,Math.min(pt,ut)),pt<ut&&(ot=decodePath(_e.substring(pt,ut)));const ht=decodeQuery(_e.substring(Math.min(_e.length,ut)));ct=et.indexOf(":"),ct>=0?(st=at==="https"||at==="wss",lt=parseInt(et.substring(ct+1),10)):ct=et.length;const ft=et.slice(0,ct);if(ft.toLowerCase()==="localhost")rt="localhost";else if(ft.split(".").length<=2)rt=ft;else{const gt=et.indexOf(".");nt=et.substring(0,gt).toLowerCase(),rt=et.substring(gt+1),it=nt}"ns"in ht&&(it=ht.ns)}return{host:et,port:lt,domain:rt,subdomain:nt,secure:st,scheme:at,pathString:ot,namespace:it}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(et,rt,nt,ot){this._repo=et,this._path=rt,this._queryParams=nt,this._orderByCalled=ot}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const et=queryParamsGetQueryObject(this._queryParams),rt=ObjectToUniqueKey(et);return rt==="{}"?"default":rt}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(et){if(et=getModularInstance(et),!(et instanceof QueryImpl))return!1;const rt=this._repo===et._repo,nt=pathEquals(this._path,et._path),ot=this._queryIdentifier===et._queryIdentifier;return rt&&nt&&ot}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(et,rt){super(et,rt,new QueryParams,!1)}get parent(){const et=pathParent(this._path);return et===null?null:new ReferenceImpl(this._repo,et)}get root(){let et=this;for(;et.parent!==null;)et=et.parent;return et}}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerApplyEmulatorSettings(_e,et,rt,nt){_e.repoInfo_=new RepoInfo(`${et}:${rt}`,!1,_e.repoInfo_.namespace,_e.repoInfo_.webSocketOnly,_e.repoInfo_.nodeAdmin,_e.repoInfo_.persistenceKey,_e.repoInfo_.includeNamespaceInQueryParams,!0),nt&&(_e.authTokenProvider_=nt)}function repoManagerDatabaseFromApp(_e,et,rt,nt,ot){let it=nt||_e.options.databaseURL;it===void 0&&(_e.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",_e.options.projectId),it=`${_e.options.projectId}-default-rtdb.firebaseio.com`);let st=parseRepoInfo(it,ot),at=st.repoInfo,lt,ct;typeof process<"u"&&process.env&&(ct=process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),ct?(lt=!0,it=`http://${ct}?ns=${at.namespace}`,st=parseRepoInfo(it,ot),at=st.repoInfo):lt=!st.repoInfo.secure;const pt=ot&&lt?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(_e.name,_e.options,et);validateUrl("Invalid Firebase Database URL",st),pathIsEmpty(st.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const ut=repoManagerCreateRepo(at,_e,pt,new AppCheckTokenProvider(_e.name,rt));return new Database(ut,_e)}function repoManagerDeleteRepo(_e,et){const rt=repos[et];(!rt||rt[_e.key]!==_e)&&fatal(`Database ${et}(${_e.repoInfo_}) has already been deleted.`),repoInterrupt(_e),delete rt[_e.key]}function repoManagerCreateRepo(_e,et,rt,nt){let ot=repos[et.name];ot||(ot={},repos[et.name]=ot);let it=ot[_e.toURLString()];return it&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),it=new Repo(_e,useRestClient,rt,nt),ot[_e.toURLString()]=it,it}class Database{constructor(et,rt){this._repoInternal=et,this.app=rt,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(et){this._rootInternal===null&&fatal("Cannot call "+et+" on a deleted database.")}}function getDatabase(_e=getApp(),et){const rt=_getProvider(_e,"database").getImmediate({identifier:et});if(!rt._instanceStarted){const nt=getDefaultEmulatorHostnameAndPort("database");nt&&connectDatabaseEmulator(rt,...nt)}return rt}function connectDatabaseEmulator(_e,et,rt,nt={}){_e=getModularInstance(_e),_e._checkNotDeleted("useEmulator"),_e._instanceStarted&&fatal("Cannot call useEmulator() after instance has already been initialized.");const ot=_e._repoInternal;let it;if(ot.repoInfo_.nodeAdmin)nt.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),it=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(nt.mockUserToken){const st=typeof nt.mockUserToken=="string"?nt.mockUserToken:createMockUserToken(nt.mockUserToken,_e.app.options.projectId);it=new EmulatorTokenProvider(st)}repoManagerApplyEmulatorSettings(ot,et,rt,it)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(_e){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component("database",(et,{instanceIdentifier:rt})=>{const nt=et.getProvider("app").getImmediate(),ot=et.getProvider("auth-internal"),it=et.getProvider("app-check-internal");return repoManagerDatabaseFromApp(nt,ot,it,rt)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name$1,version,_e),registerVersion(name$1,version,"esm2017")}PersistentConnection.prototype.simpleListen=function(_e,et){this.sendRequest("q",{p:_e},et)};PersistentConnection.prototype.echo=function(_e,et){this.sendRequest("echo",{d:_e},et)};registerDatabase();const firebaseConfig={apiKey:"AIzaSyDDQ0XzM7UZ1LUBGJ83r6zlYCvSRkE6sIY",authDomain:"project-freelancing.firebaseapp.com",databaseURL:"https://project-freelancing-default-rtdb.firebaseio.com",projectId:"project-freelancing",storageBucket:"project-freelancing.appspot.com",messagingSenderId:"837601807809",appId:"1:837601807809:web:d5550b98a1fae2d2177340",measurementId:"G-1L7GEDBJ0B"},app=initializeApp(firebaseConfig),auth=getAuth(app);getDatabase(app);const theme=createTheme();function Login(){var ut,ht;useNavigate(),(ht=(ut=useLocation().state)==null?void 0:ut.from)==null||ht.pathname;const[et,rt]=reactExports.useState("+91"),[nt,ot]=reactExports.useState(!1),[it,st]=reactExports.useState(""),at=()=>{window.recaptchaVerifier=new RecaptchaVerifier("recaptcha",{size:"invisible",callback:ft=>{}},auth)},lt=ft=>{ft.preventDefault(),ot(!0),at();let gt=window.recaptchaVerifier;signInWithPhoneNumber(auth,et,gt).then(vt=>{window.confirmationResult=vt}).catch(vt=>{console.log(vt)})},ct=ft=>{let gt=ft.target.value;st(gt),gt.length===6&&window.confirmationResult.confirm(gt).then(yt=>{let mt=yt.user;console.log(mt),localStorage.setItem("AT",mt.accessToken),alert("User signed in successfully")}).catch(yt=>{alert("User couldn't sign in (bad verification code?)")})},pt=()=>nt?jsxs("div",{className:"app__container",children:[jsx(Card$1,{sx:{width:"300px"},children:jsxs(CardContent$1,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[jsx(Typography$1,{sx:{padding:"20px"},variant:"h5",component:"div",children:"Enter the OTP"}),jsx(TextField$1,{sx:{width:"240px"},variant:"outlined",label:"OTP ",value:it,onChange:ct})]})}),jsx("div",{id:"recaptcha"})]}):jsxs("div",{className:"app__container",children:[jsx(Card$1,{sx:{width:"300px"},children:jsxs(CardContent$1,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[jsx(Typography$1,{sx:{padding:"20px"},variant:"h5",component:"div",children:"Enter your phone number"}),jsxs("form",{onSubmit:lt,children:[jsx(TextField$1,{sx:{width:"240px"},variant:"outlined",autoComplete:"off",label:"Phone Number",value:et,onChange:ft=>rt(ft.target.value)}),jsx(Button$1,{type:"submit",variant:"contained",sx:{width:"240px",marginTop:"20px"},children:"Send Code"})]})]})}),jsx("div",{id:"recaptcha"})]});return jsx(ThemeProvider,{theme,children:jsxs(Grid$1,{container:!0,component:"main",sx:{height:"100vh"},children:[jsx(CssBaseline,{}),jsx(Grid$1,{item:!0,xs:!1,sm:0,md:7,sx:{backgroundImage:`url(${side})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}}),jsx(Grid$1,{item:!0,xs:12,sm:12,md:5,component:Paper$1,elevation:6,square:!0,children:jsxs(Box$1,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[jsx(Avatar$1,{sx:{m:1,bgcolor:"secondary.main"}}),jsx(Typography$1,{component:"h1",variant:"h5",children:"Sign in"}),jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/150/150191.png",className:"h-40 aspect-square"}),pt(),jsx("div",{id:"recaptcha"})]})})]})})}function Register(){const _e=useFormInput("student"),et=useFormInput(""),rt=useFormInput(""),nt=useFormInput(""),ot=useFormInput(""),it=useFormInput(""),st=useFormInput(""),at=useNavigate(),lt=async()=>{const ct={username:et.value,roles:_e.value,firstName:rt.value,lastName:nt.value,email:ot.value,password:it.value};(await axios$1.post(SERVER_LINK+"register",ct)).status===202?at("/login"):alert("Server Error While Creating Account! Tey Again Later")};return jsx(Fragment,{children:jsxs(Grid$1,{container:!0,component:"main",sx:{height:"100vh"},children:[jsx(CssBaseline,{}),jsx(Grid$1,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:`url(${side})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}}),jsx(Grid$1,{item:!0,xs:12,sm:12,md:5,component:Paper$1,elevation:6,square:!0,children:jsxs(Box$3,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[jsx(Typography$1,{textAlign:"center",m:3,children:"Register"}),jsx("form",{children:jsxs(Stack$1,{spacing:3,m:1,children:[jsxs(FormControl$1,{children:[jsx(FormLabel$1,{id:"demo-row-radio-buttons-group-label",children:"Who are you ?"}),jsxs(RadioGroup$1,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",..._e,children:[jsx(FormControlLabel$1,{value:"admin",control:jsx(Radio$1,{}),label:"Admin"}),jsx(FormControlLabel$1,{value:"teacher",control:jsx(Radio$1,{}),label:"Teacher"}),jsx(FormControlLabel$1,{value:"student",control:jsx(Radio$1,{}),label:"Student"})]})]}),jsx(TextBox,{label:_e.value==="student"?"Id Number":"User Name",...et}),jsxs(Stack$1,{spacing:{sm:3},direction:{lg:"row",sm:"column"},sx:{justifyContent:"space-between"},children:[jsx(TextBox,{label:"First Name",...rt}),jsx(TextBox,{label:"Last Name",...nt})]}),jsx(TextBox,{label:"E-mail",type:"email",...ot}),jsx(TextBox,{label:"Password",type:"password",...it}),jsx(TextBox,{label:"Confirm Password",type:"password",...st}),jsx(Button$1,{variant:"contained",onClick:lt,children:"Submit"})]})})]})})]})})}var Cancel={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Cancel,"__esModule",{value:!0});var default_1$1=Cancel.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=require$$2,_default$1=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");default_1$1=Cancel.default=_default$1;var CheckCircle={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(CheckCircle,"__esModule",{value:!0});var default_1=CheckCircle.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=require$$2,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");default_1=CheckCircle.default=_default;function Test(){const[_e,et]=reactExports.useState(""),[rt,nt]=reactExports.useState([]),[ot,it]=reactExports.useState({hasCameraAndMicrophone:!1,isCameraStart:!1,isEntireScreenSharing:!1}),st=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(ft=>ft.stop()),await navigator.mediaDevices.enumerateDevices().then(ft=>{const gt=ft.filter(yt=>yt.kind==="videoinput"),vt=ft.filter(yt=>yt.kind==="audioinput");gt.length>0&&vt.length>0&&it({...ot,hasCameraAndMicrophone:!0}),nt(gt)})})()},[]);const at=async()=>{if(_e!==""){const ut={video:{deviceId:_e},audio:!0};try{const ht=await navigator.mediaDevices.getUserMedia(ut);st.current&&(st.current.srcObject=ht),it({...ot,isCameraStart:!0})}catch(ht){console.error("Error accessing media devices.",ht)}}},lt=async()=>{try{const ut=await navigator.mediaDevices.getDisplayMedia({video:{deviceId:_e},audio:!0}),ht=ut.getTracks();ht.length>0&&(ht[0].getSettings().displaySurface==="monitor"?it({...ot,isEntireScreenSharing:!0}):(ut.getTracks().forEach(vt=>vt.stop()),alert("Select Entire Screen")))}catch(ut){console.error("Error accessing screen share.",ut)}},ct=()=>{if(_e===""){alert("Please select camera");return}console.log("Let's Start Quiz")},pt=ut=>ut?jsx(default_1,{color:"secondary"}):jsx(default_1$1,{color:"error"});return jsx("div",{children:jsx(Box$1,{m:5,children:jsxs(Paper$1,{sx:{minHeight:"85vh"},children:[jsx(Typography$1,{variant:"h3",textAlign:"center",children:"Its Instructions Page"}),jsxs(Grid$1,{container:!0,children:[jsx(Grid$1,{item:!0,xs:6,spacing:2,children:jsxs(Stack$3,{spacing:3,children:[jsxs("div",{style:{display:"flex",alignItems:"center"},children:[pt(ot.hasCameraAndMicrophone),"1) Device must have microphone and camera."]}),jsxs("div",{children:[jsxs("div",{style:{display:"flex",alignItems:"center"},children:[pt(ot.isCameraStart),"2) Check Your Camera"]}),jsxs(FormControl$1,{margin:"normal",fullWidth:!0,children:[jsx(InputLabel$1,{id:"demo-simple-select-label",children:"Camera"}),jsx(Select$1,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:_e,label:"Cameras",onChange:ut=>et(ut.target.value),children:rt&&rt.map(ut=>jsx(MenuItem$1,{value:ut.deviceId,children:ut.label},ut.deviceId))})]}),jsx(Button$1,{variant:"contained",onClick:at,children:"Check Camera"})]}),jsxs("div",{children:[jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[pt(ot.isEntireScreenSharing),"3) Screen Share"]}),jsx(Button$1,{variant:"contained",onClick:lt,children:"Screen Share"})]})]})}),jsx(Grid$1,{item:!0,xs:6,children:jsxs("center",{children:[jsx(Typography$1,{children:"Preview"}),jsx("video",{ref:st,style:{width:"300px",height:"225px",borderRadius:"10px",border:"1px solid black"},autoPlay:!0})]})})]}),jsxs(Box$1,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"15px 0"},children:[jsx(Button$1,{component:Link$2,to:"/quiz",color:"error",variant:"contained",children:"Back"}),jsx(Button$1,{variant:"contained",onClick:ct,children:"Start"})]})]})})})}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k$3,goog=goog||{},l$2=commonjsGlobal||self;function aa(){}function ba(_e){var et=typeof _e;return et=et!="object"?et:_e?Array.isArray(_e)?"array":et:"null",et=="array"||et=="object"&&typeof _e.length=="number"}function p$3(_e){var et=typeof _e;return et=="object"&&_e!=null||et=="function"}function ca(_e){return Object.prototype.hasOwnProperty.call(_e,da)&&_e[da]||(_e[da]=++ea)}var da="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function fa(_e,et,rt){return _e.call.apply(_e.bind,arguments)}function ha(_e,et,rt){if(!_e)throw Error();if(2<arguments.length){var nt=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,nt),_e.apply(et,ot)}}return function(){return _e.apply(et,arguments)}}function q$4(_e,et,rt){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q$4=fa:q$4=ha,q$4.apply(null,arguments)}function ja(_e,et){var rt=Array.prototype.slice.call(arguments,1);return function(){var nt=rt.slice();return nt.push.apply(nt,arguments),_e.apply(this,nt)}}function r$3(_e,et){function rt(){}rt.prototype=et.prototype,_e.$=et.prototype,_e.prototype=new rt,_e.prototype.constructor=_e,_e.ac=function(nt,ot,it){for(var st=Array(arguments.length-2),at=2;at<arguments.length;at++)st[at-2]=arguments[at];return et.prototype[ot].apply(nt,st)}}function v$2(){this.s=this.s,this.o=this.o}var ka=0;v$2.prototype.s=!1;v$2.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),ka!=0)&&ca(this)};v$2.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ma=Array.prototype.indexOf?function(_e,et){return Array.prototype.indexOf.call(_e,et,void 0)}:function(_e,et){if(typeof _e=="string")return typeof et!="string"||et.length!=1?-1:_e.indexOf(et,0);for(let rt=0;rt<_e.length;rt++)if(rt in _e&&_e[rt]===et)return rt;return-1};function na(_e){const et=_e.length;if(0<et){const rt=Array(et);for(let nt=0;nt<et;nt++)rt[nt]=_e[nt];return rt}return[]}function oa(_e,et){for(let rt=1;rt<arguments.length;rt++){const nt=arguments[rt];if(ba(nt)){const ot=_e.length||0,it=nt.length||0;_e.length=ot+it;for(let st=0;st<it;st++)_e[ot+st]=nt[st]}else _e.push(nt)}}function w$2(_e,et){this.type=_e,this.g=this.target=et,this.defaultPrevented=!1}w$2.prototype.h=function(){this.defaultPrevented=!0};var pa=function(){if(!l$2.addEventListener||!Object.defineProperty)return!1;var _e=!1,et=Object.defineProperty({},"passive",{get:function(){_e=!0}});try{l$2.addEventListener("test",aa,et),l$2.removeEventListener("test",aa,et)}catch{}return _e}();function qa(_e){return/^[\s\xa0]*$/.test(_e)}var ra=String.prototype.trim?function(_e){return _e.trim()}:function(_e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(_e)[1]};function sa(_e,et){return _e<et?-1:_e>et?1:0}function ta(){var _e=l$2.navigator;return _e&&(_e=_e.userAgent)?_e:""}function x$1(_e){return ta().indexOf(_e)!=-1}function ua(_e){return ua[" "](_e),_e}ua[" "]=aa;function va(_e,et,rt){return Object.prototype.hasOwnProperty.call(_e,et)?_e[et]:_e[et]=rt(et)}var wa=x$1("Opera"),y$1=x$1("Trident")||x$1("MSIE"),xa$1=x$1("Edge"),ya=xa$1||y$1,za=x$1("Gecko")&&!(ta().toLowerCase().indexOf("webkit")!=-1&&!x$1("Edge"))&&!(x$1("Trident")||x$1("MSIE"))&&!x$1("Edge"),Aa=ta().toLowerCase().indexOf("webkit")!=-1&&!x$1("Edge");function Ba(){var _e=l$2.document;return _e?_e.documentMode:void 0}var Ca;e:{var Da="",Ea=function(){var _e=ta();if(za)return/rv:([^\);]+)(\)|;)/.exec(_e);if(xa$1)return/Edge\/([\d\.]+)/.exec(_e);if(y$1)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(_e);if(Aa)return/WebKit\/(\S+)/.exec(_e);if(wa)return/(?:Version)[ \/]?(\S+)/.exec(_e)}();if(Ea&&(Da=Ea?Ea[1]:""),y$1){var Fa=Ba();if(Fa!=null&&Fa>parseFloat(Da)){Ca=String(Fa);break e}}Ca=Da}var Ga={};function Ha(){return va(Ga,9,function(){let _e=0;const et=ra(String(Ca)).split("."),rt=ra("9").split("."),nt=Math.max(et.length,rt.length);for(let st=0;_e==0&&st<nt;st++){var ot=et[st]||"",it=rt[st]||"";do{if(ot=/(\d*)(\D*)(.*)/.exec(ot)||["","","",""],it=/(\d*)(\D*)(.*)/.exec(it)||["","","",""],ot[0].length==0&&it[0].length==0)break;_e=sa(ot[1].length==0?0:parseInt(ot[1],10),it[1].length==0?0:parseInt(it[1],10))||sa(ot[2].length==0,it[2].length==0)||sa(ot[2],it[2]),ot=ot[3],it=it[3]}while(_e==0)}return 0<=_e})}l$2.document&&y$1&&Ba();function z$2(_e,et){if(w$2.call(this,_e?_e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_e){var rt=this.type=_e.type,nt=_e.changedTouches&&_e.changedTouches.length?_e.changedTouches[0]:null;if(this.target=_e.target||_e.srcElement,this.g=et,et=_e.relatedTarget){if(za){e:{try{ua(et.nodeName);var ot=!0;break e}catch{}ot=!1}ot||(et=null)}}else rt=="mouseover"?et=_e.fromElement:rt=="mouseout"&&(et=_e.toElement);this.relatedTarget=et,nt?(this.clientX=nt.clientX!==void 0?nt.clientX:nt.pageX,this.clientY=nt.clientY!==void 0?nt.clientY:nt.pageY,this.screenX=nt.screenX||0,this.screenY=nt.screenY||0):(this.clientX=_e.clientX!==void 0?_e.clientX:_e.pageX,this.clientY=_e.clientY!==void 0?_e.clientY:_e.pageY,this.screenX=_e.screenX||0,this.screenY=_e.screenY||0),this.button=_e.button,this.key=_e.key||"",this.ctrlKey=_e.ctrlKey,this.altKey=_e.altKey,this.shiftKey=_e.shiftKey,this.metaKey=_e.metaKey,this.pointerId=_e.pointerId||0,this.pointerType=typeof _e.pointerType=="string"?_e.pointerType:Na[_e.pointerType]||"",this.state=_e.state,this.i=_e,_e.defaultPrevented&&z$2.$.h.call(this)}}r$3(z$2,w$2);var Na={2:"touch",3:"pen",4:"mouse"};z$2.prototype.h=function(){z$2.$.h.call(this);var _e=this.i;_e.preventDefault?_e.preventDefault():_e.returnValue=!1};var A$1="closure_listenable_"+(1e6*Math.random()|0),Oa=0;function Pa(_e,et,rt,nt,ot){this.listener=_e,this.proxy=null,this.src=et,this.type=rt,this.capture=!!nt,this.la=ot,this.key=++Oa,this.fa=this.ia=!1}function Qa(_e){_e.fa=!0,_e.listener=null,_e.proxy=null,_e.src=null,_e.la=null}function Ra(_e,et,rt){for(const nt in _e)et.call(rt,_e[nt],nt,_e)}function Sa(_e){const et={};for(const rt in _e)et[rt]=_e[rt];return et}const Ta="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ua(_e,et){let rt,nt;for(let ot=1;ot<arguments.length;ot++){nt=arguments[ot];for(rt in nt)_e[rt]=nt[rt];for(let it=0;it<Ta.length;it++)rt=Ta[it],Object.prototype.hasOwnProperty.call(nt,rt)&&(_e[rt]=nt[rt])}}function Va(_e){this.src=_e,this.g={},this.h=0}Va.prototype.add=function(_e,et,rt,nt,ot){var it=_e.toString();_e=this.g[it],_e||(_e=this.g[it]=[],this.h++);var st=Wa(_e,et,nt,ot);return-1<st?(et=_e[st],rt||(et.ia=!1)):(et=new Pa(et,this.src,it,!!nt,ot),et.ia=rt,_e.push(et)),et};function Xa(_e,et){var rt=et.type;if(rt in _e.g){var nt=_e.g[rt],ot=ma(nt,et),it;(it=0<=ot)&&Array.prototype.splice.call(nt,ot,1),it&&(Qa(et),_e.g[rt].length==0&&(delete _e.g[rt],_e.h--))}}function Wa(_e,et,rt,nt){for(var ot=0;ot<_e.length;++ot){var it=_e[ot];if(!it.fa&&it.listener==et&&it.capture==!!rt&&it.la==nt)return ot}return-1}var Ya="closure_lm_"+(1e6*Math.random()|0),Za={};function ab(_e,et,rt,nt,ot){if(nt&&nt.once)return bb(_e,et,rt,nt,ot);if(Array.isArray(et)){for(var it=0;it<et.length;it++)ab(_e,et[it],rt,nt,ot);return null}return rt=cb(rt),_e&&_e[A$1]?_e.O(et,rt,p$3(nt)?!!nt.capture:!!nt,ot):db(_e,et,rt,!1,nt,ot)}function db(_e,et,rt,nt,ot,it){if(!et)throw Error("Invalid event type");var st=p$3(ot)?!!ot.capture:!!ot,at=eb(_e);if(at||(_e[Ya]=at=new Va(_e)),rt=at.add(et,rt,nt,st,it),rt.proxy)return rt;if(nt=fb(),rt.proxy=nt,nt.src=_e,nt.listener=rt,_e.addEventListener)pa||(ot=st),ot===void 0&&(ot=!1),_e.addEventListener(et.toString(),nt,ot);else if(_e.attachEvent)_e.attachEvent(gb(et.toString()),nt);else if(_e.addListener&&_e.removeListener)_e.addListener(nt);else throw Error("addEventListener and attachEvent are unavailable.");return rt}function fb(){function _e(rt){return et.call(_e.src,_e.listener,rt)}const et=hb;return _e}function bb(_e,et,rt,nt,ot){if(Array.isArray(et)){for(var it=0;it<et.length;it++)bb(_e,et[it],rt,nt,ot);return null}return rt=cb(rt),_e&&_e[A$1]?_e.P(et,rt,p$3(nt)?!!nt.capture:!!nt,ot):db(_e,et,rt,!0,nt,ot)}function ib(_e,et,rt,nt,ot){if(Array.isArray(et))for(var it=0;it<et.length;it++)ib(_e,et[it],rt,nt,ot);else nt=p$3(nt)?!!nt.capture:!!nt,rt=cb(rt),_e&&_e[A$1]?(_e=_e.i,et=String(et).toString(),et in _e.g&&(it=_e.g[et],rt=Wa(it,rt,nt,ot),-1<rt&&(Qa(it[rt]),Array.prototype.splice.call(it,rt,1),it.length==0&&(delete _e.g[et],_e.h--)))):_e&&(_e=eb(_e))&&(et=_e.g[et.toString()],_e=-1,et&&(_e=Wa(et,rt,nt,ot)),(rt=-1<_e?et[_e]:null)&&jb(rt))}function jb(_e){if(typeof _e!="number"&&_e&&!_e.fa){var et=_e.src;if(et&&et[A$1])Xa(et.i,_e);else{var rt=_e.type,nt=_e.proxy;et.removeEventListener?et.removeEventListener(rt,nt,_e.capture):et.detachEvent?et.detachEvent(gb(rt),nt):et.addListener&&et.removeListener&&et.removeListener(nt),(rt=eb(et))?(Xa(rt,_e),rt.h==0&&(rt.src=null,et[Ya]=null)):Qa(_e)}}}function gb(_e){return _e in Za?Za[_e]:Za[_e]="on"+_e}function hb(_e,et){if(_e.fa)_e=!0;else{et=new z$2(et,this);var rt=_e.listener,nt=_e.la||_e.src;_e.ia&&jb(_e),_e=rt.call(nt,et)}return _e}function eb(_e){return _e=_e[Ya],_e instanceof Va?_e:null}var kb="__closure_events_fn_"+(1e9*Math.random()>>>0);function cb(_e){return typeof _e=="function"?_e:(_e[kb]||(_e[kb]=function(et){return _e.handleEvent(et)}),_e[kb])}function B$1(){v$2.call(this),this.i=new Va(this),this.S=this,this.J=null}r$3(B$1,v$2);B$1.prototype[A$1]=!0;B$1.prototype.removeEventListener=function(_e,et,rt,nt){ib(this,_e,et,rt,nt)};function C(_e,et){var rt,nt=_e.J;if(nt)for(rt=[];nt;nt=nt.J)rt.push(nt);if(_e=_e.S,nt=et.type||et,typeof et=="string")et=new w$2(et,_e);else if(et instanceof w$2)et.target=et.target||_e;else{var ot=et;et=new w$2(nt,_e),Ua(et,ot)}if(ot=!0,rt)for(var it=rt.length-1;0<=it;it--){var st=et.g=rt[it];ot=lb(st,nt,!0,et)&&ot}if(st=et.g=_e,ot=lb(st,nt,!0,et)&&ot,ot=lb(st,nt,!1,et)&&ot,rt)for(it=0;it<rt.length;it++)st=et.g=rt[it],ot=lb(st,nt,!1,et)&&ot}B$1.prototype.N=function(){if(B$1.$.N.call(this),this.i){var _e=this.i,et;for(et in _e.g){for(var rt=_e.g[et],nt=0;nt<rt.length;nt++)Qa(rt[nt]);delete _e.g[et],_e.h--}}this.J=null};B$1.prototype.O=function(_e,et,rt,nt){return this.i.add(String(_e),et,!1,rt,nt)};B$1.prototype.P=function(_e,et,rt,nt){return this.i.add(String(_e),et,!0,rt,nt)};function lb(_e,et,rt,nt){if(et=_e.i.g[String(et)],!et)return!0;et=et.concat();for(var ot=!0,it=0;it<et.length;++it){var st=et[it];if(st&&!st.fa&&st.capture==rt){var at=st.listener,lt=st.la||st.src;st.ia&&Xa(_e.i,st),ot=at.call(lt,nt)!==!1&&ot}}return ot&&!nt.defaultPrevented}var mb=l$2.JSON.stringify;function nb(){var _e=ob;let et=null;return _e.g&&(et=_e.g,_e.g=_e.g.next,_e.g||(_e.h=null),et.next=null),et}class pb{constructor(){this.h=this.g=null}add(et,rt){const nt=qb.get();nt.set(et,rt),this.h?this.h.next=nt:this.g=nt,this.h=nt}}var qb=new class{constructor(_e,et){this.i=_e,this.j=et,this.h=0,this.g=null}get(){let _e;return 0<this.h?(this.h--,_e=this.g,this.g=_e.next,_e.next=null):_e=this.i(),_e}}(()=>new rb,_e=>_e.reset());class rb{constructor(){this.next=this.g=this.h=null}set(et,rt){this.h=et,this.g=rt,this.next=null}reset(){this.next=this.g=this.h=null}}function sb(_e){l$2.setTimeout(()=>{throw _e},0)}function tb(_e,et){ub||vb(),wb||(ub(),wb=!0),ob.add(_e,et)}var ub;function vb(){var _e=l$2.Promise.resolve(void 0);ub=function(){_e.then(xb)}}var wb=!1,ob=new pb;function xb(){for(var _e;_e=nb();){try{_e.h.call(_e.g)}catch(rt){sb(rt)}var et=qb;et.j(_e),100>et.h&&(et.h++,_e.next=et.g,et.g=_e)}wb=!1}function yb(_e,et){B$1.call(this),this.h=_e||1,this.g=et||l$2,this.j=q$4(this.qb,this),this.l=Date.now()}r$3(yb,B$1);k$3=yb.prototype;k$3.ga=!1;k$3.T=null;k$3.qb=function(){if(this.ga){var _e=Date.now()-this.l;0<_e&&_e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-_e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C(this,"tick"),this.ga&&(zb(this),this.start()))}};k$3.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zb(_e){_e.ga=!1,_e.T&&(_e.g.clearTimeout(_e.T),_e.T=null)}k$3.N=function(){yb.$.N.call(this),zb(this),delete this.g};function Ab(_e,et,rt){if(typeof _e=="function")rt&&(_e=q$4(_e,rt));else if(_e&&typeof _e.handleEvent=="function")_e=q$4(_e.handleEvent,_e);else throw Error("Invalid listener argument");return 2147483647<Number(et)?-1:l$2.setTimeout(_e,et||0)}function Bb(_e){_e.g=Ab(()=>{_e.g=null,_e.i&&(_e.i=!1,Bb(_e))},_e.j);const et=_e.h;_e.h=null,_e.m.apply(null,et)}class Cb extends v$2{constructor(et,rt){super(),this.m=et,this.j=rt,this.h=null,this.i=!1,this.g=null}l(et){this.h=arguments,this.g?this.i=!0:Bb(this)}N(){super.N(),this.g&&(l$2.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Db(_e){v$2.call(this),this.h=_e,this.g={}}r$3(Db,v$2);var Eb=[];function Gb(_e,et,rt,nt){Array.isArray(rt)||(rt&&(Eb[0]=rt.toString()),rt=Eb);for(var ot=0;ot<rt.length;ot++){var it=ab(et,rt[ot],nt||_e.handleEvent,!1,_e.h||_e);if(!it)break;_e.g[it.key]=it}}function Hb(_e){Ra(_e.g,function(et,rt){this.g.hasOwnProperty(rt)&&jb(et)},_e),_e.g={}}Db.prototype.N=function(){Db.$.N.call(this),Hb(this)};Db.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ib(){this.g=!0}Ib.prototype.Ea=function(){this.g=!1};function Jb(_e,et,rt,nt,ot,it){_e.info(function(){if(_e.g)if(it)for(var st="",at=it.split("&"),lt=0;lt<at.length;lt++){var ct=at[lt].split("=");if(1<ct.length){var pt=ct[0];ct=ct[1];var ut=pt.split("_");st=2<=ut.length&&ut[1]=="type"?st+(pt+"="+ct+"&"):st+(pt+"=redacted&")}}else st=null;else st=it;return"XMLHTTP REQ ("+nt+") [attempt "+ot+"]: "+et+`
`+rt+`
`+st})}function Kb(_e,et,rt,nt,ot,it,st){_e.info(function(){return"XMLHTTP RESP ("+nt+") [ attempt "+ot+"]: "+et+`
`+rt+`
`+it+" "+st})}function D$2(_e,et,rt,nt){_e.info(function(){return"XMLHTTP TEXT ("+et+"): "+Lb(_e,rt)+(nt?" "+nt:"")})}function Mb(_e,et){_e.info(function(){return"TIMEOUT: "+et})}Ib.prototype.info=function(){};function Lb(_e,et){if(!_e.g)return et;if(!et)return null;try{var rt=JSON.parse(et);if(rt){for(_e=0;_e<rt.length;_e++)if(Array.isArray(rt[_e])){var nt=rt[_e];if(!(2>nt.length)){var ot=nt[1];if(Array.isArray(ot)&&!(1>ot.length)){var it=ot[0];if(it!="noop"&&it!="stop"&&it!="close")for(var st=1;st<ot.length;st++)ot[st]=""}}}}return mb(rt)}catch{return et}}var E$1={},Nb=null;function Ob(){return Nb=Nb||new B$1}E$1.Ta="serverreachability";function Pb(_e){w$2.call(this,E$1.Ta,_e)}r$3(Pb,w$2);function Qb(_e){const et=Ob();C(et,new Pb(et))}E$1.STAT_EVENT="statevent";function Rb(_e,et){w$2.call(this,E$1.STAT_EVENT,_e),this.stat=et}r$3(Rb,w$2);function F$2(_e){const et=Ob();C(et,new Rb(et,_e))}E$1.Ua="timingevent";function Sb(_e,et){w$2.call(this,E$1.Ua,_e),this.size=et}r$3(Sb,w$2);function Tb(_e,et){if(typeof _e!="function")throw Error("Fn must not be null and must be a function");return l$2.setTimeout(function(){_e()},et)}var Ub={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Vb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wb(){}Wb.prototype.h=null;function Xb(_e){return _e.h||(_e.h=_e.i())}function Yb(){}var Zb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $b(){w$2.call(this,"d")}r$3($b,w$2);function ac(){w$2.call(this,"c")}r$3(ac,w$2);var bc;function cc(){}r$3(cc,Wb);cc.prototype.g=function(){return new XMLHttpRequest};cc.prototype.i=function(){return{}};bc=new cc;function dc(_e,et,rt,nt){this.l=_e,this.j=et,this.m=rt,this.W=nt||1,this.U=new Db(this),this.P=ec,_e=ya?125:void 0,this.V=new yb(_e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new fc}function fc(){this.i=null,this.g="",this.h=!1}var ec=45e3,gc={},hc={};k$3=dc.prototype;k$3.setTimeout=function(_e){this.P=_e};function ic(_e,et,rt){_e.L=1,_e.v=jc(G$2(et)),_e.s=rt,_e.S=!0,kc(_e,null)}function kc(_e,et){_e.G=Date.now(),lc(_e),_e.A=G$2(_e.v);var rt=_e.A,nt=_e.W;Array.isArray(nt)||(nt=[String(nt)]),mc(rt.i,"t",nt),_e.C=0,rt=_e.l.I,_e.h=new fc,_e.g=nc(_e.l,rt?et:null,!_e.s),0<_e.O&&(_e.M=new Cb(q$4(_e.Pa,_e,_e.g),_e.O)),Gb(_e.U,_e.g,"readystatechange",_e.nb),et=_e.I?Sa(_e.I):{},_e.s?(_e.u||(_e.u="POST"),et["Content-Type"]="application/x-www-form-urlencoded",_e.g.ha(_e.A,_e.u,_e.s,et)):(_e.u="GET",_e.g.ha(_e.A,_e.u,null,et)),Qb(),Jb(_e.j,_e.u,_e.A,_e.m,_e.W,_e.s)}k$3.nb=function(_e){_e=_e.target;const et=this.M;et&&H$2(_e)==3?et.l():this.Pa(_e)};k$3.Pa=function(_e){try{if(_e==this.g)e:{const pt=H$2(this.g);var et=this.g.Ia();const ut=this.g.da();if(!(3>pt)&&(pt!=3||ya||this.g&&(this.h.h||this.g.ja()||oc(this.g)))){this.J||pt!=4||et==7||(et==8||0>=ut?Qb(3):Qb(2)),pc(this);var rt=this.g.da();this.aa=rt;t:if(qc(this)){var nt=oc(this.g);_e="";var ot=nt.length,it=H$2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I$1(this),rc(this);var st="";break t}this.h.i=new l$2.TextDecoder}for(et=0;et<ot;et++)this.h.h=!0,_e+=this.h.i.decode(nt[et],{stream:it&&et==ot-1});nt.splice(0,ot),this.h.g+=_e,this.C=0,st=this.h.g}else st=this.g.ja();if(this.i=rt==200,Kb(this.j,this.u,this.A,this.m,this.W,pt,rt),this.i){if(this.ba&&!this.K){t:{if(this.g){var at,lt=this.g;if((at=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qa(at)){var ct=at;break t}}ct=null}if(rt=ct)D$2(this.j,this.m,rt,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sc(this,rt);else{this.i=!1,this.o=3,F$2(12),I$1(this),rc(this);break e}}this.S?(tc(this,pt,st),ya&&this.i&&pt==3&&(Gb(this.U,this.V,"tick",this.mb),this.V.start())):(D$2(this.j,this.m,st,null),sc(this,st)),pt==4&&I$1(this),this.i&&!this.J&&(pt==4?uc(this.l,this):(this.i=!1,lc(this)))}else rt==400&&0<st.indexOf("Unknown SID")?(this.o=3,F$2(12)):(this.o=0,F$2(13)),I$1(this),rc(this)}}}catch{}finally{}};function qc(_e){return _e.g?_e.u=="GET"&&_e.L!=2&&_e.l.Ha:!1}function tc(_e,et,rt){let nt=!0,ot;for(;!_e.J&&_e.C<rt.length;)if(ot=vc(_e,rt),ot==hc){et==4&&(_e.o=4,F$2(14),nt=!1),D$2(_e.j,_e.m,null,"[Incomplete Response]");break}else if(ot==gc){_e.o=4,F$2(15),D$2(_e.j,_e.m,rt,"[Invalid Chunk]"),nt=!1;break}else D$2(_e.j,_e.m,ot,null),sc(_e,ot);qc(_e)&&ot!=hc&&ot!=gc&&(_e.h.g="",_e.C=0),et!=4||rt.length!=0||_e.h.h||(_e.o=1,F$2(16),nt=!1),_e.i=_e.i&&nt,nt?0<rt.length&&!_e.ca&&(_e.ca=!0,et=_e.l,et.g==_e&&et.ca&&!et.L&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),wc(et),et.L=!0,F$2(11))):(D$2(_e.j,_e.m,rt,"[Invalid Chunked Response]"),I$1(_e),rc(_e))}k$3.mb=function(){if(this.g){var _e=H$2(this.g),et=this.g.ja();this.C<et.length&&(pc(this),tc(this,_e,et),this.i&&_e!=4&&lc(this))}};function vc(_e,et){var rt=_e.C,nt=et.indexOf(`
`,rt);return nt==-1?hc:(rt=Number(et.substring(rt,nt)),isNaN(rt)?gc:(nt+=1,nt+rt>et.length?hc:(et=et.substr(nt,rt),_e.C=nt+rt,et)))}k$3.cancel=function(){this.J=!0,I$1(this)};function lc(_e){_e.Y=Date.now()+_e.P,xc(_e,_e.P)}function xc(_e,et){if(_e.B!=null)throw Error("WatchDog timer not null");_e.B=Tb(q$4(_e.lb,_e),et)}function pc(_e){_e.B&&(l$2.clearTimeout(_e.B),_e.B=null)}k$3.lb=function(){this.B=null;const _e=Date.now();0<=_e-this.Y?(Mb(this.j,this.A),this.L!=2&&(Qb(),F$2(17)),I$1(this),this.o=2,rc(this)):xc(this,this.Y-_e)};function rc(_e){_e.l.H==0||_e.J||uc(_e.l,_e)}function I$1(_e){pc(_e);var et=_e.M;et&&typeof et.ra=="function"&&et.ra(),_e.M=null,zb(_e.V),Hb(_e.U),_e.g&&(et=_e.g,_e.g=null,et.abort(),et.ra())}function sc(_e,et){try{var rt=_e.l;if(rt.H!=0&&(rt.g==_e||yc(rt.h,_e))){if(!_e.K&&yc(rt.h,_e)&&rt.H==3){try{var nt=rt.Ja.g.parse(et)}catch{nt=null}if(Array.isArray(nt)&&nt.length==3){var ot=nt;if(ot[0]==0){e:if(!rt.u){if(rt.g)if(rt.g.G+3e3<_e.G)zc(rt),Ac(rt);else break e;Bc(rt),F$2(18)}}else rt.Fa=ot[1],0<rt.Fa-rt.V&&37500>ot[2]&&rt.M&&rt.A==0&&!rt.v&&(rt.v=Tb(q$4(rt.ib,rt),6e3));if(1>=Cc(rt.h)&&rt.na){try{rt.na()}catch{}rt.na=void 0}}else J$1(rt,11)}else if((_e.K||rt.g==_e)&&zc(rt),!qa(et))for(ot=rt.Ja.g.parse(et),et=0;et<ot.length;et++){let ct=ot[et];if(rt.V=ct[0],ct=ct[1],rt.H==2)if(ct[0]=="c"){rt.J=ct[1],rt.oa=ct[2];const pt=ct[3];pt!=null&&(rt.qa=pt,rt.j.info("VER="+rt.qa));const ut=ct[4];ut!=null&&(rt.Ga=ut,rt.j.info("SVER="+rt.Ga));const ht=ct[5];ht!=null&&typeof ht=="number"&&0<ht&&(nt=1.5*ht,rt.K=nt,rt.j.info("backChannelRequestTimeoutMs_="+nt)),nt=rt;const ft=_e.g;if(ft){const gt=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gt){var it=nt.h;it.g||gt.indexOf("spdy")==-1&&gt.indexOf("quic")==-1&&gt.indexOf("h2")==-1||(it.j=it.l,it.g=new Set,it.h&&(Dc(it,it.h),it.h=null))}if(nt.F){const vt=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;vt&&(nt.Da=vt,K$1(nt.G,nt.F,vt))}}rt.H=3,rt.l&&rt.l.Ba(),rt.ca&&(rt.S=Date.now()-_e.G,rt.j.info("Handshake RTT: "+rt.S+"ms")),nt=rt;var st=_e;if(nt.wa=Ec$1(nt,nt.I?nt.oa:null,nt.Y),st.K){Fc(nt.h,st);var at=st,lt=nt.K;lt&&at.setTimeout(lt),at.B&&(pc(at),lc(at)),nt.g=st}else Gc(nt);0<rt.i.length&&Hc(rt)}else ct[0]!="stop"&&ct[0]!="close"||J$1(rt,7);else rt.H==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?J$1(rt,7):Ic(rt):ct[0]!="noop"&&rt.l&&rt.l.Aa(ct),rt.A=0)}}Qb(4)}catch{}}function Jc(_e){if(_e.Z&&typeof _e.Z=="function")return _e.Z();if(typeof Map<"u"&&_e instanceof Map||typeof Set<"u"&&_e instanceof Set)return Array.from(_e.values());if(typeof _e=="string")return _e.split("");if(ba(_e)){for(var et=[],rt=_e.length,nt=0;nt<rt;nt++)et.push(_e[nt]);return et}et=[],rt=0;for(nt in _e)et[rt++]=_e[nt];return et}function Kc(_e){if(_e.sa&&typeof _e.sa=="function")return _e.sa();if(!_e.Z||typeof _e.Z!="function"){if(typeof Map<"u"&&_e instanceof Map)return Array.from(_e.keys());if(!(typeof Set<"u"&&_e instanceof Set)){if(ba(_e)||typeof _e=="string"){var et=[];_e=_e.length;for(var rt=0;rt<_e;rt++)et.push(rt);return et}et=[],rt=0;for(const nt in _e)et[rt++]=nt;return et}}}function Lc(_e,et){if(_e.forEach&&typeof _e.forEach=="function")_e.forEach(et,void 0);else if(ba(_e)||typeof _e=="string")Array.prototype.forEach.call(_e,et,void 0);else for(var rt=Kc(_e),nt=Jc(_e),ot=nt.length,it=0;it<ot;it++)et.call(void 0,nt[it],rt&&rt[it],_e)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nc(_e,et){if(_e){_e=_e.split("&");for(var rt=0;rt<_e.length;rt++){var nt=_e[rt].indexOf("="),ot=null;if(0<=nt){var it=_e[rt].substring(0,nt);ot=_e[rt].substring(nt+1)}else it=_e[rt];et(it,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function M$1(_e,et){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,_e instanceof M$1){this.h=et!==void 0?et:_e.h,Oc(this,_e.j),this.s=_e.s,this.g=_e.g,Pc(this,_e.m),this.l=_e.l,et=_e.i;var rt=new Qc;rt.i=et.i,et.g&&(rt.g=new Map(et.g),rt.h=et.h),Rc(this,rt),this.o=_e.o}else _e&&(rt=String(_e).match(Mc))?(this.h=!!et,Oc(this,rt[1]||"",!0),this.s=Sc(rt[2]||""),this.g=Sc(rt[3]||"",!0),Pc(this,rt[4]),this.l=Sc(rt[5]||"",!0),Rc(this,rt[6]||"",!0),this.o=Sc(rt[7]||"")):(this.h=!!et,this.i=new Qc(null,this.h))}M$1.prototype.toString=function(){var _e=[],et=this.j;et&&_e.push(Tc$1(et,Uc,!0),":");var rt=this.g;return(rt||et=="file")&&(_e.push("//"),(et=this.s)&&_e.push(Tc$1(et,Uc,!0),"@"),_e.push(encodeURIComponent(String(rt)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),rt=this.m,rt!=null&&_e.push(":",String(rt))),(rt=this.l)&&(this.g&&rt.charAt(0)!="/"&&_e.push("/"),_e.push(Tc$1(rt,rt.charAt(0)=="/"?Vc:Wc,!0))),(rt=this.i.toString())&&_e.push("?",rt),(rt=this.o)&&_e.push("#",Tc$1(rt,Xc)),_e.join("")};function G$2(_e){return new M$1(_e)}function Oc(_e,et,rt){_e.j=rt?Sc(et,!0):et,_e.j&&(_e.j=_e.j.replace(/:$/,""))}function Pc(_e,et){if(et){if(et=Number(et),isNaN(et)||0>et)throw Error("Bad port number "+et);_e.m=et}else _e.m=null}function Rc(_e,et,rt){et instanceof Qc?(_e.i=et,Yc(_e.i,_e.h)):(rt||(et=Tc$1(et,Zc)),_e.i=new Qc(et,_e.h))}function K$1(_e,et,rt){_e.i.set(et,rt)}function jc(_e){return K$1(_e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_e}function Sc(_e,et){return _e?et?decodeURI(_e.replace(/%25/g,"%2525")):decodeURIComponent(_e):""}function Tc$1(_e,et,rt){return typeof _e=="string"?(_e=encodeURI(_e).replace(et,$c),rt&&(_e=_e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_e):null}function $c(_e){return _e=_e.charCodeAt(0),"%"+(_e>>4&15).toString(16)+(_e&15).toString(16)}var Uc=/[#\/\?@]/g,Wc=/[#\?:]/g,Vc=/[#\?]/g,Zc=/[#\?@]/g,Xc=/#/g;function Qc(_e,et){this.h=this.g=null,this.i=_e||null,this.j=!!et}function N$2(_e){_e.g||(_e.g=new Map,_e.h=0,_e.i&&Nc(_e.i,function(et,rt){_e.add(decodeURIComponent(et.replace(/\+/g," ")),rt)}))}k$3=Qc.prototype;k$3.add=function(_e,et){N$2(this),this.i=null,_e=O$2(this,_e);var rt=this.g.get(_e);return rt||this.g.set(_e,rt=[]),rt.push(et),this.h+=1,this};function ad(_e,et){N$2(_e),et=O$2(_e,et),_e.g.has(et)&&(_e.i=null,_e.h-=_e.g.get(et).length,_e.g.delete(et))}function bd(_e,et){return N$2(_e),et=O$2(_e,et),_e.g.has(et)}k$3.forEach=function(_e,et){N$2(this),this.g.forEach(function(rt,nt){rt.forEach(function(ot){_e.call(et,ot,nt,this)},this)},this)};k$3.sa=function(){N$2(this);const _e=Array.from(this.g.values()),et=Array.from(this.g.keys()),rt=[];for(let nt=0;nt<et.length;nt++){const ot=_e[nt];for(let it=0;it<ot.length;it++)rt.push(et[nt])}return rt};k$3.Z=function(_e){N$2(this);let et=[];if(typeof _e=="string")bd(this,_e)&&(et=et.concat(this.g.get(O$2(this,_e))));else{_e=Array.from(this.g.values());for(let rt=0;rt<_e.length;rt++)et=et.concat(_e[rt])}return et};k$3.set=function(_e,et){return N$2(this),this.i=null,_e=O$2(this,_e),bd(this,_e)&&(this.h-=this.g.get(_e).length),this.g.set(_e,[et]),this.h+=1,this};k$3.get=function(_e,et){return _e?(_e=this.Z(_e),0<_e.length?String(_e[0]):et):et};function mc(_e,et,rt){ad(_e,et),0<rt.length&&(_e.i=null,_e.g.set(O$2(_e,et),na(rt)),_e.h+=rt.length)}k$3.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _e=[],et=Array.from(this.g.keys());for(var rt=0;rt<et.length;rt++){var nt=et[rt];const it=encodeURIComponent(String(nt)),st=this.Z(nt);for(nt=0;nt<st.length;nt++){var ot=it;st[nt]!==""&&(ot+="="+encodeURIComponent(String(st[nt]))),_e.push(ot)}}return this.i=_e.join("&")};function O$2(_e,et){return et=String(et),_e.j&&(et=et.toLowerCase()),et}function Yc(_e,et){et&&!_e.j&&(N$2(_e),_e.i=null,_e.g.forEach(function(rt,nt){var ot=nt.toLowerCase();nt!=ot&&(ad(this,nt),mc(this,ot,rt))},_e)),_e.j=et}var cd=class{constructor(_e,et){this.h=_e,this.g=et}};function dd(_e){this.l=_e||ed,l$2.PerformanceNavigationTiming?(_e=l$2.performance.getEntriesByType("navigation"),_e=0<_e.length&&(_e[0].nextHopProtocol=="hq"||_e[0].nextHopProtocol=="h2")):_e=!!(l$2.g&&l$2.g.Ka&&l$2.g.Ka()&&l$2.g.Ka().ec),this.j=_e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ed=10;function fd(_e){return _e.h?!0:_e.g?_e.g.size>=_e.j:!1}function Cc(_e){return _e.h?1:_e.g?_e.g.size:0}function yc(_e,et){return _e.h?_e.h==et:_e.g?_e.g.has(et):!1}function Dc(_e,et){_e.g?_e.g.add(et):_e.h=et}function Fc(_e,et){_e.h&&_e.h==et?_e.h=null:_e.g&&_e.g.has(et)&&_e.g.delete(et)}dd.prototype.cancel=function(){if(this.i=gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _e of this.g.values())_e.cancel();this.g.clear()}};function gd(_e){if(_e.h!=null)return _e.i.concat(_e.h.F);if(_e.g!=null&&_e.g.size!==0){let et=_e.i;for(const rt of _e.g.values())et=et.concat(rt.F);return et}return na(_e.i)}function hd(){}hd.prototype.stringify=function(_e){return l$2.JSON.stringify(_e,void 0)};hd.prototype.parse=function(_e){return l$2.JSON.parse(_e,void 0)};function id(){this.g=new hd}function jd(_e,et,rt){const nt=rt||"";try{Lc(_e,function(ot,it){let st=ot;p$3(ot)&&(st=mb(ot)),et.push(nt+it+"="+encodeURIComponent(st))})}catch(ot){throw et.push(nt+"type="+encodeURIComponent("_badmap")),ot}}function kd(_e,et){const rt=new Ib;if(l$2.Image){const nt=new Image;nt.onload=ja(ld,rt,nt,"TestLoadImage: loaded",!0,et),nt.onerror=ja(ld,rt,nt,"TestLoadImage: error",!1,et),nt.onabort=ja(ld,rt,nt,"TestLoadImage: abort",!1,et),nt.ontimeout=ja(ld,rt,nt,"TestLoadImage: timeout",!1,et),l$2.setTimeout(function(){nt.ontimeout&&nt.ontimeout()},1e4),nt.src=_e}else et(!1)}function ld(_e,et,rt,nt,ot){try{et.onload=null,et.onerror=null,et.onabort=null,et.ontimeout=null,ot(nt)}catch{}}function md(_e){this.l=_e.fc||null,this.j=_e.ob||!1}r$3(md,Wb);md.prototype.g=function(){return new nd(this.l,this.j)};md.prototype.i=function(_e){return function(){return _e}}({});function nd(_e,et){B$1.call(this),this.F=_e,this.u=et,this.m=void 0,this.readyState=od,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r$3(nd,B$1);var od=0;k$3=nd.prototype;k$3.open=function(_e,et){if(this.readyState!=od)throw this.abort(),Error("Error reopening a connection");this.C=_e,this.B=et,this.readyState=1,pd(this)};k$3.send=function(_e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const et={headers:this.v,method:this.C,credentials:this.m,cache:void 0};_e&&(et.body=_e),(this.F||l$2).fetch(new Request(this.B,et)).then(this.$a.bind(this),this.ka.bind(this))};k$3.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qd(this)),this.readyState=od};k$3.$a=function(_e){if(this.g&&(this.l=_e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_e.headers,this.readyState=2,pd(this)),this.g&&(this.readyState=3,pd(this),this.g)))if(this.responseType==="arraybuffer")_e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof l$2.ReadableStream<"u"&&"body"in _e){if(this.j=_e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rd(this)}else _e.text().then(this.Za.bind(this),this.ka.bind(this))};function rd(_e){_e.j.read().then(_e.Xa.bind(_e)).catch(_e.ka.bind(_e))}k$3.Xa=function(_e){if(this.g){if(this.u&&_e.value)this.response.push(_e.value);else if(!this.u){var et=_e.value?_e.value:new Uint8Array(0);(et=this.A.decode(et,{stream:!_e.done}))&&(this.response=this.responseText+=et)}_e.done?qd(this):pd(this),this.readyState==3&&rd(this)}};k$3.Za=function(_e){this.g&&(this.response=this.responseText=_e,qd(this))};k$3.Ya=function(_e){this.g&&(this.response=_e,qd(this))};k$3.ka=function(){this.g&&qd(this)};function qd(_e){_e.readyState=4,_e.l=null,_e.j=null,_e.A=null,pd(_e)}k$3.setRequestHeader=function(_e,et){this.v.append(_e,et)};k$3.getResponseHeader=function(_e){return this.h&&this.h.get(_e.toLowerCase())||""};k$3.getAllResponseHeaders=function(){if(!this.h)return"";const _e=[],et=this.h.entries();for(var rt=et.next();!rt.done;)rt=rt.value,_e.push(rt[0]+": "+rt[1]),rt=et.next();return _e.join(`\r
`)};function pd(_e){_e.onreadystatechange&&_e.onreadystatechange.call(_e)}Object.defineProperty(nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_e){this.m=_e?"include":"same-origin"}});var sd=l$2.JSON.parse;function P$1(_e){B$1.call(this),this.headers=new Map,this.u=_e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=td,this.L=this.M=!1}r$3(P$1,B$1);var td="",ud=/^https?$/i,vd=["POST","PUT"];k$3=P$1.prototype;k$3.Oa=function(_e){this.M=_e};k$3.ha=function(_e,et,rt,nt){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+_e);et=et?et.toUpperCase():"GET",this.I=_e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bc.g(),this.C=this.u?Xb(this.u):Xb(bc),this.g.onreadystatechange=q$4(this.La,this);try{this.G=!0,this.g.open(et,String(_e),!0),this.G=!1}catch(it){wd(this,it);return}if(_e=rt||"",rt=new Map(this.headers),nt)if(Object.getPrototypeOf(nt)===Object.prototype)for(var ot in nt)rt.set(ot,nt[ot]);else if(typeof nt.keys=="function"&&typeof nt.get=="function")for(const it of nt.keys())rt.set(it,nt.get(it));else throw Error("Unknown input type for opt_headers: "+String(nt));nt=Array.from(rt.keys()).find(it=>it.toLowerCase()=="content-type"),ot=l$2.FormData&&_e instanceof l$2.FormData,!(0<=ma(vd,et))||nt||ot||rt.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[it,st]of rt)this.g.setRequestHeader(it,st);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xd(this),0<this.B&&((this.L=yd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q$4(this.ua,this)):this.A=Ab(this.ua,this.B,this)),this.v=!0,this.g.send(_e),this.v=!1}catch(it){wd(this,it)}};function yd(_e){return y$1&&Ha()&&typeof _e.timeout=="number"&&_e.ontimeout!==void 0}k$3.ua=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C(this,"timeout"),this.abort(8))};function wd(_e,et){_e.h=!1,_e.g&&(_e.l=!0,_e.g.abort(),_e.l=!1),_e.j=et,_e.m=5,zd(_e),Ad(_e)}function zd(_e){_e.F||(_e.F=!0,C(_e,"complete"),C(_e,"error"))}k$3.abort=function(_e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=_e||7,C(this,"complete"),C(this,"abort"),Ad(this))};k$3.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ad(this,!0)),P$1.$.N.call(this)};k$3.La=function(){this.s||(this.G||this.v||this.l?Bd(this):this.kb())};k$3.kb=function(){Bd(this)};function Bd(_e){if(_e.h&&typeof goog<"u"&&(!_e.C[1]||H$2(_e)!=4||_e.da()!=2)){if(_e.v&&H$2(_e)==4)Ab(_e.La,0,_e);else if(C(_e,"readystatechange"),H$2(_e)==4){_e.h=!1;try{const at=_e.da();e:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var et=!0;break e;default:et=!1}var rt;if(!(rt=et)){var nt;if(nt=at===0){var ot=String(_e.I).match(Mc)[1]||null;if(!ot&&l$2.self&&l$2.self.location){var it=l$2.self.location.protocol;ot=it.substr(0,it.length-1)}nt=!ud.test(ot?ot.toLowerCase():"")}rt=nt}if(rt)C(_e,"complete"),C(_e,"success");else{_e.m=6;try{var st=2<H$2(_e)?_e.g.statusText:""}catch{st=""}_e.j=st+" ["+_e.da()+"]",zd(_e)}}finally{Ad(_e)}}}}function Ad(_e,et){if(_e.g){xd(_e);const rt=_e.g,nt=_e.C[0]?aa:null;_e.g=null,_e.C=null,et||C(_e,"ready");try{rt.onreadystatechange=nt}catch{}}}function xd(_e){_e.g&&_e.L&&(_e.g.ontimeout=null),_e.A&&(l$2.clearTimeout(_e.A),_e.A=null)}function H$2(_e){return _e.g?_e.g.readyState:0}k$3.da=function(){try{return 2<H$2(this)?this.g.status:-1}catch{return-1}};k$3.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k$3.Wa=function(_e){if(this.g){var et=this.g.responseText;return _e&&et.indexOf(_e)==0&&(et=et.substring(_e.length)),sd(et)}};function oc(_e){try{if(!_e.g)return null;if("response"in _e.g)return _e.g.response;switch(_e.K){case td:case"text":return _e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _e.g)return _e.g.mozResponseArrayBuffer}return null}catch{return null}}k$3.Ia=function(){return this.m};k$3.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Cd(_e){let et="";return Ra(_e,function(rt,nt){et+=nt,et+=":",et+=rt,et+=`\r
`}),et}function Dd(_e,et,rt){e:{for(nt in rt){var nt=!1;break e}nt=!0}nt||(rt=Cd(rt),typeof _e=="string"?rt!=null&&encodeURIComponent(String(rt)):K$1(_e,et,rt))}function Ed(_e,et,rt){return rt&&rt.internalChannelParams&&rt.internalChannelParams[_e]||et}function Fd(_e){this.Ga=0,this.i=[],this.j=new Ib,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ed("failFast",!1,_e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ed("baseRetryDelayMs",5e3,_e),this.hb=Ed("retryDelaySeedMs",1e4,_e),this.eb=Ed("forwardChannelMaxRetries",2,_e),this.xa=Ed("forwardChannelRequestTimeoutMs",2e4,_e),this.va=_e&&_e.xmlHttpFactory||void 0,this.Ha=_e&&_e.dc||!1,this.K=void 0,this.I=_e&&_e.supportsCrossDomainXhr||!1,this.J="",this.h=new dd(_e&&_e.concurrentRequestLimit),this.Ja=new id,this.P=_e&&_e.fastHandshake||!1,this.O=_e&&_e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=_e&&_e.bc||!1,_e&&_e.Ea&&this.j.Ea(),_e&&_e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&_e&&_e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}k$3=Fd.prototype;k$3.qa=8;k$3.H=1;function Ic(_e){if(Gd(_e),_e.H==3){var et=_e.W++,rt=G$2(_e.G);K$1(rt,"SID",_e.J),K$1(rt,"RID",et),K$1(rt,"TYPE","terminate"),Hd(_e,rt),et=new dc(_e,_e.j,et,void 0),et.L=2,et.v=jc(G$2(rt)),rt=!1,l$2.navigator&&l$2.navigator.sendBeacon&&(rt=l$2.navigator.sendBeacon(et.v.toString(),"")),!rt&&l$2.Image&&(new Image().src=et.v,rt=!0),rt||(et.g=nc(et.l,null),et.g.ha(et.v)),et.G=Date.now(),lc(et)}Id(_e)}function Ac(_e){_e.g&&(wc(_e),_e.g.cancel(),_e.g=null)}function Gd(_e){Ac(_e),_e.u&&(l$2.clearTimeout(_e.u),_e.u=null),zc(_e),_e.h.cancel(),_e.m&&(typeof _e.m=="number"&&l$2.clearTimeout(_e.m),_e.m=null)}function Hc(_e){fd(_e.h)||_e.m||(_e.m=!0,tb(_e.Na,_e),_e.C=0)}function Jd(_e,et){return Cc(_e.h)>=_e.h.j-(_e.m?1:0)?!1:_e.m?(_e.i=et.F.concat(_e.i),!0):_e.H==1||_e.H==2||_e.C>=(_e.cb?0:_e.eb)?!1:(_e.m=Tb(q$4(_e.Na,_e,et),Kd(_e,_e.C)),_e.C++,!0)}k$3.Na=function(_e){if(this.m)if(this.m=null,this.H==1){if(!_e){this.W=Math.floor(1e5*Math.random()),_e=this.W++;const ot=new dc(this,this.j,_e,void 0);let it=this.s;if(this.U&&(it?(it=Sa(it),Ua(it,this.U)):it=this.U),this.o!==null||this.O||(ot.I=it,it=null),this.P)e:{for(var et=0,rt=0;rt<this.i.length;rt++){t:{var nt=this.i[rt];if("__data__"in nt.g&&(nt=nt.g.__data__,typeof nt=="string")){nt=nt.length;break t}nt=void 0}if(nt===void 0)break;if(et+=nt,4096<et){et=rt;break e}if(et===4096||rt===this.i.length-1){et=rt+1;break e}}et=1e3}else et=1e3;et=Ld(this,ot,et),rt=G$2(this.G),K$1(rt,"RID",_e),K$1(rt,"CVER",22),this.F&&K$1(rt,"X-HTTP-Session-Id",this.F),Hd(this,rt),it&&(this.O?et="headers="+encodeURIComponent(String(Cd(it)))+"&"+et:this.o&&Dd(rt,this.o,it)),Dc(this.h,ot),this.bb&&K$1(rt,"TYPE","init"),this.P?(K$1(rt,"$req",et),K$1(rt,"SID","null"),ot.ba=!0,ic(ot,rt,null)):ic(ot,rt,et),this.H=2}}else this.H==3&&(_e?Md(this,_e):this.i.length==0||fd(this.h)||Md(this))};function Md(_e,et){var rt;et?rt=et.m:rt=_e.W++;const nt=G$2(_e.G);K$1(nt,"SID",_e.J),K$1(nt,"RID",rt),K$1(nt,"AID",_e.V),Hd(_e,nt),_e.o&&_e.s&&Dd(nt,_e.o,_e.s),rt=new dc(_e,_e.j,rt,_e.C+1),_e.o===null&&(rt.I=_e.s),et&&(_e.i=et.F.concat(_e.i)),et=Ld(_e,rt,1e3),rt.setTimeout(Math.round(.5*_e.xa)+Math.round(.5*_e.xa*Math.random())),Dc(_e.h,rt),ic(rt,nt,et)}function Hd(_e,et){_e.ma&&Ra(_e.ma,function(rt,nt){K$1(et,nt,rt)}),_e.l&&Lc({},function(rt,nt){K$1(et,nt,rt)})}function Ld(_e,et,rt){rt=Math.min(_e.i.length,rt);var nt=_e.l?q$4(_e.l.Va,_e.l,_e):null;e:{var ot=_e.i;let it=-1;for(;;){const st=["count="+rt];it==-1?0<rt?(it=ot[0].h,st.push("ofs="+it)):it=0:st.push("ofs="+it);let at=!0;for(let lt=0;lt<rt;lt++){let ct=ot[lt].h;const pt=ot[lt].g;if(ct-=it,0>ct)it=Math.max(0,ot[lt].h-100),at=!1;else try{jd(pt,st,"req"+ct+"_")}catch{nt&&nt(pt)}}if(at){nt=st.join("&");break e}}}return _e=_e.i.splice(0,rt),et.F=_e,nt}function Gc(_e){_e.g||_e.u||(_e.ba=1,tb(_e.Ma,_e),_e.A=0)}function Bc(_e){return _e.g||_e.u||3<=_e.A?!1:(_e.ba++,_e.u=Tb(q$4(_e.Ma,_e),Kd(_e,_e.A)),_e.A++,!0)}k$3.Ma=function(){if(this.u=null,Nd(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var _e=2*this.S;this.j.info("BP detection timer enabled: "+_e),this.B=Tb(q$4(this.jb,this),_e)}};k$3.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,F$2(10),Ac(this),Nd(this))};function wc(_e){_e.B!=null&&(l$2.clearTimeout(_e.B),_e.B=null)}function Nd(_e){_e.g=new dc(_e,_e.j,"rpc",_e.ba),_e.o===null&&(_e.g.I=_e.s),_e.g.O=0;var et=G$2(_e.wa);K$1(et,"RID","rpc"),K$1(et,"SID",_e.J),K$1(et,"CI",_e.M?"0":"1"),K$1(et,"AID",_e.V),K$1(et,"TYPE","xmlhttp"),Hd(_e,et),_e.o&&_e.s&&Dd(et,_e.o,_e.s),_e.K&&_e.g.setTimeout(_e.K);var rt=_e.g;_e=_e.oa,rt.L=1,rt.v=jc(G$2(et)),rt.s=null,rt.S=!0,kc(rt,_e)}k$3.ib=function(){this.v!=null&&(this.v=null,Ac(this),Bc(this),F$2(19))};function zc(_e){_e.v!=null&&(l$2.clearTimeout(_e.v),_e.v=null)}function uc(_e,et){var rt=null;if(_e.g==et){zc(_e),wc(_e),_e.g=null;var nt=2}else if(yc(_e.h,et))rt=et.F,Fc(_e.h,et),nt=1;else return;if(_e.H!=0){if(_e.ta=et.aa,et.i)if(nt==1){rt=et.s?et.s.length:0,et=Date.now()-et.G;var ot=_e.C;nt=Ob(),C(nt,new Sb(nt,rt)),Hc(_e)}else Gc(_e);else if(ot=et.o,ot==3||ot==0&&0<_e.ta||!(nt==1&&Jd(_e,et)||nt==2&&Bc(_e)))switch(rt&&0<rt.length&&(et=_e.h,et.i=et.i.concat(rt)),ot){case 1:J$1(_e,5);break;case 4:J$1(_e,10);break;case 3:J$1(_e,6);break;default:J$1(_e,2)}}}function Kd(_e,et){let rt=_e.ab+Math.floor(Math.random()*_e.hb);return _e.l||(rt*=2),rt*et}function J$1(_e,et){if(_e.j.info("Error code "+et),et==2){var rt=null;_e.l&&(rt=null);var nt=q$4(_e.pb,_e);rt||(rt=new M$1("//www.google.com/images/cleardot.gif"),l$2.location&&l$2.location.protocol=="http"||Oc(rt,"https"),jc(rt)),kd(rt.toString(),nt)}else F$2(2);_e.H=0,_e.l&&_e.l.za(et),Id(_e),Gd(_e)}k$3.pb=function(_e){_e?(this.j.info("Successfully pinged google.com"),F$2(2)):(this.j.info("Failed to ping google.com"),F$2(1))};function Id(_e){if(_e.H=0,_e.pa=[],_e.l){const et=gd(_e.h);(et.length!=0||_e.i.length!=0)&&(oa(_e.pa,et),oa(_e.pa,_e.i),_e.h.i.length=0,na(_e.i),_e.i.length=0),_e.l.ya()}}function Ec$1(_e,et,rt){var nt=rt instanceof M$1?G$2(rt):new M$1(rt,void 0);if(nt.g!="")et&&(nt.g=et+"."+nt.g),Pc(nt,nt.m);else{var ot=l$2.location;nt=ot.protocol,et=et?et+"."+ot.hostname:ot.hostname,ot=+ot.port;var it=new M$1(null,void 0);nt&&Oc(it,nt),et&&(it.g=et),ot&&Pc(it,ot),rt&&(it.l=rt),nt=it}return rt=_e.F,et=_e.Da,rt&&et&&K$1(nt,rt,et),K$1(nt,"VER",_e.qa),Hd(_e,nt),nt}function nc(_e,et,rt){if(et&&!_e.I)throw Error("Can't create secondary domain capable XhrIo object.");return et=rt&&_e.Ha&&!_e.va?new P$1(new md({ob:!0})):new P$1(_e.va),et.Oa(_e.I),et}function Od(){}k$3=Od.prototype;k$3.Ba=function(){};k$3.Aa=function(){};k$3.za=function(){};k$3.ya=function(){};k$3.Va=function(){};function Q$2(_e,et){B$1.call(this),this.g=new Fd(et),this.l=_e,this.h=et&&et.messageUrlParams||null,_e=et&&et.messageHeaders||null,et&&et.clientProtocolHeaderRequired&&(_e?_e["X-Client-Protocol"]="webchannel":_e={"X-Client-Protocol":"webchannel"}),this.g.s=_e,_e=et&&et.initMessageHeaders||null,et&&et.messageContentType&&(_e?_e["X-WebChannel-Content-Type"]=et.messageContentType:_e={"X-WebChannel-Content-Type":et.messageContentType}),et&&et.Ca&&(_e?_e["X-WebChannel-Client-Profile"]=et.Ca:_e={"X-WebChannel-Client-Profile":et.Ca}),this.g.U=_e,(_e=et&&et.cc)&&!qa(_e)&&(this.g.o=_e),this.A=et&&et.supportsCrossDomainXhr||!1,this.v=et&&et.sendRawJson||!1,(et=et&&et.httpSessionIdParam)&&!qa(et)&&(this.g.F=et,_e=this.h,_e!==null&&et in _e&&(_e=this.h,et in _e&&delete _e[et])),this.j=new R$1(this)}r$3(Q$2,B$1);Q$2.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var _e=this.g,et=this.l,rt=this.h||void 0;F$2(0),_e.Y=et,_e.ma=rt||{},_e.M=_e.aa,_e.G=Ec$1(_e,null,_e.Y),Hc(_e)};Q$2.prototype.close=function(){Ic(this.g)};Q$2.prototype.u=function(_e){var et=this.g;if(typeof _e=="string"){var rt={};rt.__data__=_e,_e=rt}else this.v&&(rt={},rt.__data__=mb(_e),_e=rt);et.i.push(new cd(et.fb++,_e)),et.H==3&&Hc(et)};Q$2.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Q$2.$.N.call(this)};function Qd(_e){$b.call(this);var et=_e.__sm__;if(et){e:{for(const rt in et){_e=rt;break e}_e=void 0}(this.i=_e)&&(_e=this.i,et=et!==null&&_e in et?et[_e]:void 0),this.data=et}else this.data=_e}r$3(Qd,$b);function Rd(){ac.call(this),this.status=1}r$3(Rd,ac);function R$1(_e){this.g=_e}r$3(R$1,Od);R$1.prototype.Ba=function(){C(this.g,"a")};R$1.prototype.Aa=function(_e){C(this.g,new Qd(_e))};R$1.prototype.za=function(_e){C(this.g,new Rd)};R$1.prototype.ya=function(){C(this.g,"b")};function Sd(){this.blockSize=-1}function S$2(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}r$3(S$2,Sd);S$2.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Td(_e,et,rt){rt||(rt=0);var nt=Array(16);if(typeof et=="string")for(var ot=0;16>ot;++ot)nt[ot]=et.charCodeAt(rt++)|et.charCodeAt(rt++)<<8|et.charCodeAt(rt++)<<16|et.charCodeAt(rt++)<<24;else for(ot=0;16>ot;++ot)nt[ot]=et[rt++]|et[rt++]<<8|et[rt++]<<16|et[rt++]<<24;et=_e.g[0],rt=_e.g[1],ot=_e.g[2];var it=_e.g[3],st=et+(it^rt&(ot^it))+nt[0]+3614090360&4294967295;et=rt+(st<<7&4294967295|st>>>25),st=it+(ot^et&(rt^ot))+nt[1]+3905402710&4294967295,it=et+(st<<12&4294967295|st>>>20),st=ot+(rt^it&(et^rt))+nt[2]+606105819&4294967295,ot=it+(st<<17&4294967295|st>>>15),st=rt+(et^ot&(it^et))+nt[3]+3250441966&4294967295,rt=ot+(st<<22&4294967295|st>>>10),st=et+(it^rt&(ot^it))+nt[4]+4118548399&4294967295,et=rt+(st<<7&4294967295|st>>>25),st=it+(ot^et&(rt^ot))+nt[5]+1200080426&4294967295,it=et+(st<<12&4294967295|st>>>20),st=ot+(rt^it&(et^rt))+nt[6]+2821735955&4294967295,ot=it+(st<<17&4294967295|st>>>15),st=rt+(et^ot&(it^et))+nt[7]+4249261313&4294967295,rt=ot+(st<<22&4294967295|st>>>10),st=et+(it^rt&(ot^it))+nt[8]+1770035416&4294967295,et=rt+(st<<7&4294967295|st>>>25),st=it+(ot^et&(rt^ot))+nt[9]+2336552879&4294967295,it=et+(st<<12&4294967295|st>>>20),st=ot+(rt^it&(et^rt))+nt[10]+4294925233&4294967295,ot=it+(st<<17&4294967295|st>>>15),st=rt+(et^ot&(it^et))+nt[11]+2304563134&4294967295,rt=ot+(st<<22&4294967295|st>>>10),st=et+(it^rt&(ot^it))+nt[12]+1804603682&4294967295,et=rt+(st<<7&4294967295|st>>>25),st=it+(ot^et&(rt^ot))+nt[13]+4254626195&4294967295,it=et+(st<<12&4294967295|st>>>20),st=ot+(rt^it&(et^rt))+nt[14]+2792965006&4294967295,ot=it+(st<<17&4294967295|st>>>15),st=rt+(et^ot&(it^et))+nt[15]+1236535329&4294967295,rt=ot+(st<<22&4294967295|st>>>10),st=et+(ot^it&(rt^ot))+nt[1]+4129170786&4294967295,et=rt+(st<<5&4294967295|st>>>27),st=it+(rt^ot&(et^rt))+nt[6]+3225465664&4294967295,it=et+(st<<9&4294967295|st>>>23),st=ot+(et^rt&(it^et))+nt[11]+643717713&4294967295,ot=it+(st<<14&4294967295|st>>>18),st=rt+(it^et&(ot^it))+nt[0]+3921069994&4294967295,rt=ot+(st<<20&4294967295|st>>>12),st=et+(ot^it&(rt^ot))+nt[5]+3593408605&4294967295,et=rt+(st<<5&4294967295|st>>>27),st=it+(rt^ot&(et^rt))+nt[10]+38016083&4294967295,it=et+(st<<9&4294967295|st>>>23),st=ot+(et^rt&(it^et))+nt[15]+3634488961&4294967295,ot=it+(st<<14&4294967295|st>>>18),st=rt+(it^et&(ot^it))+nt[4]+3889429448&4294967295,rt=ot+(st<<20&4294967295|st>>>12),st=et+(ot^it&(rt^ot))+nt[9]+568446438&4294967295,et=rt+(st<<5&4294967295|st>>>27),st=it+(rt^ot&(et^rt))+nt[14]+3275163606&4294967295,it=et+(st<<9&4294967295|st>>>23),st=ot+(et^rt&(it^et))+nt[3]+4107603335&4294967295,ot=it+(st<<14&4294967295|st>>>18),st=rt+(it^et&(ot^it))+nt[8]+1163531501&4294967295,rt=ot+(st<<20&4294967295|st>>>12),st=et+(ot^it&(rt^ot))+nt[13]+2850285829&4294967295,et=rt+(st<<5&4294967295|st>>>27),st=it+(rt^ot&(et^rt))+nt[2]+4243563512&4294967295,it=et+(st<<9&4294967295|st>>>23),st=ot+(et^rt&(it^et))+nt[7]+1735328473&4294967295,ot=it+(st<<14&4294967295|st>>>18),st=rt+(it^et&(ot^it))+nt[12]+2368359562&4294967295,rt=ot+(st<<20&4294967295|st>>>12),st=et+(rt^ot^it)+nt[5]+4294588738&4294967295,et=rt+(st<<4&4294967295|st>>>28),st=it+(et^rt^ot)+nt[8]+2272392833&4294967295,it=et+(st<<11&4294967295|st>>>21),st=ot+(it^et^rt)+nt[11]+1839030562&4294967295,ot=it+(st<<16&4294967295|st>>>16),st=rt+(ot^it^et)+nt[14]+4259657740&4294967295,rt=ot+(st<<23&4294967295|st>>>9),st=et+(rt^ot^it)+nt[1]+2763975236&4294967295,et=rt+(st<<4&4294967295|st>>>28),st=it+(et^rt^ot)+nt[4]+1272893353&4294967295,it=et+(st<<11&4294967295|st>>>21),st=ot+(it^et^rt)+nt[7]+4139469664&4294967295,ot=it+(st<<16&4294967295|st>>>16),st=rt+(ot^it^et)+nt[10]+3200236656&4294967295,rt=ot+(st<<23&4294967295|st>>>9),st=et+(rt^ot^it)+nt[13]+681279174&4294967295,et=rt+(st<<4&4294967295|st>>>28),st=it+(et^rt^ot)+nt[0]+3936430074&4294967295,it=et+(st<<11&4294967295|st>>>21),st=ot+(it^et^rt)+nt[3]+3572445317&4294967295,ot=it+(st<<16&4294967295|st>>>16),st=rt+(ot^it^et)+nt[6]+76029189&4294967295,rt=ot+(st<<23&4294967295|st>>>9),st=et+(rt^ot^it)+nt[9]+3654602809&4294967295,et=rt+(st<<4&4294967295|st>>>28),st=it+(et^rt^ot)+nt[12]+3873151461&4294967295,it=et+(st<<11&4294967295|st>>>21),st=ot+(it^et^rt)+nt[15]+530742520&4294967295,ot=it+(st<<16&4294967295|st>>>16),st=rt+(ot^it^et)+nt[2]+3299628645&4294967295,rt=ot+(st<<23&4294967295|st>>>9),st=et+(ot^(rt|~it))+nt[0]+4096336452&4294967295,et=rt+(st<<6&4294967295|st>>>26),st=it+(rt^(et|~ot))+nt[7]+1126891415&4294967295,it=et+(st<<10&4294967295|st>>>22),st=ot+(et^(it|~rt))+nt[14]+2878612391&4294967295,ot=it+(st<<15&4294967295|st>>>17),st=rt+(it^(ot|~et))+nt[5]+4237533241&4294967295,rt=ot+(st<<21&4294967295|st>>>11),st=et+(ot^(rt|~it))+nt[12]+1700485571&4294967295,et=rt+(st<<6&4294967295|st>>>26),st=it+(rt^(et|~ot))+nt[3]+2399980690&4294967295,it=et+(st<<10&4294967295|st>>>22),st=ot+(et^(it|~rt))+nt[10]+4293915773&4294967295,ot=it+(st<<15&4294967295|st>>>17),st=rt+(it^(ot|~et))+nt[1]+2240044497&4294967295,rt=ot+(st<<21&4294967295|st>>>11),st=et+(ot^(rt|~it))+nt[8]+1873313359&4294967295,et=rt+(st<<6&4294967295|st>>>26),st=it+(rt^(et|~ot))+nt[15]+4264355552&4294967295,it=et+(st<<10&4294967295|st>>>22),st=ot+(et^(it|~rt))+nt[6]+2734768916&4294967295,ot=it+(st<<15&4294967295|st>>>17),st=rt+(it^(ot|~et))+nt[13]+1309151649&4294967295,rt=ot+(st<<21&4294967295|st>>>11),st=et+(ot^(rt|~it))+nt[4]+4149444226&4294967295,et=rt+(st<<6&4294967295|st>>>26),st=it+(rt^(et|~ot))+nt[11]+3174756917&4294967295,it=et+(st<<10&4294967295|st>>>22),st=ot+(et^(it|~rt))+nt[2]+718787259&4294967295,ot=it+(st<<15&4294967295|st>>>17),st=rt+(it^(ot|~et))+nt[9]+3951481745&4294967295,_e.g[0]=_e.g[0]+et&4294967295,_e.g[1]=_e.g[1]+(ot+(st<<21&4294967295|st>>>11))&4294967295,_e.g[2]=_e.g[2]+ot&4294967295,_e.g[3]=_e.g[3]+it&4294967295}S$2.prototype.j=function(_e,et){et===void 0&&(et=_e.length);for(var rt=et-this.blockSize,nt=this.m,ot=this.h,it=0;it<et;){if(ot==0)for(;it<=rt;)Td(this,_e,it),it+=this.blockSize;if(typeof _e=="string"){for(;it<et;)if(nt[ot++]=_e.charCodeAt(it++),ot==this.blockSize){Td(this,nt),ot=0;break}}else for(;it<et;)if(nt[ot++]=_e[it++],ot==this.blockSize){Td(this,nt),ot=0;break}}this.h=ot,this.i+=et};S$2.prototype.l=function(){var _e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_e[0]=128;for(var et=1;et<_e.length-8;++et)_e[et]=0;var rt=8*this.i;for(et=_e.length-8;et<_e.length;++et)_e[et]=rt&255,rt/=256;for(this.j(_e),_e=Array(16),et=rt=0;4>et;++et)for(var nt=0;32>nt;nt+=8)_e[rt++]=this.g[et]>>>nt&255;return _e};function T(_e,et){this.h=et;for(var rt=[],nt=!0,ot=_e.length-1;0<=ot;ot--){var it=_e[ot]|0;nt&&it==et||(rt[ot]=it,nt=!1)}this.g=rt}var Ud={};function Vd(_e){return-128<=_e&&128>_e?va(Ud,_e,function(et){return new T([et|0],0>et?-1:0)}):new T([_e|0],0>_e?-1:0)}function U$2(_e){if(isNaN(_e)||!isFinite(_e))return V$1;if(0>_e)return W$2(U$2(-_e));for(var et=[],rt=1,nt=0;_e>=rt;nt++)et[nt]=_e/rt|0,rt*=Wd;return new T(et,0)}function Xd(_e,et){if(_e.length==0)throw Error("number format error: empty string");if(et=et||10,2>et||36<et)throw Error("radix out of range: "+et);if(_e.charAt(0)=="-")return W$2(Xd(_e.substring(1),et));if(0<=_e.indexOf("-"))throw Error('number format error: interior "-" character');for(var rt=U$2(Math.pow(et,8)),nt=V$1,ot=0;ot<_e.length;ot+=8){var it=Math.min(8,_e.length-ot),st=parseInt(_e.substring(ot,ot+it),et);8>it?(it=U$2(Math.pow(et,it)),nt=nt.R(it).add(U$2(st))):(nt=nt.R(rt),nt=nt.add(U$2(st)))}return nt}var Wd=4294967296,V$1=Vd(0),Yd=Vd(1),Zd=Vd(16777216);k$3=T.prototype;k$3.ea=function(){if(X$1(this))return-W$2(this).ea();for(var _e=0,et=1,rt=0;rt<this.g.length;rt++){var nt=this.D(rt);_e+=(0<=nt?nt:Wd+nt)*et,et*=Wd}return _e};k$3.toString=function(_e){if(_e=_e||10,2>_e||36<_e)throw Error("radix out of range: "+_e);if(Y$1(this))return"0";if(X$1(this))return"-"+W$2(this).toString(_e);for(var et=U$2(Math.pow(_e,6)),rt=this,nt="";;){var ot=$d(rt,et).g;rt=ae(rt,ot.R(et));var it=((0<rt.g.length?rt.g[0]:rt.h)>>>0).toString(_e);if(rt=ot,Y$1(rt))return it+nt;for(;6>it.length;)it="0"+it;nt=it+nt}};k$3.D=function(_e){return 0>_e?0:_e<this.g.length?this.g[_e]:this.h};function Y$1(_e){if(_e.h!=0)return!1;for(var et=0;et<_e.g.length;et++)if(_e.g[et]!=0)return!1;return!0}function X$1(_e){return _e.h==-1}k$3.X=function(_e){return _e=ae(this,_e),X$1(_e)?-1:Y$1(_e)?0:1};function W$2(_e){for(var et=_e.g.length,rt=[],nt=0;nt<et;nt++)rt[nt]=~_e.g[nt];return new T(rt,~_e.h).add(Yd)}k$3.abs=function(){return X$1(this)?W$2(this):this};k$3.add=function(_e){for(var et=Math.max(this.g.length,_e.g.length),rt=[],nt=0,ot=0;ot<=et;ot++){var it=nt+(this.D(ot)&65535)+(_e.D(ot)&65535),st=(it>>>16)+(this.D(ot)>>>16)+(_e.D(ot)>>>16);nt=st>>>16,it&=65535,st&=65535,rt[ot]=st<<16|it}return new T(rt,rt[rt.length-1]&-2147483648?-1:0)};function ae(_e,et){return _e.add(W$2(et))}k$3.R=function(_e){if(Y$1(this)||Y$1(_e))return V$1;if(X$1(this))return X$1(_e)?W$2(this).R(W$2(_e)):W$2(W$2(this).R(_e));if(X$1(_e))return W$2(this.R(W$2(_e)));if(0>this.X(Zd)&&0>_e.X(Zd))return U$2(this.ea()*_e.ea());for(var et=this.g.length+_e.g.length,rt=[],nt=0;nt<2*et;nt++)rt[nt]=0;for(nt=0;nt<this.g.length;nt++)for(var ot=0;ot<_e.g.length;ot++){var it=this.D(nt)>>>16,st=this.D(nt)&65535,at=_e.D(ot)>>>16,lt=_e.D(ot)&65535;rt[2*nt+2*ot]+=st*lt,be(rt,2*nt+2*ot),rt[2*nt+2*ot+1]+=it*lt,be(rt,2*nt+2*ot+1),rt[2*nt+2*ot+1]+=st*at,be(rt,2*nt+2*ot+1),rt[2*nt+2*ot+2]+=it*at,be(rt,2*nt+2*ot+2)}for(nt=0;nt<et;nt++)rt[nt]=rt[2*nt+1]<<16|rt[2*nt];for(nt=et;nt<2*et;nt++)rt[nt]=0;return new T(rt,0)};function be(_e,et){for(;(_e[et]&65535)!=_e[et];)_e[et+1]+=_e[et]>>>16,_e[et]&=65535,et++}function ce(_e,et){this.g=_e,this.h=et}function $d(_e,et){if(Y$1(et))throw Error("division by zero");if(Y$1(_e))return new ce(V$1,V$1);if(X$1(_e))return et=$d(W$2(_e),et),new ce(W$2(et.g),W$2(et.h));if(X$1(et))return et=$d(_e,W$2(et)),new ce(W$2(et.g),et.h);if(30<_e.g.length){if(X$1(_e)||X$1(et))throw Error("slowDivide_ only works with positive integers.");for(var rt=Yd,nt=et;0>=nt.X(_e);)rt=de(rt),nt=de(nt);var ot=Z$2(rt,1),it=Z$2(nt,1);for(nt=Z$2(nt,2),rt=Z$2(rt,2);!Y$1(nt);){var st=it.add(nt);0>=st.X(_e)&&(ot=ot.add(rt),it=st),nt=Z$2(nt,1),rt=Z$2(rt,1)}return et=ae(_e,ot.R(et)),new ce(ot,et)}for(ot=V$1;0<=_e.X(et);){for(rt=Math.max(1,Math.floor(_e.ea()/et.ea())),nt=Math.ceil(Math.log(rt)/Math.LN2),nt=48>=nt?1:Math.pow(2,nt-48),it=U$2(rt),st=it.R(et);X$1(st)||0<st.X(_e);)rt-=nt,it=U$2(rt),st=it.R(et);Y$1(it)&&(it=Yd),ot=ot.add(it),_e=ae(_e,st)}return new ce(ot,_e)}k$3.gb=function(_e){return $d(this,_e).h};k$3.and=function(_e){for(var et=Math.max(this.g.length,_e.g.length),rt=[],nt=0;nt<et;nt++)rt[nt]=this.D(nt)&_e.D(nt);return new T(rt,this.h&_e.h)};k$3.or=function(_e){for(var et=Math.max(this.g.length,_e.g.length),rt=[],nt=0;nt<et;nt++)rt[nt]=this.D(nt)|_e.D(nt);return new T(rt,this.h|_e.h)};k$3.xor=function(_e){for(var et=Math.max(this.g.length,_e.g.length),rt=[],nt=0;nt<et;nt++)rt[nt]=this.D(nt)^_e.D(nt);return new T(rt,this.h^_e.h)};function de(_e){for(var et=_e.g.length+1,rt=[],nt=0;nt<et;nt++)rt[nt]=_e.D(nt)<<1|_e.D(nt-1)>>>31;return new T(rt,_e.h)}function Z$2(_e,et){var rt=et>>5;et%=32;for(var nt=_e.g.length-rt,ot=[],it=0;it<nt;it++)ot[it]=0<et?_e.D(it+rt)>>>et|_e.D(it+rt+1)<<32-et:_e.D(it+rt);return new T(ot,_e.h)}Q$2.prototype.send=Q$2.prototype.u;Q$2.prototype.open=Q$2.prototype.m;Q$2.prototype.close=Q$2.prototype.close;Ub.NO_ERROR=0;Ub.TIMEOUT=8;Ub.HTTP_ERROR=6;Vb.COMPLETE="complete";Yb.EventType=Zb;Zb.OPEN="a";Zb.CLOSE="b";Zb.ERROR="c";Zb.MESSAGE="d";B$1.prototype.listen=B$1.prototype.O;P$1.prototype.listenOnce=P$1.prototype.P;P$1.prototype.getLastError=P$1.prototype.Sa;P$1.prototype.getLastErrorCode=P$1.prototype.Ia;P$1.prototype.getStatus=P$1.prototype.da;P$1.prototype.getResponseJson=P$1.prototype.Wa;P$1.prototype.getResponseText=P$1.prototype.ja;P$1.prototype.send=P$1.prototype.ha;P$1.prototype.setWithCredentials=P$1.prototype.Oa;S$2.prototype.digest=S$2.prototype.l;S$2.prototype.reset=S$2.prototype.reset;S$2.prototype.update=S$2.prototype.j;T.prototype.add=T.prototype.add;T.prototype.multiply=T.prototype.R;T.prototype.modulo=T.prototype.gb;T.prototype.compare=T.prototype.X;T.prototype.toNumber=T.prototype.ea;T.prototype.toString=T.prototype.toString;T.prototype.getBits=T.prototype.D;T.fromNumber=U$2;T.fromString=Xd;var Integer=T;const b$1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(et){this.uid=et}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(et){return et.uid===this.uid}}V.UNAUTHENTICATED=new V(null),V.GOOGLE_CREDENTIALS=new V("google-credentials-uid"),V.FIRST_PARTY=new V("first-party-uid"),V.MOCK_USER=new V("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$1="9.22.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$1=new Logger("@firebase/firestore");function N$1(_e,...et){if(D$1.logLevel<=LogLevel.DEBUG){const rt=et.map($);D$1.debug(`Firestore (${S$1}): ${_e}`,...rt)}}function k$2(_e,...et){if(D$1.logLevel<=LogLevel.ERROR){const rt=et.map($);D$1.error(`Firestore (${S$1}): ${_e}`,...rt)}}function $(_e){if(typeof _e=="string")return _e;try{return et=_e,JSON.stringify(et)}catch{return _e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var et}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$1(_e="Unexpected state"){const et=`FIRESTORE (${S$1}) INTERNAL ASSERTION FAILED: `+_e;throw k$2(et),new Error(et)}function F$1(_e,et){_e||O$1()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$3={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let U$1=class extends FirebaseError{constructor(et,rt){super(et,rt),this.code=et,this.message=rt,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(){this.promise=new Promise((et,rt)=>{this.resolve=et,this.reject=rt})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G$1=class{constructor(et,rt){this.user=rt,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${et}`)}},Q$1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(et,rt){et.enqueueRetryable(()=>rt(V.UNAUTHENTICATED))}shutdown(){}},z$1=class{constructor(et){this.t=et,this.currentUser=V.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(et,rt){let nt=this.i;const ot=lt=>this.i!==nt?(nt=this.i,rt(lt)):Promise.resolve();let it=new K;this.o=()=>{this.i++,this.currentUser=this.u(),it.resolve(),it=new K,et.enqueueRetryable(()=>ot(this.currentUser))};const st=()=>{const lt=it;et.enqueueRetryable(async()=>{await lt.promise,await ot(this.currentUser)})},at=lt=>{N$1("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=lt,this.auth.addAuthTokenListener(this.o),st()};this.t.onInit(lt=>at(lt)),setTimeout(()=>{if(!this.auth){const lt=this.t.getImmediate({optional:!0});lt?at(lt):(N$1("FirebaseAuthCredentialsProvider","Auth not yet detected"),it.resolve(),it=new K)}},0),st()}getToken(){const et=this.i,rt=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(rt).then(nt=>this.i!==et?(N$1("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):nt?(F$1(typeof nt.accessToken=="string"),new G$1(nt.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const et=this.auth&&this.auth.getUid();return F$1(et===null||typeof et=="string"),new V(et)}},W$1=class{constructor(et,rt,nt){this.h=et,this.l=rt,this.m=nt,this.type="FirstParty",this.user=V.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const et=this.p();return et&&this.g.set("Authorization",et),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},H$1=class{constructor(et,rt,nt){this.h=et,this.l=rt,this.m=nt}getToken(){return Promise.resolve(new W$1(this.h,this.l,this.m))}start(et,rt){et.enqueueRetryable(()=>rt(V.FIRST_PARTY))}shutdown(){}invalidateToken(){}};class J{constructor(et){this.value=et,this.type="AppCheck",this.headers=new Map,et&&et.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y{constructor(et){this.I=et,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(et,rt){const nt=it=>{it.error!=null&&N$1("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${it.error.message}`);const st=it.token!==this.T;return this.T=it.token,N$1("FirebaseAppCheckTokenProvider",`Received ${st?"new":"existing"} token.`),st?rt(it.token):Promise.resolve()};this.o=it=>{et.enqueueRetryable(()=>nt(it))};const ot=it=>{N$1("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=it,this.appCheck.addTokenListener(this.o)};this.I.onInit(it=>ot(it)),setTimeout(()=>{if(!this.appCheck){const it=this.I.getImmediate({optional:!0});it?ot(it):N$1("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const et=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(et).then(rt=>rt?(F$1(typeof rt.token=="string"),this.T=rt.token,new J(rt.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$1(_e){const et=typeof self<"u"&&(self.crypto||self.msCrypto),rt=new Uint8Array(_e);if(et&&typeof et.getRandomValues=="function")et.getRandomValues(rt);else for(let nt=0;nt<_e;nt++)rt[nt]=Math.floor(256*Math.random());return rt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static A(){const et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",rt=Math.floor(256/et.length)*et.length;let nt="";for(;nt.length<20;){const ot=Z$1(40);for(let it=0;it<ot.length;++it)nt.length<20&&ot[it]<rt&&(nt+=et.charAt(ot[it]%et.length))}return nt}}function Dt(_e){return _e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(et,rt,nt,ot,it,st,at,lt,ct){this.databaseId=et,this.appId=rt,this.persistenceKey=nt,this.host=ot,this.ssl=it,this.forceLongPolling=st,this.autoDetectLongPolling=at,this.longPollingOptions=lt,this.useFetchStreams=ct}}class Oe{constructor(et,rt){this.projectId=et,this.database=rt||"(default)"}static empty(){return new Oe("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(et){return et instanceof Oe&&et.projectId===this.projectId&&et.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,ri;(ri=ii||(ii={}))[ri.OK=0]="OK",ri[ri.CANCELLED=1]="CANCELLED",ri[ri.UNKNOWN=2]="UNKNOWN",ri[ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ri[ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ri[ri.NOT_FOUND=5]="NOT_FOUND",ri[ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",ri[ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",ri[ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",ri[ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ri[ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ri[ri.ABORTED=10]="ABORTED",ri[ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",ri[ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",ri[ri.INTERNAL=13]="INTERNAL",ri[ri.UNAVAILABLE=14]="UNAVAILABLE",ri[ri.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Integer([4294967295,4294967295],0);function Ou(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(et,rt,nt=1e3,ot=1.5,it=6e4){this.ii=et,this.timerId=rt,this.Po=nt,this.bo=ot,this.Vo=it,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(et){this.cancel();const rt=Math.floor(this.So+this.ko()),nt=Math.max(0,Date.now()-this.Co),ot=Math.max(0,rt-nt);ot>0&&N$1("ExponentialBackoff",`Backing off for ${ot} ms (base delay: ${this.So} ms, delay with jitter: ${rt} ms, last attempt: ${nt} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,ot,()=>(this.Co=Date.now(),et())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(et,rt,nt,ot,it){this.asyncQueue=et,this.timerId=rt,this.targetTimeMs=nt,this.op=ot,this.removalCallback=it,this.deferred=new K,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(st=>{})}static createAndSchedule(et,rt,nt,ot,it){const st=Date.now()+nt,at=new Tc(et,rt,st,ot,it);return at.start(nt),at}start(et){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),et)}skipDelay(){return this.handleDelayElapsed()}cancel(et){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U$1(q$3.CANCELLED,"Operation cancelled"+(et?": "+et:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(et=>this.deferred.resolve(et))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ec(_e,et){if(k$2("AsyncQueue",`${et}: ${_e}`),Dt(_e))return new U$1(q$3.UNAVAILABLE,`${et}: ${_e}`);throw _e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(et,rt,nt,ot){this.authCredentials=et,this.appCheckCredentials=rt,this.asyncQueue=nt,this.databaseInfo=ot,this.user=V.UNAUTHENTICATED,this.clientId=tt.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(nt,async it=>{N$1("FirestoreClient","Received user=",it.uid),await this.authCredentialListener(it),this.user=it}),this.appCheckCredentials.start(nt,it=>(N$1("FirestoreClient","Received new app check token=",it),this.appCheckCredentialListener(it,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(et){this.authCredentialListener=et}setAppCheckTokenChangeListener(et){this.appCheckCredentialListener=et}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U$1(q$3.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const et=new K;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),et.resolve()}catch(rt){const nt=Ec(rt,"Failed to shutdown persistence");et.reject(nt)}}),et.promise}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(_e){const et={};return _e.timeoutSeconds!==void 0&&(et.timeoutSeconds=_e.timeoutSeconds),et}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map;function sh(_e,et,rt,nt){if(et===!0&&nt===!0)throw new U$1(q$3.INVALID_ARGUMENT,`${_e} and ${rt} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(et){var rt,nt;if(et.host===void 0){if(et.ssl!==void 0)throw new U$1(q$3.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=et.host,this.ssl=(rt=et.ssl)===null||rt===void 0||rt;if(this.credentials=et.credentials,this.ignoreUndefinedProperties=!!et.ignoreUndefinedProperties,this.cache=et.localCache,et.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(et.cacheSizeBytes!==-1&&et.cacheSizeBytes<1048576)throw new U$1(q$3.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=et.cacheSizeBytes}sh("experimentalForceLongPolling",et.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",et.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!et.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:et.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!et.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=th((nt=et.experimentalLongPollingOptions)!==null&&nt!==void 0?nt:{}),function(ot){if(ot.timeoutSeconds!==void 0){if(isNaN(ot.timeoutSeconds))throw new U$1(q$3.INVALID_ARGUMENT,`invalid long polling timeout: ${ot.timeoutSeconds} (must not be NaN)`);if(ot.timeoutSeconds<5)throw new U$1(q$3.INVALID_ARGUMENT,`invalid long polling timeout: ${ot.timeoutSeconds} (minimum allowed value is 5)`);if(ot.timeoutSeconds>30)throw new U$1(q$3.INVALID_ARGUMENT,`invalid long polling timeout: ${ot.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!et.useFetchStreams}isEqual(et){return this.host===et.host&&this.ssl===et.ssl&&this.credentials===et.credentials&&this.cacheSizeBytes===et.cacheSizeBytes&&this.experimentalForceLongPolling===et.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===et.experimentalAutoDetectLongPolling&&(rt=this.experimentalLongPollingOptions,nt=et.experimentalLongPollingOptions,rt.timeoutSeconds===nt.timeoutSeconds)&&this.ignoreUndefinedProperties===et.ignoreUndefinedProperties&&this.useFetchStreams===et.useFetchStreams;var rt,nt}}class hh{constructor(et,rt,nt,ot){this._authCredentials=et,this._appCheckCredentials=rt,this._databaseId=nt,this._app=ot,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ah({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U$1(q$3.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(et){if(this._settingsFrozen)throw new U$1(q$3.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ah(et),et.credentials!==void 0&&(this._authCredentials=function(rt){if(!rt)return new Q$1;switch(rt.type){case"firstParty":return new H$1(rt.sessionIndex||"0",rt.iamToken||null,rt.authTokenFactory||null);case"provider":return rt.client;default:throw new U$1(q$3.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(et.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(et){const rt=eh.get(et);rt&&(N$1("ComponentProvider","Removing Datastore"),eh.delete(et),rt.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Bu(this,"async_queue_retry"),this.Xc=()=>{const rt=Ou();rt&&N$1("AsyncQueue","Visibility state changed to "+rt.visibilityState),this.qo.Mo()};const et=Ou();et&&typeof et.addEventListener=="function"&&et.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(et){this.enqueue(et)}enqueueAndForgetEvenWhileRestricted(et){this.Zc(),this.ta(et)}enterRestrictedMode(et){if(!this.jc){this.jc=!0,this.Jc=et||!1;const rt=Ou();rt&&typeof rt.removeEventListener=="function"&&rt.removeEventListener("visibilitychange",this.Xc)}}enqueue(et){if(this.Zc(),this.jc)return new Promise(()=>{});const rt=new K;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(et().then(rt.resolve,rt.reject),rt.promise)).then(()=>rt.promise)}enqueueRetryable(et){this.enqueueAndForget(()=>(this.Qc.push(et),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(et){if(!Dt(et))throw et;N$1("AsyncQueue","Operation failed with retryable error: "+et)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(et){const rt=this.Gc.then(()=>(this.Hc=!0,et().catch(nt=>{this.Wc=nt,this.Hc=!1;const ot=function(it){let st=it.message||"";return it.stack&&(st=it.stack.includes(it.message)?it.stack:it.message+`
`+it.stack),st}(nt);throw k$2("INTERNAL UNHANDLED ERROR: ",ot),nt}).then(nt=>(this.Hc=!1,nt))));return this.Gc=rt,rt}enqueueAfterDelay(et,rt,nt){this.Zc(),this.Yc.indexOf(et)>-1&&(rt=0);const ot=Tc.createAndSchedule(this,et,rt,nt,it=>this.na(it));return this.zc.push(ot),ot}Zc(){this.Wc&&O$1()}verifyOperationInProgress(){}async sa(){let et;do et=this.Gc,await et;while(et!==this.Gc)}ia(et){for(const rt of this.zc)if(rt.timerId===et)return!0;return!1}ra(et){return this.sa().then(()=>{this.zc.sort((rt,nt)=>rt.targetTimeMs-nt.targetTimeMs);for(const rt of this.zc)if(rt.skipDelay(),et!=="all"&&rt.timerId===et)break;return this.sa()})}oa(et){this.Yc.push(et)}na(et){const rt=this.zc.indexOf(et);this.zc.splice(rt,1)}}class vh extends hh{constructor(et,rt,nt,ot){super(et,rt,nt,ot),this.type="firestore",this._queue=new Ih,this._persistenceKey=(ot==null?void 0:ot.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vh(this),this._firestoreClient.terminate()}}function Vh(_e){var et,rt,nt;const ot=_e._freezeSettings(),it=function(st,at,lt,ct){return new $e(st,at,lt,ct.host,ct.ssl,ct.experimentalForceLongPolling,ct.experimentalAutoDetectLongPolling,th(ct.experimentalLongPollingOptions),ct.useFetchStreams)}(_e._databaseId,((et=_e._app)===null||et===void 0?void 0:et.options.appId)||"",_e._persistenceKey,ot);_e._firestoreClient=new xa(_e._authCredentials,_e._appCheckCredentials,_e._queue,it),!((rt=ot.cache)===null||rt===void 0)&&rt._offlineComponentProvider&&(!((nt=ot.cache)===null||nt===void 0)&&nt._onlineComponentProvider)&&(_e._firestoreClient._uninitializedComponentsProvider={_offlineKind:ot.cache.kind,_offline:ot.cache._offlineComponentProvider,_online:ot.cache._onlineComponentProvider})}(function(_e,et=!0){(function(rt){S$1=rt})(SDK_VERSION$1),_registerComponent(new Component("firestore",(rt,{instanceIdentifier:nt,options:ot})=>{const it=rt.getProvider("app").getImmediate(),st=new vh(new z$1(rt.getProvider("auth-internal")),new Y(rt.getProvider("app-check-internal")),function(at,lt){if(!Object.prototype.hasOwnProperty.apply(at.options,["projectId"]))throw new U$1(q$3.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oe(at.options.projectId,lt)}(it,nt),it);return ot=Object.assign({useFetchStreams:et},ot),st._setSettings(ot),st},"PUBLIC").setMultipleInstances(!0)),registerVersion(b$1,"3.12.0",_e),registerVersion(b$1,"3.12.0","esm2017")})();const Auth=_e=>{const{children:et}=_e,[rt,nt]=reactExports.useState([]),ot=getAuth(),it=localStorage.getItem("AT");return reactExports.useEffect(()=>{(()=>{const at=signInWithCustomToken(ot,it);console.log("data",at)})()},[ot,it]),console.log(rt,"to"),et};function App(){const _e=et=>{et.preventDefault()};return jsx("div",{className:"App",onContextMenu:_e,onCopy:_e,onCut:_e,onPaste:_e,children:jsx(ThemeProvider$2,{theme:theme$1,children:jsxs(Auth,{children:[jsxs(Routes,{children:[jsx(Route,{path:"/register",element:jsx(Register,{})}),jsx(Route,{path:"/login",element:jsx(Login,{})}),jsx(Route,{path:"/test",element:jsx(Test,{})}),UserRoutes,AdminRoutes,jsx(Route,{path:"*",element:jsx(Navigate,{to:"/page-not-found",replace:!0})})]}),jsx(Outlet,{})]})})})}var shimExports={},shim={get exports(){return shimExports},set exports(_e){shimExports=_e}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$2(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}var k$1=typeof Object.is=="function"?Object.is:h$2,l$1=e.useState,m$1=e.useEffect,n$2=e.useLayoutEffect,p$2=e.useDebugValue;function q$2(_e,et){var rt=et(),nt=l$1({inst:{value:rt,getSnapshot:et}}),ot=nt[0].inst,it=nt[1];return n$2(function(){ot.value=rt,ot.getSnapshot=et,r$2(ot)&&it({inst:ot})},[_e,rt,et]),m$1(function(){return r$2(ot)&&it({inst:ot}),_e(function(){r$2(ot)&&it({inst:ot})})},[_e]),p$2(rt),rt}function r$2(_e){var et=_e.getSnapshot;_e=_e.value;try{var rt=et();return!k$1(_e,rt)}catch{return!0}}function t$2(_e,et){return et()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$2;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$2;(function(_e){_e.exports=useSyncExternalStoreShim_production_min})(shim);var withSelectorExports={},withSelector={get exports(){return withSelectorExports},set exports(_e){withSelectorExports=_e}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$1=reactExports,n$1=shimExports;function p$1(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}var q$1=typeof Object.is=="function"?Object.is:p$1,r$1=n$1.useSyncExternalStore,t$1=h$1.useRef,u$1=h$1.useEffect,v$1=h$1.useMemo,w$1=h$1.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(_e,et,rt,nt,ot){var it=t$1(null);if(it.current===null){var st={hasValue:!1,value:null};it.current=st}else st=it.current;it=v$1(function(){function lt(ft){if(!ct){if(ct=!0,pt=ft,ft=nt(ft),ot!==void 0&&st.hasValue){var gt=st.value;if(ot(gt,ft))return ut=gt}return ut=ft}if(gt=ut,q$1(pt,ft))return gt;var vt=nt(ft);return ot!==void 0&&ot(gt,vt)?gt:(pt=ft,ut=vt)}var ct=!1,pt,ut,ht=rt===void 0?null:rt;return[function(){return lt(et())},ht===null?void 0:function(){return lt(ht())}]},[et,rt,nt,ot]);var at=r$1(_e,it[0],it[1]);return u$1(function(){st.hasValue=!0,st.value=at},[at]),w$1(at),at};(function(_e){_e.exports=withSelector_production_min})(withSelector);function defaultNoopBatch(_e){_e()}let batch=defaultNoopBatch;const setBatch=_e=>batch=_e,getBatch=()=>batch,ReactReduxContext=reactExports.createContext(null);function createListenerCollection(){const _e=getBatch();let et=null,rt=null;return{clear(){et=null,rt=null},notify(){_e(()=>{let nt=et;for(;nt;)nt.callback(),nt=nt.next})},get(){let nt=[],ot=et;for(;ot;)nt.push(ot),ot=ot.next;return nt},subscribe(nt){let ot=!0,it=rt={callback:nt,next:null,prev:rt};return it.prev?it.prev.next=it:et=it,function(){!ot||et===null||(ot=!1,it.next?it.next.prev=it.prev:rt=it.prev,it.prev?it.prev.next=it.next:et=it.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription(_e,et){let rt,nt=nullListeners;function ot(ut){return lt(),nt.subscribe(ut)}function it(){nt.notify()}function st(){pt.onStateChange&&pt.onStateChange()}function at(){return Boolean(rt)}function lt(){rt||(rt=et?et.addNestedSub(st):_e.subscribe(st),nt=createListenerCollection())}function ct(){rt&&(rt(),rt=void 0,nt.clear(),nt=nullListeners)}const pt={addNestedSub:ot,notifyNestedSubs:it,handleChangeWrapper:st,isSubscribed:at,trySubscribe:lt,tryUnsubscribe:ct,getListeners:()=>nt};return pt}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function Provider({store:_e,context:et,children:rt,serverState:nt}){const ot=reactExports.useMemo(()=>{const at=createSubscription(_e);return{store:_e,subscription:at,getServerState:nt?()=>nt:void 0}},[_e,nt]),it=reactExports.useMemo(()=>_e.getState(),[_e]);useIsomorphicLayoutEffect(()=>{const{subscription:at}=ot;return at.onStateChange=at.notifyNestedSubs,at.trySubscribe(),it!==_e.getState()&&at.notifyNestedSubs(),()=>{at.tryUnsubscribe(),at.onStateChange=void 0}},[ot,it]);const st=et||ReactReduxContext;return React$1.createElement(st.Provider,{value:ot},rt)}setBatch(reactDomExports.unstable_batchedUpdates);function n(_e){for(var et=arguments.length,rt=Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];throw Error("[Immer] minified error nr: "+_e+(rt.length?" "+rt.map(function(ot){return"'"+ot+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(_e){return!!_e&&!!_e[Q]}function t(_e){var et;return!!_e&&(function(rt){if(!rt||typeof rt!="object")return!1;var nt=Object.getPrototypeOf(rt);if(nt===null)return!0;var ot=Object.hasOwnProperty.call(nt,"constructor")&&nt.constructor;return ot===Object||typeof ot=="function"&&Function.toString.call(ot)===Z}(_e)||Array.isArray(_e)||!!_e[L]||!!(!((et=_e.constructor)===null||et===void 0)&&et[L])||s(_e)||v(_e))}function i(_e,et,rt){rt===void 0&&(rt=!1),o(_e)===0?(rt?Object.keys:nn)(_e).forEach(function(nt){rt&&typeof nt=="symbol"||et(nt,_e[nt],_e)}):_e.forEach(function(nt,ot){return et(ot,nt,_e)})}function o(_e){var et=_e[Q];return et?et.i>3?et.i-4:et.i:Array.isArray(_e)?1:s(_e)?2:v(_e)?3:0}function u(_e,et){return o(_e)===2?_e.has(et):Object.prototype.hasOwnProperty.call(_e,et)}function a(_e,et){return o(_e)===2?_e.get(et):_e[et]}function f(_e,et,rt){var nt=o(_e);nt===2?_e.set(et,rt):nt===3?_e.add(rt):_e[et]=rt}function c(_e,et){return _e===et?_e!==0||1/_e==1/et:_e!=_e&&et!=et}function s(_e){return X&&_e instanceof Map}function v(_e){return q&&_e instanceof Set}function p(_e){return _e.o||_e.t}function l(_e){if(Array.isArray(_e))return Array.prototype.slice.call(_e);var et=rn(_e);delete et[Q];for(var rt=nn(et),nt=0;nt<rt.length;nt++){var ot=rt[nt],it=et[ot];it.writable===!1&&(it.writable=!0,it.configurable=!0),(it.get||it.set)&&(et[ot]={configurable:!0,writable:!0,enumerable:it.enumerable,value:_e[ot]})}return Object.create(Object.getPrototypeOf(_e),et)}function d(_e,et){return et===void 0&&(et=!1),y(_e)||r(_e)||!t(_e)||(o(_e)>1&&(_e.set=_e.add=_e.clear=_e.delete=h),Object.freeze(_e),et&&i(_e,function(rt,nt){return d(nt,!0)},!0)),_e}function h(){n(2)}function y(_e){return _e==null||typeof _e!="object"||Object.isFrozen(_e)}function b(_e){var et=tn[_e];return et||n(18,_e),et}function m(_e,et){tn[_e]||(tn[_e]=et)}function _(){return U}function j(_e,et){et&&(b("Patches"),_e.u=[],_e.s=[],_e.v=et)}function g(_e){O(_e),_e.p.forEach(S),_e.p=null}function O(_e){_e===U&&(U=_e.l)}function w(_e){return U={p:[],l:U,h:_e,m:!0,_:0}}function S(_e){var et=_e[Q];et.i===0||et.i===1?et.j():et.g=!0}function P(_e,et){et._=et.p.length;var rt=et.p[0],nt=_e!==void 0&&_e!==rt;return et.h.O||b("ES5").S(et,_e,nt),nt?(rt[Q].P&&(g(et),n(4)),t(_e)&&(_e=M(et,_e),et.l||x(et,_e)),et.u&&b("Patches").M(rt[Q].t,_e,et.u,et.s)):_e=M(et,rt,[]),g(et),et.u&&et.v(et.u,et.s),_e!==H?_e:void 0}function M(_e,et,rt){if(y(et))return et;var nt=et[Q];if(!nt)return i(et,function(at,lt){return A(_e,nt,et,at,lt,rt)},!0),et;if(nt.A!==_e)return et;if(!nt.P)return x(_e,nt.t,!0),nt.t;if(!nt.I){nt.I=!0,nt.A._--;var ot=nt.i===4||nt.i===5?nt.o=l(nt.k):nt.o,it=ot,st=!1;nt.i===3&&(it=new Set(ot),ot.clear(),st=!0),i(it,function(at,lt){return A(_e,nt,ot,at,lt,rt,st)}),x(_e,ot,!1),rt&&_e.u&&b("Patches").N(nt,rt,_e.u,_e.s)}return nt.o}function A(_e,et,rt,nt,ot,it,st){if(r(ot)){var at=M(_e,ot,it&&et&&et.i!==3&&!u(et.R,nt)?it.concat(nt):void 0);if(f(rt,nt,at),!r(at))return;_e.m=!1}else st&&rt.add(ot);if(t(ot)&&!y(ot)){if(!_e.h.D&&_e._<1)return;M(_e,ot),et&&et.A.l||x(_e,ot)}}function x(_e,et,rt){rt===void 0&&(rt=!1),!_e.l&&_e.h.D&&_e.m&&d(et,rt)}function z(_e,et){var rt=_e[Q];return(rt?p(rt):_e)[et]}function I(_e,et){if(et in _e)for(var rt=Object.getPrototypeOf(_e);rt;){var nt=Object.getOwnPropertyDescriptor(rt,et);if(nt)return nt;rt=Object.getPrototypeOf(rt)}}function k(_e){_e.P||(_e.P=!0,_e.l&&k(_e.l))}function E(_e){_e.o||(_e.o=l(_e.t))}function N(_e,et,rt){var nt=s(et)?b("MapSet").F(et,rt):v(et)?b("MapSet").T(et,rt):_e.O?function(ot,it){var st=Array.isArray(ot),at={i:st?1:0,A:it?it.A:_(),P:!1,I:!1,R:{},l:it,t:ot,k:null,o:null,j:null,C:!1},lt=at,ct=en;st&&(lt=[at],ct=on);var pt=Proxy.revocable(lt,ct),ut=pt.revoke,ht=pt.proxy;return at.k=ht,at.j=ut,ht}(et,rt):b("ES5").J(et,rt);return(rt?rt.A:_()).p.push(nt),nt}function R(_e){return r(_e)||n(22,_e),function et(rt){if(!t(rt))return rt;var nt,ot=rt[Q],it=o(rt);if(ot){if(!ot.P&&(ot.i<4||!b("ES5").K(ot)))return ot.t;ot.I=!0,nt=D(rt,it),ot.I=!1}else nt=D(rt,it);return i(nt,function(st,at){ot&&a(ot.t,st)===at||f(nt,st,et(at))}),it===3?new Set(nt):nt}(_e)}function D(_e,et){switch(et){case 2:return new Map(_e);case 3:return Array.from(_e)}return l(_e)}function F(){function _e(it,st){var at=ot[it];return at?at.enumerable=st:ot[it]=at={configurable:!0,enumerable:st,get:function(){var lt=this[Q];return en.get(lt,it)},set:function(lt){var ct=this[Q];en.set(ct,it,lt)}},at}function et(it){for(var st=it.length-1;st>=0;st--){var at=it[st][Q];if(!at.P)switch(at.i){case 5:nt(at)&&k(at);break;case 4:rt(at)&&k(at)}}}function rt(it){for(var st=it.t,at=it.k,lt=nn(at),ct=lt.length-1;ct>=0;ct--){var pt=lt[ct];if(pt!==Q){var ut=st[pt];if(ut===void 0&&!u(st,pt))return!0;var ht=at[pt],ft=ht&&ht[Q];if(ft?ft.t!==ut:!c(ht,ut))return!0}}var gt=!!st[Q];return lt.length!==nn(st).length+(gt?0:1)}function nt(it){var st=it.k;if(st.length!==it.t.length)return!0;var at=Object.getOwnPropertyDescriptor(st,st.length-1);if(at&&!at.get)return!0;for(var lt=0;lt<st.length;lt++)if(!st.hasOwnProperty(lt))return!0;return!1}var ot={};m("ES5",{J:function(it,st){var at=Array.isArray(it),lt=function(pt,ut){if(pt){for(var ht=Array(ut.length),ft=0;ft<ut.length;ft++)Object.defineProperty(ht,""+ft,_e(ft,!0));return ht}var gt=rn(ut);delete gt[Q];for(var vt=nn(gt),yt=0;yt<vt.length;yt++){var mt=vt[yt];gt[mt]=_e(mt,pt||!!gt[mt].enumerable)}return Object.create(Object.getPrototypeOf(ut),gt)}(at,it),ct={i:at?5:4,A:st?st.A:_(),P:!1,I:!1,R:{},l:st,t:it,k:lt,o:null,g:!1,C:!1};return Object.defineProperty(lt,Q,{value:ct,writable:!0}),lt},S:function(it,st,at){at?r(st)&&st[Q].A===it&&et(it.p):(it.u&&function lt(ct){if(ct&&typeof ct=="object"){var pt=ct[Q];if(pt){var ut=pt.t,ht=pt.k,ft=pt.R,gt=pt.i;if(gt===4)i(ht,function(bt){bt!==Q&&(ut[bt]!==void 0||u(ut,bt)?ft[bt]||lt(ht[bt]):(ft[bt]=!0,k(pt)))}),i(ut,function(bt){ht[bt]!==void 0||u(ht,bt)||(ft[bt]=!1,k(pt))});else if(gt===5){if(nt(pt)&&(k(pt),ft.length=!0),ht.length<ut.length)for(var vt=ht.length;vt<ut.length;vt++)ft[vt]=!1;else for(var yt=ut.length;yt<ht.length;yt++)ft[yt]=!0;for(var mt=Math.min(ht.length,ut.length),Et=0;Et<mt;Et++)ht.hasOwnProperty(Et)||(ft[Et]=!0),ft[Et]===void 0&&lt(ht[Et])}}}}(it.p[0]),et(it.p))},K:function(it){return it.i===4?rt(it):nt(it)}})}var G,U,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X=typeof Map<"u",q=typeof Set<"u",B=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Z=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(_e){return Object.getOwnPropertyNames(_e).concat(Object.getOwnPropertySymbols(_e))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(_e){var et={};return nn(_e).forEach(function(rt){et[rt]=Object.getOwnPropertyDescriptor(_e,rt)}),et},tn={},en={get:function(_e,et){if(et===Q)return _e;var rt=p(_e);if(!u(rt,et))return function(ot,it,st){var at,lt=I(it,st);return lt?"value"in lt?lt.value:(at=lt.get)===null||at===void 0?void 0:at.call(ot.k):void 0}(_e,rt,et);var nt=rt[et];return _e.I||!t(nt)?nt:nt===z(_e.t,et)?(E(_e),_e.o[et]=N(_e.A.h,nt,_e)):nt},has:function(_e,et){return et in p(_e)},ownKeys:function(_e){return Reflect.ownKeys(p(_e))},set:function(_e,et,rt){var nt=I(p(_e),et);if(nt!=null&&nt.set)return nt.set.call(_e.k,rt),!0;if(!_e.P){var ot=z(p(_e),et),it=ot==null?void 0:ot[Q];if(it&&it.t===rt)return _e.o[et]=rt,_e.R[et]=!1,!0;if(c(rt,ot)&&(rt!==void 0||u(_e.t,et)))return!0;E(_e),k(_e)}return _e.o[et]===rt&&(rt!==void 0||et in _e.o)||Number.isNaN(rt)&&Number.isNaN(_e.o[et])||(_e.o[et]=rt,_e.R[et]=!0),!0},deleteProperty:function(_e,et){return z(_e.t,et)!==void 0||et in _e.t?(_e.R[et]=!1,E(_e),k(_e)):delete _e.R[et],_e.o&&delete _e.o[et],!0},getOwnPropertyDescriptor:function(_e,et){var rt=p(_e),nt=Reflect.getOwnPropertyDescriptor(rt,et);return nt&&{writable:!0,configurable:_e.i!==1||et!=="length",enumerable:nt.enumerable,value:rt[et]}},defineProperty:function(){n(11)},getPrototypeOf:function(_e){return Object.getPrototypeOf(_e.t)},setPrototypeOf:function(){n(12)}},on={};i(en,function(_e,et){on[_e]=function(){return arguments[0]=arguments[0][0],et.apply(this,arguments)}}),on.deleteProperty=function(_e,et){return on.set.call(this,_e,et,void 0)},on.set=function(_e,et,rt){return en.set.call(this,_e[0],et,rt,_e[0])};var un=function(){function _e(rt){var nt=this;this.O=B,this.D=!0,this.produce=function(ot,it,st){if(typeof ot=="function"&&typeof it!="function"){var at=it;it=ot;var lt=nt;return function(vt){var yt=this;vt===void 0&&(vt=at);for(var mt=arguments.length,Et=Array(mt>1?mt-1:0),bt=1;bt<mt;bt++)Et[bt-1]=arguments[bt];return lt.produce(vt,function(Ct){var Tt;return(Tt=it).call.apply(Tt,[yt,Ct].concat(Et))})}}var ct;if(typeof it!="function"&&n(6),st!==void 0&&typeof st!="function"&&n(7),t(ot)){var pt=w(nt),ut=N(nt,ot,void 0),ht=!0;try{ct=it(ut),ht=!1}finally{ht?g(pt):O(pt)}return typeof Promise<"u"&&ct instanceof Promise?ct.then(function(vt){return j(pt,st),P(vt,pt)},function(vt){throw g(pt),vt}):(j(pt,st),P(ct,pt))}if(!ot||typeof ot!="object"){if((ct=it(ot))===void 0&&(ct=ot),ct===H&&(ct=void 0),nt.D&&d(ct,!0),st){var ft=[],gt=[];b("Patches").M(ot,ct,ft,gt),st(ft,gt)}return ct}n(21,ot)},this.produceWithPatches=function(ot,it){if(typeof ot=="function")return function(ct){for(var pt=arguments.length,ut=Array(pt>1?pt-1:0),ht=1;ht<pt;ht++)ut[ht-1]=arguments[ht];return nt.produceWithPatches(ct,function(ft){return ot.apply(void 0,[ft].concat(ut))})};var st,at,lt=nt.produce(ot,it,function(ct,pt){st=ct,at=pt});return typeof Promise<"u"&&lt instanceof Promise?lt.then(function(ct){return[ct,st,at]}):[lt,st,at]},typeof(rt==null?void 0:rt.useProxies)=="boolean"&&this.setUseProxies(rt.useProxies),typeof(rt==null?void 0:rt.autoFreeze)=="boolean"&&this.setAutoFreeze(rt.autoFreeze)}var et=_e.prototype;return et.createDraft=function(rt){t(rt)||n(8),r(rt)&&(rt=R(rt));var nt=w(this),ot=N(this,rt,void 0);return ot[Q].C=!0,O(nt),ot},et.finishDraft=function(rt,nt){var ot=rt&&rt[Q],it=ot.A;return j(it,nt),P(void 0,it)},et.setAutoFreeze=function(rt){this.D=rt},et.setUseProxies=function(rt){rt&&!B&&n(20),this.O=rt},et.applyPatches=function(rt,nt){var ot;for(ot=nt.length-1;ot>=0;ot--){var it=nt[ot];if(it.path.length===0&&it.op==="replace"){rt=it.value;break}}ot>-1&&(nt=nt.slice(ot+1));var st=b("Patches").$;return r(rt)?st(rt,nt):this.produce(rt,function(at){return st(at,nt)})},_e}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _defineProperty(_e,et,rt){return et=_toPropertyKey(et),et in _e?Object.defineProperty(_e,et,{value:rt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=rt,_e}function ownKeys(_e,et){var rt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);et&&(nt=nt.filter(function(ot){return Object.getOwnPropertyDescriptor(_e,ot).enumerable})),rt.push.apply(rt,nt)}return rt}function _objectSpread2(_e){for(var et=1;et<arguments.length;et++){var rt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys(Object(rt),!0).forEach(function(nt){_defineProperty(_e,nt,rt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(rt)):ownKeys(Object(rt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(rt,nt))})}return _e}function formatProdErrorMessage(_e){return"Minified Redux error #"+_e+"; visit https://redux.js.org/Errors?code="+_e+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function _e(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function _e(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$1(_e){if(typeof _e!="object"||_e===null)return!1;for(var et=_e;Object.getPrototypeOf(et)!==null;)et=Object.getPrototypeOf(et);return Object.getPrototypeOf(_e)===et}function createStore(_e,et,rt){var nt;if(typeof et=="function"&&typeof rt=="function"||typeof rt=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof et=="function"&&typeof rt>"u"&&(rt=et,et=void 0),typeof rt<"u"){if(typeof rt!="function")throw new Error(formatProdErrorMessage(1));return rt(createStore)(_e,et)}if(typeof _e!="function")throw new Error(formatProdErrorMessage(2));var ot=_e,it=et,st=[],at=st,lt=!1;function ct(){at===st&&(at=st.slice())}function pt(){if(lt)throw new Error(formatProdErrorMessage(3));return it}function ut(vt){if(typeof vt!="function")throw new Error(formatProdErrorMessage(4));if(lt)throw new Error(formatProdErrorMessage(5));var yt=!0;return ct(),at.push(vt),function(){if(yt){if(lt)throw new Error(formatProdErrorMessage(6));yt=!1,ct();var Et=at.indexOf(vt);at.splice(Et,1),st=null}}}function ht(vt){if(!isPlainObject$1(vt))throw new Error(formatProdErrorMessage(7));if(typeof vt.type>"u")throw new Error(formatProdErrorMessage(8));if(lt)throw new Error(formatProdErrorMessage(9));try{lt=!0,it=ot(it,vt)}finally{lt=!1}for(var yt=st=at,mt=0;mt<yt.length;mt++){var Et=yt[mt];Et()}return vt}function ft(vt){if(typeof vt!="function")throw new Error(formatProdErrorMessage(10));ot=vt,ht({type:ActionTypes.REPLACE})}function gt(){var vt,yt=ut;return vt={subscribe:function(Et){if(typeof Et!="object"||Et===null)throw new Error(formatProdErrorMessage(11));function bt(){Et.next&&Et.next(pt())}bt();var Ct=yt(bt);return{unsubscribe:Ct}}},vt[$$observable]=function(){return this},vt}return ht({type:ActionTypes.INIT}),nt={dispatch:ht,subscribe:ut,getState:pt,replaceReducer:ft},nt[$$observable]=gt,nt}function assertReducerShape(_e){Object.keys(_e).forEach(function(et){var rt=_e[et],nt=rt(void 0,{type:ActionTypes.INIT});if(typeof nt>"u")throw new Error(formatProdErrorMessage(12));if(typeof rt(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(_e){for(var et=Object.keys(_e),rt={},nt=0;nt<et.length;nt++){var ot=et[nt];typeof _e[ot]=="function"&&(rt[ot]=_e[ot])}var it=Object.keys(rt),st;try{assertReducerShape(rt)}catch(at){st=at}return function(lt,ct){if(lt===void 0&&(lt={}),st)throw st;for(var pt=!1,ut={},ht=0;ht<it.length;ht++){var ft=it[ht],gt=rt[ft],vt=lt[ft],yt=gt(vt,ct);if(typeof yt>"u")throw ct&&ct.type,new Error(formatProdErrorMessage(14));ut[ft]=yt,pt=pt||yt!==vt}return pt=pt||it.length!==Object.keys(lt).length,pt?ut:lt}}function compose(){for(var _e=arguments.length,et=new Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt];return et.length===0?function(nt){return nt}:et.length===1?et[0]:et.reduce(function(nt,ot){return function(){return nt(ot.apply(void 0,arguments))}})}function applyMiddleware(){for(var _e=arguments.length,et=new Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt];return function(nt){return function(){var ot=nt.apply(void 0,arguments),it=function(){throw new Error(formatProdErrorMessage(15))},st={getState:ot.getState,dispatch:function(){return it.apply(void 0,arguments)}},at=et.map(function(lt){return lt(st)});return it=compose.apply(void 0,at)(ot.dispatch),_objectSpread2(_objectSpread2({},ot),{},{dispatch:it})}}}function createThunkMiddleware(_e){var et=function(nt){var ot=nt.dispatch,it=nt.getState;return function(st){return function(at){return typeof at=="function"?at(ot,it,_e):st(at)}}};return et}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;const thunkMiddleware=thunk;var __extends=globalThis&&globalThis.__extends||function(){var _e=function(et,rt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,ot){nt.__proto__=ot}||function(nt,ot){for(var it in ot)Object.prototype.hasOwnProperty.call(ot,it)&&(nt[it]=ot[it])},_e(et,rt)};return function(et,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");_e(et,rt);function nt(){this.constructor=et}et.prototype=rt===null?Object.create(rt):(nt.prototype=rt.prototype,new nt)}}(),__generator=globalThis&&globalThis.__generator||function(_e,et){var rt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,ot,it,st;return st={next:at(0),throw:at(1),return:at(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function at(ct){return function(pt){return lt([ct,pt])}}function lt(ct){if(nt)throw new TypeError("Generator is already executing.");for(;rt;)try{if(nt=1,ot&&(it=ct[0]&2?ot.return:ct[0]?ot.throw||((it=ot.return)&&it.call(ot),0):ot.next)&&!(it=it.call(ot,ct[1])).done)return it;switch(ot=0,it&&(ct=[ct[0]&2,it.value]),ct[0]){case 0:case 1:it=ct;break;case 4:return rt.label++,{value:ct[1],done:!1};case 5:rt.label++,ot=ct[1],ct=[0];continue;case 7:ct=rt.ops.pop(),rt.trys.pop();continue;default:if(it=rt.trys,!(it=it.length>0&&it[it.length-1])&&(ct[0]===6||ct[0]===2)){rt=0;continue}if(ct[0]===3&&(!it||ct[1]>it[0]&&ct[1]<it[3])){rt.label=ct[1];break}if(ct[0]===6&&rt.label<it[1]){rt.label=it[1],it=ct;break}if(it&&rt.label<it[2]){rt.label=it[2],rt.ops.push(ct);break}it[2]&&rt.ops.pop(),rt.trys.pop();continue}ct=et.call(_e,rt)}catch(pt){ct=[6,pt],ot=0}finally{nt=it=0}if(ct[0]&5)throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}},__spreadArray=globalThis&&globalThis.__spreadArray||function(_e,et){for(var rt=0,nt=et.length,ot=_e.length;rt<nt;rt++,ot++)_e[ot]=et[rt];return _e},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(_e,et,rt){return et in _e?__defProp(_e,et,{enumerable:!0,configurable:!0,writable:!0,value:rt}):_e[et]=rt},__spreadValues=function(_e,et){for(var rt in et||(et={}))__hasOwnProp.call(et,rt)&&__defNormalProp(_e,rt,et[rt]);if(__getOwnPropSymbols)for(var nt=0,ot=__getOwnPropSymbols(et);nt<ot.length;nt++){var rt=ot[nt];__propIsEnum.call(et,rt)&&__defNormalProp(_e,rt,et[rt])}return _e},__spreadProps=function(_e,et){return __defProps(_e,__getOwnPropDescs(et))},__async=function(_e,et,rt){return new Promise(function(nt,ot){var it=function(lt){try{at(rt.next(lt))}catch(ct){ot(ct)}},st=function(lt){try{at(rt.throw(lt))}catch(ct){ot(ct)}},at=function(lt){return lt.done?nt(lt.value):Promise.resolve(lt.value).then(it,st)};at((rt=rt.apply(_e,et)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function isPlainObject(_e){if(typeof _e!="object"||_e===null)return!1;var et=Object.getPrototypeOf(_e);if(et===null)return!0;for(var rt=et;Object.getPrototypeOf(rt)!==null;)rt=Object.getPrototypeOf(rt);return et===rt}var MiddlewareArray=function(_e){__extends(et,_e);function et(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];var ot=_e.apply(this,rt)||this;return Object.setPrototypeOf(ot,et.prototype),ot}return Object.defineProperty(et,Symbol.species,{get:function(){return et},enumerable:!1,configurable:!0}),et.prototype.concat=function(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];return _e.prototype.concat.apply(this,rt)},et.prototype.prepend=function(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];return rt.length===1&&Array.isArray(rt[0])?new(et.bind.apply(et,__spreadArray([void 0],rt[0].concat(this)))):new(et.bind.apply(et,__spreadArray([void 0],rt.concat(this))))},et}(Array),EnhancerArray=function(_e){__extends(et,_e);function et(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];var ot=_e.apply(this,rt)||this;return Object.setPrototypeOf(ot,et.prototype),ot}return Object.defineProperty(et,Symbol.species,{get:function(){return et},enumerable:!1,configurable:!0}),et.prototype.concat=function(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];return _e.prototype.concat.apply(this,rt)},et.prototype.prepend=function(){for(var rt=[],nt=0;nt<arguments.length;nt++)rt[nt]=arguments[nt];return rt.length===1&&Array.isArray(rt[0])?new(et.bind.apply(et,__spreadArray([void 0],rt[0].concat(this)))):new(et.bind.apply(et,__spreadArray([void 0],rt.concat(this))))},et}(Array);function freezeDraftable(_e){return t(_e)?fn(_e,function(){}):_e}function isBoolean(_e){return typeof _e=="boolean"}function curryGetDefaultMiddleware(){return function(et){return getDefaultMiddleware(et)}}function getDefaultMiddleware(_e){_e===void 0&&(_e={});var et=_e.thunk,rt=et===void 0?!0:et;_e.immutableCheck,_e.serializableCheck;var nt=new MiddlewareArray;return rt&&(isBoolean(rt)?nt.push(thunkMiddleware):nt.push(thunkMiddleware.withExtraArgument(rt.extraArgument))),nt}var IS_PRODUCTION=!0;function configureStore(_e){var et=curryGetDefaultMiddleware(),rt=_e||{},nt=rt.reducer,ot=nt===void 0?void 0:nt,it=rt.middleware,st=it===void 0?et():it,at=rt.devTools,lt=at===void 0?!0:at,ct=rt.preloadedState,pt=ct===void 0?void 0:ct,ut=rt.enhancers,ht=ut===void 0?void 0:ut,ft;if(typeof ot=="function")ft=ot;else if(isPlainObject(ot))ft=combineReducers(ot);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var gt=st;typeof gt=="function"&&(gt=gt(et));var vt=applyMiddleware.apply(void 0,gt),yt=compose;lt&&(yt=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof lt=="object"&&lt)));var mt=new EnhancerArray(vt),Et=mt;Array.isArray(ht)?Et=__spreadArray([vt],ht):typeof ht=="function"&&(Et=ht(mt));var bt=yt.apply(void 0,Et);return createStore(ft,pt,bt)}function createAction(_e,et){function rt(){for(var nt=[],ot=0;ot<arguments.length;ot++)nt[ot]=arguments[ot];if(et){var it=et.apply(void 0,nt);if(!it)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:_e,payload:it.payload},"meta"in it&&{meta:it.meta}),"error"in it&&{error:it.error})}return{type:_e,payload:nt[0]}}return rt.toString=function(){return""+_e},rt.type=_e,rt.match=function(nt){return nt.type===_e},rt}function executeReducerBuilderCallback(_e){var et={},rt=[],nt,ot={addCase:function(it,st){var at=typeof it=="string"?it:it.type;if(at in et)throw new Error("addCase cannot be called with two reducers for the same action type");return et[at]=st,ot},addMatcher:function(it,st){return rt.push({matcher:it,reducer:st}),ot},addDefaultCase:function(it){return nt=it,ot}};return _e(ot),[et,rt,nt]}function isStateFunction(_e){return typeof _e=="function"}function createReducer(_e,et,rt,nt){rt===void 0&&(rt=[]);var ot=typeof et=="function"?executeReducerBuilderCallback(et):[et,rt,nt],it=ot[0],st=ot[1],at=ot[2],lt;if(isStateFunction(_e))lt=function(){return freezeDraftable(_e())};else{var ct=freezeDraftable(_e);lt=function(){return ct}}function pt(ut,ht){ut===void 0&&(ut=lt());var ft=__spreadArray([it[ht.type]],st.filter(function(gt){var vt=gt.matcher;return vt(ht)}).map(function(gt){var vt=gt.reducer;return vt}));return ft.filter(function(gt){return!!gt}).length===0&&(ft=[at]),ft.reduce(function(gt,vt){if(vt)if(r(gt)){var yt=gt,mt=vt(yt,ht);return mt===void 0?gt:mt}else{if(t(gt))return fn(gt,function(Et){return vt(Et,ht)});var mt=vt(gt,ht);if(mt===void 0){if(gt===null)return gt;throw Error("A case reducer on a non-draftable value must not return undefined")}return mt}return gt},ut)}return pt.getInitialState=lt,pt}function getType2(_e,et){return _e+"/"+et}function createSlice(_e){var et=_e.name;if(!et)throw new Error("`name` is a required option for createSlice");typeof process<"u";var rt=typeof _e.initialState=="function"?_e.initialState:freezeDraftable(_e.initialState),nt=_e.reducers||{},ot=Object.keys(nt),it={},st={},at={};ot.forEach(function(pt){var ut=nt[pt],ht=getType2(et,pt),ft,gt;"reducer"in ut?(ft=ut.reducer,gt=ut.prepare):ft=ut,it[pt]=ft,st[ht]=ft,at[pt]=gt?createAction(ht,gt):createAction(ht)});function lt(){var pt=typeof _e.extraReducers=="function"?executeReducerBuilderCallback(_e.extraReducers):[_e.extraReducers],ut=pt[0],ht=ut===void 0?{}:ut,ft=pt[1],gt=ft===void 0?[]:ft,vt=pt[2],yt=vt===void 0?void 0:vt,mt=__spreadValues(__spreadValues({},ht),st);return createReducer(rt,function(Et){for(var bt in mt)Et.addCase(bt,mt[bt]);for(var Ct=0,Tt=gt;Ct<Tt.length;Ct++){var wt=Tt[Ct];Et.addMatcher(wt.matcher,wt.reducer)}yt&&Et.addDefaultCase(yt)})}var ct;return{name:et,reducer:function(pt,ut){return ct||(ct=lt()),ct(pt,ut)},actions:at,caseReducers:it,getInitialState:function(){return ct||(ct=lt()),ct.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function(_e){_e===void 0&&(_e=21);for(var et="",rt=_e;rt--;)et+=urlAlphabet[Math.random()*64|0];return et},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function _e(et,rt){this.payload=et,this.meta=rt}return _e}(),FulfillWithMeta=function(){function _e(et,rt){this.payload=et,this.meta=rt}return _e}(),miniSerializeError=function(_e){if(typeof _e=="object"&&_e!==null){for(var et={},rt=0,nt=commonProperties;rt<nt.length;rt++){var ot=nt[rt];typeof _e[ot]=="string"&&(et[ot]=_e[ot])}return et}return{message:String(_e)}};(function(){function _e(et,rt,nt){var ot=createAction(et+"/fulfilled",function(ct,pt,ut,ht){return{payload:ct,meta:__spreadProps(__spreadValues({},ht||{}),{arg:ut,requestId:pt,requestStatus:"fulfilled"})}}),it=createAction(et+"/pending",function(ct,pt,ut){return{payload:void 0,meta:__spreadProps(__spreadValues({},ut||{}),{arg:pt,requestId:ct,requestStatus:"pending"})}}),st=createAction(et+"/rejected",function(ct,pt,ut,ht,ft){return{payload:ht,error:(nt&&nt.serializeError||miniSerializeError)(ct||"Rejected"),meta:__spreadProps(__spreadValues({},ft||{}),{arg:ut,requestId:pt,rejectedWithValue:!!ht,requestStatus:"rejected",aborted:(ct==null?void 0:ct.name)==="AbortError",condition:(ct==null?void 0:ct.name)==="ConditionError"})}}),at=typeof AbortController<"u"?AbortController:function(){function ct(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return ct.prototype.abort=function(){},ct}();function lt(ct){return function(pt,ut,ht){var ft=nt!=null&&nt.idGenerator?nt.idGenerator(ct):nanoid(),gt=new at,vt;function yt(Et){vt=Et,gt.abort()}var mt=function(){return __async(this,null,function(){var Et,bt,Ct,Tt,wt,Rt,It;return __generator(this,function(St){switch(St.label){case 0:return St.trys.push([0,4,,5]),Tt=(Et=nt==null?void 0:nt.condition)==null?void 0:Et.call(nt,ct,{getState:ut,extra:ht}),isThenable(Tt)?[4,Tt]:[3,2];case 1:Tt=St.sent(),St.label=2;case 2:if(Tt===!1||gt.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return wt=new Promise(function(Pt,Ot){return gt.signal.addEventListener("abort",function(){return Ot({name:"AbortError",message:vt||"Aborted"})})}),pt(it(ft,ct,(bt=nt==null?void 0:nt.getPendingMeta)==null?void 0:bt.call(nt,{requestId:ft,arg:ct},{getState:ut,extra:ht}))),[4,Promise.race([wt,Promise.resolve(rt(ct,{dispatch:pt,getState:ut,extra:ht,requestId:ft,signal:gt.signal,abort:yt,rejectWithValue:function(Pt,Ot){return new RejectWithValue(Pt,Ot)},fulfillWithValue:function(Pt,Ot){return new FulfillWithMeta(Pt,Ot)}})).then(function(Pt){if(Pt instanceof RejectWithValue)throw Pt;return Pt instanceof FulfillWithMeta?ot(Pt.payload,ft,ct,Pt.meta):ot(Pt,ft,ct)})])];case 3:return Ct=St.sent(),[3,5];case 4:return Rt=St.sent(),Ct=Rt instanceof RejectWithValue?st(null,ft,ct,Rt.payload,Rt.meta):st(Rt,ft,ct),[3,5];case 5:return It=nt&&!nt.dispatchConditionRejection&&st.match(Ct)&&Ct.meta.condition,It||pt(Ct),[2,Ct]}})})}();return Object.assign(mt,{abort:yt,requestId:ft,arg:ct,unwrap:function(){return mt.then(unwrapResult)}})}}return Object.assign(lt,{pending:it,rejected:st,fulfilled:ot,typePrefix:et})}return _e.withTypes=function(){return _e},_e})();function unwrapResult(_e){if(_e.meta&&_e.meta.rejectedWithValue)throw _e.payload;if(_e.error)throw _e.error;return _e.payload}function isThenable(_e){return _e!==null&&typeof _e=="object"&&typeof _e.then=="function"}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");var promise;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F();const initialState={data:null},appSlice=createSlice({name:"homeSlice",initialState,reducers:{updateData:(_e,et)=>{_e.data=et.data}}}),bootstrapSlice=appSlice.reducer,rootReducer=combineReducers({bootstrapSlice}),store=configureStore({reducer:rootReducer}),index="";client.createRoot(document.getElementById("root")).render(jsx(Provider,{store,children:jsx(BrowserRouter,{children:jsx(App,{})})}));
