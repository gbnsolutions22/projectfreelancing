/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={6751:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ne});var n=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),o=Math.abs,i=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,r){return e.replace(t,r)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,r){return e.slice(t,r)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var g=1,m=1,v=0,_=0,y=0,b="";function E(e,t,r,n,o,i,s){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:g,column:m,length:s,return:""}}function S(e,t){return s(E("",null,null,"",null,null,0),e,{length:-e.length},t)}function C(){return y=_>0?u(b,--_):0,m--,10===y&&(m=1,g--),y}function T(){return y=_<v?u(b,_++):0,m++,10===y&&(m=1,g++),y}function w(){return u(b,_)}function R(){return _}function k(e,t){return d(b,e,t)}function O(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return g=m=1,v=h(b=e),_=0,[]}function P(e){return b="",e}function A(e){return a(k(_-1,M(91===e?e+2:40===e?e+1:e)))}function N(e){for(;(y=w())&&y<33;)T();return O(e)>2||O(y)>3?"":" "}function L(e,t){for(;--t&&T()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return k(e,R()+(t<6&&32==w()&&32==T()))}function M(e){for(;T();)switch(y){case e:return _;case 34:case 39:34!==e&&39!==e&&M(y);break;case 40:41===e&&M(e);break;case 92:T()}return _}function x(e,t){for(;T()&&e+y!==57&&(e+y!==84||47!==w()););return"/*"+k(t,_-1)+"*"+i(47===e?e:T())}function D(e){for(;!O(w());)T();return k(e,_)}var B="-ms-",U="-moz-",Z="-webkit-",j="comm",H="rule",F="decl",z="@keyframes";function G(e,t){for(var r="",n=p(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function q(e,t,r,n){switch(e.type){case"@import":case F:return e.return=e.return||e.value;case j:return"";case z:return e.return=e.value+"{"+G(e.children,n)+"}";case H:e.value=e.props.join(",")}return h(r=G(e.children,n))?e.return=e.value+"{"+r+"}":""}function V(e){return P(W("",null,null,null,[""],e=I(e),0,[0],e))}function W(e,t,r,n,o,s,a,d,p){for(var g=0,m=0,v=a,_=0,y=0,b=0,E=1,S=1,k=1,O=0,I="",P=o,M=s,B=n,U=I;S;)switch(b=O,O=T()){case 40:if(108!=b&&58==u(U,v-1)){-1!=c(U+=l(A(O),"&","&\f"),"&\f")&&(k=-1);break}case 34:case 39:case 91:U+=A(O);break;case 9:case 10:case 13:case 32:U+=N(b);break;case 92:U+=L(R()-1,7);continue;case 47:switch(w()){case 42:case 47:f(K(x(T(),R()),t,r),p);break;default:U+="/"}break;case 123*E:d[g++]=h(U)*k;case 125*E:case 59:case 0:switch(O){case 0:case 125:S=0;case 59+m:y>0&&h(U)-v&&f(y>32?$(U+";",n,r,v-1):$(l(U," ","")+";",n,r,v-2),p);break;case 59:U+=";";default:if(f(B=Y(U,t,r,g,m,o,d,I,P=[],M=[],v),s),123===O)if(0===m)W(U,t,B,B,P,s,v,d,M);else switch(99===_&&110===u(U,3)?100:_){case 100:case 109:case 115:W(e,B,B,n&&f(Y(e,B,B,0,0,o,d,I,o,P=[],v),M),o,M,v,d,n?P:M);break;default:W(U,B,B,B,[""],M,0,d,M)}}g=m=y=0,E=k=1,I=U="",v=a;break;case 58:v=1+h(U),y=b;default:if(E<1)if(123==O)--E;else if(125==O&&0==E++&&125==C())continue;switch(U+=i(O),O*E){case 38:k=m>0?1:(U+="\f",-1);break;case 44:d[g++]=(h(U)-1)*k,k=1;break;case 64:45===w()&&(U+=A(T())),_=w(),m=v=h(I=U+=D(R())),O++;break;case 45:45===b&&2==h(U)&&(E=0)}}return s}function Y(e,t,r,n,i,s,c,u,h,f,g){for(var m=i-1,v=0===i?s:[""],_=p(v),y=0,b=0,S=0;y<n;++y)for(var C=0,T=d(e,m+1,m=o(b=c[y])),w=e;C<_;++C)(w=a(b>0?v[C]+" "+T:l(T,/&\f/g,v[C])))&&(h[S++]=w);return E(e,t,r,0===i?H:u,h,f,g)}function K(e,t,r){return E(e,t,r,j,i(y),d(e,2,-2),0)}function $(e,t,r,n){return E(e,t,r,F,d(e,0,n),d(e,n+1,-1),n)}var Q=function(e,t,r){for(var n=0,o=0;n=o,o=w(),38===n&&12===o&&(t[r]=1),!O(o);)T();return k(e,_)},X=new WeakMap,J=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||X.get(r))&&!n){X.set(e,!0);for(var o=[],s=function(e,t){return P(function(e,t){var r=-1,n=44;do{switch(O(n)){case 0:38===n&&12===w()&&(t[r]=1),e[r]+=Q(_-1,t,r);break;case 2:e[r]+=A(n);break;case 4:if(44===n){e[++r]=58===w()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=i(n)}}while(n=T());return e}(I(e),t))}(t,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},ee=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function te(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+U+e+B+e+e;case 6828:case 4268:return Z+e+B+e+e;case 6165:return Z+e+B+"flex-"+e+e;case 5187:return Z+e+l(e,/(\w+).+(:[^]+)/,Z+"box-$1$2"+B+"flex-$1$2")+e;case 5443:return Z+e+B+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return Z+e+B+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+B+l(e,"shrink","negative")+e;case 5292:return Z+e+B+l(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+l(e,"-grow","")+Z+e+B+l(e,"grow","positive")+e;case 4554:return Z+l(e,/([^-])(transform)/g,"$1"+Z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+B+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+U+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?te(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+Z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(45===u(e,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+B+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return Z+e+B+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+B+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+B+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+B+e+e}return e}var re=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case F:e.return=te(e.value,e.length);break;case z:return G([S(e,{value:l(e.value,"@","@"+Z)})],n);case H:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return G([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return G([S(e,{props:[l(t,/:(plac\w+)/,":"+Z+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,B+"input-$1")]})],n)}return""}))}}];const ne=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var o,i,s=e.stylisPlugins||re,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;l.push(e)}));var c,u,d,h,f=[q,(h=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],g=(u=[J,ee].concat(s,f),d=p(u),function(e,t,r,n){for(var o="",i=0;i<d;i++)o+=u[i](e,t,r,n)||"";return o});i=function(e,t,r,n){c=r,G(V(e?e+"{"+t.styles+"}":t.styles),g),n&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new n({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return m.sheet.hydrate(l),m}},5042:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},916:(e,t,r)=>{"use strict";r.d(t,{T:()=>c,a:()=>d,w:()=>l});var n=r(7294),o=r(6751),i=r(7462);const s=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}};r(6797),r(7278);var a=(0,n.createContext)("undefined"!=typeof HTMLElement?(0,o.Z)({key:"css"}):null);a.Provider;var l=function(e){return(0,n.forwardRef)((function(t,r){var o=(0,n.useContext)(a);return e(t,o,r)}))},c=(0,n.createContext)({}),u=s((function(e){return s((function(t){return function(e,t){return"function"==typeof t?t(e):(0,i.Z)({},e,t)}(e,t)}))})),d=function(e){var t=(0,n.useContext)(c);return e.theme!==t&&(t=u(t)(e.theme)),(0,n.createElement)(c.Provider,{value:t},e.children)}},6797:(e,t,r)=>{"use strict";r.d(t,{O:()=>g});const n=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},o={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var i=r(5042),s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!=typeof e},u=(0,i.Z)((function(e){return l(e)?e:e.replace(s,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(a,(function(e,t,r){return p={name:t,styles:r,next:p},t}))}return 1===o[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"};function h(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return p={name:r.name,styles:r.styles,next:p},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)p={name:n.name,styles:n.styles,next:p},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=h(e,t,r[o])+";";else for(var i in r){var s=r[i];if("object"!=typeof s)null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":c(s)&&(n+=u(i)+":"+d(i,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=h(e,t,s);switch(i){case"animation":case"animationName":n+=u(i)+":"+a+";";break;default:n+=i+"{"+a+"}"}}else for(var l=0;l<s.length;l++)c(s[l])&&(n+=u(i)+":"+d(i,s[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var o=p,i=r(e);return p=o,h(e,t,i)}}if(null==t)return r;var s=t[r];return void 0!==s?s:r}var p,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g,g=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,i="";p=void 0;var s=e[0];null==s||void 0===s.raw?(o=!1,i+=h(r,t,s)):i+=s[0];for(var a=1;a<e.length;a++)i+=h(r,t,e[a]),o&&(i+=s[a]);f.lastIndex=0;for(var l,c="";null!==(l=f.exec(i));)c+="-"+l[1];return{name:n(i)+c,styles:i,next:p}}},932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(7294),o=r(7462),i=r(5042),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const a=(0,i.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var l=r(916),c=r(444),u=r(6797),d=r(7278),h=a,p=function(e){return"theme"!==e},f=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?h:p},g=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},m=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return(0,c.hC)(t,r,n),(0,d.L)((function(){return(0,c.My)(t,r,n)})),null};var v=function e(t,r){var i,s,a=t.__emotion_real===t,d=a&&t.__emotion_base||t;void 0!==r&&(i=r.label,s=r.target);var h=g(t,r,a),p=h||f(d),v=!p("as");return function(){var _=arguments,y=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&y.push("label:"+i+";"),null==_[0]||void 0===_[0].raw)y.push.apply(y,_);else{y.push(_[0][0]);for(var b=_.length,E=1;E<b;E++)y.push(_[E],_[0][E])}var S=(0,l.w)((function(e,t,r){var o=v&&e.as||d,i="",a=[],g=e;if(null==e.theme){for(var _ in g={},e)g[_]=e[_];g.theme=(0,n.useContext)(l.T)}"string"==typeof e.className?i=(0,c.fp)(t.registered,a,e.className):null!=e.className&&(i=e.className+" ");var b=(0,u.O)(y.concat(a),t.registered,g);i+=t.key+"-"+b.name,void 0!==s&&(i+=" "+s);var E=v&&void 0===h?f(o):p,S={};for(var C in e)v&&"as"===C||E(C)&&(S[C]=e[C]);return S.className=i,S.ref=r,(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m,{cache:t,serialized:b,isStringTag:"string"==typeof o}),(0,n.createElement)(o,S))}));return S.displayName=void 0!==i?i:"Styled("+("string"==typeof d?d:d.displayName||d.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=d,S.__emotion_styles=y,S.__emotion_forwardProp=h,Object.defineProperty(S,"toString",{value:function(){return"."+s}}),S.withComponent=function(t,n){return e(t,(0,o.Z)({},r,n,{shouldForwardProp:g(S,n,!0)})).apply(void 0,y)},S}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));const _=v},7278:(e,t,r)=>{"use strict";var n;r.d(t,{L:()=>s,j:()=>a});var o=r(7294),i=!!(n||(n=r.t(o,2))).useInsertionEffect&&(n||(n=r.t(o,2))).useInsertionEffect,s=i||function(e){return e()},a=i||o.useLayoutEffect},444:(e,t,r)=>{"use strict";function n(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}r.d(t,{My:()=>i,fp:()=>n,hC:()=>o});var o=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},i=function(e,t,r){o(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}},5716:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");t.Z=s},7440:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");t.Z=s},1733:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=s},7957:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=s},5089:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"}),"EmojiEvents");t.Z=s},2684:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.Z=s},7962:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"}),"LibraryBooks");t.Z=s},8956:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2zm0 14H3V8h18v12zM9 10v8l7-4z"}),"LiveTv");t.Z=s},326:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=s},5450:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)([(0,i.jsx)("path",{d:"M15.18 10.94c.2-.44.32-.92.32-1.44C15.5 7.57 13.93 6 12 6c-.52 0-1 .12-1.44.32l4.62 4.62z"},"0"),(0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 13c-2.32 0-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-1.85.63-3.55 1.69-4.9l2.86 2.86c.21 1.56 1.43 2.79 2.99 2.99l2.2 2.2c-.57-.1-1.15-.15-1.74-.15zm6.31 1.9L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.54-1.69 4.9z"},"1")],"NoAccounts");t.Z=s},5817:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications");t.Z=s},8878:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),"PermIdentity");t.Z=s},5398:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.Z=s},2761:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=s},4229:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=s},9459:(e,t,r)=>{"use strict";var n=r(4836);t.Z=void 0;var o=n(r(4938)),i=r(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M17 4h3v16h-3zM5 14h3v6H5zm6-5h3v11h-3z"}),"SignalCellularAlt");t.Z=s},4938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(4298)},4345:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(7462),o=r(3366),i=r(1387),s=r(9766),a=r(6268),l=r(8010),c=r(6523),u=r(1796);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,r,n){const o=n.light||n,i=n.dark||1.5*n;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:"light"===t?e.light=(0,u.$n)(e.main,o):"dark"===t&&(e.dark=(0,u._j)(e.main,i)))}const C=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],T={textTransform:"uppercase"},w='"Roboto", "Helvetica", "Arial", sans-serif';function R(e,t){const r="function"==typeof t?t(e):t,{fontFamily:i=w,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=r,g=(0,o.Z)(r,C),m=a/14,v=f||(e=>e/h*m+"rem"),_=(e,t,r,o,s)=>{return(0,n.Z)({fontFamily:i,fontWeight:e,fontSize:v(t),lineHeight:r},i===w?{letterSpacing:(a=o/t,Math.round(1e5*a)/1e5+"em")}:{},s,p);var a},y={h1:_(l,96,1.167,-1.5),h2:_(l,60,1.2,-.5),h3:_(c,48,1.167,0),h4:_(c,34,1.235,.25),h5:_(c,24,1.334,0),h6:_(u,20,1.6,.15),subtitle1:_(c,16,1.75,.15),subtitle2:_(u,14,1.57,.1),body1:_(c,16,1.5,.15),body2:_(c,14,1.43,.15),button:_(u,14,1.75,.4,T),caption:_(c,12,1.66,.4),overline:_(c,12,2.66,1,T)};return(0,s.Z)((0,n.Z)({htmlFontSize:h,pxToRem:v,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},y),g,{clone:!1})}function k(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}const O=["none",k(0,2,1,-1,0,1,1,0,0,1,3,0),k(0,3,1,-2,0,2,2,0,0,1,5,0),k(0,3,3,-2,0,3,4,0,0,1,8,0),k(0,2,4,-1,0,4,5,0,0,1,10,0),k(0,3,5,-1,0,5,8,0,0,1,14,0),k(0,3,5,-1,0,6,10,0,0,1,18,0),k(0,4,5,-2,0,7,10,1,0,2,16,1),k(0,5,5,-3,0,8,10,1,0,3,14,2),k(0,5,6,-3,0,9,12,1,0,3,16,2),k(0,6,6,-3,0,10,14,1,0,4,18,3),k(0,6,7,-4,0,11,15,1,0,4,20,3),k(0,7,8,-4,0,12,17,2,0,5,22,4),k(0,7,8,-4,0,13,19,2,0,5,24,4),k(0,7,9,-4,0,14,21,2,0,5,26,4),k(0,8,9,-5,0,15,22,2,0,6,28,5),k(0,8,10,-5,0,16,24,2,0,6,30,5),k(0,8,11,-5,0,17,26,2,0,6,32,5),k(0,9,11,-5,0,18,28,2,0,7,34,6),k(0,9,12,-6,0,19,29,2,0,7,36,6),k(0,10,13,-6,0,20,31,3,0,8,38,7),k(0,10,13,-6,0,21,33,3,0,8,40,7),k(0,10,14,-6,0,22,35,3,0,8,42,7),k(0,11,14,-7,0,23,36,3,0,9,44,8),k(0,11,15,-7,0,24,38,3,0,9,46,8)];var I=r(6067);const P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},A=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];const N=function(e={},...t){const{mixins:r={},palette:C={},transitions:T={},typography:w={}}=e,k=(0,o.Z)(e,A);if(e.vars)throw new Error((0,i.Z)(18));const N=function(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:a=.2}=e,l=(0,o.Z)(e,y),c=e.primary||function(e="light"){return"dark"===e?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(t),C=e.secondary||function(e="light"){return"dark"===e?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),T=e.error||function(e="light"){return"dark"===e?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),w=e.info||function(e="light"){return"dark"===e?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),R=e.success||function(e="light"){return"dark"===e?{main:_[400],light:_[300],dark:_[700]}:{main:_[800],light:_[500],dark:_[900]}}(t),k=e.warning||function(e="light"){return"dark"===e?{main:g[400],light:g[300],dark:g[700]}:{main:"#ed6c02",light:g[500],dark:g[900]}}(t);function O(e){return(0,u.mi)(e,E.text.primary)>=r?E.text.primary:b.text.primary}const I=({color:e,name:t,mainShade:r=500,lightShade:o=300,darkShade:s=700})=>{if(!(e=(0,n.Z)({},e)).main&&e[r]&&(e.main=e[r]),!e.hasOwnProperty("main"))throw new Error((0,i.Z)(11,t?` (${t})`:"",r));if("string"!=typeof e.main)throw new Error((0,i.Z)(12,t?` (${t})`:"",JSON.stringify(e.main)));return S(e,"light",o,a),S(e,"dark",s,a),e.contrastText||(e.contrastText=O(e.main)),e},P={dark:E,light:b};return(0,s.Z)((0,n.Z)({common:(0,n.Z)({},d),mode:t,primary:I({color:c,name:"primary"}),secondary:I({color:C,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:T,name:"error"}),warning:I({color:k,name:"warning"}),info:I({color:w,name:"info"}),success:I({color:R,name:"success"}),grey:h,contrastThreshold:r,getContrastText:O,augmentColor:I,tonalOffset:a},P[t]),l)}(C),L=(0,a.Z)(e);let M=(0,s.Z)(L,{mixins:(x=L.breakpoints,D=r,(0,n.Z)({toolbar:{minHeight:56,[x.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[x.up("sm")]:{minHeight:64}}},D)),palette:N,shadows:O.slice(),typography:R(N,w),transitions:(0,I.ZP)(T),zIndex:(0,n.Z)({},P)});var x,D;return M=(0,s.Z)(M,k),M=t.reduce(((e,t)=>(0,s.Z)(e,t)),M),M.unstable_sxConfig=(0,n.Z)({},l.Z,null==k?void 0:k.unstable_sxConfig),M.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},M}},6067:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>u,x9:()=>a});var n=r(3366),o=r(7462);const i=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,o.Z)({},s,e.easing),r=(0,o.Z)({},a,e.duration);return(0,o.Z)({getAutoHeightDuration:c,create:(e=["all"],o={})=>{const{duration:s=r.standard,easing:a=t.easeInOut,delay:c=0}=o;return(0,n.Z)(o,i),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof s?s:l(s)} ${a} ${"string"==typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:r})}},247:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(4345).Z)()},948:(e,t,r)=>{"use strict";r.d(t,{Dz:()=>s,FO:()=>i,ZP:()=>a});var n=r(2807),o=r(247);const i=e=>(0,n.x9)(e)&&"classes"!==e,s=n.x9,a=(0,n.ZP)({defaultTheme:o.Z,rootShouldForwardProp:i})},1657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9628),o=r(247);function i({props:e,name:t}){return(0,n.Z)({props:e,name:t,defaultTheme:o.Z})}},8216:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(8320).Z},7450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(9064).Z},5949:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(7462),o=r(7294),i=r(3366),s=r(6010),a=r(4780),l=r(8216),c=r(1657),u=r(948),d=r(1588),h=r(4867);function p(e){return(0,h.Z)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=r(5893);const g=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"inherit"!==r.color&&t[`color${(0,l.Z)(r.color)}`],t[`fontSize${(0,l.Z)(r.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var r,n,o,i,s,a,l,c,u,d,h,p,f,g,m,v,_;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(r=e.transitions)||null==(n=r.create)?void 0:n.call(r,"fill",{duration:null==(o=e.transitions)||null==(i=o.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=e.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[t.fontSize],color:null!=(h=null==(p=(e.vars||e).palette)||null==(f=p[t.color])?void 0:f.main)?h:{action:null==(g=(e.vars||e).palette)||null==(m=g.action)?void 0:m.active,disabled:null==(v=(e.vars||e).palette)||null==(_=v.action)?void 0:_.disabled,inherit:void 0}[t.color]}})),v=o.forwardRef((function(e,t){const r=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:o,className:u,color:d="inherit",component:h="svg",fontSize:v="medium",htmlColor:_,inheritViewBox:y=!1,titleAccess:b,viewBox:E="0 0 24 24"}=r,S=(0,i.Z)(r,g),C=(0,n.Z)({},r,{color:d,component:h,fontSize:v,instanceFontSize:e.fontSize,inheritViewBox:y,viewBox:E}),T={};y||(T.viewBox=E);const w=(e=>{const{color:t,fontSize:r,classes:n}=e,o={root:["root","inherit"!==t&&`color${(0,l.Z)(t)}`,`fontSize${(0,l.Z)(r)}`]};return(0,a.Z)(o,p,n)})(C);return(0,f.jsxs)(m,(0,n.Z)({as:h,className:(0,s.default)(w.root,u),focusable:"false",color:_,"aria-hidden":!b||void 0,role:b?"img":void 0,ref:t},T,S,{ownerState:C,children:[o,b?(0,f.jsx)("title",{children:b}):null]}))}));v.muiName="SvgIcon";const _=v;function y(e,t){function r(r,o){return(0,f.jsx)(_,(0,n.Z)({"data-testid":`${t}Icon`,ref:o},r,{children:e}))}return r.muiName=_.muiName,o.memo(o.forwardRef(r))}},7144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(7596).Z},4298:(e,t,r)=>{"use strict";r.r(t),r.d(t,{capitalize:()=>o.Z,createChainedFunction:()=>i.Z,createSvgIcon:()=>s.Z,debounce:()=>a.Z,deprecatedPropType:()=>l,isMuiElement:()=>c.Z,ownerDocument:()=>u.Z,ownerWindow:()=>d.Z,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>E,unstable_useEnhancedEffect:()=>f.Z,unstable_useId:()=>g.Z,unsupportedProp:()=>m,useControlled:()=>v.Z,useEventCallback:()=>_.Z,useForkRef:()=>y.Z,useIsFocusVisible:()=>b.Z});var n=r(7078),o=r(8216),i=r(7450),s=r(5949),a=r(7144);const l=function(e,t){return()=>null};var c=r(8502),u=r(8038),d=r(5340);r(7462);const h=function(e,t){return()=>null},p=r(7960).Z;var f=r(8974),g=r(7909);const m=function(e,t,r,n,o){return null};var v=r(9299),_=r(2068),y=r(1705),b=r(3511);const E={configure:e=>{n.Z.configure(e)}}},8502:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7294);const o=function(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8038:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(7094).Z},5340:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(8290).Z},9299:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(8925).Z},8974:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(6600).Z},2068:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(3633).Z},1705:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(67).Z},7909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(7579).Z},3511:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(7294);let o,i=!0,s=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function u(){"hidden"===this.visibilityState&&s&&(i=!0)}const d=function(){const e=n.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=n.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(e){}return i||function(e){const{type:t,tagName:r}=e;return!("INPUT"!==r||!a[t]||e.readOnly)||"TEXTAREA"===r&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,window.clearTimeout(o),o=window.setTimeout((()=>{s=!1}),100),t.current=!1,!0)},ref:e}}},4819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(7294).createContext(null)},6760:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(7294),o=r(4819);function i(){return n.useContext(o.Z)}},8883:(e,t,r)=>{"use strict";r.d(t,{Co:()=>i,ZP:()=>o});var n=r(932);function o(e,t){return(0,n.Z)(e,t)}const i=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},5408:(e,t,r)=>{"use strict";r.d(t,{L7:()=>l,P$:()=>u,VO:()=>o,W8:()=>a,dt:()=>c,k9:()=>s});var n=r(9766);const o={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${o[e]}px)`};function s(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const e=n.breakpoints||i;return t.reduce(((n,o,i)=>(n[e.up(e.keys[i])]=r(t[i]),n)),{})}if("object"==typeof t){const e=n.breakpoints||i;return Object.keys(t).reduce(((n,i)=>{if(-1!==Object.keys(e.values||o).indexOf(i))n[e.up(i)]=r(t[i],i);else{const e=i;n[e]=t[e]}return n}),{})}return r(t)}function a(e={}){var t;return(null==(t=e.keys)?void 0:t.reduce(((t,r)=>(t[e.up(r)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const r=e[t];return(!r||0===Object.keys(r).length)&&delete e[t],e}),t)}function c(e,...t){const r=a(e),o=[r,...t].reduce(((e,t)=>(0,n.Z)(e,t)),{});return l(Object.keys(r),o)}function u({values:e,breakpoints:t,base:r}){const n=r||function(e,t){if("object"!=typeof e)return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach(((t,n)=>{n<e.length&&(r[t]=!0)})):n.forEach((t=>{null!=e[t]&&(r[t]=!0)})),r}(e,t),o=Object.keys(n);if(0===o.length)return e;let i;return o.reduce(((t,r,n)=>(Array.isArray(e)?(t[r]=null!=e[n]?e[n]:e[i],i=n):"object"==typeof e?(t[r]=null!=e[r]?e[r]:e[i],i=r):t[r]=e,t)),{})}},1796:(e,t,r)=>{"use strict";r.d(t,{$n:()=>d,Fq:()=>c,_4:()=>h,_j:()=>u,mi:()=>l});var n=r(1387);function o(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&1===r[0].length&&(r=r.map((e=>e+e))),r?`rgb${4===r.length?"a":""}(${r.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),r=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(r))throw new Error((0,n.Z)(9,e));let o,s=e.substring(t+1,e.length-1);if("color"===r){if(s=s.split(" "),o=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o))throw new Error((0,n.Z)(10,o))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:r,values:s,colorSpace:o}}function s(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return-1!==t.indexOf("rgb")?n=n.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),n=-1!==t.indexOf("color")?`${r} ${n.join(" ")}`:`${n.join(", ")}`,`${t}(${n})`}function a(e){let t="hsl"===(e=i(e)).type||"hsla"===e.type?i(function(e){e=i(e);const{values:t}=e,r=t[0],n=t[1]/100,o=t[2]/100,a=n*Math.min(o,1-o),l=(e,t=(e+r/30)%12)=>o-a*Math.max(Math.min(t-3,9-t,1),-1);let c="rgb";const u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),s({type:c,values:u})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){const r=a(e),n=a(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function c(e,t){return e=i(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,s(e)}function u(e,t){if(e=i(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return s(e)}function d(e,t){if(e=i(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(-1!==e.type.indexOf("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return s(e)}function h(e,t=.15){return a(e)>.5?u(e,t):d(e,t)}},2807:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>E,x9:()=>y});var n=r(3366),o=r(7462),i=r(8883),s=r(6268),a=r(8320);const l=["variant"];function c(e){return 0===e.length}function u(e){const{variant:t}=e,r=(0,n.Z)(e,l);let o=t||"";return Object.keys(r).sort().forEach((t=>{o+="color"===t?c(o)?e[t]:(0,a.Z)(e[t]):`${c(o)?t:(0,a.Z)(t)}${(0,a.Z)(e[t].toString())}`})),o}var d=r(6523);const h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],p=["theme"],f=["theme"];function g(e){return 0===Object.keys(e).length}const m=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,v=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const n={};return r.forEach((e=>{const t=u(e.props);n[t]=e.style})),n},_=(e,t,r,n)=>{var o,i;const{ownerState:s={}}=e,a=[],l=null==r||null==(o=r.components)||null==(i=o[n])?void 0:i.variants;return l&&l.forEach((r=>{let n=!0;Object.keys(r.props).forEach((t=>{s[t]!==r.props[t]&&e[t]!==r.props[t]&&(n=!1)})),n&&a.push(t[u(r.props)])})),a};function y(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const b=(0,s.Z)();function E(e={}){const{defaultTheme:t=b,rootShouldForwardProp:r=y,slotShouldForwardProp:s=y}=e,a=e=>{const r=g(e.theme)?t:e.theme;return(0,d.Z)((0,o.Z)({},e,{theme:r}))};return a.__mui_systemSx=!0,(e,l={})=>{(0,i.Co)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:c,slot:u,skipVariantsResolver:d,skipSx:b,overridesResolver:E}=l,S=(0,n.Z)(l,h),C=void 0!==d?d:u&&"Root"!==u||!1,T=b||!1;let w=y;"Root"===u?w=r:u?w=s:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(w=void 0);const R=(0,i.ZP)(e,(0,o.Z)({shouldForwardProp:w,label:void 0},S)),k=(e,...r)=>{const i=r?r.map((e=>"function"==typeof e&&e.__emotion_real!==e?r=>{let{theme:i}=r,s=(0,n.Z)(r,p);return e((0,o.Z)({theme:g(i)?t:i},s))}:e)):[];let s=e;c&&E&&i.push((e=>{const r=g(e.theme)?t:e.theme,n=m(c,r);if(n){const t={};return Object.entries(n).forEach((([n,i])=>{t[n]="function"==typeof i?i((0,o.Z)({},e,{theme:r})):i})),E(e,t)}return null})),c&&!C&&i.push((e=>{const r=g(e.theme)?t:e.theme;return _(e,v(c,r),r,c)})),T||i.push(a);const l=i.length-r.length;if(Array.isArray(e)&&l>0){const t=new Array(l).fill("");s=[...e,...t],s.raw=[...e.raw,...t]}else"function"==typeof e&&e.__emotion_real!==e&&(s=r=>{let{theme:i}=r,s=(0,n.Z)(r,f);return e((0,o.Z)({theme:g(i)?t:i},s))});return R(s,...i)};return R.withConfig&&(k.withConfig=R.withConfig),k}}},6268:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(7462),o=r(3366),i=r(9766);const s=["values","unit","step"],a={borderRadius:4};var l=r(2605),c=r(6523),u=r(8010);const d=["breakpoints","palette","spacing","shape"],h=function(e={},...t){const{breakpoints:r={},palette:h={},spacing:p,shape:f={}}=e,g=(0,o.Z)(e,d),m=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5}=e,a=(0,o.Z)(e,s),l=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,n.Z)({},e,{[t.key]:t.val})),{})})(t),c=Object.keys(l);function u(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${r})`}function d(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-i/100}${r})`}function h(e,n){const o=c.indexOf(n);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${r}) and (max-width:${(-1!==o&&"number"==typeof t[c[o]]?t[c[o]]:n)-i/100}${r})`}return(0,n.Z)({keys:c,values:l,up:u,down:d,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):u(e)},not:function(e){const t=c.indexOf(e);return 0===t?u(c[1]):t===c.length-1?d(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:r},a)}(r),v=function(e=8){if(e.mui)return e;const t=(0,l.hB)({spacing:e}),r=(...e)=>(0===e.length?[1]:e).map((e=>{const r=t(e);return"number"==typeof r?`${r}px`:r})).join(" ");return r.mui=!0,r}(p);let _=(0,i.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,n.Z)({mode:"light"},h),spacing:v,shape:(0,n.Z)({},a,f)},g);return _=t.reduce(((e,t)=>(0,i.Z)(e,t)),_),_.unstable_sxConfig=(0,n.Z)({},u.Z,null==g?void 0:g.unstable_sxConfig),_.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},_}},7730:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(9766);const o=function(e,t){return t?(0,n.Z)(e,t,{clone:!1}):e}},2605:(e,t,r)=>{"use strict";r.d(t,{hB:()=>f,eI:()=>p,NA:()=>g,e6:()=>v,o3:()=>_});var n=r(5408),o=r(4844),i=r(7730);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return e=>(void 0===t[e]&&(t[e]=(e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,r]=e.split(""),n=s[t],o=a[r]||"";return Array.isArray(o)?o.map((e=>n+e)):[n+o]})(e)),t[e])}(),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,r,n){var i;const s=null!=(i=(0,o.DW)(e,t,!1))?i:r;return"number"==typeof s?e=>"string"==typeof e?e:s*e:Array.isArray(s)?e=>"string"==typeof e?e:s[e]:"function"==typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function g(e,t){if("string"==typeof t||null==t)return t;const r=e(Math.abs(t));return t>=0?r:"number"==typeof r?-r:`-${r}`}function m(e,t){const r=f(e.theme);return Object.keys(e).map((o=>function(e,t,r,o){if(-1===t.indexOf(r))return null;const i=function(e,t){return r=>e.reduce(((e,n)=>(e[n]=g(t,r),e)),{})}(c(r),o),s=e[r];return(0,n.k9)(e,s,i)}(e,t,o,r))).reduce(i.Z,{})}function v(e){return m(e,u)}function _(e){return m(e,d)}function y(e){return m(e,h)}v.propTypes={},v.filterProps=u,_.propTypes={},_.filterProps=d,y.propTypes={},y.filterProps=h},4844:(e,t,r)=>{"use strict";r.d(t,{DW:()=>i,Jq:()=>s,ZP:()=>a});var n=r(8320),o=r(5408);function i(e,t,r=!0){if(!t||"string"!=typeof t)return null;if(e&&e.vars&&r){const r=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=r)return r}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,r,n=r){let o;return o="function"==typeof e?e(r):Array.isArray(e)?e[r]||n:i(e,r)||n,t&&(o=t(o,n,e)),o}const a=function(e){const{prop:t,cssProperty:r=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=i(e.theme,a)||{};return(0,o.k9)(e,c,(e=>{let o=s(u,l,e);return e===o&&"string"==typeof e&&(o=s(u,l,`${t}${"default"===e?"":(0,n.Z)(e)}`,e)),!1===r?o:{[r]:o}}))};return c.propTypes={},c.filterProps=[t],c}},8010:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(2605),o=r(4844),i=r(7730);const s=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((r=>{e[r]=t})),e)),{}),r=e=>Object.keys(e).reduce(((r,n)=>t[n]?(0,i.Z)(r,t[n](e)):r),{});return r.propTypes={},r.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),r};var a=r(5408);function l(e){return"number"!=typeof e?e:`${e}px solid`}const c=(0,o.ZP)({prop:"border",themeKey:"borders",transform:l}),u=(0,o.ZP)({prop:"borderTop",themeKey:"borders",transform:l}),d=(0,o.ZP)({prop:"borderRight",themeKey:"borders",transform:l}),h=(0,o.ZP)({prop:"borderBottom",themeKey:"borders",transform:l}),p=(0,o.ZP)({prop:"borderLeft",themeKey:"borders",transform:l}),f=(0,o.ZP)({prop:"borderColor",themeKey:"palette"}),g=(0,o.ZP)({prop:"borderTopColor",themeKey:"palette"}),m=(0,o.ZP)({prop:"borderRightColor",themeKey:"palette"}),v=(0,o.ZP)({prop:"borderBottomColor",themeKey:"palette"}),_=(0,o.ZP)({prop:"borderLeftColor",themeKey:"palette"}),y=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,n.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),r=e=>({borderRadius:(0,n.NA)(t,e)});return(0,a.k9)(e,e.borderRadius,r)}return null};y.propTypes={},y.filterProps=["borderRadius"],s(c,u,d,h,p,f,g,m,v,_,y);const b=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,n.eI)(e.theme,"spacing",8,"gap"),r=e=>({gap:(0,n.NA)(t,e)});return(0,a.k9)(e,e.gap,r)}return null};b.propTypes={},b.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,n.eI)(e.theme,"spacing",8,"columnGap"),r=e=>({columnGap:(0,n.NA)(t,e)});return(0,a.k9)(e,e.columnGap,r)}return null};E.propTypes={},E.filterProps=["columnGap"];const S=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,n.eI)(e.theme,"spacing",8,"rowGap"),r=e=>({rowGap:(0,n.NA)(t,e)});return(0,a.k9)(e,e.rowGap,r)}return null};function C(e,t){return"grey"===t?t:e}function T(e){return e<=1&&0!==e?100*e+"%":e}S.propTypes={},S.filterProps=["rowGap"],s(b,E,S,(0,o.ZP)({prop:"gridColumn"}),(0,o.ZP)({prop:"gridRow"}),(0,o.ZP)({prop:"gridAutoFlow"}),(0,o.ZP)({prop:"gridAutoColumns"}),(0,o.ZP)({prop:"gridAutoRows"}),(0,o.ZP)({prop:"gridTemplateColumns"}),(0,o.ZP)({prop:"gridTemplateRows"}),(0,o.ZP)({prop:"gridTemplateAreas"}),(0,o.ZP)({prop:"gridArea"})),s((0,o.ZP)({prop:"color",themeKey:"palette",transform:C}),(0,o.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:C}),(0,o.ZP)({prop:"backgroundColor",themeKey:"palette",transform:C}));const w=(0,o.ZP)({prop:"width",transform:T}),R=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var r,n,o;return{maxWidth:(null==(r=e.theme)||null==(n=r.breakpoints)||null==(o=n.values)?void 0:o[t])||a.VO[t]||T(t)}};return(0,a.k9)(e,e.maxWidth,t)}return null};R.filterProps=["maxWidth"];const k=(0,o.ZP)({prop:"minWidth",transform:T}),O=(0,o.ZP)({prop:"height",transform:T}),I=(0,o.ZP)({prop:"maxHeight",transform:T}),P=(0,o.ZP)({prop:"minHeight",transform:T}),A=((0,o.ZP)({prop:"size",cssProperty:"width",transform:T}),(0,o.ZP)({prop:"size",cssProperty:"height",transform:T}),s(w,R,k,O,I,P,(0,o.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:y},color:{themeKey:"palette",transform:C},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:C},backgroundColor:{themeKey:"palette",transform:C},p:{style:n.o3},pt:{style:n.o3},pr:{style:n.o3},pb:{style:n.o3},pl:{style:n.o3},px:{style:n.o3},py:{style:n.o3},padding:{style:n.o3},paddingTop:{style:n.o3},paddingRight:{style:n.o3},paddingBottom:{style:n.o3},paddingLeft:{style:n.o3},paddingX:{style:n.o3},paddingY:{style:n.o3},paddingInline:{style:n.o3},paddingInlineStart:{style:n.o3},paddingInlineEnd:{style:n.o3},paddingBlock:{style:n.o3},paddingBlockStart:{style:n.o3},paddingBlockEnd:{style:n.o3},m:{style:n.e6},mt:{style:n.e6},mr:{style:n.e6},mb:{style:n.e6},ml:{style:n.e6},mx:{style:n.e6},my:{style:n.e6},margin:{style:n.e6},marginTop:{style:n.e6},marginRight:{style:n.e6},marginBottom:{style:n.e6},marginLeft:{style:n.e6},marginX:{style:n.e6},marginY:{style:n.e6},marginInline:{style:n.e6},marginInlineStart:{style:n.e6},marginInlineEnd:{style:n.e6},marginBlock:{style:n.e6},marginBlockStart:{style:n.e6},marginBlockEnd:{style:n.e6},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:b},rowGap:{style:S},columnGap:{style:E},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:T},maxWidth:{style:R},minWidth:{transform:T},height:{transform:T},maxHeight:{transform:T},minHeight:{transform:T},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},6523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(8320),o=r(7730),i=r(4844),s=r(5408),a=r(8010);const l=function(){function e(e,t,r,o){const a={[e]:t,theme:r},l=o[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;const p=(0,i.DW)(r,u)||{};return h?h(a):(0,s.k9)(a,t,(t=>{let r=(0,i.Jq)(p,d,t);return t===r&&"string"==typeof t&&(r=(0,i.Jq)(p,d,`${e}${"default"===t?"":(0,n.Z)(t)}`,t)),!1===c?r:{[c]:r}}))}return function t(r){var n;const{sx:i,theme:l={}}=r||{};if(!i)return null;const c=null!=(n=l.unstable_sxConfig)?n:a.Z;function u(r){let n=r;if("function"==typeof r)n=r(l);else if("object"!=typeof r)return r;if(!n)return null;const i=(0,s.W8)(l.breakpoints),a=Object.keys(i);let u=i;return Object.keys(n).forEach((r=>{const i="function"==typeof(a=n[r])?a(l):a;var a;if(null!=i)if("object"==typeof i)if(c[r])u=(0,o.Z)(u,e(r,i,l,c));else{const e=(0,s.k9)({theme:l},i,(e=>({[r]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),r=new Set(t);return e.every((e=>r.size===Object.keys(e).length))}(e,i)?u=(0,o.Z)(u,e):u[r]=t({sx:i,theme:l})}else u=(0,o.Z)(u,e(r,i,l,c))})),(0,s.L7)(a,u)}return Array.isArray(i)?i.map(u):u(i)}}();l.filterProps=["sx"];const c=l},6682:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6268),o=r(4168);const i=(0,n.Z)(),s=function(e=i){return(0,o.Z)(e)}},539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7925);function o(e){const{theme:t,name:r,props:o}=e;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?(0,n.Z)(t.components[r].defaultProps,o):o}},9628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(539),o=r(6682);function i({props:e,name:t,defaultTheme:r}){const i=(0,o.Z)(r);return(0,n.Z)({theme:i,name:t,props:e})}},4168:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(6760);const o=function(e=null){const t=(0,n.Z)();return t&&(r=t,0!==Object.keys(r).length)?t:e;var r}},7078:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});const n=e=>e,o=(()=>{let e=n;return{configure(t){e=t},generate:t=>e(t),reset(){e=n}}})()},8320:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(1387);function o(e){if("string"!=typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4780:(e,t,r)=>{"use strict";function n(e,t,r){const n={};return Object.keys(e).forEach((o=>{n[o]=e[o].reduce(((e,n)=>(n&&(e.push(t(n)),r&&r[n]&&e.push(r[n])),e)),[]).join(" ")})),n}r.d(t,{Z:()=>n})},9064:(e,t,r)=>{"use strict";function n(...e){return e.reduce(((e,t)=>null==t?e:function(...r){e.apply(this,r),t.apply(this,r)}),(()=>{}))}r.d(t,{Z:()=>n})},7596:(e,t,r)=>{"use strict";function n(e,t=166){let r;function n(...n){clearTimeout(r),r=setTimeout((()=>{e.apply(this,n)}),t)}return n.clear=()=>{clearTimeout(r)},n}r.d(t,{Z:()=>n})},9766:(e,t,r)=>{"use strict";r.d(t,{P:()=>o,Z:()=>s});var n=r(7462);function o(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function i(e){if(!o(e))return e;const t={};return Object.keys(e).forEach((r=>{t[r]=i(e[r])})),t}function s(e,t,r={clone:!0}){const a=r.clone?(0,n.Z)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((n=>{"__proto__"!==n&&(o(t[n])&&n in e&&o(e[n])?a[n]=s(e[n],t[n],r):r.clone?a[n]=o(t[n])?i(t[n]):t[n]:a[n]=t[n])})),a}},1387:(e,t,r)=>{"use strict";function n(e){let t="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}r.d(t,{Z:()=>n})},4867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(7078);const o={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function i(e,t,r="Mui"){const i=o[t];return i?`${r}-${i}`:`${n.Z.generate(e)}-${t}`}},1588:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(4867);function o(e,t,r="Mui"){const o={};return t.forEach((t=>{o[t]=(0,n.Z)(e,t,r)})),o}},7094:(e,t,r)=>{"use strict";function n(e){return e&&e.ownerDocument||document}r.d(t,{Z:()=>n})},8290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7094);function o(e){return(0,n.Z)(e).defaultView||window}},7925:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7462);function o(e,t){const r=(0,n.Z)({},t);return Object.keys(e).forEach((i=>{if(i.toString().match(/^(components|slots)$/))r[i]=(0,n.Z)({},e[i],r[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=e[i]||{},a=t[i];r[i]={},a&&Object.keys(a)?s&&Object.keys(s)?(r[i]=(0,n.Z)({},a),Object.keys(s).forEach((e=>{r[i][e]=o(s[e],a[e])}))):r[i]=a:r[i]=s}else void 0===r[i]&&(r[i]=e[i])})),r}},7960:(e,t,r)=>{"use strict";function n(e,t){"function"==typeof e?e(t):e&&(e.current=t)}r.d(t,{Z:()=>n})},8925:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7294);function o({controlled:e,default:t,name:r,state:o="value"}){const{current:i}=n.useRef(void 0!==e),[s,a]=n.useState(t);return[i?e:s,n.useCallback((e=>{i||a(e)}),[])]}},6600:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(7294);const o="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},3633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(7294),o=r(6600);function i(e){const t=n.useRef(e);return(0,o.Z)((()=>{t.current=e})),n.useCallback(((...e)=>(0,t.current)(...e)),[])}},67:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(7294),o=r(7960);function i(...e){return n.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{(0,o.Z)(e,t)}))}),e)}},7579:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>a});var o=r(7294);let i=0;const s=(n||(n=r.t(o,2))).useId;function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,r]=o.useState(e),n=e||t;return o.useEffect((()=>{null==t&&(i+=1,r(`mui-${i}`))}),[t]),n}(e)}},4537:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},7419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var o,i=null,s=[],a=0,l=0;t<r;){var c=e[t++];switch(l){case 0:s[a++]=n[c>>2],o=(3&c)<<4,l=1;break;case 1:s[a++]=n[o|c>>4],o=(15&c)<<2,l=2;break;case 2:s[a++]=n[o|c>>6],s[a++]=n[63&c],l=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=n[o],s[a++]=61,1===l&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error(s);switch(a){case 0:n=c,a=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[r++]=(3&n)<<6|c,a=0}}if(1===a)throw Error(s);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,o),e.readFloatBE=s.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,o,i+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function s(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,o,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},6010:(e,t,r)=>{"use strict";function n(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(o&&(o+=" "),o+=t);return o}r.r(t),r.d(t,{clsx:()=>o,default:()=>i});const i=o},2751:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(8081),o=r.n(n),i=r(3645),s=r.n(i)()(o());s.push([e.id,"/*\n! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: currentColor; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n*/\n\nhtml {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: Roboto; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font family by default.\n2. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\r\n.container {\n  width: 100%;\n}\r\n@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\r\n@media (min-width: 700px) {\n\n  .container {\n    max-width: 700px;\n  }\n}\r\n@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\r\n@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\r\n@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\r\n@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\r\n@media (min-width: 1600px) {\n\n  .container {\n    max-width: 1600px;\n  }\n}\r\n.visible {\n  visibility: visible;\n}\r\n.invisible {\n  visibility: hidden;\n}\r\n.static {\n  position: static;\n}\r\n.fixed {\n  position: fixed;\n}\r\n.absolute {\n  position: absolute;\n}\r\n.relative {\n  position: relative;\n}\r\n.block {\n  display: block;\n}\r\n.flex {\n  display: flex;\n}\r\n.inline-flex {\n  display: inline-flex;\n}\r\n.hidden {\n  display: none;\n}\r\n.aspect-square {\n  aspect-ratio: 1 / 1;\n}\r\n.h-40 {\n  height: 4rem;\n}\r\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\r\n.border {\n  border-width: 1px;\n}\r\n.uppercase {\n  text-transform: uppercase;\n}\r\n.underline {\n  text-decoration-line: underline;\n}\r\n.overline {\n  text-decoration-line: overline;\n}\r\n.antialiased {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\r\n.blur {\n  --tw-blur: blur(8px);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.grayscale {\n  --tw-grayscale: grayscale(100%);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.transition {\n  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\r\n\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\n.queNavBtn {\r\n  border-radius: 50px;\r\n}\r\n\r\n.selected {\r\n  background-color: lightblue;\r\n}\r\n\r\n.answered {\r\n  background-color: #0b815a;\r\n}\r\n\r\n.visited {\r\n  background-color: rgb(230, 130, 130);\r\n}\r\n",""]);const a=s},1383:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(8081),o=r.n(n),i=r(3645),s=r.n(i)()(o());s.push([e.id,'/*\n! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: currentColor; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: \'\';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user\'s configured `sans` font-family by default.\n5. Use the user\'s configured `sans` font-feature-settings by default.\n6. Use the user\'s configured `sans` font-variation-settings by default.\n*/\n\nhtml {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: Roboto; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user\'s configured `mono` font family by default.\n2. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\n[type=\'button\'],\n[type=\'reset\'],\n[type=\'submit\'] {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type=\'search\'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user\'s configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role="button"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don\'t get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\r\n.container {\n  width: 100%;\n}\r\n@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\r\n@media (min-width: 700px) {\n\n  .container {\n    max-width: 700px;\n  }\n}\r\n@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\r\n@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\r\n@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\r\n@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\r\n@media (min-width: 1600px) {\n\n  .container {\n    max-width: 1600px;\n  }\n}\r\n.visible {\n  visibility: visible;\n}\r\n.invisible {\n  visibility: hidden;\n}\r\n.static {\n  position: static;\n}\r\n.fixed {\n  position: fixed;\n}\r\n.absolute {\n  position: absolute;\n}\r\n.relative {\n  position: relative;\n}\r\n.block {\n  display: block;\n}\r\n.flex {\n  display: flex;\n}\r\n.inline-flex {\n  display: inline-flex;\n}\r\n.hidden {\n  display: none;\n}\r\n.aspect-square {\n  aspect-ratio: 1 / 1;\n}\r\n.h-40 {\n  height: 4rem;\n}\r\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\r\n.border {\n  border-width: 1px;\n}\r\n.uppercase {\n  text-transform: uppercase;\n}\r\n.underline {\n  text-decoration-line: underline;\n}\r\n.overline {\n  text-decoration-line: overline;\n}\r\n.antialiased {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\r\n.blur {\n  --tw-blur: blur(8px);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.grayscale {\n  --tw-grayscale: grayscale(100%);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\r\n.transition {\n  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\r\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\r\n    sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n          user-select: none;\r\n}\r\n\r\ncode {\r\n  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\r\n    monospace;\r\n}\r\n',""]);const a=s},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},5209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},n=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},o={p:n,P:function(e,t){var o,i=e.match(/(P+)(p+)?/)||[],s=i[1],a=i[2];if(!a)return r(e,t);switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",r(s,t)).replace("{{time}}",n(a,t))}};t.default=o,e.exports=t.default},8679:(e,t,r)=>{"use strict";var n=r(1296),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?s:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var o=p(r);o&&o!==f&&e(t,o,n)}var s=u(r);d&&(s=s.concat(d(r)));for(var a=l(t),g=l(r),m=0;m<s.length;++m){var v=s[m];if(!(i[v]||n&&n[v]||g&&g[v]||a&&a[v])){var _=h(r,v);try{c(t,v,_)}catch(e){}}}}return t}},6103:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case i:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case g:case l:return e;default:return t}}case o:return t}}}function S(e){return E(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||E(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===c},t.isContextProvider=function(e){return E(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return E(e)===h},t.isFragment=function(e){return E(e)===i},t.isLazy=function(e){return E(e)===m},t.isMemo=function(e){return E(e)===g},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===a},t.isStrictMode=function(e){return E(e)===s},t.isSuspense=function(e){return E(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===a||e===s||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b||e.$$typeof===v)},t.typeOf=E},1296:(e,t,r)=>{"use strict";e.exports=r(6103)},2703:(e,t,r)=>{"use strict";var n=r(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},5697:(e,t,r)=>{e.exports=r(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2100:(e,t,r)=>{"use strict";e.exports=r(9482)},9482:(e,t,r)=>{"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(1173),n.BufferWriter=r(3155),n.Reader=r(1408),n.BufferReader=r(593),n.util=r(9693),n.rpc=r(5994),n.roots=r(5054),n.configure=o,o()},1408:(e,t,r)=>{"use strict";e.exports=l;var n,o=r(9693),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return o.Buffer?function(e){return(l.create=function(e){return o.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:(e,t,r)=>{"use strict";e.exports=i;var n=r(1408);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(9693);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5054:e=>{"use strict";e.exports={}},5994:(e,t,r)=>{"use strict";t.Service=r(7948)},7948:(e,t,r)=>{"use strict";e.exports=o;var n=r(9693);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(e,t,r)=>{"use strict";e.exports=o;var n=r(9693);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9693:function(e,t,r){"use strict";var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(4537),n.base64=r(7419),n.EventEmitter=r(9211),n.float=r(945),n.inquire=r(7199),n.utf8=r(4997),n.pool=r(6662),n.LongBits=r(1945),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:(e,t,r)=>{"use strict";e.exports=d;var n,o=r(9693),i=o.LongBits,s=o.base64,a=o.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(d.alloc=o.pool(d.alloc,o.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},3155:(e,t,r)=>{"use strict";e.exports=i;var n=r(1173);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(9693);function i(){n.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},4448:(e,t,r)=>{"use strict";var n=r(7294),o=r(3840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,r,n,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function y(e,t,r,n){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function x(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,B=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var Z=!1;function j(e,t){if(!e||Z)return"";Z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),i=n.stack.split("\n"),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==i[a]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{Z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function H(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return j(e.type,!1);case 11:return j(e.type.render,!1);case 1:return j(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case w:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return F(e(t))}catch(e){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function $(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=G(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Q(e,t);var r=G(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+G(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:G(r)}}function ie(e,t){var r=G(t.value),n=G(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Te=null;function we(e){if(e=bo(e)){if("function"!=typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=So(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Te?Te.push(e):Te=[e]:Ce=e}function ke(){if(Ce){var e=Ce,t=Te;if(Te=Ce=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Oe(e,t){return e(t)}function Ie(){}var Pe=!1;function Ae(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Oe(e,t,r)}finally{Pe=!1,(null!==Ce||null!==Te)&&(Ie(),ke())}}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var n=So(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(i(231,t,typeof r));return r}var Le=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Le=!1}function xe(e,t,r,n,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}var De=!1,Be=null,Ue=!1,Ze=null,je={onError:function(e){De=!0,Be=e}};function He(e,t,r,n,o,i,s,a,l){De=!1,Be=null,xe.apply(je,arguments)}function Fe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ge(e){if(Fe(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(n=o.return)){r=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return Ge(o),e;if(s===n)return Ge(o),t;s=s.sibling}throw Error(i(188))}if(r.return!==n.return)r=o,n=s;else{for(var a=!1,l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,Ke=o.unstable_shouldYield,$e=o.unstable_requestPaint,Qe=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,it=null,st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes,s=268435455&r;if(0!==s){var a=s&~o;0!==a?n=dt(a):0!=(i&=s)&&(n=dt(i))}else 0!=(s=r&~o)?n=dt(s):0!==i&&(n=dt(i));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&o)&&((o=n&-n)>=(i=t&-t)||16===o&&0!=(4194240&i)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(r=31-st(t)),n|=e[r],t&=~o;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function _t(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Et,St,Ct,Tt,wt,Rt=!1,kt=[],Ot=null,It=null,Pt=null,At=new Map,Nt=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Dt(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=bo(t))&&St(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Bt(e){var t=yo(e.target);if(null!==t){var r=Fe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=ze(r)))return e.blockedOn=t,void wt(e.priority,(function(){Ct(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bo(r))&&St(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Zt(e,t,r){Ut(e)&&r.delete(t)}function jt(){Rt=!1,null!==Ot&&Ut(Ot)&&(Ot=null),null!==It&&Ut(It)&&(It=null),null!==Pt&&Ut(Pt)&&(Pt=null),At.forEach(Zt),Nt.forEach(Zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Ft(e){function t(t){return Ht(t,e)}if(0<kt.length){Ht(kt[0],e);for(var r=1;r<kt.length;r++){var n=kt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ot&&Ht(Ot,e),null!==It&&Ht(It,e),null!==Pt&&Ht(Pt,e),At.forEach(t),Nt.forEach(t),r=0;r<Lt.length;r++)(n=Lt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Lt.length&&null===(r=Lt[0]).blockedOn;)Bt(r),null===r.blockedOn&&Lt.shift()}var zt=b.ReactCurrentBatchConfig,Gt=!0;function qt(e,t,r,n){var o=yt,i=zt.transition;zt.transition=null;try{yt=1,Wt(e,t,r,n)}finally{yt=o,zt.transition=i}}function Vt(e,t,r,n){var o=yt,i=zt.transition;zt.transition=null;try{yt=4,Wt(e,t,r,n)}finally{yt=o,zt.transition=i}}function Wt(e,t,r,n){if(Gt){var o=Kt(e,t,r,n);if(null===o)Gn(e,t,n,Yt,r),xt(e,n);else if(function(e,t,r,n,o){switch(t){case"focusin":return Ot=Dt(Ot,e,t,r,n,o),!0;case"dragenter":return It=Dt(It,e,t,r,n,o),!0;case"mouseover":return Pt=Dt(Pt,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return At.set(i,Dt(At.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Nt.set(i,Dt(Nt.get(i)||null,e,t,r,n,o)),!0}return!1}(o,e,t,r,n))n.stopPropagation();else if(xt(e,n),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&Et(i),null===(i=Kt(e,t,r,n))&&Gn(e,t,n,Yt,r),i===o)break;o=i}null!==o&&n.stopPropagation()}else Gn(e,t,n,null,r)}}var Yt=null;function Kt(e,t,r,n){if(Yt=null,null!==(e=yo(e=Ee(n))))if(null===(t=Fe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=Xt,n=r.length,o="value"in Qt?Qt.value:Qt.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function or(e){function t(t,r,n,o,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,sr,ar,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=or(lr),ur=B({},lr,{view:0,detail:0}),dr=or(ur),hr=B({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(ir=e.screenX-ar.screenX,sr=e.screenY-ar.screenY):sr=ir=0,ar=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),pr=or(hr),fr=or(B({},hr,{dataTransfer:0})),gr=or(B({},ur,{relatedTarget:0})),mr=or(B({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=B({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=or(vr),yr=or(B({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Er={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Tr(){return Cr}var wr=B({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Er[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rr=or(wr),kr=or(B({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Or=or(B({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),Ir=or(B({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=B({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=or(Pr),Nr=[9,13,27,32],Lr=u&&"CompositionEvent"in window,Mr=null;u&&"documentMode"in document&&(Mr=document.documentMode);var xr=u&&"TextEvent"in window&&!Mr,Dr=u&&(!Lr||Mr&&8<Mr&&11>=Mr),Br=String.fromCharCode(32),Ur=!1;function Zr(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Hr=!1,Fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fr[e.type]:"textarea"===t}function Gr(e,t,r,n){Re(n),0<(t=Vn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Vr=null;function Wr(e){Un(e,0)}function Yr(e){if(W(Eo(e)))return e}function Kr(e,t){if("change"===e)return t}var $r=!1;if(u){var Qr;if(u){var Xr="oninput"in document;if(!Xr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Xr="function"==typeof Jr.oninput}Qr=Xr}else Qr=!1;$r=Qr&&(!document.documentMode||9<document.documentMode)}function en(){qr&&(qr.detachEvent("onpropertychange",tn),Vr=qr=null)}function tn(e){if("value"===e.propertyName&&Yr(Vr)){var t=[];Gr(t,Vr,e,Ee(e)),Ae(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Vr=r,(qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Vr)}function on(e,t){if("click"===e)return Yr(t)}function sn(e,t){if("input"===e||"change"===e)return Yr(t)}var an="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ln(e,t){if(an(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!d.call(t,o)||!an(e[o],t[o]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=void 0===n.end?i:Math.min(n.end,o),!e.extend&&i>n&&(o=n,n=i,i=o),o=un(r,i);var s=un(r,n);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=u&&"documentMode"in document&&11>=document.documentMode,mn=null,vn=null,_n=null,yn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==mn||mn!==Y(n)||(n="selectionStart"in(n=mn)&&pn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},_n&&ln(_n,n)||(_n=n,0<(n=Vn(vn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function En(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sn={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionend:En("Transition","TransitionEnd")},Cn={},Tn={};function wn(e){if(Cn[e])return Cn[e];if(!Sn[e])return e;var t,r=Sn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Tn)return Cn[e]=r[t];return e}u&&(Tn=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);var Rn=wn("animationend"),kn=wn("animationiteration"),On=wn("animationstart"),In=wn("transitionend"),Pn=new Map,An="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){Pn.set(e,t),l(t,[e])}for(var Ln=0;Ln<An.length;Ln++){var Mn=An[Ln];Nn(Mn.toLowerCase(),"on"+(Mn[0].toUpperCase()+Mn.slice(1)))}Nn(Rn,"onAnimationEnd"),Nn(kn,"onAnimationIteration"),Nn(On,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(xn));function Bn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,o,s,a,l,c){if(He.apply(this,arguments),De){if(!De)throw Error(i(198));var u=Be;De=!1,Be=null,Ue||(Ue=!0,Ze=u)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Bn(o,a,c),i=l}else for(s=0;s<n.length;s++){if(l=(a=n[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Bn(o,a,c),i=l}}}if(Ue)throw e=Ze,Ue=!1,Ze=null,e}function Zn(e,t){var r=t[mo];void 0===r&&(r=t[mo]=new Set);var n=e+"__bubble";r.has(n)||(zn(t,e,2,!1),r.add(n))}function jn(e,t,r){var n=0;t&&(n|=4),zn(r,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Fn(e){if(!e[Hn]){e[Hn]=!0,s.forEach((function(t){"selectionchange"!==t&&(Dn.has(t)||jn(t,!1,e),jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,jn("selectionchange",!1,t))}}function zn(e,t,r,n){switch($t(t)){case 1:var o=qt;break;case 4:o=Vt;break;default:o=Wt}r=o.bind(null,t,r,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Gn(e,t,r,n,o){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=yo(a)))return;if(5===(l=s.tag)||6===l){n=i=s;continue e}a=a.parentNode}}n=n.return}Ae((function(){var n=i,o=Ee(r),s=[];e:{var a=Pn.get(e);if(void 0!==a){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Rr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Or;break;case Rn:case kn:case On:l=mr;break;case In:l=Ir;break;case"scroll":l=dr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kr}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=n;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&null!=(g=Ne(f,h))&&u.push(qn(f,g,p))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,r,o),s.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!yo(c)&&!c[go])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?yo(c):null)&&(c!==(d=Fe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pr,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kr,g="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:Eo(l),p=null==c?a:Eo(c),(a=new u(g,f+"leave",l,r,o)).target=d,a.relatedTarget=p,g=null,yo(o)===n&&((u=new u(h,f+"enter",c,r,o)).target=p,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Wn(p))f++;for(p=0,g=h;g;g=Wn(g))p++;for(;0<f-p;)u=Wn(u),f--;for(;0<p-f;)h=Wn(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wn(u),h=Wn(h)}u=null}else u=null;null!==l&&Yn(s,a,l,u,!1),null!==c&&null!==d&&Yn(s,d,c,u,!0)}if("select"===(l=(a=n?Eo(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kr;else if(zr(a))if($r)m=sn;else{m=nn;var v=rn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=on);switch(m&&(m=m(e,n))?Gr(s,m,r,o):(v&&v(e,a,n),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=n?Eo(n):window,e){case"focusin":(zr(v)||"true"===v.contentEditable)&&(mn=v,vn=n,_n=null);break;case"focusout":_n=vn=mn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,bn(s,r,o);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":bn(s,r,o)}var _;if(Lr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hr?Zr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Dr&&"ko"!==r.locale&&(Hr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hr&&(_=er()):(Xt="value"in(Qt=o)?Qt.value:Qt.textContent,Hr=!0)),0<(v=Vn(n,y)).length&&(y=new yr(y,e,null,r,o),s.push({event:y,listeners:v}),(_||null!==(_=jr(r)))&&(y.data=_))),(_=xr?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Br);case"textInput":return(e=t.data)===Br&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Hr)return"compositionend"===e||!Lr&&Zr(e,t)?(e=er(),Jt=Xt=Qt=null,Hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=Vn(n,"onBeforeInput")).length&&(o=new yr("onBeforeInput","beforeinput",null,r,o),s.push({event:o,listeners:n}),o.data=_)}Un(s,t)}))}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vn(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ne(e,r))&&n.unshift(qn(e,i,o)),null!=(i=Ne(e,t))&&n.push(qn(e,i,o))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,o){for(var i=t._reactName,s=[];null!==r&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=Ne(r,i))&&s.unshift(qn(r,l,a)):o||null!=(l=Ne(r,i))&&s.push(qn(r,l,a))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Kn=/\r\n?/g,$n=/\u0000|\uFFFD/g;function Qn(e){return("string"==typeof e?e:""+e).replace(Kn,"\n").replace($n,"")}function Xn(e,t,r){if(t=Qn(t),Qn(e)!==t&&r)throw Error(i(425))}function Jn(){}var eo=null,to=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,io="function"==typeof Promise?Promise:void 0,so="function"==typeof queueMicrotask?queueMicrotask:void 0!==io?function(e){return io.resolve(null).then(e).catch(ao)}:no;function ao(e){setTimeout((function(){throw e}))}function lo(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===n)return e.removeChild(o),void Ft(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=o}while(r);Ft(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,vo="__reactListeners$"+ho,_o="__reactHandles$"+ho;function yo(e){var t=e[po];if(t)return t;for(var r=e.parentNode;r;){if(t=r[go]||r[po]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=uo(e);null!==e;){if(r=e[po])return r;e=uo(e)}return t}r=(e=r).parentNode}return null}function bo(e){return!(e=e[po]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Eo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function So(e){return e[fo]||null}var Co=[],To=-1;function wo(e){return{current:e}}function Ro(e){0>To||(e.current=Co[To],Co[To]=null,To--)}function ko(e,t){To++,Co[To]=e.current,e.current=t}var Oo={},Io=wo(Oo),Po=wo(!1),Ao=Oo;function No(e,t){var r=e.type.contextTypes;if(!r)return Oo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lo(e){return null!=e.childContextTypes}function Mo(){Ro(Po),Ro(Io)}function xo(e,t,r){if(Io.current!==Oo)throw Error(i(168));ko(Io,t),ko(Po,r)}function Do(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in t))throw Error(i(108,z(e)||"Unknown",o));return B({},r,n)}function Bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oo,Ao=Io.current,ko(Io,e),ko(Po,Po.current),!0}function Uo(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Do(e,t,Ao),n.__reactInternalMemoizedMergedChildContext=e,Ro(Po),Ro(Io),ko(Io,e)):Ro(Po),ko(Po,r)}var Zo=null,jo=!1,Ho=!1;function Fo(e){null===Zo?Zo=[e]:Zo.push(e)}function zo(){if(!Ho&&null!==Zo){Ho=!0;var e=0,t=yt;try{var r=Zo;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Zo=null,jo=!1}catch(t){throw null!==Zo&&(Zo=Zo.slice(e+1)),We(Je,zo),t}finally{yt=t,Ho=!1}}return null}var Go=[],qo=0,Vo=null,Wo=0,Yo=[],Ko=0,$o=null,Qo=1,Xo="";function Jo(e,t){Go[qo++]=Wo,Go[qo++]=Vo,Vo=e,Wo=t}function ei(e,t,r){Yo[Ko++]=Qo,Yo[Ko++]=Xo,Yo[Ko++]=$o,$o=e;var n=Qo;e=Xo;var o=32-st(n)-1;n&=~(1<<o),r+=1;var i=32-st(t)+o;if(30<i){var s=o-o%5;i=(n&(1<<s)-1).toString(32),n>>=s,o-=s,Qo=1<<32-st(t)+o|r<<o|n,Xo=i+e}else Qo=1<<i|r<<o|n,Xo=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ri(e){for(;e===Vo;)Vo=Go[--qo],Go[qo]=null,Wo=Go[--qo],Go[qo]=null;for(;e===$o;)$o=Yo[--Ko],Yo[Ko]=null,Xo=Yo[--Ko],Yo[Ko]=null,Qo=Yo[--Ko],Yo[Ko]=null}var ni=null,oi=null,ii=!1,si=null;function ai(e,t){var r=Nc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function li(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==$o?{id:Qo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Nc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ni=e,oi=null,!0);default:return!1}}function ci(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var r=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(r.nextSibling);var n=ni;t&&li(e,t)?ai(n,r):(e.flags=-4097&e.flags|2,ii=!1,ni=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)ai(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}oi=null}}else oi=ni?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=ni=null,ii=!1}function gi(e){null===si?si=[e]:si.push(e)}var mi=b.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var r in t=B({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var _i=wo(null),yi=null,bi=null,Ei=null;function Si(){Ei=bi=yi=null}function Ci(e){var t=_i.current;Ro(_i),e._currentValue=t}function Ti(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wi(e,t){yi=e,Ei=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ri(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var ki=null;function Oi(e){null===ki?ki=[e]:ki.push(e)}function Ii(e,t,r,n){var o=t.interleaved;return null===o?(r.next=r,Oi(t)):(r.next=o.next,o.next=r),t.interleaved=r,Pi(e,n)}function Pi(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ai=!1;function Ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&Il)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Pi(e,r)}return null===(o=n.interleaved)?(t.next=t,Oi(n)):(t.next=o.next,o.next=t),n.interleaved=t,Pi(e,r)}function Di(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,_t(e,r)}}function Bi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ui(e,t,r,n){var o=e.updateQueue;Ai=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==i){var d=o.baseState;for(s=0,u=c=l=null,a=i;;){var h=a.lane,p=a.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(h=t,p=r,g.tag){case 1:if("function"==typeof(f=g.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=g.payload)?f.call(p,d,h):f))break e;d=B({},d,h);break e;case 2:Ai=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(h=a).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Bl|=s,e.lanes=s,e.memoizedState=d}}function Zi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=r,"function"!=typeof o)throw Error(i(191,o));o.call(n)}}}var ji=(new n.Component).refs;function Hi(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:B({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Fi={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tc(),o=rc(e),i=Mi(n,o);i.payload=t,null!=r&&(i.callback=r),null!==(t=xi(e,i,o))&&(nc(t,e,o,n),Di(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tc(),o=rc(e),i=Mi(n,o);i.tag=1,i.payload=t,null!=r&&(i.callback=r),null!==(t=xi(e,i,o))&&(nc(t,e,o,n),Di(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tc(),n=rc(e),o=Mi(r,n);o.tag=2,null!=t&&(o.callback=t),null!==(t=xi(e,o,n))&&(nc(t,e,n,r),Di(t,e,n))}};function zi(e,t,r,n,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!(t.prototype&&t.prototype.isPureReactComponent&&ln(r,n)&&ln(o,i))}function Gi(e,t,r){var n=!1,o=Oo,i=t.contextType;return"object"==typeof i&&null!==i?i=Ri(i):(o=Lo(t)?Ao:Io.current,i=(n=null!=(n=t.contextTypes))?No(e,o):Oo),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function qi(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Fi.enqueueReplaceState(t,t.state,null)}function Vi(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=ji,Ni(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=Ri(i):(i=Lo(t)?Ao:Io.current,o.context=No(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Hi(e,t,i,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Fi.enqueueReplaceState(o,o.state,null),Ui(e,r,o,n),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function Wi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var o=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;t===ji&&(t=o.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ki(e){return(0,e._init)(e._payload)}function $i(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Uc(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===C?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===N&&Ki(i)===t.type)?((n=o(t,r.props)).ref=Wi(e,t,r),n.return=e,n):((n=xc(r.type,r.key,r.props,null,e.mode,n)).ref=Wi(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Zc(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Dc(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Uc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(r=xc(t.type,t.key,t.props,null,e.mode,r)).ref=Wi(e,null,t),r.return=e,r;case S:return(t=Zc(t,e.mode,r)).return=e,t;case N:return h(e,(0,t._init)(t._payload),r)}if(te(t)||x(t))return(t=Dc(t,e.mode,r,null)).return=e,t;Yi(e,t)}return null}function p(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==o?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return r.key===o?c(e,t,r,n):null;case S:return r.key===o?u(e,t,r,n):null;case N:return p(e,t,(o=r._init)(r._payload),n)}if(te(r)||x(r))return null!==o?null:d(e,t,r,n,null);Yi(e,r)}return null}function f(e,t,r,n,o){if("string"==typeof n&&""!==n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return c(t,e=e.get(null===n.key?r:n.key)||null,n,o);case S:return u(t,e=e.get(null===n.key?r:n.key)||null,n,o);case N:return f(e,t,r,(0,n._init)(n._payload),o)}if(te(n)||x(n))return d(t,e=e.get(r)||null,n,o,null);Yi(t,n)}return null}function g(o,i,a,l){for(var c=null,u=null,d=i,g=i=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=p(o,d,a[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),i=s(v,i,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===a.length)return r(o,d),ii&&Jo(o,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(o,a[g],l))&&(i=s(d,i,g),null===u?c=d:u.sibling=d,u=d);return ii&&Jo(o,g),c}for(d=n(o,d);g<a.length;g++)null!==(m=f(d,o,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=s(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(o,e)})),ii&&Jo(o,g),c}function m(o,a,l,c){var u=x(l);if("function"!=typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,g=a,m=a=0,v=null,_=l.next();null!==g&&!_.done;m++,_=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=p(o,g,_.value,c);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(o,g),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y,g=v}if(_.done)return r(o,g),ii&&Jo(o,m),u;if(null===g){for(;!_.done;m++,_=l.next())null!==(_=h(o,_.value,c))&&(a=s(_,a,m),null===d?u=_:d.sibling=_,d=_);return ii&&Jo(o,m),u}for(g=n(o,g);!_.done;m++,_=l.next())null!==(_=f(g,o,m,_.value,c))&&(e&&null!==_.alternate&&g.delete(null===_.key?m:_.key),a=s(_,a,m),null===d?u=_:d.sibling=_,d=_);return e&&g.forEach((function(e){return t(o,e)})),ii&&Jo(o,m),u}return function e(n,i,s,l){if("object"==typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case E:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===C){if(7===u.tag){r(n,u.sibling),(i=o(u,s.props.children)).return=n,n=i;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===N&&Ki(c)===u.type){r(n,u.sibling),(i=o(u,s.props)).ref=Wi(n,u,s),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}s.type===C?((i=Dc(s.props.children,n.mode,l,s.key)).return=n,n=i):((l=xc(s.type,s.key,s.props,null,n.mode,l)).ref=Wi(n,i,s),l.return=n,n=l)}return a(n);case S:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){r(n,i.sibling),(i=o(i,s.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Zc(s,n.mode,l)).return=n,n=i}return a(n);case N:return e(n,i,(u=s._init)(s._payload),l)}if(te(s))return g(n,i,s,l);if(x(s))return m(n,i,s,l);Yi(n,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==i&&6===i.tag?(r(n,i.sibling),(i=o(i,s)).return=n,n=i):(r(n,i),(i=Uc(s,n.mode,l)).return=n,n=i),a(n)):r(n,i)}}var Qi=$i(!0),Xi=$i(!1),Ji={},es=wo(Ji),ts=wo(Ji),rs=wo(Ji);function ns(e){if(e===Ji)throw Error(i(174));return e}function os(e,t){switch(ko(rs,t),ko(ts,e),ko(es,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ro(es),ko(es,t)}function is(){Ro(es),Ro(ts),Ro(rs)}function ss(e){ns(rs.current);var t=ns(es.current),r=le(t,e.type);t!==r&&(ko(ts,e),ko(es,r))}function as(e){ts.current===e&&(Ro(es),Ro(ts))}var ls=wo(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=b.ReactCurrentDispatcher,ps=b.ReactCurrentBatchConfig,fs=0,gs=null,ms=null,vs=null,_s=!1,ys=!1,bs=0,Es=0;function Ss(){throw Error(i(321))}function Cs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!an(e[r],t[r]))return!1;return!0}function Ts(e,t,r,n,o,s){if(fs=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:la,e=r(n,o),ys){s=0;do{if(ys=!1,bs=0,25<=s)throw Error(i(301));s+=1,vs=ms=null,t.updateQueue=null,hs.current=ca,e=r(n,o)}while(ys)}if(hs.current=sa,t=null!==ms&&null!==ms.next,fs=0,vs=ms=gs=null,_s=!1,t)throw Error(i(300));return e}function ws(){var e=0!==bs;return bs=0,e}function Rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function ks(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function Os(e,t){return"function"==typeof t?t(e):t}function Is(e){var t=ks(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=ms,o=n.baseQueue,s=r.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}n.baseQueue=o=s,r.pending=null}if(null!==o){s=o.next,n=n.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((fs&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=n):c=c.next=h,gs.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=n:c.next=l,an(n,t.memoizedState)||(ba=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){o=e;do{s=o.lane,gs.lanes|=s,Bl|=s,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ps(e){var t=ks(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,s=t.memoizedState;if(null!==o){r.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);an(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function As(){}function Ns(e,t){var r=gs,n=ks(),o=t(),s=!an(n.memoizedState,o);if(s&&(n.memoizedState=o,ba=!0),n=n.queue,Gs(xs.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(r.flags|=2048,Zs(9,Ms.bind(null,r,n,o,t),void 0,null),null===Pl)throw Error(i(349));0!=(30&fs)||Ls(r,t,o)}return o}function Ls(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ms(e,t,r,n){t.value=r,t.getSnapshot=n,Ds(t)&&Bs(e)}function xs(e,t,r){return r((function(){Ds(t)&&Bs(e)}))}function Ds(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!an(e,r)}catch(e){return!0}}function Bs(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Us(e){var t=Rs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,gs,e),[t.memoizedState,e]}function Zs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function js(){return ks().memoizedState}function Hs(e,t,r,n){var o=Rs();gs.flags|=e,o.memoizedState=Zs(1|t,r,void 0,void 0===n?null:n)}function Fs(e,t,r,n){var o=ks();n=void 0===n?null:n;var i=void 0;if(null!==ms){var s=ms.memoizedState;if(i=s.destroy,null!==n&&Cs(n,s.deps))return void(o.memoizedState=Zs(t,r,i,n))}gs.flags|=e,o.memoizedState=Zs(1|t,r,i,n)}function zs(e,t){return Hs(8390656,8,e,t)}function Gs(e,t){return Fs(2048,8,e,t)}function qs(e,t){return Fs(4,2,e,t)}function Vs(e,t){return Fs(4,4,e,t)}function Ws(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,r){return r=null!=r?r.concat([e]):null,Fs(4,4,Ws.bind(null,t,e),r)}function Ks(){}function $s(e,t){var r=ks();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Cs(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qs(e,t){var r=ks();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Cs(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xs(e,t,r){return 0==(21&fs)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=r):(an(r,t)||(r=gt(),gs.lanes|=r,Bl|=r,e.baseState=!0),t)}function Js(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=ps.transition;ps.transition={};try{e(!1),t()}finally{yt=r,ps.transition=n}}function ea(){return ks().memoizedState}function ta(e,t,r){var n=rc(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},na(e)?oa(t,r):null!==(r=Ii(e,t,r,n))&&(nc(r,e,n,tc()),ia(r,t,n))}function ra(e,t,r){var n=rc(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(e))oa(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,r);if(o.hasEagerState=!0,o.eagerState=a,an(a,s)){var l=t.interleaved;return null===l?(o.next=o,Oi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(r=Ii(e,t,o,n))&&(nc(r,e,n,o=tc()),ia(r,t,n))}}function na(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function oa(e,t){ys=_s=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ia(e,t,r){if(0!=(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,_t(e,r)}}var sa={readContext:Ri,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:Ri,useCallback:function(e,t){return Rs().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:zs,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Hs(4194308,4,Ws.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hs(4,2,e,t)},useMemo:function(e,t){var r=Rs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rs();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ta.bind(null,gs,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Rs().memoizedState=e},useState:Us,useDebugValue:Ks,useDeferredValue:function(e){return Rs().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=Js.bind(null,e[1]),Rs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=gs,o=Rs();if(ii){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Pl)throw Error(i(349));0!=(30&fs)||Ls(n,t,r)}o.memoizedState=r;var s={value:r,getSnapshot:t};return o.queue=s,zs(xs.bind(null,n,s,e),[e]),n.flags|=2048,Zs(9,Ms.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Rs(),t=Pl.identifierPrefix;if(ii){var r=Xo;t=":"+t+"R"+(r=(Qo&~(1<<32-st(Qo)-1)).toString(32)+r),0<(r=bs++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=Es++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ri,useCallback:$s,useContext:Ri,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:Is,useRef:js,useState:function(){return Is(Os)},useDebugValue:Ks,useDeferredValue:function(e){return Xs(ks(),ms.memoizedState,e)},useTransition:function(){return[Is(Os)[0],ks().memoizedState]},useMutableSource:As,useSyncExternalStore:Ns,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ri,useCallback:$s,useContext:Ri,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:Ps,useRef:js,useState:function(){return Ps(Os)},useDebugValue:Ks,useDeferredValue:function(e){var t=ks();return null===ms?t.memoizedState=e:Xs(t,ms.memoizedState,e)},useTransition:function(){return[Ps(Os)[0],ks().memoizedState]},useMutableSource:As,useSyncExternalStore:Ns,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var r="",n=t;do{r+=H(n),n=n.return}while(n);var o=r}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function da(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var pa="function"==typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=Mi(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ql||(ql=!0,Vl=n),ha(0,t)},r}function ga(e,t,r){(r=Mi(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){ha(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){ha(0,t),"function"!=typeof n&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ma(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pa;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=Rc.bind(null,e,t,r),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,r,n,o){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Mi(-1,1)).tag=2,xi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ya=b.ReactCurrentOwner,ba=!1;function Ea(e,t,r,n){t.child=null===e?Xi(t,null,r,n):Qi(t,e.child,r,n)}function Sa(e,t,r,n,o){r=r.render;var i=t.ref;return wi(t,o),n=Ts(e,t,r,n,i,o),r=ws(),null===e||ba?(ii&&r&&ti(t),t.flags|=1,Ea(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qa(e,t,o))}function Ca(e,t,r,n,o){if(null===e){var i=r.type;return"function"!=typeof i||Lc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=xc(r.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ta(e,t,i,n,o))}if(i=e.child,0==(e.lanes&o)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(s,n)&&e.ref===t.ref)return qa(e,t,o)}return t.flags|=1,(e=Mc(i,n)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,r,n,o){if(null!==e){var i=e.memoizedProps;if(ln(i,n)&&e.ref===t.ref){if(ba=!1,t.pendingProps=n=i,0==(e.lanes&o))return t.lanes=e.lanes,qa(e,t,o);0!=(131072&e.flags)&&(ba=!0)}}return ka(e,t,r,n,o)}function wa(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ko(Ml,Ll),Ll|=r;else{if(0==(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ko(Ml,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,ko(Ml,Ll),Ll|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,ko(Ml,Ll),Ll|=n;return Ea(e,t,o,r),t.child}function Ra(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,r,n,o){var i=Lo(r)?Ao:Io.current;return i=No(t,i),wi(t,o),r=Ts(e,t,r,n,i,o),n=ws(),null===e||ba?(ii&&n&&ti(t),t.flags|=1,Ea(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qa(e,t,o))}function Oa(e,t,r,n,o){if(Lo(r)){var i=!0;Bo(t)}else i=!1;if(wi(t,o),null===t.stateNode)Ga(e,t),Gi(t,r,n),Vi(t,r,n,o),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=r.contextType;c="object"==typeof c&&null!==c?Ri(c):No(t,c=Lo(r)?Ao:Io.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&qi(t,s,n,c),Ai=!1;var h=t.memoizedState;s.state=h,Ui(t,n,s,o),l=t.memoizedState,a!==n||h!==l||Po.current||Ai?("function"==typeof u&&(Hi(t,r,u,n),l=t.memoizedState),(a=Ai||zi(t,r,a,n,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Li(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vi(t.type,a),s.props=c,d=t.pendingProps,h=s.context,l="object"==typeof(l=r.contextType)&&null!==l?Ri(l):No(t,l=Lo(r)?Ao:Io.current);var p=r.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&qi(t,s,n,l),Ai=!1,h=t.memoizedState,s.state=h,Ui(t,n,s,o);var f=t.memoizedState;a!==d||h!==f||Po.current||Ai?("function"==typeof p&&(Hi(t,r,p,n),f=t.memoizedState),(c=Ai||zi(t,r,c,n,h,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ia(e,t,r,n,i,o)}function Ia(e,t,r,n,o,i){Ra(e,t);var s=0!=(128&t.flags);if(!n&&!s)return o&&Uo(t,r,!1),qa(e,t,i);n=t.stateNode,ya.current=t;var a=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,a,i)):Ea(e,t,a,i),t.memoizedState=n.state,o&&Uo(t,r,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?xo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xo(0,t.context,!1),os(e,t.containerInfo)}function Aa(e,t,r,n,o){return fi(),gi(o),t.flags|=256,Ea(e,t,r,n),t.child}var Na,La,Ma,xa,Da={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,r){var n,o=t.pendingProps,s=ls.current,a=!1,l=0!=(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!=(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ko(ls,1&s),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,o,0,null),e=Dc(e,o,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(r),t.memoizedState=Da,e):Za(t,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,o,s,a){if(r)return 256&t.flags?(t.flags&=-257,ja(e,t,a,n=da(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,o=t.mode,n=Bc({mode:"visible",children:n.children},o,0,null),(s=Dc(s,o,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!=(1&t.mode)&&Qi(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=Da,s);if(0==(1&t.mode))return ja(e,t,a,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var l=n.dgst;return n=l,ja(e,t,a,n=da(s=Error(i(419)),n,void 0))}if(l=0!=(a&e.childLanes),ba||l){if(null!==(n=Pl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!=(o&(n.suspendedLanes|a))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Pi(e,o),nc(n,e,o,-1))}return mc(),ja(e,t,a,n=da(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,oi=co(o.nextSibling),ni=t,ii=!0,si=null,null!==e&&(Yo[Ko++]=Qo,Yo[Ko++]=Xo,Yo[Ko++]=$o,Qo=e.id,Xo=e.overflow,$o=t),(t=Za(t,n.children)).flags|=4096,t)}(e,t,l,o,n,s,r);if(a){a=o.fallback,l=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 0==(1&l)&&t.child!==s?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Mc(n,a):(a=Dc(a,l,r,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Da,o}return e=(a=e.child).sibling,o=Mc(a,{mode:"visible",children:o.children}),0==(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Za(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,r,n){return null!==n&&gi(n),Qi(t,e.child,null,r),(e=Za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ti(e.return,t,r)}function Fa(e,t,r,n,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function za(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(Ea(e,t,n.children,r),0!=(2&(n=ls.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,r,t);else if(19===e.tag)Ha(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ko(ls,n),0==(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===cs(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Fa(t,!1,o,r,i);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===cs(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Fa(t,!0,r,null,i);break;case"together":Fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Mc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Mc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Va(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ya(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Lo(t.type)&&Mo(),Wa(t),null;case 3:return n=t.stateNode,is(),Ro(Po),Ro(Io),ds(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==si&&(ac(si),si=null))),La(e,t),Wa(t),null;case 5:as(t);var o=ns(rs.current);if(r=t.type,null!==e&&null!=t.stateNode)Ma(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Wa(t),null}if(e=ns(es.current),hi(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[po]=t,n[fo]=s,e=0!=(1&t.mode),r){case"dialog":Zn("cancel",n),Zn("close",n);break;case"iframe":case"object":case"embed":Zn("load",n);break;case"video":case"audio":for(o=0;o<xn.length;o++)Zn(xn[o],n);break;case"source":Zn("error",n);break;case"img":case"image":case"link":Zn("error",n),Zn("load",n);break;case"details":Zn("toggle",n);break;case"input":$(n,s),Zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Zn("invalid",n);break;case"textarea":oe(n,s),Zn("invalid",n)}for(var l in _e(r,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),o=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),o=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Zn("scroll",n)}switch(r){case"input":V(n),J(n,s,!0);break;case"textarea":V(n),se(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=Jn)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[po]=t,e[fo]=n,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":Zn("cancel",e),Zn("close",e),o=n;break;case"iframe":case"object":case"embed":Zn("load",e),o=n;break;case"video":case"audio":for(o=0;o<xn.length;o++)Zn(xn[o],e);o=n;break;case"source":Zn("error",e),o=n;break;case"img":case"image":case"link":Zn("error",e),Zn("load",e),o=n;break;case"details":Zn("toggle",e),o=n;break;case"input":$(e,n),o=K(e,n),Zn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=B({},n,{value:void 0}),Zn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),Zn("invalid",e)}for(s in _e(r,o),c=o)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"==typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Zn("scroll",e):null!=u&&y(e,s,u,l))}switch(r){case"input":V(e),J(e,n,!1);break;case"textarea":V(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+G(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)xa(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(i(166));if(r=ns(rs.current),ns(es.current),hi(t)){if(n=t.stateNode,r=t.memoizedProps,n[po]=t,(s=n.nodeValue!==r)&&null!==(e=ni))switch(e.tag){case 3:Xn(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!=(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[po]=t,t.stateNode=n}return Wa(t),null;case 13:if(Ro(ls),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!=(1&t.mode)&&0==(128&t.flags))pi(),fi(),t.flags|=98560,s=!1;else if(s=hi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[po]=t}else fi(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==si&&(ac(si),si=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=r,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ls.current)?0===xl&&(xl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return is(),La(e,t),null===e&&Fn(t.stateNode.containerInfo),Wa(t),null;case 10:return Ci(t.type._context),Wa(t),null;case 19:if(Ro(ls),null===(s=t.memoizedState))return Wa(t),null;if(n=0!=(128&t.flags),null===(l=s.rendering))if(n)Va(s,!1);else{if(0!==xl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Va(s,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ko(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>zl&&(t.flags|=128,n=!0,Va(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=cs(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Va(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ii)return Wa(t),null}else 2*Qe()-s.renderingStartTime>zl&&1073741824!==r&&(t.flags|=128,n=!0,Va(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,r=ls.current,ko(ls,n?1&r|2:1&r),t):(Wa(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&Ll)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ka(e,t){switch(ri(t),t.tag){case 1:return Lo(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),Ro(Po),Ro(Io),ds(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ro(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ro(ls),null;case 4:return is(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Na=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},La=function(){},Ma=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,ns(es.current);var i,s=null;switch(r){case"input":o=K(e,o),n=K(e,n),s=[];break;case"select":o=B({},o,{value:void 0}),n=B({},n,{value:void 0}),s=[];break;case"textarea":o=ne(e,o),n=ne(e,n),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof n.onClick&&(e.onclick=Jn)}for(u in _e(r,n),r=null,o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=o?o[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Zn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},xa=function(e,t,r,n){r!==n&&(t.flags|=4)};var $a=!1,Qa=!1,Xa="function"==typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){wc(e,t,r)}else r.current=null}function tl(e,t,r){try{r()}catch(r){wc(e,t,r)}}var rl=!1;function nl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&tl(t,r,i)}o=o.next}while(o!==n)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[mo],delete t[vo],delete t[_o]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}function ul(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ul(e,t,r),e=e.sibling;null!==e;)ul(e,t,r),e=e.sibling}var dl=null,hl=!1;function pl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,r)}catch(e){}switch(r.tag){case 5:Qa||el(r,t);case 6:var n=dl,o=hl;dl=null,pl(e,t,r),hl=o,null!==(dl=n)&&(hl?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(hl?(e=dl,r=r.stateNode,8===e.nodeType?lo(e.parentNode,r):1===e.nodeType&&lo(e,r),Ft(e)):lo(dl,r.stateNode));break;case 4:n=dl,o=hl,dl=r.stateNode.containerInfo,hl=!0,pl(e,t,r),dl=n,hl=o;break;case 0:case 11:case 14:case 15:if(!Qa&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){o=n=n.next;do{var i=o,s=i.destroy;i=i.tag,void 0!==s&&(0!=(2&i)||0!=(4&i))&&tl(r,t,s),o=o.next}while(o!==n)}pl(e,t,r);break;case 1:if(!Qa&&(el(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){wc(r,t,e)}pl(e,t,r);break;case 21:pl(e,t,r);break;case 22:1&r.mode?(Qa=(n=Qa)||null!==r.memoizedState,pl(e,t,r),Qa=n):pl(e,t,r);break;default:pl(e,t,r)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Xa),t.forEach((function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var o=r[n];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));fl(s,a,o),dl=null,hl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){wc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),_l(e),4&n){try{nl(3,e,e.return),ol(3,e)}catch(t){wc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){wc(e,e.return,t)}}break;case 1:ml(t,e),_l(e),512&n&&null!==r&&el(r,r.return);break;case 5:if(ml(t,e),_l(e),512&n&&null!==r&&el(r,r.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(t){wc(e,e.return,t)}}if(4&n&&null!=(o=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(o,s),ye(l,a);var u=ye(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):y(o,d,h,u)}switch(l){case"input":X(o,s);break;case"textarea":ie(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?re(o,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?re(o,!!s.multiple,s.defaultValue,!0):re(o,!!s.multiple,s.multiple?[]:"",!1))}o[fo]=s}catch(t){wc(e,e.return,t)}}break;case 6:if(ml(t,e),_l(e),4&n){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(t){wc(e,e.return,t)}}break;case 3:if(ml(t,e),_l(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(t){wc(e,e.return,t)}break;case 4:default:ml(t,e),_l(e);break;case 13:ml(t,e),_l(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(Fl=Qe())),4&n&&gl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qa=(u=Qa)||d,ml(t,e),Qa=u):ml(t,e),_l(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Ja=e,d=e.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"==typeof g.componentWillUnmount){n=p,r=p.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){wc(n,r,e)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,Ja=f):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(t){wc(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){wc(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),_l(e),4&n&&gl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(al(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(he(o,""),n.flags&=-33),ul(e,ll(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(i(161))}}catch(t){wc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Ja=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!=(1&e.mode);null!==Ja;){var o=Ja,i=o.child;if(22===o.tag&&n){var s=null!==o.memoizedState||$a;if(!s){var a=o.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=$a;var c=Qa;if($a=s,(Qa=l)&&!c)for(Ja=o;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Cl(o):null!==l?(l.return=s,Ja=l):Cl(o);for(;null!==i;)Ja=i,bl(i,t,r),i=i.sibling;Ja=o,$a=a,Qa=c}El(e)}else 0!=(8772&o.subtreeFlags)&&null!==i?(i.return=o,Ja=i):El(e)}}function El(e){for(;null!==Ja;){var t=Ja;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||ol(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qa)if(null===r)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:vi(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Zi(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Zi(t,a,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ft(h)}}}break;default:throw Error(i(163))}Qa||512&t.flags&&il(t)}catch(e){wc(t,t.return,e)}}if(t===e){Ja=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ja=r;break}Ja=t.return}}function Sl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ja=r;break}Ja=t.return}}function Cl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ol(4,t)}catch(e){wc(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(e){wc(t,o,e)}}var i=t.return;try{il(t)}catch(e){wc(t,i,e)}break;case 5:var s=t.return;try{il(t)}catch(e){wc(t,s,e)}}}catch(e){wc(t,t.return,e)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Tl,wl=Math.ceil,Rl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Ol=b.ReactCurrentBatchConfig,Il=0,Pl=null,Al=null,Nl=0,Ll=0,Ml=wo(0),xl=0,Dl=null,Bl=0,Ul=0,Zl=0,jl=null,Hl=null,Fl=0,zl=1/0,Gl=null,ql=!1,Vl=null,Wl=null,Yl=!1,Kl=null,$l=0,Ql=0,Xl=null,Jl=-1,ec=0;function tc(){return 0!=(6&Il)?Qe():-1!==Jl?Jl:Jl=Qe()}function rc(e){return 0==(1&e.mode)?1:0!=(2&Il)&&0!==Nl?Nl&-Nl:null!==mi.transition?(0===ec&&(ec=gt()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,r,n){if(50<Ql)throw Ql=0,Xl=null,Error(i(185));vt(e,r,n),0!=(2&Il)&&e===Pl||(e===Pl&&(0==(2&Il)&&(Ul|=r),4===xl&&lc(e,Nl)),oc(e,n),1===r&&0===Il&&0==(1&t.mode)&&(zl=Qe()+500,jo&&zo()))}function oc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),a=1<<s,l=o[s];-1===l?0!=(a&r)&&0==(a&n)||(o[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var n=ht(e,e===Pl?Nl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){jo=!0,Fo(e)}(cc.bind(null,e)):Fo(cc.bind(null,e)),so((function(){0==(6&Il)&&zo()})),r=null;else{switch(bt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Pc(r,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ic(e,t){if(Jl=-1,ec=0,0!=(6&Il))throw Error(i(327));var r=e.callbackNode;if(Cc()&&e.callbackNode!==r)return null;var n=ht(e,e===Pl?Nl:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=vc(e,n);else{t=n;var o=Il;Il|=2;var s=gc();for(Pl===e&&Nl===t||(Gl=null,zl=Qe()+500,pc(e,t));;)try{yc();break}catch(t){fc(e,t)}Si(),Rl.current=s,Il=o,null!==Al?t=0:(Pl=null,Nl=0,t=xl)}if(0!==t){if(2===t&&0!==(o=ft(e))&&(n=o,t=sc(e,o)),1===t)throw r=Dl,pc(e,0),lc(e,n),oc(e,Qe()),r;if(6===t)lc(e,n);else{if(o=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!an(i(),o))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vc(e,n))&&0!==(s=ft(e))&&(n=s,t=sc(e,s)),1===t))throw r=Dl,pc(e,0),lc(e,n),oc(e,Qe()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Hl,Gl);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Fl+500-Qe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&n)!==n){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(Sc.bind(null,e,Hl,Gl),t);break}Sc(e,Hl,Gl);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var a=31-st(n);s=1<<a,(a=t[a])>o&&(o=a),n&=~s}if(n=o,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wl(n/1960))-n)){e.timeoutHandle=no(Sc.bind(null,e,Hl,Gl),n);break}Sc(e,Hl,Gl);break;default:throw Error(i(329))}}}return oc(e,Qe()),e.callbackNode===r?ic.bind(null,e):null}function sc(e,t){var r=jl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Hl,Hl=r,null!==t&&ac(t)),e}function ac(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Zl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function cc(e){if(0!=(6&Il))throw Error(i(327));Cc();var t=ht(e,0);if(0==(1&t))return oc(e,Qe()),null;var r=vc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Dl,pc(e,0),lc(e,t),oc(e,Qe()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Hl,Gl),oc(e,Qe()),null}function uc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(zl=Qe()+500,jo&&zo())}}function dc(e){null!==Kl&&0===Kl.tag&&0==(6&Il)&&Cc();var t=Il;Il|=1;var r=Ol.transition,n=yt;try{if(Ol.transition=null,yt=1,e)return e()}finally{yt=n,Ol.transition=r,0==(6&(Il=t))&&zo()}}function hc(){Ll=Ml.current,Ro(Ml)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,oo(r)),null!==Al)for(r=Al.return;null!==r;){var n=r;switch(ri(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Mo();break;case 3:is(),Ro(Po),Ro(Io),ds();break;case 5:as(n);break;case 4:is();break;case 13:case 19:Ro(ls);break;case 10:Ci(n.type._context);break;case 22:case 23:hc()}r=r.return}if(Pl=e,Al=e=Mc(e.current,null),Nl=Ll=t,xl=0,Dl=null,Zl=Ul=Bl=0,Hl=jl=null,null!==ki){for(t=0;t<ki.length;t++)if(null!==(n=(r=ki[t]).interleaved)){r.interleaved=null;var o=n.next,i=r.pending;if(null!==i){var s=i.next;i.next=o,n.next=s}r.pending=n}ki=null}return e}function fc(e,t){for(;;){var r=Al;try{if(Si(),hs.current=sa,_s){for(var n=gs.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}_s=!1}if(fs=0,vs=ms=gs=null,ys=!1,bs=0,kl.current=null,null===r||null===r.return){xl=1,Dl=t,Al=null;break}e:{var s=e,a=r.return,l=r,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,_a(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0==(1&t)){ma(s,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=va(a);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),_a(v,a,l,0,t),gi(ua(c,l));break e}}s=c=ua(c,l),4!==xl&&(xl=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,fa(0,c,t));break e;case 1:l=c;var _=s.type,y=s.stateNode;if(0==(128&s.flags)&&("function"==typeof _.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}Ec(r)}catch(e){t=e,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function gc(){var e=Rl.current;return Rl.current=sa,null===e?sa:e}function mc(){0!==xl&&3!==xl&&2!==xl||(xl=4),null===Pl||0==(268435455&Bl)&&0==(268435455&Ul)||lc(Pl,Nl)}function vc(e,t){var r=Il;Il|=2;var n=gc();for(Pl===e&&Nl===t||(Gl=null,pc(e,t));;)try{_c();break}catch(t){fc(e,t)}if(Si(),Il=r,Rl.current=n,null!==Al)throw Error(i(261));return Pl=null,Nl=0,xl}function _c(){for(;null!==Al;)bc(Al)}function yc(){for(;null!==Al&&!Ke();)bc(Al)}function bc(e){var t=Tl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Ec(e):Al=t,kl.current=null}function Ec(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=Ya(r,t,Ll)))return void(Al=r)}else{if(null!==(r=Ka(r,t)))return r.flags&=32767,void(Al=r);if(null===e)return xl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===xl&&(xl=5)}function Sc(e,t,r){var n=yt,o=Ol.transition;try{Ol.transition=null,yt=1,function(e,t,r,n){do{Cc()}while(null!==Kl);if(0!=(6&Il))throw Error(i(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-st(r),i=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~i}}(e,s),e===Pl&&(Al=Pl=null,Nl=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||Yl||(Yl=!0,Pc(tt,(function(){return Cc(),null}))),s=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=yt;yt=1;var l=Il;Il|=4,kl.current=null,function(e,t){if(eo=Gt,pn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var o=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(e){r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==n&&3!==h.nodeType||(c=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===o&&(l=a),p===s&&++d===n&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:e,selectionRange:r},Gt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:vi(t.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(e){wc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=rl,rl=!1}(e,r),vl(r,e),fn(to),Gt=!!eo,to=eo=null,e.current=r,yl(r,e,o),$e(),Il=l,yt=a,Ol.transition=s}else e.current=r;if(Yl&&(Yl=!1,Kl=e,$l=o),0===(s=e.pendingLanes)&&(Wl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),oc(e,Qe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((o=t[r]).value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Vl,Vl=null,e;0!=(1&$l)&&0!==e.tag&&Cc(),0!=(1&(s=e.pendingLanes))?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,zo()}(e,t,r,n)}finally{Ol.transition=o,yt=n}return null}function Cc(){if(null!==Kl){var e=bt($l),t=Ol.transition,r=yt;try{if(Ol.transition=null,yt=16>e?16:e,null===Kl)var n=!1;else{if(e=Kl,Kl=null,$l=0,0!=(6&Il))throw Error(i(331));var o=Il;for(Il|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!=(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var p=(d=Ja).sibling,f=d.return;if(sl(d),d===u){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=s}}if(0!=(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!=(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var _=s.sibling;if(null!==_){_.return=s.return,Ja=_;break e}Ja=s.return}}var y=e.current;for(Ja=y;null!==Ja;){var b=(a=Ja).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=y;null!==Ja;){if(0!=(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(e){wc(l,l.return,e)}if(l===a){Ja=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Ja=E;break e}Ja=l.return}}if(Il=o,zo(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(e){}n=!0}return n}finally{yt=r,Ol.transition=t}}return!1}function Tc(e,t,r){e=xi(e,t=fa(0,t=ua(r,t),1),1),t=tc(),null!==e&&(vt(e,1,t),oc(e,t))}function wc(e,t,r){if(3===e.tag)Tc(e,e,r);else for(;null!==t;){if(3===t.tag){Tc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wl||!Wl.has(n))){t=xi(t,e=ga(t,e=ua(r,e),1),1),e=tc(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Rc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Nl&r)===r&&(4===xl||3===xl&&(130023424&Nl)===Nl&&500>Qe()-Fl?pc(e,0):Zl|=r),oc(e,t)}function kc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var r=tc();null!==(e=Pi(e,t))&&(vt(e,t,r),oc(e,r))}function Oc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kc(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),kc(e,r)}function Pc(e,t){return We(e,t)}function Ac(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,r,n){return new Ac(e,t,r,n)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var r=e.alternate;return null===r?((r=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function xc(e,t,r,n,o,s){var a=2;if(n=e,"function"==typeof e)Lc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case C:return Dc(r.children,o,s,t);case T:a=8,o|=8;break;case w:return(e=Nc(12,r,t,2|o)).elementType=w,e.lanes=s,e;case I:return(e=Nc(13,r,t,o)).elementType=I,e.lanes=s,e;case P:return(e=Nc(19,r,t,o)).elementType=P,e.lanes=s,e;case L:return Bc(r,o,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case R:a=10;break e;case k:a=9;break e;case O:a=11;break e;case A:a=14;break e;case N:a=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Nc(a,r,t,o)).elementType=e,t.type=n,t.lanes=s,t}function Dc(e,t,r,n){return(e=Nc(7,e,n,t)).lanes=r,e}function Bc(e,t,r,n){return(e=Nc(22,e,n,t)).elementType=L,e.lanes=r,e.stateNode={isHidden:!1},e}function Uc(e,t,r){return(e=Nc(6,e,null,t)).lanes=r,e}function Zc(e,t,r){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hc(e,t,r,n,o,i,s,a,l){return e=new jc(e,t,r,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Nc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(i),e}function Fc(e){if(!e)return Oo;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Lo(r))return Do(e,r,t)}return t}function zc(e,t,r,n,o,i,s,a,l){return(e=Hc(r,n,!0,e,0,i,0,a,l)).context=Fc(null),r=e.current,(i=Mi(n=tc(),o=rc(r))).callback=null!=t?t:null,xi(r,i,o),e.current.lanes=o,vt(e,o,n),oc(e,n),e}function Gc(e,t,r,n){var o=t.current,i=tc(),s=rc(o);return r=Fc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Mi(i,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=xi(o,t,s))&&(nc(e,o,s,i),Di(e,o,s)),s}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Tl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)ba=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return ba=!1,function(e,t,r){switch(t.tag){case 3:Pa(t),fi();break;case 5:ss(t);break;case 1:Lo(t.type)&&Bo(t);break;case 4:os(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;ko(_i,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(ko(ls,1&ls.current),t.flags|=128,null):0!=(r&t.child.childLanes)?Ua(e,t,r):(ko(ls,1&ls.current),null!==(e=qa(e,t,r))?e.sibling:null);ko(ls,1&ls.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return za(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),ko(ls,ls.current),n)break;return null;case 22:case 23:return t.lanes=0,wa(e,t,r)}return qa(e,t,r)}(e,t,r);ba=0!=(131072&e.flags)}else ba=!1,ii&&0!=(1048576&t.flags)&&ei(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ga(e,t),e=t.pendingProps;var o=No(t,Io.current);wi(t,r),o=Ts(null,t,n,e,o,r);var s=ws();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(n)?(s=!0,Bo(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ni(t),o.updater=Fi,t.stateNode=o,o._reactInternals=t,Vi(t,n,e,r),t=Ia(null,t,n,!0,s,r)):(t.tag=0,ii&&s&&ti(t),Ea(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"==typeof e)return Lc(e)?1:0;if(null!=e){if((e=e.$$typeof)===O)return 11;if(e===A)return 14}return 2}(n),e=vi(n,e),o){case 0:t=ka(null,t,n,e,r);break e;case 1:t=Oa(null,t,n,e,r);break e;case 11:t=Sa(null,t,n,e,r);break e;case 14:t=Ca(null,t,n,vi(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,ka(e,t,n,o=t.elementType===n?o:vi(n,o),r);case 1:return n=t.type,o=t.pendingProps,Oa(e,t,n,o=t.elementType===n?o:vi(n,o),r);case 3:e:{if(Pa(t),null===e)throw Error(i(387));n=t.pendingProps,o=(s=t.memoizedState).element,Li(e,t),Ui(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,n,r,o=ua(Error(i(423)),t));break e}if(n!==o){t=Aa(e,t,n,r,o=ua(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ni=t,ii=!0,si=null,r=Xi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),n===o){t=qa(e,t,r);break e}Ea(e,t,n,r)}t=t.child}return t;case 5:return ss(t),null===e&&ui(t),n=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,a=o.children,ro(n,o)?a=null:null!==s&&ro(n,s)&&(t.flags|=32),Ra(e,t),Ea(e,t,a,r),t.child;case 6:return null===e&&ui(t),null;case 13:return Ua(e,t,r);case 4:return os(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qi(t,null,n,r):Ea(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,Sa(e,t,n,o=t.elementType===n?o:vi(n,o),r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,ko(_i,n._currentValue),n._currentValue=a,null!==s)if(an(s.value,a)){if(s.children===o.children&&!Po.current){t=qa(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Mi(-1,r&-r)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),Ti(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Ti(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Ea(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,wi(t,r),n=n(o=Ri(o)),t.flags|=1,Ea(e,t,n,r),t.child;case 14:return o=vi(n=t.type,t.pendingProps),Ca(e,t,n,o=vi(n.type,o),r);case 15:return Ta(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:vi(n,o),Ga(e,t),t.tag=1,Lo(n)?(e=!0,Bo(t)):e=!1,wi(t,r),Gi(t,n,o),Vi(t,n,o,r),Ia(null,t,n,!0,e,r);case 19:return za(e,t,r);case 22:return wa(e,t,r)}throw Error(i(156,t.tag))};var Yc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,r,n,o){var i=r._reactRootContainer;if(i){var s=i;if("function"==typeof o){var a=o;o=function(){var e=qc(s);a.call(e)}}Gc(t,s,e,o)}else s=function(e,t,r,n,o){if(o){if("function"==typeof n){var i=n;n=function(){var e=qc(s);i.call(e)}}var s=zc(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[go]=s.current,Fn(8===e.nodeType?e.parentNode:e),dc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof n){var a=n;n=function(){var e=qc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[go]=l.current,Fn(8===e.nodeType?e.parentNode:e),dc((function(){Gc(t,l,r,n)})),l}(r,t,e,o,n);return qc(s)}$c.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gc(e,t,null,null)},$c.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Gc(null,e,null,null)})),t[go]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&0!==t&&t<Lt[r].priority;r++);Lt.splice(r,0,e),0===r&&Bt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(_t(t,1|r),oc(t,Qe()),0==(6&Il)&&(zl=Qe()+500,zo()))}break;case 13:dc((function(){var t=Pi(e,1);if(null!==t){var r=tc();nc(t,e,1,r)}})),Wc(e,1)}},St=function(e){if(13===e.tag){var t=Pi(e,134217728);null!==t&&nc(t,e,134217728,tc()),Wc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=rc(e),r=Pi(e,t);null!==r&&nc(r,e,t,tc()),Wc(e,t)}},Tt=function(){return yt},wt=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Se=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=So(n);if(!o)throw Error(i(90));W(n),X(n,o)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Oe=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[bo,Eo,So,Re,ke,uc]},ru={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(nu),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var r=!1,n="",o=Yc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Hc(e,1,!1,null,0,r,0,n,o),e[go]=t.current,Fn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Xc(t))throw Error(i(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,o=!1,s="",a=Yc;if(null!=r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=zc(t,null,e,1,null!=r?r:null,o,0,s,a),e[go]=t.current,Fn(e),n)for(e=0;e<n.length;e++)o=(o=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new $c(t)},t.render=function(e,t,r){if(!Xc(t))throw Error(i(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,r)=>{"use strict";var n=r(3935);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},3935:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(4448)},5668:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(r(7294)),i=f(r(5697)),s=f(r(3935)),a=f(r(6010)),l=r(1825),c=r(2849),u=r(9280),d=f(r(783)),h=f(r(5904)),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(v,e);var t,r,i,u,f,g=(u=v,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(u);if(f){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,e)});function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),T(S(t=g.call(this,e)),"onDragStart",(function(e,r){if((0,h.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,c.createDraggableData)(S(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),T(S(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",r);var n,o,i=(0,c.createDraggableData)(S(t),r),s={x:i.x,y:i.y};if(t.props.bounds){var a=s.x,l=s.y;s.x+=t.state.slackX,s.y+=t.state.slackY;var u=(n=(0,c.getBoundPosition)(S(t),s.x,s.y),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(n,o)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],p=u[1];s.x=d,s.y=p,s.slackX=t.state.slackX+(a-s.x),s.slackY=t.state.slackY+(l-s.y),i.x=s.x,i.y=s.y,i.deltaX=s.x-t.state.x,i.deltaY=s.y-t.state.y}if(!1===t.props.onDrag(e,i))return!1;t.setState(s)})),T(S(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(S(t),r)))return!1;(0,h.default)("Draggable: onDragStop: %j",r);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,i=o.x,s=o.y;n.x=i,n.y=s}t.setState(n)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:_({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=v,i=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,n=t.prevPropsPosition;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:_({},r)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:s.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,r=(t.axis,t.bounds,t.children),n=t.defaultPosition,i=t.defaultClassName,s=t.defaultClassNameDragging,u=t.defaultClassNameDragged,h=t.position,f=t.positionOffset,g=(t.scale,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,p)),v={},y=null,b=!Boolean(h)||this.state.dragging,E=h||n,S={x:(0,c.canDragX)(this)&&b?this.state.x:E.x,y:(0,c.canDragY)(this)&&b?this.state.y:E.y};this.state.isElementSVG?y=(0,l.createSVGTransform)(S,f):v=(0,l.createCSSTransform)(S,f);var C=(0,a.default)(r.props.className||"",i,(T(e={},s,this.state.dragging),T(e,u,this.state.dragged),e));return o.createElement(d.default,m({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(r),{className:C,style:_(_({},r.props.style),v),transform:y}))}}])&&b(t.prototype,r),i&&b(t,i),Object.defineProperty(t,"prototype",{writable:!1}),v}(o.Component);t.default=w,T(w,"displayName","Draggable"),T(w,"propTypes",_(_({},d.default.propTypes),{},{axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),T(w,"defaultProps",_(_({},d.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},783:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(r(7294)),i=d(r(5697)),s=d(r(3935)),a=r(1825),l=r(2849),c=r(9280),u=d(r(5904));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={start:"touchstart",move:"touchmove",stop:"touchend"},E={start:"mousedown",move:"mousemove",stop:"mouseup"},S=E,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(h,e);var t,r,i,c,d=(i=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(i);if(c){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(v(e=d.call.apply(d,[this].concat(r))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),y(v(e),"mounted",!1),y(v(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof n.defaultView.Node)||e.props.handle&&!(0,a.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,a.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var o=(0,a.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var i=(0,l.getControlPosition)(t,o,v(e));if(null!=i){var s=i.x,c=i.y,d=(0,l.createCoreData)(v(e),s,c);(0,u.default)("DraggableCore: handleDragStart: %j",d),(0,u.default)("calling",e.props.onStart),!1!==e.props.onStart(t,d)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(n),e.setState({dragging:!0,lastX:s,lastY:c}),(0,a.addEvent)(n,S.move,e.handleDrag),(0,a.addEvent)(n,S.stop,e.handleDragStop))}}})),y(v(e),"handleDrag",(function(t){var r=(0,l.getControlPosition)(t,e.state.touchIdentifier,v(e));if(null!=r){var n=r.x,o=r.y;if(Array.isArray(e.props.grid)){var i=n-e.state.lastX,s=o-e.state.lastY,a=p((0,l.snapToGrid)(e.props.grid,i,s),2);if(i=a[0],s=a[1],!i&&!s)return;n=e.state.lastX+i,o=e.state.lastY+s}var c=(0,l.createCoreData)(v(e),n,o);if((0,u.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:n,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(d)}}})),y(v(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,l.getControlPosition)(t,e.state.touchIdentifier,v(e));if(null!=r){var n=r.x,o=r.y;if(Array.isArray(e.props.grid)){var i=n-e.state.lastX||0,s=o-e.state.lastY||0,c=p((0,l.snapToGrid)(e.props.grid,i,s),2);i=c[0],s=c[1],n=e.state.lastX+i,o=e.state.lastY+s}var d=(0,l.createCoreData)(v(e),n,o);if(!1===e.props.onStop(t,d)||!1===e.mounted)return!1;var h=e.findDOMNode();h&&e.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(h.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",d),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),h&&((0,u.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(h.ownerDocument,S.move,e.handleDrag),(0,a.removeEvent)(h.ownerDocument,S.stop,e.handleDragStop))}}})),y(v(e),"onMouseDown",(function(t){return S=E,e.handleDragStart(t)})),y(v(e),"onMouseUp",(function(t){return S=E,e.handleDragStop(t)})),y(v(e),"onTouchStart",(function(t){return S=b,e.handleDragStart(t)})),y(v(e),"onTouchEnd",(function(t){return S=b,e.handleDragStop(t)})),e}return t=h,(r=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,a.addEvent)(e,b.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,a.removeEvent)(t,E.move,this.handleDrag),(0,a.removeEvent)(t,b.move,this.handleDrag),(0,a.removeEvent)(t,E.stop,this.handleDragStop),(0,a.removeEvent)(t,b.stop,this.handleDragStop),(0,a.removeEvent)(e,b.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current:s.default.findDOMNode(this)}},{key:"render",value:function(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Component);t.default=C,y(C,"displayName","DraggableCore"),y(C,"propTypes",{allowAnyClick:i.default.bool,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),y(C,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1193:(e,t,r)=>{"use strict";var n=r(5668),o=n.default,i=n.DraggableCore;e.exports=o,e.exports.default=o,e.exports.DraggableCore=i},1825:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=p,t.addEvent=function(e,t,r,n){if(e){var o=l({capture:!0},n);e.addEventListener?e.addEventListener(t,r,o):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}},t.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&p(e.body,"react-draggable-transparent-selection")}},t.createCSSTransform=function(e,t){var r=h(e,t,"px");return c({},(0,i.browserPrefixToKey)("transform",i.default),r)},t.createSVGTransform=function(e,t){return h(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,o.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=h,t.innerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,o.int)(r.paddingTop))-(0,o.int)(r.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,o.int)(r.paddingLeft))-(0,o.int)(r.paddingRight)},t.matchesSelector=d,t.matchesSelectorAndParentsTo=function(e,t,r){var n=e;do{if(d(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,r){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-n.left)/r,y:(e.clientY+t.scrollTop-n.top)/r}},t.outerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,o.int)(r.borderTopWidth))+(0,o.int)(r.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,o.int)(r.borderLeftWidth))+(0,o.int)(r.borderRightWidth)},t.removeClassName=f,t.removeEvent=function(e,t,r,n){if(e){var o=l({capture:!0},n);e.removeEventListener?e.removeEventListener(t,r,o):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&f(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var o=r(9280),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(8650));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u="";function d(e,t){return u||(u=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,o.isFunction)(e[t])}))),!!(0,o.isFunction)(e[u])&&e[u](t)}function h(e,t,r){var n=e.x,o=e.y,i="translate(".concat(n).concat(r,",").concat(o).concat(r,")");if(t){var s="".concat("string"==typeof t.x?t.x:t.x+r),a="".concat("string"==typeof t.y?t.y:t.y+r);i="translate(".concat(s,", ").concat(a,")")+i}return i}function p(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function f(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},8650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=o,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=n;var r=["Moz","Webkit","O","ms"];function n(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var i=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!i)return"";if(n in i)return"";for(var s=0;s<r.length;s++)if(o(n,r[s])in i)return r[s];return""}function o(e,t){return t?"".concat(t).concat(function(e){for(var t="",r=!0,n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}var i=n();t.default=i},5904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},2849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,r){var o=e.state,s=!(0,n.isNum)(o.lastX),a=i(e);return s?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:a,deltaX:t-o.lastX,deltaY:r-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:r}},t.createDraggableData=function(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];var s=e.props.bounds;s="string"==typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);var a=i(e);if("string"==typeof s){var l,c=a.ownerDocument,u=c.defaultView;if(!((l="parent"===s?a.parentNode:c.querySelector(s))instanceof u.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');var d=l,h=u.getComputedStyle(a),p=u.getComputedStyle(d);s={left:-a.offsetLeft+(0,n.int)(p.paddingLeft)+(0,n.int)(h.marginLeft),top:-a.offsetTop+(0,n.int)(p.paddingTop)+(0,n.int)(h.marginTop),right:(0,o.innerWidth)(d)-(0,o.outerWidth)(a)-a.offsetLeft+(0,n.int)(p.paddingRight)-(0,n.int)(h.marginRight),bottom:(0,o.innerHeight)(d)-(0,o.outerHeight)(a)-a.offsetTop+(0,n.int)(p.paddingBottom)-(0,n.int)(h.marginBottom)}}return(0,n.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,n.isNum)(s.bottom)&&(r=Math.min(r,s.bottom)),(0,n.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,n.isNum)(s.top)&&(r=Math.max(r,s.top)),[t,r]},t.getControlPosition=function(e,t,r){var n="number"==typeof t?(0,o.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;var s=i(r),a=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,o.offsetXYFromParent)(n||e,a,r.props.scale)},t.snapToGrid=function(e,t,r){return[Math.round(t/e[0])*e[0],Math.round(r/e[1])*e[1]]};var n=r(9280),o=r(1825);function i(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},9280:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},9921:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},9864:(e,t,r)=>{"use strict";r(9921)},5251:(e,t,r)=>{"use strict";var n=r(7294),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},2408:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function _(){}function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var b=y.prototype=new _;b.constructor=y,g(b,v.prototype),b.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var o,i={},s=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,o)&&!T.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:r,type:e,key:s,ref:a,props:i,_owner:C.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,o,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return s=s(l=e),e=""===i?"."+O(l,0):i,E(s)?(o="",null!=e&&(o=e.replace(k,"$&/")+"/"),I(s,t,o,"",(function(e){return e}))):null!=s&&(R(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",E(e))for(var c=0;c<e.length;c++){var u=i+O(a=e[c],c);l+=I(a,t,o,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,o,u=i+O(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],o=0;return I(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},L={transition:null},M={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=s,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:r,type:e.type,key:i,ref:s,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},7294:(e,t,r)=>{"use strict";e.exports=r(2408)},5893:(e,t,r)=>{"use strict";e.exports=r(5251)},53:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,s=o>>>1;n<s;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,r))c<o&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[a]=r,n=a);else{if(!(c<o&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function E(e){if(m=!1,b(e),!g)if(null!==n(c))g=!0,L(S);else{var t=n(u);null!==t&&M(E,t.startTime-e)}}function S(e,r){g=!1,m&&(m=!1,_(R),R=-1),f=!0;var i=p;try{for(b(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!I());){var s=h.callback;if("function"==typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=r);r=t.unstable_now(),"function"==typeof a?h.callback=a:h===n(c)&&o(c),b(r)}else o(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&M(E,d.startTime-r),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,T=!1,w=null,R=-1,k=5,O=-1;function I(){return!(t.unstable_now()-O<k)}function P(){if(null!==w){var e=t.unstable_now();O=e;var r=!0;try{r=w(!0,e)}finally{r?C():(T=!1,w=null)}}else T=!1}if("function"==typeof y)C=function(){y(P)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,N=A.port2;A.port1.onmessage=P,C=function(){N.postMessage(null)}}else C=function(){v(P,0)};function L(e){w=e,T||(T=!0,C())}function M(e,r){R=v((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,L(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?s+i:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(m?(_(R),R=-1):m=!0,M(E,i-s))):(e.sortIndex=a,r(c,e),g||f||(g=!0,L(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},3840:(e,t,r)=>{"use strict";e.exports=r(53)},3379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=n.base?l[0]+n.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var h=r(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=o(p,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=r(i[s]);t[a].references--}for(var l=n(e,o),c=0;c<i.length;c++){var u=r(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},3614:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=r(3),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.initializer.load(this,r,t),this.begin()}return n(e,[{key:"toggle",value:function(){this.pause.status?this.start():this.stop()}},{key:"stop",value:function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))}},{key:"start",value:function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))}},{key:"destroy",value:function(){this.reset(!1),this.options.onDestroy(this)}},{key:"reset",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())}},{key:"begin",value:function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout((function(){e.currentElContent&&0!==e.currentElContent.length?e.backspace(e.currentElContent,e.currentElContent.length):e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos)}),this.startDelay)}},{key:"typewrite",value:function(e,t){var r=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var n=this.humanizer(this.typeSpeed),o=1;!0!==this.pause.status?this.timeout=setTimeout((function(){t=i.htmlParser.typeHtmlChars(e,t,r);var n=0,s=e.substr(t);if("^"===s.charAt(0)&&/^\^\d+/.test(s)){var a=1;a+=(s=/\d+/.exec(s)[0]).length,n=parseInt(s),r.temporaryPause=!0,r.options.onTypingPaused(r.arrayPos,r),e=e.substring(0,t)+e.substring(t+a),r.toggleBlinking(!0)}if("`"===s.charAt(0)){for(;"`"!==e.substr(t+o).charAt(0)&&(o++,!(t+o>e.length)););var l=e.substring(0,t),c=e.substring(l.length+1,t+o),u=e.substring(t+o+1);e=l+c+u,o--}r.timeout=setTimeout((function(){r.toggleBlinking(!1),t>=e.length?r.doneTyping(e,t):r.keepTyping(e,t,o),r.temporaryPause&&(r.temporaryPause=!1,r.options.onTypingResumed(r.arrayPos,r))}),n)}),n):this.setPauseStatus(e,t,!0)}},{key:"keepTyping",value:function(e,t,r){0===t&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this)),t+=r;var n=e.substr(0,t);this.replaceText(n),this.typewrite(e,t)}},{key:"doneTyping",value:function(e,t){var r=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout((function(){r.backspace(e,t)}),this.backDelay))}},{key:"backspace",value:function(e,t){var r=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var n=this.humanizer(this.backSpeed);this.timeout=setTimeout((function(){t=i.htmlParser.backSpaceHtmlChars(e,t,r);var n=e.substr(0,t);if(r.replaceText(n),r.smartBackspace){var o=r.strings[r.arrayPos+1];o&&n===o.substr(0,t)?r.stopNum=t:r.stopNum=0}t>r.stopNum?(t--,r.backspace(e,t)):t<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.options.onLastStringBackspaced(),r.shuffleStringsIfNeeded(),r.begin()):r.typewrite(r.strings[r.sequence[r.arrayPos]],t))}),n)}else this.setPauseStatus(e,t,!1)}},{key:"complete",value:function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0}},{key:"setPauseStatus",value:function(e,t,r){this.pause.typewrite=r,this.pause.curString=e,this.pause.curStrPos=t}},{key:"toggleBlinking",value:function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))}},{key:"humanizer",value:function(e){return Math.round(Math.random()*e/2)+e}},{key:"shuffleStringsIfNeeded",value:function(){this.shuffle&&(this.sequence=this.sequence.sort((function(){return Math.random()-.5})))}},{key:"initFadeOut",value:function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout((function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)}),this.fadeOutDelay)}},{key:"replaceText",value:function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:"html"===this.contentType?this.el.innerHTML=e:this.el.textContent=e}},{key:"bindFocusEvents",value:function(){var e=this;this.isInput&&(this.el.addEventListener("focus",(function(t){e.stop()})),this.el.addEventListener("blur",(function(t){e.el.value&&0!==e.el.value.length||e.start()})))}},{key:"insertCursor",value:function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))}}]),e}();t.default=s,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=(n=r(2))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"load",value:function(e,t,r){if(e.el="string"==typeof r?document.querySelector(r):r,e.options=o({},s.default,t),e.isInput="input"===e.el.tagName.toLowerCase(),e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map((function(e){return e.trim()})),"string"==typeof e.options.stringsElement?e.stringsElement=document.querySelector(e.options.stringsElement):e.stringsElement=e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.display="none";var n=Array.prototype.slice.apply(e.stringsElement.children),i=n.length;if(i)for(var a=0;a<i;a+=1){var l=n[a];e.strings.push(l.innerHTML.trim())}}for(var a in e.strPos=0,e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.sequence=[],e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.strings)e.sequence[a]=a;e.currentElContent=this.getCurrentElContent(e),e.autoInsertCss=e.options.autoInsertCss,this.appendAnimationCss(e)}},{key:"getCurrentElContent",value:function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:"html"===e.contentType?e.el.innerHTML:e.el.textContent}},{key:"appendAnimationCss",value:function(e){var t="data-typed-js-css";if(e.autoInsertCss&&(e.showCursor||e.fadeOut)&&!document.querySelector("["+t+"]")){var r=document.createElement("style");r.type="text/css",r.setAttribute(t,!0);var n="";e.showCursor&&(n+="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      "),e.fadeOut&&(n+="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      "),0!==r.length&&(r.innerHTML=n,document.body.appendChild(r))}}}]),e}();t.default=a;var l=new a;t.initializer=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"typeHtmlChars",value:function(e,t,r){if("html"!==r.contentType)return t;var n=e.substr(t).charAt(0);if("<"===n||"&"===n){var o;for(o="<"===n?">":";";e.substr(t+1).charAt(0)!==o&&!(1+ ++t>e.length););t++}return t}},{key:"backSpaceHtmlChars",value:function(e,t,r){if("html"!==r.contentType)return t;var n=e.substr(t).charAt(0);if(">"===n||";"===n){var o;for(o=">"===n?"<":"&";e.substr(t-1).charAt(0)!==o&&!(--t<0););t--}return t}}]),e}();t.default=n;var o=new n;t.htmlParser=o}])},e.exports=t()},3250:(e,t,r)=>{"use strict";var n=r(7294),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,s=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),o=n[0].inst,u=n[1];return a((function(){o.value=r,o.getSnapshot=t,c(o)&&u({inst:o})}),[e,r,t]),s((function(){return c(o)&&u({inst:o}),e((function(){c(o)&&u({inst:o})}))}),[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},139:(e,t,r)=>{"use strict";var n=r(7294),o=r(1688),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=o.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(s=e,a=r)}var s,a,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,r,n,o]);var p=s(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=p}),[p]),u(p),p}},1688:(e,t,r)=>{"use strict";e.exports=r(3250)},2798:(e,t,r)=>{"use strict";e.exports=r(139)},3399:function(module,__unused_webpack_exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(__WEBPACK_EXTERNAL_MODULE__4119__){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},7419:function(e,t){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var o,i=null,s=[],a=0,l=0;t<r;){var c=e[t++];switch(l){case 0:s[a++]=n[c>>2],o=(3&c)<<4,l=1;break;case 1:s[a++]=n[o|c>>4],o=(15&c)<<2,l=2;break;case 2:s[a++]=n[o|c>>6],s[a++]=n[63&c],l=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=n[o],s[a++]=61,1===l&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error(s);switch(a){case 0:n=c,a=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[r++]=(3&n)<<6|c,a=0}}if(1===a)throw Error(s);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,o),e.readFloatBE=s.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,o,i+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function s(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,o,0,4),e.readDoubleBE=s.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(++s,t[r++]=(n=65536+((1023&n)<<10)+(1023&o))>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},3720:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},i={};function s(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=l(e,(0|e)<0?-1:0,!0),s&&(i[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=l(e,e<0?-1:0,!1),s&&(o[e]=r),r)}function a(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=p)return S}else{if(e<=-f)return C;if(e+1>=f)return E}return e<0?a(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=a,r.fromBits=l;var c=Math.pow;function u(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return u(e.substring(1),t,r).neg();for(var o=a(c(r,8)),i=m,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+l),r);if(l<8){var h=a(c(r,l));i=i.mul(h).add(a(d))}else i=(i=i.mul(o)).add(a(d))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?u(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=u,r.fromValue=d;var h=4294967296,p=h*h,f=p/2,g=s(1<<24),m=s(0);r.ZERO=m;var v=s(0,!0);r.UZERO=v;var _=s(1);r.ONE=_;var y=s(1,!0);r.UONE=y;var b=s(-1);r.NEG_ONE=b;var E=l(-1,2147483647,!1);r.MAX_VALUE=E;var S=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var C=l(0,-2147483648,!1);r.MIN_VALUE=C;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=a(c(e,6),this.unsigned),i=this,s="";;){var l=i.div(o),u=(i.sub(l.mul(o)).toInt()>>>0).toString(e);if((i=l).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(_)},T.neg=T.negate,T.add=function(e){n(e)||(e=d(e));var t=0,r=0,o=0,i=0;return o+=(i+=(65535&this.low)+(65535&e.low))>>>16,r+=(o+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(r+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),l((o&=65535)<<16|(i&=65535),(t&=65535)<<16|(r&=65535),this.unsigned)},T.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return m;if(n(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(C))return e.isOdd()?C:m;if(e.eq(C))return this.isOdd()?C:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=65535&e.high,c=e.low>>>16,u=65535&e.low,h=0,p=0,f=0,v=0;return f+=(v+=i*u)>>>16,p+=(f+=o*u)>>>16,f&=65535,p+=(f+=i*c)>>>16,h+=(p+=r*u)>>>16,p&=65535,h+=(p+=o*c)>>>16,p&=65535,h+=(p+=i*s)>>>16,h+=(this.high>>>16)*u+r*c+o*s+i*(e.high>>>16),l((f&=65535)<<16|(v&=65535),(h&=65535)<<16|(p&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return y;i=v}else{if(this.eq(C))return e.eq(_)||e.eq(b)?C:e.eq(C)?_:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?_:b:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(C))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:c(2,s-48),h=a(r),p=h.mul(e);p.isNegative()||p.gt(o);)p=(h=a(r-=u,this.unsigned)).mul(e);h.isZero()&&(h=_),i=i.add(h),o=o.sub(p)}return i},T.div=T.divide,T.modulo=function(e){return n(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.and=function(e){return n(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return n(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return n(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2100:function(e,t,r){"use strict";e.exports=r(9482)},9482:function(e,t,r){"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(1173),n.BufferWriter=r(3155),n.Reader=r(1408),n.BufferReader=r(593),n.util=r(9693),n.rpc=r(5994),n.roots=r(5054),n.configure=o,o()},1408:function(e,t,r){"use strict";e.exports=l;var n,o=r(9693),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return o.Buffer?function(e){return(l.create=function(e){return o.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,r){"use strict";e.exports=i;var n=r(1408);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(9693);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,r){"use strict";t.Service=r(7948)},7948:function(e,t,r){"use strict";e.exports=o;var n=r(9693);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,r){"use strict";e.exports=o;var n=r(9693);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9693:function(e,t,r){"use strict";var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(4537),n.base64=r(7419),n.EventEmitter=r(9211),n.float=r(945),n.inquire=r(7199),n.utf8=r(4997),n.pool=r(6662),n.LongBits=r(1945),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&null!=this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:function(e,t,r){"use strict";e.exports=d;var n,o=r(9693),i=o.LongBits,s=o.base64,a=o.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(d.alloc=o.pool(d.alloc,o.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},(f.prototype=Object.create(l.prototype)).fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.int64=d.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.sfixed32=d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed64=d.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},3155:function(e,t,r){"use strict";e.exports=i;var n=r(1173);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(9693);function i(){n.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},4095:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoAudioEffectPlayer=void 0;var n=function(){function e(e,t){this.zegoWebRTC=e,this.stream=t}return e.prototype.start=function(e,t,n,o){this.zegoWebRTC.playEffect(r({stream:this.stream,effectID:e},t||{}),n,o)},e.prototype.stop=function(e){return this.zegoWebRTC.stopEffect(this.stream,e)},e.prototype.pause=function(e){return this.zegoWebRTC.pauseEffect(this.stream,e)},e.prototype.resume=function(e){return this.zegoWebRTC.resumeEffect(this.stream,e)},e.prototype.setVolume=function(e,t){return this.zegoWebRTC.setEffectVolume(this.stream,t,e)},e.prototype.getTotalDuration=function(e){return this.zegoWebRTC.getEffectDuration(e)},e.prototype.getCurrentProgress=function(e){return this.zegoWebRTC.getEffectCurrentProgress(this.stream,e)},e.prototype.seekTo=function(e,t){return this.zegoWebRTC.seekAudioEffect(this.stream,e,t)},e}();t.ZegoAudioEffectPlayer=n},8835:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRealTimeSequentialDataManager=void 0;var n=r(3504),o=function(){function e(e,t){this.dataChannelManager=new n.DataChannelListener(e,t)}return e.prototype.startBroadcasting=function(e){return this.dataChannelManager.startBroadcasting(e)},e.prototype.stopBroadcasting=function(e){return this.dataChannelManager.stopBroadcasting(e)},e.prototype.sendRealTimeSequentialData=function(e,t){return this.dataChannelManager.sendRealTimeSequentialData(e,t)},e.prototype.startSubscribing=function(e){return this.dataChannelManager.startSubscribing(e)},e.prototype.stopSubscribing=function(e){return this.dataChannelManager.stopSubscribing(e)},e.prototype.on=function(e,t){this.dataChannelManager.on(e,t)},e.prototype.off=function(e,t){this.dataChannelManager.off(e,t)},e}();t.ZegoRealTimeSequentialDataManager=o},1297:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSEIType=t.ZegoRangeAudioMode=t.ZegoRangeAudioMicrophoneState=t.ZegoMixStreamRenderMode=t.ZegoLowlightEnhancementMode=void 0,function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(t.ZegoLowlightEnhancementMode||(t.ZegoLowlightEnhancementMode={})),function(e){e[e.AspectFill=0]="AspectFill",e[e.AspectFit=1]="AspectFit"}(t.ZegoMixStreamRenderMode||(t.ZegoMixStreamRenderMode={})),function(e){e[e.Off=0]="Off",e[e.TurningOn=1]="TurningOn",e[e.On=2]="On"}(t.ZegoRangeAudioMicrophoneState||(t.ZegoRangeAudioMicrophoneState={})),function(e){e[e.World=0]="World",e[e.Team=1]="Team"}(t.ZegoRangeAudioMode||(t.ZegoRangeAudioMode={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(t.ZegoSEIType||(t.ZegoSEIType={}))},3116:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressRangeAudio=void 0;var s=i(r(2760)),a=function(){function e(e,t){this.zegoAudioListener=s.default.getInstance(e,t)}return e.getInstance=function(t,r){if(!e.instance){if(!t)throw Error("create instance failed.");e.instance=new e(t,r)}return e.instance},e.prototype.enableAudioSourceUpdateChecker=function(e,t){this.zegoAudioListener.enableAudioSourceUpdateChecker(e,t)},e.prototype.on=function(e,t){return this.zegoAudioListener.on(e,t)},e.prototype.off=function(e,t){return this.zegoAudioListener.off(e,t)},e.prototype.setAudioReceiveRange=function(e){this.zegoAudioListener.setAudioReceiveRange(e)},e.prototype.updateSelfPosition=function(e,t,r,n){this.zegoAudioListener.updateSelfPosition(e,t,r,n)},e.prototype.updateAudioSource=function(e,t){this.zegoAudioListener.updateAudioSource(e,t)},e.prototype.enableSpatializer=function(e){return this.zegoAudioListener.enableSpatializer(e)},e.prototype.enableMicrophone=function(e){return this.zegoAudioListener.enableMicrophone(e)},e.prototype.selectMicrophone=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.zegoAudioListener.selectMic(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.selectSpeaker=function(e){return this.zegoAudioListener.selectSpeaker(e)},e.prototype.enableSpeaker=function(e){return this.zegoAudioListener.enableSpeaker(e)},e.prototype.setRangeAudioMode=function(e){this.zegoAudioListener.setRangeAudioMode(e)},e.prototype.setTeamID=function(e){this.zegoAudioListener.setRangeAudioTeamID(e)},e.prototype.setPositionUpdateFrequency=function(e){return this.zegoAudioListener.setPositionUpdateFrequency(e)},e.prototype.setRangeAudioVolume=function(e){return this.zegoAudioListener.setAudioVolume(e)},e.prototype.enableAiDenoise=function(e){return this.zegoAudioListener.enableAiDenoise(e)},e.prototype.isAudioContextRunning=function(){return"running"===this.zegoAudioListener.getAudioContextState()},e.prototype.resumeAudioContext=function(){return this.zegoAudioListener.resumeAudioContext()},e.prototype.setStreamVocalRange=function(e,t){this.zegoAudioListener.setStreamVocalRange(e,t)},e.prototype.updateStreamPosition=function(e,t){this.zegoAudioListener.updateStreamPosition(e,t)},e.prototype.setCustomSourceVocalRange=function(e,t){this.zegoAudioListener.setStreamVocalRange(e,t)},e.prototype.updateCustomSourcePosition=function(e,t){this.zegoAudioListener.updateStreamPosition(e,t)},e}();t.ZegoExpressRangeAudio=a},5028:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamView=void 0;var r=function(){function e(e){this.v=e}return e.prototype.takeStreamSnapshot=function(e){return this.v.takeStreamSnapshot(e)},e.prototype.play=function(e,t){return this.v.play(e,t)},e.prototype.stop=function(){return this.v.stop()},e.prototype.resume=function(){this.v.resume()},e.prototype.setAudioMuted=function(e){return this.v.setAudioMuted(e)},e.prototype.setVideoMuted=function(e){return this.v.setVideoMuted(e)},e.prototype.useAudioOutputDevice=function(e){return this.v.useAudioOut(e)},e.prototype.setVolume=function(e){return this.v.setVolume(e)},e.prototype.on=function(e,t){return this.v.on(e,t)},e.prototype.off=function(e,t){return this.v.off(e,t)},e}();t.ZegoStreamView=r},4780:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressEngine=t.WebRTCUtil=void 0;var s=r(9880),a=i(r(3126)),l=i(r(9869)),c=i(r(3824)),u=i(r(6012)),d=i(r(7526)),h=i(r(577)),p=r(2777),f=r(4897),g=r(957);s.ZegoExpressEngine.use(a.default),s.ZegoExpressEngine.use(l.default),s.ZegoExpressEngine.use(c.default),s.ZegoExpressEngine.use(u.default),s.ZegoExpressEngine.use(d.default),s.ZegoExpressEngine.use(h.default),s.ZegoExpressEngine.use(p.RangeAudio),s.ZegoExpressEngine.use(f.DataChannel),s.ZegoExpressEngine.use(g.BeautyEffect);var m=r(9880);Object.defineProperty(t,"WebRTCUtil",{enumerable:!0,get:function(){return m.WebRTCUtil}});var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(s.ZegoExpressEngine);t.ZegoExpressEngine=v},9880:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCUtil=t.ZegoExpressEngine=void 0;var i=r(4119),s=r(5321),a=r(4095),l=function(e){function t(t,r,n){var o=this;return i.ZegoExpressWebRTMEngine.version="2.22.0",(o=e.call(this,t,r,0,arguments[2])||this).zegoWebRTC=new s.ZegoWebRTC(o.logger,o.dataReport,o.reporter,o.zegoWebRTM,0,null==n?void 0:n.scenario),o}return o(t,e),t.prototype.setEngineConfig=function(e){this.zegoWebRTC.setEngineConfig(e)},t.prototype.setSEIConfig=function(e){this.zegoWebRTC.setSEIConfig(e)},t.use=function(e){i.ZegoExpressWebRTMEngine.use(e),s.ZegoWebRTC.use(e)},t.prototype.checkSystemRequirements=function(e,t){return void 0===t&&(t=0),this.zegoWebRTC.checkSystemRequirements(t,e)},t.prototype.off=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.off(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.off(e,t)},t.prototype.on=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.on(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.on(e,t)},t.prototype.createStream=function(e){return this.zegoWebRTC.createStream(e)},t.prototype.setRoomScenario=function(e){return this.zegoWebRTC.setRoomScenario(e)},t.prototype.enableAutoSwitchDevice=function(e){return this.zegoWebRTC.enableAutoSwitchDevice(e)},t.prototype.getPublishingStreamQuality=function(e){return this.zegoWebRTC.getPublishingStreamQuality(e)},t.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},t.prototype.enableAiDenoise=function(e,t){return this.zegoWebRTC.enableAiDenoise(e,t)},t.prototype.destroyStream=function(e){return this.zegoWebRTC.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,r){return this.zegoWebRTC.startPublishingStream(e,t,r)},t.prototype.stopPublishingStream=function(e){return this.zegoWebRTC.stopPublishingStream(e)},t.prototype.sendSEI=function(e,t){return this.zegoWebRTC.sendSEI(e,t)},t.prototype.setVideoConfig=function(e,t){return this.zegoWebRTC.setVideoConfig(e,t)},t.prototype.setAudioConfig=function(e,t){return this.zegoWebRTC.setAudioConfig(e,t)},t.prototype.replaceTrack=function(e,t){return this.zegoWebRTC.replaceTrack(e,t)},t.prototype.addTrack=function(e,t){return this.zegoWebRTC.addTrack(e,t)},t.prototype.removeTrack=function(e,t){return this.zegoWebRTC.removeTrack(e,t)},t.prototype.setCaptureVolume=function(e,t){return this.zegoWebRTC.setCaptureVolume(e,t)},t.prototype.setDummyCaptureImagePath=function(e,t){return this.zegoWebRTC.setDummyCaptureImagePath(e,t)},t.prototype.setStreamExtraInfo=function(e,t){return this.zegoWebRTC.setStreamExtraInfo(e,t)},t.prototype.enableVideoCaptureDevice=function(e,t){return this.zegoWebRTC.enableCameraCapturing(e,t)},t.prototype.addPublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(e,t)},t.prototype.removePublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(e,t)},t.prototype.mutePublishStreamVideo=function(e,t,r){return this.zegoWebRTC.mutePublishStreamVideo(e,t,r)},t.prototype.mutePublishStreamAudio=function(e,t){return this.zegoWebRTC.mutePublishStreamAudio(e,t)},t.prototype.setEffectsBeauty=function(e,t,r){return this.zegoWebRTC.setBeautyEffect(e,t,r)},t.prototype.setLowlightEnhancement=function(e,t){return this.zegoWebRTC.setLowlightEnhance(e,t)},t.prototype.enableDualStream=function(e){return this.zegoWebRTC.enableDualStream(e)},t.prototype.setLowStreamParameter=function(e,t){return this.zegoWebRTC.setLowStreamParameter(e,t)},t.prototype.enableHardwareEncoder=function(e){this.zegoWebRTC.enableVideoHardwareEncoder(e)},t.prototype.startPlayingStream=function(e,t){return this.zegoWebRTC.startPlayingStream(e,t)},t.prototype.stopPlayingStream=function(e){return this.zegoWebRTC.stopPlayingStream(e)},t.prototype.mutePlayStreamVideo=function(e,t){return this.zegoWebRTC.mutePlayStreamVideo(e,t)},t.prototype.mutePlayStreamAudio=function(e,t){return this.zegoWebRTC.mutePlayStreamAudio(e,t)},t.prototype.getPlayingStreamQuality=function(e){return this.zegoWebRTC.getPlayingStreamQuality(e)},t.prototype.createLocalStreamView=function(e){return this.zegoWebRTC.createLocalViewer(e)},t.prototype.createRemoteStreamView=function(e){return this.zegoWebRTC.createRemoteViewer(e)},t.prototype.startMixerTask=function(e){return this.zegoWebRTC.startMixerTask(e)},t.prototype.stopMixerTask=function(e){return this.zegoWebRTC.stopMixerTask(e)},t.prototype.setMixerTaskConfig=function(e){return this.zegoWebRTC.setMixerTaskConfig(e)},t.prototype.startMixingAudio=function(e,t){return this.zegoWebRTC.startMixingAudio(e,t)},t.prototype.stopMixingAudio=function(e,t){return this.zegoWebRTC.stopMixingAudio(e,t)},t.prototype.setMixingAudioVolume=function(e,t,r){return this.zegoWebRTC.setMixingAudioVolume(e,t,r)},t.prototype.createAudioEffectPlayer=function(e){if(e instanceof MediaStream)return new a.ZegoAudioEffectPlayer(this.zegoWebRTC,e);throw Error("Param localStream is not instance of MediaStream.")},t.prototype.loadAudioEffect=function(e,t){var r=this;return new Promise((function(n,o){r.zegoWebRTC.preloadEffect(e,t,(function(t){t&&o(t),n(e)}))}))},t.prototype.unloadAudioEffect=function(e){return this.zegoWebRTC.unloadEffect(e)},t.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},t.prototype.getCameras=function(){return this.zegoWebRTC.getCameras()},t.prototype.getMicrophones=function(){return this.zegoWebRTC.getMicrophones()},t.prototype.getSpeakers=function(){return this.zegoWebRTC.getSpeakers()},t.prototype.useVideoDevice=function(e,t){return this.zegoWebRTC.useVideoDevice(e,t)},t.prototype.useAudioDevice=function(e,t){return this.zegoWebRTC.useAudioDevice(e,t)},t.prototype.useAudioOutputDevice=function(e,t){return this.zegoWebRTC.setAudioOutputDevice(e,t)},t.prototype.setSoundLevelDelegate=function(e,t,r){return this.zegoWebRTC.setSoundLevelDelegate(e,t,null==r?void 0:r.enableInBackground)},t.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},t.prototype.muteMicrophone=function(e){return this.zegoWebRTC.muteMicrophone(e)},t.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},t.prototype.createRealTimeSequentialDataManager=function(e){return this.zegoWebRTC.createRealTimeSequentialDataManager(e)},t.prototype.destroyRealTimeSequentialDataManager=function(e){this.zegoWebRTC.destroyRealTimeSequentialDataManager(e)},t}(i.ZegoExpressWebRTMEngine);t.ZegoExpressEngine=l;var c=r(1358);Object.defineProperty(t,"WebRTCUtil",{enumerable:!0,get:function(){return c.WebRTCUtil}})},1089:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.CONSTRUCTOR="zc.0",e.CHECK_SUPPORT="zc.csr",e.CREATE_STREAM="zc.cs",e.DESTROY_STREAM="zc.ds",e.START_PUBLISHING_STREAM="zc.sps.0",e.START_PLAYING_STREAM="zc.sps.1",e.STOP_PUBLISHING_STREAM="zc.sps.0.0",e.STOP_PLAYING_STREAM="zc.sps.1.0",e.SET_MEDIA_SIDE_FLAGS="zc.smsg.0",e.SEND_MEDIA_SIDE_INFO="zc.smsi.0",e.ON_STREAM="zc.os",e.ON_PUSH_STREAM_UPDATE="zc.opsu",e.BIND_WINDOW_LISTENER="zc.wl",e.SET_AUDIO_OUTPUT="zc.sao",e.SET_CUSTOM_SIGNAL_URL="zc.scsu",e.SET_TURN_OVER_TCP_ONLY="zc.stoto",e.RDH_ACTIVE="zc.rdh.a",e.RDH_MAX_TIME="zc.rdh.m",e.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",e.PUBLISH_STATE_HANDLE="zc.psh.0",e.PLAY_STATE_HANDLE="zc.psh.1",e.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE="zc.tsh.rngn.0",e.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE="zc.tsh.rngn.1",e.STATECENTER_ACTION_LISTENER="zc.sc.al",e.STATECENTER_SET_SETTING="zc.sc.ss",e.SIGNAL_SET_SESSION_INFO="zc.s.ssi",e.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",e.SIGNAL_RESET_LOGIN_TIMER="zc.s.rlt",e.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",e.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",e.SIGNAL_UPDATE_TOKEN="zc.s.ut",e.SIGNAL_DISCONNECTCALLBACK="zc.s.dcb",e.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",e.SIGNAL_CONNECT_SERVER="zc.s.cs.0",e.SIGNAL_START_CONNECT_TIMER="zc.s.sct",e.SIGNAL_DISCONNECT_SERVER="zc.s.dc",e.SIGNAL_CREATE_SESSION="zc.s.cs.1",e.SIGNAL_REMOVE_SESSION="zc.s.rs",e.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",e.SIGNAL_SEND_MESSAGE="zc.s.sm",e.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",e.SIGNAL_ADD_SESSION="zc.s.as",e.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",e.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",e.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",e.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",e.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",e.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",e.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",e.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",e.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",e.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",e.SIGNAL_SEND_HEARTBEAT="zc.s.sh",e.SIGNAL_QUALITY_REPORT="zc.s.qr",e.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",e.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",e.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",e.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",e.SIGNAL_SEND_NET_PROBE="zc.s.snp",e.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",e.STREAMCENTER_SET_STREAM_GW_NODE="zsc.ssgn",e.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST="zsc.ccgl",e.STREAMCENTER_CHECK_CACHED_NODES_USE="zsc.ccns",e.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST="zsc.ucgl",e.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",e.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",e.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",e.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",e.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",e.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",e.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",e.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",e.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",e.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",e.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",e.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",e.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",e.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",e.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",e.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",e.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",e.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",e.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",e.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",e.PUBLISHER_STATE_ERROR="zc.p.0.psr",e.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",e.PUBLISHER_ON_DISCONNECT="zc.p.0.od",e.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",e.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",e.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",e.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",e.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",e.PUBLISHER_SEND_SEI="zc.p.0.ss",e.PUBLISHER_RESET_GW_NODES="zc.p.0.rgn",e.PUBLISHER_SET_GW_NODES="zc.p.0.sgn",e.PUBLISHER_HANDLE_DISPATCHED_GW_NODES="zc.p.0.hdgn",e.PUBLISHER_PURE_SORT_GW_NODES="zc.p.0.psgn",e.PLAYER_START_PLAY="zc.p.1.sp.0",e.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",e.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",e.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",e.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",e.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",e.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",e.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",e.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",e.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",e.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",e.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",e.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE="zc.p.opcsc.1",e.PLAYER_RESET_PLAY="zc.p.rp.1",e.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",e.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",e.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",e.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",e.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",e.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",e.PAYER_GET_VIDEO_CODEC="zc.p.gvc",e.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",e.PLAYER_STATE_ERROR="zc.p.psr.1",e.PLAYER_STOP_PLAY="zc.p.1.sp.1",e.PLAYER_ON_DISCONNECT="zc.p.od.1",e.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",e.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",e.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",e.PLAYER_RESET_GW_NODES="zc.p.1.rgn",e.PLAYER_SET_GW_NODES="zc.p.1.sgn",e.PLAYER_HANDLE_DISPATCHED_GW_NODES="zc.p.1.hdgn",e.PLAYER_PURE_SORT_GW_NODES="zc.p.1.psgn",e.UPLOAD_SPEED_LOG_QUALITY="zc.uslq",e.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",e.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",e.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",e.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",e.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",e.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2="zc.sh.sbr",e.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE="zc.as.umrs",e.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE="zc.as.uars",e.ANALOGSOCKET_SET_MEDIA_SERVER_STATE="zc.as.smss",e.ANALOGSOCKET_SET_ACCESS_SERVER_STATE="zc.as.sass",e.ANALOGSOCKET_SEND="zc.as.s.0",e.ANALOGSOCKET_OPEN="zc.as.op",e.SET_ROOM_SCENARIO="zc.srs",e.INIT_ROOM_SCENARIO="zc.irs"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},6361:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonStates=void 0;var o=r(6706),i=function(){function e(e,t,r){this.rtmStateCenter=e,this.rtcStateCenter=t,this.streamCenter=r,this._initTime=Date.now()}return Object.defineProperty(e.prototype,"appid",{get:function(){return this.rtcStateCenter.appid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_id",{get:function(){return this.rtmStateCenter.deviceID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"product",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdk_version",{get:function(){return o.PROTO_VERSION},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sys_info",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_version",{get:function(){return this.rtcStateCenter.reportVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browser",{get:function(){return this.rtcStateCenter.browser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id_name",{get:function(){return this.rtmStateCenter.idName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nick_name",{get:function(){return this.rtmStateCenter.nickName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"use_na",{get:function(){return this.rtcStateCenter.useNetAgent?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userid",{get:function(){return this.rtmStateCenter.userid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"network_state",{get:function(){return this.rtcStateCenter.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"init_time",{get:function(){return this._initTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"net_type",{get:function(){var e;return(null===(e=navigator.connection)||void 0===e?void 0:e.effectiveType)||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_server",{get:function(){return this.rtmStateCenter.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_infos",{get:function(){return this.rtcStateCenter.deviceInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_list",{get:function(){var e=this,t={};return this.rtcStateCenter.roomList.forEach((function(r){var n,o,i,s=e.rtmStateCenter.roomModulesList.find((function(e){return e.roomID===r.roomID})),a={roomSessionID:r.roomSessionID,sessionID:r.sessionID,streamList:r.streamList,token:r.token,role:e.rtmStateCenter.role,roomCreateFlag:e.rtmStateCenter.roomCreateFlag,loginTime:null==s?void 0:s.loginTime,heartbeatInterval:null===(n=null==s?void 0:s.heartBeatHandler)||void 0===n?void 0:n.heartbeatInterval,roomExtraInfos:null===(o=null==s?void 0:s.messageHandler)||void 0===o?void 0:o.transSeqMap,roomRetryTime:null===(i=null==s?void 0:s.roomTryHandler)||void 0===i?void 0:i.RETRY_MAX_TIME};t[r.roomID]=a})),t},enumerable:!1,configurable:!0}),e.prototype.getRoomList=function(e,t){var r=this;return this.room_id_list.slice(e,t).map((function(e){return n({roomID:e},r.room_list[e])}))},Object.defineProperty(e.prototype,"room_id_list",{get:function(){return this.rtcStateCenter.roomList.map((function(e){return e.roomID}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomListSize",{get:function(){return this.room_id_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLoginState",{get:function(){var e,t=this.rtmStateCenter.roomModulesList[0],r=t.runState,n=t.lastRunState;return r===o.ENUM_RUN_STATE.logout?e=o.USER_RUN_STATE.logout:r===o.ENUM_RUN_STATE.login?e=o.USER_RUN_STATE.login:n===o.ENUM_RUN_STATE.logout?e=o.USER_RUN_STATE.trylogin:n===o.ENUM_RUN_STATE.login&&(e=o.USER_RUN_STATE.reconnect),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishStreamList",{get:function(){return Object.keys(this.streamCenter.publisherList)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishList",{get:function(){var e=this,t={};return this.publishStreamList.forEach((function(r){var n,o,i,s=e.streamCenter.publisherList[r],a=null==s?void 0:s.publisher,l=null==a?void 0:a.publishStat;t[r]={streamSid:null==s?void 0:s.streamSid,roomID:null===(n=null==s?void 0:s.room)||void 0===n?void 0:n.roomID,roomSessionID:null===(o=null==s?void 0:s.room)||void 0===o?void 0:o.roomSessionID,cameraLabel:null==s?void 0:s.cameraLabel,microLabel:null==s?void 0:s.microLabel,cameraStatus:null==a?void 0:a.camera_status,micStatus:null==a?void 0:a.mic_status,sessionId:null==a?void 0:a.sessionId,publishBeginTime:null==a?void 0:a.reportPublishStateTime,serverUrl:null===(i=null==a?void 0:a.signal)||void 0===i?void 0:i.server,gwNode:null==a?void 0:a.gwNode,proto:"webrtc",frameWidth:null==l?void 0:l.frameWidth,frameHeight:null==l?void 0:l.frameHeight,rtt:null==l?void 0:l.currentRoundTripTime,videoPacketsLostRate:null==l?void 0:l.videoPacketsLostRate,audioPacketsLostRate:null==l?void 0:l.audioPacketsLostRate,videoTargetBitrate:null==l?void 0:l.videoTargetBitrate,videoBitrate:null==l?void 0:l.videoBitrate,audioTargetBitrate:null==l?void 0:l.audioTargetBitrate,audioBitrate:null==l?void 0:l.audioBitrate,videoTargetFPS:null==l?void 0:l.videoTargetFPS,videoFPS:null==l?void 0:l.videoFPS,audioFPS:null==l?void 0:l.audioFPS,videoCodecName:null==l?void 0:l.videoCodecName,audioCodecName:null==l?void 0:l.audioCodecName}})),t},enumerable:!1,configurable:!0}),e.prototype.getPublishList=function(e,t){var r=this;return this.publishStreamList.slice(e,t).map((function(e){return n({streamID:e},r.publishList[e])}))},Object.defineProperty(e.prototype,"publishListSize",{get:function(){return this.publishStreamList.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStreamList",{get:function(){return Object.keys(this.streamCenter.playerList)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playList",{get:function(){var e=this,t={};return this.playStreamList.forEach((function(r){var n,o,i,s=e.streamCenter.playerList[r],a=null==s?void 0:s.player,l=null==a?void 0:a.playStat;t[r]={streamSid:null==s?void 0:s.streamSid,roomID:null===(n=null==s?void 0:s.room)||void 0===n?void 0:n.roomID,roomSessionID:null===(o=null==s?void 0:s.room)||void 0===o?void 0:o.roomSessionID,cameraStatus:null==a?void 0:a.cameraStatus,micStatus:null==a?void 0:a.micStatus,sessionId:null==a?void 0:a.sessionId,playBeginTime:null==a?void 0:a.reportPlayStateTime,serverUrl:null===(i=null==a?void 0:a.signal)||void 0===i?void 0:i.server,gwNode:null==a?void 0:a.gwNode,proto:"webrtc",frameWidth:null==l?void 0:l.frameWidth,frameHeight:null==l?void 0:l.frameHeight,rtt:null==l?void 0:l.currentRoundTripTime,videoPacketsLostRate:null==l?void 0:l.videoPacketsLostRate,audioPacketsLostRate:null==l?void 0:l.audioPacketsLostRate,videoBitrate:null==l?void 0:l.videoBitrate,audioBitrate:null==l?void 0:l.audioBitrate,videoFPS:null==l?void 0:l.videoFPS,audioFPS:null==l?void 0:l.audioFPS,videoCodecName:null==l?void 0:l.videoCodecName,audioCodecName:null==l?void 0:l.audioCodecName,peerToPeerDelay:null==l?void 0:l.peerToPeerDelay,firstFrameTime:null==l?void 0:l.firstFrameTime,videoJitter:null==l?void 0:l.videoJitter,audioJitter:null==l?void 0:l.audioJitter}})),t},enumerable:!1,configurable:!0}),e.prototype.getPlayList=function(e,t){var r=this;return this.playStreamList.slice(e,t).map((function(e){return n({streamID:e},r.playList[e])}))},Object.defineProperty(e.prototype,"playListSize",{get:function(){return this.playStreamList.length},enumerable:!1,configurable:!0}),e}();t.CommonStates=i},9595:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTC=t.ZegoSettingConfig=void 0;var r=function(){function e(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:!0,AGC:!0,ANS:!0,resource_mode:0,bitrate_mode:"default",auto_to_tcp:!1,udp_max_fail_num:2,probe_started_num:3,udp_or_tcp:"udp",hardware_encode:!1,camera_hard_encode:!1,custom_hard_encode:!1},this.userChangedKey={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.prototype.setSetting=function(e,t){var r=Array.isArray(t)&&t.length>0;for(var n in e)for(var o in e[n])if(!o.endsWith("_ctrlmode")){if(r&&-1==t.indexOf(o))continue;var i=e[n][o+"_ctrlmode"];1===i?this.userChangedKey[o]||(this.setting[o]=e[n][o]):2===i?this.setting[o]=e[n][o]:this.defaultSetting[o]&&(this.setting[o]=this.defaultSetting[o]),"number"==typeof i&&(this.setting[o+"_ctrlmode"]=e[n][o+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e.prototype.setUserValue=function(e,t){2!==this.setting[e+"_ctrlmode"]&&(this.userChangedKey[e]=!0,this.setting[e]=t)},e}();t.ZegoSettingConfig=r,t.RTC="rtc"},7325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=r(6706),o=r(608),i=r(1089),s=r(6706),a=r(3529),l=r(3544),c=r(1378),u=function(){function e(e,t){this.logger=e,this.dataReport=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.waitPublishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnToTcp=!1,this.turnOverTcpOnly=void 0,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[],playerRecvSEI:[],beautyEffectError:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.accessClientIp="",this.isMultiOuter=!1,this.type="PUBLIC",this.roomList=[],this.tempRoomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.playAccelerate=!0,this.connectChanged=!1,this.autoSwitchDeviceSetting={camera:!1,microphone:!1},this.unSendMessageList=[],this.scenario=n.ZegoScenario.Default,this.testStreamRetryMode=0,this.testStreamRetryCount=10,this.supportDispatchByPass=!1,this.engineConfig={keepAudioTrack:!0,playClearLastFrame:!0,previewClearLastFrame:!0},this.logReportCallback=o.ClientUtil.logReportCallback,this.unregisterCallback=o.ClientUtil.unregisterCallback,this.checkIllegalCharacters=o.ClientUtil.checkIllegalCharacters,this.decodeServerError=o.ClientUtil.decodeServerError,this.getLiveRoomError=o.ClientUtil.getLiveRoomError,this.getServerError=o.ClientUtil.getServerError,this.mergeStreamList=o.ClientUtil.mergeStreamList,this.checkInteger=o.ClientUtil.checkInteger,this.isUrl=o.ClientUtil.isUrl,this.actionSuccessCallback=o.ClientUtil.actionSuccessCallback,this.checkValidNumber=o.ClientUtil.checkValidNumber,this.getDevices=o.ClientUtil.getDevices,this.uint8arrayToBase64=o.ClientUtil.uint8arrayToBase64,this.getSeq=s.getSeq,this.getReportSeq=n.getReportSeq}return Object.defineProperty(e.prototype,"networkState",{get:function(){var e;return null===(e=this.rtm)||void 0===e?void 0:e.stateCenter.networkState},set:function(e){var t;(null===(t=this.rtm)||void 0===t?void 0:t.stateCenter)&&void 0!==e&&(this.rtm.stateCenter.networkState=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this._streamCenter},set:function(e){this._streamCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this._billingTimer||(this._billingTimer=new l.BillingTimer(this.logger,this)),this._billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chargeInfosSaver",{get:function(){return this._chargeInfosSaver||(this._chargeInfosSaver=new c.ChargeInfosSaverWeb(this.logger,this)),this._chargeInfosSaver},enumerable:!1,configurable:!0}),e.prototype.getRequestId=function(){return this.idName+"-"+(0,s.getSeq)()},e.prototype.getSignalCmdContent=function(e,t,r,n){var o={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:r};return null!=n&&(o.result=n),JSON.stringify(o)},e.prototype.actionListener=function(e){for(var t=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate","playerRecvSEI","remoteCameraStatusUpdate","_remoteCameraStatusUpdate","remoteMicStatusUpdate","_remoteMicStatusUpdate","_streamUpdated","_deviceError"].includes(e)&&this.listenerList[e]){var s=this.reporter.createSpan(n.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},a.ZegoRTCLogEvent.kZegoListener.event);s.setAttributes({listener:e,listener_params:JSON.stringify(r)}),["deviceError","streamExtraInfoUpdate","publisherStateUpdate","playerStateUpdate","roomStreamUpdate"].includes(e)&&this.logger.info("zc.al ".concat(e," ").concat(JSON.stringify(r))),s.end()}this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,r)}),0)}catch(r){t.logger.error(i.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+e+" "+r)}}))},e.prototype.getRoomByRoomID=function(e){return this.roomList.find((function(t){return t.roomID==e}))},e.prototype.getPlayRoom=function(e){return this.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},e}();t.StateCenter=u},5740:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenter=void 0,t.ZegoStreamCenter=function(){this.publisherList={},this.playerList={},this.stopedPlayerList={}}},7560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamHandler=void 0;var n=r(6706),o=r(2752),i=r(1089),s=r(3529),a=s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetCurrentStreamList,l=function(){function e(e,t,r,n,o){this.logger=e,this.stateCenter=t,this.rtm=r,this.streamCenter=n,this.roomID=o,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return e.prototype.setCDNInfo=function(e,t){e.urlFlv=t.urls_flv instanceof Array?t.urls_flv[0]||"":"string"==typeof t.urls_flv?t.urls_flv:"",e.urlHls=t.urls_m3u8 instanceof Array?t.urls_m3u8[0]||"":"string"==typeof t.urls_m3u8?t.urls_m3u8:"",e.urlFlvPlus=t.urls_flv_plus instanceof Array?t.urls_flv_plus[0]||"":"string"==typeof t.urls_flv_plus?t.urls_flv_plus:"",e.urlHlsPlus=t.urls_m3u8_plus instanceof Array?t.urls_m3u8_plus[0]||"":"string"==typeof t.urls_m3u8_plus?t.urls_m3u8_plus:"",e.urlHttpsFlv=t.urls_https_flv instanceof Array?t.urls_https_flv[0]||"":"string"==typeof t.urls_https_flv?t.urls_https_flv:"",e.urlHttpsHls=t.urls_https_m3u8 instanceof Array?t.urls_https_m3u8[0]||"":"string"==typeof t.urls_https_m3u8?t.urls_https_m3u8:"",e.urlRtmp=t.urls_rtmp instanceof Array?t.urls_rtmp[0]||"":"string"==typeof t.urls_rtmp?t.urls_rtmp:""},e.prototype.onStreamUpdated=function(e,t,r){},e.prototype.onStreamExtraInfoUpdated=function(e,t){},e.prototype.handleStreamStart=function(e,t){this.logger.info("zb.sh.hss call stream update"),this.room=t,e.body?(this.streamListHBMergeInterval=e.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=e.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this.handleReconnectStream(e.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},e.prototype.onPublishStateUpdate=function(e,t,r){},e.prototype._updateStreamInfo=function(e,t,r,i,s){var a,l,c=this;void 0===r&&(r=""),this.logger.info("zb.sh.usi call");var u=r,d=null===(a=this.room)||void 0===a?void 0:a.streamList.find((function(t){return t.stream_id===e}));d||this.logger.info("zb.sh.usi stream not in room cmd "+t);var h={stream_id:e,extra_info:u};2002!==t&&2003!==t||(h.stream_sid=(null==d?void 0:d.stream_sid)||"");var p=JSON.stringify(h),f={sub_cmd:t,stream_msg:p,third_token:null===(l=this.room)||void 0===l?void 0:l.token},g=this.room;this.room.streamInfoList[e]={};var m=function(r,n){i&&i(r,c.room.streamInfoList[e].seq),c.handleStreamUpdateRsp(r,e,t)},v=function(a,l){var u=c.room;if(u&&!u.isResetRoom&&!c.rtm.isDisConnect()&&a.code&&a.code==o.errorCodeList.TIMEOUT.code&&u.streamInfoList[e].seq==l)2001==t&&c.stateCenter.publishStreamList[e]&&c.stateCenter.publishStreamList[e].state==n.ENUM_PUBLISH_STREAM_STATE.update_info||2002==t?(c.logger.warn("zb.sh.usi resend stream update "+t),setTimeout((function(){c._updateStreamInfo(e,t,r,i,s)}),0)):s&&s(o.errorCodeList.TIMEOUT);else if(a.body&&a.body.err_code){var d=c.stateCenter.getServerError(a.body.err_code,c.stateCenter.useNetAgent,a.body.err_message);[1011,1000002002].includes(d.code)&&(d=o.errorCodeList.TOKEN_EXPIRED),s&&s(d,l),t===n.ENUM_STREAM_SUB_CMD.liveBegin&&c.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.error,e,d)}};if(this.stateCenter.useNetAgent)this.room.streamInfoList[e].seq=this.rtm.liveRoomHandler.sendStreamUpdate(f,m,v,{sessionID:null==g?void 0:g.sessionID,roomID:null==g?void 0:g.roomID,roomSessionID:null==g?void 0:g.roomSessionID});else{var _=this.rtm.service.sendMessage("stream",f,m,v,void 0,{sessionID:null==g?void 0:g.sessionID,roomID:null==g?void 0:g.roomID,roomSessionID:null==g?void 0:g.roomSessionID});this.room.streamInfoList[e].seq=_,0===_&&2002===t&&"wxMini"===this.stateCenter.clientType&&(this.stateCenter.unSendMessageList.push({roomID:(null==g?void 0:g.roomID)||"",streamid:e,cmd:t,stream_extra_info:r}),this.logger.info("zb.sh.usi call unsendmsg "+JSON.stringify(this.stateCenter.unSendMessageList)))}this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.updateStreamInfo=function(e,t,r,o,i){var a,l=this;void 0===r&&(r=""),(2001===t||2002===t)&&(a=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:""},s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.event)).setAttributes({stream_update_type:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_update_type(2001===t?"stream added":2002===t?"stream deleted":""),stream_extra_info:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_extra_info(r),stream_id:s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_id(e)}),this._updateStreamInfo(e,t,r,(function(e,r){2001!==t&&2002!==t||(a.setAttributes({send_seq:r}),a&&a.end()),o&&o(e,r)}),(function(e,r){2001!==t&&2002!==t||(a.setAttributes({send_seq:r}),l.stateCenter.reporter.setError(a,e)),i&&i(e,r)}))},e.prototype.handleStreamUpdateRsp=function(e,t,r){var n,o,i;if(this.rtm.isDisConnect())this.logger.warn("zb.sh.hsur not login");else if(0==e.body.err_code){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+e.body.stream_seq),this.streamSeq=this.streamSeq+1;var s=this.room;if(s)if((null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.token_remain_time)&&(this.stateCenter.getRoomByRoomID(null===(o=null==e?void 0:e.header)||void 0===o?void 0:o.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify(null===(i=e.header)||void 0===i?void 0:i.room_id))),this.stateCenter.useNetAgent)this.handleStreamSync(e,t,r),delete s.streamInfoList[t];else{e.body.stream_seq>this.streamSeq&&(this.logger.info("zb.sh.hsur seq diff, server: "+e.body.stream_seq+" client: "+this.streamSeq),this.fetchStreamList());for(var a=0;a<e.body.stream_info.length;a++){var l=e.body.stream_info[a].stream_id;this.handleStreamRsp(s,l,e.body.stream_info[a],r),delete s.streamInfoList[l]}}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code)},e.prototype.handleStreamSync=function(e,t,r){if(this.handleStreamRsp(this.room,t,{stream_id:t,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,stream_nid:e.body.stream_nid},r),e.body.stream_seq>this.streamSeq)return this.logger.info("zb.sh.hss.1 seq diff server: "+e.body.stream_seq+" client "+this.streamSeq),void this.fetchStreamList();var n=this.room.streamList.find((function(e){return e.stream_id==t}));n&&e.body.stream_ver>n.stream_ver&&this.fetchStreamList(t)},e.prototype.handleStreamRsp=function(e,t,r,o){var i=this.stateCenter.publishStreamList[t],s=e.streamList.find((function(e){return e.stream_id==t}));if(this.logger.info("hsur.0 cmd "+o+" "+!!s),s&&2002===o){var a=e.streamList.findIndex((function(e){return e.stream_id==t}));this.logger.info("hsur.0 stream index "+a),a>-1&&e.streamList.splice(a,1)}i?(i.state==n.ENUM_PUBLISH_STREAM_STATE.update_info&&(i.state=n.ENUM_PUBLISH_STREAM_STATE.publishing,2001!==o||s||e.streamList.push(r),this.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.start,t,{code:0,message:""})),s&&s.stream_sid!==r.stream_sid&&(this.logger.info("hsur.0 update sid. "+t+" origin:"+s.stream_sid+", new:"+r.stream_sid),s.stream_sid=r.stream_sid)):this.logger.info("hsur.0 stream is not exist")},e.prototype.handleFetchStreamListRsp=function(e,t){var r,n,o,i,s,l;if(this.logger.info("zb.sh.hfslr call "+t),this.streamQuerying=!1,this.stateCenter.reporter.spanEnd({key:a.event,par:this.roomID},{stream_seq:a.stream_seq(null===(r=e.body)||void 0===r?void 0:r.stream_seq),stream_size:a.stream_size(null===(o=null===(n=e.body)||void 0===n?void 0:n.stream_info)||void 0===o?void 0:o.length),stream_list:a.stream_list(null===(i=e.body)||void 0===i?void 0:i.stream_info),error:(null===(s=null==e?void 0:e.body)||void 0===s?void 0:s.err_code)||(null==e?void 0:e.code),message:(null===(l=null==e?void 0:e.body)||void 0===l?void 0:l.err_message)||(null==e?void 0:e.msg)}),0===e.body.err_code)if(this.streamSeq!==e.body.stream_seq){var c=e.body.stream_info;this.stateCenter.useNetAgent&&t&&(c=e.body.stream_info.filter((function(e){return e.stream_id===t}))),this.handleFullUpdateStream(e.body.stream_seq,c),this.logger.info("zb.sh.hfslr call success")}else this.logger.info("zb.sh.hfslr same seq");else this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var r=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,t,(function(e,t,o){0!==e.length&&(r.logger.debug("zb.sh.hfus callback addstream"),r.onStreamUpdated(r.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,r.makeCallbackStreamList(e))),0!==t.length&&(r.logger.debug("zb.sh.hfus callback delstream"),r.onStreamUpdated(r.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,r.makeCallbackStreamList(t))),0!==o.length&&(r.logger.debug("zb.sh.hfus callback updatestream"),r.onStreamExtraInfoUpdated(r.roomID,r.makeCallbackStreamList(o)))})),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call "+JSON.stringify(e)),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handlePriPushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.streams_info&&0!==e.body.streams_info.length){if(e.body.streams_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(e.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,r=[],o=0;o<e.length;o++)if(e[o].anchor_id_name!=this.stateCenter.idName&&e[o].id_name!=this.stateCenter.idName&&e[o].user_id!==this.stateCenter.idName){t=!1;for(var i=0;i<this.room.streamList.length;i++)if(e[o].stream_id===this.room.streamList[i].stream_id){t=!0;break}t||r.push(e[o])}else this.logger.debug("hdsl.0 have self stream added");if(0!==r.length){this.logger.debug("zb.sh.hasl callback addstream");for(var s=0;s<r.length;s++){this.room.streamList.push(r[s]);var a=this.streamCenter.playerList[r[s].stream_id];null==a||a.player.setStreamAdd()}this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(r))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var o=this.room.streamList.length-1;o>=0;o--)if(e[r].stream_id===this.room.streamList[o].stream_id){!this.stateCenter.connectChanged&&this.room.streamList.splice(o--,1),t.push(e[r]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var n=0;n<this.room.streamList.length;n++)if(e[r].stream_id===this.room.streamList[n].stream_id){e[r].extra_info!==this.room.streamList[n].extra_info&&(this.room.streamList[n]=e[r],t.push(e[r]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(e){var t,r,o,i=this;this.logger.info("zb.sh.fsl call");var l=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZMLoginRoom.event,par:this.roomID},{key:a.event,par:this.roomID},a.event,!0);if(this.rtm.isDisConnect())return this.logger.info("zb.sh.fsl state error"),void this.stateCenter.reporter.setError(l,a.error.NOT_LOGIN);if(this.streamQuerying)return this.logger.info("zb.sh.fsl already doing"),void this.stateCenter.reporter.setError(l,a.error.kParamError," already doing");if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),this.stateCenter.useNetAgent)this.rtm.liveRoomHandler.getStreamList({},(function(t){i.handleFetchStreamListRsp(t,e)}),(function(e){}),{roomID:null===(t=this.room)||void 0===t?void 0:t.roomID,sessionID:null===(r=this.room)||void 0===r?void 0:r.sessionID,roomSessionID:null===(o=this.room)||void 0===o?void 0:o.roomSessionID});else{var c=this.room;this.rtm.service.sendMessage("stream_info",{reserve:0},(function(e){i.handleFetchStreamListRsp(e)}),(function(e,t){}),void 0,{roomID:null==c?void 0:c.roomID,sessionID:null==c?void 0:c.sessionID,roomSessionID:null==c?void 0:c.roomSessionID})}this.logger.info("zb.sh.fsl call success")},e.prototype.handleReconnectStream=function(e){var t,r,o,i,s,a;this.logger.info("zb.sh.hrs call");var l=this.streamCenter.publisherList,c=this.streamCenter.playerList,u=function(c){if((null===(r=null===(t=l[c])||void 0===t?void 0:t.room)||void 0===r?void 0:r.roomID)!==d.roomID)return"continue";var u=e.find((function(e){return e.stream_id==c}));if((null===(o=l[c].publisher)||void 0===o?void 0:o.state)!=n.ENUM_PUBLISH_STATE.publishing&&l[c].state!==n.ENUM_PLAYER_STATE.playing||u&&(!u||u.anchor_id_name===d.stateCenter.idName||u.id_name===d.stateCenter.idName||u.user_id===d.stateCenter.idName)){if(((null===(i=l[c].publisher)||void 0===i?void 0:i.state)==n.ENUM_PUBLISH_STATE.stop||l[c].state===n.ENUM_PLAYER_STATE.stop)&&!(null===(a=null===(s=l[c])||void 0===s?void 0:s.retryStreamHandler)||void 0===a?void 0:a.maxTimer)&&e.find((function(e){return e.stream_id==c}))){d.updateStreamInfo(c,n.ENUM_STREAM_SUB_CMD.liveEnd);for(var h=0;h<d.room.streamList.length;h++)if(d.room.streamList[h].stream_id==c){d.room.streamList.splice(h--,1);break}}}else d.updateStreamInfo(c,n.ENUM_STREAM_SUB_CMD.liveBegin,d.stateCenter.publishStreamList[c].extra_info)},d=this;for(var h in l)u(h);for(var h in l)l[h].room.roomID===this.roomID&&l[h].isReDispatch&&(this.logger.info("zb.sh.hrs "+h+"retry dispatch"),(p=l[h].retryDispatchHandler).stopMaxTime(),p.invalid(),p.initStream(h,l[h].publishOption,!0),p.active(0),l[h].isReDispatch=!1);for(var h in c){var p;c[h].room.roomID===this.roomID&&c[h].isReDispatch&&(this.logger.info("zb.sh.hrs "+h+"retry dispatch"),(p=c[h].retryDispatchHandler).stopMaxTime(),p.invalid(),p.initStream(h,c[h].playOption,!1),p.active(0),c[h].isReDispatch=!1)}var f=this.streamCenter.stopedPlayerList,g=function(e){if(f[e].roomID!==m.roomID)return"continue";var t=m.streamCenter,r=f[e],o=r.playOption,i=r.playStream;t.setPlayStateStart(e,o,r.isDataChannel);var s=t.playerList[e].retryDispatchHandler;t.playSuccessCallBackList[e]=f[e].sucCallBack?f[e].sucCallBack:function(e){for(var t=document.querySelectorAll("video, audio"),r=0;r<t.length;r++)i&&t[r].srcObject===i&&(i.getTracks().forEach((function(e){return i.removeTrack(e)})),e.clone().getTracks().forEach((function(e){return i.addTrack(e)})))},f[e].errCallBack&&(t.playErrorCallBackList[e]=f[e].errCallBack),t.onPlayStateUpdate(n.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),s.stopMaxTime(),s.invalid(),s.initStream(e,o,!1),s.startMaxTime(),s.active(0),delete f[e]},m=this;for(var h in f)g(h);this.logger.info("zb.sh.hrs end")},e.prototype.makeCallbackStreamList=function(e){var t,r=[];if(this.stateCenter.useNetAgent&&this.stateCenter.appConfig&&(t=this.stateCenter.appConfig.media_config.play_config.resource_info.filter((function(e){return[n.SignalResourceType.CDN,n.SignalResourceType.DG].includes(e.resource_type)}))),e&&e.length>0)for(var o=0;o<e.length;o++){var i=e[o].stream_id;if(t&&t.length)for(var s=0;s<t.length;s++){for(var a=t[s].resource_type==n.SignalResourceType.DG?"_plus":"",l=[],c=[],u=[],d=0;d<t[s].service_info.length;d++){var h=t[s].service_info[d],p=h.protocol,f=h.url_template.replace("{STREAM_NAME}",i);switch(p){case n.ProtocolType.FLV:l.push(f);break;case n.ProtocolType.HLS:c.push(f);break;case n.ProtocolType.RTMP:u.push(f)}}e[o]["urls_flv"+a]=l,e[o]["urls_m3u8"+a]=c,e[o]["urls_rtmp"+a]=u}var g={user:{userID:e[o].anchor_id_name||e[o].id_name,userName:e[o].anchor_nick_name||e[o].nick_name},extraInfo:e[o].extra_info,streamID:e[o].stream_id,roomID:"",urlFlv:"",urlFlvPlus:"",urlRtmp:"",urlHls:"",urlHlsPlus:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[o].stream_gid,closeType:e[o].close_type};this.setCDNInfo(g,e[o]),r.push(g)}return r},e.prototype.sendBizChannelRequest=function(e,t,r,n){var o=this;void 0===n&&(n=!1),e=Object.assign(e,{is_retry_req:n?1:0});var i=this.room;this.rtm.service.sendMessage("biz_channel",e,(function(e,r){t(e.header.seq,e.body.cmd,e.body.rsp_body)}),(function(n,i){var s=n.body.err_code;"number"!=typeof s||2002!==s?r(s,i,n.body.rsp_body):o.sendBizChannelRequest(e,t,r,!0)}),void 0,{roomID:null==i?void 0:i.roomID,sessionID:null==i?void 0:i.sessionID,roomSessionID:null==i?void 0:i.roomSessionID})},e.prototype.sendBizChannelRequestV2=function(e,t,r,n){var o=this,s=e.server,a=e.location,l=e.cmd,c=e.channel,u=this.rtm.netAgent,d=this.room,h=void 0,p=t.timestamp;t&&(h=JSON.stringify(t));var f={cmd:l,req_body:h,appid:this.stateCenter.appid,timestamp:p||Math.ceil((new Date).getTime()/1e3),token:null==d?void 0:d.token,user_id:this.stateCenter.idName,channel:c||"media"};this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" "+JSON.stringify(f)+" request "+JSON.stringify(e)),u.startHttpRequest({service:s,headers:[],body:f,idName:this.stateCenter.idName,method_no:2,ack:!1,location:a},(function(e){o.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" rsp "+JSON.stringify(e.body));var s=e.status_code,a=e.body;if(200===s){var l=a;if("string"==typeof a)try{l=JSON.parse(a)}catch(e){throw n(s),e}var c=l.err_code,u=l.rsp_body,d=void 0;try{d=JSON.parse(u)}catch(e){d=u}if(0!==c)return"number"==typeof c&&2002===c?void o.sendBizChannelRequest(t,r,n,!0):void n(s,c,d);r(d)}else n(s)}),(function(e){n(-1,null==e?void 0:e.code,void 0,e)}))},e.prototype.updateStreamExtraInfo=function(e,t,r,n){},e.prototype.setStreamExtraInfo=function(e,t,r,n){},e.prototype._publishTarget=function(e,t,r){},e.prototype.patchStreamList=function(e){var t=this;if("number"==typeof e.body.StreamRefresh&&0!==e.body.StreamRefresh)return this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" stream refresh "),void this.fetchStreamList();e.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+e.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.streamListHBMergeInterval)),this.minStreamSeq=e.body.stream_seq},e.prototype.getStreamSeq=function(){return this.streamSeq},e.prototype.mergeStreamByStreamSeq=function(e,t,r){var n=this;this.streamSeqMergeMap||(this.logger.warn(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+t),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.streamListMergeInterval)),this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" ".concat(this.streamSeqMergeMap," ").concat(e," ").concat(t," ").concat(r)),this.streamSeqMergeMap[t]={cmd:e,streamList:r}},e.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var e=Object.keys(this.streamSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.minStreamSeq?this.mergeStream(e):(this.streamSeqMergeMap=null,this.fetchStreamList())}},e.prototype.mergeStream=function(e){var t=this;this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+e.join(","));var r=e[e.length-1],o=[];e.forEach((function(e){if(t.streamSeqMergeMap&&t.streamSeqMergeMap[e])switch(t.streamSeqMergeMap[e].cmd){case n.ENUM_STREAM_UPDATE_CMD.added:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t),o.push(e)}));break;case n.ENUM_STREAM_UPDATE_CMD.deleted:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t)}));break;case n.ENUM_STREAM_UPDATE_CMD.updated:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t),o.push(e)}))}})),this.streamSeqMergeMap=null,this.logger.info(i.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+o),this.handleFullUpdateStream(r,o)},e.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},e}();t.StreamHandler=l},6706:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.QUALITYLEVEL=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD_PRI=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.STREAM_DELETE_REASON=t.ENUM_NETWORK_STATE=t.USER_RUN_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_RETRY_CONNECT_INTERVAL=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.MAX_MIX_TASK_ID_LENGTH=t.MAX_MESSAGE_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.streamMap=t.ENUM_CONNECT_STATE=t.ProtocolType=t.SignalResourceType=t.ENUM_PROBE_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAYER_STATE=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.ZReporter=t.BusinessService=t.NetConnection=t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.ZegoExpressWebRTMEngine=t.getReportSeq=t.getSeq=t.EncodecSelectionModeType=t.H264ProfileType=t.TRACER_LEVEL=t.ZegoScenario=t.ResourceMode=t.PlayMode=t.ZegoSEIType=t.QUALITY_CONSTANT=t.QualityGrade=t.REPORT_ACTION=t.ENUM_RETRY_STATE=t.ENUM_PLAY_STATE_UPDATE=t.ENUM_PUBLISH_STATE_UPDATE=t.LinkedList=t.ListNode=t.E_CLIENT_TYPE=t.ENUM_SOURCE_TYPE=void 0,t.PROTO_VERSION="2.22.0",t.ROOMVERSION="V1",function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.tryProbe=0]="tryProbe",e[e.probed=2]="probed"}(t.ENUM_PROBE_STATE||(t.ENUM_PROBE_STATE={})),function(e){e[e.CDN=0]="CDN",e[e.RTC=1]="RTC",e[e.L3=2]="L3",e[e.DG=3]="DG"}(t.SignalResourceType||(t.SignalResourceType={})),function(e){e[e.UDP=0]="UDP",e[e.RTMP=1]="RTMP",e[e.FLV=2]="FLV",e[e.HLS=3]="HLS",e[e.WEBRTC=4]="WEBRTC"}(t.ProtocolType||(t.ProtocolType={})),t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.streamMap={"/lr/push/stream_add":12001,"/lr/push/stream_delete":12002,"/lr/push/stream_update":12003},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MESSAGE_LENGTH=1024,t.MAX_MIX_TASK_ID_LENGTH=256,t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_RETRY_CONNECT_INTERVAL=12,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login",e[e.reconnect=3]="reconnect"}(t.USER_RUN_STATE||(t.USER_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CDN=1]="CDN",e[e.RTC=2]="RTC",e[e.L3=3]="L3"}(n||(n={})),t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},t.SERVER_ERROR_CODE=1e4,function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(t.QUALITYLEVEL||(t.QUALITYLEVEL={})),t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra"}(t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={})),function(e){e[e.stop=0]="stop",e[e.start=1]="start"}(t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra",e[e.customUrl=2]="customUrl"}(t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={})),function(e){e[e.CDN=0]="CDN",e[e.BGP=1]="BGP"}(t.ENUM_SOURCE_TYPE||(t.ENUM_SOURCE_TYPE={})),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}));var o=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=o;var i=function(){function e(){this.start=new o,this.end=new o,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var r=new o(this._idCounter,t);return r.next=e,r.prev=e.prev,e.prev&&(e.prev.next=r),e.prev=r,++this._idCounter,++this._numNodes,r},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(e>=0)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},e.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=i,t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},function(e){e[e.Unknown=-1]="Unknown",e[e.Excellent=0]="Excellent",e[e.Good=1]="Good",e[e.Middle=2]="Middle",e[e.Poor=3]="Poor",e[e.Die=4]="Die"}(t.QualityGrade||(t.QualityGrade={})),function(e){e[e.MinQuality=0]="MinQuality",e[e.DieQuality=0]="DieQuality",e[e.PoorMinQuality=1]="PoorMinQuality",e[e.MiddleMinQuality=30]="MiddleMinQuality",e[e.GoodMinQuality=60]="GoodMinQuality",e[e.ExcellentMinQuality=85]="ExcellentMinQuality",e[e.MaxQuality=100]="MaxQuality"}(t.QUALITY_CONSTANT||(t.QUALITY_CONSTANT={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(t.ZegoSEIType||(t.ZegoSEIType={})),function(e){e[e.CDN=0]="CDN",e[e.L3=1]="L3"}(t.PlayMode||(t.PlayMode={})),function(e){e[e.RTC=0]="RTC",e[e.CDN=1]="CDN",e[e.L3=2]="L3",e[e.DG=3]="DG"}(t.ResourceMode||(t.ResourceMode={})),function(e){e[e.Default=3]="Default",e[e.StandardVideoCall=4]="StandardVideoCall",e[e.HighVideoCall=5]="HighVideoCall",e[e.StandardChatroom=6]="StandardChatroom",e[e.HighQualityChatroom=7]="HighQualityChatroom",e[e.Broadcast=8]="Broadcast"}(t.ZegoScenario||(t.ZegoScenario={})),function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(t.TRACER_LEVEL||(t.TRACER_LEVEL={})),function(e){e[e.BASE_LINE=1]="BASE_LINE",e[e.MAIN=2]="MAIN",e[e.HIGH=3]="HIGH"}(t.H264ProfileType||(t.H264ProfileType={})),function(e){e.ONLY_BASELINE="only_baseline",e.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first"}(t.EncodecSelectionModeType||(t.EncodecSelectionModeType={}));var s=r(4119);Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return s.getSeq}}),Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return s.getReportSeq}}),Object.defineProperty(t,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return s.ZegoExpressWebRTMEngine}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return s.ZegoDataReport}}),Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return s.ZegoExpressWebRTM}}),Object.defineProperty(t,"NetConnection",{enumerable:!0,get:function(){return s.NetConnection}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return s.BusinessService}}),Object.defineProperty(t,"ZReporter",{enumerable:!0,get:function(){return s.ZReporter}})},2752:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},GET_CONFIG_FAIL:{code:1101002,message:"get app config fail"},MODULE_NOT_IMPORTED:{code:1101003,message:"Module not imported"},RTC_LOGIN_ERROR:{code:1101004,message:"signal login fail"},RTC_HB_ERROR:{code:1101005,message:"signal hb fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},VIDEO_EFFECT_IS_STARTING:{code:1103073,message:"video effect is starting, please operate after video effect is started"},PUBLISHER_NET_PROBE_POOR:{code:1103069,message:"publish stream poor and net probe poor"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},PLAYER_STREAM_NOT_EXIST:{code:1104039,message:"play stream not found"},PLAYER_NET_PROBE_POOR:{code:1103040,message:"publish stream poor and net probe poor"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."},SET_ROOM_SCENARIO:{code:1000067,message:"Logged in room, setting scenario is not supported"}}},3529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatLogEvent=t.ZegoRTCLogEvent=void 0;var n=r(2752),o=function(e){return e},i=function(e){return e},s=function(e){return e},a=function(e){return e},l=function(e){return e};t.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:n.errorCodeList.INPUT_PARAM},system_info:i,servers:s},kZegoTaskRoom:{event:"room"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskListener:{event:"listener"},kZegoTaskOnListener:{event:"/sdk/on_listener",listener:i,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM}},kZegoTaskOffListener:{event:"/sdk/off_listener",listener:i,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM}},kZegoTaskRoomContext:{event:"room_context"},kZegoTaskInitSetting:{event:"/sdk/init"},kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:n.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:n.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:n.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:n.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:n.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:n.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:n.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:n.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:n.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:i,screen:o,camera:o,custom:o,preview_conf:o,media_stream_id:i},kZegoTaskPublishStart:{event:"/sdk/start_publish",error:{kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:n.errorCodeList.PUBLISH_NO_PREVIEW,kPublishEffectIsStarting:n.errorCodeList.VIDEO_EFFECT_IS_STARTING,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:n.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:n.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:n.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:n.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:n.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:n.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:n.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:n.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:n.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:n.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:n.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:n.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL,kPublishNetProbePoor:n.errorCodeList.PUBLISHER_NET_PROBE_POOR},urls:s,is_center:l,server_url:i,publish_option:o,message:i,stream_id:i,stream_sid:a,room_id:i,video_en_codec_id:a,cap_w:a,cap_h:a,w:a,h:a,video_en_fps:a,video_en_bps:a,audio_c_channel_count:a,audio_en_bps:a,aec_level:a,ans_level:a,agc:l,enable_camera:l,enable_mic:l,video_activate:l,audio_activate:l,gw_version:a,use_na:a},kZegoStartPublish:{event:"/publish/start",is_peer:l,reason:i,url:i,ip:i,peer_id:a,source_type:i,net_protocol:i,wait_consume:a,dispatch_consume:a,signal_consume:a,is_center:l},kZegoRePublish:{event:"/publish/restart",stream_id:i,server_url:i,reason_code:a},kZegoTaskRePublish:{event:"/sdk/republish"},kZegoTaskSDKPublishStream:{event:"/sdk/publish",room_id:i,room_sid_string:i,retry_btime:a,max_retry_interval:a,fail_cnt:a,continuous_fail_cnt:a,probe_ip_cnt:a,valid_probe_ip_cnt:a,poor_quality_retry_cnt:a,use_resource_type:s,probe_not_trigger_retry_info:o,stop_reason:i,try_cnt:a,server_url:i,publish_begin_time:a,publish_state_time:a,bitrate:a,h:a,w:a,cap_w:a,cap_h:a,fps:a,use_na:a,env:a,webrtc_sid:a,stream_id:i,itemtype:i},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",webrtc_sid:a,w:a,h:a},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",webrtc_sid:a,w:a,h:a},kZegoTaskRTCPublish:{event:"/rtc/publish",tryidx:a,url:i,ip:i,net_protocol:i,lsttime:a,denied_info:i,dispatch_external_ip:i,total_stat:o,room_id:i,room_sid_string:i,resource_type:i,protocol:i,stop_reason:i},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream_id:i,stream_sid:a,room_id:i},kZegoTaskPublishStreamStateError:{event:"/rtc/publish_stream_state_error"},kZegoTaskPlayStart:{event:"/sdk/start_play",error:{kStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:n.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayStreamNotFound:n.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:n.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:n.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:n.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:n.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:n.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:n.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:n.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:n.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:n.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:n.errorCodeList.PLAYER_PROBE_TIMEOUT,kPlayNetProbePoor:n.errorCodeList.PLAYER_NET_PROBE_POOR},room_id:i,urls:s,is_center:l,server_url:i,video_layer:a,play_option:o,message:i,stream_id:i,stream_sid:a,resource_mode:a,src:i,video_codec_id:i,room_sid_string:i,is_multi:l,audio_activate:l,video_activate:l,gw_version:a,use_na:a,biz_product:a},kZegoStartPlay:{event:"/play/start",is_peer:l,reason:i,url:i,ip:i,peer_id:a,source_type:i,net_protocol:i,wait_consume:a,dispatch_consume:a,signal_consume:a,is_center:l},kZegoRePlay:{event:"/play/restart",stream_id:i,server_url:i,reason_code:a},kZegoTaskSDKPlayStream:{event:"/sdk/play",audio_cumulative_break_time:a,audio_cumulative_decode_time:a,video_cumulative_break_time:a,video_cumulative_decode_time:a,l3_a_break_time:a,l3_a_decode_time:a,l3_v_break_time:a,l3_v_decode_time:a,rtc_a_break_time:a,rtc_a_decode_time:a,rtc_v_break_time:a,rtc_v_decode_time:a,fft_audio:a,fft_video:a,room_id:i,room_sid_string:i,retry_btime:a,max_retry_interval:a,use_na:a,fail_cnt:a,continuous_fail_cnt:a,probe_ip_cnt:a,valid_probe_ip_cnt:a,poor_quality_retry_cnt:a,probe_not_trigger_retry_info:o,use_resource_type:s,stop_reason:i,try_cnt:a,webrtc_sid:a,itemtype:i,server_url:i,play_begin_time:a,play_state_time:a,play_state_cnt:a,first_frame_time:a,protocol:i,dispatch_external_ip:i,total_stat:o,w:a,h:a,abrc:a,vbrc:a,vinfo:o},kZegoTaskStreamPlay:{event:"/rtc/play",tryidx:a,url:i,ip:i,stream_id:i,room_id:i,room_sid_string:i,net_protocol:i,lsttime:a,denied_info:i,stop_reason:i,dispatch_external_ip:i,env:a,resource_type:i,protocol:i,total_stat:o,vinfo:o},kZegoTaskRePlay:{event:"/sdk/replay",stream_id:i,server_url:i,reason_code:a},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},room_id:i,stream_id:i,webrtc_sid:a,stream_sid:a,biz_product:a},kZegoTaskPlayStreamStateError:{event:"/rtc/play_stream_state_error"},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:o,dev_kind:i},kZegoAudioDeviceChanged:{event:"/device/audio_device_changed",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:a,device:i,device_name:i},kZegoVideoDeviceChanged:{event:"/device/video_device_changed",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:a,device:i,device_name:i},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},interrupt:a,device:i,device_name:i},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:o},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream_id:i,camera_status:i,status_code:a},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream_id:i,mic_status:i,status_code:a},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},stop_reason:i},kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",device:i,device_name:i,reason_type:i},kZegoTaskLiveRoomRecvStreamUpdateInfo:{event:"/liveroom/recv_stream_update_info",stream_update_type:i,stream_seq:a,stream_list:o,error:{ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendStreamUpdateInfo:{event:"/liveroom/send_stream_update_info",stream_update_type:i,stream_extra_info:i,stream_id:i,svr_env:i,send_seq:a,use_na:a},kZegoTaskLiveRoomGetCurrentStreamList:{event:"/liveroom/get_current_stream_list",room_id:i,room_sid_string:i,stream_seq:a,stream_size:a,stream_list:o,use_ua:a,error:{kParamError:n.errorCodeList.PUBLISHER_PARAM,NOT_LOGIN:n.errorCodeList.NOT_LOGIN}},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:o},kZegoTaskPlayNetFirstVideoFrame:{event:"/sdk/net_first_video_frame",webrtc_sid:a,fft_consumed:o,resource_type:i,reliability:a,push_consumed:a,prepare_recv_consumed:a,connected_consumed:a,protocol:i,biz_product:a,dev_changed:l},kZegoTaskPlayNetFirstAudioFrame:{event:"/sdk/net_first_audio_frame",webrtc_sid:a,fft_consumed:o,resource_type:i,reliability:a,push_consumed:a,prepare_recv_consumed:a,connected_consumed:a,protocol:i,biz_product:a,dev_changed:l},kZegoAppLifeCycle:{event:"/app/lifecycle",state:i},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe",net_quality:a,node_list:s},kZegoNetProbeResult:{event:"/sdk/net_probe_result",is_switch:l,is_publish:l,stream_id:i,result:a,node:i,net_quality:a,probe_net_quality:a},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache",files:o},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCDNPlay:{event:"/cdn/play",protocol:i,tryidx:a,url:i,stop_reason:i,biz_product:a},kZegoTaskL3Play:{event:"/l3/play",protocol:i,tryidx:a,url:i,stop_reason:i,biz_product:a},kZegoTaskSrcChange:{event:"/sdk/play_src_changed",last_src:i,src:i,biz_product:a},kZegoPublishStreamResource:{event:"/publish/stream_resource",urls:s,try_cnt:a,is_center:l},kZegoPublishServerConnect:{event:"/publish/server_connect",server_url:i,stream_type:i},kZegoPublishCreateOffer:{event:"/publish/create_offer",sdp:i,stream_type:i},kZegoPublishSetLocalSdp:{event:"/publish/set_local_sdp",sdp:i,stream_type:i},kZegoPublishCreateSession:{event:"/publish/create_session",sdp:i,gw_nodes:s,gw_nodes_ttl:a,gw_version:a,webrtc_sid:a},kZegoPublishSetRemoteSdp:{event:"/publish/set_remote_sdp",sdp:i,webrtc_sid:a},kZegoPublishIceConnected:{event:"/publish/ice_connected",webrtc_sid:a},kZegoRTCPublishEvent:{event:"/publish/rtc_publish_event",event_state:a,webrtc_sid:a},kZegoRTCPlayEvent:{event:"/rtc/play_event_message",event_state:a,webrtc_sid:a},kZegoRTCRecvCloseSession:{event:"/rtc/recv_close_session",err_info:o},kZegoRTCRecvResetSession:{event:"/rtc/recv_reset_session"},kZegoRTCIceStateChanged:{event:"/rtc/ice_connection_state_changed",ice_state:i},kZegoPublishSendMediaDesc:{event:"/publish/send_media_desc",webrtc_sid:a},kZegoPublishRecvMediaDesc:{event:"/publish/recv_media_desc",sdp:i},kZegoPublishSendIceCandidate:{event:"/publish/send_ice_candidate",candidate_info:o},kZegoPublishRecvIceCandidate:{event:"/publish/recv_ice_candidate",candidate_info:o},kZegoRTCHB:{event:"/rtc/hb",error:{RTC_HB_ERROR:n.errorCodeList.RTC_HB_ERROR}},kZCRecvRemoteStream:{event:"/rtc/recv_remote_stream"},kZegoPlayStreamResource:{event:"/play/stream_resource",urls:s,try_cnt:a,is_center:l},kZegoPlayServerConnect:{event:"/play/server_connect",server_url:i,stream_type:i},kZegoPlayCreateOffer:{event:"/play/create_offer",sdp:i,stream_type:i},kZegoPlaySetLocalSdp:{event:"/play/set_local_sdp",sdp:i,stream_type:i},kZegoPlayCreateSession:{event:"/play/create_session",sdp:i,gw_nodes:s,gw_nodes_ttl:a,gw_version:a,webrtc_sid:a},kZegoPlaySetRemoteSdp:{event:"/play/set_remote_sdp",sdp:i,webrtc_sid:a},kZegoPlayIceConnected:{event:"/play/ice_connected",webrtc_sid:a},kZegoPlaySendMediaDesc:{event:"/play/send_media_desc",webrtc_sid:a},kZegoPlayRecvMediaDesc:{event:"/play/recv_media_desc",sdp:i},kZegoPlaySendIceCandidate:{event:"/play/send_ice_candidate",candidate_info:o},kZegoPlayRecvIceCandidate:{event:"/play/recv_ice_candidate",candidate_info:o},kZegoConnConnect:{event:"/zegoconn/connect"},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:a,proxy_link_sources:a,recv_time:a,connect_stream:a},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:a},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:a}},t.ZegoWechatLogEvent={kZMInitSetting:{event:"/sdk/init"},kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:n.errorCodeList.WX_GET_SETTING_FAIL},check_system:o},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:o,stream:o,message:o},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayStreamNotFound:n.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING},playOption:o,message:o,session_id:o,stream:o,audio_activate:o,video_activate:o},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o,room_id:o},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:o,update_stream:o},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:o}}},2367:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.SET_VIDEO_CONFIG="zc.svc",e.SET_AUDIO_CONFIG="zc.sac",e.REPLACE_TRACK="zc.rp",e.SET_BEAUTY_EFFECT="zc.sbe",e.ENABLE_STREAM="zc.es",e.ENABLE_MIC_ONLY="zc.emo",e.ACTIVATE_SEI_INSERT="zc.asi",e.MUTE_PUBLISH_STREAM_VIDEO="zc.mpsv.0",e.MUTE_PUBLISH_STREAM_AUDIO="zc.mpsa.0",e.MUTE_MIC="zc.mm",e.MUTE_PLAY_STREAM_VIDEO="zc.mpsv.1",e.MUTE_PLAY_STREAM_AUDIO="zc.mpsa.1",e.ADD_TRACK="zc.at",e.REMOVE_TRACK="zc.rt",e.HANDLE_TRACK="zc.ht"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},4495:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=t.TRACER_LEVEL=void 0;var s,a=r(2367),l=r(5098),c=r(8706),u=r(608);!function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(s=t.TRACER_LEVEL||(t.TRACER_LEVEL={}));var d=function(){function e(e,t,r,n){this.logger=e,this.dataReport=t,this.streamCenter=r,this.stateCenter=n,this.screenShotReady=!1}return e.prototype.setVideoConfig=function(e,t){var r=this;return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" call"),new Promise((function(o,i){var s=c.ZegoRTCLogEvent.kZegoSetVideoConfig.error,l=s.kLocalStreamError,d=s.kParamError,h=r.getSpan(e,c.ZegoRTCLogEvent.kZegoSetVideoConfig.event),p=n({},t);t.width&&(p.width=JSON.stringify(t.width)),t.height&&(p.height=JSON.stringify(t.height)),t.frameRate&&(p.frameRate=JSON.stringify(t.frameRate)),h.setAttributes({video_params:c.ZegoRTCLogEvent.kZegoSetVideoConfig.video_params(p)});var f,g,m=function(e){r.stateCenter.reporter.setError(h,l,e)};if(!(e instanceof MediaStream))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" localStream not found"),m("localStream not found"),void i({errorCode:d.code,extendedData:d.message+" localStream no found"});if(!t||"object"!=typeof t||0==Object.keys(t).length)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints wrong"),m("constraints wrong"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.width&&"number"==typeof t.width&&!r.stateCenter.checkValidNumber(t.width,0,7680))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width integer number, range[0, 7680]"),m("constraints width integer number, range[1, 7680]"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.width&&"object"==typeof t.width){if(!(g=u.ClientUtil.checkConstraintExtendWithMessage(t.width,"width",0,7680)).result)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width: "+g.message),m("constraints width: "+g.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})}else if(t.width&&"number"!=typeof t.width&&"object"!=typeof t.width)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width must be a number or an object. "),m("constraints width must be a number or an object."),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.height&&"number"==typeof t.height&&!r.stateCenter.checkValidNumber(t.height,0,4320))return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height integer number, range[0, 4320]"),m(" constraints height integer number, range[0, 4320]"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});if(t.height&&"object"==typeof t.height){if(!(g=u.ClientUtil.checkConstraintExtendWithMessage(t.height,"height",0,4320)).result)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height: "+g.message),m("constraints height: "+g.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})}else if(t.height&&"number"!=typeof t.height&&"object"!=typeof t.height)return r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height must be a number or an object. "),m(" constraints height must be a number or an object."),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"});return t.maxBitrate&&"number"!=typeof t.maxBitrate?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(f=" constraints maxBitrate is not a number")),m(f),void i({errorCode:d.code,extendedData:d.message+f})):void 0!==t.frameRate&&"number"!=typeof t.frameRate&&"object"!=typeof t.frameRate?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+(f=" constraints frameRate is not a number or an object")),m(f),void i({errorCode:d.code,extendedData:d.message+f})):"number"!=typeof t.frameRate||t.frameRate>0&&t.frameRate%1==0?t.frameRate&&"object"==typeof t.frameRate&&!(g=u.ClientUtil.checkConstraintExtendWithMessage(t.frameRate,"frameRate")).result?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate: "+g.message),m("constraints frameRate: "+g.message),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"})):void r.setPublishStreamConstraints(e,t,h,(function(e){h.setAttributes({error:e.errorCode,message:e.extendedData}),h.end(),o(e)})):(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints frameRate must be positive integer number"),m("constraints frameRate must be positive integer number"),void i({errorCode:d.code,extendedData:d.message+" constraints wrong"}))}))},e.prototype.setAudioConfig=function(e,t){var r=this;return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" call"),new Promise((function(n){var o=r.getSpan(e,c.ZegoRTCLogEvent.kZegoSetAudioConfig.event);return o.setAttributes({audio_params:c.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_params(t)}),e instanceof MediaStream?!t||"object"!=typeof t||0==Object.keys(t).length||void 0!==t.AEC&&"boolean"!=typeof t.AEC||void 0!==t.AGC&&"boolean"!=typeof t.AGC||void 0!==t.ANS&&"boolean"!=typeof t.ANS?(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" constraints wrong"),r.stateCenter.reporter.setError(o,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError," constraints wrong"),void n({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" constraints wrong"})):void r.setPublishStreamConstraints(e,t,o,(function(e){o.end(),n(e)})):(r.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" localStream not found"),r.stateCenter.reporter.setError(o,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kLocalStreamError),void n({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.enableStream=function(e,t){if(this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" call"),"boolean"!=typeof t.video&&"boolean"!=typeof t.audio)return this.logger.error(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" option error"),!1;var r=!0,n=!0;return"boolean"==typeof t.video&&(r=this.enableCamera(e,t.video,t.retain)),"boolean"==typeof t.audio&&(n=this.enableMicrophone(e,t.audio)),r&&n},e.prototype.enableMicrophoneOnly=function(e){if(this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY+" call"),"boolean"!=typeof e)return!1;for(var t=0;t<this.streamCenter.previewStreamList.length;t++)if(!this.streamCenter.previewStreamList[t].enableMicrophoneOnly(e,this.streamCenter))return this.logger.error("zsc.emo.0 previewer ".concat(t," change mic mute state failed")),!1;return this.streamCenter.isMicEnabled=e,!0},e.prototype.replaceTrack=function(e,t,r){return o(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){return n=this.getSpan(e,c.ZegoRTCLogEvent.kZegoReplaceTrack.event),o=c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError,e instanceof MediaStream?t&&t instanceof MediaStreamTrack?(s=this._replaceTrack(e,t,r),n.setAttributes({track_kind:c.ZegoRTCLogEvent.kZegoReplaceTrack.track_kind(t.kind)}),n.end(),[2,s]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" mediastream track no found"),this.stateCenter.reporter.setError(n,o,"mediastream track no found"),[2,{errorCode:o.code,extendedData:o.message+" mediastream track no found"}]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" localStream not found"),this.stateCenter.reporter.setError(n,o,"localStream not found"),[2,{errorCode:o.code,extendedData:o.message+" localStream no found"}])}))}))},e.prototype.setPublishStreamConstraints=function(e,t,r,n){var s=this;this.logger.info("zsc.spsc.0 constraints",JSON.stringify(t));var a=this.streamCenter.checkPreview(e);if(!a)return this.logger.error("zsc.spsc.0 preview no found"),void(n&&n({errorCode:l.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:l.errorCodeList.PUBLISH_NO_PREVIEW.message}));var u=a.videoTrack,d=a.audioTrack,h=null==u?void 0:u.getSettings(),p=!1,f=!1;if(u&&(t.width||t.height||t.frameRate||t.videoQuality)&&(t.videoQuality||(a.mediaStreamConfig.videoQuality=4),p=!0),void 0===t.ANS&&void 0===t.AGC&&void 0===t.AEC||(f=!0),p&&!u)return this.logger.error("zsc.spsc.0 video track not found"),void(n&&n({errorCode:l.errorCodeList.TRACK_NOT_FOUND.code,extendedData:l.errorCodeList.TRACK_NOT_FOUND.message}));if(t.video=!0,f&&(!d||a.hasEmptyAudioTrack))return this.logger.error("zsc.spsc.0 audio track not found"),void(n&&n({errorCode:l.errorCodeList.TRACK_NOT_FOUND.code,extendedData:l.errorCodeList.TRACK_NOT_FOUND.message}));t.audio=!0;var g,m=JSON.parse(JSON.stringify(a.mediaStreamConfig)),v=Object.assign(a.mediaStreamConfig,t);"screen"==a.previewType?(g=this.streamCenter.getScreenConstrains(v)).bitRate!==m.bitRate&&(t.maxBitrate=g.bitRate):g=a.getMediaStreamConstraints(v,!0),this.logger.info("zsc.spsc.0 applyConstraints ",JSON.stringify(g));var _=[];if(p&&u){var y={};Object.keys(g.video).forEach((function(e){y[e]=JSON.stringify(g.video[e])})),r.setAttributes({video_conf:c.ZegoRTCLogEvent.kZegoSetVideoConfig.video_conf(y)}),_.push(u.applyConstraints(g.video))}var b=!0;f&&(b=(null==d?void 0:d.enabled)||!1,r.setAttributes({audio_conf:c.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_conf(g.audio)}),null==d||d.stop(),_.push(navigator.mediaDevices.getUserMedia({video:!1,audio:g.audio})));var E=this.streamCenter.getPublishList(e);E.forEach((function(e){var r,n=null==e?void 0:e.publisher,o=(null===(r=null==n?void 0:n.peerConnection)||void 0===r?void 0:r.getSenders())||[];if(o.length>0&&t.maxBitrate){var i=o.filter((function(e){return e.track&&"video"===e.track.kind}));i||s.logger.error("zsc.spsc.0 video sender no found");var l=i.length>1?i[1]:i[0]?i[0]:null;if(l){var c=l.getParameters();c.encodings||(c.encodings=[{}]),c.encodings[0].maxBitrate=1e3*t.maxBitrate,_.push(l.setParameters(c))}else s.logger.error("zsc.spsc.0 video sender no found")}else t.maxBitrate&&(a.videoInfo.bitRate=t.maxBitrate)})),_.length>0?Promise.all(_).then((function(e){var r,o,i=e[1];if(f){var l=(o=p?e[1]:e[0]).getVideoTracks()[0];null==l||l.stop();var u=o.getAudioTracks()[0];u.enabled=b,i=JSON.stringify(u.getSettings()),a.replacePreviewTrack(u),a.gainNode||a.onAudioTrackChange(u)}if(t.maxBitrate){var d=a.videoInfo.bitRate!==t.maxBitrate;a.videoInfo.bitRate=t.maxBitrate,E.forEach((function(e){var r=null==e?void 0:e.publisher;r&&(d&&s.enVideoSpan(e.streamID,c.ZegoRTCLogEvent.kZegoVideoEnBps.event,{bitrate:c.ZegoRTCLogEvent.kZegoVideoEnBps.bitrate(t.maxBitrate)}),r.videoInfo.bitRate=t.maxBitrate)}))}if(null===(r=null==g?void 0:g.video)||void 0===r?void 0:r.frameRate){var m=g.video.frameRate;a.videoInfo.frameRate=m,E.forEach((function(e){var t=null==e?void 0:e.publisher;t&&(t.videoInfo.frameRate=m)}))}E.forEach((function(e){var t,r,n=null===(r=null===(t=e.localStream)||void 0===t?void 0:t.getVideoTracks()[0])||void 0===r?void 0:r.getSettings();(null==h?void 0:h.width)===(null==n?void 0:n.width)&&(null==h?void 0:h.height)===(null==n?void 0:n.height)||s.enVideoSpan(e.streamID,c.ZegoRTCLogEvent.kZegoVideoEnSize.event,{w:c.ZegoRTCLogEvent.kZegoVideoEnSize.w(null==n?void 0:n.width),h:c.ZegoRTCLogEvent.kZegoVideoEnSize.h(null==n?void 0:n.height)}),(null==h?void 0:h.frameRate)!==(null==n?void 0:n.frameRate)&&s.enVideoSpan(e.streamID,c.ZegoRTCLogEvent.kZegoVideoEnFps.event,{fps:c.ZegoRTCLogEvent.kZegoVideoEnFps.fps(null==n?void 0:n.frameRate)})})),s.logger.info("zsc.spsc.0 set constraints success",i),n&&n({errorCode:0,extendedData:""})})).catch((function(t){return o(s,void 0,void 0,(function(){var r,o,s,c,u=this;return i(this,(function(i){switch(i.label){case 0:return this.logger.error("zsc.spsc.0 fail reason ",t.name,t.toString()),f?(r=a.getMediaStreamConstraints(m),this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ",JSON.stringify(r)),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:r.audio}).catch((function(e){u.logger.error("zsc.spsc.0.1 setbackup fail "+e.name)}))]):[3,2];case 1:(o=i.sent())&&(null==(s=e.getVideoTracks()[0])||s.stop(),c=o.getAudioTracks()[0],a.replacePreviewTrack(c),a.gainNode||a.onAudioTrackChange(c)),this.logger.info("zsc.spsc.0.1 setbackup suc "),i.label=2;case 2:return n&&n({errorCode:l.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"".concat(t.name," ").concat(t.constraint?"constraint:"+t.constraint:"")}),[2]}}))}))})):(this.logger.warn("zsc.spsc.0 constaints is no changes"),n&&n({errorCode:l.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"constraints is no changes"}))},e.prototype.useVideoDevice=function(e,t){var r=this;return this.logger.info("zc.uvd.0 call"),new Promise((function(n){var o=r.getSpan(e,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event);if(o.setAttributes({device:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(t)}),!(e instanceof MediaStream))return r.logger.error("zc.uvd.0 localStream not found"),r.stateCenter.reporter.setError(o,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});if("string"!=typeof t)return r.logger.error("zc.uvd.0 deviceID must be string"),r.stateCenter.reporter.setError(o,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError," deviceID must be string"),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});var i=function(t){o.setAttributes({error:t.errorCode,message:t.extendedData}),o.end(),r.streamCenter.getPublishList(e).forEach((function(e){var t,r;e.cameraLabel=(null===(r=null===(t=e.publisher.previewer)||void 0===t?void 0:t.videoTrack)||void 0===r?void 0:r.label)||e.cameraLabel})),n(t)};r.stateCenter.getDevices((function(n){var s=n.cameras.find((function(e){return e.deviceID==t}));if(!s)return r.logger.error("zc.uvd.0 device is not found"),void i({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message});o.setAttributes({device_name:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device_name(null==s?void 0:s.deviceName)}),r.switchDevice("video",e,t,i)}),(function(n){r.logger.warn("zc.uvd.0 getDevices err:",n),r.switchDevice("video",e,t,i)}))}))},e.prototype.useAudioDevice=function(e,t){var r=this;return this.logger.info("zc.uad.1 call"),new Promise((function(n){var o=r.getSpan(e,c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event);o.setAttributes({device:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(t)});var i=function(e,t){r.logger.error("zc.uad.1 "+t);var i=e;i.message=i.message+(t?" "+t:""),r.stateCenter.reporter.setError(o,e,t),n({errorCode:i.code,extendedData:i.message})},s=function(t){o.setAttributes({error:t.errorCode,message:t.extendedData}),o.end(),r.streamCenter.getPublishList(e).forEach((function(t){var r;t.microLabel=(null===(r=e.getAudioTracks()[0])||void 0===r?void 0:r.label)||t.microLabel})),n(t)};e instanceof MediaStream?"string"==typeof t?r.stateCenter.getDevices((function(n){var i=n.microphones.find((function(e){return e.deviceID==t}));if(!i)return r.logger.error("zc.uad.1 device is not found"),void s({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message});o.setAttributes({device_name:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device_name(null==i?void 0:i.deviceName)}),r.switchDevice("audio",e,t,s)}),(function(n){r.logger.warn("zc.uad.1 getDevices err:",n),r.switchDevice("audio",e,t,s)})):i(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError,"deviceID must be string"):i(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError,"localStream not found")}))},e.prototype.enableDualStream=function(e){this.logger.info("zsc.eds call");var t=this.streamCenter.checkPreview(e);t&&!t.lowStream?navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"custom"==t.previewType?this.logger.error("zsc.eds can not support firefox"):this.streamCenter.checkPublish(e)?this.logger.error("zsc.eds is publishing"):(t.enableDualStream=!0,t.createLowStream()):this.logger.error("zsc.eds preview no found")},e.prototype.setLowStreamParameter=function(e,t){var r=this.streamCenter.checkPreview(e);if(r){var n=r.videoInfo;t.width&&n.width&&t.width>n.width?this.logger.error("zsc.slsp.0 low stream width can not larger than high stream"):t.height&&n.height&&t.height>n.height?this.logger.error("zsc.slsp.0 low stream height can not larger than high stream"):t.frameRate&&n.frameRate&&t.frameRate>n.frameRate||t.height&&n.bitRate&&t.bitRate>n.bitRate||(r.lowStreamConfig=Object.assign(r.lowStreamConfig,t))}else this.logger.error("zsc.slsp.0 preview no found")},e.prototype.handleTrack=function(e,t,r,n,s){var c,u,d;return o(this,void 0,void 0,(function(){var h,p,f,g,m,v,_,y,b,E,S,C,T,w,R,k,O,I,P=this;return i(this,(function(A){switch(A.label){case 0:if(h="ADD"===e,p={errorCode:0,extendedData:""},!(t instanceof MediaStream))return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream wrong"),s({errorCode:l.errorCodeList.INPUT_PARAM.code,extendedData:l.errorCodeList.INPUT_PARAM.message}),[2];if(!(r instanceof MediaStreamTrack))return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" parameter 2 type error"),s({errorCode:l.errorCodeList.INPUT_PARAM.code,extendedData:l.errorCodeList.INPUT_PARAM.message}),[2];if(!(f=this.streamCenter.checkPreview(t)))return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream no found"),s&&s({errorCode:l.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:l.errorCodeList.PUBLISH_NO_PREVIEW.message}),[2];if("video"===r.kind){if(null===(c=f.videoEffect)||void 0===c?void 0:c.enabled)return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" need to disable video beauty effect first"),s&&s({errorCode:l.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2];if(f.enableDualStream)return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+"  can not add/remove track while dual stream enabled."),s&&s({errorCode:l.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:" can not add/remove track while dual stream enabled."}),[2]}return f.streamFromCanvas&&"video"===r.kind?(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" browser not support"),s&&s({errorCode:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):(g="audio"===r.kind&&this.stateCenter.engineConfig.keepAudioTrack&&f.hasEmptyAudioTrack,m=t.getTracks().length>=2||t.getTracks().find((function(e){return e.kind==r.kind})),h&&m&&!g?(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only stream which have one track and kind no exist can add track"),s&&s({errorCode:l.errorCodeList.TRACK_CAN_NOT_ADD.code,extendedData:l.errorCodeList.TRACK_CAN_NOT_ADD.message}),[2]):"REMOVE"==e&&(t.getTracks().length<=1||"video"===r.kind&&f.hasEmptyAudioTrack||!t.getTracks().find((function(e){return e.kind===r.kind})))?(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" can not remove track"),s({errorCode:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):!(v=this.streamCenter.checkPublish(t))||5===v.publisher.stateNego&&1!=v.publisher.isUpdateSDP?this.stateCenter.engineConfig.keepAudioTrack&&"audio"===r.kind?(h?(this._replaceTrack(t,r,!1,!0),f.hasEmptyAudioTrack=!1):((_=f.getEmptyAudioTrack())&&this._replaceTrack(t,_,!1,!0),f.hasEmptyAudioTrack=!0),n(p),[2]):(y=f.rtcViewer,b=f,E="video"==r.kind?"videoTrack":"audioTrack",v?(S=v.publisher,(C=v.publisher.peerConnection)?(S.isUpdateSDP=!0,S.sideMediaConfig.isSEIStart&&"video"===r.kind?(this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" replace sei blank track."),T=void 0,h?[4,S.replacePublishedTrack(r,!1,{handleTrack:e})]:[3,2]):[3,5]):[2]):[3,14]):(this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" publish state wrong. "+"".concat(v.publisher.stateNego)),s&&s({errorCode:l.errorCodeList.PUBLISHER_STATE_WRONG.code,extendedData:l.errorCodeList.PUBLISHER_STATE_WRONG.message}),[2]));case 1:return T=A.sent(),[3,4];case 2:return S.sideMediaConfig.track?[4,S.replacePublishedTrack(S.sideMediaConfig.track,!1,{handleTrack:e})]:[3,4];case 3:T=A.sent(),A.label=4;case 4:return 0===(null==T?void 0:T.errorCode)||this.logger.warn(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" enable sei but not found video sender. error: ".concat(JSON.stringify(T))),[3,12];case 5:return"audio"!==r.kind?[3,10]:(S.isUpdateSDP=!1,h?(b.replacePreviewTrack(r),w=b.audioNodeQueue?null===(d=null===(u=b.audioNodeQueue)||void 0===u?void 0:u.destinationNode)||void 0===d?void 0:d.stream.getAudioTracks()[0]:r,[4,C.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}))]):[3,7]);case 6:return(R=A.sent())?R.replaceTrack(w):C.addTrack(w,t),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" add audio track. "),[3,9];case 7:return t.removeTrack(r),b[E]=null,y&&y.setTrack(!1,null),[4,C.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}))];case 8:(R=A.sent())&&R.replaceTrack(null),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" remove audio track. "),A.label=9;case 9:return n(p),[2];case 10:return[4,C.getSenders().find((function(e){return e.track&&e.track.kind==r.kind||null===e.track}))];case 11:if(R=A.sent(),h)R?(R.replaceTrack(r),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender replace track "+r.kind)):(C.addTrack(r,t),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" pc add track "+r.kind));else{if(!R)return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender no found"),s&&s({errorCode:l.errorCodeList.TRACK_NOT_FOUND.code,extendedData:l.errorCodeList.TRACK_NOT_FOUND.message}),[2];try{R.replaceTrack(null),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender replace null.")}catch(e){this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+e),s&&s({errorCode:l.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:l.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message+" "+e})}}A.label=12;case 12:return k={},O=this.streamCenter.previewStreamList.find((function(e){return e.originVideoTrack===r})),O=O||this.streamCenter.previewStreamList.find((function(e){return e.localStream.getTracks().find((function(e){return e==r}))})),O||this.logger.warn(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" track is not created by sdk"),k=O&&h?O.videoInfo:{bitRate:50},this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" video info: ".concat(JSON.stringify(k))),[4,C.createOffer({})];case 13:return I=A.sent(),S.onCreateOfferSuccess(I,!0,k,(function(c){return o(P,void 0,void 0,(function(){return i(this,(function(o){return 0!==c?s&&s({errorCode:l.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:l.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message}):("ADD"==e?(t.addTrack(r),b[E]=r,y&&y.setTrack("video"==r.kind,r,"safari"===this.stateCenter.browser),"video"==r.kind&&1==r.enabled?S.sendStreamStatus(0,S.mic_status,!0):1==r.enabled&&S.sendStreamStatus(S.camera_status,0,!0),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" add track completely")):("video"==r.kind?S.sendStreamStatus(2,S.mic_status,!0):S.sendStreamStatus(S.camera_status,2,!0),t.removeTrack(r),b[E]=null,y&&y.setTrack("video"==r.kind,null),this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" remove track completely")),f.mediaStreamConfig.video="ADD"==e,n(p)),[2]}))}))})),[3,15];case 14:h?(t.addTrack(r),b[E]=r,y&&y.setTrack("video"==r.kind,r)):(t.removeTrack(r),b[E]=null,y&&y.setTrack("video"==r.kind,null)),n(p),f.mediaStreamConfig.video=!!h,A.label=15;case 15:return[2]}}))}))},e.prototype.switchDevice=function(e,t,r,o){var i=this,s=this.streamCenter.checkPreview(t);if(!s)return this.logger.error("zsc.sd.0 preview no found"),void(o&&o({errorCode:l.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:l.errorCodeList.PUBLISH_NO_PREVIEW.message}));if("video"===e&&0==s.mediaStreamConfig.video)return this.logger.error("zsc.sd.0 camera can not be changed when video is false"),void(o&&o({errorCode:l.errorCodeList.VIDEO_DEVICE_FALSE.code,extendedData:l.errorCodeList.VIDEO_DEVICE_FALSE.message}));if("audio"===e&&0==s.mediaStreamConfig.audio)return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"),void(o&&o({errorCode:l.errorCodeList.AUDIO_DEVICE_FALSE.code,extendedData:l.errorCodeList.AUDIO_DEVICE_FALSE.message}));s.mediaStreamConfig.videoInput!==r&&delete s.mediaStreamConfig.facingMode;var a,c={};"video"===e?(c.videoInput=r,a=s.videoTrack):(c.audioInput=r,a=s.audioTrack);var u=this.stateCenter.browser;this.logger.info("zsc.sd.0 browser "+u),"firefox"===u&&(null==a||a.stop());var d=n(n({},s.mediaStreamConfig),c),h=s.getMediaStreamConstraints(d),p=function(r,n){n.getTracks().forEach((function(r){if(r.kind===e){var n="video"===e,o=n?"videoTrack":"audioTrack",a=s[o];r.enabled=a.enabled,n&&s.lowStream&&s.lowStream.getTracks().forEach((function(e){return e.stop()}));var l=i.streamCenter.getPublishList(t);l.length>0&&(!s.muteImage||r.enabled||!n)?l.map((function(e){return e.publisher})).forEach((function(e){e.replacePublishedTrack(r)})):s&&s.muteImage&&!r.enabled&&n?s[o]=r:s&&s.replacePreviewTrack(r),a&&a.stop()}})),s.restartSoundLevel()};"audio"==e?h.video=!1:h.audio=!1,navigator.mediaDevices.getUserMedia(h).then((function(t){Object.assign(s.mediaStreamConfig,c),p(0,t),i.logger.info("zsc.sd.0 switch "+e+" device success"),o&&o({errorCode:0,extendedData:""})}),(function(t){var r,n;"video"==e?null===(r=s.videoTrack)||void 0===r||r.stop():null===(n=s.audioTrack)||void 0===n||n.stop(),i.logger.warn("zsc.sd.0 switch "+e+" device failed, stop last device and retry. ",t+""),navigator.mediaDevices.getUserMedia(h).then((function(t){Object.assign(s.mediaStreamConfig,c),p(0,t),i.logger.info("zsc.sd.0 swtich "+e+" device success"),o&&o({errorCode:0,extendedData:""})}),(function(t){i.logger.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. ",t+"");var r=s.getMediaStreamConstraints(s.mediaStreamConfig),n=l.errorCodeList.VIDEO_DEVICE_FALSE;"audio"===e&&(n=l.errorCodeList.AUDIO_DEVICE_FALSE),navigator.mediaDevices.getUserMedia(r).then((function(r){p(0,r),i.logger.info("zsc.sd.0 recover last "+e+" device success"),o&&o({errorCode:n.code,extendedData:n.message+" "+JSON.stringify(t)})}),(function(t){i.logger.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. ",t+""),o&&o({errorCode:n.code,extendedData:n.message+" "+JSON.stringify(t)})}))}))}))},e.prototype._replaceTrack=function(e,t,r,n){void 0===n&&(n=!1);var o=this.streamCenter.checkPreview(e),i=this.streamCenter.getPublishList(e);if(!o)return this.logger.error("zc.rt.0 preview no found"),{errorCode:l.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:l.errorCodeList.PUBLISH_NO_PREVIEW.message};if(o.streamFromCanvas&&"video"===t.kind)return this.logger.error("zc.rt.0 browser not support"),{errorCode:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:l.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message};var s=e.getTracks().find((function(e){return e.kind===t.kind}));if(!n&&(!s||"audio"===t.kind&&o.hasEmptyAudioTrack))return this.logger.error("zc.rt.0 track no found"),{errorCode:l.errorCodeList.TRACK_NOT_FOUND.code,extendedData:l.errorCodeList.TRACK_NOT_FOUND.message};var a=this.streamCenter.soundLevelDelegate&&"audio"===t.kind;if(i.length){var c=null;return a&&o.stopSoundLevel(),i.forEach((function(e){var n;c=null===(n=e.publisher)||void 0===n?void 0:n.replacePublishedTrack(t,!1,{isTrackProcessedFromOriginalStream:r})})),a&&o.startSoundLevel(),c}return a&&o.stopSoundLevel(),o.replacePreviewTrack(t,!1,{isTrackProcessedFromOriginalStream:r}),a&&o.startSoundLevel(),{errorCode:0,extendedData:""}},e.prototype.enableMicrophone=function(e,t){var r=this.streamCenter.checkPreview(e);return r?r.enableMicrophone(t,this.streamCenter):(this.logger.error("zsc.em.0 no preview"),!1)},e.prototype.enableCamera=function(e,t,r){var n=this.streamCenter.checkPreview(e);return n?n.enableCamera(t,this.streamCenter,r):(this.logger.error("zsc.ec.0 no preview"),!1)},e.prototype.setDummyCaptureImagePath=function(e,t){var r=this;return new Promise((function(n,o){var i=r.streamCenter.checkPreview(t);if(!i)return r.logger.error("zc.sdcp.0 preview no found"),void n(!1);if("string"!=typeof e)return r.logger.error("zc.sdcp.0 filePath type error"),void n(!1);var s=new Image;s.src=e,s.crossOrigin="anonymous",s.onload=function(){i.loadImgTimer&&clearTimeout(i.loadImgTimer),i.loadImgTimer=void 0,r.logger.info("zc.sdcp.0 load file path success"),i.muteImage=s,n(!0)},i.loadImgTimer=setTimeout((function(){r.logger.error("zc.sdcp.0 load img timeout"),n(!1)}),5e3)}))},e.prototype.enableAutoSwitchDevice=function(e){this.stateCenter.autoSwitchDeviceSetting=n({},e)},e.prototype.getSpan=function(e,t){var r=this.streamCenter.checkPublish(e);return this.stateCenter.reporter.createSpan(s.H,r?{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r.streamID}:{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},t)},e.prototype.enVideoSpan=function(e,t,r){var n=this.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e},{key:""},t);n.setAttributes(r),n.end()},e}();t.AdvancedModule=d},4378:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.signal=t.publisher=t.publishModule=t.playModule=t.preview=t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.TRACER_LEVEL=t.PROTO_VERSION=void 0;var s,a=r(2367),l=r(5098),c=r(8706),u=r(7248);function d(e,t){return e&&"live"===e.readyState?!0===e.enabled?0:"video"===e.kind&&"firefox"===t?2:20:2}t.PROTO_VERSION="2.22.0",function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(s=t.TRACER_LEVEL||(t.TRACER_LEVEL={})),t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={mutePublishStreamVideo:function(e,t,r){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" call");var n=this.rtcModules.advancedModule.getSpan(e,c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.event);if("boolean"!=typeof t||void 0!==r&&"boolean"!=typeof r)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" option error"),!1;var o=this.rtcModules.advancedModule.enableStream(e,{video:!t,retain:r});return n.setAttributes({mute_type:c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.mute_type(t?1:0),retain:c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.retain(r)}),n.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" end"),o},mutePublishStreamAudio:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" call");var r=this.rtcModules.advancedModule.getSpan(e,c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.event);if("boolean"!=typeof t)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" option error"),!1;var n=this.rtcModules.advancedModule.enableStream(e,{audio:!t});return r.setAttributes({mute_type:c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.mute_type(t?1:0)}),r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" end"),n},mutePlayStreamVideo:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" call "+e+" "+t);var r=this.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.event);r.setAttributes({mute_type:c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.mute_type(t?1:0)});var n=this.rtcModules.playModule.mutePlayStream(e,"video",t);return r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" end"),n},mutePlayStreamAudio:function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+" call "+e+" "+t);var r=this.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.event);r.setAttributes({mute_type:c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.mute_type(t?1:0)});var n=this.rtcModules.playModule.mutePlayStream(e,"audio",t);return r.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+"end"),n},muteMicrophone:function(e){this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" call");var t=this.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoEnableMic.event);if("boolean"!=typeof e)return this.logger.error(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" option error"),this.stateCenter.reporter.setError(t,l.errorCodeList.INPUT_PARAM),!1;var r=this.rtcModules.advancedModule.enableMicrophoneOnly(!e),n=Object.keys(this.streamCenter.publisherList).map((function(e){return{stream_id:e}}));return t.setAttributes({enable:c.ZegoRTCLogEvent.kZegoEnableMic.enable(!e),stream_list:c.ZegoRTCLogEvent.kZegoEnableMic.stream_list(n)}),t.end(),this.logger.info(a.ZEGO_WEBRTC_ACTION.MUTE_MIC+" end"),r},activateSEIInsert:function(e){var t=e.stream,r=e.action,n=e.infoType,o=this.rtcModules.advancedModule.getSpan(e.stream,c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.event);o.setAttributes({action:c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.action(e.action),info_type:c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.info_type(e.infoType)});var i=this.rtcModules.publishModule.activateSEIInsert(t,r,n);return o.end(),i},getAudioInfo:function(e,t,r){if(!e)return this.logger.error("localStream is empty!"),!1;var o=n({},r);return new u.MediaUtil(this.ac,o).connectToSource(e,(function(e){t(e)}))},startRecord:function(e){var t=this,r=this.streamCenter.checkPreview(e);if(r){var n=e.clone(),o=n.getAudioTracks();o.length>0&&r.hasEmptyAudioTrack&&o.forEach((function(e){n.removeTrack(e)})),this.recordedBlobs=[];var i={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:"video/webm"},MediaRecorder.isTypeSupported(i.mimeType)||(i={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(n,i)}catch(e){return void this.logger.error("Exception while creating ZegoMediaRecorder:",e)}this.mediaRecorder.onstop=function(e){t.logger.warn("Recorder stopped: "+e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)}else this.logger.error("stream is not from zego!")},stopRecord:function(){this.mediaRecorder?this.mediaRecorder.stop():this.logger.warn("please invoke startRecord first")},resumeRecord:function(){this.mediaRecorder?this.mediaRecorder.resume():this.logger.warn("please invoke startRecord first")},pauseRecord:function(){this.mediaRecorder?this.mediaRecorder.pause():this.logger.warn("please invoke startRecord first")},saveRecord:function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r,n.download=e+".webm",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(r)}),100)}else this.logger.warn("please invoke startRecord first")},handleDataAvailable:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)},addTrack:function(e,t){var r=this;return new Promise((function(n,o){r.logger.info(a.ZEGO_WEBRTC_ACTION.ADD_TRACK+" call"),r.rtcModules.advancedModule.handleTrack("ADD",e,t,n,o)}))},removeTrack:function(e,t){var r=this;return new Promise((function(n,o){r.logger.info(a.ZEGO_WEBRTC_ACTION.REMOVE_TRACK+" call"),r.rtcModules.advancedModule.handleTrack("REMOVE",e,t,n,o)}))},enableCameraCapturing:function(e,t){return void 0===t&&(t=!0),o(this,void 0,void 0,(function(){var r,n,o,a;return i(this,(function(i){return r=this.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoEnableCamera.event),(n=this.streamCenter.checkPreview(e))?(o=this.streamCenter.getPublishList(e),a=o.map((function(e){return{stream_id:e.streamID}})),r.setAttributes({enable:c.ZegoRTCLogEvent.kZegoEnableCamera.enable(t),stream_list:c.ZegoRTCLogEvent.kZegoEnableCamera.stream_list(a)}),r.end(),[2,n.enableCameraCapturing(t)]):(this.logger.error("zsc.ecc no preview"),this.stateCenter.reporter.setError(r,l.errorCodeList.PUBLISH_NO_PREVIEW),[2,!1])}))}))}},t.streamHandler={},t.preview={enableCamera:function(e,t,r){var n,o,i,s=this;if(!this.localStream||0==this.localStream.getVideoTracks().length)return this.logger.error("zp.ec.2 video track no found"),!1;var a,l=this.videoTrack;if(!e&&this.muteImage){var c=document.createElement("canvas");c.width=this.muteImage.width,c.height=this.muteImage.height;var u=c.getContext("2d");this.muteImageAnID=setInterval((function(){u.drawImage(s.muteImage,0,0)}),100),a=c.captureStream().getVideoTracks()[0],this.localStream.removeTrack(this.localStream.getVideoTracks()[0]),this.localStream.addTrack(a),this.rtcViewer&&this.rtcViewer.setVideo(a)}else e&&this.muteImage&&((null===(n=null==this?void 0:this.videoEffect)||void 0===n?void 0:n.enabled)?this.replacePreviewTrack(this.videoEffect.output,!0):this.replacePreviewTrack(this.videoTrack));var h=this.stateCenter.browser;if(r&&!e||!l){if(r&&!e)if(null===(o=this.videoEffect)||void 0===o?void 0:o.enabled)this.logger.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on");else{var p=this.cloneVideoTrack;this.cloneVideoTrack=this.videoTrack.clone(),this.cloneVideoTrack.enabled=!0,this.replacePreviewTrack(this.cloneVideoTrack,!1,{retainTrack:!0}),p&&p.stop()}}else if(l.enabled=e,"chrome"===h&&e&&void 0!==typeof l.getSettings().width&&l.getSettings().width>0&&navigator.userAgent){var f=0,g=(navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1];if(g&&(f=parseInt(g.split(",")[0])),f&&f>=87&&f<92){var m=l.getSettings().width-1,v=l.getSettings().height-1,_=l.getSettings().frameRate;l.applyConstraints({width:m,height:v,frameRate:_}).then((function(){l.applyConstraints({width:s.videoInfo.width,height:s.videoInfo.height,frameRate:_})}))}}l&&(l.enabled=e),null===(i=this.lowStream)||void 0===i||i.getVideoTracks().forEach((function(t){t.enabled=e}));var y=t.checkPreview(this.localStream),b=t.getPublishList(this.localStream).map((function(e){return e.publisher}));return b.length&&b.forEach((function(t){var r,n=null===(r=t.peerConnection)||void 0===r?void 0:r.getSenders().filter((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));n&&n.forEach((function(t){var r;!e&&s.muteImage&&a?null==t||t.replaceTrack(a):e&&((null===(r=null==s?void 0:s.videoEffect)||void 0===r?void 0:r.enabled)&&s.videoEffect.output?t.track!==s.videoEffect.output&&(null==t||t.replaceTrack(s.videoEffect.output)):t.track===s.videoTrack||(null==y?void 0:y.streamFromCanvas)||null==t||t.replaceTrack(s.videoTrack),s.muteImageAnID&&clearInterval(s.muteImageAnID))}));var o=s.muteImage&&!e?0:d(s.videoTrack,h);t.sendStreamStatus(o,t.mic_status)})),this.isVideoEnabled=e,this.logger.info("zp.ec.2 call success"),!0},enableMicrophone:function(e,t){if(!this.localStream)return this.logger.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach((function(t){t.enabled=e})),this.audioTrack&&(this.audioTrack.enabled=e&&t.isMicEnabled);var r=t.getPublishList(this.localStream).map((function(e){return e.publisher}));return r.length&&r.forEach((function(r){r.signal&&r.sendStreamStatus(r.camera_status,e&&t.isMicEnabled?0:2)})),this.isAudioEnabled=e,this.logger.debug("zp.em.2 call success"),!0},replacePreviewTrack:function(e,t,r){var n;return void 0===t&&(t=!1),void 0===r&&(r={}),o(this,void 0,void 0,(function(){var o,s,a,l,c;return i(this,(function(i){switch(i.label){case 0:return this.logger.info("zsc.rpt.0 call"),e&&e.kind&&this.localStream?(o=!0===(null==r?void 0:r.retainTrack),s="audio"===e.kind?"audioTrack":"videoTrack",t||!(null===(n=this.videoEffect)||void 0===n?void 0:n.enabled)||"video"!==e.kind?[3,3]:o?[3,2]:[4,this.videoEffect.setInput(e)]):[2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:"audio"===e.kind&&this.audioNodeQueue&&!r.isTrackProcessedFromOriginalStream?((a=new MediaStream).addTrack(e),l=this.ac.createMediaStreamSource(a),this.audioNodeQueue.replaceSource(l)):"audio"!==e.kind||this.audioNodeQueue||!this.destNode||r.isTrackProcessedFromOriginalStream?(this.logger.info("zsc.rpt.0 replace local track"),(c=this.localStream.getTracks().find((function(t){return t.kind===e.kind})))!==e&&(c&&this.localStream.removeTrack(c),this.localStream.addTrack(e)),this.localStream.addTrack(e),this.rtcViewer&&(this.rtcViewer.setTrack("video"===e.kind,e),"safari"===this.stateCenter.browser&&this.rtcViewer.resume(!0)),!o&&"video"===e.kind&&this.enableDualStream&&this.createLowStream()):(this.createSrcNode(e,!0).connect(this.destNode),this.logger.info("zsc.rpt.0 replace audio track with audio mix.")),i.label=4;case 4:return t||o||(this[s]=e,"REMOVE"===r.handleTrack&&"video"===e.kind&&(this.localStream.removeTrack(e),this.rtcViewer&&this.rtcViewer.setTrack(!0,null),this[s]=null)),this.logger.info("zsc.rpt.0 end"),[2]}}))}))},enableCameraCapturing:function(e){return o(this,void 0,void 0,(function(){var t,r,o,s,a,l,c,u,h,p;return i(this,(function(i){switch(i.label){case 0:return this.localStream&&this.videoTrack&&"camera"===this.previewType?(t=this.streamCenter.getPublishList(this.localStream).map((function(e){return e.publisher})),e?"live"!==this.videoTrack.readyState?[3,1]:(this.logger.warn("zp.ecc camera is already capturing"),[3,12]):[3,13]):(this.logger.error("zp.ecc not camera stream"),[2,!1]);case 1:r=this.getMediaStreamConstraints(n(n({},this.mediaStreamConfig),{audio:!1})),i.label=2;case 2:return i.trys.push([2,11,,12]),[4,navigator.mediaDevices.getUserMedia(r)];case 3:return o=i.sent(),(s=o.getVideoTracks()[0]).enabled=this.isVideoEnabled,!1===s.enabled&&this.logger.warn("zp.ecc video is not enabled"),!this.muteImage||this.isVideoEnabled?[3,4]:(this.videoTrack=s,s.enabled=!this.isVideoEnabled,[3,10]);case 4:if(!t.length)return[3,9];a=0,i.label=5;case 5:return a<t.length?[4,t[a].replacePublishedTrack(s)]:[3,8];case 6:if(0!==(null==(l=i.sent())?void 0:l.errorCode))throw l;i.label=7;case 7:return a++,[3,5];case 8:return[3,10];case 9:this.replacePreviewTrack(s),i.label=10;case 10:return[3,12];case 11:return c=i.sent(),this.logger.error("zsc.ecc resume camera capturing failed. "+JSON.stringify(c)),[2,!1];case 12:return[3,18];case 13:return u=this.videoTrack.enabled,h=this.stateCenter.browser,this.stateCenter.engineConfig.previewClearLastFrame?"safari"===h?[3,15]:(this.videoTrack.enabled=!1,[4,new Promise((function(e){setTimeout((function(){e(void 0)}),200)}))]):[3,16];case 14:i.sent(),i.label=15;case 15:return this.videoTrack.stop(),this.stopCanvasStreamTrack(),this.videoTrack.enabled=u,[3,17];case 16:this.videoTrack.stop(),this.stopCanvasStreamTrack(),i.label=17;case 17:t.length&&(p=this.muteImage&&!this.isVideoEnabled?0:d(this.videoTrack,h),t.forEach((function(e){e.sendStreamStatus(p,e.mic_status)}))),i.label=18;case 18:return[2,!0]}}))}))}},t.playModule={mutePlayStream:function(e,t,r){var n=this;return this.logger.info("zsc.mps.0 call "+t+" "+r),new Promise((function(o,i){if("string"!=typeof e||""==e)return n.logger.error("zsc.mps.0 streamID must be string and not empty"),void i(!1);if("boolean"!=typeof r)return n.logger.error("zsc.mps.0 mute must be boolean"),void i(!1);var a=n.streamCenter.playerList[e];if(!a)return n.logger.error("zsc.mps.0 player not found"),void i(!1);if("video"===t){if(a.playOption&&!1===a.playOption.video||a.player&&0!==a.player.cameraStatus)return n.logger.error("zsc.mps.0 stream no contain video"),void i(!1);a.player.signal.ActivatePlayVideoStream(n.stateCenter.getSeq(),a.player.sessionId,r,(function(){var t,i,l,u;n.logger.info("zsc.mps.0 suc"),a.player.playMediaStatus.video=!r;var d=c.ZegoRTCLogEvent.kZegoPlayContentChanged,h=n.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},d.event);h.setAttributes({webrtc_sid:d.webrtc_sid(a.player.sessionId),video_activate:d.video_activate(!!a.player.playMediaStatus.video),audio_activate:d.audio_activate(!!a.player.playMediaStatus.audio),video_layer:d.video_layer(2===(null===(i=null===(t=a.player)||void 0===t?void 0:t.playOption)||void 0===i?void 0:i.streamType)?-1:null===(u=null===(l=a.player)||void 0===l?void 0:l.playOption)||void 0===u?void 0:u.streamType)}),h.end(),o(!0)}),(function(){n.logger.error("zsc.mps.0 fail"),i(!1)}))}else if("audio"===t){if(a.playOption&&!1===a.playOption.audio||a.player&&0!==a.player.micStatus)return n.logger.error("zsc.mps.0 stream no contain audio"),void i(!1);a.player.signal.ActivatePlayAudioStream(n.stateCenter.getSeq(),a.player.sessionId,r,(function(){n.logger.info("zsc.mps.0 suc"),a.player.playMediaStatus.audio=!r;var t=c.ZegoRTCLogEvent.kZegoPlayContentChanged,i=n.stateCenter.reporter.createSpan(s.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},t.event);i.setAttributes({webrtc_sid:t.webrtc_sid(a.player.sessionId),video_activate:t.video_activate(!!a.player.playMediaStatus.video),audio_activate:t.audio_activate(!!a.player.playMediaStatus.audio)}),i.end(),o(!0)}),(function(){n.logger.error("zsc.mps.0 fail"),i(!1)}))}else i(!1)}))},setStreamAudioOutput:function(e,t){var r=this;return!(null==t||0==t.length||!e||(this.logger.debug("zsc.ssao.0 device "+t),e?"undefined"!==e.sinkId?(e.setSinkId(t).then((function(){r.logger.info("zsc.ssao.0 success device: "+t)})).catch((function(e){r.logger.info("zsc.ssao.0 "+e.name)})),0):(this.logger.error("zsc.ssao.0 browser does not suppport"),1):(this.logger.error("zsc.ssao.0 no localVideo"),1)))}},t.publishModule={activateSEIInsert:function(e,t,r){void 0===r&&(r=0);var n=this.streamCenter.checkPreview(e);return n?0!==t&&1!==t?(this.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" value of action should be 0 or 1"),!1):(n.activatesSEIConfig={action:t,infoType:r},this.streamCenter.getPublishList(e).map((function(e){return e.publisher})).forEach((function(e){e.activateSEIInsert(t,r)})),!0):(this.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" stream is not created"),!1)}},t.publisher={activateSEIInsert:function(e,t){var r=this;return new Promise((function(n,o){return r.signal?(r.signal&&r.signal.activateSEIInsert(r.stateCenter.getSeq(),r.sessionId,r.peerID,e,t,(function(e,t,o){var i=!1;0===o.result?(r.logger.info(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" called success"),i=!0):1===o.result?(r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" "+o.peer_id+" invalid param."),i=!1):2===o.result&&(r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" peer not exist"),i=!1),n(i)}),(function(e){1===e&&r.logger.error(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" request timeout")})),!1):n(!1)}))},replacePublishedTrack:function(e,t,r){var n;return void 0===t&&(t=!1),o(this,void 0,void 0,(function(){var o,s,a,c,u,h,p,f;return i(this,(function(i){switch(i.label){case 0:return s=null==(o=this.previewer)?void 0:o.videoEffect,c=o["".concat(a=e.kind,"Track")],u=null===(n=this.peerConnection)||void 0===n?void 0:n.getSenders().filter((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===a})),h=this.stateCenter.browser,c||r.handleTrack?(p=0,f=0,"video"===a?(p=d(t?c:e,h),f=this.mic_status):"audio"===a&&(f=d(e,h),p=this.camera_status),[4,o.replacePreviewTrack(e,t,r)]):[3,2];case 1:return i.sent(),u?(u.forEach((function(r,n){var i="audio"===a&&o.destNode;if("audio"===a||t||!(null==s?void 0:s.enabled))if("video"==a&&o.lowStream&&u.length>1&&0==n)r.replaceTrack(o.lowStream.getVideoTracks()[0]);else if("video"==a&&o.streamFromCanvas){if(!o.streamFromCanvasTrack){var l=o.getStreamThroughCanvas(o.localStream);o.streamFromCanvasTrack=l.getVideoTracks()[0]}r.replaceTrack(o.streamFromCanvas?o.streamFromCanvasTrack:e)}else i||r.replaceTrack(e)})),this.sendStreamStatus(p,f)):this.logger.info("zc.rt.1 replace remote track will work after stream published"),this.logger.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.logger.error("zc.rt.1 publisher track no found"),[2,{errorCode:l.errorCodeList.TRACK_NOT_FOUND.code,extendedData:l.errorCodeList.TRACK_NOT_FOUND.message}]}}))}))}},t.signal={activateSEIInsert:function(e,t,r,n,o,i,s){this.logger.info(a.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" call "+t),this.sendMessageWithCallback("ActivateSEIInsertReq",e,t,{peer_id:r,action:n,info_type:o},i,s)}}},5098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support handle track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},3824:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4495),o=r(4378);t.default={type:"Advance",install:function(e,t,r,i,s,a,l,c){for(var u in Object.defineProperty(t.prototype,"initAdvance",{value:function(){this.advancedModule=new n.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),o.zegoWebRTC)Object.defineProperty(e.prototype,u,{value:o.zegoWebRTC[u],writable:!1});for(var u in o.streamHandler)Object.defineProperty(r.prototype,u,{value:o.streamHandler[u],writable:!1});for(var u in o.preview)Object.defineProperty(i.prototype,u,{value:o.preview[u],writable:!1});for(var u in o.playModule)Object.defineProperty(s.prototype,u,{value:o.playModule[u],writable:!1});for(var u in o.publishModule)Object.defineProperty(a.prototype,u,{value:o.publishModule[u],writable:!1});for(var u in o.publisher)Object.defineProperty(l.prototype,u,{value:o.publisher[u],writable:!1});for(var u in o.signal)Object.defineProperty(c.prototype,u,{value:o.signal[u],writable:!1})}}},8706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=r(5098),o=function(e){return e},i=function(e){return e},s=function(e){return e},a=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZegoDevice:{event:"device"},kZegoTaskRoomContext:{event:"room_context"},kZMInitSetting:{event:"stream"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPlayStart:{event:"/sdk/start_play"},kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:n.errorCodeList.INPUT_PARAM,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},video_params:o,video_conf:o},kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:n.errorCodeList.INPUT_PARAM,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},audio_params:o,audio_conf:o},kZegoVideoEnSize:{event:"/sdk/api/publish_video_en_size",w:s,h:s},kZegoVideoEnBps:{event:"/sdk/api/publish_video_en_bps",bitrate:s},kZegoVideoEnFps:{event:"/sdk/api/publish_video_en_fps",fps:s},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:n.errorCodeList.INPUT_PARAM},track_kind:i},kZegoTaskUseVideoDevice:{event:"/device/api/video_c",error:{kParamError:n.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:n.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},device:i,device_name:i},kZegoTaskUseAudioDevice:{event:"/device/api/audio_c",error:{kParamError:n.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:n.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},device:i,device_name:i},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",webrtc_sid:s,video_activate:a,audio_activate:a,video_layer:s},kZegoTaskMutePublishVideo:{event:"/sdk/mute_publish_video",mute_type:s,retain:a},kZegoTaskMutePublishAudio:{event:"/sdk/mute_publish_audio",mute_type:s},kZegoEnableMic:{event:"/device/enable_mic",enable:a,stream_list:o},kZegoEnableCamera:{event:"/device/enable_camera",enable:a,stream_list:o},kZegoTaskMutePlayVideo:{event:"/sdk/mute_play_video",mute_type:s},kZegoTaskMutePlayAudio:{event:"/sdk/mute_play_audio",mute_type:s},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:n.errorCodeList.INPUT_PARAM,kExtraInfoNullError:n.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:n.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:n.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:i,msg_length:i,room_id:i,room_sid_string:i,use_na:s},kZegoTaskActivateSEIInsert:{event:"/active/sei",action:s,info_type:s}}},7248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUtil=void 0;var r=function(){function e(e,t){var r=t.type,n=t.channels,o=void 0===n?1:n,i=t.bufferSize,s=void 0===i?0:i,a=t.sampleBit,l=void 0===a?16:a,c=t.sampleRate,u=void 0===c?44100:c,d=this;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=r,this.channels=o,this.bufferSize=s,this.sampleBit=l,this.sampleRate=u,this.script=e.createScriptProcessor(s,o,o),(new Date).getTime(),this.script.addEventListener("audioprocess",(function(e){var t,n=e.inputBuffer.getChannelData(0),o=0,i=0;for(t=0;t<n.length;++t)o+=n[t]*n[t],Math.abs(n[t])>.99&&(i+=1);if(d.instant=Math.sqrt(o/n.length),d.slow=.95*d.slow+.05*d.instant,d.clip=i/n.length,"pcm"===r||"wav"===r){for(var s=[],a=0;a<d.channels;a++)s.push(e.inputBuffer.getChannelData(a));d.recorderBuffer(s)}})),"pcm"!==r&&"wav"!==r||this.initRecorderBuffer(r)}return e.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}return this},e.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},e.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker((function(){var e,t,r,n,o,i,s=[];function a(e,t,r){for(var n=0;n<r.length;n++,t+=2){var o=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,o<0?32768*o:32767*o,!0)}}function l(e,t,r){for(var n=0;n<r.length;n++,t++){var o=Math.max(-1,Math.min(1,r[n])),i=o<0?128*o:127*o;e.setInt8(t,i+=128)}}function c(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}function u(e,t){for(var r=new Float32Array(t.length/e),n=0,o=0;n<r.length;)r[n]=t[o],o+=e,n++;return r}function d(e,t,r){for(var n=new Float32Array(t*e.length),o=0,i=0;i<r[0].length;i++)n.set(r[0][i],o),o+=r[0][i].length;return n}function h(e,t){for(var r=new Float32Array(e.length+t.length),n=0;n<e.length+t.length;n+=2)r[n]=e[n/2>>0],r[n+1]=t[n/2>>0];return r}function p(t){var r,n;if(1==e)r=d(s[0],o,s),1!=t&&(n=u(t,r));else if(2==e){var i=d(s[0],o,s),a=d(s[1],o,s);1!=t?n=h(u(t,i),u(t,a)):r=h(i,a)}return 1!=t?n:r}function f(e){var r=function(e,r){var n;8==r?n=e.length:16==r&&(n=e.length,n*=2);var o=new ArrayBuffer(n),i=new DataView(o);return 8==r?l(i,0,e):16==t&&a(i,0,e),i}(p(e),t);self.postMessage({command:"exportPcmLive",val:r})}function g(n){var o=function(n,o){var i;8==o?i=n.length:16==t&&(i=n.length,i*=2);var s=new ArrayBuffer(i+44),u=new DataView(s),d=r,h=t,p=e;return c(u,0,"RIFF"),u.setUint32(4,36+i,!0),c(u,8,"WAVE"),c(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,p,!0),u.setUint32(24,d,!0),u.setUint32(28,d*p*(h/8),!0),u.setUint16(32,p*(h/8),!0),u.setUint16(34,h,!0),c(u,36,"data"),u.setUint32(40,i,!0),8==t?l(u,44,n):16==t&&a(u,44,n),u}(p(n),t);self.postMessage({command:"exportWav",val:o})}this.onmessage=function(a){switch(a.data.command){case"init":e=(l=a.data.val).sampleChannel,t=l.sampleBit,r=l.sampleRate,n=l.oldSampleRate,o=l.bufferSize,i=l.type;break;case"record":!function(t){for(var o=0;o<e;o++)s[o]||(s[o]=[]),s[o].push(t[o]);var a=Math.round(n/r);"pcm"===i?f(a):"wav"===i&&g(a),s=[]}(a.data.val)}var l}})),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(e){switch(e.data.command){case"exportPcmLive":t.onReceiveBuffer(e.data.val);break;case"exportWav":t.onReceiveWav(e.data.val)}}},e.prototype.onReceiveBuffer=function(e){},e.prototype.onReceiveWav=function(e){},e.prototype.writeString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},e.prototype.writeBuffer=function(e,t,r){for(var n=0;n<r.byteLength;n++)e.setUint8(t+n,r[n])},e.prototype.concatenation=function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r].buffer.byteLength;var n=new Uint8Array(t),o=0;for(r=0;r<e.length;++r)n.set(new Uint8Array(e[r].buffer),o),o+=e[r].buffer.byteLength;return n},e.prototype.encodeWave=function(e){var t=this.concatenation(e),r=t.byteLength,n=new ArrayBuffer(r+44),o=new DataView(n),i=this.sampleRate,s=this.sampleBit,a=this.channels;return this.writeString(o,0,"RIFF"),o.setUint32(4,36+r,!0),this.writeString(o,8,"WAVE"),this.writeString(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,a,!0),o.setUint32(24,i,!0),o.setUint32(28,i*a*(s/8),!0),o.setUint16(32,a*(s/8),!0),o.setUint16(34,s,!0),this.writeString(o,36,"data"),o.setUint32(40,r,!0),this.writeBuffer(o,44,t),o},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],r=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(r)}return null},e}();t.MediaUtil=r},2523:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.PRELOAD_EFFECT="zc.pe.0",e.PLAY_EFFECT="zc.pe.1",e.PAUSE_EFFECT="zc.pe.2",e.RESUME_EFFECT="zc.re",e.STOP_EFFECT="zc.se",e.UNLOAD_EFFECT="zc.ue",e.AUDIO_EFFECT_PROCESS="zc.aep",e.SET_EFFECT_VOLUME="zc.sev",e.START_MIXING_AUDIO="zc.sma.0",e.STOP_MIXING_AUDIO="zc.sma.1",e.MIXING_BUFFER="zc.mb",e.STOP_MIXING_BUFFER="zc.smb",e.PUBLISHER_PLAY_EFFECT="zc.p.0.pe.0",e.PUBLISHER_PAUSE_EFFECT="zc.p.0.pe.1",e.PUBLISHER_RESUME_EFFECT="zc.p.0.re",e.PUBLISHER_STOP_EFFECT="zc.p.0.se",e.PUBLISHER_START_MIXING_AUDIO="zc.p.0.sma.0",e.PUBLISHER_STOP_MIXING_AUDIO="zc.p.0.sma.1",e.SET_MIXING_AUDIO_VOLUME="zc.smav",e.PUBLISHER_MIXING_BUFFER="zc.p.0.mb",e.PUBLISHER_SET_MIXING_AUDIO_VOLUME="zc.p.0.smav"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},3013:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBufferProcessor=void 0;var n=r(4853),o=function(){function e(e,t,r,n,o){this.logger=e,this.ac=t,this.localStream=r,this.destination=n,this.rtcViewer=o,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return e.prototype.playEffect=function(e,t,r,n,o){var i=this;!0!==this.isMixAudio?this.audioBuffer?(this.startOffset=e||0,this.loop=t||!1,this.replace=r||!1,this.effectEndedCallBack=o,this.mixEffect(this.audioBuffer,(function(){i.buffSource.loop=!!t,e?i.buffSource.start(0,e/1e3):i.buffSource.start(0),i.startTimes=Date.now(),i.effectEndedListener=i.effectEndedHandler.bind(i),i.buffSource.addEventListener("ended",i.effectEndedListener),n&&n()}))):this.logger.error("amu.pe.1 no audio buffer found"):this.logger.warn("amu.pe.1 audio is mixing")},e.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},e.prototype.playRealTimeEffect=function(e){var t=this;this.mixEffect(e,(function(){t.buffSource&&t.buffSource.start(0),t.buffSource&&t.buffSource.addEventListener("ended",(function(){t.audioBufferList.shift(),t.audioBufferList.length>0&&t.isMixAudio&&t.playRealTimeEffect(t.audioBufferList[0])}))}))},e.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},e.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.logger.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},e.prototype.mixEffect=function(e,t){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=e,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&t()):this.logger.error("amu.me.0 localStream can not be found")},e.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e),this.isMixAudio=!0,!0},e.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},e.prototype.stopMixingAudio=function(e){return void 0===e&&(e=!1),this.paused?(this.logger.info("amu.sma.1 audioEffect is paused"),!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(this.destination),this.gainNode.disconnect(this.ac.destination),this.isMixAudio=!1,this.audioBufferList=[],!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.getProcess=function(){var e=Date.now();return this.paused&&(e=this.pauseTimes),(e-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},e.prototype.seekTo=function(e){void 0===e&&(e=0),this.startOffset=e,this.paused?this.resumeOffset=e:(this.stopMixingAudio(!0),this.playEffect(e,this.loop,this.replace,void 0,this.effectEndedCallBack))},e.prototype.mixingBuffer=function(e,t){var r=this;!0!==this.isMixAudio||0!=this.audioBufferList.length||0!=this.isMixingBuffer?(this.ac.resume(),this.ac.decodeAudioData(e,(function(e){r.audioBufferList.push(e),1==r.audioBufferList.length&&r.playRealTimeEffect(r.audioBufferList[0]),r.isMixingBuffer=!0,t&&t()}),(function(e){r.logger.error("amu.mb.0 "+e),t&&t({code:n.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code,message:n.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message+" "+e})}))):this.logger.error("amu.mb.0 audio is mixing")},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e}();t.AudioBufferProcessor=o},4194:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMix=void 0;var r=function(){function e(e,t,r,n,o,i,s){this.logger=e,this.ac=t,this.localStream=r,this.mediaEleSources=n,this.browser=o,this.destination=i,this.rtcViewer=s,this.replace=!1,this.isMixAudio=!1,this.audioCurrentTimer=null,this.audioResumedTimer=null}return e.prototype.startMixingAudio=function(e,t){if(this.replace=t||!1,this.isMixAudio)return this.logger.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.logger.error("amu.sma.0 localStream can not be found"),!1;if(e.captureStream=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream,this.ac.resume(),this.gainNode=this.ac.createGain(),"safari"===this.browser){var r=this.mediaEleSources.find((function(t){return t.audio===e}));if(r)this.audioNode=r.node;else{var n=this.ac.createMediaElementSource(e);this.audioNode=n,this.mediaEleSources.push({audio:e,node:n})}this.getBrowserInfo(),this.audioResumedTimer=setInterval((function(){e.currentTime=e.currentTime+.45}),6e3)}else this.audioNode=this.ac.createMediaStreamSource(e.captureStream());return this.audioNode.connect(this.gainNode),this.replaceTrack()},e.prototype.getBrowserInfo=function(){var e,t={},r=navigator.userAgent.toLowerCase();e=(r.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),t.sysVer=e;var n=r.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return n&&(t.browser=n[1].replace(/version/,"'safari"),t.ver=n[2]),t},e.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0];return this.micTrack=this.localStream.getAudioTracks()[0],this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e),this.isMixAudio=!0,!0},e.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioNode&&(this.audioNode.disconnect(this.gainNode),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(this.destination),this.isMixAudio=!1,!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e}();t.AudioMix=r},6459:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixModule=void 0;var i=r(2523),s=r(6447),a=r(8011),l=function(){function e(e,t,r,n,o){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.ac=o,this.buffer=null,this.blank=null,"safari"==this.stateCenter.browser&&null==this.blank&&null==this.buffer&&(this.ac.resume(),this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start())}return e.prototype.preloadEffect=function(e,t,r){if(this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT,{effectID:e},{effectID:!0}))if(t&&"string"==typeof t){if(this.stateCenter.audioEffectBuffer[e])return this.logger.warn(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" audio buffer already exists"),void(r&&r());this.logger.info(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" start preload effect"),this._preloadEffect(this.ac,e,t,r)}else this.logger.error(i.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" params error")},e.prototype.checkPreviewer=function(e,t,r){void 0===t&&(t={});var n=!!(null==r?void 0:r.effectID),o=!!(null==r?void 0:r.previewer),i=t.effectID,s=t.streamID;return!(null==r?void 0:r.streamID)&&!s||"string"==typeof s||s instanceof MediaStream?n&&!i?(this.logger.error(e+" effectID required"),!1):i&&"string"!=typeof i?(this.logger.error(e+" effectID type error"),!1):!o||this.streamCenter.getPreviewer(s)||(this.logger.error("string"==typeof s?e+" "+s+" stream is not publishing":e+" stream doesn't exist"),!1):(this.logger.error(e+" stream type error"),!1)},e.prototype.getEffectDuration=function(e){if(!this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{effectID:e},{effectID:!0}))return 0;var t=this.stateCenter.audioEffectBuffer[e];return t?t.duration?Math.floor(1e3*t.duration):0:(this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),0)},e.prototype.getEffectProgress=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"==typeof r?0:this.getAudioManager(r).getEffectProgress(t)},e.prototype.seekAudioEffect=function(e,t,r){if(r<0)return this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" param time error "),!1;var n=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"!=typeof n&&this.getAudioManager(n).seekAudioEffect(t,r)},e.prototype.playEffect=function(e,t,r){return n(this,void 0,void 0,(function(){var n,s,a,l=this;return o(this,(function(o){switch(o.label){case 0:return n=e.path,this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:e.stream||e.streamID,effectID:s=e.effectID},{streamID:!0,effectID:!0})?(a=this.stateCenter.audioEffectBuffer[s],n?a?(this.logger.warn(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new Promise((function(e,t){l.preloadEffect(s,n,(function(r){r?(l.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" preload audio effect failed"),t(r)):e(void 0)}))}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!a)return this.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio effect doesn't exists"),[2];o.label=5;case 5:return this._playEffect(e,t,r),[2]}}))}))},e.prototype.pauseEffect=function(e,t){return this._pauseEffect(e,t)},e.prototype.resumeEffect=function(e,t){return this._resumeEffect(e,t)},e.prototype.stopEffect=function(e,t){return this._stopEffect(e,t)},e.prototype.unloadEffect=function(e){return!!this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT,{effectID:e},{effectID:!0})&&(delete this.stateCenter.audioEffectBuffer[e],!0)},e.prototype.setEffectVolume=function(e,t,r){if("number"!=typeof t||t<0||t>200)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" volume must be a number between 0 and 200"),!1;var n=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME,{streamID:e,effectID:r},{streamID:!0,previewer:!0});return"boolean"!=typeof n&&this.getAudioManager(n).setEffectVolume(t/100,r)},e.prototype.startMixingAudio=function(e,t){return this.logger.info(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" call "+e),e?t?(this.logger.info(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" end "+e),Array.isArray(t)&&0!==t.length&&t.every((function(e){return e instanceof HTMLMediaElement}))?this._startMixingAudio(e,t):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" audio list param type error"),!1)):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" no audio"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" stream not found"),!1)},e.prototype.stopMixingAudio=function(e,t){return e?Array.isArray(t)&&0!==t.length||void 0===t?this._stopMixingAudio(e,t):(this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" audio param type error"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" stream not found"),!1)},e.prototype.mixingBuffer=function(e,t,r,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" call streamID: "+JSON.stringify(e)+" sourceID:"+t),e?t&&"string"==typeof t?(this._mixingBuffer(e,t,r,n),this.logger.info(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" end")):this.logger.error(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param source id format error"):this.logger.error(i.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param streamid format error")},e.prototype.stopMixingBuffer=function(e,t){return this._stopMixingBuffer(e,t)},e.prototype.setMixingAudioVolume=function(e,t,r){return this.logger.info(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" call"),e?"number"!=typeof t||t<0||t>200?(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" volume must be a number between 0 and 200"),!1):r&&r instanceof HTMLMediaElement?this._setMixingAudioVolume(e,t,r):(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" no audio"),!1):(this.logger.error(i.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" stream not found"),!1)},e.prototype.getSoundLevel=function(e,t,r){this.logger.info("zc.gsl call");try{var n=this.ac.createMediaStreamSource(e),o=new a.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);o.initAudioWorklet(this.ac,n),o.onSoundLevelUpdate=function(e){t(e)},this.stateCenter.audioStreamList[e.id]={mic:n,script:o}}catch(e){r(e)}this.logger.info("zc.gsl call success")},e.prototype.stopSoundLevel=function(e){this.logger.info("zc.ssl call");var t=this.stateCenter.audioStreamList[e.id];t.mic.disconnect(),t.script.destroy(),delete this.stateCenter.audioStreamList[e.id]},e.prototype._preloadEffect=function(e,t,r,n){var o=this,i=new XMLHttpRequest;i.open("GET",r,!0),i.setRequestHeader("Range","none"),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||304==i.status)e.decodeAudioData(i.response,(function(e){o.logger.info("zc.pe.0 effect '".concat(t,"' preload success")),o.stateCenter.audioEffectBuffer[t]=e,n&&n()}),(function(e){o.logger.error("zc.pe.0 effect '".concat(t,"' preload fail. ")+e),n&&n(e)}));else{var r=i.statusText;o.logger.error("zc.pe.0 effect '".concat(t,"' preload fail.")+r),n&&n(r)}},i.send()},e.prototype._playEffect=function(e,t,r){var n=this.stateCenter.audioEffectBuffer[e.effectID];if(n){var o=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT,{streamID:e.stream||e.streamID,effectID:e.effectID},{streamID:!0,effectID:!0,previewer:!0});"boolean"!=typeof o&&this.getAudioManager(o).playEffect(e,n,t,r)}else this.logger.error(i.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" no audio buffer found")},e.prototype._pauseEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).pauseEffect(t)},e.prototype._resumeEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.RESUME_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).resumeEffect(t)},e.prototype._stopEffect=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_EFFECT,{streamID:e,effectID:t},{streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).stopEffect(t)},e.prototype._setMixingAudioVolume=function(e,t,r){var n=this.streamCenter.getPreviewer(e);return n?this.getAudioManager(n).setMixingAudioVolume(t/100,r):(this.logger.error("zc.sma.2 publisher doesn't exist"),!1)},e.prototype._startMixingAudio=function(e,t){var r=this.streamCenter.getPreviewer(e);return r?this.getAudioManager(r).startMixingAudio(t):(this.logger.error("string"==typeof e?"zc.sma.0 "+e+" stream is not publishing":"zc.sma.0 stream doesn't exist"),!1)},e.prototype._stopMixingAudio=function(e,t){var r=this.streamCenter.getPreviewer(e);return r?this.getAudioManager(r).stopMixingAudio(t):(this.logger.error("zc.sma.0 stream doesn't exist"),!1)},e.prototype._mixingBuffer=function(e,t,r,n){var o=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});"boolean"!=typeof o&&(r instanceof ArrayBuffer?this.getAudioManager(o).mixingBuffer(t,r,n):this.logger.error("zc.mb.0 array buffer not found"))},e.prototype._stopMixingBuffer=function(e,t){var r=this.checkPreviewer(i.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return"boolean"!=typeof r&&this.getAudioManager(r).stopMixingBuffer(t)},e.prototype.getAudioManager=function(e){var t=e.audioMixManager;return t||(t=new s.PreviewAudioManager(e),e.audioMixManager=t),t},e}();t.AudioMixModule=l},4853:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"}}},7526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6459);t.default={type:"AudioMix",install:function(e){Object.defineProperty(e.prototype,"initAudioMix",{value:function(){this.audioMixModule=new n.AudioMixModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac)}})}}},6447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewAudioManager=void 0;var n=r(2523),o=r(3013),i=r(4194),s=function(){function e(e){this.previewer=e,this.audioDestNode=void 0,this.audioMixList=[],this.arrayBufferMap={},this.effectList=[],this.mediaEleSources=e.streamCenter.mediaEleSources}return Object.defineProperty(e.prototype,"logger",{get:function(){return this.previewer.logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this.previewer.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this.previewer.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ac",{get:function(){return this.previewer.ac},enumerable:!1,configurable:!0}),e.prototype.startMixingAudio=function(e){var t=this;return this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" call"),this.localStream?(e.forEach((function(e){if(t.audioMixList.find((function(t){return t.media==e})))t.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" mix audio already exist");else if(t.localStream){t.streamCenter.soundLevelDelegate&&t.previewer.stopSoundLevel();var r=t.createDestNode(),o=new i.AudioMix(t.logger,t.ac,t.localStream,t.mediaEleSources,t.previewer.stateCenter.browser,r,t.previewer.rtcViewer);t.audioMixList.push({audioMix:o,media:e}),o.startMixingAudio(e),t.streamCenter.soundLevelDelegate&&t.previewer.startSoundLevel()}})),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" localStream not found"),!1)},e.prototype.stopMixingAudio=function(e){var t=this;return this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO+" call"),e?e.forEach((function(e){for(var r=0;r<t.audioMixList.length;r++)if(t.audioMixList[r].media==e){t.audioMixList[r].audioMix.stopMixingAudio()&&t.audioMixList.splice(r--,1);break}})):(this.audioMixList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.audioMixList=[]),!0},e.prototype.setMixingAudioVolume=function(e,t){this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call");var r=this.audioMixList.find((function(e){return e.media===t}));return r?(r.audioMix.setMixingAudioVolume(e),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" call success"),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" audio is not mixing"),!1)},e.prototype.playEffect=function(e,t,r,i){var s=this;if(this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" call"),this.localStream)if(this.effectList.find((function(r){return r.effectID==e.effectID&&r.audioBuffer==t})))this.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" effect already exist ");else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var a=this.createDestNode(),l=new o.AudioBufferProcessor(this.logger,this.ac,this.localStream,a,this.previewer.rtcViewer);l.audioBuffer=t;var c={processor:l,effectID:e.effectID,audioBuffer:t};this.effectList.push(c),l.playEffect(e.playTime,e.loop,!1,(function(){r&&r()}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.effectList=s.effectList.filter((function(e){return e!==c})),i&&i.apply(void 0,e)})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" play effect "+e.effectID+" success")}else this.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+" stream not found")},e.prototype.pauseEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),t.processor.pauseEffect(),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.pauseEffect()})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},e.prototype.resumeEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t){this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var r=t.processor.resumeEffect();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" resume "+e+" success"),r}return void 0===e?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.resumeEffect()})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" no effect found"),!1)},e.prototype.stopEffect=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),t.processor.stopMixingAudio(),this.effectList=this.effectList.filter((function(e){return e!==t})),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" effect not found"),!1;this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.effectList.forEach((function(e){return e.processor.stopMixingAudio()})),this.effectList=[],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel()}return!0},e.prototype.setEffectVolume=function(e,t){var r=this.effectList.find((function(e){return e.effectID==t}));if(r)r.processor.setMixingAudioVolume(e),this.logger.info("zp.sev.0 set volume "+t+" success");else{if(void 0!==t)return this.logger.error("zp.sev.0 effect not found"),!1;this.effectList.forEach((function(t){return t.processor.setMixingAudioVolume(e)}))}return!0},e.prototype.mixingBuffer=function(e,t,r){var i=this;if(this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" call"),this.localStream)if(this.arrayBufferMap[e])this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[e].mixingBuffer(t,(function(){i.streamCenter.soundLevelDelegate&&i.previewer.startSoundLevel(),r&&r()}));else{this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel();var s=this.createDestNode(),a=new o.AudioBufferProcessor(this.logger,this.ac,this.localStream,s,this.previewer.rtcViewer);this.arrayBufferMap[e]=a,a.mixingBuffer(t,(function(){i.streamCenter.soundLevelDelegate&&i.previewer.startSoundLevel(),r&&r()}))}},e.prototype.stopMixingBuffer=function(e){if(e&&this.arrayBufferMap[e])return this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap[e].stopMixingBuffer(),delete this.arrayBufferMap[e],this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0;if(void 0===e){for(var t in this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),this.arrayBufferMap)this.arrayBufferMap[t].stopMixingBuffer();return this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0}return this.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" arrayBuffer no found"),!1},e.prototype.getEffectProgress=function(e){var t=this.effectList.find((function(t){return t.effectID==e}));return t?t.processor.getProcess():(this.logger.error(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+"  effect not found"),0)},e.prototype.seekAudioEffect=function(e,t){var r=this.effectList.find((function(t){return t.effectID==e}));return r?(this.streamCenter.soundLevelDelegate&&this.previewer.stopSoundLevel(),r.processor.seekTo(t),this.streamCenter.soundLevelDelegate&&this.previewer.startSoundLevel(),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS+" effect not found"),!1)},e.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},e.prototype.createDestNode=function(){var e=null,t=this.previewer.createDestNode(this.localStream);return this.previewer.audioNodeQueue||((e=this.previewer.createSrcNode()).disconnect(),e.connect(t)),t},e}();t.PreviewAudioManager=s},4897:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannel=void 0;var n=r(8835);t.DataChannel={type:"DataChannel",install:function(e){Object.defineProperty(e.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new n.ZegoRealTimeSequentialDataManager(this,e),t.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(e.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){var t=this.stateCenter.roomList.find((function(t){return t.dataChannelManager==e}));t&&(e.dataChannelManager.reset(),t.dataChannelManager=null)},writable:!1})}}},3504:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannelListener=void 0;var o=function(){function e(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.logger=e.logger}return e.prototype.startBroadcasting=function(e,t){return r(this,void 0,void 0,(function(){var t,r,o,i;return n(this,(function(n){switch(n.label){case 0:return this.logger.info("dc.sb.0 call"),this.pubDataChannelList.includes(e)?(this.logger.error("dc.sb.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.publisherList[e])&&t.publisher.dataChannel?(this.pubDataChannelList.push(e),[2,!0]):t&&!t.publisher.dataChannel?(this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(r=document.createElement("canvas"),o=this,[4,this.zegoWebRTC.createStream({custom:{source:r}})]);case 1:o.broadcastStream=n.sent(),n.label=2;case 2:return(i=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),this.logger.info("dc.sb.0 end"),[2,i]}}))}))},e.prototype.stopBroadcasting=function(e){this.logger.info("dc.sb.1 call"),this.pubDataChannelList=this.pubDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.publisherList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),this.logger.info("dc.sb.1 end"),!0):(this.logger.error("dc.sb.1 datachannel no found"),!1)},e.prototype.sendRealTimeSequentialData=function(e,t){if(!t instanceof ArrayBuffer)return this.logger.error("dc.srsd data type wrong"),!1;var r=this.zegoWebRTC.streamCenter.publisherList[e];return r&&this.pubDataChannelList.includes(e)?this.sendBCMessage(r.publisher,t):(this.logger.error("dc.srsd datachannel no found"),!1)},e.prototype.sendBCMessage=function(e,t){var r;if(!e.dataChannelState)return!1;for(var n=new Uint8Array(t),o=0,i=t.byteLength,s=e.send_seq,a=0,l=(new Date).getTime(),c=0;i>0;){i>1151?c=1141:(c=i,a=1);var u=new Uint8Array(c+10);u[0]=1,u[1]=a,u[2]=e.send_seq>>8&255,u[3]=255&e.send_seq,u[4]=s>>8&255,u[5]=255&s,u[6]=l>>24&255,u[7]=l>>16&255,u[8]=l>>8&255,u[9]=255&l;for(var d=0;d<c;d++)u[d+10]=n[d+o];i-=c,o+=c,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),null===(r=e.dataChannel)||void 0===r||r.send(u)}return!0},e.prototype.startSubscribing=function(e,t){var o,i;return r(this,void 0,void 0,(function(){var t,r;return n(this,(function(n){switch(n.label){case 0:return this.logger.info("dc.ss.0 call"),this.subDataChannelList.includes(e)?(this.logger.error("dc.ss.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:n.sent(),t=this.zegoWebRTC.streamCenter.playerList[e],n.label=2;case 2:return(r=t.player).dataChannel?(!(null===(o=r.onDataChannelList)||void 0===o?void 0:o.includes(this.onReceivedDataChannel.bind(this)))&&(null===(i=r.onDataChannelList)||void 0===i||i.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),this.logger.info("dc.ss.0 end"),[2,!0]):(this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"),[2,!1])}}))}))},e.prototype.stopSubscribing=function(e){this.logger.info("dc.ss.1 call"),this.subDataChannelList=this.subDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.playerList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),this.logger.info("dc.ss.1 end"),!0):(this.logger.error("dc.ss.1 datachannel no subscribe"),!1)},e.prototype.on=function(e,t){this.bindListener(e,t)},e.prototype.off=function(e,t){this.deleteListener(e,t)},e.prototype.bindListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error("dc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.logger.error("dc.o.1 listener no found"),!1;var r=this.listenerList[e];return t?r.splice(r.indexOf(t),1):this.listenerList[e]=[],!0},e.prototype.actionListener=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,r)}),0)}catch(r){t.logger.error("dc.al "+e+" "+r)}}))},e.prototype.onReceivedDataChannel=function(e,t,r){this.actionListener("receiveRealTimeSequentialData",e,t,r)},e.prototype.reset=function(){var e=this;for(var t in this.logger.info("dc.rs call"),this.pubDataChannelList.forEach((function(t){var r=e.zegoWebRTC.streamCenter.publisherList[t];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPublishingStream(t)})),this.subDataChannelList.forEach((function(t){var r=e.zegoWebRTC.streamCenter.playerList[t];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPlayingStream(t)})),this.listenerList)this.listenerList[t]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.logger.info("dc.rs end")},e}();t.DataChannelListener=o},5906:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=t.TRACER_LEVEL=void 0;var o,i=r(817),s=r(6145),a="2.22.0",l=1e4,c={};!function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(o=t.TRACER_LEVEL||(t.TRACER_LEVEL={}));var u={code:1005027,message:"mix stream input parameters are wrong"};function d(e,t){var r,n,o,s,a="",c=i.errorCodeList;return t.errorCode<2e9&&t.errorCode>1e9?(o={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",190:"MIXER_START_REQUEST_ERROR"},s="MIXER_INNER_ERROR",(n=t.errorCode-l)>1e9&&o[n-1e9]&&(s=o[n-1e9]),r=c[a=s]):t.errorCode<1e6&&(r=e.decodeServerError(t.errorCode,t.extendedData),a=e.getLiveRoomError(t.errorCode,this.stateCenter.useNetAgent)),{reportErr:r,actualError:c[a]}}t.zegoWebRTC={startMixerTask:function(e){var t=this;return new Promise((function(r,n){var i=t.stateCenter.reporter.createSpan(o.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID},s.ZegoRTCLogEvent.kZegoTaskMixStart.event,!0),a={errorCode:u.code,extendedData:u.message};if(null==e?void 0:e.inputList.find((function(e){return null==e.streamID&&(a.extendedData=a.extendedData+". streamID should be of string type",!0)})))return t.stateCenter.reporter.setError(i,u),void n(a);e.outputConfig&&e.outputConfig.outputFps&&(e.outputConfig.outputFPS=e.outputConfig.outputFps);var l=function(r){var o=d(t.stateCenter,r),a=o.reportErr,l=o.actualError;1005026===r.errorCode&&i.setAttributes({stop_reason:"UnmatchStreamId"}),t.stateCenter.reporter.setError(i,a||r),t.stateCenter.reporter.spanEnd({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID}),l&&(r.errorCode=null==l?void 0:l.code,r.extendedData=(null==l?void 0:l.message)||""),n(r)},c=t.stateCenter.roomList[0];c?c.streamHandler.updateMixStream(e,(function(n){t.stateCenter.reporter.spanEnd({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID}),r(n)}),l):l({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message})}))},setMixerTaskConfig:function(e){var t=this;return new Promise((function(r,n){var i=t.stateCenter.reporter.createSpan(o.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},s.ZegoRTCLogEvent.kZegoTaskMixConfig.event);i.setAttributes({mix_params:s.ZegoRTCLogEvent.kZegoTaskMixConfig.mix_params(e)});var a=t.stateCenter.roomList[0];a?a.streamHandler.setMixerTaskConfig(e).then((function(e){i.end(),r(e)})).catch((function(e){t.stateCenter.reporter.setError(i,e),n(e)})):n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message})}))},stopMixerTask:function(e){var t=this;return new Promise((function(r,n){var i=t.stateCenter.reporter.createSpan(o.H,{key:s.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},s.ZegoRTCLogEvent.kZegoTaskMixStop.event);if(!e||"string"!=typeof e||e.length>256||!t.stateCenter.checkIllegalCharacters(e))return t.logger.error("zb.rh.lg taskID must be string less 256"),t.stateCenter.reporter.setError(i,s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError," param taskID error"),void n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"});i.setAttributes({mix_task_id:e});var a=function(e){var r=d(t.stateCenter,e),o=r.actualError;t.stateCenter.reporter.setError(i,r.reportErr||e),o&&(e.errorCode=null==o?void 0:o.code,e.extendedData=(null==o?void 0:o.message)||""),n(e)},l=t.stateCenter.roomList[0];l?l.streamHandler.stopMixStream(e,(function(e){i.end(),r(e)}),a):a({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message})}))}},t.streamHandler={setMixerTaskConfig:function(e){var t=this;return new Promise((function(r,n){var o,i={},a={};if(e&&e.videoCodec){var l=e.videoCodec.toLowerCase();if(-1==["vp8","h264"].indexOf(l))return t.logger.error("zb.sh.ums param videoCode error"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message}),!1;i.videoCodec=l,a.video_codec=l}if(e.backgroundColor){if(!t.stateCenter.checkInteger(e.backgroundColor))return t.logger.error("zb.sh.ums param backgroundColor must be integer number"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;i.backgroundColor=e.backgroundColor,a.background_color=e.backgroundColor}if(e.backgroundImage){if("string"!=typeof e.backgroundImage)return t.logger.error("zb.sh.ums param outputBgImage error"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(!e.backgroundImage.startsWith("preset-id://")||!e.backgroundImage.endsWith(".jpg")&&!e.backgroundImage.endsWith(".png"))return t.logger.error("zb.sh.ums illegal input background image URL"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message}),!1;i.backgroundImage=e.backgroundImage,a.background_image=e.backgroundImage}if(e.waterMark&&(i.waterMark=e.waterMark,a.water_mark=e.waterMark),e&&e.userData){if(!(e.userData instanceof Uint8Array))return t.logger.error("zb.sh.ums param userData required Uint8Array"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(e.userData.byteLength>1e3)return t.logger.error("zb.sh.ums param userData should shorter than 1000"),n({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;i.userData=e.userData}e.extraParams&&(i.extraParams||(i.extraParams=[]),(o=i.extraParams).push.apply(o,e.extraParams)),c=i,r({errorCode:0,extendedData:""})}))},stopMixStream:function(e,t,r,n,o){var c=this;this.logger.info("zb.sh.sms call");var u={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:a};if("string"==typeof e&&(u.task_id=e),null!=n?u.stream_id=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+n:n:null!=o&&(u.mixurl=o),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"stop_mix"},u,(function(e){t&&t({errorCode:0,extendedData:""})}),(function(e,t,n,o){var a="";if(o)return o==i.errorCodeList.TIMEOUT&&(o=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),o.code&&20010===o.code&&(o=JSON.parse(JSON.stringify(i.errorCodeList.MIXER_NO_SERVICES))),void(r&&r(o,a));if(o=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,200===e){if("number"==typeof t)return c.logger.debug("zb.sh.sms error: "+t),t+=1e9,void(r&&r({errorCode:c.stateCenter.getServerError(l+t).code,extendedData:a}));c.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(error));var u=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;r&&r({errorCode:u.code,extendedData:u.message})}else c.logger.error("zb.sh.sms "+(a="request mix server fail, error: "+e)),r&&r(o,a)}));else{var d={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(u)};this.sendBizChannelRequest(d,(function(){t&&t({errorCode:0,extendedData:""})}),(function(e){var t;"number"==typeof e?r&&r({errorCode:c.stateCenter.getServerError(l+e).code,extendedData:""}):(c.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(e)),t=e==i.errorCodeList.TIMEOUT?s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError:s.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError,r&&r({errorCode:t.code,extendedData:t.message}))}))}return!0},updateMixStream:function(e,t,r){var o,u=this;this.logger.info("zb.sh.ums call");var d,h=[];if(!e.noTaskID&&!e.taskID)return this.logger.error("zb.sh.ums no taskId found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message}),!1;if(!e.noTaskID&&"string"!=typeof e.taskID)return this.logger.error("zb.rh.lg taskId must be string"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.noTaskID&&e.taskID.length>256)return this.logger.error("zb.sh.ums taskId is too long"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message}),!1;if(!e.noTaskID&&!this.stateCenter.checkIllegalCharacters(e.taskID))return this.logger.error("zb.sh.ums task ID contains illegal characters"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message}),!1;if(!e.inputList||0==e.inputList.length)return this.logger.error("zb.sh.ums input list wrong"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message}),!1;e.inputList.forEach((function(e){"AUDIO"===e.contentType&&(!e.layout&&(e.layout={top:0,left:0,bottom:0,right:0}),e.layout.top=0,e.layout.left=0,e.layout.bottom=1,e.layout.right=1)}));for(var p=0;p<e.inputList.length;p++){var f=e.inputList[p],g={errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message};if("object"!=typeof f.layout)return this.logger.error("zb.sh.ums input layout must be object"),r(g),!1;if(!(this.stateCenter.checkInteger(f.layout.top,!1)&&this.stateCenter.checkInteger(f.layout.bottom,!1)&&this.stateCenter.checkInteger(f.layout.left,!1)&&this.stateCenter.checkInteger(f.layout.right,!1)))return this.logger.error("zb.sh.ums topleftbottomright must be integer number"),r(g),!1;if(void 0!==f.renderMode&&![0,1].includes(f.renderMode))return this.logger.error("zb.sh.ums render_mode is wrong"),r(g),!1}if(!e.outputList||0==e.outputList.length)return this.logger.error("zb.sh.ums no output list found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message}),!1;if(e.outputList.some((function(e){return"string"==typeof e&&!u.stateCenter.isUrl(e)&&!u.stateCenter.checkIllegalCharacters(e)||"object"==typeof e&&e.target&&!u.stateCenter.isUrl(e.target)&&!u.stateCenter.checkIllegalCharacters(e.target)})))return this.logger.error("zb.sh.ums stream output target is incorrect"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;if(!((d=e.inputList.every((function(e){return"AUDIO"===e.contentType})))||e.outputConfig&&"object"==typeof e.outputConfig))return this.logger.error("zb.sh.ums no output config found"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message}),!1;if(d&&(e.outputConfig=n(n({},e.outputConfig||{}),{outputBitrate:.001,outputFPS:1,outputWidth:1,outputHeight:1})),!(d||e.outputConfig.outputBitrate&&this.stateCenter.checkInteger(e.outputConfig.outputBitrate)))return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputFPS||!this.stateCenter.checkInteger(e.outputConfig.outputFPS))return this.logger.error("zb.sh.ums fps param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputWidth||!this.stateCenter.checkInteger(e.outputConfig.outputWidth))return this.logger.error("zb.sh.ums width param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputHeight||!this.stateCenter.checkInteger(e.outputConfig.outputHeight))return this.logger.error("zb.sh.ums height param is required and must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioCodecID&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioCodecID,!1))return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioBitrate&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioBitrate))return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioChannels&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioChannels,!1))return this.logger.error("zb.sh.ums AudioChannels param must be integer number"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;var m=[];for(p=0;p<e.inputList.length;p++){var v=e.inputList[p],_=v.streamID;this.stateCenter.testEnvironment&&(_="zegotest-"+this.stateCenter.appid+"-"+v.streamID),m.push({stream_id:_,content_control:"AUDIO"===v.contentType?1:0,rect:{layer:p,top:v.layout.top,left:v.layout.left,bottom:v.layout.bottom,right:v.layout.right},render_mode:v.renderMode}),h.push({stream_id:_,content_control:"AUDIO"===v.contentType?1:0,top:v.layout.top,left:v.layout.left,bottom:v.layout.bottom,right:v.layout.right,render_mode:v.renderMode})}var y={},b=[],E=0;e.outputConfig.singleStreamPassThrough&&"boolean"==typeof e.outputConfig.singleStreamPassThrough&&(E=e.outputConfig.singleStreamPassThrough?1:0),y={task_id:e.taskID,id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:a,bypass:E,timestamp:Math.ceil((new Date).getTime()/1e3)};var S=c;S&&(S.videoCodec&&(y.extra_params=[{key:"video_encode",value:S.videoCodec}]),S.backgroundColor&&(y.output_bg_color=S.backgroundColor),S.backgroundImage&&(y.output_bg_image=S.backgroundImage),S.waterMark&&(y.watermark=S.waterMark),S.userData&&(y.userdata=this.stateCenter.uint8arrayToBase64(S.userData)),S.extraParams&&(!y.extra_params&&(y.extra_params=[]),(o=y.extra_params).push.apply(o,S.extraParams))),y.MixInput=e.inputList.map((function(e,t){var r=e.streamID;return u.stateCenter.testEnvironment&&(r="zegotest-"+u.stateCenter.appid+"-"+e.streamID),{stream_id:r,content_control:"AUDIO"===e.contentType?1:0,rect:{layer:t,top:e.layout.top,left:e.layout.left,bottom:e.layout.bottom,right:e.layout.right},render_mode:e.renderMode}}));var C=[];y.MixOutput=e.outputList.map((function(t){var n={},o="";if("string"==typeof t)o=t;else{if("object"!=typeof t||!t.target)return u.logger.error("zb.sh.ums output target required"),r({errorCode:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;o=t.target}return o.startsWith("rtmp://")||o.startsWith("https://")&&o.endsWith(".flv")||o.startsWith("https://")&&o.endsWith(".m3u8")?n.mixurl=o:n.stream_id=u.stateCenter.testEnvironment?"zegotest-"+u.stateCenter.appid+"-"+o:o,n.bitrate=1e3*e.outputConfig.outputBitrate,n.fps=e.outputConfig.outputFPS,n.width=e.outputConfig.outputWidth,n.height=e.outputConfig.outputHeight,e.outputConfig.outputAudioCodecID&&(n.audio_enc_id=e.outputConfig.outputAudioCodecID),"vp8"===S.videoCodec?n.audio_enc_id=3:"h264"===S.videoCodec&&(n.audio_enc_id=0),e.outputConfig.outputAudioBitrate&&(n.audio_bitrate=1e3*e.outputConfig.outputAudioBitrate),e.outputConfig.outputAudioChannels&&(n.audio_channel_cnt=e.outputConfig.outputAudioChannels),n.testenv=u.stateCenter.testEnvironment?1:0,C.push(n),b.push({target:n.mixurl||n.stream_id,is_url:!!n.mixurl+""}),n}));var T=e.outputConfig;this.stateCenter.reporter.spanSetAttributes({key:s.ZegoRTCLogEvent.kZegoTaskMixStart.event,par:e.taskID},{mix_stream_conf:s.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_conf({fps:T.outputFPS,bitrate:T.outputBitrate,w:T.outputWidth,h:T.outputHeight,stream_cnt:h.length,mix_task_id:e.taskID,input_stream_list:h,output_target_list:b})}),this.logger.debug("zb.sh.ums send command");var w="zegotest-"+this.stateCenter.appid+"-";if(this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:12,location:"/interface/command",cmd:"start_mix"},y,(function(e){var r=e.play.map((function(e){var t={rtmpURL:"",hlsURL:"",flvURL:""},r=e.stream_alias||"";return u.stateCenter.testEnvironment&&r&&r.startsWith(w)&&(r=r.slice(w.length)),t.streamID=r,e.rtmp_url&&e.rtmp_url.length>0&&(t.rtmpURL=e.rtmp_url),e.hls_url&&e.hls_url.length>0&&(t.hlsURL=e.hls_url),e.hdl_url&&e.hdl_url.length>0&&(t.flvURL=e.hdl_url),t}));t&&t({errorCode:0,extendedData:JSON.stringify({mixerOutputList:r})})}),(function(e,t,n,o){var a="";if(o)return o==i.errorCodeList.TIMEOUT&&(o=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError),o.code&&20010===o.code&&(o=JSON.parse(JSON.stringify(i.errorCodeList.MIXER_NO_SERVICES))),void(r&&r(o,a));if(o=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,200===e){if("number"==typeof t){if(u.logger.debug("zb.sh.ums error: "+t),1000000150==(t+=1e9)&&n){var c=(null==n?void 0:n.non_exist_streams.map((function(e){return u.stateCenter.testEnvironment&&e.startsWith(w)?e.slice(w.length):e})))||[];c.length>0&&(u.logger.debug("zb.sh.ums not exist streams: "+c),a=c.join(","))}return void(r&&r({errorCode:u.stateCenter.getServerError(l+t).code,extendedData:a}))}u.logger.debug("zb.sh.ums error code "+t);var d=s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError;r&&r({errorCode:d.code,extendedData:d.message})}else u.logger.error("zb.sh.ums "+(a="request mix server fail, error: "+e)),r&&r(o,a)}));else{var R={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(y)};this.sendBizChannelRequest(R,(function(e,n,o){if(u.logger.debug("zb.sh.ums receive message"),0!=o.length){for(var i=JSON.parse(o),s=[],a=0;a<i.play.length;a++){var l={rtmpURL:"",hlsURL:"",flvURL:""},c=i.play[a].stream_alias||"";u.stateCenter.testEnvironment&&c&&c.startsWith(w)&&(c=c.slice(w.length)),l.streamID=c,i.play[a].rtmp_url&&i.play[a].rtmp_url.length>0&&(l.rtmpURL=i.play[a].rtmp_url),i.play[a].hls_url&&i.play[a].hls_url.length>0&&(l.hlsURL=i.play[a].hls_url),i.play[a].hdl_url&&i.play[a].hdl_url.length>0&&(l.flvURL=i.play[a].hdl_url),s.push(l)}t&&t({errorCode:0,extendedData:JSON.stringify({mixerOutputList:s})})}else r&&r({errorCode:u.stateCenter.getServerError(10001).code,extendedData:""})}),(function(e,t,n){if("number"==typeof e){u.logger.debug("zb.sh.ums error: "+e);var o=[];if(1000000150==e&&0!=n.length)for(var a=JSON.parse(n),c=0;c<a.non_exist_streams.length;c++){var d=a.non_exist_streams[c];u.stateCenter.testEnvironment&&d.startsWith(w)?o.push(d.slice(w.length)):o.push(d)}r&&r({errorCode:u.stateCenter.getServerError(l+e).code,extendedData:""})}else{var h;u.logger.debug("zb.sh.ums error code "+e.code),h=e==i.errorCodeList.TIMEOUT?s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError:s.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,r&&r({errorCode:h.code,extendedData:h.message})}}))}return!0}}},817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}}},577:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5906);t.default={type:"MixStream",install:function(e,t){for(var r in n.zegoWebRTC)Object.defineProperty(e.prototype,r,{value:n.zegoWebRTC[r],writable:!1});for(var r in n.streamHandler)Object.defineProperty(t.prototype,r,{value:n.streamHandler[r],writable:!1})}}},6145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=r(817),o=function(e){return e};t.ZegoRTCLogEvent={kZMInitSetting:{event:"/sdk/init"},kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kTaskIDNullError:n.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:n.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:n.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:n.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:n.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:n.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:n.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:n.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:n.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:n.errorCodeList.NOT_LOGIN},mix_stream_conf:o,stop_reason:function(e){return e}},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kTaskIDNullError:n.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:n.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:n.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:n.errorCodeList.NOT_LOGIN}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:n.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:n.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID,kNoLoginError:n.errorCodeList.NOT_LOGIN},mix_params:o}}},2760:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemInfo=void 0;var l=a(r(2730)),c=a(r(2846)),u=a(r(3402)),d=a(r(5947)),h=a(r(1646)),p=a(r(1576)),f=r(7803),g=r(5130),m=r(608);function v(){var e;return o(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(o){switch(o.label){case 0:return(t=null===navigator||void 0===navigator?void 0:navigator.userAgentData)?[4,t.getHighEntropyValues(["platformVersion"]).catch((function(){}))]:[2,{platform:"",majorPlatformVersion:0}];case 1:return r=o.sent()||{},n=parseInt(null===(e=r.platformVersion)||void 0===e?void 0:e.split(".")[0]),[2,{platform:r.platform,majorPlatformVersion:n}]}}))}))}t.getSystemInfo=v;var _="zc.ra.0",y=function(){function e(e,t){var r=this;this.logger=t,this.isSpatial=!1,this.audioSourceList=[],this.audioSourceUpdate=!1,this.localUserList=[],this.speakingUserIdList=[],this.vocalSourceMap=new Map,this.volume=1,this.speaker="",this._audioCtx=null,this.supportSpeakerSet=!1,this.isHide=!1,this.eventHandler={visibilitychange:function(){return o(r,void 0,void 0,(function(){var e,t,r,n,o,a,l,c=this;return i(this,(function(i){switch(i.label){case 0:return s(s([],this.vocalSourceList,!0),this.audioSourceList,!0).forEach((function(e){e.inBackground(document.hidden),c.isHide=document.hidden})),e=function(){s(s([],c.vocalSourceList,!0),c.audioSourceList,!0).forEach((function(e){e.enableSpatializer(c.isSpatial,!0,!1,!1)}))},document.hidden?(t=navigator.userAgent.toLowerCase(),r=t.match(/chrome\/(\d*)/),n=r&&t.includes("mobile"),[4,v()]):[3,2];case 1:return o=i.sent(),a="Windows"===o.platform&&o.majorPlatformVersion>=13,n||a?(this.logger.warn("".concat(_," mobile chrome hide page and stop web audio.")),e(),[2]):("running"!==(l=this.audioCtx.state)?(this.logger.info("".concat(_," hidden ctx: ").concat(l,", resume ctx")),this.audioCtx.resume(),setTimeout((function(){var t=c.audioCtx.state;c.isHide&&("running"===t?c.logger.info("".concat(_," hidden ctx: ").concat(t,".")):(c.logger.warn("".concat(_," hidden ctx: ").concat(t,", ctx resume failed. stop web audio.")),e()))}),2e3)):this.logger.info("".concat(_," hidden ctx: ").concat(l,".")),[3,3]);case 2:this.audioCtx.resume(),this.audioSourceList.forEach((function(e){var t,r;e.isPlaying&&(null===(t=e.audioEl)||void 0===t||t.dom.pause(),null===(r=e.audioEl)||void 0===r||r.dom.play().catch((function(){c.logger.warn("".concat(_," show page and  ").concat(e.userID," replay failed."))})))})),i.label=3;case 3:return[2]}}))}))}},this.zegoRTC=e,document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.zegoRTC.on("roomStreamUpdate",(function(e,t,o){var i=o.map((function(e){var t=r.getStreamInfo(e.extraInfo,e.streamID),o=t.isRangeAudioStream,i=t.teamID,s=t.sendMode;return n(n({},e),{isRangeAudioStream:o,teamID:i,sendMode:s})})).filter((function(e){return e.isRangeAudioStream})),s=i.map((function(e){return e.user.userID}));"DELETE"===t?r.speakingUserIdList=r.speakingUserIdList.filter((function(e){var t=!s.includes(e);if(!t){var n=r.audioSourceMap[e];n&&n.stopPlayingAudio("stop for stream delete")}return t})):"ADD"===t&&(r.speakingUserIdList=r.speakingUserIdList.concat(s),i.forEach((function(e){var t=e.user.userID,n=r.audioSourceMap[t],o=e.teamID,i=e.sendMode,s=!(!["",void 0].includes(o)&&r.rangeListener.teamID===o)&&r.isSpatial;if(n)n.streamID!==e.streamID&&(n.stopPlayingAudio("stop for old stream"),n.streamID=e.streamID),void 0!==i&&(n.sendMode=i),o!==n.teamID&&(n.teamID=o),n.enableSpatializer(s);else{var a=new l.default(r.logger,{userID:t,teamID:o,sendMode:i},{audioCtx:r.audioCtx,zegoRTC:r.zegoRTC,isSpatial:s,maxDistance:r.rangeListener.recvRange,volume:r.volume,speaker:r.speaker,isHide:r.isHide});a.streamID=e.streamID,r.audioSourceList.push(a),r.playStreamHandler.hasChanged=!0}}))),r.playStreamHandler.setAudioSourceList(r.speakingAudioSourceList)})),this.zegoRTC.on("playerStateUpdate",(function(e){var t=r.audioSourceList.find((function(t){return t.streamID===e.streamID}));t&&("NO_PLAY"===e.state?t.isPlaying=!1:("PLAYING"===e.state&&t.checkTrackChanged(),t.isPlaying=!0))})),this.zegoRTC.on("streamExtraInfoUpdate",(function(e,t){r.logger.info("zc.ra.0 recv extra info: "+JSON.stringify(t)),t.forEach((function(e){var t=r.audioSourceMap[e.user.userID];if(t&&t.streamID){var n=r.getStreamInfo(e.extraInfo,e.streamID),o=n.teamID,i=n.sendMode;o!==t.teamID&&(t.teamID=o,r.enableSpatializer(r.isSpatial)),void 0!==i&&(t.sendMode=i),r.playStreamHandler.hasChanged=!0}}))})),this.zegoRTC.RTM._on("_roomStateUpdate",(function(e,t){"CONNECTED"===t?(r.roomID=e,r.rangeListener.userID=r.zegoRTC.RTM.getUserID(),r.playStreamHandler.hasChanged=!0,r.playStreamHandler.userChanged=!0):"DISCONNECTED"===t&&(r.roomID=void 0,r.rangeListener.reset(),r.enableSpeaker(!1),r.audioSourceList=[],r.playStreamHandler.setAudioSourceList([]),r.localUserList=[],r.playStreamHandler.setLocalUserList([]))})),this.zegoRTC.RTM.on("roomUserUpdate",(function(e,t,n){var o;r.logger.info("zc.ra.0 roomUserUpdate: ",e,t,JSON.stringify(n)),"ADD"===t?(o=r.localUserList).push.apply(o,n):"DELETE"===t&&n.forEach((function(e){r.localUserList=r.localUserList.filter((function(t){return t.userID!==e.userID}))})),r.playStreamHandler.setLocalUserList(r.localUserList)})),this.zegoRTC.on("publishQualityUpdate",(function(e,t){var o=e.match(/(.*)_(.*)/);if(3===(null==o?void 0:o.length)){var i=o[1];if(r.rangeListener.userID!==i)return;var s=n({},t.audio);r.eventManager.emit("publishQualityUpdate",i,s)}})),this.zegoRTC.on("playQualityUpdate",(function(e,t){var o,i=e.match(/(.*)_(.*)/);if(3===(null==i?void 0:i.length)){var s=i[1],a=t.audio,l=t.peerToPeerDelay,c=t.peerToPeerPacketLostRate;if(!(null===(o=r.audioSourceList)||void 0===o?void 0:o.some((function(e){return e.userID===s}))))return;var u=n(n({},a),{peerToPeerDelay:l,peerToPeerPacketLostRate:c});r.eventManager.emit("playQualityUpdate",s,u)}}));var a=window.AudioContext||window.webkitAudioContext;this._audioCtx=this.zegoRTC&&this.zegoRTC.ac||new a,this.rangeListener=d.default.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=h.default.getInstance(this.logger,this.rangeListener),this.eventManager=p.default.getInstance()}return Object.defineProperty(e.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce((function(e,t){return t.userID&&(e[t.userID]=t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speakingAudioSourceList",{get:function(){var e=this;return this.audioSourceList.filter((function(t){return e.speakingUserIdList.includes(t.userID)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vocalSourceList",{get:function(){for(var e=[],t=this.vocalSourceMap.values(),r=0;r<this.vocalSourceMap.size;r++)e.push(t.next().value);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter((function(e){return e.isPlaying}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioCtx",{get:function(){if(!this._audioCtx){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e}return this._audioCtx},enumerable:!1,configurable:!0}),e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.resumeAudioContext=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t){g.AudioElPool.generateEls(),"running"===e.audioCtx.state&&t(!0),e.audioCtx.onstatechange=function(){"running"===e.audioCtx.state&&t(!0)},e.audioCtx.resume(),e.logger.info("zc.ra.0 resume audio ctx"),setTimeout((function(){t(!1)}),3e3)}))]}))}))},e.prototype.getAudioContextState=function(){return this.audioCtx.state},e.prototype.getStreamInfo=function(e,t){var r,n=null;try{n=JSON.parse(e)}catch(e){return this.logger.warn(_+" parse room extra info failed. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1}}if(!n.hasOwnProperty("range_audio_team_id")||!n.hasOwnProperty("range_audio_mode"))return this.logger.warn(_+" extra info has no mode. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1};r={1:0,2:1,3:2}[n.range_audio_mode];var o=n.r_a_s_flag,i={teamID:n.range_audio_team_id||void 0,sendMode:r,isRangeAudioStream:void 0===o||1===o};return this.logger.info("".concat(_," ").concat(t," parse extra info: ").concat(JSON.stringify(i),".")),i},e.prototype.setAudioReceiveRange=function(e){if(!(0,f.checkNumber)(e))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if(e=Number(e),(e=Number(e))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.logger.info("zc.ra.0 set receive range: "+e),this.rangeListener.recvRange=e,this.audioSourceList.forEach((function(t){t.setMaxDistance(e)})),this.playStreamHandler.hasChanged=!0,this.playStreamHandler.userChanged=!0},e.prototype.updateSelfPosition=function(e,t,r,n){var o=this,i=function(e){return"Failed to execute 'updateSelfPosition': Argument '".concat(e,"' requires an array of type number.\"")};if(!(0,f.checkCoordinate)(e))throw new Error(i("position"));if(!(0,f.checkCoordinate)(t))throw new Error(i("axisForward"));if(!(0,f.checkCoordinate)(r))throw new Error(i("axisRight"));if(!(0,f.checkCoordinate)(n))throw new Error(i("axisUp"));this.logger.info(_+" set self position [".concat(e,"]")),this.rangeListener&&(this.rangeListener.updateSelfPosition(e,t,n),this.vocalSourceMap.forEach((function(e){e.checkIfCanPlay(o.rangeListener)}))),this.playStreamHandler.setListener(this.rangeListener)},e.prototype.updateAudioSource=function(e,t){if(e=String(e),!(0,f.checkCoordinate)(t))throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");var r=this.audioSourceMap[e];r?r.setPosition(t):(r=new l.default(this.logger,{userID:e,position:t},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange,volume:this.volume,speaker:this.speaker,isHide:this.isHide}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(r)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList),this.playStreamHandler.setAllAudioSourceList(this.audioSourceList)},e.prototype.enableMicrophone=function(e){if(void 0===e&&(e=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return e?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},e.prototype.selectMic=function(e){return o(this,void 0,void 0,(function(){var t,r,n,o;return i(this,(function(i){switch(i.label){case 0:if("string"!=typeof e&&void 0!==e)throw new Error("Select mic failed. DeviceID error.");if(r=(t=this.rangeListener).audioStream,n=t.isPublishing,this.logger.info("zc.ra.0 select mic: "+e),!r||!n)return[3,5];o={errorCode:0},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.zegoRTC.useAudioDevice(r,e||"")];case 2:return o=i.sent(),[3,4];case 3:return i.sent(),[2,!1];case 4:return 0===o.errorCode?(this.rangeListener.micID=e,[2,!0]):[2,!1];case 5:return this.rangeListener.micID=e,[2,!0];case 6:return[2]}}))}))},e.prototype.enableSpeaker=function(e){if(void 0===e&&(e=!0),e&&!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=e,this.logger.info("zc.ra.0 enable speaker: "+e),e?(g.AudioElPool.generateEls(),this.playStreamHandler.startPlayingAudioStream()):this.playStreamHandler.stopPlayingAudioStream()},e.prototype.enableSpatializer=function(e){var t=this;void 0===e&&(e=!0),this.logger.info("zc.ra.0 set spatializer: "+e),this.isSpatial=!!e,this.audioSourceList.forEach((function(r){var n=!(!["",void 0].includes(r.teamID)&&t.rangeListener.teamID===r.teamID)&&e;r.enableSpatializer(n)})),this.vocalSourceList.forEach((function(t){t.enableSpatializer(e)})),e&&this.rangeListener.updateListenerEffect()},e.prototype.enableAiDenoise=function(e){if(this.logger.info("zc.ra.0 set ai denoise: "+e),"boolean"!=typeof e)return!1;var t=m.ClientUtil.isMobile();return!t&&window.AudioWorklet&&window.WebAssembly?this.rangeListener.enableDenoise(!!e):(this.logger.error(_+"".concat(t&&" mobile"," browser dose not support ai denoise.")),!1)},e.prototype.setRangeAudioTeamID=function(e){this.logger.info("zc.ra.0 set team id: "+e),this.rangeListener.setTeamID(e),this.enableSpatializer(this.isSpatial),this.playStreamHandler.hasChanged=!0},e.prototype.setRangeAudioMode=function(e){this.logger.info("zc.ra.0 set mode "+e),this.rangeListener.setSendMode(e),this.rangeListener.setRecvMode(e),this.playStreamHandler.hasChanged=!0},e.prototype.setAudioVolume=function(e){var t=this;if(this.logger.info(_+" set volume ".concat(e)),e<0)throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");this.volume=e/100,this.audioSourceList.forEach((function(e){e.setVolume(t.volume)}))},e.prototype.selectSpeaker=function(e){var t=this;if(void 0===e&&(e=""),"string"!=typeof e)throw new Error("Select speaker failed. Device ID error.");if(!this.supportSpeakerSet){if(!document.createElement("audio").setSinkId)throw new Error("Failed to execute 'selectSpeaker': browser not support.");this.supportSpeakerSet=!0}this.speaker=e,this.logger.info("zc.ra.0 set speaker: "+e),""===e&&this.logger.warn("zc.ra.0 set speaker to be default. "),this.audioSourceList.find((function(r){return o(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r.setSpeaker(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.logger.warn(_+" set speaker failed. id: ".concat(e,", error: ").concat(t)),[2,!0];case 3:return[2,!1]}}))}))}))},e.prototype.setPositionUpdateFrequency=function(e){if(!(e>=15))throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");this.playStreamHandler.interval=Number(e)||100,this.logger.info("zc.ra.0 set interval: "+e)},e.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e.prototype.enableAudioSourceUpdateChecker=function(e,t){if(this.logger.info("zc.ra.0 set source update: "+e),this.audioSourceUpdate=e,this.playStreamHandler.setAudioSourceUpdate(e),t&&"number"==typeof t.frequency){if((null==t?void 0:t.frequency)<50)throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +].");this.playStreamHandler.updateUserInterval=Number(t.frequency)||1e3,this.logger.info("zc.ra.0 set interval: "+t.frequency)}e?this.playStreamHandler.startCheckUserInRange():this.playStreamHandler.stopCheckUserInRange()},e.prototype.getVocalSource=function(e,t){var r=this.vocalSourceMap.get(e);if(!r){var n={audioCtx:this.audioCtx,isSpatial:this.isSpatial,maxDistance:t||0,volume:this.volume,speaker:this.speaker,isHide:this.isHide};r=e instanceof HTMLMediaElement?new c.default(this.logger,{media:e},n):new u.default(this.logger,{streamView:e},n)}return this.vocalSourceMap.set(e,r),r},e.prototype.setStreamVocalRange=function(e,t){var r=e instanceof HTMLMediaElement;if(!r&&!(null==e?void 0:e.v))throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");if(!(0,f.checkNumber)(t))throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");t=Number(t),this.logger.info(_+" ".concat(r?"custom":"stream"," set range: ")+t);var n=this.getVocalSource(e,t);n.setMaxDistance(t),n.checkIfCanPlay(this.rangeListener)},e.prototype.updateStreamPosition=function(e,t){if(!(e instanceof HTMLMediaElement||(null==e?void 0:e.v)))throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");if(!(0,f.checkCoordinate)(t))throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");var r=this.getVocalSource(e);r.setPosition(t),r.checkIfCanPlay(this.rangeListener)},e}();t.default=y},2777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeAudio=void 0;var n=r(3116);t.RangeAudio={type:"RangeAudio",install:function(e){Object.defineProperty(e.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=n.ZegoExpressRangeAudio.getInstance(this,this.logger)),this.rangeAudio},writable:!1})}}},5130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioElPool=void 0;var r=function(){function e(){}return e.generateEls=function(e){if(void 0===e&&(e=30),this.elements.length>=e)this.elements.forEach((function(e){e.dom.play().catch((function(e){}))}));else{var t=Array(e-this.elements.length).fill(0).map((function(e,t){var r=document.createElement("audio");return r.muted=!0,r.setAttribute("autoplay","autoplay"),r.setAttribute("playsInline","playsInline"),r.id="audio"+t,{dom:r,id:t,used:!1}}));this.elements=this.elements.concat(t)}},e.useAudioEl=function(){0===this.elements.length&&this.generateEls();var e=this.elements.find((function(e){return!e.used}));return e&&(e.used=!0),e},e.stopUsingAudioEl=function(e){var t=this.elements[e];t&&(t.dom.onpause=null,t.dom.onerror=null,t.dom.muted=!0,t.used=!1)},e.elements=[],e}();t.AudioElPool=r},2730:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(1297),l=r(5130),c=r(4981);t.RANGE_AUDIO="zc.ra.1";var u=function(e){function r(t,r,n){var o=e.call(this,t,n)||this;return o.logger=t,o.audioTrack=null,o.zegoRTC=n.zegoRTC,o.userID=r.userID,o.teamID=r.teamID,o.sendMode=void 0!==r.sendMode?r.sendMode:a.ZegoRangeAudioMode.World,r.position&&(o.position=r.position),o}return o(r,e),r.prototype.checkTrackChanged=function(){var e;if(this.stream){var r=this.stream.getAudioTracks()[0];r&&r!==this.audioTrack&&(this.logger.info(t.RANGE_AUDIO+" retry play success, render stream."),null===(e=this.sourceNode)||void 0===e||e.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.enableSpatializer(this.isSpatial,!0),this.audioTrack=r)}},r.prototype.startPlayingAudio=function(e){var r,n;return i(this,void 0,void 0,(function(){var o,i,a;return s(this,(function(s){switch(s.label){case 0:if(!this.streamID)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),e&&this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," ")+e),this.isPlaying=!0,o=this,[4,this.zegoRTC.startPlayingStream(this.streamID)];case 2:return o.stream=s.sent(),this.audioTrack=this.stream.getAudioTracks()[0],[3,4];case 3:if(1103049===(i=s.sent()).code)return[2];throw i;case 4:return this.audioEl=this.audioEl||l.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(a=null===(n=this.audioEl)||void 0===n?void 0:n.dom)||(this.logger.error(t.RANGE_AUDIO+" not enough audio elements"),a=document.createElement("audio"),this.audioEl={id:-1,dom:a,used:!0},a.setAttribute("autoplay","autoplay")),a.muted=!0,this.stream&&(this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,6];case 5:s.sent(),s.label=6;case 6:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){this.isPlaying&&this.streamID?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," ")+e),this.zegoRTC.stopPlayingStream(this.streamID),this.isPlaying=!1):this.streamID&&this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," not playing, ")+e),this.stream=void 0,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null);var r=this.audioEl,n=null==r?void 0:r.dom;n&&(n.srcObject=null,n.parentNode&&n.parentNode.removeChild(n));var o=(null==r?void 0:r.id)||-1;r&&o>=0&&(l.AudioElPool.stopUsingAudioEl(o),this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," stop using audio el ").concat(o))),this.audioEl=null,this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null)},r}(c.BaseAudioSource);t.default=u},4981:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioSource=t.calculateDistance=t.isMobile=t.RANGE_AUDIO=void 0;var s=i(r(8047)),a=r(2760),l=r(5694);function c(e,t){if(!t||!e)return null;var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]];return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2))}t.RANGE_AUDIO="zc.ra.5",t.isMobile=function(){return!!navigator.userAgent.toLowerCase().includes("mobile")},t.calculateDistance=c;var u=function(){function e(e,t){this.logger=e,this.userID="base"+(new Date).getTime(),this.isHide=!1,this.distance=null,this.maxDistance=1e3,this.position=null,this.speaker="",this.audioEl=null,this.sourceNode=null,this.isPlaying=!1,this.config={needLoopback:!0,useGain:!0,playOnAudioContext:!1,useWebAudio:!0},this.volume=1,this.gainNode=null,this.isSpatial=!1,this.panner=null,this.audioCtx=t.audioCtx,this.isSpatial=t.isSpatial,this.setMaxDistance("number"==typeof t.maxDistance?t.maxDistance:1e5),this.destNode=this.audioCtx.createMediaStreamDestination(),this.setVolume(t.volume),this.setSpeaker(t.speaker).catch((function(e){})),this.inBackground(t.isHide)}return e.prototype.setPosition=function(e){this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," set position: ")+e),this.position=e,this.panner&&(void 0!==this.panner.positionX?(this.panner.positionX.value=e[1],this.panner.positionY.value=e[2],this.panner.positionZ.value=-e[0]):this.panner.setPosition(e[1],e[2],-e[0]))},e.prototype.getDistanceFromListener=function(e){return this.distance=c(this.position,e.position),this.distance},e.prototype.setMaxDistance=function(e){this.maxDistance=e,this.panner&&(e<10&&(e=10),this.panner.maxDistance=2.6*e)},e.prototype.setVolume=function(e){isNaN(e)||(this.volume=e,this.gainNode&&(this.gainNode.gain.value=this.volume))},e.prototype.setSpeaker=function(e){var r;return n(this,void 0,void 0,(function(){var n,i,s;return o(this,(function(o){switch(o.label){case 0:if("string"!=typeof e)return[2];if(this.speaker=e,!(n=null===(r=this.audioEl)||void 0===r?void 0:r.dom))return[3,10];if(!(i=n.setSinkId))return[3,8];o.label=1;case 1:return o.trys.push([1,6,,7]),this.config.playOnAudioContext?[3,3]:[4,i.call(n,e||"")];case 2:return o.sent(),[3,5];case 3:return[4,i.call(n,"")];case 4:o.sent(),o.label=5;case 5:return this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," set speaker success. id: ").concat(e,".")),[3,7];case 6:throw s=o.sent(),this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," set speaker failed. id: ").concat(e,"  error: ").concat(s,".")),s;case 7:return[3,9];case 8:throw"setting speaker not support.";case 9:return[3,11];case 10:this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," no element for set speaker.")),o.label=11;case 11:return[2]}}))}))},e.prototype.initPanner=function(){if(!this.panner){var e=(0,l.createPanner)(this.audioCtx,this.maxDistance,this.position),t=e.gainNode;this.panner=e.panner,this.gainNode=t,t.gain.value=this.volume}},e.prototype.enableSpatializer=function(e,r,i,l){var c,u,d,h,p;return void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===l&&(l=!0),n(this,void 0,void 0,(function(){var n,f,g,m,v,_,y,b,E,S,C,T,w,R=this;return o(this,(function(o){switch(o.label){case 0:return r||this.isSpatial!==e?(this.isSpatial=e,n=navigator.userAgent.toLowerCase(),f=n.match(/chrome\/(\d*)/),g=f&&n.includes("mobile"),[4,(0,a.getSystemInfo)()]):[2];case 1:return m=o.sent(),v="Windows"===m.platform&&m.majorPlatformVersion>=13,_=this.isHide&&(v||g),y="running"!==this.audioCtx.state,l&&(_||y)&&(this.logger.warn("".concat(t.RANGE_AUDIO," ").concat(this.userID," stop web audio. system: ").concat(m.platform," ").concat(m.majorPlatformVersion)),l=!1),this.config.useWebAudio=l,b=n.includes("safari")&&!n.includes("chrome"),E=n.includes("micromessenger")&&new RegExp(/(iphone|ipad|ipod|ios)/i).test(n),l||this.stream||(i=!0),this.config.playOnAudioContext=i,this.initPanner(),this.isPlaying&&this.sourceNode?(this.lastNode&&this.lastNode.disconnect(),S=this.sourceNode,this.sourceNode.disconnect(),null===(c=this.panner)||void 0===c||c.disconnect(),null===(u=this.gainNode)||void 0===u||u.disconnect(),this.gainNode?(l&&(this.config.useGain&&(S=this.sourceNode.connect(this.gainNode)),this.panner&&e&&(S=S.connect(this.panner))),S.connect(i?this.audioCtx.destination:this.destNode),this.lastNode=S,this.position&&this.setPosition(this.position),this.logger.info(t.RANGE_AUDIO+" play ".concat(e?"3d":"normal"," stream '").concat(this.userID,"' on ").concat(i?"audio ctx":"element")),(C=null===(d=this.audioEl)||void 0===d?void 0:d.dom)?(C.onpause=function(){R.logger.warn(t.RANGE_AUDIO+" ".concat(R.streamID," audio paused"))},C.onerror=function(e){R.logger.warn(t.RANGE_AUDIO+" ".concat(R.streamID," audio error, ").concat(e))},i?(this.stream&&C.srcObject!==this.stream&&(C.srcObject=this.stream,C.muted=!0,C.oncanplay=function(){C.play().then((function(){R.logger.info(t.RANGE_AUDIO+" ".concat(R.userID," ctx autoplay success.")),R.checkPlayStatus()})).catch((function(e){R.logger.warn(t.RANGE_AUDIO+" ".concat(R.userID," ctx autoplay failed."))}))}),[3,6]):[3,2]):[3,6]):[3,6]):[3,6];case 2:return T=this.destNode.stream,(w=this.config.needLoopback&&!E&&!b)&&this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null),l||!this.stream?[3,3]:(this.logger.info("".concat(t.RANGE_AUDIO," ").concat(this.userID," stop audio api")),this.sourceNode.disconnect(),null===(h=this.panner)||void 0===h||h.disconnect(),null===(p=this.gainNode)||void 0===p||p.disconnect(),T=this.stream,[3,5]);case 3:return w&&T?(this.loopbackConn=this.loopbackConn||new s.default(this.streamID||"",this.logger),this.loopbackConn.onError=function(e){R.logger.warn(t.RANGE_AUDIO+" ".concat(R.userID," loopback failed! ").concat(e)),R.enableSpatializer(R.isSpatial,!0,!0)},[4,this.loopbackConn.bindStream(T,this.streamID||void 0)]):[3,5];case 4:return T=o.sent(),[3,5];case 5:C.muted=!0,C.srcObject=T,this.setSpeaker(this.speaker).catch((function(e){})),C.oncanplay=function(){if(C){C.muted=!1;var e=function(e){R.logger.error(t.RANGE_AUDIO+" ".concat(R.userID," autoplay failed. error: ").concat(e)),R.enableSpatializer(R.isSpatial,!0,!0)};C.play().then((function(){(null==C?void 0:C.paused)?e("audio paused"):(R.logger.info(t.RANGE_AUDIO+" ".concat(R.userID," element autoplay success.")),R.checkPlayStatus())})).catch((function(t){e(t)}))}},o.label=6;case 6:return[2]}}))}))},e.prototype.checkPlayStatus=function(){var e=this;setTimeout((function(){var r;if(e.isPlaying){var n=null===(r=e.audioEl)||void 0===r?void 0:r.dom,o=e.audioCtx.state;!n||n.paused||n.muted&&!e.config.playOnAudioContext||"running"!==o?(e.logger.warn("".concat(t.RANGE_AUDIO," ").concat(e.userID," play detection is abnormal. audio ctx:").concat(o,", paused:").concat(null==n?void 0:n.paused,", muted:").concat(null==n?void 0:n.muted)),"running"!==o&&(e.audioCtx.resume(),setTimeout((function(){e.logger.warn("".concat(t.RANGE_AUDIO," ").concat(e.userID," play resume. audio ctx:").concat(o,", paused:").concat(null==n?void 0:n.paused,", muted:").concat(null==n?void 0:n.muted))}),1e3))):e.logger.info("".concat(t.RANGE_AUDIO," ").concat(e.userID," play detection is fine"))}}),2e3)},e.prototype.inBackground=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isHide!==e&&(this.isHide=e,e||this.config.useWebAudio||this.enableSpatializer(this.isSpatial,!0))},e}();t.BaseAudioSource=u},2846:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(5130),l=r(4981);t.RANGE_AUDIO="zc.ra.4";var c=function(e){function r(t,r,n){var o=e.call(this,t,n)||this;return o.logger=t,o.media=r.media,o.position=r.position||null,o.createSource(),o.userID="custom"+(new Date).getTime(),o.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},o}return o(r,e),r.prototype.createSource=function(){var e=this;if((0,l.isMobile)())return this.logger.info("".concat((0,l.isMobile)()," ").concat(this.userID," not create src.")),void(this.enableSpatializer=function(){return i(e,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))});this.media&&(this.logger.info(t.RANGE_AUDIO+" create el source."),this.sourceNode||(this.sourceNode=this.audioCtx.createMediaElementSource(this.media)),null!==this.distance&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"))},r.prototype.startPlayingAudio=function(e){var r,n;return i(this,void 0,void 0,(function(){var o;return s(this,(function(i){switch(i.label){case 0:return this.isPlaying?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(e&&this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(e)),this.isPlaying=!0,(0,l.isMobile)()?(this.media.muted=!1,[2]):(this.audioEl=this.audioEl||a.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(o=null===(n=this.audioEl)||void 0===n?void 0:n.dom)||(this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),o=document.createElement("audio"),this.audioEl={id:-1,dom:o,used:!0},o.setAttribute("autoplay","autoplay")),o.muted=!0,o.setAttribute("autoplay","autoplay"),o.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:i.sent(),i.label=2;case 2:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){if(void 0===e&&(e=""),this.isPlaying&&(this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+e),this.isPlaying=!1),(0,l.isMobile)())this.media.muted=!0;else{this.sourceNode&&this.sourceNode.disconnect();var r=this.audioEl,n=null==r?void 0:r.dom;n&&(n.srcObject=null,n.parentNode&&n.parentNode.removeChild(n));var o=(null==r?void 0:r.id)||-1;r&&o>=0&&(a.AudioElPool.stopUsingAudioEl(o),this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(o))),this.audioEl=null}},r.prototype.checkIfCanPlay=function(e){var t=this.distance=this.getDistanceFromListener(e);null===t||t>this.maxDistance||0===this.maxDistance?this.stopPlayingAudio("out of range. ".concat(t," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},r}(l.BaseAudioSource);t.default=c},1576:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlerListMap={microphoneStateUpdate:[],audioSourceWithinRangeUpdate:[],publishQualityUpdate:[],playQualityUpdate:[],aiDenoiseError:[]}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventHandler=function(e,t){if(!this.handlerListMap[e])return!1;if("function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(t){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(t))}}))},e}();t.default=r},8047:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0,t.RANGE_AUDIO="zc.ra.3";var o=function(){function e(e,t){this.streamID=e,this.logger=t,this.rtcConn=null,this.loopbackConn=null,this.destStream=new MediaStream,this.onError=null}return e.prototype.bindStream=function(e,o){var i,s;return r(this,void 0,void 0,(function(){var r,a,l,c,u,d,h=this;return n(this,(function(n){switch(n.label){case 0:return o&&(this.streamID=o),r=["completed","connected"],this.rtcConn&&this.loopbackConn&&r.includes(this.rtcConn.connectionState)?(a=null===(i=this.rtcConn)||void 0===i?void 0:i.getSenders().find((function(e){var t;return"audio"===(null===(t=e.track)||void 0===t?void 0:t.kind)})),e.getTracks().forEach((function(e){"audio"===e.kind&&(null==a||a.replaceTrack(e))})),[3,10]):[3,1];case 1:this.rtcConn=new RTCPeerConnection,this.loopbackConn=new RTCPeerConnection,l={offerVideo:!0,offerAudio:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1},this.rtcConn.onicecandidateerror=function(e){h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback in ice error: ").concat(JSON.stringify(e)))},this.loopbackConn.onicecandidateerror=function(e){h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback out ice error: ").concat(JSON.stringify(e)))},this.rtcConn.onicecandidate=function(e){var r,n=e.candidate;n&&(h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback add out candidate: ").concat(n)),null===(r=h.loopbackConn)||void 0===r||r.addIceCandidate(new RTCIceCandidate(n)))},this.loopbackConn.onicecandidate=function(e){var r,n=e.candidate;n&&(h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback add in candidate: ").concat(n)),null===(r=h.rtcConn)||void 0===r||r.addIceCandidate(new RTCIceCandidate(n)))},window.setTimeout((function(){h.rtcConn&&h.loopbackConn&&(r.includes(h.rtcConn.iceConnectionState)&&r.includes(h.loopbackConn.iceConnectionState)?h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback connect ok.")):(h.logger.warn(t.RANGE_AUDIO+" ".concat(h.streamID," loopback connect failed. in state: ").concat(h.rtcConn.iceConnectionState,", out state: ").concat(h.loopbackConn.iceConnectionState)),h.close(),h.onError&&h.onError("time out")))}),2e3),this.loopbackConn.ontrack=function(e){var r=e.track;h.logger.info(t.RANGE_AUDIO+" ".concat(h.streamID," loopback receive track")),h.replaceTrack(r)},e.getTracks().find((function(t){var r;if("audio"===t.kind)return null===(r=h.rtcConn)||void 0===r||r.addTrack(t,e),!0})),n.label=2;case 2:return n.trys.push([2,9,,10]),[4,this.rtcConn.createOffer(l)];case 3:return c=n.sent(),[4,this.rtcConn.setLocalDescription(c)];case 4:return n.sent(),[4,this.loopbackConn.setRemoteDescription(c)];case 5:return n.sent(),[4,this.loopbackConn.createAnswer()];case 6:return(u=n.sent()).sdp=null===(s=u.sdp)||void 0===s?void 0:s.replace(/useinbandfec=/,"stereo=1;useinbandfec="),[4,this.loopbackConn.setLocalDescription(u)];case 7:return n.sent(),[4,this.rtcConn.setRemoteDescription(u)];case 8:return n.sent(),this.logger.info(t.RANGE_AUDIO+" ".concat(this.streamID," loopback set sdp completed.")),[3,10];case 9:return d=n.sent(),this.logger.error(t.RANGE_AUDIO+" ".concat(this.streamID," loopback connect failed.").concat(d)),this.close(),this.onError&&this.onError("connect failed"),this.onError=null,[3,10];case 10:return[2,this.destStream]}}))}))},e.prototype.replaceTrack=function(e){var t=this;"audio"===e.kind&&(this.destStream.getTracks().forEach((function(e){t.destStream.removeTrack(e)})),this.destStream.addTrack(e))},e.prototype.close=function(){var e=this,t=this.rtcConn,r=this.loopbackConn;this.destStream.getTracks().forEach((function(t){e.destStream.removeTrack(t)})),null==t||t.close(),null==r||r.close(),this.rtcConn=null,this.loopbackConn=null},e}();t.default=o},1646:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var n=r(1297);t.RANGE_AUDIO="zc.ra.2";var o=function(){function e(e,t){this.logger=e,this.isEnable=!1,this.interval=100,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.userChanged=!1,this.updateUserInterval=1e3,this.updateUserTimer=null,this.audioSourceUpdate=!1,this.maxPlayingQuantity=20,this.allAudioSourceList=[],this.audioSourceWithinRangeList=[],this.localUserList=[],this.rangeListener=t}return e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.setAudioSourceUpdate=function(e){this.audioSourceUpdate=e},e.prototype.setListener=function(e){this.rangeListener=e,this.hasChanged=!0,this.userChanged=!0},e.prototype.setAudioSourceList=function(e){this.audioSourceList=e,this.logger.info("".concat(t.RANGE_AUDIO," set src list: [").concat(e.map((function(e){return e.userID})).join(","),"]")),this.hasChanged=!0},e.prototype.setAllAudioSourceList=function(e){e&&(this.allAudioSourceList=e),this.userChanged=!0},e.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasChanged=!0,this.playAudioTask()},e.prototype.playAudioTask=function(){var e=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout((function(){e.playAudioTask()}),this.interval)},e.prototype.handlePlayAudioTask=function(){var e=this;if(this.isEnable){this.logger.info("".concat(t.RANGE_AUDIO," handler task start"));var r=this.getTeamAudioSourceGroup(),o=r.otherList,i=0;r.teamList.forEach((function(t){i<e.maxPlayingQuantity&&(t.isPlaying||t.startPlayingAudio("play for team"),i++)}));var s=this.rangeListener.recvMode===n.ZegoRangeAudioMode.World;s&&(o.forEach((function(t){t.distance=t.getDistanceFromListener(e.rangeListener)})),o.sort((function(e,t){return null===e.distance?1:null===t.distance||e.distance<t.distance?-1:e.distance>t.distance?1:0}))),o.forEach((function(t){if(s&&i<e.maxPlayingQuantity&&t.sendMode===n.ZegoRangeAudioMode.World&&null!==t.distance&&(null===e.rangeListener.recvRange||t.distance<=e.rangeListener.recvRange))t.isPlaying||t.startPlayingAudio("play for range"),i++;else{var r="stop for mode or range. mode: ".concat(t.sendMode,", range: ").concat(t.distance," > ").concat(e.rangeListener.recvRange);t.stopPlayingAudio(r)}})),this.logger.info(t.RANGE_AUDIO+" playing quantity: ".concat(i,"."))}else this.stopPlayingAudioStream()},e.prototype.startCheckUserInRange=function(){this.logger.info(t.RANGE_AUDIO+" start user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null),this.userChanged=!0,this.userCheckTask()},e.prototype.stopCheckUserInRange=function(){this.logger.info(t.RANGE_AUDIO+" stop user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null)},e.prototype.userCheckTask=function(){var e=this;this.userChanged&&(this.userChanged=!1,this.handleUserCheckTask()),this.updateUserTimer=window.setTimeout((function(){e.userCheckTask()}),this.updateUserInterval)},e.prototype.handleUserCheckTask=function(){var e=this;if(this.audioSourceUpdate){var t=[];this.allAudioSourceList.forEach((function(r){r.distance=r.getDistanceFromListener(e.rangeListener);var n=null!==r.distance&&(null===e.rangeListener.recvRange||r.distance<=e.rangeListener.recvRange),o=!!e.localUserList.find((function(e){return e.userID===r.userID}));n&&o&&t.push({userID:r.userID,position:r.position})})),this.checkAudioSourceListDiff(t,this.audioSourceWithinRangeList)&&this.rangeListener.eventHandler.emit("audioSourceWithinRangeUpdate",t),this.audioSourceWithinRangeList=t}},e.prototype.getTeamAudioSourceGroup=function(){var e=this,t=[],r=[];return this.audioSourceList.forEach((function(n){[n.teamID,e.rangeListener.teamID].includes(void 0)||""===n.teamID||n.teamID!==e.rangeListener.teamID?r.push(n):t.push(n)})),{teamList:t,otherList:r}},e.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach((function(e){e.stopPlayingAudio("stop for all stream")}))},e.prototype.setLocalUserList=function(e){this.localUserList=e,this.userChanged=!0},e.prototype.checkAudioSourceListDiff=function(e,t){for(var r,n=0;n<e.length;n++){r=!1;for(var o=0;o<t.length;o++)if(e[n].userID===t[o].userID){r=!0;break}if(!r)return!0}for(var i=0;i<t.length;i++){r=!1;for(var s=0;s<e.length;s++)if(t[i].userID===e[s].userID){r=!0;break}if(!r)return!0}return!1},e}();t.default=o},5947:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1297),a=r(2730),l=i(r(1576));function c(e){return{0:1,1:2,2:3}[e]}var u=function(){function e(e,t){var r=this;this.recvMode=s.ZegoRangeAudioMode.World,this.sendMode=s.ZegoRangeAudioMode.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.enableMic=!1,this.isPublishing=!1,this.streamID=null,this.isDenoise=!1,this.zegoRTC=t,this.audioCtx=e,this.audioListener=this.audioCtx.listener,this.eventHandler=l.default.getInstance(),this.zegoRTC.on("publisherStateUpdate",(function(e){var t=e.state,n=e.errorCode,o=e.extendedData,i=e.streamID.match(/(.*)_(.*)/);if(3===(null==i?void 0:i.length)){if(r.userID!==i[1])return;"NO_PUBLISH"===t?(r.isPublishing=!1,r.stopPublishingStream()):r.isPublishing=!0,r.eventHandler.emit("microphoneStateUpdate",{NO_PUBLISH:s.ZegoRangeAudioMicrophoneState.Off,PUBLISH_REQUESTING:s.ZegoRangeAudioMicrophoneState.TurningOn,PUBLISHING:s.ZegoRangeAudioMicrophoneState.On}[t],n,o)}}))}return Object.defineProperty(e.prototype,"logger",{get:function(){return this.zegoRTC.logger},enumerable:!1,configurable:!0}),e.getInstance=function(t,r){return e.instance||(e.instance=new e(t,r)),e.instance},e.prototype.updateSelfPosition=function(e,t,r){this.position=e,this.forwardAxis=t,Array.isArray(r)&&(this.upAxis=r),this.updateListenerEffect()},e.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},e.prototype.startPublishingStream=function(){var e=this;this.enableMic?this.logger.warn(a.RANGE_AUDIO+" mic is already enabled"):(this.enableMic=!0,this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioInput:this.micID||void 0,audioBitrate:30}}).then((function(t){return n(e,void 0,void 0,(function(){var e,r,n;return o(this,(function(o){switch(o.label){case 0:if(this.userID)return[3,1];throw this.zegoRTC.destroyStream(t),this.enableMic=!1,Error("Enable mic failed. Please log in room first.");case 1:if(this.audioStream&&this.audioStream!==t&&this.zegoRTC.destroyStream(this.audioStream),this.audioStream=t,!this.isDenoise)return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.zegoRTC.enableAiDenoise(t,this.isDenoise)];case 3:return o.sent(),[3,5];case 4:return e=o.sent(),this.eventHandler.emit("aiDenoiseError",(r=e||{}).errorCode,r.extendedData),[3,5];case 5:n={range_audio_team_id:this.teamID||"",range_audio_mode:c(this.sendMode),r_a_s_flag:1},this.streamID=this.userID+"_"+Date.now(),this.zegoRTC.startPublishingStream(this.streamID,t,{extraInfo:JSON.stringify(n)}),o.label=6;case 6:return[2]}}))}))})).catch((function(t){throw e.audioStream=null,e.enableMic=!1,t})))},e.prototype.stopPublishingStream=function(){this.isPublishing&&this.streamID&&this.zegoRTC.stopPublishingStream(this.streamID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null),this.enableMic=!1},e.prototype.setRecvMode=function(e){this.recvMode=e},e.prototype.setSendMode=function(e){this.sendMode=e,this.updateSteamExtraInfo()},e.prototype.setTeamID=function(e){this.teamID=e,this.updateSteamExtraInfo()},e.prototype.updateSteamExtraInfo=function(){this.streamID&&this.isPublishing&&this.zegoRTC.setStreamExtraInfo(this.streamID,JSON.stringify({range_audio_team_id:this.teamID||"",range_audio_mode:c(this.sendMode),r_a_s_flag:1}))},e.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0,this.streamID=null},e.prototype.enableDenoise=function(e){var t=this;return this.audioStream&&this.zegoRTC.enableAiDenoise(this.audioStream,e).catch((function(e){t.isDenoise=!1;var r=e||{};t.eventHandler.emit("aiDenoiseError",r.errorCode,r.extendedData)})),this.isDenoise=e,!0},e}();t.default=u},3402:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RANGE_AUDIO=void 0;var a=r(5130),l=r(4981);t.RANGE_AUDIO="zc.ra.4";var c=function(e){function r(r,n,o){var i=e.call(this,r,o)||this;return i.logger=r,i.streamView=n.streamView,i.position=n.position||null,i.createSource(),i.userID="stream"+(new Date).getTime(),i.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},i.streamView.on("_trackChanged",(function(e,r){"audio"===e&&(r?i.createSource(!0):i.logger.error("".concat(t.RANGE_AUDIO," ").concat(i.userID," audio track lost")))})),i}return o(r,e),r.prototype.createSource=function(e){var r=this;if(void 0===e&&(e=!1),(0,l.isMobile)())return this.logger.info("".concat(t.RANGE_AUDIO," ").concat(this.userID," not create src.")),this.enableSpatializer=function(){return i(r,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},!1;if(!this.streamView)return!1;if(this.logger.info(t.RANGE_AUDIO+" create el source. trackChanged: "+e),!this.sourceNode||e){var n=this.streamView.v.getAudioElement();if(!n||!n.srcObject)return this.logger.error(t.RANGE_AUDIO+" create el source. trackChanged: "+e),!1;n.muted=!0;var o=n.srcObject;this.sourceNode&&this.sourceNode.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(o),this.enableSpatializer(this.isSpatial,!0)}return null!==this.distance&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"),!0},r.prototype.startPlayingAudio=function(e){var r,n;return i(this,void 0,void 0,(function(){var o;return s(this,(function(i){switch(i.label){case 0:return this.isPlaying?(this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," is already playing")),[2]):(e&&this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," play for ").concat(e)),this.isPlaying=!0,(0,l.isMobile)()?(this.streamView.setAudioMuted(!1),[2]):(this.audioEl=this.audioEl||a.AudioElPool.useAudioEl()||null,this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," start using audio el ").concat(null===(r=this.audioEl)||void 0===r?void 0:r.id)),(o=null===(n=this.audioEl)||void 0===n?void 0:n.dom)||(this.logger.error(t.RANGE_AUDIO+" ".concat(this.userID," not enough audio elements")),o=document.createElement("audio"),this.audioEl={id:-1,dom:o,used:!0},o.setAttribute("autoplay","autoplay")),o.muted=!0,o.setAttribute("autoplay","autoplay"),o.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.enableSpatializer(this.isSpatial,!0)]:[3,2]));case 1:i.sent(),i.label=2;case 2:return"suspended"===this.audioCtx.state&&this.audioCtx.resume(),[2]}}))}))},r.prototype.stopPlayingAudio=function(e){if(void 0===e&&(e=""),this.isPlaying&&(this.logger.info(t.RANGE_AUDIO+" vocal ".concat(this.userID," stop for ")+e),this.isPlaying=!1),(0,l.isMobile)())this.streamView.setAudioMuted(!0);else{this.sourceNode&&this.sourceNode.disconnect();var r=this.audioEl,n=null==r?void 0:r.dom;n&&(n.srcObject=null,n.parentNode&&n.parentNode.removeChild(n));var o=(null==r?void 0:r.id)||-1;r&&o>=0&&(a.AudioElPool.stopUsingAudioEl(o),this.logger.info(t.RANGE_AUDIO+" ".concat(this.userID," stop using audio el ").concat(o))),this.audioEl=null}},r.prototype.checkIfCanPlay=function(e){var t=this.distance=this.getDistanceFromListener(e);null===t||t>this.maxDistance||0===this.maxDistance?this.stopPlayingAudio("out of range. ".concat(t," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},r}(l.BaseAudioSource);t.default=c},5694:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPanner=void 0,t.createPanner=function(e,t,r){var n=r||[0,0,0],o=e.createPanner(),i=e.createGain();return o.panningModel="HRTF",o.distanceModel="linear",o.refDistance=1,o.maxDistance=2.6*t||1,o.rolloffFactor=1,o.coneOuterGain=.4,void 0!==o.positionX?(o.positionX.value=n[1],o.positionY.value=n[2],o.positionZ.value=-n[0]):o.setPosition(n[1],n[2],-n[0]),{panner:o,gainNode:i}}},7803:function(e,t){"use strict";function r(e){return!isNaN(Number(e))&&""!==e&&Number.MAX_SAFE_INTEGER>=Number(e)&&Number(e)>=-Number.MAX_SAFE_INTEGER}Object.defineProperty(t,"__esModule",{value:!0}),t.checkCoordinate=t.checkBoolean=t.checkNumber=void 0,t.checkNumber=r,t.checkBoolean=function(e){return!1},t.checkCoordinate=function(e){if(Array.isArray(e)){for(var t=0;t<3;t++)if(!r(e[t]))return!1;return!0}return!1}},2938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=void 0;var n=r(4243),o=r(1091),i=r(4427),s=function(){function e(e,t,r,n){this.logger=e,this.dataReport=t,this.streamCenter=r,this.stateCenter=n,this.screenShotReady=!1}return e.prototype.publishTarget=function(e){var t=this,r="";switch(e.type){case"addpush":r=i.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event;break;case"delpush":case"clearpush":r=i.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event}var s=this.stateCenter.reporter.createSpan(n.TRACER_LEVEL.H,{key:i.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e.streamID},{key:""},r);return s.setAttributes({url:i.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.url(e.pushUrl)}),new Promise((function(r,n){var a=function(e,r){t.logger.error("zb.pt"+(r||e.message)),t.stateCenter.reporter.setError(s,e,r),n({errorCode:e.code,extendedData:e.message+(r?" "+r:"")})};if(-1==["addpush","delpush","clearpush"].indexOf(e.type))return t.logger.error("zb.sh.pt cdn push type error"),void a(o.errorCodeList.PUBLISHER_CDN_PUSH_ERROR,"type error");if(e.streamID&&"string"==typeof e.streamID)if(e.pushUrl&&"string"==typeof e.pushUrl)if(t.stateCenter.publishStreamList[e.streamID]){var l=t.streamCenter.getRoomByStreamID(e.streamID);l?l.streamHandler._publishTarget(e,(function(e){s.end(),r(e)}),a):a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError)}else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError);else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"push url error");else a(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"stream id type error")}))},e}();t.AdvancedModule=s},4243:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.TRACER_LEVEL=t.PROTO_VERSION=void 0;var n,o=r(1091),i=r(4427);t.PROTO_VERSION="2.22.0",function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(n=t.TRACER_LEVEL||(t.TRACER_LEVEL={})),t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={setStreamExtraInfo:function(e,t){var r=this;return new Promise((function(o,s){var a=r.streamCenter.getRoomByStreamID(e),l=i.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo,c=r.stateCenter.reporter.createSpan(n.H,a?{key:i.ZegoRTCLogEvent.kZMLoginRoom.event,par:null==a?void 0:a.roomID}:{key:i.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},l.event);c.setAttributes({stream_id:l.stream_id(e),stream_extra_info:l.stream_extra_info(t)});var u=function(e,t){r.logger.error("zb.ssei "+t),r.stateCenter.reporter.setError(c,e,t),s({errorCode:e.code,extendedData:e.message+" "+t})};"string"==typeof e&&""!=e?"string"==typeof t&&""!=t?r.RTM.isDisConnect()?u(l.error.kNoLoginError,"not login"):r.stateCenter.publishStreamList[e]?(a=r.streamCenter.getRoomByStreamID(e))?a.streamHandler.setStreamExtraInfo(e,t,(function(e,t){var n,i,a,u;if(0===(null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.err_code)||0===(null==e?void 0:e.errorCode))c.setAttributes({send_seq:l.send_seq(t)}),c.end(),o({errorCode:0===(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.err_code)?null===(a=null==e?void 0:e.body)||void 0===a?void 0:a.err_code:null==e?void 0:e.errorCode});else{var d={errorCode:(null===(u=null==e?void 0:e.body)||void 0===u?void 0:u.err_code)||(null==e?void 0:e.code)};r.stateCenter.reporter.setError(c,d),s(d)}}),u):u(l.error.kNoLoginError,"not login"):u(l.error.kPublishStreamNoFoundError):u(l.error.kParamError,"extraInfo must be string and no empty"):u(l.error.kParamError,"streamID must be string and not empty")}))}},t.streamHandler={_publishTarget:function(e,r,n){var s=this;this.logger.info("zb.sh.ptcall");var a=Math.ceil((new Date).getTime()/1e3),l=e.streamID;this.stateCenter.testEnvironment&&(l="zegotest-"+this.stateCenter.appid+"-"+e.streamID);var c={appid:this.stateCenter.appid,biz_type:0,timestamp:a,seq:this.stateCenter.cdnSeq++,version:1*t.PROTO_VERSION,stream_id:l,pushurl:e.pushUrl};if(this.logger.debug("zb.sh.pt send command"),this.stateCenter.useNetAgent)this.sendBizChannelRequestV2({server:1,location:"/liveroomcmd/push",cmd:e.type},c,(function(t){s.logger.info("zb.sh.pt receive message");var i=t||{},a=i.code,l=i.message;a&&0!=a?(s.logger.error("zb.sh.pt "+e.type+" error code: "+a+" "+l),n(o.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(e.type," ").concat(a," ").concat(l))):(s.logger.info("zb.sh.pt "+e.type+" success"),r&&r({errorCode:0,extendedData:""}))}),(function(t,r,o,a){var l="";a||(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,200===t?(s.logger.info("zb.sh.pt error: "+r),a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError,2001==r?a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==r&&(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),l="cmd: ".concat(e.type,", biz_code: ").concat(r)):l="request media server fail, error: "+t,s.logger.error("zb.sh.pt "+l)),n&&n(a,l)}));else{var u={channel:"media",cmd:e.type,req_body:JSON.stringify(c)};this.sendBizChannelRequest(u,(function(t,a,l){if(s.logger.info("zb.sh.pt receive message"),0!=l.length){var c=JSON.parse(l),u=c.code,d=c.message;u&&0!=u?(s.logger.error("zb.sh.pt "+e.type+" error code: "+u+" "+d),n(o.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: ".concat(e.type," ").concat(u," ").concat(d))):(s.logger.info("zb.sh.pt "+e.type+" success"),r&&r({errorCode:0,extendedData:""}))}else n(i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError)}),(function(t,r,o){s.logger.info("zb.sh.pt error: "+t);var a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError;2001==t?a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==t&&(a=i.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),s.logger.error("zb.sh.pt "),n(a," cmd: ".concat(e.type," ").concat(t," ").concat("","  "))}))}},updateStreamExtraInfo:function(e,r,n,o){this.logger.info("zb.sh.usei call");var i=t.ENUM_STREAM_SUB_CMD.liveUpdate;this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state>=t.ENUM_PUBLISH_STREAM_STATE.update_info?(this.stateCenter.publishStreamList[e].extra_info=r,this.updateStreamInfo(e,i,r,n,o)):this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state===t.ENUM_PUBLISH_STREAM_STATE.tryPublish?(this.stateCenter.publishStreamList[e].extra_info=r,n({errorCode:0})):o(streamExtraInfoKey.error.kUpdateStreamInfoFailError)},setStreamExtraInfo:function(e,t,r,n){this.updateStreamExtraInfo(e,t,r,n)}}},1091:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},6012:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2938),o=r(4243);t.default={type:"StreamCommon",install:function(e,t,r){for(var i in Object.defineProperty(t.prototype,"initStreamCommon",{value:function(){this.streamCommonModule=new n.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),o.zegoWebRTC)Object.defineProperty(e.prototype,i,{value:o.zegoWebRTC[i],writable:!1});for(var i in o.streamHandler)Object.defineProperty(r.prototype,i,{value:o.streamHandler[i],writable:!1})}}},4427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=r(1091),o=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskInitSetting:{event:"/sdk/init"},kZMLoginRoom:{event:"/sdk/login"},kZegoTaskPublishStart:{event:"/sdk/start_publish"},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:n.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:n.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kNoLoginError:n.errorCodeList.NOT_LOGIN,kNoResponseError:n.errorCodeList.PUBLISH_TARGET_NO_RESPONSE,kBizChannelError:n.errorCodeList.BIZ_CHANNEL_ERROR,kInvalidChannelError:n.errorCodeList.INVALID_CHANNEL,kUnknownServerError:n.errorCodeList.UNKNOWN_SERVER_ERROR}},kZegoTaskAddPublishCdnUrl:{event:"/mss/pushadd",error:{kParamError:n.errorCodeList.INPUT_PARAM},stream_id:o,url:o},kZegoTaskRemovePublishCdnUrl:{event:"/mss/pushdel",error:{kParamError:n.errorCodeList.INPUT_PARAM},stream_id:o,url:o},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:n.errorCodeList.INPUT_PARAM,kExtraInfoNullError:n.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:n.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:n.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream_id:o,stream_extra_info:o,room_sid_string:o,room_id:o,send_seq:function(e){return e}}}},3524:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preview=t.zegoWebRTC=void 0;var a=s(r(954)),l=r(3471);t.zegoWebRTC={setBeautyEffect:function(e,t,r,o){var i=this;return void 0===o&&(o=!0),new Promise((function(s,a){var c,u;if(!(e instanceof MediaStream))return i.logger.error("zc.p.0.sbe.0 localStream not found"),void a({errorCode:1100001,extendedData:" localStream no found"});var d=function(e){s(e)},h=i.streamCenter.checkPreview(e);if(!h)return i.logger.error("zc.sbe.0 preview no found"),void d({errorCode:l.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:l.errorCodeList.PUBLISH_NO_PREVIEW.message});var p=(null===(c=h.videoEffect)||void 0===c?void 0:c.stateFlag)||{base:!1,lowLight:!1};if(o)!(t=!!t)&&p.lowLight?r={sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:p.lowLight?1:0}:t&&(r=n({lowlightEnhancement:p.lowLight?1:0},r)),p.base=t;else{var f=r.lowlightEnhancement;r=(null===(u=h.videoEffect)||void 0===u?void 0:u.enabled)||1!==f?{lowlightEnhancement:f}:{sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:f},p.lowLight=1===f}h.setBeautyEffect(p.base||p.lowLight,r,p).then((function(){d({errorCode:0,extendedData:""})})).catch((function(e){a({errorCode:e.errorCode||-1,extendedData:e.extendedData||e.toString()})}))}))},setLowlightEnhance:function(e,t){return this.setBeautyEffect(e,!0,{lowlightEnhancement:t},!1)}},t.preview={setBeautyEffect:function(e,t,r){return o(this,void 0,void 0,(function(){var n,s=this;return i(this,(function(c){switch(c.label){case 0:if(!this.videoTrack)return this.logger.error("zc.p.0.sbe.0 video track no found"),[2];if("undefined"==typeof WebGLRenderingContext)throw{errorCode:(n=l.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT).code,extendedData:n.message};return a.default?this.videoEffect?this.videoTrack===this.videoEffect.input?[3,2]:[4,this.videoEffect.setInput(this.videoTrack)]:[3,4]:[3,7];case 1:c.sent(),c.label=2;case 2:return[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 3:return c.sent(),this.videoEffect.stateFlag=r,[3,6];case 4:return this.videoEffect=new a.default(this.logger,this.videoTrack),this.videoEffect.onError=function(e,t){s.stateCenter.actionListener("beautyEffectError",s.localStream,e.errorCode,e.extendedData,t)},this.videoEffect.onOutputChange=function(e){return o(s,void 0,void 0,(function(){var t,r;return i(this,(function(n){return this.videoTrack&&this.localStream&&(t=this.videoTrack,e&&(t=e),this.localStream.getVideoTracks()[0]!==t&&((r=this.streamCenter.getPublishList(this.localStream)).map((function(e){return e.publisher})).forEach((function(e){e&&e.previewer&&e.replacePublishedTrack(t,!0)})),0===r.length&&this.replacePreviewTrack(t,!!e))),[2]}))}))},[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 5:c.sent(),this.videoEffect.stateFlag=r,c.label=6;case 6:return[3,8];case 7:this.logger.error("zc.p.0.sbe.0 beauty effect module no found"),c.label=8;case 8:return[2]}}))}))}}},3048:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=i(r(8606)),a=i(r(8658)),l=i(r(5934)),c=i(r(8302));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.2";var u=r(3471).errorCodeList.VIDEO_EFFECT_NOT_SUPPORT,d={errorCode:u.code,extendedData:u.message},h=function(){function e(e){this.logger=e,this.gl=null,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5,lowlightEnhancement:0},this.originResolution={width:0,height:0},this.shaderList=[],this.frameBufferList=[],this.outputTextureList=[],this.inputTexture=null,this.failedTimes=0,this.onRenderError=function(e){},this.enableBeauty=!1}return e.prototype.setEnableBeauty=function(e){this.enableBeauty=!!e},e.prototype.handleInitError=function(){this.failedTimes++,this.failedTimes>30&&(this.failedTimes=0,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" get webgl context failed"),this.onRenderError(d))},e.prototype.init=function(e,r,i){return n(this,void 0,void 0,(function(){var n,u,h,p;return o(this,(function(o){switch(o.label){case 0:return void 0!==window.WebGLRenderingContext?(this.canvasEl=i,this.gl=i.getContext("webgl"),this.gl?(this.initGL(e,r),this.inputTexture?[4,(n=new l.default(this.gl,e,r)).setConstUniforms()]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input texture not found"),this.handleInitError(),[2])):(this.handleInitError(),[2])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not support webgl!"),this.onRenderError(d),[2]);case 1:return o.sent(),(u=new s.default(this.gl,e,r)).setConstUniforms(),(h=new a.default(this.gl,e,r)).setConstUniforms(),(p=new c.default(this.gl,e,r)).setConstUniforms(),this.shaderList=[n,u,h,p],this.setEffectConfig(this.effectConfig),[2]}}))}))},e.prototype.render=function(e){return n(this,void 0,void 0,(function(){var r,n,i,s,a=this;return o(this,(function(o){switch(o.label){case 0:return(r=this.gl)&&this.canvasEl&&!r.isContextLost()?[3,4]:this.canvasEl?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" gl lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)]):[3,2];case 1:return o.sent(),[3,3];case 2:this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" canvas lost"),this.onRenderError(d),o.label=3;case 3:return[2];case 4:return this.originResolution.height===e.videoHeight&&this.originResolution.width===e.videoWidth||!(Math.abs(this.originResolution.height-e.videoHeight)>2||Math.abs(this.originResolution.width-e.videoWidth)>2)?[3,7]:0===e.videoHeight||0===e.videoWidth?[2]:(this.canvasEl.width=e.videoWidth,this.canvasEl.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,5]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed to ".concat(e.videoWidth,"x").concat(e.videoHeight,", reset resolution.")),this.resetResolution(e.videoWidth,e.videoHeight),this.shaderList.forEach((function(t){t.resetResolution(e.videoWidth,e.videoHeight)})),[3,7]));case 5:return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)];case 6:o.sent(),o.label=7;case 7:return n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],i=[0,1,2,0,2,3],s=[0,0,1,0,1,1,0,1],r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.inputTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),this.shaderList.forEach((function(e,t){var o=e.program;if(o){e.renderPreTextures&&e.renderPreTextures(n,i,s),r.useProgram(o),e.render();var l=r.getUniformLocation(o,"uTexture"),c=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,new Float32Array(n),r.STATIC_DRAW);var u=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,u),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),r.STATIC_DRAW);var d=r.getAttribLocation(o,"aPosition");r.enableVertexAttribArray(d),r.vertexAttribPointer(d,3,r.FLOAT,!1,0,0);var h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.bufferData(r.ARRAY_BUFFER,new Float32Array(s),r.STATIC_DRAW);var p=r.getAttribLocation(o,"aTexCoordinate");r.enableVertexAttribArray(p),r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0);var f=t===a.shaderList.length-1?null:a.outputTextureList[t];r.bindFramebuffer(r.FRAMEBUFFER,t===a.shaderList.length-1?null:a.frameBufferList[t]),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.activeTexture(r.TEXTURE0),f&&r.bindTexture(r.TEXTURE_2D,f),r.uniform1i(l,0)}})),[2]}}))}))},e.prototype.setEffectConfig=function(e){var t=this;isNaN(e.sharpenIntensity)||(this.effectConfig.sharpenIntensity=e.sharpenIntensity),isNaN(e.whitenIntensity)||(this.effectConfig.whitenIntensity=e.whitenIntensity),isNaN(e.rosyIntensity)||(this.effectConfig.rosyIntensity=e.rosyIntensity),isNaN(e.smoothIntensity)||(this.effectConfig.smoothIntensity=e.smoothIntensity),isNaN(e.lowlightEnhancement)||(this.effectConfig.lowlightEnhancement=e.lowlightEnhancement),this.shaderList.forEach((function(e){e.setEffectConfig(t.effectConfig)}))},e.prototype.release=function(){var e,t=this;this.shaderList.forEach((function(e){var r;e.program&&(null===(r=t.gl)||void 0===r||r.deleteProgram(e.program))})),this.outputTextureList.forEach((function(e){var r;e&&(null===(r=t.gl)||void 0===r||r.deleteTexture(e))})),this.frameBufferList.forEach((function(e){var r;e&&(null===(r=t.gl)||void 0===r||r.deleteFramebuffer(e))})),this.inputTexture&&(null===(e=this.gl)||void 0===e||e.deleteTexture(this.inputTexture)),this.inputTexture=this.gl=null,this.shaderList.forEach((function(e){e.release()})),this.shaderList=[],this.outputTextureList=[],this.frameBufferList=[]},e.prototype.initGL=function(e,r){var n=this.gl;if(!n)return this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" webgl context not found");this.inputTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.inputTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);for(var o=0;4>o;o++){var i=n.createTexture();if(!i)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" create texture failed");n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,r,0,n.RGBA,n.UNSIGNED_BYTE,null);var s=n.createFramebuffer();if(!s)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" create frame buffer failed");n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0),this.outputTextureList.push(i),this.frameBufferList.push(s)}n.viewport(0,0,e,r),this.originResolution.width=e,this.originResolution.height=r},e.prototype.resetResolution=function(e,r){var n=this.gl;if(!n)return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" can not find webgl context");for(var o=0;o<this.outputTextureList.length;o++)n.bindTexture(n.TEXTURE_2D,this.outputTextureList[o]),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,r,0,n.RGBA,n.UNSIGNED_BYTE,null);n.viewport(0,0,e,r),this.originResolution.width=e,this.originResolution.height=r},e}();t.default=h},3471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={VIDEO_EFFECT_NOT_SUPPORT:{code:1103072,message:"not support beauty effect"},VIDEO_TRACK_NOT_READABLE:{code:1103074,message:"video track is not readable"},VIDEO_TRACK_OVERLOAD:{code:1103075,message:"beauty effect overload"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"}}},957:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeautyEffect=void 0;var n=r(3524);t.BeautyEffect={type:"BeautyEffect",install:function(e,t){for(var r in n.preview)Object.defineProperty(t.prototype,r,{value:n.preview[r],writable:!1});for(var r in n.zegoWebRTC)Object.defineProperty(e.prototype,r,{value:n.zegoWebRTC[r],writable:!1})}}},836:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.logger=e,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return e.prototype.startRecordBeautyEffectOutput=function(e){return r(this,void 0,void 0,(function(){var t,r,o,i=this;return n(this,(function(n){switch(n.label){case 0:return t=6,this.recordID?(this.logger.warn("zc.p.0.sbe.3 detector is already recording"),[2,{result:!0}]):(r=(new Date).getTime(),this.recordID=r,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Promise((function(e){window.setTimeout(e,1e3*i.recordingDuration)}))]);case 1:return n.sent(),this.recordID!==r?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,o=this.recordedFrameCount/t,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.logger.warn("zc.p.0.sbe.3 detect effect overload: current fps: "+o),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:o}]):(this.logger.info("zc.p.0.sbe.3 detect effect current fps: "+o),[2,{result:!0}]))}}))}))},e.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},e.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},e}();t.default=o},6976:function(e,t){"use strict";function r(e){for(var t=e,r="",n=0;n<t.length;n++){var o=t.charCodeAt(n),i=o;o>=65&&o<=90&&(i=(o-65-13+26)%26+65),o>=97&&o<=122&&(i=(o-97-13+26)%26+97),r+=String.fromCharCode(i)}return r}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.gl=e,this.width=t,this.height=r,this.type="baseShader",this.program=null,this.program=null}return e.prototype.setEffectConfig=function(e){},e.prototype.setConstUniforms=function(){},e.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height},e.prototype.render=function(){},e.prototype.renderPreTextures=function(e,t,r){},e.prototype.makeProgram=function(e,t){var n=this.gl,o=r(e),i=r(t),s=this.makeShader(o,n.VERTEX_SHADER),a=this.makeShader(i,n.FRAGMENT_SHADER),l=n.createProgram();return n.attachShader(l,s),n.attachShader(l,a),n.linkProgram(l),n.getProgramParameter(l,n.LINK_STATUS),l},e.prototype.release=function(){},e.prototype.makeShader=function(e,t){var r=this.gl,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS),n},e}();t.default=n},8606:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.width=r,o.height=n,o.type="BlurShader",o.blurXProgram=null,o.blurYProgram=null,o.diffProgram=null,o.uIntensity=null,o.smoothIntensity=.5,o.blurTextureList=[],o.blurBufferList=[],o.blurXProgram=o.makeProgram(a.borderBlurVS,a.borderBlurFS),o.setBorderBlurProgram(o.blurXProgram,1/(r||1),0),o.blurYProgram=o.makeProgram(a.borderBlurVS,a.borderBlurFS),o.setBorderBlurProgram(o.blurYProgram,0,1/(n||1)),o.diffProgram=o.makeProgram(a.diffBlurVS,a.diffBlurFS),o.setDiffBlurProgram(o.diffProgram),o.program=o.makeProgram(a.mixBlurVS,a.mixBlurFS),o.initBlurBuffer(),o}return o(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.smoothIntensity)||(this.smoothIntensity=e.smoothIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},t.prototype.initBlurBuffer=function(){var e=this,t=this.gl;this.blurTextureList.forEach((function(t){var r;t&&(null===(r=e.gl)||void 0===r||r.deleteTexture(t))})),this.blurBufferList.forEach((function(t){var r;t&&(null===(r=e.gl)||void 0===r||r.deleteFramebuffer(t))})),this.blurTextureList=[],this.blurBufferList=[];for(var r=0;r<3;r++){var n=t.createTexture();if(!n)return;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var o=t.createFramebuffer();if(!o)return;t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.blurTextureList.push(n),this.blurBufferList.push(o)}},t.prototype.renderPreTextures=function(e,t,r){var n=this,o=this.gl,i=[0,1,0],s=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach((function(a,l){if(a){o.useProgram(a);var c=o.getUniformLocation(a,"uTexture");o.uniform1i(c,i[l]);var u=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,u),o.bufferData(o.ARRAY_BUFFER,new Float32Array(e),o.STATIC_DRAW);var d=o.createBuffer();o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,d),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),o.STATIC_DRAW);var h=o.getAttribLocation(a,"aPosition");o.enableVertexAttribArray(h),o.vertexAttribPointer(h,3,o.FLOAT,!1,0,0);var p=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,p),o.bufferData(o.ARRAY_BUFFER,new Float32Array(r),o.STATIC_DRAW);var f=o.getAttribLocation(a,"aTexCoordinate");o.enableVertexAttribArray(f),o.vertexAttribPointer(f,2,o.FLOAT,!1,0,0),o.bindFramebuffer(o.FRAMEBUFFER,n.blurBufferList[l]),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),o.activeTexture(o.TEXTURE0+s[l]),o.bindTexture(o.TEXTURE_2D,n.blurTextureList[l])}}))},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,r=this.program;if(r){var n=this.gl;n.useProgram(r);var o=n.getUniformLocation(r,"widthOffset");n.uniform1f(o,1/e);var i=n.getUniformLocation(r,"heightOffset");n.uniform1f(i,1/t),this.uIntensity=n.getUniformLocation(r,"blurAlpha"),n.uniform1f(this.uIntensity,this.smoothIntensity);var s=n.getUniformLocation(r,"blurTexture");n.uniform1i(s,1);var a=n.getUniformLocation(r,"blurDiffTexture");n.uniform1i(a,2)}},t.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height},t.prototype.setBorderBlurProgram=function(e,t,r){var n=this.gl;n.useProgram(e);var o=n.getUniformLocation(e,"texBlurWidthOffset");n.uniform1f(o,t);var i=n.getUniformLocation(e,"texBlurHeightOffset");n.uniform1f(i,r)},t.prototype.setDiffBlurProgram=function(e){var t=this.gl;t.useProgram(e);var r=t.getUniformLocation(e,"blurTexture");t.uniform1i(r,1)},t}(s.default);t.default=l},5263:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lightLut=void 0,t.lightLut="\ndata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAM3mlDQ1BJQ0MgUHJvZmlsZQAAWIWlVwdYU8kWnluS0BJ6lRI60gwoXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixvEopYdt/7vnfzzb3/nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKwB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHMzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fwk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMPsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK289/cB5PzcgKkdpgAvFBUXa0/7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxhUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnvLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTIyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qXCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0fD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOghfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt/DRdSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu/N36blSyRmKQBkfWSAWwv8gNG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C/xab0t+kw6gti89fg5Qa1Qazn6Odhten3RNqSU/lb9CTyCYXpU/wBZ8pkrzwF4c9ioMFNjS9tJ6adtoNbQXtPufOWg3aH/S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux/s2j0Ol92BPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6KhbJcMFsmL5Ltdr5MTvBF/YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN9yVZpnBvSPXC/XBXaR/7oi+w/qv1o3cGm+hOtCT6Ey0/04l+xCBiAHw6SOeJ44jBELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRotbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjmg4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+gF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq/hnXgf/pFAJugTbAjuBAZhCiGNMJtQRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5ksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F3lzeXT5cPkU+V365/Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKhoouimGKnIVVygWKa4V/GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8ioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7qI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro/KJxUaNPU01zgmacZo5mheYRzQ4tTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66GbordQ/r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o/Tn6G/Vb9XvNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7jPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM/MyGyyWb7ZbrPb5vLmruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEbx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74+vHPJ9hMYE/YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetGcJvkNt+tye2tu7O72H2/+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etnrw5vY2+md6X3Ax9TnxSfKp/H9LH0dHoN/dkk2iThpEOTXvu6+871Pe6H+QX6Fftd9Ffzj/Uv978fYBKQFrA7oC/QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkkOqQ85EGodagwtHEyOjl48urJd8PMw/hhh8NBOCN8dfi9CMuIWRG/RhIjIyIrIh9FOUTlR7VEq0fPiN4V/SpmUszymDuxVrGS2OY45bikuOq41/F+8aviO6aMmzJ3yoUEvQRuQn0iKTEusSqxf6r/1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTHJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfjzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq/Ez+KeyDLNysq4IbARFgo5Z7rPWzuoThgirRIhomqherAH/YLZKrCQ/SDqzvbIrst/Mjpt9IEc1h5/TmmuduyT3cV5A3vY5+BzWnOZ84/yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3AlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb/4R/5H748Ul45esX/KxOKX4fAmtpLTk/VLW0vM/OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1a6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXGlI1XN/lsqt1ssLlk87ufuT/f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVhB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95X/v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO/2v+6o8m4qeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS/WXXK5VH/Z7XLjlYlXjl71vnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB/Igvvqdyr/S+/v3K38f+vqfDueNIp19n64PoB3cesh4+/UP0x/uuwkfkR6WPjR5Xdzt2N/UE9Fx+MvVJ11PB04Heoj9V/9zwzOrZwb98/mrtm9LX9Vz4/NPfS1/ovtjxcsLL5v6I/vuvMl8NvC5+o/tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e/ZT56dN/AC1d8Bx8dIG+AAAAHGlET1QAAAACAAAAAAAAAIAAAAAoAAAAgAAAAIAAAB7VdMrVpAAAHqFJREFUeAHsnHmsnmWZxj9nnBlFUUFcx1FxQ0GsuCG77IsKLavKDrJoQYggIOBgpBQKjYBsEWgxhQoGaiUUSmgpDdghyBIEQpGwhqWhQKCEAoE231zXdd/P897Pu3zntD2HZDJ+f7SHAn/4y7Xdz0fs9f75+SeBfxL4f0zgHb13vvNfm59/WcXPO/7vfHrvfve73vWu/7DPv+fPv9nnna2fJrBBf7KKLEf7X++9D5/V38vPe96z2mqrvds+gJKoiE0m4z84IP3WCqn8w0GAVvDvjTSQ3ofWWuuDa665xhprfOAD73+/aBgO8BCRhERKqWEhmzqaFkLEVAIZxl+tIJeV/sd7n/jPj3/sox/9yIc/BBKOQiwE432r4yN5UCBOpEICtVAq/JiHyl872NgfRw2ln4fBZdA/slIQep9Ze+1PffK/PmEcPvqRRMJUQV1AGAYDVqlwOBC6pjKO+ydTacUiSAPZdBMSqUEMVvzv9db94jpf+PxngeHTzoGCIAjTxFofBAo6RCYJMEQjqcMipNJIzpKEJGilQy5ZPMNg4/9IEk7778Nk0dtgzFfWXw8U1vn85xIG6gHGIIhAIqKgMAgjScPEkd0i0whHck1TJYZG9km/ZAZdPwyfzbAQCVxv4w2/+fWvfXXMV7683pdA4QsJg+RAYxQgmBOMiiALuaSE0YZDLWNMZBr9EvQRf0xA/PcuHOWfrzAc/xd6W26+6cYbbfjNbxDC+hUFqQGuYDxIEBmEzFGRoEPcIsZCMCppsGXt42Gaf0sSsbIxLJFD7ecalu58KcHwrwbB6e24/TZbbbHZJgZhgzGksC61YGJANiAcIIfAQdaQNxATToKiKFBEGAWNhCPGhzGpgHi0DsmkKqFAp/m/f+Cf9Hbd5Xs7br/tVt/ZfNNNNv42lbDBV8eMgRRAwSyBaBAGycE5yBkJBCRBEhFFGwtTRogNjo5uHMEzJFP5Bj/VtNH4y4Aj/9hFofejvXYftzMZbL3lFptturEgMBRkiHW/pGBAMlQYaAtxYFIyIgwEJFEjIVUIRbaIVYkHaMxQwahwNOUhkQSNlESGZgJImUXxQ++g/ff54Z67jd35ezttv+02EALdQCV8XVJgLBgFWAIBmdUAW1Qc6iDqJAKKyEJd0k0jq6Nsl5whaYokLIVIhqETE05v/GEHH7Dvj/baY1cy2GG7bbbacgu6oYAQKEgMhmHtTzMdmhxcES6Jwh7WIJYWVXSmkZG6tehX10ZQRyePOpG6Slqt0zv2qPGHH3IgZLDX7onB1ltCCHADIHyLSmAqQApZCxJDUoMwSA7mCxjDBRFAUBJ1ElEWhS48P21oEEYZonW3DODRINJAstpqvZNPOPaoI35yKGSw9w/23H3cLtLBtltv9R0JQRCSH5yCxeM6X6AnMoYODoyIBIKSqEikzPRd4SUSKlW6SC4ZgkZwy0AeTSLv6U38NRAcfeRPDv3xgfvtAyvsNm6X78MLDAQJYRNTgkGgFEwLTqGJIdnC9eCCaIBoJ2GqSBap6aIFRqs2CrcMweO97+2dPek0IPjF0Uf+9LBDDoIMfpgY7Lj9dttICJshErISFI2QAmJhvXU9Hp1CVAMwWDwEDnRGAUKSCCSiKGoo6iwqGKldO5xCw/gQa59jvYt+99szJpwCBD//2fjDDz2YMoAVdpUOwABm2DK7AZkAJbAfIIVIgcMpi8EjEguKKVlyoCCaIAaSSCisUBseyc0aI3QAjRLH6qv3pl1y4bmTMwI44aD9KQMwGEsv7LjDdttug1TcArEoIQhCikYaImshU1A0AAP3U8LQwaFUhIEwTWhb5XXFpMCHexMfULCP5UT8lRj8w/j0D3XQ8eldfcXUi88/56zTTz3lJKjgqCPghIMPgAxohcQAgWBCqEFIUlAsmCNEQWIoMVRywHzwIaUjwwRRAzEkiYRiEItgk+CTeqf0Zv35ymlTLjrv7DMnEsFxxxx15E/phP33pRWcwXd33CGbYbNNKyWYH9iSY2SIlAsc0bSEegLRkNVADG6LBofsjKo2dI7n7nBNFElRqWKgLnKzShxJF/q9N2/2X66eftklF/7ut5MmnvrfJ/3yuGOOPnI8nXDAfmaF3cbRC8YgCgG5SDskCEoFGsIp6JTowOByoC0KDjkhJIgWEIU76v7IDqlk0chOuSV5RL/3bp9/06wZV14+9ffnnzt50mm/MQQ/G/8TOOHA/c0KuzuDnRiKxsAjwSAgGREKNpgghUyBJWGWSJ4o1JDk0M5BgmiCcHM4iQ5RVCiGYrHGGr2//+22uTdABH+49KLzzjnrDENw7NE/OwJOMBn86Ad77YFakA4QihnC5pspEgIErUYzREkhJQM8gWhwDJaRSknaoslBgugC0U6i7o+AooNF75H771ow78brZlx1+VT44OyMgHl4+KEmg71/qDgYN3ZneCEwUDcwEgoIlEJBQfEYxDAkhtIXxsFAtEiig0QTRQ7OEBdrrtl75tEH7759/pzrZ179x2lTfn/Bub898/QJNMLxx/78KITBYYdABkxENCMisWRg1cCCDBAUCgGCayFRiGJoqqGwhTikJeWV4aUxAERyR7JHC4mA4oO9l559bOG9d9x282yI4IrLLr3ofCH4NRGgFY8cTycoDfaGFfbcvWRgiUAh1CFwLwUK61s6lhSsJ0iBpqiqwlyRbVHnEJxhy7JIy9wcfnf4EcYXmzYUa/XefHnREw/dd+eCW26SCKZefOF550yeNHGCIThGYYBAdBkwDgIDDwSORcai3CA7qB4KCApHdQQoKB49H5sYUjhkOSge2jm4M9oUwSdt++gWTfdoDUWv/+aS5558+P67b7917uxrZ1w1/Q/wAaIAnVghgBMQiCiFffeWFchgF+ZBCgRVA4SQIGzEitzwW6oHKCFLoU4BwZBrgqshqiFjGIJDEREOIh+g0AM/3SQ+1Ov333pl8VOPPHjPHbfNu3HWzKuvvPyyS+ADpGGFgGHAQJQMZAXqYCwZpFCkGVwIyQ0JAkvS/eDZiFgIWqgouBi6McgWQQ8hIPh0nQ4NP7rCJW4cWkh8GAD6y159/ulHF/4dNphzw7Uz/jR92hT4AFFwxmmuAuYhOoGBeCD2ERIRcWDVuPP3vRjUjkhFc0MHhCiFJoXSE+0YJIdhcCitUVdEReIjBNBftvSFZx5/6L67br/1ZokAYfj7CxAFhuDkE084DgiwDOgEymC/fWCFFAe77OzlqEAwISQ3qBwKJUQpwBCqCGxH5gKCoRQDPVFgKF1hGLr04IKogWiSEID+8qUvPvvEw/ffc8df591EEfxx2tRLLkIUTD7zdKrAECAP5QSXQbYCJpIz0EqCGYIQvCEzhOwH3wpcjpmCxSMpBDEMwBDkEDkUxhgKhAHoL3/tpUVPPvLgvXcumD939qyZ11x5xR+mXMwomDypQoBKYC0mGWQrsBacgVYS9nISggqyhMDzAaFQSCGFIw+JJgVGQ4GBjVmpIbSmzUk7MKqTExMiJUSaESksP/YxB9Dvv/7yc08hCO66/bZ5N11PEVwOHzAKzgKC35wiFfzimKMZBnACAvFA7iNZAXEgBiqGncgAgRCEwJXgDSklsB4AwaMRUlA2mhQQjoFCmxiyKYQhcOClqVvTZ3UrhySIZI2PZwD915csfvqxh+6/+46/3jJn9nUzr7lqOnzAKACCiRMyAoYBnIBAVBq0MWA5IhAKIaggGQkbbwQI1pEJAqKxNESg4MGQLJHF0InBbBHzwQZE6YtKERWA/htLnn/m8X88cO/fFiALJQLzwe/OQSEkBMf/4hggMCeYDDwR99wj6gAMGAhioETQUqIQ6hCSH1QQJoWGFkgh5KOeGuSJ4WGwfHAOdRABQP/NV15AFD4oG8y5wURw2aUXX3g+0zAgOPbnCAM4AdOgLoPKCxwIwQzej+YGh+DJWPnBpDAEhUIMNQx1VxRyaOcQAfTffPXFRU8+uvA+2GD+XIjgz1cjDOEDREFAgCMBCBAGdAJ7EWmAcZDjIOcBGAQzZCEMgpBmo0MoteDxGIPBxFBh0FHRwFBw4CsMPnyY46cA0H9r6UvPPYUguOdv/3MrCpEiQBhOQSUqDZMKfnn8ccciDxEG7IQgA19Iu7UxUCpSCHRDE4KSMfghZ6MXZcqFtBiGiSGEpGMo4uGTnywBiMDTDAK0wS1zb5xFEUyfBh9cdD6igIVgcSgEFgYeiEEGXIm77cpuRC9wKFZm8I2QGeRMqOrBotGkUFHAWrDpqI5op1AmpJ2YpoaIoeTwqRqA/rLXXl78zOMIgrvvWDD/ZongT380HzQQIA8ZBnICZRAY7FljkALB67EmhJgJUEIKhToEGqKNwkAxBFMUGBKHOgAQWPL8s088spA2uG3enNkUwVXTkw/OnkwVnMpSPOmXJxxHBAwDTYMKgcdBqQMxUDNwJ/F0KtzQhNAuhUSBlsBqkhZSS+QB2YgGw9Aih7UbAPrLX1/yAqLwoQfuvfP2v5oIMIuumDYVPkAUMA0jAuYhw4CBWMhAB1OdgUIx12NmECIBOyENBSihgFAZIlLIGLwrAwV5IiRkG4YmgP7yN155cdFTj/1DNri1EoH6AD4oEaASmId1J1gr6GiMeVAFAs1QE0KeCRlCSkZO58oQoSLoiEY8yhK5LQer4TMtAPr9N1598bmnH3944X20AbIQdTDjTwzDKahERQFmQTYCETAPmzKQFRiJmYG9IDAU62ao52KEMEAKrVposYSJoamGz7YCwCB4afEzTzzy0P1mAyUBGhFhKB+wECoEJ55wPFoxhUHlBBsHakZjME69IAYeCDRDIQQvSC+HvJstGd0PTSl0U2gVQ8TwuXYA/TeXvvz8s08++o8H2Aa3QgTXQwRoxMsdwblnoxOzCohAeZidkNNAVmAcsBYwD8aNtcORz2k5EDIDj0VFQjcEuyU5G5kK0RCFI3JX1ilENXy+A0D/rddAgEFAGzALWQfXMAzNB0zDiADDQPuw5gTbiLQC46BgoCdFM0NNCO4GRYLKoVBC5QeXQshGSaFJQZbowNAFAARQBk8hCGiDBchCEwEakSJQFKgTJ06wUjxRCMow8GLUTqYVhsfAu0FuKCFYPVR+cCn4CZGksEIU1ukE0F/2+iuIQgTBA3+/i1mIVSQRVD5AFEw+c9LphuBXJ53IYaAwKGWgfUQrtDPwYuAjAgKhxQ0DIJSpEA2RY0EdkavStBDF0A1ABBCFj7IPOQmyCNwHXAUNBKoEq0WfBiYDJiLvpVYdWCCwGYIZJAS5IUVCtkOhhAChHgstFKrhZBS+OAAABgHK4NknH3sYQXCXsrAQASuRCFAIUQVeCUkFPo8oA1rB40C1UGUin9ftZMgMfCMoFuGGARA8FMJWKKQwmMKXBgEgAUahgoA2mH/znNnXX/eXGVejEaddxkrEKmAhVAhOhhGYhzaO8jSQDJiIbgWrhdwLOpoKBl6PvpghhBQJKIe6EjwUBkmhk8K6AwH0WYcvLHr6cQYBbXDrPKyiWdfOvAazSH2AdaxtSASnKQ5/lRFwI6d1pJWsaylaIepAr6rOIJhBQijcgEioQ8ALW4CQpNAwRBuF9YYAAAJLXkAUIghkA2ShRIBGtDCEDy44j/MYnZgR4E6SCjICOxSiDEIcBB3weu4UQnBDN4SaHzKEXBE1Cl8eCgDr8MXnnkEQoA/v5iRwEVQ+8CgoEWgbpUpwJ2QZZCukSNRU5kaiDgoGnoqFECwSBkOgH7qlUFFYf0gAIPDKi4sRBG4D7EKsIiSBiYC7iFHghYBxOOHUX5/y3786Ga3oKshO0EqmDDwRrRl9HnQxiPWoRIAQLBKQi3UIXg9dfijDURS+MjQA1uFLz2MTPWI2QBaiEJkEEgF2EU4kRgHSELOgQFA6wXqRKxlp4ImodaBI9JOppoM8FZWKSQgGQd3gDKpgDBDoh1YpVIYYMwwAIIAyWMQgkA2QhbfMzSKwPrAoUCEYAjyZSAURgTmBvegyMCsoDjoZ5HasdhKEkGKxcEMJwZOxAaEWC8MB0F/2BsrAgoBtcMcCFmISAcPwsilcx0pDdCLGYWoEzsOch9YJCsRKBtYKvpD8XLCbyfMgh6LMkITQ5YYmhOiHIhVkiK8OCwAGwVJFIYOAbaAsTCLAKJAPPApQCB0IPAzohLoMqjhoMsihqHasC6ElEhyCvyhQCYTQLoUNhgegv/xNlAGjEH3INsB5hEJ0EdgomHqpogBpSAQYhw0VHGO1KCcwECEDvqRqI2ok6mjU5cxqzDrIxeCBAAZBCNENVS4OASFL4WvDBIBJ9BqjEEGAPnQbzEtJgGVY+QBpiAuhDUG6lLSO6ARLg8QAt4LHQZ1BLkcPhGQGXU6WCIUQymBsU0KOxq8PGwDrkASwCGQDTIJKBJhFCEP2AXyAKGAhcBkVKshhoIHIZ9RKBihGJaKswMcDXc5BByWDwgyohmFBYD00/PCN4QPov4UyYBQiCB68TzZAIboI0IgIQ94HtgqwDRsIqjxUGNAJTRm4FfSAwjjIDPJIUijKDEEIsR+LlcDVHOzQgPDNFQCgOnzhOQUBbHDPncjCLALMIoUh+sCiQAgwC0wFaRuZCiwM6AQPREsDyUCt4OuAVhiSQUrFuhCqhqxOBz4t6dU9K+FbKwKAdcgoVBCwDSwLTQSYRQpD+ECVyG3IO7EVgW1k1qI7IaSBWyHEQZOBikGBkMyAVEQi1CFgKnkudkHYcIUAGAEFgdkAj2W0geoA21hhCB9YFDAN1YktKrA8ZBi4E3Ip5FYIcRB0kIdiwaA0gydClYsDIHx7xQCwDhmFDAL0YWUDbYKZMxSG2EWqRKWhCqFFBXo8Uy26E0IplFawSGwyUDkWgWD1WBdCFQksh7oSNlpBAEYAUchFsNBtoCzkJpAI+FJgPuCNZIXQYgTbh0TgTrB5pDRQMWYrcCWyFoZgADM0hYCR4ELwSKhD2HhFAeA/LGUZYBNhEaAP78Uy9izEiYgDiWGoPoAPeCPxsYCzoKGCKg/dCdaLKQ2CFRiJQzFIgQAGLUIYAGHFAYjAi4u5CBAEsAGzMIiAYchx7JUIBEzDFgR2JTAPWYsWiE0Z6BUtIKjrQAMhBUJqx4JBNRLcDYyEpIRNVgIACKAMPAgWPuAEVIgSARtRPrBKvJCXcisCGwbMQ3eCBWJKAz0c5IEUGOxRdaMysc7AzFBAwP1YuiFDWBkAKoOXnlcQRBtwFd0wC08lEoH5AJVoUeAITp+odei7QAhSHkYnpFLQ4wnfk/moPgwGKRTrDKp+DG4QhJUCAAIoA26iJzCMgw1wH7kIuAyTDywKpAKLAp5JhkDnsvKQ46h0gtIgy6CbgR9N0EEqBgRCNEOxEVwIdANzcfOVA9BfhjpkFDII0Aa0gbIwicDDEH1AH/BAYCGETkwI+HR2wvFE4GFg0yAFot5OKINohSIStZXFQGO5ZNAhhAhhJQGwDl99WVFofag2YBYGESgMVYlYx0IQo6BAwErwMDAn2KHgB6O/odWskKuxySCEYsWgEkJYSt9ZWQAg8PqrikIsgsoGPA48CSQC94EqsZGGbQiiE1plULOCz4NWBggEM0MFwQazJwKFsOVKA+AgWLpEUfgEbIAgsElg03j29ZxFCEOMAvqAV2KZhtrHjkCvh2xF5qHVYnKCetHTIFlhGAxSMbQwKIWw1SoA6L/1xlJFoQcBRxEnQSEChCFGgfmAz4aKgjALWhDkMEjTQL3INKgnYqgFzYNCB10MqnqkELZeFQCsQ0bhoqefDDbALtR95CKwUcBdpEO5C4HekEMehk6QE0IaWCIGGfhKbGUQQxHNUJnBhbDNKgFQHTIKeRooCFIW3nLzHNsEM3EjIgzNBykKWAgNFUQEpRMUiEEGLVYYggFCsW4GF8K2qwaAdYgy4CZiEOA6uvduLmNkIY/kIILgg9SJrQjYil4JKQzkhAEyyAtJtVDoIA1F6KDOwI+G7VYRgJUBohCLABeyjyJMgtvmJxFcOzOFofsAaZijIJ8IlgVUgSOwZZCcoMcjPSLyMZlpUJOBx4FXI55QUh50MXAzbL+qAPrLVQbaRMEGysIsAjQiwxDjWFHAPsgIzkqHohDo+yQg8EqwM0EXsx6PiIBp4Ecz0oADKceBLyRVY8kgjSTXQdWOO6wyABFAGTAIkg14ICoLlQS8kiUCjgKfhgWCM/1Wzgg4D20fhjBwJ3gvNmTgx8JABraWCzPsuOoAMAhYBopCEdBtgFcCFmIlghSGfDrmOi4RTLLnggEIdCfUZNCwgseBIrFdB3UGO40EAJaBopBBoDbwScBCTCLALGIjZh8MA4HlYQgDrSM+JbfJIFtBcTBcBt8dEQAqA65CI6A2sPOIWTj3JtbBdX9RI+pIVBRkArkTSxVwHpYI9HymZ1QiSGlQyMDjoIrEoXTwvZEBAAK4DGIQ4KUIj2UsxFIECkNEQc0HaRbkgcxrOSJIYZCdkHsxp0EeSDEOUjU2MtG98P0RAsA65C72KOQosklghViJgOdBuw98FtQRlHmoWvT3sw4ZuBUUB4rEgQx2HikAVgbcRB4EHEX33JWyMCcBG1EXkldiNgK3ob0cDkCgWsxO8IVovQgnhHEQrYA46Gawy4gBAAGVgRPgLJQNuAtDErARLQxDJYZZoGUUEfg2UisqDzUQgxNa0sDHgaxQRCJmor5mwnfveEPBRho7duQAsA5fi0GQbJALEdcBr2QPw3ofpDvRxiG/UmQpIguAoMxDPaJyHeVpkAMxJKKsUMVBqoUag3EjCUB1mKJQffjAfXgsy1noSSAR2IVU94EXgsZhJwLlod7SiYDToJEGeSfLCikO2hjsOqIAqjLIfeg2QBZqFWUReBjKB8UwsjtxAAI9nnkY5JFcIMgykBUKBooDVGPWwW4jC4AEuAotCHAfBhuoECkCvJzztYhhGPug2obqxIiAT8jJCI0wGEoGlRUQB6kWMoPdRxiA1aEI6DRAH9IGfCpSIWIaVyKwC6kQQTqS1Ik8EdwIQGDDILWi52GXE8pxUDVjikTUgjMYaQAsgyoKEQRqA74SKAuxirIIrBEhggLBBedbGg5GoPfDHAYxEItS8GJsWsGqkQxGHEAkwNMAfchR5FmIQkwi4DZ2HxiBEAX2ZMRZ0KkCRxDCoBGILgNPxGSFEInUwcgDyAQUBLgPow10IQYR2JkcRZCiQIXQjUBXgudhqMXcCfVi1E5ODPbmt2yIA+pgFADg/5YnRyGDAPchR5FsoOMA95ElgR4KPAyjD2wYZQS8lWtZkIaBXtL5lM4wMCdkBnw6ye9HkkFhBWcwKgAyAZ4GNRtYIZoI8FSSfYAkiKvA0lCdyGXUgcAroRYGGUGXDFIzksHoADACtokQBOpDbwNkIQpRIrgRwzA2oosgPZfYqxk7sQVB1Yo5DEonhHnkMlAiFlZAHOw9SgByECzmcRRtoF3IVdQUQYgCv5FUCG0I0jBQK+rLVX672uqEUgaFFTCU9xktAIkANxGCQH2oNtAkQBYWIvA3QxAIUWCPZiyEtIyiERoIwjIIYZAnYpsMYIV9Rw2AEdAqTEHgowiTwC5EPpdhGNqBlJahCKTnEqWhOpGzwLKA/4XFhFPTnaR3dK8EfsFc1WKxEF0GVTEmK+w3egD6y70M+EpCG6AP1QaaBHwy5SoCAkuCPAryLrKXU6UhC2EIBDkPW53g80gy0KmQrLD/KAJIdYh3IgSB+tBHEWzALOQqSiIoGjH7wKJAaegPJgNUoK+UTAVFGNRLQTJIiXjAqAJQGfCJIAUBryO0ASYBspCFOEAE9nXqxTaMmIYVgjPwYjLxNPyHNjKCjgQNAyKoL4PghDYZHDi6APrL7DJAFCoIog1wHqkQgwjyKEh9YOtYaTgMBLkSWmQwPj0bxDSADA4aZQBVFHoQ8DpCG+BA9CxMIuDLeTWLQh8oCnIaohB8H7epoBtBPhRqMjh4tAGIAJ8IEIUMAl5H0QYqxE4R2HeJlygKmIapE+1KqiHQNjoJ3yU087Dei5UMfjzqAECAlwFXIRcBZ6HaAAdiykKtIjViEAEfS0IlKgqYhj4LhkKQxlGtEzwQKxkcMvoArAwsClMQRBuoEGMdhCRIlah1zChwBOzEOgK9mejbFFOB5WFtILoTfB7xWno7ALAM8EiCd6IqCGADHIiYBMpCm8bVLCpGgfkgR4GpYKUQZCfoUJAMDntbAIAAnolqQYBR5DawQmwVgfvAKpFRwDT0QhikgqIVXQX5Yo4yOPztAZCiMAaB2cAnga8iDkNu46IP3AeqREaBp6GNw6YRdCTwqwQ6wYeBNnJeRz4NTAZvEwASsCjkIrD7kG3gNtBxgPuIz2UFAXs5Tk8FjIISATtR72ZVI/iXKQlBZlBdi+4EBeJP3y4AVgaIwhQE6kO3ASdBWkV1BHg7jz5gFHgaeieuKILSCePfNgB2G3kUahGoDzmKaAM7DhoiSM+m00MlehRUnZgOxVIFvpAblVA64Yj/BQAA//8grTFYAAAMPUlEQVTlm+eOVdcShP3CDAjDAIYBRLZBZGyBSQIHrOsoRzleXSfZBJFEEthYDCCSfEGEEUHH3dVh9Vp7nwH5x5wd5g2m1PVVda99XhrM3N/Tx48e3r/3/zu3b964dvXKX3/+cenC+XNnTp86cfzY0cO///brLz//+L///vD9d99+8/VXX37x+WeffvLxRx9+8P5/3nvv0LvvvP3WwYMH9u/bu3fP7jff3LXzjTde37F9+7atW7ds3rxp48YN69e/9uqr69atXbNm9epVK1euWLF8+bJlS5dOLFmyePErryxatHDhggXj4/Pnz5837+WX586dM2f27NljY7NmzXpp5v7/weDp4ylW4O/bt25cvzr51+U/Ll08f+7s6VMnTxw7euTw76TATyxBVEAlOPQuJDjAEuwhCXaRBK9PI8GqJMGES6AaiATQYGxsbEYFGDx9MvXwwb27qsCVy39eunjh3Nkzp0/SEJACNARQoDIENAU8BDQFB/azBLtJgp0iwbZtW7ds2bypMgWZBK6BjAFLYGMwswIMnj2ZesQK3Ll18/q1SbbBxWSDI7BBPgTJB4eSD4IEO3Zsdwk25EaYXgJ1wpwZFoAUePzowf27DoLSBr/9KjYohgAoiD4IKPh3EigM5s60AINnjkIFQbSBspCHwBQIMCx8oCggGk4nwUrDYcZDABFOmHEBWIGEQrLBZbfBSUqDwEKTQOJA8kB8wCjYpz4oaLhpY8UIdRI4D+fNvAASBg4Cz0OkwXFWgAPxpx89EFMiciQSCWIkJhpaJkKC10IoSioiFHUKYiyOQgAOA0GhNgIGgacBSSAKFJ0gKwWcB6EVVDJxw/qqBFwMJiYyJ4yPj49EAAkDRSE1gmgDqQR5K0q1SGCIPLBITMUIKLBmNEwC0iCWowWjEQBh4J1I8pBrodjAemHZCbQZ5j5IKAg0RDl8IQkWjkgADwNpBAQCtwGaMUgQAjF141COgw+8G4ZAYBzWGyFMwaJRCSBhoCik1YCKMechdgPqhYmFGQm0FgGG0QfaCgwFWTms4FCWBOPhyATwMEAnUhDABmdoN0Ag5iz0IZD1IMsD8oGgwCSgJSn14+kkWDxCASQMgELqRAoCSYNkA92PvBPojpiWRPVBgQJk4otIsGSUAiAMFIW0GjAIog10PUok8C1ZEpFhaD7QSBQUGA0RCLolDZuCiZEKkMKAliMFAbajs26DtB/ZEGg3BgyjD9KtAMeClIlaDuslWDpaAQIKqRMxCPhMwkcCupNoM85IYEMgiejHEvKBtuOAgheSYNmIBXAFCIUKAuShpQGWg0wCZqEMAWCIUqCnAlkQggR0MkIg8LkAK0J1CpaPWgAKA+7FhEK6kjAIOA/VBriTVAJRh0AS0WFI+4FWQzmX4GiGk5FKQGczPheUEqwYvQCqAF3KFARcjN0GfipiFqZOIAsSYGilQFckQUGgoQaClsNSgpUNEMBQSHciA8FzbBCHwGFY6wMEwnQSrGqCAKIAtUIFQcpDZqGUIk+DYkv2IdA9WbbEvBgpDbUW5EZY3QgBFIUFCKINShLo5Ry1yGGYTgXBB+iGwyVY0wwBoICjkBuB5KHvBlka2BDIloxEZBhyKRAfyO24SkNvRjYFa9eubYgApADCgFHIIOBirLUQlUCvBDEQyyGwUiB5ECIxBkJFgnVNEUDikHoxo5AbAUCAtyNRQO6FroA+IKUhYBhqOfY8CChQGnot8FBsjgAZCtEIJA+rNvDtQIYAtYhhONQHeEUZIkGDBGAF6OFIUSgg0Dx87hBwLWIYqg8IBdyL4ANDgdLQM5G3JGJBkwSwMNBOpCCot4Gdy6pDkHxgEtCtAMUoDwR5TtvQKAEsDBIIUIxxKbJz4ZHDdjenXigkkFNJGIJqHmBBUBp6JkKCZgkgYcAo5E4kIMB+yAdTXhCzVqSP6RgCdGNORIVhXSQqCnRD4JsRSdAwATgM6CsCboW8HMmGzLtBqUARBxgCrkUBhtKLzAdAQU5DSNA4ATQMGIW8HHke8sH0+UMQfMCfVVgvslagKPBAIAmaJ4CFAToRGgEeTgQEuQ30YBhIEIaAYBgk4M8K9HKqXxbswLVgawMFyFGoIEhHAgWBvyHqkuwkCEMgR0OLxCgBfWHDj8p0MGmiAAUKEwjqbKCtCBdDuxYpDFMpKFqB05AkaKQAqgBQqCAIeRhsYEuyXEp4CNCNEwwrPkA7xmdWfDqlKWimABYGQCGWI94Ps+3oeFoOhgyBNsPgA9sSvRiRBE0VIEdhAkGVhRqI+RAoDGMpqEMBTUFjBYACdCLQTmQbMn9JEPPQWCjVmEmAexktSApDWRJDHqQFgT+229lcASQM0AqtEaQzCRpB6oX6hSEuJUaCNARyLLFeBB84CnY1WIAMhQEE5RDYcpAPAXfjKgwLHxANmywAK8C9mD8u5dVAN2Q+mgcb2LVMWhEPAb405TigIUhrcupFaMfaCnY3WgCEAZ8IZD1EMc7yMK1HGojYj4wEaQjkUmB5gIc0RcGehgsQUCjLEe6leDkJQ3BUj8b5EIRaJOciKwXwgaJgb9MFyFA4BAS2I0sglkNQwNDyQH2wr/ECGAqlE8UNWUCQeqEcStCKjAQ6BDERCx/sb74ACYU4GAsIuBbWshCBWDMEAsNQCtQHB1ogABQQFOqVpAoCqwRg4ZAhkHMRSkHywcE2CCBhIK3QXg2wGugMoBUxCISFlSHIEhFDkHzwVjsEkDCQSxkaAX9IULGBrEcSiNyKAgmKREx58HZLBNAwSJ2oqkB2KEEg8n6knYCGgN9PQAIrBfDBO20RwMMgLUdxBvxcKL0QgVgdApOA35DwmEpXw9YIkKFQnw/FBTENpBIgEOMQ6ILk6wGGAD441B4BRIGEwpo81GYMFj5/CCQPWiSAhsFQFJoNAgs5EJUE1SEQH7RKgITCSidKC6JUAhxKOBADCfhUEnZE8UG7BIgo1A25yENtxmCht6I0BN6NrRl+0DIBShSWIFAbJBZaK9JOIHfjAMMP2yaAolAvZXg+9BlwG0glcBbmJCh80DoBTIGyE4XtSGwAFnogpmKYD8HH7RNgYL2YD8YCgqwW6s04sZADcegQfNJGAaooDArouVAqgbOQW1HtEHzaSgGGotCPBLIggoUxELM4QCJ+1k4BHATRBWE3EBskFnIg1g/B5y0VwBWoBUG0gbNQW1ExBF+0VQDvxVUF7FaWXo8sEGuG4Mv2CkBD8HgKzyZZGPiZJNiAWciBWDMEX7VYgBoUVtIAlcBZqIEY4+DrNgswDQjUBtKMUQnYBjVD8E2rBRiqgNVC2ACVgFnIgVgOwbftFqBeAc/D8HTCNtAh4ED0O8F3LRegphfzp4XxVgYboBIEFnox/L71AmQozFYDqYXyhso2MBZqK5Ih+KH9AtTbYNKeDWADrwTVIeiAALUKDLFBYKGSoAsCVBXwQ1GwgVeCFIhMgk4IUCiQHs+0FlZsoIHIQ9ANASgM6HOiSjGupIGxMAxBVwSoU0DzsLAB90JlIS/JnRGgqoCBQGqh24ArgbKQq3F3BCgUcBCEUuTNWHshV+MOCRAUCIcizUNsRyhFnAZqA96PuiRAHQq1GCcbeDOW5eBwtwQIQyBXEvnV0eQV5CHe0dkGcQg6JkChgIFA8tBtwM1YWXi0awJEBfxUFvOQ04BtoJXgWOcEcAX4C2N9ORIQ1NrgePcEgAJZK1QQIA9LG5zooABlGCgIJA9RC4MNTnZSALcBu8AeUAUEnIcxDU51U4CggIFAinHFBqc7KoApgB9b8AzopxTIw2iDM10VoEShgKBqg7OdFSBHYSUPLQ3OdVgAswEVggwEmQ3Od1kAV8A6kYAAeWhpcKHTAqgC/oQcQMC1kG1wsdsC5CiMIOA85DS41HEBBs/CtTRuyAwC2KDrAoQw0OUogQA26L4AhkLrRAAB9kPYoAcC5CgUEKAYwwZ9ECBDYQAB5+GVXghACvjDkXQigICL8WQ/BEgo1E7kILjaFwFyFCYQXOuNAKKAvp8mEFzvjwARhQkEN3okQEChdCIGwc0+CZB6MVAIENzqlQAWBrIeAgS3eyZARCFAcKdvAgQUAgR/906AhEIBQf8EcBRiPbzbQwEyFN7rpQABhff7KUBC4YOeCuAofNhXAQyFj3orgKJwqscCCAj6LAAr8KTXAjAK+y0AobDnAgwG/wCbrnNMhT0MDgAAAABJRU5ErkJggg=="},8658:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.width=r,o.height=n,o.type="LightShader",o.uLightIntensity=null,o.uRedIntensity=null,o.whitenIntensity=.5,o.rosyIntensity=.5,o.program=o.makeProgram(a.lightVS,a.lightFS),o}return o(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.whitenIntensity)||(this.whitenIntensity=e.whitenIntensity/100),isNaN(e.rosyIntensity)||(this.rosyIntensity=e.rosyIntensity/100)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uLightIntensity,this.whitenIntensity),e.uniform1f(this.uRedIntensity,this.rosyIntensity)},t.prototype.setConstUniforms=function(){var e=this.program;if(e){var t=this.gl;t.useProgram(e),this.uLightIntensity=t.getUniformLocation(e,"intensity"),t.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=t.getUniformLocation(e,"rosyIntensity"),t.uniform1f(this.uRedIntensity,this.rosyIntensity);var r=t.getUniformLocation(e,"uPMVMatrix");t.uniformMatrix4fv(r,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},t}(s.default);t.default=l},5934:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(r(6976)),c=r(1199),u=r(5263),d=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.width=r,o.height=n,o.type="LowLightShader",o.uIntensity=null,o.lowlightEnhancement=!1,o.lutTex=null,o.lutImg=null,o.lutTexIdx=10,o.uLutTex=null,o.program=o.makeProgram(c.lightEnhanceVS,c.lightEnhanceFS),o}return o(t,e),t.prototype.setEffectConfig=function(e){this.lowlightEnhancement=1===e.lowlightEnhancement},t.prototype.release=function(){this.gl.deleteTexture(this.lutTex)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uIntensity,this.lowlightEnhancement?.6:0);var t=this,r=t.program,n=t.width,o=t.height,i=t.lutTex;if(r){var s=e.getUniformLocation(r,"texelWidth");e.uniform1f(s,1/n);var a=e.getUniformLocation(r,"texelHeight");e.uniform1f(a,1/o),e.activeTexture(e.TEXTURE0+this.lutTexIdx),e.bindTexture(e.TEXTURE_2D,i)}},t.prototype.setConstUniforms=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,o,i,a,l,c,d,h=this;return s(this,(function(s){switch(s.label){case 0:return e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t=[1,1,1,0,-.344,1.772,1.402,-.714,0],r=[.298973,-.168721,.500019,.58706,-.331298,-.41873,.113967,.500019,-.081289],(n=this.program)?((o=this.gl).useProgram(n),this.uIntensity=o.getUniformLocation(n,"uIntensity"),i=o.getUniformLocation(n,"matYUVtoRGB"),o.uniformMatrix3fv(i,!1,t),a=o.getUniformLocation(n,"matRGBtoYUV"),o.uniformMatrix3fv(a,!1,r),l=o.getUniformLocation(n,"uPMVMatrix"),o.uniformMatrix4fv(l,!1,e),c=o.getUniformLocation(n,"inputImageTexture2"),d=this,[4,new Promise((function(e){var t=o.createTexture(),r=h.lutTexIdx,n=h.lutImg;n||(n=new Image),n.onload=function(){h.lutImg=n,o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,t),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,o.LUMINANCE,o.UNSIGNED_BYTE,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.uniform1i(c,r),t&&e(t)},n.src=u.lightLut}))]):[2];case 1:return d.lutTex=s.sent(),[2]}}))}))},t}(l.default);t.default=d},1199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lightEnhanceFS=t.lightEnhanceVS=t.mixBlurFS=t.mixBlurVS=t.diffBlurFS=t.diffBlurVS=t.borderBlurFS=t.borderBlurVS=t.sharpnessFS=t.sharpnessVS=t.lightFS=t.lightVS=void 0,t.lightVS="cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}",t.lightFS="cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}",t.sharpnessVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n",t.sharpnessFS="\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}",t.borderBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}",t.borderBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}",t.diffBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}",t.diffBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}",t.mixBlurVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n",t.mixBlurFS="\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}",t.lightEnhanceVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng grkryJvqgu;\nhavsbez sybng grkryUrvtug;\ninelvat irp2 grkgherPbbeqvangr[9];\ninelvat irp2 grkgherPbbeqvangr2;\nhavsbez zng4 hCZIZngevk;\nibvq znva(){\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);\n    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);\n    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);\n    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);\n    \n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;\n    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;\n    \n    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;\n    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;\n    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;\n    \n    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;\n    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;\n    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;\n}\n",t.lightEnhanceFS="cerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 grkgherPbbeqvangr[9];\ninelvat uvtuc irp2 grkgherPbbeqvangr2;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez fnzcyre2Q vachgVzntrGrkgher2;\nhavsbez uvtuc zng3 zngLHIgbETO;\nhavsbez uvtuc zng3 zngETOgbLHI;\nhavsbez sybng hVagrafvgl;\npbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);\nirp4 eto2lhi(irp4 vachgETO) {\n    irp3 bhgchgLHI;\n    bhgchgLHI = zngETOgbLHI * vachgETO.eto;\n    bhgchgLHI -= pbzcIrp;\n    erghea irp4(pynzc(bhgchgLHI,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgETO.n);\n}\nirp2 fnghengvba(irp2 bet, sybng snpgbe) {\n    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,\n                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);\n    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));\n}\nirp4 lhi2eto(irp4 vachgLHI) {\n    irp3 bhgchgETO;\n    vachgLHI.eto += pbzcIrp;\n    bhgchgETO = zngLHIgbETO * vachgLHI.eto;\n    erghea irp4(pynzc(bhgchgETO,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgLHI.n);\n}\nibvq znva(){\n    irp4 lhi[9];\n    sbe(vag v = 0; v < 9; v++){\n        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));\n    }\n    sybng fzbbguL = 0.0;\n    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;\n    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;\n    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;\n    fzbbguL = fzbbguL / 16.0;\n    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;\n    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);\n    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));\n}\n"},8302:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(r(6976)),a=r(1199),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.width=r,o.height=n,o.type="SharpnessShader",o.uIntensity=null,o.sharpenIntensity=.5,o.program=o.makeProgram(a.sharpnessVS,a.sharpnessFS),o}return o(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.sharpenIntensity)||(this.sharpenIntensity=e.sharpenIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},t.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height,this.setConstUniforms()},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,r=this.program;if(r){var n=this.gl;n.useProgram(r);var o=n.getUniformLocation(r,"imageWidthFactor");n.uniform1f(o,1/e);var i=n.getUniformLocation(r,"imageHeightFactor");n.uniform1f(i,1/t),this.uIntensity=n.getUniformLocation(r,"sharpness"),n.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},t}(s.default);t.default=l},954:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=i(r(836)),a=i(r(3048)),l=r(3471),c=l.errorCodeList.VIDEO_TRACK_NOT_READABLE,u=l.errorCodeList.VIDEO_TRACK_OVERLOAD,d={errorCode:c.code,extendedData:c.message},h={errorCode:u.code,extendedData:u.message};t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.1";var p=function(){function e(e,t){var r=this;this.logger=e,this.kind="video",this._enabled=!1,this.lastRenderTime=0,this.stateFlag={base:!1,lowLight:!1},this.isStarting=!1,this.animationFrameId=0,this.backgroundLoop=null,this.eventHandler={visibilitychange:function(){if(document.hidden){var e=function(){return n(r,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.backgroundLoop=window.setTimeout(e,Math.floor(1e3/this.fps)),!document.hidden&&this.backgroundLoop?(clearTimeout(this.backgroundLoop),this.backgroundLoop=null,[2]):[4,this.renderAFrame()];case 1:return t.sent(),[2]}}))}))};e()}else r.backgroundLoop&&(clearTimeout(r.backgroundLoop),r.backgroundLoop=null)}},this.setInput(t,!0),this.fps=15,this.detector=new s.default(e),this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null,this.lastRenderTime=0,this.manager=new a.default(e),this.manager.onRenderError=function(e){1103072===e.errorCode&&r.stopEffect(),r.onError(e)}}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.manager.effectConfig||{}},enumerable:!1,configurable:!0}),e.prototype.setBeautyEffectOptions=function(e,r){return void 0===r&&(r={}),n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e&&this.manager.setEffectConfig(r),this.enabled===e?[3,6]:(this.manager.setEnableBeauty(e),this.enabled!==e&&this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" effect enabled "+e+"; options: "+JSON.stringify(r)),this.enabled=e,e?this.input?[4,this.startEffect()]:[3,2]:[3,3]);case 1:n.sent(),n.label=2;case 2:return[3,5];case 3:return[4,this.stopEffect()];case 4:n.sent(),n.label=5;case 5:n.label=6;case 6:return[2]}}))}))},e.prototype.startEffect=function(){return n(this,void 0,void 0,(function(){var e,r,i=this;return o(this,(function(s){switch(s.label){case 0:return this.isStarting=!0,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call start effect"),this.input?this.input&&this.output&&this.input!==this.output?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect is already enabled"),[2]):[4,this.startWebGLProcessor().catch((function(e){throw i.stopEffect(),e}))]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect failed, input track is null"),[2]);case 1:return e=s.sent(),[4,this.updateOutput(e)];case 2:return s.sent(),this.enabled=!0,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect success"),this.detector.startRecordBeautyEffectOutput(this.fps).then((function(e){!e.result&&i.onError&&i.onError(h,{targetFPS:e.targetFPS,currentFPS:e.currentFPS})})),r=function(){return n(i,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.enabled&&(this.animationFrameId=requestAnimationFrame(r)),[4,this.renderAFrame()];case 1:return e.sent(),[2]}}))}))},this.animationFrameId=requestAnimationFrame(r),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.isStarting=!1,[2]}}))}))},e.prototype.renderAFrame=function(){return n(this,void 0,void 0,(function(){var e,t,r;return o(this,(function(n){switch(n.label){case 0:return e=Date.now(),t=1e3/this.fps,(r=this.lastRenderTime?e-this.lastRenderTime:t)>=t?(this.lastRenderTime=e-(r-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.enabled&&this.videoEl?this.videoEl.videoWidth>6&&this.videoEl.videoHeight>6?[4,this.manager.render(this.videoEl)]:[3,2]:[3,3]):[3,3];case 1:n.sent(),n.label=2;case 2:this.output&&this.output.requestFrame&&this.output.requestFrame(),this.detector.addFrame(),n.label=3;case 3:return[2]}}))}))},e.prototype.stopEffect=function(){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(r){switch(r.label){case 0:return this.enabled=!1,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call stop effect"),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),[4,this.updateOutput()];case 1:return r.sent(),void 0===this.removeDomTimer&&(this.removeDomTimer=window.setTimeout((function(){!1===e.enabled&&e.destroy()}),18e4)),document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),[2]}}))}))},e.prototype.destroy=function(){this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},e.prototype.startWebGLProcessor=function(){return n(this,void 0,void 0,(function(){var e,r,n,i,s=this;return o(this,(function(o){switch(o.label){case 0:return this.input?(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),this.canvasEl&&this.videoEl?[3,2]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create elements"),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=void 0),this.videoEl&&(this.videoEl.remove(),this.videoEl=void 0),this.canvasEl=document.createElement("canvas"),this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay",""),this.videoEl.setAttribute("muted",""),this.videoEl.muted=!0,this.videoEl.setAttribute("playsinline",""),this.videoEl.setAttribute("style","display:none"),e=new Promise((function(e,r){var n=null,o=function(){n&&clearTimeout(n),s.videoEl&&s.videoEl.removeEventListener("playing",o),e(void 0)};s.videoEl&&s.videoEl.addEventListener("playing",o),n=window.setTimeout((function(){s.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video track error"),r(d)}),1e3)})),this.videoEl.srcObject=new MediaStream([this.input]),this.videoEl.play(),[4,e])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is null"),[2]);case 1:o.sent(),o.label=2;case 2:if(r=this.input.getSettings(),n=r.width||this.videoEl.videoWidth,i=r.height||this.videoEl.videoHeight,r.frameRate&&this.fps!==r.frameRate&&(this.fps=r.frameRate,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" set target fps: "+this.fps)),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" beauty video processor: width "+r.width+" height "+r.height),!n||!i)throw this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution of track is wrong"),d;return this.canvasEl.width=n,this.canvasEl.height=i,this.videoEl.setAttribute("width",n.toString()),this.videoEl.setAttribute("height",i.toString()),this.manager.init(n,i,this.canvasEl),[2,this.canvasEl.captureStream().getVideoTracks()[0]]}}))}))},e.prototype.setInput=function(e,r){return void 0===r&&(r=!1),n(this,void 0,void 0,(function(){var n,i;return o(this,(function(o){switch(o.label){case 0:return e===this.input?[3,6]:e.kind!==this.kind?(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" kind of track is not video"),[2]):(this.output&&this.input===this.output&&this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is same as effect track"),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" change input track"),r?this.input?[4,this.removeInput()]:[3,2]:[3,5]);case 1:o.sent(),o.label=2;case 2:return this.input=e,this.enabled&&!this.videoEl?[4,this.startEffect()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:this.input=e,(n=this.videoEl)&&(n.srcObject?((i=n.srcObject).getTracks().forEach((function(e){return i.removeTrack(e)})),i.addTrack(this.input)):n.srcObject=new MediaStream([this.input]),n.play()),o.label=6;case 6:return[2]}}))}))},e.prototype.removeInput=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return e.sent(),[2]}}))}))},e.prototype.updateOutput=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.output===e?[3,3]:(this._output=e,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:t.sent(),t.label=2;case 2:t.label=3;case 3:return[2]}}))}))},e.prototype.onOutputChange=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onError=function(e,t){},e}();t.default=p},6171:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioNodeQueue=void 0;var r=function(){function e(e,t){this.source=e,this.destination=t,this.audioNodeList=[],this.source.disconnect(),this.source.connect(this.destination)}return Object.defineProperty(e.prototype,"destinationNode",{get:function(){return this.destination},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[this.audioNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondToLastNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[this.audioNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[1]},enumerable:!1,configurable:!0}),e.prototype.pushBack=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e),e.connect(this.destination)):(this.source.disconnect(),this.source.connect(e),e.connect(this.destination)),this.audioNodeList.push(e)},e.prototype.popBack=function(){this.lastNode&&(this.lastNode.disconnect(),this.secondToLastNode?(this.secondToLastNode.disconnect(),this.secondToLastNode.connect(this.destination)):(this.source.disconnect(),this.source.connect(this.destination))),this.audioNodeList.pop()},e.prototype.pushFront=function(e){this.source.disconnect(),this.source.connect(e),e.connect(this.firstNode?this.firstNode:this.destination),this.audioNodeList.unshift(e)},e.prototype.popFront=function(){this.source.disconnect(),this.firstNode&&(this.firstNode.disconnect(),this.source.connect(this.secondNode?this.secondNode:this.destination)),this.audioNodeList.shift()},e.prototype.remove=function(e){var t=this.audioNodeList.indexOf(e);if(-1!==t){if(e.disconnect(),t-1>=0){var r=this.audioNodeList[t-1];r.disconnect(),r.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination)}else this.source.disconnect(),this.source.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination);this.audioNodeList.splice(t,1)}},e.prototype.isConnected=function(e){return-1!==this.audioNodeList.indexOf(e)},e.prototype.isEmpty=function(){return 0===this.audioNodeList.length},e.prototype.replaceSource=function(e){this.source.disconnect(),e.connect(this.firstNode?this.firstNode:this.destination),this.source=e},e.prototype.replaceDestination=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e)):(this.source.disconnect(),this.source.connect(e)),this.destination=e},e}();t.AudioNodeQueue=r},608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChromeVer=t.getPlaySourceType=t.generaStreamSid=t.ClientUtil=void 0;var n=r(6706),o=r(3529),i=r(7139),s=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("avertp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,r){t.success&&(r[e+"SuccessCallback"]=t.success),t.error&&(r[e+"ErrorCallback"]=t.error)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,r,n,o){e.registerCallback(t,{success:function(t,o){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];e.dataReportEvent(r,n,t,o,i)}},o)},e.actionLogReportCallback=function(t,r,n,o,i){e.actionSuccessCallback(t,r)&&e.actionSuccessCallback(t,r)(n,o)},e.getServerError=function(e,t,r){if(t)return{code:e,message:r||"liveroom error"};var n={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",1013:"token03 format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return{code:0,message:""};var o={code:0,message:"liveroom cmd error"};if(o.code=e,e>1e9){var i=n[e];o.message=i?"liveroom cmd error, code: "+e+", message: "+i:n[1e9]+e}else o.message=n[e]?n[e]+" code:"+e:"unknown error code:"+e;return o},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return e>1e9&&(r.code=e-1e9+52e6),t&&(r.message=t),r},e.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return t?e>2e5&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR":e>1e9?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,r,n,o){switch(r){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,o[0]);break;case"addEventMsg":e.addEventMsg(t,n,o[0],o[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,o[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,r,n){var o,i=[],s=[],a=[];r||(r=[]);for(var l=0;l<r.length;l++)if(r[l].anchor_id_name!=e&&r[l].id_name!=e&&r[l].user_id!=e){o=!1;for(var c=0;c<t.length;c++)if(r[l].stream_id===t[c].stream_id){r[l].extra_info!==t[c].extra_info&&a.push(r[l]),o=!0;break}o||i.push(r[l])}for(var u=0;u<t.length;u++)if(t[u].anchor_id_name!=e&&t[u].id_name!=e&&t[u].user_id!=e){o=!1;for(var d=0;d<r.length;d++)if(t[u].stream_id===r[d].stream_id){o=!0;break}o||s.push(t[u])}for(t.splice(0),l=0;l<r.length;l++)t.push(r[l]);n(i,s,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=r},e.uuid=function(e,t){var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{var i=void 0;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(i=0|16*Math.random(),o[r]=n[19==r?3&i|8:i])}return o.join("")},e.getDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=[],n=[],o=[],i=0;i<t.length;i++){var s=t[i];"audioinput"===s.kind&&r.push({deviceName:s.label,deviceID:s.deviceId}),"audiooutput"===s.kind&&n.push({deviceName:s.label,deviceID:s.deviceId}),"videoinput"===s.kind&&o.push({deviceName:s.label,deviceID:s.deviceId})}e&&e({microphones:r,speakers:n,cameras:o})})).catch((function(e){console.error("enumerate devices wrong "+e),t&&t(o.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)})):t&&t(o.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.getNetQuality=function(e,t,r){return void 0!==r?.15*this.calcQualityOfJitter(r)+.85*Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!1)):Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!0))},e.isIos=function(){return null!==navigator.platform.match("iPhone")},e.isMacOs=function(){return null!==navigator.platform.match("Mac")},e.isAndroid=function(){return null!==navigator.platform.match("Android")},e.isWindows=function(){return null!==navigator.platform.match("Windows")},e.isWin32=function(){return null!==navigator.platform.match("Win32")&&null===navigator.userAgent.match("WOW64")},e.isLinux=function(){return null!==navigator.platform.match("Linux")},e.getOsType=function(){return this.isIos()?i.OSType.IOS:this.isAndroid()?i.OSType.ANDROID:this.isMacOs()?i.OSType.MAC:this.isWin32()?i.OSType.WIN32:i.OSType.UNKNOWN},e.checkScreenParams=function(t,r){if("object"==typeof t&&void 0!==t.videoQuality&&!e.checkInteger(t.videoQuality))return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof t&&void 0!==t.sourceID&&"string"!=typeof t.sourceID)return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof t&&4===t.videoQuality){if(!e.checkCameraOrScreenBitRate(t.bitRate,r))return!1;if(!e.checkParamsWithConstraintExtend(t,r))return!1}return!0},e.checkParamsWithConstraintExtend=function(t,r){for(var n=0,i=["frameRate","width","height"];n<i.length;n++){var s=i[n],a=t[s];if(void 0===a)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," is required when videoQuality is 4")),!1;if("number"==typeof a&&!e.checkInteger(a,!1))return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must be integer number")),!1;if("number"==typeof a&&("width"===s||"height"===s)&&a<0)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must greater than 0.")),!1;if("number"==typeof a&&"width"===s&&a>7680)r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," cannot greater than 7680."));else if("number"==typeof a&&"height"===s&&a>4320)r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," cannot greater than 4320."));else if("object"==typeof a){if("width"===s&&!e.checkConstraintExtend(a,s,r,0,7680))return!1;if("height"===s&&!e.checkConstraintExtend(a,s,r,0,4320))return!1;if("frameRate"===s&&!e.checkConstraintExtend(a,s,r))return!1}else if("number"!=typeof a&&"object"!=typeof a)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(s," must be number or object")),!1}return!0},e.checkConstraintExtendWithMessage=function(t,r,n,o){if("object"!=typeof t)return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(0===Object.keys(t).length)return{result:!1,message:"".concat(r," can not be a empty object")};for(var i=0,s=["exact","ideal","max","min"];i<s.length;i++){var a=s[i],l=t[a];if("number"==typeof l&&!e.checkInteger(l,!1))return{result:!1,message:" ".concat(a," of ").concat(r," must be integer number")};if("number"==typeof n&&"number"==typeof l&&l<n)return{result:!1,message:" ".concat(a," of ").concat(r," must greater than ").concat(n)};if("number"==typeof o&&"number"==typeof l&&l>o)return{result:!1,message:" ".concat(a," of ").concat(r," cannot greater than ").concat(o)}}return{result:!0,message:"Constraint Extend OK."}},e.checkConstraintExtend=function(t,r,n,i,s){var a=e.checkConstraintExtendWithMessage(t,r,i,s);return a.result||n&&n(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError,a.message),a.result},e.checkBitRateLimit=function(e,t){return!(e>10240&&(t(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),1))},e.checkCameraOrScreenBitRate=function(t,r){if(void 0===t)return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if("number"==typeof t){if(!e.checkValidNumber(t,0,10240))return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(!e.checkBitRateLimit(t,r))return!1}else r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be number");return!0},e.checkCameraParams=function(t,r){return!!e.checkParamsWithConstraintExtend(t,r)&&!!e.checkCameraOrScreenBitRate(t.bitRate,r)},e.isParamEmpty=function(e){return null!=e&&""!==e},e.isTypeString=function(e){return"string"==typeof e},e.isTooLong=function(e,t){return!(e.length>=t)},e.isReDispatch=function(e){var t=e.message.match(/action:(\d+)/),r=t?Number(t[1]):NaN;return[o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,o.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,o.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e)||[6].includes(r)},e.arrAvg=function(e,t,r){return e.push(t),e.length>r&&e.shift(),e.reduce((function(e,t){return e+t}))/e.length},e.calcQualityOfRtt=function(e){return e<600?97-Math.pow(.09*e,1.1):18*Math.exp(.002*(600-e))},e.calcQualityOfJitter=function(e){return e<=50?98-Math.pow(e,1.15):n.QUALITY_CONSTANT.PoorMinQuality},e.calcQualityOfLostRate=function(e,t){if(t)return e<=55?99-Math.pow(.8*e,1.18):n.QUALITY_CONSTANT.PoorMinQuality;var r=100*e;return r<=40?96-Math.pow(r,1.22):n.QUALITY_CONSTANT.PoorMinQuality},e.quality2QualityGrade=function(e){return e>=n.QUALITY_CONSTANT.ExcellentMinQuality?n.QualityGrade.Excellent:e>=n.QUALITY_CONSTANT.GoodMinQuality?n.QualityGrade.Good:e>=n.QUALITY_CONSTANT.MiddleMinQuality?n.QualityGrade.Middle:e>=n.QUALITY_CONSTANT.PoorMinQuality?n.QualityGrade.Poor:n.QualityGrade.Die},e.checkAudioTrackIsActive=function(e){return!!e.enabled},e.checkVideoTrackIsActive=function(e){return!!e.enabled},e.isSupportEncodedTransforms=function(){var e=!!window.RTCRtpScriptTransform;if(!e){var t=!!RTCRtpSender.prototype.createEncodedStreams,r=!1;try{new ReadableStream,r=!0}catch(e){console.error("Transferable streams are not supported.")}e=t&&r}return e},e.uint8arrayToBase64=function(e){for(var t,r=0,n=e.length,o="";r<n;)t=e.subarray(r,Math.min(r+32768,n)),o+=String.fromCharCode.apply(null,Array.from(t)),r+=32768;return btoa(o)},e.isMobile=function(){return!!(navigator.userAgent.match(/Mobi/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i))},e}();t.ClientUtil=s,t.generaStreamSid=function(e,t,r){var o=(new Date).getTime(),i=(0,n.getReportSeq)();return function(e){var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t>>>0}("".concat(e,"_").concat(t,"_").concat(r,"_").concat(o,"_").concat(i))},t.getPlaySourceType=function(e){var t="rtc";switch(e){case 0:case 3:default:t="rtc";break;case 1:t="cdn";break;case 2:t="l3"}return t},t.getChromeVer=function(){var e=0,t=(navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1];return t&&(e=parseInt(t.split(",")[0])),e}},4671:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlerListMap={}}return e.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(t){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(t))}}))},e}();t.default=r},7646:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.H264Parser=void 0;var r=function(){function e(e){this.view=e,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=e.byteLength}return e.prototype.FindStartCode=function(){var e=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;e>=3;){if(0==this.view.getUint8(this.offset)&&0==this.view.getUint8(this.offset+1)&&1==this.view.getUint8(this.offset+2))return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&0==this.view.getUint8(this.offset-1)&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--e,++this.offset}return!1},e.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength||!this.FindStartCode()||(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,0))},e.prototype.NextNalu=function(e){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength||!this.FindStartCode()||(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,(!e||6==(31&this.view.getUint8(this.nalu_start+this.start_code_size)))&&(this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,0):(this.nalu_size=this.view.byteLength-this.nalu_start,0))))},e}();t.H264Parser=r},7139:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSType=void 0,function(e){e.WIN32="WIN32",e.MAC="Mac",e.ANDROID="Android",e.LINUX="Linux",e.IOS="iOS",e.UNKNOWN="WTF"}(t.OSType||(t.OSType={}))},6502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryHandler=void 0;var r=function(){function e(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1}return e.prototype.init=function(e,t,r,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0},e.prototype.isRetrying=function(){return null!==this.retryTimer||null!==this.startRetryTimer||null!==this.maxTimer},e}();t.RetryHandler=r},4767:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var o=r(6706),i=r(6706),s=function(){function e(){}return e.zegoSdp=function(e){var t=e.split("\r\n"),r=[],o=[];t.forEach((function(e){var t=e.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);t&&t[1]&&t[2]&&("H264/90000"===t[2]&&r.push(t[1]),"opus/48000/2"===t[2]&&o.push(t[1]))}));var i=[];return t.map((function(e){var t=!0,s=e.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(s&&s[5]&&(n(n([],r,!0),o,!0).some((function(e){return e==s[5]}))||(t=!1)),e.indexOf("m=video")>-1){var a=e.split(" ");e=n([a[0],a[1],a[2]],r,!0).join(" ")}else e.indexOf("m=audio")>-1&&(a=e.split(" "),e=n([a[0],a[1],a[2]],o,!0).join(" "));t&&i.push(e)})),i.join("\r\n")},e.getSDPByVideDecodeType=function(e,t,r,s){var a={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!e.includes("m=video"))return e;var l=/m=video.+/.exec(e)[0];l=l.match(/[\s|\d]+/g)[1].replace(" ",""),a.str=l,a.arr=a.str.split(" "),a.arr.forEach((function(t){var r=new RegExp("a=rtpmap:"+t+".+").exec(e)[0];r.includes("H264")?a.obj.H264.push(t):r.includes("H265")?a.obj.H265.push(t):r.includes("VP8")?a.obj.VP8.push(t):r.includes("VP9")?a.obj.VP9.push(t):a.obj.OTHER.push(t)})),a.obj.OTHER.forEach((function(t){var r=new RegExp("a=fmtp:"+t+".+apt=(\\d+)").exec(e),n=r&&r[1];n&&(a.obj.H264.includes(n)?a.obj.H264.push(t):a.obj.H265.includes(n)?a.obj.H265.push(t):a.obj.VP8.includes(n)?a.obj.VP8.push(t):a.obj.VP9.includes(n)&&a.obj.VP9.push(t))}));var c=[];if("VP9"===t?c=n(n(n([],a.obj.H265,!0),a.obj.H264,!0),a.obj.VP8,!0):"VP8"===t?c=n(n(n([],a.obj.H265,!0),a.obj.H264,!0),a.obj.VP9,!0):"H264"===t?c=n(n(n([],a.obj.H265,!0),a.obj.VP8,!0),a.obj.VP9,!0):"H265"===t&&(c=n(n(n([],a.obj.VP8,!0),a.obj.H264,!0),a.obj.VP9,!0)),"H264"==t&&"boolean"==typeof r){var u=function(e){return function(t){return!!t.includes("profile-level-id=")&&(e?!t.includes("profile-level-id=42e01f"):t.includes("profile-level-id=42e01f"))}},d=function(e){return function(t){if(!t.includes("profile-level-id="))return!1;switch(e){case i.H264ProfileType.BASE_LINE:return!t.includes("profile-level-id=42");case i.H264ProfileType.MAIN:return!t.includes("profile-level-id=4d");case i.H264ProfileType.HIGH:return!t.includes("profile-level-id=64");default:return!1}}},h=function(t){return function(){var r=[];return a.obj.H264.forEach((function(n){for(var o=new RegExp("a=fmtp:"+n+".+\\s\\n","g").exec(e)||[],i=0,s=t;i<s.length;i++)0!==o.filter(s[i]).length&&r.push(n);var a=new RegExp("a=fmtp:"+n+".+apt=(\\d+)").exec(e),l=a&&a[1];l&&r.includes(l)&&r.push(n)})),r}};c=c.concat(function(){for(var e=[],t=0,n=void 0!==s&&s===o.EncodecSelectionModeType.HARD_SOFT_ENCODEC_FIRST?[h([u(r),d(i.H264ProfileType.BASE_LINE)]),h([u(r)]),h([u(!r),d(i.H264ProfileType.BASE_LINE)]),h([u(!r)])]:[h([d(i.H264ProfileType.BASE_LINE),u(r)]),h([d(i.H264ProfileType.BASE_LINE),u(!r)]),h([u(r)]),h([u(!r)])];t<n.length&&(e=(0,n[t])(),new Set(e).size===a.obj.H264.length);t++)e=[];return e}())}return c.forEach((function(t){var r=a.arr.indexOf(t);r>=0&&a.arr.splice(r,1);var n=new RegExp("a=rtpmap:"+t+".+\\s\\n","g"),o=new RegExp("a=rtcp-fb:"+t+".+\\s\\n","g"),i=new RegExp("a=fmtp:"+t+".+\\s\\n","g");e=(e=(e=e.replace(n,"")).replace(o,"")).replace(i,"")})),e=e.replace(l,a.arr.join(" "))},e}();t.SdpUtil=s},1358:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCUtil=void 0;var i=r(3529),s=r(4395),a=r(608),l=function(){function e(){}return e.supportDetection=function(e,t,r,i){return n(this,void 0,void 0,(function(){var n,s,a,l,c,u,d,h;return o(this,(function(o){switch(o.label){case 0:return n={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:e,errInfo:{}},i&&"screenSharing"===i?(t({result:e,errInfo:n.errInfo}),[2]):i&&"customCapture"!==i||(((s=document.createElement("video")).captureStream||s.mozCaptureStream)&&(n.customCapture=!0),"customCapture"!==i)?(a=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,l="https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"),i&&"camera"!==i&&"microphone"!==i?[3,9]:a?l?(n.camera=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,1]:[3,9]):(t({result:n.customCapture,errInfo:n.errInfo}),[2]);case 1:if(i&&"camera"!==i)return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:!0})];case 3:return(c=o.sent())&&(n.camera=!0)&&c.getTracks().forEach((function(e){return e.stop()})),[3,5];case 4:return u=o.sent(),n.errInfo.camera={name:u.name,message:u.message},console.error("camera devices detect error: ",u.name,u.message),[3,5];case 5:if(i&&"microphone"!==i)return[3,9];o.label=6;case 6:return o.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 7:return(d=o.sent())&&(n.microphone=!0)&&d.getTracks().forEach((function(e){return e.stop()})),[3,9];case 8:return h=o.sent(),n.errInfo.microphone={name:h.name,message:h.message},console.error("microphone devices detect error: ",h.name,h.message),[3,9];case 9:return"camera"===i||"microphone"===i?(t({result:n[i],errInfo:n.errInfo}),[2]):(this.supportVideoCodeType((function(e,r){i||(n.videoCodec.H264=e.H264,n.videoCodec.H265=e.H265,n.videoCodec.VP8=e.VP8,n.videoCodec.VP9=e.VP9,n.webRTC=e.webRTC),r&&("string"==typeof r?n.errInfo.extendedDate=r:n.errInfo.webRTC={name:r.name,message:r.message},console.error("videoCodec detect error: "+r)),t&&t(i?{result:e[i],errInfo:n.errInfo}:n)}),r,i),[2])}}))}))},e.supportVideoCodeType=function(e,t,r){return n(this,void 0,void 0,(function(){var n,i,a,l,c,u,d,h,p,f;return o(this,(function(o){switch(o.label){case 0:return n={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},r?1!==t||"VP8"!==r&&"H264"!==r?[3,2]:[4,(f=new s.CheckModule).checkSupportByType(r)]:[3,2];case 1:return"boolean"==typeof(i=o.sent())?(n[r]=i,[2,e(n)]):(n[r]=!1,[2,e(n,i)]);case 2:if("webRTC"!==r&&1!==t)return[3,7];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 4:return o.sent(),n.webRTC=!0,[3,6];case 5:return a=o.sent(),e&&e(n,a),[3,6];case 6:if("webRTC"===r)return[2,e(n)];o.label=7;case 7:if(1===t){for(l="",u=[],d=0,h=c=["VP8","H264"];d<h.length;d++)p=h[d],f=new s.CheckModule,u.push(f.checkSupportByType(p));return Promise.all(u).then((function(t){t.forEach((function(e,t){"boolean"==typeof e?n[c[t]]=!0:(n[c[t]]=!1,l=e)})),l?e(n,l):e(n)})),[2]}try{(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then((function(t){if(n.webRTC=!0,t&&t.sdp){var o=t.sdp.split("\r\n");if(n.H264=o.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H264/")>-1})),"H264"===r)return e(n);if(n.VP8=o.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP8/")>-1})),"VP8"===r)return e(n);n.VP9=o.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP9/")>-1})),n.H265=o.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H265/")>-1})),e&&e(n)}}))}catch(t){e&&e(n,t)}return[2]}}))}))},e.checkScreenParams=function(e,t){if("object"==typeof e&&void 0!==e.videoQuality&&!a.ClientUtil.checkInteger(e.videoQuality))return t(i.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof e&&void 0!==e.sourceID&&"string"!=typeof e.sourceID)return t(i.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof e&&4===e.videoQuality){if(!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate,t))return!1;if(!a.ClientUtil.checkParamsWithConstraintExtend(e,t))return!1}return!0},e.checkCameraParams=function(e,t){return!!a.ClientUtil.checkParamsWithConstraintExtend(e,t)&&!!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate,t)},e.base64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n},e.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},e.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},e}();t.WebRTCUtil=l},5321:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWebRTC=void 0;var c=r(6706),u=r(608),d=r(1358),h=r(7325),p=r(1089),f=r(3529),g=r(908),m=r(3409),v=r(7560),_=r(1547),y=s(r(5515)),b=r(3770),E=r(4865),S=r(361),C=r(5019),T=r(5028),w=r(9595),R=r(9595),k=r(2752),O=r(6361),I=function(){function e(e,t,r,n,o,i){void 0===o&&(o=0),void 0===i&&(i=c.ZegoScenario.Default);var s=this;this.mediaEleSources=[],this.logger=e,this.dataReport=t,this.ac=new("undefined"!=typeof webkitAudioContext?webkitAudioContext:AudioContext),this.ac.addEventListener("statechange",(function(){"suspended"===s.ac.state&&s.ac.resume()})),this.checkAudioContext(),this.stateCenter=new h.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="webrtc",this.stateCenter.settingConfig=new R.ZegoSettingConfig,this.RTM=n,this.streamCenter=new m.ZegoStreamCenterWeb(this.logger,this.stateCenter,this.dataReport,this.RTM,this.ac,this.mediaEleSources),this.rtcModules=new g.RTCModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM,this.ac,this),this.stateCenter.browser=y.browserDetails.browser,this.RTM.cloudSetting.setEnvVariable("sdk_version",c.PROTO_VERSION),this.initTracer(r),this.RTM.cloudSetting.getSettingCache(w.RTC).then((function(e){s.logger.info(p.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e));var t=s.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:f.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},f.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event);t.setAttributes({files:f.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.files([{name:w.RTC,content:JSON.stringify(null==e?void 0:e.setting),versions:JSON.stringify(null==e?void 0:e.versions),code:0,message:""}])}),t.end(),s.stateCenter.settingConfig.setSetting(null==e?void 0:e.setting)})).catch((function(e){s.logger.warn(p.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e))})),this.stateCenter.rtm=this.RTM,this.stateCenter.streamCenter=this.streamCenter,this.stateCenter.chargeInfosSaver.checkAndReport(),[3,4,5,6,7,8].includes(i)?(this.stateCenter.scenario=i,[4,5,8].includes(i)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.logger.info(p.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+i+"  success")):(this.stateCenter.scenario=c.ZegoScenario.Default,this.logger.error(p.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO+" "+i+"  please use valid scenario"))}return e.prototype.checkAudioContext=function(){var e=this;if(this.ac&&"suspended"===this.ac.state){var t=function(){"running"!==e.ac.state?e.ac.resume():(window.removeEventListener("click",t),window.removeEventListener("touchstart",t))};window.addEventListener("click",t),window.addEventListener("touchstart",t)}},e.prototype.mutePublishStreamVideo=function(e,t,r){return!1},e.prototype.mutePublishStreamAudio=function(e,t){return!1},e.prototype.mutePlayStreamVideo=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.mutePlayStreamAudio=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.muteMicrophone=function(e){return!1},e.prototype.isMicrophoneMuted=function(){return!this.streamCenter.isMicEnabled},e.prototype.setAudioOutput=function(e,t){return this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT+" call"),"string"!=typeof t?(this.logger.error("audiooutput is not string"),!1):this.rtcModules.playModule.setStreamAudioOutput(e,t)},e.prototype.setCustomSignalUrl=function(e){if(this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" call: "+e),e&&0!=e.length){var t=!0;e.forEach((function(e){return 0!=e.indexOf("wss://")&&(t=!1)})),t?this.stateCenter.customUrl=e:this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" url is not correct")}else this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" param error")},e.prototype.setGWNode=function(e){"string"==typeof e&&e.length>0&&(this.streamCenter.gwNode=e)},e.prototype.setQualityMonitorCycle=function(e){return"number"==typeof e&&e>=1e3?(this.streamCenter.setQualityMonitorCycle(e),!0):(this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},e.prototype.startPlayingStream=function(e,t,r){return this.logger.info(p.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.startPlayingStream(e,t,r)},e.prototype.stopPlayingStream=function(e){this.logger.info(p.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.stopPlayingStream(e)},e.prototype.setPlayAccelerate=function(e){this.stateCenter.playAccelerate=e},e.prototype.setTurnOverTcpOnly=function(e){this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY+" call "+e),"boolean"==typeof e?this.stateCenter.turnOverTcpOnly=e:this.logger.error("zc.p.stoto.0 param must be param")},e.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e)},e.prototype.setRoomScenario=function(e){return[3,4,5,6,7,8].includes(e)?(this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" called"),this.stateCenter.roomList.length?(this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+JSON.stringify(k.errorCodeList.SET_ROOM_SCENARIO)),!1):([c.ZegoScenario.StandardVideoCall,c.ZegoScenario.HighVideoCall,c.ZegoScenario.Broadcast].includes(e)?this.enableVideoHardwareEncoder(!0):this.enableVideoHardwareEncoder(!1),this.stateCenter.scenario=e,this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" called success"),!0)):(this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO+" "+e+" please use valid scenario"),!1)},e.prototype.destroyStream=function(e){this.rtcModules.publishModule.destroyStream(e)},e.prototype.startPublishingStream=function(e,t,r,n){return this.logger.info(p.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.startPublishingStream(e,t,r,n)},e.prototype.activateSEIInsert=function(e){return console.error("should install advanced module"),!1},e.prototype.setSEIConfig=function(e){this.stateCenter.seiConfig=e},e.prototype.sendSEI=function(e,t){return this.rtcModules.publishModule.sendSEI(e,t)},e.prototype.stopPublishingStream=function(e){return this.logger.info(p.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.stopPublishingStream(e,void 0,!0)},e.prototype.setVideoConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.setAudioConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.replaceTrack=function(e,t,r){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(e,t,r):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.preloadEffect=function(e,t,r){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.preloadEffect(e,t,r):console.error("")},e.prototype.getEffectDuration=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getEffectDuration(e):(console.error(""),0)},e.prototype.getEffectCurrentProgress=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getEffectProgress(e,t):(console.error(""),0)},e.prototype.seekAudioEffect=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.seekAudioEffect(e,t,r):(console.error(""),!1)},e.prototype.playEffect=function(e,t,r){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.playEffect(e,t,r):console.error("")},e.prototype.pauseEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.pauseEffect(e,t):(console.error(""),!1)},e.prototype.resumeEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.resumeEffect(e,t):(console.error(""),!1)},e.prototype.stopEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopEffect(e,t):(console.error(""),!1)},e.prototype.unloadEffect=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.unloadEffect(e):(console.error(""),!1)},e.prototype.setEffectVolume=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setEffectVolume(e,t,r):(console.error(""),!1)},e.prototype.startMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.startMixingAudio(e,t):(console.error(""),!1)},e.prototype.stopMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingAudio(e,t):(console.error(""),!1)},e.prototype.mixingBuffer=function(e,t,r,n){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.mixingBuffer(e,t,r,n):console.error("")},e.prototype.stopMixingBuffer=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingBuffer(e,t):(console.error(""),!1)},e.prototype.setMixingAudioVolume=function(e,t,r){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,r):(console.error(""),!1)},e.prototype.checkSystemRequirements=function(t,r){var n=this,o=navigator&&navigator.mediaDevices&&(e.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.logger.info(p.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT+" call"+navigator.userAgent),new Promise((function(e){var i=n.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:f.ZegoRTCLogEvent.kZegoTaskInitSetting.event},{key:""},f.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event),s=r||"all",a=function(t){i.setAttributes({capability:f.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(t)}),i.end();var r=n.stateCenter.checkList.indexOf(s);n.stateCenter.checkList.splice(r,1),e(t)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(s)&&[0,1].includes(t)?n.stateCenter.checkList.includes(s)||n.stateCenter.checkList.includes("all")?a({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(n.stateCenter.checkList.push(s),void d.WebRTCUtil.supportDetection(o,a,t,r)):a({result:!1,errInfo:{extendedDate:"param error"}})}))},e.prototype.enumDevices=function(e,t){return a(this,void 0,void 0,(function(){var r,n,o,i,s,a,u,d,h,p,g,m,v,_=this;return l(this,(function(l){switch(l.label){case 0:return this.logger.info("zc.ed.0 call"),r=function(){return new Promise((function(e,r){var n=_.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H,{key:f.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},f.ZegoRTCLogEvent.kZegoTaskEnumDevices.event);_.rtcModules.publishModule.recordDevices((function(r){var o=[],i=!0,s=!0;r.cameras.forEach((function(e){""===e.deviceID&&(i=!1),o.push({device:e.deviceID,device_name:e.deviceName,type:0})})),r.microphones.forEach((function(e){""===e.deviceID&&(s=!1),o.push({device:e.deviceID,device_name:e.deviceName,type:1})})),r.speakers.forEach((function(e){return o.push({device:e.deviceID,device_name:e.deviceName,type:2})})),n.setAttributes({dev_list:f.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(o),dev_kind:f.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_kind(t||"all")}),n.end(),e({devices:r,enableCamera:i,enableMic:s})}),(function(e){_.stateCenter.reporter.setError(n,e),r(e)}))}))},[4,r()];case 1:return n=l.sent(),o=n.enableCamera,i=n.enableMic,s=n.devices,e?(this.logger.info("zc.ed.0 check permission"),a={video:!0,audio:!0},"videoinput"===t?a.audio=!1:"audioinput"!==t&&"audiooutput"!==t||(a.video=!1),d=a.audio&&!i,(u=a.video&&!o)||d?(this.logger.info("zc.ed.0 need to get device permission. needCamera: ".concat(u,", needMic: ").concat(d)),[4,navigator.mediaDevices.getUserMedia(a).catch((function(){}))]):[3,4]):[3,4];case 2:return(h=l.sent())&&h.getTracks().forEach((function(e){e.stop()})),[4,r()];case 3:p=l.sent(),g=p.devices,m=p.enableCamera,v=p.enableMic,a.video&&!m&&this.logger.warn("zc.ed.0 get video device permission failed."),a.audio&&!v&&this.logger.warn("zc.ed.0 get audio device permission failed."),s=g,l.label=4;case 4:return[2,s]}}))}))},e.prototype.getCameras=function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"videoinput")];case 1:return[2,e.sent().cameras]}}))}))},e.prototype.getMicrophones=function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audioinput")];case 1:return[2,e.sent().microphones]}}))}))},e.prototype.getSpeakers=function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audiooutput")];case 1:return[2,e.sent().speakers]}}))}))},e.prototype.getAudioInfo=function(e,t,r){},e.prototype.getSoundLevel=function(e,t,r){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(e,t,r):console.error("")},e.prototype.stopSoundLevel=function(e){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(e):console.error("")},e.handleDataAvailable=function(t){t.data&&t.data.size>0&&e.recordedBlobs.push(t.data)},e.prototype.startRecord=function(e){},e.prototype.stopRecord=function(){},e.prototype.resumeRecord=function(){},e.prototype.pauseRecord=function(){},e.prototype.saveRecord=function(e){},e.prototype.useVideoDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(e,t):new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.useAudioDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(e,t):(console.error("should use advanced module first"),new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})})))},e.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},e.prototype.setSoundLevelDelegate=function(e,t,r){this.logger.info("zc.ssd.0 call"),"boolean"==typeof e?t&&(!this.stateCenter.checkInteger(t)||t<100||t>3e3)?this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.streamCenter.setSoundLevelDelegate(e,t,r):this.logger.error("zc.ssd.0 param 1 must be boolean")},e.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},e.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},e.prototype.getVersion=function(){return c.PROTO_VERSION},e.prototype.setStreamExtraInfo=function(e,t){return new Promise((function(e,t){console.error("should use advanced module first"),t()}))},e.prototype.addPublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.removePublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.streamCommonModule?this.rtcModules.streamCommonModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.startMixerTask=function(e){return new Promise((function(e,t){console.error(""),t()}))},e.prototype.setMixerTaskConfig=function(e){return new Promise((function(e,t){console.error(""),t()}))},e.prototype.stopMixerTask=function(e){return new Promise((function(e,t){console.error(""),t()}))},e.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},e.use=function(t){switch(t.type){case"AudioMix":t.install(g.RTCModules,_.ZegoPublish);break;case"MixStream":t.install(e,v.StreamHandler,g.RTCModules);break;case"StreamCommon":t.install(e,g.RTCModules,v.StreamHandler);break;case"Advance":t.install(e,g.RTCModules,v.StreamHandler,b.ZegoPreview,E.PlayModule,S.PublishModule,_.ZegoPublish,C.ZegoSignal);break;case"BeautyEffect":t.install(e,b.ZegoPreview);break;case"RangeAudio":case"DataChannel":case"AiDenoise":t.install(e)}},e.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},e.prototype.createRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.destroyRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.enableDataChannel=function(e){"boolean"==typeof e&&(this.streamCenter.isDataChannelEnabled=e)},e.prototype.addTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.removeTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.setBeautyEffect=function(e,t,r){return new Promise((function(e,t){console.error("should install video effect module and advanced module"),e({errorCode:-1,extendedData:"should install video effect module and advanced module"})}))},e.prototype.setLowlightEnhance=function(e,t){return new Promise((function(e,t){console.error("should install video effect module and advanced module"),e({errorCode:-1,extendedData:"should install video effect module and advanced module"})}))},e.prototype.getPublishingStreamQuality=function(e){return this.rtcModules.publishModule.getStreamStats(e)},e.prototype.getPlayingStreamQuality=function(e){return this.rtcModules.playModule.getStreamStats(e)},e.prototype.checkAudioTrackIsActive=function(e){return MediaStreamTrack instanceof e&&"video"===e.kind?u.ClientUtil.checkAudioTrackIsActive(e):(this.logger.error("zc.caia.0 track type error"),!1)},e.prototype.checkVideoTrackIsActive=function(e){return MediaStreamTrack instanceof e&&"audio"===e.kind?u.ClientUtil.checkVideoTrackIsActive(e):(this.logger.error("zc.cvia.0 track type error"),!1)},e.prototype.setDummyCaptureImagePath=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setDummyCaptureImagePath(e,t):new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.setAccess=function(e){this.RTM.setAccess(e),this.stateCenter.useNetAgent=this.RTM.getSettingUnify(!0),this.RTM.setAccess(this.stateCenter.useNetAgent),this.stateCenter.useNetAgent=this.RTM.getUseNetAgent()},e.prototype.setAudioOutputDevice=function(e,t){return a(this,void 0,void 0,(function(){var r;return l(this,(function(n){switch(n.label){case 0:return(r=null==e?void 0:e.setSinkId)?(e.setsinkid&&(e.setsinkid.enabled=!0),[4,r.call(e,t)]):[3,2];case 1:return n.sent(),[2,!0];case 2:throw Error("Browser not support set audio output.")}}))}))},e.prototype.enableCameraCapturing=function(e,t){return void 0===t&&(t=!0),a(this,void 0,void 0,(function(){return l(this,(function(e){return console.error("should use advanced module first"),[2,!1]}))}))},e.prototype.enableDualStream=function(e){this.rtcModules.advancedModule?this.rtcModules.advancedModule.enableDualStream(e):console.error("use advance module first")},e.prototype.setLowStreamParameter=function(e,t){this.rtcModules.advancedModule?this.rtcModules.advancedModule.setLowStreamParameter(e,t):console.error("use advance module first")},e.prototype.setRemoteDefaultVideoStreamType=function(e){this.logger.info("zc.srdvs call"),[0,1,2].includes(e)?this.stateCenter.streamType=e:this.logger.error("zc.srdvs streamType must be number 0 or 1 or 2")},e.prototype.enableVideoHardwareEncoder=function(e){if("boolean"==typeof e){var t=this.stateCenter.settingConfig;t.setUserValue("hardware_encode",e),t.setUserValue("camera_hard_encode",e),t.setUserValue("custom_hard_encode",e)}},e.prototype.createLocalViewer=function(e){var t=this.streamCenter.checkPreview(e),r=null==t?void 0:t.getViewer();if(!r)throw Error("create viewer failed.");return new T.ZegoStreamView(r)},e.prototype.createRemoteViewer=function(e){var t=this.streamCenter.checkPlayer(e),r=null==t?void 0:t.getViewer();if(!r)throw Error("create viewer failed.");return new T.ZegoStreamView(r)},e.prototype.enableAiDenoise=function(e,t){return new Promise((function(e,t){console.error("should install ai denoise module and advanced module"),t({errorCode:k.errorCodeList.MODULE_NOT_IMPORTED.code,extendedData:"should install ai denoise module and advanced module"})}))},e.prototype.enableAutoSwitchDevice=function(e){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.enableAutoSwitchDevice(e);throw new Error("should use advanced module first")},e.prototype.initTracer=function(e){this.stateCenter.reporter=e;var t=new O.CommonStates(this.RTM.stateCenter,this.stateCenter,this.streamCenter),r=this.getReporterVersion(c.PROTO_VERSION);this.stateCenter.reportVersion=r,this.stateCenter.reporter.setCommonStates(t),this.stateCenter.reporter.setResource({sdk_version:c.PROTO_VERSION,report_version:r})},e.prototype.getReporterVersion=function(e){var t=e.split(".").map((function(e){return parseInt(e)}));return t[0]<<20|t[1]<<8|t[2]},e.prototype.setEngineConfig=function(e){this.stateCenter.engineConfig=n(n({},this.stateCenter.engineConfig),e)},e.screenShotReady=!1,e}();t.ZegoWebRTC=I,window.addEventListener("message",(function(e){var t=e.data.type,r=e.origin;r!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",r),"SS_PING"===t&&(I.screenShotReady=!0)}))},746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalogSocket=t.SocketState=void 0;var n,o,i,s=r(6706),a=r(1089),l=r(3529);!function(e){e[e.Connected=0]="Connected",e[e.Disconnected=1]="Disconnected",e[e.Broken=2]="Broken"}(n||(n={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(o||(o={})),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(i=t.SocketState||(t.SocketState={}));var c=function(){function e(e,t,r,o,a){var l=this;this.server=e,this.netAgent=t,this.signalConfig=r,this.logger=o,this.stateCenter=a,this.readyState=i.CLOSED,this.isActive=!1,this.accessServerState=n.Disconnected,this.originAccessServerState=n.Disconnected,this.mediaServerState=n.Disconnected,this.originMediaServerState=n.Disconnected,this.eventHandler={accessDisconnect:function(){l.setAccessServerState(n.Disconnected)},accessConnect:function(){l.setAccessServerState(n.Connected)},accessBroken:function(){l.setAccessServerState(n.Broken)},mediaDisconnect:function(){l.setMediaServerState(n.Disconnected)},mediaConnect:function(e){l.setMediaServerState(n.Connected,e)},mediaBroken:function(){l.setMediaServerState(n.Broken)}},this.wsHandler=t.getPCRequest("unified_rtc"===e?s.BusinessService.SERVICE_WEBRTC_SIGNAL:s.BusinessService.SERVICE_L3_WEBRTC_SIGNAL,{path:r.path,query:r.query}),this.setAccessServerState(t.isConnect()?n.Connected:n.Disconnected),this.setMediaServerState(0===this.wsHandler.connectState?n.Connected:n.Disconnected)}return e.prototype.updateAccessReadyState=function(){this.isActive&&this.accessServerState===n.Connected&&this.mediaServerState!==n.Connected?this.onreconnnecting&&this.onreconnnecting():this.accessServerState===n.Disconnected&&this.logger.warn(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE+" access timeout")},e.prototype.updateMediaReadyState=function(e){return this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE+" "+e),this.mediaServerState===n.Connected?(this.originMediaServerState===n.Broken&&e===o.AUTO&&this.onreconnnecting&&this.onreconnnecting(),void(this.readyState!==i.OPEN&&(this.readyState=i.OPEN,this.onopen&&this.onopen()))):this.mediaServerState===n.Disconnected?(this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),void(this.readyState!==i.CLOSED&&(this.readyState=i.CLOSED,this.onclose&&this.onclose()))):void(this.mediaServerState===n.Broken&&(this.readyState=i.CONNECTING,this.onerror&&this.onerror(new Event("signal connecting"))))},e.prototype.setMediaServerState=function(e,t){this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" "+e+" "+t),this.mediaServerState!==e?(this.originMediaServerState=this.mediaServerState,this.mediaServerState=e,this.updateMediaReadyState(t)):this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE+" same state")},e.prototype.setAccessServerState=function(e){this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" "+e),this.accessServerState!==e?(this.originAccessServerState=this.accessServerState,this.accessServerState=e,this.updateAccessReadyState()):this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE+" same state")},e.prototype.open=function(){var e=this;this.isActive=!0,this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_OPEN+" state "+this.mediaServerState),this.mediaServerState===n.Disconnected&&(this.wsHandler.on("connected",this.eventHandler.mediaConnect),this.wsHandler.on("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.on("broken",this.eventHandler.mediaBroken),this.netAgent.on("connected",this.eventHandler.accessConnect),this.netAgent.on("disconnected",this.eventHandler.accessDisconnect),this.netAgent.on("broken",this.eventHandler.accessBroken),this.wsHandler.on("downLoadMessage",(function(t){e.onmessage({data:t})})),this.wsHandler.off("pcBrokenEvent"),this.wsHandler.on("pcBrokenEvent",(function(t){var r=l.ZegoRTCLogEvent.kZegoSDKProxyBroken,n=e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);n.setAttributes({service_no:r.service_no(null==t?void 0:t.service_no)}),n.end()})),this.wsHandler.off("pcDisconnectedEvent"),this.wsHandler.on("pcDisconnectedEvent",(function(t){var r=l.ZegoRTCLogEvent.kZegoSDKProxyDisconnect,n=e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);n.setAttributes({service_no:r.service_no(null==t?void 0:t.service_no)}),n.end()})),this.wsHandler.off("pcConnectedEvent"),this.wsHandler.on("pcConnectedEvent",(function(t){var r=l.ZegoRTCLogEvent.kZegoSDKProxyConnect,n=e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoConnConnect.event},{key:""},r.event);n.setAttributes({service_no:r.service_no(t.service_no),recv_time:r.recv_time((new Date).getTime()),proxy_link_sources:r.proxy_link_sources(t.proxy_link_sources),connect_stream:r.connect_stream(t.connect_stream)}),n.end()})))},e.prototype.close=function(){this.isActive=!1,this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),this.wsHandler.closeRequest()},e.prototype.send=function(e,t,r){var n=this;this.wsHandler.sendRequest({payload:e,ack:t,isInSendMap:r},(function(e){n.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" fail "+e),n.onerror&&n.onerror(e)}),(function(e){n.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND+" suc "+e)}))},e.prototype.onopen=function(){},e.prototype.onclose=function(e){},e.prototype.onerror=function(e){},e.prototype.onmessage=function(e){},e.prototype.onreconnnecting=function(){},e}();t.AnalogSocket=c},3544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingTimer=void 0;var n=r(6706),o=r(4418),i=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.chargeInfosInterval=6e4,this.reporting=!1}return Object.defineProperty(e.prototype,"chargeInfosSaver",{get:function(){return this.stateCenter.chargeInfosSaver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamCenter",{get:function(){return this.stateCenter.streamCenter},enumerable:!1,configurable:!0}),e.prototype.isAllPlayingCdnAndL3=function(){var e=0,t=0,r=this.streamCenter.playerList;for(var o in r){var i=r[o];i.player.state==n.ENUM_PLAY_STATE.playing&&(e++,0!==i.player.resourceMode&&t++)}return e==t&&0!==e},Object.defineProperty(e.prototype,"roomChargeInfos",{get:function(){return this._roomChargeInfos||(this._roomChargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]}),this._roomChargeInfos.timestamp_begin=(new Date).getTime(),0!==this._roomChargeInfos.timestamp_end?(this._roomChargeInfos.timestamp_diff=this._roomChargeInfos.timestamp_begin-this._roomChargeInfos.timestamp_end,this._roomChargeInfos.timestamp_diff_flag=1):(this._roomChargeInfos.timestamp_diff=0,this._roomChargeInfos.timestamp_diff_flag=0),this._roomChargeInfos.timestamp_end=(new Date).getTime(),this._roomChargeInfos.infos=[{is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[],no_playing:1}],this._roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chargeInfos",{get:function(){return this.streamCenter?this.streamCenter.getChargeInfos():this.roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldEnd",{get:function(){var e,t;return!!this.reporting&&(this.shouldReportRoomTime?(null===(e=this.stateCenter.rtm)||void 0===e||e.stateCenter.roomModulesList.filter((function(e){!e.isLogout()&&e.isDisConnect()})),0===(null===(t=this.stateCenter.rtm)||void 0===t?void 0:t.stateCenter.roomModulesList.filter((function(e){return!e.isLogout()||!e.isDisConnect()})).length)):!this.streamCenter||!this.streamCenter.signalList||0===Object.keys(this.streamCenter.signalList).length)},enumerable:!1,configurable:!0}),e.prototype.report=function(){this.isAllPlayingCdnAndL3()?this.logger.info("zc.bill.tm.r.0 not report"):this.logger.report(this.chargeInfos)},Object.defineProperty(e.prototype,"shouldReportRoomTime",{get:function(){var e,t,r;return!(!(null===(e=this.stateCenter.rtm)||void 0===e?void 0:e.stateCenter.appConfig)||!(null===(t=this.stateCenter.rtm)||void 0===t?void 0:t.stateCenter.appConfig.speedlog_config)||1!==(null===(r=this.stateCenter.rtm)||void 0===r?void 0:r.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReporting",{get:function(){return this.reporting},enumerable:!1,configurable:!0}),e.prototype.startChargeInfoTimer=function(){var e=this;if(this.chargeInfosTimer&&(clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldEnd))return this.logger.info(o.ZEGO_BILLING_ACTION.START_CHARGE_INFO_TIMER+" chargeinfos timer report ended"),void(this.reporting=!1);this.chargeInfosTimer=setTimeout((function(){e.report(),e.startChargeInfoTimer()}),this.chargeInfosInterval)},e.prototype.startChargeInfosUpload=function(){this.reporting||(this.reporting=!0,this.shouldReportRoomTime&&this.report(),this.startChargeInfoTimer(),this.logger.info("zsc.sciu.0 call"))},e.prototype.stopChargeInfosUpload=function(){this.logger.info("zsc.sciu.1 call"),this.chargeInfosTimer&&this.shouldEnd&&(this.logger.info("zsc.sciu.1 stop"),clearTimeout(Number(this.chargeInfosTimer)),this.chargeInfosTimer=null,this.shouldReportRoomTime&&this.report(),this.reporting=!1,this.logger.info("zsc.sciu.1 chargeinfos timer report ended"))},e.prototype.samplingChargeInfos=function(){return this.chargeInfos},e}();t.BillingTimer=i},1378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChargeInfosSaverWeb=void 0;var n=r(4418),o=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.bindListener()}return Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this.stateCenter.billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"KEY",{get:function(){var e;return"z_cginfos_cache_".concat(null===(e=this.stateCenter.rtm)||void 0===e?void 0:e.stateCenter.appid)},enumerable:!1,configurable:!0}),e.prototype.bindListener=function(){var e=this;window.addEventListener("beforeunload",(function(){if(e.billingTimer.isReporting){var t=e.billingTimer.samplingChargeInfos();e.saveChargeInfosByLocalStorage(t)}}))},e.prototype.saveChargeInfosByLocalStorage=function(e){return this.logger.info(n.ZEGO_BILLING_ACTION.CHARGEINFO_SAVING_LOCALSTORAGE+" call"),localStorage.setItem(this.KEY,JSON.stringify(e))},e.prototype.getAndRemoveChargeInfosFromLocalStorage=function(){this.logger.info(n.ZEGO_BILLING_ACTION.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE+" call");var e=localStorage.getItem(this.KEY);return localStorage.removeItem(this.KEY),e},e.prototype.report=function(e){this.logger.report(e)},e.prototype.checkAndReport=function(){this.logger.info(n.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" call");var e=this.getAndRemoveChargeInfosFromLocalStorage();if(null!=e){var t=JSON.parse(e);this.report(t),this.logger.info(n.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT+" reported")}},e}();t.ChargeInfosSaverWeb=o},4418:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_BILLING_ACTION=void 0,function(e){e.SAVED_CHARGEINFO_REPORT="zc.bill.scir",e.CHARGEINFO_SAVING_LOCALSTORAGE="zc.bill.cisl",e.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE="zc.bill.cigrl",e.START_CHARGE_INFO_TIMER="zc.bill.tm.scit"}(t.ZEGO_BILLING_ACTION||(t.ZEGO_BILLING_ACTION={}))},4395:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckModule=void 0;var i=r(4767),s=function(){function e(){var e=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var t=document.createElement("canvas");t.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=t.captureStream()}catch(e){console.error("canvas captureStream error",e)}this.timer=setTimeout((function(){e.resolve("Detection timeout"),e.hangup()}),5e3)}return e.prototype.checkSupportByType=function(e){return n(this,void 0,void 0,(function(){var t,r,n=this;return o(this,(function(o){switch(o.label){case 0:return this.checkType=e,t={},this.localPc=new RTCPeerConnection(t),this.remotePc=new RTCPeerConnection(t),r=new Promise((function(e){return n.resolve=e})),this.localPc.addEventListener("icecandidate",(function(e){return n.onIceCandidate(n.localPc,e)})),this.remotePc.addEventListener("icecandidate",(function(e){return n.onIceCandidate(n.remotePc,e)})),this.remotePc.addEventListener("iceconnectionstatechange",(function(t){"connected"===n.remotePc.iceConnectionState&&(n.iceconnectionstatechangeResult=!0),2==++n.iceconnectionstatechangeTimes&&n.iceCandidate&&(clearTimeout(n.timer),n.resolve("connected"===n.remotePc.iceConnectionState||"The browser does not support ".concat(e," format")),n.hangup())})),this.localStream.getTracks().forEach((function(e){return n.localPc.addTrack(e,n.localStream)})),[4,this.check(e)];case 1:return o.sent(),[4,r];case 2:return[2,o.sent()]}}))}))},e.prototype.check=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(t=n.sent()).sdp=i.SdpUtil.getSDPByVideDecodeType(t.sdp,e),this.onCreateOfferSuccess(t),[3,3];case 2:return r=n.sent(),this.onCreateSessionDescriptionError(r),[3,3];case 3:return[2]}}))}))},e.prototype.onCreateOfferSuccess=function(e){return n(this,void 0,void 0,(function(){var t,r,n,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(e)];case 1:return o.sent(),[3,3];case 2:return t=o.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return o.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(e)];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),this.onSetSessionDescriptionError(r),[2];case 6:return o.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return n=o.sent(),[4,this.onCreateAnswerSuccess(n)];case 8:return o.sent(),[3,10];case 9:return i=o.sent(),this.onCreateSessionDescriptionError(i),[2];case 10:return[2]}}))}))},e.prototype.onCreateAnswerSuccess=function(e){return n(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return n.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(e)];case 4:return n.sent(),[3,6];case 5:return r=n.sent(),this.onSetSessionDescriptionError(r),[2];case 6:return[2]}}))}))},e.prototype.onIceCandidate=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return n.sent(),[3,3];case 2:return r=n.sent(),console.error(this.checkType,"".concat(this.getPcName(e)," addIceCandidate error"),r),clearTimeout(this.timer),this.hangup(),this.resolve(r),[3,3];case 3:return"remotePc"===this.getPcName(e)&&t.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&"localPc"===this.getPcName(e)&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}}))}))},e.prototype.getOtherPc=function(e){return e===this.localPc?this.remotePc:this.localPc},e.prototype.getPcName=function(e){return e===this.localPc?"localPc":"remotePc"},e.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach((function(e){return e.stop()}))},e}();t.CheckModule=s},8493:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryDispatchHandler=void 0;var i=r(6502),s=r(6706),a=r(6706),l=r(1089),c=r(3529),u=r(2752),d=c.ZegoRTCLogEvent.kZegoPublishStreamResource,h=c.ZegoRTCLogEvent.kZegoPlayStreamResource,p=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.retryActiveCount=1,i.RETRY_MAX_TIME=90,i.logger=t,i.stateCenter=r,i.rtm=n,i.streamCenter=o,i}return o(t,e),t.prototype.initStream=function(e,t,r){this.streamID=e,this.playOption=t,this.isPublish=r},t.prototype.active=function(e){var t,r,n,o,i,d,h=this;if(this.logger.info(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry call "+this.streamID),this.isPublish){var p=null===(r=null===(t=this.streamCenter)||void 0===t?void 0:t.publisherList[this.streamID])||void 0===r?void 0:r.publisher;i=(null==p?void 0:p.isRePublish)?c.ZegoRTCLogEvent.kZegoRePublish:c.ZegoRTCLogEvent.kZegoStartPublish,d=c.ZegoRTCLogEvent.kZegoPublishStreamResource}else{var f=null===(o=null===(n=this.streamCenter)||void 0===n?void 0:n.playerList[this.streamID])||void 0===o?void 0:o.player;i=(null==f?void 0:f.isRePlay)?c.ZegoRTCLogEvent.kZegoRePlay:c.ZegoRTCLogEvent.kZegoStartPlay,d=c.ZegoRTCLogEvent.kZegoPlayStreamResource}var g=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:i.event,par:this.streamID},{key:""},d.event);if(this.retryTimer)return this.logger.info(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" has active, ignore"),this.stateCenter.reporter.setError(g,u.errorCodeList.DISPATCH_ERROR,"has active, ignore"),!1;var m=this.rtm.isDisConnect()&&this.stateCenter.networkState==a.ENUM_NETWORK_STATE.offline;if(m){if(this.logger.info(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" check if really offline"),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry over time, stop retry"),this.stateCenter.reporter.setError(g,u.errorCodeList.DISPATCH_ERROR,"retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var v=this.isPublish?this.streamCenter.publisherList[this.streamID]:this.streamCenter.playerList[this.streamID];v&&(v.isReDispatch=!0)}var _=this.retryActiveCount-1;this.retryDispatchSpan||(this.retryDispatchSpan=g,this.stateCenter.reporter.setSpanInMap(g,{key:d.event,par:this.streamID}));var y=this.playOption&&2==this.playOption.resourceMode?1:0,b={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.streamCenter.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:_,center_ability:!0,dispatch_type:y};return this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout((function(){h.retryTimer=null,m?h.retryNetCount++:h.retryActiveCount++;var e=h.streamCenter.getRoomByStreamID(h.streamID),t=h.rtm.service.sendMessage("webrtc_url",b,(function(e,t){h.handleFetchWebRtcUrlRsp(e)}),(function(e,t){h.handleFetchWebRtcUrlRsp(e)}),void 0,{sessionID:null==e?void 0:e.sessionID,roomID:null==e?void 0:e.roomID,roomSessionID:null==e?void 0:e.roomSessionID});h.isPublish&&t?h.streamCenter.publisherList[h.streamID]&&(h.streamCenter.publisherList[h.streamID].seq=t):t&&h.streamCenter.playerList[h.streamID]&&(h.streamCenter.playerList[h.streamID].seq=t)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info(l.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn("".concat(l.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME," ").concat(e.streamID," dispatch over max time ").concat(e.RETRY_MAX_TIME,"s stop retry")),e.isOverTime=!0,e.invalid();var t=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError;t.message=t.message+" try max limit",e.isPublish?e.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,t):e.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,e.streamID,t)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.handleFetchWebRtcUrlRsp=function(e){var t,r,n,o,i,s,p,f,g,m,v;if(e.code&&[u.errorCodeList.TIMEOUT.code].includes(e.code))this.active();else{if(e.code&&[u.errorCodeList.SOCKET_CLOSE.code].includes(e.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.streamCenter.publisherList[this.streamID].isReDispatch=!0:this.streamCenter.playerList[this.streamID].isReDispatch=!0);var _=e,y=_.body.stream_id,b=!1,E=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error;if(this.isPublish&&(!this.streamCenter.publisherList[y]||_.header.seq!==this.streamCenter.publisherList[this.streamID].seq))return this.logger.warn(l.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.streamCenter.playerList[this.streamID]&&_.header.seq===this.streamCenter.playerList[this.streamID].seq))return this.logger.warn(l.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(this.stateCenter.clientIP=_.body.clientip||"",0===_.body.err_code||2!=_.body.need_action)if(0===_.body.err_code||1===_.body.need_action||[3102].includes(_.body.err_code)){if(this.stopMaxTime(),this.invalid(),_.body.urls&&Array.isArray(_.body.urls)&&_.body.urls.length>0?b=!0:this.logger.error(l.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),"push"===_.body.ptype&&this.streamCenter.publisherList[y]){if(!b)return null===(i=this.retryDispatchSpan)||void 0===i||i.setAttributes({try_cnt:d.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),this.retryDispatchSpan=null,void this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,y,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);var S=this.streamCenter.publisherList[y];this.stateCenter.publishStreamList[y]?(S.ttl=_.body.hosts_ttl?(new Date).getTime()+1e3*_.body.hosts_ttl:0,S.isCenterNode="boolean"==typeof _.body.is_center_node&&_.body.is_center_node,S.serverUrls=_.body.urls,null===(s=this.retryDispatchSpan)||void 0===s||s.setAttributes({urls:d.urls(S.serverUrls),is_center:d.is_center(S.isCenterNode),try_cnt:d.try_cnt(this.retryActiveCount)}),null===(p=this.retryDispatchSpan)||void 0===p||p.end(),this.retryDispatchSpan=null,this.streamCenter.startPublishingStream(y)):this.logger.error(l.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if("pull"==_.body.ptype&&this.streamCenter.playerList[y]){var C;if(!b)return(C=JSON.parse(JSON.stringify(1900001004===(null===(f=_.body)||void 0===f?void 0:f.err_code)?E.kPlayStreamNotFound:E.kPlayDispatchError))).message=C.message+(_.body.err_code?" server error:"+_.body.err_code:""),3102===_.body.err_code&&(C=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode),null===(g=this.retryDispatchSpan)||void 0===g||g.setAttributes({try_cnt:h.try_cnt(this.retryActiveCount)}),this.stateCenter.reporter.setError(this.retryDispatchSpan,C),void this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,y,C);var T=this.streamCenter.playerList[y];T.ttl=_.body.hosts_ttl?(new Date).getTime()+1e3*_.body.hosts_ttl:0,T.isCenterNode="boolean"==typeof _.body.is_center_node&&_.body.is_center_node,T.serverUrls=_.body.urls,null===(m=this.retryDispatchSpan)||void 0===m||m.setAttributes({urls:h.urls(T.serverUrls),is_center:h.is_center(T.isCenterNode),try_cnt:h.try_cnt(this.retryActiveCount)}),null===(v=this.retryDispatchSpan)||void 0===v||v.end(),this.retryDispatchSpan=null,this.streamCenter.startPlayingStream(y,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[y])}}else this.retryActiveInterval=Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((C=JSON.parse(JSON.stringify("pull"===(null===(n=_.body)||void 0===n?void 0:n.ptype)&&1900001004===(null===(o=_.body)||void 0===o?void 0:o.err_code)?E.kPlayStreamNotFound:E.kPlayDispatchError))).message=C.message+(_.body.err_code?" server error:"+_.body.err_code:""),"push"===_.body.ptype?this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.retry,y,C):this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.retry,y,C)),this.active();else this.retryActiveInterval=_.body.action_delay/1e3||Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((C=JSON.parse(JSON.stringify("pull"===(null===(t=_.body)||void 0===t?void 0:t.ptype)&&1900001004===(null===(r=_.body)||void 0===r?void 0:r.err_code)?E.kPlayStreamNotFound:E.kPlayDispatchError))).message=C.message+(_.body.err_code?" server error:"+_.body.err_code:""),"push"===_.body.ptype?this.streamCenter.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.retry,y,C):this.streamCenter.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.retry,y,C)),this.active()}},t}(i.RetryHandler);t.RetryDispatchHandler=p},6014:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryStreamHandler=void 0;var i=r(6706),s=r(6502),a=r(3529),l=r(1089),c=r(608),u=r(746),d=a.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,h=a.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,p=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i.logger=t,i.stateCenter=r,i.streamCenter=n,i.isPublish=o,i.serverUrls=[],i}return o(t,e),t.prototype.initStream=function(e,t){this.streamID=e,this.serverUrls=t},t.prototype.activePublish=function(e){var t=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var r=this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline;if(r){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var n=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n}var o=this.streamCenter.publisherList[this.streamID].publisher,s=this.serverUrls[0],l=["unified_rtc","unified_l3"].includes(s);if(!l){var c=this.serverUrls,u=o.signal?o.signal.server:"";c.forEach((function(e,r){return r<=c.indexOf(u)&&t.serverUrls.push(e)})),c.splice(0,c.indexOf(u)+1),s=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]}var d="number"==typeof e?e:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:o.parentSpanKey,par:this.streamID},{wait_consume:a.ZegoRTCLogEvent.kZegoStartPublish.wait_consume(d)}),this.retryTimer=setTimeout((function(){t.logger.info("zc.tsh.a stream ".concat(t.streamID," : connect to ").concat(l?"unified signal server":"signal server "+s)),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,r?t.retryNetCount++:t.retryActiveCount++,t.streamCenter.connectPublishServer(t.streamID,s)}),d),this.logger.info("zc.tsh.a call success. delay: "+d),!0},t.prototype.activePull=function(e,t){var r=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),t&&(this.playStreamSuccess=t),this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;var n=this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline;if(n){if(this.logger.info("zc.tsh.a check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zc.tsh.a network is broken, stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var o=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=o>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:o}var s=this.streamCenter.playerList[this.streamID].player,l=this.serverUrls,c=s.signal?s.signal.server:"",u=this.serverUrls[0],d=["unified_rtc","unified_l3"].includes(u);d||(l.forEach((function(e,t){return t<=l.indexOf(c)&&r.serverUrls.push(e)})),l.splice(0,l.indexOf(c)+1),u=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]);var h="number"==typeof e?e:1e3*this.retryActiveInterval;return this.stateCenter.reporter.spanSetAttributes({key:s.parentSpanKey,par:this.streamID},{wait_consume:a.ZegoRTCLogEvent.kZegoStartPlay.wait_consume(h)}),this.retryTimer=setTimeout((function(){r.logger.warn("zc.tsh.a stream ".concat(r.streamID," : connect to ").concat(d?"unified signal server":"signal server "+u)),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,n?r.retryNetCount++:r.retryActiveCount++,r.streamCenter.connectPlayServer(r.streamID,r.playStreamSuccess,u)}),h),this.logger.info("zc.tsh.a call success. delay: "+h),!0},t.prototype.startMaxTime=function(){var e=this;this.logger.info("zc.tsh.smt ".concat(this.streamID," call")),this.maxTimer?this.logger.warn("zc.tsh.smt max timer"):(this.logger.info("zc.tsh.smt start max timer"),this.maxTimer=setTimeout((function(){if(e.logger.warn("zc.tsh.smt ".concat(e.streamID," over max time ").concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.invalid(),e.isPublish){if(!e.streamCenter.publisherList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" publish no found");e.publishStateHandle(i.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError,!0)}else{if(!e.streamCenter.playerList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" play no found");e.playStateHandle(i.ENUM_PLAY_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError,!0)}}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.logger.info("zc.tsh.stmt streamID "+this.streamID+" "+!!this.maxTimer),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.retryNextSignal=function(e){var t,r;if(this.stateCenter.networkState==i.ENUM_NETWORK_STATE.offline)return!0;if(this.isPublish){var n=this.streamCenter.publisherList[this.streamID];if(n.publisher.state==i.ENUM_PUBLISH_STATE.stop&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(e.code))return!0;if(n.isCenterNode&&(null===(t=n.publisher.signal)||void 0===t?void 0:t.wsReadyState)==u.SocketState.OPEN)return!1;if(!n.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(e.code)){var o=e.message.match(/reason:(\d+)/);return!["26"].includes(o?o[1]:"")}return!0}var s=this.streamCenter.playerList[this.streamID];return!((s.player.state!=i.ENUM_PLAY_STATE.stop||![a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(e.code))&&(s.isCenterNode&&(null===(r=s.player.signal)||void 0===r?void 0:r.wsReadyState)==u.SocketState.OPEN||!s.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(e.code)&&(o=e.message.match(/reason:(\d+)/),["24","26","28"].includes(o?o[1]:""))))},t.prototype.publishStateHandle=function(e,t,r,n,o,s){var a=this;this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" call "+t+" "+(r?r.code+"":"")+" "+n+" "+JSON.stringify(o)+" "+s);var u=n||this.RETRY_MAX_TIME<3;if(!u&&r&&(c.ClientUtil.isReDispatch(r)||0==this.serverUrls.length))return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" stop "+u+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPublishStateUpdate(e,t,r);var d=this.streamCenter.publisherList[t],h=d.publisher;if(!u&&r&&0!==r.code){this.maxTimer||u||this.startMaxTime(),this.stateCenter.publishStreamList[t].state=i.ENUM_PUBLISH_STREAM_STATE.retryPublish;var p=h.localStream,f=h.videoInfo,g=h.mediaStreamConfig,m=h.publishOption;if(0!=h.sessionId&&h.signal&&h.shouldSendCloseSession()&&(h.signal.sendCloseSession((0,i.getSeq)(),h.sessionId,1),h.signal.removeSession(h.sessionId),h.closeSessionSignal=!0),h.resetPublish(),!u&&!this.retryNextSignal(r)){if(this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" retry current signal "),this.rePublishSpan(t,r,h),d.isCenterNode){this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" current node "+h.gwNode+" failed "+JSON.stringify(h.retryFailGwNodes));var v=h.retryFailGwNodes.findIndex((function(e){return e===h.gwNode}));v>=0&&h.retryFailGwNodes.splice(v,1),h.retryFailGwNodes.push(h.gwNode),this.retryNewGwNode(h,r,o,s)}return this.startRetryTimer=setTimeout((function(){a.startRetryTimer&&clearTimeout(a.startRetryTimer),a.startRetryTimer=null,h.startPublish(t,p,f,g,m)}),1e3),void(r&&0!==r.code&&this.streamCenter.onPublishStateUpdate(2,t,r))}this.streamCenter.removeStreamFromSignal(!0,t)}if(u)return this.stopMaxTime(),this.invalid(),1===e&&h.resetPublish(),(null==r?void 0:r.code)&&this.stateCenter.reporter.spanSetAttributes({key:h.parentSpanKey,par:t},r),void this.streamCenter.onPublishStateUpdate(e,t,r);r&&0!==r.code&&this.activePublish(void 0)&&(h&&(h.isExternal=!1),this.rePublishSpan(t,r,h),this.streamCenter.onPublishStateUpdate(2,t,r)),this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" end "+t)},t.prototype.needReDispatchError=function(e){return[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetProbePoor.code].includes(e.code)},t.prototype.playStateHandle=function(e,t,r,n,o,s){var a=this;this.logger.info(l.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" call "+t+" "+(r?r.code+"":"")+" "+n+" "+JSON.stringify(o)+" "+s);var u=n||this.RETRY_MAX_TIME<3;if(!u&&r&&(c.ClientUtil.isReDispatch(r)||0==this.serverUrls.length))return this.logger.info(l.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" stop "+u+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPlayStateUpdate(e,t,r);var d=this.streamCenter.playerList[t],h=d.player;if(!u&&r&&0!==r.code){!this.maxTimer&&!u&&this.startMaxTime();var p=h.playOption;if(0!=h.sessionId&&h.signal&&h.shouldSendCloseSession()&&(h.signal.sendCloseSession((0,i.getSeq)(),h.sessionId,1),h.signal.removeSession(h.sessionId),h.closeSessionSignal=!0),h.resetPlay(),!u&&!this.retryNextSignal(r)){if(this.logger.info(l.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" retry current signal "),d.isCenterNode){this.logger.info(l.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" current node "+h.gwNode+" "+JSON.stringify(h.retryFailGwNodes));var f=h.retryFailGwNodes.findIndex((function(e){return e===h.gwNode}));f>=0&&h.retryFailGwNodes.splice(f,1),h.retryFailGwNodes.push(h.gwNode),this.retryNewGwNode(h,r,o,s)}return this.rePlaySpan(t,r,h),this.startRetryTimer=setTimeout((function(){a.startRetryTimer&&clearTimeout(a.startRetryTimer),a.startRetryTimer=null,h.startPlay(t,h.getRemoteStreamSuc,p)}),1e3),void(r&&0!==r.code&&this.streamCenter.onPlayStateUpdate(2,t,r))}this.streamCenter.removeStreamFromSignal(!1,t)}if(u)return this.stopMaxTime(),this.invalid(),(null==r?void 0:r.code)&&this.stateCenter.reporter.spanSetAttributes({key:h.parentSpanKey,par:t},{error:null==r?void 0:r.code}),void this.streamCenter.onPlayStateUpdate(e,t,r);r&&0!==r.code&&this.activePull(void 0)&&(h&&(h.isExternal=!1),(0,i.getReportSeq)(),this.rePlaySpan(t,r,h),this.streamCenter.onPlayStateUpdate(2,t,r)),this.logger.info(l.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" end "+t)},t.prototype.retryNewGwNode=function(e,t,r,n){var o,i,s,a;if(this.logger.info(l.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" call "+e.streamId),t&&t.code&&this.needReDispatchError(t))this.retryNextGwNode(e,!0,n);else if(null==r?void 0:r.action)switch(null==r?void 0:r.action){case 1:case 5:break;case 2:default:this.retryNextGwNode(e,!1,n);break;case 3:var c=null==r?void 0:r.ins;c&&c.length>0&&(e.gwNode=((null===(o=c[0])||void 0===o?void 0:o.IP)||(null===(i=c[0])||void 0===i?void 0:i.ip))+":"+((null===(s=c[0])||void 0===s?void 0:s.Port)||(null===(a=c[0])||void 0===a?void 0:a.port)));break;case 4:e.resetGwNodes(),this.streamCenter.clearCachedGwNodesList(e,this.isPublish)}else this.retryNextGwNode(e,!1,n);this.logger.info(l.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE+" "+e.streamId+" new node "+e.gwNode)},t.prototype.retryNextGwNode=function(e,t,r){var n;if(this.logger.info(l.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+e.streamId+" "+e.gwNode),0!==(null===(n=e.gwNodeList)||void 0===n?void 0:n.length)||e.gwNode){var o=e.gwNodesTTL<(new Date).getTime(),i=e.iceStateDisConnect&&this.stateCenter.isMultiOuter,s=e.gwNodeList.findIndex((function(t){return t==e.gwNode})),a=s===e.gwNodeList.length-1;this.logger.info(l.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" "+e.streamId+" ttl: "+o+" ice: "+i+" last: "+a),t||o||e.isLastConnected&&i||a?e.resetGwNodes():e.gwNode=r?e.gwNodeList[0]:e.gwNodeList[++s%e.gwNodeList.length]}else this.logger.info(l.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE+" call "+e.streamId+" gwNodeList is empty")},t.prototype.rePublishSpan=function(e,t,r){null==r||r.uploadRTCPublishStats(),this.stateCenter.reporter.spanEnd({key:a.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:e},{error:null==t?void 0:t.code,message:null==t?void 0:t.message}),this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e},{key:a.ZegoRTCLogEvent.kZegoRePublish.event,par:e},a.ZegoRTCLogEvent.kZegoRePublish.event,!0),!1===(null==r?void 0:r.isRePublish)&&this.stateCenter.reporter.spanSetAttributes({key:d.event,par:e},{retry_btime:d.retry_btime((new Date).getTime())}),r&&(r.isRePublish=!0,r.parentSpanKey=a.ZegoRTCLogEvent.kZegoRePublish.event)},t.prototype.rePlaySpan=function(e,t,r){null==r||r.uploadRTCPlayStats(),this.stateCenter.reporter.spanEnd({key:a.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:e},{error:null==t?void 0:t.code,message:null==t?void 0:t.message}),this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H,{key:a.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:a.ZegoRTCLogEvent.kZegoRePlay.event,par:e},a.ZegoRTCLogEvent.kZegoRePlay.event,!0),!1===(null==r?void 0:r.isRePlay)&&this.stateCenter.reporter.spanSetAttributes({key:h.event,par:e},{retry_btime:h.retry_btime((new Date).getTime())}),r&&(r.isRePlay=!0,r.parentSpanKey=a.ZegoRTCLogEvent.kZegoRePlay.event)},t}(s.RetryHandler);t.RetryStreamHandler=p},1691:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatewaySignal=void 0;var i=r(6348),s=r(608),a=r(1358),l=function(){function e(e){this.streamSignal=e,this.callbackMap={}}return e.prototype.mediaStreamSEIUUIDReq=function(e,t,r,l){return n(this,void 0,void 0,(function(){var n=this;return o(this,(function(o){return[2,new Promise((function(o,c){var u=i.webrtc_cmd.WebrtcCmdReqMsg.encode({usr_sei_filter:{sei_filter:l}}).finish(),d=s.ClientUtil.uint8arrayToBase64(u);n.streamSignal.sendGWCmd(e,t,{peer_id:r,cmd_id:5,body:d},(function(e,t,r){var n=a.WebRTCUtil.base64ToUint8Array(r.body),s=i.webrtc_cmd.WebrtcCmdRspMsg.decode(n);o(s)}),(function(e){c(e)}))}))]}))}))},e.prototype.metadataAck=function(e,t,r){return n(this,void 0,void 0,(function(){var n,a;return o(this,(function(o){return n=i.webrtc_cmd.WebrtcCmdRspMsg.encode({meta_data_ack:{result:1}}).finish(),a=s.ClientUtil.uint8arrayToBase64(n),this.streamSignal.sendGWAck(e,t,{peer_id:r,cmd_id:1,body:a}),[2]}))}))},e.prototype.registerPushCallback=function(e,t,r){var n,o=this,s=this.callbackMap[t];s?s[e]=r:(this.callbackMap[t]=((n={})[e]=r,n),this.streamSignal.registerPushCallback("CmdPush",t,(function(e,t,r){var n=a.WebRTCUtil.base64ToUint8Array(r.body),s=i.webrtc_cmd.WebrtcCmdReqMsg.decode(n),l=Object.keys(s)[0];console.error("CmdPush",l,s),l=l||"meta_data_push";var c=o.callbackMap[t];if(c){var u=c[l];u&&u(e,t,r.body)}})))},e.prototype.unregisterPushCallback=function(e,t){var r=this.callbackMap[t];r&&(delete r[e],0===Object.keys(r).length&&(this.streamSignal.unregisterPushCallback("CmdPush",t),delete this.callbackMap[t]))},e}();t.GatewaySignal=l},6454:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=void 0;var n=r(2608);t.translate=function(e,t,r){if(0===e)return"";var o=1,i="  Here are some explanations about the error code: ".concat(o++,". reason=").concat(e,": ").concat(function(e){switch(e){case n.CloseReason.PEER_CLOSE_REASON_NORMAL:return"Client voluntarily exits.";case n.CloseReason.PEER_CLOSE_REASON_STATE_ERROR:return"Status error; Reason: Repeatedly received offer/answer, etc.";case n.CloseReason.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:return"Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";case n.CloseReason.PEER_CLOSE_REASON_VRS_PLAY_DENIED:return"Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";case n.CloseReason.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:return"No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";case n.CloseReason.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:return"No matching video codec; Reason: Client (Web) does not support h264 and vp8 etc.";case n.CloseReason.PEER_CLOSE_REASON_SDP_INVALID:return"SDP parsing error; Reason: SDP format error.";default:return"unknown"}}(e));return t&&(i+=" ".concat(o++,". action=").concat(t,": ").concat(function(e){switch(e){case n.DeniedAction.DENIED_ACTION_STOP:return"cancel pushing stream.";case n.DeniedAction.DENIED_ACTION_RETRY_NEXT_IP:return"Try the next ip, if there is no next ip, re-request the route.";case n.DeniedAction.DENIED_ACTION_REDIRECT:return"Redirect to the ip address specified by data.";case n.DeniedAction.DENIED_ACTION_REDISPATCH:return"re-request route.";case n.DeniedAction.DENIED_ACTION_RETRY:return"retry current gateway node.";default:return"unknown"}}(t))),r&&(i+=" ".concat(o++,". err=").concat(r,": ").concat(function(e){switch(e){case n.DeniedError.DENIED_ERROR_DISPATCH_FAILED:return"media scheduling failed.";case n.DeniedError.DENIED_ERROR_EMPTY_PUBLISH_IPS:return"empty publish ips error.";case n.DeniedError.DENIED_ERROR_EMPTY_PLAY_IPS:return"empty play ips error.";case n.DeniedError.DENIED_ERROR_STREAM_NOT_EXSIT:return"stream does not exist.";case n.DeniedError.DENIED_ERROR_APP_NOT_ONLINE:return"APP has been removed.";case n.DeniedError.DENIED_ERROR_INVALID_PARAMETERS:return"invalid parameter.";case n.DeniedError.DENIED_ERROR_NO_CLIENTIP_SET:return"client ip is not set.";case n.DeniedError.DENIED_ERROR_PERMISSION_DENIED:return"No permission, access denied.";case n.DeniedError.DENIED_ERROR_SET_STREAM_INFO_FAILED:return"Failed to set stream information.";case n.DeniedError.DENIED_ERROR_INTERNAL_ERROR:return"internal error / server busy.";case n.DeniedError.DENIED_ERROR_PUBLISH_FORBIDDEN:return"Streaming is banned.";case n.DeniedError.DENIED_ERROR_NEW_PUBLISH:return"new publish error.";case n.DeniedError.DENIED_ERROR_INNER_ERROR:return"inner error.";case n.DeniedError.DENIED_ERROR_MANAGER_STOP:return"manager stop error.";case n.DeniedError.DENIED_ERROR_PUBLISH_AUTH_FAILED:return"Stream push authentication failed.";case n.DeniedError.DENIED_ERROR_PLAY_AUTH_FAILED:return"Stream pull authentication failed.";case n.DeniedError.DENIED_ERROR_SERVER_STOP:return"server stoped error.";case n.DeniedError.DENIED_ERROR_SESSION_ID:return"session id error.";case n.DeniedError.DENIED_ERROR_MANAGER_TIMEOUT:return"manager timeout.";case n.DeniedError.DENIED_ERROR_NEW_PUBLISH_SRC:return"new publish src.";case n.DeniedError.DENIED_ERROR_PLAY_SESSION_LIMIT:return"Pull session limit.";case n.DeniedError.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:return"disable ip port flexible.";case n.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_TS:return"packet illegal ts.";case n.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_ADDR:return"packet illegal address.";case n.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:return"packet illegal format.";case n.DeniedError.DENIED_ERROR_CHECK_ADDR_TIMEOUT:return"Check address timed out.";case n.DeniedError.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:return"Check Address Illegal Signature.";case n.DeniedError.DENIED_ERROR_CHECK_ADDR_INCONSTANT:return"Check for address changes.";case n.DeniedError.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:return"SDP negotiation timed out, check whether the SDP is sent successfully.";case n.DeniedError.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:return"Address negotiation timed out, check whether the Candidate is sent successfully.";case n.DeniedError.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:return"The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";case n.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:return"The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";case n.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:return"The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";case n.DeniedError.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:return"Streaming encryption failed";case n.DeniedError.DENIED_ERROR_WEBRTC_HB_TIMEOUT:return"The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";case n.DeniedError.DENIED_ERROR_WEBRTC_CONNECTION_LOST:return"The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";case n.DeniedError.DENIED_ERROR_WEBRTC_NEW_SRC:return"After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";default:return"unknown"}}(r))),i}},2608:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeniedError=t.DeniedAction=t.CloseReason=void 0,function(e){e[e.PEER_CLOSE_REASON_NORMAL=0]="PEER_CLOSE_REASON_NORMAL",e[e.PEER_CLOSE_REASON_STATE_ERROR=5]="PEER_CLOSE_REASON_STATE_ERROR",e[e.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED=15]="PEER_CLOSE_REASON_VRS_PUBLISH_DENIED",e[e.PEER_CLOSE_REASON_VRS_PLAY_DENIED=18]="PEER_CLOSE_REASON_VRS_PLAY_DENIED",e[e.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH=21]="PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH",e[e.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH=22]="PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH",e[e.PEER_CLOSE_REASON_SDP_INVALID=23]="PEER_CLOSE_REASON_SDP_INVALID"}(t.CloseReason||(t.CloseReason={})),function(e){e[e.DENIED_ACTION_STOP=1]="DENIED_ACTION_STOP",e[e.DENIED_ACTION_RETRY_NEXT_IP=2]="DENIED_ACTION_RETRY_NEXT_IP",e[e.DENIED_ACTION_REDIRECT=3]="DENIED_ACTION_REDIRECT",e[e.DENIED_ACTION_REDISPATCH=4]="DENIED_ACTION_REDISPATCH",e[e.DENIED_ACTION_RETRY=5]="DENIED_ACTION_RETRY"}(t.DeniedAction||(t.DeniedAction={})),function(e){e[e.DENIED_ERROR_DISPATCH_FAILED=1001]="DENIED_ERROR_DISPATCH_FAILED",e[e.DENIED_ERROR_EMPTY_PUBLISH_IPS=1002]="DENIED_ERROR_EMPTY_PUBLISH_IPS",e[e.DENIED_ERROR_EMPTY_PLAY_IPS=1003]="DENIED_ERROR_EMPTY_PLAY_IPS",e[e.DENIED_ERROR_STREAM_NOT_EXSIT=1004]="DENIED_ERROR_STREAM_NOT_EXSIT",e[e.DENIED_ERROR_APP_NOT_ONLINE=1005]="DENIED_ERROR_APP_NOT_ONLINE",e[e.DENIED_ERROR_INVALID_PARAMETERS=1006]="DENIED_ERROR_INVALID_PARAMETERS",e[e.DENIED_ERROR_NO_CLIENTIP_SET=1007]="DENIED_ERROR_NO_CLIENTIP_SET",e[e.DENIED_ERROR_PERMISSION_DENIED=1008]="DENIED_ERROR_PERMISSION_DENIED",e[e.DENIED_ERROR_SET_STREAM_INFO_FAILED=1009]="DENIED_ERROR_SET_STREAM_INFO_FAILED",e[e.DENIED_ERROR_INTERNAL_ERROR=1010]="DENIED_ERROR_INTERNAL_ERROR",e[e.DENIED_ERROR_PUBLISH_FORBIDDEN=1011]="DENIED_ERROR_PUBLISH_FORBIDDEN",e[e.DENIED_ERROR_NEW_PUBLISH=1012]="DENIED_ERROR_NEW_PUBLISH",e[e.DENIED_ERROR_INNER_ERROR=1013]="DENIED_ERROR_INNER_ERROR",e[e.DENIED_ERROR_MANAGER_STOP=1014]="DENIED_ERROR_MANAGER_STOP",e[e.DENIED_ERROR_PUBLISH_AUTH_FAILED=1015]="DENIED_ERROR_PUBLISH_AUTH_FAILED",e[e.DENIED_ERROR_PLAY_AUTH_FAILED=1016]="DENIED_ERROR_PLAY_AUTH_FAILED",e[e.DENIED_ERROR_SERVER_STOP=2001]="DENIED_ERROR_SERVER_STOP",e[e.DENIED_ERROR_SESSION_ID=2002]="DENIED_ERROR_SESSION_ID",e[e.DENIED_ERROR_MANAGER_TIMEOUT=2003]="DENIED_ERROR_MANAGER_TIMEOUT",e[e.DENIED_ERROR_NEW_PUBLISH_SRC=2004]="DENIED_ERROR_NEW_PUBLISH_SRC",e[e.DENIED_ERROR_PLAY_SESSION_LIMIT=2005]="DENIED_ERROR_PLAY_SESSION_LIMIT",e[e.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE=2006]="DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE",e[e.DENIED_ERROR_PACKET_ILLEGAL_TS=2007]="DENIED_ERROR_PACKET_ILLEGAL_TS",e[e.DENIED_ERROR_PACKET_ILLEGAL_ADDR=2008]="DENIED_ERROR_PACKET_ILLEGAL_ADDR",e[e.DENIED_ERROR_PACKET_ILLEGAL_FORMAT=2009]="DENIED_ERROR_PACKET_ILLEGAL_FORMAT",e[e.DENIED_ERROR_CHECK_ADDR_TIMEOUT=2010]="DENIED_ERROR_CHECK_ADDR_TIMEOUT",e[e.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE=2011]="DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE",e[e.DENIED_ERROR_CHECK_ADDR_INCONSTANT=2012]="DENIED_ERROR_CHECK_ADDR_INCONSTANT",e[e.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT=3e3]="DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT=3001]="DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED=3002]="DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED",e[e.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED=3003]="DENIED_ERROR_WEBRTC_DTLS_HS_FAILED",e[e.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT=3004]="DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED=3005]="DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED",e[e.DENIED_ERROR_WEBRTC_HB_TIMEOUT=3006]="DENIED_ERROR_WEBRTC_HB_TIMEOUT",e[e.DENIED_ERROR_WEBRTC_CONNECTION_LOST=3007]="DENIED_ERROR_WEBRTC_CONNECTION_LOST",e[e.DENIED_ERROR_WEBRTC_NEW_SRC=3008]="DENIED_ERROR_WEBRTC_NEW_SRC"}(t.DeniedError||(t.DeniedError={}))},908:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCModules=void 0;var s=r(6706),a=r(6706),l=r(6706),c=r(3529),u=r(608),d=r(7560),h=r(361),p=r(4865),f=r(1089),g=r(2752),m=r(9595),v=c.ZegoRTCLogEvent.kZegoStartPlay,_=function(){function e(e,t,r,n,o,i,s){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.rtm=o,this.ac=i,this.zegoWebRtc=s,this.mediaEleSources=[],this.publishModule=new h.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm,this.zegoWebRtc),this.playModule=new p.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.initAdvance(),this.initStreamCommon(),this.initAudioMix(),this.init()}return e.prototype.init=function(){this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler()},e.prototype.initAudioMix=function(){},e.prototype.initAdvance=function(){},e.prototype.initStreamCommon=function(){},e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);window.addEventListener(t?"pagehide":"firefox"===this.stateCenter.browser?"beforeunload":"unload",(function(){for(var t in window.event&&(window.event.cancelBubble=!0),e.streamCenter.publisherList)e.publishModule.stopPublishingStream(t);for(var t in e.streamCenter.playerList)e.playModule.stopPlayingStream(t)})),window.addEventListener("message",(function(t){var r=t.data,n=r.type;"SS_DIALOG_SUCCESS"===n&&e.screenStreamFrom(r.streamId,r.canRequestAudioTrack,u.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)),"SS_DIALOG_CANCEL"===n&&u.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)(!1,null,n)})),window.addEventListener("offline",(function(){if(e.logger.info("zc.off.0 network is broken"),e.stateCenter.networkState=l.ENUM_NETWORK_STATE.offline,e.stateCenter.useNetAgent)e.logger.info("zc.off.0 use netAgent");else{for(var t in e.streamCenter.publisherList)(n=e.streamCenter.publisherList[t].retryStreamHandler).startMaxTime(),n.invalid();for(var t in e.streamCenter.playerList){var r=e.streamCenter.playerList[t],n=r.retryStreamHandler;r.playMode==s.PlayMode.CDN&&r.cdnPlayer&&(r.cdnPlayer.canRetry=!1),n.startMaxTime(),n.invalid()}}})),window.addEventListener("online",(function(t){for(var r in e.logger.info("zc.on.0 network is online"),e.stateCenter.networkState=l.ENUM_NETWORK_STATE.online,e.streamCenter.publisherList){var n=e.streamCenter.publisherList[r].publisher,o=e.streamCenter.publisherList[r].retryStreamHandler;n.state==l.ENUM_PUBLISH_STATE.stop||n.stateNego!==l.ENUM_PUBLISH_STATE_NEGO.iceConnected?!o.isOverTime&&o.publishStateHandle(l.ENUM_PUBLISH_STATE_UPDATE.error,r,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError):n.state==l.ENUM_PUBLISH_STATE.publishing&&o.stopMaxTime()}for(var r in e.streamCenter.playerList){var i=e.streamCenter.playerList[r].player,a=e.streamCenter.playerList[r].playMode,u=(o=e.streamCenter.playerList[r].retryStreamHandler,e.streamCenter.playerList[r].cdnPlayer);a==s.PlayMode.CDN&&u&&(u.canRetry=!1),i.state==l.ENUM_PLAY_STATE.stop||a!==s.PlayMode.CDN&&i.stateNego!==l.ENUM_PLAY_STATE_NEGO.iceConnected?!o.isOverTime&&o.playStateHandle(l.ENUM_PLAY_STATE_UPDATE.error,r,c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError):i.state==l.ENUM_PLAY_STATE.playing&&o.stopMaxTime()}})),document.addEventListener("visibilitychange",(function(t){var r;r="visible"===document.visibilityState?"foreground":"background";var n=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoAppLifeCycle.event);n.setAttribute("state",c.ZegoRTCLogEvent.kZegoAppLifeCycle.state(r)),n.end()})),"safari"==this.stateCenter.browser&&(window.addEventListener("pagehide",(function(t){var r=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoAppLifeCycle.event);r.setAttribute("state",c.ZegoRTCLogEvent.kZegoAppLifeCycle.state("background")),r.end()})),window.addEventListener("pageshow",(function(t){var r=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoAppLifeCycle.event);r.setAttribute("state",c.ZegoRTCLogEvent.kZegoAppLifeCycle.state("foreground")),r.end()})))},e.prototype.bindRTMListener=function(){var e,t,r=this;this.rtm._on("_settingCanFetch",(function(e){return o(r,void 0,void 0,(function(){var e=this;return i(this,(function(t){return this.rtm.cloudSetting.fetchSetting(m.RTC).then((function(t){e.logger.info("zc.scf stream config "+JSON.stringify(t)),t&&e.stateCenter.settingConfig.setSetting(t.setting,["auto_to_tcp","udp_max_fail_num","probe_started_num","hardware_encode","camera_hard_encode","custom_hard_encode","camera_width","camera_height","camera_framerate","camera_audio_bitrate","camera_video_bitrate"]),e.rtm._on("_cloudSettingNotify",(function(e,t){}))})),[2]}))}))})),this.rtm._on("_appConfigRsp",(function(){r.stateCenter.appConfig=r.rtm.getAppConfig(),r.publishModule.startWaitPublish(),r.playModule.startWaitPlay()})),this.rtm._on("_roomLogin",(function(e,t){r.stateCenter.appid=r.rtm.getAppID(),r.stateCenter.idName=r.rtm.getUserID(),r.stateCenter.nickName=r.rtm.getUserName(),r.stateCenter.testEnvironment=r.rtm.isTestEnvironment(),r.stateCenter.isMultiRoom=r.rtm.getMultiRoom(),r.stateCenter.useNetAgent=r.rtm.getUseNetAgent(),r.streamCenter.setSessionInfo(r.stateCenter.appid,r.stateCenter.idName,r.stateCenter.testEnvironment);var n=r.stateCenter.getRoomByRoomID(e);if(!n){var o=new d.StreamHandler(r.logger,r.stateCenter,r.rtm,r.streamCenter,e);r.bindStreamHandler(o),r.stateCenter.roomList.push(n={roomID:e,streamHandler:o,sessionID:"",roomSessionID:"",token:t,isResetRoom:!1,streamList:[],streamInfoList:[]})}})),this.rtm._on("roomLoginResponse",(function(e){r.logger.info("zc.rlr call "+JSON.stringify(e));var t=e.header.room_id||e.body.room_id;r.stateCenter.appConfig=r.rtm.getAppConfig();var n=r.rtm.getToken(t),o=r.rtm.getSessionId(t),i=r.rtm.getRoomSessionID(t),s=r.stateCenter.getRoomByRoomID(t);if(!s){var a=new d.StreamHandler(r.logger,r.stateCenter,r.rtm,r.streamCenter,t);r.bindStreamHandler(a),r.stateCenter.roomList.push(s={roomID:t,streamHandler:a,sessionID:o,roomSessionID:i,token:n,isResetRoom:!1,streamList:[],streamInfoList:[]})}if(s.sessionID=o,s.roomSessionID=i,r.stateCenter.tempRoomList.length>0)for(var l=function(e){var t=r.stateCenter.tempRoomList[e],n=t.roomID,o=t.streamList,i=r.stateCenter.roomList.find((function(e){return e.roomID===n}));i&&(i.streamList=o.filter((function(e){var t=r.streamCenter.stopedPlayerList[null==e?void 0:e.stream_id];return!!(t&&t.state<=6)})),r.stateCenter.tempRoomList[e].streamList=[])},c=0;c<r.stateCenter.tempRoomList.length;c++)l(c);if(1===e.body.stream_fetch_flag)return r.logger.info("zc.rlr stream fetch "+t),s.streamHandler.room=s,void s.streamHandler.fetchStreamList();s.streamHandler.handleStreamStart(e,s),r.logger.info("zc.rlr end "+t)})),this.rtm._on("_connectChanged",(function(e,t){r.logger.info("zc.cc.0 "+e+" "+JSON.stringify(t)),"connecting"===e?r.stateCenter.connectChanged=!0:"connected"===e&&(r.stateCenter.connectChanged=!1,r.stateCenter.useNetAgent=r.rtm.getUseNetAgent(),r.handleWaitPublishAndPlays(t))})),this.rtm._on("HBResponse",(function(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,o=r.stateCenter.getRoomByRoomID(n);null==o||o.streamHandler.patchStreamList(e)})),this.rtm._on("_roomStateUpdate",(function(e,t,n,o,i){if("CONNECTED"===t&&r.stateCenter.billingTimer.shouldReportRoomTime&&r.stateCenter.billingTimer.startChargeInfosUpload(),"DISCONNECTED"==t){r.logger.info("zc.rsu "+e+" disconnected "+(n?n+" ":"")+(o||"")+i),r.stateCenter.billingTimer.stopChargeInfosUpload();var s=r.stateCenter.getRoomByRoomID(e);if(s){var a=r.stateCenter.roomList.findIndex((function(t){return t.roomID==e}));s.isResetRoom=!0,s.streamHandler.reset(),r.streamCenter.reset(e,n,i),r.stateCenter.roomList.splice(a,1),i?r.stateCenter.tempRoomList.push(s):r.stateCenter.tempRoomList=r.stateCenter.tempRoomList.filter((function(t){return t.roomID!==e}))}}else r.logger.info("zc.rsu "+e+" state: "+t)})),this.rtm._on("_tokenRenewed",(function(e,t){r.logger.info("zc.tr roomID:"+t+" "+e);var n=r.stateCenter.getRoomByRoomID(t);n&&(n.token=e)})),this.rtm._on("_tokenExpired",(function(e){var t,n;((null===(n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.stop_stream)||void 0===n?void 0:n.stream_id_list)||[]).forEach((function(e){r.publishModule.stopPublishingStream(e,g.errorCodeList.TOKEN_EXPIRED)}))})),this.rtm.liveRoomHandler.handlePushStreamMsg=function(e){e.body.stream_cmd=a.streamMap[e.header.sub_cmd],r.handlePushStreamMsg(e)},null===(e=this.rtm.service)||void 0===e||e.on("push_stream_update",(function(e){r.handlePushStreamMsg(e)})),null===(t=this.rtm.service)||void 0===t||t.on("zegochat_js.push_room_stream_update_req",(function(e){var t,n=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",o=r.stateCenter.getRoomByRoomID(n);o?o.streamHandler.handlePriPushStreamUpdateMsg(e):r.logger.error(f.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")}))},e.prototype.handleWaitPublishAndPlays=function(e){for(var t=Object.keys(this.stateCenter.waitPublishStreamList),r=0;r<t.length;r++){var n=t[r],o=this.stateCenter.waitPublishStreamList[n],i=o.localStream,s=o.publishOption,a=o.isDataChannel;if(o.retryStart){if(s.roomID&&s.roomID!==(null==e?void 0:e.roomID)){this.logger.info("zc.hwpap.0 room not connect");continue}this.publishModule.startPublishingStream(n,i,s,a),delete this.stateCenter.waitPublishStreamList[n]}}},e.prototype.handlePushStreamMsg=function(e){var t,r=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",n=this.stateCenter.getRoomByRoomID(r),o=this.rtm.getMsgSpan(c.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.event,r);if(!n)return this.stateCenter.reporter.setError(o,c.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.error.ROOM_NOT_EXIST),void this.logger.error(f.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE+" room no found");var i="";switch(e.body.stream_cmd){case a.ENUM_STREAM_UPDATE_CMD.added:i="add";break;case a.ENUM_STREAM_UPDATE_CMD.deleted:i="delete";break;case a.ENUM_STREAM_UPDATE_CMD.updated:i="update"}var s=e.body.stream_info.map((function(e){return{stream_id:e.stream_id,stream_extra_info:e.extra_info,id_name:e.id_name||e.anchor_id_name}}));o.setAttributes({stream_update_type:c.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_update_type(i),stream_seq:e.body.stream_seq,stream_list:c.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_list(s)}),o.end(),n.streamHandler.handlePushStreamUpdateMsg(e)},e.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,r,n,o){var i,s,l,d,h,p,f,g,m,_,y,b,E,S,C,T,w,R,k=e.streamCenter.playerList[r];if(1==t&&k&&u.ClientUtil.isReDispatch(n)){var O=k.player,I=k.retryDispatchHandler,P=k.playOption;return 0!=O.sessionId&&O.signal&&O.shouldSendCloseSession()&&(O.signal.sendCloseSession(e.stateCenter.getSeq(),O.sessionId,1),O.signal.removeSession(O.sessionId),O.closeSessionSignal=!0),O.resetPlay(),I.stopMaxTime(),I.invalid(),I.initStream(r,P,!1),void(e.rtm.isLogin()?(I.startMaxTime(),I.active(0)):e.streamCenter.playerList[r].isReDispatch=!0)}if(k&&k.player&&(0==t||1==t)){var A=k.player.isRePlay?c.ZegoRTCLogEvent.kZegoRePlay:c.ZegoRTCLogEvent.kZegoStartPlay;1==t&&n&&e.stateCenter.reporter.spanSetAttributes({key:A.event,par:r},{error:n.code,message:n.message}),e.stateCenter.reporter.spanEnd({key:A.event,par:r},{url:v.url(null===(s=null===(i=null==k?void 0:k.player)||void 0===i?void 0:i.signal)||void 0===s?void 0:s.server),ip:v.ip(null===(l=null==k?void 0:k.player)||void 0===l?void 0:l.ip),peer_id:v.peer_id(null===(d=null==k?void 0:k.player)||void 0===d?void 0:d.peerID),source_type:v.source_type((0,u.getPlaySourceType)(null===(h=null==k?void 0:k.player)||void 0===h?void 0:h.resourceMode)),net_protocol:v.net_protocol(null===(p=null==k?void 0:k.player)||void 0===p?void 0:p.netProtocol),signal_consume:v.signal_consume(null===(f=null==k?void 0:k.player)||void 0===f?void 0:f.signalTime),is_center:v.is_center(null==k?void 0:k.isCenterNode)}),e.stateCenter.reporter.spanEnd({key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:r},{error:n.code,message:n.message},!0)}if(0!=t||(null==o?void 0:o.isCDN))1!=t||(null==o?void 0:o.isCDN)||(null===(T=null==k?void 0:k.player)||void 0===T||T.uploadRTCPlayStats(),e.stateCenter.reporter.spanEnd({key:c.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:r},{stop_reason:c.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(null===(w=null==k?void 0:k.player)||void 0===w?void 0:w.stopReason),error:n.code,message:n.message}),k&&k.player&&(k.player.stopReason=""));else{var N=c.ZegoRTCLogEvent.kZegoTaskStreamPlay,L=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:r},{key:c.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:r},0===(null===(g=null==k?void 0:k.player)||void 0===g?void 0:g.resourceMode)?c.ZegoRTCLogEvent.kZegoTaskStreamPlay.event:c.ZegoRTCLogEvent.kZegoTaskL3Play.event,!0);k.player.rtcPlayCount++,L.setAttributes({tryidx:N.tryidx(k.player.rtcPlayCount),url:N.url(null===(_=null===(m=null==k?void 0:k.player)||void 0===m?void 0:m.signal)||void 0===_?void 0:_.server),ip:N.ip(null===(y=null==k?void 0:k.player)||void 0===y?void 0:y.ip),net_protocol:N.net_protocol(null===(b=null==k?void 0:k.player)||void 0===b?void 0:b.netProtocol),room_id:N.room_id(null===(E=null==k?void 0:k.room)||void 0===E?void 0:E.roomID),room_sid_string:N.room_sid_string(null===(S=null==k?void 0:k.room)||void 0===S?void 0:S.roomSessionID),env:N.env(e.stateCenter.testEnvironment?3:1),resource_type:N.resource_type((0,u.getPlaySourceType)(null===(C=null==k?void 0:k.player)||void 0===C?void 0:C.resourceMode)),protocol:N.protocol("webrtc"),dispatch_external_ip:N.dispatch_external_ip(e.stateCenter.clientIP),stream_id:N.stream_id(r)})}if(1===t&&e.streamCenter.playErrorCallBackList[r])e.stateCenter.connectChanged||(e.logger.info("zc.opsu.1 connect changed"),e.streamCenter.playErrorCallBackList[r]({errorCode:n&&n.code,extendedData:n&&n.message}),delete e.streamCenter.playErrorCallBackList[r]),e.logger.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(r,n);else{var M=u.ClientUtil.getPlayerStateType(t);(1===t||(null===(R=null==k?void 0:k.player)||void 0===R?void 0:R.updateCBState({state:M,code:n.code})))&&e.stateCenter.actionListener("playerStateUpdate",{state:M,streamID:r,errorCode:n&&n.code,extendedData:n&&n.message})}},this.streamCenter.onPublishStateUpdate=function(t,r,n){e.onPublishStateUpdateHandle(t,r,n)},this.streamCenter.onPublishQualityUpdate=function(t,r){e.stateCenter.actionListener("publishQualityUpdate",t,r)},this.streamCenter.onPlayQualityUpdate=function(t,r){e.stateCenter.actionListener("playQualityUpdate",t,r)},this.streamCenter.onRemoteCameraStatusUpdate=function(t,r,n){var o=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:t},{key:""},c.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event);o.setAttributes({stream_id:c.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream_id(t),camera_status:c.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.camera_status(r),status_code:c.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status_code(n)}),o.end(),e.stateCenter.actionListener("remoteCameraStatusUpdate",t,r),e.stateCenter.actionListener("_remoteCameraStatusUpdate",t,n)},this.streamCenter.onRemoteMicStatusUpdate=function(t,r,n){var o=e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:t},{key:""},c.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event);o.setAttributes({stream_id:c.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream_id(t),mic_status:c.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.mic_status(r),status_code:c.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status_code(n)}),o.end(),e.stateCenter.actionListener("remoteMicStatusUpdate",t,r),e.stateCenter.actionListener("_remoteMicStatusUpdate",t,n)},this.streamCenter.onSoundLevelUpdate=function(t){e.stateCenter.actionListener("soundLevelUpdate",t)},this.streamCenter.onMicSoundLevelUpdate=function(t){e.stateCenter.actionListener("capturedSoundLevelUpdate",t)}},e.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(e,r,n){var o=n.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo,urlsFLV:e.urlFlv,urlsRTMP:e.urlRtmp,urlsHLS:e.urlHls,urlsHttpsFLV:e.urlHttpsFlv,urlsHttpsHLS:e.urlHttpsHls}})),i={};if(0===r){var s=n.map((function(e){return{stream_id:e.streamID,code:l.STREAM_DELETE_REASON[e.closeType]&&l.STREAM_DELETE_REASON[e.closeType].code||0,description:l.STREAM_DELETE_REASON[e.closeType]&&l.STREAM_DELETE_REASON[e.closeType].description||"unknown"}}));i.stream_delete_reason=s}if(o.length>0&&t.stateCenter.actionListener("roomStreamUpdate",e,u.ClientUtil.getSteamUpdateType(r),o,Object.keys(i).length>0?JSON.stringify(i):""),n.length>0&&t.stateCenter.actionListener("_streamUpdated",r,n),1===r){var a=[];o.forEach((function(e){e.extraInfo&&a.push({streamID:e.streamID,user:e.user,extraInfo:e.extraInfo})})),a.length>0&&t.stateCenter.actionListener("streamExtraInfoUpdate",e,a)}},e.onPublishStateUpdate=function(e,r,o){var i,s,l,d,h,p,f,m,v,_,y,b,E,S,C,T;t.logger.info("zb.opsu ",r);var w=t.streamCenter.publisherList[r];if(w&&w.publisher&&(0==e||1==e)){var R=c.ZegoRTCLogEvent.kZegoStartPublish;t.stateCenter.reporter.spanEnd({key:(w.publisher.isRePublish?c.ZegoRTCLogEvent.kZegoRePublish:c.ZegoRTCLogEvent.kZegoStartPublish).event,par:r},{error:o.code,message:o.message,url:R.url(null===(s=null===(i=null==w?void 0:w.publisher)||void 0===i?void 0:i.signal)||void 0===s?void 0:s.server),ip:R.ip(null===(l=null==w?void 0:w.publisher)||void 0===l?void 0:l.ip),peer_id:R.peer_id(null===(d=null==w?void 0:w.publisher)||void 0===d?void 0:d.peerID),source_type:R.source_type("rtc"),net_protocol:R.net_protocol(null===(h=null==w?void 0:w.publisher)||void 0===h?void 0:h.netProtocol),is_center:R.is_center(null==w?void 0:w.isCenterNode)}),t.stateCenter.reporter.spanEnd({key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r},n({},o),!0)}var k=c.ZegoRTCLogEvent.kZegoTaskRTCPublish;if(0==e){var O=t.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:r},{key:k.event,par:r},k.event,!0);w.publisher.rtcPublishCount++,O.setAttributes({tryidx:k.tryidx(null==w?void 0:w.publisher.rtcPublishCount),url:k.url(null===(f=null===(p=null==w?void 0:w.publisher)||void 0===p?void 0:p.signal)||void 0===f?void 0:f.server),ip:k.ip(null===(_=null===(v=null===(m=null==w?void 0:w.publisher)||void 0===m?void 0:m.gwNode)||void 0===v?void 0:v.split(":"))||void 0===_?void 0:_[0]),net_protocol:k.net_protocol(null===(y=null==w?void 0:w.publisher)||void 0===y?void 0:y.netProtocol),dispatch_external_ip:k.dispatch_external_ip(t.stateCenter.clientIP),room_id:k.room_id(null===(b=null==w?void 0:w.room)||void 0===b?void 0:b.roomID),room_sid_string:k.room_sid_string(null===(E=null==w?void 0:w.room)||void 0===E?void 0:E.roomSessionID),resource_type:k.resource_type("rtc"),protocol:k.protocol("webrtc")})}else 1==e&&(1012===o.code?t.streamCenter.stopPublishingStream(r,o):2002===o.code&&(t.streamCenter.stopPublishingStream(r,o),o.code=g.errorCodeList.TOKEN_ERROR.code),null===(S=null==w?void 0:w.publisher)||void 0===S||S.uploadRTCPublishStats(),t.stateCenter.reporter.spanEnd({key:k.event,par:r},{stop_reason:k.stop_reason(null===(C=null==w?void 0:w.publisher)||void 0===C?void 0:C.stopReason),error:o.code,message:o.message}),w&&w.publisher&&(w.publisher.stopReason=""));var I=u.ClientUtil.getPublisherStateType(e);(1===e||(null===(T=null==w?void 0:w.publisher)||void 0===T?void 0:T.updateCBState({state:I,code:o.code})))&&t.stateCenter.actionListener("publisherStateUpdate",{state:I,streamID:r,errorCode:o.code,extendedData:o.message})},e.onStreamExtraInfoUpdated=function(e,r){var n=r.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}}));t.stateCenter.actionListener("streamExtraInfoUpdate",e,n)}},e.prototype.screenStreamFrom=function(e,t,r){var n={};n.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(n.audio=!1),navigator.mediaDevices.getUserMedia(n).then((function(e){r(!0,e)})).catch((function(e){r(!1,null,e)}))},e.prototype.onPublishStateUpdateHandle=function(e,t,r){var n=this;this.logger.info("zc.opsuh.0 call");var o=this.streamCenter.publisherList[t],i=o.room;if(i)if(0==e){if(this.stateCenter.publishStreamList[t]){var s=!i.streamList.find((function(e){return e.stream_id==t&&(e.anchor_id_name==n.stateCenter.idName||e.id_name==n.stateCenter.idName||e.user_id===n.stateCenter.idName)}));[l.ENUM_PUBLISH_STREAM_STATE.tryPublish,l.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[t].state)&&s?(this.stateCenter.publishStreamList[t].state=l.ENUM_PUBLISH_STREAM_STATE.update_info,i.streamHandler.updateStreamInfo(t,l.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[t].extra_info,(function(e){}))):(this.stateCenter.publishStreamList[t].state=l.ENUM_PUBLISH_STREAM_STATE.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,r))}}else{if(1==e&&o&&u.ClientUtil.isReDispatch(r)){var a=o.publisher,c=o.retryDispatchHandler,d=o.publishOption;return 0!=a.sessionId&&a.signal&&a.shouldSendCloseSession()&&(a.signal.sendCloseSession(this.stateCenter.getSeq(),a.sessionId,1),a.signal.removeSession(a.sessionId),a.closeSessionSignal=!0),a.resetPublish(),c.stopMaxTime(),c.invalid(),c.initStream(t,d,!0),void(this.rtm.isLogin()?(c.startMaxTime(),c.active(0)):this.streamCenter.publisherList[t].isReDispatch=!0)}i.streamHandler.onPublishStateUpdate(e,t,r),1==e&&(this.logger.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,r))}else this.logger.error("zc.opsuh.0 room not exist")},e.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,r){if(this.stateCenter.publishStreamList[t].state==l.ENUM_PUBLISH_STREAM_STATE.publishing){var n=this.streamCenter.getRoomByStreamID(t);n&&n.streamHandler.onPublishStateUpdate(e,t,r)}},e.prototype.bindListener=function(e,t){var r=this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskOnListener.event);return r.setAttributes({listener:e}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),this.stateCenter.reporter.setError(r,c.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),r.end(),!0):(this.logger.error("zc.o.0 event "+e+" no found"),this.stateCenter.reporter.setError(r,c.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM," event "+event+" no found"),!1)},e.prototype.deleteListener=function(e,t){var r=this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskListener.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskOffListener.event);if(r.setAttributes({listener:e}),!this.stateCenter.listenerList[e])return this.logger.error("zc.o.1 listener no found"),this.stateCenter.reporter.setError(r,c.ZegoRTCLogEvent.kZegoTaskOffListener.error.INPUT_PARAM," event "+event+" no found"),!1;this.logger.info("dc.o.1 "+"".concat(e," cb:")+typeof t);var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],r.end(),!0},e}();t.RTCModules=_},1177:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateCumulativeDuration=t.recordBreakDuration=t.onBreakEnd=void 0,t.onBreakEnd=function(e,t,r,n,o){if(void 0===o&&(o="video"),t.breakStartTime){var i=e-t.breakStartTime;i>=n&&(t.cumulativeBreakDuration+=i,r.breakDuration+=i),t.breakStartTime=void 0}},t.recordBreakDuration=function(e,r,n,o,i,s,a,l,c,u){if(void 0===c&&(c=l),void 0===u&&(u="video"),i>1e3&&(i=1e3),o.breakStartTime)if(n)0===r?(e-o.breakStartTime>=22e3&&(0,t.onBreakEnd)(e,o,a,i,u),s.breakDuration+=1e3):l>=i?l<500?l+c<1e3?((0,t.onBreakEnd)(e-(1e3-c),o,a,i,u),o.breakStartTime=e-l,s.breakDuration+=c+l,s.decodeTime+=1e3-(c+l)):((0,t.onBreakEnd)(e-1e3+c,o,a,i,u),o.breakStartTime=e-1e3+c,s.breakDuration+=1e3):l>=500&&((0,t.onBreakEnd)(e-l,o,a,i,u),o.breakStartTime=e-l,s.breakDuration+=1e3):c<=i?((0,t.onBreakEnd)(e-1e3+c,o,a,i,u),o.breakStartTime=void 0,s.breakDuration+=c,s.decodeTime+=1e3-c,a.decodeDuration+=1e3-c):s.breakDuration+=1e3;else{o.resumeRecv=!1;var d=e-1e3-o.breakStartTime;d<=0&&(d=0),o.breakStartTime=void 0,o.noBreakNoDecodeDuration+=d,s.breakCancelDuration+=d,a.blankDuration+=d}else n?0===r?o.resumeRecv?(o.breakStartTime=e-1e3,s.breakDuration+=1e3):(o.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):c>i?o.resumeRecv?(o.breakStartTime=e-c,o.cumulativeBreakDuration+=c,s.breakDuration+=c,s.decodeTime+=1e3-c,a.breakDuration+=c,a.decodeDuration+=1e3-c):(o.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):(s.decodeTime+=1e3,a.decodeDuration+=1e3):o.decodeStartTime&&(0===r?(o.resumeRecv=!1,o.noBreakNoDecodeDuration+=1e3,a.blankDuration+=1e3):(s.decodeTime+=1e3,a.decodeDuration+=1e3));n&&r&&(o.resumeRecv=!0)},t.calculateCumulativeDuration=function(e,t,r,n,o,i,s){if(void 0===s&&(s="video"),n=n>1e3?1e3:n,t.breakDuration=0,t.breakCancelDuration=0,t.decodeTime=0,r.decodeDuration=0,r.breakDuration=0,r.blankDuration=0,e.decodeStartTime){var a=i,l=a-e.decodeStartTime;if(e.decodeStartTime=void 0,e.totalDuration+=l,e.breakStartTime){var c=a-e.breakStartTime;e.breakStartTime=void 0,o?c>n&&(e.cumulativeBreakDuration+=c):e.noBreakNoDecodeDuration+=c}var u=e.cumulativeBreakDuration,d=e.totalDuration-e.cumulativeBreakDuration-e.noBreakNoDecodeDuration;return e.cumulativeDecodeDuration=d,{cumulativeBreakDuration:u,cumulativeDecodeDuration:d}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}}},4865:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayModule=void 0;var o=r(6706),i=r(1089),s=r(6706),a=r(3529),l=r(608),c=a.ZegoRTCLogEvent.kZegoTaskPlayStart,u=function(){function e(e,t,r,n,o){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.rtm=o}return e.prototype.startPlayingStream=function(e,t,r){var n=this;return this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call ",e),new Promise((function(o,i){return n._handlePlayStream(e,t,o,i,r)}))},e.prototype._handlePlayStream=function(e,t,r,u,d){var h,p=this,f=c,g=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I,{key:a.ZegoRTCLogEvent.kZMInitSetting.event},{key:c.event,par:e},c.event,!0),m=function(e,t){p.logger.error(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" "+(t||e.message)),p.stateCenter.reporter.setError(g,e),u&&u(n(n({},e),{errorCode:e.code,extendedData:e.message+(t?" "+t:"")}))};if(void 0===e||"string"!=typeof e||""===e)return m(f.error.kPlayParamError,"stream id type error"),!1;if(e.length>s.MAX_STREAM_ID_LENGTH)return m(f.error.kPlayStreamIDToLongError,"stream id length limit "+s.MAX_STREAM_ID_LENGTH),!1;if(!l.ClientUtil.checkIllegalCharacters(e))return m(f.error.kPlayStreamIDInvalidCharacterError),!1;if(void 0!==t&&"object"!=typeof t)return m(f.error.kPlayParamError,"playOption must be object"),!1;var v=(0,l.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,e),_=((h={})["_play_"+e]={stream_sid:v},h);this.stateCenter.reporter.setPublicPros(_);var y,b=n(n({},t),{CDNVideo:void 0,CDNPlayer:void 0});if(g.setAttributes({stream_id:c.stream_id(e),stream_sid:c.stream_sid(v),play_option:c.play_option(b),video_codec_id:c.video_codec_id(null==t?void 0:t.videoCodec),use_na:c.use_na(this.stateCenter.useNetAgent?1:0),biz_product:(null==t?void 0:t.resourceMode)==o.ResourceMode.DG?1:0}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),y=this.stateCenter.customUrl;else{var E=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);E&&E instanceof Array&&E.length>0&&(y=E,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(E)))}if(y){var S=this.streamCenter.setPlayStateStart(e,t,v,d);return!0!==S?(m(JSON.parse(JSON.stringify(S)),"cannot start play"),!1):(this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playerList[e].serverUrls=y,this.streamCenter.startPlayingStream(e,!1,(function(e){r&&r(e)})))}if(this.stateCenter.useNetAgent&&this.stateCenter.playAccelerate&&this.stateCenter.roomList.length>0)this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" play accelerate");else if(this.rtm.isDisConnect())return m(f.error.kPlayNoLoginError),!1;this.stateCenter.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var C=this.stateCenter.settingConfig.getSetting("resource_mode",!0);void 0!==C&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM," setting resource_mode "+C),!t&&(t={}),t.resourceMode=C);var T=this.streamCenter.setPlayStateStart(e,t,v,d);if(!0!==T)return m(JSON.parse(JSON.stringify(T)),"cannot start play"),!1;if(this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playSuccessCallBackList[e]=function(e){r&&r(e)},u&&(this.streamCenter.playErrorCallBackList[e]=u),t&&t.resourceMode&&[1,3].includes(t.resourceMode)&&this.streamCenter.playerList[e].playMode==o.PlayMode.CDN)return this.streamCenter.startPlayingStream(e,this.stateCenter.useNetAgent,this.streamCenter.playSuccessCallBackList[e],!0);var w=a.ZegoRTCLogEvent.kZegoStartPlay;this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:c.event,par:e},{key:w.event,par:e},w.event,!0).setAttributes({reason:w.reason("StartPlay")});var R=this.stateCenter.useNetAgent;if(R)return this.stateCenter.appConfig?(this.streamCenter.playerList[e].serverUrls=2===(null==t?void 0:t.resourceMode)?["unified_l3"]:["unified_rtc"],this.streamCenter.startPlayingStream(e,R,this.streamCenter.playSuccessCallBackList[e]),!0):(this.streamCenter.waitPlayList.push(e),!0);var k=this.streamCenter.playerList[e].retryDispatchHandler;return k.stopMaxTime(),k.invalid(),k.initStream(e,t,!1),k.startMaxTime(),k.active(0)},e.prototype.stopPlayingStream=function(e,t){var r,n,l,c;this.logger.info(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call",e);var u=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I,{key:a.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},a.ZegoRTCLogEvent.kZegoTaskPlayStop.event);if("string"!=typeof e||""===e)return this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" streamid must be string and not empty"),this.stateCenter.reporter.setError(u,a.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError,"stream id type error"),void delete this.stateCenter.reportSeqList.stopPlay[e];var d=this.streamCenter.playerList[e];u.setAttributes({stream_id:a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_id(e),room_id:a.ZegoRTCLogEvent.kZegoTaskPlayStop.room_id(null===(r=this.streamCenter.playerList[e])||void 0===r?void 0:r.room.roomID),webrtc_sid:a.ZegoRTCLogEvent.kZegoTaskPlayStop.webrtc_sid(null===(n=null==d?void 0:d.player)||void 0===n?void 0:n.sessionId),stream_sid:a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_sid(null==d?void 0:d.streamSid),biz_product:d&&(null===(l=d.playOption)||void 0===l?void 0:l.resourceMode)==o.ResourceMode.DG?1:0});var h=d&&d.player&&d.player.state!==s.ENUM_PLAY_STATE.stop||(null===(c=null==d?void 0:d.retryStreamHandler)||void 0===c?void 0:c.isRetrying()),p=[1,3].includes(null==d?void 0:d.player.resourceMode)&&(null==d?void 0:d.playMode)===o.PlayMode.CDN;for(var f in this.streamCenter.stopPlayingStream(e,t),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[f]===e){delete this.stateCenter.streamUrlMap[f];break}t?this.stateCenter.reporter.setError(u,t):u.end(),h&&this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,e,t||{code:0,message:""},{isCDN:p}),this.logger.debug(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call success")},e.prototype.mutePlayStream=function(e,t,r){return new Promise((function(e,t){e(!1)}))},e.prototype.setStreamAudioOutput=function(e,t){return!1},e.prototype.startWaitPlay=function(){var e=this;this.streamCenter.waitPlayList.forEach((function(t){e.streamCenter.startPlayingStream(t,e.stateCenter.useNetAgent,e.streamCenter.playSuccessCallBackList[t])})),this.streamCenter.waitPlayList=[]},e.prototype.getStreamStats=function(e){var t,r,n;return this.logger.info(i.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),"string"==typeof e&&(n=null===(t=this.streamCenter.playerList[e])||void 0===t?void 0:t.player),n&&(null===(r=null==n?void 0:n.qualityHandler)||void 0===r?void 0:r.currentQuality)?n.qualityHandler.currentQuality||null:(this.logger.error("zsc.sp.0 stream is not playing"),null)},e}();t.PlayModule=u},5634:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayStreamQuality=void 0;var o=r(6706),i=r(1089),s=r(3529),a=r(608),l=r(1177),c=function(){function e(e,t,r,n,i){this.player=t,this.logger=r,this.dataReport=n,this.stateCenter=i,this.playQualityList=[],this.maxQualityListCount=10,this.qualityTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,googCodecName:"",videoPacketsLost:0,videoPacketsLostRate:0,videoFramesDecoded:0,videoFramesDropped:0,videoCumulativeDecodeTime:0,videoCumulativeBreakTime:0,videoCumulativeBreakRate:0},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioJitter:0,audioLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,audioSamplingRate:0,audioSendLevel:0,googCodecName:"",audioCumulativeDecodeTime:0,audioCumulativeBreakTime:0,audioCumulativeBreakRate:0},peerToPeerDelay:0,peerToPeerPacketLostRate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=o.ENUM_PROBE_STATE.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.playStat={},this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.videoReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.audioReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.poorQualityNum=0,this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.sampleTimes=0,this.qualitySampleInterval=1e3,this.qualityTimeInterval=e,this.currentQuality.video.muteState=this.player.videoMuteState,this.currentQuality.audio.muteState=this.player.audioMuteState}return Object.defineProperty(e.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),e.prototype.getPlayStats=function(e,t){var r,n,c,u=this;if(null!=e){var d=this.sampleTimes%parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString())==0;parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString()),d&&this.getP2PNetStats();for(var h,p=document.querySelectorAll("video, audio"),f=0;f<p.length;f++)p[f].srcObject===this.player.playStream&&(h=p[f]);var g={sampleTimeWindow:this.qualityTimeInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,nackCount:0,pliCount:0,audioJitter:0,videoJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.player.audioMuteState,videoMuteState:this.player.videoMuteState,soundLevel:this.player.soundLevel,muted:h?h.muted:void 0,paused:h?h.paused:void 0,volume:h?h.volume:void 0,sinkId:h?h.sinkId:void 0},m=this.lastPlayStats.time,v=0,_=0,y=0,b=0,E=0,S=0,C=0,T=null,w=null;e.forEach((function(e){["ssrc","inbound-rtp"].includes(e.type)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)&&(T=e),("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)&&(w=e)}));var R=(new Date).getTime(),k=function(e,t){return e>t?e-t:0};if(this.lastSampleTime||(this.lastSampleTime=R-1e3),T){var O=T.totalInterFrameDelay,I=T.framesDecoded,P=T.totalSquaredInterFrameDelay,A=k(I,this.totalQuality.framesDecode);this.totalQuality.framesDecode=I;var N=k(O,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=O;var L=k(P,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=P;var M=(L-Math.pow(N,2)/(A||1))/(A||1);M=M>0?M:-M;var x=parseInt((1e3/(A+1)).toString()),D=1e3*Math.sqrt(M),B=N/(A||1)*1e3||x,U=(B=parseInt((B>1e3?1e3:B).toString()))+D;U=parseInt((U>1e3?1e3:U).toString()),A>0&&0===this.player.cameraStatus&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=R-1e3),this.videoBreak.decodeStartTime&&(0,l.recordBreakDuration)(R,A,0===this.player.cameraStatus&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,this.videoReliableBreak,B,U)}if(w){var Z=w.totalSamplesReceived,j=w.concealedSamples,H=w.bytesReceived,F=k(Z,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=Z;var z=k(j,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=j;var G=k(H,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=H;var q=parseInt((z/(F||1)*1e3).toString());G>0&&0===this.player.micStatus&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=R-1e3),this.audioBreak.decodeStartTime&&(0,l.recordBreakDuration)(R,G,0===this.player.micStatus&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,this.audioReliableBreak,q,q,"audio")}if(t&&t.result().forEach((function(e){d&&("ssrc"==e.type&&(e.names().indexOf("googBandwidthLimitedResolution")>=0&&(g.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),e.names().indexOf("codecImplementationName")>=0&&(g.codecImplementationName=e.stat("codecImplementationName")),"video"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(g.videoCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(C=e.stat("googCurrentDelayMs"))),"audio"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(g.audioCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(S=e.stat("googCurrentDelayMs"))),e.names().indexOf("googCpuLimitedResolution")>=0&&(g.googCpuLimitedResolution=e.stat("googCpuLimitedResolution"))),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(g.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")))})),d){e.forEach((function(e){if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)){0!=m&&(g.audioBitrate=8*(e.bytesReceived-u.lastPlayStats.audioBytesReceived)/(e.timestamp-m),(r=e.packetsLost-u.lastPlayStats.audioPacketsLost)>0&&(_=r/(r+e.packetsReceived-u.lastPlayStats.audioPacketsReceived))),g.audioBitrate<0&&(g.audioBitrate=0),g.audioJitter=e.jitter,e.packetsLost>0&&(g.audioPacketsLost=e.packetsLost),g.audioFractionLost=e.fractionLost;var t=e.packetsLost-u.lastPlayStats.audioPacketsLost;g.audioFPS=(e.packetsReceived-u.lastPlayStats.audioPacketsReceived)/(e.timestamp-m)*1e3,g.audioPacketsLostRate=t>0?t/(e.packetsReceived-u.lastPlayStats.audioPacketsReceived+t):0,u.lastPlayStats.audioBytesReceived=e.bytesReceived,e.packetsLost>0&&(u.lastPlayStats.audioPacketsLost=e.packetsLost),u.lastPlayStats.audioPacketsReceived=e.packetsReceived,u.lastPlayStats.audioTime=e.timestamp,u.lastPlayStats.time=e.timestamp,u.lastPlayStats.audioBitrate=g.audioBitrate,b=e.jitter}else if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)){var r;0!=m?(g.videoBitrate=8*(e.bytesReceived-u.lastPlayStats.videoBytesReceived)/(e.timestamp-m),g.videoFPS=1e3*(e.framesDecoded-u.lastPlayStats.framesDecoded)/(e.timestamp-m),(r=e.packetsLost-u.lastPlayStats.videoPacketsLost)>0&&(y=r/(r+e.packetsReceived-u.lastPlayStats.videoPacketsReceived))):"number"==typeof e.framesPerSecond&&(g.videoFPS=e.framesPerSecond),g.videoBitrate<0&&(g.videoBitrate=0),g.videoFPS<0&&(g.videoFPS=0),g.videoJitter=e.jitter,g.nackCount=e.nackCount,g.pliCount=e.pliCount,g.videoFractionLost=e.fractionLost,g.videoFramesDecoded=e.framesDecoded,e.packetsLost>0&&(g.videoPacketsLost=e.packetsLost),g.videoPacketsLostRate=(t=e.packetsLost-u.lastPlayStats.videoPacketsLost)>0?t/(e.packetsReceived-u.lastPlayStats.videoPacketsReceived+t):0,u.lastPlayStats.videoBytesReceived=e.bytesReceived,u.lastPlayStats.framesDecoded=e.framesDecoded,e.packetsLost>0&&(u.lastPlayStats.videoPacketsLost=e.packetsLost),u.lastPlayStats.videoPacketsReceived=e.packetsReceived,u.lastPlayStats.videoTime=e.timestamp,u.lastPlayStats.time=e.timestamp,E=e.jitter}else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)||e.frameWidth){if(g.frameHeight=e.frameHeight,g.frameWidth=e.frameWidth,0===m||u.lastPlayStats.frameHeight===e.frameHeight&&u.lastPlayStats.frameWidth===e.frameWidth)0===m&&(u.lastPlayStats.frameHeight=e.frameHeight,u.lastPlayStats.frameWidth=e.frameWidth,u.player.isProbe||(u.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:u.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth}),u.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:u.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth})));else{if(!u.player.isProbe){var n=u.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:s.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:u.streamId},{key:""},s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event);n.setAttributes({webrtc_sid:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.webrtc_sid(u.sessionId),w:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(e.frameWidth),h:s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(e.frameHeight)}),n.end(),u.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:u.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth}),u.stateCenter.reporter.spanAppendAttribute({key:s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event,par:u.streamId},"vinfo",{h:e.frameHeight,fft:Date.now(),w:e.frameWidth})}u.lastPlayStats.frameHeight=e.frameHeight,u.lastPlayStats.frameWidth=e.frameWidth}0!=m&&(g.videoTransferFPS=1e3*(e.framesReceived-u.lastPlayStats.framesReceived)/(e.timestamp-m),g.videoFramesDropped=e.framesDropped-u.lastPlayStats.framesDropped),g.videoTransferFPS<0&&(g.videoTransferFPS=0),g.videoFramesDropped<0&&(g.videoFramesDropped=0),u.lastPlayStats.framesReceived=e.framesReceived,u.lastPlayStats.framesDropped=e.framesDropped}else"track"==e.type&&("audio"==e.kind||e.id.indexOf("audio")>=0)?(g.audioLevel=e.audioLevel||0,g.audioSendLevel=e.totalAudioEnergy,g.audioSamplingRate=e.totalSamplesDuration):"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(g.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(g.currentRoundTripTime=e.currentRoundTripTime,v=1e3*g.currentRoundTripTime))})),this.lastPlayStats.googCurrentDelayMs=Number(S)||Number(C)||0,y=isNaN(y)||y<0?0:y,E=isNaN(E)||E<0?0:E,_=isNaN(_)||_<0?0:_,b=isNaN(b)||b<0?0:b;var V=a.ClientUtil.getNetQuality(v,y,E),W=a.ClientUtil.getNetQuality(v,_,b);g.audioQuality=m>0?a.ClientUtil.quality2QualityGrade(W):0,g.videoQuality=m>0?a.ClientUtil.quality2QualityGrade(V):0,this.player.stateCenter.networkState!==o.ENUM_NETWORK_STATE.offline&&"disconnected"!==(null===(r=this.player.peerConnection)||void 0===r?void 0:r.connectionState)||(g.videoQuality=o.QualityGrade.Die,g.audioQuality=o.QualityGrade.Die);var Y=Math.min(V,W);this.netQuality=Y,g.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),g.peerToPeerPacketLostRate=this.p2pNetStats.p2pLostRate,Y<=o.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,Y<=this.player.streamCenter.l3BadQualityScore&&this.player.streamCenter.handleQualityBad(this.streamId,this.player.resourceMode,o.PlayMode.L3)?this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+"check cdn mode"):m>0&&this.poorQualityNum>=(null===(c=null===(n=this.player)||void 0===n?void 0:n.streamCenter)||void 0===c?void 0:c.probeStartedNum)&&R>this.probeTime+this.probeInterval&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+Y+" start net probe"),this.probeState=o.ENUM_PROBE_STATE.tryProbe,this.player.poorQualityRetryCnt++,this.player.streamCenter.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=R),Y>this.player.streamCenter.l3BadQualityScore&&(this.player.streamCenter.playerList[this.streamId].qualityBadCount=0,this.player.streamCenter.l3ProtocolBadTimestamp=0,this.player.streamCenter.lastHandleL3BadTimestamp=0),this.playStat=g,this.uploadPlayQuality(g,R),this.updateCurrentQualityStats(g),0!=m&&this.player.onPlayQualityUpdate(this.streamId,this.currentQuality)}}},e.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,r=e.videoFPS,o=e.videoTransferFPS,i=e.frameHeight,s=e.frameWidth,a=e.videoMuteState,l=e.videoQuality,c=e.videoFramesDecoded,u=e.videoFramesDropped,d=e.videoPacketsLost,h=e.videoPacketsLostRate,p=e.audioBitrate,f=e.audioCodec,g=e.audioMuteState,m=e.audioQuality,v=e.audioFPS,_=e.audioJitter,y=e.audioLevel,b=e.audioPacketsLost,E=e.audioPacketsLostRate,S=e.audioSamplingRate,C=e.audioSendLevel,T=e.nackCount,w=e.pliCount,R=e.totalRoundTripTime,k=e.currentRoundTripTime,O=e.peerToPeerDelay,I=e.peerToPeerPacketLostRate,P=e.sampleTimeWindow,A={video:n(n({},this.currentQuality.video),{videoBitrate:t,videoFPS:r,videoTransferFPS:o,frameHeight:i,frameWidth:s,videoQuality:l,videoFramesDecoded:c,videoFramesDropped:u,videoPacketsLost:d,videoPacketsLostRate:h,muteState:a,videoCumulativeDecodeTime:this.videoReliableBreak.decodeDuration,videoCumulativeBreakTime:this.videoReliableBreak.breakDuration,videoCumulativeBreakRate:this.videoReliableBreak.breakDuration/(this.videoReliableBreak.decodeDuration+this.videoReliableBreak.breakDuration||1)}),audio:n(n({},this.currentQuality.audio),{audioBitrate:p,audioCodec:f,audioQuality:m,audioFPS:v,audioJitter:_,audioLevel:y,audioPacketsLost:b,audioPacketsLostRate:E,audioSamplingRate:S,audioSendLevel:C,muteState:g,audioCumulativeDecodeTime:this.audioReliableBreak.decodeDuration,audioCumulativeBreakTime:this.audioReliableBreak.breakDuration,audioCumulativeBreakRate:this.audioReliableBreak.breakDuration/(this.audioReliableBreak.decodeDuration+this.audioReliableBreak.breakDuration||1)}),nackCount:T,pliCount:w,totalRoundTripTime:R,currentRoundTripTime:k,peerToPeerDelay:O,peerToPeerPacketLostRate:(I||0)/255,sampleTimeWindow:P};if(void 0!==e.muted){var N=e.paused,L=e.volume,M=e.sinkId;A.muted=e.muted,A.paused=N,A.volume=L,A.sinkId=M}if(void 0!==e.videoCodecName){var x=e.audioCodecName,D=e.codecImplementationName,B=e.googAvailableSendBandwidth;A.video.googCodecName=e.videoCodecName,A.audio.googCodecName=x,A.codecImplementationName=D,A.googAvailableSendBandwidth=B}this.currentQuality=A},e.prototype.uploadPlayQuality=function(e,t){var r,n;if(this.qualityUpload&&this.player.signal.isServerConnected){var o=t;if(0==this.qualityUploadLastTime||o-this.qualityUploadLastTime>=2e3){if(e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=o,e.video_break_duration=this.videoBreakReport.breakDuration,e.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,e.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,e.audio_break_duration=this.audioBreakReport.breakDuration,e.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,e.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,e.real_sampling_interval=o-this.lastSampleTime,!e.frameHeight||!e.frameWidth)for(var s=document.querySelectorAll("video"),a=0;a<s.length;a++){var l=s[a],c=null===(r=l.srcObject)||void 0===r?void 0:r.getVideoTracks()[0];if(c&&c==(null===(n=this.player.playStream)||void 0===n?void 0:n.getVideoTracks()[0])){e.frameHeight=l.videoHeight||0,e.frameWidth=l.videoWidth||0;break}}this.lastSampleTime=o,this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.player.streamCenter.updateQuality(1,e),this.qualityUploadLastTime=o}}},e.prototype.getP2PNetStats=function(){var e=this;this.player.signal.getP2PNetStats((0,o.getSeq)(),this.sessionId,this.peerID,(function(t,r,n){var o=n.p2p_rtt;e.p2pNetStats.p2pLostRate=n.p2p_lost_rate||0,e.p2pNetStats.p2pRTT=o||0}),(function(e){}))},e.prototype.setPlayQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval((function(){e.sampleTimes++;var t=e.player.peerConnection;if(t){var r=[t.getStats(null)];"chrome"==e.player.stateCenter.browser&&r.push(new Promise((function(e,r){t.getStats((function(t){return e(t)}),(function(e){return r(e)}))}))),Promise.all(r).then((function(t){e.getPlayStats(t[0],t[1])})).catch((function(t){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}}),1e3),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0})},e.prototype.clearPlayQualityTimer=function(){if(null!=this.qualityTimer){clearInterval(this.qualityTimer),this.qualityTimer=null;var e=(new Date).getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},(0,l.calculateCumulativeDuration)(this.videoBreak,this.videoBreakReport,this.videoReliableBreak,this.videoBreakThreshold,0===this.player.cameraStatus&&this.player.playMediaStatus.video,e),(0,l.calculateCumulativeDuration)(this.audioBreak,this.audioBreakReport,this.audioReliableBreak,this.audioBreakThreshold,0===this.player.micStatus&&this.player.playMediaStatus.audio,e,"audio")}this.poorQualityNum=0,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0}},e.prototype.startProbeTimeout=function(){var e=this;this.probeTimer=setTimeout((function(){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" probe timeout"),e.player.playStateUpdateError(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError)}),this.probeTimeoutInterval)},e.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},e}();t.PlayStreamQuality=c},3849:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPlayWeb=void 0;var s=r(6706),a=r(4767),l=r(3409),c=r(608),u=r(3529),d=r(1089),h=r(5634),p=r(7646),f=r(1358),g=r(9307),m=r(569),v=r(8011),_=r(6454),y=u.ZegoRTCLogEvent.kZegoTaskPlayStart,b=u.ZegoRTCLogEvent.kZegoTaskSDKPlayStream,E=u.ZegoRTCLogEvent.kZegoStartPlay,S=function(){function e(e,t,r,n,o,i,a,c){var u=this;this.curCBState={state:"NO_PLAY",code:0},this._state=s.ENUM_PLAY_STATE.stop,this.lastState=s.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.stop,this.isExternal=!1,this.playQualityList=[],this.maxQualityListCount=10,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,s.getSeq)(),this.reportBeginTime=0,this.reportPlayingTime=0,this.reportPlayStateTime=0,this.streamInRoom=!0,this.playStartTime=0,this.streamRoomPushConsumed=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.playStateCount=0,this.isRePlay=!1,this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.rtcViewer=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=s.ENUM_PLAY_STATE_NEGO.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.isPeer=!1,this.peerFailCount=0,this.isProbe=!1,this.peerID=0,this.isRecvClientInfo=!1,this.videoCodec="",this.videoCodecTimes=0,this.answerSdpTime=0,this.streamConnectIP="",this.initPoster="",this.initVideoStyle="",this.firstPlay=!0,this.isProbeByDG=!1,this.useResourceTypes=[],this.tryidx=0,this._CDNPlayerClone=null,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.rtcPlayCount=0,this.signalTime=0,this.stopReason="",this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.sideMediaConfig={isSEIStart:!1,unregisterSeiFilter:"",filterSize:0},this.cachedGwNodesMode=l.CachedNodesUseMode.DiffReUse,this.iceDisconnectedMaxTime=15e3,this._turnToTcp=!1,this.decodeVideoFrame=function(e,t){if("VP8"===u.videoCodec)t.terminate();else{for(var r=new DataView(e.data),n=0,o=new p.H264Parser(r),i=0,s=!1;o.NextNalu(s);)if(7!=(i=31&r.getUint8(o.nalu_start+o.start_code_size))&&8!=i&&9!=i){if(n=o.nalu_start+o.start_code_size+1,6!=i)break;s=!0;for(var a=0;255===r.getUint8(n);)a+=255,n++;if(243===(a+=r.getUint8(n++))||5===a||100===a){for(var l=0;255===r.getUint8(n);)l+=255,n++;if(l+=r.getUint8(n++),e.data.byteLength-n<l)break;var c=new Uint8Array(4+l);switch(c[0]=0,c[1]=0,a){case 100:c[2]=3,c[3]=235;break;case 5:c[2]=3,c[3]=236;break;case 243:c[2]=3,c[3]=237}for(var d=[],h=n;h<n+l;)0!==r.getInt8(h)||0!==r.getInt8(h+1)||3!==r.getInt8(h+2)||0!==r.getInt8(h+3)&&1!==r.getInt8(h+3)&&2!==r.getInt8(h+3)&&3!==r.getInt8(h+3)?h++:(d.push(h+2),h+=4);for(var g=0,m=0;m<l+d.length;m++)d.includes(n)?(n++,g++):c[4+m-g]=r.getUint8(n++);var v=!1;if(243===a)v=!0;else if(5===a&&u.sideMediaConfig.unregisterSeiFilter){var _=c.slice(4,4+u.sideMediaConfig.filterSize);f.WebRTCUtil.decodeString(_)===u.sideMediaConfig.unregisterSeiFilter&&(v=!0)}v&&u.stateCenter.actionListener("playerRecvSEI",u.streamId,c)}}t.enqueue(e)}},this.decodeAudioFrame=function(e,t){t.enqueue(e)},this.soundMeterWorklet=null,this.streamId=e,this.logger=t,this.signal=r,this.dataReport=n,this.streamCenter=i,this.ac=a,this.stateCenter=c,this.qualityHandler=new h.PlayStreamQuality(o,this,this.logger,this.dataReport,this.stateCenter),this.resourceMode=this.stateCenter.settingConfig.getSetting("resource_mode"),this.initStreamReport()}return e.prototype.updateCBState=function(e){var t=this,r=Object.keys(e).some((function(r){return e[r]!==t.curCBState[r]}));return r&&(this.curCBState=e),r},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPlayStats",{get:function(){return this.qualityHandler.lastPlayStats},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[s.ENUM_PLAY_STATE_NEGO.iceClosed,s.ENUM_PLAY_STATE_NEGO.iceDisconnected,s.ENUM_PLAY_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){return this.lastState===s.ENUM_PLAY_STATE.playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStat",{get:function(){return this.qualityHandler.playStat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ip",{get:function(){var e,t;return null===(t=null===(e=this.gwNode)||void 0===e?void 0:e.split(":"))||void 0===t?void 0:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),e.prototype.netProbeToReDispatch=function(){this.playStateUpdateError(y.error.kPlayNetProbePoor)},e.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:b.event,par:this.streamId},b.event,!0),this.playStartTime=this.reportBeginTime=(new Date).getTime()},e.prototype.startPlay=function(e,t,r){var n,o,i,a,l,h,p,g,m,v=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" called ",e),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){if(this.getRemoteStreamSuc=t,this.playOption=r||{},this.playMediaStatus={video:void 0===this.playOption.video||!!this.playOption.video,audio:void 0===this.playOption.audio||!!this.playOption.audio},r&&r.videoCodec&&(this.playOption.videoCodec=r.videoCodec),"boolean"==typeof(null==r?void 0:r.isSEIStart)&&(this.sideMediaConfig.isSEIStart=null==r?void 0:r.isSEIStart),this.sideMediaConfig.isSEIStart){var _=c.ClientUtil.isSupportEncodedTransforms();((null===(n=this.playOption)||void 0===n?void 0:n.videoCodec)&&"H264"!==(null===(o=this.playOption)||void 0===o?void 0:o.videoCodec)||!_)&&(this.sideMediaConfig.isSEIStart=!1)}(null===(i=this.stateCenter.seiConfig)||void 0===i?void 0:i.unregisterSEIFilter)&&(this.sideMediaConfig.unregisterSeiFilter=null===(a=this.stateCenter.seiConfig)||void 0===a?void 0:a.unregisterSEIFilter,this.sideMediaConfig.filterSize=f.WebRTCUtil.encodeString(this.sideMediaConfig.unregisterSeiFilter).byteLength),null==(null==r?void 0:r.streamType)&&void 0!==this.stateCenter.streamType&&(this.playOption.streamType=this.stateCenter.streamType),this.stateCenter.reporter.spanSetAttributes({key:y.event,par:e},{video_layer:y.video_layer(2===this.playOption.streamType?-1:this.playOption.streamType||1)});var S=this.stateCenter.settingConfig.getSetting("play_video_codec",!0);S&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting play_video_codec "+S),this.playOption.videoCodec=S);var C=(null===(l=this.playOption)||void 0===l?void 0:l.resourceMode)==s.ResourceMode.DG?1:0;this.stateCenter.reporter.spanSetAttributes({key:(this.isRePlay?u.ZegoRTCLogEvent.kZegoRePlay:E).event,par:this.streamId},{is_peer:E.is_peer(this.isPeer)}),this.stateCenter.reporter.spanSetAttributes({key:y.event,par:this.streamId},{audio_activate:y.audio_activate(1==this.playOption.audio||0!=this.playOption.audio),video_activate:y.video_activate(1==this.playOption.video||0!=this.playOption.video),biz_product:y.biz_product(C)}),this.reportSpan.setAttributes({room_id:b.room_id(null===(p=null===(h=this.streamCenter.playerList[this.streamId])||void 0===h?void 0:h.room)||void 0===p?void 0:p.roomID),room_sid_string:b.room_sid_string(null===(m=null===(g=this.streamCenter.playerList[this.streamId])||void 0===g?void 0:g.room)||void 0===m?void 0:m.roomSessionID)}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout((function(){v.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" waiting timeout"),v.playStateUpdateError(y.error.kPlayNegoTimeoutError)}),this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" streamId is null")},e.prototype.onCreatePlaySessionSuccess=function(e){var t=this,r=d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.logger.info(r+" "+this.streamId+" success");var n=[];if(e.turn_server){var o=e.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var s=this.streamCenter,a=s.autoSwitchProtocol,l=s.maxUdpFailNum,c=s.udpFailNum;this.logger.info(r+"  autoToTcp: ".concat(a,", udpFailNum: ").concat(c,", maxUdpFailNum: ").concat(l,".")),a&&!this._turnToTcp&&c>=l&&(this.logger.info(r+" switch to tcp."),this._turnToTcp=!0);var u=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);u&&(this.logger.info(r+" setting udp_or_tcp "+u),this._turnToTcp="tcp"===u);var h,p=o.filter((function(e){return e.indexOf("udp")>-1})),f=o.filter((function(e){return e.indexOf("tcp")>-1}));h=this._turnToTcp?f.length>0?f:p.map((function(e){return e.replace("udp","tcp")})):p,this.logger.info(r+" over tcp "+JSON.stringify(h)),n.push.apply(n,h)}e.stun_server&&n.push(e.stun_server);var g={iceTransportPolicy:"all",iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(r+" "+this.streamId+" username: "+e.turn_username),this.logger.info(r+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(g);var m=performance.now();this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,r,n){t.onRecvMediaDesc(e,r,n)})),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,r,n){t.onRecvCandidateInfo(e,r,n)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,n,o){if(m){var i=(performance.now()-m).toFixed(0);m=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: CloseSessionPush, cost_time: ").concat(i))}t.onRecvCloseSession(e,n,o)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,r,n){t.onRecvResetSession(e,r,n)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,r,n){t.gotStreamStatus=!0,t.streamStatus=n,t.playStream&&t.onRecvStreamStatus(n)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,n,o){if(m){var i=(performance.now()-m).toFixed(0);t.logger.info(r+" ".concat(t.streamId,", cmd: PlayEventPush, cost_time: ").concat(i))}t.onRecvPlayEvent(e,n,o)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,r,n){t.onRecvClientInfo(e,r,n)})),this.logger.info(r+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t=this,r=d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.peerConnection.onconnectionstatechange=function(e){t.onPeerConnectionStateChange(e)},this.peerConnection.ontrack=function(e){t.onGotRemoteStream(e.streams[0],e.receiver)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){t.logger.info(r+" "+t.streamId+" data channel open")},this.dataChannel.onmessage=function(e){if(t.logger.info(r+" "+t.streamId+" data channel onmessage"),e.data instanceof Blob){var n=new FileReader,o={};n.readAsArrayBuffer(e.data),n.onload=function(){o.data=n.result,t.onReceivedDataChannel(o)}}else t.onReceivedDataChannel(e)});var n={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&!1===this.playOption.video&&(n.offerToReceiveVideo=0),this.playOption&&!1===this.playOption.audio&&(n.offerToReceiveAudio=0),this.logger.info(r+" "+this.streamId+" createOffer: "+JSON.stringify(n));var o=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(n).then((function(e){o&&(o.setAttributes({sdp:u.ZegoRTCLogEvent.kZegoPlayCreateOffer.sdp(e.sdp)}),o.end()),t.onCreateOfferSuccess(e)}),(function(e){t.logger.error(r+" "+t.streamId+" create offer error "+e.toString()),o&&t.stateCenter.reporter.setError(o,{code:u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError.code,message:e.toString()}),t.playStateUpdateError(y.error.kCreateOfferError,!0)}))},e.prototype.createSession=function(e){var t,r,n,o=this;this.sessionSeq=(0,s.getSeq)();var i=this.streamId;1==this.streamCenter.testEnvironment&&(i="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var a=this.stateCenter.settingConfig.getSetting("gw_nodes");a&&a instanceof Array&&a.length>0&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting "+JSON.stringify(a)),this.gwNodeList=a,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var l=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);l&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+l),this._turnToTcp="tcp"===l),this._turnToTcp&&(this.isPeer=!1);var c="",h=[];this.stateCenter.idName&&h.push("zguid="+this.stateCenter.idName);var p=(null===(r=null===(t=this.streamCenter.publisherList[this.streamId])||void 0===t?void 0:t.room)||void 0===r?void 0:r.roomID)||(null===(n=this.stateCenter.roomList[0])||void 0===n?void 0:n.roomID);p&&h.push("zgrid="+p),"number"==typeof this.playOption.streamType&&h.push("video_stream_type="+this.playOption.streamType),h.length>0&&(c=h.join("&"));var f=u.ZegoRTCLogEvent.kZegoPlayCreateSession;if(this.isPeer){var g=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey),m=this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms"),v=(new Date).getTime();this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:i,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode,playBufLevel:[s.ResourceMode.L3,s.ResourceMode.DG].includes(this.resourceMode)?m:void 0,params:c},(function(e,t,r){var n=(new Date).getTime();o.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" create session time "+(n-v)),g&&(g.setAttributes({webrtc_sid:t,sdp:f.sdp(r.sdp),gw_nodes:f.gw_nodes(r.gw_nodes),gw_nodes_ttl:f.gw_nodes(r.gw_nodes_ttl),gw_version:f.gw_version(r.gw_version)}),g.end()),o.stateNego!==s.ENUM_PLAY_STATE_NEGO.iceConnected&&o.getSpan(u.ZegoRTCLogEvent.kZegoPlayIceConnected.event,o.parentSpanKey,"",!0),o.stateCenter.reporter.spanSetAttributes({key:y.event,par:o.streamId},{gw_version:y.gw_version(r.gw_version)}),o.handleCreateSessionWithSdpResp(e,t,r)}),(function(e,t){if(o.sessionSeq==t){var r=e==s.SEND_MSG_TIMEOUT?y.error.kSessionTimeoutError:y.error.kSessionRequestError;g&&(g.setAttributes({try_cnt:o.peerFailCount}),o.stateCenter.reporter.setError(g,r)),o.playStateUpdateError(r)}else o.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")}))}else{var _=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayCreateSession.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,1,0,i,this.playOption&&this.playOption.streamParams,this.gwNode,c,(function(e,t,r){_&&(_.setAttributes({webrtc_sid:u.ZegoRTCLogEvent.kZegoPlayCreateSession.webrtc_sid(t),sdp:f.sdp(r.sdp),gw_nodes:f.gw_nodes(r.gw_nodes),gw_nodes_ttl:f.gw_nodes(r.gw_nodes_ttl),gw_version:f.gw_version(r.gw_version)}),_.end(),o.stateCenter.reporter.spanSetAttributes({key:y.event,par:o.streamId},{gw_version:y.gw_version(r.gw_version)})),o.handleCreateSessionResp(e,t,r)}),(function(e,t){if(o.sessionSeq==t){var r=e==s.SEND_MSG_TIMEOUT?y.error.kSessionTimeoutError:y.error.kSessionRequestError;_&&o.stateCenter.reporter.setError(_,r),o.playStateUpdateError(r)}else o.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")}))}this.state=s.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" called success"),this.stateNego=s.ENUM_PLAY_STATE_NEGO.start},e.prototype.setGwNodes=function(e,t){var r;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(null==e?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),(null===(r=e.gw_nodes)||void 0===r?void 0:r.length)>0){var n=this.sortGwNodes(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(n,e.gw_nodes_ttl)}},e.prototype.resetGwNodes=function(){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},e.prototype.sortGwNodes=function(e,t,r){var n=JSON.parse(JSON.stringify(e));if(t.forEach((function(e){var t=n.indexOf(e);t>=0&&(n.splice(t,1),n.push(e))})),!r){var o=n.findIndex((function(t){return t===e[0]}));o>0&&(n.splice(o,1),n.unshift(e[0]))}return n},e.prototype.handleDispatchedGwNodes=function(e,t){if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var r=0===t?60:t;this.gwNodesTTL=r?(new Date).getTime()+1e3*r:this.gwNodesTTL,e.length>0&&this.streamCenter.updateCachedGwNodesList(this,!1,e,r)}},e.prototype.handleCreateSessionResp=function(e,t,r){var n=r.turn_server,o=n.split("?")[0]&&n.split("?")[0].slice(5),i=this.streamCenter.server.split("?"),s=i[1]&&i[1].slice(2);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:r.session_id,url:"webrtc://".concat(o,"/").concat(s,"/").concat(this.streamId)}),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" sessionId:"+r.session_id),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var a=0,l=(new Date).getTime();this.reportBeginTime&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(a=l-this.reportBeginTime)),this.signalTime=a),this.answerSdpTime=l,0!==r.result?(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" create error"),this.playStateUpdateError(y.error.kSessionRequestError)):(this.sessionId=r.session_id,this.sessionToken=r.session_token,this.setGwNodes(r,!1),this.onCreatePlaySessionSuccess(r))}else this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,r){var n=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" sessionId:"+t),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var o=0,i=(new Date).getTime();if(this.reportBeginTime&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" "+this.streamId+" create signal time "+(o=i-this.reportBeginTime)),this.signalTime=o),this.answerSdpTime=i,0!==r.result){if(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session failed "+r.result),this.stateCenter.useNetAgent&&1004===(null==r?void 0:r.result))return void this.playStateUpdateError(y.error.kPlayStreamNotFound,!0);this.playStateUpdateError(y.error.kSessionRequestError)}else{this.sessionId=t,this.sessionToken=r.session_token,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session success ",this.streamId),this.setGwNodes(r,!1);var s=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,r){if(s){var o=(performance.now()-s).toFixed(0);s=void 0,n.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" ".concat(n.streamId,", cmd: CloseSessionPush, cost_time: ").concat(o))}n.onRecvCloseSession(e,t,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,r){n.onRecvResetSession(e,t,r)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,t,r){n.gotStreamStatus=!0,n.streamStatus=r,n.playStream&&n.onRecvStreamStatus(r)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,t,r){if(s){var o=(performance.now()-s).toFixed(0);s=void 0,n.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" ".concat(n.streamId,", cmd: PlayEventPush, cost_time: ").concat(o))}n.onRecvPlayEvent(e,t,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,r){n.onRecvClientInfo(e,t,r)})),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,(function(e,t,r){n.onRecvPlayEvent(e,t,r)})),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,(function(e,t,r){n.onRecvNetQualityInfo(e,t,r)})),this.onGetRemoteOfferSuccess(r.sdp)}}else this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" seq is not match.")},e.prototype.onCreateOfferSuccess=function(e){var t=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),e.sdp=e.sdp.replace(/sendrecv/g,"recvonly"),e.sdp=e.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var r=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(r){var n=r.replace(/recvonly/,"sendrecv");e.sdp=e.sdp.replace(r,n)}e.sdp=(0,m.addSPSDescription)(e.sdp),e.sdp=(0,m.addRRTRLine)(e.sdp),this.playOption.videoCodec&&(e.sdp=a.SdpUtil.getSDPByVideDecodeType(e.sdp,this.playOption.videoCodec));var o=this.getSpan(u.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.event,this.parentSpanKey);o&&o.setAttributes({sdp:u.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.sdp(e.sdp)}),this.peerConnection.setLocalDescription(e).then((function(){o&&o.end(),t.onSetLocalDescriptionSuccess(e)}),(function(e){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+t.streamId+" set error "+e.toString()),o&&t.stateCenter.reporter.setError(o,{code:u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError.code,message:e.toString()}),t.playStateUpdateError(y.error.kSetLocalDescError,!0)}))},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),this.isPeer)this.createSession(e);else{var r={sdp:e.sdp};2==this.resourceMode&&(r.min_play_buf_level_ms=500),this.answerSeq=(0,s.getSeq)();var n=this.getSpan(u.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,r,(function(e,o,i){t.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" sendMediaDesc resp"),n&&(n.setAttributes({webrtc_sid:u.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.webrtc_sid(o),sdp:r.sdp}),n.end()),t.answerSeq==e&&t.sessionId==o?(t.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" send success stateNego:waiterAnswer"),t.stateNego=s.ENUM_PLAY_STATE_NEGO.waiterAnswer,t.state=s.ENUM_PLAY_STATE.waitingServerAnswer):t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" seq or sessionId is not equal "+t.answerSeq+" "+e,0+t.sessionId+" "+o)}),(function(e,r){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" failed to send "+e),n&&t.stateCenter.reporter.setError(n,{code:u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError.code,message:e.toString()}),t.playStateUpdateError(y.error.kMediaDescError)})),this.state=s.ENUM_PLAY_STATE.waitingOfferRsp}},e.prototype.onRecvMediaDesc=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received ",r);var n=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.event,this.parentSpanKey);n&&(n.setAttributes({sdp:u.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.sdp(r.sdp)}),n.end()),this.stateNego=s.ENUM_PLAY_STATE_NEGO.waitingCandidate,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.state===s.ENUM_PLAY_STATE.waitingServerAnswer?(this.signal.sendMediaDescAck(e,this.sessionId,0),this.onGetRemoteOfferSuccess(r.sdp)):this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,r=this,n={type:"answer",sdp:e,toJSON:function(){}},o=this.getSpan(u.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.event,this.parentSpanKey);this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var a=this.streamCenter,l=a.autoSwitchProtocol,c=a.maxUdpFailNum,h=a.udpFailNum;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+"  autoToTcp: ".concat(l,", udpFailNum: ").concat(h,", maxUdpFailNum: ").concat(c,".")),l&&!this._turnToTcp&&h>=c&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" switch to tcp."),this._turnToTcp=!0);var p=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);p&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+p),this._turnToTcp="tcp"===p),this._turnToTcp&&(null===(t=n.sdp.match(/candidate.*/g))||void 0===t||t.forEach((function(e){var t=e.replace(/udp/,"tcp");t.includes(" tcptype ")||(t=t.replace(" typ host "," typ host tcptype passive ")),n.sdp=n.sdp.replace(e,t)}))),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" remoteSdp ",n.sdp),o&&o.setAttributes({sdp:u.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.sdp(n.sdp),webrtc_sid:u.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.webrtc_sid(this.sessionId)}),this.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).then((function(){o&&o.end(),r.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+r.streamId+" set success")}),(function(e){r.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+r.streamId+" set remote error "+e.toString()),o&&(o.setAttributes({error:u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError.code,message:e.toString()}),o.end()),r.playStateUpdateError(y.error.kSetRemoteDescError,!0)})),this.state=s.ENUM_PLAY_STATE.waitingServerICE,this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" call success")},e.prototype.onRecvCandidateInfo=function(e,t,r){var n=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received ");var o=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.event,this.parentSpanKey);if(o&&(o.setAttributes({candidate_info:u.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.candidate_info(r.infos)}),o.end()),this.state==s.ENUM_PLAY_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var i=0;i<r.infos.length;i++){var a={sdpMid:r.infos[i].sdpMid,sdpMLineIndex:r.infos[i].sdpMLineIndex,candidate:r.infos[i].candidate};this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" candidate "+a.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(a)).then((function(){n.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+n.streamId+" add success")}),(function(e){n.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+n.streamId+" add error "+e.toString()),n.playStateUpdateError(y.error.kCandidateError,!0)}))}this.state=s.ENUM_PLAY_STATE.connecting;var l=this.getSpan(u.ZegoRTCLogEvent.kZegoPlayIceConnected.event,this.parentSpanKey,"",!0);null==l||l.setAttributes({webrtc_sid:this.sessionId}),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" call success")}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvPlayEvent=function(e,t,r){if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" received"),!this.isProbe){var n=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},u.ZegoRTCLogEvent.kZegoRTCPlayEvent.event);n.setAttributes({event_state:u.ZegoRTCLogEvent.kZegoRTCPlayEvent.event_state(r.event),webrtc_sid:t}),n.end()}if(!0===this.playEvent&&0==r.event){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" retry: "+this.streamId);var o=this.streamId,i=this.playOption;this.signal.sendCloseSession((0,s.getSeq)(),this.sessionId,1),this.resetPlay(),this.startPlay(o,this.getRemoteStreamSuc,i)}else this.playEvent=!0},e.prototype.onRecvClientInfo=function(e,t,r){this.stateCenter.clientIP!==r.clientip&&this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+r.clientip),this.stateCenter.clientIP=r.clientip,this.peerID=r.peer_id,this.streamConnectIP=r.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.isProbe&&this.stateNego==s.ENUM_PLAY_STATE_NEGO.iceConnected&&this.signal.sendNetProbe((0,s.getSeq)(),this.sessionId,this.peerID,(function(){}),(function(){})),this.isRecvClientInfo=!0},e.prototype.onRecvNetQualityInfo=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" call"),this.qualityHandler.stopProbeTimeout();var n=0,o=r.lossrate,i=r.rtt;(this.peerID!==r.peer_id&&!this.isProbeByDG||null==typeof o||null==typeof i)&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" local peerID:"+this.peerID+" remote peerID:"+r.peer_id+" lossrate:"+o+" rtt:"+i),n=1),this.signal.sendNetQualityInfoPushAck((0,s.getSeq)(),this.sessionId,this.peerID,n),0==n&&"number"==typeof o&&"number"==typeof i?(this.isProbeByDG=!1,this.onCalNetQualityResult(0,c.ClientUtil.getNetQuality(i,o))):this.onCalNetQualityResult(1)},e.prototype.onIceCandidate=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" called"),null!=e.candidate&&(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate "+e.candidate.candidate),this.state<s.ENUM_PLAY_STATE.connecting||this.state==s.ENUM_PLAY_STATE.stop?(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})):(this.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" send"),this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}])))},e.prototype.onConnectionStateChange=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState),this.state!=s.ENUM_PLAY_STATE.stop&&null!=this.peerConnection&&"closed"===e.target.signalingState&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState))},e.prototype.onIceConnectionStateChange=function(e){var t=this;if(this.state!=s.ENUM_PLAY_STATE.stop&&null!=this.peerConnection){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var r=this.getSpan(u.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(r&&r.setAttributes({ice_state:u.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),"connected"===this.peerConnection.iceConnectionState){if(this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceConnected,this.isProbe&&this.isPeer&&(this.isRecvClientInfo||this.isProbeByDG))return this.signal.sendNetProbe((0,s.getSeq)(),this.sessionId,this.peerID,(function(){}),(function(){})),void(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null));if(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),!this.isProbe&&this.reportBeginTime){var n=(new Date).getTime()-this.reportBeginTime;this.reportSpan.setAttributes({play_begin_time:b.play_begin_time(n)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:u.ZegoRTCLogEvent.kZegoPlayIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.answerSdpTime){var o=(new Date).getTime()-this.answerSdpTime;this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+o)}this.isProbe||this.state==s.ENUM_PLAY_STATE.playing||(this.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playOption.resourceMode==s.ResourceMode.DG&&this.firstPlay?null:this.playStream)),this.state=s.ENUM_PLAY_STATE.playing;var i=this.isRePlay?u.ZegoRTCLogEvent.kZegoRePlay:E;for(var a in this.stateCenter.reporter.spanEnd({key:i.event,par:this.streamId},{signal_consume:E.signal_consume(this.signalTime),is_peer:E.is_peer(this.isPeer)}),this.playStateCount++,this.continuousFailCnt=0,this.reportPlayStateTime=Date.now(),this.streamCenter.publisherList)if(this.streamCenter.publisherList[a].publisher.state==s.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==s.ENUM_BROADCASTER_STATUS.stop){this.signal&&this.signal.sendBroadcasterStatus((0,s.getSeq)(),this.sessionId,1),this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.start;break}if(!this.isProbe){this.qualityHandler.setPlayQualityTimer();var l=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(l)&&(this.streamCenter.probeStartedNum=l)}this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),!this.hasConnectionChange()&&this.recordFirstFrameData(),this._turnToTcp||(this.streamCenter.udpFailNum=0)}else"closed"===this.peerConnection.iceConnectionState?(null==r||r.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(null==r||r.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(null==r||r.end(),this.stateNego=s.ENUM_PLAY_STATE_NEGO.iceDisconnected,this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPlayConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))}},e.prototype.onPeerConnectionStateChange=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE+" "+this.streamId+" connectionChanged "+this.peerConnection.connectionState),"connected"===this.peerConnection.connectionState&&this.recordFirstFrameData()},e.prototype.hasConnectionChange=function(){var e=this.stateCenter.browser;return!("firefox"===e||"chrome"===e&&(0,c.getChromeVer)()<72)},e.prototype.checkPlayConnectionFailedState=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+"  state "+this.state+" connectionState "+e),this.playStateUpdateError(y.error.kMediaConnectionError)},e.prototype.resetPlay=function(){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY+" "+this.streamId+" call"),this.state=s.ENUM_PLAY_STATE.stop,this.playEvent=!1,this.isRecvClientInfo=!1,null!=this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.stopVideocTimer(),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PlayEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},e.prototype.onRecvResetSession=function(e,t,r){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" received ");var n=this.getSpan(u.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event);if(n&&n.end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var o=JSON.parse(JSON.stringify(y.error.kPlaySessionClosedError));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(o)}else this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvCloseSession=function(e,t,r){var n=this;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(r)),this.stateCenter.reporter.spanSetAttributes({key:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{denied_info:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.denied_info(r.err_info),stop_reason:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var o=r.err_info?JSON.parse(r.err_info.toLowerCase()):{},i=o.action?o.action:null,s=1*r.reason,a=JSON.parse(JSON.stringify(1004===(null==o?void 0:o.err)?y.error.kPlayStreamNotFound:y.error.kPlaySessionClosedError));a.message+=" reason:".concat(s," ").concat(i?" action:"+i:""," ").concat((null==o?void 0:o.err)?" err:"+(null==o?void 0:o.err):""),a.message+=";".concat((0,_.translate)(s,i,null==o?void 0:o.err)),this.negoTimer&&clearTimeout(this.negoTimer);var l=!([4,8,10,11,12,14,24,26,27,28].includes(s)||[2,3,4,5,6].includes(i));1004===(null==o?void 0:o.err)&&(l=!0);var c=!1;if(!this._turnToTcp){if([8,10].includes(s)||[18,15].includes(s)&&2===i&&[3001,3002].includes(o.err)){this.streamCenter.udpFailNum++;var h=this.streamCenter;h.autoSwitchProtocol&&h.udpFailNum>=h.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),c=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var p=this.gwNodeList.findIndex((function(e){return e==n.gwNode}))===this.gwNodeList.length-1,f=[3001,3002,3003,3004,3005,3006,3007,3008].includes(o.err);p&&f&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.playStateUpdateError(a,l,o,c)},e.prototype.onRecvStreamStatus=function(e,t){if(void 0===t&&(t=!1),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call"),this.logger.info("".concat(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS," ").concat(this.streamId," status camera_status: ").concat(e.camera_status," mic_status: ").concat(e.mic_status)),this.reportFirstFrameData(e.camera_status,e.mic_status),(!this.hasSentStreamStatus||this.cameraStatus!==e.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(e.camera_status),e.camera_status),(!this.hasSentStreamStatus||this.micStatus!==e.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(e.mic_status),e.mic_status),this.hasSentStreamStatus=!0,this.cameraStatus=e.camera_status,this.micStatus=e.mic_status,this.videoMuteState=0===e.camera_status?"0":"1",this.audioMuteState=0===e.mic_status?"0":"1","boolean"==typeof this.playOption.video)this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" has set video option, ignore stream status");else{var r=this.playStream,n=this.rtcViewer;if(0!==e.camera_status&&20!==e.camera_status)n?(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" viewer clear last frame"),n.checkIfClearLastFrame()):r.getVideoTracks().forEach((function(e){e.enabled=!1,e.stop(),r.removeTrack(e)}));else if(0===r.getVideoTracks().length){var o=this.remoteStream.clone().getVideoTracks()[0];r.addTrack(o),n&&n.setVideo(o,"safari"===this.stateCenter.browser)}if("safari"===this.stateCenter.browser&&t)for(var i=document.querySelectorAll("video, audio"),s=0;s<i.length;s++){var a=i[s];a.srcObject===this.playStream&&(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" track changed. rerender stream"),a.srcObject=this.playStream)}}this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call success")},e.prototype.onGotRemoteStream=function(e,t){var r=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" called "+e),e){if(this.sideMediaConfig.isSEIStart&&"function"==typeof t.createEncodedStreams&&("video"===t.track.kind?this.createVideoReceiverTransform(t):"audio"===t.track.kind&&this.createAudioReceiverTransform(t)),this.playStream){this.playStream.getTracks().forEach((function(e){return r.playStream.removeTrack(e)}));var n=this.rtcViewer;e.clone().getTracks().forEach((function(e){return o(r,void 0,void 0,(function(){return i(this,(function(t){return this.playStream.addTrack(e),n&&n.setTrack("video"===e.kind,e,"safari"===this.stateCenter.browser),[2]}))}))}))}else this.playStream=e.clone();this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=e,this.getVideoCodec(),this.gotStreamStatus&&this.onRecvStreamStatus(this.streamStatus,!0),this.streamCenter.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()}else this.logger.warn(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" remote stream is empty")},e.prototype.createVideoReceiverTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.decodeVideoFrame});this.receiverStreams=t,t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.createAudioReceiverTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.decodeAudioFrame});t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.sendCandidateInfo=function(e){var t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return!(e.candidate.indexOf("tcp")>0)&&(!!e.candidate||void 0)})))||e.length<1)this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var r=this.getSpan(u.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.event,this.parentSpanKey);r&&r.setAttributes({candidate_info:u.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.candidate_info(e)}),this.stateNego!==s.ENUM_PLAY_STATE_NEGO.iceConnected&&(this.stateNego=s.ENUM_PLAY_STATE_NEGO.sendCandidate),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,s.getSeq)(),this.sessionId,e,(function(e,n,o){t.logger.debug(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),r&&r.end()}),(function(e,n){t.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),r&&t.stateCenter.reporter.setError(r,{code:u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError.code,message:e.toString()}),t.playStateUpdateError(y.error.kCandidateError)}))}},e.prototype.shouldSendCloseSession=function(){return this.state!=s.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=s.ENUM_PLAY_STATE.waitingSessionRsp},e.prototype.playStateUpdateError=function(e,t,r,n){if(this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" call ",this.streamId,JSON.stringify(e)),!this.isProbe){var o=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},u.ZegoRTCLogEvent.kZegoTaskPlayStreamStateError.event);o.setAttributes({error:null==e?void 0:e.code,message:null==e?void 0:e.message}),o.end()}this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,this.streamId,e,t,r,n),this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" "+this.streamId+" ended")},e.prototype.getCameraMicStatus=function(e){return 0==e?"OPEN":"MUTE"},e.prototype.onPlayStateUpdate=function(e,t,r,n,o,i){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onRemoteCameraStatusUpdate=function(e,t,r){},e.prototype.onRemoteMicStatusUpdate=function(e,t,r){},e.prototype.getStopReason=function(e){var t="StopPlay";return e&&e.code&&(t=1104031===e.code?"ReachMaxAVRetryTime":"StopPlay"),t},e.prototype.stopPlay=function(e,t){var r,o,i,a;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY+" "+this.streamId+" called");var l=this.getStopReason(e);for(var h in this.streamCenter.publisherList)if(this.streamCenter.publisherList[h].publisher.state==s.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==s.ENUM_BROADCASTER_STATUS.start){this.signal&&this.signal.sendBroadcasterStatus((0,s.getSeq)(),this.sessionId,0),this.broadcasterStatus=s.ENUM_BROADCASTER_STATUS.stop;break}if(this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,s.getSeq)(),this.sessionId,0),!this.isProbe){var p=Date.now()-this.reportPlayStateTime;[0,2].includes(this.resourceMode)&&this.reportSpan.setAttributes({play_state_time:b.play_state_time(p||0)}),this.uploadRTCPlayStats(),this.stateCenter.reporter.spanSetAttributes({key:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{stop_reason:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(l)})}if(this.resetPlay(),!this.isProbe&&!t){var f=this.qualityHandler,g=f.videoBreak,m=f.audioBreak,v=2===this.resourceMode?"l3":"rtc",_=((r={})["".concat(v,"_a_break_time")]=m.cumulativeBreakDuration,r["".concat(v,"_a_decode_time")]=m.cumulativeDecodeDuration,r["".concat(v,"_v_break_time")]=g.cumulativeBreakDuration,r["".concat(v,"_v_decode_time")]=g.cumulativeDecodeDuration,r.audio_cumulative_break_time=m.cumulativeBreakDuration,r.audio_cumulative_decode_time=m.cumulativeDecodeDuration,r.video_cumulative_break_time=g.cumulativeBreakDuration,r.video_cumulative_decode_time=g.cumulativeDecodeDuration,r);this.reportSpan.setAttributes(n({biz_product:(null===(o=this.playOption)||void 0===o?void 0:o.resourceMode)==s.ResourceMode.DG?1:0,webrtc_sid:b.webrtc_sid(this.sessionId),max_retry_interval:b.max_retry_interval(this.stateCenter.streamRetryTime),probe_ip_cnt:b.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:b.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:b.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:b.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),fail_cnt:b.fail_cnt(Math.max(this.rtcPlayCount-1,0)),continuous_fail_cnt:b.continuous_fail_cnt(this.continuousFailCnt),use_resource_type:b.use_resource_type(this.resourceMode===s.ResourceMode.DG?this.useResourceTypes:[(0,c.getPlaySourceType)(this.resourceMode)]),use_na:u.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.use_na(this.stateCenter.useNetAgent?1:0),play_state_cnt:b.first_frame_time(this.playStateCount),protocol:b.protocol("webrtc"),dispatch_external_ip:b.dispatch_external_ip(this.stateCenter.clientIP),w:b.w(null===(i=this.playStat)||void 0===i?void 0:i.frameWidth),h:b.h(null===(a=this.playStat)||void 0===a?void 0:a.frameHeight),stop_reason:b.stop_reason(l),error:(null==e?void 0:e.code)||0,message:(null==e?void 0:e.message)||"",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},_)),this.reportSpan.end()}this.retryFailGwNodes=[],this.isRePlay=!1,this.rtcPlayCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.continuousFailCnt=0;var y=this.rtcViewer;y&&y.stop()},e.prototype.onDisconnect=function(e){this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT+" "+this.streamId+" call"),this.playStateUpdateError(e||y.error.kWebsocketDisconnectedError,!!e)},e.prototype.startSoundLevel=function(){var e,t=this;if(this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&0!=this.remoteStream.getAudioTracks().length){null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.remoteStream);var r=this.soundMeterWorklet=new v.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);r.initAudioWorklet(this.ac,this.mic),r.onSoundLevelUpdate=function(e){t.soundLevel=100*e}}catch(e){this.logger.error(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" get sound level failed "+e)}}else this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" "+this.streamId+" remote stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(d.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},e.prototype.onCalNetQualityResult=function(e,t){},e.prototype.onReceivedDataChannel=function(e){var t,r,n=this,o=new Uint8Array(e.data,0,10),i=e.data.byteLength-10,s=new Uint8Array(e.data,10,i);if(1==o[0]){var a=o[1],l=o[2]<<8|o[3],c=o[4]<<8|o[5],u=(new Date).getTime();if(this.first_pkt&&(this.next_sn[0]=l==c?l:c,this.first_pkt=!1),this.pkt_list.push({sn:l,sn0:c,recv_ts:u,flags:a,payload_len:i,payloadArray:s}),this.pkt_list.sort(this.compareShort),l==this.next_sn[0]){var d=this.pkt_list.filter((function(e){return e.sn0==c}));if(d.sort(this.compareShort),null!=d.find((function(e){return 1&e.flags}))&&d.length==this.compareShort(l,c)+1){for(var h=0,p=new ArrayBuffer(65536),f=0;f<d.length;f++)new Uint8Array(p).set(d[f].payloadArray,h),h+=d[f].payload_len;null===(t=this.onDataChannelList)||void 0===t||t.forEach((function(e){e(p,h,n.streamId)})),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var g=function(){var e=m.pkt_list.filter((function(e){return e.sn0==n.pkt_list[0].sn0}));if(e.sort(m.compareShort),null!=e.find((function(e){return 1&e.flags}))&&e.length==m.compareShort(e[e.length-1].sn,e[0].sn0)+1){for(var t=0,o=new ArrayBuffer(65536),i=0;i<e.length;i++)new Uint8Array(o).set(e[i].payloadArray,t),t+=e[i].payload_len;m.next_sn[0]=e[0].sn0+e.length,null===(r=m.onDataChannelList)||void 0===r||r.forEach((function(e){e(o,t,n.streamId)})),m.pkt_list=[],m.first_pkt=!0}else if(u-e[0].ts<4e3){var s=e[0].sn0;for(i=0;i<e.length&&s==e[i].sn;i++)s++;return m.next_sn[0]=s,"break"}for(i=0;i<e.length;i++)m.pkt_list.shift()},m=this;this.pkt_list.length>0&&"break"!==g(););}},e.prototype.compareShort=function(e,t){var r=new Uint16Array(1);r[0]=e-t;var n=new Int16Array(1);return n[0]=r[0],n[0]},e.prototype.uploadRTCPlayStats=function(){var e,t,r,n,o,i,s,a,l,c,d,h,p,f,g;this.stateCenter.reporter.spanSetAttributes({key:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.event,par:this.streamId},{lsttime:u.ZegoRTCLogEvent.kZegoTaskStreamPlay.lsttime(parseInt(this.qualityHandler.lastPlayStats.time)),total_stat:u.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:null===(e=this.lastPlayStats)||void 0===e?void 0:e.audioPacketsReceived,vfc:null===(t=this.lastPlayStats)||void 0===t?void 0:t.framesReceived,tfc:(null===(r=this.lastPlayStats)||void 0===r?void 0:r.audioPacketsReceived)+(null===(n=this.lastPlayStats)||void 0===n?void 0:n.framesReceived),vb:null===(o=this.lastPlayStats)||void 0===o?void 0:o.videoBytesReceived,ab:null===(i=this.lastPlayStats)||void 0===i?void 0:i.audioBytesReceived,tb:(null===(s=this.lastPlayStats)||void 0===s?void 0:s.videoBytesReceived)+(null===(a=this.lastPlayStats)||void 0===a?void 0:a.audioBytesReceived),rtp_rtt:Math.round(1e3*(null===(l=this.playStat)||void 0===l?void 0:l.currentRoundTripTime))||0,w:null===(c=this.playStat)||void 0===c?void 0:c.frameWidth,rtp_plr:null===(d=this.playStat)||void 0===d?void 0:d.videoPacketsLostRate,h:null===(h=this.playStat)||void 0===h?void 0:h.frameHeight,rtp_bw:(null===(p=this.playStat)||void 0===p?void 0:p.googAvailableSendBandwidth)?null===(f=this.playStat)||void 0===f?void 0:f.googAvailableSendBandwidth:void 0,p2p_delay:null===(g=this.playStat)||void 0===g?void 0:g.peerToPeerDelay})})},e.prototype.getVideoCodec=function(){var e=this;this.peerConnection&&(this.peerConnection.getStats().then((function(t){t.forEach((function(r){if("inbound-rtp"===r.type&&"video"===r.kind&&r.codecId){var n=t.get(r.codecId).mimeType.toLowerCase();n.indexOf("h264")>-1?e.videoCodec="H264":n.indexOf("vp8")>-1&&(e.videoCodec="VP8",e.sideMediaConfig.isSEIStart&&e.logger.error(d.ZEGO_WEBRTC_ACTION.PAYER_GET_VIDEO_CODEC+" video code VP8 is not support SEI"))}}))})),this.videoCodecTimes++,this.videoCodec||this.videoCodecTimes>=5)?this.stopVideocTimer():this.videoCodecTimer=setTimeout((function(){e.getVideoCodec()}),100)},e.prototype.stopVideocTimer=function(){this.videoCodecTimer&&(clearTimeout(this.videoCodecTimer),this.videoCodecTimer=null)},e.prototype.getViewer=function(){return this.playStream&&!this.rtcViewer&&(this.rtcViewer=new g.StreamView(this.playStream,this,{clearLastFrame:this.stateCenter.engineConfig.playClearLastFrame})),this.rtcViewer},e.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},e.prototype.isCustomCdn=function(){return!1},e.prototype.getSpan=function(e,t,r,n){return void 0===n&&(n=!1),this.isProbe?null:this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:t,bak_key:r,par:this.streamId},{key:e,par:this.streamId},e,n)},e.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,void 0!==this.stateCenter.turnOverTcpOnly&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},e.prototype.recordFirstFrameData=function(){var e;this.isProbe||0!=this.firstFrameTime||(this.firstFrameTime=(new Date).getTime()-this.beginTime,this.reportSpan.setAttributes({first_frame_time:b.first_frame_time(this.firstFrameTime),fft_video:b.fft_video(this.firstFrameTime),fft_audio:b.fft_audio(this.firstFrameTime),biz_product:u.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product((null===(e=this.playOption)||void 0===e?void 0:e.resourceMode)==s.ResourceMode.DG?1:0)}),this.firstVideoSpan=this.firstFrameSpan("video"),this.firstAudioSpan=this.firstFrameSpan("audio"))},e.prototype.reportFirstFrameData=function(e,t){0===e&&this.firstVideoSpan&&(this.firstVideoSpan.setAttributes({dev_changed:u.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.dev_changed(0!==this.cameraStatus)}),this.firstVideoSpan.spanReport(),this.firstVideoSpan=null),0===t&&this.firstAudioSpan&&(this.firstAudioSpan.setAttributes({dev_changed:u.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame.dev_changed(0!==this.micStatus)}),this.firstAudioSpan.spanReport(),this.firstAudioSpan=null)},e.prototype.firstFrameSpan=function(e){var t,r="video"===e?u.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame:u.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame,n=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:u.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:this.streamId},{key:""},r.event),o=this.streamInRoom?2:0===this.streamRoomPushConsumed?0:1,i=(new Date).getTime()-this.answerSdpTime;return n.setAttributes({webrtc_sid:r.webrtc_sid(this.sessionId),resource_type:r.resource_type((0,c.getPlaySourceType)(this.resourceMode)),fft_consumed:r.fft_consumed(this.firstFrameTime),protocol:r.protocol("webrtc"),push_consumed:r.push_consumed(this.streamRoomPushConsumed),prepare_recv_consumed:r.prepare_recv_consumed(this.signalTime),connected_consumed:r.connected_consumed(i),reliability:r.reliability(o),biz_product:r.biz_product((null===(t=this.playOption)||void 0===t?void 0:t.resourceMode)==s.ResourceMode.DG?1:0)}),null==n||n.end(void 0,!1),n},e.prototype.setStreamAdd=function(){this.streamInRoom||0!==this.streamRoomPushConsumed||this.state===s.ENUM_PLAY_STATE.connecting||(this.streamRoomPushConsumed=(new Date).getTime()-this.playStartTime)},e}();t.ZegoPlayWeb=S},361:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModule=void 0;var s=r(6706),a=r(1089),l=r(6706),c=r(3529),u=r(608),d=r(2752),h=r(3770),p=r(5321),f=r(1358),g=c.ZegoRTCLogEvent.kZegoTaskPublishStart,m=c.ZegoRTCLogEvent.kZegoStartPublish,v=function(){function e(e,t,r,n,o,i){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.rtm=o,this.zegoWebRtc=i,this.recordDevices()}return e.prototype.createStream=function(e){var t=this;this.logger.info(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" call"),e&&e.camera&&e.camera.audioBitRate&&(e.camera.audioBitrate=e.camera.audioBitRate),e&&e.camera&&e.camera.bitrate&&(e.camera.bitRate=e.camera.bitrate),e&&e.screen&&"object"==typeof e.screen&&e.screen.bitrate&&(e.screen.bitRate=e.screen.bitrate),e&&e.custom&&e.custom.bitrate&&(e.custom.bitRate=e.custom.bitrate);var r={width:960,height:540};if(!(null==e?void 0:e.custom)&&!(null==e?void 0:e.screen)||e.camera||!e){var o=n({video:!0,videoQuality:4,frameRate:15,bitRate:500},{width:640,height:360});switch(this.stateCenter.scenario){case l.ZegoScenario.StandardVideoCall:break;case l.ZegoScenario.HighVideoCall:o.frameRate=25,o.bitRate=1500,o=n(n({},o),r);break;case l.ZegoScenario.StandardChatroom:case l.ZegoScenario.HighQualityChatroom:o.video=!1;break;case l.ZegoScenario.Broadcast:o.frameRate=20,o.bitRate=1200,o=n(n({},o),r);break;default:o.bitRate=800,o=n(n({},o),{width:720,height:480})}(e=e||{}).camera=Object.assign(o,e.camera||{})}return new Promise((function(r,o){var i="camera",l=t.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskCreateStream.event),d=function(e){var n=t.streamCenter.checkPreview(e),o=e;if(n&&navigator.userAgent){var i=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);i&&i[1]&&i[1].includes("15_1")&&(o=n.getStreamThroughCanvas(e),n.localStream=o,n.streamFromCanvas=!0,n.streamFromCanvasTrack=o.getVideoTracks()[0])}if(t.stateCenter.engineConfig.keepAudioTrack&&0==o.getAudioTracks().length){var s=null==n?void 0:n.getEmptyAudioTrack();s&&(s.enabled=!1,o.addTrack(s),n&&(n.hasEmptyAudioTrack=!0))}l.setAttributes({media_stream_id:c.ZegoRTCLogEvent.kZegoTaskCreateStream.media_stream_id(null==e?void 0:e.id)}),l.end(),!t.stateCenter.deviceInfos&&t.recordDevices(),r(o),t.streamCenter.activeSoundLevel()},h=function(e,r){void 0===r&&(r=""),t.stateCenter.reporter.setError(l,e,r),o({code:e.code,msg:e.message+r})};if("https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" https or localhost required "),void h({code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message+" https or localhost required"});if(e&&e.screen){if(i="screen",!f.WebRTCUtil.checkScreenParams(e.screen,h))return;var g=t.stateCenter.browser,m=t.streamCenter.getScreenConstrains(e.screen);l.setAttributes({stream_type:c.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"),screen:c.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(m)});var v=function(e){t.streamCenter.createScreenPreviewer(e,m)&&d(e),e.getVideoTracks()[0].onended=function(){var r=t.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);r.setAttributes({stop_reason:c.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("screenSharingEnded")}),e&&t.stopPreview(e),r.end(),t.stateCenter.actionListener("screenSharingEnded",e)}};"firefox"==g||"object"==typeof e.screen&&"firefox"==e.screen.type?t.startScreenShotFirFox("screen",m,(function(e,t,r){e?t&&v(t):r&&h(r)})):"chrome"==g&&p.ZegoWebRTC.screenShotReady||"object"==typeof e.screen&&"shot"==e.screen.type?t.startScreenShotChrome((function(r,n,o){r?(t.logger.info(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" using extension"),n&&v(n)):(o&&t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" extension "+o),"SS_DIALOG_CANCEL"===o||"object"==typeof(null==e?void 0:e.screen)&&"shot"==e.screen.type?o&&h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t.startScreenSharing(m,(function(e,r,n){e?r&&v(r):(t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" "+n),n&&h(n))})))})):"Electron"==g||"object"==typeof e.screen&&"Electron"==e.screen.type?t.startScreenShotElectron(m,(function(e,t,r){e?t&&v(t):r&&h(r)})):t.startScreenSharing(m,(function(e,t,r){e?t&&v(t):r&&h(r)}))}else{if(e&&"object"==typeof e.camera&&void 0!==e.camera.videoQuality&&!u.ClientUtil.checkInteger(e.camera.videoQuality))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" videoQuality must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number");if(e&&e.camera&&e.camera.audioBitrate){if(!u.ClientUtil.checkInteger(e.camera.audioBitrate))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.camera.audioBitrate<6)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot less 6 kbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.camera.audioBitrate>510)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot greater than 510 kbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps");t.stateCenter.audioBitRate=1e3*e.camera.audioBitrate}if(e&&e.camera&&e.camera.bitRate){if("number"!=typeof e.camera.bitRate)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.camera.bitRate>10240)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.camera&&void 0!==e.camera.channelCount&&!u.ClientUtil.checkInteger(e.camera.channelCount))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" channelCount must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must be integer number");if(e&&e.camera&&4===e.camera.videoQuality&&!f.WebRTCUtil.checkCameraParams(e.camera,h))return;if(e&&e.custom&&e.custom.bitRate){if(!u.ClientUtil.checkInteger(e.custom.bitRate))return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.custom.bitRate>10240)return t.logger.error(a.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.custom&&e.custom.audioBitrate){if(!u.ClientUtil.checkInteger(e.custom.audioBitrate))return t.logger.error("ze.cs.0 audioBitrate must be integer number"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.custom.audioBitrate<6)return t.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.custom.audioBitrate>510)return t.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps")}if(e&&e.custom&&void 0!==e.custom.channelCount&&1!==e.custom.channelCount&&2!==e.custom.channelCount)return t.logger.error("ze.cs.0 channelCount must number 1 or 2"),void h(c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must number 1 or 2");var _={};if(e&&e.camera)i="camera",_=e.camera,l.setAttributes({stream_type:c.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"),camera:c.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(e.camera)}),"boolean"!=typeof _.video&&(_.video=!0),"boolean"!=typeof _.audio&&(_.audio=!0);else if(e&&e.custom){i="custom",_=e.custom;var y=e.custom.source instanceof MediaStream?"MediaStream":"HTMLElement";l.setAttributes({stream_type:c.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"),custom:c.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(n(n({},e.custom),{source_type:y}))})}t.startPreview(_,i,d,h,l)}}))},e.prototype.destroyStream=function(e){this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call");var t=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);if(t.setAttributes({stop_reason:c.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("destroyStream")}),!(e instanceof MediaStream))return this.logger.error(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" localStream is not mediaStream or tracks is null"),void this.stateCenter.reporter.setError(t,c.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError);e instanceof MediaStream&&0==e.getTracks().length&&this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" tracks is null"),this.stopPreview(e),t.end()},e.prototype.startPublishingStream=function(e,t,r,n){var o;this.logger.info(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call ",e);var i,d=!0,h="",p=g.error,f=p.kPublishParamError,v=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:g.event,par:e},g.event,!0);d&&void 0===e&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+(h="stream id required")),d=!1,i=f),!d||e&&"string"==typeof e||(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream id type wrong")),d=!1,i=f),d&&e.length>l.MAX_STREAM_ID_LENGTH&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream id length limit")),d=!1,i=f),d&&!u.ClientUtil.checkIllegalCharacters(e)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream ID contains illegal characters")),d=!1,i=f),d&&(!t||t instanceof MediaStream&&0==t.getTracks().length)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="localStream wrong")),d=!1,i=f);var _=this.streamCenter.checkPreview(t);if(d&&!_&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h="stream is not from zego")),d=!1,i=p.kPublishNoPreviewError),(null==_?void 0:_.isVideoEffectStarting)&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+(h=(i=p.kPublishEffectIsStarting).message)),d=!1),d&&void 0!==r&&"object"!=typeof r&&(d=!1,i=f,h="publishOption must be object"),d&&void 0!==r&&void 0!==r.streamParams&&"string"!=typeof r.streamParams&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption streamParams must be string"),d=!1,i=f,h=" publishOption streamParams must be string"),d&&void 0!==r&&void 0!==r.extraInfo&&"string"!=typeof r.extraInfo&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption extraInfo must be string"),d=!1,i=f,h=" publishOption extraInfo must be string"),d&&void 0!==r&&void 0!==r.videoCodec&&"string"!=typeof r.videoCodec&&(this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption videoCodec must be string"),d=!1,i=f,h=" publishOption videoCodec must be string"),!d||!this.stateCenter.isMultiRoom||r&&"string"==typeof r.roomID&&""!=r.roomID||(d=!1,i=f,h=" roomID is need if set multi room"),r&&r.videoCodec&&(r.videoCodec=r.videoCodec.toUpperCase()),d&&(this.stateCenter.waitPublishStreamList[e]={retryStart:!1,localStream:t,publishOption:r,isDataChannel:n}),d&&this.rtm.isDisConnect()){if(this.stateCenter.connectChanged)return this.stateCenter.waitPublishStreamList[e].retryStart=!0,this.logger.info(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" connect changed"),!1;this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" not login"),d=!1,i=p.kPublishNoLoginError}if(!d)throw this.logger.error(a.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+h),this.stateCenter.reporter.setError(v,i),{errorCode:null==i?void 0:i.code,extendedData:h};r||(r={});var y=(0,u.generaStreamSid)(this.stateCenter.appid,this.stateCenter.idName,e),b=((o={})["_publish_"+e]={stream_sid:y},o);this.stateCenter.reporter.setPublicPros(b),v.setAttributes({stream_id:g.stream_id(e),stream_sid:g.stream_sid(y),publish_option:g.publish_option(r),enable_camera:g.enable_camera(!!(null==_?void 0:_.videoTrack)),enable_mic:g.enable_mic(!!(null==_?void 0:_.audioTrack)),use_na:g.use_na(this.stateCenter.useNetAgent?1:0)}),r.audioBitRate=this.stateCenter.audioBitRate;var E,S=r.roomID?r.roomID:this.stateCenter.roomList[0]?this.stateCenter.roomList[0].roomID:"",C=this.stateCenter.getRoomByRoomID(S);if(!C)return this.logger.error("zc.p.sps.1 room no found"),!1;if(v.setAttributes({room_id:g.room_id(S)}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),E=this.stateCenter.customUrl;else{var T=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);T&&T instanceof Array&&T.length>0&&(E=T,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(T)))}if(E)return this.stateCenter.publishStreamList[e]={state:l.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:r.extraInfo},this.streamCenter.setPublishStateStart(C,e,t,r,y,n)?(C.streamHandler.onPublishStateUpdate(l.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.publisherList[e].serverUrls=E,this.streamCenter.startPublishingStream(e)):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.streamCenter.setPublishStateStart(C,e,t,r,y,n))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.stateCenter.publishStreamList[e]={state:l.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:r.extraInfo},this.logger.info("zc.p.sps.1 start publish"),C.streamHandler.onPublishStateUpdate(l.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""});var w=this.stateCenter.useNetAgent,R=this.streamCenter.publisherList[e];if(this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:e},{key:m.event,par:e},m.event,!0).setAttributes({reason:m.reason("StartPublish")}),w)return this.stateCenter.appConfig?(this.streamCenter.publisherList[e].serverUrls=["unified_rtc"],this.streamCenter.startPublishingStream(e,w),!0):(this.streamCenter.waitPublishList.push(e),!0);var k=R.retryDispatchHandler;return k.stopMaxTime(),k.invalid(),k.initStream(e,r,!0),k.startMaxTime(),k.active(0)},e.prototype.activateSEIInsert=function(e,t,r){return void 0===r&&(r=0),!1},e.prototype.sendSEI=function(e,t){if(!u.ClientUtil.isSupportEncodedTransforms())return this.logger.warn(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" browser not support "),!1;if(!(t instanceof Uint8Array))return this.logger.error(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData required Uint8Array"),!1;if(t.byteLength>4096)return this.logger.error(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" inData length limit"),!1;var r=this.streamCenter.publisherList[e];return r&&r.publisher?r.publisher.sendSEI(t):(this.logger.warn(a.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO+" publish not exist"),!1)},e.prototype.stopPublishingStream=function(e,t,r){var n,o,i;this.logger.info(a.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call ",e+(t?t.toString():"")+" "+r);var u=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskPublishStop.event);if("string"!=typeof e||""==e)return this.logger.error(a.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" streamID must be string and not empty"),this.stateCenter.reporter.setError(u,c.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError,"stream id type error"),!1;var d=this.streamCenter.publisherList[e];u.setAttributes({stream_id:c.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_id(e),stream_sid:c.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_sid(null==d?void 0:d.streamSid),room_id:c.ZegoRTCLogEvent.kZegoTaskPublishStop.room_id(null===(o=null===(n=this.streamCenter.publisherList[e])||void 0===n?void 0:n.room)||void 0===o?void 0:o.roomID),error:(null==t?void 0:t.code)||0,message:(null==t?void 0:t.message)||""});var h=this.streamCenter.getRoomByStreamID(e),p=d&&d.publisher&&d.publisher.state!==l.ENUM_PUBLISH_STATE.stop||(null===(i=null==d?void 0:d.retryStreamHandler)||void 0===i?void 0:i.isRetrying());if(this.streamCenter.stopPublishingStream(e,t),r&&delete this.stateCenter.waitPublishStreamList[e],this.stateCenter.publishStreamList[e]){if(this.stateCenter.publishStreamList[e].state>=l.ENUM_PUBLISH_STREAM_STATE.update_info&&h){t&&1102018===t.code||h.streamHandler.updateStreamInfo(e,l.ENUM_STREAM_SUB_CMD.liveEnd);for(var f=0;f<h.streamList.length;f++)if(h.streamList[f].stream_id==e){!this.stateCenter.connectChanged&&h.streamList.splice(f--,1);break}}delete this.stateCenter.publishStreamList[e]}return u.end(),h&&p&&h.streamHandler.onPublishStateUpdate(l.ENUM_PUBLISH_STATE_UPDATE.error,e,t||{code:0,message:""}),!0},e.prototype.setCaptureVolume=function(e,t){var r=this;return new Promise((function(n){var o;r.logger.info(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call");var i=function(e){r.logger.error(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" "+e),n({errorCode:c.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code,extendedData:JSON.stringify({fail_reason:c.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message+" "+e})})},s=r.streamCenter.ac,l=r.streamCenter.checkPreview(e);if(e instanceof MediaStream&&l)if(0!=e.getAudioTracks().length)if("number"!=typeof t||t<0||t>200)i(" volume must be number between 0 to 200");else{if(l.gainNode)l.gainNode.gain.value=t/100;else{l.audioNodeQueue||l.initAudioNodeQueue();var u=s.createGain();null===(o=l.audioNodeQueue)||void 0===o||o.pushFront(u),l.gainNode=u,l.gainNode.gain.value=t/100}s.resume(),n({errorCode:0,extendedData:""}),r.logger.info(a.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call success")}else i(" stream audioTrack no found");else i(" stream must be created by zego")}))},e.prototype.getElectronScreenSources=function(){var e=this;return new Promise((function(t,r){var n=window.require("electron");n||(e.logger.error("zc.gess.0 Electron is not exist"),r({message:"Electron is not exist"})),n.desktopCapturer.getSources({types:["window","screen"]}).then((function(e){var r=e.map((function(e){return{id:e.id,name:e.name,thumbnail:e.thumbnail}}));t(r)})).catch((function(t){e.logger.error("zc.gess.0 "+t),r(t)}))}))},e.prototype.startScreenShotChrome=function(e){if(p.ZegoWebRTC.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),u.ClientUtil.registerCallback("screenShare",{success:e},this.stateCenter.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.logger.error(t),e(!1,null,{code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+t})}},e.prototype.startScreenSharing=function(e,t){var r=this;if("getDisplayMedia"in navigator.mediaDevices){var n=navigator.mediaDevices,o=!1;o={noiseSuppression:!1,autoGainControl:!1,echoCancellation:!0},void 0!==e.ANS&&(o.noiseSuppression=e.ANS),void 0!==e.AGC&&(o.autoGainControl=e.AGC),void 0!==e.AEC&&(o.echoCancellation=e.AEC),this.logger.info("zc.b.sss video config: "+JSON.stringify(e.video)),this.logger.info("zc.b.sss audio config: "+JSON.stringify(o)),n.getDisplayMedia({audio:o,video:e.video}).then((function(e){t(!0,e)})).catch((function(e){r.logger.error("zc.b.sss "+e),e.message&&"permission denied"==e.message.toLowerCase()?t(!1,null,c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t(!1,null,{code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))}else this.logger.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError)},e.prototype.startScreenShotFirFox=function(e,t,r){var o=this,i={video:n(n({},t.video),{mediaSource:e}),audio:t.audio};navigator.mediaDevices.getUserMedia(i).then((function(e){r(!0,e)})).catch((function(e){o.logger.error("ze.ssf.1 "+e),r(!1,null,{code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startScreenShotElectron=function(e,t){var r=this;if(!window.require("electron"))return this.logger.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" Electron is not exist"});var n={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(n).then((function(e){t(!0,e)})).catch((function(e){r.logger.error("ze.sse.1 "+e),t(!1,null,{code:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:c.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startPreview=function(e,t,r,n,o){var i=this,s=null;return s=new h.ZegoPreview(this.logger,this.streamCenter.ac,this.stateCenter,this.streamCenter,t),this.streamCenter.previewStreamList.push(s),s.startPreview(e,(function(n){i.streamCenter.soundLevelDelegate&&(null==s||s.startSoundLevel()),"camera"===t&&(!1===(null==e?void 0:e.audio)&&s&&(s.hasMicTrack=!1),(null==s?void 0:s.micTrack)&&(s.micTrack.enabled=i.streamCenter.isMicEnabled)),(null==e?void 0:e.videoOptimizationMode)&&i.streamCenter.setVideoTrackContentHint(n,null==e?void 0:e.videoOptimizationMode),i.logger.debug("zsc.sp.0 call success"),!i.stateCenter.deviceInfos&&i.recordDevices(),r&&r(n)}),(function(e){i.streamCenter.previewStreamList=i.streamCenter.previewStreamList.filter((function(e){return e!==s})),n&&n(e)}),o),!0},e.prototype.stopPreview=function(e){if(!e)return this.logger.warn("zsc.sp.0 localStream null"),!1;for(var t in this.streamCenter.publisherList)this.streamCenter.publisherList[t].localStream===e&&(this.streamCenter.publisherList[t].localStream=null);var r=this.streamCenter.checkPreview(e);return r?(r.previewSuc&&(r.stopPreview(),this.streamCenter.removePreview(r)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},e.prototype.recordDevices=function(e,t){var r,a=this;this.logger.info("zsc.rd.0 call"),u.ClientUtil.getDevices((function(t){a.stateCenter.deviceInfos={microphones:t.microphones,speakers:t.speakers,cameras:t.cameras},e&&e(t)}),(function(e){a.logger.warn("zsc.rd.0 getDevices err:",e),t&&t(e)})),void 0!==(null===(r=navigator.mediaDevices)||void 0===r?void 0:r.ondevicechange)&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(e){a.logger.info("zsc.rd.0 devicechange"),a.stateCenter.deviceChangeTimer&&(clearTimeout(a.stateCenter.deviceChangeTimer),a.stateCenter.deviceChangeTimer=null),a.stateCenter.deviceChangeTimer=setTimeout((function(){u.ClientUtil.getDevices((function(e){var t,r,l,u,h,p,f=[],g=[];if("safari"==a.stateCenter.browser&&1===(null===(r=null===(t=a.stateCenter.deviceInfos)||void 0===t?void 0:t.cameras)||void 0===r?void 0:r.length)&&""===(null===(l=a.stateCenter.deviceInfos)||void 0===l?void 0:l.cameras[0].deviceID))a.logger.info("zsc.rd.0 cameras not accurate");else{for(var m=function(t){var r=a.stateCenter.deviceInfos.cameras[t];e.cameras.find((function(e){return e.deviceID===r.deviceID}))||f.push(r)},v=0;v<a.stateCenter.deviceInfos.cameras.length;v++)m(v);a.stateCenter.deviceStateOut=!1;var _=!1;f.length>0&&(_=!0),f.forEach((function(e){for(var t in a.streamCenter.publisherList){var r=a.streamCenter.publisherList[t],n=r.publisher;r.localStream&&""!==r.cameraLabel&&r.cameraLabel===e.deviceName&&(_=!1,n.sendStreamStatus(-6,n.mic_status),a.stateCenter.actionListener("_deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName,"camera"),a.stateCenter.actionListener("deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName)),r.localStream&&0===r.localStream.getAudioTracks().length&&(_=!1)}_&&(a.stateCenter.deviceStateOut=!0),a.deviceInterruptReport(0,e,"camera"),a.stateCenter.actionListener("videoDeviceStateChanged","DELETE",e)})),e.cameras.filter((function(e){return!a.stateCenter.deviceInfos.cameras.find((function(t){return t.deviceID===e.deviceID}))})).forEach((function(e){a.deviceInterruptReport(1,e,"camera"),a.stateCenter.actionListener("videoDeviceStateChanged","ADD",e)}))}"safari"==a.stateCenter.browser&&1===(null===(h=null===(u=a.stateCenter.deviceInfos)||void 0===u?void 0:u.microphones)||void 0===h?void 0:h.length)&&""===(null===(p=a.stateCenter.deviceInfos)||void 0===p?void 0:p.microphones[0].deviceID)?a.logger.info("zsc.rd.0 microphones not accurate"):((g=a.stateCenter.deviceInfos.microphones.filter((function(t){return!e.microphones.find((function(e){return e.deviceID===t.deviceID}))}))).forEach((function(e){for(var t in a.streamCenter.publisherList){var r=a.streamCenter.publisherList[t],n=r.publisher;r.localStream&&""!==r.microLabel&&(r.microLabel===e.deviceName||""!==r.microLabel&&r.microLabel.includes(e.deviceName))&&(n.sendStreamStatus(n.camera_status,-6),a.stateCenter.actionListener("_deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,a.streamCenter.publisherList[t].microLabel,"micro"),a.stateCenter.actionListener("deviceError",d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,a.streamCenter.publisherList[t].microLabel))}a.deviceInterruptReport(0,e,"micro"),a.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Input",e)})),e.microphones.filter((function(e){return!a.stateCenter.deviceInfos.microphones.find((function(t){return t.deviceID===e.deviceID}))})).forEach((function(e){a.deviceInterruptReport(1,e,"micro"),a.stateCenter.actionListener("audioDeviceStateChanged","ADD","Input",e)})));var y=a.stateCenter.deviceInfos.speakers.filter((function(t){return!e.speakers.find((function(e){return e.deviceID===t.deviceID}))})),b=e.speakers.filter((function(e){return!a.stateCenter.deviceInfos.speakers.find((function(t){return t.deviceID===e.deviceID}))}));y.forEach((function(e){var t=a.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);t.setAttributes({reason_type:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("delete"),device:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID),device_name:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName)}),t.end(),a.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Output",e)})),b.forEach((function(e){var t=a.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event);t.setAttributes({reason_type:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("add"),device:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID),device_name:c.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName)}),t.end(),a.stateCenter.actionListener("audioDeviceStateChanged","ADD","Output",e)}));var E=n({},a.stateCenter.deviceInfos);if(a.stateCenter.deviceInfos={microphones:e.microphones,speakers:e.speakers,cameras:e.cameras},a.stateCenter.autoSwitchDeviceSetting.microphone){var S=a.stateCenter.deviceInfos.microphones;g&&0!==g.length&&0!=S.length&&a.streamCenter.previewStreamList.forEach((function(e){return o(a,void 0,void 0,(function(){var t,r,n,o,s,a,l;return i(this,(function(i){switch(i.label){case 0:return t=e.localStream,r=S[0].deviceID,o=null==(n=e.audioTrack)?void 0:n.getSettings().deviceId,s=!1,o&&"default"===o?(a=E.microphones.find((function(e){return"default"===e.deviceID})).deviceName,l=S.find((function(e){return"default"===e.deviceID})).deviceName,s=l!==a):""!==o&&(s=g.some((function(e){return e.deviceID===o}))),t&&s&&""!==r?[4,this.zegoWebRtc.useAudioDevice(t,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}))}if(a.stateCenter.autoSwitchDeviceSetting.camera){var C=a.stateCenter.deviceInfos.cameras;f&&0!==f.length&&0!=C.length&&a.streamCenter.previewStreamList.forEach((function(e){return o(a,void 0,void 0,(function(){var t,r,n,o,s,a,l;return i(this,(function(i){switch(i.label){case 0:return t=e.localStream,r=C[0].deviceID,o=null==(n=e.videoTrack)?void 0:n.getSettings().deviceId,s=!1,o&&"default"===o?(a=E.cameras.find((function(e){return"default"===e.deviceID})).deviceName,l=C.find((function(e){return"default"===e.deviceID})).deviceName,s=l!==a):""!==o&&(s=f.some((function(e){return e.deviceID===o}))),t&&s&&""!==r?[4,this.zegoWebRtc.useVideoDevice(t,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}))}}),(function(e){a.logger.warn("zsc.rd.0 getDevices err:",e)}))}),500)})},e.prototype.getStreamStats=function(e){var t,r,n;return this.logger.info(a.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call"),e instanceof MediaStream&&e.getTracks().length>0?n=null===(t=this.streamCenter.checkPublish(e))||void 0===t?void 0:t.publisher:"string"==typeof e&&(n=null===(r=this.streamCenter.publisherList[e])||void 0===r?void 0:r.publisher),n?(null==n?void 0:n.currentQuality)||null:(this.logger.error("zsc.sp.0 stream is not publishing"),null)},e.prototype.startWaitPublish=function(){var e=this;this.streamCenter.waitPublishList.forEach((function(t){e.streamCenter.startPublishingStream(t,e.stateCenter.useNetAgent)})),this.streamCenter.waitPublishList=[]},e.prototype.deviceInterruptReport=function(e,t,r){var n="camera"===r?c.ZegoRTCLogEvent.kZegoVideoDeviceChanged:c.ZegoRTCLogEvent.kZegoAudioDeviceChanged,o=this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H,{key:c.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},n.event);o.setAttributes({changed_type:n.interrupt(e),device:n.device(t.deviceID),device_name:n.device_name(t.deviceName)}),o.end()},e}();t.PublishModule=v},3770:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPreview=void 0;var s=r(6706),a=r(3529),l=r(1089),c=r(9307),u=r(6171),d=r(8011),h=function(){function e(e,t,r,n,o){var i=this;this.logger=e,this.ac=t,this.stateCenter=r,this.streamCenter=n,this.previewType=o,this.localStream=null,this.videoInfo={},this.rtcViewer=null,this.streamFromCanvas=!1,this.streamFromCanvasTrack=null,this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this._emptyAudioTrack=null,this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.cloneVideoTrack=null,this.originVideoTrack=null,this.originAudioTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.isVideoEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableDualStream=!1,this.lowStreamConfig={width:160,height:120,frameRate:15,bitRate:50},this.muteImage=null,this.hasMicTrack=!0,this.enableMicrophoneOnly=function(e,t){if(!i.localStream)return i.logger.error("zp.em.2 no localStream"),!1;var r=t.getPublishList(i.localStream).map((function(e){return e.publisher}));return r.length&&r.forEach((function(t){t.sendStreamStatus(t.camera_status,i.isAudioEnabled&&e?0:2)})),i.micTrack?(i.micTrack.enabled=i.isAudioEnabled&&e,i.logger.debug("zp.emo.2 call success"),!0):(i.logger.info("zp.emo.2 no micTrack"),!0)},this.soundMeterWorklet=null,this.audioMixManager=null}return e.prototype.getEmptyAudioTrack=function(){if(!this._emptyAudioTrack){var e=this.streamCenter.ac.createMediaStreamDestination(),t=e?e.stream:null;this._emptyAudioTrack=t?t.getAudioTracks()[0]:null}return this._emptyAudioTrack},Object.defineProperty(e.prototype,"audioTrack",{get:function(){var e;return this._audioTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getAudioTracks()[0])||null},set:function(e){this._audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"micTrack",{get:function(){return this.hasMicTrack&&"camera"===this.previewType&&this.audioTrack||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoEffectStarting",{get:function(){return!!this.videoEffect&&this.videoEffect.isStarting},enumerable:!1,configurable:!0}),e.prototype.getMediaStreamConstraints=function(e,t){var r={audio:!0,video:null};if(r.video={width:this.stateCenter.settingConfig.getSetting("camera_width")||640,height:this.stateCenter.settingConfig.getSetting("camera_height")||480,frameRate:this.stateCenter.settingConfig.getSetting("camera_framerate")||15,bitRate:this.stateCenter.settingConfig.getSetting("camera_video_bitrate")},e.audio?void 0===e.audioInput&&void 0===e.ANS&&void 0===e.AGC&&void 0===e.AEC&&void 0===e.channelCount?(r.audio={},r.audio.noiseSuppression=this.stateCenter.settingConfig.getSetting("ANS"),r.audio.autoGainControl=this.stateCenter.settingConfig.getSetting("AGC"),r.audio.echoCancellation=this.stateCenter.settingConfig.getSetting("AEC"),r.audio.channelCount=1):(r.audio={},null!=e.audioInput&&(r.audio.deviceId={exact:e.audioInput}),void 0!==e.ANS&&(r.audio.noiseSuppression=e.ANS),void 0!==e.AGC&&(r.audio.autoGainControl=e.AGC),void 0!==e.AEC&&(r.audio.echoCancellation=e.AEC),void 0!==e.channelCount&&(r.audio.channelCount=e.channelCount)):!1===e.audio&&(r.audio=!1),e.video){var n=640,o=480,i=15,a=this.stateCenter.settingConfig.getSetting("camera_video_bitrate");if(1===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.LOW.width,o=s.ENUM_RESOLUTION_TYPE.LOW.height,i=s.ENUM_RESOLUTION_TYPE.LOW.frameRate,a=s.ENUM_RESOLUTION_TYPE.LOW.bitRate):2===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.MEDIUM.width,o=s.ENUM_RESOLUTION_TYPE.MEDIUM.height,i=s.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,a=s.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):3===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.HIGH.width,o=s.ENUM_RESOLUTION_TYPE.HIGH.height,i=s.ENUM_RESOLUTION_TYPE.HIGH.frameRate,a=s.ENUM_RESOLUTION_TYPE.HIGH.bitRate):4===e.videoQuality?(n=e.width||640,o=e.height||480,i=e.frameRate||15,a=e.bitRate||this.stateCenter.settingConfig.getSetting("camera_video_bitrate")):this.logger.info("zp.gmsc.2 use default"),t&&!e.videoQuality&&(e.width&&(n=e.width),e.height&&(o=e.height),e.frameRate&&(i=e.frameRate),e.bitRate&&(a=e.bitRate)),!1===e.horizontal){var l=o;o=n,n=l}!0===e.isSwitch&&(l=o,o=n,n=l),r.video={width:n,height:o,frameRate:i,bitRate:a},null!=e.facingMode?r.video.facingMode=e.facingMode:null!=e.videoInput&&null!=e.videoInput&&""!=e.videoInput&&(r.video.deviceId={exact:e.videoInput}),this.logger.info("zp.gmsc.2 width: "+n+" height: "+o+" rate: "+i)}else!1===e.video&&(e.audioBitrate&&(r.video={}),r.video=!1);return r},e.prototype.startPreview=function(e,t,r,s){return o(this,void 0,void 0,(function(){var o,l,c,u,d,h,p,f,g,m=this;return i(this,(function(i){return this.logger.debug("zp.sv.2 called"),this.mediaStreamConfig=e,void 0===navigator.mediaDevices||null==navigator.mediaDevices.getUserMedia?(r&&r(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):(o=function(e){t(e)},e.source instanceof MediaStream?(l=e.source.getVideoTracks(),c=l.length>0?l[0].getSettings():{width:0,height:0,frameRate:0},this.logger.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=e.source,this.initMediaTrack(e.source),this.videoInfo={width:c.width,height:c.height,frameRate:c.frameRate,bitRate:e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval,channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3},o&&o(this.localStream),[2]):e.source instanceof HTMLMediaElement?((u=this.captureStream(e.source,e))?(this.videoInfo.bitRate=e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(u),o&&o(u)):r&&r(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):((d=this.getMediaStreamConstraints(e)).audio&&(h=this.stateCenter.settingConfig.getSetting("AEC",!0),p=this.stateCenter.settingConfig.getSetting("AGC",!0),f=this.stateCenter.settingConfig.getSetting("ANS",!0),"boolean"==typeof h&&(this.logger.info("zp.sv.2 setting AEC "+h),d.audio.echoCancellation=h),"boolean"==typeof p&&(this.logger.info("zp.sv.2 setting AGC "+p),d.audio.autoGainControl=p),"boolean"==typeof f&&(this.logger.info("zp.sv.2 setting ANS "+f),d.audio.noiseSuppression=f)),this.videoInfo=n(n({},d.video),{keyFrameInterval:e.keyFrameInterval}),this.videoInfo?(this.videoInfo.audioBitrate=1e3*e.audioBitrate||48e3,this.videoInfo.startBitrate=e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),this.videoInfo.minBitrate=e.minBitrate,this.videoInfo.keyFrameInterval=e.keyFrameInterval):e.audioBitrate&&(this.videoInfo={audioBitrate:1e3*e.audioBitrate||48e3}),(g=this.stateCenter.settingConfig.getSetting("camera_audio_bitrate",!0))&&(this.videoInfo.audioBitrate=1e3*g),d.video instanceof Object&&(d.video.width=this.stateCenter.settingConfig.getSetting("camera_width",!0)||d.video.width,d.video.height=this.stateCenter.settingConfig.getSetting("camera_height",!0)||d.video.height,d.video.frameRate=this.stateCenter.settingConfig.getSetting("camera_framerate",!0)||d.video.frameRate),this.mediaStreamConfig.video=!!d.video,this.mediaStreamConfig.audio=!!d.audio,this.logger.info("zp.sv.2 ",JSON.stringify(d)),s.setAttribute("preview_conf",a.ZegoRTCLogEvent.kZegoTaskCreateStream.preview_conf(d)),e.unlimitedCaptureResolution&&d.video.width&&(d.video.width={ideal:4096},d.video.height={ideal:2160},this.logger.info("zp.sv.2 ","capture max resolution of camera")),navigator.mediaDevices.getUserMedia(d).then((function(t){m.logger.info("zp.sv.2 success"),m.localStream=t,m.previewSuc=!0,m.initMediaTrack(t),m.videoInfo&&(m.videoInfo.channelCount=e.channelCount||(m.audioTrack&&m.audioTrack.getSettings?m.audioTrack.getSettings().channelCount:1)),o&&o(t)}),(function(e){if(m.logger.info("zp.sv.2 failed ",e.name," ",e.message),r){var t=a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError;t.message=t.message+" "+e.name+" "+e.message,"NotAllowedError"===e.name||"SecurityError"===e.name?(t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message=e.name+": "+t.message:"NotReadableError"===e.name?(t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message=e.name+": "+t.message:"OverconstrainedError"===e.name&&((t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message=e.name+": "+t.message+(e.constraint?". such as "+e.constraint:"")),r(t)}})),[2]))}))}))},e.prototype.captureStream=function(e,t){if(!e)return this.logger.info("zp.cs.2 no local video"),null;var r;if(e.captureStream)r=e.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),null;r=e.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return 0==r.getTracks().length?(this.logger.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=r,this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:t.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:t.minBitrate,keyFrameInterval:t.keyFrameInterval},this.logger.debug("zp.cs.2 called success"),this.localStream)},e.prototype.stopPreview=function(){var e,t,r,n,o,i,s;if(this.logger.info("zp.sv.2.1 called"),this.localStream){var a=this.rtcViewer;a&&a.stop(),this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),null===(e=this.cloneVideoTrack)||void 0===e||e.stop(),this.muteImageAnID&&cancelAnimationFrame(this.muteImageAnID),null===(t=this.originVideoTrack)||void 0===t||t.stop(),null===(r=this.originAudioTrack)||void 0===r||r.stop(),null===(n=this.videoTrack)||void 0===n||n.stop(),null===(o=this.audioTrack)||void 0===o||o.stop(),null===(i=this.audioMixManager)||void 0===i||i.stopAudioManager(),this.localStream.getTracks().reverse().forEach((function(e){return e.stop()})),this.localStream=null,null===(s=this.lowStream)||void 0===s||s.getTracks().reverse().forEach((function(e){return e.stop()})),this.lowStream=void 0,this.videoInfo={}}},e.prototype.enableMicrophone=function(e,t){return!1},e.prototype.enableCamera=function(e,t,r){return!1},e.prototype.enableCameraCapturing=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,!1]}))}))},e.prototype.startSoundLevel=function(){var e,t=this;if(this.localStream&&0!=this.localStream.getAudioTracks().length){null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect();try{this.mic=this.ac.createMediaStreamSource(this.localStream);var r=this.soundMeterWorklet=new d.SoundMeterWorklet(this.logger,this.streamCenter.soundLevelInterval);r.initAudioWorklet(this.ac,this.mic),r.onSoundLevelUpdate=function(e){t.soundLevel=100*e}}catch(e){this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" get sound level failed "+e)}}},e.prototype.stopSoundLevel=function(){var e;this.soundLevel=0,null===(e=this.soundMeterWorklet)||void 0===e||e.destroy(),this.mic&&this.mic.disconnect(),this.mic=null},e.prototype.restartSoundLevel=function(){this.streamCenter.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},e.prototype.setBeautyEffect=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.replacePreviewTrack=function(e,t,r){void 0===t&&(t=!1)},e.prototype.createLowStream=function(){var e,t,r,n,o,i=null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0];if(i){var s=i.getSettings().height,a=i.getSettings().width,l=navigator.userAgent,c="micromessenger"==l.toLowerCase().match(/MicroMessenger/i),u=l.indexOf("Android")>-1||l.indexOf("Adr")>-1;this.logger.info("zp.cls w: "+a+" h: "+s+" "+u+" "+c);var d="number"==typeof(null===(t=this.videoInfo)||void 0===t?void 0:t.width)&&"number"==typeof(null===(r=this.videoInfo)||void 0===r?void 0:r.height)&&s==this.videoInfo.width&&a==this.videoInfo.height;if(c&&u&&d){var h=s;s=a,a=h}var p=s&&a?s/a:1;try{var f,g=this.lowStreamConfig,m=g.width,v=g.frameRate;if(f=Math.round(p*this.lowStreamConfig.width),"firefox"===this.stateCenter.browser)this.lowStream=this.getStreamThroughCanvas(this.localStream,{w:m,h:f,fps:v});else{this.lowStream=null===(n=this.localStream)||void 0===n?void 0:n.clone();var _=null===(o=this.lowStream)||void 0===o?void 0:o.getVideoTracks()[0];null==_||_.applyConstraints({width:m,height:f,frameRate:v})}}catch(e){this.logger.error("zp.cls "+e)}}},e.prototype.initAudioNodeQueue=function(e){if(!this.audioTrack||!this.localStream)return!1;var t=this.createSrcNode(this.audioTrack),r=this.createDestNode(this.localStream);return this.audioNodeQueue=new u.AudioNodeQueue(t,r),!0},e.prototype.createSrcNode=function(e,t){void 0===t&&(t=!1);var r=void 0===e?this.audioTrack:e;if(this.srcNode){if(!t)return this.srcNode;this.srcNode.disconnect(),this.logger.info("zp.csn recreate src")}var n=new MediaStream;r&&n.addTrack(r);var o=this.srcNode=this.ac.createMediaStreamSource(n);return this.logger.info("zp.csn "+"create src: ".concat(null==r?void 0:r.label)),o},e.prototype.createDestNode=function(e){var t;if(this.destNode)return this.destNode;var r=this.destNode=this.destNode||this.ac.createMediaStreamDestination(),n=r.stream.getAudioTracks()[0],o=this.rtcViewer;for(var i in this.streamCenter.publisherList){var s=this.streamCenter.publisherList[i];if(s.localStream==e){var a=null===(t=s.publisher.peerConnection)||void 0===t?void 0:t.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));a&&(a.replaceTrack(n),this.logger.info("zc.pv.cdn change sender audio track"));break}}var l=e.getAudioTracks()[0];return l&&l!==this.getEmptyAudioTrack()&&(n.enabled=l.enabled,e.removeTrack(l)),e.addTrack(n),o&&o.setAudio(n),r},e.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0],this.originAudioTrack=this.audioTrack)},e.prototype.onAudioTrackChange=function(e){},e.prototype.getViewer=function(){return this.localStream&&!this.rtcViewer&&(this.rtcViewer=new c.StreamView(this.localStream,this,{clearLastFrame:this.stateCenter.engineConfig.previewClearLastFrame})),this.rtcViewer},e.prototype.getStreamThroughCanvas=function(e,t){if(0==e.getVideoTracks().length)return e;var r=document.createElement("video"),n=document.createElement("canvas"),o=n.getContext("2d");r.setAttribute("style","display:none"),n.setAttribute("style","display:none"),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("autoplay",""),r.autoplay=!0,r.setAttribute("playsinline",""),document.body.append(r),document.body.append(n),r.srcObject=e;var i=function(){0!==n.width&&(null==o||o.drawImage(r,0,0,n.width,n.height),window.requestAnimationFrame(i),r.srcObject=e)};r.oncanplay=function(){n.width=(null==t?void 0:t.w)||r.videoWidth,n.height=(null==t?void 0:t.h)||r.videoHeight,r.play(),i()};var s=n.captureStream((null==t?void 0:t.fps)||15),a=s.getVideoTracks()[0],l=a.stop;if(a.stop=function(){l.call(a),i(),r.remove(),n.width=0,n.remove()},e instanceof MediaStream&&e.getAudioTracks().length){var c=e.getAudioTracks()[0];s.addTrack(c)}return s},e.prototype.stopCanvasStreamTrack=function(){var e;this.streamFromCanvas&&this.streamFromCanvasTrack&&(null===(e=this.streamFromCanvasTrack)||void 0===e||e.stop(),this.streamFromCanvasTrack=null)},e}();t.ZegoPreview=h},1547:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPublish=void 0;var o=r(6706),i=r(4767),s=r(3409),a=r(608),l=r(3529),c=r(1089),u=r(7646),d=r(6454),h=l.ZegoRTCLogEvent.kZegoTaskPublishStart,p=l.ZegoRTCLogEvent.kZegoTaskSDKPublishStream,f=l.ZegoRTCLogEvent.kZegoStartPublish,g=function(){function e(e,t,r,n,i,a,l){var c=this;this.curCBState={state:"NO_PUBLISH",code:0},this._state=o.ENUM_PUBLISH_STATE.stop,this.lastState=o.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,videoPacketsLost:0,videoPacketsLostRate:0,googCodecName:""},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioPacketsLost:0,audioPacketsLostRate:0,googCodecName:""}},this.canvasTimer=null,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,o.getSeq)(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,channelCount:1,audioBitrate:48e3,minBitrate:0,keyFrameInterval:2},this.mediaStreamConfig=null,this.offerSeq=0,this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.stop,this.isExternal=!1,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!1,this.peerFailCount=0,this.peerID=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=o.ENUM_PROBE_STATE.probed,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.isUdpSuccess=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.answerSdpTime=0,this.streamConnectIP="",this.mediaSideInfos=[],this.lowMediaSideInfos=[],this.sideMediaConfig={isSEIStart:!1,SEIType:o.ZegoSEIType.ZegoDefined,unregisterSeiFilter:"",uuidSend:!1,track:null},this.reportBeginTime=0,this.reportPublishingTime=0,this.reportPublishStateTime=0,this.isRePublish=!1,this.publishStat={},this.poorQualityNum=0,this.cachedGwNodesMode=s.CachedNodesUseMode.TheSameReUse,this.rtcPublishCount=0,this.stopReason="",this.signalTime=0,this._turnToTcp=!1,this.encodeLowVideoFrame=function(e,t){c.encodeFrame(e,t,!0)},this.encodeVideoFrame=function(e,t){c.encodeFrame(e,t,!1)},this.camera_status=2,this.mic_status=2,this.streamId=e,this.logger=t,this.dataReport=r,this.qualityTimeInterval=n,this.streamCenter=i,this.stateCenter=a,this.videoCodec=this.stateCenter.settingConfig.getSetting("publish_video_codec"),this.previewer=l,this.localStream=l.localStream,l.onAudioTrackChange=function(e){var t=c.peerConnection&&c.peerConnection.getSenders().find((function(t){var r;return(null===(r=t.track)||void 0===r?void 0:r.kind)===e.kind}));t?(t.replaceTrack(e),c.logger.info("zc.oatc remote audio track change success")):c.logger.warn("zc.oatc stream has not sender")},this.initStreamReport()}return e.prototype.updateCBState=function(e){var t=this,r=Object.keys(e).some((function(r){return e[r]!==t.curCBState[r]}));return r&&(this.curCBState=e),r},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStream",{get:function(){var e;return null===(e=this.previewer)||void 0===e?void 0:e.lowStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[o.ENUM_PUBLISH_STATE_NEGO.iceClosed,o.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,o.ENUM_PUBLISH_STATE_NEGO.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){return this.lastState===o.ENUM_PUBLISH_STATE.publishing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":"udp"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ip",{get:function(){var e,t;return null===(t=null===(e=this.gwNode)||void 0===e?void 0:e.split(":"))||void 0===t?void 0:t[0]},enumerable:!1,configurable:!0}),e.prototype.initStreamReport=function(){this.reportSpan=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I,{key:l.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:p.event,par:this.streamId},p.event,!0),this.reportBeginTime=(new Date).getTime()},e.prototype.publishStateUpdateError=function(e,t,r,n){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  call ",this.streamId+" "+JSON.stringify(e));var i=this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:this.streamId},{key:""},l.ZegoRTCLogEvent.kZegoTaskPublishStreamStateError.event);i.setAttributes({error:null==e?void 0:e.code,message:null==e?void 0:e.message}),i.end(),this.streamId&&this.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,e,t,r,n),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  ended")},e.prototype.netProbeToReDispatch=function(){this.publishStateUpdateError(l.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor)},e.prototype.resetPublish=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH+"   "+this.streamId+" call"),this.state=o.ENUM_PUBLISH_STATE.stop,this.publishEvent=!1,null==this.peerConnection&&null==this.peerConnection||(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.clearPublishQualityTimer(),this.clearCanvasTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.resetEncBitrate(),this.isUpdateSDP=!1},e.prototype.clearPublishQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0,this.poorQualityNum=0},e.prototype.clearCanvasTimer=function(){null!=this.canvasTimer&&(clearInterval(this.canvasTimer),this.sideMediaConfig.track=null,this.canvasTimer=null)},e.prototype.shouldSendCloseSession=function(){return this.state!=o.ENUM_PUBLISH_STATE.stop&&this.state!=o.ENUM_PUBLISH_STATE.waitingSessionRsp},e.prototype.startPublish=function(e,t,r,n,o){var i,s,l,u,d,f,g,m,v,_,y,b,E,S=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){var C;this.localStream=t,this.mediaStreamConfig=n,this.channelCount=n.channelCount,this.publishOption=o||{},(null==o?void 0:o.SEIType)&&(this.sideMediaConfig.SEIType=o.SEIType),this.currentQuality.video.muteState=(null===(s=null===(i=this.previewer)||void 0===i?void 0:i.videoTrack)||void 0===s?void 0:s.enabled)?"0":"1",this.currentQuality.audio.muteState=this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&n&&(n.externalCapture||n.externalMediaStream)&&(this.localStream.onaddtrack=function(){var e,t,r,n;S.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+S.streamId+" Track added");var o=[];(null===(e=S.previewer)||void 0===e?void 0:e.videoTrack)&&o.push(null===(t=S.previewer)||void 0===t?void 0:t.videoTrack);var i=S.localStream.getAudioTracks();if(o.length>1){var s=null===(r=S.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===S.localStream.getVideoTracks()[0].id}));null==s||s.replaceTrack(o[1]),S.localStream.removeTrack(o[0])}else i.length>1&&(s=null===(n=S.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===i[1].kind})),null==s||s.replaceTrack(i[1]),S.localStream.removeTrack(i[0]))}),r&&(this.videoInfo=r),o&&o.videoCodec&&(this.videoCodec=o.videoCodec);var T=null===(l=this.previewer)||void 0===l?void 0:l.previewType;switch(T){case"camera":C=this.stateCenter.settingConfig.getSetting("camera_video_bitrate",!0);break;case"screen":C=this.stateCenter.settingConfig.getSetting("screen_video_bitrate",!0);break;case"custom":C=this.stateCenter.settingConfig.getSetting("custom_video_bitrate",!0)}void 0!==C&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+T+" "+C),this.videoInfo.bitRate=C);var w=this.stateCenter.settingConfig.getSetting("bitrate_mode",!0);w&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting bitrate_mode "+w),this.videoInfo.startBitrate=w);var R=this.stateCenter.settingConfig.getSetting("publish_video_codec",!0);if(R&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting publish_video_codec "+R),this.videoCodec=R),"boolean"==typeof(null==o?void 0:o.isSEIStart)&&(this.sideMediaConfig.isSEIStart=null==o?void 0:o.isSEIStart),this.sideMediaConfig.isSEIStart){var k=a.ClientUtil.isSupportEncodedTransforms();"H264"===this.videoCodec&&k||(this.sideMediaConfig.isSEIStart=!1)}(null===(u=this.stateCenter.seiConfig)||void 0===u?void 0:u.unregisterSEIFilter)&&(this.sideMediaConfig.unregisterSeiFilter=null===(d=this.stateCenter.seiConfig)||void 0===d?void 0:d.unregisterSEIFilter),this.stateCenter.reporter.spanSetAttributes({key:h.event,par:this.streamId},{video_en_codec_id:h.video_en_codec_id("VP8"==this.videoCodec?2:0),audio_c_channel_count:h.audio_c_channel_count(2==this.channelCount?2:1),audio_en_bps:h.audio_en_bps(this.videoInfo.audioBitrate),aec_level:h.aec_level(1==n.AEC?2:0==n.AEC?0:2),ans_level:h.ans_level(1==n.ANS?2:0==n.ANS?0:2),agc:h.agc(1==n.AGC||0!=n.AGC),video_activate:h.video_activate(!!(null===(g=null===(f=this.previewer)||void 0===f?void 0:f.videoTrack)||void 0===g?void 0:g.enabled)),audio_activate:h.audio_activate(!!(null===(v=null===(m=this.previewer)||void 0===m?void 0:m.audioTrack)||void 0===v?void 0:v.enabled)),scenario:this.stateCenter.scenario}),this.reportSpan.setAttributes({room_id:p.room_id(null===(y=null===(_=this.streamCenter.publisherList[this.streamId])||void 0===_?void 0:_.room)||void 0===y?void 0:y.roomID),room_sid_string:p.room_sid_string(null===(E=null===(b=this.streamCenter.publisherList[this.streamId])||void 0===b?void 0:b.room)||void 0===E?void 0:E.roomSessionID),max_retry_interval:p.max_retry_interval(this.stateCenter.streamRetryTime),scenario:this.stateCenter.scenario,use_resource_type:p.use_resource_type(["rtc"])}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),this.negoTimer=setTimeout((function(){S.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" waiting timeout"),S.publishStateUpdateError(h.error.kPublishNegoTimeoutError)}),this.negoInterval)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" streamId is null")},e.prototype.activateSEIInsert=function(e,t){return new Promise((function(e,t){e(!1)}))},e.prototype.createSession=function(e,t){var r,n,i,s=this;this.sessionSeq=(0,o.getSeq)();var a=this.streamId;1==this.streamCenter.testEnvironment&&(a="zegotest-"+this.streamCenter.appid+"-"+this.streamId),this.streamCenter.gwNode&&(this.gwNode=this.streamCenter.gwNode);var u=this.stateCenter.settingConfig.getSetting("gw_nodes");u&&u instanceof Array&&u.length>0&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(u)),this.gwNodeList=u,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var d=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);d&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting udp_or_tcp "+d),this._turnToTcp="tcp"===d),this._turnToTcp&&(this.isPeer=!1);var p="",f=[];this.stateCenter.idName&&f.push("zguid="+this.stateCenter.idName);var g=(null===(n=null===(r=this.streamCenter.publisherList[this.streamId])||void 0===r?void 0:r.room)||void 0===n?void 0:n.roomID)||(null===(i=this.stateCenter.roomList[0])||void 0===i?void 0:i.roomID);g&&f.push("zgrid="+g);var m=l.ZegoRTCLogEvent.kZegoPublishCreateSession;if(this.isPeer){var v=(new Date).getTime();f.length>0&&(p=f.join("&"));var _=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:a,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:t||e.sdp,serverHost:this.gwNode,params:p},(function(e,t,r){var n=(new Date).getTime();s.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session time "+(n-v)),_.setAttributes({webrtc_sid:t,sdp:m.sdp(r.sdp),gw_nodes:m.gw_nodes(r.gw_nodes),gw_nodes_ttl:m.gw_nodes(r.gw_nodes_ttl),gw_version:m.gw_version(r.gw_version)}),_.end(),s.stateCenter.reporter.spanSetAttributes({key:h.event,par:s.streamId},{gw_version:h.gw_version(r.gw_version)}),s.stateNego!==o.ENUM_PUBLISH_STATE_NEGO.iceConnected&&s.getSpan(l.ZegoRTCLogEvent.kZegoPublishIceConnected.event,s.parentSpanKey,"",!0),s.handleCreateSessionWithSdpResp(e,t,r)}),(function(e,t){if(s.sessionSeq==t){var r=e==o.SEND_MSG_TIMEOUT?h.error.kSessionTimeoutError:h.error.kSessionRequestError;_.setAttributes({try_cnt:s.peerFailCount}),s.stateCenter.reporter.setError(_,r),s.publishStateUpdateError(r)}else s.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")}))}else{f.length>0&&(p=f.join("&"));var y=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishCreateSession.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,0,0,a,this.publishOption&&this.publishOption.streamParams,this.gwNode,p,(function(e,t,r){y.setAttributes({webrtc_sid:m.webrtc_sid(t),gw_nodes:m.gw_nodes(r.gw_nodes),gw_nodes_ttl:m.gw_nodes(r.gw_nodes_ttl),gw_version:m.gw_version(r.gw_version)}),y.end(),s.stateCenter.reporter.spanSetAttributes({key:h.event,par:s.streamId},{gw_version:h.gw_version(r.gw_version)}),s.handleCreateSessionResp(e,t,r)}),(function(e,t){if(s.sessionSeq==t){var r=e==o.SEND_MSG_TIMEOUT?h.error.kSessionTimeoutError:h.error.kSessionRequestError;s.stateCenter.reporter.setError(y,r),s.publishStateUpdateError(r)}else s.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")}))}this.state=o.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" called success"),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,r){var n=r.turn_server,o=n.split("?")[0]&&n.split("?")[0].slice(5),i=this.streamCenter.server.split("?"),s=i[1]&&i[1].slice(2),a="webrtc://".concat(o,"/").concat(s,"/").concat(this.streamId);if(this.stateCenter.reporter.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:r.session_id,url:a}),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" sessionId:"+r.session_id),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var l=0,u=(new Date).getTime();this.reportBeginTime&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(l=u-this.reportBeginTime)),this.signalTime=l),this.answerSdpTime=u,0!==r.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session failed "+r.result),this.publishStateUpdateError(h.error.kSessionRequestError)):(this.sessionId=r.session_id,this.sessionToken=r.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session success "+this.sessionId),this.setGwNodes(r,!1),this.onCreatePublishSessionSuccess(r))}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,r){var n=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" sessionId:"+t),this.sessionSeq==e){this.stateCenter.clientIP=r.clientip?r.clientip:this.stateCenter.clientIP;var o=0,i=(new Date).getTime();if(this.reportBeginTime&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create signal time "+(o=i-this.reportBeginTime)),this.signalTime=o),this.answerSdpTime=i,0!==r.result)this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session failed "+r.result),this.publishStateUpdateError({code:h.error.kSessionRequestError.code,message:h.error.kSessionRequestError.message+" result:"+r.result});else{this.sessionId=t,this.sessionToken=r.session_token,this.setGwNodes(r,!1),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" get remote session success "+this.streamId);var s=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,r){if(s){var o=(performance.now()-s).toFixed(0);s=void 0,n.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(n.streamId,", cmd: CloseSessionPush, cost_time: ").concat(o))}n.onRecvCloseSession(e,t,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,r){n.onRecvResetSession(e,t,r)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,t,r){if(s){var o=(performance.now()-s).toFixed(0);s=void 0,n.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" ".concat(n.streamId,", cmd: PublishEventPush, cost_time: ").concat(o))}n.onRecvPublishEvent(e,t,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,r){n.onRecvClientInfo(e,t,r)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,t,r){n.onRecvUpdateMediaDescription(e,t,r)})),this.onGetRemoteOfferSuccess(r.sdp)}}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")},e.prototype.setGwNodes=function(e,t){var r;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_GW_NODES+" "+this.streamId+" "+JSON.stringify(null==e?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),(null===(r=e.gw_nodes)||void 0===r?void 0:r.length)>0){var n=this.sortGwNodes(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(n,e.gw_nodes_ttl)}},e.prototype.resetGwNodes=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_GW_NODES+" "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},e.prototype.sortGwNodes=function(e,t,r){var n=JSON.parse(JSON.stringify(e));if(t.forEach((function(e){var t=n.indexOf(e);t>=0&&(n.splice(t,1),n.push(e))})),!r){var o=n.findIndex((function(t){return t===e[0]}));o>0&&(n.splice(o,1),n.unshift(e[0]))}return n},e.prototype.handleDispatchedGwNodes=function(e,t){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_DISPATCHED_GW_NODES+" "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var r=0===t?60:t;this.gwNodesTTL=r?(new Date).getTime()+1e3*r:this.gwNodesTTL,e.length>0&&this.streamCenter.updateCachedGwNodesList(this,!0,e,r)}},e.prototype.onCreatePublishSessionSuccess=function(e){var t=this,r=c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.logger.info(r+" "+this.streamId+" called");var n=[];if(e.turn_server){var o=e.turn_server.split(";");this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var i=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(i)&&(this.streamCenter.maxUdpFailNum=i);var s=this.streamCenter,a=s.autoSwitchProtocol,l=s.maxUdpFailNum,u=s.udpFailNum;this.logger.info(r+"  autoToTcp: ".concat(a,", udpFailNum: ").concat(u,", maxUdpFailNum: ").concat(l,".")),a&&!this._turnToTcp&&u>=l&&(this.logger.info(r+" switch to tcp. "),this._turnToTcp=!0);var d=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);d&&(this.logger.info(r+" setting udp_or_tcp "+d),this._turnToTcp="tcp"===d);var h,p=o.filter((function(e){return e.indexOf("udp")>-1})),f=o.filter((function(e){return e.indexOf("tcp")>-1}));h=this._turnToTcp?f.length>0?f:p.map((function(e){return e.replace("udp","tcp")})):p,this.logger.info(r+" over tcp "+JSON.stringify(h)),n.push.apply(n,h)}e.stun_server&&n.push(e.stun_server);var g={iceTransportPolicy:"all",iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart};this.logger.info(r+" "+this.streamId+" username: "+e.turn_username),this.logger.info(r+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(g);var m=performance.now();this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,r,n){t.onRecvCandidateInfo(e,r,n)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,n,o){if(m){var i=(performance.now()-m).toFixed(0);m=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: CloseSessionPush, cost_time: ").concat(i))}t.onRecvCloseSession(e,n,o)})),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,r,n){t.onRecvMediaDescription(e,r,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,r,n){t.onRecvResetSession(e,r,n)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,n,o){if(m){var i=(performance.now()-m).toFixed(0);m=void 0,t.logger.info(r+" ".concat(t.streamId,", cmd: PublishEventPush, cost_time: ").concat(i))}t.onRecvPublishEvent(e,n,o)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,r,n){t.onRecvClientInfo(e,r,n)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,r,n){t.onRecvUpdateMediaDescription(e,r,n)})),this.logger.info(r+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t,r,n,o=this,i=c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){o.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){o.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){o.onIceConnectionStateChange(e)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){o.logger.info(i+" "+o.streamId+" data channel open"),o.dataChannelState=1},this.dataChannel.onclose=function(e){o.logger.error(i+" "+o.streamId+" data channel close ")});var s=[],a=[];if(this.lowStream&&this.lowStream.getVideoTracks().forEach((function(e){var t,r=null===(t=o.peerConnection)||void 0===t?void 0:t.addTrack(e,o.lowStream);o.sideMediaConfig.isSEIStart&&r&&"function"==typeof r.createEncodedStreams&&o.createVideoSenderTransform(r,!0)})),this.localStream){if(this.localStream.getTracks().forEach((function(e){var t,r=null===(t=o.peerConnection)||void 0===t?void 0:t.addTrack(e,o.localStream);o.sideMediaConfig.isSEIStart&&r&&"function"==typeof r.createEncodedStreams&&("video"===e.kind?o.createVideoSenderTransform(r):"audio"===e.kind&&o.createAudioSenderTransform(r))})),!(null===(t=this.previewer)||void 0===t?void 0:t.videoTrack)&&this.sideMediaConfig.isSEIStart){this.videoInfo.bitRate||(this.videoInfo.bitRate=50);var u=this.sideMediaConfig.track=this.addCanvasStreamVideoTrack(),d=this.peerConnection.addTrack(u,this.localStream);d&&"video"==u.kind&&this.createVideoSenderTransform(d)}(null===(r=this.previewer)||void 0===r?void 0:r.videoTrack)&&(s=[null===(n=this.previewer)||void 0===n?void 0:n.videoTrack]),a=this.localStream.getAudioTracks(),s.length>0&&this.logger.info(i+" "+this.streamId+" video device: "+s[0].label),a.length>0&&this.logger.info(i+" "+this.streamId+" audio device: "+a[0].label)}var p={offerToReceiveAudio:a.length>0?1:0,offerToReceiveVideo:s.length>0?1:0};this.logger.info(i+" "+this.streamId+" createOffer: "+JSON.stringify(p));var f=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishCreateOffer.event,this.parentSpanKey);this.peerConnection.createOffer(p).then((function(e){f.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPublishCreateOffer.sdp(e.sdp)}),f.end(),o.onCreateOfferSuccess(e)}),(function(e){o.logger.error(i+" "+o.streamId+" create offer error "+e.toString()),o.stateCenter.reporter.setError(f,{code:h.error.kCreateOfferError.code,message:e.toString()}),o.publishStateUpdateError(h.error.kCreateOfferError,!0)}))},e.prototype.sendSEI=function(e){var t,r;if("H264"!==this.videoCodec)return this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" code not support"),!1;if(!this.sideMediaConfig.isSEIStart)return this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" not enable to send sei"),!1;var n=null===(t=this.peerConnection)||void 0===t?void 0:t.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));return n&&"function"!=typeof(null===(r=n[0])||void 0===r?void 0:r.createEncodedStreams)?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" browser not support"),!1):this.sideMediaConfig.SEIType==o.ZegoSEIType.UserUnregister&&e.byteLength<=16?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" inData size should greater than 16"),!1):this.mediaSideInfos.length>=10?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI+" side info count limit"),!1):(this.mediaSideInfos.push(e.buffer),this.lowStream&&this.lowMediaSideInfos.push(e.buffer),!0)},e.prototype.createAudioSenderTransform=function(e){var t=e.createEncodedStreams(),r=new TransformStream({transform:this.encodeAudioFrame});t.readable.pipeThrough(r).pipeTo(t.writable)},e.prototype.encodeAudioFrame=function(e,t){t.enqueue(e)},e.prototype.createVideoSenderTransform=function(e,t){void 0===t&&(t=!1);var r=e.createEncodedStreams(),n=new TransformStream({transform:t?this.encodeLowVideoFrame:this.encodeVideoFrame});r.readable.pipeThrough(n).pipeTo(r.writable)},e.prototype.encodeSEINalu=function(e){var t=e.byteLength,r=parseInt(t/255),n=t%255,i=1+(r+1)+t+1,s=new ArrayBuffer(i),a=new DataView(s),l=0;a.setUint8(l++,this.sideMediaConfig.SEIType===o.ZegoSEIType.UserUnregister?5:243);for(var c=0;c<r;c++)a.setUint8(l++,255);a.setUint8(l++,n);var u=new DataView(e);for(c=0;c<(null==e?void 0:e.byteLength);c++)a.setInt8(l++,u.getInt8(c));a.setInt8(l++,128);var d=[];return{rbspView:a,ebspLength:i+d.length,ebspPreventProcessPos:d.map((function(e,t){return e+t}))}},e.prototype.encodeFrame=function(e,t,r){var n=r?this.lowMediaSideInfos:this.mediaSideInfos;if(n.length>0){for(var o=new DataView(e.data),i=[],s=0,a=0;a<n.length;a++){var l=this.encodeSEINalu(n[a]);s+=5+(E=l.ebspLength),i.push(l)}r?this.lowMediaSideInfos=[]:this.mediaSideInfos=[];for(var c=new ArrayBuffer(s+e.data.byteLength),d=new DataView(c),h=0,p=new u.H264Parser(o),f=0,g=!1,m=!1;p.NextNalu();){var v=31&o.getUint8(p.nalu_start+p.start_code_size);if(7==v)g=!0,f+=p.nalu_size;else if(8==v)m=!0,f+=p.nalu_size;else if(9==v)continue;if(g&&m)break}for(var _=0;_<f;_++)d.setInt8(h++,o.getInt8(_));for(a=0;a<i.length;a++){var y=i[a],b=y.rbspView,E=y.ebspLength,S=y.ebspPreventProcessPos;d.setUint8(h++,0),d.setUint8(h++,0),d.setUint8(h++,0),d.setUint8(h++,1),d.setUint8(h++,6);for(var C=0,T=0;T<E;T++)S.indexOf(T)>-1?(d.setInt8(h++,3),C++):d.setInt8(h++,b.getInt8(T-C))}for(_=f;_<e.data.byteLength;_++)d.setInt8(h++,o.getInt8(_));e.data=c}t.enqueue(e)},e.prototype.onCreateOfferSuccess=function(e,t,r,n){var o,s=this;t&&(this.isUpdateSDP=!0,n&&(this.updateSDPCallBack=n)),this.videoInfo.bitRate>0&&(e.sdp=this.updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),e.sdp=e.sdp.replace(/sendrecv/g,"sendonly");var a=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(a){var u=a.replace(/sendonly/,"sendrecv");e.sdp=e.sdp.replace(a,u)}e.sdp=e.sdp.replace(/useinbandfec=\d+/,(this.videoInfo.audioBitrate?"maxaveragebitrate="+this.videoInfo.audioBitrate:"")+(2===this.videoInfo.channelCount?";stereo=1":"")),this.localSdpOrder=e.sdp.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),e.sdp=i.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2));var d=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.event,this.parentSpanKey);d.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.sdp(e.sdp)}),null===(o=this.peerConnection)||void 0===o||o.setLocalDescription(e).then((function(){d.end(),s.onSetLocalDescriptionSuccess(e,r)}),(function(e){s.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+s.streamId+" error "+e.toString()),s.stateCenter.reporter.setError(d,{code:h.error.kSetLocalDescError.code,message:e.toString()}),s.publishStateUpdateError(h.error.kSetLocalDescError,!0)}))},e.prototype.updateBandwidthRestriction=function(e,t){var r="AS";return"firefox"===this.stateCenter.browser&&(t=1e3*(t>>>0),r="TIAS"),-1===e.indexOf("b="+r+":")?e.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+r+":"+t+"\r\n"):(e=e.replace(new RegExp("b="+r+":.*\r\n","g"),"b="+r+":"+t+"\r\n")).replace("b="+r+":"+t+"\r\n","")},e.prototype.onSetLocalDescriptionSuccess=function(e,t){var r,s,a,u,d=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),!this.isUpdateSDP&&(this.state=o.ENUM_PUBLISH_STATE.waitingOfferRsp),t&&(this.videoInfo=n(n({},this.videoInfo),t));var p=!1,f=null===(r=this.previewer)||void 0===r?void 0:r.previewType,g=this.stateCenter.settingConfig;"camera"===f?p=g.getSetting("camera_hard_encode"):"screen"===f?p=g.getSetting("hardware_encode"):"custom"===f&&(p=g.getSetting("custom_hard_encode"));var m=!p;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" ".concat(null===(s=this.previewer)||void 0===s?void 0:s.previewType," software encode: ").concat(m,", "));var v=i.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec,m,this.stateCenter.engineConfig.encodecSelectionMode),_=null===(a=this.previewer.videoTrack)||void 0===a?void 0:a.getSettings(),y=(null==_?void 0:_.width)||this.videoInfo.width,b=(null==_?void 0:_.height)||this.videoInfo.height,E=(null==_?void 0:_.frameRate)||this.videoInfo.frameRate,S={sdp:v,width:isNaN(y)?100:y,height:isNaN(b)?100:b,frameRate:isNaN(E)?15:E,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:Math.floor((null===(u=this.videoInfo)||void 0===u?void 0:u.keyFrameInterval)||2)};if(this.offerSeq=(0,o.getSeq)(),this.isUpdateSDP){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" update sdp");var C=n(n({},S),{seq:this.sessionSeq,peerID:this.peerID,type:0});this.signal.sendMediaDescUpdateReq(this.offerSeq,this.sessionId,C,(function(e,t,r){}),(function(e,t){d.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+d.streamId+" update sdp failed"),d.updateSDPCallBack&&d.updateSDPCallBack(-1),d.publishStateUpdateError(e==o.SEND_MSG_TIMEOUT?h.error.kUpdateMediaDescriptionTimeOut:h.error.kUpdateMediaDescriptionError)}))}else if(this.isPeer)this.createSession(e,v);else{var T=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.event,this.parentSpanKey);this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,S,(function(e,t,r){T.setAttributes({webrtc_sid:l.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.webrtc_sid(t),mediaDescription:{width:S.width,height:S.height,frameRate:S.frameRate,video_min_kpbs:S.video_min_kpbs,video_max_kpbs:S.video_max_kpbs,audio_kpbs:S.audio_kpbs,keyframe_intv:S.keyframe_intv},sdp:S.sdp}),T.end(),d.offerSeq==e&&d.sessionId==t?(d.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+d.streamId+" send success"),d.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+d.streamId+" send success stateNego:waiterAnswer"),d.stateNego=o.ENUM_PUBLISH_STATE_NEGO.waiterAnswer,d.state=o.ENUM_PUBLISH_STATE.waitingServerAnswer):d.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+d.streamId+" seq or sessionId is not equal")}),(function(e,t){d.stateCenter.reporter.setError(T,{code:h.error.kMediaDescError.code,message:e.toString()}),d.publishStateUpdateError(h.error.kMediaDescError)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" call success")}},e.prototype.onRecvUpdateMediaDescription=function(e,t,r){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendUpdateMediaDescAck(e,this.sessionId,0,this.peerID),1==r.type?this.onGetRemoteOfferSuccess(r.sdp):this.publishStateUpdateError(h.error.kMediaDescError)},e.prototype.onRecvMediaDescription=function(e,t,r){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received");var n=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.event,this.parentSpanKey);n.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.sdp(r.sdp)}),n.end(),this.state==o.ENUM_PUBLISH_STATE.waitingServerAnswer?(this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.waitingCandidate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendMediaDescAck(e,this.sessionId,0),1==r.type?this.onGetRemoteOfferSuccess(r.sdp):this.publishStateUpdateError(h.error.kMediaDescError)):this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,r,n,i=this;this.videoInfo.audioBitrate&&48e3!==this.videoInfo.audioBitrate&&(e=e.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=e.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+NaN+this.remoteSdpOrder.join("")),this.setTurnTcp(),this.streamCenter.autoSwitchProtocol=this.stateCenter.settingConfig.getSetting("auto_to_tcp")||!1;var s=this.stateCenter.settingConfig.getSetting("udp_max_fail_num");!isNaN(s)&&(this.streamCenter.maxUdpFailNum=s);var a=this.streamCenter,u=a.autoSwitchProtocol,d=a.maxUdpFailNum,p=a.udpFailNum;this.logger.info("zp.oro.0  autoToTcp: ".concat(u,", udpFailNum: ").concat(p,", maxUdpFailNum: ").concat(d,".")),u&&!this._turnToTcp&&p>=d&&(this.logger.info("zp.oro.0 switch to tcp."),this._turnToTcp=!0);var f=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);if(f&&(this.logger.info("zp.oro.0 setting udp_or_tcp "+f),this._turnToTcp="tcp"===f),this._turnToTcp&&(null===(t=e.match(/candidate.*/g))||void 0===t||t.forEach((function(t){var r=t.replace(/udp/,"tcp");r.includes(" tcptype ")||(r=r.replace(" typ host "," typ host tcptype passive ")),e=e.replace(t,r)}))),this.logger.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length){var g=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0],""),m=[],v="";this.localSdpOrder.forEach((function(t){var r=i.remoteSdpOrder.findIndex((function(e){return e==t})),n=new RegExp(t+"[\\s\\S]*"+(i.remoteSdpOrder[r+1]||"")).exec(e)[0].replace(i.remoteSdpOrder[r+1],""),o=/a=mid:(\w)/.exec(n)[1];m.push(o),v+=n||""})),e=g.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+m.join(" "))+v,this.localSdpOrder=[],this.remoteSdpOrder=[]}var _=e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/);if("chrome"==this.stateCenter.browser){var y=0,b=0;if(this.videoInfo.bitRate&&"target"===this.videoInfo.startBitrate&&(y=this.videoInfo.bitRate),this.videoInfo.minBitrate)b=this.videoInfo.minBitrate;else if("screen"===this.previewer.previewType){var E=function(e){var t=0,r=e.frameRate,n=e.width*e.height*(r<=30?r:30);return"number"==typeof n?(t=n<=3888e3?200:n<=6912e3?400:n<=15552e3?700:n<=27648e3?1e3:2e3)>e.bitRate&&(t=e.bitRate):t=parseInt(.6*e.bitRate+""),{minBitrate:t,resolution:n}}(this.videoInfo);b=E.minBitrate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" resolution: ".concat(E.resolution,", min bitrate: ").concat(b))}var S=[];if(b&&S.push("x-google-min-bitrate=".concat(b)),y&&S.push("x-google-start-bitrate=".concat(y)),null!==_&&S.length){var C,T=_[3];C=-1!==T.indexOf("apt=")?"a=fmtp:96 "+S.join(";")+"\n"+T:"".concat(T,";").concat(S.join(";")),e=e.replace(T,C)}}if(this.videoInfo.bitRate>0){var w="AS",R=this.videoInfo.bitRate;"firefox"===this.stateCenter.browser&&(R=1e3*(R>>>0),w="TIAS");var k=/b=AS.*(\r\n|\n)/.test(e);e=k?e.replace(/AS:(\d+)/,w+":"+R):e.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=".concat(w,":").concat(R,"\n"));var O=null===(r=this.peerConnection)||void 0===r?void 0:r.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));null==O||O.forEach((function(e){var t,r,n,o,s,a;if(e&&e.getParameters&&e.setParameters){var l=e.getParameters();if(l.encodings&&0!=l.encodings.length||(l.encodings=[{}]),(null===(t=e.track)||void 0===t?void 0:t.id)==(null===(r=i.lowStream)||void 0===r?void 0:r.getVideoTracks()[0].id)){var c=null===(n=i.previewer)||void 0===n?void 0:n.lowStreamConfig.bitRate;c&&(l.encodings[0].maxBitrate=1e3*c)}else{l.encodings[0].maxBitrate=1e3*i.videoInfo.bitRate;var u=i.lastPublishStats.frameWidth,d=(null===(s=null===(o=i.previewer)||void 0===o?void 0:o.cameraMaxResolution)||void 0===s?void 0:s.maxWidth)||0,h=null===(a=i.previewer.videoTrack)||void 0===a?void 0:a.getSettings().width,p=u?Math.min(d,u):d;if(d&&h){var f=Math.max(p/h,1);l.encodings[0].scaleResolutionDownBy=f}}e.setParameters(l)}}))}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" remoteSdp:",e);var I={type:"answer",sdp:e,toJSON:function(){}},P=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.event,this.parentSpanKey);P.setAttributes({sdp:l.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.sdp(I.sdp),webrtc_sid:l.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.webrtc_sid(this.sessionId)}),null===(n=this.peerConnection)||void 0===n||n.setRemoteDescription(new RTCSessionDescription(I)).then((function(){i.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" set success"),P.end(),i.stateNego==o.ENUM_PUBLISH_STATE_NEGO.iceConnected&&i.updateSDPCallBack&&(i.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" update sdp success"),i.updateSDPCallBack(0),i.updateSDPCallBack=void 0,i.isUpdateSDP=!1)}),(function(e){i.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+i.streamId+" failed: "+e.toString()),P.setAttributes({error:h.error.kSetRemoteDescError.code,message:e.toString()}),P.end(),i.publishStateUpdateError(h.error.kSetRemoteDescError,!0)})),this.state=o.ENUM_PUBLISH_STATE.waitingServerICE,this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" call success")},e.prototype.onIceConnectionStateChange=function(e){var t=this;if(this.state!=o.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var r=this.getSpan(l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event,this.parentSpanKey,l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);if(r.setAttributes({ice_state:l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState)}),"connected"===this.peerConnection.iceConnectionState){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" connected state "+this.state),this.reportBeginTime){var n=(new Date).getTime()-this.reportBeginTime;this.reportSpan.setAttributes({publish_begin_time:p.publish_begin_time(n)}),this.reportBeginTime=0}if(this.stateCenter.reporter.spanEnd({key:l.ZegoRTCLogEvent.kZegoPublishIceConnected.event,par:this.streamId},{webrtc_sid:this.sessionId}),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.iceConnected,this.answerSdpTime){var i=(new Date).getTime()-this.answerSdpTime;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" ice time "+i)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout((function(){var e;t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats state "+t.state),t.state!==o.ENUM_PUBLISH_STATE.publishing&&(null===(e=t.peerConnection)||void 0===e||e.getStats().then((function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats suc"),e.size>0&&t.publishSuccess()})))}),1e3))}else"closed"===this.peerConnection.iceConnectionState?(r.end(),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(r.end(),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(r.end(),this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected "),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPublishConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))}},e.prototype.onIceCandidate=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate),e.candidate&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate.candidate),this.state<o.ENUM_PUBLISH_STATE.connecting||this.state==o.ENUM_PUBLISH_STATE.stop?this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}):this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}]))},e.prototype.sendCandidateInfo=function(e){var t=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return e.candidate.indexOf("relay")>0})))||e.length<1)this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled");else{var r=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.event,this.parentSpanKey);r.setAttributes({candidate_info:l.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.candidate_info(e)}),this.stateNego!==o.ENUM_PUBLISH_STATE_NEGO.iceConnected&&(this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.sendCandidate),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,o.getSeq)(),this.sessionId,e,(function(e,n,o){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),r.end()}),(function(e,n){t.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.stateCenter.reporter.setError(r,{code:h.error.kCandidateError.code,message:e.toString()}),t.publishStateUpdateError(h.error.kCandidateError)}))}},e.prototype.onConnectionStateChange=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState),this.state!=o.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection&&"closed"===e.target.signalingState&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=o.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState))},e.prototype.onRecvCandidateInfo=function(e,t,r){var n,i=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "+JSON.stringify(r.infos));var s=this.getSpan(l.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.event,this.parentSpanKey);if(s.setAttributes({candidate_info:l.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.candidate_info(r.infos)}),s.end(),this.state==o.ENUM_PUBLISH_STATE.waitingServerICE){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var a=0;a<r.infos.length;a++){var u={sdpMid:r.infos[a].sdpMid,sdpMLineIndex:r.infos[a].sdpMLineIndex,candidate:r.infos[a].candidate};this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+""+this.streamId+" candidate "+u.candidate),null===(n=this.peerConnection)||void 0===n||n.addIceCandidate(new RTCIceCandidate(u)).then((function(){i.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+i.streamId+" add success")}),(function(e){i.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+i.streamId+" add error "+e.toString()),i.publishStateUpdateError(h.error.kCandidateError,!0)}))}this.state=o.ENUM_PUBLISH_STATE.connecting,this.getSpan(l.ZegoRTCLogEvent.kZegoPublishIceConnected.event,this.parentSpanKey,"",!0).setAttributes({webrtc_sid:this.sessionId})}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvCloseSession=function(e,t,r){var n=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(r));var o=this.getSpan(l.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.event,l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);o.setAttributes({err_info:l.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.err_info(r.err_info||""),reason_info:null==r?void 0:r.reason}),o.end(),this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{denied_info:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.denied_info(r.err_info),stop_reason:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var i=r.err_info?JSON.parse(r.err_info.toLowerCase()):{},s=i.action?i.action:null,a=1*r.reason,u=JSON.parse(JSON.stringify(h.error.kPublishSessionClosedError));u.message+=" reason:".concat(a," ").concat(s?" action:"+s:""," ").concat((null==i?void 0:i.err)?" err:"+(null==i?void 0:i.err):""),u.message+=";".concat((0,d.translate)(a,s,null==i?void 0:i.err)),1011===i.err&&(u=h.error.kMediaServerForbidError),1014===i.err&&(u=h.error.kPublishTokenExpiredError),this.negoTimer&&clearTimeout(this.negoTimer);var p=!([4,8,10,11,12,14,18,24,26,27,28].includes(a)||[2,3,4,5,6].includes(s)),f=!1;if(!this._turnToTcp){if([8,10].includes(a)||[18,15].includes(a)&&2===s&&[3001,3002].includes(i.err)){this.streamCenter.udpFailNum++;var g=this.streamCenter;g.autoSwitchProtocol&&g.udpFailNum>=g.maxUdpFailNum&&(this.isPeer=!1,this.streamCenter.setIsPeer(!1),f=!0)}else this._turnToTcp||(this.streamCenter.udpFailNum=0);var m=this.gwNodeList.findIndex((function(e){return e==n.gwNode}))===this.gwNodeList.length-1,v=[3001,3002,3003,3004,3005,3006,3007,3008].includes(i.err);m&&v&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" switch tcp by all fail"),this.stateCenter.turnToTcp=!0)}this.publishStateUpdateError(u,p,i,f)},e.prototype.onRecvResetSession=function(e,t,r){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),this.getSpan(l.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event,l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event).end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=h.error.kPublishSessionClosedError;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(n)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvPublishEvent=function(e,t,r){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT+" "+this.streamId+" received");var n=this.getSpan(l.ZegoRTCLogEvent.kZegoRTCPublishEvent.event,this.parentSpanKey,l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event);n.setAttributes({event_state:l.ZegoRTCLogEvent.kZegoRTCPublishEvent.event_state(r.event),webrtc_sid:t}),n.end(),this.publishEvent=!0,this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null),this.stateNego===o.ENUM_PUBLISH_STATE_NEGO.iceConnected&&0==r.event&&this.publishSuccess()},e.prototype.onRecvClientInfo=function(e,t,r){this.stateCenter.clientIP!==r.clientip&&this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+r.clientip),this.stateCenter.clientIP=r.clientip,this.peerID=r.peer_id,this.streamConnectIP=r.clientip,this.stateCenter.isMultiOuter=this.isMultiOuter(),this.sideMediaConfig.isSEIStart&&this.sideMediaConfig.SEIType==o.ZegoSEIType.UserUnregister&&this.sendSEIUUID();var n=this.previewer;if(n&&null!==n.activateSEIConfig){var i=null==n?void 0:n.activateSEIConfig;this.activateSEIInsert(i.action,i.infoType)}},e.prototype.sendSEIUUID=function(){var e=this;this.signal.gw.mediaStreamSEIUUIDReq((0,o.getSeq)(),this.sessionId,this.peerID,this.sideMediaConfig.unregisterSeiFilter).then((function(t){var r;0==(null===(r=null==t?void 0:t.usr_sei_filter)||void 0===r?void 0:r.result)&&(e.sideMediaConfig.uuidSend=!0)})).catch((function(e){console.error()}))},e.prototype.checkPublishConnectionFailedState=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" streamID "+this.streamId," state "+this.state+" connectionState "+e),this.publishStateUpdateError(h.error.kMediaConnectionError)},e.prototype.setPublishQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval((function(){e.peerConnectionGetStats()}),this.qualityTimeInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:(new Date).getTime(),audioTime:(new Date).getTime(),time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=(0,o.getSeq)(),this.qualityCount=0)},e.prototype.getConnectionStatsPromiseList=function(){var e=this,t=[];return this.localStream.getTracks().forEach((function(r){e.peerConnection&&t.push(e.peerConnection.getStats(r))})),t},e.prototype.peerConnectionGetStats=function(){var e=this;if(this.peerConnection){var t=this.getConnectionStatsPromiseList();"chrome"==this.stateCenter.browser&&t.push(new Promise((function(t,r){var n;null===(n=e.peerConnection)||void 0===n||n.getStats((function(e){return t(e)}),(function(e){return r(e)}))}))),Promise.all(t).then((function(t){0!==t.length&&e.getPublishStats(t.filter((function(e){return e instanceof RTCStatsReport})),t[t.length-1]instanceof RTCStatsReport?null:t[t.length-1])})).catch((function(t){e.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}},e.prototype.getPublishStats=function(e,t){var r,n,i,s=this;if(e){for(var u,d=document.querySelectorAll("video, audio"),h=0;h<d.length;h++)d[h].srcObject===this.localStream&&(u=d[h]);var p=this.streamCenter.checkPreview(this.localStream),f={scenario:this.stateCenter.scenario,sampleTimeWindow:this.qualityTimeInterval,audioCodec:"opus",audioTargetBitrate:this.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.videoInfo.bitRate||0,videoTargetFPS:this.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioInputLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,sendLevel:0,samplingRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,qualityLimitationReason:"",codecImplementationName:"",videoMuteState:(null===(r=null==p?void 0:p.videoTrack)||void 0===r?void 0:r.enabled)?"0":"1",audioMuteState:this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",soundLevel:null===(n=this.previewer)||void 0===n?void 0:n.soundLevel,muted:u?u.muted:void 0,paused:u?u.paused:void 0,volume:u?u.volume:void 0,sinkId:u?u.sinkId:void 0},g=this.lastPublishStats.time,m=0,v=0,_=0,y=0,b=0,E=0;e.forEach((function(e){return e.forEach((function(e){if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"audio"==e.mediaType)0!=g&&(f.audioBitrate=8*(e.bytesSent-s.lastPublishStats.audioBytesSent)/(e.timestamp-g),e.retransmittedPacketsSent=e.retransmittedPacketsSent||0,e.packetsSent=e.packetsSent||0,f.audioFPS=(e.packetsSent-(e.retransmittedPacketsSent-s.lastPublishStats.audioRetransmittedPacketsSent)-s.lastPublishStats.audioPacketsSent)/(e.timestamp-g)*1e3||0,_=(e.retransmittedPacketsSent-s.lastPublishStats.audioRetransmittedPacketsSent)/(e.packetsSent-s.lastPublishStats.audioPacketsSent)),f.audioBitrate<0&&(f.audioBitrate=0),s.lastPublishStats.audioBytesSent=e.bytesSent,s.lastPublishStats.time=e.timestamp,s.lastPublishStats.audioPacketsSentTimeStamp=e.packetsSent-s.lastPublishStats.audioPacketsSent,s.lastPublishStats.audioPacketsSent=e.packetsSent,s.lastPublishStats.audioRetransmittedPacketsSent=e.retransmittedPacketsSent;else if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"video"==e.mediaType)f.isHardwareEncode=function(e){if(e){var t=null==e?void 0:e.toLocaleLowerCase();if("unknown"!==t)return"openh264"!==t&&"libvpx"!==t}}(e.encoderImplementation),0!=g&&(f.videoBitrate=8*(e.bytesSent-s.lastPublishStats.videoBytesSent)/(e.timestamp-g),f.videoFPS=1e3*(e.framesEncoded-s.lastPublishStats.framesEncoded)/(e.timestamp-g),y=(e.retransmittedPacketsSent-s.lastPublishStats.videoRetransmittedPacketsSent)/(e.packetsSent-s.lastPublishStats.videoPacketsSent)),f.videoBitrate<0&&(f.videoBitrate=0),f.videoFPS<0&&(f.videoFPS=0),f.nackCount=e.nackCount,f.pliCount=e.pliCount,f.qualityLimitationReason=e.qualityLimitationReason,s.lastPublishStats.videoBytesSent=e.bytesSent,s.lastPublishStats.framesEncoded=e.framesEncoded,s.lastPublishStats.time=e.timestamp,s.lastPublishStats.videoPacketsSentTimeStamp=e.packetsSent-s.lastPublishStats.videoPacketsSent,s.lastPublishStats.videoPacketsSent=e.packetsSent,s.lastPublishStats.videoRetransmittedPacketsSent=e.retransmittedPacketsSent;else if("remote-inbound-rtp"==e.type&&"video"==e.kind){e.packetsLost>0&&(f.videoPacketsLost=e.packetsLost);var t=e.packetsLost-s.lastPublishStats.videoPacketsLost;f.videoPacketsLostRate=t>0?t/s.lastPublishStats.videoPacketsSentTimeStamp:0,e.packetsLost>0&&(s.lastPublishStats.videoPacketsLost=e.packetsLost),s.lastPublishStats.videoTime=e.timestamp,v=1e3*e.roundTripTime,E=e.jitter}else if("remote-inbound-rtp"==e.type&&"audio"==e.kind){e.packetsLost>0&&(f.audioPacketsLost=e.packetsLost);var r=e.packetsLost-s.lastPublishStats.audioPacketsLost;f.audioPacketsLostRate=r>0?r/s.lastPublishStats.audioPacketsSentTimeStamp:0,e.packetsLost>0&&(s.lastPublishStats.audioPacketsLost=e.packetsLost),s.lastPublishStats.audioTime=e.timestamp,m=1e3*e.roundTripTime,b=e.jitter}else if("media-source"==e.type&&("audio"==e.kind||e.id.toLowerCase().indexOf("audio")>=0))f.audioLevel=e.audioLevel||0,f.sendLevel=e.totalAudioEnergy,f.audioInputLevel=32767*e.totalAudioEnergy,f.samplingRate=e.totalSamplesDuration;else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0||e.frameWidth)){if(f.frameHeight=e.frameHeight,f.frameWidth=e.frameWidth,0===g||s.lastPublishStats.frameHeight===e.frameHeight&&s.lastPublishStats.frameWidth===e.frameWidth)0===g&&(s.lastPublishStats.frameHeight=e.frameHeight,s.lastPublishStats.frameWidth=e.frameWidth);else{var n=s.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:l.ZegoRTCLogEvent.kZegoTaskPublishStart.event,par:s.streamId},{key:""},l.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event);n.setAttributes({webrtc_sid:l.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.webrtc_sid(s.sessionId),w:l.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(e.frameWidth),h:l.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(e.frameHeight)}),n.end(),s.lastPublishStats.frameHeight=e.frameHeight,s.lastPublishStats.frameWidth=e.frameWidth}0!=g&&(f.videoTransferFPS=1e3*(e.framesSent-s.lastPublishStats.framesSent)/(e.timestamp-g)),f.videoTransferFPS<0&&(f.videoTransferFPS=0),s.lastPublishStats.framesSent=e.framesSent}else"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(f.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(f.currentRoundTripTime=e.currentRoundTripTime))}))})),t&&t.result().forEach((function(e){"ssrc"==e.type&&e.names().indexOf("googBandwidthLimitedResolution")>=0&&(f.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),"ssrc"==e.type&&"video"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(f.videoCodecName=e.stat("googCodecName")),"ssrc"==e.type&&"audio"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(f.audioCodecName=e.stat("googCodecName")),"ssrc"==e.type&&e.names().indexOf("googCpuLimitedResolution")>=0&&(f.googCpuLimitedResolution=e.stat("googCpuLimitedResolution")),"ssrc"==e.type&&e.names().indexOf("googFrameWidthInput")>=0&&(f.googFrameWidthInput=e.stat("googFrameWidthInput")),"ssrc"==e.type&&e.names().indexOf("googFrameHeightInput")>=0&&(f.googFrameHeightInput=e.stat("googFrameHeightInput")),"ssrc"==e.type&&e.names().indexOf("googFrameRateInput")>=0&&(f.googFrameRateInput=e.stat("googFrameRateInput")),"ssrc"==e.type&&e.names().indexOf("codecImplementationName")>=0&&(f.codecImplementationName=e.stat("codecImplementationName")),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(f.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")),"VideoBwe"==e.type&&e.names().indexOf("googActualEncBitrate")>=0&&(f.googActualEncBitrate=e.stat("googActualEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googTargetEncBitrate")>=0&&(f.googTargetEncBitrate=e.stat("googTargetEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googRetransmitBitrate")>=0&&(f.googRetransmitBitrate=e.stat("googRetransmitBitrate"))})),"chrome"===this.stateCenter.browser&&this.handleEncBitrate(Number.parseInt(f.googTargetEncBitrate),Number.parseInt(f.googActualEncBitrate),Number.parseInt(f.googRetransmitBitrate)),v=isNaN(v)||v<0?0:v,y=isNaN(y)||y<0?0:y,E=isNaN(E)||E<0?0:E,m=isNaN(m)||m<0?0:m,_=isNaN(_)||_<0?0:_,b=isNaN(b)||b<0?0:b;var S=a.ClientUtil.getNetQuality(v,y,E),C=a.ClientUtil.getNetQuality(m,_,b);if(f.videoQuality=g>0?a.ClientUtil.quality2QualityGrade(S):0,f.audioQuality=g>0?a.ClientUtil.quality2QualityGrade(C):0,this.stateCenter.networkState!==o.ENUM_NETWORK_STATE.offline&&"disconnected"!==(null===(i=this.peerConnection)||void 0===i?void 0:i.connectionState)||(f.videoQuality=o.QualityGrade.Die,f.audioQuality=o.QualityGrade.Die),!f.frameHeight||!f.frameWidth){var T=this.localStream.getVideoTracks()[0];T&&(f.frameHeight=T.getSettings().height||0,f.frameWidth=T.getSettings().width||0)}var w=Math.min(S,C);this.netQuality=w,w<=o.QUALITY_CONSTANT.MiddleMinQuality?this.poorQualityNum++:this.poorQualityNum=0,g>0&&this.poorQualityNum>=this.streamCenter.probeStartedNum&&(new Date).getTime()>this.probeTime+this.probeInterval&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" netQuality "+w+" start net probe"),this.probeState=o.ENUM_PROBE_STATE.tryProbe,this.poorQualityRetryCnt++,this.streamCenter.startNetProbe(!0,this,this.gwNodeList),this.probeTime=(new Date).getTime()),this.updateCurrentQualityStats(f),this.publishStat=f,0!==g&&(this.uploadPublishQuality(f),this.onPublishQualityUpdate(this.streamId,this.currentQuality))}},e.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,r=e.videoFPS,o=e.videoTransferFPS,i=e.frameHeight,s=e.frameWidth,a=e.videoMuteState,l=e.videoQuality,c=e.isHardwareEncode,u=e.audioBitrate,d=e.audioCodec,h=e.audioMuteState,p=e.audioQuality,f=e.audioFPS,g={video:n(n({},this.currentQuality.video),{videoBitrate:t,videoFPS:r,videoTransferFPS:o,frameHeight:i,frameWidth:s,muteState:a,videoQuality:l,isHardwareEncode:c}),audio:n(n({},this.currentQuality.audio),{audioBitrate:u,audioCodec:d,muteState:h,audioQuality:p,audioFPS:f}),nackCount:e.nackCount,pliCount:e.pliCount,totalRoundTripTime:e.totalRoundTripTime,currentRoundTripTime:e.currentRoundTripTime,qualityLimitationReason:e.qualityLimitationReason};if(void 0!==e.videoPacketsLost){var m=e.videoPacketsLostRate;g.video.videoPacketsLost=e.videoPacketsLost,g.video.videoPacketsLostRate=m}if(void 0!==e.audioPacketsLost){var v=e.audioPacketsLostRate;g.audio.audioPacketsLost=e.audioPacketsLost,g.audio.audioPacketsLostRate=v}if(void 0!==e.muted&&(g.muted=e.muted,g.paused=e.paused,g.volume=e.volume,g.sinkId=e.sinkId),void 0!==e.googBandwidthLimitedResolution){var _=e.videoCodecName,y=e.audioCodecName,b=e.googFrameWidthInput,E=e.googFrameHeightInput,S=e.googCpuLimitedResolution,C=e.googFrameRateInput,T=e.codecImplementationName,w=e.googAvailableSendBandwidth,R=e.googActualEncBitrate,k=e.googTargetEncBitrate;g.googBandwidthLimitedResolution=e.googBandwidthLimitedResolution,g.video.googCodecName=_,g.audio.googCodecName=y,g.googCpuLimitedResolution=S,g.googFrameWidthInput=b,g.googFrameHeightInput=E,g.googFrameRateInput=C,g.codecImplementationName=T,g.googAvailableSendBandwidth=w,g.googActualEncBitrate=R,g.googTargetEncBitrate=k}this.currentQuality=g},e.prototype.uploadPublishQuality=function(e){if(this.qualityUpload&&this.signal.isServerConnected){var t=(new Date).getTime();(0==this.qualityUploadLastTime||t-this.qualityUploadLastTime>=2e3)&&(e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=t,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.streamCenter.updateQuality(0,e),this.qualityUploadLastTime=t)}},e.prototype.getStopReason=function(e){var t="StopPublish";return e&&e.code&&(t=1103051===e.code?"ReachMaxAVRetryTime":"StopPublish"),t},e.prototype.stopPublish=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH+"  .1 "+this.streamId+" called "+this.state+" "+JSON.stringify(e));var t=this.getStopReason(e);if(Object.keys(this.streamCenter.publisherList).length=1)for(var r in this.streamCenter.playerList){var n=this.streamCenter.playerList[r].player;n.state==o.ENUM_PLAY_STATE.playing&&n.broadcasterStatus==o.ENUM_BROADCASTER_STATUS.start&&(this.signal&&this.signal.sendBroadcasterStatus((0,o.getSeq)(),n.sessionId,0),n.broadcasterStatus=o.ENUM_BROADCASTER_STATUS.stop)}this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession((0,o.getSeq)(),this.sessionId,0);var i=Date.now()-this.reportPublishStateTime;this.reportSpan.setAttributes({publish_state_time:p.publish_state_time(i)}),this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{stop_reason:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason(t)}),this.uploadRTCPublishStats(),this.reportSpan.setAttributes({stream_id:p.stream_id(this.streamId),webrtc_sid:p.webrtc_sid(this.sessionId),probe_ip_cnt:p.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:p.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:p.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:p.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),bitrate:p.bitrate(1e3*this.videoInfo.bitRate),h:p.h(this.videoInfo.height),w:p.w(this.videoInfo.width),cap_w:p.w(this.videoInfo.width),cap_h:p.h(this.videoInfo.height),fps:p.h(this.videoInfo.frameRate),env:p.env(this.stateCenter.testEnvironment?3:1),fail_cnt:p.fail_cnt(Math.max(this.rtcPublishCount-1,0)),continuous_fail_cnt:p.continuous_fail_cnt(this.continuousFailCnt),stop_reason:p.stop_reason(t),error:(null==e?void 0:e.code)||0,message:(null==e?void 0:e.message)||""}),this.reportSpan.end(),this.retryFailGwNodes=[],this.resetPublish(),this.isRePublish=!1,this.rtcPublishCount=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0},e.prototype.uploadRTCPublishStats=function(){var e,t,r,n,o,i,s,a,c,u,d,h,p,f;this.stateCenter.reporter.spanSetAttributes({key:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.event,par:this.streamId},{lsttime:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.lsttime(parseInt(this.lastPublishStats.time)),total_stat:l.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({afc:null===(e=this.lastPublishStats)||void 0===e?void 0:e.audioPacketsSent,vfc:null===(t=this.lastPublishStats)||void 0===t?void 0:t.framesSent,tfc:(null===(r=this.lastPublishStats)||void 0===r?void 0:r.audioPacketsSent)+(null===(n=this.lastPublishStats)||void 0===n?void 0:n.framesSent),vb:null===(o=this.lastPublishStats)||void 0===o?void 0:o.videoBytesSent,ab:null===(i=this.lastPublishStats)||void 0===i?void 0:i.audioBytesSent,tb:(null===(s=this.lastPublishStats)||void 0===s?void 0:s.videoBytesSent)+(null===(a=this.lastPublishStats)||void 0===a?void 0:a.audioBytesSent),rtp_rtt:Math.round(1e3*(null===(c=this.publishStat)||void 0===c?void 0:c.currentRoundTripTime))||0,w:null===(u=this.publishStat)||void 0===u?void 0:u.frameWidth,rtp_plr:null===(d=this.publishStat)||void 0===d?void 0:d.videoPacketsLostRate,h:null===(h=this.publishStat)||void 0===h?void 0:h.frameHeight,rtp_bw:(null===(p=this.publishStat)||void 0===p?void 0:p.googAvailableSendBandwidth)?null===(f=this.publishStat)||void 0===f?void 0:f.googAvailableSendBandwidth:void 0})})},e.prototype.onPublishStateUpdate=function(e,t,r,n,o,i){},e.prototype.onPublishQualityUpdate=function(e,t){},e.prototype.onDisconnect=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" call"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" websocket disconnect"),this.publishStateUpdateError(e||l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.publishSuccess=function(){var e,t,r,n;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call"),this._turnToTcp||(this.streamCenter.udpFailNum=0),this.isUpdateSDP&&this.updateSDPCallBack)return this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);var i=this.isRePublish?l.ZegoRTCLogEvent.kZegoRePublish:l.ZegoRTCLogEvent.kZegoStartPublish;for(var s in this.stateCenter.reporter.spanEnd({key:i.event,par:this.streamId},{url:f.url(null===(e=this.signal)||void 0===e?void 0:e.server),ip:f.ip(this.ip),source_type:f.source_type("rtc"),net_protocol:f.net_protocol(this.netProtocol),is_center:f.is_center(null===(t=this.streamCenter.publisherList[this.streamId])||void 0===t?void 0:t.isCenterNode),signal_consume:f.signal_consume(this.signalTime),is_peer:f.is_peer(this.isPeer)}),this.state!=o.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=o.ENUM_PUBLISH_STATE.publishing,this.continuousFailCnt=0,this.reportPublishStateTime=Date.now(),this.streamCenter.playerList){var a=this.streamCenter.playerList[s].player;a.state==o.ENUM_PLAY_STATE.playing&&a.broadcasterStatus==o.ENUM_BROADCASTER_STATUS.stop&&(this.signal&&this.signal.sendBroadcasterStatus((0,o.getSeq)(),a.sessionId,1),a.broadcasterStatus=o.ENUM_BROADCASTER_STATUS.start)}var u=this.stateCenter.settingConfig.getSetting("probe_started_num");!isNaN(u)&&(this.streamCenter.probeStartedNum=u),this.setPublishQualityTimer();var d=2,h=2,p=null===(r=this.previewer)||void 0===r?void 0:r.videoTrack,g=0!==this.localStream.getAudioTracks().length&&this.localStream.getAudioTracks()[0];(p&&"live"===p.readyState&&!0===p.enabled||(null===(n=this.previewer)||void 0===n?void 0:n.muteImage))&&(d=0),g&&"live"===g.readyState&&!0===g.enabled&&(h=0),this.sendStreamStatus(d,h,!0),this.streamCenter.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call success")},e.prototype.startSoundLevel=function(){var e;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" call streamID: "+this.streamId),this.localStream&&0!=this.localStream.getAudioTracks().length)try{null===(e=this.previewer)||void 0===e||e.startSoundLevel()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" get sound level failed "+e)}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" local stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.previewer)||void 0===e||e.stopSoundLevel()},e.prototype.handleEncBitrate=function(e,t,r){var n,o=this,i=1e3*this.videoInfo.bitRate,s=0;if(t>0){this.needIncMax||this.gotMax||(this.probeCount++,t>=.75*e?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=i),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var l=a.ClientUtil.arrAvg(this.totalBitrateArray,t,10);this.needIncMax&&(l>=1.05*i?this.targetRate>i&&(this.targetRate-=l>e?l-e:l-i,this.targetRate=Math.max(this.targetRate,i),this.targetRate=Math.min(this.targetRate,2*i),s=this.targetRate):l<.8*i&&(0===this.targetRate&&(this.targetRate=e),this.targetRate=this.targetRate>=i?this.targetRate+.08*i:1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*i),s=this.targetRate))}if(r>0&&r<i){var u=a.ClientUtil.arrAvg(this.totalRetransRateArray,r,5);this.needIncMax?u+t>1.05*i&&(this.targetRate-=u+t-i,this.targetRate=Math.max(this.targetRate,i-u),s=this.targetRate):s=this.targetRate-u}else this.targetRate<i&&(this.targetRate=i,s=this.targetRate);if(s>0){s=a.ClientUtil.arrAvg(this.totalTargetRateArray,s,5);var d=null===(n=this.peerConnection)||void 0===n?void 0:n.getSenders().filter((function(e){return e.track&&"video"===e.track.kind}));if(!d)return;var h=d.length>1?d[1]:d[0]?d[0]:null;if(!h)return;var p=h.getParameters();p.encodings||(p.encodings=[{}]),p.encodings[0].maxBitrate=s,h.setParameters(p).catch((function(e){o.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE+" "+e)}))}},e.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},e.prototype.replacePublishedTrack=function(e,t,r){return void 0===t&&(t=!1),{errorCode:-1,extendedData:"should install advanced module first"}},e.prototype.sendStreamStatus=function(e,t,r,n){var i=this;void 0===r&&(r=!1),void 0===n&&(n=0),(r||this.camera_status!==e||this.mic_status!==t)&&this.signal&&(this.camera_status=e,this.mic_status=t,n++,this.signal.sendStreamStatus((0,o.getSeq)(),this.sessionId,e,t,this.streamId,(function(){i.camera_status===e&&i.mic_status===t&&n<=1&&i.sendStreamStatus(e,t,!0,n)})))},e.prototype.addCanvasStreamVideoTrack=function(e){var t=document.createElement("canvas"),r=new Image;return r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==",t.width=80,t.height=80,this.canvasTimer=setInterval((function(){var e;(e=t.getContext("2d"))&&e.drawImage(r,0,0,16,16)}),200),t.captureStream().getVideoTracks()[0]},e.prototype.getSpan=function(e,t,r,n){return void 0===n&&(n=!1),this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H,{key:t,bak_key:r,par:this.streamId},{key:e,par:this.streamId},e,n)},e.prototype.isMultiOuter=function(){return!(!this.stateCenter.accessClientIp||!this.streamConnectIP||this.stateCenter.accessClientIp===this.streamConnectIP)},e.prototype.isCustomCdn=function(){var e,t;return void 0!==(null===(e=this.publishOption)||void 0===e?void 0:e.cdnUrl)&&""!==(null===(t=this.publishOption)||void 0===t?void 0:t.cdnUrl)},e.prototype.setTurnTcp=function(){this._turnToTcp=this.stateCenter.turnToTcp,void 0!==this.stateCenter.turnOverTcpOnly&&(this._turnToTcp=this.stateCenter.turnOverTcpOnly)},e}();t.ZegoPublish=g},569:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.addRRTRLine=t.addSPSDescription=void 0,t.addSPSDescription=function(e){var t,r=e,n=function(e){var t={m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"}]};function r(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:o&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:o?t[e.name]:t;(function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))})(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)}var n=RegExp.prototype.test.bind(/^([a-z])=(.*)/),o=[],i={},s=i;return e.split(/(\r\n|\r|\n)/).filter(n).forEach((function(e){var n=e[0],i=e.slice(2);"m"===n&&(o.push({rtp:[],fmtp:[]}),s=o[o.length-1]);for(var a=0;a<(t[n]||[]).length;a+=1){var l=t[n][a];if(l.reg&&l.reg.test(i))return r(l,s,i)}})),i.media=o,i}(e),o=[];return n.media.forEach((function(e){"video"===e.type&&e.fmtp.forEach((function(e){t="a=fmtp:"+e.payload+" "+e.config,-1===e.config.indexOf("sps-pps-idr-in-keyframe")&&-1===o.indexOf(t)&&o.push(t)}))})),o.forEach((function(e){r=r.replace(new RegExp(e,"g"),e+";sps-pps-idr-in-keyframe=1")})),r},t.addRRTRLine=function(e){var t=e.split("\r\n"),n=new Map;t.forEach((function(e,r){if(/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])){var o=e.match(/^a=rtcp-fb:\d+/);o&&n.set(r+1,o[0]+" rrtr")}}));for(var o=Array.from(n),i=0;i<o.length;i++){var s=r([],o[i],!0);t.splice(s[0]+i,0,s[1])}return t.join("\r\n")}},1111:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportScriptProcessor=t.createSoundProcessor=void 0,t.createSoundProcessor=function(e,t,r){var n=e.createScriptProcessor(4096,1,1);return t.connect(n),n.connect(e.destination),n.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=0,o=0;o<t.length;o++)n<t[o]&&(n=t[o]);r&&r(n)},e.resume(),n},t.isSupportScriptProcessor=function(e){return"function"==typeof e.createScriptProcessor}},8011:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundMeterWorklet=t.WorkletModule=void 0;var i=r(1111),s=new Blob(['\nclass VolumeMeter extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.volume = 0;\n    this.intervalTime = 1000;\n    this.tick = this.intervalTime;\n    this.isStop = false;\n    this.port.onmessage = event => {\n      const { data } = event;\n      switch (data.name) {\n        case "setIntervalTime":\n          this.intervalTime = data.intervalTime;\n          break;\n        case "stop":\n          this.isStop = true;\n          break;\n      }\n    };\n  }\n  process(inputs) {\n    const input = inputs[0];\n    if (this.isStop) {\n      return false;\n    }\n    if (input.length > 0) {\n      const buffer = input[0];\n      let maxVal = this.volume;\n      for (let i = 0; i < buffer.length; i++) {\n        if (maxVal < buffer[i]) {\n          maxVal = buffer[i];\n        }\n      }\n      this.volume = maxVal;\n      this.tick -= buffer.length;\n      if (this.tick < 0) {\n        this.tick += (this.intervalTime / 1000) * sampleRate;\n        this.port.postMessage({ volume: this.volume });\n        this.volume = 0;\n      }\n    }\n    return true;\n  }\n}\ntry {\n  registerProcessor("meter", VolumeMeter);\n} catch (error) {\n  \n}  \n'],{type:"application/javascript"}),a=function(){function e(){}return e.addModuleToContext=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t.info("zc.smw worklet addModule call"),[4,e.audioWorklet.addModule(URL.createObjectURL(s))];case 1:return n.sent(),t.info("zc.smw worklet addModule success"),this.isSuccess=!0,[2];case 2:return r=n.sent(),t.warn("zc.smw"+" worklet addModule catch error. ".concat(null==r?void 0:r.message)),[3,3];case 3:return[2]}}))}))},e.isSuccess=!1,e}();t.WorkletModule=a;var l=function(){function e(e,t){void 0===t&&(t=1e3),this.logger=e,this.interval=t,this.worklet=null,this.processor=null,this.volume=0,this.onSoundLevelUpdate=function(e){}}return e.prototype.preload=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return a.isSuccess?[3,2]:[4,a.addModuleToContext(e,this.logger)];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.initAudioWorklet=function(e,t){return n(this,void 0,void 0,(function(){var r,n=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.preload(e)];case 1:if(o.sent(),this.worklet)t.connect(this.worklet).connect(e.destination);else try{if((0,i.isSupportScriptProcessor)(e))throw"use script processor";(r=this.worklet=new AudioWorkletNode(e,"meter")).port.onmessage=function(e){n.onSoundLevelUpdate&&n.onSoundLevelUpdate(e.data.volume||0)},t.connect(r).connect(e.destination),this.setInterval(this.interval)}catch(r){this.logger.info("zc.smw not support AudioWorkletNode."+r),this.processor=(0,i.createSoundProcessor)(e,t,(function(e){n.onSoundLevelUpdate&&n.onSoundLevelUpdate(e||0)}))}return[2]}}))}))},e.prototype.setInterval=function(e){var t=this.worklet;this.interval=e,t&&t.port.postMessage({name:"setIntervalTime",intervalTime:e})},e.prototype.destroy=function(){this.processor&&(this.processor.onaudioprocess=null,this.processor.disconnect()),this.worklet&&(this.worklet.port.postMessage({name:"stop"}),this.worklet.port.onmessage=null,this.worklet.port.close(),this.worklet.disconnect(),this.logger.info("zc.smw close worklet")),this.worklet=null,this.processor=null},e}();t.SoundMeterWorklet=l},5019:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSignal=void 0;var o=r(6706),i=r(1089),s=r(2752),a=r(1691),l=r(746),c=["LoginReq","CreateSessionWithSdpReq","CreateSessionReq"],u=["Peer2PeerNetStatsGetReq","Peer2PeerNetStatsGetRsp"],d=function(){function e(e,t,r,n){void 0===n&&(n=!1),this.netAgent=r,this.useNetAgent=n,this.sendDataMap={},this.sendDataList=new o.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.loginTimer=null,this.successConnectedCallback=null,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=o.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this._websocket=null,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.logger=e,this.stateCenter=t,this.stateCenter.streamConnectTime&&(this.tryConnectInterval=this.stateCenter.streamConnectTime),this.gw=new a.GatewaySignal(this)}return Object.defineProperty(e.prototype,"wsReadyState",{get:function(){var e;return null===(e=this.websocket)||void 0===e?void 0:e.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocket",{get:function(){return this._websocket},set:function(e){null===e&&this.useNetAgent||(this._websocket=e)},enumerable:!1,configurable:!0}),e.prototype.getBrowserAndVersion=function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(r[1])?{name:"IE",version:(e=/\brv[ :]+([\d\.]+)/g.exec(t)||[])[1]||""}:"Chrome"===r[1]&&null!=(e=t.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:e[1]}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d+\.]+)/i))&&r.splice(1,1,e[1]),{name:r[0],version:r[1]})},e.prototype.setSessionInfo=function(e,t){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO+" call"),this.appid=e+"",this.userid=t},e.prototype.onDisconnect=function(e,t){},e.prototype.onUpdateHeartBeatInterval=function(e){},e.prototype.resetConnectTimer=function(){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER+" call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},e.prototype.handleWsMessage=function(e){var t=JSON.parse(e.data);u.includes(t.header.cmd)||(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= ",t.header.cmd),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= "+JSON.stringify(t))),t.header.appid==this.appid&&t.header.user_id===this.userid?this.handleServerPush(t):this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" check header failed")},e.prototype.bindWebSocketEvents=function(){var e=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this.stateCenter.streamConnectTime?this.stateCenter.streamConnectTime:3e3,this.websocket&&(this.websocket.onclose=function(t){if(e.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" close msg = "+JSON.stringify((null==t?void 0:t.code)?null==t?void 0:t.code:t)),e.state!=o.ENUM_CONNECT_STATE.disconnect){if(e.useNetAgent)return void e.disconnectCallback();e.successConnectedCallback=e.connectCallback,e.resetConnectTimer(),e.startConnectTimer((function(t){1008===t&&e.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})),e.resetCheckMessage()}},this.websocket.onerror=function(t){e.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" msg = "+JSON.stringify(t))})},e.prototype.resetCheckMessage=function(){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE+" call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var e=this.sendDataList.getFirst();null!=e;)this.sendDataList.remove(e),e._data.error&&e._data.error(o.SEND_MSG_RESET,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},e.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":case"NetQualityInfoPush":case"MediaDescUpdatePush":case"CmdPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",e);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",e);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",e);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",e);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",e);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",e);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",e);break;case"CmdRsp":this.handleRespondData("CmdReq",e)}},e.prototype.disconnectCallback=function(e,t){this.logger.info("zc.s.dcb "+JSON.stringify(e)+" "+t),this.connectCallback&&(this.connectCallback(t||-1,this.server,void 0),this.connectCallback=null);var r=this.server;this.disconnectServer(),this.onDisconnect(r,e)},e.prototype.updateToken=function(){var e=this;this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN+" call");var t={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this.stateCenter.anchor_info.anchor_id,sdkversion:o.PROTO_VERSION,osinfo:navigator.appVersion};if(0!=Object.keys(this.sessionInfos).length){var r=[];for(var n in this.sessionInfos){var s=parseInt(n);r.push({session_id:s,session_token:this.sessionInfos[s].token})}t.sessions=r}this.sendMessageWithCallback("LoginReq",this.stateCenter.getSeq(),0,t,(function(t,r,n){if(0==n.result){e.token=n.token,e.tokenType=n.tokenType;var o={report:n.report,report_interval:n.report_interval_ms};n.negoInterval&&(e.negoInterval=n.negoInterval),n.negoTryCount&&(e.negoTryCount=n.negoTryCount),n.negoTryMaxCount&&(e.negoTryMaxCount=n.negoTryMaxCount),null!=e.connectCallback&&(e.connectCallback(0,e.server,o),e.connectCallback=null),e.checkMessageTimeout()}else null!=e.connectCallback&&(e.connectCallback(n.result,e.server,{error:n.strError}),e.connectCallback=null)}),(function(){null!=e.connectCallback&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)}))},e.prototype.sendMessageWithCallback=function(e,t,r,n,s,a){var d,h=this;void 0===s&&(s=null),void 0===a&&(a=null),u.includes(e)||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" call "+e+" "+t+" "+(null===(d=this.websocket)||void 0===d?void 0:d.readyState));var p=performance.now();if(!this.websocket||"LoginReq"!==e&&this.websocket.readyState!==l.SocketState.OPEN)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" connect not establish"),void(a&&a(o.SEND_MSG_TIMEOUT,t));var f={header:this.getHeader(e,t,r),body:n},g={seq:t,deleted:!1,cmd:e,time:(new Date).getTime(),success:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(c.includes(e)){var o=(performance.now()-p).toFixed(0);h.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" seq: ".concat(t,", cmd: ").concat(e,", cost_time: ").concat(o))}s&&s.apply(void 0,r)},error:a},m=this.sendDataList.push(g);this.sendDataMap[g.seq]=m;var v=JSON.stringify(f);u.includes(e)||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" "+v),this.useNetAgent&&"LoginReq"===e?this.websocket.send(v,void 0,!0):this.websocket.send(v),this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" success")},e.prototype.getHeader=function(e,t,r){return{version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:r}},e.prototype.connectServer=function(e,t,r,n){var a,c=this;if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+r),this.roomID=e,this.token=t,this.server=r,this.state=o.ENUM_CONNECT_STATE.connecting,this.connectCallback=n,this.isServerConnected)this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket is connected"),this.resetConnectTimer(),this.state=o.ENUM_CONNECT_STATE.connected;else try{if(this.useNetAgent){if(!this.stateCenter.appConfig)return void this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" no app config ");var u=this.stateCenter.appConfig.media_config.publish_config.resource_info.find((function(e){return e.resource_type===o.SignalResourceType.RTC}));if(!u)return void(n&&n(s.errorCodeList.GET_CONFIG_FAIL));var d=null===(a=null==u?void 0:u.service_info)||void 0===a?void 0:a.find((function(e){return e.protocol===o.ProtocolType.WEBRTC}));if(!d)return void(n&&n(s.errorCodeList.GET_CONFIG_FAIL));var h=d.url_template.split("{IP}")[1].split("?"),p=h[0],f=h[1],g={path:p,query:f};this.stateCenter.isTestMode&&(g={path:p+2,query:f}),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" signal "+JSON.stringify(g)),this.websocket instanceof WebSocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),!this.websocket&&(this.websocket=new l.AnalogSocket(this.server,this.netAgent,g,this.logger,this.stateCenter)),this.websocket.open()}else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" need new websocket"),this.websocket&&(this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close()),this.websocket=new WebSocket(this.server);this.websocket.onclose=function(e){c.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket close call  "+JSON.stringify(e)),c.useNetAgent&&c.state!=o.ENUM_CONNECT_STATE.disconnect&&(c.successConnectedCallback=c.connectCallback,c.resetConnectTimer(),c.startConnectTimer((function(e){1008===e&&c.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})))},this.websocket.onerror=function(e){c.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket onerror call  "+JSON.stringify(e)),c.stateCenter.useNetAgent&&(null==e?void 0:e.code)&&c.disconnectCallback(void 0,null==e?void 0:e.code)},this.useNetAgent&&this.websocket instanceof l.AnalogSocket?(this.websocket.onopen=function(){c.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),c.bindWebSocketEvents(),c.state=o.ENUM_CONNECT_STATE.connected,c.websocket&&(c.websocket.onmessage=c.handleWsMessage.bind(c))},this.websocket.onreconnnecting=function(){c.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket reconnecting "+!!c.successConnectedCallback),c.successConnectedCallback&&(c.connectCallback=c.successConnectedCallback),c.updateToken()},this.websocket.onmessage=this.handleWsMessage.bind(this),this.updateToken()):this.websocket.onopen=function(){c.resetConnectTimer(),c.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),c.websocket&&(c.websocket.onmessage=c.handleWsMessage.bind(c)),c.bindWebSocketEvents(),c.updateToken(),c.state=o.ENUM_CONNECT_STATE.connected}}catch(e){this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket error "+e)}this.useNetAgent||(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+this.tryConnectInterval),this.tryConnectTimer=setTimeout((function(){c.startConnectTimer(n)}),this.tryConnectInterval))},e.prototype.startConnectTimer=function(e){if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" call"),this.tryConnectCount>=o.MAX_TRY_CONNECT_COUNT)return this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&this.websocket.readyState===l.SocketState.OPEN?(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,e))},e.prototype.disconnectServer=function(){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER+" call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=o.ENUM_CONNECT_STATE.disconnect},Object.defineProperty(e.prototype,"isServerConnected",{get:function(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===l.SocketState.OPEN},enumerable:!1,configurable:!0}),e.prototype.createSession=function(e,t,r,n,s,a,l,c,u){void 0===s&&(s=""),void 0===a&&(a=""),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+n);var d="";o.PROTO_VERSION.split(".").forEach((function(e,t){return d+=1==e.length&&1==t?"0"+e:e})),this.sendMessageWithCallback("CreateSessionReq",e,0,{type:t,stream_id:n,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:r,strAuthParam:s,sdk_version:1*d,turn_server_host:"string"==typeof a?a:"",params:l},c,u)},e.prototype.createSessionWithSdp=function(e,t,r){var s,a=e.seq,l=e.type,c=e.streamId,u=e.strAuthParam,d=e.sdp,h=e.serverHost,p=e.playBufLevel,f=e.params,g=(null===(s=e.videoInfo)||void 0===s?void 0:s.keyFrameInterval)||2;this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+c);var m="";o.PROTO_VERSION.split(".").forEach((function(e,t){return m+=1==e.length&&1==t?"0"+e:e}));var v={type:l,app_id:this.appid,stream_id:c,sdp:d,user_id:this.userid,platform:this.platform,browser:this.browser.name,sdk_vers:parseInt(m),clientIp:"",media_server_host:"string"==typeof h?h:"",strAuthParam:u,params:f,keyframe_intv:parseInt(g)};p&&(v.min_play_buf_level_ms=p),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" "+c+" params: "+JSON.stringify(n(n({},v),{sdp:void 0}))),this.sendMessageWithCallback("CreateSessionWithSdpReq",a,0,v,t,r)},e.prototype.sendMediaDescUpdateReq=function(e,t,r,n,o){this.sendMessageWithCallback("MediaDescUpdateReq",e,t,{peer_id:r.peerID,type:r.type,sdp:r.sdp,width:r.width,height:r.height,framerate:r.frameRate,video_min_kpbs:r.video_min_kpbs,video_max_kpbs:r.video_max_kpbs,audio_kpbs:r.audio_kpbs,keyframe_intv:r.keyframe_intv},n,o)},e.prototype.removeSession=function(e){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION+" call "+e),this.sessionInfos[e]&&delete this.sessionInfos[e]},e.prototype.sendCloseSession=function(e,t,r,n,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION+" call: "+t);var s={reason:r};this.removeSession(t),this.sendMessageWithCallback("CloseSessionReq",e,t,s,n,o)},e.prototype.sendMessage=function(e,t,r,n){if(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" call "+e),this.websocket&&this.websocket.readyState===l.SocketState.OPEN){var o=this.getHeader(e,t,r),s=JSON.stringify({header:o,body:n});this.websocket.send(s),this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" success")}else this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" connect not establish")},e.prototype.handleRespondData=function(e,t){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" call");var r=this.sendDataMap[t.header.seq];if(null!=r){delete this.sendDataMap[t.header.seq],this.sendDataList.remove(r);var n=r._data;n.cmd!==e?this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" command is not match"):n.success&&n.success(t.header.seq,t.header.session_id,t.body)}else{if("CloseSessionRsp"==t.header.cmd)return;this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" cannot find data "+e)}},e.prototype.addSession=function(e,t){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION+" call"+e),this.sessionInfos[e]={token:t}},e.prototype.handlePushData=function(e){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" no callbackData "+e.header.cmd+" session: "+e.header.session_id)},e.prototype.handlePushResetSessionData=function(e){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" call ");var t=[];if(0==e.body.cResetType)t=Object.keys(this.sessionInfos);else if(1==e.body.cResetType)for(var r=0;r<e.body.session_ids.length;r++)t.push(e.body.session_ids[r]);if(this.sendResetSessionAck(e.header.seq,0,0),0!=t.length)for(var n=0;n<t.length;n++){var o=this.pushCallback[e.header.cmd+t[n]];null==o?this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no callbackData "+t[n]):o.callback&&o.callback(e.header.seq,t[n],e.body)}else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no session to callback")},e.prototype.sendMediaDesc=function(e,t,r,n,o,s){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC+" call: "+t);var a={type:r,sdp:n.sdp};null!=n.width&&(a.width=n.width),null!=n.height&&(a.height=n.height),null!=n.frameRate&&(a.framerate=n.frameRate),null!=n.video_min_kpbs&&(a.video_min_kpbs=n.video_min_kpbs),null!=n.video_max_kpbs&&(a.video_max_kpbs=n.video_max_kpbs),null!=n.audio_kpbs&&(a.audio_kpbs=n.audio_kpbs),null!=n.keyframe_intv&&(a.keyframe_intv=n.keyframe_intv),null!=n.min_play_buf_level_ms&&(a.min_play_buf_level_ms=n.min_play_buf_level_ms),this.sendMessageWithCallback("MediaDescReq",e,t,a,o,s)},e.prototype.sendCandidateInfo=function(e,t,r,n,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO+" call: "+t);for(var s=[],a=0;a<r.length;a++)s.push({candidate:r[a].candidate,sdpMid:r[a].sdpMid,sdpMLineIndex:r[a].sdpMLineIndex});this.sendMessageWithCallback("CandidateInfoReq",e,t,{infos:s},n,o)},e.prototype.sendMediaDescAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t),this.sendMessage("MediaDescAck",e,t,{result:r})},e.prototype.sendUpdateMediaDescAck=function(e,t,r,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t),this.sendMessage("MediaDescUpdateAck",e,t,{peer_id:n,result:r})},e.prototype.sendCandidateInfoAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK+" call: "+t),this.sendMessage("CandidateInfoAck",e,t,{result:r})},e.prototype.sendCloseSessionAck=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK+" call: "+t),this.sendMessage("CloseSessionAck",e,t,{result:r})},e.prototype.sendResetSessionAck=function(e,t,r){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK+" call: "+t),this.sendMessage("SessionResetAck",e,t,{result:r})},e.prototype.registerPushCallback=function(e,t,r){r&&"function"==typeof r&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK+" set callback "+t),this.pushCallback[e+t]={callback:r})},e.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},e.prototype.checkMessageTimeout=function(){for(var e,t=this,r=this.sendDataList.getFirst(),n=(new Date).getTime(),s=0,a=0,l=0;null!=r&&!(r._data.time+this.sendDataTimeout>n);)if(delete this.sendDataMap[r._data.seq],this.sendDataList.remove(r),++a,-1!=this.checkMessageList.indexOf(r._data.cmd)){if(null==r._data.error||this.sendDataDropTimeout>0&&r._data.time+this.sendDataDropTimeout<n?++l:(this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" error cmd = "+r._data.cmd+" seq ="+(null===(e=r._data)||void 0===e?void 0:e.seq)),r._data.error&&r._data.error(o.SEND_MSG_TIMEOUT,r._data.seq)),++s>=this.sendDataCheckOnceCount)break;r=this.sendDataList.getFirst()}else r=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout((function(){t.checkMessageTimeout()}),this.sendDataCheckInterval),0==a&&0==l||this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" call success, state: timeout="+a+" drop="+l)},e.prototype.sendHeartbeat=function(){var e=this;if(this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+"call tryHeartbeatCount:"+this.tryHeartbeatCount),0!=Object.keys(this.sessionInfos).length)if(this.state===o.ENUM_CONNECT_STATE.connected){if(++this.tryHeartbeatCount>o.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" heartbeat try limit"),void this.disconnectCallback();var t=[];for(var r in this.sessionInfos)t.push(parseInt(r));var n={session_ids:t},s=(new Date).getTime();this.sendMessageWithCallback("ClientHBReq",this.stateCenter.getSeq(),0,n,(function(t,r,n){e.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" hb time "+((new Date).getTime()-s)),e.heartbeatInterval!=n.hb_interval&&(e.heartbeatInterval=n.hb_interval,e.onUpdateHeartBeatInterval(n.hb_interval)),e.tryHeartbeatCount=0}),(function(e,t){}))}else this.logger.warn(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" state error");else this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" no need to heartbeat")},e.prototype.QualityReport=function(e,t,r,o,s){this.logger.debug(i.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT+" call");var a={streams:[n(n({},r),{aid:t})]};this.sendMessageWithCallback("QualityReportReq",e,t,a,o,s)},e.prototype.sendStreamStatus=function(e,t,r,n,s,a){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" call "+t);var l={mic_status:n,camera_status:r};this.logger.info("".concat(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS," stream ").concat(s||""," status ").concat(JSON.stringify(l))),this.sendMessageWithCallback("StreamStatusNotify",e,t,l,(function(){}),(function(e){e===o.SEND_MSG_TIMEOUT&&a&&a()}))},e.prototype.ActivatePlayVideoStream=function(e,t,r,n,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" call");var s={active:r?0:1,layer:0};this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" activate video "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateVideoPlayStreamReq",e,t,s,n,o)},e.prototype.ActivatePlayAudioStream=function(e,t,r,n,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" call");var s={active:r?0:1,layer:0};this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" activate audio "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateAudioPlayStreamReq",e,t,s,n,o)},e.prototype.sendBroadcasterStatus=function(e,t,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS+" call "+t),this.sendMessage("BroadcasterStatusNotify",e,t,{status:r})},e.prototype.sendNetProbe=function(e,t,r,n,o){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t),this.sendMessageWithCallback("NetQualityProbeReq",e,t,{peer_id:r,action:1},n,o)},e.prototype.sendNetQualityInfoPushAck=function(e,t,r,n){this.logger.info(i.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t),this.sendMessage("NetQualityInfoAck",e,t,{peer_id:r,result:n})},e.prototype.activateSEIInsert=function(e,t,r,n,o,i,s){},e.prototype.getP2PNetStats=function(e,t,r,n,o){this.sendMessageWithCallback("Peer2PeerNetStatsGetReq",e,t,{peer_id:r},n,o)},e.prototype.sendGWCmd=function(e,t,r,n,o){this.sendMessageWithCallback("CmdReq",e,t,r,n,o)},e.prototype.sendGWAck=function(e,t,r){this.sendMessage("CmdAck",e,t,r)},e}();t.ZegoSignal=d},8935:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoplayDialog=void 0;var o=n(r(4671)),i="zg_autoplay_wrapper";function s(){return navigator.language.includes("zh")}var a=function(){function e(){this.content='Media play failed. Click the "Resume"to resume.',this.dialogNode=null,this.bodyPosition="static";var e=document.createElement("style");e.innerHTML=".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block !important;}.".concat(i,"{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px #988e8d;border:1px solid #d1cfcf;max-width:500px;}.").concat(i," a{color:#2473E8;}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.zg_autoplay_content{margin:8px 0;}.zg_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.zg_autoplay_action_confirm:hover{opacity:0.9;}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.").concat(i,"{width:80vw;}}"),document.head.appendChild(e),s()&&(this.content=""),this.eManager=new o.default}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.createDialog=function(){var e=document.createElement("template");e.innerHTML="<div class='zg_autoplay_mask'><div class='".concat(i,"'><div class='zg_autoplay_header'>").concat(location.host,"</div><div class='zg_autoplay_content'>").concat(this.content,"</div><div class='zg_autoplay_action_wrapper'></div></div></div>").trim();var t=document.createElement("button");t.className="zg_autoplay_action_confirm",t.innerText=s()?"":"Resume",t.onclick=this.onConfirm.bind(this);var r=e.content.firstChild,n=r.querySelector(".zg_autoplay_action_wrapper");return n&&n.appendChild(t),r},e.prototype.onConfirm=function(e){e&&e.stopPropagation(),this.eManager.emit("allowPlay"),this.deleteDiaLog()},e.prototype.deleteDiaLog=function(){this.dialogNode&&(document.body.removeChild(this.dialogNode),this.dialogNode=null)},e.prototype.addDiaLog=function(){this.dialogNode=this.dialogNode||this.createDialog(),document.body.appendChild(this.dialogNode),this.dialogNode.onclick=this.onConfirm.bind(this)},e.prototype.on=function(e,t){return this.eManager.addEventHandler(e,t)},e.instance=null,e}();t.AutoplayDialog=a},9307:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamView=void 0;var a=s(r(4671)),l=r(3770),c=r(8935).AutoplayDialog.getInstance(),u=function(){function e(e,t,r){var o,i,s,l=this;this.previewer=t,this.video=null,this.audio=null,this.options={enableAutoplayDialog:!0,clearLastFrame:!0},this.emitPlayFailed=(o=function(){l.eventManager.emit("autoplayFailed"),l.options.enableAutoplayDialog&&c.addDiaLog()},void 0===(i=600)&&(i=100),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;clearTimeout(s),s=window.setTimeout((function(){o.apply(r,e)}),i)}),this.videoMuted=!1,this.audioMuted=!1,this.eventHandler={visibilitychange:function(){var e;!document.hidden&&(null===(e=l.audio)||void 0===e?void 0:e.parentNode)&&(l.audio.srcObject=l.audio.srcObject,l.mountPlayer(l.audio,!0))}},this.options=n(n({},this.options),r);var u=this.id="".concat(e.id),d=document.createElement("div");d.id="zg-rtc-player_".concat(u),d.setAttribute("style","width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");var h=e.getVideoTracks()[0],p=e.getAudioTracks()[0],f=document.createElement("video");f.id="zg-rtc-video_".concat(u),f.setAttribute("style","width:100%;height:100%;object-fit:contain;"),f.setAttribute("autoplay","autoplay"),f.setAttribute("playsinline","playsinline"),f.muted=!0,f.srcObject=new MediaStream,h&&f.srcObject.addTrack(h);var g=document.createElement("audio");g.id="zg-rtc-audio_".concat(u),g.setAttribute("autoplay","autoplay"),g.setAttribute("playsinline","playsinline"),g.srcObject=new MediaStream,p&&g.srcObject.addTrack(p),this.wrapper=d,this.video=f,this.audio=g,this.eventManager=new a.default,c.on("allowPlay",(function(){l.resume()})),document.addEventListener("visibilitychange",this.eventHandler.visibilitychange)}return Object.defineProperty(e.prototype,"isLocal",{get:function(){return this.previewer instanceof l.ZegoPreview},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMounted",{get:function(){return!!this.wrapper.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudio",{get:function(){var e,t,r;return!!(null===(e=this.audio)||void 0===e?void 0:e.parentNode)&&"live"===(null===(r=null===(t=this.audio.srcObject)||void 0===t?void 0:t.getTracks()[0])||void 0===r?void 0:r.readyState)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasVideo",{get:function(){var e,t,r;return!!(null===(e=this.video)||void 0===e?void 0:e.parentNode)&&"live"===(null===(r=null===(t=this.video.srcObject)||void 0===t?void 0:t.getTracks()[0])||void 0===r?void 0:r.readyState)},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,t){return void 0===t&&(t=["audio","video"]),o(this,void 0,void 0,(function(){var r=this;return i(this,(function(n){return t.forEach((function(t){return o(r,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return r="audio"===t?this.audio:this.video,("audio"===t?this.hasAudio:this.hasVideo)?(e&&r&&(r.srcObject=r.srcObject),[4,null==r?void 0:r.play()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))})),[2]}))}))},e.prototype.checkIfClearLastFrame=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.options.clearLastFrame?[4,this.resume(!0,["video"])]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.play=function(e,t){void 0===t&&(t={});var r=null;if("string"==typeof e?r=document.getElementById(e):e instanceof HTMLElement&&(r=e),!r)throw"Execute `play` failed, container not exist";this.options=n(n({},this.options),t);var o=this.options,i=o.objectFit,s=o.muted,a=o.mirror,l=!this.isLocal;this.audio&&"boolean"==typeof s&&(l=!s),this.video&&(void 0!==i&&(this.video.style.objectFit=i),"boolean"==typeof a&&(this.video.style.transform=a?"rotateY(180deg)":"")),!r.contains(this.wrapper)&&r.appendChild(this.wrapper),this.videoMuted=!1,this.mountPlayer(this.video,!0),this.audioMuted=!l,this.mountPlayer(this.audio,l)},e.prototype.stop=function(){var e,t=null===(e=this.wrapper)||void 0===e?void 0:e.parentNode;t&&t.removeChild(this.wrapper)},e.prototype.setVideo=function(e,t){return void 0===t&&(t=!1),o(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this.setTrack(!0,e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.setAudio=function(e,t){return void 0===t&&(t=!1),o(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this.setTrack(!1,e,t)];case 1:return r.sent(),[2]}}))}))},e.prototype.setTrack=function(e,t,r){return void 0===r&&(r=!1),o(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return(n=e?this.video:this.audio)&&(o=n.srcObject)?t?[3,1]:((s=o.getTracks()).forEach((function(e){null==o||o.removeTrack(e),n.srcObject=n.srcObject})),this.eventManager.emit("_trackChanegd",e?"video":"audio"),[3,5]):[2];case 1:if(!(t instanceof MediaStreamTrack))return[3,5];if((s=o.getTracks()).includes(t))return[3,5];if(s.forEach((function(e){null==o||o.removeTrack(e)})),o.addTrack(t),this.eventManager.emit("_trackChanegd",t.kind,t),this.mountPlayer(n,!(e?this.videoMuted:this.audioMuted)),!r)return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.resume(!0)];case 3:case 4:return i.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.setMirror=function(e){var t=this.options.mirror=!!e;this.video&&(this.video.style.transform=t?"rotateY(180deg)":"")},e.prototype.setVideoMuted=function(e){return this.videoMuted=e,this.mountPlayer(this.video,!e)},e.prototype.setAudioMuted=function(e){return this.audioMuted=e,this.mountPlayer(this.audio,!e)},e.prototype.setVolume=function(e){if(this.audio){var t=e>100?1:e/100;return this.audio.volume=t,this.audio.volume==t}return!1},e.prototype.takeStreamSnapshot=function(e){var t=this.video;if(!t)return"";if(!t.srcObject)return"";var r=document.createElement("canvas");r.width=this.video.videoWidth,r.height=this.video.videoHeight;var n=r.getContext("2d");n&&n.drawImage(this.video,0,0,r.width,r.height);var o=r.toDataURL("image/"+(null==e?void 0:e.imageType)||0,null==e?void 0:e.quality),i="png";return(null==e?void 0:e.imageType)&&(i=["png","jpeg"].includes(null==e?void 0:e.imageType)?null==e?void 0:e.imageType:"png"),(null==e?void 0:e.save)&&r.toBlob((function(t){var r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r;var o=(null==e?void 0:e.fileName)||"snapshot"+Date.now();n.download=o+"."+i,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(r)}),100)})),o},e.prototype.mountPlayer=function(e,t){var r,n,o=this;if(!e||!this.wrapper)return!1;var i="VIDEO"===e.tagName;if(t){if(t&&"live"===(null===(n=null===(r=null==e?void 0:e.srcObject)||void 0===r?void 0:r.getTracks()[0])||void 0===n?void 0:n.readyState)){var s=null,a=function(){e.oncanplay=null,s&&(clearTimeout(s),s=null),e.play().catch((function(){o.isMounted&&(i&&o.hasVideo||!i&&o.hasAudio)&&o.emitPlayFailed()}))};e.muted=!1,e.play().catch((function(){})),s=window.setTimeout((function(){a()}),1e3),e.oncanplay=function(){a()},!e.parentNode&&this.wrapper.appendChild(e)}}else{e.muted=!0;var l=e.parentNode;l&&l.removeChild(e)}return!0},e.prototype.on=function(e,t){return!!t&&this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e.prototype.useAudioOut=function(e){var t;return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return(r=null===(t=this.audio)||void 0===t?void 0:t.setSinkId)?[4,r.call(this.audio,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.destroy=function(){this.stop(),this.audio=null,this.video=null,document.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},e.prototype.getAudioElement=function(){return this.audio},e}();t.StreamView=u},3409:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenterWeb=t.CachedNodesUseMode=void 0;var c,u=r(6706),d=r(3770),h=r(1547),p=r(5740),f=r(6706),g=r(5019),m=r(3849),v=r(6014),_=r(8493),y=r(2752),b=r(3529),E=r(2990),S=r(1089),C=l(r(3720)),T=r(608);!function(e){e[e.NotReUse=0]="NotReUse",e[e.TheSameReUse=1]="TheSameReUse",e[e.DiffReUse=2]="DiffReUse",e[e.AllReUse=3]="AllReUse"}(c=t.CachedNodesUseMode||(t.CachedNodesUseMode={}));var w=b.ZegoRTCLogEvent.kZegoTaskPublishStart,R=b.ZegoRTCLogEvent.kZegoTaskPlayStart,k=function(e){function t(t,r,n,o,i,s){var a,l=this;return(l=e.call(this)||this).logger=t,l.stateCenter=r,l.dataReport=n,l.rtm=o,l.ac=i,l.mediaEleSources=s,l.testEnvironment=!1,l.heartbeatTimer=null,l.heartbeatInterval=1e4,l.qualityTimerInterval=3e3,l.previewStreamList=[],l.signalList={},l.chargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]},l.soundLevelDelegate=!1,l.soundLevelInterval=1e3,l.enableInBackground=!1,l.isPeer=!0,l.probeList={},l.isMicEnabled=!0,l.isDataChannelEnabled=!1,l.publishQualityInfos=[],l.playQualityInfos=[],l.qualityUploadTimestamp=0,l.qualityHeadTimestamp=0,l.gwNode="",l.playerList={},l.stopedPlayerList={},l.publisherList={},l.playSuccessCallBackList={},l.playErrorCallBackList={},l.waitPublishList=[],l.waitPlayList=[],l.autoSwitchProtocol=!0,l.udpFailNum=0,l.maxUdpFailNum=2,l.qualityInterval=3e3,l.switchScore=60,l.defaultBadQualityTime=3e4,l.l3BadQualityTime=1e4,l.switchDetectResultScore=60,l.cdnBadQualityScore=60,l.l3BadQualityScore=60,l.multiPlaySwitchRate=.8,l.protocolBadQualityCount=3,l.protocolBadQualityTime=12e3,l.protocolQualityCacheExpiredTime=18e4,l.fallbackInhibitionTime=18e4,l.probeExpiredTime=3e4,l.minProbeInterval=15e3,l.l3DetectedTimestamp=0,l.l3DetectResult=0,l.isL3Fallback=!1,l.cdnProtocolBadTimestamp=0,l.l3ProtocolBadTimestamp=0,l.lastHandleCDNBadTimestamp=0,l.lastHandleL3BadTimestamp=0,l.cdnProtocolBadTime=0,l.l3ProtocolBadTime=0,l.probeStartedNum=3,l.cachedGwNodesList={},l.cachedGwNodesMode=c.TheSameReUse,l.tryCountConnectInterval=3e3,l.checkMessageTimeout=function(){for(var e in l.signalList)l.signalList[e].signal&&l.signalList[e].signal.checkMessageTimeout()},l.getAllInUseUrl=function(){var e=[];for(var t in l.signalList)e.push(t);return e},l.onDisconnectHandle=function(e,t){if(l.logger.info("zsc.od.0 call"),l.signalList[e]){for(var r=l.signalList[e],n=0;n<r.publishConnectedList.length;n++){var o=l.publisherList[r.publishConnectedList[n]];o&&o.publisher&&o.publisher.onDisconnect(t)}for(n=0;n<r.playConnectedList.length;n++){var i=l.playerList[r.playConnectedList[n]];i&&i.player&&i.player.onDisconnect(t)}delete l.signalList[e],l.stopSignalHeartbeat(),l.stateCenter.billingTimer.stopChargeInfosUpload(),l.stopSoundLevel()}},l.eventHandler={visibilitychange:function(){var e=!document.hidden;!l.enableInBackground&&l.soundLevelDelegate&&(e?(l.enableSoundLevelProcessor(!0),l.activeSoundLevel()):(l.soundLevelTimer&&clearTimeout(l.soundLevelTimer),l.soundLevelTimer=null,l.enableSoundLevelProcessor(!1))),l.ac.resume()}},l.rtm._on("_roomStateUpdate",(function(e,t){for(var r in l.playerList){var n=l.playerList[r],o=n.cdnPlayer;n.room.roomID==e&&o&&n.player.state===f.ENUM_PLAY_STATE.playing&&n.playMode==u.PlayMode.CDN&&("CONNECTED"==t?(o.canRetry=!0,o.retry()):"DISCONNECTED"===t&&l.stopPlayingStream(r))}})),document.addEventListener("visibilitychange",l.eventHandler.visibilitychange),null===(a=l.rtm.netAgent)||void 0===a||a.on("clientInfo",(function(e){if(l.stateCenter.accessClientIp&&(null==e?void 0:e.clientIP)&&l.stateCenter.accessClientIp!==e.clientIP){for(var t in l.logger.warn(S.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+l.stateCenter.accessClientIp+" "+e.clientIP),l.publisherList){var r=l.publisherList[t].publisher;r.resetGwNodes(),l.clearCachedGwNodesList(r,!0)}for(var t in l.playerList){var n=l.playerList[t].player;n.resetGwNodes(),l.clearCachedGwNodesList(n,!1)}}l.stateCenter.accessClientIp=e.clientIP,"number"==typeof(null==e?void 0:e.timeOffset)&&(l.stateCenter.clientTimeOffset=null==e?void 0:e.timeOffset),l.updateTimeOffsetInterval()})),l}return o(t,e),Object.defineProperty(t.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"microphonePreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType&&e.micTrack}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldReportNoPlaying",{get:function(){return this.stateCenter.billingTimer.shouldReportRoomTime},enumerable:!1,configurable:!0}),t.prototype.onSignalDisconnected=function(e){},t.prototype.setQualityMonitorCycle=function(e){var t=this;return this.logger.debug("zsc.qmc.0 timeInterval "+e),0==Object.keys(this.publisherList).length?this.qualityTimerInterval=e:Object.keys(this.publisherList).forEach((function(r){t.publisherList[r].publisher.qualityTimeInterval=e,t.publisherList[r].publisher.setPublishQualityTimer()})),!0},t.prototype.setSessionInfo=function(e,t,r){this.logger.debug("zsc.ssi.0 called"),this.appid=e,this.userid=t,this.testEnvironment=r},t.prototype.onPlayStateUpdate=function(e,t,r,n){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,r){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onUpdateHeartBeatIntervalHandle=function(e){e!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+e),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=e,this.startSignalHeartbeat())},t.prototype.setPublishStateStart=function(e,t,r,n,o,i){var s,a,l=this;this.logger.info("zsc.pss.0 call "+t);var c=this.checkPreview(r);if(!c)return this.logger.error("zsc.pss.0 stream not found"),!1;if(this.publisherList[t])return this.logger.error("zsc.pss.0 publisher already exist"),this.stateCenter.reporter.spanSetAttributes({key:w.event,par:t},{error:w.error.kIsPublishing.code,message:w.error.kIsPublishing.message}),!1;var u=new h.ZegoPublish(t,this.logger,this.dataReport,this.qualityTimerInterval,this,this.stateCenter,c);u.state=f.ENUM_PUBLISH_STATE.start,u.isPeer=this.isPeer,u.reportSeq=this.stateCenter.reportSeqList.startPublish[t],u.isExternal=!0,u.cachedGwNodesMode=this.cachedGwNodesMode,u.parentSpanKey=b.ZegoRTCLogEvent.kZegoStartPublish.event;var d=null===(s=null==c?void 0:c.videoTrack)||void 0===s?void 0:s.label,p="",g="",m=r.getAudioTracks()[0]&&r.getAudioTracks()[0].label;try{p=null===(a=null==c?void 0:c.videoTrack)||void 0===a?void 0:a.getSettings().deviceId,g=r.getAudioTracks()[0]&&r.getAudioTracks()[0].getSettings().deviceId}catch(e){this.logger.warn("zsc.pss.0 get device id failed. error: "+e)}var y=new v.RetryStreamHandler(this.logger,this.stateCenter,this,!0);return this.publisherList[t]={seq:0,room:e,localStream:r,publisher:u,serverUrls:[],ttl:0,isCenterNode:!0,streamID:t,publishOption:n,cameraLabel:d||"",microLabel:m||"",cameraDeviceId:p||"",microDeviceId:g||"",deviceStateCount:0,retryStreamHandler:y,retryDispatchHandler:new _.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:i,streamSid:o},u.onPublishStateUpdate=function(e,r,n,o,i,s){var a=l.publisherList[r];a?a.retryStreamHandler.publishStateHandle(e,a.streamID,n,o,i,s):l.logger.error("zsc.psuh.0 cannot find publish "+t)},u.onPublishQualityUpdate=function(e,r){var n=l.publisherList[e];n?(l.stateCenter.deviceStateOut&&0===r.audio.audioBitrate?(n.deviceStateCount++,n.deviceStateCount>=2&&(n.deviceStateCount=0,l.stateCenter.deviceStateOut=!1,l.logger.warn("zsc.pss.0 publish audio error by device"))):n.deviceStateCount=0,l.onPublishQualityUpdate(n.streamID,r)):l.logger.error("zsc.psuh.0 cannot find publish "+t)},!0},t.prototype.startPublishingStream=function(e,t){void 0===t&&(t=!1),this.logger.info("zsc.sps.0 call");var r=this.publisherList[e];if(!r)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;if(!t){if(this.stateCenter.reporter.spanSetAttributes({key:w.event,par:e},{urls:w.urls(r.serverUrls),is_center:w.is_center(r.isCenterNode)}),!r.serverUrls||0===r.serverUrls.length)return r.retryStreamHandler.publishStateHandle(f.ENUM_PUBLISH_STATE_UPDATE.error,e,y.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!0;var n=r.serverUrls.indexOf(this.server);-1!==n&&(r.serverUrls.splice(n,1),r.serverUrls.unshift(this.server))}var o=r.retryStreamHandler;return o.invalid(),o.init(this.stateCenter.streamRetryTime),o.initStream(e,r.serverUrls),o.startMaxTime(),o.activePublish(0)},t.prototype.updateWaitingList=function(e,t,r,n,o){var i={streamID:r,success:n,error:o};t?e.publishWaitingList.push(i):e.playWaitingList.push(i)},t.prototype.publishStream=function(e){var t=this.publisherList[e].publisher;if(t){var r=null,n=null,o=this.publisherList[e].publishOption,i=this.checkPreview(this.publisherList[e].localStream);i?(r=i.localStream,n=i.videoInfo,this.stateCenter.reporter.spanSetAttributes({key:w.event,par:e},{cap_w:w.cap_w(i.videoInfo.width),cap_h:w.cap_h(i.videoInfo.height),w:w.w(i.videoInfo.width),h:w.h(i.videoInfo.height),video_en_fps:w.video_en_fps(i.videoInfo.frameRate),video_en_bps:w.video_en_bps(1e3*i.videoInfo.bitRate)}),r?(this.logger.info("zsc.ps.0 call success"),this.setStreamGwNode(t,!0),t.startPublish(e,r,n,i.mediaStreamConfig,o)):this.logger.error("zsc.ps.0 no localStream found")):this.logger.error("zsc.ps.0 no preview found")}else this.logger.info("zsc.ps.0 publisher don't exist")},t.prototype.connectPublishServer=function(e,t){var r=this,n=this.publisherList[e];if(!n)return this.logger.error("zsc.cps.0 publisher don't exist"),!1;var o=Date.now();return this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:n.publisher.parentSpanKey,par:e},{key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,!0),this.connectWithReuseSignalServer(e,!0,t,(function(e,t,n){var i=r.publisherList[e];if(i){var s=i.publisher;if(s){var a=Date.now()-o;r.stateCenter.reporter.spanSetAttributes({key:s.parentSpanKey,par:e},{dispatch_consume:b.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(a)}),s.reportSpan.setAttributes({server_url:b.ZegoRTCLogEvent.kZegoTaskSDKPublishStream.server_url(n)}),r.stateCenter.reporter.spanSetAttributes({key:w.event,par:e},{server_url:w.server_url(n)}),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},{result:0,server_url:b.ZegoRTCLogEvent.kZegoPublishServerConnect.server_url(n)});var l=t.tokenInfo;r.logger.info("zsc.cps.0 update token success"),l&&l.report&&(s.qualityUpload=l.report,s.qualityUploadInterval=l.report_interval),s.signal=t.signal,r.server=n,r.publishStream(e),r.getTokenSuccess()}else r.logger.info("zsc.cps.1 check publisher don't exist")}else r.logger.info("zsc.cps.0 after connect publisher don't exist")}),(function(e,t){r.logger.error("zsc.cps.0 "+e+" connect fail "+JSON.stringify(t));var n=r.publisherList[e];if(n)if(n.publisher){var o,s=!1;t&&t.code===y.errorCodeList.GET_CONFIG_FAIL.code?(o=i({},y.errorCodeList.GET_CONFIG_FAIL),s=!0):((o=i({},y.errorCodeList.CONNECT_FAILED)).message=o.message+" "+t,1008===t&&(o=y.errorCodeList.TOKEN_EXPIRED,s=!0),20010===t&&(s=!0,o=JSON.parse(JSON.stringify(y.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL)))),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPublishServerConnect.event,par:e},{result:t,error:o.code,message:o.message}),n.retryStreamHandler.publishStateHandle(f.ENUM_PUBLISH_STATE_UPDATE.error,e,o,s)}else r.logger.info("zsc.cps.1 check publisher don't exist");else r.logger.info("zsc.cps.0 after connect publisher don't exist")})),!0},t.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},t.prototype.stopPublishingStream=function(e,t){this.logger.info("zsc.sps.0.1 call "+e+" "+JSON.stringify(t));var r=this.publisherList[e];if(r){var n=r.retryStreamHandler;for(var o in n&&(n.stopMaxTime(),n.invalid()),this.signalList)this.signalList[o].publishWaitingList=this.signalList[o].publishWaitingList.filter((function(t){return t.streamID!==e}));delete this.publisherList[e],r.publisher&&(r.publisher.stopPublish(t),delete r.publisher),this.removeStreamFromSignal(!0,e),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),this.logger.info("zsc.sps.0.1 call success")}else this.logger.warn("zsc.sps.0.1 publisher don't exist")},t.prototype.connectWithReuseSignalServer=function(e,t,r,n,o){var i=this;this.logger.info("zsc.crss.0 begin "+r);var s=null;if(this.signalList[r])(s=this.signalList[r]).state==f.ENUM_SIGNAL_STATE.connected?(this.logger.info("zsc.crss.0 already connected "+r+" streamId: "+e),t?s.publishConnectedList.push(e):s.playConnectedList.push(e),n(e,s,r)):s.state==f.ENUM_SIGNAL_STATE.connecting&&(this.logger.info("zsc.crss.0 signal is connecting "+r+" streamId: "+e),this.updateWaitingList(s,t,e,n,o));else{this.logger.info("zsc.crss.0 new signal "+r+", streamId: "+e);var a=["unified_rtc","unified_l3"].includes(r),l=new g.ZegoSignal(this.logger,this.stateCenter,this.rtm.netAgent,a);this.stateCenter.clientIP=this.rtm.netAgent.clientIP,l.setSessionInfo(this.appid,this.userid),a||(l.onUpdateHeartBeatInterval=this.onUpdateHeartBeatIntervalHandle.bind(this)),l.onDisconnect=this.onDisconnectHandle;var c=this.publisherList[e]||this.playerList[e]||null,u=null==c?void 0:c.retryStreamHandler;if(this.stateCenter.streamConnectTime)l.tryConnectInterval=this.stateCenter.streamConnectTime;else if(u&&u.retryActiveCount){var d=u.retryActiveCount*(u.retryActiveCount-1)/2+2;l.tryConnectInterval=1e3*(d=d>f.MAX_RETRY_CONNECT_INTERVAL?f.MAX_RETRY_CONNECT_INTERVAL:d)}this.signalList[r]={signal:l,state:f.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[r],t,e,n,o);var h=null==c?void 0:c.room.token,p=null==c?void 0:c.room.roomID;this.logger.info("zsc.crss.0 "+h),l.connectServer(p||this.stateCenter.roomList[0].roomID,h||this.stateCenter.roomList[0].token,r,(function(e,t,n){if(s=i.signalList[r],0!=e){i.logger.info("zsc.crss.0 connect failed "+t);for(var o=s.publishWaitingList,l=o.length-1;l>=0;l--)(u=o[l]).error&&u.error(u.streamID,e);var c=s.playWaitingList;for(l=c.length-1;l>=0;l--){var u;(u=c[l]).error&&u.error(u.streamID,e)}delete i.signalList[r]}else i.logger.info("zsc.crss.0 connected success "+t),s.state=f.ENUM_SIGNAL_STATE.connected,s.tokenInfo=n,s.publishWaitingList.forEach((function(e){e.success&&e.success(e.streamID,s,t),s&&s.publishConnectedList.push(e.streamID)})),s.playWaitingList.forEach((function(e){e.success&&e.success(e.streamID,s,t),s&&s.playConnectedList.push(e.streamID)})),s.publishWaitingList=[],s.playWaitingList=[],a||null!=i.heartbeatTimer||i.startSignalHeartbeat(),i.stateCenter.billingTimer.startChargeInfosUpload(),i.activeSoundLevel()}))}},t.prototype.setPlayStateStart=function(e,t,r,n){var o=this;if(this.logger.info("zsc.pss.1 call "+e),this.rtm.isDisConnect()&&this.stateCenter.networkState==u.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.1 network offline"),!1;if(this.playerList[e])return this.logger.error("zsc.pss.1 player already exist"),this.stateCenter.reporter.spanEnd({key:R.event,par:e},{error:R.error.kIsPlaying.code,message:R.error.kIsPlaying.message}),R.error.kPlayRepeatedPullError;var i=this.getPlayRoom(e)||this.stateCenter.roomList[0];if(!i)return this.logger.error("zsc.pss.1 not login room"),this.stateCenter.reporter.spanEnd({key:R.event,par:e},{error:R.error.kPlayNoLoginError.code,message:R.error.kPlayNoLoginError.message}),R.error.kPlayNoLoginError;var s=new m.ZegoPlayWeb(e,this.logger,null,this.dataReport,this.qualityTimerInterval,this,this.ac,this.stateCenter);!i.streamList.find((function(t){return t.stream_id===e}))&&(s.streamInRoom=!1),t&&[0,1,2,3].includes(t.resourceMode)&&(s.resourceMode=t.resourceMode),s.state=f.ENUM_PLAY_STATE.start,s.isPeer=this.isPeer,s.reportSeq=this.stateCenter.reportSeqList.startPlay[e],s.isExternal=!0,s.cachedGwNodesMode=this.cachedGwNodesMode,s.parentSpanKey=b.ZegoRTCLogEvent.kZegoStartPlay.event,s.beginTime=(new Date).getTime();var a=new v.RetryStreamHandler(this.logger,this.stateCenter,this,!1),l=u.PlayMode.CDN,c="cdn",d=(new Date).getTime();for(var h in this.playerList)if(this.playerList[h].playMode==u.PlayMode.L3){l=u.PlayMode.L3,c="l3";break}return this.cdnProtocolBadTimestamp&&this.cdnProtocolBadTimestamp+this.protocolQualityCacheExpiredTime>d&&0==this.l3ProtocolBadTimestamp&&(l=u.PlayMode.L3,c="l3"),this.stateCenter.reporter.spanSetAttributes({key:R.event,par:e},{resource_mode:R.resource_mode(s.resourceMode),src:R.src(s.resourceMode===u.ResourceMode.DG?c:(0,T.getPlaySourceType)(s.resourceMode)),room_id:R.room_id(null==i?void 0:i.roomID),room_sid_string:R.room_sid_string(null==i?void 0:i.roomSessionID),is_multi:R.is_multi(this.stateCenter.isMultiRoom)}),this.playerList[e]={seq:0,room:i,player:s,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:e,playOption:t,retryStreamHandler:a,retryDispatchHandler:new _.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:n,cdnPlayer:null==t?void 0:t.CDNPlayer,playMode:l,streamSid:r},s.onPlayStateUpdate=function(e,t,r,n,i,s){var l=o.playerList[t];l?a.playStateHandle(e,l.streamID,r,n,i,s):o.logger.error("zsc.pss.1 cannot find play "+t)},s.onPlayQualityUpdate=function(e,t){var r=o.playerList[e];r?o.onPlayQualityUpdate(r.streamID,t):o.logger.error("zsc.pss.1 cannot find play "+e)},s.onRemoteCameraStatusUpdate=function(e,t,r){var n=o.playerList[e];n?o.onRemoteCameraStatusUpdate(n.streamID,t,r):o.logger.error("zsc.pss.1 cannot find play "+e)},s.onRemoteMicStatusUpdate=function(e,t,r){var n=o.playerList[e];n?o.onRemoteMicStatusUpdate(n.streamID,t,r):o.logger.error("zsc.pss.1 cannot find play "+e)},!0},t.prototype.onRemoteMicStatusUpdate=function(e,t,r){},t.prototype.onRemoteCameraStatusUpdate=function(e,t,r){},t.prototype.startPlayingStream=function(e,t,r,n){var o;void 0===t&&(t=!1),this.logger.info("zsc.sps.1 start play called");var i=this.playerList[e];if((null===(o=i.playOption)||void 0===o?void 0:o.CDNVideo)&&i.player.firstPlay){var s=i.playOption.CDNVideo;i.player._CDNPlayerClone=s.cloneNode(),i.player.initPoster=(null==s?void 0:s.getAttribute("poster"))||"",i.player.initVideoStyle=(null==s?void 0:s.getAttribute("style"))||"",i.player.firstPlay=!1}if(n)return this.playCDN(e,this.playerList[e].playOption,this.playSuccessCallBackList[e],this.playErrorCallBackList[e]),!0;if(!i)return this.logger.error("zsc.sps.1 player don't exist"),!1;var a=i.player;if(-1==e.indexOf("zegoprobe-")&&i.playMode==u.PlayMode.L3&&this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:b.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:e},b.ZegoRTCLogEvent.kZegoTaskL3Play.event).setAttributes({tryidx:b.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(a.tryidx),biz_product:b.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(i.playOption.resourceMode==u.ResourceMode.DG?1:0)}),this.stateCenter.reporter.spanSetAttributes({key:R.event,par:e},{urls:R.urls(i.serverUrls),is_center:R.is_center(i.isCenterNode)}),!t){if(0==i.serverUrls.length)return i.retryStreamHandler.playStateHandle(f.ENUM_PLAY_STATE_UPDATE.error,e,y.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1;var l=i.serverUrls.indexOf(this.server);-1!==l&&(i.serverUrls.splice(l,1),i.serverUrls.unshift(this.server))}var c=i.retryStreamHandler;return c.invalid(),c.init(this.stateCenter.streamRetryTime),c.initStream(e,i.serverUrls),c.startMaxTime(),c.activePull(0,r)},t.prototype.connectPlayServer=function(e,t,r){var n=this,o=this.playerList[e];if(!o)return this.logger.error("zsc.cps.1 player don't exist"),!1;this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:o.player.parentSpanKey,par:e},{key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,!0);var s=Date.now();return this.connectWithReuseSignalServer(e,!1,r,(function(e,r,o){var i=n.playerList[e];if(i){var a=i.player;if(a){a.reportSpan.setAttributes({server_url:b.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.server_url(o)});var l=Date.now()-s;n.stateCenter.reporter.spanSetAttributes({key:a.parentSpanKey,par:e},{dispatch_consume:b.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(l)}),n.stateCenter.reporter.spanSetAttributes({key:R.event,par:e},{server_url:R.server_url(o)}),n.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},{result:0,server_url:o});var c=r.tokenInfo;n.logger.info("zsc.cps.1 update token success"),c&&c.report&&(a.qualityHandler.qualityUpload=c.report,a.qualityHandler.qualityUploadInterval=c.report_interval),a.signal=r.signal,n.server=o,n.playStream(e,t),n.getTokenSuccess()}else n.logger.error("zsc.cps.1 checkplayer don't exist")}else n.logger.error("zsc.cps.1 after connect player don't exist")}),(function(e,t){var o=n.playerList[e];if(o){var s=i({},y.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+t,1008===t&&(s=y.errorCodeList.TOKEN_EXPIRED),n.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoPlayServerConnect.event,par:e},{result:t,error:s.code,message:s.message});var a=1008==t;20010===t&&(a=!0,s="unified_l3"===r?y.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL:y.errorCodeList.PLAYER_SESSION_REQUEST_FAIL),o.retryStreamHandler.playStateHandle(f.ENUM_PLAY_STATE_UPDATE.error,e,s,a)}else n.logger.error("zsc.cps.1 after connect player don't exist")})),!0},t.prototype.playStream=function(e,t){var r=this.playerList[e].player;r?(this.logger.info("zsc.ps.1 call success"),this.setStreamGwNode(r,!1),r.startPlay(e,t,this.playerList[e].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},t.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var e=0;for(var t in this.signalList)e+=1;this.heartbeatTimer&&0==e&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.removeStreamFromSignal=function(e,t){this.logger.info("zsc.rsfs.0 call "+e+" "+t);var r=[];for(var n in this.signalList){var o=this.signalList[n];if(e){for(var i=0;i<o.publishConnectedList.length;i++)if(o.publishConnectedList[i]===t){this.logger.debug("zsc.rsfs.0 found from publish"),o.publishConnectedList.splice(i,1);break}for(i=0;i<o.publishWaitingList.length;i++)if(o.publishWaitingList[i].streamID===t){this.logger.debug("zsc.rsfs.0 found from publish"),o.publishWaitingList.splice(i,1);break}}else{for(var s=0;s<o.playConnectedList.length;s++)if(o.playConnectedList[s]===t){this.logger.debug("zsc.rsfs.0 found from play"),o.playConnectedList.splice(s,1);break}for(s=0;s<o.playWaitingList.length;s++)if(o.playWaitingList[s].streamID===t){this.logger.debug("zsc.rsfs.0 found from play"),o.playWaitingList.splice(s,1);break}}0==o.publishConnectedList.length&&0==o.playConnectedList.length&&0==o.publishWaitingList.length&&0==o.playWaitingList.length&&(o.signal.disconnectServer(),r.push(n))}for(var a=0;a<r.length;a++)delete this.signalList[r[a]],this.server==r[a]&&(this.server="")},t.prototype.stopPlayingStream=function(e,t,r){var n=this.playerList[e];if(n){var o=n.retryStreamHandler,i=n.cdnPlayer;for(var s in o&&(o.stopMaxTime(),o.invalid()),this.signalList)this.signalList[s].playWaitingList=this.signalList[s].playWaitingList.filter((function(t){return t.streamID!==e}));if(n.playMode==u.PlayMode.CDN&&i&&(this.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:e}),i.stop()),-1==e.indexOf("zegoprobe-")&&n.playMode==u.PlayMode.L3&&this.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskL3Play.event,par:e}),delete this.playerList[e],n.player){n.player.stopPlay(t,r);var a=n.player.rtcViewer;a&&a.stop()}this.removeStreamFromSignal(!1,e),this.stopSignalHeartbeat(),this.stateCenter.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[e],delete this.playErrorCallBackList[e],this.logger.debug("zsc.sps.1.1 call success")}else this.logger.info("zsc.sps.1.1 player don't exist")},t.prototype.reset=function(e,t,r){var n,o,i,s;for(var a in this.logger.info("zsc.rs call "+e+" "+t+" "+r),this.publisherList)if(this.publisherList[a].room.roomID==e||!e){0===t?this.publisherList[a].publisher.stopReason="Logout":1002031==t&&(this.publisherList[a].publisher.stopReason="ReachMaxAVRetryTime");var l=1002031==t?w.error.kPublishRetryTimeoutError:{code:t||0,message:""};null===(o=null===(n=this.publisherList[a].room)||void 0===n?void 0:n.streamHandler)||void 0===o||o.onPublishStateUpdate(f.ENUM_PUBLISH_STATE_UPDATE.error,a,l),r&&this.stateCenter.waitPublishStreamList[a]?this.stateCenter.waitPublishStreamList[a].retryStart=!0:r||delete this.stateCenter.waitPublishStreamList[a],this.stopPublishingStream(a,l)}var c=function(n){u.playerList[n].player.stopReason=0===t?"Logout":"ReachMaxAVRetryTime";var o=u.playerList[n].room;if(r&&(null===(s=null===(i=u.playerList[n])||void 0===i?void 0:i.player)||void 0===s?void 0:s.state)<=f.ENUM_PLAY_STATE.playing){var a=u.playerList[n],l=null==a?void 0:a.player;u.stopedPlayerList[n]={streamID:n,playStream:l.playStream,roomID:a.room.roomID,playOption:a.playOption,state:l.state,sucCallBack:(null==l?void 0:l.state)!==f.ENUM_PLAY_STATE.playing?u.playSuccessCallBackList[n]:void 0,errCallBack:(null==l?void 0:l.state)!==f.ENUM_PLAY_STATE.playing?u.playErrorCallBackList[n]:void 0}}if(o.roomID!=e||!o.streamList.find((function(e){return e.stream_id==n}))&&1!=u.stateCenter.roomList.length){if(o.roomID==e&&u.stateCenter.roomList.length>1){var c=u.stateCenter.roomList.find((function(t){return t.roomID!==e}));c?u.playerList[n].room=c:(u.stopPlayingStream(n),u.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.error,n,R.error.kPlayRetryTimeoutError))}}else{var d=1002031==t?R.error.kPlayRetryTimeoutError:{code:t||0,message:""};u.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.error,n,d),u.stopPlayingStream(n,d)}},u=this;for(var d in this.playerList)c(d);0==Object.keys(this.publisherList).length&&0==Object.keys(this.playerList).length&&(this.probeList={}),this.waitPublishList=[],this.waitPlayList=[],this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=0,this.qualityUploadTimestamp=0,this.l3DetectedTimestamp=0,this.l3DetectResult=0,this.isL3Fallback=!1,this.cdnProtocolBadTimestamp=0,this.l3ProtocolBadTimestamp=0,this.lastHandleCDNBadTimestamp=0,this.lastHandleL3BadTimestamp=0,this.cdnProtocolBadTime=0,this.l3ProtocolBadTime=0,this.qualityWebsocket&&(this.qualityWebsocket.close(),this.qualityWebsocket=void 0),this.logger.info("zsc.rs call success")},t.prototype.startSignalHeartbeat=function(){var e=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout((function(){e.checkSignalHeartbeat()}),this.heartbeatInterval)},t.prototype.checkSignalHeartbeat=function(){for(var e in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[e].signal&&this.signalList[e].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},t.prototype.getChargeInfos=function(){this.logger.debug("zsc.cci.0 call");var e={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};for(var t in this.shouldReportNoPlaying&&(e.no_playing=1),this.chargeInfos.timestamp_begin=(new Date).getTime(),this.publisherList){this.publisherList[t].publisher.state===f.ENUM_PUBLISH_STATE.publishing&&(e.is_publishing=1);break}e.play_max_audio_bitrate=0;var r=function(t){var r={width:n.playerList[t].player.qualityHandler.lastPlayStats.frameWidth,height:n.playerList[t].player.qualityHandler.lastPlayStats.frameHeight};if(!r.height||!r.width){var o=n.playerList[t].player.playStream;r=o&&0!==o.getVideoTracks().length?o.getVideoTracks()[0].getSettings():void 0}var i={video_width:r&&r.width?r.width:0,video_height:r&&r.height?r.height:0,count:1};if(!e.play_stream_resolution_infos.find((function(e){return e.video_width==i.video_width&&e.video_height==i.video_height&&(e.count++,!0)}))&&e.play_stream_resolution_infos.push(i),0==i.video_width&&0==i.video_height){var s=1e3*n.playerList[t].player.qualityHandler.lastPlayStats.audioBitrate;s>e.play_max_audio_bitrate&&(e.play_max_audio_bitrate=s)}},n=this;for(var o in this.playerList)r(o);return 0!==e.play_stream_resolution_infos.length&&this.shouldReportNoPlaying&&(e.no_playing=0),0!==this.chargeInfos.timestamp_end?(this.chargeInfos.timestamp_diff=this.chargeInfos.timestamp_begin-this.chargeInfos.timestamp_end,this.chargeInfos.timestamp_diff_flag=1):(this.chargeInfos.timestamp_diff=0,this.chargeInfos.timestamp_diff_flag=0),this.chargeInfos.timestamp_end=(new Date).getTime(),this.chargeInfos.infos=[e],this.chargeInfos},t.prototype.getPublisher=function(e){var t=null;if("string"==typeof e&&this.publisherList[e]&&this.publisherList[e].publisher)t=this.publisherList[e].publisher;else if(e instanceof MediaStream){var r=this.checkPublish(e);r&&(t=null==r?void 0:r.publisher)}return t},t.prototype.getPreviewer=function(e){var t,r=null;return"string"==typeof e&&this.publisherList[e]&&this.publisherList[e].publisher?r=null===(t=this.publisherList[e].publisher)||void 0===t?void 0:t.previewer:e instanceof MediaStream&&(r=this.checkPreview(e)),r},t.prototype.checkPlayer=function(e){var t=Object.values(this.playerList).find((function(t){return t.player.playStream===e}));return(null==t?void 0:t.player)||null},t.prototype.checkPreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t].localStream===e)return this.previewStreamList[t];return null},t.prototype.checkPublish=function(e){for(var t in this.publisherList)if(this.publisherList[t].localStream==e)return this.publisherList[t];return null},t.prototype.getPublishList=function(e){var t=[];for(var r in this.publisherList)this.publisherList[r].localStream==e&&t.push(this.publisherList[r]);return t},t.prototype.removePreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t]===e){this.previewStreamList.splice(t,1);break}},t.prototype.onPlayerStreamUrlUpdate=function(e,t,r){},t.prototype.getScreenConstrains=function(e){var t={};if("boolean"==typeof e&&e)t={audio:!1,video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};else if("object"==typeof e){switch(e.videoQuality){case 1:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate};break;case 3:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate};break;case 4:t={video:{frameRate:e.frameRate,width:e.width,height:e.height},bitRate:e.bitRate};break;case 2:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};break;default:t={video:{frameRate:f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate},bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||f.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate}}t.audio="boolean"==typeof e.audio&&e.audio,t=i(i(i({},e),t),{width:void 0,height:void 0,frameRate:void 0})}return t},t.prototype.createScreenPreviewer=function(e,t){var r=new d.ZegoPreview(this.logger,this.ac,this.stateCenter,this,"screen"),n=e.getVideoTracks()[0].getSettings();return this.previewStreamList.push(r),r.mediaStreamConfig=t,e.getAudioTracks().length>0&&(r.audioTrack=e.getAudioTracks()[0]),r.localStream=e,r.videoInfo={width:n.width,height:n.height,frameRate:n.frameRate||15,bitRate:(null==t?void 0:t.bitRate)||1e3,startBitrate:(null==t?void 0:t.startBitrate)||this.stateCenter.settingConfig.getSetting("bitrate_mode"),minBitrate:null==t?void 0:t.minBitrate,keyFrameInterval:null==t?void 0:t.keyFrameInterval},r.previewSuc=!0,r.previewType="screen",(null==t?void 0:t.videoOptimizationMode)&&this.setVideoTrackContentHint(e,null==t?void 0:t.videoOptimizationMode),r},t.prototype.setSoundLevelDelegate=function(e,t,r){void 0===r&&(r=!1),this.logger.info("zsc.ssd.0 call"),t&&this.setSoundLevelInterval(t),this.soundLevelDelegate=e,this.enableInBackground=r,this.enableSoundLevelProcessor(e),e?(this.logger.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.logger.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},t.prototype.setSoundLevelInterval=function(e){var t,r;if(e&&this.soundLevelDelegate){for(var n in this.soundLevelInterval=e,this.previewStreamList)null===(t=this.previewStreamList[n].soundMeterWorklet)||void 0===t||t.setInterval(e);for(var n in this.playerList)null===(r=this.playerList[n].player.soundMeterWorklet)||void 0===r||r.setInterval(e)}},t.prototype.enableSoundLevelProcessor=function(e){for(var t in this.previewStreamList){var r=this.previewStreamList[t];e?r.startSoundLevel():r.stopSoundLevel()}for(var t in this.playerList){var n=this.playerList[t].player;e?n.startSoundLevel():n.stopSoundLevel()}},Object.defineProperty(t.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),t.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},t.prototype.startSoundLevel=function(){var e=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout((function(){e.startSoundLevel()}),this.soundLevelInterval))},t.prototype.checkSoundLevel=function(){this.logger.debug("zsc.csl.0 call");var e=[];for(var t in this.publisherList){var r=0,n=this.publisherList[t].publisher,o=n.previewer;o&&(r=o.soundLevel),e.push({streamID:this.getBackStreamId(n.streamId),soundLevel:r,type:"push"})}for(var t in this.playerList){var i=this.playerList[t].player;i.streamId&&!i.isProbe&&e.push({streamID:this.getBackStreamId(i.streamId),soundLevel:i.soundLevel,type:"pull"})}this.soundLevelDelegate&&e.length>0&&this.onSoundLevelUpdate(e)},t.prototype.checkMicSoundLevel=function(){this.microphonePreviewStream&&this.soundLevelDelegate&&this.onMicSoundLevelUpdate(this.microphonePreviewStream.soundLevel)},t.prototype.getBackStreamId=function(e){return this.testEnvironment&&e?e.replace("zegotest-"+this.appid+"-",""):e},t.prototype.onSoundLevelUpdate=function(e){},t.prototype.onMicSoundLevelUpdate=function(e){},t.prototype.stopSoundLevel=function(){this.soundLevelTimer&&!this.hasRemoteStream&&0===this.previewStreamList.length&&(this.logger.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},t.prototype.startNetProbe=function(e,t,r,n){var o=this,i=this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},b.ZegoRTCLogEvent.kZegoNetProbe.event);if(this.isPeer)if(n){var s="zegoprobe-"+(new Date).getTime();this.setPlayStateStart(s);var a=this.playerList[s]?this.playerList[s].player:null;if(!a)return;a.isProbe=!0,this.playerList[s].serverUrls=["unified_l3"],this.startPlayingStream(s,!0,(function(){})),this.playerList[s].player.isProbeByDG=!0,a.onCalNetQualityResult=function(e,t){o.logger.info("zc.ocnqr.0 l3 detect "+e+" "+t),o.stopPlayingStream(s),o.l3DetectResult=t,o.l3DetectedTimestamp=(new Date).getTime()}}else{var l=!0;r&&0==r.length&&t&&(l=!1,r=e?this.publisherList[t.streamId].serverUrls:this.playerList[t.streamId].serverUrls),r&&t&&r.forEach((function(n){if(!(o.probeList[n]&&o.probeList[n].timeStamp+9e5<(new Date).getTime()||t.probeState==f.ENUM_PROBE_STATE.probed)){var s="zegoprobe-"+(new Date).getTime();o.setPlayStateStart(s);var a=o.playerList[s]?o.playerList[s].player:null;a&&(a.isProbe=!0,l?(a.gwNode=n,a.signal=t.signal,a.startPlay(s,(function(){}))):o.connectPlayServer(s,(function(){}),n),a.onCalNetQualityResult=function(l,c){o.logger.info("zc.ocnqr.0 "+a.gwNode+" "+l+" "+c),o.probeList[n]={result:l,netQuality:c,timeStamp:(new Date).getTime()};var u=Object.keys(o.probeList),d=r&&r.every((function(e){return u.findIndex((function(t){return t===e}))>=0}));t.gwNode==n||t.signal.server==n?t.netQuality=c:o.handleCalNetQualityResult(e,l,c,t,n,d),o.stopPlayingStream(s),i.setAttributes({net_quality:b.ZegoRTCLogEvent.kZegoNetProbe.net_quality(parseInt(t.netQuality+"")),node_list:b.ZegoRTCLogEvent.kZegoNetProbe.node_list(r)}),i.end()})}}))}else this.stateCenter.reporter.setError(i,{code:-1,message:"not support peer"})},t.prototype.handleCalNetQualityResult=function(e,t,r,n,o,i){if(this.logger.info("zc.hcqr.0 "+n.netQuality+" probe "+r+" "+o),0===t){var s=this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZMInitSetting.event},{key:""},b.ZegoRTCLogEvent.kZegoNetProbeResult.event),a=!1;r>Math.max(75,n.netQuality+20)&&n.probeState==f.ENUM_PROBE_STATE.tryProbe?(a=!0,this.retryStream(n,e,o),n.probeState=f.ENUM_PROBE_STATE.probed):(a=!1,n.probeState==f.ENUM_PROBE_STATE.tryProbe&&i&&n.netProbeToReDispatch(),this.logger.warn("zc.hcqr.0 "+n.netQuality+" probe "+r+" "+o));var l=b.ZegoRTCLogEvent.kZegoNetProbeResult;s.setAttributes({is_switch:l.is_switch(a),is_publish:l.is_publish(e),stream_id:l.stream_id(n.streamId),result:l.result(t),node:l.node(o),net_quality:l.net_quality(parseInt(n.netQuality+"")),probe_net_quality:l.probe_net_quality(parseInt(r+""))}),s.end()}},t.prototype.retryStream=function(e,t,r){if(t){var n=e,o=n.streamId,i=n.localStream,s=n.videoInfo,a=n.mediaStreamConfig,l=n.publishOption;0!=n.sessionId&&n.signal&&n.shouldSendCloseSession()&&(n.signal.sendCloseSession(this.stateCenter.getSeq(),n.sessionId,1),n.signal.removeSession(n.sessionId),n.closeSessionSignal=!0),n.resetPublish(),this.publisherList[o].isCenterNode?(n.gwNode=r,n.startPublish(o,i,s,a,l)):(n.isExternal=!1,this.connectPublishServer(o,r))}else{var c=e,u=(o=c.streamId,c.getRemoteStreamSuc),d=c.playOption;0!=c.sessionId&&c.signal&&c.shouldSendCloseSession()&&(c.signal.sendCloseSession(this.stateCenter.getSeq(),c.sessionId,1),c.signal.removeSession(c.sessionId),c.closeSessionSignal=!0),c.resetPlay(),this.playerList[o].isCenterNode?(c.gwNode=r,c.startPlay(o,u,d)):(c.isExternal=!1,this.connectPlayServer(o,u,r))}},t.prototype.getRoomByStreamID=function(e){return this.publisherList[e]?this.publisherList[e].room:this.playerList[e]?this.playerList[e].room:void 0},t.prototype.setVideoTrackContentHint=function(e,t){if("string"==typeof t){var r=t.toLowerCase();if(["default","motion","detail","text"].includes(r)){var n=e.getVideoTracks()[0];n?"contentHint"in n?(this.logger.info("zc.svtch "+r),n.contentHint="default"==r?"":r):this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.logger.warn("zc.svtch video track no found")}else this.logger.warn("zc.svtch videoOptimizationMode wrong")}else this.logger.warn("zc.svtch videoOptimizationMode type wrong")},t.prototype.getPlayRoom=function(e){return this.stateCenter.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},t.prototype.getQualityHead=function(e,t){var r=new Uint8Array(12);r[0]=0,r[1]=12,r[2]=e.length>>8,r[3]=e.length-(r[2]<<8),r[4]=t.length>>24,r[5]=t.length-(r[4]<<24)>>16,r[6]=t.length-(r[4]<<24)-(r[5]<<16)>>8,r[7]=t.length-(r[4]<<24)-(r[5]<<16)-(r[6]<<8);var n=Math.ceil((new Date).getTime()/1e3);return r[8]=n>>24,r[9]=n-(r[8]<<24)>>16,r[10]=n-(r[8]<<24)-(r[9]<<16)>>8,r[11]=n-(r[8]<<24)-(r[9]<<16)-(r[10]<<8),r},t.prototype.streamQualityUpload=function(){var e,t=this,r="number"==typeof this.stateCenter.clientTimeOffset?this.stateCenter.clientTimeOffset:C.default.MAX_VALUE;if(Object.keys(this.publisherList).length>0||Object.keys(this.playerList).length>0){var n={version:14,timestamp:Math.round(this.qualityHeadTimestamp/1e3),event:0,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,biz_type:1,time_offset:r,os_type:T.ClientUtil.getOsType(),sdk_version:f.PROTO_VERSION,scenario:this.stateCenter.scenario},o={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos,client_type:2},i=E.logreport.SpeedLogHead.create(n),l=E.logreport.QualityEvent.create(o),c=E.logreport.SpeedLogHead.encode(i).finish(),u=E.logreport.QualityEvent.encode(l).finish(),d=this.getQualityHead(c,u),h=new Uint8Array(12+c.length+u.length);h.set(d),h.set(c,12),h.set(u,12+c.length);var p=null===(e=this.logger.url)||void 0===e?void 0:e.split("/")[2];if(!p)return;var g=function(){return new Promise((function(e){if(t.qualityWebsocket&&2!=t.qualityWebsocket.readyState&&3!=t.qualityWebsocket.readyState)1==t.qualityWebsocket.readyState&&e(t.qualityWebsocket);else{var r=t.stateCenter.appid,n=t.stateCenter.idName,o=t.stateCenter.roomList[0].token,i="wss://".concat(p,"/ws/report/stream?appid=").concat(r,"&product=rtc&token=").concat(encodeURIComponent(o),"&id_name=").concat(n);t.qualityWebsocket=new WebSocket(i),t.qualityWebsocket.onopen=function(){t.qualityWebsocket&&e(t.qualityWebsocket)},t.qualityWebsocket.onclose=function(){t.logger.info(S.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" speed log socket close")}}}))};g().then((function(e){var r=Date.now()%1e4,n=!1;e.onmessage=function(o){(o.data+"").includes("success")&&(t.logger.info(S.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" quality (".concat(r,") upload success")),n=!0),e.onmessage=null},setTimeout((function(){return s(t,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?[3,2]:[4,g()];case 1:e.sent().send(h),this.logger.info(S.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" retry upload quality (".concat(r,"), length: ")+h.length+"."),e.label=2;case 2:return[2]}}))}))}),3e3),e.send(h),t.logger.info(S.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY+" upload quality (".concat(r,"), length: ")+h.length+".")}))}},t.prototype.updateQuality=function(e,t){var r=(new Date).getTime(),n=JSON.stringify(this.publishQualityInfos).length+JSON.stringify(this.playQualityInfos).length;0!==this.qualityUploadTimestamp&&r-this.qualityUploadTimestamp>6e4||n>8e3?(this.streamQualityUpload(),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=(new Date).getTime(),this.qualityUploadTimestamp=r):0==this.qualityHeadTimestamp&&(this.qualityHeadTimestamp=(new Date).getTime(),this.qualityUploadTimestamp=r),0==e?this.handlePublishQualityData(t):this.handlePlayQualityData(t)},t.prototype.handlePublishQualityData=function(e){var t=this.publishQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var r=this.getRoomByStreamID(e.stream_id);t={stream_id:e.stream_id,session_id:r?Number(r.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:r?r.roomID:"",evnvironment:1,room_session_id:r?Number(r.roomSessionID):0,resource_type:2},this.publishQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(1e3*e.currentRoundTripTime)||0,audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(e.audioLevel),sample_time_offset:Math.abs(Math.round((e.timeStamp-this.qualityHeadTimestamp)/10))})},t.prototype.handlePlayQualityData=function(e){var t,r=this.playQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!r){var n=this.getRoomByStreamID(e.stream_id),o=null===(t=this.playerList[e.stream_id])||void 0===t?void 0:t.player;r={stream_id:e.stream_id,session_id:n?Number(n.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:n?n.roomID:"",room_session_id:n?Number(n.roomSessionID):0,resource_type:0===(null==o?void 0:o.resourceMode)?2:3},this.playQualityInfos.push(r)}r.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:Math.round(1e3*e.currentRoundTripTime)||0,rendered_sound_level:Math.round(e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_offset:Math.abs(Math.round((e.timeStamp-this.qualityHeadTimestamp)/10)),peer_to_peer_plr:e.peerToPeerPacketLostRate,peer_to_peer_delay:e.peerToPeerDelay})},t.prototype.setIsPeer=function(e){this.isPeer=e,Object.values(this.publisherList).forEach((function(t){t.publisher.isPeer=e})),Object.values(this.playerList).forEach((function(t){t.player.isPeer=e}))},t.prototype.getCDNUrl=function(e,t){var r,n,o,i=((r={})[u.ResourceMode.RTC]=1,r[u.ResourceMode.CDN]=0,r[u.ResourceMode.L3]=2,r[u.ResourceMode.DG]=3,r),s=this.stateCenter.appConfig.media_config.play_config.resource_info;if(s.length){var a=s.find((function(e){return e.resource_type==i[t]}));if(a)for(var l=0;l<a.service_info.length;l++){var c=a.service_info[l],d=c.protocol,h=c.url_template.replace("{STREAM_NAME}",e);switch(d){case u.ProtocolType.FLV:n=h;break;case u.ProtocolType.HLS:o=h}}}return{flv:n,hls:o}},t.prototype.playCDN=function(e,t,r,n){var o,i=this;if(!t.CDNVideo)return this.logger.error("zsc.pc.1 cdn video no found"),n&&n(),!1;var s=this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:e},b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,!0),a="",l=null===(o=this.getPlayRoom(e))||void 0===o?void 0:o.streamList.find((function(t){return t.stream_id==e})),c=this.playerList[e],d=c.cdnPlayer,h=c.playOption.resourceMode;c.player.streamId=e,c.player.playOption=c.playOption,c.player.tryidx++,s.setAttributes({tryidx:b.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(c.player.tryidx),biz_product:b.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(h==u.ResourceMode.DG?1:0)});var p=l||{},g=p.urls_flv,m=p.urls_flv_plus,v=p.urls_m3u8,_=p.urls_m3u8_plus;if(!(l&&(h!=u.ResourceMode.CDN||g&&v)&&(h!=u.ResourceMode.DG||m&&_))){if(!this.stateCenter.appConfig||!h)return this.logger.error("zsc.pss.1 stream info no found"),n&&n(),!1;var y=this.getCDNUrl(e,h),E=y.flv,S=y.hls;h==u.ResourceMode.DG?(m=E?[E]:[],_=S?[S]:[]):(g=E?[E]:[],v=S?[S]:[])}if(!c||!d)return n&&n(),!1;h===u.ResourceMode.DG&&(c.player.useResourceTypes.push("cdn"),c.player.useResourceTypes=Array.from(new Set(c.player.useResourceTypes)));var C=h==u.ResourceMode.DG?m:g,T=h==u.ResourceMode.DG?_:v;if(d.isSupportFLV()&&(null==C?void 0:C.length)>0)a=C[0],s.setAttributes({protocol:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("flv")});else if(d.isSupportHLS()&&(null==T?void 0:T.length)>0)a=T[0],s.setAttributes({protocol:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("hls")});else if(!c.cdnUrl)return this.logger.error("zsc.pc.1 can not find cdn urls"),n&&n(),!1;if((a=a.replace("http://","https://"))!==c.cdnUrl&&c.player.tryidx>1){var w=this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},b.ZegoRTCLogEvent.kZegoTaskSrcChange.event);w.setAttributes({src:b.ZegoRTCLogEvent.kZegoTaskSrcChange.src(a),last_src:b.ZegoRTCLogEvent.kZegoTaskSrcChange.last_src(c.cdnUrl)}),w.end()}return c.cdnUrl=a||c.cdnUrl,s.setAttributes({url:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.url(c.cdnUrl)}),c.playMode==u.PlayMode.CDN&&(d.play(c.cdnUrl,t.CDNVideo),t.CDNVideo.srcObject=null,this.onPlayStateUpdate(f.ENUM_PLAY_STATE_UPDATE.start,e,{code:0,message:"success"},{isCDN:!0}),d.onQualityUpdate=function(r,n){n<=i.cdnBadQualityScore?i.handleQualityBad(e,t.resourceMode,u.PlayMode.CDN):(c.qualityBadCount=0,i.cdnProtocolBadTimestamp=0,i.lastHandleCDNBadTimestamp=0)},d.onComplete=function(){if(c.playMode==u.PlayMode.CDN&&c.player.state==f.ENUM_PLAY_STATE.playing)d.retry();else var e=c.player,t=e.initPoster,r=e.initVideoStyle,n=c.playOption.CDNVideo,o=setTimeout((function(){clearTimeout(o),n&&n.setAttribute("style",r),n&&n.setAttribute("poster",t)}),1e3)},d.onError=function(e){i.stateCenter.networkState==u.ENUM_NETWORK_STATE.offline&&(d.canRetry=!1),s.setAttributes({stop_reason:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.stop_reason(e)})},d.onCanplay=function(){if(c.player.state!=f.ENUM_PLAY_STATE.playing&&(c.player.state=f.ENUM_PLAY_STATE.playing,0==c.player.firstFrameTime)){c.player.firstFrameTime=Date.now()-c.player.beginTime;var r=i.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H,{key:b.ZegoRTCLogEvent.kZegoTaskPlayStart.event,par:e},{key:""},b.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.event);r.setAttributes({fft_consumed:b.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.fft_consumed(c.player.firstFrameTime),biz_product:b.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product(t.resourceMode==u.ResourceMode.DG?1:0)}),r.end()}},r&&r(),!0)},t.prototype.handleQualityBad=function(e,t,r){var n=this;if(this.logger.info("zsc.hqb.0 call ".concat(e," ").concat(t," ").concat(r)),t!==u.ResourceMode.DG)return!1;this.fetchL3CDNCloudSetting();var o=(new Date).getTime(),i=0;for(var s in this.playerList)this.playerList[s].isQualityBad&&i++;r==u.PlayMode.CDN?(this.cdnProtocolBadTime=this.cdnProtocolBadTime+(0==this.lastHandleCDNBadTimestamp?this.qualityInterval:o-this.lastHandleCDNBadTimestamp),(i>=this.protocolBadQualityCount||this.cdnProtocolBadTime>=this.protocolBadQualityTime)&&(this.cdnProtocolBadTime=0,this.cdnProtocolBadTimestamp=(new Date).getTime())):r==u.PlayMode.L3&&(this.l3ProtocolBadTime=this.l3ProtocolBadTime+(0==this.lastHandleL3BadTimestamp?this.qualityInterval:o-this.lastHandleL3BadTimestamp),(i>=this.protocolBadQualityCount||this.l3ProtocolBadTime>=this.protocolBadQualityTime)&&(this.l3ProtocolBadTime=0,this.l3ProtocolBadTimestamp=(new Date).getTime()));var a=!1,l=this.playerList[e],c=l.qualityBadCount?l.qualityBadCount*this.qualityInterval:0;if((r==u.PlayMode.L3&&c>this.l3BadQualityTime||r==u.PlayMode.CDN&&this.isL3Fallback&&c>this.fallbackInhibitionTime||r==u.PlayMode.CDN&&!this.isL3Fallback&&c>this.defaultBadQualityTime)&&(a=!0),a){for(var d in l.isQualityBad=!0,i=0,this.playerList)this.playerList[d].isQualityBad&&i++;if(r==u.PlayMode.CDN&&(0==this.l3DetectedTimestamp||this.l3DetectedTimestamp+this.probeExpiredTime<o&&this.l3DetectedTimestamp+this.minProbeInterval<o)&&(this.l3DetectedTimestamp=(new Date).getTime(),this.startNetProbe(!1,void 0,void 0,!0)),i/Object.keys(this.playerList).filter((function(e){return!e.includes("zegoprobe")})).length>this.multiPlaySwitchRate){this.logger.error("zsc.hqb.0 low quality "+(0==r?"CDN":"L3"));var h=Object.keys(this.playerList).filter((function(e){return!e.includes("zegoprobe")}));return h.forEach((function(e,t){var o=n.playerList[e];r==u.PlayMode.L3?(n.stopPlayingStream(e,void 0,!0),n.playerList[e]=o,o.isQualityBad=!1,o.playMode=u.PlayMode.CDN,o.qualityBadCount=0,n.playCDN(e,o.playOption,n.playSuccessCallBackList[e],n.playErrorCallBackList[e])):n.l3DetectResult>n.switchDetectResultScore&&(o.qualityBadCount=0,n.l3DetectedTimestamp=0,t==h.length-1&&(n.l3DetectResult=0),n.cdnSwitchL3(o))})),r==u.PlayMode.L3&&(this.isL3Fallback=!0),!0}}return"number"==typeof l.qualityBadCount?l.qualityBadCount++:l.qualityBadCount=1,!1},t.prototype.cdnSwitchL3=function(e){var t,r=this,n=e.streamID,o=this.stateCenter.useNetAgent;if(e.playMode=u.PlayMode.L3,this.stopPlayingStream(n,void 0,!0),this.playerList[n]=e,e.isQualityBad=!1,(null===(t=e.playOption)||void 0===t?void 0:t.resourceMode)==u.ResourceMode.DG&&(e.player.useResourceTypes.push("l3"),e.player.useResourceTypes=Array.from(new Set(e.player.useResourceTypes))),o)this.stateCenter.appConfig?(e.serverUrls=["unified_l3"],this.startPlayingStream(n,o,(function(t){var o;r.logger.info("zsc.cqi.1 switch l3 success");var i=e.player,s=i.initPoster,a=i.initVideoStyle,l=e.playOption.CDNVideo;if("safari"===r.stateCenter.browser&&l&&e.player._CDNPlayerClone){var c=l.parentElement;if(c){var u=document.createElement("style"),d=l.cloneNode(!0),h=Date.now().toString(16);u.innerText=".zego_cdn_video_".concat(h," .zego_clone_video_").concat(h,"{width:").concat(l.offsetWidth,"px;height:").concat(l.offsetHeight,"px;}")+".zego_cdn_video_".concat(h," .hide_").concat(h,"{display:none!important;width:0;height:0}"),document.head.append(u),d.classList.add("zego_clone_video_".concat(h)),d.id=e.streamID+"_clone",d.src="",d.srcObject=t,d.classList.add("hide_".concat(h)),l.before(d),c.classList.add("zego_cdn_video_".concat(h));var p=setTimeout((function(){clearTimeout(p),l.classList.add("hide_".concat(h)),d.classList.remove("hide_".concat(h))}),2e3),f=setTimeout((function(){var t;clearTimeout(f),e.playOption.CDNVideo=d,null===(t=e.cdnPlayer)||void 0===t||t.stop(),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:n}),c.classList.remove("zego_cdn_video_".concat(h)),l.classList.remove("zego_cdn_video_".concat(h)),d.classList.remove("zego_clone_video_".concat(h)),d.id=l.id,u.remove(),l.remove()}),4e3)}}else{null===(o=e.cdnPlayer)||void 0===o||o.stop(),r.stateCenter.reporter.spanEnd({key:b.ZegoRTCLogEvent.kZegoTaskCDNPlay.event,par:n});var g=setTimeout((function(){clearTimeout(g),l&&l.setAttribute("style",a),l&&l.setAttribute("poster",s)}),1e3);t&&(null==l||(l.srcObject=t))}}))):this.waitPlayList.push(n);else{var i=this.playerList[n].retryDispatchHandler;i.stopMaxTime(),i.invalid(),i.initStream(n,e.playOption,!1),i.startMaxTime(),i.active(0)}},t.prototype.fetchL3CDNCloudSetting=function(){this.switchScore=this.stateCenter.settingConfig.getSetting("switch_score")||60,this.defaultBadQualityTime=this.stateCenter.settingConfig.getSetting("default_bad_quality_time")||3e4,this.l3BadQualityTime=this.stateCenter.settingConfig.getSetting("l3_bad_quality_time")||1e4,this.switchDetectResultScore=this.stateCenter.settingConfig.getSetting("switch_detect_result_score")||60,this.cdnBadQualityScore=this.stateCenter.settingConfig.getSetting("cdn_bad_quality_score")||60,this.l3BadQualityScore=this.stateCenter.settingConfig.getSetting("l3_bad_quality_score")||60,this.multiPlaySwitchRate=this.stateCenter.settingConfig.getSetting("multi_play_switch_rate")||.8,this.protocolBadQualityCount=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_count")||3,this.protocolBadQualityTime=this.stateCenter.settingConfig.getSetting("protocol_bad_quality_time")||12e3,this.protocolQualityCacheExpiredTime=this.stateCenter.settingConfig.getSetting("protocol_quality_cache_expired_time\t")||18e4,this.fallbackInhibitionTime=this.stateCenter.settingConfig.getSetting("fallback_inhibition_time")||18e4,this.probeExpiredTime=this.stateCenter.settingConfig.getSetting("probe_expired_time")||3e4,this.minProbeInterval=this.stateCenter.settingConfig.getSetting("min_probe_interval")||15e3},t.prototype.setStreamGwNode=function(e,t){this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+e.streamId),this.checkCachedNodesUse(e,t),e.gwNodesTTL&&e.gwNodesTTL<(new Date).getTime()&&(this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" call "+e.streamId+" ttl timeout, reset gw"),e.gwNode="",e.gwNodeList=[],e.gwNodesTTL=0),this.gwNode&&(e.gwNode=this.gwNode);var r=this.stateCenter.settingConfig.getSetting("gw_nodes");r&&r instanceof Array&&r.length>0&&(this.logger.info(S.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(r)),e.gwNodeList=r,e.gwNode=e.gwNodeList[0]||e.gwNode),this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE+" end "+e.streamId+" "+e.gwNode)},t.prototype.getNodeIndex=function(e,t){var r="",n=t?"publish":"play";switch(e.cachedGwNodesMode){case c.NotReUse:break;case c.TheSameReUse:r=n+"_"+e.streamId;break;case c.DiffReUse:r=n;break;case c.AllReUse:r="stream"}return r},t.prototype.checkCachedNodesUse=function(e,t){if(this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" "+e.cachedGwNodesMode),e.isExternal)if(t&&e.isCustomCdn())this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" custom cdn");else if(this.stateCenter.useNetAgent&&this.stateCenter.isMultiOuter)this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" call "+e.streamId+" multi outer");else{var r=this.getNodeIndex(e,t);if(this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" "+r),r){var n=this.cachedGwNodesList[r];n&&n.gwNodesTTL>(new Date).getTime()&&(null==n?void 0:n.gwNodes.length)>0&&(this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" use cache gwnodes"),e.gwNodeList=n.gwNodes,e.gwNodesTTL=n.gwNodesTTL,e.gwNode=e.gwNodeList[0])}this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" end "+e.streamId+" "+e.gwNode)}else this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE+" "+e.streamId+" retry internal")},t.prototype.updateCachedGwNodesList=function(e,t,r,n){if(this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" call "+e.streamId),0===n)this.setCachedGwNodesMode(c.NotReUse);else if(n>0){var o=this.getNodeIndex(e,t);this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST+" "+e.streamId+" nodeIndex "+o),o&&(this.cachedGwNodesList[o]={gwNodes:r,gwNodesTTL:(new Date).getTime()+1e3*n})}},t.prototype.clearCachedGwNodesList=function(e,t){var r=this.getNodeIndex(e,t);this.logger.info(S.ZEGO_WEBRTC_ACTION.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST+" "+e.streamId+" nodeIndex "+r),r&&delete this.cachedGwNodesList[r]},t.prototype.setCachedGwNodesMode=function(e){this.cachedGwNodesMode=e,Object.values(this.publisherList).forEach((function(t){t.publisher.cachedGwNodesMode=e})),Object.values(this.playerList).forEach((function(t){t.player.cachedGwNodesMode=e}))},t.prototype.updateTimeOffsetInterval=function(){var e,t,r=this;"number"==typeof(null===(e=this.rtm)||void 0===e?void 0:e.netAgent.timeOffset)&&(this.stateCenter.clientTimeOffset=null===(t=this.rtm)||void 0===t?void 0:t.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout((function(){r.updateTimeOffsetInterval()}),9e5)},t}(p.ZegoStreamCenter);t.ZegoStreamCenterWeb=k},2990:function(e,t,r){"use strict";var n,o=r(2100),i=o.Writer,s=o.util,a=o.roots.default||(o.roots.default={});a.logreport=((n={}).SpeedLogHead=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.version=0,e.prototype.signature=s.newBuffer([]),e.prototype.timestamp=0,e.prototype.event=0,e.prototype.app_id=0,e.prototype.user_id="",e.prototype.biz_type=0,e.prototype.device_id="",e.prototype.lite_sign=s.newBuffer([]),e.prototype.token=s.newBuffer([]),e.prototype.os_type="",e.prototype.sdk_version="",e.prototype.time_offset=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.scenario=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint32(e.timestamp),null!=e.event&&Object.hasOwnProperty.call(e,"event")&&t.uint32(32).uint32(e.event),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(40).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(50).string(e.user_id),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(56).uint32(e.biz_type),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(66).string(e.device_id),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).bytes(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).bytes(e.token),null!=e.os_type&&Object.hasOwnProperty.call(e,"os_type")&&t.uint32(90).string(e.os_type),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(98).string(e.sdk_version),null!=e.time_offset&&Object.hasOwnProperty.call(e,"time_offset")&&t.uint32(104).int64(e.time_offset),null!=e.scenario&&Object.hasOwnProperty.call(e,"scenario")&&t.uint32(112).uint32(e.scenario),t},e.ProtoVersion=(t={},(r=Object.create(t))[t[0]="PROTO_VERSION"]=0,r[t[1]="PROTO_VERSION1"]=1,r[t[2]="PROTO_VERSION2"]=2,r[t[3]="PROTO_VERSION3"]=3,r[t[4]="PROTO_VERSION4"]=4,r[t[5]="PROTO_VERSION5"]=5,r[t[6]="PROTO_VERSION6"]=6,r[t[7]="PROTO_VERSION7"]=7,r[t[8]="PROTO_VERSION8"]=8,r[t[9]="PROTO_VERSION9"]=9,r[t[10]="PROTO_VERSION10"]=10,r[t[11]="PROTO_VERSION11"]=11,r[t[12]="PROTO_VERSION12"]=12,r[t[13]="PROTO_VERSION13"]=13,r[t[14]="PROTO_VERSION14"]=14,r),e.Event=function(){var e={},t=Object.create(e);return t[e[0]="QUALITY_EVENT"]=0,t[e[100]="NO_BILLING_EVENT"]=100,t[e[300]="DETECT_QUALITY_EVENT"]=300,t}(),e.BizType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="LIVE"]=1,t[e[2]="RTV"]=2,t}(),e.ZegoScenario=function(){var e={},t=Object.create(e);return t[e[0]="ZEGO_SCENARIO_GENERAL"]=0,t[e[1]="ZEGO_SCENARIO_COMMUNICATION"]=1,t[e[2]="ZEGO_SCENARIO_LIVE"]=2,t[e[3]="ZEGO_SCENARIO_DEFAULT"]=3,t[e[4]="ZEGO_SCENARIO_STANDARD_VIDEO_CALL"]=4,t[e[5]="ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL"]=5,t[e[6]="ZEGO_SCENARIO_STANDARD_CHATROOM"]=6,t[e[7]="ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM"]=7,t[e[8]="ZEGO_SCENARIO_BROADCAST"]=8,t[e[9]="ZEGO_SCENARIO_KARAOKE"]=9,t[e[99]="ZEGO_SCENARIO_UNDEFINED"]=99,t}(),e}(),n.SpeedLogRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},e}(),n.QualityEvent=function(){function e(e){if(this.publish_quality_infos=[],this.play_quality_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.hardware_infos=null,e.prototype.publish_quality_infos=s.emptyArray,e.prototype.play_quality_infos=s.emptyArray,e.prototype.network_type=0,e.prototype.charge_infos=null,e.prototype.server_time=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.client_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.hardware_infos&&Object.hasOwnProperty.call(e,"hardware_infos")&&a.logreport.HardwareInfos.encode(e.hardware_infos,t.uint32(10).fork()).ldelim(),null!=e.publish_quality_infos&&e.publish_quality_infos.length)for(var r=0;r<e.publish_quality_infos.length;++r)a.logreport.PublishQualityInfos.encode(e.publish_quality_infos[r],t.uint32(18).fork()).ldelim();if(null!=e.play_quality_infos&&e.play_quality_infos.length)for(r=0;r<e.play_quality_infos.length;++r)a.logreport.PlayQualityInfos.encode(e.play_quality_infos[r],t.uint32(26).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(32).uint32(e.network_type),null!=e.charge_infos&&Object.hasOwnProperty.call(e,"charge_infos")&&a.logreport.ChargeInfos.encode(e.charge_infos,t.uint32(42).fork()).ldelim(),null!=e.server_time&&Object.hasOwnProperty.call(e,"server_time")&&t.uint32(48).int64(e.server_time),null!=e.client_type&&Object.hasOwnProperty.call(e,"client_type")&&t.uint32(800).uint32(e.client_type),t},e.ResourceType=(t={},(r=Object.create(t))[t[0]="UNKNOWN"]=0,r[t[1]="CDN"]=1,r[t[2]="RTC"]=2,r[t[3]="L3"]=3,r[t[4]="P2P"]=4,r),e}(),n.HardwareInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.infos=s.emptyArray,e.prototype.sys_mem_total=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.HardwareInfo.encode(e.infos[r],t.uint32(26).fork()).ldelim();return null!=e.sys_mem_total&&Object.hasOwnProperty.call(e,"sys_mem_total")&&t.uint32(32).uint32(e.sys_mem_total),t},e}(),n.PublishQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=s.emptyArray,e.prototype.room_id="",e.prototype.evnvironment=0,e.prototype.ap="",e.prototype.session="",e.prototype.room_session_id=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.prototype.setting_video_bitrate=0,e.prototype.setting_audio_bitrate=0,e.prototype.setting_video_fps=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.PublishQualityInfo.encode(e.infos[r],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.evnvironment&&Object.hasOwnProperty.call(e,"evnvironment")&&t.uint32(104).uint32(e.evnvironment),null!=e.ap&&Object.hasOwnProperty.call(e,"ap")&&t.uint32(114).string(e.ap),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(122).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(128).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(136).uint32(e.protocol_type),null!=e.setting_video_bitrate&&Object.hasOwnProperty.call(e,"setting_video_bitrate")&&t.uint32(144).uint32(e.setting_video_bitrate),null!=e.setting_audio_bitrate&&Object.hasOwnProperty.call(e,"setting_audio_bitrate")&&t.uint32(152).uint32(e.setting_audio_bitrate),null!=e.setting_video_fps&&Object.hasOwnProperty.call(e,"setting_video_fps")&&t.uint32(160).uint32(e.setting_video_fps),t},e}(),n.PlayQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=s.emptyArray,e.prototype.room_id="",e.prototype.session="",e.prototype.room_session_id=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.prototype.product=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.PlayQualityInfo.encode(e.infos[r],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(112).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(120).uint32(e.protocol_type),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(128).uint32(e.product),t},e}(),n.ChargeInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.timestamp_diff_flag=0,e.prototype.timestamp_diff=0,e.prototype.room_id="",e.prototype.infos=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.timestamp_diff_flag&&Object.hasOwnProperty.call(e,"timestamp_diff_flag")&&t.uint32(24).uint32(e.timestamp_diff_flag),null!=e.timestamp_diff&&Object.hasOwnProperty.call(e,"timestamp_diff")&&t.uint32(32).uint32(e.timestamp_diff),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(42).string(e.room_id),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.ChargeInfo.encode(e.infos[r],t.uint32(802).fork()).ldelim();return t},e}(),n.HardwareInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sys_cpu_used=0,e.prototype.app_cpu_used=0,e.prototype.sys_mem_used=0,e.prototype.app_mem_used=0,e.prototype.sample_time_offset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.sys_cpu_used&&Object.hasOwnProperty.call(e,"sys_cpu_used")&&t.uint32(8).uint32(e.sys_cpu_used),null!=e.app_cpu_used&&Object.hasOwnProperty.call(e,"app_cpu_used")&&t.uint32(16).uint32(e.app_cpu_used),null!=e.sys_mem_used&&Object.hasOwnProperty.call(e,"sys_mem_used")&&t.uint32(24).uint32(e.sys_mem_used),null!=e.app_mem_used&&Object.hasOwnProperty.call(e,"app_mem_used")&&t.uint32(32).uint32(e.app_mem_used),null!=e.sample_time_offset&&Object.hasOwnProperty.call(e,"sample_time_offset")&&t.uint32(40).uint32(e.sample_time_offset),t},e}(),n.PublishQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_capture_fps=0,e.prototype.video_network_fps=0,e.prototype.uplink_plr=0,e.prototype.rtt=0,e.prototype.audio_network_fps=0,e.prototype.captured_sound_level=0,e.prototype.quality=0,e.prototype.sample_time_offset=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_capture_fps&&Object.hasOwnProperty.call(e,"video_capture_fps")&&t.uint32(24).uint32(e.video_capture_fps),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(32).uint32(e.video_network_fps),null!=e.uplink_plr&&Object.hasOwnProperty.call(e,"uplink_plr")&&t.uint32(40).uint32(e.uplink_plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(48).uint32(e.rtt),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(56).uint32(e.audio_network_fps),null!=e.captured_sound_level&&Object.hasOwnProperty.call(e,"captured_sound_level")&&t.uint32(64).uint32(e.captured_sound_level),null!=e.quality&&Object.hasOwnProperty.call(e,"quality")&&t.uint32(72).uint32(e.quality),null!=e.sample_time_offset&&Object.hasOwnProperty.call(e,"sample_time_offset")&&t.uint32(80).uint32(e.sample_time_offset),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e}(),n.PlayQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_network_fps=0,e.prototype.audio_break_count=0,e.prototype.video_break_count=0,e.prototype.downlink_plr=0,e.prototype.peer_to_peer_plr=0,e.prototype.peer_to_peer_delay=0,e.prototype.audio_network_fps=0,e.prototype.audio_break_duration=0,e.prototype.video_break_duration=0,e.prototype.audio_break_rate=0,e.prototype.video_break_rate=0,e.prototype.audio_break_cancel=0,e.prototype.video_break_cancel=0,e.prototype.rtt=0,e.prototype.rendered_sound_level=0,e.prototype.audio_break_cancel_duration=0,e.prototype.video_break_cancel_duration=0,e.prototype.audio_decode_time=0,e.prototype.video_decode_time=0,e.prototype.real_sampling_interval=0,e.prototype.mos=0,e.prototype.audio_decode_fps=0,e.prototype.video_decode_fps=0,e.prototype.video_frames_decoded=0,e.prototype.video_frames_dropped=0,e.prototype.quality=0,e.prototype.evaluation_quality=0,e.prototype.break_stat_duration=0,e.prototype.sample_time_offset=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(24).uint32(e.video_network_fps),null!=e.audio_break_count&&Object.hasOwnProperty.call(e,"audio_break_count")&&t.uint32(32).uint32(e.audio_break_count),null!=e.video_break_count&&Object.hasOwnProperty.call(e,"video_break_count")&&t.uint32(40).uint32(e.video_break_count),null!=e.downlink_plr&&Object.hasOwnProperty.call(e,"downlink_plr")&&t.uint32(48).uint32(e.downlink_plr),null!=e.peer_to_peer_plr&&Object.hasOwnProperty.call(e,"peer_to_peer_plr")&&t.uint32(56).uint32(e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&Object.hasOwnProperty.call(e,"peer_to_peer_delay")&&t.uint32(64).uint32(e.peer_to_peer_delay),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(72).uint32(e.audio_network_fps),null!=e.audio_break_duration&&Object.hasOwnProperty.call(e,"audio_break_duration")&&t.uint32(80).uint32(e.audio_break_duration),null!=e.video_break_duration&&Object.hasOwnProperty.call(e,"video_break_duration")&&t.uint32(88).uint32(e.video_break_duration),null!=e.audio_break_rate&&Object.hasOwnProperty.call(e,"audio_break_rate")&&t.uint32(96).uint32(e.audio_break_rate),null!=e.video_break_rate&&Object.hasOwnProperty.call(e,"video_break_rate")&&t.uint32(104).uint32(e.video_break_rate),null!=e.audio_break_cancel&&Object.hasOwnProperty.call(e,"audio_break_cancel")&&t.uint32(112).uint32(e.audio_break_cancel),null!=e.video_break_cancel&&Object.hasOwnProperty.call(e,"video_break_cancel")&&t.uint32(120).uint32(e.video_break_cancel),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(128).uint32(e.rtt),null!=e.rendered_sound_level&&Object.hasOwnProperty.call(e,"rendered_sound_level")&&t.uint32(136).uint32(e.rendered_sound_level),null!=e.audio_break_cancel_duration&&Object.hasOwnProperty.call(e,"audio_break_cancel_duration")&&t.uint32(144).uint32(e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&Object.hasOwnProperty.call(e,"video_break_cancel_duration")&&t.uint32(152).uint32(e.video_break_cancel_duration),null!=e.audio_decode_time&&Object.hasOwnProperty.call(e,"audio_decode_time")&&t.uint32(160).uint32(e.audio_decode_time),null!=e.video_decode_time&&Object.hasOwnProperty.call(e,"video_decode_time")&&t.uint32(168).uint32(e.video_decode_time),null!=e.real_sampling_interval&&Object.hasOwnProperty.call(e,"real_sampling_interval")&&t.uint32(176).uint32(e.real_sampling_interval),null!=e.mos&&Object.hasOwnProperty.call(e,"mos")&&t.uint32(184).int32(e.mos),null!=e.audio_decode_fps&&Object.hasOwnProperty.call(e,"audio_decode_fps")&&t.uint32(192).uint32(e.audio_decode_fps),null!=e.video_decode_fps&&Object.hasOwnProperty.call(e,"video_decode_fps")&&t.uint32(200).uint32(e.video_decode_fps),null!=e.video_frames_decoded&&Object.hasOwnProperty.call(e,"video_frames_decoded")&&t.uint32(208).uint32(e.video_frames_decoded),null!=e.video_frames_dropped&&Object.hasOwnProperty.call(e,"video_frames_dropped")&&t.uint32(216).uint32(e.video_frames_dropped),null!=e.quality&&Object.hasOwnProperty.call(e,"quality")&&t.uint32(224).int32(e.quality),null!=e.evaluation_quality&&Object.hasOwnProperty.call(e,"evaluation_quality")&&t.uint32(232).int32(e.evaluation_quality),null!=e.break_stat_duration&&Object.hasOwnProperty.call(e,"break_stat_duration")&&t.uint32(240).uint32(e.break_stat_duration),null!=e.sample_time_offset&&Object.hasOwnProperty.call(e,"sample_time_offset")&&t.uint32(248).uint32(e.sample_time_offset),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e}(),n.ChargeInfo=function(){function e(e){if(this.play_stream_resolution_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.is_publishing=0,e.prototype.play_stream_resolution_infos=s.emptyArray,e.prototype.play_max_audio_bitrate=0,e.prototype.no_playing=0,e.prototype.p2p_charge_info=null,e.prototype.sample_time_offset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.is_publishing&&Object.hasOwnProperty.call(e,"is_publishing")&&t.uint32(8).uint32(e.is_publishing),null!=e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length)for(var r=0;r<e.play_stream_resolution_infos.length;++r)a.logreport.ResolutionInfo.encode(e.play_stream_resolution_infos[r],t.uint32(18).fork()).ldelim();return null!=e.play_max_audio_bitrate&&Object.hasOwnProperty.call(e,"play_max_audio_bitrate")&&t.uint32(24).uint32(e.play_max_audio_bitrate),null!=e.no_playing&&Object.hasOwnProperty.call(e,"no_playing")&&t.uint32(32).uint32(e.no_playing),null!=e.p2p_charge_info&&Object.hasOwnProperty.call(e,"p2p_charge_info")&&a.logreport.P2PChargeInfo.encode(e.p2p_charge_info,t.uint32(42).fork()).ldelim(),null!=e.sample_time_offset&&Object.hasOwnProperty.call(e,"sample_time_offset")&&t.uint32(48).uint32(e.sample_time_offset),t},e}(),n.ResolutionInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(8).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(16).uint32(e.video_height),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).uint32(e.count),t},e}(),n.P2PChargeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.media_inc=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.data_inc=s.Long?s.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.media_inc&&Object.hasOwnProperty.call(e,"media_inc")&&t.uint32(8).uint64(e.media_inc),null!=e.data_inc&&Object.hasOwnProperty.call(e,"data_inc")&&t.uint32(16).uint64(e.data_inc),t},e}(),n.NoBillingEvent=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.platform_info="",e.prototype.room_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.platform_info&&Object.hasOwnProperty.call(e,"platform_info")&&t.uint32(10).string(e.platform_info),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).string(e.room_id),t},e}(),n.DynQualityEvent=function(){function e(e){if(this.dyn_quality_infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq_no="",e.prototype.num=0,e.prototype.dyn_quality_infos=s.emptyArray,e.prototype.device_id="",e.prototype.latitude=0,e.prototype.longitude=0,e.prototype.country="",e.prototype.region="",e.prototype.city="",e.prototype.isp="",e.prototype.ve_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.seq_no&&Object.hasOwnProperty.call(e,"seq_no")&&t.uint32(10).string(e.seq_no),null!=e.num&&Object.hasOwnProperty.call(e,"num")&&t.uint32(16).uint32(e.num),null!=e.dyn_quality_infos&&e.dyn_quality_infos.length)for(var r=0;r<e.dyn_quality_infos.length;++r)a.logreport.DynQualityInfos.encode(e.dyn_quality_infos[r],t.uint32(26).fork()).ldelim();return null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(34).string(e.device_id),null!=e.latitude&&Object.hasOwnProperty.call(e,"latitude")&&t.uint32(40).uint32(e.latitude),null!=e.longitude&&Object.hasOwnProperty.call(e,"longitude")&&t.uint32(48).uint32(e.longitude),null!=e.country&&Object.hasOwnProperty.call(e,"country")&&t.uint32(58).string(e.country),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(66).string(e.region),null!=e.city&&Object.hasOwnProperty.call(e,"city")&&t.uint32(74).string(e.city),null!=e.isp&&Object.hasOwnProperty.call(e,"isp")&&t.uint32(82).string(e.isp),null!=e.ve_mode&&Object.hasOwnProperty.call(e,"ve_mode")&&t.uint32(88).uint32(e.ve_mode),t},e}(),n.DynQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timestamp_offset_begin=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.timestamp_offset_end=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.server_ip="",e.prototype.infos=s.emptyArray,e.prototype.network_type=0,e.prototype.stream_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint64(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint64(e.timestamp_offset_end),null!=e.server_ip&&Object.hasOwnProperty.call(e,"server_ip")&&t.uint32(26).string(e.server_ip),null!=e.infos&&e.infos.length)for(var r=0;r<e.infos.length;++r)a.logreport.DynQualityInfo.encode(e.infos[r],t.uint32(34).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(40).uint32(e.network_type),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(50).string(e.stream_id),t},e}(),n.DynQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.time=s.Long?s.Long.fromBits(0,0,!0):0,e.prototype.plr=0,e.prototype.rtt=0,e.prototype.score=0,e.prototype.sample_time=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),null!=e.plr&&Object.hasOwnProperty.call(e,"plr")&&t.uint32(16).uint32(e.plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(24).uint32(e.rtt),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(32).uint32(e.score),null!=e.sample_time&&Object.hasOwnProperty.call(e,"sample_time")&&t.uint32(40).uint32(e.sample_time),t},e}(),n),e.exports=a},6348:function(e,t,r){"use strict";var n,o=r(2100),i=o.Reader,s=o.Writer,a=o.util,l=o.roots.default||(o.roots.default={});l.webrtc_cmd=((n={}).MetadataPush=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.width=0,e.prototype.height=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(8).uint32(e.width),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(16).uint32(e.height),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.MetadataPush;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.width=e.uint32();break;case 2:n.height=e.uint32();break;default:e.skipType(7&o)}}return n},e}(),n.MetadataAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.MetadataAck;e.pos<r;){var o=e.uint32();o>>>3==1?n.result=e.sint32():e.skipType(7&o)}return n},e}(),n.VideoStreamSubscribeReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).uint32(e.type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamSubscribeReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.type=e.uint32():e.skipType(7&o)}return n},e}(),n.VideoStreamSubscribeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamSubscribeRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.result=e.sint32():e.skipType(7&o)}return n},e}(),n.VideoStreamFallbackTypeReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).uint32(e.type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamFallbackTypeReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.type=e.uint32():e.skipType(7&o)}return n},e}(),n.VideoStreamFallbackTypeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamFallbackTypeRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.result=e.sint32():e.skipType(7&o)}return n},e}(),n.VideoStreamChangePush=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.change_type=0,e.prototype.video_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.change_type&&Object.hasOwnProperty.call(e,"change_type")&&t.uint32(8).uint32(e.change_type),null!=e.video_type&&Object.hasOwnProperty.call(e,"video_type")&&t.uint32(16).uint32(e.video_type),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamChangePush;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.change_type=e.uint32();break;case 2:n.video_type=e.uint32();break;default:e.skipType(7&o)}}return n},e}(),n.VideoStreamChangeAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.VideoStreamChangeAck;e.pos<r;){var o=e.uint32();o>>>3==1?n.result=e.sint32():e.skipType(7&o)}return n},e}(),n.UserUnregisteredSEIFilterReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sei_filter="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.sei_filter&&Object.hasOwnProperty.call(e,"sei_filter")&&t.uint32(10).string(e.sei_filter),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.UserUnregisteredSEIFilterReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.sei_filter=e.string():e.skipType(7&o)}return n},e}(),n.UserUnregisteredSEIFilterRsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.result=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.result&&Object.hasOwnProperty.call(e,"result")&&t.uint32(8).sint32(e.result),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.UserUnregisteredSEIFilterRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.result=e.sint32():e.skipType(7&o)}return n},e}(),n.WebrtcCmdReqMsg=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.meta_data_push=null,e.prototype.video_stream_sub=null,e.prototype.video_fallback_type=null,e.prototype.video_change_push=null,e.prototype.usr_sei_filter=null,Object.defineProperty(e.prototype,"body",{get:a.oneOfGetter(t=["meta_data_push","video_stream_sub","video_fallback_type","video_change_push","usr_sei_filter"]),set:a.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.meta_data_push&&Object.hasOwnProperty.call(e,"meta_data_push")&&l.webrtc_cmd.MetadataPush.encode(e.meta_data_push,t.uint32(10).fork()).ldelim(),null!=e.video_stream_sub&&Object.hasOwnProperty.call(e,"video_stream_sub")&&l.webrtc_cmd.VideoStreamSubscribeReq.encode(e.video_stream_sub,t.uint32(18).fork()).ldelim(),null!=e.video_fallback_type&&Object.hasOwnProperty.call(e,"video_fallback_type")&&l.webrtc_cmd.VideoStreamFallbackTypeReq.encode(e.video_fallback_type,t.uint32(26).fork()).ldelim(),null!=e.video_change_push&&Object.hasOwnProperty.call(e,"video_change_push")&&l.webrtc_cmd.VideoStreamChangePush.encode(e.video_change_push,t.uint32(34).fork()).ldelim(),null!=e.usr_sei_filter&&Object.hasOwnProperty.call(e,"usr_sei_filter")&&l.webrtc_cmd.UserUnregisteredSEIFilterReq.encode(e.usr_sei_filter,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.WebrtcCmdReqMsg;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.meta_data_push=l.webrtc_cmd.MetadataPush.decode(e,e.uint32());break;case 2:n.video_stream_sub=l.webrtc_cmd.VideoStreamSubscribeReq.decode(e,e.uint32());break;case 3:n.video_fallback_type=l.webrtc_cmd.VideoStreamFallbackTypeReq.decode(e,e.uint32());break;case 4:n.video_change_push=l.webrtc_cmd.VideoStreamChangePush.decode(e,e.uint32());break;case 5:n.usr_sei_filter=l.webrtc_cmd.UserUnregisteredSEIFilterReq.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e}(),n.WebrtcCmdRspMsg=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.meta_data_ack=null,e.prototype.video_stream_sub=null,e.prototype.video_fallback_type=null,e.prototype.video_change_ack=null,e.prototype.usr_sei_filter=null,Object.defineProperty(e.prototype,"body",{get:a.oneOfGetter(t=["meta_data_ack","video_stream_sub","video_fallback_type","video_change_ack","usr_sei_filter"]),set:a.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.meta_data_ack&&Object.hasOwnProperty.call(e,"meta_data_ack")&&l.webrtc_cmd.MetadataAck.encode(e.meta_data_ack,t.uint32(10).fork()).ldelim(),null!=e.video_stream_sub&&Object.hasOwnProperty.call(e,"video_stream_sub")&&l.webrtc_cmd.VideoStreamSubscribeRsp.encode(e.video_stream_sub,t.uint32(18).fork()).ldelim(),null!=e.video_fallback_type&&Object.hasOwnProperty.call(e,"video_fallback_type")&&l.webrtc_cmd.VideoStreamFallbackTypeRsp.encode(e.video_fallback_type,t.uint32(26).fork()).ldelim(),null!=e.video_change_ack&&Object.hasOwnProperty.call(e,"video_change_ack")&&l.webrtc_cmd.VideoStreamChangeAck.encode(e.video_change_ack,t.uint32(34).fork()).ldelim(),null!=e.usr_sei_filter&&Object.hasOwnProperty.call(e,"usr_sei_filter")&&l.webrtc_cmd.UserUnregisteredSEIFilterRsp.encode(e.usr_sei_filter,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.webrtc_cmd.WebrtcCmdRspMsg;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.meta_data_ack=l.webrtc_cmd.MetadataAck.decode(e,e.uint32());break;case 2:n.video_stream_sub=l.webrtc_cmd.VideoStreamSubscribeRsp.decode(e,e.uint32());break;case 3:n.video_fallback_type=l.webrtc_cmd.VideoStreamFallbackTypeRsp.decode(e,e.uint32());break;case 4:n.video_change_ack=l.webrtc_cmd.VideoStreamChangeAck.decode(e,e.uint32());break;case 5:n.usr_sei_filter=l.webrtc_cmd.UserUnregisteredSEIFilterRsp.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e}(),n),e.exports=l},5515:function(e){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,(function(e){return o(t[s][1][e]||e)}),c,c.exports,e,t,r,n)}return r[s].exports}for(var i=void 0,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";var n=(0,e("./adapter_factory.js").adapterFactory)({window});t.exports=n},{"./adapter_factory.js":2}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adapterFactory=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=n.log,c=n.detectBrowser(e),u={browserDetails:c,commonShim:l,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(c.browser){case"chrome":if(!o||!o.shimPeerConnection||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;r("adapter.js shimming chrome."),u.browserShim=o,o.shimGetUserMedia(e),o.shimMediaStream(e),o.shimPeerConnection(e),o.shimOnTrack(e),o.shimAddTrackRemoveTrack(e),o.shimGetSendersWithDtmf(e),o.shimGetStats(e),o.shimSenderReceiverGetStats(e),o.fixNegotiationNeeded(e),l.shimRTCIceCandidate(e),l.shimConnectionState(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e),l.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),l.shimRTCIceCandidate(e),l.shimConnectionState(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e);break;case"edge":if(!i||!i.shimPeerConnection||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=i,i.shimGetUserMedia(e),i.shimGetDisplayMedia(e),i.shimPeerConnection(e),i.shimReplaceTrack(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,a.shimRTCIceServerUrls(e),a.shimCreateOfferLegacy(e),a.shimCallbacksAPI(e),a.shimLocalStreamsAPI(e),a.shimRemoteStreamsAPI(e),a.shimTrackEventTransceiver(e),a.shimGetUserMedia(e),l.shimRTCIceCandidate(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e),l.removeAllowExtmapMixed(e);break;default:r("Unsupported browser!")}return u};var n=c(e("./utils")),o=c(e("./chrome/chrome_shim")),i=c(e("./edge/edge_shim")),s=c(e("./firefox/firefox_shim")),a=c(e("./safari/safari_shim")),l=c(e("./common_shim"));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),r.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},r.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var i=new Event("track");i.track=n.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var i=new Event("track");i.track=n,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},r.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},r.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){var o=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){i[1](a(s(e)))},arguments[0]]):new Promise((function(e,r){t.apply(o,[function(t){e(a(s(t)))},r])})).then(r,n)}}},r.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,n=void 0,o=void 0;return this.getSenders().forEach((function(e){e.track===t&&(r?o=!0:r=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?o=!0:n=e),e.track===t})),o||r&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}},r.shimAddTrackRemoveTrackWithNative=a,r.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return a(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}n.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return c(e,t)}))}}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=l.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach((function(n){t._streams[n].getTracks().find((function(t){return e.track===t}))&&(r=t._streams[n])})),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t];r=r.replace(new RegExp(e._streams[n.id].id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}},r.shimPeerConnection=function(e){if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},r.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js"));function a(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();r.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),o.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((function(t){var n=r.video&&r.video.width,o=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:r.video&&r.video.frameRate||3}},n&&(r.video.mandatory.maxWidth=n),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var r=o.detectBrowser(e),s=function(e){if("object"!==(void 0===e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var o="object"===n(e[r])?e[r]:{ideal:e[r]};void 0!==o.exact&&"number"==typeof o.exact&&(o.min=o.max=o.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];var s={};"number"==typeof o.ideal?(s[i("min",r)]=o.ideal,t.optional.push(s),(s={})[i("max",r)]=o.ideal,t.optional.push(s)):(s[i("",r)]=o.ideal,t.optional.push(s))}void 0!==o.exact&&"number"!=typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=o.exact):["min","max"].forEach((function(e){void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=o[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,o){if(r.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===n(e.audio)){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===n(e.video)){var l=e.video.facingMode;l=l&&("object"===(void 0===l?"undefined":n(l))?l:{ideal:l});var c=r.version<66;if(l&&("user"===l.exact||"environment"===l.exact||"user"===l.ideal||"environment"===l.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)){delete e.video.facingMode;var u=void 0;if("environment"===l.exact||"environment"===l.ideal?u=["back","rear"]:"user"!==l.exact&&"user"!==l.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&u.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=l.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=s(e.video),i("chrome: "+JSON.stringify(e)),o(e)}))}e.video=s(e.video)}return i("chrome: "+JSON.stringify(e)),o(e)},l=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,n){a(e,(function(e){t.webkitGetUserMedia(e,r,(function(e){n&&n(l(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return c(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(l(e))}))}))}}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils.js")),i=o.log},{"../utils.js":15}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),i=o.default.parseCandidate(e.candidate),s=Object.assign(r,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},r.shimMaxMessageSize=function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},s=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r(arguments[0])){var e,t=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),o=n(t),i=s(arguments[0],t);e=0===o&&0===i?Number.POSITIVE_INFINITY:0===o||0===i?Math.max(o,i):Math.min(o,i);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return e}}),this._sctp=l}return a.apply(this,arguments)}}},r.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return r(e.channel,e.target),e}))}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0];if("open"===e.readyState&&t.sctp&&(n.length||n.size||n.byteLength)>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}},r.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}},r.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=i.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),r.apply(this,arguments)}}}};var o=function(e){return e&&e.__esModule?e:{default:e}}(e("sdp")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),r.shimPeerConnection=function(e){var t=i.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,a.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),i.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype},r.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils")),s=e("./filtericeservers"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("rtcpeerconnection-shim"))},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var o="string"==typeof t;return o&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=o?t[0]:t,!!t.length}}))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./getusermedia");Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),r.shimOnTrack=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===(void 0===e?"undefined":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){return i.apply(this,[e||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=o[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:o[t.type]||t.type}))}))}return e})).then(r,n)}}},r.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},r.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},r.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)}))})},r.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimGetUserMedia=function(e){var t=o.detectBrowser(e),r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},i&&i.prototype.getSettings){var l=i.prototype.getSettings;i.prototype.getSettings=function(){var e=l.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var c=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[e])}}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach((function(n){return t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}},r.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}},r.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,o=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=r.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=o.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(r.then(e,t),Promise.resolve()):r};var l=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=l,t.setRemoteDescription=l=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=l=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n}}},r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(i(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))},r.shimConstraints=i,r.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,n.push(s)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},r.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils"));function i(e){return e&&void 0!==e.video?Object.assign({},e,{video:o.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.extractVersion=s,r.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=r(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=i,o.apply(this,[e,i])};var i=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return i.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],i.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},r.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},r.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},r.log=function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},r.deprecated=function(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")},r.detectBrowser=function(e){var t=e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r},r.compactObject=function e(t){return"object"!==(void 0===t?"undefined":n(t))?t:Object.keys(t).reduce((function(r,o){var i="object"===n(t[o]),s=i?e(t[o]):t[o],a=i&&!Object.keys(s).length;return void 0===s||a?r:Object.assign(r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},o,s))}),{})},r.walkStats=a,r.filterStats=function(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(r){r.type===n&&r.trackId===t.id&&a(e,r,o)}))})),o};var o=!0,i=!0;function s(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function a(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?a(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((function(t){a(e,e.get(t),r)}))})))}},{}],16:[function(e,t,r){"use strict";var n=e("sdp");function o(e,t,r,o,i){var s=n.writeRtpDescription(e.kind,t);if(s+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",s+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var l="msid:"+(o?o.id:"-")+" "+a+"\r\n";s+="a="+l,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},o=function(e,t,r,o){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,o);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!o(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){r.headerExtensions.push(o);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function l(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function c(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function u(t,r,n,o){var i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(r){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw l("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();r.iceTransport=n.iceTransport,r.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,r){if(this._isClosed)throw l("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw l("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},d.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw l("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw l("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;o.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},d.prototype._gather=function(t,r){var o=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,l=!a||0===Object.keys(a).length;if(l)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var c=n.writeCandidate(a);s.candidate=Object.assign(s.candidate,n.parseCandidate(c)),s.candidate.candidate=c,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=n.getMediaSections(o._localDescription.sdp);u[s.candidate.sdpMLineIndex]+=l?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",o._localDescription.sdp=n.getDescription(o._localDescription.sdp)+u.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),l||o._dispatchEvent("icecandidate",s),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,r,o){var s=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),o&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),s.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},d.prototype.setLocalDescription=function(e){var t,r,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(l("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(l("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);o.transceivers[t].localCapabilities=r})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(o._remoteDescription.sdp),r=t.shift();var a=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=o.transceivers[t],l=s.iceGatherer,c=s.iceTransport,u=s.dtlsTransport,d=s.localCapabilities,h=s.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||s.rejected)){var p=n.getIceParameters(e,r),f=n.getDtlsParameters(e,r);a&&(f.role="server"),o.usingBundle&&0!==t||(o._gather(s.mid,t),"new"===c.state&&c.start(l,p,a?"controlling":"controlled"),"new"===u.state&&u.start(f));var g=i(d,h);o._transceive(s,g.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},o._updateSignalingState("offer"===e.type?"have-local-offer":"stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(o){var d=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(l("TypeError",'Unsupported type "'+o.type+'"'));if(!s("setRemoteDescription",o.type,d.signalingState)||d._isClosed)return Promise.reject(l("InvalidStateError","Can not set remote "+o.type+" in state "+d.signalingState));var h={};d.remoteStreams.forEach((function(e){h[e.id]=e}));var p=[],f=n.splitSections(o.sdp),g=f.shift(),m=n.matchPrefix(g,"a=ice-lite").length>0,v=n.matchPrefix(g,"a=group:BUNDLE ").length>0;d.usingBundle=v;var _=n.matchPrefix(g,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(s,l){var u=n.splitLines(s),f=n.getKind(s),_=n.isRejected(s)&&0===n.matchPrefix(s,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],b=n.getDirection(s,g),E=n.parseMsid(s),S=n.getMid(s)||n.generateIdentifier();if(_||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))d.transceivers[l]={mid:S,kind:f,protocol:y,rejected:!0};else{var C,T,w,R,k,O,I,P,A;!_&&d.transceivers[l]&&d.transceivers[l].rejected&&(d.transceivers[l]=d._createTransceiver(f,!0));var N,L,M=n.parseRtpParameters(s);_||(N=n.getIceParameters(s,g),(L=n.getDtlsParameters(s,g)).role="client"),I=n.parseRtpEncodingParameters(s);var x=n.parseRtcpParameters(s),D=n.matchPrefix(s,"a=end-of-candidates",g).length>0,B=n.matchPrefix(s,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!_&&v&&l>0&&d.transceivers[l]&&(d._disposeIceAndDtlsTransports(l),d.transceivers[l].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[l].iceTransport=d.transceivers[0].iceTransport,d.transceivers[l].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[l].rtpSender&&d.transceivers[l].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[l].rtpReceiver&&d.transceivers[l].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==o.type||_)"answer"!==o.type||_||(T=(C=d.transceivers[l]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,k=C.rtpReceiver,O=C.sendEncodingParameters,P=C.localCapabilities,d.transceivers[l].recvEncodingParameters=I,d.transceivers[l].remoteCapabilities=M,d.transceivers[l].rtcpParameters=x,B.length&&"new"===w.state&&(!m&&!D||v&&0!==l?B.forEach((function(e){a(C.iceTransport,e)})):w.setRemoteCandidates(B)),v&&0!==l||("new"===w.state&&w.start(T,N,"controlling"),"new"===R.state&&R.start(L)),!i(C.localCapabilities,C.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,d._transceive(C,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!k||"sendrecv"!==b&&"sendonly"!==b?delete C.rtpReceiver:(A=k.track,E?(h[E.stream]||(h[E.stream]=new e.MediaStream),r(A,h[E.stream]),p.push([A,k,h[E.stream]])):(h.default||(h.default=new e.MediaStream),r(A,h.default),p.push([A,k,h.default]))));else{(C=d.transceivers[l]||d._createTransceiver(f)).mid=S,C.iceGatherer||(C.iceGatherer=d._createIceGatherer(l,v)),B.length&&"new"===C.iceTransport.state&&(!D||v&&0!==l?B.forEach((function(e){a(C.iceTransport,e)})):C.iceTransport.setRemoteCandidates(B)),P=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),O=C.sendEncodingParameters||[{ssrc:1001*(2*l+2)}];var U,Z=!1;"sendrecv"===b||"sendonly"===b?(Z=!C.rtpReceiver,k=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,f),Z&&(A=k.track,E&&"-"===E.stream||(E?(h[E.stream]||(h[E.stream]=new e.MediaStream,Object.defineProperty(h[E.stream],"id",{get:function(){return E.stream}})),Object.defineProperty(A,"id",{get:function(){return E.track}}),U=h[E.stream]):(h.default||(h.default=new e.MediaStream),U=h.default)),U&&(r(A,U),C.associatedRemoteMediaStreams.push(U)),p.push([A,k,U]))):C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===C.rtpReceiver.track.id}));t&&c(t,e)})),C.associatedRemoteMediaStreams=[]),C.localCapabilities=P,C.remoteCapabilities=M,C.rtpReceiver=k,C.rtcpParameters=x,C.sendEncodingParameters=O,C.recvEncodingParameters=I,d._transceive(d.transceivers[l],!1,Z)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===o.type?"active":"passive"),d._remoteDescription={type:o.type,sdp:o.sdp},d._updateSignalingState("offer"===o.type?"have-remote-offer":"stable"),Object.keys(h).forEach((function(t){var r=h[t];if(r.getTracks().length){if(-1===d.remoteStreams.indexOf(r)){d.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){d._dispatchEvent("addstream",n)}))}p.forEach((function(e){r.id===e[2].id&&u(d,e[0],e[1],[r])}))}})),p.forEach((function(e){e[2]||u(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},d.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(l("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(r._createTransceiver("audio"),i--),s>0&&(r._createTransceiver("video"),s--);var c=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(o,i){var s=o.track,a=o.kind,l=o.mid||n.generateIdentifier();o.mid=l,o.iceGatherer||(o.iceGatherer=r._createIceGatherer(i,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(a);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,a)),o.localCapabilities=c,o.sendEncodingParameters=u})),"max-compat"!==r._config.bundlePolicy&&(c+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){c+=o(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(u)},d.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(l("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(l("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>a)){if(e.rejected)return"application"===e.kind?s+="DTLS/SCTP"===e.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var l;e.stream&&("audio"===e.kind?l=e.stream.getAudioTracks()[0]:"video"===e.kind&&(l=e.stream.getVideoTracks()[0]),l&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var c=i(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=o(e,c,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(c)},d.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!r._remoteDescription)return i(l("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var c=0;c<r.transceivers.length;c++)if(r.transceivers[c].mid===e.sdpMid){s=c;break}var u=r.transceivers[s];if(!u)return i(l("OperationError","Can not add ICE candidate"));if(u.rejected)return o();var d=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return o();if(d.component&&1!==d.component)return o();if((0===s||s>0&&u.iceTransport!==r.transceivers[0].iceTransport)&&!a(u.iceTransport,d))return i(l("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(d.type?h:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);o()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw l("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){e[r].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[r]),t.set(r,e[r])})),t}))}}}));var h=["createOffer","createAnswer"];return h.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},{sdp:17}],17:[function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)r[(t=n[o].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){n.push(e.parameters[t]?t+"="+e.parameters[t]:t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.getIceParameters=function(e,t){var r=n.splitLines(e);return{usernameFragment:(r=r.concat(n.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:r.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],s=n.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=n.parseRtpMap(s),l=n.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=l.length?n.parseFmtp(l[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],o=n.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),s=-1!==o.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),l=a.length>0&&a[0].ssrc,c=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));c.length>0&&c[0].length>1&&c[0][0]===l&&(t=c[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&t&&(n.rtx={ssrc:t}),r.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:l,mechanism:s?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&l&&r.push({ssrc:l});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=u}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var o=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var i=n.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var o=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var o=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,o){var i=n.writeRtpDescription(e.kind,t);if(i+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var s="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),i},n.getDirection=function(e,t){for(var r=n.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=n)},{}]},{},[1])(1)},9869:function(e){"undefined"!=typeof self&&self,e.exports=function(){return t={24:function(e,t,r){"use strict";function n(e){return e}r.r(t),(r=o=o||{}).LIVE_SEND_SIGNAL="zm.lv.ssg",r.LIVE_RESPOND_JOIN_LIVE="zm.lv.rjl",r.LIVE_PUSH_SIGNAL="zm.lv.pss",r.SERVICE_PUSH="zm.sv.ps",r.SERVICE_SEND="zm.sv.sd";var o,i={event:"/liveroom/send_end_join_live",to_user_id:n,request_id:n},s={event:"/liveroom/send_invite_join_live",to_user_id:n,request_id:n},a={event:"/liveroom/send_join_live_result",to_user_id:n,request_id:n,join_result:function(e){return e}},l={event:"/liveroom/send_request_join_live",to_user_id:n,request_id:n},c={code:1002014,msg:"room not exist"},u={code:1002099,msg:"room inner error"},d=(h.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},h.prototype.getSignalCmdContent=function(e,t,r){return e={request_id:e,room_id:this.room.roomID,from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,to_userid:t},null!=r&&(e.result=r),JSON.stringify(e)},h.prototype.requestJoinLive=function(e,t,r,n){var o,i=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(i,e);return null!=n&&(this.stateCenter.reporter.spanSetAttributes({key:l.event,par:null==(o=this.room)?void 0:o.roomID},{request_id:l.request_id(i)}),this.joinLiveCallbackMap[i]=n,this.sendSignalCmd(1001,s,e,t,r),!0)},h.prototype.sendSignalCmd=function(e,t,r,n,i){var s=this;this.room.isLogin()?((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendSignalCmd({sub_cmd:e,signal_msg:t,dest_id_name:[r]},(function(e){n&&n(e.header.seq)}),(function(e){var t=u;e.header&&e.body?i&&i(s.rtm.getServerError(e.body.err_code),e.header.seq):(e.code&&e.msg&&(t=e),i&&i(t,0))}),this.room),this.logger.info(o.LIVE_SEND_SIGNAL+" call success"+e)):this.logger.error(o.LIVE_SEND_SIGNAL+" state error")},h.prototype.inviteJoinLive=function(e,t,r,n){var o,i=this.stateCenter.getRequestId(),a=this.getSignalCmdContent(i,e);return null!=n&&(this.stateCenter.reporter.spanSetAttributes({key:s.event,par:null==(o=this.room)?void 0:o.roomID},{request_id:s.request_id(i)}),this.joinLiveCallbackMap[i]=n,this.sendSignalCmd(1003,a,e,t,r),!0)},h.prototype.endJoinLive=function(e,t,r){var n,o=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(o,e);return this.stateCenter.reporter.spanSetAttributes({key:i.event,par:null==(n=this.room)?void 0:n.roomID},{request_id:i.request_id(o)}),this.sendSignalCmd(1004,s,e,t,r),!0},h.prototype.respondJoinLive=function(e,t,r,n){var i=this.joinLiveRequestMap[e];if(!i)return this.logger.info(o.LIVE_RESPOND_JOIN_LIVE+" no dest id name"),!1;this.stateCenter.reporter.spanSetAttributes({key:a.event,par:null==(s=this.room)?void 0:s.roomID},{to_user_id:a.to_user_id(i)});var s=0;return t=this.getSignalCmdContent(e,i,s=!0===t?1:s),this.sendSignalCmd(1002,t,i,r,n),delete this.joinLiveRequestMap[e],!0},h.prototype.handlePushSignalMsg=function(e){var t=JSON.parse(e.body.signal_msg);switch(this.logger.info(o.LIVE_PUSH_SIGNAL+" hpsm= ",t),e.body.sub_cmd){case 11001:this.handlePushJoinLiveRequestMsg(t);break;case 11002:this.handlePushJoinLiveResultMsg(t);break;case 11003:this.handlePushJoinLiveInviteMsg(t);break;case 11004:this.handlePushJoinLiveStopMsg(t)}},h.prototype.handlePushJoinLiveRequestMsg=function(e){var t,r=e.request_id;"string"!=typeof r?this.logger.error(o.LIVE_PUSH_SIGNAL+" no requestId"):"string"!=typeof(t=e.from_userid)?this.logger.error(o.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[r]=t,this.onRecvJoinLiveRequest(r,e.from_userid,e.from_username,e.room_id),this.logger.info(o.LIVE_PUSH_SIGNAL+" onRecvJoinLiveRequest "+t))},h.prototype.onRecvJoinLiveRequest=function(e,t,r,n){this.stateCenter.actionListener("recvJoinLiveRequest",e,t,r,n)},h.prototype.handlePushJoinLiveInviteMsg=function(e){var t,r=e.request_id;"string"!=typeof r?this.logger.error(o.LIVE_PUSH_SIGNAL+"no requestId"):"string"!=typeof(t=e.from_userid)?this.logger.error(o.LIVE_PUSH_SIGNAL+" no from user"):(this.joinLiveRequestMap[r]=t,this.onRecvInviteJoinLiveRequest(r,e.from_userid,e.from_username,e.room_id),this.logger.info(o.LIVE_PUSH_SIGNAL+" onRecvInviteJoinLiveRequest "+t))},h.prototype.onRecvInviteJoinLiveRequest=function(e,t,r,n){this.stateCenter.actionListener("recvInviteJoinLiveRequest",e,t,r,n)},h.prototype.handlePushJoinLiveResultMsg=function(e){var t,r,n=e.request_id;"string"!=typeof n?this.logger.error(o.LIVE_PUSH_SIGNAL+" no requestId"):null==(t=e.result)?this.logger.info(o.LIVE_PUSH_SIGNAL+" no result"):(t=1==t,this.joinLiveCallbackMap[n]&&((r=this.joinLiveCallbackMap[n])?(this.logger.info(o.LIVE_PUSH_SIGNAL+" joinLiveRequest/invite result "+t),delete this.joinLiveCallbackMap[n],r(t,e.from_userid,e.from_username)):this.logger.info(o.LIVE_PUSH_SIGNAL+" no callback")))},h.prototype.handlePushJoinLiveStopMsg=function(e){var t=e.request_id;"string"!=typeof t?this.logger.error(o.LIVE_PUSH_SIGNAL+" no requestId"):(this.logger.info(o.LIVE_PUSH_SIGNAL+" onRecvEndJoinLiveCommand "+e.from_userid),this.onRecvEndJoinLiveCommand(t,e.from_userid,e.from_username,e.room_id))},h.prototype.onRecvEndJoinLiveCommand=function(e,t,r,n){this.stateCenter.actionListener("recvEndJoinLiveCommand",e,t,r,n)},h);function h(e,t,r,n,o,i){this.logger=e,this.stateCenter=t,this.service=r,this.liveRoomHandler=n,this.rtm=o,this.room=i,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}var p={requestJoinLive:function(e,t,r,n,o){var i=this,s=this.getMsgSpan(l.event,o||(null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomID),!0),a=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return a?(s.setAttributes({to_user_id:l.to_user_id(e)}),a.liveHandler.requestJoinLive(e,(function(e){s.end(),t(e)}),(function(e,t){i.stateCenter.reporter.setError(s,e),r(e,t)}),n)):(this.stateCenter.reporter.setError(s,c),r&&r(c,0),!1)},inviteJoinLive:function(e,t,r,n,o){var i=this,a=this.getMsgSpan(s.event,o||(null==(l=this.stateCenter.roomModulesList[0])?void 0:l.roomID),!0),l=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return l?(a.setAttributes({to_user_id:s.to_user_id(e)}),l.liveHandler.inviteJoinLive(e,(function(e){a.end(),t(e)}),(function(e,t){i.stateCenter.reporter.setError(a,e),r(e,t)}),n)):(this.stateCenter.reporter.setError(a,c),r&&r(c,0),!1)},endJoinLive:function(e,t,r,n){var o=this,s=this.getMsgSpan(i.event,n||(null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomID),!0),a=this.getRoomModules(n)||this.stateCenter.roomModulesList[0];return a?(s.setAttributes({to_user_id:i.to_user_id(e)}),a.liveHandler.endJoinLive(e,(function(e){s.end(),t(e)}),(function(e,t){o.stateCenter.reporter.setError(s,e),r(e,t)}))):(this.stateCenter.reporter.setError(s,c),r&&r(c,0),!1)},respondJoinLive:function(e,t,r,n,o){var i=this,s=this.getMsgSpan(a.event,o||(null==(l=this.stateCenter.roomModulesList[0])?void 0:l.roomID),!0),l=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return l?(s.setAttributes({request_id:a.request_id(e),join_result:a.join_result(t)}),l.liveHandler.respondJoinLive(e,t,(function(e){s.end(),r(e)}),(function(e,t){i.stateCenter.reporter.setError(s,e),n(e,t)}))):(this.stateCenter.reporter.setError(s,c),n&&n(c,0),!1)}},f={handlePushSignalMsg:function(e){var t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t}));r?r.liveHandler.handlePushSignalMsg(e):this.logger.error(o.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},g={initLiveHandler:function(){this.liveHandler=new d(this.logger,this.stateCenter,this.service,this.liveRoomHandler,this.rtm,this)}};t.default={type:"live",install:function(e,t,r,n){for(var o in p)Object.defineProperty(e.prototype,o,{value:p[o],writable:!1});for(var o in f)Object.defineProperty(r.prototype,o,{value:f[o],writable:!1}),Object.defineProperty(n.prototype,o,{value:f[o],writable:!1});for(var o in g)Object.defineProperty(t.prototype,o,{value:g[o],writable:!1})}}}},r={},e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=24);function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t,r}()},3126:function(e){"undefined"!=typeof self&&self,e.exports=function(){return t={1:function(e,t,r){var n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},s={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=c(e,0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=c(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function l(e,t){if(isNaN(e))return t?_:v;if(t){if(e<0)return _;if(f<=e)return C}else{if(e<=-g)return T;if(g<=e+1)return S}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(r=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?_:v;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var o=l(u(r,8)),i=v,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);i=a<8?(a=l(u(r,a)),i.mul(a).add(l(c))):(i=i.mul(o)).add(l(c))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,g=f/2,m=a(1<<24),v=a(0),_=(r.ZERO=v,a(0,!0)),y=(r.UZERO=_,a(1)),b=(r.ONE=y,a(1,!0)),E=(r.UONE=b,a(-1)),S=(r.NEG_ONE=E,c(-1,2147483647,!1)),C=(r.MAX_VALUE=S,c(-1,-1,!0)),T=(r.MAX_UNSIGNED_VALUE=C,c(0,-2147483648,!1)),w=(r.MIN_VALUE=T,r.prototype);return w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(T)?(r=l(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var n=l(u(e,6),this.unsigned),o=this,i="";;){var s=o.div(n),a=(o.sub(s.mul(n)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||0<=this.high},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return 0<this.comp(e)},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return 0<=this.comp(e)},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(y)},w.neg=w.negate,w.add=function(e){n(e)||(e=h(e));var t=0,r=0,o=0,i=0;return r+=(o=o+((i+=(65535&this.low)+(65535&e.low))>>>16)+((this.low>>>16)+(e.low>>>16)))>>>16,c((o&=65535)<<16|(i&=65535),((t+=(r+=(65535&this.high)+(65535&e.high))>>>16)+((this.high>>>16)+(e.high>>>16))&65535)<<16|(r&=65535),this.unsigned)},w.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?_:v;if(this.eq(T))return e.isOdd()?T:v;if(e.eq(T))return this.isOdd()?T:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,d=0,p=0,f=0,g=(g=0)+((p=p+((f+=i*(e=65535&e.low))>>>16)+o*e)>>>16)+((p=(65535&p)+i*u)>>>16);return c((p&=65535)<<16|(f&=65535),((d+=(g+=r*e)>>>16)+((g=(65535&g)+o*u)>>>16)+((g=(65535&g)+i*a)>>>16)+((this.high>>>16)*e+r*u+o*a+i*s)&65535)<<16|(g&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if((e=n(e)?e:h(e)).isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:v;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return _;if(e.gt(this.shru(1)))return b;o=_}else{if(this.eq(T))return e.eq(y)||e.eq(E)?T:e.eq(T)?y:(i=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:E:(r=this.sub(e.mul(i)),i.add(r.div(e)));if(e.eq(T))return this.unsigned?_:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=v}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:u(2,s-48),d=l(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=l(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),o=o.add(d),r=r.sub(p)}return o},w.div=w.divide,w.modulo=function(e){return n(e)||(e=h(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return c(~this.low,~this.high,this.unsigned)},w.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},w.clz=w.countLeadingZeros,w.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},w.ctz=w.countTrailingZeros,w.and=function(e){return n(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return n(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return n(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):c(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},w.rotl=w.rotateLeft,w.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):c(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},w.rotr=w.rotateRight,w.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=r,"default"in e?e.default:e}({});void 0!==(t=function(){return n}.apply(t,[]))&&(e.exports=t)},23:function(e,t,r){"use strict";function n(e){return e}function o(e){return e}function i(e){return e}r.r(t),(u=s=s||{}).RTM_SEND_CUSTOM="zm.scc",u.RTM_SEND_BCM="zm.sbcm",u.RTM_SEND_RLM="zm.srlm",u.RTM_SEND_BRM="zm.sbrm",u.RTM_SEND_RAM="zm.sram",u.MESSAGE_SEND_RELIABLE="zm.msg.sdr",u.MESSAGE_FETCH_RELIABLE="zm.msg.frm",u.MESSAGE_RELIABLE_RSP="zm.msg.rlr",u.MESSAGE_RELIABLE_PUSH="zm.msg.rps",u.MESSAGE_SEND_ROOM_MSG="zm.msg.srm",u.MESSAGE_SEND_CUSTOM_MSG="zm.msg.scm",u.MESSAGE_SEND_BIG_MSG="zm.msg.sbm",u.MESSAGE_BIG_MSG_PUSH="zm.msg.bps",u.MESSAGE_SEND_RELAY_MSG="zm.msg.slm",u.SERVICE_PUSH="zm.sv.ps";var s,a,l={INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},NOT_LOGIN:{code:1000002,msg:"not login"},IM_CONTENT_NULL:{code:1009001,msg:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,msg:"message content is too long"},IM_SEND_FAILED:{code:1009010,msg:"failed to send message"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},TRANS_FREQUENTLY:{code:1102022,msg:"trans send frequently"},FREQ_LIMITED:{code:1109001,msg:"frequency limited."}},c={kZMLoginRoom:{event:"/sdk/login"},kZMLiveSendRoomBigIM:{event:"/liveroom/send_big_room_message",room_sid_string:n,error:{INPUT_PARAM:l.INPUT_PARAM,IM_CONTENT_NULL:l.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:l.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomSendCustomCommand:{event:"/liveroom/send_custom_command",room_sid_string:n,request_id:o,error:{INPUT_PARAM:l.INPUT_PARAM,IM_CONTENT_NULL:l.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:l.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomSendRoomMessage:{event:"/liveroom/send_room_message",room_id:o,room_sid_string:o,msg_content_size:i,send_seq:i,msg_id:i,error:{INPUT_PARAM:l.INPUT_PARAM,IM_CONTENT_NULL:l.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:l.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomSendRoomExtraInfo:{event:"/liveroom/set_room_extrainfo",room_id:o,room_sid_string:n,key:o,value:o,error:{INPUT_PARAM:l.INPUT_PARAM,TRANS_FREQUENTLY:l.TRANS_FREQUENTLY,ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomGetRoomExtraInfo:{event:"/liveroom/get_room_extrainfo",fetch_array:n,result_array:n,error:{INPUT_PARAM:l.INPUT_PARAM,TRANS_FREQUENTLY:l.TRANS_FREQUENTLY,ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomRecvRoomExtraInfo:{event:"/liveroom/recv_room_extrainfo",trans_type:o,trans_seq:i,error:{ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMLiveRecvRoomBigIM:{event:"/liveroom/recv_big_room_message",error:{ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomGetRoomMessage:{event:"/liveroom/recv_room_message",error:{ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}},kZMRoomRecvCustomCommand:{event:"/liveroom/recv_custom_command",error:{ROOM_NOT_EXIST:l.ROOM_NOT_EXIST}}},u=((u=a=a||{})[u.I=0]="I",u[u.H=10]="H",u[u.M=100]="M",u[u.L=1e3]="L",r(1)),d=r.n(u),h=(p.prototype.loginRsp=function(e){var t,r=this;if(null!=e.body.ret_timestamp&&"string"==typeof e.body.ret_timestamp&&(t=parseFloat(e.body.ret_timestamp),this.serverTimeOffset=0==t?0:e.body.ret_timestamp-(new Date).getTime()),e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.datiTimeWindow=e.body.dati_time_window),e.body.trans_seqs)for(var n=0;n<e.body.trans_seqs.length;n++){var o=e.body.trans_seqs[n].trans_channel,i=e.body.trans_seqs[n].trans_seq_array;0<(i=(i=i.filter((function(e){var t=e.trans_type;return e=e.trans_seq,!r.transSeqMap[t]||r.transSeqMap[t].seq<e}))).map((function(e){return{trans_type:e.trans_type,trans_local_seq:e.trans_seq}}))).length&&this.fetchReliableMessage(o,i)}},p.prototype.sendReliableMessage=function(e,t,r,n){var o=this;this.logger.info(s.MESSAGE_SEND_RELIABLE+" call"),this.room.isLogin()?this.isReliable?(this.logger.error(s.MESSAGE_SEND_RELIABLE+" send too often"),n(c.kZMRoomSendRoomExtraInfo.error.TRANS_FREQUENTLY)):(this.transSeqMap[e]||(this.transSeqMap[e]={seq:0}),t={trans_type:e,trans_data:t,trans_local_seq:this.transSeqMap[e].seq,trans_channel:"clt"},this.isReliable=!0,(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendReliableMessage(t,(function(t){o.transSeqMap[e].seq=t.body.trans_seq,o.logger.info(s.MESSAGE_SEND_RELIABLE+" trans "+e+" seq "+t.body.trans_seq),o.isReliable=!1,r({seq:t.header.seq,errorCode:0})}),(function(e){var t=l.ROOM_INNER_ERROR;e.body&&e.body.err_code?(t=o.rtm.getServerError(e.body.err_code),o.logger.error(s.MESSAGE_SEND_ROOM_MSG+"  "+t.msg)):t=e,o.isReliable=!1,n(t)}),this.room)):(this.logger.error(s.MESSAGE_SEND_RELIABLE+" state error"),n&&n(l.NOT_LOGIN))},p.prototype.fetchReliableMessage=function(e,t){function r(e){n.handleFetchTransRsp(e,o)}var n=this,o=(e={trans_channel:e,fetch_array:t},this.stateCenter.reporter.createSpan(a.H,{key:c.kZMLoginRoom.event,par:this.room.roomID},{key:""},c.kZMRoomGetRoomExtraInfo.event));o.setAttributes({fetch_array:c.kZMRoomGetRoomExtraInfo.fetch_array(t)}),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchReliableMessage(e,r,r,this.room),this.logger.info(s.MESSAGE_FETCH_RELIABLE+" call success")},p.prototype.handleFetchTransRsp=function(e,t){if(e.body&&0!=e.body.err_code)this.logger.error(s.MESSAGE_RELIABLE_RSP+" trans send error "+e.body.err_code),this.stateCenter.tracer.setError(t,{code:e.body.err_code});else if(e.header&&e.body){var r=e.body.trans_fetch_results,n=[],o=[];if(Array.isArray(r)&&0<r.length){for(var i=0;i<r.length;i++){var a,u,d=r[i];1000001109===d.err_code?this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans unknown type "+d.err_code):(o.push({trans_type:a=d.trans_type,trans_seq:u=d.trans_seq}),1000001110===d.err_code?(this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans seq is wrong "+d.err_code),this.transSeqMap[a]={seq:u}):!this.transSeqMap[a]||this.transSeqMap[a].seq<u?(this.transSeqMap[a]={seq:u},n.push(d)):this.logger.warn(s.MESSAGE_RELIABLE_RSP+" fetch trans seq wrong"))}0<n.length&&this.onRecvReliableMessage(n)}t.setAttributes({result_array:c.kZMRoomGetRoomExtraInfo.result_array(o)}),t.end()}else this.logger.error(s.MESSAGE_RELIABLE_RSP+" trans send error "+e),this.stateCenter.tracer.setError(t,l.TIMEOUT)},p.prototype.handlePushTransMsg=function(e){var t,r=e.body.trans_type,n=e.body.trans_seq;!this.transSeqMap[r]||this.transSeqMap[r].seq<n?(this.transSeqMap[r]={seq:n},(null==(t=null==e?void 0:e.body)?void 0:t.trans_idname)!==this.stateCenter.idName?this.onRecvReliableMessage([e.body]):this.logger.warn(s.MESSAGE_RELIABLE_PUSH+" id name same")):this.logger.warn(s.MESSAGE_RELIABLE_PUSH+" trans seq wrong"),this.logger.info(s.MESSAGE_RELIABLE_PUSH+" trans "+r+" seq "+n)},p.prototype.sendRoomMsg=function(e,t,r,n,o,i){var a=this;if(!this.room.isLogin())return this.logger.error(s.MESSAGE_SEND_ROOM_MSG+" state error"),i(l.NOT_LOGIN),!1;var u=Date.parse(new Date+"");return 0<this.sendRoomMsgTime&&this.sendRoomMsgTime+this.sendRoomMsgInterval>u?(this.logger.info(s.MESSAGE_SEND_ROOM_MSG+" freq error"),i&&i(l.FREQ_LIMITED,0,e,n),!1):(this.sendRoomMsgTime=u,u=(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRoomMsg({msg_category:e,msg_type:1,msg_priority:1,msg_content:n},(function(e){o({seq:e.header.seq,errorCode:0,messageID:e.body.msg_id})}),(function(e){var t,r,n=l.ROOM_INNER_ERROR;e.header&&e.body?(r=(t=[a.rtm.getServerError(e.body.err_code),e.body.msg_id])[1],a.logger.error(s.MESSAGE_SEND_ROOM_MSG+"  "+(n=t[0]).msg),i({seq:e.header.seq,errorCode:(n=n==l.TIMEOUT?l.IM_SEND_FAILED:n).code,messageID:r})):(e.code&&e.msg&&(n=e),i({seq:0,errorCode:n.code,messageID:0}))}),this.room),this.stateCenter.reporter.spanSetAttributes({key:c.kZMRoomSendRoomMessage.event,par:null==(e=this.room)?void 0:e.roomID},{send_seq:c.kZMRoomSendRoomMessage.send_seq(u)}),this.logger.info(s.MESSAGE_SEND_ROOM_MSG+"  call success"),!0)},p.prototype.handlePushRoomMsg=function(e){var t,r=[];this.stateCenter.useNetAgent?(t=e.body.msg_data,e.body.msg_data.forEach((function(e){e={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time.toNumber(),messageID:e.msg_id.toNumber()},r.push(e)})),e.body.server_msg_id=e.body.server_msg_id.toNumber(),e.body.ret_msg_id=e.body.ret_msg_id.toNumber()):(t=e.body.chat_data,e.body.chat_data.forEach((function(e){r.push(e={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id})}))),this.stateCenter.actionListener("IMRecvBroadcastMessage",this.room.roomID,r),this.stateCenter.actionListener("_recvRoomMsg",t,e.body.server_msg_id,e.body.ret_msg_id)},p.prototype.sendCustomCommand=function(e,t,r,n){var o=this;if(!this.room.isLogin())return this.logger.error(s.MESSAGE_SEND_CUSTOM_MSG+" state error"),n(l.NOT_LOGIN),!1;t={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,request_id:this.stateCenter.getRequestId(),custom_content:t||"",room_id:this.room.roomID};var i=(this.stateCenter.reporter.spanSetAttributes({key:c.kZMRoomSendCustomCommand.event,par:null==(i=this.room)?void 0:i.roomID},{request_id:c.kZMRoomSendCustomCommand.request_id(t.request_id)}),{dest_id_name:e,custom_msg:JSON.stringify(t)});return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendCustomCommand(i,(function(e){r({seq:e.header.seq,errorCode:0})}),(function(e){var t=o.rtm.getServerError(e.body.err_code);o.logger.error(s.MESSAGE_SEND_CUSTOM_MSG+" "+t.msg),n({seq:e.header.seq,errorCode:(t==l.TIMEOUT?l.IM_SEND_FAILED:t).code})}),this.room),this.logger.info(s.MESSAGE_SEND_CUSTOM_MSG+" call success"),!0},p.prototype.handlePushCustomMsg=function(e){e=[(e=JSON.parse(e.body.custommsg)).from_userid,e.from_username,e.room_id,e.custom_content],this.stateCenter.actionListener("IMRecvCustomCommand",e[2],{userID:e[0],userName:e[1]},e[3])},p.prototype.sendBigRoomMessage=function(e,t,r,n,o,i){var a,c,u,d,h=this;this.room.isLogin()?(a=this.bigimTimeWindow,c=this.serverTimeOffset,u=(new Date).getTime()+c,d=this.rtm.getSeq().toString(),this.bigImCallbackMap[d]={success:o,error:i},0==a?this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:d}],(function(e){h.handleBigImMsgRsp(e)}),(function(e){i&&i(e)})):(o=Math.floor(u/a),this.bigImLastTimeIndex<o&&0==this.bigIMmessageList.length?(this.bigImLastTimeIndex=o,this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:d}],(function(e){h.handleBigImMsgRsp(e)}),(function(e){i&&i(e)}))):(this.bigIMmessageList.push({msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:d}),1==this.bigIMmessageList.length&&this.setBigImTimer(c,a)))):(this.logger.error(s.MESSAGE_SEND_BIG_MSG+" state error"),i&&i(l.NOT_LOGIN))},p.prototype.sendBigRoomMessageInternal=function(e,t,r){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendBigRoomMessage({msgs:e},(function(e){t(e)}),(function(e){var t=l.ROOM_INNER_ERROR;e.header&&e.body||(e.code&&e.msg&&(t=e),r(t)),r(t)}),this.room),this.logger.info(s.MESSAGE_SEND_BIG_MSG+" sendBigRoomMessage called")},p.prototype.handleBigImMsgRsp=function(e){this.bigimTimeWindow=e.body.bigim_time_window;for(var t=0;t<e.body.msgs.length;t++){var r,n=e.body.msgs[t].bigmsg_client_id;this.bigImCallbackMap[n]&&(null!=(r=this.bigImCallbackMap[n].success)&&r({seq:e.header.seq,errorCode:0,messageID:e.body.msgs[t].bigmsg_id}),delete this.bigImCallbackMap[n])}},p.prototype.setBigImTimer=function(e,t){var r=this;e=t-((new Date).getTime()+e)%t,t=this.rtm.generateRandumNumber(t)+e,this.bigImTimer=setTimeout((function(){r.onBigImTimer()}),t)},p.prototype.onBigImTimer=function(){for(var e=this,t=(new Date).getTime()+this.serverTimeOffset,r=(this.bigImLastTimeIndex=Math.floor(t/this.bigimTimeWindow),[]),n=[],o=0;o<this.bigIMmessageList.length&&!(20<=o);o++){var i=this.bigIMmessageList[o];r.push({msg_category:i.msg_category,msg_type:i.msg_type,msg_content:i.msg_content,bigmsg_client_id:i.bigmsg_client_id}),n.push(i.bigmsg_client_id)}20<this.bigIMmessageList.length?this.bigIMmessageList.splice(0,20):this.bigIMmessageList=[],this.sendBigRoomMessageInternal(r,(function(t){e.handleBigImMsgRsp(t)}),(function(t,r){for(var o=0;o<n.length;o++){var i=n[o],s=e.bigImCallbackMap[i];s&&(null!=s.error&&s.error(t,r),delete e.bigImCallbackMap[i])}})),this.bigImTimer&&clearTimeout(this.bigImTimer),this.bigImTimer=null,0<this.bigIMmessageList.length&&this.setBigImTimer(this.serverTimeOffset,this.bigimTimeWindow)},p.prototype.handlePushMergeMsg=function(e){for(var t=0;t<e.body.messages.length;t++)14001!==e.body.messages[t].sub_cmd&&"/lr/push/bigim_chat"!==e.body.messages[t].sub_cmd||this.handlePushBigRooMsg(e.body.messages[t].msg_body)},p.prototype.handlePushBigRooMsg=function(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return void this.logger.warn(s.MESSAGE_BIG_MSG_PUSH+"parse json error")}else t=e;if(t){e=t.room_id;for(var r=[],n=0;n<t.msg_data.length;n++){var o=t.msg_data[n];o.id_name==this.stateCenter.idName?this.logger.info(s.MESSAGE_BIG_MSG_PUSH+" self message"):r.push({idName:o.id_name,nickName:o.nick_name,messageId:o.bigmsg_id,category:o.msg_category,type:o.msg_type,content:o.msg_content,time:o.send_time||d.a.isLong(o.msg_timestamp)&&o.msg_timestamp.toNumber()})}0==r.length?this.logger.info(s.MESSAGE_BIG_MSG_PUSH+" no other pushData except self"):this.onRecvBigRoomMessage(r,e),this.logger.info(s.MESSAGE_BIG_MSG_PUSH+"call success")}else this.logger.warn(s.MESSAGE_BIG_MSG_PUSH+" cann't find message body")},p.prototype.onRecvBigRoomMessage=function(e,t){var r=[];e.forEach((function(e){r.push(e={fromUser:{userID:e.idName,userName:e.nickName},message:e.content,sendTime:e.time,messageID:e.messageId})})),this.stateCenter.actionListener("IMRecvBarrageMessage",t,r),this.stateCenter.actionListener("_recvBigRoomMessage",e,t)},p.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this.relayTimer&&(clearTimeout(this.relayTimer),this.relayTimer=null),this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer&&(clearTimeout(this.bigImTimer),this.bigImTimer=null),this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0},p.prototype.sendRelayMessage=function(e,t,r,n){var o=this.datiTimeWindow,i=this.serverTimeOffset;0<o?(this.realyMessageList.push({type:e,data:t,success:r,error:n}),1==this.realyMessageList.length&&this.setRelayTimer(i,o)):this.sendRelayMessageInternal(e,t,r,n)},p.prototype.sendRelayMessageInternal=function(e,t,r,n){var o=this;this.logger.info(s.MESSAGE_SEND_RELAY_MSG+" call"),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendRelayMessage(e={relay_type:e,relay_data:t},(function(e){r&&r(e.header.seq,e.body.relay_result)}),(function(e){var t=l.ROOM_INNER_ERROR;e.header&&e.body?n&&n(o.rtm.getServerError(e.body.err_code),e.header.seq):(e.code&&e.msg&&(t=e),n&&n(t,0))}),t=this.room)},p.prototype.setRelayTimer=function(e,t){var r=this;e=(new Date).getTime()+e,e=this.rtm.generateRandumNumber(2*t-e%t),this.logger.info(s.MESSAGE_SEND_RELAY_MSG+" setTimer "+e),this.relayTimer=setTimeout((function(){r.onRelayTimer()}),e)},p.prototype.onRelayTimer=function(){var e;0==this.realyMessageList.length?this.logger.info(s.MESSAGE_SEND_RELAY_MSG+"  no relay data"):(this.sendRelayMessageInternal((e=this.realyMessageList[0]).type,e.data,e.success,e.error),this.relayTimer&&clearTimeout(this.relayTimer),this.relayTimer=null,this.realyMessageList.splice(0,1),0<this.realyMessageList.length&&this.setRelayTimer(this.serverTimeOffset,this.datiTimeWindow))},p);function p(e,t,r,n,o,i,s){var a=this;this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.liveRoomHandler=o,this.rtm=i,this.room=s,this.sendRoomMsgTime=0,this.sendRoomMsgInterval=500,this.bigImCallbackMap={},this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImTimer=null,this.relayTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.isReliable=!1,this.transSeqMap={},this.onRecvReliableMessage=function(e){var t=e.map((function(e){return{key:e.trans_type,value:e.trans_data,updateUser:{userID:e.trans_idname,userName:e.trans_nickname},updateTime:d.a.isLong(e.trans_send_time)?e.trans_send_time.toNumber():e.trans_send_time}}));0<t.length&&a.stateCenter.actionListener("roomExtraInfoUpdate",a.room.roomID,t),e.forEach((function(e){a.stateCenter.actionListener("recvReliableMessage",e.trans_type,e.trans_seq,e.trans_data)}))},this.realyMessageList=[]}function f(e,t,r,n){var o=this;return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(i,a){var l,u=o.getMsgSpan(c.kZMRoomSendRoomMessage.event,e,!0),d=(a=o.stateCenter.proxyRes(u,(function(e){u.setAttributes({msg_id:c.kZMRoomSendRoomMessage.msg_id(e.messageID)}),i(e)}),a)).interResolve;a=a.interReject,"string"!=typeof e||""==e?(o.logger.error(s.RTM_SEND_BCM+" roomid must be string and not empty"),a(c.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):void 0===t||""==t?(o.logger.error(s.RTM_SEND_BCM+" message is empty"),a(c.kZMRoomSendRoomMessage.error.IM_CONTENT_NULL)):"string"!=typeof t?(o.logger.error(s.RTM_SEND_BCM+" message must be string"),a(c.kZMRoomSendRoomMessage.error.INPUT_PARAM," param message error")):1024<t.length?(o.logger.error(s.RTM_SEND_BCM+" message too long"),a(c.kZMRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG)):(l=o.getRoomModules(e),u.setAttributes({send_seq:c.kZMRoomSendRoomMessage.send_seq(),msg_content:t}),l?l.messageHandler.sendRoomMsg(r,n,e,t,(function(e){e.messageID&&u.setAttributes({msg_id:e.messageID}),d(e)}),a):a(c.kZMRoomSendRoomMessage.error.ROOM_NOT_EXIST))}))}function g(e,t,r){var n=this;return new Promise((function(o,i){var a,u,d=n.getMsgSpan(c.kZMRoomSendCustomCommand.event,e,!0);i=(o=n.stateCenter.proxyRes(d,o,i)).interResolve,o=o.interReject,"string"!=typeof e||""==e?(n.logger.error(s.RTM_SEND_CUSTOM+" roomid must be string and not empty"),o(l.INPUT_PARAM," param roomID error")):r instanceof Array&&!r.find((function(e){return"string"!=typeof e}))?"string"!=typeof t&&"object"!=typeof t?(n.logger.error(s.RTM_SEND_CUSTOM+" custom content must be a non empty string or object"),o(c.kZMRoomSendCustomCommand.error.INPUT_PARAM," param command error")):"string"==typeof t&&1024<t.length?(n.logger.error(s.RTM_SEND_CUSTOM+" command too long"),o(c.kZMRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG)):(a=n.getRoomModules(e),u="string"==typeof t?t:JSON.stringify(t),d.setAttributes({msg_content:u}),a?a.messageHandler.sendCustomCommand(r,t,i,o):o(c.kZMRoomSendCustomCommand.error.ROOM_NOT_EXIST)):(n.logger.error(s.RTM_SEND_CUSTOM+" dstMembers must be string array"),o(c.kZMRoomSendCustomCommand.error.INPUT_PARAM," param toUserList error"))}))}function m(e,t,r,n){var o=this;return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(i,a){var l=o.getMsgSpan(c.kZMLiveSendRoomBigIM.event,e);a=(i=o.stateCenter.proxyRes(l,i,a)).interResolve,i=i.interReject,"string"!=typeof e||""==e?(o.logger.error(s.RTM_SEND_BRM+"roomid must be string and not empty"),i(c.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param roomID error")):void 0===t||""==t?(o.logger.error(s.RTM_SEND_BRM+" message is empty"),i(c.kZMLiveSendRoomBigIM.error.IM_CONTENT_NULL)):"string"!=typeof t?(o.logger.error(s.RTM_SEND_BRM+" message must be string"),i(c.kZMLiveSendRoomBigIM.error.INPUT_PARAM," param message error")):1024<t.length?(o.logger.error(s.RTM_SEND_BRM+" message too long"),i(c.kZMLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG)):(l.setAttributes({msg_content:t}),(l=o.getRoomModules(e))?l.messageHandler.sendBigRoomMessage(r,n,e,t,a,i):i(c.kZMLiveSendRoomBigIM.error.ROOM_NOT_EXIST))}))}function v(e,t,r){var n=this;return new Promise((function(o,i){var a=n.getMsgSpan(c.kZMRoomSendRoomExtraInfo.event,e);i=(o=n.stateCenter.proxyRes(a,o,i)).interResolve,o=o.interReject,"string"!=typeof e||""==e?(n.logger.error(s.RTM_SEND_BCM+" roomid must be string and not empty"),o(c.kZMRoomSendRoomMessage.error.INPUT_PARAM," param roomID error")):t&&"string"==typeof t?128<t.length?(n.logger.error(s.RTM_SEND_RLM+" type is too long"),o({errorCode:c.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):r&&"string"==typeof r?4096<r.length?(n.logger.error(s.RTM_SEND_RLM+" type is too long"),o({errorCode:c.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(a.setAttributes({key:c.kZMRoomSendRoomExtraInfo.key(t),value:c.kZMRoomSendRoomExtraInfo.value(r)}),(a=n.getRoomModules(e))?a.messageHandler.sendReliableMessage(t,r,i,o):o(c.kZMRoomSendRoomExtraInfo.error.ROOM_NOT_EXIST)):(n.logger.error(s.RTM_SEND_RLM+" data must be string"),o({errorCode:c.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code})):(n.logger.error(s.RTM_SEND_RLM+" type must be string"),o({errorCode:c.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code}))}))}var _={_sendBroadcastMessage:f,sendBroadcastMessage:function(e,t){var r=this;return new Promise((function(n,o){f.call(r,e,t).then((function(e){n({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){o(e)}))}))},_sendCustomCommand:g,sendCustomCommand:function(e,t,r){var n=this;return new Promise((function(o,i){g.call(n,e,t,r).then((function(e){o({errorCode:e.errorCode,extendedData:e.extendedData})})).catch((function(e){i(e)}))}))},_sendBarrageMessage:m,sendBarrageMessage:function(e,t){var r=this;return new Promise((function(n,o){m.call(r,e,t).then((function(e){n({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){o(e)}))}))},_setRoomExtraInfo:v,setRoomExtraInfo:function(e,t,r){return v.call(this,e,t,r)},sendRelayMessage:function(e,t,r,n,o){(o=this.getRoomModules(o)||this.stateCenter.roomModulesList[0])?o.messageHandler.sendRelayMessage(e,t,r,n):n&&n(l.ROOM_NOT_EXIST,0)}},y={handlePushRoomMsg:function(e){var t=this.handlePushMsg(e);t[0].messageHandler.handlePushRoomMsg(e=t[1])},handlePushCustomMsg:function(e){var t=this.handlePushMsg(e);t[0].messageHandler.handlePushCustomMsg(e=t[1])},handlePushMergeMsg:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;(t=this.rtm.getRoomModules(t))?t.messageHandler.handlePushMergeMsg(e):this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},handlePushTransMsg:function(e){var t,r=(n=this.handlePushMsg(e))[0],n=null==(n=null==(e=n[1])?void 0:e.header)?void 0:n.room_id;(n=this.rtm.getMsgSpan(c.kZMRoomRecvRoomExtraInfo.event,n)).setAttributes({trans_type:c.kZMRoomRecvRoomExtraInfo.trans_type(null==(t=null==e?void 0:e.body)?void 0:t.trans_type),trans_seq:c.kZMRoomRecvRoomExtraInfo.trans_seq(null==(t=null==e?void 0:e.body)?void 0:t.trans_seq)}),n.end(),r.messageHandler.handlePushTransMsg(e)},handleBigImMsgRsp:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;(t=this.rtm.getRoomModules(t))?t.messageHandler.handleBigImMsgRsp(e):this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},handlePushMsg:function(e){var t=null==(t=null==e?void 0:e.header)?void 0:t.room_id;if(t=this.rtm.getRoomModules(t))return[t,e];this.logger.error(s.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},b={initMessageHandler:function(){this.messageHandler=new h(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this.rtm,this)}};t.default={type:"message",install:function(e,t,r,n){for(var o in _)Object.defineProperty(e.prototype,o,{value:_[o],writable:!1});for(var o in y)Object.defineProperty(r.prototype,o,{value:y[o],writable:!1}),Object.defineProperty(n.prototype,o,{value:y[o],writable:!1});for(var o in b)Object.defineProperty(t.prototype,o,{value:b[o],writable:!1})}}}},r={},e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=23);function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t,r}()},4119:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __nested_webpack_require_1013673__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_1013673__),r.exports}__nested_webpack_require_1013673__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __nested_webpack_exports__=__nested_webpack_require_1013673__(4780);return __nested_webpack_exports__}()},module.exports=t(__webpack_require__(8901))},8901:function(e,t,r){"undefined"!=typeof self&&self,e.exports=function(e){return r=[function(e,t,r){"use strict";var n,o,i=(r=r(7)).Reader,s=r.Writer,a=r.util,l=r.roots.default||(r.roots.default={});function c(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(this.redirect_server=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function x(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function D(e){if(this.trans_seqs=[],this.user_trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function B(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function U(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function j(e){if(this.user_basic_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function H(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function F(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function G(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function q(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function V(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function W(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function K(e){if(this.stream_info=[],this.stream_mix_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Q(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function X(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function J(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ee(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function te(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function re(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ne(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function oe(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ie(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function se(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ae(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function le(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ce(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function de(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function he(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function pe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function fe(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ge(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function me(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ve(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ye(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function be(e){if(this.room_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ee(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Se(e){if(this.stream_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ce(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Te(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function we(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Re(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ke(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Oe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ie(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Pe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ae(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ne(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Le(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Me(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function xe(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function De(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Be(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function je(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function He(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Fe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ge(e){if(this.user_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function qe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ve(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function We(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ye(e){if(this.stream_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ke(e){if(this.stream_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Qe(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Xe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Je(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function et(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function tt(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function rt(e){if(this.trans_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function nt(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}l.proto_switch=((r={}).CommonRsp=(c.prototype.rsp_head=null,c.create=function(e){return new c(e)},c.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},c.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.CommonRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},c),r.RspHead=(u.prototype.code=0,u.prototype.message="",u.create=function(e){return new u(e)},u.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},u.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.RspHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;default:e.skipType(7&o)}}return n},u),r.LoginRoomReq=(d.prototype.app_id=0,d.prototype.id_name=a.newBuffer([]),d.prototype.device_id="",d.prototype.term_type=0,d.prototype.net_type=0,d.prototype.sdk_ver=0,d.prototype.proto_ver=0,d.prototype.nick_name=a.newBuffer([]),d.prototype.client_stamp=a.newBuffer([]),d.prototype.crypt_version=0,d.prototype.k1_sign=a.newBuffer([]),d.prototype.login_token=a.newBuffer([]),d.prototype.relogin_token=a.newBuffer([]),d.prototype.role=0,d.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,d.prototype.room_id=a.newBuffer([]),d.prototype.room_name=a.newBuffer([]),d.prototype.biz_type=0,d.prototype.room_create_flag=0,d.prototype.user_state_flag=0,d.prototype.lv_key="",d.prototype.third_token=a.newBuffer([]),d.prototype.cluster_req=0,d.prototype.user_count_limit=0,d.prototype.relate_service="",d.prototype.biz_version="",d.prototype.login_logic=0,d.prototype.sdk_conn_type=0,d.create=function(e){return new d(e)},d.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(26).string(e.device_id),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(32).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).int32(e.net_type),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(48).uint32(e.sdk_ver),null!=e.proto_ver&&Object.hasOwnProperty.call(e,"proto_ver")&&t.uint32(56).int32(e.proto_ver),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(66).bytes(e.nick_name),null!=e.client_stamp&&Object.hasOwnProperty.call(e,"client_stamp")&&t.uint32(74).bytes(e.client_stamp),null!=e.crypt_version&&Object.hasOwnProperty.call(e,"crypt_version")&&t.uint32(80).uint32(e.crypt_version),null!=e.k1_sign&&Object.hasOwnProperty.call(e,"k1_sign")&&t.uint32(90).bytes(e.k1_sign),null!=e.login_token&&Object.hasOwnProperty.call(e,"login_token")&&t.uint32(98).bytes(e.login_token),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(106).bytes(e.relogin_token),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(112).uint32(e.role),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(120).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(130).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(138).bytes(e.room_name),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(144).uint32(e.biz_type),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(152).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(160).uint32(e.user_state_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(170).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(178).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(184).uint32(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(192).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(202).string(e.relate_service),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(210).string(e.biz_version),null!=e.login_logic&&Object.hasOwnProperty.call(e,"login_logic")&&t.uint32(216).uint32(e.login_logic),null!=e.sdk_conn_type&&Object.hasOwnProperty.call(e,"sdk_conn_type")&&t.uint32(224).int32(e.sdk_conn_type),t},d.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.LoginRoomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.id_name=e.bytes();break;case 3:n.device_id=e.string();break;case 4:n.term_type=e.int32();break;case 5:n.net_type=e.int32();break;case 6:n.sdk_ver=e.uint32();break;case 7:n.proto_ver=e.int32();break;case 8:n.nick_name=e.bytes();break;case 9:n.client_stamp=e.bytes();break;case 10:n.crypt_version=e.uint32();break;case 11:n.k1_sign=e.bytes();break;case 12:n.login_token=e.bytes();break;case 13:n.relogin_token=e.bytes();break;case 14:n.role=e.uint32();break;case 15:n.liveroom_session_id=e.uint64();break;case 16:n.room_id=e.bytes();break;case 17:n.room_name=e.bytes();break;case 18:n.biz_type=e.uint32();break;case 19:n.room_create_flag=e.uint32();break;case 20:n.user_state_flag=e.uint32();break;case 21:n.lv_key=e.string();break;case 22:n.third_token=e.bytes();break;case 23:n.cluster_req=e.uint32();break;case 24:n.user_count_limit=e.uint32();break;case 25:n.relate_service=e.string();break;case 26:n.biz_version=e.string();break;case 27:n.login_logic=e.uint32();break;case 28:n.sdk_conn_type=e.int32();break;default:e.skipType(7&o)}}return n},d),r.LoginRoomRsp=(h.prototype.rsp_head=null,h.prototype.room_id=a.newBuffer([]),h.prototype.heartbeat_interval=0,h.prototype.heartbeat_timeout=0,h.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,h.prototype.crypt_option=0,h.prototype.k2_sign=a.newBuffer([]),h.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.liveroom_hb_interval=0,h.prototype.liveroom_hb_timeout=0,h.prototype.anchor_info=null,h.prototype.stream_seq=0,h.prototype.stream_info=a.emptyArray,h.prototype.stream_fetch_flag=0,h.prototype.lv_key="",h.prototype.zp_key="",h.prototype.online_count=0,h.prototype.bigim_time_window=0,h.prototype.dati_time_window=0,h.prototype.cluster_name="",h.prototype.relogin_token=a.newBuffer([]),h.prototype.stream_mix_info=a.emptyArray,h.prototype.userlist_merge_timeout=0,h.prototype.userlist_interval=0,h.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.trans_seqs=a.emptyArray,h.prototype.stream_list_push_merge_timeout=0,h.prototype.stream_list_hb_wait_merge_time=0,h.prototype.trans_list_seq=0,h.prototype.token_remain_time=0,h.create=function(e){return new h(e)},h.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(24).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(32).uint32(e.heartbeat_timeout),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(40).int64(e.ret_timestamp),null!=e.crypt_option&&Object.hasOwnProperty.call(e,"crypt_option")&&t.uint32(48).uint32(e.crypt_option),null!=e.k2_sign&&Object.hasOwnProperty.call(e,"k2_sign")&&t.uint32(58).bytes(e.k2_sign),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(64).uint64(e.liveroom_session_id),null!=e.liveroom_hb_interval&&Object.hasOwnProperty.call(e,"liveroom_hb_interval")&&t.uint32(72).uint32(e.liveroom_hb_interval),null!=e.liveroom_hb_timeout&&Object.hasOwnProperty.call(e,"liveroom_hb_timeout")&&t.uint32(80).uint32(e.liveroom_hb_timeout),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&l.proto_switch.StAnchorInfo.encode(e.anchor_info,t.uint32(90).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(96).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)l.proto_switch.StStreamInfo.encode(e.stream_info[r],t.uint32(106).fork()).ldelim();if(null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(112).uint32(e.stream_fetch_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(122).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(130).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(136).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(144).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(152).uint32(e.dati_time_window),null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(162).string(e.cluster_name),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(170).bytes(e.relogin_token),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)l.proto_switch.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(178).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(184).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(192).uint32(e.userlist_interval),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(200).uint64(e.room_session_id),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)l.proto_switch.StTransInfo.encode(e.trans_seqs[r],t.uint32(210).fork()).ldelim();return null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(216).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(224).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(232).uint32(e.trans_list_seq),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(240).uint32(e.token_remain_time),t},h.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.LoginRoomRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.proto_switch.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.heartbeat_interval=e.uint32();break;case 4:n.heartbeat_timeout=e.uint32();break;case 5:n.ret_timestamp=e.int64();break;case 6:n.crypt_option=e.uint32();break;case 7:n.k2_sign=e.bytes();break;case 8:n.liveroom_session_id=e.uint64();break;case 9:n.liveroom_hb_interval=e.uint32();break;case 10:n.liveroom_hb_timeout=e.uint32();break;case 11:n.anchor_info=l.proto_switch.StAnchorInfo.decode(e,e.uint32());break;case 12:n.stream_seq=e.uint32();break;case 13:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(l.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 14:n.stream_fetch_flag=e.uint32();break;case 15:n.lv_key=e.string();break;case 16:n.zp_key=e.string();break;case 17:n.online_count=e.uint32();break;case 18:n.bigim_time_window=e.uint32();break;case 19:n.dati_time_window=e.uint32();break;case 20:n.cluster_name=e.string();break;case 21:n.relogin_token=e.bytes();break;case 22:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(l.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 23:n.userlist_merge_timeout=e.uint32();break;case 24:n.userlist_interval=e.uint32();break;case 25:n.room_session_id=e.uint64();break;case 26:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(l.proto_switch.StTransInfo.decode(e,e.uint32()));break;case 27:n.stream_list_push_merge_timeout=e.uint32();break;case 28:n.stream_list_hb_wait_merge_time=e.uint32();break;case 29:n.trans_list_seq=e.uint32();break;case 30:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},h),r.StAnchorInfo=(p.prototype.anchor_id_name=a.newBuffer([]),p.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.anchor_nick_name=a.newBuffer([]),p.create=function(e){return new p(e)},p.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},p.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.StAnchorInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.anchor_id_name=e.bytes();break;case 2:n.anchor_id=e.uint64();break;case 3:n.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return n},p),r.StStreamInfo=(f.prototype.stream_id=a.newBuffer([]),f.prototype.stream_sid="",f.prototype.id_name=a.newBuffer([]),f.prototype.nick_name=a.newBuffer([]),f.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,f.prototype.extra_info=a.newBuffer([]),f.prototype.title=a.newBuffer([]),f.prototype.stream_ver=0,f.prototype.stream_attr=a.newBuffer([]),f.prototype.stream_src=0,f.prototype.stream_state=0,f.prototype.stream_type=0,f.prototype.stream_nid=0,f.create=function(e){return new f(e)},f.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(41).fixed64(e.create_time),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(58).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(64).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(74).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(88).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},f.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.StStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_id=e.bytes();break;case 2:n.stream_sid=e.string();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.create_time=e.fixed64();break;case 6:n.extra_info=e.bytes();break;case 7:n.title=e.bytes();break;case 8:n.stream_ver=e.uint32();break;case 9:n.stream_attr=e.bytes();break;case 10:n.stream_src=e.uint32();break;case 11:n.stream_state=e.uint32();break;case 12:n.stream_type=e.uint32();break;case 13:n.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return n},f),r.StTransSeqInfo=(g.prototype.trans_type=a.newBuffer([]),g.prototype.trans_seq=0,g.create=function(e){return new g(e)},g.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},g.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.StTransSeqInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},g),r.StTransInfo=(m.prototype.trans_channel=a.newBuffer([]),m.prototype.trans_seq_array=a.emptyArray,m.create=function(e){return new m(e)},m.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)l.proto_switch.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},m.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.StTransInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(l.proto_switch.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},m),r.LogoutRoomReq=(v.prototype.logout_code=0,v.prototype.logout_check=a.newBuffer([]),v.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,v.prototype.room_id=a.newBuffer([]),v.prototype.role=0,v.prototype.nickname=a.newBuffer([]),v.prototype.logout_logic=0,v.create=function(e){return new v(e)},v.encode=function(e,t){return t=t||s.create(),null!=e.logout_code&&Object.hasOwnProperty.call(e,"logout_code")&&t.uint32(8).uint32(e.logout_code),null!=e.logout_check&&Object.hasOwnProperty.call(e,"logout_check")&&t.uint32(18).bytes(e.logout_check),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(24).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(34).bytes(e.room_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(50).bytes(e.nickname),null!=e.logout_logic&&Object.hasOwnProperty.call(e,"logout_logic")&&t.uint32(56).uint32(e.logout_logic),t},v.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.LogoutRoomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.logout_code=e.uint32();break;case 2:n.logout_check=e.bytes();break;case 3:n.liveroom_session_id=e.uint64();break;case 4:n.room_id=e.bytes();break;case 5:n.role=e.uint32();break;case 6:n.nickname=e.bytes();break;case 7:n.logout_logic=e.uint32();break;default:e.skipType(7&o)}}return n},v),r.LogoutRoomRsp=(_.prototype.rsp_head=null,_.create=function(e){return new _(e)},_.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},_.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.LogoutRoomRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},_),r.TcpHbReq=(y.prototype.id_name=a.newBuffer([]),y.create=function(e){return new y(e)},y.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),t},y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.TcpHbReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.id_name=e.bytes():e.skipType(7&o)}return n},y),r.TcpHbRsp=(b.prototype.rsp_head=null,b.prototype.heartbeat_interval=0,b.prototype.heartbeat_timeout=0,b.prototype.server_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,b.create=function(e){return new b(e)},b.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(16).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(24).uint32(e.heartbeat_timeout),null!=e.server_timestamp&&Object.hasOwnProperty.call(e,"server_timestamp")&&t.uint32(32).int64(e.server_timestamp),t},b.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.TcpHbRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.proto_switch.RspHead.decode(e,e.uint32());break;case 2:n.heartbeat_interval=e.uint32();break;case 3:n.heartbeat_timeout=e.uint32();break;case 4:n.server_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},b),r.TermType=(o={},(n=Object.create(o))[o[0]="TT_NONE"]=0,n[o[1]="TT_PC"]=1,n[o[2]="TT_IOS"]=2,n[o[3]="TT_ANDROID"]=3,n[o[4]="TT_MAC"]=4,n[o[5]="TT_LINUX"]=5,n[o[6]="TT_WEB"]=6,n[o[7]="TT_MINIPROGRAM"]=7,n[o[32]="TT_UNKNOWN"]=32,n),r.NetType=(o={},(n=Object.create(o))[o[0]="NT_NONE"]=0,n[o[1]="NT_LINE"]=1,n[o[2]="NT_WIFI"]=2,n[o[3]="NT_2G"]=3,n[o[4]="NT_3G"]=4,n[o[5]="NT_4G"]=5,n[o[32]="NT_UNKNOWN"]=32,n),r.ProductType=(o={},(n=Object.create(o))[o[0]="PRODUCT_TYPE_NONE"]=0,n[o[1]="PRODUCT_TYPE_LIVEROOM"]=1,n[o[2]="PRODUCT_TYPE_IM"]=2,n),r.LiveroomProtoVersion=(o={},(n=Object.create(o))[o[0]="PROTO_VERSION_NONE"]=0,n[o[131072]="RPOTO_V020000"]=131072,n),r.SdkConnType=(o={},(n=Object.create(o))[o[0]="SdkConnType_None"]=0,n[o[1]="SdkConnType_Tcp"]=1,n[o[2]="SdkConnType_Websocket"]=2,n),r.Header=(E.prototype.cmd="",E.prototype.seq=0,E.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.app_id=0,E.prototype.user_id="",E.prototype.session_id=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.user_nid=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.controls=a.newBuffer([]),E.prototype.product=0,E.prototype.flags=a.newBuffer([]),E.create=function(e){return new E(e)},E.encode=function(e,t){return t=t||s.create(),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(10).string(e.cmd),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint32(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(32).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(48).int64(e.session_id),null!=e.user_nid&&Object.hasOwnProperty.call(e,"user_nid")&&t.uint32(56).int64(e.user_nid),null!=e.controls&&Object.hasOwnProperty.call(e,"controls")&&t.uint32(66).bytes(e.controls),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(72).int32(e.product),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(82).bytes(e.flags),t},E.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.Header;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.cmd=e.string();break;case 2:n.seq=e.uint32();break;case 3:n.timestamp=e.int64();break;case 4:n.app_id=e.uint32();break;case 5:n.user_id=e.string();break;case 6:n.session_id=e.int64();break;case 7:n.user_nid=e.int64();break;case 8:n.controls=e.bytes();break;case 9:n.product=e.int32();break;case 10:n.flags=e.bytes();break;default:e.skipType(7&o)}}return n},E),r.PushKickout=(S.prototype.reason=0,S.prototype.message="",S.prototype.need_relogin=0,S.create=function(e){return new S(e)},S.encode=function(e,t){return t=t||s.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).uint32(e.reason),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.need_relogin&&Object.hasOwnProperty.call(e,"need_relogin")&&t.uint32(24).uint32(e.need_relogin),t},S.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.PushKickout;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.reason=e.uint32();break;case 2:n.message=e.string();break;case 3:n.need_relogin=e.uint32();break;default:e.skipType(7&o)}}return n},S),r.PushRedirect2Sdk=(C.prototype.redirect_server=a.emptyArray,C.create=function(e){return new C(e)},C.encode=function(e,t){if(t=t||s.create(),null!=e.redirect_server&&e.redirect_server.length)for(var r=0;r<e.redirect_server.length;++r)t.uint32(10).string(e.redirect_server[r]);return t},C.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.PushRedirect2Sdk;e.pos<r;){var o=e.uint32();o>>>3==1?(n.redirect_server&&n.redirect_server.length||(n.redirect_server=[]),n.redirect_server.push(e.string())):e.skipType(7&o)}return n},C),r.PushReq=(T.prototype.head=null,T.prototype.msg_body=a.newBuffer([]),T.create=function(e){return new T(e)},T.encode=function(e,t){return t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&l.proto_switch.PushReqHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(18).bytes(e.msg_body),t},T.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.PushReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.head=l.proto_switch.PushReqHead.decode(e,e.uint32());break;case 2:n.msg_body=e.bytes();break;default:e.skipType(7&o)}}return n},T),r.PushReqHead=(w.prototype.sub_cmd="",w.prototype.sender_user_id="",w.prototype.qos_flag=0,w.prototype.msg_id="",w.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,w.prototype.room_id=a.newBuffer([]),w.prototype.sender_user_nid=a.Long?a.Long.fromBits(0,0,!0):0,w.create=function(e){return new w(e)},w.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sender_user_id&&Object.hasOwnProperty.call(e,"sender_user_id")&&t.uint32(18).string(e.sender_user_id),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(24).uint32(e.qos_flag),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(40).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(50).bytes(e.room_id),null!=e.sender_user_nid&&Object.hasOwnProperty.call(e,"sender_user_nid")&&t.uint32(56).uint64(e.sender_user_nid),t},w.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.PushReqHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sender_user_id=e.string();break;case 3:n.qos_flag=e.uint32();break;case 4:n.msg_id=e.string();break;case 5:n.send_time=e.int64();break;case 6:n.room_id=e.bytes();break;case 7:n.sender_user_nid=e.uint64();break;default:e.skipType(7&o)}}return n},w),r.PushRsp=(R.prototype.code=0,R.prototype.message="",R.prototype.sub_cmd="",R.prototype.msg_id="",R.prototype.server_send_time=a.Long?a.Long.fromBits(0,0,!1):0,R.create=function(e){return new R(e)},R.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(26).string(e.sub_cmd),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(40).int64(e.server_send_time),t},R.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.PushRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;case 3:n.sub_cmd=e.string();break;case 4:n.msg_id=e.string();break;case 5:n.server_send_time=e.int64();break;default:e.skipType(7&o)}}return n},R),r.MergePushHead=(k.prototype.qos_flag=0,k.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,k.prototype.room_id=a.newBuffer([]),k.create=function(e){return new k(e)},k.encode=function(e,t){return t=t||s.create(),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(8).uint32(e.qos_flag),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(16).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(26).bytes(e.room_id),t},k.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.MergePushHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.qos_flag=e.uint32();break;case 2:n.send_time=e.int64();break;case 3:n.room_id=e.bytes();break;default:e.skipType(7&o)}}return n},k),r.MergePushInfo=(O.prototype.sub_cmd="",O.prototype.sub_seq=0,O.prototype.sender_nid=a.Long?a.Long.fromBits(0,0,!0):0,O.prototype.msg_id=a.newBuffer([]),O.prototype.msg_body=a.newBuffer([]),O.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,O.create=function(e){return new O(e)},O.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.sender_nid&&Object.hasOwnProperty.call(e,"sender_nid")&&t.uint32(24).uint64(e.sender_nid),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).bytes(e.msg_id),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(42).bytes(e.msg_body),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(48).int64(e.msg_timestamp),t},O.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.MergePushInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sub_seq=e.uint32();break;case 3:n.sender_nid=e.uint64();break;case 4:n.msg_id=e.bytes();break;case 5:n.msg_body=e.bytes();break;case 6:n.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},O),r.CmdMergePushReq=(I.prototype.head=null,I.prototype.messages=a.emptyArray,I.create=function(e){return new I(e)},I.encode=function(e,t){if(t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&l.proto_switch.MergePushHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)l.proto_switch.MergePushInfo.encode(e.messages[r],t.uint32(18).fork()).ldelim();return t},I.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.CmdMergePushReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.head=l.proto_switch.MergePushHead.decode(e,e.uint32());break;case 2:n.messages&&n.messages.length||(n.messages=[]),n.messages.push(l.proto_switch.MergePushInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},I),r.CmdMergePushRspInfo=(P.prototype.sub_cmd="",P.prototype.sub_seq=0,P.prototype.msg_id=a.newBuffer([]),P.create=function(e){return new P(e)},P.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(26).bytes(e.msg_id),t},P.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.CmdMergePushRspInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sub_seq=e.uint32();break;case 3:n.msg_id=e.bytes();break;default:e.skipType(7&o)}}return n},P),r.CmdMergePushRsp=(A.prototype.messages=a.emptyArray,A.create=function(e){return new A(e)},A.encode=function(e,t){if(t=t||s.create(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)l.proto_switch.CmdMergePushRspInfo.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},A.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.proto_switch.CmdMergePushRsp;e.pos<r;){var o=e.uint32();o>>>3==1?(n.messages&&n.messages.length||(n.messages=[]),n.messages.push(l.proto_switch.CmdMergePushRspInfo.decode(e,e.uint32()))):e.skipType(7&o)}return n},A),r),l.liveroom_cs=((o={}).ReqHead=(N.prototype.room_id="",N.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,N.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,N.create=function(e){return new N(e)},N.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(16).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(24).uint64(e.room_session_id),t},N.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.ReqHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.string();break;case 2:n.user_session_id=e.uint64();break;case 3:n.room_session_id=e.uint64();break;default:e.skipType(7&o)}}return n},N),o.RspHead=(L.prototype.code=0,L.prototype.message="",L.create=function(e){return new L(e)},L.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},L.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RspHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;default:e.skipType(7&o)}}return n},L),o.CommonRsp=(M.prototype.rsp_head=null,M.create=function(e){return new M(e)},M.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},M.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.CommonRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},M),o.HbReq=(x.prototype.req_head=null,x.prototype.role=0,x.prototype.lv_key="",x.create=function(e){return new x(e)},x.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).uint32(e.role),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(26).string(e.lv_key),t},x.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.HbReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.role=e.uint32();break;case 3:n.lv_key=e.string();break;default:e.skipType(7&o)}}return n},x),o.HbRsp=(D.prototype.rsp_head=null,D.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,D.prototype.hb_interval=0,D.prototype.hb_timeout=0,D.prototype.stream_seq=0,D.prototype.user_seq=a.Long?a.Long.fromBits(0,0,!1):0,D.prototype.online_count=0,D.prototype.bigim_time_window=0,D.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,D.prototype.trans_seqs=a.emptyArray,D.prototype.user_trans_seqs=a.emptyArray,D.prototype.StreamRefresh=0,D.prototype.trans_list_seq=0,D.create=function(e){return new D(e)},D.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(16).int64(e.ret_timestamp),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(24).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(32).uint32(e.hb_timeout),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(40).uint32(e.stream_seq),null!=e.user_seq&&Object.hasOwnProperty.call(e,"user_seq")&&t.uint32(48).int64(e.user_seq),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(56).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(64).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(72).int64(e.dati_time_window),null!=e.trans_seqs&&e.trans_seqs.length)for(var r=0;r<e.trans_seqs.length;++r)l.liveroom_cs.StTransChannelSeq.encode(e.trans_seqs[r],t.uint32(82).fork()).ldelim();if(null!=e.user_trans_seqs&&e.user_trans_seqs.length)for(r=0;r<e.user_trans_seqs.length;++r)l.liveroom_cs.StTransChannelSeq.encode(e.user_trans_seqs[r],t.uint32(90).fork()).ldelim();return null!=e.StreamRefresh&&Object.hasOwnProperty.call(e,"StreamRefresh")&&t.uint32(96).uint32(e.StreamRefresh),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(104).uint32(e.trans_list_seq),t},D.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.HbRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.ret_timestamp=e.int64();break;case 3:n.hb_interval=e.uint32();break;case 4:n.hb_timeout=e.uint32();break;case 5:n.stream_seq=e.uint32();break;case 6:n.user_seq=e.int64();break;case 7:n.online_count=e.uint32();break;case 8:n.bigim_time_window=e.uint32();break;case 9:n.dati_time_window=e.int64();break;case 10:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(l.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 11:n.user_trans_seqs&&n.user_trans_seqs.length||(n.user_trans_seqs=[]),n.user_trans_seqs.push(l.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 12:n.StreamRefresh=e.uint32();break;case 13:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},D),o.StTransSeq=(B.prototype.trans_type=a.newBuffer([]),B.prototype.trans_seq=0,B.create=function(e){return new B(e)},B.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},B.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransSeq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},B),o.StTransChannelSeq=(U.prototype.trans_channel=a.newBuffer([]),U.prototype.trans_seq_array=a.emptyArray,U.create=function(e){return new U(e)},U.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)l.liveroom_cs.StTransSeq.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},U.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransChannelSeq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(l.liveroom_cs.StTransSeq.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},U),o.UserlistReq=(Z.prototype.req_head=null,Z.prototype.sort_type=0,Z.prototype.user_index=0,Z.create=function(e){return new Z(e)},Z.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(16).uint32(e.sort_type),null!=e.user_index&&Object.hasOwnProperty.call(e,"user_index")&&t.uint32(24).uint32(e.user_index),t},Z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.UserlistReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.sort_type=e.uint32();break;case 3:n.user_index=e.uint32();break;default:e.skipType(7&o)}}return n},Z),o.UserlistRsp=(j.prototype.rsp_head=null,j.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!0):0,j.prototype.server_user_index=a.Long?a.Long.fromBits(0,0,!1):0,j.prototype.ret_user_index=a.Long?a.Long.fromBits(0,0,!1):0,j.prototype.user_basic_list=a.emptyArray,j.create=function(e){return new j(e)},j.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).uint64(e.server_user_seq),null!=e.server_user_index&&Object.hasOwnProperty.call(e,"server_user_index")&&t.uint32(24).int64(e.server_user_index),null!=e.ret_user_index&&Object.hasOwnProperty.call(e,"ret_user_index")&&t.uint32(32).int64(e.ret_user_index),null!=e.user_basic_list&&e.user_basic_list.length)for(var r=0;r<e.user_basic_list.length;++r)l.liveroom_cs.StUserBasicDef.encode(e.user_basic_list[r],t.uint32(42).fork()).ldelim();return t},j.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.UserlistRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.server_user_seq=e.uint64();break;case 3:n.server_user_index=e.int64();break;case 4:n.ret_user_index=e.int64();break;case 5:n.user_basic_list&&n.user_basic_list.length||(n.user_basic_list=[]),n.user_basic_list.push(l.liveroom_cs.StUserBasicDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},j),o.StUserBasicDef=(H.prototype.id_name=a.newBuffer([]),H.prototype.nick_name=a.newBuffer([]),H.prototype.role=0,H.create=function(e){return new H(e)},H.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),t},H.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StUserBasicDef;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;default:e.skipType(7&o)}}return n},H),o.StreamAddReq=(F.prototype.req_head=null,F.prototype.stream_id=a.newBuffer([]),F.prototype.title=a.newBuffer([]),F.prototype.stream_attr=a.newBuffer([]),F.prototype.extra_info=a.newBuffer([]),F.prototype.client_req_seq=0,F.prototype.nickname=a.newBuffer([]),F.prototype.login_mode=0,F.prototype.stream_type=0,F.prototype.third_token=a.newBuffer([]),F.create=function(e){return new F(e)},F.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(34).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(48).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(58).bytes(e.nickname),null!=e.login_mode&&Object.hasOwnProperty.call(e,"login_mode")&&t.uint32(64).uint32(e.login_mode),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(72).uint32(e.stream_type),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(82).bytes(e.third_token),t},F.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamAddReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_id=e.bytes();break;case 3:n.title=e.bytes();break;case 4:n.stream_attr=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.client_req_seq=e.uint32();break;case 7:n.nickname=e.bytes();break;case 8:n.login_mode=e.uint32();break;case 9:n.stream_type=e.uint32();break;case 10:n.third_token=e.bytes();break;default:e.skipType(7&o)}}return n},F),o.StreamAddRsp=(z.prototype.rsp_head=null,z.prototype.stream_seq=0,z.prototype.stream_sid="",z.prototype.stream_ver=0,z.prototype.stream_nid=0,z.prototype.token_remain_time=0,z.create=function(e){return new z(e)},z.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(26).string(e.stream_sid),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(32).uint32(e.stream_ver),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(40).uint32(e.stream_nid),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(48).uint32(e.token_remain_time),t},z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamAddRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_sid=e.string();break;case 4:n.stream_ver=e.uint32();break;case 5:n.stream_nid=e.uint32();break;case 6:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},z),o.StreamDeleteReq=(G.prototype.req_head=null,G.prototype.stream_sid="",G.prototype.stream_id=a.newBuffer([]),G.prototype.client_req_seq=0,G.create=function(e){return new G(e)},G.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(32).uint32(e.client_req_seq),t},G.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamDeleteReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_sid=e.string();break;case 3:n.stream_id=e.bytes();break;case 4:n.client_req_seq=e.uint32();break;default:e.skipType(7&o)}}return n},G),o.StreamDeleteRsp=(q.prototype.rsp_head=null,q.prototype.stream_seq=0,q.prototype.stream_ver=0,q.create=function(e){return new q(e)},q.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamDeleteRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return n},q),o.StreamUpdateReq=(V.prototype.req_head=null,V.prototype.stream_sid="",V.prototype.stream_id=a.newBuffer([]),V.prototype.title=a.newBuffer([]),V.prototype.stream_attr=a.newBuffer([]),V.prototype.extra_info=a.newBuffer([]),V.prototype.client_req_seq=0,V.prototype.nickname=a.newBuffer([]),V.create=function(e){return new V(e)},V.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(34).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(42).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(56).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(66).bytes(e.nickname),t},V.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamUpdateReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_sid=e.string();break;case 3:n.stream_id=e.bytes();break;case 4:n.title=e.bytes();break;case 5:n.stream_attr=e.bytes();break;case 6:n.extra_info=e.bytes();break;case 7:n.client_req_seq=e.uint32();break;case 8:n.nickname=e.bytes();break;default:e.skipType(7&o)}}return n},V),o.StreamUpdateRsp=(W.prototype.rsp_head=null,W.prototype.stream_seq=0,W.prototype.stream_ver=0,W.create=function(e){return new W(e)},W.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},W.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamUpdateRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return n},W),o.StreamListReq=(Y.prototype.req_head=null,Y.create=function(e){return new Y(e)},Y.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},Y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamListReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return n},Y),o.StreamListRsp=(K.prototype.rsp_head=null,K.prototype.stream_seq=0,K.prototype.stream_info=a.emptyArray,K.prototype.stream_refresh=0,K.prototype.stream_mix_info=a.emptyArray,K.create=function(e){return new K(e)},K.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)l.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();if(null!=e.stream_refresh&&Object.hasOwnProperty.call(e,"stream_refresh")&&t.uint32(32).uint32(e.stream_refresh),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)l.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(42).fork()).ldelim();return t},K.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StreamListRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(l.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 4:n.stream_refresh=e.uint32();break;case 5:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(l.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},K),o.StStreamInfo=($.prototype.stream_sid="",$.prototype.stream_id=a.newBuffer([]),$.prototype.id_name=a.newBuffer([]),$.prototype.nick_name=a.newBuffer([]),$.prototype.extra_info=a.newBuffer([]),$.prototype.title=a.newBuffer([]),$.prototype.stream_ver=0,$.prototype.stream_attr=a.newBuffer([]),$.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,$.prototype.stream_src=0,$.prototype.state=0,$.prototype.stream_type=0,$.prototype.stream_nid=0,$.create=function(e){return new $(e)},$.encode=function(e,t){return t=t||s.create(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(10).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(56).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(66).bytes(e.stream_attr),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(72).int64(e.create_time),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(88).uint32(e.state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},$.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_sid=e.string();break;case 2:n.stream_id=e.bytes();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.title=e.bytes();break;case 7:n.stream_ver=e.uint32();break;case 8:n.stream_attr=e.bytes();break;case 9:n.create_time=e.int64();break;case 10:n.stream_src=e.uint32();break;case 11:n.state=e.uint32();break;case 12:n.stream_type=e.uint32();break;case 13:n.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return n},$),o.StDstUser=(Q.prototype.id_name=a.newBuffer([]),Q.prototype.id=a.Long?a.Long.fromBits(0,0,!0):0,Q.create=function(e){return new Q(e)},Q.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint64(e.id),t},Q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StDstUser;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.id=e.uint64();break;default:e.skipType(7&o)}}return n},Q),o.SignalLiveReq=(X.prototype.req_head=null,X.prototype.push_message=a.newBuffer([]),X.prototype.dst_userlist=a.emptyArray,X.create=function(e){return new X(e)},X.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},X.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},X),o.SignalLiveRsp=(J.prototype.rsp_head=null,J.create=function(e){return new J(e)},J.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},J.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},J),o.SignalLiveResultReq=(ee.prototype.req_head=null,ee.prototype.push_message=a.newBuffer([]),ee.prototype.dst_userlist=a.emptyArray,ee.create=function(e){return new ee(e)},ee.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveResultReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ee),o.SignalLiveResulRsp=(te.prototype.rsp_head=null,te.create=function(e){return new te(e)},te.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveResulRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},te),o.SignalLiveInviteReq=(re.prototype.req_head=null,re.prototype.push_message=a.newBuffer([]),re.prototype.dst_userlist=a.emptyArray,re.create=function(e){return new re(e)},re.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveInviteReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},re),o.SignalLiveInviteRsp=(ne.prototype.rsp_head=null,ne.create=function(e){return new ne(e)},ne.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveInviteRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ne),o.SignalLiveStopReq=(oe.prototype.req_head=null,oe.prototype.push_message=a.newBuffer([]),oe.prototype.dst_userlist=a.emptyArray,oe.create=function(e){return new oe(e)},oe.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveStopReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},oe),o.SignalLiveStopRsp=(ie.prototype.rsp_head=null,ie.create=function(e){return new ie(e)},ie.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveStopRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ie),o.SignalLiveCustomReq=(se.prototype.req_head=null,se.prototype.push_message=a.newBuffer([]),se.prototype.dst_userlist=a.emptyArray,se.create=function(e){return new se(e)},se.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveCustomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},se),o.SignalLiveCustomRsp=(ae.prototype.rsp_head=null,ae.create=function(e){return new ae(e)},ae.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.SignalLiveCustomRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ae),o.ImChatReq=(le.prototype.req_head=null,le.prototype.msg_category=0,le.prototype.msg_type=0,le.prototype.msg_priority=0,le.prototype.msg_content=a.newBuffer([]),le.prototype.dst_userlist=a.emptyArray,le.create=function(e){return new le(e)},le.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(16).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(24).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(32).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(42).bytes(e.msg_content),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)l.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(50).fork()).ldelim();return t},le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.ImChatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.msg_category=e.uint32();break;case 3:n.msg_type=e.uint32();break;case 4:n.msg_priority=e.uint32();break;case 5:n.msg_content=e.bytes();break;case 6:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(l.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},le),o.ImChatRsp=(ce.prototype.rsp_head=null,ce.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,ce.create=function(e){return new ce(e)},ce.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(16).uint64(e.msg_id),t},ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.ImChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.msg_id=e.uint64();break;default:e.skipType(7&o)}}return n},ce),o.ImGethatReq=(ue.prototype.req_head=null,ue.prototype.msg_priority=0,ue.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,ue.prototype.sort_type=0,ue.prototype.msg_count=0,ue.create=function(e){return new ue(e)},ue.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(16).uint32(e.msg_priority),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(24).uint64(e.msg_id),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(32).uint32(e.sort_type),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(40).uint32(e.msg_count),t},ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.ImGethatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.msg_priority=e.uint32();break;case 3:n.msg_id=e.uint64();break;case 4:n.sort_type=e.uint32();break;case 5:n.msg_count=e.uint32();break;default:e.skipType(7&o)}}return n},ue),o.ImGetChatRsp=(de.prototype.rsp_head=null,de.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.msg_data=a.emptyArray,de.create=function(e){return new de(e)},de.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)l.liveroom_cs.StMsgData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},de.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.ImGetChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.server_msg_id=e.uint64();break;case 3:n.ret_msg_id=e.uint64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(l.liveroom_cs.StMsgData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},de),o.StMsgData=(he.prototype.id_name=a.newBuffer([]),he.prototype.nick_name=a.newBuffer([]),he.prototype.role=0,he.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.msg_category=0,he.prototype.msg_type=0,he.prototype.msg_priority=0,he.prototype.msg_content=a.newBuffer([]),he.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,he.create=function(e){return new he(e)},he.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},he.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StMsgData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msg_id=e.uint64();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_priority=e.uint32();break;case 8:n.msg_content=e.bytes();break;case 9:n.send_time=e.int64();break;default:e.skipType(7&o)}}return n},he),o.EnterReq=(pe.prototype.req_head=null,pe.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.nick_name=a.newBuffer([]),pe.prototype.role=0,pe.prototype.net_type=0,pe.prototype.config=null,pe.prototype.lv_key="",pe.prototype.third_token=a.newBuffer([]),pe.prototype.cluster_req=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.user_count_limit=0,pe.prototype.relate_service="",pe.prototype.conn_type=0,pe.prototype.room_name=a.newBuffer([]),pe.create=function(e){return new pe(e)},pe.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).uint32(e.net_type),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&l.liveroom_cs.StConfigList.encode(e.config,t.uint32(50).fork()).ldelim(),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(58).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(66).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(72).uint64(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(80).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(90).string(e.relate_service),null!=e.conn_type&&Object.hasOwnProperty.call(e,"conn_type")&&t.uint32(96).uint32(e.conn_type),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(106).bytes(e.room_name),t},pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.EnterReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.switch_session_id=e.uint64();break;case 3:n.nick_name=e.bytes();break;case 4:n.role=e.uint32();break;case 5:n.net_type=e.uint32();break;case 6:n.config=l.liveroom_cs.StConfigList.decode(e,e.uint32());break;case 7:n.lv_key=e.string();break;case 8:n.third_token=e.bytes();break;case 9:n.cluster_req=e.uint64();break;case 10:n.user_count_limit=e.uint32();break;case 11:n.relate_service=e.string();break;case 12:n.conn_type=e.uint32();break;case 13:n.room_name=e.bytes();break;default:e.skipType(7&o)}}return n},pe),o.EnterRsp=(fe.prototype.rsp_head=null,fe.prototype.room_id=a.newBuffer([]),fe.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.user_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,fe.prototype.bigim_time_window=0,fe.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,fe.prototype.room_id32=0,fe.prototype.hb_interval=0,fe.prototype.hb_timeout=0,fe.prototype.lv_key="",fe.prototype.zp_key="",fe.prototype.online_count=0,fe.prototype.anchor_info=null,fe.prototype.stream_seq=0,fe.prototype.stream_info=a.emptyArray,fe.prototype.stream_mix_info=a.emptyArray,fe.prototype.userlist_merge_timeout=0,fe.prototype.userlist_interval=0,fe.prototype.stream_list_push_merge_timeout=0,fe.prototype.stream_list_hb_wait_merge_time=0,fe.prototype.trans_list_seq=0,fe.prototype.trans_seqs=a.emptyArray,fe.prototype.cluster_name="",fe.prototype.token_remain_time=0,fe.prototype.stream_fetch_flag=0,fe.create=function(e){return new fe(e)},fe.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(24).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(32).uint64(e.room_session_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(40).uint64(e.user_id),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(49).fixed64(e.ret_timestamp),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(56).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(64).int64(e.dati_time_window),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(72).uint32(e.room_id32),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(80).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(88).uint32(e.hb_timeout),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(98).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(106).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(112).uint32(e.online_count),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&l.liveroom_cs.StAnchorInfo.encode(e.anchor_info,t.uint32(122).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(128).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)l.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(138).fork()).ldelim();if(null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)l.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(146).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(152).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(160).uint32(e.userlist_interval),null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(168).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(176).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(184).uint32(e.trans_list_seq),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)l.liveroom_cs.StTransInfo.encode(e.trans_seqs[r],t.uint32(194).fork()).ldelim();return null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(202).string(e.cluster_name),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(208).uint32(e.token_remain_time),null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(216).uint32(e.stream_fetch_flag),t},fe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.EnterRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.user_session_id=e.uint64();break;case 4:n.room_session_id=e.uint64();break;case 5:n.user_id=e.uint64();break;case 6:n.ret_timestamp=e.fixed64();break;case 7:n.bigim_time_window=e.uint32();break;case 8:n.dati_time_window=e.int64();break;case 9:n.room_id32=e.uint32();break;case 10:n.hb_interval=e.uint32();break;case 11:n.hb_timeout=e.uint32();break;case 12:n.lv_key=e.string();break;case 13:n.zp_key=e.string();break;case 14:n.online_count=e.uint32();break;case 15:n.anchor_info=l.liveroom_cs.StAnchorInfo.decode(e,e.uint32());break;case 16:n.stream_seq=e.uint32();break;case 17:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(l.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 18:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(l.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 19:n.userlist_merge_timeout=e.uint32();break;case 20:n.userlist_interval=e.uint32();break;case 21:n.stream_list_push_merge_timeout=e.uint32();break;case 22:n.stream_list_hb_wait_merge_time=e.uint32();break;case 23:n.trans_list_seq=e.uint32();break;case 24:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(l.liveroom_cs.StTransInfo.decode(e,e.uint32()));break;case 25:n.cluster_name=e.string();break;case 26:n.token_remain_time=e.uint32();break;case 27:n.stream_fetch_flag=e.uint32();break;default:e.skipType(7&o)}}return n},fe),o.StAnchorInfo=(ge.prototype.anchor_id_name=a.newBuffer([]),ge.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,ge.prototype.anchor_nick_name=a.newBuffer([]),ge.create=function(e){return new ge(e)},ge.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StAnchorInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.anchor_id_name=e.bytes();break;case 2:n.anchor_id=e.uint64();break;case 3:n.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return n},ge),o.QuitReq=(me.prototype.req_head=null,me.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,me.prototype.room_id32=0,me.prototype.nick_name=a.newBuffer([]),me.prototype.role=0,me.prototype.net_type=0,me.prototype.config_list=null,me.create=function(e){return new me(e)},me.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(48).uint32(e.net_type),null!=e.config_list&&Object.hasOwnProperty.call(e,"config_list")&&l.liveroom_cs.StConfigList.encode(e.config_list,t.uint32(58).fork()).ldelim(),t},me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.QuitReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.switch_session_id=e.uint64();break;case 3:n.room_id32=e.uint32();break;case 4:n.nick_name=e.bytes();break;case 5:n.role=e.uint32();break;case 6:n.net_type=e.uint32();break;case 7:n.config_list=l.liveroom_cs.StConfigList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},me),o.StConfigList=(ve.prototype.room_create_flag=0,ve.prototype.user_state_flag=0,ve.create=function(e){return new ve(e)},ve.encode=function(e,t){return t=t||s.create(),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(8).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(16).uint32(e.user_state_flag),t},ve.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StConfigList;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_create_flag=e.uint32();break;case 2:n.user_state_flag=e.uint32();break;default:e.skipType(7&o)}}return n},ve),o.QuitRsp=(_e.prototype.rsp_head=null,_e.prototype.room_id=a.newBuffer([]),_e.prototype.room_id32=0,_e.create=function(e){return new _e(e)},_e.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),t},_e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.QuitRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.room_id32=e.uint32();break;default:e.skipType(7&o)}}return n},_e),o.RoomListReq=(ye.prototype.req_head=null,ye.create=function(e){return new ye(e)},ye.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RoomListReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ye),o.RoomListRsp=(be.prototype.rsp_head=null,be.prototype.room_list=a.emptyArray,be.create=function(e){return new be(e)},be.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_list&&e.room_list.length)for(var r=0;r<e.room_list.length;++r)l.liveroom_cs.StRoomListRoom.encode(e.room_list[r],t.uint32(18).fork()).ldelim();return t},be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RoomListRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_list&&n.room_list.length||(n.room_list=[]),n.room_list.push(l.liveroom_cs.StRoomListRoom.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},be),o.StRoomListStream=(Ee.prototype.stream_id=a.newBuffer([]),Ee.create=function(e){return new Ee(e)},Ee.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),t},Ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StRoomListStream;e.pos<r;){var o=e.uint32();o>>>3==1?n.stream_id=e.bytes():e.skipType(7&o)}return n},Ee),o.StRoomListRoom=(Se.prototype.room_id=a.newBuffer([]),Se.prototype.room_name=a.newBuffer([]),Se.prototype.anchor_id_name=a.newBuffer([]),Se.prototype.anchor_nick_name=a.newBuffer([]),Se.prototype.stream_list=a.emptyArray,Se.create=function(e){return new Se(e)},Se.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(18).bytes(e.room_name),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(26).bytes(e.anchor_id_name),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(34).bytes(e.anchor_nick_name),null!=e.stream_list&&e.stream_list.length)for(var r=0;r<e.stream_list.length;++r)l.liveroom_cs.StRoomListStream.encode(e.stream_list[r],t.uint32(42).fork()).ldelim();return t},Se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StRoomListRoom;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.room_name=e.bytes();break;case 3:n.anchor_id_name=e.bytes();break;case 4:n.anchor_nick_name=e.bytes();break;case 5:n.stream_list&&n.stream_list.length||(n.stream_list=[]),n.stream_list.push(l.liveroom_cs.StRoomListStream.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Se),o.StTransSeqInfo=(Ce.prototype.trans_type=a.newBuffer([]),Ce.prototype.trans_seq=0,Ce.create=function(e){return new Ce(e)},Ce.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},Ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransSeqInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Ce),o.StTransInfo=(Te.prototype.trans_channel=a.newBuffer([]),Te.prototype.trans_seq_array=a.emptyArray,Te.create=function(e){return new Te(e)},Te.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)l.liveroom_cs.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},Te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(l.liveroom_cs.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Te),o.TransReq=(we.prototype.req_head=null,we.prototype.nick_name=a.newBuffer([]),we.prototype.role=0,we.prototype.trans_type=a.newBuffer([]),we.prototype.trans_data=a.newBuffer([]),we.prototype.trans_local_seq=0,we.prototype.trans_channel=a.newBuffer([]),we.create=function(e){return new we(e)},we.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(34).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(42).bytes(e.trans_data),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(48).uint32(e.trans_local_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(58).bytes(e.trans_channel),t},we.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.TransReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.trans_type=e.bytes();break;case 5:n.trans_data=e.bytes();break;case 6:n.trans_local_seq=e.uint32();break;case 7:n.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return n},we),o.TransRsp=(Re.prototype.rsp_head=null,Re.prototype.trans_type=a.newBuffer([]),Re.prototype.trans_seq=0,Re.prototype.trans_list_seq=0,Re.prototype.trans_channel=a.newBuffer([]),Re.create=function(e){return new Re(e)},Re.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(18).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(42).bytes(e.trans_channel),t},Re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.TransRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_type=e.bytes();break;case 3:n.trans_seq=e.uint32();break;case 4:n.trans_list_seq=e.uint32();break;case 5:n.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return n},Re),o.TransFetchReq=(ke.prototype.req_head=null,ke.prototype.trans_channel=a.newBuffer([]),ke.prototype.fetch_array=a.emptyArray,ke.create=function(e){return new ke(e)},ke.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)l.liveroom_cs.StTransFetch.encode(e.fetch_array[r],t.uint32(26).fork()).ldelim();return t},ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.TransFetchReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.fetch_array&&n.fetch_array.length||(n.fetch_array=[]),n.fetch_array.push(l.liveroom_cs.StTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ke),o.StTransFetch=(Oe.prototype.trans_type=a.newBuffer([]),Oe.prototype.trans_local_seq=0,Oe.create=function(e){return new Oe(e)},Oe.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransFetch;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Oe),o.TransFetchRsp=(Ie.prototype.rsp_head=null,Ie.prototype.trans_channel=a.newBuffer([]),Ie.prototype.trans_fetch_results=a.emptyArray,Ie.prototype.trans_list_seq=0,Ie.create=function(e){return new Ie(e)},Ie.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)l.liveroom_cs.TransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),t},Ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.TransFetchRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.trans_fetch_results&&n.trans_fetch_results.length||(n.trans_fetch_results=[]),n.trans_fetch_results.push(l.liveroom_cs.TransFetchResult.decode(e,e.uint32()));break;case 4:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Ie),o.TransFetchResult=(Pe.prototype.trans_type=a.newBuffer([]),Pe.prototype.trans_data=a.newBuffer([]),Pe.prototype.trans_idname=a.newBuffer([]),Pe.prototype.trans_nickname=a.newBuffer([]),Pe.prototype.trans_role=0,Pe.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Pe.prototype.trans_seq=0,Pe.prototype.err_code=0,Pe.create=function(e){return new Pe(e)},Pe.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.TransFetchResult;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_send_time=e.int64();break;case 7:n.trans_seq=e.uint32();break;case 8:n.err_code=e.int32();break;default:e.skipType(7&o)}}return n},Pe),o.UserTransFetchReq=(Ae.prototype.req_head=null,Ae.prototype.nick_name=a.newBuffer([]),Ae.prototype.role=0,Ae.prototype.trans_channel=a.newBuffer([]),Ae.prototype.fetch_array=a.emptyArray,Ae.create=function(e){return new Ae(e)},Ae.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(34).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)l.liveroom_cs.StUserTransFetch.encode(e.fetch_array[r],t.uint32(42).fork()).ldelim();return t},Ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.UserTransFetchReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.trans_channel=e.bytes();break;case 5:n.fetch_array&&n.fetch_array.length||(n.fetch_array=[]),n.fetch_array.push(l.liveroom_cs.StUserTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ae),o.StUserTransFetch=(Ne.prototype.trans_type=a.newBuffer([]),Ne.prototype.trans_local_seq=0,Ne.create=function(e){return new Ne(e)},Ne.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StUserTransFetch;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Ne),o.UserTransFetchRsp=(Le.prototype.rsp_head=null,Le.prototype.trans_channel=a.newBuffer([]),Le.prototype.trans_fetch_results=a.emptyArray,Le.create=function(e){return new Le(e)},Le.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)l.liveroom_cs.StUserTransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return t},Le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.UserTransFetchRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.trans_fetch_results&&n.trans_fetch_results.length||(n.trans_fetch_results=[]),n.trans_fetch_results.push(l.liveroom_cs.StUserTransFetchResult.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Le),o.StUserTransFetchResult=(Me.prototype.trans_type=a.newBuffer([]),Me.prototype.trans_data=a.newBuffer([]),Me.prototype.trans_idname=a.newBuffer([]),Me.prototype.trans_nickname=a.newBuffer([]),Me.prototype.trans_role=0,Me.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Me.prototype.trans_seq=0,Me.prototype.err_code=0,Me.create=function(e){return new Me(e)},Me.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StUserTransFetchResult;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_send_time=e.int64();break;case 7:n.trans_seq=e.uint32();break;case 8:n.err_code=e.int32();break;default:e.skipType(7&o)}}return n},Me),o.BigimChatReq=(xe.prototype.req_head=null,xe.prototype.nick_name=a.newBuffer([]),xe.prototype.role=0,xe.prototype.msgs=a.emptyArray,xe.create=function(e){return new xe(e)},xe.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)l.liveroom_cs.StBigimChatData.encode(e.msgs[r],t.uint32(34).fork()).ldelim();return t},xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.BigimChatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(l.liveroom_cs.StBigimChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},xe),o.StBigimChatData=(De.prototype.msg_category=0,De.prototype.msg_type=0,De.prototype.msg_content=a.newBuffer([]),De.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,De.prototype.bigmsg_client_id=a.newBuffer([]),De.create=function(e){return new De(e)},De.encode=function(e,t){return t=t||s.create(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(8).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(16).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(26).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(32).int64(e.msg_timestamp),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(42).bytes(e.bigmsg_client_id),t},De.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StBigimChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.msg_category=e.uint32();break;case 2:n.msg_type=e.uint32();break;case 3:n.msg_content=e.bytes();break;case 4:n.msg_timestamp=e.int64();break;case 5:n.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return n},De),o.BigimChatRsp=(Be.prototype.rsp_head=null,Be.prototype.bigim_time_window=0,Be.prototype.msgs=a.emptyArray,Be.create=function(e){return new Be(e)},Be.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(16).uint32(e.bigim_time_window),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)l.liveroom_cs.StBigimChatRspData.encode(e.msgs[r],t.uint32(26).fork()).ldelim();return t},Be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.BigimChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.bigim_time_window=e.uint32();break;case 3:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(l.liveroom_cs.StBigimChatRspData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Be),o.StBigimChatRspData=(Ue.prototype.bigmsg_id=a.newBuffer([]),Ue.prototype.bigmsg_client_id=a.newBuffer([]),Ue.create=function(e){return new Ue(e)},Ue.encode=function(e,t){return t=t||s.create(),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(10).bytes(e.bigmsg_id),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(18).bytes(e.bigmsg_client_id),t},Ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StBigimChatRspData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.bigmsg_id=e.bytes();break;case 2:n.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return n},Ue),o.RelayReq=(Ze.prototype.req_head=null,Ze.prototype.nick_name=a.newBuffer([]),Ze.prototype.role=0,Ze.prototype.relay_type=a.newBuffer([]),Ze.prototype.relay_data=a.newBuffer([]),Ze.create=function(e){return new Ze(e)},Ze.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.relay_type&&Object.hasOwnProperty.call(e,"relay_type")&&t.uint32(34).bytes(e.relay_type),null!=e.relay_data&&Object.hasOwnProperty.call(e,"relay_data")&&t.uint32(42).bytes(e.relay_data),t},Ze.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RelayReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.relay_type=e.bytes();break;case 5:n.relay_data=e.bytes();break;default:e.skipType(7&o)}}return n},Ze),o.RelayRsp=(je.prototype.rsp_head=null,je.prototype.reley_type=a.newBuffer([]),je.prototype.relay_result=a.newBuffer([]),je.create=function(e){return new je(e)},je.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.reley_type&&Object.hasOwnProperty.call(e,"reley_type")&&t.uint32(18).bytes(e.reley_type),null!=e.relay_result&&Object.hasOwnProperty.call(e,"relay_result")&&t.uint32(26).bytes(e.relay_result),t},je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RelayRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.reley_type=e.bytes();break;case 3:n.relay_result=e.bytes();break;default:e.skipType(7&o)}}return n},je),o.RenewTokenReq=(He.prototype.req_head=null,He.prototype.token="",He.create=function(e){return new He(e)},He.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&l.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),t},He.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RenewTokenReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=l.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.token=e.string();break;default:e.skipType(7&o)}}return n},He),o.RenewTokenRsp=(Fe.prototype.rsp_head=null,Fe.prototype.token_remain_time=0,Fe.create=function(e){return new Fe(e)},Fe.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&l.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(16).uint32(e.token_remain_time),t},Fe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.RenewTokenRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=l.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},Fe),o.UserAction=(ze.prototype.action=0,ze.prototype.id_name=a.newBuffer([]),ze.prototype.nick_name=a.newBuffer([]),ze.prototype.role=0,ze.prototype.login_time=a.Long?a.Long.fromBits(0,0,!1):0,ze.create=function(e){return new ze(e)},ze.encode=function(e,t){return t=t||s.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.login_time&&Object.hasOwnProperty.call(e,"login_time")&&t.uint32(40).int64(e.login_time),t},ze.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.UserAction;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.action=e.uint32();break;case 2:n.id_name=e.bytes();break;case 3:n.nick_name=e.bytes();break;case 4:n.role=e.uint32();break;case 5:n.login_time=e.int64();break;default:e.skipType(7&o)}}return n},ze),o.PushUserInfoUpdated=(Ge.prototype.room_id=a.newBuffer([]),Ge.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!1):0,Ge.prototype.user_list=a.emptyArray,Ge.create=function(e){return new Ge(e)},Ge.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).int64(e.server_user_seq),null!=e.user_list&&e.user_list.length)for(var r=0;r<e.user_list.length;++r)l.liveroom_cs.UserAction.encode(e.user_list[r],t.uint32(26).fork()).ldelim();return t},Ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushUserInfoUpdated;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.server_user_seq=e.int64();break;case 3:n.user_list&&n.user_list.length||(n.user_list=[]),n.user_list.push(l.liveroom_cs.UserAction.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ge),o.PushUserKickout=(qe.prototype.id_name=a.newBuffer([]),qe.prototype.room_id=a.newBuffer([]),qe.prototype.session_id=a.Long?a.Long.fromBits(0,0,!0):0,qe.prototype.kickout_reason=0,qe.prototype.custom_reason=a.newBuffer([]),qe.create=function(e){return new qe(e)},qe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(24).uint64(e.session_id),null!=e.kickout_reason&&Object.hasOwnProperty.call(e,"kickout_reason")&&t.uint32(32).int32(e.kickout_reason),null!=e.custom_reason&&Object.hasOwnProperty.call(e,"custom_reason")&&t.uint32(42).bytes(e.custom_reason),t},qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushUserKickout;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.room_id=e.bytes();break;case 3:n.session_id=e.uint64();break;case 4:n.kickout_reason=e.int32();break;case 5:n.custom_reason=e.bytes();break;default:e.skipType(7&o)}}return n},qe),o.PushUserLogReport=(Ve.create=function(e){return new Ve(e)},Ve.encode=function(e,t){return t||s.create()},Ve.decode=function(e,t){e instanceof i||(e=i.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new l.liveroom_cs.PushUserLogReport;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return t},Ve),o.PushUserTokenExpire=(We.prototype.room_id=a.newBuffer([]),We.prototype.token="",We.prototype.stop_stream=null,We.create=function(e){return new We(e)},We.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),null!=e.stop_stream&&Object.hasOwnProperty.call(e,"stop_stream")&&l.liveroom_cs.StopStream.encode(e.stop_stream,t.uint32(26).fork()).ldelim(),t},We.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushUserTokenExpire;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.token=e.string();break;case 3:n.stop_stream=l.liveroom_cs.StopStream.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},We),o.StopStream=(Ye.prototype.stream_id_list=a.emptyArray,Ye.create=function(e){return new Ye(e)},Ye.encode=function(e,t){if(t=t||s.create(),null!=e.stream_id_list&&e.stream_id_list.length)for(var r=0;r<e.stream_id_list.length;++r)t.uint32(10).bytes(e.stream_id_list[r]);return t},Ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StopStream;e.pos<r;){var o=e.uint32();o>>>3==1?(n.stream_id_list&&n.stream_id_list.length||(n.stream_id_list=[]),n.stream_id_list.push(e.bytes())):e.skipType(7&o)}return n},Ye),o.PushStream=(Ke.prototype.room_id=a.newBuffer([]),Ke.prototype.stream_seq=0,Ke.prototype.stream_info=a.emptyArray,Ke.create=function(e){return new Ke(e)},Ke.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)l.liveroom_cs.StPushStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();return t},Ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushStream;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(l.liveroom_cs.StPushStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ke),o.StPushStreamInfo=($e.prototype.stream_id=a.newBuffer([]),$e.prototype.stream_sid="",$e.prototype.id_name=a.newBuffer([]),$e.prototype.nick_name=a.newBuffer([]),$e.prototype.extra_info=a.newBuffer([]),$e.prototype.title=a.newBuffer([]),$e.prototype.third_define_data=a.newBuffer([]),$e.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,$e.prototype.req_seq=0,$e.prototype.stream_ver=0,$e.prototype.stream_attr=a.newBuffer([]),$e.prototype.stream_src=0,$e.prototype.stream_state=0,$e.prototype.stream_type=0,$e.prototype.stream_nid=0,$e.prototype.close_type=0,$e.create=function(e){return new $e(e)},$e.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.third_define_data&&Object.hasOwnProperty.call(e,"third_define_data")&&t.uint32(58).bytes(e.third_define_data),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(64).int64(e.create_time),null!=e.req_seq&&Object.hasOwnProperty.call(e,"req_seq")&&t.uint32(72).uint32(e.req_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(80).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(90).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(96).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(104).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(112).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(120).uint32(e.stream_nid),null!=e.close_type&&Object.hasOwnProperty.call(e,"close_type")&&t.uint32(128).uint32(e.close_type),t},$e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StPushStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_id=e.bytes();break;case 2:n.stream_sid=e.string();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.title=e.bytes();break;case 7:n.third_define_data=e.bytes();break;case 8:n.create_time=e.int64();break;case 9:n.req_seq=e.uint32();break;case 10:n.stream_ver=e.uint32();break;case 11:n.stream_attr=e.bytes();break;case 12:n.stream_src=e.uint32();break;case 13:n.stream_state=e.uint32();break;case 14:n.stream_type=e.uint32();break;case 15:n.stream_nid=e.uint32();break;case 16:n.close_type=e.uint32();break;default:e.skipType(7&o)}}return n},$e),o.PushImChat=(Qe.prototype.room_id=a.newBuffer([]),Qe.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Qe.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Qe.prototype.msg_data=a.emptyArray,Qe.create=function(e){return new Qe(e)},Qe.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)l.liveroom_cs.StImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},Qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushImChat;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.server_msg_id=e.uint64();break;case 3:n.ret_msg_id=e.uint64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(l.liveroom_cs.StImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Qe),o.StImChatData=(Xe.prototype.id_name=a.newBuffer([]),Xe.prototype.nick_name=a.newBuffer([]),Xe.prototype.role=0,Xe.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Xe.prototype.msg_category=0,Xe.prototype.msg_type=0,Xe.prototype.msg_priority=0,Xe.prototype.msg_content=a.newBuffer([]),Xe.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,Xe.create=function(e){return new Xe(e)},Xe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},Xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StImChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msg_id=e.uint64();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_priority=e.uint32();break;case 8:n.msg_content=e.bytes();break;case 9:n.send_time=e.int64();break;default:e.skipType(7&o)}}return n},Xe),o.PushBigImChat=(Je.prototype.app_id=0,Je.prototype.room_id=a.newBuffer([]),Je.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,Je.prototype.msg_data=a.emptyArray,Je.create=function(e){return new Je(e)},Je.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)l.liveroom_cs.StBigImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},Je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushBigImChat;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.timestamp=e.int64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(l.liveroom_cs.StBigImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Je),o.StBigImChatData=(et.prototype.id_name=a.newBuffer([]),et.prototype.nick_name=a.newBuffer([]),et.prototype.role=0,et.prototype.bigmsg_id=a.newBuffer([]),et.prototype.msg_category=0,et.prototype.msg_type=0,et.prototype.msg_content=a.newBuffer([]),et.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,et.create=function(e){return new et(e)},et.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(34).bytes(e.bigmsg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(58).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(64).int64(e.msg_timestamp),t},et.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StBigImChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.bigmsg_id=e.bytes();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_content=e.bytes();break;case 8:n.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},et),o.PushTrans=(tt.prototype.app_id=0,tt.prototype.room_id=a.newBuffer([]),tt.prototype.trans_idname=a.newBuffer([]),tt.prototype.trans_nickname=a.newBuffer([]),tt.prototype.trans_role=0,tt.prototype.trans_type=a.newBuffer([]),tt.prototype.trans_data=a.newBuffer([]),tt.prototype.trans_seq=0,tt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,tt.prototype.trans_channel=a.newBuffer([]),tt.prototype.trans_list_seq=0,tt.create=function(e){return new tt(e)},tt.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(50).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(58).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(64).uint32(e.trans_seq),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(88).uint32(e.trans_list_seq),t},tt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushTrans;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_type=e.bytes();break;case 7:n.trans_data=e.bytes();break;case 8:n.trans_seq=e.uint32();break;case 9:n.trans_send_time=e.int64();break;case 10:n.trans_channel=e.bytes();break;case 11:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},tt),o.PushUserTrans=(rt.prototype.app_id=0,rt.prototype.room_id=a.newBuffer([]),rt.prototype.trans_idname=a.newBuffer([]),rt.prototype.trans_nickname=a.newBuffer([]),rt.prototype.trans_role=0,rt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,rt.prototype.trans_channel=a.newBuffer([]),rt.prototype.trans_array=a.emptyArray,rt.create=function(e){return new rt(e)},rt.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_array&&e.trans_array.length)for(var r=0;r<e.trans_array.length;++r)l.liveroom_cs.StTransSimple.encode(e.trans_array[r],t.uint32(90).fork()).ldelim();return t},rt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.PushUserTrans;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 9:n.trans_send_time=e.int64();break;case 10:n.trans_channel=e.bytes();break;case 11:n.trans_array&&n.trans_array.length||(n.trans_array=[]),n.trans_array.push(l.liveroom_cs.StTransSimple.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},rt),o.StTransSimple=(nt.prototype.trans_type=a.newBuffer([]),nt.prototype.trans_data=a.newBuffer([]),nt.prototype.trans_seq=0,nt.create=function(e){return new nt(e)},nt.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),t},nt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new l.liveroom_cs.StTransSimple;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},nt),o),e.exports=l},function(e,t,r){var n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},s={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=c(e,0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=c(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function l(e,t){if(isNaN(e))return t?_:v;if(t){if(e<0)return _;if(f<=e)return C}else{if(e<=-g)return T;if(g<=e+1)return S}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(r=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?_:v;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var o=l(u(r,8)),i=v,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);i=a<8?(a=l(u(r,a)),i.mul(a).add(l(c))):(i=i.mul(o)).add(l(c))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,g=f/2,m=a(1<<24),v=a(0),_=(r.ZERO=v,a(0,!0)),y=(r.UZERO=_,a(1)),b=(r.ONE=y,a(1,!0)),E=(r.UONE=b,a(-1)),S=(r.NEG_ONE=E,c(-1,2147483647,!1)),C=(r.MAX_VALUE=S,c(-1,-1,!0)),T=(r.MAX_UNSIGNED_VALUE=C,c(0,-2147483648,!1)),w=(r.MIN_VALUE=T,r.prototype);return w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(T)?(r=l(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var n=l(u(e,6),this.unsigned),o=this,i="";;){var s=o.div(n),a=(o.sub(s.mul(n)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||0<=this.high},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return 0<this.comp(e)},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return 0<=this.comp(e)},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(y)},w.neg=w.negate,w.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,d=0,p=0,f=0;return d+=(p=p+((f+=i+(65535&e.low))>>>16)+(o+l))>>>16,c((p&=65535)<<16|(f&=65535),((u+=(d+=r+a)>>>16)+(t+s)&65535)<<16|(d&=65535),this.unsigned)},w.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?_:v;if(this.eq(T))return e.isOdd()?T:v;if(e.eq(T))return this.isOdd()?T:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=0,f=0,g=0,y=(y=0)+((f=f+((g+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((f=(65535&f)+s*d)>>>16);return c((f&=65535)<<16|(g&=65535),((p+=(y+=o*e)>>>16)+((y=(65535&y)+i*d)>>>16)+((y=(65535&y)+s*u)>>>16)+(r*e+o*d+i*u+s*a)&65535)<<16|(y&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if((e=n(e)?e:h(e)).isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:v;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return _;if(e.gt(this.shru(1)))return b;o=_}else{if(this.eq(T))return e.eq(y)||e.eq(E)?T:e.eq(T)?y:(i=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:E:(r=this.sub(e.mul(i)),i.add(r.div(e)));if(e.eq(T))return this.unsigned?_:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=v}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:u(2,s-48),d=l(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=l(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),o=o.add(d),r=r.sub(p)}return o},w.div=w.divide,w.modulo=function(e){return n(e)||(e=h(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return c(~this.low,~this.high,this.unsigned)},w.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},w.clz=w.countLeadingZeros,w.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},w.ctz=w.countTrailingZeros,w.and=function(e){return n(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return n(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return n(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):c(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},w.rotl=w.rotateLeft,w.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):c(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},w.rotr=w.rotateRight,w.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=r,"default"in e?e.default:e}({});void 0!==(t=function(){return n}.apply(t,[]))&&(e.exports=t)},function(e,t,r){(function(t){var n;e.exports=(n=function(e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),!(n=!(n=!(n="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:n)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:n)&&void 0!==t&&t.crypto?t.crypto:n))try{n=r(17)}catch(s){}var o=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},l=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=s<<24-(n+i)%4*8}else for(var a=0;a<o;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new c.init(t,e)}}),u=s.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,o=n.words,i=n.sigBytes,s=this.blockSize,a=i/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;if(t=e.min(4*l,i),l){for(var u=0;u<l;u+=s)this._doProcessBlock(o,u);r=o.splice(0,l),n.sigBytes-=t}return new c.init(r,t)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=f.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math),n)}).call(this,r(12))},function(e,t,r){e.exports=function(e){for(var t=e,r=t.lib.BlockCipher,n=t.algo,o=[],i=[],s=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],f=[],g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;var m=0,v=0;for(g=0;g<256;g++){var _=v^v<<1^v<<2^v<<3^v<<4;_=_>>>8^255&_^99,o[m]=_,i[_]=m;var y=f[m],b=f[y],E=f[b],S=257*f[_]^16843008*_;s[m]=S<<24|S>>>8,a[m]=S<<16|S>>>16,l[m]=S<<8|S>>>24,c[m]=S,S=16843009*E^65537*b^257*y^16843008*m,u[_]=S<<24|S>>>8,d[_]=S<<16|S>>>16,h[_]=S<<8|S>>>24,p[_]=S,m?(m=y^f[f[f[E^y]]],v^=f[f[v]]):m=v=1}var C=[0,1,2,4,8,16,32,64,128,27,54],T=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<n;s++)s<r?i[s]=t[s]:(c=i[s-1],s%r?r>6&&s%r==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=o[(c=c<<8|c>>>24)>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=C[s/r|0]<<24),i[s]=i[s-r]^c);for(var a=this._invKeySchedule=[],l=0;l<n;l++){if(s=n-l,l%4)var c=i[s];else c=i[s-4];a[l]=l<4||s<=4?c:u[o[c>>>24]]^d[o[c>>>16&255]]^h[o[c>>>8&255]]^p[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,l,c,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,i,s,a){for(var l=this._nRounds,c=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<l;f++){var g=n[c>>>24]^o[u>>>16&255]^i[d>>>8&255]^s[255&h]^r[p++],m=n[u>>>24]^o[d>>>16&255]^i[h>>>8&255]^s[255&c]^r[p++],v=n[d>>>24]^o[h>>>16&255]^i[c>>>8&255]^s[255&u]^r[p++],_=n[h>>>24]^o[c>>>16&255]^i[u>>>8&255]^s[255&d]^r[p++];c=g,u=m,d=v,h=_}g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^r[p++],v=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^r[p++],_=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^r[p++],e[t]=g,e[t+1]=m,e[t+2]=v,e[t+3]=_},keySize:8});return t.AES=r._createHelper(T),e.AES}(r(2),(r(18),r(4),r(13),r(21)))},function(e,t,r){e.exports=function(e){for(var t=Math,r=e,n=r.lib,o=n.WordArray,i=n.Hasher,s=r.algo,a=[],l=0;l<64;l++)a[l]=4294967296*t.abs(t.sin(l+1))|0;var c=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,s=e[t+0],l=e[t+1],c=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],_=e[t+7],y=e[t+8],b=e[t+9],E=e[t+10],S=e[t+11],C=e[t+12],T=e[t+13],w=e[t+14],R=e[t+15],k=i[0],O=i[1],I=i[2],P=i[3];k=u(k,O,I,P,s,7,a[0]),P=u(P,k,O,I,l,12,a[1]),I=u(I,P,k,O,c,17,a[2]),O=u(O,I,P,k,f,22,a[3]),k=u(k,O,I,P,g,7,a[4]),P=u(P,k,O,I,m,12,a[5]),I=u(I,P,k,O,v,17,a[6]),O=u(O,I,P,k,_,22,a[7]),k=u(k,O,I,P,y,7,a[8]),P=u(P,k,O,I,b,12,a[9]),I=u(I,P,k,O,E,17,a[10]),O=u(O,I,P,k,S,22,a[11]),k=u(k,O,I,P,C,7,a[12]),P=u(P,k,O,I,T,12,a[13]),I=u(I,P,k,O,w,17,a[14]),k=d(k,O=u(O,I,P,k,R,22,a[15]),I,P,l,5,a[16]),P=d(P,k,O,I,v,9,a[17]),I=d(I,P,k,O,S,14,a[18]),O=d(O,I,P,k,s,20,a[19]),k=d(k,O,I,P,m,5,a[20]),P=d(P,k,O,I,E,9,a[21]),I=d(I,P,k,O,R,14,a[22]),O=d(O,I,P,k,g,20,a[23]),k=d(k,O,I,P,b,5,a[24]),P=d(P,k,O,I,w,9,a[25]),I=d(I,P,k,O,f,14,a[26]),O=d(O,I,P,k,y,20,a[27]),k=d(k,O,I,P,T,5,a[28]),P=d(P,k,O,I,c,9,a[29]),I=d(I,P,k,O,_,14,a[30]),k=h(k,O=d(O,I,P,k,C,20,a[31]),I,P,m,4,a[32]),P=h(P,k,O,I,y,11,a[33]),I=h(I,P,k,O,S,16,a[34]),O=h(O,I,P,k,w,23,a[35]),k=h(k,O,I,P,l,4,a[36]),P=h(P,k,O,I,g,11,a[37]),I=h(I,P,k,O,_,16,a[38]),O=h(O,I,P,k,E,23,a[39]),k=h(k,O,I,P,T,4,a[40]),P=h(P,k,O,I,s,11,a[41]),I=h(I,P,k,O,f,16,a[42]),O=h(O,I,P,k,v,23,a[43]),k=h(k,O,I,P,b,4,a[44]),P=h(P,k,O,I,C,11,a[45]),I=h(I,P,k,O,R,16,a[46]),k=p(k,O=h(O,I,P,k,c,23,a[47]),I,P,s,6,a[48]),P=p(P,k,O,I,_,10,a[49]),I=p(I,P,k,O,w,15,a[50]),O=p(O,I,P,k,m,21,a[51]),k=p(k,O,I,P,C,6,a[52]),P=p(P,k,O,I,f,10,a[53]),I=p(I,P,k,O,E,15,a[54]),O=p(O,I,P,k,l,21,a[55]),k=p(k,O,I,P,y,6,a[56]),P=p(P,k,O,I,R,10,a[57]),I=p(I,P,k,O,v,15,a[58]),O=p(O,I,P,k,T,21,a[59]),k=p(k,O,I,P,g,6,a[60]),P=p(P,k,O,I,S,10,a[61]),I=p(I,P,k,O,c,15,a[62]),O=p(O,I,P,k,b,21,a[63]),i[0]=i[0]+k|0,i[1]=i[1]+O|0,i[2]=i[2]+I|0,i[3]=i[3]+P|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;r[o>>>5]|=128<<24-o%32;var i=t.floor(n/4294967296),s=n;r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,o,i,s){var a=e+(t&r|~t&n)+o+s;return(a<<i|a>>>32-i)+t}function d(e,t,r,n,o,i,s){var a=e+(t&n|r&~n)+o+s;return(a<<i|a>>>32-i)+t}function h(e,t,r,n,o,i,s){var a=e+(t^r^n)+o+s;return(a<<i|a>>>32-i)+t}function p(e,t,r,n,o,i,s){var a=e+(r^(t|~n))+o+s;return(a<<i|a>>>32-i)+t}return r.MD5=i._createHelper(c),r.HmacMD5=i._createHmacHelper(c),e.MD5}(r(2))},function(e,t,r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i;e.exports=(o=[function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(n=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[n.ClientType_None=0]="ClientType_None",n[n.ClientType_H5=1]="ClientType_H5",n[n.ClientType_SmallPragram=2]="ClientType_SmallPragram",n[n.ClientType_Webrtc=3]="ClientType_Webrtc"},function(e,t,r){"use strict";function n(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0,n.getInstance=function(){return n.instance||(n.instance=new n).init(),n.instance},n.prototype.init=function(){},Object.defineProperty(n.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),n.instance=new n,t.LoggerStateCenter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var n=r(0),o=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t%2===n.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var n=r(1),o=(Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return n.LoggerStateCenter}}),r(2)),i=(Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return o.createZegoWebSocket}}),r(4)),s=(Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return i.ZegoDataReport}}),r(5));Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,i.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},i.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},i.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},i.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},i.prototype.eventEnd=function(e,t,r){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n&&0!==n.length){for(var o=n.length-1;0<=o;o--)if(n[o].event==t&&0==n[o].time_consumed){n[o].time_consumed=Date.now()-n[o].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},i.prototype.eventEndWithMsg=function(e,t,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t&&0==o[i].time_consumed){o[i].time_consumed=Date.now()-o[i].event_time,null==o[i].msg_ext&&(o[i].msg_ext={}),o[i].msg_ext=n({},r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.eventEndWithMsgInfo=function(e,t,r){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n){for(var o=n.length-1;0<=o;o--)if(n[o].event==t&&0==n[o].time_consumed){n[o].time_consumed=Date.now()-n[o].event_time,Object.assign(n[o],r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.addEventInfo=function(e,t,r,n){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t&&null!=o[i].time_consumed){null==o[i].msg_ext?o[i].msg_ext={}:o[i].msg_ext&&(o[i].msg_ext[r]=n);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},i.prototype.addEventMsg=function(e,t,r,n){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t){o[i][r]=n;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},i.prototype.addEvent=function(e,t,r){this.dataStatistics[e]?this.dataStatistics[e].events&&(r?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),msg_ext:r}):this.dataStatistics[e].events.push({event:t,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},i.prototype.uploadReport=function(e,t,r,n){var o=this.dataStatistics[e];null!=o&&(t&&(o.event=t),o.time_consumed=Date.now()-o.event_time,r&&this.addMsgInfo(e,{error:r.code,message:r.message||r.msg+" "+(n||"")}),this.logger.report(o),delete this.dataStatistics[e])},i);function i(e){this.dataStatistics={},this.logger=e}t.ZegoDataReport=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,r(0)),i=r(2),s=r(1),a=r(6);function l(e){this.logLevel=o.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=8192,this.existUserID=!1,this.stateCenter=s.LoggerStateCenter.getInstance(),this.env=e}l.prototype.setLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},l.prototype.setRemoteLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logRemoteLevel=e,!0)},l.prototype.setSessionInfo=function(e,t,r,n,o,i){this.appid=e,this.roomid=t,this.sessionid=r,this.userid=n,this.userName=o,this.version=i},l.prototype.report=function(e){e=this.logReportParamList(o.ENUM_LOG_LEVEL.REPORT,e),this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.REPORT&&console.debug(e),this.RemoteLog(o.ENUM_LOG_LEVEL.REPORT,e,!0)},l.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.DEBUG&&console.debug(r),this.log(o.ENUM_LOG_LEVEL.DEBUG,r)},l.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.INFO&&console.info(r),this.log(o.ENUM_LOG_LEVEL.INFO,r)},l.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.WARN&&console.warn(r),this.log(o.ENUM_LOG_LEVEL.WARN,r)},l.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.ERROR&&(console.error(r),this.env%2===o.ZEGO_ENV.BROWSER&&window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):this.env%2===o.ZEGO_ENV.WEIXINMINI&&wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(o.ENUM_LOG_LEVEL.ERROR,r)},l.prototype.log=function(e,t){this.logRemoteLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},l.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=o.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=o.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=o.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},l.prototype.stopLogServer=function(){this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==o.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=o.ENUM_REMOTE_TYPE.DISABLE},l.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},l.prototype.openHttpsLogServer=function(e){var t=this;(this.url=e)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},l.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},l.prototype.RemoteLog=function(e,t,r){if(void 0===r&&(r=!1),""!=this.url)if(this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==o.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,r);else if(this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},l.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&4e3<t.length)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var r=this.url;this.url="",this.setLogServer(r),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(0<this.logCacheSend.length){for(var o="",i=0;i<this.logCacheSend.length;i++){4e3<(o+this.logCacheSend[i]).length&&(this.websocket.send(o),o="");var s=JSON.parse(this.logCacheSend[i]);s=n(n({},s),{userid:s.userid||this.userid,roomid:s.roomid||this.roomid,userName:s.userName||this.userName}),o=o+JSON.stringify(s)+"\n"}t=o+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},l.prototype.RemoteHttpsLog=function(e,t,r){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===r)&&this.SendHttpsLog()},l.prototype.logParamList=function(e,t){var r={time:r=a.getCurrentTime(),level:e,action:(t=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t])[0],content:t[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(r)},l.prototype.logReportParamList=function(e,t){var r=a.getCurrentTime();return t=n(n({},t),{time:r,level:e,console:this.env%2===o.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},l.prototype.openWebSocketLogServer=function(e){this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.websocket=i.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)})},l.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===o.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},l.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){if(0!=r.responseText.length)try{var t=JSON.parse(r.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(t){console.log("send result failed "+t)}}else console.log("send failed "+r.status)},r.open("POST",this.url,!0),0==this.env?r.send(t):2==this.env&&(r.setRequestHeader("content-type","application/json"),r.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},l.prototype.SendHttpsLogWeChatMini=function(){var e=this;if(!this.existUserID){if(!this.userid)return void console.log("no userid");this.logCacheSend.forEach((function(t,r){(t=JSON.parse(t))&&""==t.userid?(t.userid=e.userid,t.id_name=t.id_name||e.userid,t.roomid=t.roomid||e.roomid,t.userName=t.userName||e.userName,e.logCacheSend[r]=JSON.stringify(t)):e.existUserID=!0}))}var t=this.logCacheSend.join("\n");t=1==this.env?t:JSON.stringify({user_id:this.userid,log:t}),wx.request({url:this.url,data:t,method:"POST",success:function(t){0!=t.data.length&&"number"==typeof(t=t&&t.data&&t.data.interval)&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},t.ZegoLogger=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var n=r(0),o=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?n.ZEGO_BROWSER_TYPE.IE:r?n.ZEGO_BROWSER_TYPE.FIREFOX:o?n.ZEGO_BROWSER_TYPE.OPERA:i?n.ZEGO_BROWSER_TYPE.CHROME:s?n.ZEGO_BROWSER_TYPE.SAFARI:e?n.ZEGO_BROWSER_TYPE.WEIXIN:n.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(n.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}],i={},n.m=o,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3))},function(e,t,r){e.exports=r(2).enc.Utf8},function(t,r){t.exports=e},function(e,t,r){"use strict";t.byteLength=function(e){return 3*((e=l(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,r,n=(s=l(e))[0],s=s[1],a=new i(function(e,t){return 3*(e+t)/4-t}(n,s)),c=0,u=0<s?n-4:n;for(r=0;r<u;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,a[c++]=255&t),1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(function(e,t,r){for(var o,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}(o));return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2==o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,r){function n(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i,s,a,l,c;e.exports=(o=r(11),i=r(4),s=r(3),a=r(6),c={},n.m=l=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=t.ENUM_CONNECT_STATE=t.ENUM_NETWORK_STATE=t.SOCKET_DISCONNECT=t.errorList=t.Queue=t.getSeq=t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.1",(o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",(o=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[o.IE=0]="IE",o[o.FIREFOX=1]="FIREFOX",o[o.CHROME=2]="CHROME",o[o.SAFARI=3]="SAFARI",o[o.OPERA=4]="OPERA",o[o.WEIXIN=5]="WEIXIN",o[o.WEIXINMINI=6]="WEIXINMINI",o[o.UNKOWN=7]="UNKOWN",(o=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[o.DISABLE=0]="DISABLE",o[o.WEBSOCKET=1]="WEBSOCKET",o[o.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(o=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[o.ClientType_None=0]="ClientType_None",o[o.ClientType_H5=1]="ClientType_H5",o[o.ClientType_SmallPragram=2]="ClientType_SmallPragram",o[o.ClientType_Webrtc=3]="ClientType_Webrtc",t.getSeq=(n=1,function(){return n++}),i.prototype.isEmpty=function(){return 0==this.items.length},i.prototype.enqueue=function(e){this.items.push(e)},i.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},i.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},i.prototype.size=function(){return this.items.length},i.prototype.clear=function(){this.items=[]},i.prototype.all=function(){return this.items};var n,o=i;function i(){this.items=[],this.items=[]}t.Queue=o,t.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},t.SOCKET_DISCONNECT=-1,(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.ENUM_CONNECT_STATE||(t.ENUM_CONNECT_STATE={}))[o.disconnected=0]="disconnected",o[o.connecting=1]="connecting",o[o.connected=2]="connected",Object.defineProperty(a.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),a.prototype.hasNext=function(){return this.next&&this.next.id},a.prototype.hasPrev=function(){return this.prev&&this.prev.id};var s=a;function a(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function l(){this.start=new s,this.end=new s,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=s,l.prototype.insertBefore=function(e,t){return(t=new s(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},l.prototype.addLast=function(e){return this.insertBefore(this.end,e)},l.prototype.add=function(e){return this.addLast(e)},l.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},l.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},l.prototype.size=function(){return this._numNodes},l.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},l.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},l.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},l.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},l.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},l.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},l.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},l.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},l.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},l.prototype.push=function(e){return this.addLast(e)},l.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},l.prototype.pop=function(){return this.removeLast()},l.prototype.shift=function(){return this.removeFirst()},t.LinkedList=o=l},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=t.suppressInstrumentation=t.ROOT_CONTEXT=t.BaseContext=t.setSpan=t.getSpanContext=t.getSpan=t.createContextKey=void 0,r(16));function s(e){return Symbol.for(e)}var a=(t.createContextKey=s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),l=s("OpenTelemetry Context Key SPAN");function c(e){return e.getValue(l)||void 0}function u(e){this.name=e,this.contextManager=new i.StackContextManager}t.getSpan=c,t.getSpanContext=function(e){return null==(e=c(e))?void 0:e.context()},t.setSpan=function(e,t){return e.setValue(l,t)},t.BaseContext=r=function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},t.ROOT_CONTEXT=new r,t.suppressInstrumentation=function(e){return e.setValue(a,!0)},u.getInstance=function(e){return void 0===e&&(e="context"),this._instance||(this._instance=new u(e)),this._instance},u.prototype.active=function(){return this.contextManager.active()},u.prototype.with=function(e,t,r){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,o([e,t,r],i))},u.prototype._getContextManager=function(){return this.contextManager},t.ContextAPI=r=u},function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.TraceFlags=t.SpanKind=t.SpanStatusCode=void 0,(n=t.SpanStatusCode||(t.SpanStatusCode={}))[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR",(o=t.SpanKind||(t.SpanKind={}))[o.INTERNAL=0]="INTERNAL",o[o.SERVER=1]="SERVER",o[o.CLIENT=2]="CLIENT",o[o.PRODUCER=3]="PRODUCER",o[o.CONSUMER=4]="CONSUMER",(o=n=t.TraceFlags||(t.TraceFlags={}))[o.NONE=0]="NONE",o[o.SAMPLED=1]="SAMPLED",t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.NONE}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ZegoLog=void 0,o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.log(r)},o.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.debug(r)},o.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.info(r)},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.warn(r)},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join("");console.error(r)};var n=o;function o(){}n=new(t.ZegoLog=n),t.log=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAIL_TIME=t.FAIL_MAX_COUNT=t.FAIL_COUNT=t.STORE_SIZE=t.CACHE_SIZE=t.BUCKET_CONFIG=t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:4},t.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},t.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},t.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},t.FAIL_COUNT=10,t.FAIL_MAX_COUNT=10,t.FAIL_TIME=30},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.calculateMemSize=t.analyzeKey=t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0,r(0)),i=n(r(31)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?o.ZEGO_BROWSER_TYPE.IE:r?o.ZEGO_BROWSER_TYPE.FIREFOX:n?o.ZEGO_BROWSER_TYPE.OPERA:i?o.ZEGO_BROWSER_TYPE.CHROME:s?o.ZEGO_BROWSER_TYPE.SAFARI:e?o.ZEGO_BROWSER_TYPE.WEIXIN:o.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(o.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.calculateMemSize=function(e){return i.default(e)},t.uuid=function(e,t){var r,n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(r=0;r<e;r++)i[r]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(n=0|16*Math.random(),i[r]=o[19==r?3&n|8:n]);return i.join("")}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};function i(e){return null==e||!Array.isArray(e)||function(e){var t,r,o;try{for(var i=n(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(null!=a)if(o){if(typeof a!==o)return!1}else o=typeof a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!0}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAttributes=t.isAttributeValue=void 0,t.isAttributeValue=i,t.sanitizeAttributes=function(e){var t,r,s={};if(null!=e&&"object"==typeof e)try{for(var a=n(Object.entries(e)),l=a.next();!l.done;l=a.next()){var c=o(l.value,2),u=c[0],d=c[1];i(d)&&(Array.isArray(d)?s[u]=d.slice():s[u]=d)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var n=Array(32);function o(e){return function(){for(var t=0;t<2*e;t++)n[t]=Math.floor(16*Math.random())+48,58<=n[t]&&(n[t]+=39);return String.fromCharCode.apply(null,n.slice(0,2*e))}}t.IdGenerator=function(){this.generateTraceId=o(16),this.generateSpanId=o(8),this.generateEventId=o(4)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.SDK_INFO=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},t.SDK_INFO=((n={})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",n[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",n[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",n[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.VERSION,n),o.empty=function(){return o.EMPTY},o.createTelemetrySDKResource=function(){var e;return new o(((e={})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},o.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new o(Object.assign({},this.attributes,e.attributes)):this},o.EMPTY=new o({});var n=o;function o(e){this.attributes=e}t.Resource=n},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0,r(6)),s=r(1),a=r(2),l=r(7),c=r(17);function u(e,t,r,n,o,i,s,c){void 0===c&&(c=[]),this.attributes={},this.links=[],this.events=[],this.status={code:a.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=e.context,this.reporter=e.reporter,this.spanProcessor=e.spanProcessor,this.parentTracer=e,this.name=r,this.level=n,this.spanContext=o,this.parentSpanId=s,this.kind=i,this.links=c,this.startTime=Date.now(),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._idGenerator=new l.IdGenerator}u.prototype.context=function(){return this.spanContext},u.prototype.setAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=t)),this},u.prototype.appendAttribute=function(e,t){return null!=t&&0!==e.length&&(!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]&&Array.isArray(this.attributes[e])?this.attributes[e].push(t):this.attributes[e]=[t])),this},u.prototype.setAttributes=function(e){var t,r;try{for(var i=n(Object.entries(e)),s=i.next();!s.done;s=i.next()){var a=o(s.value,2),l=a[0],c=a[1];this.setAttribute(l,c)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},u.prototype.addEvent=function(e,t,r){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var n=this._idGenerator.generateEventId();return c.isTimeInput(t)&&(void 0===r&&(r=t),t=void 0),void 0===r&&(r=c.hrTime()),this.events.push({name:e,attributes:t,time:c.timeInputToHrTime(r),event_id:n}),this},u.prototype.setStatus=function(e){return this.status=e,this},u.prototype.updateName=function(e){return this.name=e,this},u.prototype.end=function(e,t){var r=this;void 0===e&&(e=c.hrTime()),this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),e=c.getCurrentTime(),this.setAttribute("e_time_s",e),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(s.suppressInstrumentation(this.contextAPI.active()),(function(){var e=r.toReporterSpan(r);r.spanProcessor.spanEnd&&r.spanProcessor.spanEnd(e,r.level),e.droped||!1===t||(delete e.droped,r.reporter.report(JSON.stringify(e),r.level))})))},u.prototype.spanReport=function(){var e=this.toReporterSpan(this);this.reporter.report(JSON.stringify(e),this.level)},u.prototype.isRecording=function(){return!1===this._ended},Object.defineProperty(u.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),u.prototype._isSpanEnded=function(){return this._ended,this._ended},u.prototype.toReporterSpan=function(e){var t=[],r=(e.events.forEach((function(e){var r={};Object.keys(e).forEach((function(t){"name"===t&&(r[t]=e[t]),"time"===t&&(r.timestamp=c.hrTimeToMilliseconds(e[t])),"attributes"===t&&(r.tags=e[t])})),t.push(r)})),[]);return e.links.forEach((function(e){r.push({span_id:e.context.spanId,trace_id:e.context.traceId})})),{trace_id:e.spanContext.traceId,parent_span_id:e.parentSpanId,name:e.name,span_id:e.spanContext.spanId,kind:e.kind,start_time:e.startTime,end_time:e.endTime,duration:e.duration,logs:t,tags:e.attributes,links:r}},t.Span=r=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSpan=void 0;var n=r(3),o=r(9);function i(e,t){this.spanId=e,this.span=t}i.prototype.setAttribute=function(e,t){var r=this;return this.span?this.span.setAttribute(e,t):this._activeSpan().then((function(){r.span&&r.span.setAttribute(e,t)})),this},i.prototype.setAttributes=function(e){var t=this;return this.span?this.span.setAttributes(e):this._activeSpan().then((function(){t.span&&t.span.setAttributes(e)})),this},i.prototype.appendAttribute=function(e,t){var r=this;return this.span?this.span.appendAttribute(e,t):this._activeSpan().then((function(){r.span&&r.span.appendAttribute(e,t)})),this},i.prototype.addEvent=function(e,t,r){var n=this;return this.span?this.span.addEvent(e,t,r):this._activeSpan().then((function(){n.span&&n.span.addEvent(e,t,r)})),this},i.prototype.setStatus=function(e){var t=this;return this.span?this.span.setStatus(e):this._activeSpan().then((function(){t.span&&t.span.setStatus(e)})),this},i.prototype.updateName=function(e){var t=this;return this.span?this.span.updateName(e):this._activeSpan().then((function(){t.span&&t.span.updateName(e)})),this},i.prototype.end=function(e,t){var r=this;void 0===t&&(t=!0),this.span?this.span.end(e,t):this._activeSpan(!0).then((function(){r.span&&r.span.end(e,t),r._spanEnd()}))},i.prototype.setSpanActive=function(e){this.activeCallback=e},i.prototype.setSpanEnd=function(e){this.endCallback=e},i.prototype.spanReport=function(){var e;null!=(e=this.span)&&e.spanReport()},i.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},i.prototype._isSpanNoop=function(){return"noop"===this.spanId},i.prototype._activeSpan=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(r,n){t.store.getItem(t.spanId).then((function(n){var s=new o.Span(i.tracer,i.tracer.context.active(),n.name,n.level,n.spanContext,n.kind,n.parentSpanId,n.links);s.setStatus(n.status),s.setAttributes(n.attributes),t.span=s,t.activeCallback&&t.activeCallback(t.spanId,e),r()})).catch((function(e){n(e)}))}))},i.prototype.removeStoreItem=function(e){var t=this;this.store.getItem(e).then((function(r){r&&t.store.removeItem(e).then((function(){n.log.log("remove suc")})).catch((function(e){n.log.warn("remove fail")}))}))},t.ZegoSpan=r=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=t.ZEGO_ENV=void 0;var n,o,i=r(12),s=((o=n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",r(3)),a=(l.prototype.getItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},l.prototype.setItem=function(e,t){var r=this;return new Promise((function(n,o){try{wx.setStorageSync(r.keyPrefix+e,t),n()}catch(n){o(n)}}))},l.prototype.removeItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},l.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},l.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var n=wx.getStorageInfoSync().keys,o=(s.log.warn("keys",n),[]);n.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),s.log.warn("keyArr",JSON.stringify(o)),o.sort(),t(o)}catch(t){r(t)}}))},l);function l(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=a,t.createZegoStore=function(e,t,r){return t===n.BROWSER?i.createInstance({name:e+":"+(r||"store")}):new a(e)}},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=t.ZegoTracer=t.ZegoSpan=void 0;var n=r(14),o=(Object.defineProperty(t,"ZegoTracer",{enumerable:!0,get:function(){return n.ZegoTracer}}),r(46)),i=(Object.defineProperty(t,"DynamicCode",{enumerable:!0,get:function(){return o.DynamicCode}}),r(10));Object.defineProperty(t,"ZegoSpan",{enumerable:!0,get:function(){return i.ZegoSpan}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoTracer=void 0;var n=r(15),o=r(21),i=r(10),s=r(22),a=r(3),l=r(1),c=r(8),u=r(23),d=r(39),h=r(11),p=r(44),f=r(45);function g(){this.tracingSpans=[],this._maxTracingSpanSize=s.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new p.ZegoLog,this.stateCenter=new f.StateCenter(this.log)}g.prototype.init=function(e){this.options=e,this.name=e.product,this.reporter=new u.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:e.appID,env:e.env||0,importantLevel:e.importantLevel,levels:e.levels,deviceID:e.deviceID,bps:e.bps,serverUrl:e.serverUrl}),this.tracer=new n.Tracer({name:this.name,version:e.version},{resource:new c.Resource(e.resources)},this.reporter,{spanStart:e.spanStart,spanBeforeEnd:e.spanBeforeEnd,spanEnd:e.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=h.createZegoStore(e.product+"_"+e.appID+"_dy",e.env||0)},g.prototype.initRoot=function(e){this.rootSpan=this.tracer.startSpan("root",0);var t=l.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=t,this.rootSpan.end()},g.prototype.createSpan=function(e,t,r){var n,c;return e<=this.level?(n=void 0,n=r&&r.parent?l.setSpan(this.tracer.context.active(),r.parent.span):l.setSpan(this.tracer.context.active(),this.rootSpan),c=[],r&&r.linkSpans&&(r.linkSpans.forEach((function(e){c.push({context:e.span.context()})})),delete r.linkSpans),n=this.tracer.startSpan(t,e,Object.assign({},r,{links:c}),n),this.tracingSpans.length>=this._maxTracingSpanSize&&a.log.warn("max to limit"),n=new i.ZegoSpan(n.spanContext.spanId,n),i.ZegoSpan.tracer=this.tracer,this.tracingSpans.push(n),n):(a.log.warn("createSpan level not fix"),new i.ZegoSpan(s.NOOP_SPAN_ID,new o.NoopSpan))},g.prototype.setLogger=function(e){this.stateCenter.logger=e},g.prototype.setTimeOffset=function(e){this.reporter.setTimeOffset(e)},g.prototype.setWaitNtpTimeout=function(e){this.reporter.setWaitNtpTimeout(e)},g.prototype.setLogLevel=function(e){return this.stateCenter._log.setLogLevel(e)},g.prototype.startReport=function(e){return this.reporter.startReport(e)},g.prototype.setConfig=function(e){this.reporter.setConfig(e)},g.prototype.loadJs=function(e,t,r,n,o,i){return d.loadJS(e,this.dyStore,t,r,n,o,i)},g.prototype.flush=function(e){this.reporter.flush(e)},g.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},g.prototype.setProcessorCallBack=function(e,t){},g.prototype.setSampleConfig=function(e){this.level=e.level||this.level},g.prototype.setResource=function(e){this.tracer.setResource(e),this.reporter.setProcessData(this.tracer.resource.attributes)},t.ZegoTracer=r=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var n=r(6),o=r(1),i=r(2),s=r(7),a=r(8),l=r(9),c=r(18),u=r(19);function d(e,t,r,n){var i=u.mergeConfig(t);this._traceParams=i.traceParams,this._idGenerator=new s.IdGenerator,this.resource=null!=(t=t.resource)?t:a.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=e,e=Math.random().toString(36).slice(-6),this.context=new o.ContextAPI(e),this.reporter=r,this.spanProcessor=n||{}}d.prototype.startSpan=function(e,t,r,s){var a,u,d,h=function(e,t){if(!e.root)return o.getSpanContext(t)}(r=void 0===r?{}:r,s=void 0===s?this.context.active():s),p=this._idGenerator.generateSpanId(),f=(h&&c.isSpanContextValid(h)?(a=h.traceId,u=h.traceState,d=h.spanId):a=this._idGenerator.generateTraceId(),null!=(g=r.kind)?g:i.SpanKind.INTERNAL),g=null!=(h=r.links)?h:[];return h=n.sanitizeAttributes(r.attributes),r=i.TraceFlags.NONE,(g=new l.Span(this,s,e,t,{traceId:a,spanId:p,traceFlags:r,traceState:u},f,d,g)).setAttributes(h),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(g),g},d.prototype.setResource=function(e){this.resource=this.resource.merge(new a.Resource(e))},d.prototype.getActiveTraceParams=function(){return this._traceParams},t.Tracer=r=d},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.StackContextManager=void 0,r(1));function s(){this._enabled=!1,this._currentContext=i.ROOT_CONTEXT}s.prototype._bindFunction=function(e,t){function r(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(t,(function(){return e.apply(r,o)}))}void 0===t&&(t=i.ROOT_CONTEXT);var n=this;return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},s.prototype.active=function(){return this._currentContext},s.prototype.bind=function(e,t){return void 0===(t=void 0===t?i.ROOT_CONTEXT:t)&&(t=this.active()),"function"==typeof e?this._bindFunction(e,t):e},s.prototype.disable=function(){return this._currentContext=i.ROOT_CONTEXT,this._enabled=!1,this},s.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=i.ROOT_CONTEXT),this},s.prototype.with=function(e,t,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||i.ROOT_CONTEXT;try{return t.call.apply(t,o([r],n))}finally{this._currentContext=a}},t.StackContextManager=r=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.isTimeInput=t.hrTimeToMilliseconds=t.hrTimeDuration=t.timeInputToHrTime=t.isTimeInputHrTime=t.hrTime=void 0;var n=Math.pow(10,9),o=["00","01","02","03","04","05","06","07","08","09"];function i(e){var t=e/1e3;return[e=Math.trunc(t),Number((t-e).toFixed(9))*n]}function s(){var e,t=performance.timeOrigin;return"number"!=typeof t?(e=performance).timing&&e.timing.fetchStart:t}function a(e){var t=i(s()),r=i("number"==typeof e?e:performance.now());return e=t[0]+r[0],r=t[1]+r[1],n<r&&(r-=n,e+=1),[e,r]}function l(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.hrTime=a,t.isTimeInputHrTime=l,t.timeInputToHrTime=function(e){if(l(e))return e;if("number"==typeof e)return(e<s()?a:i)(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(e,t){var r=t[0]-e[0];return(e=t[1]-e[1])<0&&(--r,e+=n),[r,e]},t.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},t.isTimeInput=function(e){return l(e)||"number"==typeof e||e instanceof Date},t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,r=r(2);var n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(e){return n.test(e)&&e!==t.INVALID_TRACEID}function s(e){return o.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.TraceFlags.NONE},t.isValidTraceId=i,t.isValidSpanId=s,t.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var n=r(20);t.mergeConfig=function(e){var t=Object.assign({},n.DEFAULT_CONFIG,e);return t.traceParams=Object.assign({},n.DEFAULT_CONFIG.traceParams,e.traceParams||{}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var n=r(2);function o(e){void 0===e&&(e=n.INVALID_SPAN_CONTEXT),this._spanContext=e}o.prototype.context=function(){return this._spanContext},o.prototype.setAttribute=function(e,t){return this},o.prototype.appendAttribute=function(e,t){return this},o.prototype.setAttributes=function(e){return this},o.prototype.addEvent=function(e,t,r){return this},o.prototype.setStatus=function(e){return this},o.prototype.updateName=function(e){return this},o.prototype.end=function(e,t){},o.prototype.isRecording=function(){return!1},o.prototype.spanReport=function(){},o.prototype.recordException=function(e,t){},t.NoopSpan=r=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_SPAN_ID=t.SCHEDULED_DELAY_MILLIS=t.DEFAULT_MAX_SPAN_SIZE=t.readSpanKeys=void 0,t.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],t.DEFAULT_MAX_SPAN_SIZE=1e3,t.SCHEDULED_DELAY_MILLIS=3e3,t.NOOP_SPAN_ID="noop"},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,r(0)),u=r(24),d=r(30),h=r(38),p=r(5),f=r(4);function g(e,t){this.stateCenter=t,this.QUEUE_MAX=100,this.cacheMaxSize=f.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=f.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:f.CACHE_SIZE.totalAvailCache,totalDBSize:f.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.product=e,this.reporterCommonField=new Map,this.reportMap=new Map}g.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(r){switch(r.label){case 0:return this.config=n(n({},f.DEFAULT_CONFIG),e),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new u.ZegoService(this.config.env||c.ZEGO_ENV.BROWSER,this.config.bps||f.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,(function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.dropCount++,this.storePackagesDataToDB(e),[4,this.storePendingDataToDB(1)];case 1:return t.sent(),this._actionListener("postFail"),[2]}}))}))})),this.initPendingQueue(),this.storeHandler=new d.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",p.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=p.calculateMemSize(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return r.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){console.warn(e)})),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}}))}))},g.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null)},g.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.zegoService.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(this.staticConfig.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},g.prototype.pause=function(){this.isPaused=!0},g.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},g.prototype.startReport=function(e){var t=e.get("userID"),r=e.get("token");return!(!t||"string"!=typeof t||!r||"string"!=typeof r||(this.startCommonField=e,this.config.userID=t,this.config.token=r,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),(r=e.get("serverUrl"))&&(this.config.serverUrl=r,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(r=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,this.checkPendingQueue(r,e)),0))},g.prototype.setTimeOffset=function(e){var t=this;this.clientTimeOffset=e,this.tempBuffer.forEach((function(e){(e=e.data).tags.time_offset||(e.tags.time_offset=t.clientTimeOffset)})),this.config.userID&&this.bufferDump()},g.prototype.setProcessData=function(e){this.stateCenter.processData=e},g.prototype.on=function(e,t){return this._bindListener(e,t)},g.prototype.off=function(e,t){return this._deleteListener(e,t)},g.prototype.report=function(e,t){var r,n;if(15e3<e.length)return!1;try{n=JSON.parse(e)}catch(e){return!1}return this.stateCenter._log.debug(e+" "+t),(null!=n&&n.id_name||null!=(r=null==n?void 0:n.tags)&&r.id_name||this.config.userID)&&this.isWithNtp()?(null!=n&&n.id_name||null!=(r=null==n?void 0:n.tags)&&r.id_name?this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset),n.tags.id_name=this.config.userID),this.dumpData(JSON.stringify(n),t)):this.tempBuffer.push({data:n,level:t}),!0},g.prototype.dumpData=function(e,t){var r=this,n=p.calculateMemSize(e),o=(this.traceType.MEM_I_API+=n,c.getSeq()),i=(new Date).getTime(),s={seq:o,content:e,level:t,timestamp:i,packagedContent:""};t<=this.config.importantLevel?(s.key=t+"_"+i+"_"+o,this.dataInDb.push(s.key),this.storeHandler.storeData(s).then((function(e){r.pendingQueue.enqueue(s,t),r.traceType.DB_I_BACKUP+=n})).catch((function(e){var n=r.dataInDb.findIndex((function(e){return e===s.key}));-1<n&&r.dataInDb.splice(n,1),r.pendingQueue.enqueue(s,t)}))):this.pendingQueue.enqueue(s,t),"force"===this.state&&(e=p.calculateMemSize(e),this.forceDataTotalLen+=e)},g.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||void 0!==this.clientTimeOffset},g.prototype.bufferDump=function(){var e,t=this.tempBuffer.shift();t&&(e=t.data,t=t.level,e.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(e),t),this.bufferDump())},g.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},g.prototype.testSize=function(e){},g.prototype.flush=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.zegoService.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,0<t?this.checkPendingQueue(t,e):this.loadReportData())},g.prototype.setWaitNtpTimeout=function(e){this.waitNtpTimeout=e},g.prototype.setWaitNtpTimer=function(){var e=this;this.ntpTimer=setTimeout((function(){e.isWaitNtpTimeout=!0,e.config.userID&&e.bufferDump()}),this.waitNtpTimeout)},g.prototype.startReportTimer=function(){var e=this,t=(this.timeInterval=!0,(r=this.pendingQueue.getPendingDataInfo()).pendingDataSize),r=r.size;this.checkPendingQueue(t,r),this.timer=window.setTimeout((function(){e.startReportTimer()}),3e4)},g.prototype.checkCacheDataTimer=function(){return o(this,void 0,void 0,(function(){var e,t,r=this;return i(this,(function(n){switch(n.label){case 0:return t=this.pendingQueue.getPendingDataInfo(),e=t.pendingDataSize,t=t.size,e>this.config.reportSize||t>this.config.reportNum?[4,this.checkPendingQueue(e,t)]:[3,2];case 1:return n.sent(),[3,3];case 2:this.loadReportData(),n.label=3;case 3:return this.timer=window.setTimeout((function(){r.checkCacheDataTimer()}),15e3),[2]}}))}))},g.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){window.event&&(window.event.cancelBubble=!0),e.saveDataBeforeUnload()}))},g.prototype.saveDataBeforeUnload=function(){var e=this.pendingQueue.readStoreData(1),t=(e.totalLen,e.storeArr);this.storeHandler.resetCommonStore(),(e=[]).push.apply(e,a(t)),t=this.zegoService.readReportQueueData(),e.push.apply(e,a(t)),0<e.length&&this.storeHandler.storePendingData(e)},g.prototype.postSucHandler=function(e,t,r){return o(this,void 0,void 0,(function(){var r,n,o,s,a,l=this;return i(this,(function(i){switch(i.label){case 0:for(e.forEach((function(e){l.traceType.MEM_O_DONE+=p.calculateMemSize(e.content)})),r=function(t){var r=e[t];n.storeHandler.removeDataItem(r).then((function(e){r.key&&l.reportMap.delete(r.key)})).catch((function(e){}))},n=this,o=0;o<e.length;o++)r(o);return this.reportPackagesSize-=t,a=this.pendingQueue.getPendingDataInfo(),s=a.pendingDataSize,a=a.size,s>this.config.reportSize||a>this.config.reportNum?[4,this.checkPendingQueue(s,a)]:[3,2];case 1:return i.sent(),[3,3];case 2:this.loadReportData(),i.label=3;case 3:return"force"===this.state&&0==this.reportPackagesSize&&(a=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,a=1-Number((a/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",a),0<this.storeHandler.storeSize&&this.loadReportData((function(e){0===e&&(l.state="normal",l.zegoService.setBps(l.config.bps||f.DEFAULT_CONFIG.bps),l.listenerList.forceSuccessCallback&&l._actionListener("forceResult","SUCCESS"))}))),[2]}}))}))},g.prototype.checkPendingQueue=function(e,t){return o(this,void 0,void 0,(function(){var r,n,o,s,a;return i(this,(function(i){switch(i.label){case 0:return e>this.config.reportSize||t>this.config.reportNum||"force"==this.state||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2]):[3,7];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:i.sent(),i.label=5;case 5:return[2];case 6:if(o=this.pendingQueue.readReportData(this.config.reportSize),r=o.totalLen,o=o.reportDataArr,r<=0)return[2];for(o=this.setCommonField(o),n=o.packageArr,o=o.packageLen,this.zegoService.report(n,o,this.product),s=0;s<n.length;s++)a=n[s],this.reportMap.set(a.key,a);this.reportPackagesSize+=o,this.pendingQueue.refresh(r),i.label=7;case 7:return[2]}}))}))},g.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new h.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(t,r,n){return o(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.checkPendingQueue(n,r)];case 1:return e.sent(),[2]}}))}))}})},g.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var r=p.calculateMemSize(t.content);e.traceType.MEM_I_LOAD+=r,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},g.prototype.storePendingDataToDB=function(e){return o(this,void 0,void 0,(function(){var t,r,n,o,s,a,c,u;return i(this,(function(d){switch(d.label){case 0:r=this.pendingQueue.readStoreData(e),t=r.totalLen,a=r.storeArr,r=function(e){var r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.storeDataItem(e,t)];case 1:return i.sent(),r=e.level+"_"+e.timestamp+"_"+e.seq,-1<(o=n.dataInDb.findIndex((function(e){return e===r})))&&n.dataInDb.splice(o,1),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))},n=this,d.label=1;case 1:d.trys.push([1,6,7,8]),o=l(a),s=o.next(),d.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,r(a)]);case 3:d.sent(),d.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return c={error:c=d.sent()},[3,8];case 7:try{s&&!s.done&&(u=o.return)&&u.call(o)}finally{if(c)throw c.error}return[7];case 8:return[2]}}))}))},g.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(r){var n=p.calculateMemSize(e.content);t.traceType.MEM_O_DUMP+=n})).catch((function(e){}))}))},g.prototype.storeDataItem=function(e,t){var r=this;return new Promise((function(t,n){return o(r,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return o.sent(),r=p.calculateMemSize(e.content),this.traceType.MEM_O_DUMP+=r,t(),[3,3];case 2:return r=o.sent(),n(r),[3,3];case 3:return[2]}}))}))}))},g.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(r){t.isLoadReportData=!1,r.datas.forEach((function(e){var r;t.reportMap.has(e.key)||t.pendingQueue.findInQueue(e)||(r=p.calculateMemSize(e.content),t.traceType.MEM_I_LOAD+=r,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key))})),e&&e(r.len)})).catch((function(e){t.isLoadReportData=!1})))},g.prototype.setCommonField=function(e){var t=this,r=0;return e.forEach((function(e){var n,o,i,a,c,u;if(e.packagedContent=JSON.parse(e.content),t.config.initCommonField)try{for(var d=l(t.config.initCommonField),h=d.next();!h.done;h=d.next()){var f=s(h.value,2),g=f[0],m=f[1];(S=JSON.parse(e.content))[g]=m,e.packagedContent=S}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}if(t.startCommonField)try{for(var v=l(t.startCommonField),_=v.next();!_.done;_=v.next()){var y=s(_.value,2);g=y[0],m=y[1],"userID"!==g&&"token"!==g&&"serverUrl"!==g&&((S=JSON.parse(e.content))[g]=m,e.packagedContent=S)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(t.reporterCommonField)try{for(var b=l(t.reporterCommonField),E=b.next();!E.done;E=b.next()){var S,C=s(E.value,2);g=C[0],m=C[1],(S=JSON.parse(e.content))[g]=m,e.packagedContent=S}}catch(e){c={error:e}}finally{try{E&&!E.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}r+=p.calculateMemSize(JSON.stringify(e.packagedContent))})),{packageArr:e,packageLen:r}},g.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},g.prototype._deleteListener=function(e,t){if(!this.listenerList[e])return!1;var r=this.listenerList[e];return t?r.splice(r.indexOf(t),1):this.listenerList[e]=[],!0},g.prototype._actionListener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,a(t))}catch(e){}}))},t.ZegoDataReport=r=g},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoService=void 0,r(0)),s=r(25),a=r(29),l=r(4);function c(e,t,r,n,o){this.env=e,this.product=r,this.pro=n,this.stateCenter=o,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=i.ENUM_NETWORK_STATE.online,this.state=i.ENUM_CONNECT_STATE.disconnected,this.bindWindowListener(),this.networkState=i.ENUM_NETWORK_STATE.online,this.service=new s.LogService(e,r,n,o),this.setBps(t),this.reportQueue=new i.Queue}c.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.networkState=i.ENUM_NETWORK_STATE.offline})),window.addEventListener("online",(function(t){e.networkState=i.ENUM_NETWORK_STATE.online;var r=e.url;e.url="",e.setLogServer(r),e.netWorkFail=!1}))},c.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=i.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=i.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=i.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return!1}},c.prototype.setLogUrlParams=function(e){this.logParams=e},c.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name&&(this.state=i.ENUM_CONNECT_STATE.connecting,e=e+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.stateCenter.logger.info("zt.rzs.owsls socket open"),t.openHandler()})),this.service.closeHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()})),this.service.errorHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()}))))},c.prototype.stopWebSocketServer=function(){this.service.closeSocket()},c.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},c.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},c.prototype.SendHttpsLog=function(e,t,r,n){this.env===i.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(e,t,r,n):this.SendHttpsLogWeChatMini(e,t,r,n)},c.prototype.SendHttpsLogWeb=function(e,t,r,n){var o=this,i=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0!=i.responseText.length)try{var e=JSON.parse(i.responseText).interval;"number"==typeof e&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),r&&r()}catch(e){n&&n()}}else n&&n()},i.open("POST",this.url,!0),i.send(e)},c.prototype.SendHttpsLogWeChatMini=function(e,t,r,n){var o=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),r&&r())},fail:function(e){n&&n()}})},c.prototype.openHandler=function(){this.state=i.ENUM_CONNECT_STATE.connected,this.startReport()},c.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},c.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},c.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},c.prototype.report=function(e,t,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:r}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport()},c.prototype.setBps=function(e){this.tokenBucket=new a.TokenBucket(l.BUCKET_CONFIG.bucketSize,e/8,"sec")},c.prototype.startReport=function(){var e,t,r,n,o=this;this.state===i.ENUM_CONNECT_STATE.disconnected?(n=this.url,this.url="",this.setLogServer(n)):0<this.reportQueue.size()&&(n=this.reportQueue.dequeue(),e=n.reportDatas,t=n.dataLen,r=n.product,new Date,this.tokenBucket.removeTokens(t,(function(){o.netWorkFail?o.postFailCallbackList[r](e):o.reportData(e,t,r,(function(){o.failCount=0,o.failStartTime=0,o.packageLen--,o.packagesDataSize-=t,o.postSucCallbackList[r]&&o.postSucCallbackList[r](e,t,r)}),(function(n){o.reportQueue.enqueue({reportDatas:e,dataLen:t,product:r}),o.failCount++,1==o.failCount&&(o.failStartTime=Date.now());var i,s=(Date.now()-o.failStartTime)/1e3;o.failCount>=l.FAIL_COUNT&&s>l.FAIL_TIME||o.failCount>=l.FAIL_MAX_COUNT?(o.netWorkFail=!0,i=o.decodeReportQueue(),Object.keys(o.postFailCallbackList).forEach((function(e){o.postFailCallbackList[r](i[e])}))):o.startReport()}))})))},c.prototype.resumeReport=function(){!0===this.netWorkFail&&this.networkState===i.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},c.prototype.reportData=function(e,t,r,n,o){var s=this,a=[];e.forEach((function(e){a.push(e.packagedContent)})),this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState!==i.ENUM_NETWORK_STATE.offline?this.service.sendMessage("report",a,n,(function(e){var t;s.state===i.ENUM_CONNECT_STATE.disconnected&&e===i.SOCKET_DISCONNECT&&(t=s.url,s.url="",s.setLogServer(t)),o&&o(e)})):o&&o(i.errorList.BROKEN):this.logType==i.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(a,t,n,(function(){o&&o()}))},c.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var r=[];0<t;)t%2!=0?r.push(1):r.push(0),t=Number(t/2);for(r.reverse();r.length<8;)r.unshift(0);var n="";if(1==(r=r.join("")).substr(0,1)){for(var o=1;o<r.length;o++)1==r.substr(o,1)?n+=0:n+=1;return"-"+(parseInt(n,2)+1)}for(o=0;o<r.length;o++)n+=r.substr(o,1);return parseInt(n,2)},c.prototype.decodeReportQueue=function(){for(var e={},t=this.reportQueue.size(),r=0;r<t;r++){var n,i=(n=this.reportQueue.dequeue()).reportDatas,s=n.dataLen;e[n=n.product]||(e[n]=[]),e[n]=o(e[n],i),this.reportQueue.enqueue({reportDatas:i,dataLen:s,product:n})}return e},c.prototype.readReportQueueData=function(){for(var e=[],t=this.reportQueue.size(),r=0;r<t;r++){var n=this.reportQueue.dequeue(),i=n.reportDatas;n.dataLen,n.product,e.push.apply(e,o(i))}return e},t.ZegoService=r=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var n=r(26),o=r(4),i=r(0);function s(e,t,r,o){this.env=e,this.product=t,this.pro=r,this.stateCenter=o,this.service=new n.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}s.prototype.handleSendCommandMsgRsp=function(e){var t,r,n=this,o=this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)];null!=o&&(r=o._data,delete this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)],this.service.sendCommandList.remove(o),0===e.code?setTimeout((function(){r&&null!=r.success&&r.success(e,n.cmdSeq)}),0):setTimeout((function(){r&&null!=r.error&&r.error(e,n.cmdSeq)}),0))},s.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},s.prototype.closeHandler=function(e){this.service.closeHandler(e)},s.prototype.openHandler=function(e){this.service.openHandler(e)},s.prototype.errorHandler=function(e){this.service.errorHandler(e)},s.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},s.prototype.startCheck=function(){this.service.startCheck()},s.prototype.stopCheck=function(){this.service.stopCheck()},s.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},s.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},s.prototype.closeSocket=function(){this.service.closeSocket()},s.prototype.sendMessage=function(e,t,r,n,s,a){return this.service.isDisConnect()?(n&&n(i.SOCKET_DISCONNECT),0):(e=s||this.getHeader(e),this.service.sendMessage(e,t,r,n,{timeOut:1e3*o.DEFAULT_CONFIG.netTimeout}))},s.prototype.on=function(e,t){this.responseRouters[e]=t},t.LogService=r=s},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0,r(27)),i=r(0),s=r(28);function a(e,t,r,n){this.product=t,this.pro=r,this.stateCenter=n,this.socket=null,this.sendCommandList=new i.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}a.prototype.createSocket=function(e){this.socket=o.createZegoWebSocket(e,this.ENV),this.socket.binaryType="arraybuffer"},a.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},a.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},a.prototype.sendMessage=function(e,t,r,o,i){void 0===r&&(r=null),void 0===o&&(o=null),void 0===i&&(i={timeOut:6e3});var a=n(n({},this.stateCenter.processData),{time_upload:Date.now()});return r={data:a={message_id:e.seq,product:this.product,s:JSON.stringify({speed_detail:t,process:a})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:r,error:o},o=this.sendCommandList.push(r),this.sendCommandMap[r.seq]=o,this.socket&&"pb"!==this.pro&&(a=s.deflate(JSON.stringify(a),{to:"string"}),this.socket.send(a)),e.seq},a.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(i.errorList.TIMEOUT,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},a.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),n=Date.parse(new Date+""),o=0;!(null==r||r._data&&r._data.sendTime+r._data.timeOut>n||(r._data&&delete t[r._data.data.message_id],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+this.sendDataDropTimeout<n||r&&r._data&&r._data.error&&r._data.error(i.errorList.TIMEOUT,r._data.data.message_id,r._data.data.s),++o>=this.sendDataCheckOnceCount));)r=e.getFirst()},a.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},a.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},a.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.responseHandler(),e(r)})},a.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},a.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},a.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},a.prototype.onMessage=function(e){},t.ZegoSocketService=r=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var n=r(0),o=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t===n.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,r){!function(e){"use strict";function t(e){for(var t=e.length;0<=--t;)e[t]=0}var r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576),a=(t(s),new Array(60)),l=(t(a),new Array(512)),c=(t(l),new Array(256)),u=(t(c),new Array(29));t(u);var d,h,p,f=new Array(30);function g(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function m(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function v(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function y(e,t,r,n){var o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function b(e,t,o){var i,s,a,l,d=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],s=e.pending_buf[e.l_buf+d],d++,0==i?U(e,s,t):(a=c[s],U(e,a+256+1,t),0!==(l=r[a])&&(s-=u[a],B(e,s,l)),a=x(--i),U(e,a,o),0!==(l=n[a])&&(i-=f[a],B(e,i,l))),d<e.last_lit;);U(e,256,t)}function E(e,t){var r,n,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<l;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,r=e.heap_len>>1;1<=r;r--)H(e,i,r);for(o=l;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*o]=i[2*r]+i[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=o,e.heap[1]=o++,H(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var u,d,h,p,f,g=e,m=t.dyn_tree,v=t.max_code,_=t.stat_desc.static_tree,y=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,E=t.stat_desc.extra_base,S=t.stat_desc.max_length,C=0,T=0;T<=15;T++)g.bl_count[T]=0;for(m[2*g.heap[g.heap_max]+1]=0,u=g.heap_max+1;u<573;u++)(T=m[2*m[2*(d=g.heap[u])+1]+1]+1)>S&&(T=S,C++),m[2*d+1]=T,v<d||(g.bl_count[T]++,p=0,E<=d&&(p=b[d-E]),f=m[2*d],g.opt_len+=f*(T+p),y&&(g.static_len+=f*(_[2*d+1]+p)));if(0!==C){do{for(T=S-1;0===g.bl_count[T];)T--}while(g.bl_count[T]--,g.bl_count[T+1]+=2,g.bl_count[S]--,0<(C-=2));for(T=S;0!==T;T--)for(d=g.bl_count[T];0!==d;)(h=g.heap[--u])>v||(m[2*h+1]!==T&&(g.opt_len+=(T-m[2*h+1])*m[2*h],m[2*h+1]=T),d--)}j(i,c,e.bl_count)}function S(e,t,r){var n,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],++a<l&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4))}function C(e,t,r){var n,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)){if(a<c)for(;U(e,o,e.bl_tree),0!=--a;);else 0!==o?(o!==i&&(U(e,o,e.bl_tree),a--),U(e,16,e.bl_tree),B(e,a-3,2)):a<=10?(U(e,17,e.bl_tree),B(e,a-3,3)):(U(e,18,e.bl_tree),B(e,a-11,7));i=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4)}}function T(e,t,r,n){B(e,0+(n?1:0),3),n=t,t=r,_(r=e),D(r,t),D(r,~t),r.pending_buf.set(r.window.subarray(n,n+t),r.pending),r.pending+=t}function w(e,t,r,n){var o=q,i=n+r;e^=-1;for(var s=n;s<i;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}function R(e,t){return e.msg=V[t],t}function k(e){return(e<<1)-(4<e?9:0)}function O(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function I(e,t){K(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,O(e.strm)}function P(e,t){e.pending_buf[e.pending++]=t}function A(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function N(e,t){var r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,p=c[i+s-1],f=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+s]===f&&c[r+s-1]===p&&c[r]===c[i]&&c[++r]===c[i+1]){for(i+=2,r++;c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h;);if(n=258-(h-i),i=h-258,s<n){if(e.match_start=t,a<=(s=n))break;p=c[i+s-1],f=c[i+s]}}}while((t=d[t&u])>l&&0!=--o);return s<=e.lookahead?s:e.lookahead}function L(e,t){for(var r,n;;){if(e.lookahead<ge){if(_e(e),e.lookahead<ge&&t===X)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ge&&(e.match_length=N(e,r)),3<=e.match_length)if(n=$(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ve(e,e.ins_h,e.window[e.strstart+1]);else n=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}function M(e,t){for(var r,n,o;;){if(e.lookahead<ge){if(_e(e),e.lookahead<ge&&t===X)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ge&&(e.match_length=N(e,r),e.match_length<=5&&(e.strategy===ce||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-3,n=$(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(I(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=$(e,0,e.window[e.strstart-1]))&&I(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=$(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}t(f);var x=function(e){return e<256?l[e]:l[256+(e>>>7)]},D=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},B=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},U=function(e,t,r){B(e,r[2*t],r[2*t+1])},Z=function(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},j=function(e,t,r){for(var n,o=new Array(16),i=0,s=1;s<=15;s++)o[s]=i=i+r[s-1]<<1;for(n=0;n<=t;n++){var a=e[2*n+1];0!==a&&(e[2*n]=Z(o[a]++,a))}},H=function(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&y(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!y(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},F=!1,z=T,G=function(e,t,r,n){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;i=i+(o=o+t[n++]|0)|0,--s;);o%=65521,i%=65521}return o|i<<16|0},q=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}()),V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Y=z,K=function(e,t,r,n){var o,l,c,u=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),E(e,e.l_desc),E(e,e.d_desc),u=function(e){var t;for(S(e,e.dyn_ltree,e.l_desc.max_code),S(e,e.dyn_dtree,e.d_desc.max_code),E(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(l=e.static_len+3+7>>>3)<=o&&(o=l)):o=l=r+5,r+4<=o&&-1!==t)T(e,t,r,n);else if(4===e.strategy||l===o)B(e,2+(n?1:0),3),b(e,s,a);else{B(e,4+(n?1:0),3);var d=e,h=(t=e.l_desc.max_code+1,r=e.d_desc.max_code+1,u+1);for(B(d,t-257,5),B(d,r-1,5),B(d,h-4,4),c=0;c<h;c++)B(d,d.bl_tree[2*i[c]+1],3);C(d,d.dyn_ltree,t-1),C(d,d.dyn_dtree,r-1),b(e,e.dyn_ltree,e.dyn_dtree)}v(e),n&&_(e)},$=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(c[r]+256+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},Q=function(e){B(e,2,3),U(e,256,s),16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},X=W.Z_NO_FLUSH,J=W.Z_PARTIAL_FLUSH,ee=W.Z_FULL_FLUSH,te=W.Z_FINISH,re=W.Z_BLOCK,ne=W.Z_OK,oe=W.Z_STREAM_END,ie=W.Z_STREAM_ERROR,se=W.Z_DATA_ERROR,ae=W.Z_BUF_ERROR,le=W.Z_DEFAULT_COMPRESSION,ce=W.Z_FILTERED,ue=W.Z_HUFFMAN_ONLY,de=W.Z_RLE,he=W.Z_FIXED,pe=W.Z_UNKNOWN,fe=W.Z_DEFLATED,ge=262,me=function(e){for(var t=e.length;0<=--t;)e[t]=0},ve=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},_e=function(e){var t,r,n,o,i,s,a,l,c,u=e.w_size;do{if(l=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-ge)){for(e.window.set(e.window.subarray(u,u+u),0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=r=e.hash_size;n=e.head[--t],e.head[t]=u<=n?n-u:0,--r;);for(t=r=u;n=e.prev[--t],e.prev[t]=u<=n?n-u:0,--r;);l+=u}if(0===e.strm.avail_in)break;if(i=e.strm,s=e.window,a=e.strstart+e.lookahead,c=void 0,r=0===(c=(c=i.avail_in)>l?l:c)?0:(i.avail_in-=c,s.set(i.input.subarray(i.next_in,i.next_in+c),a),1===i.state.wrap?i.adler=G(i.adler,s,c,a):2===i.state.wrap&&(i.adler=w(i.adler,s,c,a)),i.next_in+=c,i.total_in+=c,c),e.lookahead+=r,3<=e.lookahead+e.insert)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ve(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ve(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ge&&0!==e.strm.avail_in)};function ye(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}var be=[new ye(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_e(e),0===e.lookahead&&t===X)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,I(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-ge&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(I(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(I(e,!1),e.strm.avail_out),1)})),new ye(4,4,8,4,L),new ye(4,5,16,8,L),new ye(4,6,32,32,L),new ye(4,4,16,16,M),new ye(8,16,32,32,M),new ye(8,16,128,128,M),new ye(8,32,128,256,M),new ye(32,128,258,1024,M),new ye(32,258,258,4096,M)];function Ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Se=function(e){if(!e||!e.state)return R(e,ie);e.total_in=e.total_out=0,e.data_type=pe;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=X,function(e){if(!F){for(var t,i,_,y=new Array(16),b=0,E=0;E<28;E++)for(u[E]=b,t=0;t<1<<r[E];t++)c[b++]=E;for(c[b-1]=E,E=_=0;E<16;E++)for(f[E]=_,t=0;t<1<<n[E];t++)l[_++]=E;for(_>>=7;E<30;E++)for(f[E]=_<<7,t=0;t<1<<n[E]-7;t++)l[256+_++]=E;for(i=0;i<=15;i++)y[i]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,y[8]++;for(;t<=255;)s[2*t+1]=9,t++,y[9]++;for(;t<=279;)s[2*t+1]=7,t++,y[7]++;for(;t<=287;)s[2*t+1]=8,t++,y[8]++;for(j(s,287,y),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=Z(t,5);d=new g(s,r,257,286,15),h=new g(a,n,0,30,15),p=new g(new Array(0),o,0,19,7),F=!0}e.l_desc=new m(e.dyn_ltree,d),e.d_desc=new m(e.dyn_dtree,h),e.bl_desc=new m(e.bl_tree,p),e.bi_buf=0,e.bi_valid=0,v(e)}(t),ne};function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}for(var Te=new Uint8Array(256),we=0;we<256;we++)Te[we]=252<=we?6:248<=we?5:240<=we?4:224<=we?3:192<=we?2:1;function Re(e){for(var t,r,n,o,i=e.length,s=0,a=0;a<i;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=o=0;o<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t}function ke(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Te[254]=Te[254]=1;var Oe=Object.prototype.toString,Ie=W.Z_NO_FLUSH,Pe=W.Z_SYNC_FLUSH,Ae=W.Z_FULL_FLUSH,Ne=W.Z_FINISH,Le=W.Z_OK,Me=W.Z_STREAM_END,xe=W.Z_DEFAULT_COMPRESSION,De=W.Z_DEFAULT_STRATEGY,Be=W.Z_DEFLATED;function Ue(e){this.options=function(e){for(var t,r,n=Array.prototype.slice.call(arguments,1);n.length;){var o=n.shift();if(o){if("object"!==Ce(o))throw new TypeError(o+"must be non-object");for(var i in o)t=o,r=i,Object.prototype.hasOwnProperty.call(t,r)&&(e[i]=o[i])}}return e}({level:xe,method:Be,chunkSize:16384,windowBits:15,memLevel:8,strategy:De},e||{});var t,r=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0,function(e,t,r,n,o,i){if(!e)return ie;var s=1;if(t===le&&(t=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),o<1||9<o||r!==fe||n<8||15<n||t<0||9<t||i<0||he<i)return R(e,ie);8===n&&(n=9);var a=new Ee;return(e.state=a).strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,(n=Se(s=e))===ne&&((s=s.state).window_size=2*s.w_size,me(s.head),s.max_lazy_match=be[s.level].max_lazy,s.good_match=be[s.level].good_length,s.nice_match=be[s.level].nice_length,s.max_chain_length=be[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),n}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(r!==Le)throw new Error(V[r]);if(e.header&&(n=this.strm,t=e.header,n&&n.state&&2===n.state.wrap&&(n.state.gzhead=t)),e.dictionary){var n="string"==typeof e.dictionary?Re(e.dictionary):"[object ArrayBuffer]"===Oe.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((r=function(e,t){var r=t.length;if(!e||!e.state)return ie;var n=e.state,o=n.wrap;if(2===o||1===o&&42!==n.status||n.lookahead)return ie;1===o&&(e.adler=G(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(0===o&&(me(n.head),n.strstart=0,n.block_start=0,n.insert=0),(i=new Uint8Array(n.w_size)).set(t.subarray(r-n.w_size,r),0),t=i,r=n.w_size);var i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,_e(n);3<=n.lookahead;){for(var l=n.strstart,c=n.lookahead-2;n.ins_h=ve(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++,--c;);n.strstart=l,n.lookahead=2,_e(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,n.wrap=o,ne}(this.strm,n))!==Le)throw new Error(V[r]);this._dict_set=!0}}function Ze(e,t){if((t=new Ue(t)).push(e,!0),t.err)throw t.msg||V[t.err];return t.result}function je(e,t){return(t=t||{}).raw=!0,Ze(e,t)}function He(e,t){return(t=t||{}).gzip=!0,Ze(e,t)}Ue.prototype.push=function(e,t){var r,n,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Ne:Ie,"string"==typeof e?o.input=Re(e):"[object ArrayBuffer]"===Oe.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;)if(0===o.avail_out&&(o.output=new Uint8Array(i),o.next_out=0,o.avail_out=i),(n===Pe||n===Ae)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if(function(e,t){var r,n;if(!e||!e.state||re<t||t<0)return e?R(e,ie):ie;var o=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==te)return R(e,0===e.avail_out?ae:ie);o.strm=e;var i=o.last_flush;if(o.last_flush=t,42===o.status&&(2===o.wrap?(e.adler=0,P(o,31),P(o,139),P(o,8),o.gzhead?(P(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),P(o,255&o.gzhead.time),P(o,o.gzhead.time>>8&255),P(o,o.gzhead.time>>16&255),P(o,o.gzhead.time>>24&255),P(o,9===o.level?2:o.strategy>=ue||o.level<2?4:0),P(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(P(o,255&o.gzhead.extra.length),P(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=w(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(P(o,0),P(o,0),P(o,0),P(o,0),P(o,0),P(o,9===o.level?2:o.strategy>=ue||o.level<2?4:0),P(o,3),o.status=113)):(s=fe+(o.w_bits-8<<4)<<8,s|=(o.strategy>=ue||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(s|=32),s+=31-s%31,o.status=113,A(o,s),0!==o.strstart&&(A(o,e.adler>>>16),A(o,65535&e.adler)),e.adler=1)),69===o.status)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),O(e),r=o.pending,o.pending!==o.pending_buf_size));)P(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),O(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}}while(n=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,P(o,n),0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),O(e),r=o.pending,o.pending===o.pending_buf_size)){n=1;break}}while(n=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,P(o,n),0!==n);o.gzhead.hcrc&&o.pending>r&&(e.adler=w(e.adler,o.pending_buf,o.pending-r,r)),0===n&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&O(e),o.pending+2<=o.pending_buf_size&&(P(o,255&e.adler),P(o,e.adler>>8&255),e.adler=0,o.status=113)):o.status=113),0!==o.pending){if(O(e),0===e.avail_out)return o.last_flush=-1,ne}else if(0===e.avail_in&&k(t)<=k(i)&&t!==te)return R(e,ae);if(666===o.status&&0!==e.avail_in)return R(e,ae);if(0!==e.avail_in||0!==o.lookahead||t!==X&&666!==o.status){var s=o.strategy===ue?function(e,t){for(var r;;){if(0===e.lookahead&&(_e(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,r=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}(o,t):o.strategy===de?function(e,t){for(var r,n,o,i,s=e.window;;){if(e.lookahead<=258){if(_e(e),e.lookahead<=258&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){for(i=e.strstart+258;n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i;);e.match_length=258-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(r=$(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=$(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}(o,t):be[o.level].func(o,t);if(3!==s&&4!==s||(o.status=666),1===s||3===s)return 0===e.avail_out&&(o.last_flush=-1),ne;if(2===s&&(t===J?Q(o):t!==re&&(Y(o,0,0,!1),t===ee&&(me(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),O(e),0===e.avail_out))return o.last_flush=-1,ne}return t!==te?ne:o.wrap<=0?oe:(2===o.wrap?(P(o,255&e.adler),P(o,e.adler>>8&255),P(o,e.adler>>16&255),P(o,e.adler>>24&255),P(o,255&e.total_in),P(o,e.total_in>>8&255),P(o,e.total_in>>16&255),P(o,e.total_in>>24&255)):(A(o,e.adler>>>16),A(o,65535&e.adler)),O(e),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?ne:oe)}(o,n)===Me)return 0<o.next_out&&this.onData(o.output.subarray(0,o.next_out)),r=function(e){if(!e||!e.state)return ie;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?R(e,ie):(e.state=null,113===t?R(e,se):ne)}(this.strm),this.onEnd(r),this.ended=!0,r===Le;if(0!==o.avail_out){if(0<n&&0<o.next_out)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(0===o.avail_in)break}else this.onData(o.output)}return!0},Ue.prototype.onData=function(e){this.chunks.push(e)},Ue.prototype.onEnd=function(e){e===Le&&(this.result=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var o=new Uint8Array(t),i=0,s=0,a=e.length;i<a;i++){var l=e[i];o.set(l,s),s+=l.length}return o}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Fe={Deflate:Ue,deflate:z=Ze,deflateRaw:je,gzip:He,constants:W};e.Deflate=Ue,e.constants=W,e.default=Fe,e.deflate=z,e.deflateRaw=je,e.gzip=He,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";function n(e,t,r,n){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=n,this.content=0,this.lastDrip=+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0,n.prototype.removeTokens=function(e,t){var r=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?n():this.parentBucket?this.parentBucket.removeTokens(e,(function(o,i){return o?t(o,null):e>r.content?n():(r.content-=e,void t(null,Math.min(i,r.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function n(){var n=Math.ceil((e-r.content)*(r.interval/r.tokensPerInterval));return setTimeout((function(){r.removeTokens(e,t)}),n),!1}},n.prototype.tryRemoveTokens=function(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0))))},n.prototype.drip=function(){var e,t;this.tokensPerInterval?(e=+new Date,t=Math.max(e-this.lastDrip,0),this.lastDrip=e,t*=this.tokensPerInterval/this.interval,this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize},t.TokenBucket=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0,r(11)),a=r(5),l=r(4),c=i(r(12));function u(e,t,r,n,o,i){this.name=e,this.storeName=t,this.config=r,this.traceType=n,this.staticConfig=o,this.stateCenter=i,this.storeSize=0,this.storeTime=0,this.storeDelPer=l.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.store=s.createZegoStore(e,r.env,t),this.commonStore=s.createZegoStore("data_common",r.env,"reporter")}u.prototype.init=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,this.transferStoreData()];case 1:return r.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(e=r.sent())?[3,4]:(t={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,t)]);case 3:return r.sent(),[3,5];case 4:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,r.label=5;case 5:return[3,7];case 6:return r.sent(),[3,7];case 7:return[2]}}))}))},u.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},u.prototype.resetCommonStore=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return e.sent(),[2]}}))}))},u.prototype.transferStoreData=function(){return n(this,void 0,void 0,(function(){var e,t,r,i,l,c,u,d,h,p,f,g=this;return o(this,(function(m){switch(m.label){case 0:return[4,this.commonStore.keys()];case 1:e=m.sent(),t=0,m.label=2;case 2:return t<e.length?(f=e[t])===this.name+this.interSymbol+this.storeName?[3,12]:[4,this.commonStore.getItem(f)]:[3,13];case 3:return(h="string"==typeof(h=m.sent())?JSON.parse(h):h).lock||h.pros?[3,12]:(d=f.split(this.interSymbol),r=d[0],i=d[1],[4,(l=s.createZegoStore(r,this.config.env,i)).keys()]);case 4:return 0!=(p=m.sent()).length?[3,5]:[3,11];case 5:return h.lock=1,[4,this.commonStore.setItem(f,h)];case 6:m.sent(),c=0,m.label=7;case 7:return c<p.length?(u=p[c],[4,l.getItem(u)]):[3,11];case 8:return d=m.sent(),-1!==u.indexOf("pending")?d&&JSON.parse(d).forEach((function(e){return n(g,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})):(f=a.analyzeKey(u),h=f.level,p=f.timestamp,f=f.seq,this.storeData({level:h,timestamp:p,seq:f,content:d})),[4,l.removeItem(u)];case 9:m.sent(),m.label=10;case 10:return c++,[3,7];case 11:this.drops.push({name:r,storeName:i}),m.label=12;case 12:return t++,[3,2];case 13:return setTimeout((function(){return n(g,void 0,void 0,(function(){var e,t,r;return o(this,(function(n){switch(n.label){case 0:e=0,n.label=1;case 1:if(!(e<this.drops.length))return[3,7];r=this.drops[e],t=r.name,r=r.storeName,n.label=2;case 2:return n.trys.push([2,5,,6]),[4,this.dropInstance(t,r)];case 3:return n.sent(),[4,this.commonStore.removeItem(t+this.interSymbol+r)];case 4:case 5:return n.sent(),[3,6];case 6:return e++,[3,1];case 7:return[2]}}))}))}),1e3),[2]}}))}))},u.prototype.dropInstance=function(e,t){return new Promise((function(r,n){c.default.dropInstance({name:e+":"+t}).then((function(){r()})).catch((function(e){n(e)}))}))},u.prototype.setDropCallBack=function(e){this.dropCallBack=e},u.prototype.storeData=function(e){var t=this;return new Promise((function(r,i){return n(t,void 0,void 0,(function(){var t,n,i,s,l,c=this;return o(this,(function(o){switch(o.label){case 0:t=e.level,n=e.timestamp,s=e.seq,i=e.content,s=t+"_"+n+"_"+s,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.store.getItem(s)];case 2:return o.sent()?(r(),[2]):[3,4];case 3:return o.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(e),[2];if(l=a.calculateMemSize(s)+a.calculateMemSize(i),this.staticConfig.totalDBSize-l<=0)return this.dropDBData(t,s,i).then((function(){c.droping=!1,c.bufferDump()})).catch((function(e){})),r(),[2];o.label=5;case 5:return o.trys.push([5,8,,9]),[4,this.store.setItem(s,i)];case 6:return o.sent(),this.storeSize+=l,this.staticConfig.totalDBSize-=l,[4,this.refreshStoreInfo()];case 7:return o.sent(),r(),[3,9];case 8:return"QuotaExceededError"===o.sent().name&&this.dropDBData(t,s,i).then((function(){c.droping=!1,c.bufferDump()})).catch((function(e){})),[3,9];case 9:return[2]}}))}))}))},u.prototype.loadPendingData=function(){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return n(e,void 0,void 0,(function(){var e,r=this;return o(this,(function(i){switch(i.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=i.sent())?(JSON.parse(e).forEach((function(e){return n(r,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))})),[2]}}))}))},u.prototype.storePendingData=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},u.prototype.bufferDump=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},u.prototype.dropDBData=function(e,t,r){return n(this,void 0,void 0,(function(){var e=this;return o(this,(function(i){return this.droping=!0,[2,new Promise((function(i,s){return n(e,void 0,void 0,(function(){var e,n,l,c;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(l=o.sent()).reverse(),e=Math.ceil(l.length*this.storeDelPer),c=0,o.label=2;case 2:return c<e?[4,this.store.getItem(l[c])]:[3,7];case 3:return null==(n=o.sent())?[3,6]:[4,this.store.removeItem(l[c])];case 4:return o.sent(),l=a.calculateMemSize(l[c])+a.calculateMemSize(n),this.staticConfig.totalDBSize+=l,this.storeSize-=l,[4,this.refreshStoreInfo()];case 5:o.sent(),this.dropCallBack(n),o.label=6;case 6:return c++,[3,2];case 7:return[4,this.store.setItem(t,r)];case 8:return o.sent(),this.storeSize+=a.calculateMemSize(t)+a.calculateMemSize(r),[4,this.refreshStoreInfo()];case 9:return o.sent(),i(),[3,11];case 10:return c=o.sent(),s(c),[3,11];case 11:return[2]}}))}))}))]}))}))},u.prototype.removeDataItem=function(e){var t=this;return new Promise((function(r,i){return n(t,void 0,void 0,(function(){var t,n,s,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.level,n=e.timestamp,s=e.seq,e.content,s=t+"_"+n+"_"+s,o.label=1;case 1:return o.trys.push([1,6,,7]),[4,this.store.getItem(s)];case 2:return(l=o.sent())?[4,this.store.removeItem(s)]:[3,5];case 3:return o.sent(),c=1==this.config.env?a.calculateMemSize(JSON.parse(l)):a.calculateMemSize(l),c=a.calculateMemSize(s)+c,this.storeSize-=c,this.staticConfig.totalDBSize+=c,this.traceType.DB_O_DONE+=c,[4,this.refreshStoreInfo()];case 4:o.sent(),r(),o.label=5;case 5:return[3,7];case 6:return c=o.sent(),i(c),[3,7];case 7:return[2]}}))}))}))},u.prototype.refreshStoreInfo=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return e.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},u.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,r){return n(e,void 0,void 0,(function(){var e,n,i,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return n=o.sent(),[4,this.store.getItem(n[0])];case 2:return s=o.sent(),i=a.analyzeKey(n[0]),e=i.level,n=i.timestamp,i=i.seq,t({level:e,timestamp:n,seq:i,content:s}),[3,4];case 3:return s=o.sent(),r(s),[3,4];case 4:return[2]}}))}))}))},u.prototype.loadDBData=function(e,t,r,i){var s=this;return new Promise((function(l,c){return n(s,void 0,void 0,(function(){var n,s,u,d,h,p,f,g,m,v;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,this.store.keys()];case 1:n=o.sent(),s=[],h=d=v=u=0,o.label=2;case 2:return h<n.length?i(n[h])?[3,4]:[4,this.store.getItem(n[h])]:[3,5];case 3:if(null==(m=o.sent()))return[3,4];if(g=a.analyzeKey(n[h]),p=g.level,f=g.timestamp,g=g.seq,s.push({level:p,timestamp:f,seq:g,content:m,key:n[h]}),m=a.calculateMemSize(m),v+=m,e<=(u+=m)&&(u=0,d++),t<=d&&r<=v)return[3,5];o.label=4;case 4:return h++,[3,2];case 5:return l({datas:s,len:v}),[3,7];case 6:return v=o.sent(),c(v),[3,7];case 7:return[2]}}))}))}))},u.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){var r=e.split("_");return(t=+(e=t.split("_"))[0]-+r[0])?t:(t=+e[1]-+r[1])||+e[2]-+r[2]})),t&&e.reverse()},t.ZegoStoreHandler=r=u},function(e,t,r){"use strict";var n=r(32),o=r(33).Buffer;function i(e){return function(t){if(o.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*n.STRING;case"boolean":return n.BOOLEAN;case"number":return n.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(t)?Symbol.keyFor(t).length*n.STRING:(t.toString().length-8)*n.STRING;case"object":if(Array.isArray(t))return t.map(i(e)).reduce((function(e,t){return e+t}),0);var r=e,s=t;if(null==s)return 0;for(var a=0,l=function(e){const t=[];for(var r in e)t.push(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(t,e)),t}(s),c=0;c<l.length;c++){var u=l[c];if("object"==typeof s[u]&&null!==s[u]){if(r.has(s[u]))continue;r.add(s[u])}a+=i(r)(u);try{a+=i(r)(s[u])}catch(r){r instanceof RangeError&&(a=0)}}return a;default:return 0}}}e.exports=function(e){return i(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,r){"use strict";(function(e){var n=r(35),o=r(36),i=r(37);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(e=null===e?new l(t):e).length=t,e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"!=typeof e)return c(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=e,s=t,c=r;if(s.byteLength,c<0||s.byteLength<c)throw new RangeError("'offset' is out of bounds");if(s.byteLength<c+(n||0))throw new RangeError("'length' is out of bounds");return s=void 0===c&&void 0===n?new Uint8Array(s):void 0===n?new Uint8Array(s,c):new Uint8Array(s,c,n),l.TYPED_ARRAY_SUPPORT?(o=s).__proto__=l.prototype:o=h(o,s),o}if("string"==typeof t){if(c=e,n=t,s=r,!l.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');return(s=(c=a(c,o=0|f(n,s))).write(n,s))!==o?c.slice(0,s):c}var u;if(r=e,n=t,l.isBuffer(n))return 0!==(r=a(r,u=0|p(n.length))).length&&n.copy(r,0,0,u),r;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(u=n.length)!=u?a(r,0):h(r,n);if("Buffer"===n.type&&i(n.data))return h(r,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(e).length;default:if(n)return I(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,u=r;u<s;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===a)return c*i}else-1!==c&&(u-=u-c),c=-1;else for(u=r=s<r+a?s-a:r;0<=u;u--){for(var d=!0,h=0;h<a;h++)if(l(e,u+h)!==l(t,h)){d=!1;break}if(d)return u}return-1}function _(e,t,r,n){return A(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function y(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,l,c=e[o],u=null,d=239<c?4:223<c?3:191<c?2:1;if(o+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[o+1]))&&127<(l=(31&c)<<6|63&i)&&(u=l);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(l=(15&c)<<12|(63&i)<<6|63&s)&&(l<55296||57343<l)&&(u=l);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=d}var h=n,p=h.length;if(p<=b)return String.fromCharCode.apply(String,h);for(var f="",g=0;g<p;)f+=String.fromCharCode.apply(String,h.slice(g,g+=b));return f}t.Buffer=l,t.SlowBuffer=function(e){return l.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return c(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return u(e),e<=0||void 0===t?a(null,e):"string"==typeof r?a(null,e).fill(t,r):a(null,e).fill(t)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var r=l.allocUnsafe(t),n=0,o=0;o<e.length;++o){var s=e[o];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?y(this,0,e):function(e,t,r){var o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=t,s=r,a=this.length;(!s||s<0||a<s)&&(s=a);for(var l,c="",u=i=!i||i<0?0:i;u<s;++u)c+=(l=this[u])<16?"0"+l.toString(16):l.toString(16);return c;case"utf8":case"utf-8":return y(this,t,r);case"ascii":a=t;var d=r,h="";d=Math.min(this.length,d);for(var p=a;p<d;++p)h+=String.fromCharCode(127&this[p]);return h;case"latin1":case"binary":i=t;var f=r,g="";f=Math.min(this.length,f);for(var m=i;m<f;++m)g+=String.fromCharCode(this[m]);return g;case"base64":return _=r,0===(v=t)&&_===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(v,_));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,_=r,b=this.slice(v,_),E="",S=0;S<b.length;S+=2)E+=String.fromCharCode(b[S]+256*b[S+1]);return E;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(l.isBuffer(e))return this===e||0===l.compare(this,e);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(n,o),u=e.slice(t,r),d=0;d<a;++d)if(c[d]!==u[d]){i=c[d],s=u[d];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,l,c=!1;;)switch(n){case"hex":var u,d=e,h=r,p=(u=Number(t)||0,this.length-u);if((!h||p<(h=Number(h)))&&(h=p),(p=d.length)%2!=0)throw new TypeError("Invalid hex string");p/2<h&&(h=p/2);for(var f=0;f<h;++f){var g=parseInt(d.substr(2*f,2),16);if(isNaN(g))return f;this[u+f]=g}return f;case"utf8":case"utf-8":return s=t,a=r,A(I(e,(i=this).length-s),i,s,a);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return i=this,s=t,a=r,A(P(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,l=r,A(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o.push(n%=256),o.push(r);return o}(e,this.length-p),this,p,l);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function E(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function T(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function w(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,i){return i||w(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return i||w(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=l.prototype;else for(var n=t-e,o=new l(n,void 0),i=0;i<n;++i)o[i]=this[i+e];return o},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){return t||E(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},l.prototype.readInt16BE=function(e,t){return t||E(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},l.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||S(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||S(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):T(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):T(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){e=+e,t|=0,n||S(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){e=+e,t|=0,n||S(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):T(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):T(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&r<t&&t<n)for(o=i-1;0<=o;--o)e[o+t]=this[o+r];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){var o;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length&&(o=e.charCodeAt(0))<256&&(e=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else for(var i=l.isBuffer(e)?e:I(new l(e,n).toString()),s=i.length,a=0;a<r-t;++a)this[a+t]=i[a%s];return this};var O=/[^+\/0-9A-Za-z-_]/g;function I(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function P(e){return n.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(34))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t;return 3*((e=(t=l(e))[0])+(t=t[1]))/4-t},t.toByteArray=function(e){for(var t,r=(n=l(e))[0],n=n[1],s=new i(3*(r+n)/4-n),a=0,c=0<n?r-4:r,u=0;u<c;u+=4)t=o[e.charCodeAt(u)]<<18|o[e.charCodeAt(u+1)]<<12|o[e.charCodeAt(u+2)]<<6|o[e.charCodeAt(u+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===n&&(t=o[e.charCodeAt(u)]<<2|o[e.charCodeAt(u+1)]>>4,s[a++]=255&t),1===n&&(t=o[e.charCodeAt(u)]<<10|o[e.charCodeAt(u+1)]<<4|o[e.charCodeAt(u+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(function(e,t){for(var r,o=[],i=s;i<t;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(n[r>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return o.join("")}(e,a<s+16383?a:s+16383));return 1==o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2==o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?o-1:0,h=r?-1:1;for(r=e[t+d],d+=h,i=r&(1<<-u)-1,r>>=-u,u+=a;0<u;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;0<u;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=c}return(r?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,l=8*i-o-1,c=(1<<l)-1,u=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1;for(i=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+u?d/n:d*Math.pow(2,1-u))*n&&(s++,n/=2),c<=s+u?(a=0,s=c):1<=s+u?(a=(t*n-1)*Math.pow(2,o),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));8<=o;e[r+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;0<l;e[r+h]=255&s,h+=p,s/=256,l-=8);e[r+h-p]|=128*i}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.PendingQueue=void 0,r(0)),s=r(5);function a(e,t,r,n){var o=this;this.levels=e,this.product=t,this.staticConfig=r,this.stateCenter=n,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){o.cacheMap.set(e,new i.Queue)}))}a.prototype.enqueue=function(e,t){!(t=this.cacheMap.get(t))||t.all().find((function(t){return t.content==e.content}))||(t.enqueue(e),t=s.calculateMemSize(e.content),this.pendingDataSize+=t,this.size++,this.staticConfig.totalAvailCache-=t,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize))},a.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},a.prototype.findInQueue=function(e){var t=null==(t=this.cacheMap.get(e.level))?void 0:t.all();return null==t?void 0:t.find((function(t){return t.key===e.key}))},a.prototype.readReportData=function(e){var t=o(this.cacheMap.entries());return e=this.readData(t,e,!0),this.reset(),{totalLen:e.totalLen,reportDataArr:e.resArr}},a.prototype.readStoreData=function(e){var t=Math.ceil(this.pendingDataSize*e);return e=o(this.cacheMap.entries()).reverse(),t=this.readData(e,t,!1),this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},a.prototype.readData=function(e,t,r){var o=[],i=0;e:for(var a=0;a<e.length;a++)for(var l=n(e[a],2),c=l[0],u=l[1];u.size();){var d=this.dequeue(c);if(o.push(d),t<(i+=s.calculateMemSize(d.content)))break e}return{totalLen:i,resArr:o}},a.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},a.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},a.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},a.prototype.refresh=function(e){this.pendingDataSize-=e,this.staticConfig.totalAvailCache+=e},a.prototype.reset=function(){this.byteLength=0},t.PendingQueue=r=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0,r(40));function s(e,t,r){return(t=i.decrypt(e,t))&&i.hashMd5(t)===r?t:""}t.loadJS=function(e,t,r,i,a,l,c){var u=this;return new Promise((function(d,h){return n(u,void 0,void 0,(function(){var u,p,f,g,m;return o(this,(function(v){switch(v.label){case 0:if(u="dy",e)return[3,7];v.label=1;case 1:return v.trys.push([1,5,,6]),[4,t.getItem("code")];case 2:return p=v.sent(),[4,t.getItem("key")];case 3:return f=v.sent(),[4,t.getItem("hash")];case 4:g=v.sent();var _=s(p,f,g)||l,y=u,b=c,E=document.getElementsByTagName("HEAD").item(0),S=document.createElement("script");S.language="javascript",S.type="text/javascript",S.id=y,S.param=b;try{S.appendChild(document.createTextNode(_))}catch(y){S.text=_}return E.appendChild(S),d(),[3,6];case 5:return v.sent(),h(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{m=new ActiveXObject("Msxml2.XMLHTTP")}catch(v){m=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(m=new XMLHttpRequest);return m.open("GET",r,!0),m.send(null),m.onreadystatechange=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:if(4!=m.readyState)return[3,10];if(!(200<=m.status&&m.status<300||0==m.status||304==m.status))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),s(m.responseText,i,a)?[4,t.setItem("code",m.responseText)]:[3,5];case 2:return e.sent(),[4,t.setItem("key",i)];case 3:return e.sent(),[4,t.setItem("hash",a)];case 4:e.sent(),e.label=5;case 5:return d(),[3,7];case 6:return e.sent(),h(),[3,7];case 7:return[2];case 8:return h(),[2];case 9:return[3,11];case 10:case 11:return[2]}}))}))},[2]}}))}))}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.hashMd5=t.decrypt=void 0,n(r(41))),i=n(r(42)),s=n(r(43));t.decrypt=function(e,t){var r="";try{r=i.default.decrypt(e,t).toString(s.default)}catch(e){}return r},t.hashMd5=function(e){return o.default(e).toString()}},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t,r){"use strict";function n(){this.logLevel=t.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=t.ENUM_LOG_LEVEL=void 0,t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},n.prototype.setLogLevel=function(e){return void 0!==(e=t.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},n.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.DEBUG&&console.debug(n)},n.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.log(n)},n.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.info(n)},n.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.WARN&&console.warn(n)},n.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.ERROR&&console.error(n)},t.ZegoLog=n},function(e,t,r){"use strict";function n(e){this.logger=e,this._log=e}Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0,n.prototype.isLogin=function(){return!0},t.StateCenter=n},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=void 0,r(3));function s(){this.init()}s.prototype.init=function(){window.dyObj={}},s.prototype.runExecution=function(e,t,r){r=new(Function.bind.apply(Function,o([void 0],e,[r])));try{r.apply(void 0,o(t))}catch(e){i.log.error(e)}},t.DynamicCode=r=s}],n.c=c,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13))},function(e,t,r){e.exports=r(2).enc.Hex},function(e,t,r){(function(t){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}l=r[s]={exports:{}},t[s][0].call(l.exports,(function(e){return o(t[s][1][e]||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var i=!1,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,r,n){(function(e){"use strict";var t,n,o,i,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(t=0,s=new s(c),n=e.document.createTextNode(""),s.observe(n,{characterData:!0}),function(){n.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)}:((o=new e.MessageChannel).port1.onmessage=c,function(){o.port2.postMessage(0)}),l=[];function c(){i=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}i=!1}r.exports=function(e){1!==l.push(e)||i||a()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return i.reject(e,n)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var s=f((function(){t(o,n)}));"error"===s.status&&n(s.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=c).prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(o);return this.state!==l?d(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return i.reject(e,r.value);if(r=r.value)p(e,r);else{e.state=a,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},c.reject=function(e){var t=new this(o);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,l=-1,c=new this(o);++l<r;)!function(e,o){t.resolve(e).then((function(e){s[o]=e,++a!==r||n||(n=!0,i.resolve(c,s))}),(function(e){n||(n=!0,i.reject(c,e))}))}(e[l],l);return c},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(o);++s<r;)!function(e){t.resolve(e).then((function(e){n||(n=!0,i.resolve(a,e))}),(function(e){n||(n=!0,i.reject(a,e))}))}(e[s]);return a}},{1:1}],3:[function(e,r,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",h=void 0,p={},f=Object.prototype.toString,g="readonly",m="readwrite";function v(e){return"boolean"==typeof h?s.resolve(h):(t=e,new s((function(e){var r=t.transaction(d,m),n=i([""]);r.objectStore(d).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||43<=parseInt(t[1],10))}})).catch((function(){return!1})).then((function(e){return h=e})));var t}function _(e){e=p[e.name];var t={};t.promise=new s((function(e,r){t.resolve=e,t.reject=r})),e.deferredOperations.push(t),e.dbReady?e.dbReady=e.dbReady.then((function(){return t.promise})):e.dbReady=t.promise}function y(e){(e=p[e.name].deferredOperations.pop())&&(e.resolve(),e.promise)}function b(e,t){if(e=p[e.name].deferredOperations.pop())return e.reject(t),e.promise}function E(e,t){return new s((function(r,n){if(p[e.name]=p[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);_(e),e.db.close()}var i=[e.name],s=(t&&i.push(e.version),o.open.apply(o,i));t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),n(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},r(t),y(e)}}))}function S(e){return E(e,!1)}function C(e){return E(e,!0)}function T(e,t){if(!e.db)return 1;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;return n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(o||r)&&(r&&(n=e.db.version+1)>e.version&&(e.version=n),1)}function w(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function R(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,r=t._initReady().then((function(){var e=p[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(r,e,e),r}function O(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(0<n&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return function(e){_(e);for(var t=p[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,S(e).then((function(t){return e.db=t,T(e)?C(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw b(e,t),t}))}(e).then((function(){O(e,t,r,n-1)}))})).catch(r);r(o)}}e={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=p[r.name],i=(o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},p[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k),[]);function a(){return s.resolve()}for(var l=0;l<o.forages.length;l++){var c=o.forages[l];c!==t&&i.push(c._initReady().catch(a))}var u=o.forages.slice(0);return s.all(i).then((function(){return r.db=o.db,S(r)})).then((function(e){return r.db=e,T(r,t._defaultConfig.version)?C(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<u.length;n++){var i=u[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){O(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r,n=s.result;n?(R(r=n.value)&&(r=w(r)),void 0!==(r=e(r,n.key,a++))?t(r):n.continue()):t()},s.onerror=function(){n(s.error)}}catch(o){n(o)}}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=c(e),new s((function(t,n){r.ready().then((function(){O(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;R(e=void 0===e?null:e)&&(e=w(e)),t(e)},s.onerror=function(){n(s.error)}}catch(o){n(o)}}))})).catch(n)})));return a(n,t),n},setItem:function(e,t,r){var n=this,o=(e=c(e),new s((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===f.call(t)?v(i.db).then((function(e){return e?t:(r=t,new s((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){t=btoa(t.target.result||""),e({__local_forage_encoded_blob:!0,data:t,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){O(n._dbInfo,m,(function(i,s){if(i)return o(i);try{var a=s.objectStore(n._dbInfo.storeName),l=(null===t&&(t=void 0),a.put(t,e));s.oncomplete=function(){r(t=void 0===t?null:t)},s.onabort=s.onerror=function(){var e=l.error||l.transaction.error;o(e)}}catch(i){o(i)}}))})).catch(o)})));return a(o,r),o},removeItem:function(e,t){var r=this,n=(e=c(e),new s((function(t,n){r.ready().then((function(){O(r._dbInfo,m,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(s.error)},i.onabort=function(){var e=s.error||s.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)})));return a(n,t),n},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){O(t._dbInfo,m,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error||i.transaction.error;r(e)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){O(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new s((function(t,n){e<0?t(null):r.ready().then((function(){O(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var r=l.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},l.onerror=function(){n(l.error)}}catch(o){n(o)}}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){O(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){r(i.error)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),a(r=e.name?(r=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):S(e).then((function(t){var r=p[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t})),e.storeName?r.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1,n=(_(e),p[e.name]),i=n.forages;t.close();for(var a=0;a<i.length;a++){var l=i[a];l._dbInfo.db=null,l._dbInfo.version=r}return new s((function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,y(r._dbInfo)}})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}})):r.then((function(t){_(e);var r=p[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new s((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)y(n[t]._dbInfo)})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}))):s.reject("Invalid arguments"),t),r}};var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",N=Object.prototype.toString;function L(e){for(var t,r,n,o,i=.75*e.length,s=e.length,a=0,l=("="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--),i=new ArrayBuffer(i),new Uint8Array(i)),c=0;c<s;c+=4)t=I.indexOf(e[c]),r=I.indexOf(e[c+1]),n=I.indexOf(e[c+2]),o=I.indexOf(e[c+3]),l[a++]=t<<2|r>>4,l[a++]=(15&r)<<4|n>>2,l[a++]=(3&n)<<6|63&o;return i}function M(e){for(var t=new Uint8Array(e),r="",n=0;n<t.length;n+=3)r=(r=(r=(r+=I[t[n]>>2])+I[(3&t[n])<<4|t[n+1]>>4])+I[(15&t[n+1])<<2|t[n+2]>>6])+I[63&t[n+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var x={serialize:function(e,t){var r="";if(e&&(r=N.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===N.call(e.buffer))){var n,o=A;e instanceof ArrayBuffer?(n=e,o+="arbf"):(n=e.buffer,"[object Int8Array]"===r?o+="si08":"[object Uint8Array]"===r?o+="ui08":"[object Uint8ClampedArray]"===r?o+="uic8":"[object Int16Array]"===r?o+="si16":"[object Uint16Array]"===r?o+="ur16":"[object Int32Array]"===r?o+="si32":"[object Uint32Array]"===r?o+="ui32":"[object Float32Array]"===r?o+="fl32":"[object Float64Array]"===r?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+M(n))}else if("[object Blob]"===r)(o=new FileReader).onload=function(){var r="~~local_forage_type~"+e.type+"~"+M(this.result);t(A+"blob"+r)},o.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,9)!==A)return JSON.parse(e);var t,r=e.substring(13),n=e.substring(9,13),o=("blob"===n&&P.test(r)&&(t=(e=r.match(P))[1],r=r.substring(e[0].length)),L(r));switch(n){case"arbf":return o;case"blob":return i([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+n)}},stringToBuffer:L,bufferToString:M};function D(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function B(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):D(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,s)}),i)}function U(e,t,r,n){var o=this,i=(e=c(e),new s((function(i,s){o.ready().then((function(){var a=t=void 0===t?null:t,l=o._dbInfo;l.serializer.serialize(t,(function(t,c){c?s(c):l.db.transaction((function(r){B(r,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){t.code===t.QUOTA_ERR&&(0<n?i(U.apply(o,[e,a,r,n-1])):s(t))}))}))})).catch(s)})));return a(i,r),i}var Z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new s((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){D(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=x,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){B(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,s=i.length,a=0;a<s;a++){var l=i.item(a),c=(c=l.value)&&o.serializer.deserialize(c);if(void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=c(e),new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){B(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){r=(r=r.rows.length?r.rows.item(0).value:null)&&o.serializer.deserialize(r),t(r)}),(function(e,t){n(t)}))}))})).catch(n)})));return a(n,t),n},setItem:function(e,t,r){return U.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this,n=(e=c(e),new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){B(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)})));return a(n,t),n},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){B(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){B(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){r=r.rows.item(0).c,e(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){B(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){r=r.rows.length?r.rows.item(0).key:null,t(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){B(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config(),n=((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),this),o=e.name?new s((function(t){var o,i=e.name===r.name?n._dbInfo.db:openDatabase(e.name,"","",0);e.storeName?t({db:i,storeNames:[e.storeName]}):t((o=i,new s((function(e,t){o.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).name);e({db:o,storeNames:n})}),(function(e,r){t(r)}))}),(function(e){t(e)}))}))))})).then((function(e){return new s((function(t,r){e.db.transaction((function(n){for(var o=[],i=0,a=e.storeNames.length;i<a;i++)o.push(function(e){return new s((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}(e.storeNames[i]));s.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):s.reject("Invalid arguments");return a(o,t),o}};function j(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function H(e,t){for(var r,n,o=e.length,i=0;i<o;){if((r=e[i])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return 1;i++}}var F={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=j(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length?((this._dbInfo=t).serializer=x,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,s=1,a=0;a<i;a++){var l=localStorage.key(a);if(0===l.indexOf(n)){var c=(c=localStorage.getItem(l))&&t.serializer.deserialize(c);if(void 0!==(c=e(c,l.substring(o),s++)))return c}}}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=c(e),r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&t.serializer.deserialize(n)})));return a(n,t),n},setItem:function(e,t,r){var n=this,o=(e=c(e),n.ready().then((function(){var r=t=void 0===t?null:t;return new s((function(o,i){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(s.keyPrefix+e,t),o(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))})));return a(o,r),o},removeItem:function(e,t){var r=this,n=(e=c(e),r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)})));return a(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;0<=r;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(n){t=null}return t&&t.substring(n.keyPrefix.length)}));return a(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments),(e="function"!=typeof e&&e||{}).name||(n=this.config(),e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r=this,n=e.name?new s((function(t){e.storeName?t(j(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):s.reject("Invalid arguments");return a(n,t),n}},z=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},G={},q={},V={INDEXEDDB:e,WEBSQL:Z,LOCALSTORAGE:F},W=(e=[V.INDEXEDDB._driver,V.WEBSQL._driver,V.LOCALSTORAGE._driver],["dropInstance"]),Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(W),K={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function $(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)r.hasOwnProperty(n)&&(z(r[n])?e[n]=r[n].slice():e[n]=r[n])}return e}function Q(e){var t,r,n;if(!(this instanceof Q))throw new TypeError("Cannot call a class as a function");for(t in V)V.hasOwnProperty(t)&&(n=(r=V[t])._driver,this[t]=n,G[n]||this.defineDriver(r));this._defaultConfig=$({},K),this._config=$({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}Q.prototype.config=function(e){if("object"!==(void 0===e?"undefined":n(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},Q.prototype.defineDriver=function(e,t,r){var n=new s((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(e._driver){for(var i=Y.concat("_initStorage"),l=0,c=i.length;l<c;l++){var u=i[l];if((!H(W,u)||e[u])&&"function"!=typeof e[u])return void r(o)}for(var d=0,h=W.length;d<h;d++){var p=W[d];e[p]||(e[p]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver");return a(t=s.reject(t),arguments[arguments.length-1]),t}}(p))}var f=function(r){G[n]&&console.info("Redefining LocalForage driver: "+n),G[n]=e,q[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}else r(o)}catch(o){r(o)}}));return l(n,t,r),n},Q.prototype.driver=function(){return this._driver||null},Q.prototype.getDriver=function(e,t,r){return l(e=G[e]?s.resolve(G[e]):s.reject(new Error("Driver not found.")),t,r),e},Q.prototype.getSerializer=function(e){var t=s.resolve(x);return l(t,e),t},Q.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(r,e,e),r},Q.prototype.setDriver=function(e,t,r){var n=this,o=(z(e)||(e=[e]),this._getSupportedDrivers(e));function i(){n._config.driver=n.driver()}function a(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}return e=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve(),this._driverSet=e.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}i();var l=new Error("No available storage method found.");return n._driverSet=s.reject(l),n._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=s.reject(e),n._driverSet})),l(this._driverSet,t,r),this._driverSet},Q.prototype.supports=function(e){return!!q[e]},Q.prototype._extend=function(e){$(this,e)},Q.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},Q.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Y.length;e<t;e++)!function(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}(this,Y[e])},Q.prototype.createInstance=function(e){return new Q(e)},Z=new Q,t.exports=Z},{3:3}]},{},[4])(4)}).call(this,r(12))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n,o,i,s,a;e.exports=(e=r(2),r(19),r(20),n=(i=(r=e).lib).Base,o=i.WordArray,s=(i=r.algo).MD5,a=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),s=o.create(),a=s.words,l=n.keySize,c=n.iterations;a.length<l;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var u=1;u<c;u++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*l,s}}),r.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF)},function(e,t,r){function n(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i,s;e.exports=(o=r(11),s={},n.m=i=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"},AUTH_FAIL:{code:1005,msg:"auth failed"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,i=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":r?"FIREFOX":n?"OPERA":o?"CHROME":i?"SAFARI":e?"WEIXIN":"UNKOWN"};var n=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(n[e.getMonth()+1]||e.getMonth()+1)+"/",(n[e.getDate()]||e.getDate())+" ",(n[e.getHours()]||e.getHours())+":",(n[e.getMinutes()]||e.getMinutes())+":",n[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},t.generateUUID=function(e){var t,r;return 0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r||(t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)})),0===e?localStorage.setItem("z_deviceID",r):wx.setStorageSync("z_deviceID",r)),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var n=r(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return n.ZegoSetting}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0,r(5)),a=r(6),l=r(10),c=r(0),u=r(12),d=r(1),h=r(2);function p(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new s.ZegoLog}Object.defineProperty(p.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),p.prototype.init=function(e){var t=this;return e.pollingFreq&&!h.checkValidNumber(e.pollingFreq)?(this.log.error(c.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},u.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new l.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(c.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.pollingInterval)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.refreshAuthCheck(),this.inited=!0)},p.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},p.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},p.prototype.getEnvVariable=function(e){return this.envVariable[e]},p.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(r){"string"!=typeof e[r]&&"number"!=typeof e[r]&&t.log.error("zs.sev env "+r+" type error"),t.proEnvVariable[r]=String(e[r])}))},p.prototype.getEnvVariables=function(){return this.envVariable},p.prototype.enablePolling=function(e,t){var r=this;t?t.forEach((function(t){var n=r.fileList.find((function(e){return e.fileName===t}));n&&(n.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},p.prototype.setToken=function(e){this.token!==e&&this.refreshAuthCheck(),this.token=e},p.prototype.setUserID=function(e){this.userID!==e&&this.refreshAuthCheck(),this.userID=e},p.prototype.getSettingCache=function(e){return o(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(o){switch(o.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(d.errorList.NOT_INIT)];case 1:return r=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return(r=o.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:r.setting,versions:r.versions}),n={setting:r.setting,versions:r.versions}),[2,Promise.resolve(n)]}}))}))},p.prototype.fetchSetting=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=r,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,r)):(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,r))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.fetchMultiSetting=function(e,t,r){var s=this;return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call"),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):new Promise((function(t,n){var a={},l=[];if(e.forEach((function(e){return o(s,void 0,void 0,(function(){var t;return i(this,(function(r){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):l.push(e),[2]}))}))})),!(0<l.length))return t(a);s._getCloudSetting(l,s.envVariable).then((function(e){return s.handleFetchFiles(e,r),Object.assign(a,e),t(a)})).catch((function(e){l.forEach((function(e){return o(s,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=n.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):n(e)}))}))):(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(d.errorList.NOT_INIT))},p.prototype.setOptions=function(e){e&&"boolean"==typeof e.unify&&(this.options.unify=e.unify,this.settingFetchHandler.setOptions(this.options))},p.prototype.setLog=function(e){this.log=e},p.prototype._getCloudSetting=function(e,t){var r=this;return new Promise((function(n,s){return o(r,void 0,void 0,(function(){var r,o,a,l,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.checkFailed?(this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" check fail"),s(d.errorList.AUTH_FAIL),[2]):(a=e instanceof Array,[4,this.settingFetchHandler.fetchSetting(a?e:[e],t,this.token,this.userID,!1)]);case 1:return l=i.sent(),r=l.data,l=l.polling_interval,this.checkFailCount=0,this.log.info(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" suc"),"number"==typeof l&&5<=l&&this.pollingInterval!==60*l&&(this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*l,this.uninit(),this.activePolling()),a?(o={},e.forEach((function(e){var t;0==(null==(t=r[e])?void 0:t.code)&&void 0!==(null==(t=r[e])?void 0:t.data)&&(o[e]={setting:null==(t=r[e])?void 0:t.data,versions:null==(e=r[e])?void 0:e.versions})})),0<Object.keys(o).length?n(o):s(d.errorList.MULTI_FILE_NOT_EXIST)):0===(null==(a=r[e])?void 0:a.code)&&null!=(l=r[e])&&l.data?n({setting:null==(l=r[e])?void 0:l.data,versions:null==(l=r[e])?void 0:l.versions}):s({code:null==(u=r[e])?void 0:u.code,msg:null==(u=r[e])?void 0:u.message}),[3,3];case 2:return u=i.sent(),this.log.error(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(u)),21002===(null==u?void 0:u.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),s(u),[3,3];case 3:return[2]}}))}))}))},p.prototype.handleFetchFiles=function(e,t){var r=this;Object.keys(e).forEach((function(n){var o=r.fileList.find((function(e){return e.fileName==n}));o?(o.fetchedTime=(new Date).getTime(),o.setting=e[n].setting,o.versions=e[n].versions,o.needPolling=t):r.fileList.find((function(e){return e.fileName===n}))||r.fileList.push({fileName:n,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[n].setting,versions:e[n].versions}),o=r._getFileName(n),r.settingCacheHandler.storeSetting(o,e[n])}))},p.prototype._fetchSetting=function(e,t,r){var n=this;return new Promise((function(s,a){n.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),n._getCloudSetting(e,n.envVariable).then((function(o){t?(t.fetchedTime=(new Date).getTime(),t.setting=o.setting,t.versions=o.versions,t.needPolling=r):n.fileList.find((function(t){return t.fileName===e}))||n.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:o.setting,versions:o.versions});var i=n._getFileName(e);n.settingCacheHandler.storeSetting(i,o),s(o),n.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(l){return o(n,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),n=this._getFileName(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(n)];case 2:return n=o.sent(),s(n),[3,4];case 3:return o.sent(),a(l),[3,4];case 4:return this.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},p.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=h.getBrowser(),this.publicEnvVariable.deviceid=h.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=h.generateUUID(this.options.env))},p.prototype.pollingSetting=function(e){return o(this,void 0,void 0,(function(){var t,r,n,s,a=this;return i(this,(function(l){switch(l.label){case 0:return this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.fileName,e.needPolling&&t.push(e.fileName)})),r=e,this.checkFailed?(this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" has checked fail"),[3,7]):[3,1];case 1:if(!(0<t.length))return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 3:return s=l.sent(),n=s.data,s=s.polling_interval,this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,"number"==typeof s&&5<=s&&this.pollingInterval!==60*s&&(this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*s,r=1e3*this.pollingInterval),this.fileList.forEach((function(e){return o(a,void 0,void 0,(function(){var t,r,o,s;return i(this,(function(i){switch(i.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),n[e.fileName]&&0===n[e.fileName].code&&n[e.fileName].data?(r=JSON.stringify(n[e.fileName].data),o=JSON.stringify(e.setting),s={setting:n[e.fileName].data,versions:null==(s=n[e.fileName])?void 0:s.versions,code:null==(s=n[e.fileName])?void 0:s.code,message:null==(s=n[e.fileName])?void 0:s.message},o!==r&&(this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=s.setting,e.versions=s.versions,this.options.pollingNotify(e.fileName,s)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:o=i.sent(),r=JSON.stringify(o),o=JSON.stringify(s),r!==o&&this.settingCacheHandler.storeSetting(t,s),i.label=2;case 2:return[2]}}))}))})),[3,5];case 4:return s=l.sent(),this.log.error(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(s)),21002===(null==s?void 0:s.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),l.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){a.pollingSetting(r)}),r),[2]}}))}))},p.prototype._getFileName=function(e){return e},p.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},p.prototype.refreshAuthCheck=function(){this.checkFailCount=0,this.checkFailed=!1},t.ZegoSetting=r=p},function(e,t,r){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0,n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},t.ZegoLog=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0,r(0)),s=r(7);function a(e,t,r){void 0===r&&(r=0),this.storeName=e,this.log=t,this.store=s.createZegoStore(e,r)}a.prototype.getCacheSetting=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return r.sent(),[2]}}))}))},t.SettingCacheHandler=r=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var n=r(8),o=r(9),i=(s.prototype.getItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},s.prototype.setItem=function(e,t){var r=this;return new Promise((function(n,o){try{wx.setStorageSync(r.keyPrefix+e,t),n()}catch(n){o(n)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var n=wx.getStorageInfoSync().keys,o=[];n.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),o.sort(),t(o)}catch(t){r(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=i,t.createZegoStore=function(e,t){return t===o.ZEGO_ENV.BROWSER?n.createInstance({name:e}):new i(e)}},function(e,t){e.exports=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.6",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var o,i,s=r(0),a=r(1),l=r(11),c=r(2);function u(e,t){this.options=e,this.log=t,this.seq=0,this.userID=""}r=o={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},r=i={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},u.prototype.setOptions=function(e){this.options=e},u.prototype.setDataReport=function(e){this.reportFunc=e},u.prototype.setUserID=function(e){this.userID=e},u.prototype.fetchSetting=function(e,t,r,o,i){var a=this;return void 0===i&&(i=!0),new Promise((function(u,d){var h,p={product:a.options.product,files:e,param:n(n({},t),{deviceid:void 0}),appid:a.options.appID,token:r,id_name:o,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||c.generateUUID(a.options.env),compress:!1,mode:a.options.online?"online":"test"},f=p.param,g={appid:p.appid,token:p.token,id_name:p.id_name,deviceid:p.deviceid},m=a.seq++;a.reportFunc&&a.reportFunc(m,"request_start",{polling:i}),null!=(h=a.options)&&h.unify&&a.options.connection?a.sendCloudRequest(o,p,"/cloud-setting/get",(function(e){var t,r=e.code,n=(e.msg,e.data),o=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+r),n&&(t=[],Object.keys(n).forEach((function(e){var r;t.push({name:e,code:n[e].code,message:null==(r=n[e])?void 0:r.message,versions:JSON.stringify(null==(r=n[e])?void 0:r.versions),content:JSON.stringify(null==(e=n[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(m,"request_end",{code:r,reportData:e,params:g,requestKV:f,files:t,polling:i}),u({data:n,polling_interval:o})}),(function(e){var t=e.code,r=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+t),a.reportFunc&&a.reportFunc(m,"request_end",{code:t,params:g,requestKV:f,reportData:e,polling:i}),d({code:t,msg:r})})):l.fetch(a.options.urls,p,a.options.env||0).then((function(e){var t,r=e.code,n=(e.msg,e.data),o=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+r),n&&(t=[],Object.keys(n).forEach((function(e){var r;t.push({name:e,code:n[e].code,message:null==(r=n[e])?void 0:r.message,versions:JSON.stringify(null==(r=n[e])?void 0:r.versions),content:JSON.stringify(null==(e=n[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(m,"request_end",{code:r,reportData:e,params:g,requestKV:f,files:t,polling:i}),u({data:n,polling_interval:o})})).catch((function(e){var t=e.code,r=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),a.reportFunc&&a.reportFunc(m,"request_end",{code:t,params:g,requestKV:f,reportData:e,polling:i}),d({code:t,msg:r})}))}))},u.prototype.sendCloudRequest=function(e,t,r,s,l,c,u){var d,h=this,p=(void 0===c&&(c=3),void 0===u&&(u=[]),(new Date).getTime());null!=(d=this.options.connection)&&d.startHttpRequest({service:o.SERVICE_ClOUD_SETTING,body:t,ack:!1,idName:e,method_no:i.METHOD_POST,location:r},(function(o){var i,d,f,g,m;200===(null==o?void 0:o.status_code)?(i=(g=JSON.parse(o.body)).code,m=g.message,d=g.data,f=g.polling_interval,g=(new Date).getTime()-p,u.push({timestamp:p,url:r,error:i,duration:g}),0===i?s({code:i,msg:m,data:d,polling_interval:f,reportData:u}):l({code:i,msg:m,reportData:u})):(m=(new Date).getTime()-p,u.push({timestamp:p,url:r,error:null==o?void 0:o.status_code,duration:m}),0<c?(c--,h.sendCloudRequest(e,t,r,s,l,c,u)):l(n(n({},a.errorList.FILE_REQUEST_FAIL),{reportData:u})))}),(function(o){var i=(new Date).getTime()-p;u.push({timestamp:p,url:r,error:o.code,duration:i}),0<c?(c--,h.sendCloudRequest(e,t,r,s,l,c,u)):l(n(n({},a.errorList.FILE_REQUEST_FAIL),{reportData:u}))}),null,{timeout:4e3})},t.SettingFetchHandler=r=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0,r(1));t.fetch=function e(t,r,i,s,a,l){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===l&&(l=[]),new Promise((function(c,u){a=a||(new Date).getTime();var d,h,p,f=(new Date).getTime();0===i?(d=new XMLHttpRequest,h=t[(s+1)%2]||t[0],d.open("post",h),1==r.compress&&(d.responseType="arraybuffer"),d.ontimeout=function(){},d.onreadystatechange=function(){var p,g,m,v,_;4==d.readyState&&(200<=d.status&&d.status<300||304==d.status?(g=void 0,1!=r.compress&&(g=d.responseText),_=(new Date).getTime()-f,p=(m=JSON.parse(g)).code,v=m.message,g=m.data,m=m.polling_interval,l.push({timestamp:f,url:h,error:p,duration:_}),0===p?c({code:p,msg:v,data:g,polling_interval:m,reportData:l}):u({code:p,msg:v,reportData:l})):(v=(new Date).getTime()-f,l.push({timestamp:f,url:h,error:d.status,duration:v}),_=(new Date).getTime()-a,0<s&&_<8e3?e(t,r,i,--s,a,l).then((function(e){c(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:l}))))},d.timeout=8e3,d.send(JSON.stringify(r))):(p=t[(s+1)%2]||t[0],wx.request({url:p,data:r,method:"POST",success:function(d){var h=(v=d.data).code,g=v.message,m=v.data,v=v.polling_interval;void 0!==h?0===h?c({code:h,msg:g,data:m,polling_interval:v,reportData:l}):u({code:h,msg:g,reportData:l}):(g=(new Date).getTime()-f,l.push({timestamp:f,url:p,error:o.errorList.FILE_REQUEST_FAIL.code,msg:d.data,duration:g}),0<s?e(t,r,i,--s,a,l).then((function(e){c(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:l})))},fail:function(d){var h=(new Date).getTime()-f;l.push({timestamp:f,url:p,error:o.errorList.FILE_REQUEST_FAIL.code,msg:d.errMsg,duration:h}),0<s?e(t,r,i,--s,a,l).then((function(e){c(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:l}))}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3))},function(e,t,r){function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i,s,a;e.exports=(o=r(7),i=r(1),s=[function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.DestroyType=t.StreamType=t.ModeMap=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.21.0",(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.AccessHubMessageType||(t.AccessHubMessageType={}))[o.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",o[o.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",o[o.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",o[o.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",o[o.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",o[o.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",o[o.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",o[o.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",o[o.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",o[o.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",o[o.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",o[o.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",o[o.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",o[o.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",o[o.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",o[o.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",o[o.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",o[o.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",o[o.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(n=o=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={}))[n.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",n[n.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",n[n.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",n[n.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",n[n.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",n[n.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",n[n.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",n[n.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",n[n.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",n[n.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",n[n.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",n[n.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",n[n.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",n[n.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",n[n.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(n=t.BusinessService||(t.BusinessService={}))[n.SERVICE_UNSET=0]="SERVICE_UNSET",n[n.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",n[n.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",n[n.SERVICE_MIX=3]="SERVICE_MIX",n[n.SERVICE_ZEUS=4]="SERVICE_ZEUS",n[n.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",n[n.SERVICE_L3=6]="SERVICE_L3",n[n.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",n[n.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",n[n.SERVICE_ZIM=9]="SERVICE_ZIM",n[n.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",n[n.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",n[n.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",n[n.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",n[n.SERVICE_QUALITY=14]="SERVICE_QUALITY",n[n.SERVICE_SECURITY=15]="SERVICE_SECURITY",n[n.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",n[n.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",n[n.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",n[n.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",n[n.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",n[n.SERVICE_CDN=21]="SERVICE_CDN",n[n.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",n[n.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",n[n.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",n[n.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",n[n.SERVICE_ECHO=26]="SERVICE_ECHO",n[n.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",n[n.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(n=t.ZegoconnRunEnv||(t.ZegoconnRunEnv={}))[n.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",n[n.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",n[n.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(n=t.Mode||(t.Mode={}))[n.Mode_UNSET=0]="Mode_UNSET",n[n.MODE_ONLINE=1]="MODE_ONLINE",n[n.MODE_TEST=2]="MODE_TEST",n[n.MODE_ALPHA=3]="MODE_ALPHA",t.ModeMap={1:"online",2:"test",3:"alpha"},(n=t.StreamType||(t.StreamType={}))[n.HTTP=0]="HTTP",n[n.PC=1]="PC",n[n.OTHER=2]="OTHER",(n=t.DestroyType||(t.DestroyType={}))[n.NONE=0]="NONE",n[n.BROKEN=1]="BROKEN",n[n.DISCONNECT=2]="DISCONNECT",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(n=t.PcConnectState||(t.PcConnectState={}))[n.CONNECTED=0]="CONNECTED",n[n.DISCONNECT=1]="DISCONNECT",n[n.BROKEN=2]="BROKEN",t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[o.ACCESSHUB_INVALID_APPID,o.ACCESSHUB_INVALID_SIGNATURE],(n=t.NetWorkState||(t.NetWorkState={}))[n.offline=0]="offline",n[n.online=1]="online",(o=t.ConnectionClosedAction||(t.ConnectionClosedAction={}))[o.ACTION_RESERVED=0]="ACTION_RESERVED",o[o.ACTION_DISPATCH=1]="ACTION_DISPATCH",o[o.ACTION_RETRY=2]="ACTION_RETRY",o[o.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",o[o.ACTION_ABORT=4]="ACTION_ABORT",o[o.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(n=t.Method||(t.Method={}))[n.METHOD_UNSET=0]="METHOD_UNSET",n[n.METHOD_GET=1]="METHOD_GET",n[n.METHOD_POST=2]="METHOD_POST",(o=t.DisconnectedType||(t.DisconnectedType={}))[o.CLOSE=0]="CLOSE",o[o.TEMP=1]="TEMP",o[o.TIMEOUT=2]="TIMEOUT",(n=t.ConnectedType||(t.ConnectedType={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",(o=t.BrokenType||(t.BrokenType={}))[o.EMPTY=0]="EMPTY",o[o.CLOSE=1]="CLOSE",t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0,r=r(0),t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:r.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var r,n,o="0123456789".split(""),i=[];if(t=o.length,e)for(r=0;r<e;r++)i[r]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(n=0|16*Math.random(),i[r]=o[19==r?3&n|8:n]);return i.join("")}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0,r(0)),i=r(1),s=r(6),a=r(4),l=[o.BusinessService.SERVICE_WEBRTC_SIGNAL,o.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function c(e,t,r,n,i){this.logger=e,this.service=t,this.streamManager=r,this.pcEstablishTimeout=n,this.option=i,this.connectState=o.PcConnectState.DISCONNECT,this.lastConnectState=o.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(o.StreamType.PC),this.eventManager=new s.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}c.prototype.sendRequest=function(e,t,r){var n=this,s=e.payload,c=((l.includes(this.service)||null!=(c=this.option)&&c.encode)&&(s=(0,a.encodeString)(e.payload)),{service_no:this.service,ack:e.ack,payload:s,wss_message_type:i.NET_ACCESS_CONFIG.wssMessageType,wss_path:null==(c=this.option)?void 0:c.path,wss_raw_query:null==(s=this.option)?void 0:s.query,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||(this.logger.info("zn.napr.sr pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,c,(function(){n.logger.info("zn.napr.sr suc"),r&&r()}),(function(e){n.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},c.prototype.onPushEvent=function(e,t){var r;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t,this.netPcStream.StreamID);break;case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.logger.info("zn.napr.ope"+" ".concat(this.service," down ").concat(null==(n=null==t?void 0:t.ts)?void 0:n.toNumber()));var n=t.payload;(l.includes(this.service)||null!=(r=this.option)&&r.encode)&&(n=(0,a.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",n)}},c.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},c.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},c.prototype.pcEstablished=function(e,t){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(o.PcConnectState.CONNECTED);var r=o.ConnectedType.MANUAL;this.lastConnectState===o.PcConnectState.BROKEN&&this.connectState===o.PcConnectState.CONNECTED&&(r=o.ConnectedType.AUTO),this.eventManager.emit("connected",r),this.reportEvent("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from,connect_stream:t}),this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(o.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",o.DisconnectedType.TEMP),e.reportEvent("pcDisconnectedEvent")}),1e3*this.pcEstablishTimeout)},c.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype._close=function(e,t){var r;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==o.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),r=this.streamManager.getStreamID(),this.netPcStream.refresh(r),this.eventManager.emit(e,t),r="","broken"===e?r="pcBrokenEvent":"disconnected"===e&&(r="pcDisconnectedEvent"),r&&this.reportEvent(r)),this.setConnectState(o.PcConnectState.DISCONNECT)},c.prototype.closePc=function(){this._close("broken")},c.prototype.closeRequest=function(){this._close("disconnected",o.DisconnectedType.CLOSE)},c.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},c.prototype.reportEvent=function(e,t){this.eventManager.emit(e,n({service_no:this.service},t))},t.NetAgentPCRequest=c},function(e,t,r){"use strict";function n(){this.handlerListMap={}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0,n.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},n.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(r){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(r))}}))},t.EventManager=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var n=r(0),o=r(4),i=r(1);function s(e,t,r){this.logger=e,this.service=t,this.streamManager=r,this.netHttpStream=this.streamManager.createStream(n.StreamType.HTTP)}s.prototype.sendRequest=function(e,t,r,s,a){var l=this;e={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,o.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer},this.netHttpStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,e,(function(e){var r=(null==e?void 0:e.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)}));"gzip"===(null==r?void 0:r.val)?l.logger.info("zn.nahr.sr gzip"):e.body&&(r=(0,o.decodeString)(e.body),e.body=r),l.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,n){l.logger.error("zn.nahr.sr fail"),r&&r(n||e)}),(function(e){l.logger.error("zn.nahr.sr ack"),s&&s(e)}),a),this.netHttpStream.isFirst=!1},t.NetAgentHttpRequest=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var n=r(0),o=(Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return n.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return n.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return n.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return n.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return n.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return n.Method}}),r(9)),i=(Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return o.ZegoConnectionAgent}}),r(7)),s=(Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return i.NetAgentHttpRequest}}),r(1)),a=(Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return s.NET_ACCESS_CONFIG}}),r(5));Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0,r(0)),s=r(10),a=r(13),l=r(18),c=r(19),u=r(20),d=r(1),h=r(6),p=r(21),f=r(3),g=r(22),m=r(4),v=r(23),_=r(7),y=r(24);function b(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this._linkConnectState=i.ENUM_CONNECT_STATE.disconnect,this.lastLinkConnectState=i.ENUM_CONNECT_STATE.disconnect,this.onConnectedEvent=function(t,r){var n;e.linkConnectState=i.ENUM_CONNECT_STATE.connected,e.getConfig(),e.stateCenter.specified||(n=e.reportSeq++,e.eventManager.emit("dispatchEvent",n,"start"),e.dispatch().then((function(t){var r=t.servers;t=t.domains,e.eventManager.emit("dispatchEvent",n,"end",{domains:t}),0<r.length&&e.eventManager.emit("dispatchResultUpdate",{servers:r})})).catch((function(e){}))),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,m.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid,connectEvents:r})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call"),e.linkConnectState=i.ENUM_CONNECT_STATE.connecting},this.onDisConnectedEvent=function(t){e.logger.info("zn.zca.ode"+" ".concat(t)),e.linkConnectState=i.ENUM_CONNECT_STATE.disconnect,t?(e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.BROKEN)):(e.eventManager.emit("disconnected"),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT))},this.onPushEvent=function(t,r,n){switch(r){case i.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(n);break;case i.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(n);break;case i.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case i.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case i.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,r,n);break;case i.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(n.data)}}}Object.defineProperty(b.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"linkConnectState",{get:function(){return this._linkConnectState},set:function(e){this.lastLinkConnectState=this._linkConnectState,this._linkConnectState=e},enumerable:!1,configurable:!0}),b.prototype.init=function(){this.logger=new v.ZegoLogger,this.protobuf=new s.AccessHubProtoBuf,this.stateCenter=new g.StateCenter,this.eventManager=new h.EventManager,this.checkLinkMsg(),this.inited=!0},b.prototype.unInit=function(){this.inited=!1},b.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?i.ENUM_NETWORK_STATE.online:i.ENUM_NETWORK_STATE.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new a.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new y.StreamManager(this.zegoLink),this.businessRequestMgr=new l.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new c.NetHeartBeatHandler(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new u.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},b.prototype.setUserInfo=function(e){this.stateCenter.userId=e},b.prototype.setNetAgentDefaultServers=function(e){this.connectServers=o([],e,!0)},b.prototype.setNetAgentSpecifiedServers=function(e){this.logger.info("zn.sss.0 "+JSON.stringify(e)),this.stateCenter.specified=!0,this.specifiedServers=o([],e,!0)},b.prototype.setBackupDomains=function(e){this.primaryDomains=e},b.prototype.setDispatchConnectServers=function(e){this.connect(e)},b.prototype.startHttpRequest=function(e,t,r,n,o){var i=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new _.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(r){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,status_code:r.status_code,err_code:0}),t&&t(r)}),(function(t){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,err_code:t.code||0}),r&&r(t)}),n,o)},b.prototype.getAppConfigByAgent=function(e,t,r){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.getAppConfig(e,this.stateCenter.userId,t,r)},b.prototype.getPCRequest=function(e,t){var r=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){r.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===i.DisconnectedType.TEMP&&(r.disConnect(),r.connectStart())})),t.on("connectStart",(function(){r.connectUa()})),t},b.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},b.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},b.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},b.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},b.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},b.prototype.setLogger=function(e){this.logger=e},b.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},b.prototype.getVersion=function(){return i.PROTO_VERSION},b.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([f.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},b.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},b.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},b.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},b.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},b.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},b.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=o([],e,!0)),this.stateCenter.specified&&0<this.specifiedServers.length&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new p.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,r){r===f.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",r),t.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT,i.DisconnectedType.TIMEOUT,r))},this.connectStart(!1,!0)},b.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket(i.DestroyType.DISCONNECT)},b.prototype.getConfig=function(){function e(e,n,o){o?t.logger.info("zn.zca.gc fail "+JSON.stringify(o)):0===e.code?(t.logger.info("zn.zca.gc suc "+JSON.stringify(e)),t.getConfigSuccess(e,r)):t.logger.info("zn.zca.gc fail")}var t=this,r=(new Date).getTime();this.businessRequestMgr.getConfig(e,e)},b.prototype.getConfigSuccess=function(e,t){var r;this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout),null!=(r=null==e?void 0:e.data)&&r.client_outer_ip&&(this.stateCenter.clientIP=e.data.client_outer_ip),null!=(r=null==e?void 0:e.data)&&r.ntp_time&&(r=e.data.ntp_time.toNumber(),e=(new Date).getTime(),r+=Math.round((e-t)/2),this.stateCenter.timeOffset=r-e),this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset})},b.prototype.dispatch=function(){var e=this;return new Promise((function(t,r){e.businessRequestMgr.dispatchURL((function(r){r=r.data.wss_groups;var n=(e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(r)),e.getConnectionDomains(r,e.primaryDomains));n=e.handleWssGroups(n),t({servers:n,domains:r})}),(function(e){r(e)}))}))},b.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return d.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+d.NET_ACCESS_CONFIG.location})):[]},b.prototype.getConnectionDomains=function(e,t){var r=o([],e,!0);return t.forEach((function(t){e.forEach((function(e){var n;(n=e.main_domain||(n=e.host.split("."))[n.length-2]+"."+n[n.length-1])!==t&&(n=e.host.replace(n,t),r.push({group:e.group,host:n}))}))})),r},b.prototype.getAppConfig=function(e,t,r,o){var s=this;return new Promise((function(a,l){"string"==typeof t&&"string"==typeof r?s.businessRequestMgr.getAppConfig(e,t,r,o).then((function(e){a(n(n({},e),{retryCount:s.getAppConfigFailCount}))})).catch((function(o){var c;s.logger.error("zn.zca.gac "+JSON.stringify(o)),-1<i.externalErrorList.indexOf(o.code)?(c=s.getAppConfigFailCount,s.getAppConfigFailCount=0,l(n(n({},o),{retryCount:c}))):(s.getAppConfigFailCount++,(20008===o.code||1100002===o.code)&&s.getAppConfigFailCount<3?s.getAppConfig(e,t,r).then((function(e){return a(e)})).catch((function(e){return l(e)})):(c=s.getAppConfigFailCount,s.getAppConfigFailCount=0,l(n(n({},o),{retryCount:c}))))})):s.logger.error("zn.zca.gac userID or token must be string")}))},b.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;console.warn("reportDisConnectEvent"),this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer,connectid:this.connectid})},b.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),e=this.specifiedServers),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},b.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case i.ConnectionClosedAction.ACTION_DISPATCH:var r=this.reportSeq++;this.eventManager.emit("dispatchEvent",r,"start"),this.dispatch().then((function(e){var n=e.servers;e=e.domains,t.eventManager.emit("dispatchEvent",r,"end",{domains:e,reason:"ConnectClosed"}),Array.isArray(n)&&0<n.length&&(t.eventManager.emit("dispatchResultUpdate",{servers:n}),e=t.stateCenter.specified?t.specifiedServers:n,t.disConnect(),t.zegoLink.createSocket(e),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case i.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case i.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",i.BrokenType.CLOSE),this.connectStart();case i.ConnectionClosedAction.ACTION_ABORT:case i.ConnectionClosedAction.ACTION_RESERVED:}},b.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},b.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(i.ENUM_CONNECT_STATE.disconnect))},b.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},b.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},b.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.lastLinkConnectState===i.ENUM_CONNECT_STATE.connected&&this.linkConnectState===i.ENUM_CONNECT_STATE.disconnect&&this.reportDisConnectEvent()},b.prototype.testConnect=function(){this.startHttpRequest({service:i.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,stick:"zego-action-dispatch",method_no:i.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){console.warn("suc",e)}),(function(e){console.warn("err",e)}),(function(e){console.warn("suc",e)}))},t.ZegoConnectionAgent=b},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0,a(r(11))),c=(s=s(r(2)),r(0)),u=a(r(12));function d(){var e;this.protoInstance=u.default,this.protoMap=((e={})[c.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[c.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[c.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[c.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[c.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[c.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[c.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[c.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[c.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[c.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[c.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[c.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[c.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[c.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[c.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}s.util.Long=l.default,s.configure(),d.prototype.encodeRequest=function(e,t,r){var n=(o=this.protoMap[e])[0],o=o[1];return o=(n=this.encode(this.protoInstance[n][o],t)).length,(t=new Uint8Array(13+o))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([o]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([r]).buffer).reverse(),8),t[12]=0,t.set(n,13),t},d.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],r=new DataView(e.buffer).getUint32(8),n=e.slice(13);try{var o=this.protoMap[t],i=o[0],s=o[1];return[r,t,this.decode(this.protoInstance[i][s],n)]}catch(e){return[r,t,{code:1}]}},d.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},d.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},d.prototype.decode=function(e,t){return n({},e.decode(t))},t.AccessHubProtoBuf=d},function(e,t){e.exports=i},function(e,t,r){"use strict";r.r(t),r.d(t,"proto_accesshub",(function(){return a})),r.d(t,"proto_initconfig",(function(){return l})),r.d(t,"default",(function(){return s}));const n=(t=r(2)).Reader,o=t.Writer,i=t.util,s=t.roots.default||(t.roots.default={}),a=s.proto_accesshub=(()=>{const e={};return e.MessageType=function(){const e={},t=Object.create(e);return t[e[0]="MSG_TYPE_EMPTY"]=0,t[e[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,t[e[2]="MSG_TYPE_STREAM_CLOSED"]=2,t[e[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,t[e[4]="MSG_TYPE_HTTP_REQUEST"]=4,t[e[5]="MSG_TYPE_HTTP_RESPONSE"]=5,t[e[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,t[e[7]="MSG_TYPE_PROXY_CONNECT"]=7,t[e[8]="MSG_TYPE_PROXY_CONNECTED"]=8,t[e[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,t[e[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,t[e[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,t[e[12]="MSG_TYPE_HB_REQUEST"]=12,t[e[13]="MSG_TYPE_HB_RESPONSE"]=13,t[e[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,t[e[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,t[e[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,t[e[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,t[e[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,t[e[19]="MSG_TYPE_PC_ESTABLISHED"]=19,t[e[20]="MSG_TYPE_PC_BROKEN"]=20,t[e[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,t[e[22]="MSG_TYPE_REDIRECT"]=22,t[e[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,t[e[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,t[e[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,t[e[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,t[e[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,t[e[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,t[e[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,t[e[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,t[e[31]="MSG_TYPE_RESOLVE_DOMAIN_REQUEST"]=31,t[e[32]="MSG_TYPE_RESOLVE_DOMAIN_RESPONSE"]=32,t[e[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,t[e[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,t[e[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,t[e[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,t[e[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,t[e[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,t[e[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,t[e[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,t}(),e.ErrorCode=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,t[e[10001]="DISPATCH_INTERNAL_ERROR"]=10001,t[e[10002]="DISPATCH_INVALID_FRAME"]=10002,t[e[10003]="DISPATCH_UNMARSHAL"]=10003,t[e[10004]="DISPATCH_MSGTYPE"]=10004,t[e[10005]="DISPATCH_MARSHAL"]=10005,t[e[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,t[e[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,t[e[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,t[e[20002]="ACCESSHUB_DECRYPT"]=20002,t[e[20003]="ACCESSHUB_MSGTYPE"]=20003,t[e[20004]="ACCESSHUB_UNMARSHAL"]=20004,t[e[20005]="ACCESSHUB_TIMEOUT"]=20005,t[e[20006]="ACCESSHUB_CONNECT"]=20006,t[e[20007]="ACCESSHUB_BROKEN"]=20007,t[e[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,t[e[20009]="ACCESSHUB_MARSHAL"]=20009,t[e[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,t[e[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,t[e[20012]="ACCESSHUB_INVALID_APPID"]=20012,t[e[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,t[e[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,t[e[20015]="ACCESSHUB_AUTH_FAILED"]=20015,t[e[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,t[e[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,t[e[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,t[e[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,t[e[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,t}(),e.Mode=function(){const e={},t=Object.create(e);return t[e[0]="Mode_UNSET"]=0,t[e[1]="MODE_ONLINE"]=1,t[e[2]="MODE_TEST"]=2,t[e[3]="MODE_ALPHA"]=3,t}(),e.Service=function(){const e={},t=Object.create(e);return t[e[0]="SERVICE_UNSET"]=0,t[e[1]="SERVICE_MEDIAGW"]=1,t[e[2]="SERVICE_LIVEROOM"]=2,t[e[3]="SERVICE_MIX"]=3,t[e[4]="SERVICE_ZEUS"]=4,t[e[5]="SERVICE_ZPUSH"]=5,t[e[6]="SERVICE_L3"]=6,t[e[7]="SERVICE_TALKLINE"]=7,t[e[8]="SERVICE_EDUSUITE"]=8,t[e[9]="SERVICE_ZIM"]=9,t[e[10]="SERVICE_ClOUD_SETTING"]=10,t[e[11]="SERVICE_ZEUSHB"]=11,t[e[12]="SERVICE_USER_LOGIC"]=12,t[e[13]="SERVICE_UNIFYDISPATCH"]=13,t[e[14]="SERVICE_QUALITY"]=14,t[e[15]="SERVICE_SECURITY"]=15,t[e[16]="SERVICE_KTVCPR"]=16,t[e[17]="SERVICE_SWITCH4LIVEROOM"]=17,t[e[18]="SERVICE_WEBRTC_SIGNAL"]=18,t[e[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,t[e[20]="SERVICE_VIDEOCPR"]=20,t[e[21]="SERVICE_CDN"]=21,t[e[22]="SERVICE_CLOUDRECORD"]=22,t[e[23]="SERVICE_INNER_ECHO"]=23,t[e[24]="SERVICE_OUTER_ECHO"]=24,t[e[25]="SERVICE_LOCALHOST_ECHO"]=25,t[e[26]="SERVICE_ECHO"]=26,t[e[27]="SERVICE_DOCSERVICE"]=27,t[e[28]="SERVICE_AUTHSVR"]=28,t[e[29]="SERVICE_WEBLIVEROOM"]=29,t[e[30]="SERVICE_WHITEBOARD"]=30,t[e[31]="SERVICE_METAWORLD"]=31,t[e[32]="SERVICE_ZEGOLAND"]=32,t}(),e.Method=function(){const e={},t=Object.create(e);return t[e[0]="METHOD_UNSET"]=0,t[e[1]="METHOD_GET"]=1,t[e[2]="METHOD_POST"]=2,t}(),e.SdkType=function(){const e={},t=Object.create(e);return t[e[0]="SDK_TYPE_UNSET"]=0,t[e[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,t[e[2]="SDK_TYPE_WSS_NATIVE"]=2,t[e[3]="SDK_TYPE_WSS_WEB"]=3,t}(),e.ZegoconnRunEnv=function(){const e={},t=Object.create(e);return t[e[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,t[e[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,t[e[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,t}(),e.BackendConnType=function(){const e={},t=Object.create(e);return t[e[0]="BACKEND_CONN_TYPE_UNSET"]=0,t[e[1]="BACKEND_CONN_TYPE_TCP"]=1,t[e[2]="BACKEND_CONN_TYPE_WSS"]=2,t}(),e.ConnectionClosed=(M.prototype.code=0,M.prototype.msg="",M.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},M.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.ConnectionClosed;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},M),e.StreamClosed=(L.prototype.code=0,L.prototype.msg="",L.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},L.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.StreamClosed;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},L),e.CloseConnection=(N.prototype.reason=0,N.prototype.msg="",N.prototype.action=0,N.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},N.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.CloseConnection;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.action=e.int32();break;default:e.skipType(7&i)}}return o},N.Action=function(){const e={},t=Object.create(e);return t[e[0]="ACTION_RESERVED"]=0,t[e[1]="ACTION_DISPATCH"]=1,t[e[2]="ACTION_RETRY"]=2,t[e[3]="ACTION_NEXT_NODE"]=3,t[e[4]="ACTION_ABORT"]=4,t[e[5]="ACTION_NEXT_GROUP"]=5,t}(),N),e.HTTPRequest=(P.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,P.prototype.appid=0,P.prototype.biz_type=0,P.prototype.mode="",P.prototype.id_name="",P.prototype.reqid="",P.prototype.stick="",P.prototype.service="",P.prototype.location="",P.prototype.method="",P.prototype.headers=i.emptyArray,P.prototype.body=i.newBuffer([]),P.prototype.ack=!1,P.prototype.mode_no=0,P.prototype.service_no=0,P.prototype.method_no=0,P.prototype.sdk_type=0,P.prototype.zegoconn_run_env=0,P.prototype.zegoconn_version=0,P.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(let r=0;r<e.headers.length;++r)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},P.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequest;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.stick=e.string();break;case 8:o.service=e.string();break;case 9:o.location=e.string();break;case 10:o.method=e.string();break;case 11:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:o.body=e.bytes();break;case 13:o.ack=e.bool();break;case 14:o.mode_no=e.int32();break;case 15:o.service_no=e.int32();break;case 16:o.method_no=e.int32();break;case 17:o.sdk_type=e.int32();break;case 18:o.zegoconn_run_env=e.int32();break;case 19:o.zegoconn_version=e.uint32();break;default:e.skipType(7&i)}}return o},P.HTTPHeader=(A.prototype.name="",A.prototype.val="",A.encode=function(e,t){return t=t||o.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},A.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequest.HTTPHeader;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:o.val=e.string();break;default:e.skipType(7&i)}}return o},A),P),e.HTTPResponse=(I.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,I.prototype.headers=i.emptyArray,I.prototype.status_code=0,I.prototype.body=i.newBuffer([]),I.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(let r=0;r<e.headers.length;++r)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},I.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPResponse;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:o.status_code=e.int32();break;case 4:o.body=e.bytes();break;default:e.skipType(7&i)}}return o},I),e.HTTPRequestAck=(O.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,O.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},O.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequestAck;for(;e.pos<r;){var i=e.uint32();i>>>3==1?o.txid=e.uint64():e.skipType(7&i)}return o},O),e.HTTPRequestDroped=(k.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,k.prototype.reason=0,k.prototype.msg="",k.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},k.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequestDroped;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.reason=e.int32();break;case 3:o.msg=e.string();break;default:e.skipType(7&i)}}return o},k),e.ProxyConnectionClosed=(R.prototype.code=0,R.prototype.msg="",R.prototype.connected=0,R.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.connected&&Object.hasOwnProperty.call(e,"connected")&&t.uint32(24).int32(e.connected),t},R.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.ProxyConnectionClosed;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;case 3:o.connected=e.int32();break;default:e.skipType(7&i)}}return o},R),e.HBRequest=(w.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,w.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,w.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},w.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HBRequest;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&i)}}return o},w),e.HBResponse=(T.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,T.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,T.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,T.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(24).uint64(e.ntp_time),t},T.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HBResponse;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;case 3:o.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return o},T),e.GetConfigRequest=(C.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,C.prototype.appid=0,C.prototype.biz_type=0,C.prototype.mode="",C.prototype.id_name="",C.prototype.reqid="",C.prototype.zegoconn_version=0,C.prototype.sdk_type=0,C.prototype.zegoconn_run_env=0,C.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},C.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigRequest;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.sdk_type=e.int32();break;case 9:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},C),e.GetConfigResponseData=(S.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,S.prototype.quic_hb_interval=0,S.prototype.quic_hb_timeout=0,S.prototype.logic_hb_interval=0,S.prototype.logic_hb_timeout=0,S.prototype.pc_establish_timeout=0,S.prototype.sdk_link_detect_interval=0,S.prototype.sdk_link_detect_duration=0,S.prototype.client_outer_ip="",S.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,S.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(80).uint64(e.ntp_time),t},S.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigResponseData;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.quic_hb_interval=e.uint32();break;case 3:o.quic_hb_timeout=e.uint32();break;case 4:o.logic_hb_interval=e.uint32();break;case 5:o.logic_hb_timeout=e.uint32();break;case 6:o.pc_establish_timeout=e.uint32();break;case 7:o.sdk_link_detect_interval=e.uint32();break;case 8:o.sdk_link_detect_duration=e.uint32();break;case 9:o.client_outer_ip=e.string();break;case 10:o.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return o},S),e.GetConfigResponse=(E.prototype.code=0,E.prototype.message="",E.prototype.data=null,E.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},E.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigResponse;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},E),e.PCUpwardMessage=(b.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,b.prototype.appid=0,b.prototype.biz_type=0,b.prototype.mode_no=0,b.prototype.id_name="",b.prototype.service_no=0,b.prototype.ack=!1,b.prototype.payload=i.newBuffer([]),b.prototype.sdk_type=0,b.prototype.wss_message_type=0,b.prototype.wss_path="",b.prototype.wss_raw_query="",b.prototype.zegoconn_version=0,b.prototype.zegoconn_run_env=0,b.prototype.backend_conn_type=0,b.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),null!=e.backend_conn_type&&Object.hasOwnProperty.call(e,"backend_conn_type")&&t.uint32(120).int32(e.backend_conn_type),t},b.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCUpwardMessage;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.service_no=e.int32();break;case 7:o.ack=e.bool();break;case 8:o.payload=e.bytes();break;case 9:o.sdk_type=e.int32();break;case 10:o.wss_message_type=e.uint32();break;case 11:o.wss_path=e.string();break;case 12:o.wss_raw_query=e.string();break;case 13:o.zegoconn_version=e.uint32();break;case 14:o.zegoconn_run_env=e.int32();break;case 15:o.backend_conn_type=e.int32();break;default:e.skipType(7&i)}}return o},b),e.PCUpwardMessageAck=(y.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,y.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},y.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCUpwardMessageAck;for(;e.pos<r;){var i=e.uint32();i>>>3==1?o.txid=e.uint64():e.skipType(7&i)}return o},y),e.PCEstablished=(_.prototype.elapse=0,_.prototype.from=0,_.encode=function(e,t){return t=t||o.create(),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},_.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCEstablished;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.elapse=e.uint32();break;case 2:o.from=e.uint32();break;default:e.skipType(7&i)}}return o},_),e.PCBroken=(v.encode=function(e,t){return t||o.create()},v.decode=function(e,t){e instanceof n||(e=n.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new s.proto_accesshub.PCBroken;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return t},v),e.PCDownwardMessage=(m.prototype.payload=i.newBuffer([]),m.prototype.wss_message_type=0,m.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,m.encode=function(e,t){return t=t||o.create(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},m.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCDownwardMessage;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.payload=e.bytes();break;case 2:o.wss_message_type=e.uint32();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&i)}}return o},m),e.Redirect=(g.prototype.rand="",g.prototype.secret="",g.prototype.groups=i.emptyArray,g.prototype.opt_ports=i.emptyArray,g.prototype.wss_groups=i.emptyArray,g.encode=function(e,t){if(t=t||o.create(),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(let r=0;r<e.groups.length;++r)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let r=0;r<e.opt_ports.length;++r)t.uint32(32).uint32(e.opt_ports[r]);if(null!=e.wss_groups&&e.wss_groups.length)for(let r=0;r<e.wss_groups.length;++r)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[r],t.uint32(42).fork()).ldelim();return t},g.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.Redirect;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.rand=e.string();break;case 2:o.secret=e.string();break;case 3:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 5:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},g),e.GetAppConfigRequest=(f.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,f.prototype.appid=0,f.prototype.biz_type=0,f.prototype.mode_no=0,f.prototype.id_name="",f.prototype.config_key="",f.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,f.prototype.signature=i.newBuffer([]),f.prototype.lite_sign="",f.prototype.token="",f.prototype.sdk_type=0,f.prototype.zegoconn_version=0,f.prototype.zegoconn_run_env=0,f.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},f.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigRequest;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.config_key=e.string();break;case 7:o.ts=e.uint64();break;case 8:o.signature=e.bytes();break;case 9:o.lite_sign=e.string();break;case 10:o.token=e.string();break;case 11:o.sdk_type=e.int32();break;case 12:o.zegoconn_version=e.uint32();break;case 13:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},f),e.GetAppConfigResponseData=(p.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,p.prototype.data=i.newBuffer([]),p.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,p.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},p.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigResponseData;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.data=e.bytes();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&i)}}return o},p),e.GetAppConfigResponse=(h.prototype.code=0,h.prototype.message="",h.prototype.data=null,h.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},h.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigResponse;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},h),e.PushAppConfig=(d.prototype.config_key="",d.prototype.data=i.newBuffer([]),d.encode=function(e,t){return t=t||o.create(),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},d.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PushAppConfig;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.config_key=e.string();break;case 2:o.data=e.bytes();break;default:e.skipType(7&i)}}return o},d),e.AccesshubDispatchRequest=(u.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,u.prototype.appid=0,u.prototype.biz_type=0,u.prototype.mode_no=0,u.prototype.id_name="",u.prototype.sdk_type=0,u.prototype.zegoconn_version=0,u.prototype.zegoconn_run_env=0,u.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},u.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchRequest;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.sdk_type=e.int32();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},u),e.AccesshubDispatchGroup=(c.prototype.group="",c.prototype.quic_nodes=i.emptyArray,c.prototype.mtcp_nodes=i.emptyArray,c.prototype.wss_nodes=i.emptyArray,c.encode=function(e,t){if(t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(let r=0;r<e.quic_nodes.length;++r)t.uint32(18).string(e.quic_nodes[r]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(let r=0;r<e.mtcp_nodes.length;++r)t.uint32(26).string(e.mtcp_nodes[r]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(let r=0;r<e.wss_nodes.length;++r)t.uint32(34).string(e.wss_nodes[r]);return t},c.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchGroup;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.quic_nodes&&o.quic_nodes.length||(o.quic_nodes=[]),o.quic_nodes.push(e.string());break;case 3:o.mtcp_nodes&&o.mtcp_nodes.length||(o.mtcp_nodes=[]),o.mtcp_nodes.push(e.string());break;case 4:o.wss_nodes&&o.wss_nodes.length||(o.wss_nodes=[]),o.wss_nodes.push(e.string());break;default:e.skipType(7&i)}}return o},c),e.WssAccesshubDispatchGroup=(l.prototype.group="",l.prototype.host="",l.prototype.main_domain="",l.encode=function(e,t){return t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),null!=e.main_domain&&Object.hasOwnProperty.call(e,"main_domain")&&t.uint32(26).string(e.main_domain),t},l.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.WssAccesshubDispatchGroup;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.host=e.string();break;case 3:o.main_domain=e.string();break;default:e.skipType(7&i)}}return o},l),e.AccesshubDispatchResponseData=(a.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,a.prototype.rand="",a.prototype.secret="",a.prototype.groups=i.emptyArray,a.prototype.opt_ports=i.emptyArray,a.prototype.wss_groups=i.emptyArray,a.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(let r=0;r<e.groups.length;++r)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let r=0;r<e.opt_ports.length;++r)t.uint32(40).uint32(e.opt_ports[r]);if(null!=e.wss_groups&&e.wss_groups.length)for(let r=0;r<e.wss_groups.length;++r)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[r],t.uint32(50).fork()).ldelim();return t},a.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchResponseData;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.rand=e.string();break;case 3:o.secret=e.string();break;case 4:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 6:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},a),e.AccesshubDispatchResponse=(r.prototype.code=0,r.prototype.message="",r.prototype.data=null,r.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},r.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchResponse;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},r),e.PushException=(t.prototype.reason=0,t.prototype.msg="",t.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,t.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PushException;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.txid=e.uint64();break;default:e.skipType(7&i)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}})(),l=s.proto_initconfig=(()=>{const e={};return e.ResourceType=function(){const e={},t=Object.create(e);return t[e[0]="CDN"]=0,t[e[1]="RTC"]=1,t[e[2]="L3"]=2,t[e[3]="CDN_PLUS"]=3,t[e[4]="CDN_PLUS_BACKUP"]=4,t}(),e.ProtocolType=function(){const e={},t=Object.create(e);return t[e[0]="UDP"]=0,t[e[1]="RTMP"]=1,t[e[2]="FLV"]=2,t[e[3]="HLS"]=3,t[e[4]="WEBRTC"]=4,t}(),e.ResolveType=function(){const e={},t=Object.create(e);return t[e[0]="LOCAL_DNS"]=0,t[e[1]="DISPATCH"]=1,t}(),e.AppConfig=(p.prototype.test_id=null,p.prototype.domain=null,p.prototype.flexible_domain=null,p.prototype.replace_flexible_domain=null,Object.defineProperty(p.prototype,"_test_id",{get:i.oneOfGetter(r=["test_id"]),set:i.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_domain",{get:i.oneOfGetter(r=["domain"]),set:i.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_flexible_domain",{get:i.oneOfGetter(r=["flexible_domain"]),set:i.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_replace_flexible_domain",{get:i.oneOfGetter(r=["replace_flexible_domain"]),set:i.oneOfSetter(r)}),p.encode=function(e,t){return t=t||o.create(),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},p.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.AppConfig;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.test_id=e.int32();break;case 2:o.domain=e.string();break;case 3:o.flexible_domain=e.string();break;case 4:o.replace_flexible_domain=e.string();break;default:e.skipType(7&i)}}return o},p),e.SpeedlogConfig=(h.prototype.report_count=null,h.prototype.report_retry_interval=null,h.prototype.push_quality_sample_count=null,h.prototype.pull_quality_sample_count=null,h.prototype.hardware_report_cycle=null,h.prototype.room_user_max_count=null,h.prototype.room_stream_max_count=null,h.prototype.charge_info_report_cycle=null,h.prototype.charge_info_report_mode=null,h.prototype.disable_report_pull=i.emptyArray,h.prototype.report_max_bytes=null,h.prototype.push_quality_report_freq=null,h.prototype.pull_quality_report_freq=null,h.prototype.charge_info_report_no_playing=null,Object.defineProperty(h.prototype,"_report_count",{get:i.oneOfGetter(r=["report_count"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_report_retry_interval",{get:i.oneOfGetter(r=["report_retry_interval"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_push_quality_sample_count",{get:i.oneOfGetter(r=["push_quality_sample_count"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_pull_quality_sample_count",{get:i.oneOfGetter(r=["pull_quality_sample_count"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_hardware_report_cycle",{get:i.oneOfGetter(r=["hardware_report_cycle"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_room_user_max_count",{get:i.oneOfGetter(r=["room_user_max_count"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_room_stream_max_count",{get:i.oneOfGetter(r=["room_stream_max_count"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_charge_info_report_cycle",{get:i.oneOfGetter(r=["charge_info_report_cycle"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_charge_info_report_mode",{get:i.oneOfGetter(r=["charge_info_report_mode"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_report_max_bytes",{get:i.oneOfGetter(r=["report_max_bytes"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_push_quality_report_freq",{get:i.oneOfGetter(r=["push_quality_report_freq"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_pull_quality_report_freq",{get:i.oneOfGetter(r=["pull_quality_report_freq"]),set:i.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_charge_info_report_no_playing",{get:i.oneOfGetter(r=["charge_info_report_no_playing"]),set:i.oneOfSetter(r)}),h.encode=function(e,t){if(t=t||o.create(),null!=e.report_count&&Object.hasOwnProperty.call(e,"report_count")&&t.uint32(8).int32(e.report_count),null!=e.report_retry_interval&&Object.hasOwnProperty.call(e,"report_retry_interval")&&t.uint32(16).int32(e.report_retry_interval),null!=e.push_quality_sample_count&&Object.hasOwnProperty.call(e,"push_quality_sample_count")&&t.uint32(24).int32(e.push_quality_sample_count),null!=e.pull_quality_sample_count&&Object.hasOwnProperty.call(e,"pull_quality_sample_count")&&t.uint32(32).int32(e.pull_quality_sample_count),null!=e.hardware_report_cycle&&Object.hasOwnProperty.call(e,"hardware_report_cycle")&&t.uint32(40).int32(e.hardware_report_cycle),null!=e.room_user_max_count&&Object.hasOwnProperty.call(e,"room_user_max_count")&&t.uint32(48).int32(e.room_user_max_count),null!=e.room_stream_max_count&&Object.hasOwnProperty.call(e,"room_stream_max_count")&&t.uint32(56).int32(e.room_stream_max_count),null!=e.charge_info_report_cycle&&Object.hasOwnProperty.call(e,"charge_info_report_cycle")&&t.uint32(64).int32(e.charge_info_report_cycle),null!=e.charge_info_report_mode&&Object.hasOwnProperty.call(e,"charge_info_report_mode")&&t.uint32(72).int32(e.charge_info_report_mode),null!=e.disable_report_pull&&e.disable_report_pull.length){t.uint32(82).fork();for(let r=0;r<e.disable_report_pull.length;++r)t.int32(e.disable_report_pull[r]);t.ldelim()}return null!=e.report_max_bytes&&Object.hasOwnProperty.call(e,"report_max_bytes")&&t.uint32(88).int32(e.report_max_bytes),null!=e.push_quality_report_freq&&Object.hasOwnProperty.call(e,"push_quality_report_freq")&&t.uint32(96).int32(e.push_quality_report_freq),null!=e.pull_quality_report_freq&&Object.hasOwnProperty.call(e,"pull_quality_report_freq")&&t.uint32(104).int32(e.pull_quality_report_freq),null!=e.charge_info_report_no_playing&&Object.hasOwnProperty.call(e,"charge_info_report_no_playing")&&t.uint32(112).int32(e.charge_info_report_no_playing),t},h.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.SpeedlogConfig;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.report_count=e.int32();break;case 2:o.report_retry_interval=e.int32();break;case 3:o.push_quality_sample_count=e.int32();break;case 4:o.pull_quality_sample_count=e.int32();break;case 5:o.hardware_report_cycle=e.int32();break;case 6:o.room_user_max_count=e.int32();break;case 7:o.room_stream_max_count=e.int32();break;case 8:o.charge_info_report_cycle=e.int32();break;case 9:o.charge_info_report_mode=e.int32();break;case 10:if(o.disable_report_pull&&o.disable_report_pull.length||(o.disable_report_pull=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.disable_report_pull.push(e.int32());else o.disable_report_pull.push(e.int32());break;case 11:o.report_max_bytes=e.int32();break;case 12:o.push_quality_report_freq=e.int32();break;case 13:o.pull_quality_report_freq=e.int32();break;case 14:o.charge_info_report_no_playing=e.int32();break;default:e.skipType(7&i)}}return o},h),e.MediaServiceProtocolInfo=(d.prototype.config_id=null,d.prototype.protocol=null,d.prototype.url_template=null,d.prototype.resolve_type=null,d.prototype.push_cdn_authentication=null,d.prototype.cdn_quic_version=i.emptyArray,Object.defineProperty(d.prototype,"_config_id",{get:i.oneOfGetter(r=["config_id"]),set:i.oneOfSetter(r)}),Object.defineProperty(d.prototype,"_protocol",{get:i.oneOfGetter(r=["protocol"]),set:i.oneOfSetter(r)}),Object.defineProperty(d.prototype,"_url_template",{get:i.oneOfGetter(r=["url_template"]),set:i.oneOfSetter(r)}),Object.defineProperty(d.prototype,"_resolve_type",{get:i.oneOfGetter(r=["resolve_type"]),set:i.oneOfSetter(r)}),Object.defineProperty(d.prototype,"_push_cdn_authentication",{get:i.oneOfGetter(r=["push_cdn_authentication"]),set:i.oneOfSetter(r)}),d.encode=function(e,t){if(t=t||o.create(),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(let r=0;r<e.cdn_quic_version.length;++r)t.int32(e.cdn_quic_version[r]);t.ldelim()}return t},d.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaServiceProtocolInfo;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.config_id=e.string();break;case 2:o.protocol=e.int32();break;case 3:o.url_template=e.string();break;case 4:o.resolve_type=e.int32();break;case 5:o.push_cdn_authentication=e.int32();break;case 6:if(o.cdn_quic_version&&o.cdn_quic_version.length||(o.cdn_quic_version=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.cdn_quic_version.push(e.int32());else o.cdn_quic_version.push(e.int32());break;default:e.skipType(7&i)}}return o},d),e.MediaResourceInfo=(u.prototype.resource_type=null,u.prototype.service_info=i.emptyArray,Object.defineProperty(u.prototype,"_resource_type",{get:i.oneOfGetter(r=["resource_type"]),set:i.oneOfSetter(r)}),u.encode=function(e,t){if(t=t||o.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(let r=0;r<e.service_info.length;++r)s.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[r],t.uint32(18).fork()).ldelim();return t},u.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaResourceInfo;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.resource_type=e.int32();break;case 2:o.service_info&&o.service_info.length||(o.service_info=[]),o.service_info.push(s.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},u),e.MediaPublishConfig=(c.prototype.resource_info=i.emptyArray,c.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let r=0;r<e.resource_info.length;++r)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(18).fork()).ldelim();return t},c.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaPublishConfig;for(;e.pos<r;){var i=e.uint32();i>>>3==2?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return o},c),e.MediaPlayConfig=(l.prototype.resource_info=i.emptyArray,l.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let r=0;r<e.resource_info.length;++r)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(42).fork()).ldelim();return t},l.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaPlayConfig;for(;e.pos<r;){var i=e.uint32();i>>>3==5?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return o},l),e.MediaConfig=(a.prototype.play_config=null,a.prototype.publish_config=null,Object.defineProperty(a.prototype,"_play_config",{get:i.oneOfGetter(r=["play_config"]),set:i.oneOfSetter(r)}),Object.defineProperty(a.prototype,"_publish_config",{get:i.oneOfGetter(r=["publish_config"]),set:i.oneOfSetter(r)}),a.encode=function(e,t){return t=t||o.create(),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&s.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&s.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),t},a.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaConfig;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.play_config=s.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:o.publish_config=s.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},a),e.InitConfig=(t.prototype.app_config=null,t.prototype.speedlog_config=null,t.prototype.media_config=null,Object.defineProperty(t.prototype,"_app_config",{get:i.oneOfGetter(r=["app_config"]),set:i.oneOfSetter(r)}),Object.defineProperty(t.prototype,"_speedlog_config",{get:i.oneOfGetter(r=["speedlog_config"]),set:i.oneOfSetter(r)}),Object.defineProperty(t.prototype,"_media_config",{get:i.oneOfGetter(r=["media_config"]),set:i.oneOfSetter(r)}),t.encode=function(e,t){return t=t||o.create(),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&s.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.speedlog_config&&Object.hasOwnProperty.call(e,"speedlog_config")&&s.proto_initconfig.SpeedlogConfig.encode(e.speedlog_config,t.uint32(34).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&s.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),t},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.InitConfig;for(;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.app_config=s.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 4:o.speedlog_config=s.proto_initconfig.SpeedlogConfig.decode(e,e.uint32());break;case 5:o.media_config=s.proto_initconfig.MediaConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;function a(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(this.resource_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(this.resource_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(this.service_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(this.cdn_quic_version=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.disable_report_pull=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}})()},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0,r(14)),c=r(0),u=r(15),d=r(16),h=r(3),p=r(1);function f(e,t,r,n,i){var s=o.call(this)||this;return s.appID=e,s.env=t,s.protobuf=r,s.logger=n,s.stateCenter=i,s.socketService=new d.NetSocketService(s.env),s.urlIndex=0,s.updatedMsgTime=0,s.unUpdateMsgTimeTypes=[c.AccessHubMessageType.MSG_TYPE_HB_REQUEST,c.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],s.netLinkState=c.ENUM_CONNECT_STATE.disconnect,s.sendCommandList=new l.LinkedList,s.unSendCommandList=new l.LinkedList,s.sendCommandMap={},s.unSendCommandMap={},s.sendDataCheckOnceCount=100,s.sendDataDropTimeout=1e4,s.sendDataCheckInterval=2e3,s.timeout=5e3,s.connectInterval=1e4,s.connectTimer=null,s.connectRsp={},s.unlogTypes=[12,13],s.tryServers=[],s.tryConnectEvents=[],s.connectStartTime=0,s.updatedMsgTime=Date.now(),s}i(f,o=u.ZegoLink),f.prototype.initEvent=function(e,t,r,n){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=r,this.onPushEvent=n},f.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},f.prototype.destroySocket=function(e){this.logger.info("zn.wl.ds.0 call "+e),this.socketService.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.disconnect,e!==c.DestroyType.NONE&&this.onDisConnectedEvent&&this.onDisConnectedEvent(e===c.DestroyType.BROKEN),this.resetConnect()},f.prototype.refreshServers=function(e){this.servers=a(a([],e,!0),this.servers,!0)},f.prototype.connectSocket=function(e,t,r){var n=this,o=(void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,!1),i=(this.connectRsp.fail=function(){r&&(o?n.logger.info("zn.wl.cs.0 fail cb has exec"):(r(),o=!0))},e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=i,this.logger.info("zn.wl.cs.0 server "+i),this.tryServers.push(i),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(i),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){n.logger.info("zn.wl.cs.0 timeout"),n.connectEvent(i,h.errorCodeList.NET_CONNECT_TIMEOUT.code),n.connectRsp.fail&&n.connectRsp.fail()}),this.connectInterval),!0},f.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=c.ENUM_CONNECT_STATE.connected,e.connectEvent(e.connectServer,0),e.onConnectedEvent&&e.onConnectedEvent(e.tryServers,e.tryConnectEvents),e.tryConnectEvents=[],e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||h.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=c.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||h.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=c.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},f.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=c.ENUM_CONNECT_STATE.disconnect},f.prototype.connectEvent=function(e,t){var r;this.connectStartTime&&(r=Date.now()-this.connectStartTime,this.tryConnectEvents.push({url:e,time_consumed:r,connect_type:3,error:t}))},f.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},f.prototype.isConnect=function(){return this.netLinkState===c.ENUM_CONNECT_STATE.connected},f.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},f.prototype.isConnecting=function(){return this.netLinkState===c.ENUM_CONNECT_STATE.connecting},f.prototype.setState=function(e){this.netLinkState=e},f.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},f.prototype.openHandler=function(e){this.socketService.openHandler(e)},f.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},f.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},f.prototype.sendMessage=function(e,t,r,n,o,i,a,l){void 0===n&&(n=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===(l=void 0===l?{}:l).timeout&&(l.timeout=5e3),void 0===l.isInSendMap&&(l.isInSendMap=!0),this.txid++,n={appid:this.appID,biz_type:0,mode_no:(null==(n=this.stateCenter.appInfo)?void 0:n.mode)||p.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:p.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?c.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:c.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},r={data:n=s(s({txid:this.txid},n),r),txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:l.timeout||this.timeout,ack:r.ack,success:o,error:i,ackFunc:a,isSend:!0,isCheck:e!==c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},l.isInSendMap&&(o=this.sendCommandList.push(r),this.sendCommandMap[this.txid]=o),this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+c.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,n,t):(r.isSend=!1,i=this.unSendCommandList.push(r),this.unSendCommandMap[this.txid]=i)},f.prototype.checkUnSendMsgs=function(e){for(var t,r=e.getFirst();null!=r;)e.remove(r),r._data&&!1===(null==(t=r._data)?void 0:t.isSend)&&r._data.type&&r._data.streamID&&r._data.data&&(this.sendUint8Data(r._data.type,r._data.data,r._data.streamID),r._data.isSend=!0),r=e.getFirst()},f.prototype.sendUint8Data=function(e,t,r){e=this.protobuf.encodeRequest(e,t,r),this.socketService.sendMessage(e)},f.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var r,n=(t=e.protobuf.decodeResponse(t))[0],o=t[1];t=t[2],e.unUpdateMsgTimeTypes.includes(o)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(o)&&e.logger.info("zn.wl.om"+" streamID: ".concat(n,", msgType: ").concat(o,"-").concat(c.typeMap[o])),(null!=t&&t.txid||null!=(r=null==t?void 0:t.data)&&r.txid)&&e.isRspMsg((null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid))?e.handleSendCommandMsgRsp(n,o,(null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid),t):e.onPushEvent(n,o,t)}},f.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},f.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},f.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},f.prototype.checkMessageListTimeout=function(e,t){for(var r,n=e.getFirst(),o=Date.now(),i=0,s=this;null!=n&&"break"!==function(){return n._data&&n._data.sendTime+n._data.timeOut>o?"break":(n._data&&delete t[n._data.data.txid],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+s.sendDataDropTimeout<o||(a=n&&n._data&&n._data.error,l=n&&n._data&&n._data.txid,c=n&&n._data&&(null==(r=n._data)?void 0:r.isCheck),setTimeout((function(){c&&a&&a({},l,h.errorCodeList.TIMEOUT)}),0)),++i>=s.sendDataCheckOnceCount?"break":void(n=e.getFirst()));var a,l,c}(););},f.prototype.checkSendMessageList=function(e){for(var t,r=e.getFirst();null!=r&&r._data;)!function(){var n,o,i;e.remove(r),r._data.isSend&&r._data.error&&(n=r&&r._data&&r._data.error,o=r&&r._data&&r._data.txid,i=r&&r._data&&(null==(t=r._data)?void 0:t.isCheck),setTimeout((function(){i&&n&&n({},o,h.errorCodeList.TIMEOUT)}),0)),r=e.getFirst()}()},f.prototype.handleSendCommandMsgRsp=function(e,t,r,n){var o,i=this.sendCommandMap[r];null!=i&&(null!=(o=i._data)&&o.ack||(delete this.sendCommandMap[r],this.sendCommandList.remove(i)),n.code&&0!==n.code?o&&null!=o.error&&o.error(n,r):t===c.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(n.code=n.reason,n.message=n.msg,o&&null!=o.error&&o.error(n,r)):t===c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?o&&null!=o.ackFunc&&o.ackFunc(n,r):o&&null!=o.success&&o.success(n,r))},r=f,t.ZegoWssLink=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(o.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),o.prototype.hasNext=function(){return this.next&&this.next.id},o.prototype.hasPrev=function(){return this.prev&&this.prev.id};var n=o;function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function i(){this.start=new n,this.end=new n,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=n,i.prototype.insertBefore=function(e,t){return(t=new n(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},i.prototype.addLast=function(e){return this.insertBefore(this.end,e)},i.prototype.add=function(e){return this.addLast(e)},i.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},i.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},i.prototype.size=function(){return this._numNodes},i.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},i.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},i.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},i.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},i.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},i.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},i.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},i.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},i.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},i.prototype.push=function(e){return this.addLast(e)},i.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},i.prototype.pop=function(){return this.removeLast()},i.prototype.shift=function(){return this.removeFirst()},t.LinkedList=i},function(e,t,r){"use strict";function n(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0,n.prototype.createSocket=function(e){},n.prototype.setState=function(e){},n.prototype.initEvent=function(e,t,r,n){},n.prototype.sendMessage=function(e,t,r,n,o,i,s,a){void 0===n&&(n=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.ZegoLink=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var n=r(17);function o(e){this.socket=null,this.ENV=e}o.prototype.createSocket=function(e){this.socket=(0,n.createZegoWebSocket)(e,this.ENV%2)},o.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},o.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},o.prototype.onMessage=function(e){},o.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},o.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},o.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},o.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},o.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(e)},t.NetSocketService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,(o=n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",s.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},s.prototype.onopen=function(e){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},s.prototype.onmessage=function(e){},s.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},s.prototype.close=function(){this._websocket&&this._websocket.close()};var n,o,i=s;function s(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return new(t%2===n.BROWSER?WebSocket:i)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var n=r(0),o=r(1);function i(e,t,r,n){this.streamManager=e,this.protobuf=t,this.logger=r,this.stateCenter=n}i.prototype.getConfig=function(e,t){var r;this.logger.info("zn.nab.gc call"),this.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:o.NET_ACCESS_CONFIG.connectVer,mode:n.ModeMap[(null==(r=this.stateCenter.appInfo)?void 0:r.mode)||o.NET_ACCESS_CONFIG.modeNo]},e,t)},i.prototype.dispatchURL=function(e,t){var r=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){r.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,n,o){r.logger.info("zn.nab.du fail"),t&&t(o||e)}))},i.prototype.getAppConfig=function(e,t,r,i){var s=this;return new Promise((function(a,l){function c(e,t,r){r?(s.logger.error("zn.nab.gac fail "+JSON.stringify(r)),l(r)):0===e.code?(s.logger.info("zn.nab.gac suc"),r=s.decodeConfigMessage(e.data.data),a({code:0,data:r})):(s.logger.error("zn.nab.gac fail "+e.code),l({code:e.code}))}s.logger.info("zn.nab.gac call");var u={id_name:t,config_key:e,token:r,mode_no:(null==(u=s.stateCenter.appInfo)?void 0:u.mode)||o.NET_ACCESS_CONFIG.modeNo};s.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,u,c,c,null,{timeout:i})}))},i.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},t.NetAgentBusinessRequestMgr=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var n=r(3),o=r(0);function i(e,t,r){this.streamManager=e,this.logger=t,this.stateCenter=r,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}i.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(o.StreamType.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},i.prototype.start=function(){var e,t,r,i=this;this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(n.errorCodeList.NET_HB_TIMEOUT)):(e=(new Date).getTime(),t=function(t,r,n){var o=(new Date).getTime()-e;i.logger.debug("zn.nhb.s hb callback "+o),n&&0!==(null==n?void 0:n.code)?i.logger.info("zn.nhb.s fail "+JSON.stringify(n)):(null!=t&&t.ntp_time&&(n=t.ntp_time.toNumber(),t=(new Date).getTime(),n+=Math.round(o/2),i.stateCenter.timeOffset=n-t),i.tryHbCount=0)},r={ts:Date.now()},this.hbStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HB_REQUEST,r,t,t,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){i.start()}),1e3*this.hbInterval))},i.prototype.netHbLogout=function(e){},i.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},t.NetHeartBeatHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var n=r(0),o=r(1),i=r(5);function s(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=o.NET_ACCESS_CONFIG.pcEstablishTimeout}s.prototype.getRequest=function(e,t){return e=new i.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},s.prototype.updateConnectState=function(e,t,r){this.pcStreamRequests.forEach((function(o){e===n.PcConnectState.BROKEN?(o.eventManager.emit("broken"),o.reportEvent("pcBrokenEvent")):e===n.PcConnectState.DISCONNECT&&(o.eventManager.emit("disconnected",t,r),o.reportEvent("pcDisconnectedEvent"))}))},s.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},s.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},t.NetAgentPCRequestMgr=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var n=r(3),o=r(0);function i(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}i.prototype.initLink=function(e){this.link=e},i.prototype.startMaxTime=function(){var e=this;this.logger.info("zn.rlh.sm call"),this.maxTimer||(this.logger.info("zn.rlh.sm start max timer"),this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(o.DestroyType.NONE),e.stopMaxTime(),e.invalid(),e.onactive(!1,n.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},i.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},i.prototype.active=function(e,t,r){var n=this;if(void 0===r&&(r=!1),this.logger.info("zn.rlh.at call "+e+" "+(t=void 0!==t&&t)),this.retryTimer)return this.logger.info("zn.rlh.at has actived, ignore"),!1;var i=this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline;if(i){if(this.logger.info("zn.rlh.at  check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zn.rlh.at network is broken, stop retry"),!1}else this.retryNetCount=0;return this.link.isConnecting()&&!r?(this.logger.info("zn.rlh.at link is connecting, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){n.link.destroySocket(o.DestroyType.BROKEN),n.link.connectSocket(e,(function(){n.logger.info("zn.rlh.at suc"),n.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,n.stopMaxTime(),n.invalid(),n.onactive(!0)}),(function(){n.logger.info("zn.rlh.at fail"),n.maxTimer||n.startMaxTime(),n.active(!0,!1,!0)})),n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=null,i?n.retryNetCount++:n.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},i.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},i.prototype.init=function(e,t,r,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},i.prototype.invalid=function(){this.logger.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},t.NetRetryLinkHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=r(0);t.StateCenter=function(){this.networkState=n.ENUM_NETWORK_STATE.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0}},function(e,t,r){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.log(r)},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.debug(r)},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.info(r)},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.warn(r)},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.error(r)},t.ZegoLogger=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var n=r(0),o=r(25);function i(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}i.prototype.createStream=function(e){return e!==n.StreamType.HTTP&&e===n.StreamType.PC?(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.pcStreams.push(t),t):this.getStream(e,this.httpStreams);var t},i.prototype.getStream=function(e,t){return t=t.find((function(e){return!0===e.isFree})),t?(t.isFree=!1,t.isFirst=!1,t):(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.httpStreams.push(t),t)},i.prototype.onPushEvent=function(e,t,r){var n=this.pcStreams.find((function(t){return t.StreamID===e}));n&&n.onPushEvent(t,r)},i.prototype.getStreamID=function(){return this.streamID++},t.StreamManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var n=r(0);function o(e,t,r){this.type=e,this.streamID=t,this.zegoLink=r,this.isFree=!1,this.isFirst=!0}Object.defineProperty(o.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),o.prototype.refresh=function(e){this.streamID=e},o.prototype.sendMessage=function(e,t,r,o,i,s){var a=this;void 0===r&&(r=null),void 0===o&&(o=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==n.StreamType.PC&&(a.isFree=!0),r&&r(e)}),(function(e,t,r){a.type!==n.StreamType.PC&&(a.isFree=!0),o&&o(e,t,r)}),i=void 0===i?null:i,s=void 0===s?{timeout:5e3,isInSendMap:!0}:s)},o.prototype.onPushEvent=function(e,t){},o.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(n.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},o.prototype.isConnect=function(){return this.zegoLink.isConnect()},t.ZegoLinkStream=o}],a={},n.m=s,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8))},function(e,t,r){var n;e.exports=(n=r(2),function(){var e,t;"function"==typeof ArrayBuffer&&(e=n.lib.WordArray,t=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var r=e.byteLength,n=[],o=0;o<r;o++)n[o>>>2]|=e[o]<<24-o%4*8;t.call(this,n,r)}else t.apply(this,arguments)}).prototype=e)}(),n.lib.WordArray)},function(e,t){},function(e,t,r){var n;e.exports=(e=r(2),n=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=this._map,o=(e.clamp(),[]),i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)o.push(n.charAt(s>>>6*(3-a)&63));var l=n.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,r=this._map;if(!(o=this._reverseMap))for(var o=this._reverseMap=[],i=0;i<r.length;i++)o[r.charCodeAt(i)]=i;var s=r.charAt(64);return s&&-1!==(s=e.indexOf(s))&&(t=s),function(e,t,r){for(var o,i,s=[],a=0,l=0;l<t;l++)l%4&&(o=r[e.charCodeAt(l-1)]<<l%4*2,i=r[e.charCodeAt(l)]>>>6-l%4*2,s[a>>>2]|=(o|i)<<24-a%4*8,a++);return n.create(s,a)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,r){var n,o,i,s;e.exports=(e=r(2),s=(r=e).lib,n=s.WordArray,o=s.Hasher,s=r.algo,i=[],s=s.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=0;c<80;c++){c<16?i[c]=0|e[t+c]:(u=i[c-3]^i[c-8]^i[c-14]^i[c-16],i[c]=u<<1|u>>>31);var u=(n<<5|n>>>27)+l+i[c];u+=c<20?1518500249+(o&s|~o&a):c<40?1859775393+(o^s^a):c<60?(o&s|o&a|s&a)-1894007588:(o^s^a)-899497514,l=a,a=s,s=o<<30|o>>>2,o=n,n=u}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=o._createHelper(s),r.HmacSHA1=o._createHmacHelper(s),e.SHA1)},function(e,t,r){var n;e.exports=(e=r(2),r=e.lib.Base,n=e.enc.Utf8,void(e.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));for(var r=e.blockSize,o=4*r,i=((t=t.sigBytes>o?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone(),e.words),s=t.words,a=0;a<r;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,r){var n,o,i,s,a,l,c,u,d,h,p,f;e.exports=(e=r(2),r(13),void(e.lib.Cipher||(r=e.lib,n=r.Base,o=r.WordArray,i=r.BufferedBlockAlgorithm,(d=e.enc).Utf8,s=d.Base64,a=e.algo.EvpKDF,l=r.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?f:h}return function(t){return{encrypt:function(r,n,o){return e(n).encrypt(t,r,n,o)},decrypt:function(r,n,o){return e(n).decrypt(t,r,n,o)}}}}()}),r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=e.mode={},c=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=d.CBC=function(){var e=c.extend();function t(e,t,r){var n,o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize;t.call(this,e,r,o),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+o)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,i=e.slice(r,r+o);n.decryptBlock(e,r),t.call(this,e,r,o),this._prevBlock=i}}),e}(),p=(e.pad={}).Pkcs7={pad:function(e,t){for(var r=(t*=4)-e.sigBytes%t,n=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(n);t=o.create(i,r),e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:p}),reset:function(){l.reset.call(this);var e,t=(r=this.cfg).iv,r=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(r,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),u=r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,r=(e=s.parse(e)).words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),e.sigBytes-=16),u.create({ciphertext:e,salt:t})}},h=r.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function(e,t,r,n){n=this.cfg.extend(n),t=(o=e.createEncryptor(r,n)).finalize(t);var o=o.cfg;return u.create({ciphertext:t,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),p=(e.kdf={}).OpenSSL={execute:function(e,t,r,n){return n=n||o.random(8),e=a.create({keySize:t+r}).compute(e,n),r=o.create(e.words.slice(t),4*r),e.sigBytes=4*t,u.create({key:e,iv:r,salt:n})}},f=r.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=h.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,h.decrypt.call(this,e,t,r.key,n)}}))))},function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoExpressWebRTMEngine",(function(){return st})),r.d(t,"getReportSeq",(function(){return f})),r.d(t,"getSeq",(function(){return p})),r.d(t,"ZegoLogger",(function(){return d.ZegoLogger})),r.d(t,"ZegoDataReport",(function(){return d.ZegoDataReport})),r.d(t,"ZegoExpressWebRTM",(function(){return We})),r.d(t,"BusinessService",(function(){return C})),r.d(t,"NetConnection",(function(){return k})),r.d(t,"ZReporter",(function(){return ot}));var n,o,i,s,a,l,c,u,d=r(5),h={debug:0,info:1,warn:2,error:3,report:99,disable:100},p=((t=n=n||{})[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN",(t=o=o||{})[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",(t=i=i||{})[t.I=0]="I",t[t.H=10]="H",t[t.M=100]="M",t[t.L=1e3]="L",(t=s=s||{})[t.offline=0]="offline",t[t.online=1]="online",(t=a=a||{})[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN",(t=l=l||{})[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallProgram=2]="ClientType_SmallProgram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc",function(){return c++}),f=(u=c=1,function(){return u++}),g=(Object.defineProperty(m.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),m.prototype.hasNext=function(){return this.next&&this.next.id},m.prototype.hasPrev=function(){return this.prev&&this.prev.id},m);function m(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}_.prototype.insertBefore=function(e,t){return(t=new g(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},_.prototype.addLast=function(e){return this.insertBefore(this.end,e)},_.prototype.add=function(e){return this.addLast(e)},_.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},_.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},_.prototype.size=function(){return this._numNodes},_.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},_.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},_.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},_.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},_.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},_.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},_.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},_.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},_.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},_.prototype.push=function(e){return this.addLast(e)},_.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},_.prototype.pop=function(){return this.removeLast()},_.prototype.shift=function(){return this.removeFirst()};var v=_;function _(){this.start=new g,this.end=new g,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var y,b,E,S,C,T,w="",R=r(15),k=(Object.defineProperty(O.prototype,"clientIP",{get:function(){var e;return(null==(e=this.connection)?void 0:e.clientIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"timeOffset",{get:function(){var e;return null==(e=this.connection)?void 0:e.timeOffset},enumerable:!1,configurable:!0}),O.prototype.init=function(){var e;null!=(e=this.connection)&&e.init()},O.prototype.unInit=function(){var e;null!=(e=this.connection)&&e.unInit()},O.prototype.setAppInfo=function(e){var t;null!=(t=this.connection)&&t.setAppInfo(e)},O.prototype.setUserInfo=function(e){var t;null!=(t=this.connection)&&t.setUserInfo(e)},O.prototype.setNetAgentDefaultServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentDefaultServers(e)},O.prototype.setBackupDomains=function(e){var t;null!=(t=this.connection)&&t.setBackupDomains(e)},O.prototype.setDispatchConnectServers=function(e){var t;null!=(t=this.connection)&&t.setDispatchConnectServers(e)},O.prototype.setNetAgentSpecifiedServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentSpecifiedServers(e)},O.prototype.startHttpRequest=function(e,t,r,n,o){var i;null!=(i=this.connection)&&i.startHttpRequest(e,t,r,n,o)},O.prototype.getAppConfigByAgent=function(e,t,r){var n;return null==(n=this.connection)?void 0:n.getAppConfigByAgent(e,t,r)},O.prototype.getPCRequest=function(e,t){var r;return(null==(r=this.connection)?void 0:r.getPCRequest(e,t))||null},O.prototype.connectUa=function(){var e;null!=(e=this.connection)&&e.connectUa()},O.prototype.destroyConnect=function(){var e;null!=(e=this.connection)&&e.destroyConnect()},O.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},O.prototype.on=function(e,t){var r;return(null==(r=this.connection)?void 0:r.on(e,t))||!0},O.prototype.off=function(e,t){var r;return null==(r=this.connection)?void 0:r.off(e,t)},O.prototype.setLogger=function(e){var t;return null==(t=this.connection)?void 0:t.setLogger(e)},O.prototype.setAccess=function(e){var t;return null==(t=this.connection)?void 0:t.setAccess(e)},O);function O(){this.isLoad=!1,this.callBackList=[],this.connection=new R.ZegoConnectionAgent}(t=y=y||{})[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",(t=b=b||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",(t=E=E||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=S=S||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(t=C=C||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=T=T||{}).Logining="LOGINING",t.Logined="LOGINED",t.LoginFailed="LOGIN_FAILED",t.Reconnecting="RECONNECTING",t.Reconnected="RECONNECTED",t.ReconnectFailed="RECONNECT_FAILED",t.Kickout="KICKOUT",t.Logout="LOGOUT",t.LogoutFailed="LOGOUT_FAILED";var I={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}},P=(A.base64encode=function(e){for(var t,r,n,o=e.length,i=0,s="";i<o;){if(t=255&e.charCodeAt(i++),i==o){s=(s+=A.base64EncodeChars.charAt(t>>2))+A.base64EncodeChars.charAt((3&t)<<4)+"==";break}if(r=e.charCodeAt(i++),i==o){s=(s=(s+=A.base64EncodeChars.charAt(t>>2))+A.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+A.base64EncodeChars.charAt((15&r)<<2)+"=";break}n=e.charCodeAt(i++),s=(s=(s=(s+=A.base64EncodeChars.charAt(t>>2))+A.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+A.base64EncodeChars.charAt((15&r)<<2|(192&n)>>6))+A.base64EncodeChars.charAt(63&n)}return s},A.base64decode=function(e){for(var t,r,n,o,i=e.length,s=0,a="";s<i;){for(;t=A.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==t;);if(-1==t)break;for(;r=A.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==r;);if(-1==r)break;a+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(n=255&e.charCodeAt(s++)))return a}while(n=A.base64DecodeChars[n],s<i&&-1==n);if(-1==n)break;a+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(61==(o=255&e.charCodeAt(s++)))return a}while(o=A.base64DecodeChars[o],s<i&&-1==o);if(-1==o)break;a+=String.fromCharCode((3&n)<<6|o)}return a},A.utf16to8=function(e){for(var t,r="",n=e.length,o=0;o<n;o++)1<=(t=e.charCodeAt(o))&&t<=127?r+=e.charAt(o):r=2047<t?(r=(r+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(r+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return r},A.utf8to16=function(e){for(var t,r,n,o="",i=e.length,s=0;s<i;)switch((t=e.charCodeAt(s++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=e.charAt(s-1);break;case 12:case 13:r=e.charCodeAt(s++),o+=String.fromCharCode((31&t)<<6|63&r);break;case 14:r=e.charCodeAt(s++),n=e.charCodeAt(s++),o+=String.fromCharCode((15&t)<<12|(63&r)<<6|(63&n)<<0)}return o},A.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],A);function A(){}t=r(3);var N=r.n(t),L=(t=r(6),r.n(t)),M=function(){return(M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},x=["00","01","02","03","04","05","06","07","08","09"],D=(B.checkConfigParam=function(e,t,r){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(r.error("ccp.0 server must be string or string array and not empty"),!1):(r.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkPriConfigParam=function(e,t,r,n,o){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof r||"string"!=typeof r.deviceID?(o.error("ccp.0 deviceID must be string and not empty"),!1):1===n||0===n||(o.error("ccp.0 anType must be 0 or 1"),!1):(o.error("ccp.0 dispatchServer must be string and not empty"),!1):(o.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},B.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},B.registerCallback=function(e,t,r){var n;t.success&&(n=t.success,r[e+"SuccessCallback"]=n),t.error&&(n=t.error,r[e+"ErrorCallback"]=n)},B.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},B.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},B.logReportCallback=function(e,t,r,n){B.registerCallback(e,{success:function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];B.dataReportEvent(t,r,e,n,o)}},n)},B.proxyRes=function(e,t,r,n){return{interResolve:function(n){e.uploadReport(t),r(n)},interReject:function(r,o){var i;void 0===o&&(o=""),(i=r.code<2e9&&1e9<r.code?B.decodeServerError(r.code,r.msg):{code:r.code,message:r.msg})&&e.addMsgInfo(t,{error:i.code,message:i.message+o}),e.uploadReport(t),n({errorCode:r.code||r.errorCode})}}},B.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return I.SUCCESS;var r,n=M({},I.ROOM_INNER_ERROR);return n.code=e,n.msg=1e9<e?(r=t[e])?"liveroom cmd error, code: "+e+", message: "+r:t[1e9]+e:t[e]?t[e]+" code:"+e:"unknown error code:"+e,n},B.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},B.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return r.code=1e9<e?e-1e9+52e6:e+2002e6,t&&(r.message=t),r},B.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return t?2e5<e&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR":1e9<e?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},B.getKickoutError=function(e,t){var r={code:e,message:"kickout reason = "+e};if(t)switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 4:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}else switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 3:r.code=63000003,r.message="kickout reason = "+e;break;case 4:r.code=63000004,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}return r},B.dataReportEvent=function(e,t,r,n,o){switch(r){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,o[0]);break;case"addEventMsg":e.addEventMsg(t,n,o[0],o[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,o[0])}},B.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},B.mergeUserList=function(e,t,r,n){e.debug("msl.0 call");var o=[],i=[];r=r||[];for(var s=0;s<r.length;s++){for(var a=!1,l=0;l<t.length;l++)if(r[s].userID===t[l].userID){a=!0;break}a||o.push(r[s])}for(var c=0;c<t.length;c++){a=!1;for(var u=0;u<r.length;u++)if(t[c].userID===r[u].userID){a=!0;break}a||i.push(t[c])}for(t.splice(0),s=0;s<r.length;s++)t.push(t[s]);n(o,i),e.debug("msl.0 call success")},B.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&0<=e:"number"==typeof e&&e%1==0&&0<e},B.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},B.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},B.uuid=function(e,t){var r,n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(r=0;r<e;r++)i[r]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(n=0|16*Math.random(),i[r]=o[19==r?3&n|8:n]);return i.join("")},B.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;n<r;n++){var o=parseInt(e[n]),i=parseInt(t[n]);if(i<o)return 1;if(o<i)return-1}return 0},B.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome;return e=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),t?"IE":r?"Firefox":n?"Opera":o?"Chrome":e?"Safari":"Unkown"},B.isTestEnv=function(e){return!(!e.startsWith("wss")||-1===e.indexOf("test")||!e.endsWith("ws"))},B.getLogLevel=function(e){return h[e]},B.getUint64=function(e,t,r){var n=r.getUint32(e,t);return r=r.getUint32(e+4,t),e=t?n+Math.pow(2,32)*r:Math.pow(2,32)*n+r,Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},B.decodeTokenExpire=function(e){try{var t,r=Uint8Array.from(P.base64decode(e),(function(e){return e.charCodeAt(0)})),n=new DataView(r.buffer);return 0<(t="function"==typeof n.getBigInt64?n.getBigUint64(0):B.getUint64(0,!1,n))?Number(t):Number(n.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},B.bin2hex=function(e){for(var t,r="",n=0,o=(e+="").length;n<o;n++)r+=(t=e.charCodeAt(n).toString(16)).length<2?"0"+t:t;return r},B.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),r=((r=t.getContext("2d")).textBaseline="top",r.font="14px 'Arial'",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.fillText(e,2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));return e=atob(r),this.bin2hex(e.slice(-16,-12))},B.generateUUID=function(e){var t,r;return 0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r||(t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)})),0===e?(e=this.getCanvasFingerprint("hello, zego")+r.slice(8),localStorage.setItem("z_deviceID",e)):wx.setStorageSync("z_deviceID",r),r)},B.getNetType=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()},B.getNetTypeNum=function(){var e;return-1<(e=((null==(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection)?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()).indexOf("4G")?a.NT_4G:-1<e.indexOf("2G")?a.NT_2G:-1<e.indexOf("3G")?a.NT_3G:-1<e.indexOf("WIFI")?a.NT_WIFI:-1<e.indexOf("LINE")?a.NT_LINE:-1<e.indexOf("NONE")?a.NT_NONE:a.NT_UNKNOWN},B.encryptStores=function(e,t){return N.a.encrypt(e,t).toString()},B.decryptStores=function(e,t){try{return N.a.decrypt(e,t).toString(L.a)}catch(e){return""}},B.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(x[e.getMonth()+1]||e.getMonth()+1)+"/",(x[e.getDate()]||e.getDate())+" ",(x[e.getHours()]||e.getHours())+":",(x[e.getMinutes()]||e.getMinutes())+":",x[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},B.isRightServerForAppid=function(e,t){return!(e=((null==e?void 0:e.replace("webliveroom","-"))||"").split("-")||[])[1]||!/\d*/i.test(e[1])||+e[1]==t},B);function B(){}var U,Z={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],ONLINE:!1},j={product:"rtc_web",importLevel:i.H,levels:[0,10,100,1e3],bps:32e3},H="init",F="0c9e6e0f8c0a8f4e",z="z_net_access_servers",G="z_appconfig",q={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],primaryDomains:["zego.im","coolzcloud.com","zegocloud.com"],mode:"online",modeNo:E.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1};function V(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function W(e){return e}function Y(e){return e}function K(e){return e}function $(e){return e}V.prototype.init=function(e,t,r,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},V.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t=V,(we=U=U||{}).RTM_CONSTRUCTOR="zm.0",we.RTM_BIND_WINDOW_LISTENER="zm.wl",we.RTM_SET_LOG_CONFIG="zm.slf",we.RTM_SET_DEBUG_VERBOSE="zm.sdv",we.RTM_LOGIN_ROOM="zm.lg",we.RTM_LOGOUT_ROOM="zm.lo",we.RTM_GET_SETTING_UNIFY="zm.gsu",we.RTM_FETCH_APP_CONFIG="zm.fac",we.RTM_HANDLE_LOG_UPLOAD="zm.hlu",we.RTM_SET_ACCESS="zm.sa",we.RTM_CREATENETAGENT="zm.cna",we.RTM_GETSTOREAPPCONFIG="zm.gsac",we.LIVEROOMMODULES_BINDROOMHANDLER="zm.lrm.brh",we.RTM_SET_CLOUD_SETTING_URLS="zm.scsu",we.RTM_CLOUD_REPORT_NOTIFY="zm.crn",we.RTM_ON="zm.on",we.RTM_OFF="zm.off",we.RTM_RENEWTOKEN="zm.rntk",we.RTM_RESETTOKENTIMER="zm.rstt",we.RTM_ENABLE_MULTI_ROOM="zm.emr",we.RTM_SEND_PB="zm.spb",we.RTM_GET_HEADER="zm.gh",we.ROOM_LOGIN_ROOM="zm.rm.lg",we.ROOM_TRY_LOGIN="zm.rm.tl",we.ROOM_OPEN_HANDLER="zm.rm.op",we.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",we.ROOM_CLOSEHANDLER="zm.rm.clh",we.ROOM_LOGOUT="zm.rm.lo",we.ROOM_RESET_ROOM="zm.rm.rr",we.ROOM_DISCONNECT="zm.rm.dcn",we.ROOM_KICK_OUT="zm.rm.kco",we.ROOM_STATUS_CALLBACK="zm.rm.scb",we.ROOM_RESETTOKEN_TIMER="zm.rm.rst",we.ROOM_HANDLE_Hb_LOGOUT="zm.hhl",we.HEARTBEAT_START="zm.hb.st",we.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",we.HEARTBEAT_RESET="zm.hb.rst",we.SERVICE_START_CHECK="zm.sc.0",we.SERVICE_STOP_CHECK="zm.sc.1",we.SERVICE_PUSH="zm.sv.ps",we.SERVICE_SEND="zm.sv.sd",we.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH="zm.rrh.hlf",we.RETRYROOMHANDLER_HANDLE_ERROR="zm.rrh.he",we.USER_LOGIN_RSP="zm.us.lgr",we.USER_FETCH_USER="zm.us.ftu",we.USER_FETCH_USER_RSP="zm.us.urp",we.USER_USER_PUSH="zm.us.uph",we.USER_MERGE_SEQ="zm.us.mg",we.USER_MERGE_TIMEOUT="zm.us.mto",we.USER_MERGE="zm.us.mg",we.USER_HB_PATCH="zm.us.pt",we.STATE_ACTION="zm.st.at",we.ON_LISTENER="ON_LISTENER",we.LIVEROOMHANDLER_SENDMESSAGE="zm.lrh.sm",we.LIVEROOMHANDLER_HANDLEPUSH="zm.lrh.hp",we.LIVEROOMHANDLER_HANDLESWITCHPUSH="zm.lrh.hsp",we.LIVEROOMHANDLER_PUSHUSERUPDATE="zm.lrh.puu",we.LIVEROOMHANDLER_PUSHKICKOUT="zm.lrh.pk",we.LIVEROOMHANDLER_GETSTREAMLIST="zm.lrh.gs",we.LIVEROOMHANDLER_LOGIN="zm.lrh.lgi",we.LIVEROOMHANDLER_FETCH_USER_LIST="zm.lrh.ful",we.LIVEROOMHANDLER_LOGOUT="zm.lrh.lgo",we.LIVEROOMHANDLER_SENDSTREAMUPDATE="zm.lrh.sru",we.LIVEROOMHANDLER_RENEW_TOKEN="zm.lrh.rt",we.LIVEROOMHANDLER_SENDSIGNALCMD="zm.lrh.ssc",we.LIVEROOMHANDLER_SENDBIGROOMMESSAGE="zm.lrh.sbrm",we.LIVEROOMHANDLER_SENDCUSTOMCOMMAND="zm.lrh.scc",we.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE="zm.lrh.frm",we.LIVEROOMHANDLER_SENDRELIABLEMESSAGE="zm.lrh.srm.0",we.LIVEROOMHANDLER_SENDROOMMSG="zm.lrh.srm.1",we.LIVEROOMHANDLER_HANDLEDISCONNECTED="zm.lrh.hd",we.LIVEROOMHANDLER_HANDLEBROKEN="zm.lrh.hb",we.LIVEROOMHANDLER_HANDLECONNECTED="zm.lrh.hc",we.LIVEROOMHANDLER_RESET="zm.lrh.r.0",we.TRACER_INIT="zm.tc.ii",we.TRACER_LOAD_SCRIPT="zm.tc.ls";var Q={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:I.INPUT_PARAM},system_info:Y,servers:function(e){return e},is_from_cache:$,project:Y,liveroom_version:Y,biz_type:K,lua_md5:Y,sev_env:Y,use_na:K},kZMListener:{event:"listener"},kZMRoomContext:{event:"room_context"},kZMHB:{event:"room_hb"},kZMSetDebug:{event:"/sdk/set_debug",debug:Y},kZMSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:I.INPUT_PARAM},log_level:function(e){return e},remote_log_level:Y,log_url:Y},kZMOnListener:{event:"/sdk/on_listener",listener:Y,error:{INPUT_PARAM:I.INPUT_PARAM}},kZMOffListener:{event:"/sdk/off_listener",listener:Y,error:{INPUT_PARAM:I.INPUT_PARAM}},kZMLoginRoom:{event:"/sdk/login",room_id:Y,room_sid_string:Y,user_state_update:K,max_member_cnt:K,message:Y,token:Y,svr_env:Y,server:Y,try_cnt:K,room_mode:K,role:K,audience_create_room:K,liveroom_sid_string:Y,error:{ROOM_ID_NULL:I.ROOM_ID_NULL,INPUT_PARAM:I.INPUT_PARAM,ROOM_ID_TOO_LONG:I.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:I.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:I.USER_ID_NULL,USER_ID_TOO_LONG:I.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:I.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:I.USER_NAME_NULL,USER_NAME_TOO_LONG:I.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:I.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:I.LOGIN_TIMEOUT,INNER_ERROR:I.ROOM_INNER_ERROR,NETWORK_BROKEN:I.NETWORK_BROKEN}},kZMSubLogin:{event:"/sdk/sublogin",server:Y,room_id:Y,room_sid_string:Y},kZMSwitchLogin:{event:"/zpush/login",sdk_zpush_sessionid_string:Y},kZMLiveRoomEnter:{event:"/liveroom/enter"},kZegoLiveRoomConnect:{event:"/liveroom/connect"},kZMReNewToken:{event:"/sdk/renew_token",error:{INPUT_PARAM:I.INPUT_PARAM,NOT_LOGIN:I.NOT_LOGIN},token:Y},kZMHbTimeout:{event:"/zpush/hb_timeout"},kZMLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:I.INPUT_PARAM,ROOM_NOT_EXIST:I.ROOM_NOT_EXIST},room_id:Y,room_sid_string:Y,is_multi:$,is_send_cmd_net:$,liveroom_sid_string:Y},kZMSwitchLogout:{event:"/switch/logout_user",error:{INPUT_PARAM:I.INPUT_PARAM,ROOM_NOT_EXIST:I.ROOM_NOT_EXIST}},kZMQuitLiveroom:{event:"/liveroom/quit",error:{INPUT_PARAM:I.INPUT_PARAM,ROOM_NOT_EXIST:I.ROOM_NOT_EXIST},is_multi:$,liveroom_sid_string:Y,sdk_zpush_sessionid_string:Y},kZMMultiLogout:{event:"/zpush/multi_logout_user",error:{INPUT_PARAM:I.INPUT_PARAM,ROOM_NOT_EXIST:I.ROOM_NOT_EXIST}},kZMReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:I.ROOM_ID_NULL,ROOM_DISCONNECT:I.NETWORK_BROKEN},server:Y,try_cnt:K},kZMTempBroken:{event:"/liveroom/tempbroken"},kZMReconnect:{event:"/sdk/reconnect",room_broken_time:K},kZMSdkDisconnect:{event:"/sdk/disconnect"},kZMKickout:{event:"/sdk/kickout",user_id:Y,kickout_reason:K,need_relogin:K,error:{}},kZMRoomHB:{event:"/liveroom/hb",room_id:Y,room_sid_string:Y,interval:K,stream_seq:K,server_user_seq:K,error:{NOT_LOGIN:I.NOT_LOGIN,HB_TIMEOUT:I.TIMEOUT}},kZMRoomRecvUserUpdateInfo:{event:"/liveroom/recv_user_update_info",user_list_seq:K,update_user:W,error:{ROOM_NOT_EXIST:I.ROOM_NOT_EXIST}},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"/sdk/enable_multi_room",is_multi:$,error:{kInvalidParamError:I.INPUT_PARAM,kAlreadyLoginError:I.ALREADY_LOGIN}},kZMCloudSettingCache:{event:"/cloud_setting/cache",files:W},kZMCloudSettingRefresh:{event:"/cloud_setting/refresh",request_kv:W,files:W},kZMCloudSettingRequest:{event:"/cloud_setting/request",request_detail:W,files:W},kZMGetCurrentUserList:{event:"/liveroom/get_current_user_list",user_index:K,is_time_ascend:$,use_na:K},kZegoConnConnect:{event:"/zegoconn/connect",connect_id:Y,request_count:K,events:W},kZegoConnDisConnect:{event:"/zegoconn/disconnect",connect_id:Y,url:Y,connect_duration:K},kZegoConnDispatch:{event:"/zegoconn/auto_dispatch",domain_list:function(e){return e}},kZegoRequest:{event:"/zegoconn/request",req_location:W},kZegoSDKConfigInit:{event:"/sdk_config/init",trigger_reason:W,try_count:K},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:K,proxy_link_sources:K,recv_time:K,connect_stream:K},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:K},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:K}};X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(re,J=t),re.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var r=(new Date).getTime(),n=void 0;t&&"number"==typeof t?n=1e3*t:"string"==typeof e&&["03","04"].includes(e.substring(0,2))&&(n=1e3*D.decodeTokenExpire(e.substring(2))-r),n&&this.roomHandler.resetTokenTimer(n-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},re.prototype.initRoom=function(e,t,r,n,o,i,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(r),this.user=n,this.server=o,this.serverBak=i||o,this.config=s},re.prototype.active=function(e){var t=this,r=(void 0===e&&(e=!1),this.logger.info(U.ROOM_LOGIN_ROOM+" retry call "+(null==(r=this.room)?void 0:r.roomID)),(null!=(r=this.loginRoomCallback)&&r.success?Q.kZMSubLogin:Q.kZMReLoginRoom).event);if(this.subLoginSpan||(this.subLoginSpan=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.roomID},{key:r,par:this.roomID},r,!0),this.spanKey=r),this.roomHandler.setRunState(o.trylogin),this.room.isMulti&&(null==(r=this.stateCenter.roomModulesList.find((function(e){return!e.isMulti})))?void 0:r.runState)!==o.login)this.logger.info(U.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.logger.info(U.ROOM_LOGIN_ROOM+" has actived, ignore");else{var n=this.stateCenter.networkState==s.offline;if(n){if(this.logger.info(U.ROOM_LOGIN_ROOM+" check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return void this.logger.warn(U.ROOM_LOGIN_ROOM+" network is broken, stop retry")}else this.retryNetCount=0;this.isOverTime?this.logger.info(U.ROOM_LOGIN_ROOM+" retry over time, stop retry"):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r),this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.stateCenter.networkState=s.online,t.handleLoginFinish(e)}),(function(e,r){t.handleLoginFinish(!1,e,r)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,n?t.retryNetCount++:t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval))}},re.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.logger.info(U.ROOM_LOGIN_ROOM+" start max timer"),this.maxTimer=setTimeout((function(){e.logger.info(U.ROOM_LOGIN_ROOM+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,I.LOGIN_TIMEOUT),e.subLoginSpan&&(e.stateCenter.reporter.spanEnd({key:e.spanKey,par:e.roomID},{error:I.LOGIN_TIMEOUT.code,message:I.LOGIN_TIMEOUT.msg}),e.subLoginSpan=null),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(I.LOGIN_TIMEOUT),e.roomHandler.disconnectedHandle(I.LOGIN_TIMEOUT),e.resetCallBack())}),1e3*this.RETRY_MAX_TIME))},re.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},re.prototype.onactive=function(e,t){},re.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){t=void 0;var r=void 0,n=void 0,i=(this.stateCenter.useNetAgent?(t=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],r=["40001","40100"],n=["201002","30019"]):(t=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],r=["1100040001","1100040100"]),e.code+"");if(this.stateCenter.useNetAgent){if(10015===e.code)return this.room.retryConnect(),!0;if(40001<=e.code&&e.code<=40100||50200<=e.code&&e.code<=50299||null!=n&&n.includes(i))return this.room.resetSessionInfo(),!0}return!t.includes(i)&&(!!r.includes(i)||this.room.lastRunState==o.login&&(this.logger.warn(U.RETRYROOMHANDLER_HANDLE_ERROR+" reset"),this.room.sessionID="0",this.invalid(),!0))}return!0},re.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},re.prototype.loginFail=function(e){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,e),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(e),this.roomHandler.disconnectedHandle(e),this.resetCallBack())},re.prototype.handleLoginFinish=function(e,t,r){this.logger.info(U.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH+" "+e+" "+JSON.stringify(t)),t?(this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{error:t.code,message:t.msg}),this.subLoginSpan=null),this.handleError(t,r)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack()))):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:null==(r=this.room)?void 0:r.roomSessionID}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.resetCallBack()))},re.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},re.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var X,J,ee,te=re;function re(e,t,r){var n=J.call(this,e,t)||this;return n.logger=e,n.stateCenter=t,n.room=r,n.retryNetCount=0,n.retryNetMaxTimes=3,n.spanKey="",n.loginRoomCallback={},n}(we=ee=ee||{}).NOT_EMPTY="NOT_EMPTY",we.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",we.TYPE_STRING="TYPE_STRING",we.TYPE_INTEGER="TYPE_INTEGER",we.TYPE_OBJECT="TYPE_OBJECT",we.MAX_LENGTH_10="MAX_LENGTH_10",we.MAX_LENGTH_64="MAX_LENGTH_64",we.MAX_LENGTH_100="MAX_LENGTH_100",we.MAX_LENGTH_128="MAX_LENGTH_128",we.MAX_LENGTH_256="MAX_LENGTH_256",we.MAX_LENGTH_1024="MAX_LENGTH_1024";var ne={error:{code:0,msg:"suc"}},oe={NOT_EMPTY:function(e,t,r,n,o){return void 0===t||""===t||null===t?(n.error(r+" "+e+" is empty"),o):ne},ILLEGAL_CHARACTERS:function(e,t,r,n,o){return D.checkIllegalCharacters(t)?ne:(n.error(r+" "+e+" contains illegal characters"),o)},TYPE_STRING:function(e,t,r,n,o){return"string"!=typeof t?(n.error(r+" "+e+" must be string"),o):ne},TYPE_INTEGER:function(e,t,r,n,o){return D.checkInteger(t,!1)?ne:(n.error(r+" "+e+"  must be integer number"),o)},TYPE_OBJECT:function(e,t,r,n,o){return t&&"object"==typeof t?ne:(n.error(r+" "+e+"  must be object"),o)},MAX_LENGTH_10:function(e,t,r,n,o){return 10<t.length?(n.error(r+" "+e+" is too long"),o):ne},MAX_LENGTH_64:function(e,t,r,n,o){return 64<t.length?(n.error(r+" "+e+" is too long"),o):ne},MAX_LENGTH_100:function(e,t,r,n,o){return 100<t.length?(n.error(r+" "+e+" is too long"),o):ne},MAX_LENGTH_128:function(e,t,r,n,o){return 128<t.length?(n.error(r+" "+e+" is too long"),o):ne},MAX_LENGTH_256:function(e,t,r,n,o){return 256<t.length?(n.error(r+" "+e+" is too long"),o):ne},MAX_LENGTH_1024:function(e,t,r,n,o){return 1024<t.length?(n.error(r+" "+e+" is too long"),o):ne}};Object.defineProperty(se.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,d.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,d.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,d.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),se.prototype.getRequestId=function(){return this.idName+"-"+p()},se.prototype.actionListener=function(e){for(var t,r=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];["getAnchorInfo","HBResponse","roomOnlineUserCountUpdate","roomLoginResponse"].includes(e)||e.startsWith("_")||!this.listenerList[e]||((t=this.reporter.createSpan(i.H,{key:Q.kZMListener.event},{key:""},Q.kZegoListener.event)).setAttributes({listener:e,listener_params:JSON.stringify(n)}),t.end()),["roomStateChanged","tokenWillExpire"].includes(e)&&this.logger.info("zm.al "+e+" "+JSON.stringify(n)),this.listenerList[e]&&this.listenerList[e].forEach((function(t){try{t.apply(void 0,n)}catch(t){r.logger.error(U.STATE_ACTION+" ",e," ",JSON.stringify(t))}}))},se.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(U.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(U.ON_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(se.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),se.prototype.proxyRes=function(e,t,r){return{interResolve:function(r){t(r),e.end()},interReject:function(t,n){var o;void 0===n&&(n=""),(o=t.code<2e9&&1e9<t.code?D.decodeServerError(t.code,t.msg):{code:t.code,message:t.msg})&&e.setAttributes({error:o.code,message:o.message+n}),e.end(),r({errorCode:t.code})}}};var ie=se;function se(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this.appConfigFetched=!1,this.requestList={},this.mode=E.MODE_ONLINE,this.connectState="connected",this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=s.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=q.modeNo}le.prototype.init=function(e){var t=this,r=e.body.hearbeat_interval<3e3?3e3:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){t.start(r)}),r),this.initCount++},le.prototype.start=function(e){var t,r=this,n=(this.logger.info(U.HEARTBEAT_START+" call"),this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.room.roomID},{key:""},Q.kZMRoomHB.event));this.room.isLogin()?3<++this.tryHeartbeatCount?(this.logger.error(U.HEARTBEAT_START+" come to try limit"),this.stateCenter.reporter.setError(n,Q.kZMRoomHB.error.HB_TIMEOUT),this.hbLogout(I.HEARTBEAT_TIMEOUT),this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.room.roomID},{key:""},Q.kZMHbTimeout.event).end()):((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).heartBeat(t=function(e,t){var o=e.body&&e.body.err_code;e.header&&e.body?0!==o&&(o=D.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message),n.setAttributes({error:o.code,message:o.message+e.body.err_code})):n.setAttributes({error:(0<e.code?e:I.ROOM_INNER_ERROR).code,message:e.msg||I.ROOM_INNER_ERROR}),r.handleHeartbeatRsp(e,t),0===(null==(o=null==e?void 0:e.body)?void 0:o.err_code)&&n.setAttributes({interval:Q.kZMRoomHB.interval(null==(t=null==e?void 0:e.body)?void 0:t.hearbeat_interval),stream_seq:Q.kZMRoomHB.stream_seq(null==(o=null==e?void 0:e.body)?void 0:o.stream_seq),server_user_seq:Q.kZMRoomHB.server_user_seq(null==(t=null==e?void 0:e.body)?void 0:t.server_user_seq)}),n.end()},t,this.room),this.heartbeatInterval=e,t=this.heartbeatInterval,2<=this.initCount?(t=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):t=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){r.start(r.heartbeatInterval)}),t),this.logger.info(U.HEARTBEAT_START+" call success")):(this.logger.error(U.HEARTBEAT_START+" state error"),this.stateCenter.reporter.setError(n,Q.kZMRoomHB.error.NOT_LOGIN))},le.prototype.handleHeartbeatRsp=function(e,t){if(e.body&&e.body.err_code&&0!==e.body.err_code)return this.logger.error(U.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),1000000152==e.body.err_code?void this.hbLogout(I.HEARTBEAT_TIMEOUT):void this.hbLogout(D.getServerError(e.body.err_code));e.header&&e.body?((this.tryHeartbeatCount=0)!==e.body.hearbeat_interval&&(this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<3e3&&(this.heartbeatInterval=3e3)),this.heartbeatRspNotiFy(e),this.logger.info(U.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(U.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)+", seq = "+t),this.hbLogout(e))},le.prototype.heartbeatRspNotiFy=function(e){},le.prototype.hbLogout=function(e){},le.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(U.HEARTBEAT_RESET+" call success")};var ae=le;function le(e,t,r,n,o,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.liveRoomHandler=o,this.room=i,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}ue.prototype.resetTokenTimer=function(e){var t=this;this.logger.info(U.ROOM_RESETTOKEN_TIMER+"  call: "+(e=2147483647<(e=(e-=3e4)<0?0:e)?2147483647:e)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},ue.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},ue.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},ue.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},ue.prototype.reportLogoutSpan=function(e){var t,r=(this.stateCenter.isMultiRoom?Q.kZMQuitLiveroom:Q.kZMSwitchLogout).event;r=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLogoutRoom.event,par:this.room.roomID},{key:""},r),e&&this.stateCenter.useNetAgent&&"0"===this.liveRoomHandler.roomServicer.zPushSid&&(this.liveRoomHandler.roomServicer.zPushSid=null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()),e=this.stateCenter.useNetAgent?e?null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.zPushSid:null==(t=null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.switchSessionID)?void 0:t.toString():void 0,r.setAttributes({room_id:Q.kZMLogoutRoom.room_id(null==(t=this.room)?void 0:t.roomID),room_sid_string:Q.kZMLogoutRoom.room_sid_string(null==(t=this.room)?void 0:t.roomSessionID),liveroom_sid_string:Q.kZMQuitLiveroom.liveroom_sid_string(null==(t=this.room)?void 0:t.sessionID),sdk_zpush_sessionid_string:Q.kZMQuitLiveroom.sdk_zpush_sessionid_string(e)}),r.end()},ue.prototype.resetRoom=function(e){var t,r=this;this.logger.info(U.ROOM_RESET_ROOM+" call"),1<this.stateCenter.roomModulesList.length&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"===this.room.sessionID||this.room.runState===o.logout||this.room.isDisConnect()||(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).logout(this.room,t=function(e){r.handleLogoutRsp(e,!r.room.isMulti)},t),this.reportLogoutSpan(e),this.setRunState(o.logout),this.room.sessionID="0",this.room.roomSessionID="0",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent?null!=(t=this.liveRoomHandler)&&t.reset():this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==r.room})),(e=this.stateCenter.roomModulesList[0])&&(e.isMulti=!1,e.runState!==o.login&&e.roomTryHandler&&(e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())),this.stateCenter.isMultiRoom&&0===this.stateCenter.roomModulesList.length&&(this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLogoutRoom.event,par:this.room.roomID},{key:""},Q.kZMMultiLogout.event).end(),this.liveRoomHandler.roomServicer.zPushSid="0"),this.logger.info(U.ROOM_RESET_ROOM+" call success")},ue.prototype.resetRoomCallBack=function(){},ue.prototype.loginSuccessCallBack=function(e,t){},ue.prototype.handlePushKickout=function(e,t,r){var n,s,a=this;this.logger.info(U.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),r||this.room.sessionID===e.header.session_id||this.room.sessionID===e.body.session_id?(r=D.getKickoutError(e.body.reason||(null==(r=e.body)?void 0:r.kickout_reason),this.stateCenter.useNetAgent),(n=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.room.roomID},{key:""},Q.kZMKickout.event)).setAttributes({error:null==(s=I[r.name||"ROOM_INNER_ERROR"])?void 0:s.code,message:r.message,kickout_reason:Q.kZMKickout.kickout_reason((null==(s=e.body)?void 0:s.reason)||(null==(s=e.body)?void 0:s.kickout_reason)),need_relogin:Q.kZMKickout.need_relogin(null==(s=null==e?void 0:e.body)?void 0:s.need_relogin)}),n.end(),(s=this.room.roomTryHandler)?(s.onactive=function(e,t){a.disconnectedHandle(t),a.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin?(this.room.sessionID="0",s.startMaxTime(),s.active()):(this.setRunState(o.logout),this.resetRoom(t),n={},e&&e.body.custom_reason?n.custom_kickout_message=e.body.custom_reason:r.name&&I[r.name]&&(s=e.body.reason||e.body.kickout_reason,n.custom_kickout_message=I[r.name].msg+"; kickout reason: "+s),r.name&&I[r.name]?this.disconnectedHandle(I[r.name],{extendedData:JSON.stringify(n),isKickout:!0}):this.disconnectedHandle(I.ROOM_INNER_ERROR,{extendedData:JSON.stringify(n),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:I.MANUAL_KICKOUT.code,msg:I.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason}))):this.logger.info(U.ROOM_KICK_OUT+" try handler no found")):this.logger.info(U.ROOM_KICK_OUT+" session id wrong, ignore")},ue.prototype.handleHbLogout=function(e){var t=this,r=this.room.roomTryHandler;r&&(r.onactive=function(e,r){t.disconnectedHandle(r)},[I.HEARTBEAT_TIMEOUT,I.SOCKET_CLOSE].includes(e)||[105,152,2001].includes(null==e?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(r.startMaxTime(),r.active()):[I.TIMEOUT].includes(e)?this.logger.warn(U.ROOM_HANDLE_Hb_LOGOUT+" timeout"):(this.logger.warn(U.ROOM_HANDLE_Hb_LOGOUT+" unexpected error: "+JSON.stringify(e)),r.stopMaxTime(),r.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},ue.prototype.onDisconnect=function(e){var t=this;this.logger.error(U.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code||"number"==typeof e.code&&(e.code<2e9&&1e9<e.code||e.code<1e6?D.decodeServerError(e.code,e.msg):(e.code,e.msg)),D.unregisterCallback(Q.kZMReLoginRoom.event,this.stateCenter.reportList),(e=this.room.roomTryHandler)?(e.onactive=function(e,r){r&&0!==r.code?t.roomStateHandle("DISCONNECTED",T.ReconnectFailed,r):t.roomStateHandle("CONNECTED",T.Reconnected,r)},e.startMaxTime(),e.active()):this.logger.error(U.ROOM_DISCONNECT+" try handler no found")},ue.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",T.Logining,e)},ue.prototype.disconnectedHandle=function(e,t){var r;e&&0!==e.code?(this.stopTokenTimer(),r=null!=t&&t.isKickout?T.Kickout:T.ReconnectFailed,this.roomStateHandle("DISCONNECTED",r,e,(null==t?void 0:t.extendedData)||e.msg)):this.roomStateHandle("CONNECTED",T.Reconnected,e,null==t?void 0:t.extendedData)},ue.prototype.roomStateHandle=function(e,t,r,n,o){if(!t||t!=T.Reconnecting||(this.reconectTimes++,1!=this.reconectTimes)){this.logger.info(U.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(r)),["CONNECTED","DISCONNECTED"].includes(e)&&(this.reconectTimes=0);var s,a,l=0;switch(t=(t=(t=t&&[T.LoginFailed,T.ReconnectFailed].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.fail?T.LoginFailed:T.ReconnectFailed:t)&&[T.Logined,T.Reconnected].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?T.Logined:T.Reconnected:t)&&[T.Logining,T.Reconnecting].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?T.Logining:T.Reconnecting:t){case T.Reconnecting:s=Q.kZMTempBroken,this.tempBrokenTime=(new Date).getTime();break;case T.ReconnectFailed:s=Q.kZMSdkDisconnect;break;case T.Reconnected:s=Q.kZMReconnect,l=(new Date).getTime()-this.tempBrokenTime}this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,r?r.code:0,n,o),o||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,r?r.code:0,n),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,t,r?r.code:0,n)),s&&(a=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.room.roomID},{key:""},s.event),t===T.Reconnected?a.setAttributes({room_broken_time:Q.kZMReconnect.room_broken_time(l)}):a.setAttributes({error:(null==r?void 0:r.code)||0,message:n||""}),a.end()))}},ue.prototype.login=function(e,t,r,n,s,a,l){this.logger.info(U.ROOM_LOGIN_ROOM+" call:"+t+" "+r),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,t,"",n.userID,"",this.stateCenter.sdKVersion),s&&(s.userUpdate&&"boolean"==typeof s.userUpdate&&(this.stateCenter.userStateUpdate=s.userUpdate),s.maxMemberCount&&"number"==typeof s.maxMemberCount&&(this.room.maxMemberCount=s.maxMemberCount)),this.stateCenter.configOK?(this.room.runState!==o.trylogin&&this.setRunState(o.trylogin),this.room.roomID=t,this.room.token=r,this.room.thirdToken=r,this.stateCenter.idName=n.userID,this.stateCenter.nickName=n.userName||n.userID,this.loginCallback.success=a,this.loginCallback.fail=l,this.server=e,this.stateCenter.reporter.spanSetAttributes({key:Q.kZMSubLogin.event,bak_key:Q.kZMReLoginRoom.event,par:t},{server:this.stateCenter.useNetAgent?void 0:Q.kZMSubLogin.server(this.server)}),this.liveRoomLoginKey=this.room.isMulti?Q.kZMLiveRoomEnter:Q.kZMSwitchLogin,this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMSubLogin.event,bak_key:Q.kZMReLoginRoom.event,par:this.room.roomID},{key:this.liveRoomLoginKey.event,par:this.room.roomID},this.liveRoomLoginKey.event,!0),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(U.ROOM_LOGIN_ROOM+" call success")):(this.logger.error(U.ROOM_LOGIN_ROOM+" init sdk wrong"),l(I.INIT))},ue.prototype.tryLogin=function(e){var t,r=this;if(this.room.runState!==o.trylogin)this.logger.error("zb.rh.tl state error");else if((0!==this.stateCenter.reportSeqList.login?Q.kZMLoginRoom:Q.kZMReLoginRoom).event,this.stateCenter.useNetAgent)this.room.isMulti&&this.room.isDisConnect()?this.logger.warn(U.ROOM_TRY_LOGIN+" liveroom is not connected"):(i=function(e,t){r.handleLoginRsp(e,t)},null!=(t=this.liveRoomHandler)&&t.isUaConnect()?(this.stateCenter.reporter.spanSetAttributes({key:this.liveRoomLoginKey.event,par:null==(t=this.room)?void 0:t.roomID},{sdk_zpush_sessionid_string:null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()}),this.liveRoomHandler.login(this.room,i,i)):(this.tryLoginTimer=setTimeout((function(){r.logger.info(U.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(Q.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.warn(U.ROOM_TRY_LOGIN+" ua is not connected")));else{if(this.service.isDisConnect())try{if(this.service.closeSocket(),this.logger.debug(U.ROOM_TRY_LOGIN+" new websocket"),!this.stateCenter.useNetAgent&&!D.isRightServerForAppid(e,this.stateCenter.appid))throw this.logger.error(U.ROOM_TRY_LOGIN+" the server does not match the appID"),new Error("The server does not match the appID");this.service.createSocket(e);var n=Date.now();this.service.openHandler((function(){var e;r.stateCenter.reporter.spanSetAttributes({key:r.liveRoomLoginKey.event,par:null==(e=r.room)?void 0:e.roomID},{connect_consume:Date.now()-n}),r.openHandler()})),this.service.closeHandler((function(e){r.logger.error(U.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)})),this.service.errorHandler((function(e){r.logger.error(U.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)}))}catch(e){this.logger.error(U.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(U.ROOM_TRY_LOGIN+" use current websocket and sent login");var i=function(e,t){r.handleLoginRsp(e,t)};this.service.login(this.room,i,i)}this.tryLoginTimer=setTimeout((function(){r.logger.info(U.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(Q.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(U.ROOM_TRY_LOGIN+" call success")}},ue.prototype.openHandler=function(){function e(e,r){t.handleLoginRsp(e,r)}var t=this;this.logger.info(U.ROOM_OPEN_HANDLER+" websocket.onpen call"),this.service.onPush(),this.service.login(this.room,e,e)},ue.prototype.handleLoginRsp=function(e,t){this.logger.info(U.ROOM_HANDLE_LOGINRSP+" seq: "+t+" "+JSON.stringify(e)),(0!==this.stateCenter.reportSeqList.login?Q.kZMLoginRoom:Q.kZMReLoginRoom).event,this.room.runState!==o.trylogin?this.logger.error(U.ROOM_HANDLE_LOGINRSP+" state error"):e.header&&e.body?e.header.seq!==t&&0==this.room.isMulti?this.logger.error(U.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq):0!==e.body.err_code?(this.logger.error(U.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(U.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e)):(this.logger.error(U.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e))},ue.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=Q.kZMLoginRoom.error.INNER_ERROR;e.header&&e.body?t=D.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{error:t.code,message:t.msg}),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},ue.prototype.handleLoginSuccess=function(e){var t,r,n={},i=(this.room.roomSessionID!==e.body.room_session_id&&(this.room.loginTime=Date.now()),this.room.lastRunState),s=(this.setRunState(o.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id,(s={})[this.room.roomID]={room_sid_string:this.room.roomSessionID},this.stateCenter.reporter.setPublicPros(s),this.room.lvKey=e.body.lv_key,null==(s=null==e?void 0:e.body)?void 0:s.token_remain_time);this.stateCenter.configRoomAuth=0<s,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(r=(t=(new Date).getTime())-e.body.ret_timestamp,this.stateCenter.local_time_deviation=r<5e3?0:r,r=0<s?1e3*s:1e3*D.decodeTokenExpire(this.room.token.substring(2))-t,this.resetTokenTimer(r-this.stateCenter.local_time_deviation)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent||(e.body.config_info&&(s=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level,this.logger.setRemoteLogLevel(s),n.log_level=s,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),n.log_url=e.body.config_info.log_url)),e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,n.test_environment="true",this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{server:this.stateCenter.useNetAgent?void 0:Q.kZMSubLogin.server(this.server),room_id:null==(r=this.room)?void 0:r.roomID,room_sid_string:null==(s=this.room)?void 0:s.roomSessionID,zpush_sessionid_string:this.stateCenter.useNetAgent&&null!=(n=null==(t=null==e?void 0:e.header)?void 0:t.session_id)?n.toString():void 0,liveroom_sid_string:null==(r=null==e?void 0:e.body)?void 0:r.session_id}),this.resetTryLogin(),this.loginSuccessCallBack(i,e),this.roomStateHandle("CONNECTED",T.Logined,{code:0,msg:""}),this.loginCallback.success&&this.loginCallback.success(!0)},ue.prototype.closeHandler=function(e){this.logger.error(U.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code||e)),this.room.runState!==o.logout?this.room.runState===o.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?Q.kZMLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===o.login&&(this.logger.info(U.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(Q.kZMLoginRoom.error.NETWORK_BROKEN)):this.logger.info(U.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},ue.prototype.logout=function(e,t){this.logger.info(U.ROOM_LOGOUT+" call"),this.room.runState===o.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",T.Logout,{code:0,msg:""},void 0,t),this.stopTokenTimer(),this.logger.info(U.ROOM_LOGOUT+" call success"))},ue.prototype.handleLogoutRsp=function(e,t){this.logger.info(U.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1"),this.stateCenter.useNetAgent&&t&&null!=(e=this.liveRoomHandler)&&e.closeRequest()};var ce=ue;function ue(e,t,r,n,o,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.room=o,this.liveRoomHandler=i,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.server="",this.tempBrokenTime=0,this.reconectTimes=0,this.loginCallback={}}var de=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},he=(pe.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(U.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},pe.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(U.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},pe.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},pe.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(U.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(U.USER_FETCH_USER+" the first time call"))},pe.prototype.fetchUserListWithPage=function(e,t){function r(e){n.handleFetchUserListRsp(e,t)}var n=this,o={user_index:e,sort_type:0},s=Q.kZMGetCurrentUserList;this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:this.room.roomID},{key:s.event,par:this.room.roomID},s.event,!0).setAttribute("user_index",s.user_index(e)),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchUserList(o,r,r,this.room)},pe.prototype.handleFetchUserListRsp=function(e,t){var r=this;if(this.stateCenter.reporter.spanEnd({key:Q.kZMGetCurrentUserList.event,par:this.room.roomID},{error:(null==(n=null==e?void 0:e.body)?void 0:n.err_code)||(null==e?void 0:e.code),message:(null==(n=null==e?void 0:e.body)?void 0:n.err_message)||(null==e?void 0:e.msg)}),e.body&&0!=e.body.err_code)this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(U.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);else if(e.header&&e.body){if(this.stateCenter.userStateUpdate){this.userTempList=de(de([],this.userTempList),e.body.user_baseinfos);var n=e.body.ret_user_index;if(n!=e.body.server_user_index)this.logger.info(U.USER_FETCH_USER_RSP+" fetch another page"),this.fetchUserListWithPage(n+1,t);else{this.userSeq=e.body.server_user_seq;for(var i=[],s=[],a=0;a<this.userTempList.length;a++){var l={userID:this.userTempList[a].id_name,userName:this.userTempList[a].nick_name,role:this.userTempList[a].role};i.push(l),s.push({idName:this.userTempList[a].id_name,nickName:this.userTempList[a].nick_name,role:this.userTempList[a].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,s),t==o.login?(this.userList&&D.mergeUserList(this.logger,this.userList,i,(function(e,t){0!==e.length&&r.onUserStateUpdate(r.room.roomID,"ADD",e),0!==t.length&&r.onUserStateUpdate(r.room.roomID,"DELETE",t)})),this.userList=i):0!==(this.userList=i).length&&this.onUserStateUpdate(this.room.roomID,"ADD",i),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(U.USER_FETCH_USER_RSP+" call success user_list "+i+" count "+i.length)}}}else this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(U.USER_FETCH_USER_RSP+" fetch error "+e)},pe.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(U.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq===e.body.user_list_seq)this.logger.warn(U.USER_USER_PUSH+" user_list_seq is the same with local seq");else if(this.userSeq+e.body.user_actions.length!==e.body.user_list_seq)this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else{this.userSeq=e.body.user_list_seq;for(var t=[],r=0;r<e.body.user_actions.length;r++){var n={action:e.body.user_actions[r].Action,idName:e.body.user_actions[r].IdName,nickName:e.body.user_actions[r].NickName,role:e.body.user_actions[r].Role,loginTime:e.body.user_actions[r].LoginTime};t.push(n)}this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,t);var o=[],i=[];t.forEach((function(e){1==e.action?o.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&i.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(o).filter((function(e){return!i.some((function(t){return t.userID==e.userID}))}))),0!==o.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",o),0!==i.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",i),this.logger.info(U.USER_USER_PUSH+" call success")}else this.logger.info(U.USER_USER_PUSH+" userStateUpdate is false")},pe.prototype.onUserStateUpdate=function(e,t,r){var n=this;r=r.filter((function(e){return e.userID!==n.stateCenter.idName})),0!=r.length&&(r=r.map((function(e){return{userID:e.userID,userName:e.userName}})),this.stateCenter.actionListener("roomUserUpdate",e,t,r))},pe.prototype.mergeUserByUserSeq=function(e,t){var r=this;this.userSeqMergeMap||(this.logger.warn(U.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){r.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(U.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},pe.prototype.mergeUser=function(e){var t=this,r=(this.logger.info(U.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),n=((e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){r[e.IdName]=e}))})),this.userSeqMergeMap=null,e=Object.values(r).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}}))).sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)})),[]),o=[];e.forEach((function(e){1==e.action?n.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(n).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))})),0!==n.length&&this.onUserStateUpdate(this.room.roomID,"ADD",n),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",o),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,e)},pe.prototype.handleMergeTimeout=function(){var e,t=this,r=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));r[r.length-1]-r[0]+1===r.length||r[r.length-1]>=this.minUserSeq?this.mergeUser(r):(this.userSeqMergeMap=null,e=this.lastUserQueryTime-Date.now(),this.logger.info(U.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+r.join(",")+" wait "+e),0<e?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){t.fetchUserList()}),e)):this.fetchUserList())},pe.prototype.loginPrivateRsp=function(e){this.logger.info(U.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},pe);function pe(e,t,r,n,o,i){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.liveRoomHandler=o,this.room=i,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}ge.prototype.initMessageHandler=function(){},ge.prototype.initLiveHandler=function(){},ge.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},ge.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t)}},ge.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,r){e.logger.info(U.LIVEROOMMODULES_BINDROOMHANDLER+" login suc "+t),e.heartBeatHandler.init(r),e.stateCenter.useNetAgent?e.liveRoomHandler.startCheck():(e.service.stopCheck(),e.service.startCheck()),e.userHandler.loginRsp(r,t),e.messageHandler&&e.messageHandler.loginRsp(r),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(r)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.stateCenter.useNetAgent&&e.liveRoomHandler&&e.liveRoomHandler.stopCheck(),e.userHandler.resetUserHandler(),e.service.stopCheck(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},ge.prototype.bindUserHandler=function(){},ge.prototype.bindMessageHandler=function(){},ge.prototype.bindLiveHandler=function(){},ge.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},ge.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},ge.prototype.handleMultiRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.runState!==o.login&&t.roomTryHandler&&1==t.isMulti&&(t.roomTryHandler.onactive=function(r,n){var o;n&&0!==n.code?(0!==n.code&&(o=D.getLiveRoomError(n.code,e.stateCenter.useNetAgent))&&I[o]&&(n=I[o]),t.roomHandler.roomStateHandle("DISCONNECTED",T.ReconnectFailed,n,n.msg)):t.roomHandler.roomStateHandle("CONNECTED",T.Reconnected,n)},t.roomTryHandler.startMaxTime(),t.roomTryHandler.active())}))},ge.prototype.isLogin=function(){return this.runState===o.login},ge.prototype.isLogout=function(){return this.runState===o.logout},ge.prototype.isTryLogin=function(){return this.runState===o.trylogin},ge.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},ge.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.stateCenter.useNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},ge.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.sessionID="0",this.roomSessionID="0",this.roomTryHandler.active(!0))},ge.prototype.resetSessionInfo=function(){var e;this.logger.info("zm.lrm.rsi call"),this.sessionID="0",this.roomSessionID="0",null!=(e=this.liveRoomHandler)&&e.reset()};var fe=ge;function ge(e,t,r,n,i,s,a){this.roomID=e,this.stateCenter=t,this.logger=r,this.dataReport=n,this.service=i,this.rtm=s,this.liveRoomHandler=a,this.runState=o.logout,this.lastRunState=o.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.maxMemberCount=0,this.lvKey="",this.roomName="",this.roomHandler=new ce(this.logger,this.stateCenter,this.dataReport,this.service,this,a),this.heartBeatHandler=new ae(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.userHandler=new he(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}ve.prototype.createSocket=function(e){this.socket=Object(d.createZegoWebSocket)(e,this.ENV%2)},ve.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},ve.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},ve.prototype.sendMessage=function(e,t,r,n,o){return void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o={timeOut:6e3}),o={data:t={header:e,body:t},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:o.timeOut,success:r,error:n},r=this.sendCommandList.push(o),this.sendCommandMap[o.seq]=r,this.socket&&this.socket.send(JSON.stringify(t)),e.seq},ve.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},ve.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)!function(){var r,n,o;e.remove(t),t&&t._data&&(r=t._data.error,n=t._data.seq,o=t._data.data.body.custom_msg,setTimeout((function(){r&&r(I.TIMEOUT,n,o)}),0)),t=e.getFirst()}()},ve.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),n=Date.parse(new Date+""),o=0,i=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeOut>n?"break":(r._data&&delete t[r._data.data.header.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+i.sendDataDropTimeout<n||r&&r._data&&(s=r._data.error,a=r._data.seq,l=r._data.data.body.custom_msg,setTimeout((function(){s&&s(I.TIMEOUT,a,l)}),0)),++o>=i.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var s,a,l}(););},ve.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},ve.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},ve.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},ve.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},ve.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},ve.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},ve.prototype.onMessage=function(e){};var me=ve;function ve(e){this.socket=null,this.sendCommandList=new v,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}var _e=function(){return(_e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ye=(be.prototype.checkResponse=function(e){return 0!=this.stateCenter.roomModulesList.filter((function(e){return e.runState!==o.logout})).length&&(e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid)},be.prototype.handleSendCommandMsgRsp=function(e){var t,r=this,n=this.service.sendCommandMap[e.header.seq];null!=n&&(t=n._data,delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(n),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,r.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,r.cmdSeq)}),0))},be.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error(U.SERVICE_PUSH+" cmd="+t.header.cmd+", err_code="+t.body.err_code+", err_message="+t.body.err_message+" "):e.logger.info(U.SERVICE_PUSH+" cmd="+t.header.cmd+", msg="+JSON.stringify(t)+" "),-1<["login","logout"].indexOf(t.header.cmd)?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(U.SERVICE_PUSH+"  check session fail."):(e.logger.info(U.SERVICE_PUSH+" cmd="+t.header.cmd+",function="+!!e.responseRouters[t.header.cmd]),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error(U.SERVICE_PUSH+" msg type error ")}},be.prototype.handlePushKickout=function(e){var t,r;void 0===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)||1===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)?function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([],this.stateCenter.roomModulesList).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)})):(t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,(r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t})))?r.roomHandler.handlePushKickout(e):this.logger.error(U.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null==(r=e.header)?void 0:r.room_id)))},be.prototype.handlePushCustomMsg=function(e){},be.prototype.handlePushRoomMsg=function(e){},be.prototype.handlePushUserStateUpdateMsg=function(e){var t,r=null==(n=null==e?void 0:e.header)?void 0:n.room_id,n=this.stateCenter.roomModulesList.find((function(e){return e.roomID==r})),o=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:r},{key:""},Q.kZMRoomRecvUserUpdateInfo.event);n?(o.setAttributes({user_list_seq:null==(t=null==e?void 0:e.body)?void 0:t.user_list_seq,update_user:null==(t=null==e?void 0:e.body)?void 0:t.user_actions}),o.end(),n.userHandler.handlePushUserStateUpdateMsg(e)):(this.logger.error(U.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e)),this.stateCenter.reporter.setError(o,Q.kZMRoomRecvUserUpdateInfo.error.ROOM_NOT_EXIST))},be.prototype.handlePushMergeMsg=function(e){},be.prototype.handlePushTransMsg=function(e){},be.prototype.handleBigImMsgRsp=function(e){},be.prototype.handlePushSignalMsg=function(e){},be.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},be.prototype.closeHandler=function(e){this.service.closeHandler(e)},be.prototype.openHandler=function(e){this.service.openHandler(e)},be.prototype.errorHandler=function(e){this.service.errorHandler(e)},be.prototype.getHeader=function(e,t,r,n){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:r||"",room_session_id:n||"",biz_version:this.stateCenter.bizVersion||""}},be.prototype.startCheck=function(){this.logger.info(U.SERVICE_START_CHECK+" start"),this.service.startCheck()},be.prototype.stopCheck=function(){this.logger.info(U.SERVICE_STOP_CHECK+" stop"),this.service.stopCheck()},be.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},be.prototype.createSocket=function(e){var t=this;this.stateCenter.roomServer=e,this.service.createSocket(e),this.responseRouters=_e(_e({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},be.prototype.closeSocket=function(){this.service.closeSocket()},be.prototype.sendMessage=function(e,t,r,n,o,i){var s,a;return this.service.isDisConnect()?(this.logger.error(U.SERVICE_SEND+" socket is disconnect"),n(I.SOCKET_CLOSE),0):(s=null!=i&&i.roomID?i.roomID:null==(s=this.stateCenter.roomModulesList[0])?void 0:s.roomID,a=null!=i&&i.roomSessionID?i.roomSessionID:null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomSessionID,i=null!=i&&i.sessionID?i.sessionID:null==(i=this.stateCenter.roomModulesList[0])?void 0:i.sessionID,o=o||this.getHeader(e,i,s,a),this.logger.info(U.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:o,body:t})),this.service.sendMessage(o,t,r,n))},be.prototype.on=function(e,t){this.responseRouters[e]=t},be.prototype.login=function(e,t,r){var n=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID);return e={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?l.ClientType_Webrtc:l.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat},this.sendMessage("",e,t,r,n)},be.prototype.logout=function(e,t,r){var n=e.isMulti?"quit":"logout",o={reserve:0};return"logout"==n&&(o.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(n,o,t,r,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},be.prototype.heartBeat=function(e,t,r){return this.sendMessage("hb",{reserve:0},e,t,void 0,r)},be.prototype.fetchUserList=function(e,t,r,n){return this.sendMessage("user_list",e,t,r,void 0,n)},be.prototype.fetchUserListV2=function(e,t,r,n){return this.sendMessage("user_list_v2",e,t,r,void 0,n)},be.prototype.fetchReliableMessage=function(e,t,r,n){return this.sendMessage("trans_fetch",e,t,r,void 0,n)},be.prototype.sendReliableMessage=function(e,t,r,n){return this.sendMessage("trans",e,t,r,void 0,n)},be.prototype.sendRoomMsg=function(e,t,r,n){return this.sendMessage("im_chat",e,t,r,void 0,n)},be.prototype.sendCustomCommand=function(e,t,r,n){return this.sendMessage("custommsg",e,t,r,void 0,n)},be.prototype.sendBigRoomMessage=function(e,t,r,n){return this.sendMessage("bigim_chat",e,t,r,void 0,n)},be.prototype.sendRelayMessage=function(e,t,r,n){return this.sendMessage("relay",e,t,r,void 0,n)},be.prototype.sendSignalCmd=function(e,t,r,n){return this.sendMessage("signal",e,t,r,void 0,n)},be.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==s.offline?(this.logger.error(U.RTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},be);function be(e,t,r){this.stateCenter=e,this.logger=t,this.rtm=r,this.service=new me(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}Se.prototype.setSetting=function(e,t){var r,n,o=Array.isArray(t)&&0<t.length;for(r in e)if("number"==typeof e[r].ctrlmode&&[1,2].includes(e[r].ctrlmode))this.setting[r]=e[r],this.setting[r+"_ctrlmode"]=e[r].ctrlmode;else for(var i in e[r])i.endsWith("_ctrlmode")||o&&-1==t.indexOf(i)||(1===(n=e[r][i+"_ctrlmode"])||2===n?this.setting[i]=e[r][i]:this.defaultSetting[i]&&(this.setting[i]=this.defaultSetting[i]),"number"==typeof n&&(this.setting[i+"_ctrlmode"]=e[r][i+"_ctrlmode"]))},Se.prototype.getSetting=function(e,t){return(t=void 0!==t&&t)&&2!=this.setting[e+"_ctrlmode"]?void 0:this.setting[e]};var Ee=Se;function Se(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}var Ce=r(0),Te=r.n(Ce),we=(t=r(7),r(8)),Re=r.n(we),ke=(we=r(10),r.n(we)),Oe=(we=r(16),r.n(we)),Ie=(we=r(4),r.n(we)),Pe={d:(e,t)=>{for(var r in t)Pe.o(t,r)&&!Pe.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Ae=(((e,t,r)=>{function n(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function o(e,t){return e&t}function i(e,t){return e|t}function s(e,t){return e^t}function a(e,t){return e&~t}r.d(t,{default:()=>ie});var l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(e){for(var t,r="",n=0;n+3<=e.length;n+=3)t=parseInt(e.substring(n,n+3),16),r+=c.charAt(t>>6)+c.charAt(63&t);for(n+1==e.length?(t=parseInt(e.substring(n,n+1),16),r+=c.charAt(t<<2)):n+2==e.length&&(t=parseInt(e.substring(n,n+2),16),r+=c.charAt(t>>2)+c.charAt((3&t)<<4));0<(3&r.length);)r+="=";return r}function d(e){for(var t="",r=0,o=0,i=0;i<e.length&&"="!=e.charAt(i);++i){var s=c.indexOf(e.charAt(i));s<0||(r=0==r?(t+=n(s>>2),o=3&s,1):1==r?(t+=n(o<<2|s>>4),o=15&s,2):2==r?(t=(t+=n(o))+n(s>>2),o=3&s,3):(t=(t+=n(o<<2|s>>4))+n(15&s),0))}return 1==r&&(t+=n(o<<2)),t}var h,p={decode:function(e){if(void 0===h){var t="= \f\n\r\t\u2028\u2029";for(h=Object.create(null),i=0;i<64;++i)h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(h["-"]=62,h._=63,i=0;i<9;++i)h[t.charAt(i)]=-1}for(var r=[],n=0,o=0,i=0;i<e.length;++i){var s=e.charAt(i);if("="==s)break;if(-1!=(s=h[s])){if(void 0===s)throw new Error("Illegal character at offset "+i);n|=s,4<=++o?(r[r.length]=n>>16,r[r.length]=n>>8&255,r[r.length]=255&n,o=n=0):n<<=6}}switch(o){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=n>>10;break;case 3:r[r.length]=n>>16,r[r.length]=n>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=p.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return p.decode(e)}},f=(v.prototype.mulAdd=function(e,t){for(var r,n=this.buf,o=n.length,i=0;i<o;++i)(r=n[i]*e+t)<1e13?t=0:r-=1e13*(t=0|r/1e13),n[i]=r;0<t&&(n[i]=t)},v.prototype.sub=function(e){for(var t,r=this.buf,n=r.length,o=0;o<n;++o)e=(t=r[o]-e)<0?(t+=1e13,1):0,r[o]=t;for(;0===r[r.length-1];)r.pop()},v.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,r=t[t.length-1].toString(),n=t.length-2;0<=n;--n)r+=(1e13+t[n]).toString().substring(1);return r},v.prototype.valueOf=function(){for(var e=this.buf,t=0,r=e.length-1;0<=r;--r)t=1e13*t+e[r];return t},v.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},v),g=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,m=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function v(e){this.buf=[+e||0]}function _(e,t){return e.length>t?e.substring(0,t)+"":e}D.prototype.get=function(e){if((e=void 0===e?this.pos++:e)>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},D.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},D.prototype.hexDump=function(e,t,r){for(var n="",o=e;o<t;++o)if(n+=this.hexByte(this.get(o)),!0!==r)switch(15&o){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},D.prototype.isASCII=function(e,t){for(var r=e;r<t;++r){var n=this.get(r);if(n<32||176<n)return!1}return!0},D.prototype.parseStringISO=function(e,t){for(var r="",n=e;n<t;++n)r+=String.fromCharCode(this.get(n));return r},D.prototype.parseStringUTF=function(e,t){for(var r="",n=e;n<t;){var o=this.get(n++);r+=o<128?String.fromCharCode(o):191<o&&o<224?String.fromCharCode((31&o)<<6|63&this.get(n++)):String.fromCharCode((15&o)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},D.prototype.parseStringBMP=function(e,t){for(var r,n,o="",i=e;i<t;)r=this.get(i++),n=this.get(i++),o+=String.fromCharCode(r<<8|n);return o},D.prototype.parseTime=function(e,t,r){return e=this.parseStringISO(e,t),(t=(r?g:m).exec(e))?(r&&(t[1]=+t[1],t[1]+=+t[1]<70?2e3:1900),e=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4],t[5]&&(e+=":"+t[5],t[6]&&(e+=":"+t[6],t[7]&&(e+="."+t[7]))),t[8]&&(e+=" UTC","Z"!=t[8]&&(e+=t[8],t[9]&&(e+=":"+t[9]))),e):"Unrecognized time: "+e},D.prototype.parseInteger=function(e,t){for(var r,n=this.get(e),o=127<n,i=o?255:0,s="";n==i&&++e<t;)n=this.get(e);if(0==(r=t-e))return o?-1:0;if(4<r){for(s=n,r<<=3;0==(128&(+s^i));)s=+s<<1,--r;s="("+r+" bit)\n"}o&&(n-=256);for(var a=new f(n),l=e+1;l<t;++l)a.mulAdd(256,this.get(l));return s+a.toString()},D.prototype.parseBitString=function(e,t,r){for(var n=this.get(e),o="("+((t-e-1<<3)-n)+" bit)\n",i="",s=e+1;s<t;++s){for(var a=this.get(s),l=s==t-1?n:0,c=7;l<=c;--c)i+=a>>c&1?"1":"0";if(i.length>r)return o+_(i,r)}return o+i},D.prototype.parseOctetString=function(e,t,r){if(this.isASCII(e,t))return _(this.parseStringISO(e,t),r);var n=t-e,o="("+n+" byte)\n";n>(r/=2)&&(t=e+r);for(var i=e;i<t;++i)o+=this.hexByte(this.get(i));return r<n&&(o+=""),o},D.prototype.parseOID=function(e,t,r){for(var n="",o=new f,i=0,s=e;s<t;++s){var a=this.get(s);if(o.mulAdd(128,127&a),i+=7,!(128&a)){if(""===n?n=(o=o.simplify())instanceof f?(o.sub(80),"2."+o.toString()):(a=o<80?o<40?0:1:2)+"."+(o-40*a):n+="."+o.toString(),n.length>r)return _(n,r);o=new f,i=0}}return 0<i&&(n+=".incomplete"),n};var y=D,b=(x.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},x.prototype.content=function(e){if(void 0!==this.tag){void 0===e&&(e=1/0);var t=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+r,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);case 6:return this.stream.parseOID(t,t+r,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return _(this.stream.parseStringUTF(t,t+r),e);case 18:case 19:case 20:case 21:case 22:case 26:return _(this.stream.parseStringISO(t,t+r),e);case 30:return _(this.stream.parseStringBMP(t,t+r),e);case 23:case 24:return this.stream.parseTime(t,t+r,23==this.tag.tagNumber)}}return null},x.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},x.prototype.toPrettyString=function(e){var t=(e=void 0===e?"":e)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var r=0,n=this.sub.length;r<n;++r)t+=this.sub[r].toPrettyString(e)}return t},x.prototype.posStart=function(){return this.stream.pos},x.prototype.posContent=function(){return this.stream.pos+this.header},x.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},x.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},x.decodeLength=function(e){var t=127&(r=e.get());if(t==r)return t;if(6<t)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0==t)return null;for(var r=0,n=0;n<t;++n)r=256*r+e.get();return r},x.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r)},x.decode=function(e){function t(){var e=[];if(null!==o){for(var t=i+o;r.pos<t;)e[e.length]=x.decode(r);if(r.pos!=t)throw new Error("Content size is not correct for container starting at offset "+i)}else try{for(;;){var n=x.decode(r);if(n.tag.isEOC())break;e[e.length]=n}o=i-r.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return e}var r=e instanceof y?e:new y(e,0),n=(e=new y(r),new E(r)),o=x.decodeLength(r),i=r.pos,s=i-e.pos,a=null;if(n.tagConstructed)a=t();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=t();for(var l=0;l<a.length;++l)if(a[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){a=null}if(null===a){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+i);r.pos=i+Math.abs(o)}return new x(e,s,o,n,a)},x),E=(M.prototype.isUniversal=function(){return 0===this.tagClass},M.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},M),S=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/S[S.length-1],T=(L.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,o=(1<<t)-1,i=!1,s="",a=this.t,l=this.DB-a*this.DB%t;if(0<a--)for(l<this.DB&&0<(r=this[a]>>l)&&(i=!0,s=n(r));0<=a;)l<t?(r=(this[a]&(1<<l)-1)<<t-l,r|=this[--a]>>(l+=this.DB-t)):(r=this[a]>>(l-=t)&o,l<=0&&(l+=this.DB,--a)),(i=0<r||i)&&(s+=n(r));return i?s:"0"},L.prototype.negate=function(){var e=B();return L.ZERO.subTo(this,e),e},L.prototype.abs=function(){return this.s<0?this.negate():this},L.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this[r]-e[r]))return t;return 0},L.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+G(this[this.t-1]^this.s&this.DM)},L.prototype.mod=function(e){var t=B();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(L.ZERO)&&e.subTo(t,t),t},L.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?R:k)(t),this.exp(e,t)},L.prototype.clone=function(){var e=B();return this.copyTo(e),e},L.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},L.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},L.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},L.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},L.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(0<e--)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);0<=e;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(0<o||r!=this.s)&&(t[o++]=r);return t},L.prototype.equals=function(e){return 0==this.compareTo(e)},L.prototype.min=function(e){return this.compareTo(e)<0?this:e},L.prototype.max=function(e){return 0<this.compareTo(e)?this:e},L.prototype.and=function(e){var t=B();return this.bitwiseTo(e,o,t),t},L.prototype.or=function(e){var t=B();return this.bitwiseTo(e,i,t),t},L.prototype.xor=function(e){var t=B();return this.bitwiseTo(e,s,t),t},L.prototype.andNot=function(e){var t=B();return this.bitwiseTo(e,a,t),t},L.prototype.not=function(){for(var e=B(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},L.prototype.shiftLeft=function(e){var t=B();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},L.prototype.shiftRight=function(e){var t=B();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},L.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},L.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},L.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},L.prototype.setBit=function(e){return this.changeBit(e,i)},L.prototype.clearBit=function(e){return this.changeBit(e,a)},L.prototype.flipBit=function(e){return this.changeBit(e,s)},L.prototype.add=function(e){var t=B();return this.addTo(e,t),t},L.prototype.subtract=function(e){var t=B();return this.subTo(e,t),t},L.prototype.multiply=function(e){var t=B();return this.multiplyTo(e,t),t},L.prototype.divide=function(e){var t=B();return this.divRemTo(e,t,null),t},L.prototype.remainder=function(e){var t=B();return this.divRemTo(e,null,t),t},L.prototype.divideAndRemainder=function(e){var t=B(),r=B();return this.divRemTo(e,t,r),[t,r]},L.prototype.modPow=function(e,t){var r=e.bitLength(),n=z(1);if(r<=0)return n;var o=r<18?1:r<48?3:r<144?4:r<768?5:6,i=new(r<8?R:t.isEven()?O:k)(t),s=[],a=3,l=o-1,c=(1<<o)-1;if(s[1]=i.convert(this),1<o){var u=B();for(i.sqrTo(s[1],u);a<=c;)s[a]=B(),i.mulTo(u,s[a-2],s[a]),a+=2}var d,h,p=e.t-1,f=!0,g=B();for(r=G(e[p])-1;0<=p;){for(l<=r?d=e[p]>>r-l&c:(d=(e[p]&(1<<r+1)-1)<<l-r,0<p&&(d|=e[p-1]>>this.DB+r-l)),a=o;0==(1&d);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--p),f)s[d].copyTo(n),f=!1;else{for(;1<a;)i.sqrTo(n,g),i.sqrTo(g,n),a-=2;0<a?i.sqrTo(n,g):(h=n,n=g,g=h),i.mulTo(g,s[d],n)}for(;0<=p&&0==(e[p]&1<<r);)i.sqrTo(n,g),h=n,n=g,g=h,--r<0&&(r=this.DB-1,--p)}return i.revert(n)},L.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return L.ZERO;for(var r=e.clone(),n=this.clone(),o=z(1),i=z(0),s=z(0),a=z(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(e,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);0<=r.compareTo(n)?(r.subTo(n,r),t&&o.subTo(s,o),i.subTo(a,i)):(n.subTo(r,n),t&&s.subTo(o,s),a.subTo(i,a))}return 0!=n.compareTo(L.ONE)?L.ZERO:0<=a.compareTo(e)?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},L.prototype.pow=function(e){return this.exp(e,new w)},L.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone(),n=(t.compareTo(r)<0&&(e=t,t=r,r=e),t.getLowestSetBit());if((e=r.getLowestSetBit())<0)return t;for(0<(e=n<e?n:e)&&(t.rShiftTo(e,t),r.rShiftTo(e,r));0<t.signum();)0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<(n=r.getLowestSetBit())&&r.rShiftTo(n,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<e&&r.lShiftTo(e,r),r},L.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=S[S.length-1]){for(t=0;t<S.length;++t)if(r[0]==S[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<S.length;){for(var n=S[t],o=t+1;o<S.length&&n<C;)n*=S[o++];for(n=r.modInt(n);t<o;)if(n%S[t++]==0)return!1}return r.millerRabin(e)},L.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},L.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},L.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,o=!1,i=0;0<=--n;){var s=8==r?255&+e[n]:F(e,n);s<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,0<i&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&L.ZERO.subTo(this,this)},L.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},L.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t[r+e]=this[r];for(r=e-1;0<=r;--r)t[r]=0;t.t=this.t+e,t.s=this.s},L.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},L.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,o=(1<<n)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>n|s,s=(this[a]&o)<<r;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},L.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,i=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&i)<<o,t[s-r]=this[s]>>n;0<n&&(t[this.t-r-1]|=(this.s&i)<<o),t.t=this.t-r,t.clamp()}},L.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:0<n&&(t[r++]=n),t.t=r,t.clamp()},L.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),o=r.t;for(t.t=o+n.t;0<=--o;)t[o]=0;for(o=0;o<n.t;++o)t[o+r.t]=r.am(0,n[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&L.ZERO.subTo(t,t)},L.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},L.prototype.divRemTo=function(e,t,r){if(!((c=e.abs()).t<=0)){var n=this.abs();if(n.t<c.t)null!=t&&t.fromInt(0),null!=r&&this.copyTo(r);else{null==r&&(r=B());var o=B(),i=this.s,s=(e=e.s,this.DB-G(c[c.t-1])),a=(0<s?(c.lShiftTo(s,o),n.lShiftTo(s,r)):(c.copyTo(o),n.copyTo(r)),o.t),l=o[a-1];if(0!=l){var c=l*(1<<this.F1)+(1<a?o[a-2]>>this.F2:0),u=this.FV/c,d=(1<<this.F1)/c,h=1<<this.F2,p=r.t,f=p-a,g=null==t?B():t;for(o.dlShiftTo(f,g),0<=r.compareTo(g)&&(r[r.t++]=1,r.subTo(g,r)),L.ONE.dlShiftTo(a,g),g.subTo(o,o);o.t<a;)o[o.t++]=0;for(;0<=--f;){var m=r[--p]==l?this.DM:Math.floor(r[p]*u+(r[p-1]+h)*d);if((r[p]+=o.am(0,m,r,f,0,a))<m)for(o.dlShiftTo(f,g),r.subTo(g,r);r[p]<--m;)r.subTo(g,r)}null!=t&&(r.drShiftTo(a,t),i!=e&&L.ZERO.subTo(t,t)),r.t=a,r.clamp(),0<s&&r.rShiftTo(s,r),i<0&&L.ZERO.subTo(r,r)}}}},L.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},L.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},L.prototype.exp=function(e,t){if(4294967295<e||e<1)return L.ONE;var r,n=B(),o=B(),i=t.convert(this),s=G(e)-1;for(i.copyTo(n);0<=--s;)t.sqrTo(n,o),0<(e&1<<s)?t.mulTo(o,i,n):(r=n,n=o,o=r);return t.revert(n)},L.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},L.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=z(r),o=B(),i=B(),s="";for(this.divRemTo(n,o,i);0<o.signum();)s=(r+i.intValue()).toString(e).substr(1)+s,o.divRemTo(n,o,i);return i.intValue().toString(e)+s},L.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),n=Math.pow(t,r),o=!1,i=0,s=0,a=0;a<e.length;++a){var l=F(e,a);l<0?"-"==e.charAt(a)&&0==this.signum()&&(o=!0):(s=t*s+l,++i>=r&&(this.dMultiply(n),this.dAddOffset(s,0),s=i=0))}0<i&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),o&&L.ZERO.subTo(this,this)},L.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(L.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(L.ONE.shiftLeft(e-1),this);else{var n=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),0<n?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}},L.prototype.bitwiseTo=function(e,t,r){for(var n,o=Math.min(e.t,this.t),i=0;i<o;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=o;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},L.prototype.changeBit=function(e,t){return e=L.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},L.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},L.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},L.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},L.prototype.multiplyLowerTo=function(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;0<n;)r[--n]=0;for(var o=r.t-this.t;n<o;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(o=Math.min(e.t,t);n<o;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},L.prototype.multiplyUpperTo=function(e,t,r){var n=r.t=this.t+e.t- --t;for(r.s=0;0<=--n;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},L.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this[0]%e;else for(var n=this.t-1;0<=n;--n)r=(t*r+this[n])%e;return r},L.prototype.millerRabin=function(e){var t=this.subtract(L.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>S.length&&(e=S.length);for(var o=B(),i=0;i<e;++i){o.fromInt(S[Math.floor(Math.random()*S.length)]);var s=o.modPow(n,this);if(0!=s.compareTo(L.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(L.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},L.prototype.square=function(){var e=B();return this.squareTo(e),e},L.prototype.gcda=function(e,t){var r,n=this.s<0?this.negate():this.clone(),o=e.s<0?e.negate():e.clone(),i=(n.compareTo(o)<0&&(e=n,n=o,o=e),n.getLowestSetBit()),s=o.getLowestSetBit();s<0?t(n):(0<(s=i<s?i:s)&&(n.rShiftTo(s,n),o.rShiftTo(s,o)),r=function(){0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<(i=o.getLowestSetBit())&&o.rShiftTo(i,o),0<=n.compareTo(o)?(n.subTo(o,n),n.rShiftTo(1,n)):(o.subTo(n,o),o.rShiftTo(1,o)),0<n.signum()?setTimeout(r,0):(0<s&&o.lShiftTo(s,o),setTimeout((function(){t(o)}),0))},setTimeout(r,10))},L.prototype.fromNumberAsync=function(e,t,r,n){var o,s,a;"number"==typeof t?e<2?this.fromInt(1):(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(L.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0),o=this,s=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(L.ONE.shiftLeft(e-1),o),o.isProbablePrime(t)?setTimeout((function(){n()}),0):setTimeout(s,0)},setTimeout(s,0)):(r=7&e,(a=[]).length=1+(e>>3),t.nextBytes(a),0<r?a[0]&=(1<<r)-1:a[0]=0,this.fromString(a,256))},L),w=(N.prototype.convert=function(e){return e},N.prototype.revert=function(e){return e},N.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},N.prototype.sqrTo=function(e,t){e.squareTo(t)},N),R=(A.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},A.prototype.revert=function(e){return e},A.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},A.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},A.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},A),k=(P.prototype.convert=function(e){var t=B();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(T.ZERO)&&this.m.subTo(t,t),t},P.prototype.revert=function(e){var t=B();return e.copyTo(t),this.reduce(t),t},P.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},P.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P),O=(I.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=B();return e.copyTo(t),this.reduce(t),t},I.prototype.revert=function(e){return e},I.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},I.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},I);function I(e){this.m=e,this.r2=B(),this.q3=B(),T.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}function P(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function A(e){this.m=e}function N(){}function L(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function M(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){for(var r=new f;t=e.get(),r.mulAdd(128,127&t),128&t;);this.tagNumber=r.simplify()}}function x(e,t,r,n,o){if(!(n instanceof E))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=r,this.tag=n,this.sub=o}function D(e,t){this.hexDigits="0123456789ABCDEF",e instanceof D?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=t)}function B(){return new T(null)}function U(e,t){return new T(e,t)}t=(r="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(T.prototype.am=function(e,t,r,n,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var l=32767&this[e],c=this[e++]>>15,u=a*l+c*s;o=((l=s*l+((32767&u)<<15)+r[n]+(1073741823&o))>>>30)+(u>>>15)+a*c+(o>>>30),r[n++]=1073741823&l}return o},30):r&&"Netscape"!=navigator.appName?(T.prototype.am=function(e,t,r,n,o,i){for(;0<=--i;){var s=t*this[e++]+r[n]+o;o=Math.floor(s/67108864),r[n++]=67108863&s}return o},26):(T.prototype.am=function(e,t,r,n,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var l=16383&this[e],c=this[e++]>>14,u=a*l+c*s;o=((l=s*l+((16383&u)<<14)+r[n]+o)>>28)+(u>>14)+a*c,r[n++]=268435455&l}return o},28),T.prototype.DB=t,T.prototype.DM=(1<<t)-1,T.prototype.DV=1<<t,T.prototype.FV=Math.pow(2,52),T.prototype.F1=52-t,T.prototype.F2=2*t-52;for(var Z=[],j="0".charCodeAt(0),H=0;H<=9;++H)Z[j++]=H;for(j="a".charCodeAt(0),H=10;H<36;++H)Z[j++]=H;for(j="A".charCodeAt(0),H=10;H<36;++H)Z[j++]=H;function F(e,t){return null==(e=Z[e.charCodeAt(t)])?-1:e}function z(e){var t=B();return t.fromInt(e),t}function G(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}T.ZERO=z(0),T.ONE=z(1),Y.prototype.init=function(e){for(var t,r,n=0;n<256;++n)this.S[n]=n;for(n=t=0;n<256;++n)t=t+this.S[n]+e[n%e.length]&255,r=this.S[n],this.S[n]=this.S[t],this.S[t]=r;this.i=0,this.j=0},Y.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var q,V=Y,W=null;function Y(){this.i=0,this.j=0,this.S=[]}W=[];var K=0,$=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var Q=new Uint32Array(256);for(window.crypto.getRandomValues(Q),$=0;$<Q.length;++$)W[K++]=255&Q[$]}te.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==q){for(q=new V;K<256;){var e=Math.floor(65536*Math.random());W[K++]=255&e}for(q.init(W),K=0;K<W.length;++K)W[K]=0;K=0}return q.next()}()};var X=te,J=(ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},ee.prototype.setPublic=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key")},ee.prototype.encrypt=function(e){var t=this.n.bitLength()+7>>3;if(e=function(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],n=e.length-1;0<=n&&0<t;){var o=e.charCodeAt(n--);o<128?r[--t]=o:127<o&&o<2048?(r[--t]=63&o|128,r[--t]=o>>6|192):(r[--t]=63&o|128,r[--t]=o>>6&63|128,r[--t]=o>>12|224)}r[--t]=0;for(var i=new X,s=[];2<t;){for(s[0]=0;0==s[0];)i.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new T(r)}(e,t),null==e)return null;if(null==(e=this.doPublic(e)))return null;for(var r=e.toString(16),n=r.length,o=0;o<2*t-n;o++)r="0"+r;return r},ee.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16),this.d=U(r,16)):console.error("Invalid RSA private key")},ee.prototype.setPrivateEx=function(e,t,r,n,o,i,s,a){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=U(e,16),this.e=parseInt(t,16),this.d=U(r,16),this.p=U(n,16),this.q=U(o,16),this.dmp1=U(i,16),this.dmq1=U(s,16),this.coeff=U(a,16)):console.error("Invalid RSA private key")},ee.prototype.generate=function(e,t){var r=new X,n=e>>1;this.e=parseInt(t,16);for(var o=new T(t,16);;){for(;this.p=new T(e-n,1,r),0!=this.p.subtract(T.ONE).gcd(o).compareTo(T.ONE)||!this.p.isProbablePrime(10););for(;this.q=new T(n,1,r),0!=this.q.subtract(T.ONE).gcd(o).compareTo(T.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(i=this.p,this.p=this.q,this.q=i);var i=this.p.subtract(T.ONE),s=this.q.subtract(T.ONE),a=i.multiply(s);if(0==a.gcd(o).compareTo(T.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(a),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},ee.prototype.decrypt=function(e){if(e=U(e,16),null==(e=this.doPrivate(e)))return null;for(var t=this.n.bitLength()+7>>3,r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var o="";++n<r.length;){var i=255&r[n];i<128?o+=String.fromCharCode(i):191<i&&i<224?(o+=String.fromCharCode((31&i)<<6|63&r[n+1]),++n):(o+=String.fromCharCode((15&i)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return o},ee.prototype.generateAsync=function(e,t,r){var n=new X,o=e>>1,i=(this.e=parseInt(t,16),new T(t,16)),s=this,a=function(){var t=function(){s.p.compareTo(s.q)<=0&&(e=s.p,s.p=s.q,s.q=e);var e=s.p.subtract(T.ONE),t=s.q.subtract(T.ONE),n=e.multiply(t);0==n.gcd(i).compareTo(T.ONE)?(s.n=s.p.multiply(s.q),s.d=i.modInverse(n),s.dmp1=s.d.mod(e),s.dmq1=s.d.mod(t),s.coeff=s.q.modInverse(s.p),setTimeout((function(){r()}),0)):setTimeout(a,0)},l=function(){s.q=B(),s.q.fromNumberAsync(o,1,n,(function(){s.q.subtract(T.ONE).gcda(i,(function(e){0==e.compareTo(T.ONE)&&s.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(l,0)}))}))};setTimeout((function t(){s.p=B(),s.p.fromNumberAsync(e-o,1,n,(function(){s.p.subtract(T.ONE).gcda(i,(function(e){0==e.compareTo(T.ONE)&&s.p.isProbablePrime(10)?setTimeout(l,0):setTimeout(t,0)}))}))}),0)};setTimeout(a,0)},ee.prototype.sign=function(e,t,r){return r=function(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var r=t-e.length-6,n="",o=0;o<r;o+=2)n+="ff";return U("0001"+n+"00"+e,16)}((J[r]||"")+t(e).toString(),this.n.bitLength()/4),null==r||null==(t=this.doPrivate(r))?null:0==(1&(e=t.toString(16)).length)?e:"0"+e},ee.prototype.verify=function(e,t,r){return t=U(t,16),null==(t=this.doPublic(t))?null:function(e){for(var t in J)if(J.hasOwnProperty(t)){var r=(t=J[t]).length;if(e.substr(0,r)==t)return e.substr(r)}return e}(t.toString(16).replace(/^1f+00/,""))==r(e).toString()},r=ee,{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(){}(t={}).lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function n(){}if(n.prototype=t.prototype,e.prototype=new n,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){for(var o in r)e.prototype[o]=r[o];t=function(){};var i=["toString","valueOf"];try{"undefined"!=typeof navigator&&/MSIE/.test(navigator.userAgent)&&(t=function(e,t){for(o=0;o<i.length;o+=1){var r=i[o],n=t[r];"function"==typeof n&&n!=Object.prototype[r]&&(e[r]=n)}})}catch(e){}t(e.prototype,r)}}};var re={};void 0!==re.asn1&&re.asn1||(re.asn1={}),re.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){return(e=e.toString(16)).length%2==1?"0"+e:e},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",o=0;o<r;o++)n+="f";t=new T(n,16).xor(e).add(T.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t,r=(t=re.asn1).DERBoolean,n=t.DERInteger,o=t.DERBitString,i=t.DEROctetString,s=t.DERNull,a=t.DERObjectIdentifier,l=t.DEREnumerated,c=t.DERUTF8String,u=t.DERNumericString,d=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,f=t.DERUTCTime,g=t.DERGeneralizedTime,m=t.DERSequence,v=t.DERSet,_=t.DERTaggedObject,y=t.ASN1Util.newObject;if(1!=(t=Object.keys(e)).length)throw"key of param shall be only one.";if(t=t[0],-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+t+":"))throw"undefined key: "+t;if("bool"==t)return new r(e[t]);if("int"==t)return new n(e[t]);if("bitstr"==t)return new o(e[t]);if("octstr"==t)return new i(e[t]);if("null"==t)return new s(e[t]);if("oid"==t)return new a(e[t]);if("enum"==t)return new l(e[t]);if("utf8str"==t)return new c(e[t]);if("numstr"==t)return new u(e[t]);if("prnstr"==t)return new d(e[t]);if("telstr"==t)return new h(e[t]);if("ia5str"==t)return new p(e[t]);if("utctime"==t)return new f(e[t]);if("gentime"==t)return new g(e[t]);if("seq"==t){for(var b=e[t],E=[],S=0;S<b.length;S++){var C=y(b[S]);E.push(C)}return new m({array:E})}if("set"==t){for(b=e[t],E=[],S=0;S<b.length;S++)C=y(b[S]),E.push(C);return new v({array:E})}if("tag"==t){if(r=e[t],"[object Array]"===Object.prototype.toString.call(r)&&3==r.length)return n=y(r[2]),new _({tag:r[0],explicit:r[1],obj:n});if(o={},void 0!==r.explicit&&(o.explicit=r.explicit),void 0!==r.tag&&(o.tag=r.tag),void 0===r.obj)throw"obj shall be specified for 'tag'.";return o.obj=y(r.obj),new _(o)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},re.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),o=2;o<e.length;o+=2){var i=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);n+=i.substr(1,7),"0"==i.substr(0,1)&&(t=t+"."+new T(n,2).toString(10),n="")}return t},re.asn1.ASN1Util.oidIntToHex=function(e){function t(e){return 1==(e=e.toString(16)).length?"0"+e:e}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split(".");r+=t(e=40*parseInt(n[0])+parseInt(n[1])),n.splice(0,2);for(var o=0;o<n.length;o++)r+=function(e){var r="",n=new T(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";for(n=i+n,s=0;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[o]);return r},re.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},re.asn1.DERAbstractString=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},t.lang.extend(re.asn1.DERAbstractString,re.asn1.ASN1Object),re.asn1.DERAbstractTime=function(e){re.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var n=this.zeroPadding,o=(e=this.localDateToUTC(e),String(e.getFullYear()));return t=(o="utc"==t?o.substr(2,2):o)+n(String(e.getMonth()+1),2)+n(String(e.getDate()),2)+n(String(e.getHours()),2)+n(String(e.getMinutes()),2)+n(String(e.getSeconds()),2),(t=!0===r&&0!=(o=e.getMilliseconds())?t+"."+n(String(o),3).replace(/[0]+$/,""):t)+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,n,o,i){e=new Date(Date.UTC(e,t-1,r,n,o,i,0)),this.setByDate(e)},this.getFreshValueHex=function(){return this.hV}},t.lang.extend(re.asn1.DERAbstractTime,re.asn1.ASN1Object),re.asn1.DERAbstractStructured=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},t.lang.extend(re.asn1.DERAbstractStructured,re.asn1.ASN1Object),re.asn1.DERBoolean=function(){re.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},t.lang.extend(re.asn1.DERBoolean,re.asn1.ASN1Object),re.asn1.DERInteger=function(e){re.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new T(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DERInteger,re.asn1.ASN1Object),re.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),re.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;e="0"+e,this.hTLV=null,this.isModified=!0,this.hV=e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var o=e.substr(r,8);n+=o=1==(o=parseInt(o,2).toString(16)).length?"0"+o:o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},t.lang.extend(re.asn1.DERBitString,re.asn1.ASN1Object),re.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),re.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},t.lang.extend(re.asn1.DEROctetString,re.asn1.DERAbstractString),re.asn1.DERNull=function(){re.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},t.lang.extend(re.asn1.DERNull,re.asn1.ASN1Object),re.asn1.DERObjectIdentifier=function(e){var t=function(e){return 1==(e=e.toString(16)).length?"0"+e:e};re.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split(".");e=40*parseInt(n[0])+parseInt(n[1]),r+=t(e),n.splice(0,2);for(var o=0;o<n.length;o++)r+=function(e){var r="",n=new T(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";for(n=i+n,s=0;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=re.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},t.lang.extend(re.asn1.DERObjectIdentifier,re.asn1.ASN1Object),re.asn1.DEREnumerated=function(e){re.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new T(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DEREnumerated,re.asn1.ASN1Object),re.asn1.DERUTF8String=function(e){re.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},t.lang.extend(re.asn1.DERUTF8String,re.asn1.DERAbstractString),re.asn1.DERNumericString=function(e){re.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},t.lang.extend(re.asn1.DERNumericString,re.asn1.DERAbstractString),re.asn1.DERPrintableString=function(e){re.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},t.lang.extend(re.asn1.DERPrintableString,re.asn1.DERAbstractString),re.asn1.DERTeletexString=function(e){re.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},t.lang.extend(re.asn1.DERTeletexString,re.asn1.DERAbstractString),re.asn1.DERIA5String=function(e){re.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},t.lang.extend(re.asn1.DERIA5String,re.asn1.DERAbstractString),re.asn1.DERUTCTime=function(e){re.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},t.lang.extend(re.asn1.DERUTCTime,re.asn1.DERAbstractTime),re.asn1.DERGeneralizedTime=function(e){re.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},t.lang.extend(re.asn1.DERGeneralizedTime,re.asn1.DERAbstractTime),re.asn1.DERSequence=function(e){re.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},t.lang.extend(re.asn1.DERSequence,re.asn1.DERAbstractStructured),re.asn1.DERSet=function(e){re.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},t.lang.extend(re.asn1.DERSet,re.asn1.DERAbstractStructured),re.asn1.DERTaggedObject=function(e){re.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},t.lang.extend(re.asn1.DERTaggedObject,re.asn1.ASN1Object),ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var ne,oe=function(e){function t(r){var n=e.call(this)||this;return r&&("string"==typeof r?n.parseKey(r):(t.hasPrivateKeyProperty(r)||t.hasPublicKeyProperty(r))&&n.parsePropertiesFrom(r)),n}var r=t,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=r}return ne(r,n),r.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o),t.prototype.parseKey=function(e){try{var t=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){if(void 0===l){var t="0123456789ABCDEF",r=" \f\n\r\t\u2028\u2029";for(l={},s=0;s<16;++s)l[t.charAt(s)]=s;for(t=t.toLowerCase(),s=10;s<16;++s)l[t.charAt(s)]=s;for(s=0;s<8;++s)l[r.charAt(s)]=-1}for(var n=[],o=0,i=0,s=0;s<e.length;++s){var a=e.charAt(s);if("="==a)break;if(-1!=(a=l[a])){if(void 0===a)throw new Error("Illegal character at offset "+s);o|=a,2<=++i?(n[n.length]=o,i=o=0):o<<=4}}if(i)throw new Error("Hex encoding incomplete: 4 bits missing");return n}(e):p.unarmor(e),o=b.decode(n);if(9===(o=3===o.sub.length?o.sub[2].sub[0]:o).sub.length){t=o.sub[1].getHexStringValue(),this.n=U(t,16),r=o.sub[2].getHexStringValue(),this.e=parseInt(r,16);var i=o.sub[3].getHexStringValue(),s=(this.d=U(i,16),o.sub[4].getHexStringValue()),a=(this.p=U(s,16),o.sub[5].getHexStringValue()),c=(this.q=U(a,16),o.sub[6].getHexStringValue()),u=(this.dmp1=U(c,16),o.sub[7].getHexStringValue()),d=(this.dmq1=U(u,16),o.sub[8].getHexStringValue());this.coeff=U(d,16)}else{if(2!==o.sub.length)return!1;var h=o.sub[1].sub[0];t=h.sub[0].getHexStringValue(),this.n=U(t,16),r=h.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new re.asn1.DERInteger({int:0}),new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e}),new re.asn1.DERInteger({bigint:this.d}),new re.asn1.DERInteger({bigint:this.p}),new re.asn1.DERInteger({bigint:this.q}),new re.asn1.DERInteger({bigint:this.dmp1}),new re.asn1.DERInteger({bigint:this.dmq1}),new re.asn1.DERInteger({bigint:this.coeff})]};return new re.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return u(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new re.asn1.DERSequence({array:[new re.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new re.asn1.DERNull]}),t=new re.asn1.DERSequence({array:[new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e})]});return t=new re.asn1.DERBitString({hex:"00"+t.getEncodedHex()}),new re.asn1.DERSequence({array:[e,t]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return u(this.getPublicBaseKey())},t.wordwrap=function(e,t){return e?(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(RegExp(t,"g")).join("\n")):e},t.prototype.getPrivateKey=function(){return"-----BEGIN RSA PRIVATE KEY-----\n"+t.wordwrap(this.getPrivateBaseKeyB64())+"\n-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){return"-----BEGIN PUBLIC KEY-----\n"+t.wordwrap(this.getPublicBaseKeyB64())+"\n-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(r);se.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new oe(e)},se.prototype.setPrivateKey=function(e){this.setKey(e)},se.prototype.setPublicKey=function(e){this.setKey(e)},se.prototype.decrypt=function(e){try{return this.getKey().decrypt(d(e))}catch(e){return!1}},se.prototype.encrypt=function(e){try{return u(this.getKey().encrypt(e))}catch(e){return!1}},se.prototype.sign=function(e,t,r){try{return u(this.getKey().sign(e,t,r))}catch(e){return!1}},se.prototype.verify=function(e,t,r){try{return this.getKey().verify(e,d(t),r)}catch(e){return!1}},se.prototype.getKey=function(e){if(!this.key){if(this.key=new oe,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},se.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},se.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},se.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},se.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},se.version="3.2.1";const ie=se;function se(e){this.default_key_size=(e=(e=void 0===e?{}:e)||{}).default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}})(0,we={},Pe),we.default),Ne=(Object.defineProperty(Le.prototype,"publicKey",{get:function(){return"-----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN\n        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz\n        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO\n        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve\n        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0\n        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48\n        7wIDAQAB\n        -----END PUBLIC KEY-----"},enumerable:!1,configurable:!0}),Le.prototype.encrypt=function(e){return e=N.a.encrypt(this.uint8Array2WordArray(e),this.key2,{iv:this.iv2}).toString(),Re.a.toByteArray(e)},Le.prototype.decrypt=function(e){return this.wordArray2Uint8Array(N.a.decrypt(Re.a.fromByteArray(e),this.key2,{iv:this.iv2}))},Le.prototype.generateK1Sign=function(){var e=this.generateNonce(),t=((this.key1=L.a.parse(e),this.iv1=ke.a.parse(Ie()(e).toString().toLowerCase()),t=new Ae).setPublicKey(this.publicKey),t.getKey().encrypt(e));return this.wordArray2Uint8Array(ke.a.parse(t))},Le.prototype.decryptK2Sign=function(e){try{this.key2=N.a.decrypt(Re.a.fromByteArray(e),this.key1,{iv:this.iv1}),this.iv2=Ie()(this.key2)}catch(e){}},Le.prototype.generateNonce=function(){var e=Math.random().toString().substr(2,16);return e.length<16&&(e+=e.substr(0,16-e.length)),e},Le.prototype.md5=function(e){return Ie()(e).toString()},Le.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(Ie()(this.uint8Array2WordArray(e)))},Le.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,r=e.sigBytes,n=new Uint8Array(r),o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n[o]=i}return n},Le.prototype.uint8Array2WordArray=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e[n])<<24-n%4*8;return Oe.a.create(r,t)},Le);function Le(){}function Me(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function xe(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))}var De={"/lr/login_room_rsp":"LoginRoomRsp","/lr/logout_room_rsp":"LogoutRoomRsp","/sw/push_kickout":"PushKickout","/sw/push":"PushReq","/sw/merge_push":"CmdMergePushReq","/lr/room/hb_rsp":"HbRsp","/lr/userlist/userlist_rsp":"UserlistRsp","/lr/stream/add_rsp":"StreamAddRsp","/lr/stream/delete_rsp":"StreamDeleteRsp","/lr/stream/update_rsp":"StreamUpdateRsp","/lr/stream/list_rsp":"StreamListRsp","/lr/push/stream_add":"PushStream","/lr/push/stream_delete":"PushStream","/lr/push/stream_update":"PushStream","/lr/signal/liverequest_rsp":"SignalLiveRsp","/lr/signal/liverresult_rsp":"SignalLiveResulRsp","/lr/signal/liveinvite_rsp":"SignalLiveInviteRsp","/lr/signal/livestop_rsp":"SignalLiveStopRsp","/lr/signal/livescustom_rsp":"SignalLiveCustomRsp","/lr/im/chat_rsp":"ImChatRsp","/lr/room/enter_rsp":"EnterRsp","/lr/room/quit_rsp":"QuitRsp","/lr/trans/trans_rsp":"TransRsp","/lr/trans/transfetch_rsp":"TransFetchRsp","/lr/bigim/chat_rsp":"BigimChatRsp","/lr/relay_rsp":"RelayRsp","/lr/token/renew_token_rsp":"RenewTokenRsp","/lr/push/user_updated":"PushUserInfoUpdated","/lr/push/user_token_expire":"PushUserTokenExpire","/lr/push/im_chat":"PushImChat","/lr/push/bigim_chat":"PushBigImChat","/lr/push/trans":"PushTrans","/lr/push/user_kickout":"PushUserKickout","/lr/push/user_logreport":"PushUserLogReport","/lr/push/usertrans":"PushUserTrans"},Be=(we=r(1),r.n(we)),Ue=function(){return(Ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.util.Long=Be.a,t.configure();var Ze,je=((we=Ze=Ze||{})[we.disconnected=0]="disconnected",we[we.broken=1]="broken",we[we.connected=2]="connected",Object.defineProperty(He.prototype,"nickName",{get:function(){return Me(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),He.prototype.isDisConnect=function(){return this.state!==Ze.connected},He.prototype.getHeader=function(e){e={cmd:e,seq:++this.seq,timestamp:(new Date).getTime(),session_id:this.switchSessionID,controls:this.controls,flags:this.flags};var t=Ce.proto_switch.Header.create(e);return t=Ce.proto_switch.Header.encode(t).finish(),[e.seq,t]},He.prototype.isUaConnect=function(){return this.ua.isConnect()},He.prototype.sendMessage=function(e,t,r,n,o,i,s){var a=this;if(void 0===o&&(o={timeout:6e3}),void 0===i&&(i=!0),this.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" call"),"/lr/login_room"!==e&&this.state!==Ze.connected)return this.logger.warn(U.LIVEROOMHANDLER_SENDMESSAGE+" state "+this.state),-1;var l=this.getHeader(e),c=l[1],u=t;return!this.unEncryptCmdList.includes(e)&&this.isEncrypt&&(u=this.crypto.encrypt(t)),t=this.getHead(c.length,u.length),t=new Uint8Array(Array.from(t).concat(Array.from(c)).concat(Array.from(u))),i&&(c={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:o.timeout,success:r,error:function(e,t,r){var o;if(a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+t+" "+JSON.stringify(e)+" "+JSON.stringify(r)),"/lr/login_room_rsp"!==(null==(o=null==e?void 0:e.header)?void 0:o.cmd)&&-1<[1002,105].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code))return null!=r&&r.roomID?(o=a.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID})))?void o.retryRoom():void a.logger.error(U.LIVEROOMHANDLER_SENDMESSAGE+" room no found ignore "):void a.rtm.retryRoom();[207,208].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code),n&&n(e,t)},params:s},u=this.sendCommandList.push(c),this.sendCommandMap[c.seq]=u),this.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+l[0]+" cmd: "+e),i="/lr/login_room"===e,null!=(o=this.liveroomRequest)&&o.sendRequest({payload:t,ack:i},(function(e){a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" fail")}),(function(){a.logger.info(U.LIVEROOMHANDLER_SENDMESSAGE+" ack")})),l[0]},He.prototype.getHead=function(e,t){var r=new Uint8Array(7);return r[0]=33,r[1]=e>>8,r[2]=e-(r[1]<<8),r.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),r},He.prototype.handlePush=function(e,t){if(void 0===t&&(t=!1),33===(r=e[0])){var r=(e[1]<<8)+e[2],n=Ce.proto_switch.Header.decode(e.slice(7,7+r)),o=r=e.slice(7+r);if(!this.unEncryptCmdList.includes(n.cmd)&&this.isEncrypt){if(!this.hasCryptSign)return this.logger.warn(U.LIVEROOMHANDLER_HANDLEPUSH+" decrypt early "+n.cmd),void this.waitDecryptCmdList.push(e);try{o=this.crypto.decrypt(r)}catch(e){this.logger.warn(U.LIVEROOMHANDLER_HANDLEPUSH+" decrypt fail "+n.cmd)}}if(De[n.cmd]){if(e=this.decodeResponseBody(n,o),this.swPushCmdList.includes(n.cmd))return t&&"/lr/push/user_updated"===(null==(r=null==e?void 0:e.head)?void 0:r.sub_cmd)?void this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" ignore user updated"):void this.handleSwitchPush(n,e);this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" down "+n.cmd+" "+JSON.stringify(this.transBuf(e))),t={header:this.transHeader(n),body:this.transRsp(e)},this.handleSendCommandMsgRsp(t)}else this.logger.info(U.LIVEROOMHANDLER_HANDLEPUSH+" cmd is not rtc"),this.onSwitchMessage(n,o)}},He.prototype.handleSwitchPush=function(e,t){if("/sw/push"===e.cmd){var r=(a=this.transRsp(t.head)).room_id;if(this.stateCenter.roomModulesList.find((function(e){return e.roomID==r}))){var n=void 0,o={header:a,body:n=this.unStructCmdList.includes(t.head.sub_cmd)?{signal_msg:xe(t.msg_body),sub_cmd:this.joinLiveMap[t.head.sub_cmd]}:"/lr/push/signal_custom"===t.head.sub_cmd?{custommsg:xe(t.msg_body)}:De[t.head.sub_cmd]?this.transRsp(this.decode(Ce.liveroom_cs[De[t.head.sub_cmd]],t.msg_body)):{}};if(this.logger.info(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" push "+JSON.stringify(this.transBuf(o))),this.whiteboardPushCmdList.includes(t.head.sub_cmd))this.logger.info(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" white "),this.onSwitchMessage(e,t);else switch(t.head.sub_cmd){case"/lr/push/user_updated":this.handlePushUserStateUpdateMsg(o);break;case"/lr/push/user_kickout":this.handlePushKickout(o,!1);break;case"/lr/push/trans":this.handlePushTransMsg(o);break;case"/lr/push/im_chat":this.handlePushRoomMsg(o);break;case"/lr/push/signal_custom":this.handlePushCustomMsg(o);break;case"/lr/push/stream_add":case"/lr/push/stream_delete":case"/lr/push/stream_update":this.handlePushStreamMsg(o);break;case"/lr/push/joinlive_request":case"/lr/push/joinlive_result":case"/lr/push/joinlive_invite":case"/lr/push/joinlive_stop":this.handlePushSignalMsg(o);break;case"/lr/push/user_token_expire":this.handlePushTokenExpire(o)}1==t.head.qos_flag&&(l={code:0,message:"",sub_cmd:t.head.sub_cmd,msg_id:t.head.msg_id,server_send_time:t.head.send_time},c=Ce.proto_switch.PushRsp.create(l),u=Ce.proto_switch.PushRsp.encode(c).finish(),this.sendMessage("/sw/push_rsp",u,void 0,void 0))}else this.logger.warn(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")}else{var i,s,a,l,c,u;"/sw/merge_push"===e.cmd?(i=(a=this.transRsp(t.head)).room_id,this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}))?(s=[],t.messages.forEach((function(e){var t;s.push({sub_cmd:e.sub_cmd,sub_seq:e.sub_seq,msg_id:e.msg_id}),"/lr/push/bigim_chat"===e.sub_cmd&&(t=Ce.liveroom_cs.PushBigImChat.decode(e.msg_body),e.msg_body=t)})),delete(a={header:(n=this.transRsp(t)).head,body:n}).body.head,this.handlePushMergeMsg(a),1==t.head.qos_flag&&(c=Ce.proto_switch.CmdMergePushRsp.create(l={messages:s}),u=Ce.proto_switch.CmdMergePushRsp.encode(c).finish(),this.sendMessage("/sw/merge_push_rsp",u,void 0,void 0))):this.logger.warn(U.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")):"/sw/push_kickout"===e.cmd&&(n={reason:900<t.reason?t.reason-900:t.reason,msg:t.message,need_relogin:void 0!==t.need_relogin?t.need_relogin:0},this.handlePushKickout({header:e,body:n},!0))}},He.prototype.handlePushTokenExpire=function(e){},He.prototype.handlePushKickout=function(e,t){},He.prototype.handlePushStreamMsg=function(e){},He.prototype.handlePushSignalMsg=function(e){},He.prototype.handlePushMergeMsg=function(e){},He.prototype.handlePushCustomMsg=function(e){},He.prototype.handlePushRoomMsg=function(e){},He.prototype.handlePushTransMsg=function(e){},He.prototype.onSwitchMessage=function(e,t){},He.prototype.decodeResponseBody=function(e,t){var r=this.onSwitchCmdList.includes(e.cmd)?"proto_switch":"liveroom_cs";return this.decode(this.protoInstance[r][De[e.cmd]],t)},He.prototype.handleWaitDecryptCmdList=function(){var e=this;this.waitDecryptCmdList.forEach((function(t){e.handlePush(t,!0)})),this.waitDecryptCmdList=[]},He.prototype.handlePushUserStateUpdateMsg=function(e){},He.prototype.login=function(e,t,r){var o,i,s,a,l=this,c=(this.state==Ze.disconnected&&(this.logger.info(U.LIVEROOMHANDLER_LOGIN+" state disconnect"),this.closeRequest()),(new Date).getTime()+"");e.isMulti?(s={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,net_type:D.getNetTypeNum(),config:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0},lv_key:e.lvKey,third_token:Me(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",conn_type:2,room_name:Me(e.roomName)},i=Ue(Ue({},s),{room_name:e.roomName,third_token:e.token}),this.logger.info(U.LIVEROOMHANDLER_LOGIN+" enter "+JSON.stringify(i)),s=Ce.liveroom_cs.EnterReq.create(s),a=Ce.liveroom_cs.EnterReq.encode(s).finish(),this.sendMessage("/lr/room/enter",a,(function(e,r){l.longToStringNumber(e.body,["user_session_id","room_session_id","ret_timestamp"],"toString"),l.transKeysName(e.body,[["user_session_id","session_id"],["hb_interval","hearbeat_interval"]]),l.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)}),void 0,void 0,{roomID:e.roomID})):(o={app_id:this.stateCenter.appid,id_name:Me(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.stateCenter.ENV%2==0?n.TT_WEB:n.TT_MINIPROGRAM,net_type:D.getNetTypeNum(),sdk_ver:parseInt(this.rtm.version.replace(/\./g,"")),proto_ver:131072,nick_name:this.nickName,client_stamp:Me(c),crypt_version:1,k1_sign:this.crypto.generateK1Sign(),relogin_token:this.switchSessionID.notEquals(Be.a.fromInt(0))?Me(this.reloginToken):"",role:this.stateCenter.role,liveroom_session_id:Be.a.fromString(e.sessionID),room_id:Me(e.roomID),room_name:Me(e.roomName),biz_type:0,room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0,lv_key:e.lvKey,third_token:Me(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2},i=Ue(Ue({},o),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:c,k1_sign:void 0,relogin_token:this.reloginToken,liveroom_session_id:e.sessionID,room_id:e.roomID,room_name:e.roomName,third_token:e.token}),this.logger.info(U.LIVEROOMHANDLER_LOGIN+" login "+JSON.stringify(i)),this.k1SignLogoutBuffer=this.crypto.md5Bytes(o.k1_sign),s=Ce.proto_switch.LoginRoomReq.create(o),a=Ce.proto_switch.LoginRoomReq.encode(s).finish(),this.sendMessage("/lr/login_room",a,(function(e,r){l.switchSessionID=e.header.session_id,l.reloginToken=e.body.relogin_token,l.logger.info(U.LIVEROOMHANDLER_LOGIN+" login rsp"),l.crypto.decryptK2Sign(e.body.k2_sign),1===e.body.crypt_option?l.isEncrypt=!1:void 0===e.body.crypt_option&&(l.isEncrypt=!0),l.hasCryptSign=!0,l.waitDecryptTimer=setTimeout((function(){l.handleWaitDecryptCmdList()}),0),l.longToStringNumber(e.body,["liveroom_session_id","room_session_id","ret_timestamp"],"toString"),delete e.body.heartbeat_interval,delete e.body.heartbeat_timeout,l.transKeysName(e.body,[["liveroom_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"]]),l.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)})))},He.prototype.transKeysName=function(e,t){t.forEach((function(t){e[t[1]]=e[t[0]],delete e[t[0]]}))},He.prototype.keysExist=function(e,t){t.forEach((function(t){void 0===e[t]&&(e[t]=0)}))},He.prototype.longToStringNumber=function(e,t,r){t.forEach((function(t){Be.a.isLong(e[t])&&(e[t]=e[t][r]())}))},He.prototype.logout=function(e,t,r){var n,o,i,s;return e.isMulti?(n={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,config_list:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0}},o=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_LOGOUT+" quit "+JSON.stringify(o)),i=Ce.liveroom_cs.QuitReq.create(n),s=Ce.liveroom_cs.QuitReq.encode(i).finish(),this.sendMessage("/lr/room/quit",s,t,r)):(n={logout_code:0,logout_check:this.crypto.md5Bytes(Me(e.token)),liveroom_session_id:Be.a.fromString(e.sessionID),room_id:Me(e.roomID),role:this.stateCenter.role,nickname:this.nickName,logout_logic:this.stateCenter.isMultiRoom?3:1},o=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_LOGOUT+" logout "+JSON.stringify(o)),i=Ce.proto_switch.LogoutRoomReq.create(n),s=Ce.proto_switch.LogoutRoomReq.encode(i).finish(),this.sendMessage("/lr/logout_room",s,t,r))},He.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(I.TIMEOUT,t._data.seq)}),0),t=e.getFirst()},He.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),n=Date.parse(new Date+""),o=0,i=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeout>n?"break":(r._data&&delete t[r._data.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+i.sendDataDropTimeout<n||(s=r&&r._data&&r._data.error,a=r&&r._data&&r._data.seq,setTimeout((function(){s&&s(I.TIMEOUT,a)}),0)),++o>=i.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var s,a}(););},He.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},He.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},He.prototype.handleSendCommandMsgRsp=function(e){var t,r,n=this,o=this.sendCommandMap[e.header.seq];null!=o&&(t=o._data,r=null==t?void 0:t.params,delete this.sendCommandMap[e.header.seq],this.sendCommandList.remove(o),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,n.seq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,n.seq,r)}),0))},He.prototype.getReqHead=function(e){return{room_id:e.roomID,user_session_id:Be.a.fromString(e.sessionID),room_session_id:Be.a.fromString(e.roomSessionID)}},He.prototype.heartBeat=function(e,t,r){var n=this;r={req_head:this.getReqHead(r),role:this.stateCenter.role,lv_key:r.lvKey},r=Ce.liveroom_cs.HbReq.create(r),r=Ce.liveroom_cs.HbReq.encode(r).finish(),this.sendMessage("/lr/room/hb",r,(function(t){n.transKeysName(t.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"]]),t.body.server_user_seq=t.body.user_seq.toNumber(),n.longToStringNumber(t.body,["dati_time_window"],"toNumber"),e&&e(t)}),t)},He.prototype.fetchUserList=function(e,t,r,n){var o=this;return n=this.getReqHead(n),n=Ue({req_head:n},e),e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_FETCH_USER_LIST+" "+JSON.stringify(e)),e=Ce.liveroom_cs.UserlistReq.create(n),n=Ce.liveroom_cs.UserlistReq.encode(e).finish(),this.sendMessage("/lr/userlist/userlist",n,(function(e,r){o.logger.info(U.LIVEROOMHANDLER_FETCH_USER_LIST+" suc "+r),o.transKeysName(e.body,[["user_basic_list","user_baseinfos"]]),o.longToStringNumber(e.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(e,r)}),r)},He.prototype.sendRoomMsg=function(e,t,r,n){var o=this;return n={req_head:this.getReqHead(n),msg_category:e.msg_category,msg_priority:e.msg_priority,msg_type:e.msg_type,msg_content:Me(e.msg_content)},e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_SENDROOMMSG+" "+JSON.stringify(e)),e=Ce.liveroom_cs.ImChatReq.create(n),n=Ce.liveroom_cs.ImChatReq.encode(e).finish(),this.sendMessage("/lr/im/chat",n,(function(e){o.longToStringNumber(e.body,["msg_id"],"toNumber"),t&&t(e)}),r)},He.prototype.sendReliableMessage=function(e,t,r,n){return n={req_head:this.getReqHead(n),role:this.stateCenter.role,nick_name:this.nickName,trans_type:Me(e.trans_type),trans_data:Me(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:Me(e.trans_channel)},e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_SENDRELIABLEMESSAGE+" "+JSON.stringify(e)),e=Ce.liveroom_cs.TransReq.create(n),n=Ce.liveroom_cs.TransReq.encode(e).finish(),this.sendMessage("/lr/trans/trans",n,t,r)},He.prototype.fetchReliableMessage=function(e,t,r,n){n=this.getReqHead(n);var o=e.fetch_array.map((function(e){return{trans_type:Me(e.trans_type),trans_local_seq:e.trans_seq}}));return n={req_head:n,trans_channel:Me(e.trans_channel),fetch_array:o},e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE+" "+JSON.stringify(e)),o=Ce.liveroom_cs.TransFetchReq.create(n),e=Ce.liveroom_cs.TransFetchReq.encode(o).finish(),this.sendMessage("/lr/trans/transfetch",e,t,r)},He.prototype.sendCustomCommand=function(e,t,r,n){var o=this,i=(n=this.getReqHead(n),e.dest_id_name.map((function(e){return{id_name:Me(e)}})));return n=Ue({req_head:n,dst_userlist:i,push_message:Me(e.custom_msg)},e),i=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_SENDCUSTOMCOMMAND+" "+JSON.stringify(i)),e=Ce.liveroom_cs.SignalLiveReq.create(n),i=Ce.liveroom_cs.SignalLiveReq.encode(e).finish(),this.sendMessage("/lr/signal/livescustom",i,(function(e){t&&t(o.transRsp(e))}),(function(e){r&&r(o.transRspHead(e.rsp_head))}))},He.prototype.sendBigRoomMessage=function(e,t,r,n){return n=this.getReqHead(n),e=e.msgs.map((function(e){return{msg_category:e.msg_category,msg_type:e.msg_type,msg_timestamp:Be.a.fromNumber(Date.now()),msg_content:Me(e.msg_content),bigmsg_client_id:Me(e.bigmsg_client_id)}})),n={req_head:n,nick_name:this.nickName,role:this.stateCenter.role,msgs:e},e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_SENDBIGROOMMESSAGE+" "+JSON.stringify(e)),e=Ce.liveroom_cs.BigimChatReq.create(n),n=Ce.liveroom_cs.BigimChatReq.encode(e).finish(),this.sendMessage("/lr/bigim/chat",n,t,r)},He.prototype.sendRelayMessage=function(e,t,r,n){return n={req_head:this.getReqHead(n),nick_name:this.nickName,role:this.stateCenter.role,relay_type:Me(e.relay_type),relay_data:Me(e.relay_data)},e=Ce.liveroom_cs.RelayReq.create(n),n=Ce.liveroom_cs.RelayReq.encode(e).finish(),this.sendMessage("/lr/relay",n,t,r)},He.prototype.sendSignalCmd=function(e,t,r,n){var o="",i="";switch(e.sub_cmd){case 1003:o="/lr/signal/liveinvite",i="SignalLiveInviteReq";break;case 1001:o="/lr/signal/liverequest",i="SignalLiveReq";break;case 1002:o="/lr/signal/liverresult",i="SignalLiveResultReq";break;case 1004:o="/lr/signal/livestop",i="SignalLiveStopReq"}n=this.getReqHead(n);var s=e.dest_id_name.map((function(e){return{id_name:Me(e)}}));return n={req_head:n,push_message:Me(e.signal_msg),dst_userlist:s},e=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_SENDSIGNALCMD+" "+JSON.stringify(e)),s=Ce.liveroom_cs[i].create(n),e=Ce.liveroom_cs[i].encode(s).finish(),Ce.liveroom_cs[i].decode(e),this.sendMessage(o,e,t,r)},He.prototype.sendStreamUpdate=function(e,t,r,n){var o,i=this;try{o=JSON.parse(e.stream_msg)}catch(e){}var s,a,l="",c=(this.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(e)),this.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID})));if(!c)return this.logger.error(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" room no found ignore "),-1;switch(e.sub_cmd){case 2001:l="/lr/stream/add",s="StreamAddReq",a={req_head:this.getReqHead(c),stream_id:Me(o.stream_id),extra_info:Me(o.extra_info),client_req_seq:this.seq+1,login_mode:1,third_token:Me(e.third_token||"")};break;case 2002:l="/lr/stream/delete",s="StreamDeleteReq",a={req_head:this.getReqHead(c),stream_id:Me(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1};break;case 2003:l="/lr/stream/update",s="StreamUpdateReq",a={req_head:this.getReqHead(c),stream_id:Me(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1,extra_info:Me(o.extra_info)}}var u=this.transBuf(a);return this.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(u)),u=Ce.liveroom_cs[s].create(a),u=Ce.liveroom_cs[s].encode(u).finish(),this.sendMessage(l,u,(function(e){i.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" suc "+l+" "+JSON.stringify(e)),e.header.room_id=c.roomID,t&&t(e)}),(function(e){i.logger.info(U.LIVEROOMHANDLER_SENDSTREAMUPDATE+" fail "+l+" "+JSON.stringify(e)),r&&r(e)}))},He.prototype.getStreamList=function(e,t,r,n){var o,i=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID}));i?(i={req_head:this.getReqHead(i)},o=this.transBuf(i),this.logger.info(U.LIVEROOMHANDLER_GETSTREAMLIST+" "+JSON.stringify(o)),o=Ce.liveroom_cs.StreamListReq.create(i),i=Ce.liveroom_cs.StreamListReq.encode(o).finish(),this.sendMessage("/lr/stream/list",i,(function(e){var r;null!=(r=e.body)&&r.stream_info.forEach((function(e){e.create_time=e.create_time.toNumber()})),t&&t(e)}),(function(e){r&&r(e)}))):this.logger.error(U.LIVEROOMHANDLER_GETSTREAMLIST+" room no found ignore "+n.roomID)},He.prototype.transBuf=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){["logout_check","k2_sign","k1_sign"].includes(n)?r[n]=e[n]:t.transReqBytes(r,e,n)})),r},He.prototype.transReqBytes=function(e,t,r){var n=this;if(Be.a.isLong(t[r]))e[r]=t[r].toString();else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(o){return n.transReqBytes(e[r],t[r],o)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var o=0;o<t[r].length;o++)!function(o){var i={};Object.keys(t[r][o]).forEach((function(e){n.transReqBytes(i,t[r][o],e)})),e[r].push(i)}(o)}else"[object Uint8Array]"===Object.prototype.toString.call(t[r])?e[r]=xe(t[r]):e[r]=t[r]},He.prototype.transHeader=function(e){return e.timestamp=Be.a.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},He.prototype.transRsp=function(e){var t=this,r=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},n=Ue(Ue({},e),r),o=(delete n.rsp_head,{});return Object.keys(n).forEach((function(e){"k2_sign"===e?o[e]=n[e]:t.transBytes(o,n,e)})),o},He.prototype.transBytes=function(e,t,r){var n=this;if(Be.a.isLong(t[r]))e[r]=t[r];else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(o){return n.transBytes(e[r],t[r],o)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var o=0;o<t[r].length;o++)!function(o){var i={};Object.keys(t[r][o]).forEach((function(e){n.transBytes(i,t[r][o],e)})),e[r].push(i)}(o)}else"[object Uint8Array]"===Object.prototype.toString.call(t[r])?e[r]=xe(t[r]):e[r]=t[r]},He.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},He.prototype.decode=function(e,t){return Ue({},e.decode(t))},He.prototype.handleDisconnected=function(e,t){var r=this;this.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" call"),this.state=Ze.disconnected,this.resetWaitCmd(),this.stateCenter.useNetAgent&&e===S.TIMEOUT&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(r.ua.isConnect()?(r.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is connect"),e.roomTryHandler.active()):(r.logger.info(U.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is disconnect"),r.ua.connectUa()))}))},He.prototype.handleBroken=function(){this.logger.info(U.LIVEROOMHANDLER_HANDLEBROKEN+" call"),this.state=Ze.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",T.Reconnecting,I.NETWORK_BROKEN))}))},He.prototype.handleConnected=function(e){var t=this;this.logger.info(U.LIVEROOMHANDLER_HANDLECONNECTED+" call "+e),this.state=Ze.connected,this.hasCryptSign=!1,this.resetWaitCmd(),this.stateCenter.useNetAgent&&(e===y.AUTO?this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&t.ua.isConnect()&&e.roomTryHandler.active()})):this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.stopMaxTime(),e.roomTryHandler.invalid())})))},He.prototype.resetWaitCmd=function(){this.waitDecryptCmdList=[],clearTimeout(this.waitDecryptTimer),this.waitDecryptTimer=null},He.prototype.renewToken=function(e,t,r,n){var o=this;n={req_head:this.getReqHead(n),token:e.token},e=Ce.liveroom_cs.RenewTokenReq.create(n),e=Ce.liveroom_cs.RenewTokenReq.encode(e).finish(),n=this.transBuf(n),this.logger.info(U.LIVEROOMHANDLER_RENEW_TOKEN+" "+JSON.stringify(n)),this.sendMessage("/lr/token/renew_token",e,(function(e,r){o.keysExist(e.body,["token_remain_time"]),t&&t(e,r)}),r)},He.prototype.reset=function(){this.logger.info(U.LIVEROOMHANDLER_RESET+" call "),this.state=Ze.disconnected,this.switchSessionID=Be.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},He.prototype.closeRequest=function(){var e;null!=(e=this.liveroomRequest)&&e.closeRequest()},He.prototype.resetSessionInfo=function(){this.switchSessionID=Be.a.fromInt(0)},He);function He(e,t,r,n,o){var s=this;this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=n,this.rtm=o,this.seq=0,this.controls=new Uint8Array(1),this.flags=new Uint8Array(1),this.sendCommandList=new v,this.sendCommandMap={},this.isEncrypt=!1,this.hasCryptSign=!1,this.waitDecryptCmdList=[],this.zPushSid="0",this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=Te.a,this.swPushCmdList=["/sw/push","/sw/merge_push","/sw/push_kickout","/sw/push_redirect"],this.onSwitchCmdList=["/lr/login_room_rsp","/lr/logout_room_rsp","/sw/push_kickout","/sw/push","/sw/merge_push"],this.unEncryptCmdList=["/lr/login_room","/lr/login_room_rsp"],this.whiteboardPushCmdList=["/edu/push/set_room","/edu/push/set_user","/edu/push/joinlive","/edu/push/set_mod","/edu/push/draw_graphics","/edu/push/clear_graphics","/edu/push/draw_page_graphics","/edu/push/clear_page_graphics","/edu/push/clear_user_graphic_list","/edu/push/qaa","/edu/push/set_user_auth","/edu/push/set_room_auth"],this.state=Ze.disconnected,this.unStructCmdList=["/lr/push/joinlive_request","/lr/push/joinlive_result","/lr/push/joinlive_invite","/lr/push/joinlive_stop"],this.joinLiveMap={"/lr/push/joinlive_request":11001,"/lr/push/joinlive_result":11002,"/lr/push/joinlive_invite":11003,"/lr/push/joinlive_stop":11004},this.reloginToken="",this.crypto=new Ne,this.liveroomRequest=this.ua.getPCRequest(C.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Be.a.fromInt(0),null!=(e=this.liveroomRequest)&&e.on("connected",(function(e){s.handleConnected(e)})),null!=(t=this.liveroomRequest)&&t.on("broken",(function(e){s.handleBroken()})),null!=(r=this.liveroomRequest)&&r.on("disconnected",(function(e,t){s.handleDisconnected(e,t)})),null!=(n=this.liveroomRequest)&&n.on("downLoadMessage",(function(e){s.handlePush(e)})),null!=(o=this.liveroomRequest)&&o.on("pcBrokenEvent",(function(e){var t=Q.kZegoSDKProxyBroken,r=s.stateCenter.reporter.createSpan(i.H,{key:Q.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),r.end()})),null!=(e=this.liveroomRequest)&&e.on("pcDisconnectedEvent",(function(e){var t=Q.kZegoSDKProxyDisconnect,r=s.stateCenter.reporter.createSpan(i.H,{key:Q.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),r.end()})),null!=(t=this.liveroomRequest)&&t.on("pcConnectedEvent",(function(e){var t=Q.kZegoSDKProxyConnect,r=s.stateCenter.reporter.createSpan(i.H,{key:Q.kZegoConnConnect.event},{key:""},t.event);r.setAttributes({service_no:t.service_no(e.service_no),recv_time:t.recv_time((new Date).getTime()),proxy_link_sources:t.proxy_link_sources(e.proxy_link_sources),connect_stream:t.connect_stream(e.connect_stream)}),r.end()}))}var Fe=(ze.prototype.listenCallBack=function(){var e=this;this.roomServicer.handlePushCustomMsg=function(t){e.handlePushCustomMsg(t)},this.roomServicer.handlePushTokenExpire=function(t){var r,n=null==(n=null==(n=null==t?void 0:t.body)?void 0:n.stop_stream)?void 0:n.stream_id_list.map(xe);null!=(r=null==(r=null==t?void 0:t.body)?void 0:r.stop_stream)&&(r.stream_id_list=n),e.stateCenter.actionListener("_tokenExpired",t)},this.roomServicer.handlePushKickout=function(t,r){var n;r?function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([],e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.handlePushKickout(t,!0,!0)})):(n=null==(r=null==t?void 0:t.header)?void 0:r.room_id,r=e.stateCenter.roomModulesList.find((function(e){return e.roomID==n})),e.roomServicer.longToStringNumber(t.body,["session_id"],"toString"),r?r.roomHandler.handlePushKickout(t):e.logger.error(U.LIVEROOMHANDLER_PUSHKICKOUT+" room no found ignore "+JSON.stringify(null==(r=t.header)?void 0:r.room_id)))},this.roomServicer.handlePushStreamMsg=function(t){e.handlePushStreamMsg(t)},this.roomServicer.handlePushSignalMsg=function(t){e.handlePushSignalMsg(t)},this.roomServicer.handlePushMergeMsg=function(t){e.handlePushMergeMsg(t)},this.roomServicer.handlePushRoomMsg=function(t){e.handlePushRoomMsg(t)},this.roomServicer.handlePushTransMsg=function(t){e.handlePushTransMsg(t)},this.roomServicer.onSwitchMessage=function(t,r){e.onSwitchMessage(t,r)},this.roomServicer.handlePushUserStateUpdateMsg=function(t){var r,n,o,s=null==(a=null==t?void 0:t.header)?void 0:a.room_id,a=e.stateCenter.roomModulesList.find((function(e){return e.roomID==s}));a?(o=t.body.user_list.map((function(e){return{Action:e.action,IdName:e.id_name,NickName:e.nick_name,Role:e.role,LoginTime:e.login_time.toString()}})),n=e.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:s},{key:""},Q.kZMRoomRecvUserUpdateInfo.event),o={body:{user_actions:o,user_list_seq:t.body.server_user_seq.toNumber(),room_id:t.body.room_id}},n.setAttributes({user_list_seq:null==(r=null===o?void 0:o.body)?void 0:r.user_list_seq,update_user:null==(r=null===o?void 0:o.body)?void 0:r.user_actions}),n.end(),a.userHandler.handlePushUserStateUpdateMsg(o)):e.logger.error(U.LIVEROOMHANDLER_PUSHUSERUPDATE+" room no found ignore "+JSON.stringify(t))}},ze.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},ze.prototype.isUaConnect=function(){var e;return null==(e=this.roomServicer)?void 0:e.isUaConnect()},ze.prototype.sendMessage=function(e,t,r,n,o,i){var s;return null==(s=this.roomServicer)?void 0:s.sendMessage(e,t,r,n,o)},ze.prototype.handlePushTokenExpire=function(e){},ze.prototype.handlePushKickout=function(e,t){},ze.prototype.handlePushStreamMsg=function(e){},ze.prototype.handlePushSignalMsg=function(e){},ze.prototype.handlePushMergeMsg=function(e){},ze.prototype.handlePushCustomMsg=function(e){},ze.prototype.handlePushRoomMsg=function(e){},ze.prototype.handlePushTransMsg=function(e){},ze.prototype.onSwitchMessage=function(e,t){},ze.prototype.handlePushUserStateUpdateMsg=function(e){},ze.prototype.login=function(e,t,r){var n;null!=(n=this.roomServicer)&&n.login(e,t,r)},ze.prototype.logout=function(e,t,r){var n;return null==(n=this.roomServicer)?void 0:n.logout(e,t,r)},ze.prototype.startCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},ze.prototype.stopCheck=function(){var e;null!=(e=this.roomServicer)&&e.stopCheck()},ze.prototype.getReqHead=function(e){var t;return null==(t=this.roomServicer)?void 0:t.getReqHead(e)},ze.prototype.heartBeat=function(e,t,r){var n;null!=(n=this.roomServicer)&&n.heartBeat(e,t,r)},ze.prototype.fetchUserList=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.fetchUserList(e,t,r,n)},ze.prototype.sendRoomMsg=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendRoomMsg(e,t,r,n)},ze.prototype.sendReliableMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendReliableMessage(e,t,r,n)},ze.prototype.fetchReliableMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.fetchReliableMessage(e,t,r,n)},ze.prototype.sendCustomCommand=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendCustomCommand(e,t,r,n)},ze.prototype.sendBigRoomMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendBigRoomMessage(e,t,r,n)},ze.prototype.sendRelayMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendRelayMessage(e,t,r,n)},ze.prototype.sendSignalCmd=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendSignalCmd(e,t,r,n)},ze.prototype.sendStreamUpdate=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendStreamUpdate(e,t,r,n)},ze.prototype.getStreamList=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.getStreamList(e,t,r,n)},ze.prototype.renewToken=function(e,t,r,n){var o;null!=(o=this.roomServicer)&&o.renewToken(e,t,r,n)},ze.prototype.reset=function(){var e;null!=(e=this.roomServicer)&&e.reset()},ze.prototype.closeRequest=function(){var e;null!=(e=this.roomServicer)&&e.closeRequest()},ze);function ze(e,t,r,n,o){this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=n,this.rtm=o,this.roomServicer=new je(e,t,r,n,o),this.listenCallBack()}var Ge=function(e,t,r,n){return new(r=r||Promise)((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},qe=function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},Ve=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},We=(Object.defineProperty(Ye.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Ye.prototype.getSettingUnify=function(e){var t=this.stateCenter.settingConfig.getSetting("unify",e=void 0!==e&&e);return this.logger.info(U.RTM_GET_SETTING_UNIFY+" "+e+" "+JSON.stringify(t)),t?(e=t.enable,t=t.sdk_conn_ver,!!(e&&t<=q.connectVer)):this.stateCenter.useNetAgent},Ye.prototype.initCallback=function(){this.proxyRes=D.proxyRes,this.actionSuccessCallback=D.actionSuccessCallback,this.actionErrorCallback=D.actionErrorCallback,this.getServerError=D.getServerError,this.generateRandumNumber=D.generateRandumNumber,this.unregisterCallback=D.unregisterCallback,this.logReportCallback=D.logReportCallback,this.registerCallback=D.registerCallback},Ye.prototype.initSpans=function(){this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZMListener.event},Q.kZMListener.event,!0).end()},Ye.prototype.getStoreAppConfig=function(){this.logger.info(U.RTM_GETSTOREAPPCONFIG+" call");var e=localStorage.getItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||q.modeNo));if(e)try{var t=D.decryptStores(e,F);t?(this.stateCenter.appConfig=JSON.parse(t),this.stateCenter.reporter.spanSetAttributes({key:Q.kZMInitSetting.event},{is_from_cache:Q.kZMInitSetting.is_from_cache(!0)}),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||q.modeNo))}catch(e){this.logger.warn(U.RTM_GETSTOREAPPCONFIG+" "+JSON.stringify(e))}else this.logger.info(U.RTM_GETSTOREAPPCONFIG+" no store config")},Ye.prototype.createNetAgent=function(){var e=this,t=(this.logger.info(U.RTM_CREATENETAGENT+" call"),this.netAgent.on("disconnected",(function(t){e.logger.info(U.RTM_CREATENETAGENT+" netAgent disconnect")})),this.netAgent.on("connected",(function(){e.logger.info(U.RTM_CREATENETAGENT+" netAgent connect"),e.stateCenter.useNetAgent?(e.fetchAppConfig(),e.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&t.roomTryHandler.active(!0)}))):e.logger.info(U.RTM_CREATENETAGENT+" unify false")})),this.netAgent.on("broken",(function(t){e.logger.info(U.RTM_CREATENETAGENT+" netAgent broken"),t===b.CLOSE&&e.stateCenter.roomModulesList.forEach((function(e){e.resetSessionInfo()}))})),this.netAgent.on("dispatchEvent",(function(t,r,n){var o;e.logger.info(U.RTM_CREATENETAGENT+" dispatch"),"start"===r?(o=e.stateCenter.reporter.createSpan(i.H,{key:Q.kZegoConnConnect.event},{key:""},Q.kZegoConnDispatch.event),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({domain_list:Q.kZegoConnDispatch.domain_list(n.domains)}),o.end())})),this.netAgent.on("dispatchResultUpdate",(function(t){t=t.servers,e.logger.info(U.RTM_CREATENETAGENT+" dispatchResult "+JSON.stringify(t)),t=D.encryptStores(JSON.stringify(t),F),localStorage.setItem(z+"_"+e.stateCenter.appid+"_"+(e.stateCenter.mode||q.modeNo),t)})),this.netAgent.on("connectedEvent",(function(t,r,n){var o;e.logger.info(U.RTM_CREATENETAGENT+" connect"),"start"===r?(o=e.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZegoConnConnect.event},Q.kZegoConnConnect.event,!0),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({request_count:Q.kZegoConnConnect.request_count(n.count),connect_id:Q.kZegoConnConnect.connect_id(n.connectid),events:Q.kZegoConnConnect.events(n.connectEvents)}),o.end())})),this.netAgent.on("requestEvent",(function(t,r,n){var o;e.logger.info(U.RTM_CREATENETAGENT+" request"),"start"===r?(o=e.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZegoRequest.event},Q.kZegoRequest.event,!0),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({req_location:Q.kZegoRequest.req_location(n.na_req_location),http_code:n.status_code,error:n.err_code}),o.end())})),this.netAgent.on("disConnectedEvent",(function(t){var r=t.duration,n=t.server,o=(t=t.connectid,e.logger.info(U.RTM_CREATENETAGENT+" disconnect"),e.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:""},Q.kZegoConnDisConnect.event));o.setAttributes({url:Q.kZegoConnDisConnect.url(n),connect_duration:Q.kZegoConnDisConnect.connect_duration(r),connect_id:Q.kZegoConnDisConnect.connect_id(t)}),o.end()})),null!=(t=this.netAgent)&&t.on("clientInfo",(function(t){"number"==typeof(null==t?void 0:t.timeOffset)&&e.stateCenter.reporter.setTimeOffset(null==t?void 0:t.timeOffset),e.updateTimeOffsetInterval()})),(null!=(t=this.options)&&t.accessDomains&&0<(null==(t=this.options)?void 0:t.accessDomains.length)?null==(t=this.options)?void 0:t.accessDomains:q.domains).map((function(e){return"wss://"+e+"/accesshub"})));this.netAgent.setBackupDomains(q.primaryDomains),this.netAgent.setNetAgentDefaultServers(t),null!=(t=this.options)&&t.customDomain&&this.netAgent.setNetAgentSpecifiedServers(["wss://accesshub-wss."+this.options.customDomain+"/accesshub"]),this.dispatchServers=this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Ye.prototype.getDispatchUrl=function(){var e=localStorage.getItem(z+"_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||q.modeNo));if(e&&(e=D.decryptStores(e,F)))try{return JSON.parse(e)}catch(e){}return[]},Ye.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),r=D.getBrowser(),n=t?"pagehide":"Firefox"===r?"beforeunload":"unload";window.addEventListener(n,(function(){e.logger.info(U.RTM_BIND_WINDOW_LISTENER+" "+n),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Ye.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},Ye.prototype.retryRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&(t.resetSessionInfo(),t.roomTryHandler.active(!0))}))},Ye.prototype.netOnLineHandle=function(){var e=this;this.logger.info(U.RTM_BIND_WINDOW_LISTENER+" network is online"),this.stateCenter.networkState=s.online,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",T.Reconnected,{code:0,msg:""}))}))},Ye.prototype.netOffLineHandle=function(){this.logger.info(U.RTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.offline,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",T.Reconnecting,I.NETWORK_BROKEN))}))},Ye.prototype.setLogConfig=function(e){this.logger.info(U.RTM_SET_LOG_CONFIG+" call");var t,r=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZMSetLog.event},Q.kZMSetLog.event);if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),r.setAttributes({log_level:Q.kZMSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&r.setAttributes({remote_log_level:Q.kZMSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),r.setAttributes({log_url:Q.kZMSetLog.log_url(e.logURL)}),r.end();else if(e.logURL)return this.logger.error(U.RTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.stateCenter.reporter.setError(r,Q.kZMSetLog.error.kInvalidParamError),!1;return this.logger.info(U.RTM_SET_LOG_CONFIG+" call success"),r.end(),!0},Ye.prototype.setDebugVerbose=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZMSetDebug.event},Q.kZMSetDebug.event);"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,t.setAttributes({debug:Q.kZMSetDebug.debug(e?"true":"false")})),t.end(),this.logger.info(U.RTM_SET_DEBUG_VERBOSE+" call success")},Ye.prototype.setDebug=function(e){"string"==typeof e&&-1<e.indexOf("wss")?this.stateCenter.debug=D.isTestEnv(e):Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("wss")}))?this.stateCenter.debug=D.isTestEnv(e[0]):this.logger.info(U.RTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Ye.prototype.renewToken=function(e,t){var r,n=this,o=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:t},{key:""},Q.kZMReNewToken.event);if(void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(U.RTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var s,a,l=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return l?"string"==typeof e&&l.roomTryHandler?(e===l.roomTryHandler.token?(this.logger.info(U.RTM_RENEWTOKEN+" token has not changed"),o.setAttributes({error:Q.kZMReNewToken.error.INPUT_PARAM.code,message:"token has not changed"}),o.end()):(o.setAttributes({token:Q.kZMReNewToken.token(e)}),this.stateCenter.configRoomAuth?(s=function(t){var r;null!=(r=l.roomTryHandler)&&r.renewLocalToken(e,null==(r=null==t?void 0:t.body)?void 0:r.token_remain_time),n.cloudSetting.setToken(e),n.stateCenter.configCheckToken=!0,o.end(),n.logger.info(U.RTM_RENEWTOKEN+" "+JSON.stringify(t))},a=function(t){var r=null==(r=null==t?void 0:t.body)?void 0:r.err_code;n.stateCenter.reporter.setError(o,t),!r||1000002014!==r&&2014!==r?n.logger.error(U.RTM_RENEWTOKEN+" "+JSON.stringify(t)):(n.stateCenter.configCheckToken=!1,null!=(r=l.roomTryHandler)&&r.renewLocalToken(e),n.cloudSetting.setToken(e),n.logger.warn(U.RTM_RENEWTOKEN+" "+JSON.stringify(t)))},this.stateCenter.useNetAgent?null!=(r=this.liveRoomHandler)&&r.renewToken({token:e},s,a,l):this.service.sendMessage("renew_token",{token:e},s,a,void 0,{sessionID:l.sessionID,roomID:t,roomSessionID:l.roomSessionID})):(null!=(r=l.roomTryHandler)&&r.renewLocalToken(e),this.cloudSetting.setToken(e),o.end())),!0):("string"!=typeof e||l.roomTryHandler?(this.logger.error(U.RTM_RENEWTOKEN+" token must be string and not empty"),this.stateCenter.reporter.setError(o,Q.kZMReNewToken.error.INPUT_PARAM)):(this.logger.error(U.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(o,Q.kZMReNewToken.error.NOT_LOGIN)),!1):(this.logger.error(U.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(o,Q.kZMReNewToken.error.NOT_LOGIN),!1)},Ye.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(U.RTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("http")}))&&this.cloudSetting.init({product:Z.product,appID:this.stateCenter.appid,urls:e,env:this.stateCenter.ENV,pollingNotify:function(e,r){t.logger.info(U.RTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(r)),t.stateCenter.actionListener("_cloudSettingNotify",e,r)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent})},Ye.prototype.loginRoom=function(e,t,r,n){var i=this;return this.logger.info(U.RTM_LOGIN_ROOM+" call by user "+(null==r?void 0:r.userID)+" "+e+" "+this.version),new Promise((function(a,l){return Ge(i,void 0,void 0,(function(){var i,c,u,d,h,p=this;return qe(this,(function(f){switch(f.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){p.stateCenter.networkState="none"===t.networkType?s.offline:s.online,e()},fail:function(t){p.logger.error(U.RTM_CONSTRUCTOR+" network "+JSON.stringify(t)),p.stateCenter.networkState=s.online,e()}})}))];case 1:f.sent(),f.label=2;case 2:return c=this.loginReport(a,l,e,t,n),d=c.interResolve,i=c.interReject,c=c.loginSpan,(n=n||{}).maxMemberCount||(n.maxMemberCount=0),this.netAgent&&(this.stateCenter.idName=r.userID,this.netAgent.setUserInfo(r.userID),this.stateCenter.actionListener("_roomLogin",e,t),this.netAgent.isConnect()&&this.fetchAppConfig(t)),this.cloudSetting.setUserID(r.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",(function(e){p.cloudSettingTimer=setTimeout((function(){clearTimeout(p.cloudSettingTimer),p.getCloudSetting(),p.stateCenter.actionListener("_settingCanFetch")}),100)})),this.stateCenter.reporter.setCommonAttributes({id_name:r.userID}),this.stateCenter.reporter.setReporterInfo(r.userID,t),u=this.getRoomModules(e),h=Q.kZMLoginRoom.error,u?(this.logger.setSessionInfo(this.stateCenter.appid,e,"",r.userID,"",this.stateCenter.sdKVersion),i(h.REPEATEDLY_LOGIN)):((u=new fe(e,this.stateCenter,this.logger,this.dataReport,this.service,this,this.liveRoomHandler)).roomTryHandler||(u.roomTryHandler=new te(this.logger,this.stateCenter,u)),u.roomTryHandler.init(this.stateCenter.roomRetryTime),u.roomTryHandler.initRoom(u.roomHandler,e,t,r,this.stateCenter.server,this.stateCenter.serverBak,n),u.roomTryHandler.setLoginRoomCallback(d,i),u.roomHandler.roomStateHandle("CONNECTING",T.Logining,{code:0,msg:""}),(d=function(e,t){var r,n,o=[],i={};for(r in e)i[e[r].order]=e[r],e[r].key=r;for(n in i)o.push(i[n]);for(var s=0;s<o.length;s++)for(var a=o[s].rules,l=0;l<a.length;l++){var c={key:o[s].key,value:o[s].value,action:t.action,logger:t.logger},u=c.value,d=a[l].name?""+a[l].name:"";if((void 0===u&&d===ee.NOT_EMPTY||void 0!==u)&&oe[d]&&(d=oe[d](c.key,u,c.action,c.logger,a[l]))!=ne)return d}return ne}({roomID:{order:0,value:e,rules:[{name:ee.NOT_EMPTY,error:h.ROOM_ID_NULL},{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:"roomID must be string"},{name:ee.MAX_LENGTH_128,error:h.ROOM_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:h.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:ee.NOT_EMPTY,error:h.INPUT_PARAM},{name:ee.TYPE_STRING,error:h.INPUT_PARAM}]},user:{order:2,value:r,rules:[{name:ee.NOT_EMPTY,error:h.INPUT_PARAM,extMsg:" param user error."},{name:ee.TYPE_OBJECT,error:h.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:r.userID,rules:[{name:ee.NOT_EMPTY,error:h.USER_ID_NULL,extMsg:" param user error."},{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" param userID error."},{name:ee.MAX_LENGTH_64,error:h.USER_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:h.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:r.userName,rules:[{name:ee.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" userName must be string."},{name:ee.MAX_LENGTH_256,error:h.USER_NAME_TOO_LONG}]},config:{order:5,value:n,rules:[]},"config.maxMemberCount":{order:6,value:n.maxMemberCount,rules:[{name:ee.TYPE_INTEGER,error:h.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:U.RTM_LOGIN_ROOM,logger:this.logger}))!==ne?(u.roomHandler.roomStateHandle("DISCONNECTED",T.LoginFailed,d.error,d.extMsg),i(d.error,d.extMsg)):(0<this.stateCenter.roomModulesList.length&&1==this.stateCenter.isMultiRoom?u.isMulti=!0:Ve([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout()})),n&&(u.config=n),this.stateCenter.roomModulesList.push(u),this.stateCenter.reporter.setSpanInMap(c,{key:Q.kZMLoginRoom.event,par:e}),h=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(h)&&0<h.length&&(this.logger.info(U.RTM_LOGIN_ROOM," setting room_server "+h),this.stateCenter.server=h[0],this.stateCenter.serverBak=h[1]||h[0]),this.stateCenter.setMultiRoom=!0,u.roomTryHandler.startMaxTime(),this.stateCenter.useNetAgent&&!this.netAgent.isConnect()?(this.logger.info(U.RTM_LOGIN_ROOM," us is not connected"),u.roomHandler.setRunState(o.trylogin),this.netAgent.connectUa()):(this.stateCenter.useNetAgent&&(this.stateCenter.networkState=s.online),u.roomTryHandler.active(!0)))),[2]}}))}))}))},Ye.prototype.handleLogUpload=function(){var e=this.stateCenter.appConfig.app_config.domain;this.logger.info(U.RTM_HANDLE_LOG_UPLOAD+" call"),this.logger.url?this.logger.info(U.RTM_HANDLE_LOG_UPLOAD+" log is connected"):(this.stateCenter.testEnvironment?(this.stateCenter.logDomain="weblogger-hk-test.zegocloud.com",e="zegocloud.com"):this.stateCenter.logDomain="weblogger"+this.stateCenter.appid+"-api."+e,e?(e="",0===this.stateCenter.ENV?(e="wss://"+this.stateCenter.logDomain+"/log",this.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})):e="https://"+this.stateCenter.logDomain+"/httplog",this.logger.setLogServer(e)):this.logger.warn(U.RTM_HANDLE_LOG_UPLOAD+" appconfig no domain"))},Ye.prototype.fetchAppConfig=function(e){return Ge(this,void 0,void 0,(function(){var t,r,n,o,s,a;return qe(this,(function(l){switch(l.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" user not exist"),[2];if(t="",e)t=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(U.RTM_FETCH_APP_CONFIG+" token not exist"),[2];t=this.getToken()}r=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:""},Q.kZegoSDKConfigInit.event),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3)];case 2:return o=l.sent(),a=o.code,n=o.data,o=o.retryCount,r.setAttributes({trigger_reason:Q.kZegoSDKConfigInit.trigger_reason(this.stateCenter.appConfig?"refresh":"normal"),try_count:Q.kZegoSDKConfigInit.try_count(o||0)}),r.end(),this.stateCenter.appConfigFetched=!0,this.logger.info(U.RTM_LOGIN_ROOM+" initConfig code:"+a+" data: "+JSON.stringify(n)),o=n.app_config,a=n.media_config,s=a.publish_config,a=a.play_config,n=n.speedlog_config.charge_info_report_no_playing,this.stateCenter.appConfig={app_config:o,media_config:{publish_config:s,play_config:a},speedlog_config:{charge_info_report_no_playing:n||0}},o=JSON.stringify(this.stateCenter.appConfig),s=D.encryptStores(o,F),localStorage.setItem(G+"_"+this.getAppID()+"_"+(this.stateCenter.mode||q.modeNo),s),this.handleLogUpload(),this.stateCenter.appConfig||this.stateCenter.actionListener("_appConfigRsp"),[3,4];case 3:return a=l.sent(),this.logger.error(U.RTM_LOGIN_ROOM+" fail "+JSON.stringify(a)),r.setAttributes({error:null==a?void 0:a.code}),r.end(),[20012,20008].includes(null==a?void 0:a.code)&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&e.roomTryHandler.loginFail(I.APPID_INVALID)})),[3,4];case 4:return[2]}}))}))},Ye.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([H,"room"]).then((function(t){var r,n;e.logger.info(U.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),t&&(e.stateCenter.settingConfig.setSetting(null==(t=null==t?void 0:t.init)?void 0:t.setting,["remote_log_level"]),(t=e.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(e.logger.info(U.RTM_LOGIN_ROOM+"  setting remote_log_level "+t),e.logger.setRemoteLogLevel(t)),(t=e.stateCenter.settingConfig.getSetting("unify",e.stateCenter.netHasSet))&&(e.logger.info(U.RTM_LOGIN_ROOM+" unify "+JSON.stringify(t)),n=t.enable,t=t.sdk_conn_ver,r=!0,r=!!(n&&t<=q.connectVer),!0===e.stateCenter.useNetAgent&&!1===r&&(e.cloudSetting.setOptions({unify:!1}),"connecting"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connecting",e.stateCenter.actionListener("_connectChanged","connecting")),n=Ve([],e.stateCenter.roomModulesList),Ve([],e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.logout(!0,!0)})),e.stateCenter.useNetAgent=r,n.forEach((function(t){var r;e.stateCenter.roomModulesList.push(t),t.roomTryHandler||(t.roomTryHandler=new te(e.logger,e.stateCenter,t)),t.roomTryHandler.init(e.stateCenter.roomRetryTime),t.roomTryHandler.initRoom(t.roomHandler,t.roomID,t.token,{userID:e.stateCenter.idName,userName:e.stateCenter.nickName},e.stateCenter.server,e.stateCenter.serverBak,t.config),null!=(r=t.roomTryHandler)&&r.startMaxTime(),t.roomTryHandler.onactive=function(r,n){r?"connected"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connected",e.stateCenter.actionListener("_connectChanged","connected",{roomID:t.roomID})):t.roomHandler.disconnectedHandle(n)},null!=(r=t.roomTryHandler)&&r.active()})))),(t=e.stateCenter.settingConfig.getSetting("report_script"))&&(r=t.url,n=t.key,t=t.hash,e.logger.info(U.RTM_LOGIN_ROOM+" report script "+r+" "+n+" "+t),e.stateCenter.reporter.loadScript(!0,r,n,t)))})).catch((function(t){e.logger.warn(U.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,r){var n=e.cloudSetting.getEnvVariables(),o=e.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:""},Q.kZMCloudSettingRefresh.event);o.setAttributes({request_kv:Q.kZMCloudSettingRefresh.request_kv(n),files:Q.kZMCloudSettingRefresh.files([{name:t,content:r.setting,versions:r.versions,code:null==r?void 0:r.code,message:null==r?void 0:r.message}])}),o.end(),t===H&&(e.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting,["remote_log_level"]),(n=e.stateCenter.settingConfig.getSetting("remote_log_level"))&&(e.logger.info(U.RTM_LOGIN_ROOM," setting remote_log_level "+n),e.logger.setRemoteLogLevel(n)))}))},Ye.prototype.cloudReportNotify=function(e,t,r){0!==(null==r?void 0:r.code)||!1===(null==r?void 0:r.polling)?"request_start"===t?this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZMCloudSettingRequest.event,par:e+""},Q.kZMCloudSettingRequest.event,!0):"request_end"===t&&this.stateCenter.reporter.spanEnd({key:Q.kZMCloudSettingRequest.event,par:e+""},{request_detail:Q.kZMCloudSettingRequest.request_detail(null==r?void 0:r.reportData),files:Q.kZMCloudSettingRequest.files(null==r?void 0:r.files),code:null==r?void 0:r.code,request_params:null==r?void 0:r.params,request_kv:null==r?void 0:r.requestKV}):this.logger.info(U.RTM_CLOUD_REPORT_NOTIFY+" not report")},Ye.prototype.loginReport=function(e,t,r,n,o){var s=this,a=Q.kZMLoginRoom,l=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:""},a.event);return l.setAttributes({svr_env:a.svr_env(this.stateCenter.testEnvironment?"test":"online"),token:a.token(n)}),o&&("boolean"==typeof o.userUpdate&&l.setAttribute("user_state_update",a.user_state_update(o.userUpdate?1:0)),"number"==typeof o.maxMemberCount&&l.setAttributes({max_member_cnt:a.max_member_cnt(o.maxMemberCount)})),{interResolve:function(t){var n=s.getRoomSessionID(r),o=s.getRoomModules(r),i=s.getSessionId(r);l.setAttributes({room_id:a.room_id(r),room_sid_string:a.room_sid_string(n),liveroom_sid_string:a.liveroom_sid_string(i),try_cnt:a.try_cnt(null==(n=null==o?void 0:o.roomTryHandler)?void 0:n.retryActiveCount),server:a.server(null==(i=null==o?void 0:o.roomHandler)?void 0:i.server),room_mode:a.room_mode(s.stateCenter.isMultiRoom?1:0),role:a.role(s.stateCenter.role),audience_create_room:a.audience_create_room(s.stateCenter.roomCreateFlag?1:0),max_member_cnt:a.max_member_cnt((null==o?void 0:o.maxMemberCount)||0)}),l.end(),e(t)},interReject:function(e,n){var o,i;void 0===n&&(n=""),l.setAttributes({room_id:a.room_id(r)}),e.code<2e9&&1e9<e.code||e.code<1e6?(o=D.decodeServerError(e.code,e.msg),i=D.getLiveRoomError(e.code,s.stateCenter.useNetAgent)):o={code:e.code,message:e.msg},o&&s.stateCenter.reporter.setError(l,{code:o.code,msg:o.message+n}),i&&I[i]&&(e.code=I[i].code,e.msg.includes("unknown")&&(e.msg=I[i].msg)),e.code&&e.msg&&""!==n?t({code:e.code,msg:e.msg+n}):t(e)},loginSpan:l}},Ye.prototype.logoutRoom=function(e){var t,r=this;this.logger.info(U.RTM_LOGOUT_ROOM+" call by user "+e),this.stateCenter.roomModulesList.length?void 0===e?(Ve([],this.stateCenter.roomModulesList).forEach((function(e){r.logoutSpan(e),e.roomHandler.logout(!0)})),this.cloudSetting.uninit()):"string"!=typeof e||""==e?(this.logger.error(U.RTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.logoutSpan(void 0,Q.kZMLogoutRoom.error.INPUT_PARAM)):(t=this.getRoomModules(e))?(this.logoutSpan(t),t.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit()):(this.logger.error(U.RTM_LOGOUT_ROOM+" room not exist"),this.logoutSpan(void 0,Q.kZMLogoutRoom.error.ROOM_NOT_EXIST,e)):this.logger.warn(U.RTM_LOGOUT_ROOM+" no room")},Ye.prototype.loginHall=function(e,t,r){var n=this;return new Promise((function(e,t){return Ge(n,void 0,void 0,(function(){return qe(this,(function(e){return[2]}))}))}))},Ye.prototype.loginHallReport=function(e,t,r,n){},Ye.prototype.logoutHall=function(){},Ye.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype._sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype._sendBroadcastMessage=function(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype._setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(w),t()}))},Ye.prototype._sendBarrageMessage=function(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(w),t()}))},Ye.prototype.sendRelayMessage=function(e,t,r,n,o){console.error(w)},Ye.prototype.requestJoinLive=function(e,t,r,n,o){return console.error(w),!1},Ye.prototype.inviteJoinLive=function(e,t,r,n,o){return console.error(w),!1},Ye.prototype.endJoinLive=function(e,t,r,n){return console.error(w),!1},Ye.prototype.respondJoinLive=function(e,t,r,n,o){return console.error(w),!1},Ye.prototype.getVersion=function(){return this.version},Ye.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},Ye.prototype.on=function(e,t){var r=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMListener.event},{key:""},Q.kZMOnListener.event);return r.setAttributes({listener:Q.kZMOnListener.listener(e)}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(U.RTM_ON+" listener callBack must be funciton"),this.stateCenter.reporter.setError(r,Q.kZMOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),r.end(),!0):(this.logger.error(U.RTM_ON+" event "+e+" no found"),this.stateCenter.reporter.setError(r,Q.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1)},Ye.prototype.off=function(e,t){var r=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMListener.event},{key:""},Q.kZMOffListener.event);if(r.setAttributes({listener:Q.kZMOffListener.listener(e)}),!this.stateCenter.listenerList[e])return this.logger.error(U.RTM_OFF+" listener no found"),this.stateCenter.reporter.setError(r,Q.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1;var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],r.end(),!0},Ye.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(U.RTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(U.RTM_ON+" event "+e+" no found"),!1)},Ye.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(U.RTM_OFF+" listener no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},Ye.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Ye.prototype.isLogin=function(e){return!!(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&e.isLogin()},Ye.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Ye.prototype.getAppID=function(){return this.stateCenter.appid},Ye.prototype.getUserID=function(){return this.stateCenter.idName},Ye.prototype.getUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getUserName=function(){return this.stateCenter.nickName},Ye.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},Ye.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},Ye.prototype.setRole=function(e){this.stateCenter.role=e},Ye.prototype.getSessionId=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.sessionID:"0"},Ye.prototype.getRoomSessionID=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.roomSessionID:"0"},Ye.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Ye.prototype.setAccess=function(e){this.stateCenter.configOK&&(this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=e,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.stateCenter.useNetAgent),this.cloudSetting.setOptions({unify:this.stateCenter.useNetAgent}))},Ye.prototype.enableMultiRoom=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:""},Q.kZegoEnableMultiRoom.event);return"boolean"!=typeof e?(this.logger.error(U.RTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.stateCenter.reporter.setError(t,Q.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(t.setAttribute("is_multi",Q.kZegoEnableMultiRoom.is_multi(e)),0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error(U.RTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.stateCenter.reporter.setError(t,Q.kZegoEnableMultiRoom.error.kInvalidParamError),!1):(t.end(),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0))},Ye.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},Ye.use=function(e){switch(e.type){case"message":case"live":e.install(Ye,fe,ye,Fe)}},Ye.prototype.resetRoomTokenTimer=function(e,t){(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&t&&0<t&&e.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},Ye.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Ye.prototype.sendMessage=function(e,t,r,n){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendMessage(e,t,r,n)},Ye.prototype.setProtoFormat=function(e){if(!["json","pb"].includes(e=void 0===e?"json":e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},Ye.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},Ye.prototype.sendMessageByService=function(e,t,r,n,o,i){return this.service.sendMessage(e,t,r,n,o,i)},Ye.prototype.getHeader=function(e){var t,r,n=this.stateCenter.roomModulesList[0];if(n&&n.isLogin())return t=n.roomID,r=n.sessionID,n=n.roomSessionID,this.service.getHeader(e,r,t,n);this.logger.error(U.RTM_GET_HEADER+" room no found or no login")},Ye.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(U.RTM_SEND_PB+" type error"),!1)},Ye.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},Ye.prototype.getRoomID=function(){return this.stateCenter.roomid},Ye.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Ye.prototype.isUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getReqHead=function(e){return e="string"==typeof e&&""!==e&&this.getRoomModules(e)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(e)},Ye.prototype.sendSwitchMessage=function(e,t){return"string"==typeof e&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,void 0,!1):-1},Ye.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},Ye.prototype.logoutSpan=function(e,t,r){var n=this,o=this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMInitSetting.event},{key:Q.kZMLogoutRoom.event,par:null==e?void 0:e.roomID},Q.kZMLogoutRoom.event,!0);o.setAttributes({is_multi:Q.kZMLogoutRoom.is_multi(this.stateCenter.isMultiRoom),is_send_cmd_net:Q.kZMLogoutRoom.is_send_cmd_net(!0)}),e?o.setAttributes({room_id:Q.kZMLogoutRoom.room_id(null==e?void 0:e.roomID),room_sid_string:Q.kZMLogoutRoom.room_sid_string(null==e?void 0:e.roomSessionID),liveroom_sid_string:Q.kZMLogoutRoom.liveroom_sid_string(null==e?void 0:e.sessionID)}):"string"==typeof r&&o.setAttributes({room_id:Q.kZMLogoutRoom.room_id(r)}),t?this.stateCenter.reporter.setError(o,t):o.end(),setTimeout((function(){n.reporter.flush()}),200)},Ye.prototype.getMsgSpan=function(e,t,r){return this.stateCenter.reporter.createSpan(i.H,{key:Q.kZMLoginRoom.event,par:t},{key:e,par:t},e,r=void 0!==r&&r)},Ye.prototype.updateTimeOffsetInterval=function(){var e=this;"number"==typeof this.netAgent.timeOffset&&this.stateCenter.reporter.setTimeOffset(this.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout((function(){e.updateTimeOffsetInterval()}),9e5)},Ye);function Ye(e,t,r,n,o,a,l,c,u){var d,h=this,g=(this.logger=r,this.dataReport=n,this.reporter=o,this.cloudSetting=a,this.version=l,this.options=u,this.stateCenter=new ie(this.logger,this.dataReport),this.stateCenter.ENV=c,this.stateCenter.product=j.product,this.getReportSeq=f,this.getSeq=p,this.initCallback(),this.stateCenter.deviceID=D.generateUUID(c),this.reporter.init(e,c,this.stateCenter.deviceID),this.reporter.setLogger(this.logger),this.stateCenter.reporter=this.reporter,Q.kZMInitSetting),m=this.stateCenter.reporter.createSpan(i.H,{key:""},{key:g.event},g.event,!0);if(0!=c&&1!=c||this.setDebug(t),r="Express",null!=(n=this.options)&&n.reportData&&(d=null==(a=null==(o=this.options)?void 0:o.reportData)?void 0:a.version,r=(null==(u=null==(l=this.options)?void 0:l.reportData)?void 0:u.project)||r),m.setAttributes({biz_type:g.biz_type(0),project:g.project(r),servers:g.servers("string"==typeof t?[t]:t),liveroom_version:g.liveroom_version(d),is_from_cache:g.is_from_cache(!1),sev_env:g.sev_env(this.stateCenter.testEnvironment?"test":"online")}),D.checkConfigParam(e,t,this.logger)){this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=E.MODE_TEST),this.netAgent=new k,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),this.netAgent.setAppInfo({appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode}),this.liveRoomHandler=new Fe(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new ye(this.stateCenter,this.logger,this),this.stateCenter.settingConfig=new Ee,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:Z.product,appID:e,urls:Z.URL,env:c,pollingNotify:function(e,t){h.logger.info(U.RTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),h.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent}),(n=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info(U.RTM_CONSTRUCTOR+" setting remote_log_level default "+n),this.logger.setRemoteLogLevel(n)),o="",0===c?o="rtc":1===c&&(o="xcx"),this.cloudSetting.setEnvVariable("environment",o),a=this.cloudSetting.getSettingCache(H),l=this.cloudSetting.getSettingCache("room");var v=!1,_=setTimeout((function(){h.logger.warn(U.RTM_CONSTRUCTOR+" time out, get cache settings failed!"),h.stateCenter.useNetAgent&&(v=!0,h.createNetAgent(),h.getStoreAppConfig()),m.setAttributes({use_na:g.use_na(h.stateCenter.useNetAgent?1:0)}),m.end()}),3e3);if(Promise.all([a,l]).then((function(r){_&&clearTimeout(_);var n=null==r?void 0:r[0],o=(h.stateCenter.settingConfig.setSetting(null==n?void 0:n.setting),h.stateCenter.useNetAgent=h.getSettingUnify(h.stateCenter.netHasSet),h.cloudSetting.setOptions({unify:h.stateCenter.useNetAgent}),h.stateCenter.useNetAgent&&!v&&(h.createNetAgent(),h.getStoreAppConfig()),(a=h.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(h.logger.info(U.RTM_CONSTRUCTOR+"  setting remote_log_level "+a),h.logger.setRemoteLogLevel(a)),(a=h.stateCenter.settingConfig.getSetting("report_script"))?(o=a.url,s=a.key,a=a.hash,h.logger.info(U.RTM_CONSTRUCTOR+" report script "+o+" "+s+" "+a),h.stateCenter.reporter.loadScript(!1,o,s,a),m.setAttributes({lua_md5:g.lua_md5(a)})):h.stateCenter.reporter.loadScript(!1,"","",""),null==r?void 0:r[1]),s=(h.stateCenter.settingConfig.setSetting(null==o?void 0:o.setting),h.stateCenter.reporter.createSpan(i.H,{key:g.event},{key:""},Q.kZMCloudSettingCache.event)),a=(s.setAttributes({files:Q.kZMCloudSettingCache.files([{name:H,content:JSON.stringify(null==n?void 0:n.setting),versions:JSON.stringify(null==n?void 0:n.versions),code:0,message:""},{name:"room",content:JSON.stringify(null==o?void 0:o.setting),versions:JSON.stringify(null==o?void 0:o.versions),code:0,message:""}])}),s.end(),m.setAttributes({use_na:g.use_na(h.stateCenter.useNetAgent?1:0)}),m.end(),Array.isArray(t)?t[0]:t);if(!h.stateCenter.useNetAgent&&!D.isRightServerForAppid(a,e))throw h.logger.error(U.RTM_CONSTRUCTOR+" the server does not match the appID"),new Error("The server does not match the appID")})).catch((function(e){_&&clearTimeout(_),m.setAttributes({use_na:g.use_na(h.stateCenter.useNetAgent?1:0)}),m.end(),h.logger.warn(U.RTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(e))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&0<t.length&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),0==c||2==c)this.bindWindowListener(),this.logger.info(U.RTM_CONSTRUCTOR+"  "+navigator.appVersion+" "+this.version),this.stateCenter.networkState=!navigator||navigator.onLine?s.online:s.offline,u="Firefox"===D.getBrowser()?null===navigator||void 0===navigator?void 0:navigator.userAgent:null===navigator||void 0===navigator?void 0:navigator.appVersion,m.setAttribute("sys_info",u||""),this.initSpans();else if(1==c||3==c){this.bindWxListener();try{var y=wx.getSystemInfoSync(),b={brand:y.brand,model:y.model,system:y.system,platform:y.platform,version:y.version,SDKVersion:y.SDKVersion};this.logger.warn(U.RTM_CONSTRUCTOR+" "+JSON.stringify(b)),m.setAttribute("mini_sys_infos",b),m.end()}catch(r){this.logger.warn(U.RTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error(U.RTM_CONSTRUCTOR+" init sdk error"),this.stateCenter.reporter.setError(m,g.error.kInvalidParamError)}var Ke=r(14),$e=(Qe.prototype.setLog=function(e){this.zegoSetting.setLog(e)},Qe.prototype.init=function(e){this.zegoSetting.init(e)},Qe.prototype.setEnvVariable=function(e,t){this.zegoSetting.setEnvVariable(e,t)},Qe.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},Qe.prototype.fetchSetting=function(e,t,r){return this.zegoSetting.fetchSetting(e,t,r)},Qe.prototype.fetchMultiSetting=function(e,t,r){return this.zegoSetting.fetchMultiSetting(e,t,r)},Qe.prototype.setOptions=function(e){return this.zegoSetting.setOptions(e)},Qe.prototype.getSettingCache=function(e){return this.zegoSetting.getSettingCache(e)},Qe.prototype.setToken=function(e){this.zegoSetting.setToken(e)},Qe.prototype.setUserID=function(e){this.zegoSetting.setUserID(e)},Qe.prototype.activePolling=function(){this.zegoSetting.activePolling()},Qe.prototype.uninit=function(){var e;null!=(e=this.zegoSetting)&&e.uninit()},Qe.prototype.getEnvVariable=function(e){this.zegoSetting.getEnvVariable(e)},Qe);function Qe(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new Ke.ZegoSetting}var Xe=r(9),Je=function(){return(Je=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},et=(tt.prototype.init=function(e,t,r){var n=this;this.tracer.init({product:this.product,version:"1.0.0",env:t,appID:e,deviceID:r,importantLevel:j.importLevel,levels:j.levels,bps:j.bps,spanStart:function(e){try{"function"==typeof scriptSpanStart&&scriptSpanStart(n.commonStates,n.tracer,e)}catch(e){n.logger.warn(U.TRACER_INIT+" dy span start ",JSON.stringify(e))}},spanBeforeEnd:function(e){e.setAttribute("ntype_end",D.getNetType())},spanEnd:function(e,t){try{"function"==typeof scriptSpanEnd&&scriptSpanEnd(n.commonStates,n.tracer,e)}catch(e){n.logger.warn(U.TRACER_INIT+" dy span end ",JSON.stringify(e))}},resources:{product:this.product,appid:e,device_id:r,console:0==t?"rtc":"xcx"}})},tt.prototype.setConfig=function(e){this.tracer.setConfig(e)},tt.prototype.loadScript=function(e,t,r,n){return function(e,t,r,n){return new(r=r||Promise)((function(t,o){function i(e){try{a(n.next(e))}catch(e){o(e)}}function s(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?t(e.value):((n=e.value)instanceof r?n:new r((function(e){e(n)}))).then(i,s)}a((n=n.apply(e,[])).next())}))}(this,0,void 0,(function(){var o;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(a){l=[6,a],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.tracer.loadJs(e,t,r,n,"\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n",{})];case 1:return i.sent(),"function"==typeof scriptInit&&scriptInit(this.commonStates,this.tracer),[3,3];case 2:return o=i.sent(),this.logger.warn(U.TRACER_LOAD_SCRIPT," load script fail "+JSON.stringify(o)),[3,3];case 3:return[2]}}))}))},tt.prototype.setReporterInfo=function(e,t){var r=new Map;r.set("userID",e),r.set("token",t),this.tracer.startReport(r)},tt.prototype.flush=function(e){this.tracer.flush(e)},tt.prototype.setCommonStates=function(e){this.commonStates=e},tt.prototype.setResource=function(e){this.tracer.setResource(e)},tt.prototype.setCommonAttributes=function(e){this.commonAttrs=Object.assign({},this.commonAttrs,e)},tt.prototype.createSpan=function(e,t,r){return(e=this.tracer.createSpan(e,t,{parent:r})).setAttributes(Je({ntype:D.getNetType(),error:0,message:""},this.commonAttrs)),e},tt.prototype.spanEnd=function(e,t){e&&t&&e.setAttributes(Je({},t)),e&&e.end()},tt.prototype.spanSetAttributes=function(e,t){e&&e.setAttributes(t)},tt.prototype.spanAppendAttribute=function(e,t,r){e&&e.appendAttribute(t,r)},tt.prototype.setError=function(e,t,r){e.setAttributes({error:t.code||t.errorCode,message:(t.msg||t.message||t.extendedData)+" "+(r=void 0===r?"":r)}),e.end()},tt.prototype.setLogger=function(e){this.tracer.setLogger(e)},tt.prototype.setTimeOffset=function(e){this.tracer.setTimeOffset(e)},tt);function tt(e){this.logger=e,this.product=j.product,this.commonAttrs={},this.commonStates={},new Xe.DynamicCode,this.tracer=new Xe.ZegoTracer,this.tracer.setSampleConfig({level:i.L})}var rt=["/sdk/start_publish","/publish/start","/publish/restart"],nt=["/sdk/start_play","/play/start","/play/restart"],ot=(it.prototype.init=function(e,t,r){this.tracerHandler.init(e,t,r)},it.prototype.setConfig=function(e){this.tracerHandler.setConfig(e)},it.prototype.loadScript=function(e,t,r,n){return this.tracerHandler.loadScript(e,t,r,n)},it.prototype.setReporterInfo=function(e,t){this.tracerHandler.setReporterInfo(e,t)},it.prototype.flush=function(e){this.tracerHandler.flush(e)},it.prototype.setCommonStates=function(e){this.tracerHandler.setCommonStates(e)},it.prototype.setResource=function(e){this.tracerHandler.setResource(e)},it.prototype.setCommonAttributes=function(e){this.tracerHandler.setCommonAttributes(e)},it.prototype.setPublicPros=function(e){this.publicPros=Object.assign({},this.publicPros,e)},it.prototype.createSpan=function(e,t,r,n,o){var i;t&&t.key&&t.par?(s=t.par1?"_"+t.par1:"",!(i=null==(i=this.reportList[t.key])?void 0:i[t.par+s])&&t.bak_key&&(i=null==(a=this.reportList[t.bak_key])?void 0:a[t.par+s])):t&&!(i=this.reportList[t.key])&&t.bak_key&&(i=this.reportList[t.bak_key]),i=i||this.reportList[Q.kZMInitSetting.event];var s,a=this.tracerHandler.createSpan(e,n,i);return"/sdk/login"===t.key&&(a.setAttribute("room_id",t.par),this.publicPros[t.par]&&a.setAttributes(this.publicPros[t.par])),(rt.includes(t.key)||nt.includes(t.key))&&a.setAttribute("stream_id",t.par),rt.includes(t.key)&&this.publicPros["_publish_"+t.par]&&a.setAttributes(this.publicPros["_publish_"+t.par]),nt.includes(t.key)&&this.publicPros["_play_"+t.par]&&a.setAttributes(this.publicPros["_play_"+t.par]),o&&(r.par?(this.reportList[r.key]||(this.reportList[r.key]={}),s=r.par1?"_"+r.par1:"",this.reportList[r.key][r.par+s]=a):this.reportList[r.key]=a),a},it.prototype.setSpanInMap=function(e,t){var r;t.par?(this.reportList[t.key]||(this.reportList[t.key]={}),r=t.par2?"_"+t.par2:"",this.reportList[t.key][t.par+r]=e):this.reportList[t.key]=e},it.prototype.spanEnd=function(e,t,r){var n;e.par?(n=e.par1?"_"+e.par1:"",n=this.reportList[e.key]&&this.reportList[e.key][e.par+n],this.reportList[e.key]&&!r&&delete this.reportList[e.key][e.par]):(n=this.reportList[e.key],r||delete this.reportList[e.key]),this.tracerHandler.spanEnd(n,t)},it.prototype.spanSetAttributes=function(e,t){var r,n;e.par?(r=e.par1?"_"+e.par1:"",!(n=this.reportList[e.key]&&this.reportList[e.key][e.par+r])&&e.bak_key&&(n=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+r])):!(n=this.reportList[e.key])&&e.bak_key&&(n=this.reportList[e.key]),this.tracerHandler.spanSetAttributes(n,t)},it.prototype.spanAppendAttribute=function(e,t,r){var n,o;e.par?(n=e.par1?"_"+e.par1:"",!(o=this.reportList[e.key]&&this.reportList[e.key][e.par+n])&&e.bak_key&&(o=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+n])):!(o=this.reportList[e.key])&&e.bak_key&&(o=this.reportList[e.key]),this.tracerHandler.spanAppendAttribute(o,t,r)},it.prototype.setError=function(e,t,r){this.tracerHandler.setError(e,t,r)},it.prototype.setLogger=function(e){this.tracerHandler.setLogger(e)},it.prototype.setTimeOffset=function(e){this.tracerHandler.setTimeOffset(e)},it);function it(e){this.logger=e,this.reportList={},this.publicPros={},this.tracerHandler=new et(e)}at.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},at.prototype.loginRoom=function(e,t,r,n){return this.zegoWebRTM.loginRoom(e,t,r,n)},at.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},at.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},at.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},at.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},at.prototype.sendCustomCommand=function(e,t,r){return this.zegoWebRTM.sendCustomCommand(e,t,r)},at.prototype.setRoomExtraInfo=function(e,t,r){return this.zegoWebRTM.setRoomExtraInfo(e,t,r)},at.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},at.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},at.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},at.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},at.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},at.prototype.loginHall=function(e,t,r){return this.zegoWebRTM.loginHall(e,t,r)},at.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},at.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},at.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},at.use=function(e){We.use(e)},at.version="1.21.0";var st=at;function at(e,t,r,n){this.logger=new d.ZegoLogger(r=void 0===r?0:r),this.dataReport=new d.ZegoDataReport(this.logger),this.cloudSetting=new $e,this.reporter=new ot(this.logger),this.zegoWebRTM=new We(e,t,this.logger,this.dataReport,this.reporter,this.cloudSetting,at.version,r,n)}}],n={},t.m=r,t.c=n,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22);function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r,n}(r(2100))},4836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7462:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},3366:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}r.d(t,{Z:()=>n})}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!e;)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e,t=__webpack_require__(7294),r=__webpack_require__.t(t,2),n=__webpack_require__(745),o=__webpack_require__(3379),i=__webpack_require__.n(o),s=__webpack_require__(7795),a=__webpack_require__.n(s),l=__webpack_require__(569),c=__webpack_require__.n(l),u=__webpack_require__(3565),d=__webpack_require__.n(u),h=__webpack_require__(9216),p=__webpack_require__.n(h),f=__webpack_require__(4589),g=__webpack_require__.n(f),m=__webpack_require__(2751),v={};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}v.styleTagTransform=g(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=p(),i()(m.Z,v),m.Z&&m.Z.locals&&m.Z.locals,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const y="popstate";function b(t){return void 0===t&&(t={}),function(t,r,n,o){void 0===o&&(o={});let{window:i=document.defaultView,v5Compat:s=!1}=o,a=i.history,l=e.Pop,c=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){l=e.Pop;let t=d(),r=null==t?null:t-u;u=t,c&&c({action:l,location:f.location,delta:r})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"==typeof e?e:w(e);return E(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==u&&(u=0,a.replaceState(_({},a.state,{idx:u}),""));let f={get action(){return l},get location(){return t(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(y,h),c=e,()=>{i.removeEventListener(y,h),c=null}},createHref:e=>r(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){l=e.Push;let o=T(f.location,t,r);n&&n(o,t),u=d()+1;let h=C(o,u),p=f.createHref(o);try{a.pushState(h,"",p)}catch(e){i.location.assign(p)}s&&c&&c({action:l,location:f.location,delta:1})},replace:function(t,r){l=e.Replace;let o=T(f.location,t,r);n&&n(o,t),u=d();let i=C(o,u),h=f.createHref(o);a.replaceState(i,"",h),s&&c&&c({action:l,location:f.location,delta:0})},go:e=>a.go(e)};return f}((function(e,t){let{pathname:r,search:n,hash:o}=e.location;return T("",{pathname:r,search:n,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:w(t)}),null,t)}function E(e,t){if(!1===e||null==e)throw new Error(t)}function S(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function T(e,t,r,n){return void 0===r&&(r=null),_({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?R(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function w(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function R(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var k;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(k||(k={}));const O=new Set(["lazy","caseSensitive","path","id","index","children"]);function I(e,t,r,n){return void 0===r&&(r=[]),void 0===n&&(n={}),e.map(((e,o)=>{let i=[...r,o],s="string"==typeof e.id?e.id:i.join("-");if(E(!0!==e.index||!e.children,"Cannot specify children on an index route"),E(!n[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let r=_({},e,t(e),{id:s});return n[s]=r,r}{let r=_({},e,t(e),{id:s,children:void 0});return n[s]=r,e.children&&(r.children=I(e.children,t,i,n)),r}}))}function P(e,t,r){void 0===r&&(r="/");let n=G(("string"==typeof t?R(t):t).pathname||"/",r);if(null==n)return null;let o=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let e=0;null==i&&e<o.length;++e)i=H(o[e],z(n));return i}function A(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let o=(e,o,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};s.relativePath.startsWith("/")&&(E(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(n.length));let a=Y([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(E(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),A(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:j(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let r of N(e.path))o(e,t,r);else o(e,t)})),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,o=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return o?[i,""]:[i];let s=N(n.join("/")),a=[];return a.push(...s.map((e=>""===e?i:[i,e].join("/")))),o&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const L=/^:\w+$/,M=3,x=2,D=1,B=10,U=-2,Z=e=>"*"===e;function j(e,t){let r=e.split("/"),n=r.length;return r.some(Z)&&(n+=U),t&&(n+=x),r.filter((e=>!Z(e))).reduce(((e,t)=>e+(L.test(t)?M:""===t?D:B)),n)}function H(e,t){let{routesMeta:r}=e,n={},o="/",i=[];for(let e=0;e<r.length;++e){let s=r[e],a=e===r.length-1,l="/"===o?t:t.slice(o.length)||"/",c=F({path:s.relativePath,caseSensitive:s.caseSensitive,end:a},l);if(!c)return null;Object.assign(n,c.params);let u=s.route;i.push({params:n,pathname:Y([o,c.pathname]),pathnameBase:K(Y([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=Y([o,c.pathnameBase]))}return i}function F(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),S("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(n.push(t),"/([^\\/]+)")));return e.endsWith("*")?(n.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),a=o.slice(1),l=n.reduce(((e,t,r)=>{if("*"===t){let e=a[r]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return S(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(a[r]||"",t),e}),{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function z(e){try{return decodeURI(e)}catch(t){return S(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function G(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function q(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function V(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function W(e,t,r,n){let o;void 0===n&&(n=!1),"string"==typeof e?o=R(e):(o=_({},e),E(!o.pathname||!o.pathname.includes("?"),q("?","pathname","search",o)),E(!o.pathname||!o.pathname.includes("#"),q("#","pathname","hash",o)),E(!o.search||!o.search.includes("#"),q("#","search","hash",o)));let i,s=""===e||""===o.pathname,a=s?"/":o.pathname;if(n||null==a)i=r;else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:o=""}="string"==typeof e?R(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:$(n),hash:Q(o)}}(o,i),c=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Y=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class X{constructor(e,t,r,n){void 0===n&&(n=!1),this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function J(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const ee=["post","put","patch","delete"],te=new Set(ee),re=["get",...ee],ne=new Set(re),oe=new Set([301,302,303,307,308]),ie=new Set([307,308]),se={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ae={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},le={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,de=!ue,he=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)});function pe(e,t,r,n,o,i,s){let a,l;if(null!=i&&"path"!==s){a=[];for(let e of t)if(a.push(e),e.route.id===i){l=e;break}}else a=t,l=t[t.length-1];let c=W(o||".",V(a).map((e=>e.pathnameBase)),G(e.pathname,r)||e.pathname,"path"===s);return null==o&&(c.search=e.search,c.hash=e.hash),null!=o&&""!==o&&"."!==o||!l||!l.route.index||xe(c.search)||(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n&&"/"!==r&&(c.pathname="/"===c.pathname?r:Y([r,c.pathname])),w(c)}function fe(e,t,r,n){if(!n||!function(e){return null!=e&&"formData"in e}(n))return{path:r};if(n.formMethod&&(o=n.formMethod,!ne.has(o.toLowerCase())))return{path:r,error:Re(405,{method:n.formMethod})};var o;let i;if(n.formData){let t=n.formMethod||"get";if(i={formMethod:e?t.toUpperCase():t.toLowerCase(),formAction:Oe(r),formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:n.formData},Ne(i.formMethod))return{path:r,submission:i}}let s=R(r),a=Ee(n.formData);return t&&s.search&&xe(s.search)&&a.append("index",""),s.search="?"+a,{path:w(s),submission:i}}function ge(e,t,r,n,o,i,s,a,l,c,u,d,h){let p=h?Object.values(h)[0]:d?Object.values(d)[0]:void 0,f=e.createURL(t.location),g=e.createURL(o),m=h?Object.keys(h)[0]:void 0,v=function(e,t){let r=e;if(t){let n=e.findIndex((e=>e.route.id===t));n>=0&&(r=e.slice(0,n))}return r}(r,m).filter(((e,r)=>{if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,r){let n=!t||r.route.id!==t.route.id,o=void 0===e[r.route.id];return n||o}(t.loaderData,t.matches[r],e)||s.some((t=>t===e.route.id)))return!0;let o=t.matches[r],a=e;return ve(e,_({currentUrl:f,currentParams:o.params,nextUrl:g,nextParams:a.params},n,{actionResult:p,defaultShouldRevalidate:i||f.pathname+f.search===g.pathname+g.search||f.search!==g.search||me(o,a)}))})),y=[];return l.forEach(((e,o)=>{if(!r.some((t=>t.route.id===e.routeId)))return;let s=P(c,e.path,u);if(!s)return void y.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=Be(s,e.path);(a.includes(o)||ve(l,_({currentUrl:f,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:r[r.length-1].params},n,{actionResult:p,defaultShouldRevalidate:i})))&&y.push({key:o,routeId:e.routeId,path:e.path,matches:s,match:l,controller:new AbortController})})),[v,y]}function me(e,t){let r=e.route.path;return e.pathname!==t.pathname||null!=r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function ve(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if("boolean"==typeof r)return r}return t.defaultShouldRevalidate}async function _e(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let o=r[e.id];E(o,"No route found in manifest");let i={};for(let e in n){let t=void 0!==o[e]&&"hasErrorBoundary"!==e;S(!t,'Route "'+o.id+'" has a static property "'+e+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+e+'" will be ignored.'),t||O.has(e)||(i[e]=n[e])}Object.assign(o,i),Object.assign(o,_({},t(o),{lazy:void 0}))}async function ye(e,t,r,n,o,i,s,a,l,c){let u,d,h;void 0===a&&(a=!1),void 0===l&&(l=!1);let p=e=>{let n,o=new Promise(((e,t)=>n=t));return h=()=>n(),t.signal.addEventListener("abort",h),Promise.race([e({request:t,params:r.params,context:c}),o])};try{let n=r.route[e];if(r.route.lazy)if(n)d=(await Promise.all([p(n),_e(r.route,i,o)]))[0];else{if(await _e(r.route,i,o),n=r.route[e],!n){if("action"===e){let e=new URL(t.url),n=e.pathname+e.search;throw Re(405,{method:t.method,pathname:n,routeId:r.route.id})}return{type:k.data,data:void 0}}d=await p(n)}else{if(!n){let e=new URL(t.url);throw Re(404,{pathname:e.pathname+e.search})}d=await p(n)}E(void 0!==d,"You defined "+("action"===e?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(e){u=k.error,d=e}finally{h&&t.signal.removeEventListener("abort",h)}if(null!=(f=d)&&"number"==typeof f.status&&"string"==typeof f.statusText&&"object"==typeof f.headers&&void 0!==f.body){let e,o=d.status;if(oe.has(o)){let e=d.headers.get("Location");if(E(e,"Redirects returned/thrown from loaders/actions must have a Location header"),ce.test(e)){if(!a){let r=new URL(t.url),n=e.startsWith("//")?new URL(r.protocol+e):new URL(e),o=null!=G(n.pathname,s);n.origin===r.origin&&o&&(e=n.pathname+n.search+n.hash)}}else e=pe(new URL(t.url),n.slice(0,n.indexOf(r)+1),s,!0,e);if(a)throw d.headers.set("Location",e),d;return{type:k.redirect,status:o,location:e,revalidate:null!==d.headers.get("X-Remix-Revalidate")}}if(l)throw{type:u||k.data,response:d};let i=d.headers.get("Content-Type");return e=i&&/\bapplication\/json\b/.test(i)?await d.json():await d.text(),u===k.error?{type:u,error:new X(o,d.statusText,e),headers:d.headers}:{type:k.data,data:e,statusCode:d.status,headers:d.headers}}var f,g,m;return u===k.error?{type:u,error:d}:function(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}(d)?{type:k.deferred,deferredData:d,statusCode:null==(g=d.init)?void 0:g.status,headers:(null==(m=d.init)?void 0:m.headers)&&new Headers(d.init.headers)}:{type:k.data,data:d}}function be(e,t,r,n){let o=e.createURL(Oe(t)).toString(),i={signal:r};if(n&&Ne(n.formMethod)){let{formMethod:e,formEncType:t,formData:r}=n;i.method=e.toUpperCase(),i.body="application/x-www-form-urlencoded"===t?Ee(r):r}return new Request(o,i)}function Ee(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,n instanceof File?n.name:n);return t}function Se(e,t,r,n,o,i,s,a){let{loaderData:l,errors:c}=function(e,t,r,n,o){let i,s={},a=null,l=!1,c={};return r.forEach(((r,u)=>{let d=t[u].route.id;if(E(!Ae(r),"Cannot handle redirect results in processLoaderData"),Pe(r)){let t=Te(e,d),o=r.error;n&&(o=Object.values(n)[0],n=void 0),a=a||{},null==a[t.route.id]&&(a[t.route.id]=o),s[d]=void 0,l||(l=!0,i=J(r.error)?r.error.status:500),r.headers&&(c[d]=r.headers)}else Ie(r)?(o.set(d,r.deferredData),s[d]=r.deferredData.data):s[d]=r.data,null==r.statusCode||200===r.statusCode||l||(i=r.statusCode),r.headers&&(c[d]=r.headers)})),n&&(a=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:a,statusCode:i||200,loaderHeaders:c}}(t,r,n,o,a);for(let t=0;t<i.length;t++){let{key:r,match:n,controller:o}=i[t];E(void 0!==s&&void 0!==s[t],"Did not find corresponding fetcher result");let a=s[t];if(!o||!o.signal.aborted)if(Pe(a)){let t=Te(e.matches,null==n?void 0:n.route.id);c&&c[t.route.id]||(c=_({},c,{[t.route.id]:a.error})),e.fetchers.delete(r)}else if(Ae(a))E(!1,"Unhandled fetcher revalidation redirect");else if(Ie(a))E(!1,"Unhandled fetcher deferred data");else{let t={state:"idle",data:a.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(r,t)}}return{loaderData:l,errors:c}}function Ce(e,t,r,n){let o=_({},t);for(let i of r){let r=i.route.id;if(t.hasOwnProperty(r)?void 0!==t[r]&&(o[r]=t[r]):void 0!==e[r]&&i.route.loader&&(o[r]=e[r]),n&&n.hasOwnProperty(r))break}return o}function Te(e,t){let r=t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e];return r.reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function we(e){let t=e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Re(e,t){let{pathname:r,routeId:n,method:o,type:i}=void 0===t?{}:t,s="Unknown Server Error",a="Unknown @remix-run/router error";return 400===e?(s="Bad Request",o&&r&&n?a="You made a "+o+' request to "'+r+'" but did not provide a `loader` for route "'+n+'", so there is no way to handle the request.':"defer-action"===i&&(a="defer() is not supported in actions")):403===e?(s="Forbidden",a='Route "'+n+'" does not match URL "'+r+'"'):404===e?(s="Not Found",a='No route matches URL "'+r+'"'):405===e&&(s="Method Not Allowed",o&&r&&n?a="You made a "+o.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+n+'", so there is no way to handle the request.':o&&(a='Invalid request method "'+o.toUpperCase()+'"')),new X(e||500,s,new Error(a),!0)}function ke(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Ae(r))return r}}function Oe(e){return w(_({},"string"==typeof e?R(e):e,{hash:""}))}function Ie(e){return e.type===k.deferred}function Pe(e){return e.type===k.error}function Ae(e){return(e&&e.type)===k.redirect}function Ne(e){return te.has(e.toLowerCase())}async function Le(e,t,r,n,o,i){for(let s=0;s<r.length;s++){let a=r[s],l=t[s];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),u=null!=c&&!me(c,l)&&void 0!==(i&&i[l.route.id]);if(Ie(a)&&(o||u)){let e=n[s];E(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Me(a,e,o).then((e=>{e&&(r[s]=e||r[s])}))}}}async function Me(e,t,r){if(void 0===r&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:k.data,data:e.deferredData.unwrappedData}}catch(e){return{type:k.error,error:e}}return{type:k.data,data:e.deferredData.data}}}function xe(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function De(e,t){let{route:r,pathname:n,params:o}=e;return{id:r.id,pathname:n,params:o,data:t[r.id],handle:r.handle}}function Be(e,t){let r="string"==typeof t?R(t).search:t.search;if(e[e.length-1].route.index&&xe(r||""))return e[e.length-1];let n=V(e);return n[n.length-1]}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ue.apply(this,arguments)}Symbol("deferred");const Ze=t.createContext(null),je=t.createContext(null),He=t.createContext(null),Fe=t.createContext(null),ze=t.createContext({outlet:null,matches:[],isDataRoute:!1}),Ge=t.createContext(null);function qe(){return null!=t.useContext(Fe)}function Ve(){return qe()||E(!1),t.useContext(Fe).location}function We(e){t.useContext(He).static||t.useLayoutEffect(e)}function Ye(){let{isDataRoute:e}=t.useContext(ze);return e?function(){let{router:e}=function(e){let r=t.useContext(Ze);return r||E(!1),r}(rt.UseNavigateStable),r=it(nt.UseNavigateStable),n=t.useRef(!1);We((()=>{n.current=!0}));let o=t.useCallback((function(t,o){void 0===o&&(o={}),n.current&&("number"==typeof t?e.navigate(t):e.navigate(t,Ue({fromRouteId:r},o)))}),[e,r]);return o}():function(){qe()||E(!1);let e=t.useContext(Ze),{basename:r,navigator:n}=t.useContext(He),{matches:o}=t.useContext(ze),{pathname:i}=Ve(),s=JSON.stringify(V(o).map((e=>e.pathnameBase))),a=t.useRef(!1);We((()=>{a.current=!0}));let l=t.useCallback((function(t,o){if(void 0===o&&(o={}),!a.current)return;if("number"==typeof t)return void n.go(t);let l=W(t,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==r&&(l.pathname="/"===l.pathname?r:Y([r,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)}),[r,n,s,i,e]);return l}()}const Ke=t.createContext(null);function $e(e,r){let{relative:n}=void 0===r?{}:r,{matches:o}=t.useContext(ze),{pathname:i}=Ve(),s=JSON.stringify(V(o).map((e=>e.pathnameBase)));return t.useMemo((()=>W(e,JSON.parse(s),i,"path"===n)),[e,s,i,n])}function Qe(r,n,o){qe()||E(!1);let{navigator:i}=t.useContext(He),{matches:s}=t.useContext(ze),a=s[s.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,d=Ve();if(n){var h;let e="string"==typeof n?R(n):n;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||E(!1),u=e}else u=d;let p=u.pathname||"/",f=P(r,{pathname:"/"===c?p:p.slice(c.length)||"/"}),g=function(e,r,n){var o;if(void 0===r&&(r=[]),void 0===n&&(n=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}let s=e,a=null==(o=n)?void 0:o.errors;if(null!=a){let e=s.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||E(!1),s=s.slice(0,Math.min(s.length,e+1))}return s.reduceRight(((e,o,i)=>{let l=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;n&&(c=o.route.errorElement||Je);let u=r.concat(s.slice(0,i+1)),d=()=>{let r;return r=l?c:o.route.Component?t.createElement(o.route.Component,null):o.route.element?o.route.element:e,t.createElement(tt,{match:o,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:r})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===i)?t.createElement(et,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):d()}),null)}(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Y([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Y([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,o);return n&&g?t.createElement(Fe.Provider,{value:{location:Ue({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:e.Pop}},g):g}function Xe(){let e=function(){var e;let r=t.useContext(Ge),n=function(e){let r=t.useContext(je);return r||E(!1),r}(nt.UseRouteError),o=it(nt.UseRouteError);return r||(null==(e=n.errors)?void 0:e[o])}(),r=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:o},n):null,null)}const Je=t.createElement(Xe,null);class et extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(ze.Provider,{value:this.props.routeContext},t.createElement(Ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tt(e){let{routeContext:r,match:n,children:o}=e,i=t.useContext(Ze);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(ze.Provider,{value:r},o)}var rt,nt,ot;function it(e){let r=function(e){let r=t.useContext(ze);return r||E(!1),r}(),n=r.matches[r.matches.length-1];return n.route.id||E(!1),n.route.id}function st(e){let{fallbackElement:r,router:n}=e,[o,i]=t.useState(n.state);t.useLayoutEffect((()=>n.subscribe(i)),[n,i]);let s=t.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),a=n.basename||"/",l=t.useMemo((()=>({router:n,navigator:s,static:!1,basename:a})),[n,s,a]);return t.createElement(t.Fragment,null,t.createElement(Ze.Provider,{value:l},t.createElement(je.Provider,{value:o},t.createElement(ct,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:s},n.state.initialized?t.createElement(at,{routes:n.routes,state:o}):r))),null)}function at(e){let{routes:t,state:r}=e;return Qe(t,void 0,r)}function lt(e){return function(e){let r=t.useContext(ze).outlet;return r?t.createElement(Ke.Provider,{value:e},r):r}(e.context)}function ct(r){let{basename:n="/",children:o=null,location:i,navigationType:s=e.Pop,navigator:a,static:l=!1}=r;qe()&&E(!1);let c=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:c,navigator:a,static:l})),[c,a,l]);"string"==typeof i&&(i=R(i));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:g="default"}=i,m=t.useMemo((()=>{let e=G(d,c);return null==e?null:{location:{pathname:e,search:h,hash:p,state:f,key:g},navigationType:s}}),[c,d,h,p,f,g,s]);return null==m?null:t.createElement(He.Provider,{value:u},t.createElement(Fe.Provider,{children:o,value:m}))}function ut(e){let r={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(r,{element:t.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(r,{errorElement:t.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),r}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(rt||(rt={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(nt||(nt={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ot||(ot={})),new Promise((()=>{})),t.Component;const dt=function(){return t.createElement("div",null,"It's About Us Page")},ht=function(){return t.createElement("div",null,"It's Contact Us Page")};var pt=__webpack_require__(3366),ft=__webpack_require__(7462),gt=__webpack_require__(6010),mt=__webpack_require__(9766),vt=__webpack_require__(8010);const _t=["sx"],yt=e=>{var t,r;const n={systemProps:{},otherProps:{}},o=null!=(t=null==e||null==(r=e.theme)?void 0:r.unstable_sxConfig)?t:vt.Z;return Object.keys(e).forEach((t=>{o[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n};function bt(e){const{sx:t}=e,r=(0,pt.Z)(e,_t),{systemProps:n,otherProps:o}=yt(r);let i;return i=Array.isArray(t)?[n,...t]:"function"==typeof t?(...e)=>{const r=t(...e);return(0,mt.P)(r)?(0,ft.Z)({},n,r):n}:(0,ft.Z)({},n,t),(0,ft.Z)({},o,{sx:i})}var Et=__webpack_require__(4780),St=__webpack_require__(948),Ct=__webpack_require__(1657),Tt=__webpack_require__(8216),wt=__webpack_require__(1588),Rt=__webpack_require__(4867);function kt(e){return(0,Rt.Z)("MuiTypography",e)}(0,wt.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Ot=__webpack_require__(5893);const It=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Pt=(0,St.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t[`align${(0,Tt.Z)(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((({theme:e,ownerState:t})=>(0,ft.Z)({margin:0},t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16}))),At={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Nt={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Lt=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiTypography"}),n=(e=>Nt[e]||e)(r.color),o=bt((0,ft.Z)({},r,{color:n})),{align:i="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=At}=o,p=(0,pt.Z)(o,It),f=(0,ft.Z)({},o,{align:i,color:n,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),g=a||(u?"p":h[d]||At[d])||"span",m=(e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:o,variant:i,classes:s}=e,a={root:["root",i,"inherit"!==e.align&&`align${(0,Tt.Z)(t)}`,r&&"gutterBottom",n&&"noWrap",o&&"paragraph"]};return(0,Et.Z)(a,kt,s)})(f);return(0,Ot.jsx)(Pt,(0,ft.Z)({as:g,ref:t,ownerState:f,className:(0,gt.default)(m.root,s)},p))})),Mt=Lt;function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(this,arguments)}const Dt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Bt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=xt({},t,{errors:Ut(t.errors)})),t}function Ut(e){if(!e)return null;let t=Object.entries(e),r={};for(let[e,n]of t)if(n&&"RouteErrorResponse"===n.__type)r[e]=new X(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){let t=new Error(n.message);t.stack="",r[e]=t}else r[e]=n;return r}const Zt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,jt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ht=t.forwardRef((function(e,r){let n,{onClick:o,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:d}=e,h=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,Dt),{basename:p}=t.useContext(He),f=!1;if("string"==typeof u&&jt.test(u)&&(n=u,Zt))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=G(t.pathname,p);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:f=!0}catch(e){}let g=function(e,r){let{relative:n}=void 0===r?{}:r;qe()||E(!1);let{basename:o,navigator:i}=t.useContext(He),{hash:s,pathname:a,search:l}=$e(e,{relative:n}),c=a;return"/"!==o&&(c="/"===a?o:Y([o,a])),i.createHref({pathname:c,search:l,hash:s})}(u,{relative:i}),m=function(e,r){let{target:n,replace:o,state:i,preventScrollReset:s,relative:a}=void 0===r?{}:r,l=Ye(),c=Ve(),u=$e(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let r=void 0!==o?o:w(c)===w(u);l(e,{replace:r,state:i,preventScrollReset:s,relative:a})}}),[c,l,u,o,i,n,e,s,a])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i});return t.createElement("a",xt({},h,{href:n||g,onClick:f||s?o:function(e){o&&o(e),e.defaultPrevented||m(e)},ref:r,target:c}))}));var Ft,zt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ft||(Ft={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(zt||(zt={}));const Gt=function(){return t.createElement("center",null,t.createElement(Mt,{variant:"h3"},"Page Not Found Go back ",t.createElement(Ht,{to:"/"},"Home")))};function qt(e){this.message=e}qt.prototype=new Error,qt.prototype.name="InvalidCharacterError";var Vt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new qt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,s="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function Wt(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Vt(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return Vt(t)}}function Yt(e){this.message=e}Yt.prototype=new Error,Yt.prototype.name="InvalidTokenError";const Kt=function(e,t){if("string"!=typeof e)throw new Yt("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(Wt(e.split(".")[r]))}catch(e){throw new Yt("Invalid token specified: "+e.message)}};function $t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var Qt=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=$t({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",$t({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,$t({},this.attributes,t))},withConverter:function(t){return e($t({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const Xt=Qt;var Jt={username:"",name:"",isAuthenticated:!1,roles:"",authenticate:function(e){Xt.set("token",e,{expires:7,sameSite:"strict"}),this.isAuthenticated=!0;var t=Kt(e);this.name=t.name,this.roles=t.roles},logout:function(){Xt.remove("token"),this.isAuthenticated=!1,this.roles=""},getToken:function(){return Xt.get("token")},init:function(){var e=this.getToken();if(e){var t=Kt(e);this.roles=t.roles,this.isAuthenticated=!0,this.name=t.name}}};Jt.init();const er=Jt;var tr=__webpack_require__(8883),rr=__webpack_require__(6523),nr=__webpack_require__(6682);const or=["className","component"];function ir(e={}){const{defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:o}=e,i=(0,tr.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(rr.Z),s=t.forwardRef((function(e,t){const s=(0,nr.Z)(r),a=bt(e),{className:l,component:c="div"}=a,u=(0,pt.Z)(a,or);return(0,Ot.jsx)(i,(0,ft.Z)({as:c,ref:t,className:(0,gt.default)(l,o?o(n):n),theme:s},u))}));return s}var sr=__webpack_require__(7078),ar=__webpack_require__(4345);const lr=ir({defaultTheme:(0,ar.Z)(),defaultClassName:"MuiBox-root",generateClassName:sr.Z.generate});var cr=__webpack_require__(8320),ur=__webpack_require__(9628);const dr=(0,__webpack_require__(2807).ZP)();var hr=__webpack_require__(6268);const pr=["className","component","disableGutters","fixed","maxWidth","classes"],fr=(0,hr.Z)(),gr=dr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,cr.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),mr=e=>(0,ur.Z)({props:e,name:"MuiContainer",defaultTheme:fr}),vr=function(e={}){const{createStyledComponent:r=gr,useThemeProps:n=mr,componentName:o="MuiContainer"}=e,i=r((({theme:e,ownerState:t})=>(0,ft.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,r)=>{const n=r,o=e.breakpoints.values[n];return 0!==o&&(t[e.breakpoints.up(n)]={maxWidth:`${o}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>(0,ft.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}))),s=t.forwardRef((function(e,t){const r=n(e),{className:s,component:a="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=r,d=(0,pt.Z)(r,pr),h=(0,ft.Z)({},r,{component:a,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:r,fixed:n,disableGutters:o,maxWidth:i}=e,s={root:["root",i&&`maxWidth${(0,cr.Z)(String(i))}`,n&&"fixed",o&&"disableGutters"]};return(0,Et.Z)(s,(e=>(0,Rt.Z)(t,e)),r)})(h,o);return(0,Ot.jsx)(i,(0,ft.Z)({as:a,ownerState:h,className:(0,gt.default)(p.root,s),ref:t},d))}));return s}({createStyledComponent:(0,St.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,Tt.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,Ct.Z)({props:e,name:"MuiContainer"})}),_r=vr;var yr=__webpack_require__(5408),br=__webpack_require__(247);function Er(){return(0,nr.Z)(br.Z)}const Sr=t.createContext();function Cr(e){return(0,Rt.Z)("MuiGrid",e)}const Tr=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],wr=(0,wt.Z)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...Tr.map((e=>`grid-xs-${e}`)),...Tr.map((e=>`grid-sm-${e}`)),...Tr.map((e=>`grid-md-${e}`)),...Tr.map((e=>`grid-lg-${e}`)),...Tr.map((e=>`grid-xl-${e}`))]),Rr=wr,kr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Or(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function Ir({breakpoints:e,values:t}){let r="";Object.keys(t).forEach((e=>{""===r&&0!==t[e]&&(r=e)}));const n=Object.keys(e).sort(((t,r)=>e[t]-e[r]));return n.slice(0,n.indexOf(r))}const Pr=(0,St.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:n,direction:o,item:i,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=r;let u=[];n&&(u=function(e,t,r={}){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[r[`spacing-xs-${String(e)}`]];const n=[];return t.forEach((t=>{const o=e[t];Number(o)>0&&n.push(r[`spacing-${t}-${String(o)}`])})),n}(s,c,t));const d=[];return c.forEach((e=>{const n=r[e];n&&d.push(t[`grid-${e}-${String(n)}`])})),[t.root,n&&t.container,i&&t.item,l&&t.zeroMinWidth,...u,"row"!==o&&t[`direction-xs-${String(o)}`],"wrap"!==a&&t[`wrap-xs-${String(a)}`],...d]}})((({ownerState:e})=>(0,ft.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})),(function({theme:e,ownerState:t}){const r=(0,yr.P$)({values:t.direction,breakpoints:e.breakpoints.values});return(0,yr.k9)({theme:e},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${Rr.item}`]={maxWidth:"none"}),t}))}),(function({theme:e,ownerState:t}){const{container:r,rowSpacing:n}=t;let o={};if(r&&0!==n){const t=(0,yr.P$)({values:n,breakpoints:e.breakpoints.values});let r;"object"==typeof t&&(r=Ir({breakpoints:e.breakpoints.values,values:t})),o=(0,yr.k9)({theme:e},t,((t,n)=>{var o;const i=e.spacing(t);return"0px"!==i?{marginTop:`-${Or(i)}`,[`& > .${Rr.item}`]:{paddingTop:Or(i)}}:null!=(o=r)&&o.includes(n)?{}:{marginTop:0,[`& > .${Rr.item}`]:{paddingTop:0}}}))}return o}),(function({theme:e,ownerState:t}){const{container:r,columnSpacing:n}=t;let o={};if(r&&0!==n){const t=(0,yr.P$)({values:n,breakpoints:e.breakpoints.values});let r;"object"==typeof t&&(r=Ir({breakpoints:e.breakpoints.values,values:t})),o=(0,yr.k9)({theme:e},t,((t,n)=>{var o;const i=e.spacing(t);return"0px"!==i?{width:`calc(100% + ${Or(i)})`,marginLeft:`-${Or(i)}`,[`& > .${Rr.item}`]:{paddingLeft:Or(i)}}:null!=(o=r)&&o.includes(n)?{}:{width:"100%",marginLeft:0,[`& > .${Rr.item}`]:{paddingLeft:0}}}))}return o}),(function({theme:e,ownerState:t}){let r;return e.breakpoints.keys.reduce(((n,o)=>{let i={};if(t[o]&&(r=t[o]),!r)return n;if(!0===r)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===r)i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,yr.P$)({values:t.columns,breakpoints:e.breakpoints.values}),a="object"==typeof s?s[o]:s;if(null==a)return n;const l=Math.round(r/a*1e8)/1e6+"%";let c={};if(t.container&&t.item&&0!==t.columnSpacing){const r=e.spacing(t.columnSpacing);if("0px"!==r){const e=`calc(${l} + ${Or(r)})`;c={flexBasis:e,maxWidth:e}}}i=(0,ft.Z)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===e.breakpoints.values[o]?Object.assign(n,i):n[e.breakpoints.up(o)]=i,n}),{})})),Ar=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiGrid"}),{breakpoints:o}=Er(),i=bt(n),{className:s,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:g="wrap",zeroMinWidth:m=!1}=i,v=(0,pt.Z)(i,kr),_=p||f,y=l||f,b=t.useContext(Sr),E=u?a||12:b,S={},C=(0,ft.Z)({},v);o.keys.forEach((e=>{null!=v[e]&&(S[e]=v[e],delete C[e])}));const T=(0,ft.Z)({},i,{columns:E,container:u,direction:d,item:h,rowSpacing:_,columnSpacing:y,wrap:g,zeroMinWidth:m,spacing:f},S,{breakpoints:o.keys}),w=(e=>{const{classes:t,container:r,direction:n,item:o,spacing:i,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];r&&(c=function(e,t){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[`spacing-xs-${String(e)}`];const r=[];return t.forEach((t=>{const n=e[t];if(Number(n)>0){const e=`spacing-${t}-${String(n)}`;r.push(e)}})),r}(i,l));const u=[];l.forEach((t=>{const r=e[t];r&&u.push(`grid-${t}-${String(r)}`)}));const d={root:["root",r&&"container",o&&"item",a&&"zeroMinWidth",...c,"row"!==n&&`direction-xs-${String(n)}`,"wrap"!==s&&`wrap-xs-${String(s)}`,...u]};return(0,Et.Z)(d,Cr,t)})(T);return(0,Ot.jsx)(Sr.Provider,{value:E,children:(0,Ot.jsx)(Pr,(0,ft.Z)({ownerState:T,className:(0,gt.default)(w.root,s),as:c,ref:r},C))})})),Nr=Ar;var Lr=__webpack_require__(1796);function Mr(e){return(0,Rt.Z)("MuiDivider",e)}const xr=(0,wt.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Dr=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Br=(0,St.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,ft.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,Lr.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,ft.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,ft.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,ft.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),Ur=(0,St.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),Zr=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:o,className:i,component:s=(o?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=r,p=(0,pt.Z)(r,Dr),f=(0,ft.Z)({},r,{absolute:n,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:d,variant:h}),g=(e=>{const{absolute:t,children:r,classes:n,flexItem:o,light:i,orientation:s,textAlign:a,variant:l}=e,c={root:["root",t&&"absolute",l,i&&"light","vertical"===s&&"vertical",o&&"flexItem",r&&"withChildren",r&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,Et.Z)(c,Mr,n)})(f);return(0,Ot.jsx)(Br,(0,ft.Z)({as:s,className:(0,gt.default)(g.root,i),role:u,ref:t,ownerState:f},p,{children:o?(0,Ot.jsx)(Ur,{className:g.wrapper,ownerState:f,children:o}):null}))})),jr=Zr;var Hr={backgroundImage:"linear-gradient(195deg, rgb(73, 163, 241), rgb(26, 115, 232))",backgroundSize:"100%",backgroundRepeat:"repeat",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",color:"rgb(26, 115, 232)"};const Fr=function(){return t.createElement(lr,{style:{padding:"24px 0"}},t.createElement(_r,{fullwidth:"lg"},t.createElement(Nr,{container:!0,direction:"row",justifyContent:"center",spacing:2},t.createElement(Nr,{item:!0,xs:12,md:4},t.createElement(lr,{textAlign:"center"},t.createElement(Mt,{variant:"h1"},t.createElement("span",{style:Hr},"3+")),t.createElement(Mt,{variant:"h5"},"It domains"),t.createElement(Mt,{variant:"body2"},"Streamline your project with us in various domains."))),t.createElement(jr,{orientation:"vertical",flexItem:!0,sx:{mr:"-1px"}}),t.createElement(Nr,{item:!0,xs:12,md:4},t.createElement(lr,{textAlign:"center"},t.createElement(Mt,{variant:"h1"},t.createElement("span",{style:Hr},"100+")),t.createElement(Mt,{variant:"h5"},"Registered members"),t.createElement(Mt,{variant:"body2"},"Join the growing community of learners: members registered and counting!"))),t.createElement(jr,{orientation:"vertical",flexItem:!0,sx:{mr:"-1px"}}),t.createElement(Nr,{item:!0,xs:12,md:4},t.createElement(lr,{textAlign:"center"},t.createElement("span",{style:Hr},"4.2"),t.createElement(Mt,{variant:"h5"},"User Satisfaction"),t.createElement(Mt,{variant:"body2"},"Start journey with us to increase efficiency, reduce costs, and accelerate the delivery of high-quality results"))))))};var zr=__webpack_require__(7925),Gr=__webpack_require__(1705),qr=__webpack_require__(2068),Vr=__webpack_require__(3511);function Wr(e,t){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wr(e,t)}function Yr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wr(e,t)}const Kr=t.createContext(null);function $r(e,r){var n=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return r&&(0,t.isValidElement)(e)?r(e):e}(e)})),n}function Qr(e,t,r){return null!=r[t]?r[t]:e.props[t]}function Xr(e,r,n){var o=$r(e.children),i=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,o=Object.create(null),i=[];for(var s in e)s in t?i.length&&(o[s]=i,i=[]):i.push(s);var a={};for(var l in t){if(o[l])for(n=0;n<o[l].length;n++){var c=o[l][n];a[o[l][n]]=r(c)}a[l]=r(l)}for(n=0;n<i.length;n++)a[i[n]]=r(i[n]);return a}(r,o);return Object.keys(i).forEach((function(s){var a=i[s];if((0,t.isValidElement)(a)){var l=s in r,c=s in o,u=r[s],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(i[s]=(0,t.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:Qr(a,"exit",e),enter:Qr(a,"enter",e)})):i[s]=(0,t.cloneElement)(a,{in:!1}):i[s]=(0,t.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:Qr(a,"exit",e),enter:Qr(a,"enter",e)})}})),i}var Jr=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},en=function(e){function r(t,r){var n,o=(n=e.call(this,t,r)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},n}Yr(r,e);var n=r.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,r){var n,o,i=r.children,s=r.handleExited;return{children:r.firstRender?(n=e,o=s,$r(n.children,(function(e){return(0,t.cloneElement)(e,{onExited:o.bind(null,e),in:!0,appear:Qr(e,"appear",n),enter:Qr(e,"enter",n),exit:Qr(e,"exit",n)})}))):Xr(e,i,s),firstRender:!1}},n.handleExited=function(e,t){var r=$r(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=(0,ft.Z)({},t.children);return delete r[e.key],{children:r}})))},n.render=function(){var e=this.props,r=e.component,n=e.childFactory,o=(0,pt.Z)(e,["component","childFactory"]),i=this.state.contextValue,s=Jr(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===r?t.createElement(Kr.Provider,{value:i},s):t.createElement(Kr.Provider,{value:i},t.createElement(r,o,s))},r}(t.Component);en.propTypes={},en.defaultProps={component:"div",childFactory:function(e){return e}};const tn=en;__webpack_require__(6751);var rn=__webpack_require__(916),nn=(__webpack_require__(8679),__webpack_require__(444)),on=__webpack_require__(6797),sn=__webpack_require__(7278),an=(0,rn.w)((function(e,r){var n=e.styles,o=(0,on.O)([n],void 0,(0,t.useContext)(rn.T)),i=(0,t.useRef)();return(0,sn.j)((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),n=!1,s=document.querySelector('style[data-emotion="'+e+" "+o.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==s&&(n=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),i.current=[t,n],function(){t.flush()}}),[r]),(0,sn.j)((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==o.next&&(0,nn.My)(r,o.next,!0),t.tags.length){var n=t.tags[t.tags.length-1].nextElementSibling;t.before=n,t.flush()}r.insert("",o,t,!1)}}),[r,o.name]),null}));function ln(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,on.O)(t)}var cn=function(){var e=ln.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const un=(0,wt.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),dn=["center","classes","className"];let hn,pn,fn,gn,mn=e=>e;const vn=cn(hn||(hn=mn`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),_n=cn(pn||(pn=mn`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),yn=cn(fn||(fn=mn`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),bn=(0,St.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),En=(0,St.ZP)((function(e){const{className:r,classes:n,pulsate:o=!1,rippleX:i,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),p=(0,gt.default)(r,n.ripple,n.rippleVisible,o&&n.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+i},g=(0,gt.default)(n.child,d&&n.childLeaving,o&&n.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,Ot.jsx)("span",{className:p,style:f,children:(0,Ot.jsx)("span",{className:g})})}),{name:"MuiTouchRipple",slot:"Ripple"})(gn||(gn=mn`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),un.rippleVisible,vn,550,(({theme:e})=>e.transitions.easing.easeInOut),un.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),un.child,un.childLeaving,_n,550,(({theme:e})=>e.transitions.easing.easeInOut),un.childPulsate,yn,(({theme:e})=>e.transitions.easing.easeInOut)),Sn=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:s}=n,a=(0,pt.Z)(n,dn),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),p=t.useRef(null),f=t.useRef(null),g=t.useRef(null);t.useEffect((()=>()=>{clearTimeout(p.current)}),[]);const m=t.useCallback((e=>{const{pulsate:t,rippleX:r,rippleY:n,rippleSize:o,cb:s}=e;c((e=>[...e,(0,Ot.jsx)(En,{classes:{ripple:(0,gt.default)(i.ripple,un.ripple),rippleVisible:(0,gt.default)(i.rippleVisible,un.rippleVisible),ripplePulsate:(0,gt.default)(i.ripplePulsate,un.ripplePulsate),child:(0,gt.default)(i.child,un.child),childLeaving:(0,gt.default)(i.childLeaving,un.childLeaving),childPulsate:(0,gt.default)(i.childPulsate,un.childPulsate)},timeout:550,pulsate:t,rippleX:r,rippleY:n,rippleSize:o},u.current)])),u.current+=1,d.current=s}),[i]),v=t.useCallback(((e={},t={},r=(()=>{}))=>{const{pulsate:n=!1,center:i=o||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:g.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(i||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:r}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(r-l.top)}if(i)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2==0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{m({pulsate:n,rippleX:c,rippleY:u,rippleSize:d,cb:r})},p.current=setTimeout((()=>{f.current&&(f.current(),f.current=null)}),80)):m({pulsate:n,rippleX:c,rippleY:u,rippleSize:d,cb:r})}),[o,m]),_=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),y=t.useCallback(((e,t)=>{if(clearTimeout(p.current),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void(p.current=setTimeout((()=>{y(e,t)})));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[]);return t.useImperativeHandle(r,(()=>({pulsate:_,start:v,stop:y})),[_,v,y]),(0,Ot.jsx)(bn,(0,ft.Z)({className:(0,gt.default)(un.root,i.root,s),ref:g},a,{children:(0,Ot.jsx)(tn,{component:null,exit:!0,children:l})}))})),Cn=Sn;function Tn(e){return(0,Rt.Z)("MuiButtonBase",e)}const wn=(0,wt.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Rn=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],kn=(0,St.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${wn.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),On=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:g,onContextMenu:m,onDragLeave:v,onFocus:_,onFocusVisible:y,onKeyDown:b,onKeyUp:E,onMouseDown:S,onMouseLeave:C,onMouseUp:T,onTouchEnd:w,onTouchMove:R,onTouchStart:k,tabIndex:O=0,TouchRippleProps:I,touchRippleRef:P,type:A}=n,N=(0,pt.Z)(n,Rn),L=t.useRef(null),M=t.useRef(null),x=(0,Gr.Z)(M,P),{isFocusVisibleRef:D,onFocus:B,onBlur:U,ref:Z}=(0,Vr.Z)(),[j,H]=t.useState(!1);c&&j&&H(!1),t.useImperativeHandle(o,(()=>({focusVisible:()=>{H(!0),L.current.focus()}})),[]);const[F,z]=t.useState(!1);t.useEffect((()=>{z(!0)}),[]);const G=F&&!u&&!c;function q(e,t,r=d){return(0,qr.Z)((n=>(t&&t(n),!r&&M.current&&M.current[e](n),!0)))}t.useEffect((()=>{j&&h&&!u&&F&&M.current.pulsate()}),[u,h,j,F]);const V=q("start",S),W=q("stop",m),Y=q("stop",v),K=q("stop",T),$=q("stop",(e=>{j&&e.preventDefault(),C&&C(e)})),Q=q("start",k),X=q("stop",w),J=q("stop",R),ee=q("stop",(e=>{U(e),!1===D.current&&H(!1),f&&f(e)}),!1),te=(0,qr.Z)((e=>{L.current||(L.current=e.currentTarget),B(e),!0===D.current&&(H(!0),y&&y(e)),_&&_(e)})),re=()=>{const e=L.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},ne=t.useRef(!1),oe=(0,qr.Z)((e=>{h&&!ne.current&&j&&M.current&&" "===e.key&&(ne.current=!0,M.current.stop(e,(()=>{M.current.start(e)}))),e.target===e.currentTarget&&re()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&re()&&"Enter"===e.key&&!c&&(e.preventDefault(),g&&g(e))})),ie=(0,qr.Z)((e=>{h&&" "===e.key&&M.current&&j&&!e.defaultPrevented&&(ne.current=!1,M.current.stop(e,(()=>{M.current.pulsate(e)}))),E&&E(e),g&&e.target===e.currentTarget&&re()&&" "===e.key&&!e.defaultPrevented&&g(e)}));let se=l;"button"===se&&(N.href||N.to)&&(se=p);const ae={};"button"===se?(ae.type=void 0===A?"button":A,ae.disabled=c):(N.href||N.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=(0,Gr.Z)(r,Z,L),ce=(0,ft.Z)({},n,{centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:O,focusVisible:j}),ue=(e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:o}=e,i={root:["root",t&&"disabled",r&&"focusVisible"]},s=(0,Et.Z)(i,Tn,o);return r&&n&&(s.root+=` ${n}`),s})(ce);return(0,Ot.jsxs)(kn,(0,ft.Z)({as:se,className:(0,gt.default)(ue.root,a),ownerState:ce,onBlur:ee,onClick:g,onContextMenu:W,onFocus:te,onKeyDown:oe,onKeyUp:ie,onMouseDown:V,onMouseLeave:$,onMouseUp:K,onDragLeave:Y,onTouchEnd:X,onTouchMove:J,onTouchStart:Q,ref:le,tabIndex:c?-1:O,type:A},ae,N,{children:[s,G?(0,Ot.jsx)(Cn,(0,ft.Z)({ref:x,center:i},I)):null]}))}));function In(e){return(0,Rt.Z)("MuiButton",e)}const Pn=(0,wt.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),An=t.createContext({}),Nn=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ln=e=>(0,ft.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Mn=(0,St.ZP)(On,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${(0,Tt.Z)(r.color)}`],t[`size${(0,Tt.Z)(r.size)}`],t[`${r.variant}Size${(0,Tt.Z)(r.size)}`],"inherit"===r.color&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})((({theme:e,ownerState:t})=>{var r,n;return(0,ft.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,ft.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":(0,ft.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Pn.focusVisible}`]:(0,ft.Z)({},"contained"===t.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Pn.disabled}`]:(0,ft.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"contained"===t.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${(0,Lr.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.vars?e.vars.palette.text.primary:null==(r=(n=e.palette).getContrastText)?void 0:r.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})}),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Pn.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Pn.disabled}`]:{boxShadow:"none"}})),xn=(0,St.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${(0,Tt.Z)(r.size)}`]]}})((({ownerState:e})=>(0,ft.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ln(e)))),Dn=(0,St.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${(0,Tt.Z)(r.size)}`]]}})((({ownerState:e})=>(0,ft.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ln(e)))),Bn=t.forwardRef((function(e,r){const n=t.useContext(An),o=(0,zr.Z)(n,e),i=(0,Ct.Z)({props:o,name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:f,fullWidth:g=!1,size:m="medium",startIcon:v,type:_,variant:y="text"}=i,b=(0,pt.Z)(i,Nn),E=(0,ft.Z)({},i,{color:a,component:l,disabled:u,disableElevation:d,disableFocusRipple:h,fullWidth:g,size:m,type:_,variant:y}),S=(e=>{const{color:t,disableElevation:r,fullWidth:n,size:o,variant:i,classes:s}=e,a={root:["root",i,`${i}${(0,Tt.Z)(t)}`,`size${(0,Tt.Z)(o)}`,`${i}Size${(0,Tt.Z)(o)}`,"inherit"===t&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,Tt.Z)(o)}`],endIcon:["endIcon",`iconSize${(0,Tt.Z)(o)}`]},l=(0,Et.Z)(a,In,s);return(0,ft.Z)({},s,l)})(E),C=v&&(0,Ot.jsx)(xn,{className:S.startIcon,ownerState:E,children:v}),T=p&&(0,Ot.jsx)(Dn,{className:S.endIcon,ownerState:E,children:p});return(0,Ot.jsxs)(Mn,(0,ft.Z)({ownerState:E,className:(0,gt.default)(n.className,S.root,c),component:l,disabled:u,focusRipple:!h,focusVisibleClassName:(0,gt.default)(S.focusVisible,f),ref:r,type:_},b,{classes:S,children:[C,s,T]}))})),Un=Bn;var Zn=__webpack_require__(2605);const jn=(0,hr.Z)(),Hn=dr("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Fn(e){return(0,ur.Z)({props:e,name:"MuiStack",defaultTheme:jn})}const zn=({ownerState:e,theme:t})=>{let r=(0,ft.Z)({display:"flex",flexDirection:"column"},(0,yr.k9)({theme:t},(0,yr.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const n=(0,Zn.hB)(t),o=Object.keys(t.breakpoints.values).reduce(((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t)),{}),i=(0,yr.P$)({values:e.direction,base:o}),s=(0,yr.P$)({values:e.spacing,base:o});"object"==typeof i&&Object.keys(i).forEach(((e,t,r)=>{if(!i[e]){const n=t>0?i[r[t-1]]:"column";i[e]=n}}));const a=(t,r)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${o=r?i[r]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]}`]:(0,Zn.NA)(n,t)}};var o};r=(0,mt.Z)(r,(0,yr.k9)({theme:t},s,a))}return r=(0,yr.dt)(t.breakpoints,r),r};!function(e={}){const{createStyledComponent:t=Hn,useThemeProps:r=Fn,componentName:n="MuiStack"}=e;t(zn)}();var Gn=__webpack_require__(7579),qn=__webpack_require__(67),Vn=__webpack_require__(7094),Wn=__webpack_require__(3633),Yn=__webpack_require__(9064),Kn=__webpack_require__(3935),$n=__webpack_require__(6600),Qn=__webpack_require__(7960);const Xn=t.forwardRef((function(e,r){const{children:n,container:o,disablePortal:i=!1}=e,[s,a]=t.useState(null),l=(0,qn.Z)(t.isValidElement(n)?n.ref:null,r);if((0,$n.Z)((()=>{i||a(function(e){return"function"==typeof e?e():e}(o)||document.body)}),[o,i]),(0,$n.Z)((()=>{if(s&&!i)return(0,Qn.Z)(r,s),()=>{(0,Qn.Z)(r,null)}}),[r,s,i]),i){if(t.isValidElement(n)){const e={ref:l};return t.cloneElement(n,e)}return(0,Ot.jsx)(t.Fragment,{children:n})}return(0,Ot.jsx)(t.Fragment,{children:s?Kn.createPortal(n,s):s})}));var Jn=__webpack_require__(8290);function eo(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function to(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ro(e){return parseInt((0,Jn.Z)(e).getComputedStyle(e).paddingRight,10)||0}function no(e,t,r,n,o){const i=[t,r,...n];[].forEach.call(e.children,(e=>{const t=-1===i.indexOf(e),r=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),r="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||r}(e);t&&r&&to(e,o)}))}function oo(e,t){let r=-1;return e.some(((e,n)=>!!t(e)&&(r=n,!0))),r}const io=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function so(e){const t=[],r=[];return Array.from(e.querySelectorAll(io)).forEach(((e,n)=>{const o=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==o&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}(e))}(e)&&(0===o?t.push(e):r.push({documentOrder:n,tabIndex:o,node:e}))})),r.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function ao(){return!0}const lo=function(e){const{children:r,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:s=so,isEnabled:a=ao,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),g=t.useRef(null),m=(0,qn.Z)(r.ref,g),v=t.useRef(null);t.useEffect((()=>{l&&g.current&&(f.current=!n)}),[n,l]),t.useEffect((()=>{if(!l||!g.current)return;const e=(0,Vn.Z)(g.current);return g.current.contains(e.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),f.current&&g.current.focus()),()=>{i||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!g.current)return;const e=(0,Vn.Z)(g.current),t=t=>{const{current:r}=g;if(null!==r)if(e.hasFocus()&&!o&&a()&&!c.current){if(!r.contains(e.activeElement)){if(t&&p.current!==t.target||e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let o=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(o=s(g.current)),o.length>0){var n,i;const e=Boolean((null==(n=v.current)?void 0:n.shiftKey)&&"Tab"===(null==(i=v.current)?void 0:i.key)),t=o[0],r=o[o.length-1];"string"!=typeof t&&"string"!=typeof r&&(e?r.focus():t.focus())}else r.focus()}}else c.current=!1},r=t=>{v.current=t,!o&&a()&&"Tab"===t.key&&e.activeElement===g.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",r,!0);const n=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return()=>{clearInterval(n),e.removeEventListener("focusin",t),e.removeEventListener("keydown",r,!0)}}),[n,o,i,a,l,s]);const _=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(r,{ref:m,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=r.props.onFocus;t&&t(e)}}),(0,Ot.jsx)("div",{tabIndex:l?0:-1,onFocus:_,ref:d,"data-testid":"sentinelEnd"})]})};function co(e){return(0,Rt.Z)("MuiModal",e)}(0,wt.Z)("MuiModal",["root","hidden"]);const uo=function(e){return"string"==typeof e};function ho(e,t,r){return void 0===e||uo(e)?t:(0,ft.Z)({},t,{ownerState:(0,ft.Z)({},t.ownerState,r)})}function po(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"==typeof e[t]))).forEach((r=>{t[r]=e[r]})),t}function fo(e,t){return"function"==typeof e?e(t):e}const go=["elementType","externalSlotProps","ownerState"];function mo(e){var t;const{elementType:r,externalSlotProps:n,ownerState:o}=e,i=(0,pt.Z)(e,go),s=fo(n,o),{props:a,internalRef:l}=function(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:o,className:i}=e;if(!t){const e=(0,gt.default)(null==o?void 0:o.className,null==n?void 0:n.className,i,null==r?void 0:r.className),t=(0,ft.Z)({},null==r?void 0:r.style,null==o?void 0:o.style,null==n?void 0:n.style),s=(0,ft.Z)({},r,o,n);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=function(e,t=[]){if(void 0===e)return{};const r={};return Object.keys(e).filter((r=>r.match(/^on[A-Z]/)&&"function"==typeof e[r]&&!t.includes(r))).forEach((t=>{r[t]=e[t]})),r}((0,ft.Z)({},o,n)),a=po(n),l=po(o),c=t(s),u=(0,gt.default)(null==c?void 0:c.className,null==r?void 0:r.className,i,null==o?void 0:o.className,null==n?void 0:n.className),d=(0,ft.Z)({},null==c?void 0:c.style,null==r?void 0:r.style,null==o?void 0:o.style,null==n?void 0:n.style),h=(0,ft.Z)({},c,r,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}((0,ft.Z)({},i,{externalSlotProps:s})),c=(0,qn.Z)(l,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref);return ho(r,(0,ft.Z)({},a,{ref:c}),o)}const vo=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],_o=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(-1!==r)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&to(e.modalRef,!1);const n=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);no(t,e.mount,e.modalRef,n,!0);const o=oo(this.containers,(e=>e.container===t));return-1!==o?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r)}mount(e,t){const r=oo(this.containers,(t=>-1!==t.modals.indexOf(e))),n=this.containers[r];n.restore||(n.restore=function(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,Vn.Z)(e);return t.body===e?(0,Jn.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){const e=eo((0,Vn.Z)(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${ro(n)+e}px`;const t=(0,Vn.Z)(n).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{r.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${ro(t)+e}px`}))}let e;if(n.parentNode instanceof DocumentFragment)e=(0,Vn.Z)(n).body;else{const t=n.parentElement,r=(0,Jn.Z)(n);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===r.getComputedStyle(t).overflowY?t:n}r.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{r.forEach((({value:e,el:t,property:r})=>{e?t.style.setProperty(r,e):t.style.removeProperty(r)}))}}(n,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(-1===r)return r;const n=oo(this.containers,(t=>-1!==t.modals.indexOf(e))),o=this.containers[n];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),0===o.modals.length)o.restore&&o.restore(),e.modalRef&&to(e.modalRef,t),no(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(n,1);else{const e=o.modals[o.modals.length-1];e.modalRef&&to(e.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},yo=t.forwardRef((function(e,r){var n,o;const{children:i,classes:s,closeAfterTransition:a=!1,component:l,container:c,disableAutoFocus:u=!1,disableEnforceFocus:d=!1,disableEscapeKeyDown:h=!1,disablePortal:p=!1,disableRestoreFocus:f=!1,disableScrollLock:g=!1,hideBackdrop:m=!1,keepMounted:v=!1,manager:_=_o,onBackdropClick:y,onClose:b,onKeyDown:E,open:S,onTransitionEnter:C,onTransitionExited:T,slotProps:w={},slots:R={}}=e,k=(0,pt.Z)(e,vo),[O,I]=t.useState(!S),P=t.useRef({}),A=t.useRef(null),N=t.useRef(null),L=(0,qn.Z)(N,r),M=function(e){return!!e&&e.props.hasOwnProperty("in")}(i),x=null==(n=e["aria-hidden"])||n,D=()=>(P.current.modalRef=N.current,P.current.mountNode=A.current,P.current),B=()=>{_.mount(D(),{disableScrollLock:g}),N.current&&(N.current.scrollTop=0)},U=(0,Wn.Z)((()=>{const e=function(e){return"function"==typeof e?e():e}(c)||(0,Vn.Z)(A.current).body;_.add(D(),e),N.current&&B()})),Z=t.useCallback((()=>_.isTopModal(D())),[_]),j=(0,Wn.Z)((e=>{A.current=e,e&&N.current&&(S&&Z()?B():to(N.current,x))})),H=t.useCallback((()=>{_.remove(D(),x)}),[_,x]);t.useEffect((()=>()=>{H()}),[H]),t.useEffect((()=>{S?U():M&&a||H()}),[S,H,M,a,U]);const F=(0,ft.Z)({},e,{classes:s,closeAfterTransition:a,disableAutoFocus:u,disableEnforceFocus:d,disableEscapeKeyDown:h,disablePortal:p,disableRestoreFocus:f,disableScrollLock:g,exited:O,hideBackdrop:m,keepMounted:v}),z=(e=>{const{open:t,exited:r,classes:n}=e,o={root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]};return(0,Et.Z)(o,co,n)})(F),G={};void 0===i.props.tabIndex&&(G.tabIndex="-1"),M&&(G.onEnter=(0,Yn.Z)((()=>{I(!1),C&&C()}),i.props.onEnter),G.onExited=(0,Yn.Z)((()=>{I(!0),T&&T(),a&&H()}),i.props.onExited));const q=null!=(o=null!=l?l:R.root)?o:"div",V=mo({elementType:q,externalSlotProps:w.root,externalForwardedProps:k,additionalProps:{ref:L,role:"presentation",onKeyDown:e=>{E&&E(e),"Escape"===e.key&&Z()&&(h||(e.stopPropagation(),b&&b(e,"escapeKeyDown")))}},className:z.root,ownerState:F}),W=R.backdrop,Y=mo({elementType:W,externalSlotProps:w.backdrop,additionalProps:{"aria-hidden":!0,onClick:e=>{e.target===e.currentTarget&&(y&&y(e),b&&b(e,"backdropClick"))},open:S},className:z.backdrop,ownerState:F});return v||S||M&&!O?(0,Ot.jsx)(Xn,{ref:j,container:c,disablePortal:p,children:(0,Ot.jsxs)(q,(0,ft.Z)({},V,{children:[!m&&W?(0,Ot.jsx)(W,(0,ft.Z)({},Y)):null,(0,Ot.jsx)(lo,{disableEnforceFocus:d,disableAutoFocus:u,disableRestoreFocus:f,isEnabled:Z,open:S,children:t.cloneElement(i,G)})]}))}):null}));var bo=function(e){return e.scrollTop},Eo="unmounted",So="exited",Co="entering",To="entered",wo="exiting",Ro=function(e){function r(t,r){var n;n=e.call(this,t,r)||this;var o,i=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?i?(o=So,n.appearStatus=Co):o=To:o=t.unmountOnExit||t.mountOnEnter?Eo:So,n.state={status:o},n.nextCallback=null,n}Yr(r,e),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Eo?{status:So}:null};var n=r.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==Co&&r!==To&&(t=Co):r!==Co&&r!==To||(t=wo)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Co){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:Kn.findDOMNode(this);r&&bo(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===So&&this.setState({status:Eo})},n.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[Kn.findDOMNode(this),n],i=o[0],s=o[1],a=this.getTimeouts(),l=n?a.appear:a.enter;e||r?(this.props.onEnter(i,s),this.safeSetState({status:Co},(function(){t.props.onEntering(i,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:To},(function(){t.props.onEntered(i,s)}))}))}))):this.safeSetState({status:To},(function(){t.props.onEntered(i)}))},n.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:Kn.findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:wo},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:So},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:So},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:Kn.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],i=o[0],s=o[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Eo)return null;var r=this.props,n=r.children,o=(r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef,(0,pt.Z)(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Kr.Provider,{value:null},"function"==typeof n?n(e,o):t.cloneElement(t.Children.only(n),o))},r}(t.Component);function ko(){}Ro.contextType=Kr,Ro.propTypes={},Ro.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ko,onEntering:ko,onEntered:ko,onExit:ko,onExiting:ko,onExited:ko},Ro.UNMOUNTED=Eo,Ro.EXITED=So,Ro.ENTERING=Co,Ro.ENTERED=To,Ro.EXITING=wo;const Oo=Ro,Io=e=>e.scrollTop;function Po(e,t){var r,n;const{timeout:o,easing:i,style:s={}}=e;return{duration:null!=(r=s.transitionDuration)?r:"number"==typeof o?o:o[t.mode]||0,easing:null!=(n=s.transitionTimingFunction)?n:"object"==typeof i?i[t.mode]:i,delay:s.transitionDelay}}const Ao=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],No={entering:{opacity:1},entered:{opacity:1}},Lo=t.forwardRef((function(e,r){const n=Er(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:g,style:m,timeout:v=o,TransitionComponent:_=Oo}=e,y=(0,pt.Z)(e,Ao),b=t.useRef(null),E=(0,Gr.Z)(b,a.ref,r),S=e=>t=>{if(e){const r=b.current;void 0===t?e(r):e(r,t)}},C=S(h),T=S(((e,t)=>{Io(e);const r=Po({style:m,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),w=S(d),R=S(g),k=S((e=>{const t=Po({style:m,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),O=S(f);return(0,Ot.jsx)(_,(0,ft.Z)({appear:s,in:c,nodeRef:b,onEnter:T,onEntered:w,onEntering:C,onExit:k,onExited:O,onExiting:R,addEndListener:e=>{i&&i(b.current,e)},timeout:v},y,{children:(e,r)=>t.cloneElement(a,(0,ft.Z)({style:(0,ft.Z)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},No[e],m,a.props.style),ref:E},r))}))})),Mo=Lo;function xo(e){return(0,Rt.Z)("MuiBackdrop",e)}(0,wt.Z)("MuiBackdrop",["root","invisible"]);const Do=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Bo=(0,St.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})((({ownerState:e})=>(0,ft.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"}))),Uo=t.forwardRef((function(e,t){var r,n,o;const i=(0,Ct.Z)({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:g=Mo,transitionDuration:m}=i,v=(0,pt.Z)(i,Do),_=(0,ft.Z)({},i,{component:l,invisible:d}),y=(e=>{const{classes:t,invisible:r}=e,n={root:["root",r&&"invisible"]};return(0,Et.Z)(n,xo,t)})(_),b=null!=(r=p.root)?r:u.root;return(0,Ot.jsx)(g,(0,ft.Z)({in:h,timeout:m},v,{children:(0,Ot.jsx)(Bo,(0,ft.Z)({"aria-hidden":!0},b,{as:null!=(n=null!=(o=f.root)?o:c.Root)?n:l,className:(0,gt.default)(y.root,a,null==b?void 0:b.className),ownerState:(0,ft.Z)({},_,null==b?void 0:b.ownerState),classes:y,ref:t,children:s}))}))})),Zo=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],jo=(0,St.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})((({theme:e,ownerState:t})=>(0,ft.Z)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"}))),Ho=(0,St.ZP)(Uo,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Fo=t.forwardRef((function(e,r){var n,o,i,s,a,l;const c=(0,Ct.Z)({name:"MuiModal",props:e}),{BackdropComponent:u=Ho,BackdropProps:d,closeAfterTransition:h=!1,children:p,component:f,components:g={},componentsProps:m={},disableAutoFocus:v=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:y=!1,disablePortal:b=!1,disableRestoreFocus:E=!1,disableScrollLock:S=!1,hideBackdrop:C=!1,keepMounted:T=!1,slotProps:w,slots:R,theme:k}=c,O=(0,pt.Z)(c,Zo),[I,P]=t.useState(!0),A={closeAfterTransition:h,disableAutoFocus:v,disableEnforceFocus:_,disableEscapeKeyDown:y,disablePortal:b,disableRestoreFocus:E,disableScrollLock:S,hideBackdrop:C,keepMounted:T},N=(0,ft.Z)({},c,A,{exited:I}),L=(e=>e.classes)(N),M=null!=(n=null!=(o=null==R?void 0:R.root)?o:g.Root)?n:jo,x=null!=(i=null!=(s=null==R?void 0:R.backdrop)?s:g.Backdrop)?i:u,D=null!=(a=null==w?void 0:w.root)?a:m.root,B=null!=(l=null==w?void 0:w.backdrop)?l:m.backdrop;return(0,Ot.jsx)(yo,(0,ft.Z)({slots:{root:M,backdrop:x},slotProps:{root:()=>(0,ft.Z)({},fo(D,N),!uo(M)&&{as:f,theme:k}),backdrop:()=>(0,ft.Z)({},d,fo(B,N))},onTransitionEnter:()=>P(!1),onTransitionExited:()=>P(!0),ref:r},O,{classes:L},A,{children:p}))})),zo=Fo,Go=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function qo(e){return(0,Rt.Z)("MuiPaper",e)}(0,wt.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Vo=["className","component","elevation","square","variant"],Wo=(0,St.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,"elevation"===r.variant&&t[`elevation${r.elevation}`]]}})((({theme:e,ownerState:t})=>{var r;return(0,ft.Z)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.divider}`},"elevation"===t.variant&&(0,ft.Z)({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${(0,Lr.Fq)("#fff",Go(t.elevation))}, ${(0,Lr.Fq)("#fff",Go(t.elevation))})`},e.vars&&{backgroundImage:null==(r=e.vars.overlays)?void 0:r[t.elevation]}))})),Yo=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiPaper"}),{className:n,component:o="div",elevation:i=1,square:s=!1,variant:a="elevation"}=r,l=(0,pt.Z)(r,Vo),c=(0,ft.Z)({},r,{component:o,elevation:i,square:s,variant:a}),u=(e=>{const{square:t,elevation:r,variant:n,classes:o}=e,i={root:["root",n,!t&&"rounded","elevation"===n&&`elevation${r}`]};return(0,Et.Z)(i,qo,o)})(c);return(0,Ot.jsx)(Wo,(0,ft.Z)({as:o,ownerState:c,className:(0,gt.default)(u.root,n),ref:t},l))})),Ko=Yo;function $o(e){return(0,Rt.Z)("MuiDialog",e)}const Qo=(0,wt.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Xo=t.createContext({}),Jo=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ei=(0,St.ZP)(Uo,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),ti=(0,St.ZP)(zo,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),ri=(0,St.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${(0,Tt.Z)(r.scroll)}`]]}})((({ownerState:e})=>(0,ft.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),ni=(0,St.ZP)(Ko,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${(0,Tt.Z)(r.scroll)}`],t[`paperWidth${(0,Tt.Z)(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,ft.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${Qo.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${Qo.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Qo.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}))),oi=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiDialog"}),o=Er(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:g="sm",onBackdropClick:m,onClose:v,open:_,PaperComponent:y=Ko,PaperProps:b={},scroll:E="paper",TransitionComponent:S=Mo,transitionDuration:C=i,TransitionProps:T}=n,w=(0,pt.Z)(n,Jo),R=(0,ft.Z)({},n,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:g,scroll:E}),k=(e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:o,fullScreen:i}=e,s={root:["root"],container:["container",`scroll${(0,Tt.Z)(r)}`],paper:["paper",`paperScroll${(0,Tt.Z)(r)}`,`paperWidth${(0,Tt.Z)(String(n))}`,o&&"paperFullWidth",i&&"paperFullScreen"]};return(0,Et.Z)(s,$o,t)})(R),O=t.useRef(),I=(0,Gn.Z)(a),P=t.useMemo((()=>({titleId:I})),[I]);return(0,Ot.jsx)(ti,(0,ft.Z)({className:(0,gt.default)(k.root,d),closeAfterTransition:!0,components:{Backdrop:ei},componentsProps:{backdrop:(0,ft.Z)({transitionDuration:C,as:l},c)},disableEscapeKeyDown:h,onClose:v,open:_,ref:r,onClick:e=>{O.current&&(O.current=null,m&&m(e),v&&v(e,"backdropClick"))},ownerState:R},w,{children:(0,Ot.jsx)(S,(0,ft.Z)({appear:!0,in:_,timeout:C,role:"presentation"},T,{children:(0,Ot.jsx)(ri,{className:(0,gt.default)(k.container),onMouseDown:e=>{O.current=e.target===e.currentTarget},ownerState:R,children:(0,Ot.jsx)(ni,(0,ft.Z)({as:y,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":I},b,{className:(0,gt.default)(k.paper,b.className),ownerState:R,children:(0,Ot.jsx)(Xo.Provider,{value:P,children:u})}))})}))}))})),ii=oi,si=(0,wt.Z)("MuiDialogTitle",["root"]);function ai(e){return(0,Rt.Z)("MuiDialogContent",e)}(0,St.ZP)(Mt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),(0,wt.Z)("MuiDialogContent",["root","dividers"]);const li=["className","dividers"],ci=(0,St.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((({theme:e,ownerState:t})=>(0,ft.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${si.root} + &`]:{paddingTop:0}}))),ui=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiDialogContent"}),{className:n,dividers:o=!1}=r,i=(0,pt.Z)(r,li),s=(0,ft.Z)({},r,{dividers:o}),a=(e=>{const{classes:t,dividers:r}=e,n={root:["root",r&&"dividers"]};return(0,Et.Z)(n,ai,t)})(s);return(0,Ot.jsx)(ci,(0,ft.Z)({className:(0,gt.default)(a.root,n),ownerState:s,ref:t},i))}));function di(e){return(0,Rt.Z)("MuiAppBar",e)}(0,wt.Z)("MuiDialogContentText",["root"]),(0,St.ZP)(Mt,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),(0,wt.Z)("MuiDialogActions",["root","spacing"]),(0,St.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,ft.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}))),(0,wt.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const hi=["className","color","enableColorOnDark","position"],pi=(e,t)=>e?`${null==e?void 0:e.replace(")","")}, ${t})`:t,fi=(0,St.ZP)(Ko,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${(0,Tt.Z)(r.position)}`],t[`color${(0,Tt.Z)(r.color)}`]]}})((({theme:e,ownerState:t})=>{const r="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,ft.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===t.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===t.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===t.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===t.position&&{position:"static"},"relative"===t.position&&{position:"relative"},!e.vars&&(0,ft.Z)({},"default"===t.color&&{backgroundColor:r,color:e.palette.getContrastText(r)},t.color&&"default"!==t.color&&"inherit"!==t.color&&"transparent"!==t.color&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},"inherit"===t.color&&{color:"inherit"},"dark"===e.palette.mode&&!t.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===t.color&&(0,ft.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&(0,ft.Z)({},"default"===t.color&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:pi(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:pi(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:pi(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:pi(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===t.color?"inherit":"var(--AppBar-color)"},"transparent"===t.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),gi=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiAppBar"}),{className:n,color:o="primary",enableColorOnDark:i=!1,position:s="fixed"}=r,a=(0,pt.Z)(r,hi),l=(0,ft.Z)({},r,{color:o,position:s,enableColorOnDark:i}),c=(e=>{const{color:t,position:r,classes:n}=e,o={root:["root",`color${(0,Tt.Z)(t)}`,`position${(0,Tt.Z)(r)}`]};return(0,Et.Z)(o,di,n)})(l);return(0,Ot.jsx)(fi,(0,ft.Z)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,gt.default)(c.root,n,"fixed"===s&&"mui-fixed"),ref:t},a))})),mi=gi;function vi(e){return(0,Rt.Z)("MuiToolbar",e)}(0,wt.Z)("MuiToolbar",["root","gutters","regular","dense"]);const _i=["className","component","disableGutters","variant"],yi=(0,St.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===t.variant&&{minHeight:48})),(({theme:e,ownerState:t})=>"regular"===t.variant&&e.mixins.toolbar)),bi=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiToolbar"}),{className:n,component:o="div",disableGutters:i=!1,variant:s="regular"}=r,a=(0,pt.Z)(r,_i),l=(0,ft.Z)({},r,{component:o,disableGutters:i,variant:s}),c=(e=>{const{classes:t,disableGutters:r,variant:n}=e,o={root:["root",!r&&"gutters",n]};return(0,Et.Z)(o,vi,t)})(l);return(0,Ot.jsx)(yi,(0,ft.Z)({as:o,className:(0,gt.default)(c.root,n),ref:t,ownerState:l},a))})),Ei=bi;var Si=__webpack_require__(5949);const Ci=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Ti(e){return(0,Rt.Z)("MuiAvatar",e)}(0,wt.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const wi=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Ri=(0,St.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})((({theme:e,ownerState:t})=>(0,ft.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(e.vars||e).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,ft.Z)({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]})))),ki=(0,St.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Oi=(0,St.ZP)(Ci,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"}),Ii=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiAvatar"}),{alt:o,children:i,className:s,component:a="div",imgProps:l,sizes:c,src:u,srcSet:d,variant:h="circular"}=n,p=(0,pt.Z)(n,wi);let f=null;const g=function({crossOrigin:e,referrerPolicy:r,src:n,srcSet:o}){const[i,s]=t.useState(!1);return t.useEffect((()=>{if(!n&&!o)return;s(!1);let t=!0;const i=new Image;return i.onload=()=>{t&&s("loaded")},i.onerror=()=>{t&&s("error")},i.crossOrigin=e,i.referrerPolicy=r,i.src=n,o&&(i.srcset=o),()=>{t=!1}}),[e,r,n,o]),i}((0,ft.Z)({},l,{src:u,srcSet:d})),m=u||d,v=m&&"error"!==g,_=(0,ft.Z)({},n,{colorDefault:!v,component:a,variant:h}),y=(e=>{const{classes:t,variant:r,colorDefault:n}=e,o={root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,Et.Z)(o,Ti,t)})(_);return f=v?(0,Ot.jsx)(ki,(0,ft.Z)({alt:o,src:u,srcSet:d,sizes:c,ownerState:_,className:y.img},l)):null!=i?i:m&&o?o[0]:(0,Ot.jsx)(Oi,{ownerState:_,className:y.fallback}),(0,Ot.jsx)(Ri,(0,ft.Z)({as:a,ownerState:_,className:(0,gt.default)(y.root,s),ref:r},p,{children:f}))})),Pi=Ii,Ai=__webpack_require__.p+"26606f2dac329481f1587e5b57c96d07.png";function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Li(){Li=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var i=t&&t.prototype instanceof h?t:h,s=Object.create(i.prototype),a=new w(o||[]);return n(s,"_invoke",{value:E(e,r,a)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function p(){}function f(){}var g={};l(g,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(R([])));v&&v!==t&&r.call(v,i)&&(g=v);var _=f.prototype=h.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(n,i,s,a){var l=u(e[n],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Ni(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return o("throw",e,s,a)}))}a(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,n(_,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(_),l(_,a,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Mi(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}function xi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){Mi(i,n,o,s,a,"next",e)}function a(e){Mi(i,n,o,s,a,"throw",e)}s(void 0)}))}}__webpack_require__(1193);var Di=function(){var e=xi(Li().mark((function e(t,r){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();xi(Li().mark((function e(){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("get","user"));case 1:case"end":return e.stop()}}),e)}))),xi(Li().mark((function e(){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("get","student"));case 1:case"end":return e.stop()}}),e)}))),xi(Li().mark((function e(t){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("post","user/find",t));case 1:case"end":return e.stop()}}),e)}))),xi(Li().mark((function e(t){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("post","user",t));case 1:case"end":return e.stop()}}),e)}))),xi(Li().mark((function e(t){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("put","user",t));case 1:case"end":return e.stop()}}),e)}))),xi(Li().mark((function e(t){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di("delete","user",t));case 1:case"end":return e.stop()}}),e)})));var Bi=__webpack_require__(5716),Ui=(__webpack_require__(9864),__webpack_require__(6067));function Zi(e){return(0,Rt.Z)("MuiCollapse",e)}(0,wt.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ji=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Hi=(0,St.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})((({theme:e,ownerState:t})=>(0,ft.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,ft.Z)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"}))),Fi=(0,St.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((({ownerState:e})=>(0,ft.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),zi=(0,St.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((({ownerState:e})=>(0,ft.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),Gi=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiCollapse"}),{addEndListener:o,children:i,className:s,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:f,onExited:g,onExiting:m,orientation:v="vertical",style:_,timeout:y=Ui.x9.standard,TransitionComponent:b=Oo}=n,E=(0,pt.Z)(n,ji),S=(0,ft.Z)({},n,{orientation:v,collapsedSize:a}),C=(e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,Et.Z)(n,Zi,r)})(S),T=Er(),w=t.useRef(),R=t.useRef(null),k=t.useRef(),O="number"==typeof a?`${a}px`:a,I="horizontal"===v,P=I?"width":"height";t.useEffect((()=>()=>{clearTimeout(w.current)}),[]);const A=t.useRef(null),N=(0,Gr.Z)(r,A),L=e=>t=>{if(e){const r=A.current;void 0===t?e(r):e(r,t)}},M=()=>R.current?R.current[I?"clientWidth":"clientHeight"]:0,x=L(((e,t)=>{R.current&&I&&(R.current.style.position="absolute"),e.style[P]=O,d&&d(e,t)})),D=L(((e,t)=>{const r=M();R.current&&I&&(R.current.style.position="");const{duration:n,easing:o}=Po({style:_,timeout:y,easing:c},{mode:"enter"});if("auto"===y){const t=T.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,k.current=t}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[P]=`${r}px`,e.style.transitionTimingFunction=o,p&&p(e,t)})),B=L(((e,t)=>{e.style[P]="auto",h&&h(e,t)})),U=L((e=>{e.style[P]=`${M()}px`,f&&f(e)})),Z=L(g),j=L((e=>{const t=M(),{duration:r,easing:n}=Po({style:_,timeout:y,easing:c},{mode:"exit"});if("auto"===y){const r=T.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,k.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[P]=O,e.style.transitionTimingFunction=n,m&&m(e)}));return(0,Ot.jsx)(b,(0,ft.Z)({in:u,onEnter:x,onEntered:B,onEntering:D,onExit:U,onExited:Z,onExiting:j,addEndListener:e=>{"auto"===y&&(w.current=setTimeout(e,k.current||0)),o&&o(A.current,e)},nodeRef:A,timeout:"auto"===y?null:y},E,{children:(e,t)=>(0,Ot.jsx)(Hi,(0,ft.Z)({as:l,className:(0,gt.default)(C.root,s,{entered:C.entered,exited:!u&&"0px"===O&&C.hidden}[e]),style:(0,ft.Z)({[I?"minWidth":"minHeight"]:O},_),ownerState:(0,ft.Z)({},S,{state:e}),ref:N},t,{children:(0,Ot.jsx)(Fi,{ownerState:(0,ft.Z)({},S,{state:e}),className:C.wrapper,ref:R,children:(0,Ot.jsx)(zi,{ownerState:(0,ft.Z)({},S,{state:e}),className:C.wrapperInner,children:i})})}))}))}));Gi.muiSupportAuto=!0;const qi=Gi,Vi=t.createContext({});var Wi=__webpack_require__(9299);function Yi(e){return(0,Rt.Z)("MuiAccordion",e)}const Ki=(0,wt.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),$i=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],Qi=(0,St.ZP)(Ko,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Ki.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})((({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${Ki.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${Ki.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),(({theme:e,ownerState:t})=>(0,ft.Z)({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${Ki.expanded}`]:{margin:"16px 0"}}))),Xi=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiAccordion"}),{children:o,className:i,defaultExpanded:s=!1,disabled:a=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,TransitionComponent:h=qi,TransitionProps:p}=n,f=(0,pt.Z)(n,$i),[g,m]=(0,Wi.Z)({controlled:c,default:s,name:"Accordion",state:"expanded"}),v=t.useCallback((e=>{m(!g),u&&u(e,!g)}),[g,u,m]),[_,...y]=t.Children.toArray(o),b=t.useMemo((()=>({expanded:g,disabled:a,disableGutters:l,toggle:v})),[g,a,l,v]),E=(0,ft.Z)({},n,{square:d,disabled:a,disableGutters:l,expanded:g}),S=(e=>{const{classes:t,square:r,expanded:n,disabled:o,disableGutters:i}=e,s={root:["root",!r&&"rounded",n&&"expanded",o&&"disabled",!i&&"gutters"],region:["region"]};return(0,Et.Z)(s,Yi,t)})(E);return(0,Ot.jsxs)(Qi,(0,ft.Z)({className:(0,gt.default)(S.root,i),ref:r,ownerState:E,square:d},f,{children:[(0,Ot.jsx)(Vi.Provider,{value:b,children:_}),(0,Ot.jsx)(h,(0,ft.Z)({in:g,timeout:"auto"},p,{children:(0,Ot.jsx)("div",{"aria-labelledby":_.props.id,id:_.props["aria-controls"],role:"region",className:S.region,children:y})}))]}))}));function Ji(e){return(0,Rt.Z)("MuiAccordionSummary",e)}const es=(0,wt.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ts=["children","className","expandIcon","focusVisibleClassName","onClick"],rs=(0,St.ZP)(On,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>{const r={duration:e.transitions.duration.shortest};return(0,ft.Z)({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],r),[`&.${es.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${es.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${es.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${es.expanded}`]:{minHeight:64}})})),ns=(0,St.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${es.expanded}`]:{margin:"20px 0"}}))),os=(0,St.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${es.expanded}`]:{transform:"rotate(180deg)"}}))),is=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiAccordionSummary"}),{children:o,className:i,expandIcon:s,focusVisibleClassName:a,onClick:l}=n,c=(0,pt.Z)(n,ts),{disabled:u=!1,disableGutters:d,expanded:h,toggle:p}=t.useContext(Vi),f=(0,ft.Z)({},n,{expanded:h,disabled:u,disableGutters:d}),g=(e=>{const{classes:t,expanded:r,disabled:n,disableGutters:o}=e,i={root:["root",r&&"expanded",n&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]};return(0,Et.Z)(i,Ji,t)})(f);return(0,Ot.jsxs)(rs,(0,ft.Z)({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:(0,gt.default)(g.root,i),focusVisibleClassName:(0,gt.default)(g.focusVisible,a),onClick:e=>{p&&p(e),l&&l(e)},ref:r,ownerState:f},c,{children:[(0,Ot.jsx)(ns,{className:g.content,ownerState:f,children:o}),s&&(0,Ot.jsx)(os,{className:g.expandIconWrapper,ownerState:f,children:s})]}))}));function ss(e){return(0,Rt.Z)("MuiAccordionDetails",e)}(0,wt.Z)("MuiAccordionDetails",["root"]);const as=["className"],ls=(0,St.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(1,2,2)}))),cs=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiAccordionDetails"}),{className:n}=r,o=(0,pt.Z)(r,as),i=r,s=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},ss,t)})(i);return(0,Ot.jsx)(ls,(0,ft.Z)({className:(0,gt.default)(s.root,n),ref:t,ownerState:i},o))}));function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},us.apply(this,arguments)}function ds(e){return ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(r),!0).forEach((function(t){fs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ds(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ds(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,St.ZP)((function(e){return t.createElement(Xi,us({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),(0,St.ZP)((function(e){return t.createElement(is,us({expandIcon:t.createElement(Bi.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),(0,St.ZP)(cs)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),__webpack_require__(3399);var gs={typography:{fontFamily:["Roboto"].join(" ")},zIndex:{drawer:50}},ms=(ps({mode:"light"},gs),ps({mode:"dark"},gs),["DM Sans"].join(" "),(0,ar.Z)({breakpoints:{values:{xs:0,sm:600,md:1e3,lg:1200,xl:1920}},components:{MuiButton:{defaultProps:{disableElevation:!0},styleOverrides:{root:{textTransform:"none"},sizeSmall:{padding:"6px 16px"},sizeMedium:{padding:"8px 20px"},sizeLarge:{padding:"11px 24px"},textSizeSmall:{padding:"7px 12px"},textSizeMedium:{padding:"9px 16px"},textSizeLarge:{padding:"12px 16px"}}},MuiButtonBase:{defaultProps:{disableRipple:!0}},MuiCardContent:{styleOverrides:{root:{padding:"32px 24px","&:last-child":{paddingBottom:"32px"}}}},MuiCardHeader:{defaultProps:{titleTypographyProps:{variant:"h6"},subheaderTypographyProps:{variant:"body2"}},styleOverrides:{root:{padding:"32px 24px"}}},MuiCssBaseline:{styleOverrides:{"*":{boxSizing:"border-box",margin:0,padding:0},html:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",display:"flex",flexDirection:"column",minHeight:"100%",width:"100%"},body:{display:"flex",flex:"1 1 auto",flexDirection:"column",minHeight:"100%",width:"100%"},"#__next":{display:"flex",flex:"1 1 auto",flexDirection:"column",height:"100%",width:"100%"}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:"#E6E8F0"}}},MuiTableHead:{styleOverrides:{root:{backgroundColor:"#F3F4F6",".MuiTableCell-root":{color:"#374151"},borderBottom:"none","& .MuiTableCell-root":{borderBottom:"none",fontSize:"12px",fontWeight:600,lineHeight:1,letterSpacing:.5,textTransform:"uppercase"},"& .MuiTableCell-paddingCheckbox":{paddingTop:4,paddingBottom:4}}}}},palette:{neutral:{100:"#F3F4F6",200:"#E5E7EB",300:"#D1D5DB",400:"#9CA3AF",500:"#6B7280",600:"#4B5563",700:"#374151",800:"#1F2937",900:"#111827"},action:{active:"#6B7280",focus:"rgba(55, 65, 81, 0.12)",hover:"rgba(55, 65, 81, 0.04)",selected:"rgba(55, 65, 81, 0.08)",disabledBackground:"rgba(55, 65, 81, 0.12)",disabled:"rgba(55, 65, 81, 0.26)"},background:{default:"#F9FAFC",paper:"#FFFFFF",body:"#F0F2F5"},divider:"#E6E8F0",primary:{main:"#5048E5",light:"#828DF8",dark:"#3832A0",contrastText:"#FFFFFF"},secondary:{main:"#10B981",light:"#3FC79A",dark:"#0B815A",contrastText:"#FFFFFF"},success:{main:"#14B8A6",light:"#43C6B7",dark:"#0E8074",contrastText:"#FFFFFF"},info:{main:"#2196F3",light:"#64B6F7",dark:"#0B79D0",contrastText:"#FFFFFF"},warning:{main:"#FFB020",light:"#FFBF4C",dark:"#B27B16",contrastText:"#FFFFFF"},error:{main:"#D14343",light:"#DA6868",dark:"#922E2E",contrastText:"#FFFFFF"},text:{primary:"#121828",secondary:"#65748B",disabled:"rgba(55, 65, 81, 0.48)"}},shape:{borderRadius:8},shadows:["none","0px 1px 1px rgba(100, 116, 139, 0.06), 0px 1px 2px rgba(100, 116, 139, 0.1)","0px 1px 2px rgba(100, 116, 139, 0.12)","0px 1px 4px rgba(100, 116, 139, 0.12)","0px 1px 5px rgba(100, 116, 139, 0.12)","0px 1px 6px rgba(100, 116, 139, 0.12)","0px 2px 6px rgba(100, 116, 139, 0.12)","0px 3px 6px rgba(100, 116, 139, 0.12)","0px 2px 4px rgba(31, 41, 55, 0.06), 0px 4px 6px rgba(100, 116, 139, 0.12)","0px 5px 12px rgba(100, 116, 139, 0.12)","0px 5px 14px rgba(100, 116, 139, 0.12)","0px 5px 15px rgba(100, 116, 139, 0.12)","0px 6px 15px rgba(100, 116, 139, 0.12)","0px 7px 15px rgba(100, 116, 139, 0.12)","0px 8px 15px rgba(100, 116, 139, 0.12)","0px 9px 15px rgba(100, 116, 139, 0.12)","0px 10px 15px rgba(100, 116, 139, 0.12)","0px 12px 22px -8px rgba(100, 116, 139, 0.25)","0px 13px 22px -8px rgba(100, 116, 139, 0.25)","0px 14px 24px -8px rgba(100, 116, 139, 0.25)","0px 10px 10px rgba(31, 41, 55, 0.04), 0px 20px 25px rgba(31, 41, 55, 0.1)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)","0px 25px 50px rgba(100, 116, 139, 0.25)"],typography:{button:{fontWeight:600},fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.5},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.57},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.75},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.57},overline:{fontSize:"0.75rem",fontWeight:600,letterSpacing:"0.5px",lineHeight:2.5,textTransform:"uppercase"},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.66},h1:{fontWeight:700,fontSize:"3.5rem",lineHeight:1.375},h2:{fontWeight:700,fontSize:"3rem",lineHeight:1.375},h3:{fontWeight:700,fontSize:"2.25rem",lineHeight:1.375},h4:{fontWeight:700,fontSize:"2rem",lineHeight:1.375},h5:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.375,margin:"16px 0 8px"},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.375}}}));function vs(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function _s(e){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(e)}function ys(e){vs(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===_s(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function bs(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Es(e){vs(1,arguments);var t=ys(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function Ss(e){vs(1,arguments);var t=ys(e),r=Es(t).getTime()-function(e){vs(1,arguments);var t=function(e){vs(1,arguments);var t=ys(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var o=Es(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var s=Es(i);return t.getTime()>=o.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),Es(r)}(t).getTime();return Math.round(r/6048e5)+1}var Cs={};function Ts(){return Cs}function ws(e,t){var r,n,o,i,s,a,l,c;vs(1,arguments);var u=Ts(),d=bs(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==n?n:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ys(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function Rs(e,t){var r,n,o,i,s,a,l,c;vs(1,arguments);var u=ys(e),d=u.getUTCFullYear(),h=Ts(),p=bs(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var g=ws(f,t),m=new Date(0);m.setUTCFullYear(d,0,p),m.setUTCHours(0,0,0,0);var v=ws(m,t);return u.getTime()>=g.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function ks(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}function Os(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=null!=r&&r.width?String(r.width):o;n=e.formattingValues[i]||e.formattingValues[o]}else{var s=e.defaultWidth,a=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Is(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;var s,a=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var r=0;r<e.length;r++)if(e[r].test(a))return r}(l):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&e[r].test(a))return r}(l);return s=e.valueCallback?e.valueCallback(c):c,{value:s=r.valueCallback?r.valueCallback(s):s,rest:t.slice(a.length)}}}ks({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),ks({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),ks({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"}),Os({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),Os({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),Os({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),Os({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),Os({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"}),Is({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),Is({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),Is({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),Is({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),Is({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"});var Ps=__webpack_require__(932);function As(e){return(0,Rt.Z)("MuiIconButton",e)}const Ns=(0,wt.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Ls=["edge","children","className","color","disabled","disableFocusRipple","size"],Ms=(0,St.ZP)(On,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,Tt.Z)(r.color)}`],r.edge&&t[`edge${(0,Tt.Z)(r.edge)}`],t[`size${(0,Tt.Z)(r.size)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})),(({theme:e,ownerState:t})=>{var r;const n=null==(r=(e.vars||e).palette)?void 0:r[t.color];return(0,ft.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,ft.Z)({color:null==n?void 0:n.main},!t.disableRipple&&{"&:hover":(0,ft.Z)({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Ns.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),xs=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:o,className:i,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=r,u=(0,pt.Z)(r,Ls),d=(0,ft.Z)({},r,{edge:n,color:s,disabled:a,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:r,color:n,edge:o,size:i}=e,s={root:["root",r&&"disabled","default"!==n&&`color${(0,Tt.Z)(n)}`,o&&`edge${(0,Tt.Z)(o)}`,`size${(0,Tt.Z)(i)}`]};return(0,Et.Z)(s,As,t)})(d);return(0,Ot.jsx)(Ms,(0,ft.Z)({className:(0,gt.default)(h.root,i),centerRipple:!0,focusRipple:!l,disabled:a,ref:t,ownerState:d},u,{children:o}))})),Ds=xs;var Bs=__webpack_require__(8038);const Us=t.createContext({});function Zs(e){return(0,Rt.Z)("MuiList",e)}(0,wt.Z)("MuiList",["root","padding","dense","subheader"]);const js=["children","className","component","dense","disablePadding","subheader"],Hs=(0,St.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})((({ownerState:e})=>(0,ft.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0}))),Fs=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiList"}),{children:o,className:i,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=n,u=(0,pt.Z)(n,js),d=t.useMemo((()=>({dense:a})),[a]),h=(0,ft.Z)({},n,{component:s,dense:a,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:r,dense:n,subheader:o}=e,i={root:["root",!r&&"padding",n&&"dense",o&&"subheader"]};return(0,Et.Z)(i,Zs,t)})(h);return(0,Ot.jsx)(Us.Provider,{value:d,children:(0,Ot.jsxs)(Hs,(0,ft.Z)({as:s,className:(0,gt.default)(p.root,i),ref:r,ownerState:h},u,{children:[c,o]}))})})),zs=eo;var Gs=__webpack_require__(8974);const qs=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Vs(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function Ws(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Ys(e,t){if(void 0===t)return!0;let r=e.innerText;return void 0===r&&(r=e.textContent),r=r.trim().toLowerCase(),0!==r.length&&(t.repeating?r[0]===t.keys[0]:0===r.indexOf(t.keys.join("")))}function Ks(e,t,r,n,o,i){let s=!1,a=o(e,t,!!t&&r);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!n&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Ys(a,i)&&!t)return a.focus(),!0;a=o(e,a,r)}return!1}const $s=t.forwardRef((function(e,r){const{actions:n,autoFocus:o=!1,autoFocusItem:i=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,pt.Z)(e,qs),p=t.useRef(null),f=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Gs.Z)((()=>{o&&p.current.focus()}),[o]),t.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const r=`${zs((0,Bs.Z)(e))}px`;p.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,p.current.style.width=`calc(100% + ${r})`}return p.current}})),[]);const g=(0,Gr.Z)(p,r);let m=-1;t.Children.forEach(s,((e,r)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===m)&&(m=r))}));const v=t.Children.map(s,((e,r)=>{if(r===m){const r={};return i&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return(0,Ot.jsx)(Fs,(0,ft.Z)({role:"menu",ref:g,className:a,onKeyDown:e=>{const t=p.current,r=e.key,n=(0,Bs.Z)(t).activeElement;if("ArrowDown"===r)e.preventDefault(),Ks(t,n,c,l,Vs);else if("ArrowUp"===r)e.preventDefault(),Ks(t,n,c,l,Ws);else if("Home"===r)e.preventDefault(),Ks(t,null,c,l,Vs);else if("End"===r)e.preventDefault(),Ks(t,null,c,l,Ws);else if(1===r.length){const o=f.current,i=r.toLowerCase(),s=performance.now();o.keys.length>0&&(s-o.lastTime>500?(o.keys=[],o.repeating=!0,o.previousKeyMatched=!0):o.repeating&&i!==o.keys[0]&&(o.repeating=!1)),o.lastTime=s,o.keys.push(i);const a=n&&!o.repeating&&Ys(n,o);o.previousKeyMatched&&(a||Ks(t,n,!1,l,Vs,o))?e.preventDefault():o.previousKeyMatched=!1}u&&u(e)},tabIndex:o?0:-1},h,{children:v}))})),Qs=$s;var Xs=__webpack_require__(7144),Js=__webpack_require__(5340);const ea=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ta(e){return`scale(${e}, ${e**2})`}const ra={entering:{opacity:1,transform:ta(1)},entered:{opacity:1,transform:"none"}},na="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),oa=t.forwardRef((function(e,r){const{addEndListener:n,appear:o=!0,children:i,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:g="auto",TransitionComponent:m=Oo}=e,v=(0,pt.Z)(e,ea),_=t.useRef(),y=t.useRef(),b=Er(),E=t.useRef(null),S=(0,Gr.Z)(E,i.ref,r),C=e=>t=>{if(e){const r=E.current;void 0===t?e(r):e(r,t)}},T=C(u),w=C(((e,t)=>{Io(e);const{duration:r,delay:n,easing:o}=Po({style:f,timeout:g,easing:s},{mode:"enter"});let i;"auto"===g?(i=b.transitions.getAutoHeightDuration(e.clientHeight),y.current=i):i=r,e.style.transition=[b.transitions.create("opacity",{duration:i,delay:n}),b.transitions.create("transform",{duration:na?i:.666*i,delay:n,easing:o})].join(","),l&&l(e,t)})),R=C(c),k=C(p),O=C((e=>{const{duration:t,delay:r,easing:n}=Po({style:f,timeout:g,easing:s},{mode:"exit"});let o;"auto"===g?(o=b.transitions.getAutoHeightDuration(e.clientHeight),y.current=o):o=t,e.style.transition=[b.transitions.create("opacity",{duration:o,delay:r}),b.transitions.create("transform",{duration:na?o:.666*o,delay:na?r:r||.333*o,easing:n})].join(","),e.style.opacity=0,e.style.transform=ta(.75),d&&d(e)})),I=C(h);return t.useEffect((()=>()=>{clearTimeout(_.current)}),[]),(0,Ot.jsx)(m,(0,ft.Z)({appear:o,in:a,nodeRef:E,onEnter:w,onEntered:R,onEntering:T,onExit:O,onExited:I,onExiting:k,addEndListener:e=>{"auto"===g&&(_.current=setTimeout(e,y.current||0)),n&&n(E.current,e)},timeout:"auto"===g?null:g},v,{children:(e,r)=>t.cloneElement(i,(0,ft.Z)({style:(0,ft.Z)({opacity:0,transform:ta(.75),visibility:"exited"!==e||a?void 0:"hidden"},ra[e],f,i.props.style),ref:S},r))}))}));oa.muiSupportAuto=!0;const ia=oa;function sa(e){return(0,Rt.Z)("MuiPopover",e)}(0,wt.Z)("MuiPopover",["root","paper"]);const aa=["onEntering"],la=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function ca(e,t){let r=0;return"number"==typeof t?r=t:"center"===t?r=e.height/2:"bottom"===t&&(r=e.height),r}function ua(e,t){let r=0;return"number"==typeof t?r=t:"center"===t?r=e.width/2:"right"===t&&(r=e.width),r}function da(e){return[e.horizontal,e.vertical].map((e=>"number"==typeof e?`${e}px`:e)).join(" ")}function ha(e){return"function"==typeof e?e():e}const pa=(0,St.ZP)(zo,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),fa=(0,St.ZP)(Ko,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),ga=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:s={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:p=16,open:f,PaperProps:g={},transformOrigin:m={vertical:"top",horizontal:"left"},TransitionComponent:v=ia,transitionDuration:_="auto",TransitionProps:{onEntering:y}={}}=n,b=(0,pt.Z)(n.TransitionProps,aa),E=(0,pt.Z)(n,la),S=t.useRef(),C=(0,Gr.Z)(S,g.ref),T=(0,ft.Z)({},n,{anchorOrigin:s,anchorReference:l,elevation:h,marginThreshold:p,PaperProps:g,transformOrigin:m,TransitionComponent:v,transitionDuration:_,TransitionProps:b}),w=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"],paper:["paper"]},sa,t)})(T),R=t.useCallback((()=>{if("anchorPosition"===l)return a;const e=ha(i),t=(e&&1===e.nodeType?e:(0,Bs.Z)(S.current).body).getBoundingClientRect();return{top:t.top+ca(t,s.vertical),left:t.left+ua(t,s.horizontal)}}),[i,s.horizontal,s.vertical,a,l]),k=t.useCallback((e=>({vertical:ca(e,m.vertical),horizontal:ua(e,m.horizontal)})),[m.horizontal,m.vertical]),O=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},r=k(t);if("none"===l)return{top:null,left:null,transformOrigin:da(r)};const n=R();let o=n.top-r.vertical,s=n.left-r.horizontal;const a=o+t.height,c=s+t.width,u=(0,Js.Z)(ha(i)),d=u.innerHeight-p,h=u.innerWidth-p;if(o<p){const e=o-p;o-=e,r.vertical+=e}else if(a>d){const e=a-d;o-=e,r.vertical+=e}if(s<p){const e=s-p;s-=e,r.horizontal+=e}else if(c>h){const e=c-h;s-=e,r.horizontal+=e}return{top:`${Math.round(o)}px`,left:`${Math.round(s)}px`,transformOrigin:da(r)}}),[i,l,R,k,p]),[I,P]=t.useState(f),A=t.useCallback((()=>{const e=S.current;if(!e)return;const t=O(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,P(!0)}),[O]);t.useEffect((()=>{f&&A()})),t.useImperativeHandle(o,(()=>f?{updatePosition:()=>{A()}}:null),[f,A]),t.useEffect((()=>{if(!f)return;const e=(0,Xs.Z)((()=>{A()})),t=(0,Js.Z)(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[i,f,A]);let N=_;"auto"!==_||v.muiSupportAuto||(N=void 0);const L=d||(i?(0,Bs.Z)(ha(i)).body:void 0);return(0,Ot.jsx)(pa,(0,ft.Z)({BackdropProps:{invisible:!0},className:(0,gt.default)(w.root,u),container:L,open:f,ref:r,ownerState:T},E,{children:(0,Ot.jsx)(v,(0,ft.Z)({appear:!0,in:f,onEntering:(e,t)=>{y&&y(e,t),A()},onExited:()=>{P(!1)},timeout:N},b,{children:(0,Ot.jsx)(fa,(0,ft.Z)({elevation:h},g,{ref:C,className:(0,gt.default)(w.paper,g.className)},I?void 0:{style:(0,ft.Z)({},g.style,{opacity:0})},{ownerState:T,children:c}))}))}))})),ma=ga;function va(e){return(0,Rt.Z)("MuiMenu",e)}(0,wt.Z)("MuiMenu",["root","paper","list"]);const _a=["onEntering"],ya=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],ba={vertical:"top",horizontal:"right"},Ea={vertical:"top",horizontal:"left"},Sa=(0,St.ZP)(ma,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ca=(0,St.ZP)(Ko,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ta=(0,St.ZP)(Qs,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),wa=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:i,disableAutoFocusItem:s=!1,MenuListProps:a={},onClose:l,open:c,PaperProps:u={},PopoverClasses:d,transitionDuration:h="auto",TransitionProps:{onEntering:p}={},variant:f="selectedMenu"}=n,g=(0,pt.Z)(n.TransitionProps,_a),m=(0,pt.Z)(n,ya),v=Er(),_="rtl"===v.direction,y=(0,ft.Z)({},n,{autoFocus:o,disableAutoFocusItem:s,MenuListProps:a,onEntering:p,PaperProps:u,transitionDuration:h,TransitionProps:g,variant:f}),b=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"],paper:["paper"],list:["list"]},va,t)})(y),E=o&&!s&&c,S=t.useRef(null);let C=-1;return t.Children.map(i,((e,r)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===f&&e.props.selected||-1===C)&&(C=r))})),(0,Ot.jsx)(Sa,(0,ft.Z)({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?ba:Ea,PaperProps:(0,ft.Z)({component:Ca},u,{classes:(0,ft.Z)({},u.classes,{root:b.paper})}),className:b.root,open:c,ref:r,transitionDuration:h,TransitionProps:(0,ft.Z)({onEntering:(e,t)=>{S.current&&S.current.adjustStyleForScrollbar(e,v),p&&p(e,t)}},g),ownerState:y},m,{classes:d,children:(0,Ot.jsx)(Ta,(0,ft.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:S,autoFocus:o&&(-1===C||s),autoFocusItem:E,variant:f},a,{className:(0,gt.default)(b.list,a.className),children:i}))}))})),Ra=wa,ka=(0,wt.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),Oa=(0,wt.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Ia(e){return(0,Rt.Z)("MuiMenuItem",e)}const Pa=(0,wt.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Aa=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Na=(0,St.ZP)(On,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,ft.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Pa.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Pa.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Pa.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Pa.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Pa.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${xr.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${xr.inset}`]:{marginLeft:52},[`& .${Oa.root}`]:{marginTop:0,marginBottom:0},[`& .${Oa.inset}`]:{paddingLeft:36},[`& .${ka.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,ft.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${ka.root} svg`]:{fontSize:"1.25rem"}})))),La=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=n,p=(0,pt.Z)(n,Aa),f=t.useContext(Us),g=t.useMemo((()=>({dense:s||f.dense||!1,disableGutters:l})),[f.dense,s,l]),m=t.useRef(null);(0,Gs.Z)((()=>{o&&m.current&&m.current.focus()}),[o]);const v=(0,ft.Z)({},n,{dense:g.dense,divider:a,disableGutters:l}),_=(e=>{const{disabled:t,dense:r,divider:n,disableGutters:o,selected:i,classes:s}=e,a={root:["root",r&&"dense",t&&"disabled",!o&&"gutters",n&&"divider",i&&"selected"]},l=(0,Et.Z)(a,Ia,s);return(0,ft.Z)({},s,l)})(n),y=(0,Gr.Z)(m,r);let b;return n.disabled||(b=void 0!==d?d:-1),(0,Ot.jsx)(Us.Provider,{value:g,children:(0,Ot.jsx)(Na,(0,ft.Z)({ref:y,role:u,tabIndex:b,component:i,focusVisibleClassName:(0,gt.default)(_.focusVisible,c),className:(0,gt.default)(_.root,h)},p,{ownerState:v,classes:_}))})}));function Ma(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xa(e){return e instanceof Ma(e).Element||e instanceof Element}function Da(e){return e instanceof Ma(e).HTMLElement||e instanceof HTMLElement}function Ba(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ma(e).ShadowRoot||e instanceof ShadowRoot)}var Ua=Math.max,Za=Math.min,ja=Math.round;function Ha(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Fa(){return!/^((?!chrome|android).)*safari/i.test(Ha())}function za(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),o=1,i=1;t&&Da(e)&&(o=e.offsetWidth>0&&ja(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&ja(n.height)/e.offsetHeight||1);var s=(xa(e)?Ma(e):window).visualViewport,a=!Fa()&&r,l=(n.left+(a&&s?s.offsetLeft:0))/o,c=(n.top+(a&&s?s.offsetTop:0))/i,u=n.width/o,d=n.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Ga(e){var t=Ma(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function qa(e){return e?(e.nodeName||"").toLowerCase():null}function Va(e){return((xa(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wa(e){return za(Va(e)).left+Ga(e).scrollLeft}function Ya(e){return Ma(e).getComputedStyle(e)}function Ka(e){var t=Ya(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function $a(e,t,r){void 0===r&&(r=!1);var n,o,i=Da(t),s=Da(t)&&function(e){var t=e.getBoundingClientRect(),r=ja(t.width)/e.offsetWidth||1,n=ja(t.height)/e.offsetHeight||1;return 1!==r||1!==n}(t),a=Va(t),l=za(e,s,r),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!r)&&(("body"!==qa(t)||Ka(a))&&(c=(n=t)!==Ma(n)&&Da(n)?{scrollLeft:(o=n).scrollLeft,scrollTop:o.scrollTop}:Ga(n)),Da(t)?((u=za(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=Wa(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function Qa(e){var t=za(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Xa(e){return"html"===qa(e)?e:e.assignedSlot||e.parentNode||(Ba(e)?e.host:null)||Va(e)}function Ja(e){return["html","body","#document"].indexOf(qa(e))>=0?e.ownerDocument.body:Da(e)&&Ka(e)?e:Ja(Xa(e))}function el(e,t){var r;void 0===t&&(t=[]);var n=Ja(e),o=n===(null==(r=e.ownerDocument)?void 0:r.body),i=Ma(n),s=o?[i].concat(i.visualViewport||[],Ka(n)?n:[]):n,a=t.concat(s);return o?a:a.concat(el(Xa(s)))}function tl(e){return["table","td","th"].indexOf(qa(e))>=0}function rl(e){return Da(e)&&"fixed"!==Ya(e).position?e.offsetParent:null}function nl(e){for(var t=Ma(e),r=rl(e);r&&tl(r)&&"static"===Ya(r).position;)r=rl(r);return r&&("html"===qa(r)||"body"===qa(r)&&"static"===Ya(r).position)?t:r||function(e){var t=/firefox/i.test(Ha());if(/Trident/i.test(Ha())&&Da(e)&&"fixed"===Ya(e).position)return null;var r=Xa(e);for(Ba(r)&&(r=r.host);Da(r)&&["html","body"].indexOf(qa(r))<0;){var n=Ya(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}var ol="top",il="bottom",sl="right",al="left",ll="auto",cl=[ol,il,sl,al],ul="start",dl="end",hl="viewport",pl="popper",fl=cl.reduce((function(e,t){return e.concat([t+"-"+ul,t+"-"+dl])}),[]),gl=[].concat(cl,[ll]).reduce((function(e,t){return e.concat([t,t+"-"+ul,t+"-"+dl])}),[]),ml=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function vl(e){var t=new Map,r=new Set,n=[];function o(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var n=t.get(e);n&&o(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||o(e)})),n}var _l={placement:"bottom",modifiers:[],strategy:"absolute"};function yl(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function bl(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,o=t.defaultOptions,i=void 0===o?_l:o;return function(e,t,r){void 0===r&&(r=i);var o,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},_l,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(r){var o="function"==typeof r?r(a.options):r;d(),a.options=Object.assign({},i,a.options,o),a.scrollParents={reference:xa(e)?el(e):e.contextElement?el(e.contextElement):[],popper:el(t)};var s,c,h=function(e){var t=vl(e);return ml.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}((s=[].concat(n,a.options.modifiers),c=s.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return a.orderedModifiers=h.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,o=e.effect;if("function"==typeof o){var i=o({state:a,name:t,instance:u,options:n});l.push(i||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,r=e.popper;if(yl(t,r)){a.rects={reference:$a(t,nl(r),"fixed"===a.options.strategy),popper:Qa(r)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var o=a.orderedModifiers[n],i=o.fn,s=o.options,l=void 0===s?{}:s,d=o.name;"function"==typeof i&&(a=i({state:a,options:l,name:d,instance:u})||a)}else a.reset=!1,n=-1}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(o())}))}))),s}),destroy:function(){d(),c=!0}};if(!yl(e,t))return u;function d(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(r).then((function(e){!c&&r.onFirstUpdate&&r.onFirstUpdate(e)})),u}}var El={passive:!0};const Sl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,i=void 0===o||o,s=n.resize,a=void 0===s||s,l=Ma(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",r.update,El)})),a&&l.addEventListener("resize",r.update,El),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",r.update,El)})),a&&l.removeEventListener("resize",r.update,El)}},data:{}};function Cl(e){return e.split("-")[0]}function Tl(e){return e.split("-")[1]}function wl(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Rl(e){var t,r=e.reference,n=e.element,o=e.placement,i=o?Cl(o):null,s=o?Tl(o):null,a=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(i){case ol:t={x:a,y:r.y-n.height};break;case il:t={x:a,y:r.y+r.height};break;case sl:t={x:r.x+r.width,y:l};break;case al:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=i?wl(i):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case ul:t[c]=t[c]-(r[u]/2-n[u]/2);break;case dl:t[c]=t[c]+(r[u]/2-n[u]/2)}}return t}var kl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ol(e){var t,r=e.popper,n=e.popperRect,o=e.placement,i=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=void 0===h?0:h,f=s.y,g=void 0===f?0:f,m="function"==typeof u?u({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var v=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),y=al,b=ol,E=window;if(c){var S=nl(r),C="clientHeight",T="clientWidth";S===Ma(r)&&"static"!==Ya(S=Va(r)).position&&"absolute"===a&&(C="scrollHeight",T="scrollWidth"),(o===ol||(o===al||o===sl)&&i===dl)&&(b=il,g-=(d&&S===E&&E.visualViewport?E.visualViewport.height:S[C])-n.height,g*=l?1:-1),o!==al&&(o!==ol&&o!==il||i!==dl)||(y=sl,p-=(d&&S===E&&E.visualViewport?E.visualViewport.width:S[T])-n.width,p*=l?1:-1)}var w,R=Object.assign({position:a},c&&kl),k=!0===u?function(e){var t=e.x,r=e.y,n=window.devicePixelRatio||1;return{x:ja(t*n)/n||0,y:ja(r*n)/n||0}}({x:p,y:g}):{x:p,y:g};return p=k.x,g=k.y,l?Object.assign({},R,((w={})[b]=_?"0":"",w[y]=v?"0":"",w.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",w)):Object.assign({},R,((t={})[b]=_?g+"px":"",t[y]=v?p+"px":"",t.transform="",t))}const Il={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=void 0===n||n,i=r.adaptive,s=void 0===i||i,a=r.roundOffsets,l=void 0===a||a,c={placement:Cl(t.placement),variation:Tl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ol(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ol(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Pl={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];Da(o)&&qa(o)&&(Object.assign(o.style,r),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});Da(n)&&qa(n)&&(Object.assign(n.style,i),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]},Al={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.offset,i=void 0===o?[0,0]:o,s=gl.reduce((function(e,r){return e[r]=function(e,t,r){var n=Cl(e),o=[al,ol].indexOf(n)>=0?-1:1,i="function"==typeof r?r(Object.assign({},t,{placement:e})):r,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[al,sl].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(r,t.rects,i),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}};var Nl={left:"right",right:"left",bottom:"top",top:"bottom"};function Ll(e){return e.replace(/left|right|bottom|top/g,(function(e){return Nl[e]}))}var Ml={start:"end",end:"start"};function xl(e){return e.replace(/start|end/g,(function(e){return Ml[e]}))}function Dl(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ba(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Bl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ul(e,t,r){return t===hl?Bl(function(e,t){var r=Ma(e),n=Va(e),o=r.visualViewport,i=n.clientWidth,s=n.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;var c=Fa();(c||!c&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a+Wa(e),y:l}}(e,r)):xa(t)?function(e,t){var r=za(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(t,r):Bl(function(e){var t,r=Va(e),n=Ga(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=Ua(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Ua(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+Wa(e),l=-n.scrollTop;return"rtl"===Ya(o||r).direction&&(a+=Ua(r.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}(Va(e)))}function Zl(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function jl(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function Hl(e,t){void 0===t&&(t={});var r=t,n=r.placement,o=void 0===n?e.placement:n,i=r.strategy,s=void 0===i?e.strategy:i,a=r.boundary,l=void 0===a?"clippingParents":a,c=r.rootBoundary,u=void 0===c?hl:c,d=r.elementContext,h=void 0===d?pl:d,p=r.altBoundary,f=void 0!==p&&p,g=r.padding,m=void 0===g?0:g,v=Zl("number"!=typeof m?m:jl(m,cl)),_=h===pl?"reference":pl,y=e.rects.popper,b=e.elements[f?_:h],E=function(e,t,r,n){var o="clippingParents"===t?function(e){var t=el(Xa(e)),r=["absolute","fixed"].indexOf(Ya(e).position)>=0&&Da(e)?nl(e):e;return xa(r)?t.filter((function(e){return xa(e)&&Dl(e,r)&&"body"!==qa(e)})):[]}(e):[].concat(t),i=[].concat(o,[r]),s=i[0],a=i.reduce((function(t,r){var o=Ul(e,r,n);return t.top=Ua(o.top,t.top),t.right=Za(o.right,t.right),t.bottom=Za(o.bottom,t.bottom),t.left=Ua(o.left,t.left),t}),Ul(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(xa(b)?b:b.contextElement||Va(e.elements.popper),l,u,s),S=za(e.elements.reference),C=Rl({reference:S,element:y,strategy:"absolute",placement:o}),T=Bl(Object.assign({},y,C)),w=h===pl?T:S,R={top:E.top-w.top+v.top,bottom:w.bottom-E.bottom+v.bottom,left:E.left-w.left+v.left,right:w.right-E.right+v.right},k=e.modifiersData.offset;if(h===pl&&k){var O=k[o];Object.keys(R).forEach((function(e){var t=[sl,il].indexOf(e)>=0?1:-1,r=[ol,il].indexOf(e)>=0?"y":"x";R[e]+=O[r]*t}))}return R}const Fl={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,i=void 0===o||o,s=r.altAxis,a=void 0===s||s,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,f=void 0===p||p,g=r.allowedAutoPlacements,m=t.options.placement,v=Cl(m),_=l||(v!==m&&f?function(e){if(Cl(e)===ll)return[];var t=Ll(e);return[xl(e),t,xl(t)]}(m):[Ll(m)]),y=[m].concat(_).reduce((function(e,r){return e.concat(Cl(r)===ll?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,o=r.boundary,i=r.rootBoundary,s=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?gl:l,u=Tl(n),d=u?a?fl:fl.filter((function(e){return Tl(e)===u})):cl,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,r){return t[r]=Hl(e,{placement:r,boundary:o,rootBoundary:i,padding:s})[Cl(r)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:g}):r)}),[]),b=t.rects.reference,E=t.rects.popper,S=new Map,C=!0,T=y[0],w=0;w<y.length;w++){var R=y[w],k=Cl(R),O=Tl(R)===ul,I=[ol,il].indexOf(k)>=0,P=I?"width":"height",A=Hl(t,{placement:R,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),N=I?O?sl:al:O?il:ol;b[P]>E[P]&&(N=Ll(N));var L=Ll(N),M=[];if(i&&M.push(A[k]<=0),a&&M.push(A[N]<=0,A[L]<=0),M.every((function(e){return e}))){T=R,C=!1;break}S.set(R,M)}if(C)for(var x=function(e){var t=y.find((function(t){var r=S.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return T=t,"break"},D=f?3:1;D>0&&"break"!==x(D);D--);t.placement!==T&&(t.modifiersData[n]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function zl(e,t,r){return Ua(e,Za(t,r))}const Gl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,i=void 0===o||o,s=r.altAxis,a=void 0!==s&&s,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=void 0===h||h,f=r.tetherOffset,g=void 0===f?0:f,m=Hl(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=Cl(t.placement),_=Tl(t.placement),y=!_,b=wl(v),E="x"===b?"y":"x",S=t.modifiersData.popperOffsets,C=t.rects.reference,T=t.rects.popper,w="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,R="number"==typeof w?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(S){if(i){var I,P="y"===b?ol:al,A="y"===b?il:sl,N="y"===b?"height":"width",L=S[b],M=L+m[P],x=L-m[A],D=p?-T[N]/2:0,B=_===ul?C[N]:T[N],U=_===ul?-T[N]:-C[N],Z=t.elements.arrow,j=p&&Z?Qa(Z):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},F=H[P],z=H[A],G=zl(0,C[N],j[N]),q=y?C[N]/2-D-G-F-R.mainAxis:B-G-F-R.mainAxis,V=y?-C[N]/2+D+G+z+R.mainAxis:U+G+z+R.mainAxis,W=t.elements.arrow&&nl(t.elements.arrow),Y=W?"y"===b?W.clientTop||0:W.clientLeft||0:0,K=null!=(I=null==k?void 0:k[b])?I:0,$=L+V-K,Q=zl(p?Za(M,L+q-K-Y):M,L,p?Ua(x,$):x);S[b]=Q,O[b]=Q-L}if(a){var X,J="x"===b?ol:al,ee="x"===b?il:sl,te=S[E],re="y"===E?"height":"width",ne=te+m[J],oe=te-m[ee],ie=-1!==[ol,al].indexOf(v),se=null!=(X=null==k?void 0:k[E])?X:0,ae=ie?ne:te-C[re]-T[re]-se+R.altAxis,le=ie?te+C[re]+T[re]-se-R.altAxis:oe,ce=p&&ie?function(e,t,r){var n=zl(e,t,r);return n>r?r:n}(ae,te,le):zl(p?ae:ne,te,p?le:oe);S[E]=ce,O[E]=ce-te}t.modifiersData[n]=O}},requiresIfExists:["offset"]},ql={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,o=e.options,i=r.elements.arrow,s=r.modifiersData.popperOffsets,a=Cl(r.placement),l=wl(a),c=[al,sl].indexOf(a)>=0?"height":"width";if(i&&s){var u=function(e,t){return Zl("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:jl(e,cl))}(o.padding,r),d=Qa(i),h="y"===l?ol:al,p="y"===l?il:sl,f=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],g=s[l]-r.rects.reference[l],m=nl(i),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,_=f/2-g/2,y=u[h],b=v-d[c]-u[p],E=v/2-d[c]/2+_,S=zl(y,E,b),C=l;r.modifiersData[n]=((t={})[C]=S,t.centerOffset=S-E,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&Dl(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vl(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Wl(e){return[ol,sl,il,al].some((function(t){return e[t]>=0}))}var Yl=bl({defaultModifiers:[Sl,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=Rl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Il,Pl,Al,Fl,Gl,ql,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=Hl(t,{elementContext:"reference"}),a=Hl(t,{altBoundary:!0}),l=Vl(s,n),c=Vl(a,o,i),u=Wl(l),d=Wl(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function Kl(e){return(0,Rt.Z)("MuiPopperUnstyled",e)}(0,wt.Z)("MuiPopperUnstyled",["root"]);const $l=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],Ql=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Xl(e){return"function"==typeof e?e():e}const Jl={},ec=t.forwardRef((function(e,r){var n;const{anchorEl:o,children:i,component:s,direction:a,disablePortal:l,modifiers:c,open:u,ownerState:d,placement:h,popperOptions:p,popperRef:f,slotProps:g={},slots:m={},TransitionProps:v}=e,_=(0,pt.Z)(e,$l),y=t.useRef(null),b=(0,qn.Z)(y,r),E=t.useRef(null),S=(0,qn.Z)(E,f),C=t.useRef(S);(0,$n.Z)((()=>{C.current=S}),[S]),t.useImperativeHandle(f,(()=>E.current),[]);const T=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(h,a),[w,R]=t.useState(T),[k,O]=t.useState(Xl(o));t.useEffect((()=>{E.current&&E.current.forceUpdate()})),t.useEffect((()=>{o&&O(Xl(o))}),[o]),(0,$n.Z)((()=>{if(!k||!u)return;let e=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{R(e.placement)}}];null!=c&&(e=e.concat(c)),p&&null!=p.modifiers&&(e=e.concat(p.modifiers));const t=Yl(k,y.current,(0,ft.Z)({placement:T},p,{modifiers:e}));return C.current(t),()=>{t.destroy(),C.current(null)}}),[k,l,c,u,p,T]);const I={placement:w};null!==v&&(I.TransitionProps=v);const P=(0,Et.Z)({root:["root"]},Kl,{}),A=null!=(n=null!=s?s:m.root)?n:"div",N=mo({elementType:A,externalSlotProps:g.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:b},ownerState:(0,ft.Z)({},e,d),className:P.root});return(0,Ot.jsx)(A,(0,ft.Z)({},N,{children:"function"==typeof i?i(I):i}))})),tc=t.forwardRef((function(e,r){const{anchorEl:n,children:o,container:i,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=Jl,popperRef:p,style:f,transition:g=!1,slotProps:m={},slots:v={}}=e,_=(0,pt.Z)(e,Ql),[y,b]=t.useState(!0);if(!l&&!u&&(!g||y))return null;let E;if(i)E=i;else if(n){const e=Xl(n);E=e&&void 0!==e.nodeType?(0,Vn.Z)(e).body:(0,Vn.Z)(null).body}const S=u||!l||g&&!y?void 0:"none",C=g?{in:u,onEnter:()=>{b(!1)},onExited:()=>{b(!0)}}:void 0;return(0,Ot.jsx)(Xn,{disablePortal:a,container:E,children:(0,Ot.jsx)(ec,(0,ft.Z)({anchorEl:n,direction:s,disablePortal:a,modifiers:c,ref:r,open:g?!y:u,placement:d,popperOptions:h,popperRef:p,slotProps:m,slots:v},_,{style:(0,ft.Z)({position:"fixed",top:0,left:0,display:S},f),TransitionProps:C,children:o}))})})),rc=tc;var nc=__webpack_require__(4168);const oc=["components","componentsProps","slots","slotProps"],ic=(0,St.ZP)(rc,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),sc=t.forwardRef((function(e,t){var r;const n=(0,nc.Z)(),o=(0,Ct.Z)({props:e,name:"MuiPopper"}),{components:i,componentsProps:s,slots:a,slotProps:l}=o,c=(0,pt.Z)(o,oc),u=null!=(r=null==a?void 0:a.root)?r:null==i?void 0:i.Root;return(0,Ot.jsx)(ic,(0,ft.Z)({direction:null==n?void 0:n.direction,slots:{root:u},slotProps:null!=l?l:s},c,{ref:t}))})),ac=sc;var lc=__webpack_require__(7909);function cc(e){return(0,Rt.Z)("MuiTooltip",e)}const uc=(0,wt.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),dc=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"],hc=(0,St.ZP)(ac,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})((({theme:e,ownerState:t,open:r})=>(0,ft.Z)({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${uc.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${uc.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${uc.arrow}`]:(0,ft.Z)({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${uc.arrow}`]:(0,ft.Z)({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})}))),pc=(0,St.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,Tt.Z)(r.placement.split("-")[0])}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:(0,Lr.Fq)(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:(16/14,Math.round(114285.71428571428)/1e5+"em"),fontWeight:e.typography.fontWeightRegular},{[`.${uc.popper}[data-popper-placement*="left"] &`]:(0,ft.Z)({transformOrigin:"right center"},t.isRtl?(0,ft.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):(0,ft.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${uc.popper}[data-popper-placement*="right"] &`]:(0,ft.Z)({transformOrigin:"left center"},t.isRtl?(0,ft.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"}):(0,ft.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${uc.popper}[data-popper-placement*="top"] &`]:(0,ft.Z)({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${uc.popper}[data-popper-placement*="bottom"] &`]:(0,ft.Z)({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})}))),fc=(0,St.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:(0,Lr.Fq)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let gc=!1,mc=null,vc={x:0,y:0};function _c(e,t){return r=>{t&&t(r),e(r)}}const yc=t.forwardRef((function(e,r){var n,o,i,s,a,l,c,u,d,h,p,f,g,m,v,_,y,b,E;const S=(0,Ct.Z)({props:e,name:"MuiTooltip"}),{arrow:C=!1,children:T,components:w={},componentsProps:R={},describeChild:k=!1,disableFocusListener:O=!1,disableHoverListener:I=!1,disableInteractive:P=!1,disableTouchListener:A=!1,enterDelay:N=100,enterNextDelay:L=0,enterTouchDelay:M=700,followCursor:x=!1,id:D,leaveDelay:B=0,leaveTouchDelay:U=1500,onClose:Z,onOpen:j,open:H,placement:F="bottom",PopperComponent:z,PopperProps:G={},slotProps:q={},slots:V={},title:W,TransitionComponent:Y=ia,TransitionProps:K}=S,$=(0,pt.Z)(S,dc),Q=Er(),X="rtl"===Q.direction,[J,ee]=t.useState(),[te,re]=t.useState(null),ne=t.useRef(!1),oe=P||x,ie=t.useRef(),se=t.useRef(),ae=t.useRef(),le=t.useRef(),[ce,ue]=(0,Wi.Z)({controlled:H,default:!1,name:"Tooltip",state:"open"});let de=ce;const he=(0,lc.Z)(D),pe=t.useRef(),fe=t.useCallback((()=>{void 0!==pe.current&&(document.body.style.WebkitUserSelect=pe.current,pe.current=void 0),clearTimeout(le.current)}),[]);t.useEffect((()=>()=>{clearTimeout(ie.current),clearTimeout(se.current),clearTimeout(ae.current),fe()}),[fe]);const ge=e=>{clearTimeout(mc),gc=!0,ue(!0),j&&!de&&j(e)},me=(0,qr.Z)((e=>{clearTimeout(mc),mc=setTimeout((()=>{gc=!1}),800+B),ue(!1),Z&&de&&Z(e),clearTimeout(ie.current),ie.current=setTimeout((()=>{ne.current=!1}),Q.transitions.duration.shortest)})),ve=e=>{ne.current&&"touchstart"!==e.type||(J&&J.removeAttribute("title"),clearTimeout(se.current),clearTimeout(ae.current),N||gc&&L?se.current=setTimeout((()=>{ge(e)}),gc?L:N):ge(e))},_e=e=>{clearTimeout(se.current),clearTimeout(ae.current),ae.current=setTimeout((()=>{me(e)}),B)},{isFocusVisibleRef:ye,onBlur:be,onFocus:Ee,ref:Se}=(0,Vr.Z)(),[,Ce]=t.useState(!1),Te=e=>{be(e),!1===ye.current&&(Ce(!1),_e(e))},we=e=>{J||ee(e.currentTarget),Ee(e),!0===ye.current&&(Ce(!0),ve(e))},Re=e=>{ne.current=!0;const t=T.props;t.onTouchStart&&t.onTouchStart(e)},ke=ve,Oe=_e;t.useEffect((()=>{if(de)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||me(e)}}),[me,de]);const Ie=(0,Gr.Z)(T.ref,Se,ee,r);W||0===W||(de=!1);const Pe=t.useRef(),Ae={},Ne="string"==typeof W;k?(Ae.title=de||!Ne||I?null:W,Ae["aria-describedby"]=de?he:null):(Ae["aria-label"]=Ne?W:null,Ae["aria-labelledby"]=de&&!Ne?he:null);const Le=(0,ft.Z)({},Ae,$,T.props,{className:(0,gt.default)($.className,T.props.className),onTouchStart:Re,ref:Ie},x?{onMouseMove:e=>{const t=T.props;t.onMouseMove&&t.onMouseMove(e),vc={x:e.clientX,y:e.clientY},Pe.current&&Pe.current.update()}}:{}),Me={};A||(Le.onTouchStart=e=>{Re(e),clearTimeout(ae.current),clearTimeout(ie.current),fe(),pe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",le.current=setTimeout((()=>{document.body.style.WebkitUserSelect=pe.current,ve(e)}),M)},Le.onTouchEnd=e=>{T.props.onTouchEnd&&T.props.onTouchEnd(e),fe(),clearTimeout(ae.current),ae.current=setTimeout((()=>{me(e)}),U)}),I||(Le.onMouseOver=_c(ke,Le.onMouseOver),Le.onMouseLeave=_c(Oe,Le.onMouseLeave),oe||(Me.onMouseOver=ke,Me.onMouseLeave=Oe)),O||(Le.onFocus=_c(we,Le.onFocus),Le.onBlur=_c(Te,Le.onBlur),oe||(Me.onFocus=we,Me.onBlur=Te));const xe=t.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(te),options:{element:te,padding:4}}];return null!=(e=G.popperOptions)&&e.modifiers&&(t=t.concat(G.popperOptions.modifiers)),(0,ft.Z)({},G.popperOptions,{modifiers:t})}),[te,G]),De=(0,ft.Z)({},S,{isRtl:X,arrow:C,disableInteractive:oe,placement:F,PopperComponentProp:z,touch:ne.current}),Be=(e=>{const{classes:t,disableInteractive:r,arrow:n,touch:o,placement:i}=e,s={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",o&&"touch",`tooltipPlacement${(0,Tt.Z)(i.split("-")[0])}`],arrow:["arrow"]};return(0,Et.Z)(s,cc,t)})(De),Ue=null!=(n=null!=(o=V.popper)?o:w.Popper)?n:hc,Ze=null!=(i=null!=(s=null!=(a=V.transition)?a:w.Transition)?s:Y)?i:ia,je=null!=(l=null!=(c=V.tooltip)?c:w.Tooltip)?l:pc,He=null!=(u=null!=(d=V.arrow)?d:w.Arrow)?u:fc,Fe=ho(Ue,(0,ft.Z)({},G,null!=(h=q.popper)?h:R.popper,{className:(0,gt.default)(Be.popper,null==G?void 0:G.className,null==(p=null!=(f=q.popper)?f:R.popper)?void 0:p.className)}),De),ze=ho(Ze,(0,ft.Z)({},K,null!=(g=q.transition)?g:R.transition),De),Ge=ho(je,(0,ft.Z)({},null!=(m=q.tooltip)?m:R.tooltip,{className:(0,gt.default)(Be.tooltip,null==(v=null!=(_=q.tooltip)?_:R.tooltip)?void 0:v.className)}),De),qe=ho(He,(0,ft.Z)({},null!=(y=q.arrow)?y:R.arrow,{className:(0,gt.default)(Be.arrow,null==(b=null!=(E=q.arrow)?E:R.arrow)?void 0:b.className)}),De);return(0,Ot.jsxs)(t.Fragment,{children:[t.cloneElement(T,Le),(0,Ot.jsx)(Ue,(0,ft.Z)({as:null!=z?z:ac,placement:F,anchorEl:x?{getBoundingClientRect:()=>({top:vc.y,left:vc.x,right:vc.x,bottom:vc.y,width:0,height:0})}:J,popperRef:Pe,open:!!J&&de,id:he,transition:!0},Me,Fe,{popperOptions:xe,children:({TransitionProps:e})=>(0,Ot.jsx)(Ze,(0,ft.Z)({timeout:Q.transitions.duration.shorter},e,ze,{children:(0,Ot.jsxs)(je,(0,ft.Z)({},Ge,{children:[W,C?(0,Ot.jsx)(He,(0,ft.Z)({},qe,{ref:re})):null]}))}))}))]})})),bc=yc;var Ec=__webpack_require__(326);const Sc=__webpack_require__.p+"2c80b9f045e256775812d4113f2194a6.png";var Cc=__webpack_require__(9459),Tc=__webpack_require__(5398),wc=__webpack_require__(7962),Rc=__webpack_require__(8956),kc=__webpack_require__(7440),Oc=__webpack_require__(5089),Ic=__webpack_require__(4229),Pc=[{href:"/dashboard",icon:t.createElement(Cc.Z,{fontSize:"small"}),title:"Dashboard"},{href:"/user",icon:t.createElement(Tc.Z,{fontSize:"small"}),title:"User"},{href:"/quiz",icon:t.createElement(wc.Z,{fontSize:"small"}),title:"Quiz"},{href:"/stream",icon:t.createElement(Rc.Z,{fontSize:"small"}),title:"Stream"},{href:"/phase",icon:t.createElement(kc.Z,{fontSize:"small"}),title:"Change Phase"},{href:"/result",icon:t.createElement(Oc.Z,{fontSize:"small"}),title:"Result"},{href:"/settings",icon:t.createElement(Ic.Z,{fontSize:"small"}),title:"Settings"}],Ac=[{title:"Home",link:"/"},{title:"About Us",link:"/about-us"},{title:"Contact Us",link:"/contact-us"}],Nc=[{title:"Dashboard",link:"/admin/dashboard"},{title:"setting",link:"admin/settings"}],Lc=[];function Mc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dc=(0,Ps.Z)(mi)((function(e){return{backgroundColor:"rgba(255, 255, 255, 0.8)",color:"black",backdropFilter:"blur(5px)",boxShadow:e.theme.shadows[3],borderRadius:15,left:0,right:0,margin:"15px auto",width:"calc(100% - 100px)"}})),Bc=function(){var e=Mc(t.useState(null),2),r=e[0],n=e[1],o=Mc(t.useState(null),2),i=o[0],s=o[1],a=Ac,l="admin"===er.roles?Nc:Lc,c=Ye(),u=function(){n(null)},d=function(){s(null)};return t.createElement(t.Fragment,null,t.createElement(Dc,null,t.createElement(Ei,{sx:{minHeight:64}},t.createElement(Ds,{onClick:function(e){s(e.currentTarget)},sx:{display:{xs:"inline-flex",lg:"none"}}},t.createElement(Ec.Z,{fontSize:"small"})),t.createElement(Ra,{sx:{mt:"45px",display:{xs:"inline-flex",lg:"none"}},id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(i),onClose:d},a.map((function(e){return t.createElement(La,{component:Ht,to:e.link,key:e.title,onClick:d},t.createElement(Mt,{textAlign:"center"},e.title))}))),t.createElement(bc,{title:"Home"},t.createElement(Pi,{src:Ai})),t.createElement(bc,{title:"Home"},t.createElement(Mt,{sx:{ml:1}},"GrabIn")),t.createElement(lr,{sx:{flexGrow:1}}),t.createElement(lr,{sx:{display:{lg:"flex",xs:"none"},alignItems:"center"}},a.map((function(e){return t.createElement(Un,{key:e.title,component:Ht,to:e.link},e.title)}))),er.isAuthenticated?t.createElement(t.Fragment,null,t.createElement(Pi,{sx:{backgroundColor:"black",cursor:"pointer",height:40,width:40,ml:3},src:Sc,onClick:function(e){n(e.currentTarget)}}),t.createElement(Ra,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:u},t.createElement(lr,{sx:{py:1.5,px:2,width:"120px"}},t.createElement(Mt,{variant:"overline"},"Account"),t.createElement(Mt,{color:"text.secondary",variant:"body2"},er.name)),t.createElement(jr,null),l.map((function(e){return t.createElement("div",{key:e.title},t.createElement(La,{component:Ht,to:e.link,key:e.title,onClick:u},t.createElement(Mt,{textAlign:"center"},e.title)),t.createElement(jr,null))})),t.createElement(La,{key:"logout",onClick:function(){er.logout(),c("/",{replace:!0})}},t.createElement(Mt,{textAlign:"center"},"Logout")))):t.createElement(t.Fragment,null,t.createElement(Un,{component:Ht,underline:"hover",to:"/login"},"Get In")))))};const Uc=__webpack_require__.p+"1b9dade29837cd41dc028c26c3a90211.jpeg",Zc=function(){return t.createElement(Nr,{container:!0,spacing:2,marginTop:"10px",paddingBottom:"30px",direction:"column",alignItems:"center",justifyContent:"center"},t.createElement(Nr,{item:!0,xs:3},t.createElement(Mt,null,"All rights reserved. Copyright  2023 by GrabIn Team.")))};var jc=__webpack_require__(3614),Hc=__webpack_require__.n(jc);const Fc=function(e){var r=e.sentences,n=e.title,o=t.useRef(null),i=t.useRef(null);return t.useEffect((function(){var e={strings:r,typeSpeed:100,backSpeed:100,loop:!0};return i.current=new(Hc())(o.current,e),function(){i.current.destroy()}}),[r]),t.createElement("div",{className:"wrap",style:{width:"500px",height:"180px"}},t.createElement(Mt,{variant:"h1"},n),t.createElement("div",{className:"type-wrap"},t.createElement(Mt,{variant:"h5"},t.createElement("span",{ref:o}))))};var zc=(0,St.ZP)("div")((function(e){return{backgroundColor:e.theme.palette.background.body}})),Gc=["Create a detailed project plan with specific milestones and deadlines to keep yourself on track.","Break down complex tasks into smaller, more manageable ones to make the project less daunting.","Set priorities and focus on the most important tasks first.","Eliminate distractions by minimizing interruptions, turning off notifications, and setting specific work hours.","Consider delegating tasks to team members or outsourcing certain aspects of the project to speed up the process.","Don't be afraid to ask for help or seek guidance from more experienced colleagues or mentors.","Stay motivated and engaged by celebrating small successes and milestones along the way."];const qc=function(){return t.createElement(zc,null,t.createElement(lr,{sx:{display:"flex",flex:"1 1 auto",background:"url(".concat(Uc,") center top / cover transparent"),flexDirection:"column",width:"100%",backgroundSize:"cover",height:"75vh",color:ms.palette.background.paper}},t.createElement(lr,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"50px",height:"100%"}},t.createElement(Fc,{sentences:Gc,title:"GrabIn"})),t.createElement(Bc,null)),t.createElement(lr,null,t.createElement(Ko,{sx:{margin:"-64px 24px 32px",minHeight:"55vh",boxShadow:"rgb(0 0 0 / 5%) 0rem 1.25rem 1.6875rem 0rem",backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"saturate(200%) blur(30px)",border:"0px solid rgba(0, 0, 0, 0.125)",backgroundClip:"border-box",overflow:"visible",borderRadius:"0.75rem",padding:"16px"}},t.createElement(lt,null))),t.createElement(Zc,null))};function Vc(e){return e+.5|0}const Wc=(e,t,r)=>Math.max(Math.min(e,r),t);function Yc(e){return Wc(Vc(2.55*e),0,255)}function Kc(e){return Wc(Vc(255*e),0,255)}function $c(e){return Wc(Vc(e/2.55)/100,0,1)}function Qc(e){return Wc(Vc(100*e),0,100)}const Xc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jc=[..."0123456789ABCDEF"],eu=e=>Jc[15&e],tu=e=>Jc[(240&e)>>4]+Jc[15&e],ru=e=>(240&e)>>4==(15&e);const nu=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ou(e,t,r){const n=t*Math.min(r,1-r),o=(t,o=(t+e/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function iu(e,t,r){const n=(n,o=(n+e/60)%6)=>r-r*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function su(e,t,r){const n=ou(e,1,.5);let o;for(t+r>1&&(o=1/(t+r),t*=o,r*=o),o=0;o<3;o++)n[o]*=1-t-r,n[o]+=t;return n}function au(e){const t=e.r/255,r=e.g/255,n=e.b/255,o=Math.max(t,r,n),i=Math.min(t,r,n),s=(o+i)/2;let a,l,c;return o!==i&&(c=o-i,l=s>.5?c/(2-o-i):c/(o+i),a=function(e,t,r,n,o){return e===o?(t-r)/n+(t<r?6:0):t===o?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,o),a=60*a+.5),[0|a,l||0,s]}function lu(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(Kc)}function cu(e,t,r){return lu(ou,e,t,r)}function uu(e){return(e%360+360)%360}const du={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let pu;const fu=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,gu=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,mu=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function vu(e,t,r){if(e){let n=au(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=cu(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function _u(e,t){return e?Object.assign(t||{},e):e}function yu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Kc(e[3]))):(t=_u(e,{r:0,g:0,b:0,a:1})).a=Kc(t.a),t}function bu(e){return"r"===e.charAt(0)?function(e){const t=fu.exec(e);let r,n,o,i=255;if(t){if(t[7]!==r){const e=+t[7];i=t[8]?Yc(e):Wc(255*e,0,255)}return r=+t[1],n=+t[3],o=+t[5],r=255&(t[2]?Yc(r):Wc(r,0,255)),n=255&(t[4]?Yc(n):Wc(n,0,255)),o=255&(t[6]?Yc(o):Wc(o,0,255)),{r,g:n,b:o,a:i}}}(e):function(e){const t=nu.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?Yc(+t[5]):Kc(+t[5]));const o=uu(+t[2]),i=+t[3]/100,s=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return lu(su,e,t,r)}(o,i,s):"hsv"===t[1]?function(e,t,r){return lu(iu,e,t,r)}(o,i,s):cu(o,i,s),{r:r[0],g:r[1],b:r[2],a:n}}(e)}class Eu{constructor(e){if(e instanceof Eu)return e;const t=typeof e;let r;var n,o,i;"object"===t?r=yu(e):"string"===t&&(i=(n=e).length,"#"===n[0]&&(4===i||5===i?o={r:255&17*Xc[n[1]],g:255&17*Xc[n[2]],b:255&17*Xc[n[3]],a:5===i?17*Xc[n[4]]:255}:7!==i&&9!==i||(o={r:Xc[n[1]]<<4|Xc[n[2]],g:Xc[n[3]]<<4|Xc[n[4]],b:Xc[n[5]]<<4|Xc[n[6]],a:9===i?Xc[n[7]]<<4|Xc[n[8]]:255})),r=o||function(e){pu||(pu=function(){const e={},t=Object.keys(hu),r=Object.keys(du);let n,o,i,s,a;for(n=0;n<t.length;n++){for(s=a=t[n],o=0;o<r.length;o++)i=r[o],a=a.replace(i,du[i]);i=parseInt(hu[s],16),e[a]=[i>>16&255,i>>8&255,255&i]}return e}(),pu.transparent=[0,0,0,0]);const t=pu[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(e)||bu(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_u(this._rgb);return e&&(e.a=$c(e.a)),e}set rgb(e){this._rgb=yu(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${$c(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function(e){var t=(e=>ru(e.r)&&ru(e.g)&&ru(e.b)&&ru(e.a))(e)?eu:tu;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=au(e),r=t[0],n=Qc(t[1]),o=Qc(t[2]);return e.a<255?`hsla(${r}, ${n}%, ${o}%, ${$c(e.a)})`:`hsl(${r}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let o;const i=t===o?.5:t,s=2*i-1,a=r.a-n.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;o=1-l,r.r=255&l*r.r+o*n.r+.5,r.g=255&l*r.g+o*n.g+.5,r.b=255&l*r.b+o*n.b+.5,r.a=i*r.a+(1-i)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=mu($c(e.r)),o=mu($c(e.g)),i=mu($c(e.b));return{r:Kc(gu(n+r*(mu($c(t.r))-n))),g:Kc(gu(o+r*(mu($c(t.g))-o))),b:Kc(gu(i+r*(mu($c(t.b))-i))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Eu(this.rgb)}alpha(e){return this._rgb.a=Kc(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Vc(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vu(this._rgb,2,e),this}darken(e){return vu(this._rgb,2,-e),this}saturate(e){return vu(this._rgb,1,e),this}desaturate(e){return vu(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=au(e);r[0]=uu(r[0]+t),r=cu(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function Su(){}const Cu=(()=>{let e=0;return()=>e++})();function Tu(e){return null==e}function wu(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Ru(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ku(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function Ou(e,t){return ku(e)?e:t}function Iu(e,t){return void 0===e?t:e}function Pu(e,t,r){if(e&&"function"==typeof e.call)return e.apply(r,t)}function Au(e,t,r,n){let o,i,s;if(wu(e))if(i=e.length,n)for(o=i-1;o>=0;o--)t.call(r,e[o],o);else for(o=0;o<i;o++)t.call(r,e[o],o);else if(Ru(e))for(s=Object.keys(e),i=s.length,o=0;o<i;o++)t.call(r,e[s[o]],s[o])}function Nu(e,t){let r,n,o,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(o=e[r],i=t[r],o.datasetIndex!==i.datasetIndex||o.index!==i.index)return!1;return!0}function Lu(e){if(wu(e))return e.map(Lu);if(Ru(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let o=0;for(;o<n;++o)t[r[o]]=Lu(e[r[o]]);return t}return e}function Mu(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function xu(e,t,r,n){if(!Mu(e))return;const o=t[e],i=r[e];Ru(o)&&Ru(i)?Du(o,i,n):t[e]=Lu(i)}function Du(e,t,r){const n=wu(t)?t:[t],o=n.length;if(!Ru(e))return e;const i=(r=r||{}).merger||xu;let s;for(let t=0;t<o;++t){if(s=n[t],!Ru(s))continue;const o=Object.keys(s);for(let t=0,n=o.length;t<n;++t)i(o[t],e,s,r)}return e}function Bu(e,t){return Du(e,t,{merger:Uu})}function Uu(e,t,r){if(!Mu(e))return;const n=t[e],o=r[e];Ru(n)&&Ru(o)?Bu(n,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Lu(o))}const Zu={"":e=>e,x:e=>e.x,y:e=>e.y};function ju(e,t){const r=Zu[t]||(Zu[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const e of t)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function Hu(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Fu=e=>void 0!==e,zu=e=>"function"==typeof e,Gu=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},qu=Math.PI,Vu=2*qu,Wu=Number.POSITIVE_INFINITY,Yu=qu/180,Ku=qu/2,$u=qu/4,Qu=2*qu/3,Xu=Math.log10,Ju=Math.sign;function ed(e,t,r){return Math.abs(e-t)<r}function td(e){const t=Math.round(e);e=ed(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(Xu(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function rd(e){return!isNaN(parseFloat(e))&&isFinite(e)}function nd(e){return e*(qu/180)}function od(e){if(!ku(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function id(e){return(e%Vu+Vu)%Vu}function sd(e,t,r){return Math.max(t,Math.min(r,e))}function ad(e,t,r,n=1e-6){return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function ld(e,t,r){r=r||(r=>e[r]<t);let n,o=e.length-1,i=0;for(;o-i>1;)n=i+o>>1,r(n)?i=n:o=n;return{lo:i,hi:o}}const cd=(e,t,r,n)=>ld(e,r,n?n=>{const o=e[n][t];return o<r||o===r&&e[n+1][t]===r}:n=>e[n][t]<r),ud=(e,t,r)=>ld(e,r,(n=>e[n][t]>=r)),dd=["push","pop","shift","splice","unshift"];function hd(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,o=n.indexOf(t);-1!==o&&n.splice(o,1),n.length>0||(dd.forEach((t=>{delete e[t]})),delete e._chartjs)}const pd="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function fd(e,t){let r=[],n=!1;return function(...o){r=o,n||(n=!0,pd.call(window,(()=>{n=!1,e.apply(t,r)})))}}const gd=e=>"start"===e?"left":"end"===e?"right":"center",md=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2,vd=e=>0===e||1===e,_d=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Vu/r),yd=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*Vu/r)+1,bd={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ku),easeOutSine:e=>Math.sin(e*Ku),easeInOutSine:e=>-.5*(Math.cos(qu*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>vd(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>vd(e)?e:_d(e,.075,.3),easeOutElastic:e=>vd(e)?e:yd(e,.075,.3),easeInOutElastic(e){const t=.1125;return vd(e)?e:e<.5?.5*_d(2*e,t,.45):.5+.5*yd(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-bd.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*bd.easeInBounce(2*e):.5*bd.easeOutBounce(2*e-1)+.5};function Ed(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Sd(e){return Ed(e)?e:new Eu(e)}function Cd(e){return Ed(e)?e:new Eu(e).saturate(.5).darken(.1).hexString()}const Td=["x","y","borderWidth","radius","tension"],wd=["color","borderColor","backgroundColor"],Rd=new Map;function kd(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=Rd.get(r);return n||(n=new Intl.NumberFormat(e,t),Rd.set(r,n)),n}(t,r).format(e)}const Od={values:e=>wu(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let o,i=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(o="scientific"),i=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}(e,r)}const s=Xu(Math.abs(i)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),kd(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor(Xu(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?Od.numeric.call(this,e,t,r):""}};var Id={formatters:Od};const Pd=Object.create(null),Ad=Object.create(null);function Nd(e,t){if(!t)return e;const r=t.split(".");for(let t=0,n=r.length;t<n;++t){const n=r[t];e=e[n]||(e[n]=Object.create(null))}return e}function Ld(e,t,r){return"string"==typeof t?Du(Nd(e,t),r):Du(Nd(e,""),t)}class Md{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Cd(t.backgroundColor),this.hoverBorderColor=(e,t)=>Cd(t.borderColor),this.hoverColor=(e,t)=>Cd(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ld(this,e,t)}get(e){return Nd(this,e)}describe(e,t){return Ld(Ad,e,t)}override(e,t){return Ld(Pd,e,t)}route(e,t,r,n){const o=Nd(this,e),i=Nd(this,r),s="_"+t;Object.defineProperties(o,{[s]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=i[n];return Ru(e)?Object.assign({},t,e):Iu(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach((e=>e(this)))}}var xd=new Md({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:wd},numbers:{type:"number",properties:Td}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Id.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Dd(e,t,r,n,o){let i=t[o];return i||(i=t[o]=e.measureText(o).width,r.push(o)),i>n&&(n=i),n}function Bd(e,t,r){const n=e.currentDevicePixelRatio,o=0!==r?Math.max(r/2,.5):0;return Math.round((t-o)*n)/n+o}function Ud(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Zd(e,t,r,n){!function(e,t,r,n,o){let i,s,a,l,c,u,d,h;const p=t.pointStyle,f=t.rotation,g=t.radius;let m=(f||0)*Yu;if(p&&"object"==typeof p&&(i=p.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(r,n),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:o?e.ellipse(r,n,o/2,g,0,0,Vu):e.arc(r,n,g,0,Vu),e.closePath();break;case"triangle":u=o?o/2:g,e.moveTo(r+Math.sin(m)*u,n-Math.cos(m)*g),m+=Qu,e.lineTo(r+Math.sin(m)*u,n-Math.cos(m)*g),m+=Qu,e.lineTo(r+Math.sin(m)*u,n-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,s=Math.cos(m+$u)*l,d=Math.cos(m+$u)*(o?o/2-c:l),a=Math.sin(m+$u)*l,h=Math.sin(m+$u)*(o?o/2-c:l),e.arc(r-d,n-a,c,m-qu,m-Ku),e.arc(r+h,n-s,c,m-Ku,m),e.arc(r+d,n+a,c,m,m+Ku),e.arc(r-h,n+s,c,m+Ku,m+qu),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,u=o?o/2:l,e.rect(r-u,n-l,2*u,2*l);break}m+=$u;case"rectRot":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),e.moveTo(r-d,n-a),e.lineTo(r+h,n-s),e.lineTo(r+d,n+a),e.lineTo(r-h,n+s),e.closePath();break;case"crossRot":m+=$u;case"cross":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),e.moveTo(r-d,n-a),e.lineTo(r+d,n+a),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s);break;case"star":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),e.moveTo(r-d,n-a),e.lineTo(r+d,n+a),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s),m+=$u,d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),e.moveTo(r-d,n-a),e.lineTo(r+d,n+a),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s);break;case"line":s=o?o/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(r-s,n-a),e.lineTo(r+s,n+a);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(m)*(o?o/2:g),n+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}(e,t,r,n,null)}function jd(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function Hd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fd(e){e.restore()}function zd(e,t,r,n,o,i={}){const s=wu(t)?t:[t],a=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=o.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Tu(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<s.length;++l)c=s[l],i.backdrop&&qd(e,i.backdrop),a&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Tu(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,r,n,i.maxWidth)),e.fillText(c,r,n,i.maxWidth),Gd(e,r,n,c,i),n+=o.lineHeight;e.restore()}function Gd(e,t,r,n,o){if(o.strikethrough||o.underline){const i=e.measureText(n),s=t-i.actualBoundingBoxLeft,a=t+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,c=r+i.actualBoundingBoxDescent,u=o.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function qd(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function Vd(e,t){const{x:r,y:n,w:o,h:i,radius:s}=t;e.arc(r+s.topLeft,n+s.topLeft,s.topLeft,-Ku,qu,!0),e.lineTo(r,n+i-s.bottomLeft),e.arc(r+s.bottomLeft,n+i-s.bottomLeft,s.bottomLeft,qu,Ku,!0),e.lineTo(r+o-s.bottomRight,n+i),e.arc(r+o-s.bottomRight,n+i-s.bottomRight,s.bottomRight,Ku,0,!0),e.lineTo(r+o,n+s.topRight),e.arc(r+o-s.topRight,n+s.topRight,s.topRight,0,-Ku,!0),e.lineTo(r+s.topLeft,n)}const Wd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Yd=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kd(e,t){const r=(""+e).match(Wd);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}const $d=e=>+e||0;function Qd(e,t){const r={},n=Ru(t),o=n?Object.keys(t):t,i=Ru(e)?n?r=>Iu(e[r],e[t[r]]):t=>e[t]:()=>e;for(const e of o)r[e]=$d(i(e));return r}function Xd(e){return Qd(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Jd(e){return Qd(e,["topLeft","topRight","bottomLeft","bottomRight"])}function eh(e){const t=Xd(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function th(e,t){e=e||{},t=t||xd.font;let r=Iu(e.size,t.size);"string"==typeof r&&(r=parseInt(r,10));let n=Iu(e.style,t.style);n&&!(""+n).match(Yd)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:Iu(e.family,t.family),lineHeight:Kd(Iu(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:Iu(e.weight,t.weight),string:""};return o.string=function(e){return!e||Tu(e.size)||Tu(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(o),o}function rh(e,t,r,n){let o,i,s,a=!0;for(o=0,i=e.length;o<i;++o)if(s=e[o],void 0!==s&&(void 0!==t&&"function"==typeof s&&(s=s(t),a=!1),void 0!==r&&wu(s)&&(s=s[r%s.length],a=!1),void 0!==s))return n&&!a&&(n.cacheable=!1),s}function nh(e,t){return Object.assign(Object.create(e),t)}function oh(e,t=[""],r=e,n,o=(()=>e[0])){Fu(n)||(n=gh("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:o,override:o=>oh([o,...e],t,r,n)};return new Proxy(i,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>ch(r,n,(()=>function(e,t,r,n){let o;for(const i of t)if(o=gh(ah(i,e),r),Fu(o))return lh(e,o)?ph(r,n,e,o):o}(n,t,e,r))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>mh(e).includes(t),ownKeys:e=>mh(e),set(e,t,r){const n=e._storage||(e._storage=o());return e[t]=n[t]=r,delete e._keys,!0}})}function ih(e,t,r,n){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:sh(e,n),setContext:t=>ih(e,t,r,n),override:o=>ih(e.override(o),t,r,n)};return new Proxy(o,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>ch(e,t,(()=>function(e,t,r){const{_proxy:n,_context:o,_subProxy:i,_descriptors:s}=e;let a=n[t];return zu(a)&&s.isScriptable(t)&&(a=function(e,t,r,n){const{_proxy:o,_context:i,_subProxy:s,_stack:a}=r;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(i,s||n),a.delete(e),lh(e,t)&&(t=ph(o._scopes,o,e,t)),t}(t,a,e,r)),wu(a)&&a.length&&(a=function(e,t,r,n){const{_proxy:o,_context:i,_subProxy:s,_descriptors:a}=r;if(Fu(i.index)&&n(e))t=t[i.index%t.length];else if(Ru(t[0])){const r=t,n=o._scopes.filter((e=>e!==r));t=[];for(const l of r){const r=ph(n,o,e,l);t.push(ih(r,i,s&&s[e],a))}}return t}(t,a,e,s.isIndexable)),lh(t,a)&&(a=ih(a,o,i&&i[t],s)),a}(e,t,r))),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function sh(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:r,indexable:n,isScriptable:zu(r)?r:()=>r,isIndexable:zu(n)?n:()=>n}}const ah=(e,t)=>e?e+Hu(t):t,lh=(e,t)=>Ru(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function ch(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=r();return e[t]=n,n}function uh(e,t,r){return zu(e)?e(t,r):e}const dh=(e,t)=>!0===e?t:"string"==typeof e?ju(t,e):void 0;function hh(e,t,r,n,o){for(const i of t){const t=dh(r,i);if(t){e.add(t);const i=uh(t._fallback,r,o);if(Fu(i)&&i!==r&&i!==n)return i}else if(!1===t&&Fu(n)&&r!==n)return null}return!1}function ph(e,t,r,n){const o=t._rootScopes,i=uh(t._fallback,r,n),s=[...e,...o],a=new Set;a.add(n);let l=fh(a,s,r,i||r,n);return null!==l&&(!Fu(i)||i===r||(l=fh(a,s,i,l,n),null!==l))&&oh(Array.from(a),[""],o,i,(()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const o=n[t];return wu(o)&&Ru(r)?r:o||{}}(t,r,n)))}function fh(e,t,r,n,o){for(;r;)r=hh(e,t,r,n,o);return r}function gh(e,t){for(const r of t){if(!r)continue;const t=r[e];if(Fu(t))return t}}function mh(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function vh(){return"undefined"!=typeof window&&"undefined"!=typeof document}function _h(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function yh(e,t,r){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}Number.EPSILON;const bh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),Eh=["top","right","bottom","left"];function Sh(e,t,r){const n={};r=r?"-"+r:"";for(let o=0;o<4;o++){const i=Eh[o];n[i]=parseFloat(e[t+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Ch=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function Th(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,o=bh(r),i="border-box"===o.boxSizing,s=Sh(o,"padding"),a=Sh(o,"border","width"),{x:l,y:c,box:u}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:o,offsetY:i}=n;let s,a,l=!1;if(Ch(o,i,e.target))s=o,a=i;else{const e=t.getBoundingClientRect();s=n.clientX-e.left,a=n.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,r),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:p,height:f}=t;return i&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-d)/p*r.width/n),y:Math.round((c-h)/f*r.height/n)}}const wh=e=>Math.round(10*e)/10;function Rh(e,t,r){const n=t||1,o=Math.floor(e.height*n),i=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||s.height!==o||s.width!==i)&&(e.currentDevicePixelRatio=n,s.height=o,s.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0)}const kh=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function Oh(e,t){const r=function(e,t){return bh(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ih(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}class Ph{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const o=t.listeners[n],i=t.duration;o.forEach((n=>n({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(r-t.start,i)})))}_refresh(){this._request||(this._running=!0,this._request=pd.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((r,n)=>{if(!r.running||!r.items.length)return;const o=r.items;let i,s=o.length-1,a=!1;for(;s>=0;--s)i=o[s],i._active?(i._total>r.duration&&(r.duration=i._total),i.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,r,e,"progress")),o.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=o.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ah=new Ph;const Nh="transparent",Lh={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=Sd(e||Nh),o=n.valid&&Sd(t||Nh);return o&&o.valid?o.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class Mh{constructor(e,t,r,n){const o=t[r];n=rh([e.to,n,o,e.from]);const i=rh([e.from,o,n]);this._active=!0,this._fn=e.fn||Lh[e.type||typeof i],this._easing=bd[e.easing]||bd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=i,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],o=r-this._start,i=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=rh([e.to,t,n,e.from]),this._from=rh([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,o=this._from,i=this._loop,s=this._to;let a;if(this._active=o!==s&&(i||t<r),!this._active)return this._target[n]=s,void this._notify(!0);t<0?this._target[n]=o:(a=t/r%2,a=i&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,r)=>{e.push({res:t,rej:r})}))}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let e=0;e<r.length;e++)r[e][t]()}}class xh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ru(e))return;const t=Object.keys(xd.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const o=e[n];if(!Ru(o))return;const i={};for(const e of t)i[e]=o[e];(wu(o.properties)&&o.properties||[n]).forEach((e=>{e!==n&&r.has(e)||r.set(e,i)}))}))}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(r)return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r;e.options=t}(e,r);if(!n)return[];const o=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const o=e[n[t]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}(e.options.$animations,r).then((()=>{e.options=r}),(()=>{})),o}_createAnimations(e,t){const r=this._properties,n=[],o=e.$animations||(e.$animations={}),i=Object.keys(t),s=Date.now();let a;for(a=i.length-1;a>=0;--a){const l=i[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let u=o[l];const d=r.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(o[l]=u=new Mh(d,e,l,c),n.push(u)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(Ah.add(this._chart,r),!0):void 0}}function Dh(e,t){const r=e&&e.options||{},n=r.reverse,o=void 0===r.min?t:0,i=void 0===r.max?t:0;return{start:n?i:o,end:n?o:i}}function Bh(e,t){const r=[],n=e._getSortedDatasetMetas(t);let o,i;for(o=0,i=n.length;o<i;++o)r.push(n[o].index);return r}function Uh(e,t,r,n={}){const o=e.keys,i="single"===n.mode;let s,a,l,c;if(null!==t){for(s=0,a=o.length;s<a;++s){if(l=+o[s],l===r){if(n.all)continue;break}c=e.values[l],ku(c)&&(i||0===t||Ju(t)===Ju(c))&&(t+=c)}return t}}function Zh(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function jh(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Hh(e,t,r,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const t=e[o.index];if(r&&t>0||!r&&t<0)return o.index}return null}function Fh(e,t){const{chart:r,_cachedMeta:n}=e,o=r._stacks||(r._stacks={}),{iScale:i,vScale:s,index:a}=n,l=i.axis,c=s.axis,u=function(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}(i,s,n),d=t.length;let h;for(let e=0;e<d;++e){const r=t[e],{[l]:i,[c]:d}=r;h=(r._stacks||(r._stacks={}))[c]=jh(o,u,i),h[a]=d,h._top=Hh(h,s,!0,n.type),h._bottom=Hh(h,s,!1,n.type),(h._visualValues||(h._visualValues={}))[a]=d}}function zh(e,t){const r=e.scales;return Object.keys(r).filter((e=>r[e].axis===t)).shift()}function Gh(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const qh=e=>"reset"===e||"none"===e,Vh=(e,t)=>t?e:Object.assign({},e);class Wh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,o=t.xAxisID=Iu(r.xAxisID,zh(e,"x")),i=t.yAxisID=Iu(r.yAxisID,zh(e,"y")),s=t.rAxisID=Iu(r.rAxisID,zh(e,"r")),a=t.indexAxis,l=t.iAxisID=n(a,o,i,s),c=t.vAxisID=n(a,i,o,s);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hd(this._data,this),e._stacked&&Gh(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Ru(t))this._data=function(e){const t=Object.keys(e),r=new Array(t.length);let n,o,i;for(n=0,o=t.length;n<o;++n)i=t[n],r[n]={x:i,y:e[i]};return r}(t);else if(r!==t){if(r){hd(r,this);const e=this._cachedMeta;Gh(e),e._parsed=[]}t&&Object.isExtensible(t)&&(o=this,(n=t)._chartjs?n._chartjs.listeners.push(o):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),dd.forEach((e=>{const t="_onData"+Hu(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...e){const o=r.apply(this,e);return n._chartjs.listeners.forEach((r=>{"function"==typeof r[t]&&r[t](...e)})),o}})})))),this._syncList=[],this._data=t}var n,o}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const o=t._stacked;t._stacked=Zh(t.vScale,t),t.stack!==r.stack&&(n=!0,Gh(t),t.stack=r.stack),this._resyncElements(e),(n||o!==t._stacked)&&Fh(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:o,_stacked:i}=r,s=o.axis;let a,l,c,u=0===e&&t===n.length||r._sorted,d=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=wu(n[e])?this.parseArrayData(r,n,e,t):Ru(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const o=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<t;++a)r._parsed[a+e]=l=c[a],u&&(o()&&(u=!1),d=l);r._sorted=u}i&&Fh(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:o,vScale:i}=e,s=o.axis,a=i.axis,l=o.getLabels(),c=o===i,u=new Array(n);let d,h,p;for(d=0,h=n;d<h;++d)p=d+r,u[d]={[s]:c||o.parse(l[p],p),[a]:i.parse(t[p],p)};return u}parseArrayData(e,t,r,n){const{xScale:o,yScale:i}=e,s=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+r,u=t[c],s[a]={x:o.parse(u[0],c),y:i.parse(u[1],c)};return s}parseObjectData(e,t,r,n){const{xScale:o,yScale:i}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,u,d,h;for(c=0,u=n;c<u;++c)d=c+r,h=t[d],l[c]={x:o.parse(ju(h,s),d),y:i.parse(ju(h,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,o=this._cachedMeta,i=t[e.axis];return Uh({keys:Bh(n,!0),values:t._stacks[e.axis]._visualValues},i,o.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const o=r[t.axis];let i=null===o?NaN:o;const s=n&&r._stacks[t.axis];n&&s&&(n.values=s,i=Uh(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,o=r._sorted&&e===r.iScale,i=n.length,s=this._getOtherScale(e),a=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:Bh(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:r,minDefined:n,maxDefined:o}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?r:Number.POSITIVE_INFINITY}}(s);let d,h;function p(){h=n[d];const t=h[s.axis];return!ku(h[e.axis])||c>t||u<t}for(d=0;d<i&&(p()||(this.updateRangeFromParsed(l,e,h,a),!o));++d);if(o)for(d=i-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,o,i;for(n=0,o=t.length;n<o;++n)i=t[n][e.axis],ku(i)&&r.push(i);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,o;return Ru(e)?(t=e.top,r=e.right,n=e.bottom,o=e.left):t=r=n=o=e,{top:t,right:r,bottom:n,left:o,disabled:!1===e}}(Iu(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=Dh(e,r),o=Dh(t,r);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],o=t.chartArea,i=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,o,s,a),c=s;c<s+a;++c){const t=n[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,o))}for(c=0;c<i.length;++c)i[c].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];o=t.$context||(t.$context=function(e,t,r){return nh(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function(e,t){return nh(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const n="active"===t,o=this._cachedDataOpts,i=e+"-"+t,s=o[i],a=this.enableOptionSharing&&Fu(r);if(s)return Vh(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=n?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(xd.elements[e]),p=l.resolveNamedOptions(d,h,(()=>this.getContext(r,n,t)),u);return p.$shared&&(p.$shared=a,o[i]=Object.freeze(Vh(p,a))),p}_resolveAnimations(e,t,r){const n=this.chart,o=this._cachedDataOpts,i=`animation-${t}`,s=o[i];if(s)return s;let a;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,t),i=n.getOptionScopes(this.getDataset(),o);a=n.createResolver(i,this.getContext(e,r,t))}const l=new xh(n,a&&a.animations);return a&&a._cacheable&&(o[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||qh(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,o=this.getSharedOptions(r),i=this.includeOptions(t,o)||o!==n;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:i}}updateElement(e,t,r,n){qh(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!qh(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const o=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[e,t,r]of this._syncList)this[e](t,r);this._syncList=[];const n=r.length,o=t.length,i=Math.min(o,n);i&&this.parse(0,i),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,t,r=!0){const n=this._cachedMeta,o=n.data,i=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=i;s--)e[s]=e[s-t]};for(a(o),s=e;s<i;++s)o[s]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Gh(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Yh(e){const t=e.iScale,r=function(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,o=r.length;t<o;t++)n=n.concat(r[t].controller.getAllParsedValues(e));e._cache.$bar=function(e){const t=new Set;let r,n;for(r=0,n=e.length;r<n;++r)t.add(e[r]);return t.size===n?e:Array.from(t)}(n.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let n,o,i,s,a=t._length;const l=()=>{32767!==i&&-32768!==i&&(Fu(s)&&(a=Math.min(a,Math.abs(i-s)||a)),s=i)};for(n=0,o=r.length;n<o;++n)i=t.getPixelForValue(r[n]),l();for(s=void 0,n=0,o=t.ticks.length;n<o;++n)i=t.getPixelForTick(n),l();return a}function Kh(e,t,r,n){return wu(e)?function(e,t,r,n){const o=r.parse(e[0],n),i=r.parse(e[1],n),s=Math.min(o,i),a=Math.max(o,i);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[r.axis]=c,t._custom={barStart:l,barEnd:c,start:o,end:i,min:s,max:a}}(e,t,r,n):t[r.axis]=r.parse(e,n),t}function $h(e,t,r,n){const o=e.iScale,i=e.vScale,s=o.getLabels(),a=o===i,l=[];let c,u,d,h;for(c=r,u=r+n;c<u;++c)h=t[c],d={},d[o.axis]=a||o.parse(s[c],c),l.push(Kh(h,d,i,c));return l}function Qh(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Xh(e,t,r,n){let o=t.borderSkipped;const i={};if(!o)return void(e.borderSkipped=i);if(!0===o)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:u}=function(e){let t,r,n,o,i;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(o="end",i="start"):(o="start",i="end"),{start:r,end:n,reverse:t,top:o,bottom:i}}(e);"middle"===o&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?o=c:(r._bottom||0)===n?o=u:(i[Jh(u,s,a,l)]=!0,o=c)),i[Jh(o,s,a,l)]=!0,e.borderSkipped=i}function Jh(e,t,r,n){var o,i,s;return n?(s=r,e=ep(e=(o=e)===(i=t)?s:o===s?i:o,r,t)):e=ep(e,t,r),e}function ep(e,t,r){return"start"===e?t:"end"===e?r:e}function tp(e,{inflateAmount:t},r){e.inflateAmount="auto"===t?1===r?.33:0:t}class rp extends Wh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,n){return $h(e,t,r,n)}parseArrayData(e,t,r,n){return $h(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:o,vScale:i}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===o.axis?s:a,c="x"===i.axis?s:a,u=[];let d,h,p,f;for(d=r,h=r+n;d<h;++d)f=t[d],p={},p[o.axis]=o.parse(ju(f,l),d),u.push(Kh(ju(f,c),p,i,d));return u}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const o=r._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,o=this.getParsed(e),i=o._custom,s=Qh(i)?"["+i.start+", "+i.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const o="reset"===n,{index:i,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,n);for(let h=t;h<t+r;h++){const t=this.getParsed(h),r=o||Tu(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[s.axis],g={horizontal:l,base:r.base,enableBorderRadius:!f||Qh(t._custom)||i===f._top||i===f._bottom,x:l?r.head:p.center,y:l?p.center:r.head,height:l?p.size:Math.abs(r.size),width:l?Math.abs(r.size):p.size};d&&(g.options=u||this.resolveDataElementOptions(h,e[h].active?"active":n));const m=g.options||e[h].options;Xh(g,m,f,i),tp(g,m,c.ratio),this.updateElement(e[h],h,g,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),o=r.options.stacked,i=[],s=e=>{const r=e.controller.getParsed(t),n=r&&r[e.vScale.axis];if(Tu(n)||isNaN(n))return!0};for(const r of n)if((void 0===t||!s(r))&&((!1===o||-1===i.indexOf(r.stack)||void 0===o&&void 0===r.stack)&&i.push(r.stack),r.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const n=this._getStacks(e,r),o=void 0!==t?n.indexOf(t):-1;return-1===o?n.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let o,i;for(o=0,i=t.data.length;o<i;++o)n.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const s=e.barThickness;return{min:s||Yh(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:o,minBarLength:i}}=this,s=o||0,a=this.getParsed(e),l=a._custom,c=Qh(l);let u,d,h=a[t.axis],p=0,f=r?this.applyStack(t,a,r):h;f!==h&&(p=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&Ju(h)!==Ju(l.barEnd)&&(p=0),p+=h);const g=Tu(o)||c?p:o;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):m,d=u-m,Math.abs(d)<i){d=function(e,t,r){return 0!==e?Ju(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}(d,t,s)*i,h===s&&(m-=d/2);const e=t.getPixelForDecimal(0),o=t.getPixelForDecimal(1),l=Math.min(e,o),p=Math.max(e,o);m=Math.max(Math.min(m,p),l),u=m+d,r&&!c&&(a._stacks[t.axis]._visualValues[n]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(s)){const e=Ju(d)*t.getLineWidthForValue(s)/2;m+=e,d-=e}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,o=n.skipNull,i=Iu(n.maxBarThickness,1/0);let s,a;if(t.grouped){const r=o?this._getStackCount(e):t.stackCount,l="flex"===n.barThickness?function(e,t,r,n){const o=t.pixels,i=o[e];let s=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=r.categoryPercentage;null===s&&(s=i-(null===a?t.end-t.start:a-i)),null===a&&(a=i+i-s);const c=i-(i-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:r.barPercentage,start:c}}(e,t,n,r):function(e,t,r,n){const o=r.barThickness;let i,s;return Tu(o)?(i=t.min*r.categoryPercentage,s=r.barPercentage):(i=o*n,s=1),{chunk:i/n,ratio:s,start:t.pixels[e]-i/2}}(e,t,n,r),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(i,l.chunk*l.ratio)}else s=r.getPixelForValue(this.getParsed(e)[r.axis],e),a=Math.min(i,t.min*t.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let o=0;for(;o<n;++o)null!==this.getParsed(o)[t.axis]&&r[o].draw(this._ctx)}}function np(e,t,r,n){const{controller:o,data:i,_sorted:s}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&i.length){const e=a._reversePixels?ud:cd;if(!n)return e(i,t,r);if(o._sharedOptions){const n=i[0],o="function"==typeof n.getRange&&n.getRange(t);if(o){const n=e(i,t,r-o),s=e(i,t,r+o);return{lo:n.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function op(e,t,r,n,o){const i=e.getSortedVisibleDatasetMetas(),s=r[t];for(let e=0,r=i.length;e<r;++e){const{index:r,data:a}=i[e],{lo:l,hi:c}=np(i[e],t,s,o);for(let e=l;e<=c;++e){const t=a[e];t.skip||n(t,r,e)}}}function ip(e,t,r,n,o){const i=[];return o||e.isPointInArea(t)?(op(e,r,t,(function(r,s,a){(o||jd(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&i.push({element:r,datasetIndex:s,index:a})}),!0),i):i}function sp(e,t,r,n,o,i){return i||e.isPointInArea(t)?"r"!==r||n?function(e,t,r,n,o,i){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const o=t?Math.abs(e.x-n.x):0,i=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}(r);let l=Number.POSITIVE_INFINITY;return op(e,r,t,(function(r,c,u){const d=r.inRange(t.x,t.y,o);if(n&&!d)return;const h=r.getCenterPoint(o);if(!i&&!e.isPointInArea(h)&&!d)return;const p=a(t,h);p<l?(s=[{element:r,datasetIndex:c,index:u}],l=p):p===l&&s.push({element:r,datasetIndex:c,index:u})})),s}(e,t,r,n,o,i):function(e,t,r,n){let o=[];return op(e,r,t,(function(e,r,i){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],n),{angle:l}=function(e,t){const r=t.x-e.x,n=t.y-e.y,o=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*qu&&(i+=Vu),{angle:i,distance:o}}(e,{x:t.x,y:t.y});(function(e,t,r,n){const o=id(e),i=id(t),s=id(r),a=id(i-o),l=id(s-o),c=id(o-i),u=id(o-s);return o===i||o===s||n&&i===s||a>l&&c<u})(l,s,a)&&o.push({element:e,datasetIndex:r,index:i})})),o}(e,t,r,o):[]}function ap(e,t,r,n,o){const i=[],s="x"===r?"inXRange":"inYRange";let a=!1;return op(e,r,t,((e,n,l)=>{e[s](t[r],o)&&(i.push({element:e,datasetIndex:n,index:l}),a=a||e.inRange(t.x,t.y,o))})),n&&!a?[]:i}var lp={evaluateInteractionItems:op,modes:{index(e,t,r,n){const o=Th(t,e),i=r.axis||"x",s=r.includeInvisible||!1,a=r.intersect?ip(e,o,i,n,s):sp(e,o,i,!1,n,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,r,n){const o=Th(t,e),i=r.axis||"xy",s=r.includeInvisible||!1;let a=r.intersect?ip(e,o,i,n,s):sp(e,o,i,!1,n,s);if(a.length>0){const t=a[0].datasetIndex,r=e.getDatasetMeta(t).data;a=[];for(let e=0;e<r.length;++e)a.push({element:r[e],datasetIndex:t,index:e})}return a},point:(e,t,r,n)=>ip(e,Th(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const o=Th(t,e),i=r.axis||"xy",s=r.includeInvisible||!1;return sp(e,o,i,r.intersect,n,s)},x:(e,t,r,n)=>ap(e,Th(t,e),"x",r.intersect,n),y:(e,t,r,n)=>ap(e,Th(t,e),"y",r.intersect,n)}};const cp=["left","top","right","bottom"];function up(e,t){return e.filter((e=>e.pos===t))}function dp(e,t){return e.filter((e=>-1===cp.indexOf(e.pos)&&e.box.axis===t))}function hp(e,t){return e.sort(((e,r)=>{const n=t?r:e,o=t?e:r;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function pp(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function fp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function gp(e,t,r,n){const{pos:o,box:i}=r,s=e.maxPadding;if(!Ru(o)){r.size&&(e[o]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?i.height:i.width),r.size=t.size/t.count,e[o]+=r.size}i.getPadding&&fp(s,i.getPadding());const a=Math.max(0,t.outerWidth-pp(s,e,"left","right")),l=Math.max(0,t.outerHeight-pp(s,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,r.horizontal?{same:c,other:u}:{same:u,other:c}}function mp(e,t){const r=t.maxPadding;return function(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],r[e])})),n}(e?["left","right"]:["top","bottom"])}function vp(e,t,r,n){const o=[];let i,s,a,l,c,u;for(i=0,s=e.length,c=0;i<s;++i){a=e[i],l=a.box,l.update(a.width||t.w,a.height||t.h,mp(a.horizontal,t));const{same:s,other:d}=gp(t,r,a,n);c|=s&&o.length,u=u||d,l.fullSize||o.push(a)}return c&&vp(o,t,r,n)||u}function _p(e,t,r,n,o){e.top=r,e.left=t,e.right=t+n,e.bottom=r+o,e.width=n,e.height=o}function yp(e,t,r,n){const o=r.padding;let{x:i,y:s}=t;for(const a of e){const e=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const n=t.w*c,i=l.size||e.height;Fu(l.start)&&(s=l.start),e.fullSize?_p(e,o.left,s,r.outerWidth-o.right-o.left,i):_p(e,t.left+l.placed,s,n,i),l.start=s,l.placed+=n,s=e.bottom}else{const n=t.h*c,s=l.size||e.width;Fu(l.start)&&(i=l.start),e.fullSize?_p(e,i,o.top,s,r.outerHeight-o.bottom-o.top):_p(e,i,t.top+l.placed,s,n),l.start=i,l.placed+=n,i=e.right}}t.x=i,t.y=s}var bp={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const o=eh(e.options.layout.padding),i=Math.max(t-o.width,0),s=Math.max(r-o.height,0),a=function(e){const t=function(e){const t=[];let r,n,o,i,s,a;for(r=0,n=(e||[]).length;r<n;++r)o=e[r],({position:i,options:{stack:s,stackWeight:a=1}}=o),t.push({index:r,box:o,pos:i,horizontal:o.isHorizontal(),weight:o.weight,stack:s&&i+s,stackWeight:a});return t}(e),r=hp(t.filter((e=>e.box.fullSize)),!0),n=hp(up(t,"left"),!0),o=hp(up(t,"right")),i=hp(up(t,"top"),!0),s=hp(up(t,"bottom")),a=dp(t,"x"),l=dp(t,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:o.concat(l).concat(s).concat(a),chartArea:up(t,"chartArea"),vertical:n.concat(o).concat(l),horizontal:i.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Au(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:r,padding:o,availableWidth:i,availableHeight:s,vBoxMaxWidth:i/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},o);fp(h,eh(n));const p=Object.assign({maxPadding:h,w:i,h:s,x:o.left,y:o.top},o),f=function(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:o}=r;if(!e||!cp.includes(n))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=o}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let i,s,a;for(i=0,s=e.length;i<s;++i){a=e[i];const{fullSize:s}=a.box,l=r[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&t.availableWidth,a.height=o):(a.width=n,a.height=c?c*o:s&&t.availableHeight)}return r}(l.concat(c),d);vp(a.fullSize,p,d,f),vp(l,p,d,f),vp(c,p,d,f)&&vp(l,p,d,f),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(p),yp(a.leftAndTop,p,d,f),p.x+=p.w,p.y+=p.h,yp(a.rightAndBottom,p,d,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Au(a.chartArea,(t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class Ep{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class Sp extends Ep{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Cp="$chartjs",Tp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wp=e=>null===e||""===e,Rp=!!kh&&{passive:!0};function kp(e,t,r){e.canvas.removeEventListener(t,r,Rp)}function Op(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function Ip(e,t,r){const n=e.canvas,o=new MutationObserver((e=>{let t=!1;for(const r of e)t=t||Op(r.addedNodes,n),t=t&&!Op(r.removedNodes,n);t&&r()}));return o.observe(document,{childList:!0,subtree:!0}),o}function Pp(e,t,r){const n=e.canvas,o=new MutationObserver((e=>{let t=!1;for(const r of e)t=t||Op(r.removedNodes,n),t=t&&!Op(r.addedNodes,n);t&&r()}));return o.observe(document,{childList:!0,subtree:!0}),o}const Ap=new Map;let Np=0;function Lp(){const e=window.devicePixelRatio;e!==Np&&(Np=e,Ap.forEach(((t,r)=>{r.currentDevicePixelRatio!==e&&t()})))}function Mp(e,t,r){const n=e.canvas,o=n&&_h(n);if(!o)return;const i=fd(((e,t)=>{const n=o.clientWidth;r(e,t),n<o.clientWidth&&r()}),window),s=new ResizeObserver((e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||i(r,n)}));return s.observe(o),function(e,t){Ap.size||window.addEventListener("resize",Lp),Ap.set(e,t)}(e,i),s}function xp(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){Ap.delete(e),Ap.size||window.removeEventListener("resize",Lp)}(e)}function Dp(e,t,r){const n=e.canvas,o=fd((t=>{null!==e.ctx&&r(function(e,t){const r=Tp[e.type]||e.type,{x:n,y:o}=Th(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==o?o:null}}(t,e))}),e);return function(e,t,r){e.addEventListener(t,r,Rp)}(n,t,o),o}class Bp extends Ep{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),o=e.getAttribute("width");if(e[Cp]={initial:{height:n,width:o,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",wp(o)){const t=Oh(e,"width");void 0!==t&&(e.width=t)}if(wp(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Oh(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Cp])return!1;const r=t[Cp].initial;["height","width"].forEach((e=>{const n=r[e];Tu(n)?t.removeAttribute(e):t.setAttribute(e,n)}));const n=r.style||{};return Object.keys(n).forEach((e=>{t.style[e]=n[e]})),t.width=t.width,delete t[Cp],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:Ip,detach:Pp,resize:Mp}[t]||Dp;n[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];n&&(({attach:xp,detach:xp,resize:xp}[t]||kp)(e,t,n),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return function(e,t,r,n){const o=bh(e),i=Sh(o,"margin"),s=yh(o.maxWidth,e,"clientWidth")||Wu,a=yh(o.maxHeight,e,"clientHeight")||Wu,l=function(e,t,r){let n,o;if(void 0===t||void 0===r){const i=_h(e);if(i){const e=i.getBoundingClientRect(),s=bh(i),a=Sh(s,"border","width"),l=Sh(s,"padding");t=e.width-l.width-a.width,r=e.height-l.height-a.height,n=yh(s.maxWidth,i,"clientWidth"),o=yh(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||Wu,maxHeight:o||Wu}}(e,t,r);let{width:c,height:u}=l;if("content-box"===o.boxSizing){const e=Sh(o,"border","width"),t=Sh(o,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-i.width),u=Math.max(0,n?c/n:u-i.height),c=wh(Math.min(c,s,l.maxWidth)),u=wh(Math.min(u,a,l.maxHeight)),c&&!u&&(u=wh(c/2)),(void 0!==t||void 0!==r)&&n&&l.height&&u>l.height&&(u=l.height,c=wh(Math.floor(u*n))),{width:c,height:u}}(e,t,r,n)}isAttached(e){const t=_h(e);return!(!t||!t.isConnected)}}class Up{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return rd(this.x)&&rd(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach((e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]})),n}}function Zp(e,t,r,n,o){const i=Iu(n,0),s=Math.min(Iu(o,e.length),e.length);let a,l,c,u=0;for(r=Math.ceil(r),o&&(a=o-n,r=a/Math.floor(a/r)),c=i;c<0;)u++,c=Math.round(i+u*r);for(l=Math.max(i,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(i+u*r))}const jp=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,Hp=(e,t)=>Math.min(t||e,e);function Fp(e,t){const r=[],n=e.length/t,o=e.length;let i=0;for(;i<o;i+=n)r.push(e[Math.floor(i)]);return r}function zp(e,t,r){const n=e.ticks.length,o=Math.min(t,n-1),i=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(o);if(!(r&&(l=1===n?Math.max(c-i,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(o-1))/2,c+=o<t?l:-l,c<i-a||c>s+a)))return c}function Gp(e){return e.drawTicks?e.tickLength:0}function qp(e,t){if(!e.display)return 0;const r=th(e.font,t),n=eh(e.padding);return(wu(e.text)?e.text.length:1)*r.lineHeight+n.height}function Vp(e,t,r){let n=gd(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Wp extends Up{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=Ou(e,Number.POSITIVE_INFINITY),t=Ou(t,Number.NEGATIVE_INFINITY),r=Ou(r,Number.POSITIVE_INFINITY),n=Ou(n,Number.NEGATIVE_INFINITY),{min:Ou(e,r),max:Ou(t,n),minDefined:ku(e),maxDefined:ku(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:o,maxDefined:i}=this.getUserBounds();if(o&&i)return{min:r,max:n};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),o||(r=Math.min(r,t.min)),i||(n=Math.max(n,t.max));return r=i&&r>n?n:r,n=o&&r>n?r:n,{min:Ou(r,Ou(n,r)),max:Ou(n,Ou(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pu(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:o,ticks:i}=this.options,s=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:o}=e,i=(l=(o-n)/2,"string"==typeof(a=t)&&a.endsWith("%")?parseFloat(a)/100*l:+a),s=(e,t)=>r&&0===e?0:e+t;var a,l;return{min:s(n,-Math.abs(i)),max:s(o,i)}}(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Fp(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=function(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),o=e._maxLength/r;return Math.floor(Math.min(n,o))}(e),o=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],s=i.length,a=i[0],l=i[s-1],c=[];if(s>o)return function(e,t,r,n){let o,i=0,s=r[0];for(n=Math.ceil(n),o=0;o<e.length;o++)o===s&&(t.push(e[o]),i++,s=r[i*n])}(t,c,i,s/o),c;const u=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),o=t.length/r;if(!n)return Math.max(o,1);const i=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n==0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort(((e,t)=>e-t)).pop(),t}(n);for(let e=0,t=i.length-1;e<t;e++){const t=i[e];if(t>o)return t}return Math.max(o,1)}(i,t,o);if(s>0){let e,r;const n=s>1?Math.round((l-a)/(s-1)):null;for(Zp(t,c,u,Tu(n)?0:a-n,a),e=0,r=s-1;e<r;e++)Zp(t,c,u,i[e],i[e+1]);return Zp(t,c,u,l,Tu(n)?t.length:l+n),c}return Zp(t,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pu(this.options.afterUpdate,[this])}beforeSetDimensions(){Pu(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pu(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pu(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pu(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,o;for(r=0,n=e.length;r<n;r++)o=e[r],o.label=Pu(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){Pu(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pu(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Hp(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,o=t.maxRotation;let i,s,a,l=n;if(!this._isVisible()||!t.display||n>=o||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=sd(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/r:h/(r-1),u+6>i&&(i=h/(r-(e.offset?.5:1)),s=this.maxHeight-Gp(e.grid)-t.padding-qp(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=Math.min(Math.asin(sd((c.highest.height+6)/i,-1,1)),Math.asin(sd(s/a,-1,1))-Math.asin(sd(d/a,-1,1)))*(180/qu),l=Math.max(n,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Pu(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pu(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:o}}=this,i=this._isVisible(),s=this.isHorizontal();if(i){const i=qp(n,t.options.font);if(s?(e.width=this.maxWidth,e.height=Gp(o)+i):(e.height=this.maxHeight,e.width=Gp(o)+i),r.display&&this.ticks.length){const{first:t,last:n,widest:o,highest:i}=this._getLabelSizes(),a=2*r.padding,l=nd(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=r.mirror?0:u*o.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=r.mirror?0:c*o.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,n,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:o,padding:i},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=n*e.width,d=r*t.height):(u=r*e.height,d=n*t.width):"start"===o?d=t.width:"end"===o?u=e.width:"inner"!==o&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-s+i)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+i)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===o?(r=0,n=e.height):"end"===o&&(r=t.height,n=0),this.paddingTop=r+i,this.paddingBottom=n+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pu(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)Tu(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Fp(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:o}=this,i=[],s=[],a=Math.floor(t/Hp(t,r));let l,c,u,d,h,p,f,g,m,v,_,y=0,b=0;for(l=0;l<t;l+=a){if(d=e[l].label,h=this._resolveTickFontOptions(l),n.font=p=h.string,f=o[p]=o[p]||{data:{},gc:[]},g=h.lineHeight,m=v=0,Tu(d)||wu(d)){if(wu(d))for(c=0,u=d.length;c<u;++c)_=d[c],Tu(_)||wu(_)||(m=Dd(n,f.data,f.gc,m,_),v+=g)}else m=Dd(n,f.data,f.gc,m,d),v=g;i.push(m),s.push(v),y=Math.max(m,y),b=Math.max(v,b)}!function(e,t){Au(e,(e=>{const r=e.gc,n=r.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[r[o]];r.splice(0,n)}}))}(o,t);const E=i.indexOf(y),S=s.indexOf(b),C=e=>({width:i[e]||0,height:s[e]||0});return{first:C(0),last:C(t-1),widest:C(E),highest:C(S),widths:i,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return sd(this._alignToPixels?Bd(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return nh(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=nh(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=nd(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),o=this._getLabelSizes(),i=e.autoSkipPadding||0,s=o?o.widest.width+i:0,a=o?o.highest.height+i:0;return this.isHorizontal()?a*r>s*n?s/r:a/n:a*n<s*r?a/r:s/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:o,position:i,border:s}=n,a=o.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=Gp(o),d=[],h=s.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,g=function(e){return Bd(r,e,p)};let m,v,_,y,b,E,S,C,T,w,R,k;if("top"===i)m=g(this.bottom),E=this.bottom-u,C=m-f,w=g(e.top)+f,k=e.bottom;else if("bottom"===i)m=g(this.top),w=e.top,k=g(e.bottom)-f,E=m+f,C=this.top+u;else if("left"===i)m=g(this.right),b=this.right-u,S=m-f,T=g(e.left)+f,R=e.right;else if("right"===i)m=g(this.left),T=e.left,R=g(e.right)-f,b=m+f,S=this.left+u;else if("x"===t){if("center"===i)m=g((e.top+e.bottom)/2+.5);else if(Ru(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}w=e.top,k=e.bottom,E=m+f,C=E+u}else if("y"===t){if("center"===i)m=g((e.left+e.right)/2);else if(Ru(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}b=m-f,S=b-u,T=e.left,R=e.right}const O=Iu(n.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/O));for(v=0;v<c;v+=I){const e=this.getContext(v),t=o.setContext(e),n=s.setContext(e),i=t.lineWidth,c=t.color,u=n.dash||[],h=n.dashOffset,p=t.tickWidth,f=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;_=zp(this,v,a),void 0!==_&&(y=Bd(r,_,i),l?b=S=T=R=y:E=C=w=k=y,d.push({tx1:b,ty1:E,tx2:S,ty2:C,x1:T,y1:w,x2:R,y2:k,width:i,color:c,borderDash:u,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:o}=r,i=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=o,d=Gp(r.grid),h=d+c,p=u?-c:h,f=-nd(this.labelRotation),g=[];let m,v,_,y,b,E,S,C,T,w,R,k,O="middle";if("top"===n)E=this.bottom-p,S=this._getXAxisLabelAlignment();else if("bottom"===n)E=this.top+p,S=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,b=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,b=e.x}else if("x"===t){if("center"===n)E=(e.top+e.bottom)/2+h;else if(Ru(n)){const e=Object.keys(n)[0],t=n[e];E=this.chart.scales[e].getPixelForValue(t)+h}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)b=(e.left+e.right)/2-h;else if(Ru(n)){const e=Object.keys(n)[0],t=n[e];b=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?O="top":"end"===a&&(O="bottom"));const I=this._getLabelSizes();for(m=0,v=s.length;m<v;++m){_=s[m],y=_.label;const e=o.setContext(this.getContext(m));C=this.getPixelForTick(m)+o.labelOffset,T=this._resolveTickFontOptions(m),w=T.lineHeight,R=wu(y)?y.length:1;const t=R/2,r=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,h=S;if(i?(b=C,"inner"===S&&(h=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),k="top"===n?"near"===l||0!==f?-R*w+w/2:"center"===l?-I.highest.height/2-t*w+w:-I.highest.height+w/2:"near"===l||0!==f?w/2:"center"===l?I.highest.height/2-t*w:I.highest.height-R*w,u&&(k*=-1),0===f||e.showLabelBackdrop||(b+=w/2*Math.sin(f))):(E=C,k=(1-R)*w/2),e.showLabelBackdrop){const t=eh(e.backdropPadding),r=I.heights[m],n=I.widths[m];let o=k-t.top,i=0-t.left;switch(O){case"middle":o-=r/2;break;case"bottom":o-=r}switch(S){case"center":i-=n/2;break;case"right":i-=n}d={left:i,top:o,width:n+t.width,height:r+t.height,color:e.backdropColor}}g.push({label:y,font:T,textOffset:k,options:{rotation:f,color:r,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:O,translation:[b,E],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-nd(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:o}}=this.options,i=e+o,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?n?(l=this.right+o,"near"===r?a="left":"center"===r?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-i,"near"===r?a="right":"center"===r?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?n?(l=this.left+o,"near"===r?a="right":"center"===r?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+i,"near"===r?a="left":"center"===r?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:o,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,o,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex((t=>t.value===e));return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,i;const s=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(o=0,i=n.length;o<i;++o){const e=n[o];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,o=r.setContext(this.getContext()),i=r.display?o.width:0;if(!i)return;const s=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Bd(e,this.left,i)-i/2,c=Bd(e,this.right,s)+s/2,u=d=a):(u=Bd(e,this.top,i)-i/2,d=Bd(e,this.bottom,s)+s/2,l=c=a),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&Hd(t,r);const n=this.getLabelItems(e);for(const e of n){const r=e.options,n=e.font;zd(t,e.label,0,e.textOffset,n,r)}r&&Fd(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const o=th(r.font),i=eh(r.padding),s=r.align;let a=o.lineHeight/2;"bottom"===t||"center"===t||Ru(t)?(a+=i.bottom,wu(r.text)&&(a+=o.lineHeight*(r.text.length-1))):a+=i.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,r,n){const{top:o,left:i,bottom:s,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,p,f=0;const g=s-o,m=a-i;if(e.isHorizontal()){if(h=md(n,i,a),Ru(r)){const e=Object.keys(r)[0],n=r[e];p=u[e].getPixelForValue(n)+g-t}else p="center"===r?(c.bottom+c.top)/2+g-t:jp(e,r,t);d=a-i}else{if(Ru(r)){const e=Object.keys(r)[0],n=r[e];h=u[e].getPixelForValue(n)-m+t}else h="center"===r?(c.left+c.right)/2-m+t:jp(e,r,t);p=md(n,s,o),f="left"===r?-Ku:Ku}return{titleX:h,titleY:p,maxWidth:d,rotation:f}}(this,a,t,s);zd(e,r.text,0,0,o,{color:r.color,maxWidth:u,rotation:d,textAlign:Vp(s,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Iu(e.grid&&e.grid.z,-1),n=Iu(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Wp.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let o,i;for(o=0,i=t.length;o<i;++o){const i=t[o];i[r]!==this.id||e&&i.type!==e||n.push(i)}return n}_resolveTickFontOptions(e){return th(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yp{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,o=e.id,i=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in n||(n[o]=e,function(e,t,r){const n=Du(Object.create(null),[r?xd.get(r):{},xd.get(t),e.defaults]);xd.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((r=>{const n=r.split("."),o=n.pop(),i=[e].concat(n).join("."),s=t[r].split("."),a=s.pop(),l=s.join(".");xd.route(i,o,l,a)}))}(t,e.defaultRoutes),e.descriptors&&xd.describe(t,e.descriptors)}(e,i,r),this.override&&xd.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in xd[n]&&(delete xd[n][r],this.override&&delete Pd[r])}}class Kp{constructor(){this.controllers=new Yp(Wh,"datasets",!0),this.elements=new Yp(Up,"elements"),this.plugins=new Yp(Object,"plugins"),this.scales=new Yp(Wp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach((t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):Au(t,(t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)}))}))}_exec(e,t,r){const n=Hu(e);Pu(r["before"+n],[],r),t[e](r),Pu(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var $p=new Kp;class Qp{constructor(){this._init=[]}notify(e,t,r,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=n?this._descriptors(e).filter(n):this._descriptors(e),i=this._notify(o,e,t,r);return"afterDestroy"===t&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,r,n){n=n||{};for(const o of e){const e=o.plugin;if(!1===Pu(e[r],[t,n,o.options],e)&&n.cancelable)return!1}return!0}invalidate(){Tu(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=Iu(r.options&&r.options.plugins,{}),o=function(e){const t={},r=[],n=Object.keys($p.plugins.items);for(let e=0;e<n.length;e++)r.push($p.getPlugin(n[e]));const o=e.plugins||[];for(let e=0;e<o.length;e++){const n=o[e];-1===r.indexOf(n)&&(r.push(n),t[n.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,{plugins:t,localIds:r},n,o){const i=[],s=e.getContext();for(const a of t){const t=a.id,l=Xp(n[t],o);null!==l&&i.push({plugin:a,options:Jp(e.config,{plugin:a,local:r[t]},l,s)})}return i}(e,o,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function Xp(e,t){return t||!1!==e?!0===e?{}:e:null}function Jp(e,{plugin:t,local:r},n,o){const i=e.pluginScopeKeys(t),s=e.getOptionScopes(n,i);return r&&t.defaults&&s.push(t.defaults),e.createResolver(s,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ef(e,t){const r=xd.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function tf(e,t){if("x"===e||"y"===e||"r"===e)return e;var r;if(e=t.axis||("top"===(r=t.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&tf(e[0].toLowerCase(),t))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function rf(e){const t=e.options||(e.options={});t.plugins=Iu(t.plugins,{}),t.scales=function(e,t){const r=Pd[e.type]||{scales:{}},n=t.scales||{},o=ef(e.type,t),i=Object.create(null);return Object.keys(n).forEach((e=>{const t=n[e];if(!Ru(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const s=tf(e,t),a=function(e,t){return e===t?"_index_":"_value_"}(s,o),l=r.scales||{};i[e]=Bu(Object.create(null),[{axis:s},t,l[s],l[a]])})),e.data.datasets.forEach((r=>{const o=r.type||e.type,s=r.indexAxis||ef(o,t),a=(Pd[o]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,s),o=r[t+"AxisID"]||t;i[o]=i[o]||Object.create(null),Bu(i[o],[{axis:t},n[o],a[e]])}))})),Object.keys(i).forEach((e=>{const t=i[e];Bu(t,[xd.scales[t.type],xd.scale])})),i}(e,t)}function nf(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const of=new Map,sf=new Set;function af(e,t){let r=of.get(e);return r||(r=t(),of.set(e,r),sf.add(r)),r}const lf=(e,t,r)=>{const n=ju(t,r);void 0!==n&&e.add(n)};class cf{constructor(e){this._config=function(e){return(e=e||{}).data=nf(e.data),rf(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nf(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return af(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return af(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return af(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return af(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:o}=this,i=this._cachedScopes(e,r),s=i.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>lf(a,e,t)))),t.forEach((e=>lf(a,n,e))),t.forEach((e=>lf(a,Pd[o]||{},e))),t.forEach((e=>lf(a,xd,e))),t.forEach((e=>lf(a,Ad,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),sf.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Pd[t]||{},xd.datasets[t]||{},{type:t},xd,Ad]}resolveNamedOptions(e,t,r,n=[""]){const o={$shared:!0},{resolver:i,subPrefixes:s}=uf(this._resolverCache,e,n);let a=i;(function(e,t){const{isScriptable:r,isIndexable:n}=sh(e);for(const o of t){const t=r(o),i=n(o),s=(i||t)&&e[o];if(t&&(zu(s)||df(s))||i&&wu(s))return!0}return!1})(i,t)&&(o.$shared=!1,a=ih(i,r=zu(r)?r():r,this.createResolver(e,r,s)));for(const e of t)o[e]=a[e];return o}createResolver(e,t,r=[""],n){const{resolver:o}=uf(this._resolverCache,e,r);return Ru(t)?ih(o,t,void 0,n):o}}function uf(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const o=r.join();let i=n.get(o);return i||(i={resolver:oh(t,r),subPrefixes:r.filter((e=>!e.toLowerCase().includes("hover")))},n.set(o,i)),i}const df=e=>Ru(e)&&Object.getOwnPropertyNames(e).reduce(((t,r)=>t||zu(e[r])),!1),hf=["top","bottom","left","right","chartArea"];function pf(e,t){return"top"===e||"bottom"===e||-1===hf.indexOf(e)&&"x"===t}function ff(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function gf(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Pu(r&&r.onComplete,[e],t)}function mf(e){const t=e.chart,r=t.options.animation;Pu(r&&r.onProgress,[e],t)}function vf(e){return vh()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const _f={},yf=e=>{const t=vf(e);return Object.values(_f).filter((e=>e.canvas===t)).pop()};function bf(e,t,r){const n=Object.keys(e);for(const o of n){const n=+o;if(n>=t){const i=e[o];delete e[o],(r>0||n>t)&&(e[n+r]=i)}}}class Ef{static defaults=xd;static instances=_f;static overrides=Pd;static registry=$p;static version="4.2.1";static getChart=yf;static register(...e){$p.add(...e),Sf()}static unregister(...e){$p.remove(...e),Sf()}constructor(e,t){const r=this.config=new cf(t),n=vf(e),o=yf(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const i=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!vh()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Sp:Bp}(n)),this.platform.updateConfig(r);const s=this.platform.acquireContext(n,i.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Cu(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Qp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(e,t,n)):e.apply(this,n),t}}((e=>this.update(e)),i.resizeDelay||0),this._dataChanges=[],_f[this.id]=this,s&&a?(Ah.listen(this,"complete",gf),Ah.listen(this,"progress",mf),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:o}=this;return Tu(e)?t&&o?o:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $p}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ud(this.canvas,this.ctx),this}stop(){return Ah.stop(this),this}resize(e,t){Ah.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(n,e,t,o),s=r.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Rh(this,s,!0)&&(this.notifyPlugins("resize",{size:i}),Pu(r.onResize,[this,i],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Au(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce(((e,t)=>(e[t]=!1,e)),{});let o=[];t&&(o=o.concat(Object.keys(t).map((e=>{const r=t[e],n=tf(e,r),o="r"===n,i="x"===n;return{options:r,dposition:o?"chartArea":i?"bottom":"left",dtype:o?"radialLinear":i?"category":"linear"}})))),Au(o,(t=>{const o=t.options,i=o.id,s=tf(i,o),a=Iu(o.type,t.dtype);void 0!==o.position&&pf(o.position,s)===pf(t.dposition)||(o.position=t.dposition),n[i]=!0;let l=null;i in r&&r[i].type===a?l=r[i]:(l=new($p.getScale(a))({id:i,type:a,ctx:this.ctx,chart:this}),r[l.id]=l),l.init(o,e)})),Au(n,((e,t)=>{e||delete r[t]})),Au(r,(e=>{bp.configure(this,e,e.options),bp.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort(((e,t)=>e.index-t.index)),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(ff("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,r)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(r)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let o=this.getDatasetMeta(r);const i=n.type||this.config.type;if(o.type&&o.type!==i&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=i,o.indexAxis=n.indexAxis||ef(i,this.options),o.order=n.order||0,o.index=r,o.label=""+n.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const t=$p.getController(i),{datasetElementType:n,dataElementType:s}=xd.datasets[i];Object.assign(t,{dataElementType:$p.getElement(s),datasetElementType:n&&$p.getElement(n)}),o.controller=new t(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Au(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),r=!n&&-1===o.indexOf(t);t.buildOrUpdateElements(r),i=Math.max(+t.getMaxOverflow(),i)}i=this._minPadding=r.layout.autoPadding?i:0,this._updateLayout(i),n||Au(o,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ff("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Au(this.scales,(e=>{bp.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);Gu(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:o}of t)bf(e,n,"_removeElements"===r?-o:o)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),n=r(0);for(let e=1;e<t;e++)if(!Gu(n,r(e)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;bp.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Au(this.boxes,(e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,zu(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ah.has(this)?this.attached&&!Ah.running(this)&&Ah.start(this):(this.draw(),gf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,o;for(n=0,o=t.length;n<o;++n){const o=t[n];e&&!o.visible||r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,n=!r.disabled,o=function(e){const{xScale:t,yScale:r}=e;if(t&&r)return{left:t.left,right:t.right,top:r.top,bottom:r.bottom}}(e)||this.chartArea,i={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(n&&Hd(t,{left:!1===r.left?0:o.left-r.left,right:!1===r.right?this.width:o.right+r.right,top:!1===r.top?0:o.top-r.top,bottom:!1===r.bottom?this.height:o.bottom+r.bottom}),e.controller.draw(),n&&Fd(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return jd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const o=lp.modes[t];return"function"==typeof o?o(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter((e=>e&&e._dataset===t)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=nh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",o=this.getDatasetMeta(e),i=o.controller._resolveAnimations(void 0,n);Fu(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),i.update(o,{visible:r}),this.update((t=>t.datasetIndex===e?n:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ah.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ud(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete _f[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};Au(this.options.events,(e=>r(e,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},o=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const s=()=>{n("attach",s),this.attached=!0,this.resize(),r("resize",o),r("detach",i)};i=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),r("attach",s)},t.isAttached(this.canvas)?s():i()}unbindEvents(){Au(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Au(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let o,i,s,a;for("dataset"===t&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){i=e[s];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[n+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map((({datasetIndex:e,index:t})=>{const r=this.getDatasetMeta(e);if(!r)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:r.data[t],index:t}}));!Nu(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,r){const n=this.options.hover,o=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),i=o(t,e),s=r?e:o(e,t);i.length&&this.updateHoverStyle(i,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:o}=this,i=t,s=this._getActiveElements(e,n,r,i),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,a);r&&(this._lastEvent=null,Pu(o.onHover,[e,s,this],this),a&&Pu(o.onClick,[e,s,this],this));const c=!Nu(s,n);return(c||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}function Sf(){return Au(Ef.instances,(e=>e._plugins.invalidate()))}function Cf(e,t){const{x:r,y:n,base:o,width:i,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=s/2,a=Math.min(r,o),l=Math.max(r,o),c=n-d,u=n+d):(d=i/2,a=r-d,l=r+d,c=Math.min(n,o),u=Math.max(n,o)),{left:a,top:c,right:l,bottom:u}}function Tf(e,t,r,n){return e?0:sd(t,r,n)}function wf(e,t,r,n){const o=null===t,i=null===r,s=e&&!(o&&i)&&Cf(e,n);return s&&(o||ad(t,s.left,s.right))&&(i||ad(r,s.top,s.bottom))}function Rf(e,t){e.rect(t.x,t.y,t.w,t.h)}function kf(e,t,r={}){const n=e.x!==r.x?-t:0,o=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-n,s=(e.y+e.h!==r.y+r.h?t:0)-o;return{x:e.x+n,y:e.y+o,w:e.w+i,h:e.h+s,radius:e.radius}}class Of extends Up{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=wu(r.text)?r.text.length:1;this._padding=eh(r.padding);const o=n*th(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:o,options:i}=this,s=i.align;let a,l,c,u=0;return this.isHorizontal()?(l=md(s,r,o),c=t+e,a=o-r):("left"===i.position?(l=r+e,c=md(s,n,t),u=-.5*qu):(l=o-e,c=md(s,t,n),u=.5*qu),a=n-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=th(t.font),n=r.lineHeight/2+this._padding.top,{titleX:o,titleY:i,maxWidth:s,rotation:a}=this._drawArgs(n);zd(e,t.text,0,0,r,{color:t.color,maxWidth:s,rotation:a,textAlign:gd(t.align),textBaseline:"middle",translation:[o,i]})}}var If={id:"title",_element:Of,start(e,t,r){!function(e,t){const r=new Of({ctx:e.ctx,options:t,chart:e});bp.configure(e,r,t),bp.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;bp.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;bp.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Pf={average(e){if(!e.length)return!1;let t,r,n=0,o=0,i=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n+=e.x,o+=e.y,++i}}return{x:n/i,y:o/i}},nearest(e,t){if(!e.length)return!1;let r,n,o,i=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=(l=t,c=n.getCenterPoint(),Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2)));e<a&&(a=e,o=n)}}var l,c;if(o){const e=o.tooltipPosition();i=e.x,s=e.y}return{x:i,y:s}}};function Af(e,t){return t&&(wu(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nf(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Lf(e,t){const{element:r,datasetIndex:n,index:o}=t,i=e.getDatasetMeta(n).controller,{label:s,value:a}=i.getLabelAndValue(o);return{chart:e,label:s,parsed:i.getParsed(o),raw:e.data.datasets[n].data[o],formattedValue:a,dataset:i.getDataset(),dataIndex:o,datasetIndex:n,element:r}}function Mf(e,t){const r=e.chart.ctx,{body:n,footer:o,title:i}=e,{boxWidth:s,boxHeight:a}=t,l=th(t.bodyFont),c=th(t.titleFont),u=th(t.footerFont),d=i.length,h=o.length,p=n.length,f=eh(t.padding);let g=f.height,m=0,v=n.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v&&(g+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing),h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let _=0;const y=function(e){m=Math.max(m,r.measureText(e).width+_)};return r.save(),r.font=c.string,Au(e.title,y),r.font=l.string,Au(e.beforeBody.concat(e.afterBody),y),_=t.displayColors?s+2+t.boxPadding:0,Au(n,(e=>{Au(e.before,y),Au(e.lines,y),Au(e.after,y)})),_=0,r.font=u.string,Au(e.footer,y),r.restore(),m+=f.width,{width:m,height:g}}function xf(e,t,r,n){const{x:o,width:i}=r,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===n?c=o<=(a+l)/2?"left":"right":o<=i/2?c="left":o>=s-i/2&&(c="right"),function(e,t,r,n){const{x:o,width:i}=n,s=r.caretSize+r.caretPadding;return"left"===e&&o+i+s>t.width||"right"===e&&o-i-s<0||void 0}(c,e,t,r)&&(c="center"),c}function Df(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||xf(e,t,r,n),yAlign:n}}function Bf(e,t,r,n){const{caretSize:o,caretPadding:i,cornerRadius:s}=e,{xAlign:a,yAlign:l}=r,c=o+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Jd(s);let f=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,a);const g=function(e,t,r){let{y:n,height:o}=e;return"top"===t?n+=r:n-="bottom"===t?o+r:o/2,n}(t,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(u,h)+o:"right"===a&&(f+=Math.max(d,p)+o),{x:sd(f,0,n.width-t.width),y:sd(g,0,n.height-t.height)}}function Uf(e,t,r){const n=eh(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function Zf(e){return Af([],Nf(e))}function jf(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const Hf={beforeTitle:Su,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:Su,beforeBody:Su,beforeLabel:Su,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Tu(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Su,afterBody:Su,beforeFooter:Su,footer:Su,afterFooter:Su};function Ff(e,t,r,n){const o=e[t].call(r,n);return void 0===o?Hf[t].call(r,n):o}class zf extends Up{static positioners=Pf;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,o=new xh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(this,nh(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(e,t){const{callbacks:r}=t,n=Ff(r,"beforeTitle",this,e),o=Ff(r,"title",this,e),i=Ff(r,"afterTitle",this,e);let s=[];return s=Af(s,Nf(n)),s=Af(s,Nf(o)),s=Af(s,Nf(i)),s}getBeforeBody(e,t){return Zf(Ff(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return Au(e,(e=>{const t={before:[],lines:[],after:[]},o=jf(r,e);Af(t.before,Nf(Ff(o,"beforeLabel",this,e))),Af(t.lines,Ff(o,"label",this,e)),Af(t.after,Nf(Ff(o,"afterLabel",this,e))),n.push(t)})),n}getAfterBody(e,t){return Zf(Ff(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=Ff(r,"beforeFooter",this,e),o=Ff(r,"footer",this,e),i=Ff(r,"afterFooter",this,e);let s=[];return s=Af(s,Nf(n)),s=Af(s,Nf(o)),s=Af(s,Nf(i)),s}_createItems(e){const t=this._active,r=this.chart.data,n=[],o=[],i=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(Lf(this.chart,t[s]));return e.filter&&(l=l.filter(((t,n,o)=>e.filter(t,n,o,r)))),e.itemSort&&(l=l.sort(((t,n)=>e.itemSort(t,n,r)))),Au(l,(t=>{const r=jf(e.callbacks,t);n.push(Ff(r,"labelColor",this,t)),o.push(Ff(r,"labelPointStyle",this,t)),i.push(Ff(r,"labelTextColor",this,t))})),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let o,i=[];if(n.length){const e=Pf[r.position].call(this,n,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);const t=this._size=Mf(this,r),s=Object.assign({},e,t),a=Df(this.chart,r,s),l=Bf(r,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=i,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const o=this.getCaretPosition(e,r,n);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:o}=this,{caretSize:i,cornerRadius:s}=r,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Jd(s),{x:d,y:h}=e,{width:p,height:f}=t;let g,m,v,_,y,b;return"center"===o?(y=h+f/2,"left"===n?(g=d,m=g-i,_=y+i,b=y-i):(g=d+p,m=g+i,_=y-i,b=y+i),v=g):(m="left"===n?d+Math.max(a,c)+i:"right"===n?d+p-Math.max(l,u)-i:this.caretX,"top"===o?(_=h,y=_-i,g=m-i,v=m+i):(_=h+f,y=_+i,g=m+i,v=m-i),b=_),{x1:g,x2:m,x3:v,y1:_,y2:y,y3:b}}drawTitle(e,t,r){const n=this.title,o=n.length;let i,s,a;if(o){const l=Ih(r.rtl,this.x,this.width);for(e.x=Uf(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",i=th(r.titleFont),s=r.titleSpacing,t.fillStyle=r.titleColor,t.font=i.string,a=0;a<o;++a)t.fillText(n[a],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+s,a+1===o&&(e.y+=r.titleMarginBottom-s)}}_drawColorBox(e,t,r,n,o){const i=this.labelColors[r],s=this.labelPointStyles[r],{boxHeight:a,boxWidth:l,boxPadding:c}=o,u=th(o.bodyFont),d=Uf(this,"left",o),h=n.x(d),p=a<u.lineHeight?(u.lineHeight-a)/2:0,f=t.y+p;if(o.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},r=n.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Zd(e,t,r,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Zd(e,t,r,c)}else{e.lineWidth=Ru(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=n.leftForLtr(h,l-c),r=n.leftForLtr(n.xPlus(h,1),l-c-2),s=Jd(i.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Vd(e,{x:t,y:f,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Vd(e,{x:r,y:f+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=i.backgroundColor,e.fillRect(r,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:o,bodyAlign:i,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=r,u=th(r.bodyFont);let d=u.lineHeight,h=0;const p=Ih(r.rtl,this.x,this.width),f=function(r){t.fillText(r,p.x(e.x+h),e.y+d/2),e.y+=d+o},g=p.textAlign(i);let m,v,_,y,b,E,S;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=Uf(this,g,r),t.fillStyle=r.bodyColor,Au(this.beforeBody,f),h=s&&"right"!==g?"center"===i?l/2+c:l+2+c:0,y=0,E=n.length;y<E;++y){for(m=n[y],v=this.labelTextColors[y],t.fillStyle=v,Au(m.before,f),_=m.lines,s&&_.length&&(this._drawColorBox(t,e,y,p,r),d=Math.max(u.lineHeight,a)),b=0,S=_.length;b<S;++b)f(_[b]),d=u.lineHeight;Au(m.after,f)}h=0,d=u.lineHeight,Au(this.afterBody,f),e.y-=o}drawFooter(e,t,r){const n=this.footer,o=n.length;let i,s;if(o){const a=Ih(r.rtl,this.x,this.width);for(e.x=Uf(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=a.textAlign(r.footerAlign),t.textBaseline="middle",i=th(r.footerFont),t.fillStyle=r.footerColor,t.font=i.string,s=0;s<o;++s)t.fillText(n[s],a.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:o,yAlign:i}=this,{x:s,y:a}=e,{width:l,height:c}=r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Jd(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+u,a),"top"===i&&this.drawCaret(e,t,r,n),t.lineTo(s+l-d,a),t.quadraticCurveTo(s+l,a,s+l,a+d),"center"===i&&"right"===o&&this.drawCaret(e,t,r,n),t.lineTo(s+l,a+c-p),t.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===i&&this.drawCaret(e,t,r,n),t.lineTo(s+h,a+c),t.quadraticCurveTo(s,a+c,s,a+c-h),"center"===i&&"left"===o&&this.drawCaret(e,t,r,n),t.lineTo(s,a+u),t.quadraticCurveTo(s,a,s+u,a),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,o=r&&r.y;if(n||o){const r=Pf[e.position].call(this,this._active,this._eventPosition);if(!r)return;const i=this._size=Mf(this,e),s=Object.assign({},r,this._size),a=Df(t,e,s),l=Bf(e,s,a,t);n._to===l.x&&o._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=i.width,this.height=i.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const i=eh(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,n,t),function(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}(e,t.textDirection),o.y+=i.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),function(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map((({datasetIndex:e,index:t})=>{const r=this.chart.getDatasetMeta(e);if(!r)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:r.data[t],index:t}})),o=!Nu(r,n),i=this._positionChanged(n,t);(o||i)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],i=this._getActiveElements(e,o,t,r),s=this._positionChanged(i,e),a=t||!Nu(i,o)||s;return a&&(this._active=i,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,r,n){const o=this.options;if("mouseout"===e.type)return[];if(!n)return t;const i=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:r,caretY:n,options:o}=this,i=Pf[o.position].call(this,e,t);return!1!==i&&(r!==i.x||n!==i.y)}}var Gf={id:"tooltip",_element:zf,positioners:Pf,afterInit(e,t,r){r&&(e.tooltip=new zf({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function qf(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function Vf(e,t,{horizontal:r,minRotation:n}){const o=nd(n),i=(r?Math.sin(o):Math.cos(o))||.001,s=.75*t*(""+e).length;return Math.min(t/i,s)}class Wf extends Wp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Tu(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:o}=this;const i=e=>n=t?n:e,s=e=>o=r?o:e;if(e){const e=Ju(n),t=Ju(o);e<0&&t<0?s(0):e>0&&t>0&&i(0)}if(n===o){let t=0===o?1:Math.abs(.05*o);s(o+t),e||i(n-t)}this.min=n,this.max=o}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=function(e,t){const r=[],{bounds:n,step:o,min:i,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=o||1,p=c-1,{min:f,max:g}=t,m=!Tu(i),v=!Tu(s),_=!Tu(l),y=(g-f)/(u+1);let b,E,S,C,T=td((g-f)/p/h)*h;if(T<1e-14&&!m&&!v)return[{value:f},{value:g}];C=Math.ceil(g/T)-Math.floor(f/T),C>p&&(T=td(C*T/p/h)*h),Tu(a)||(b=Math.pow(10,a),T=Math.ceil(T*b)/b),"ticks"===n?(E=Math.floor(f/T)*T,S=Math.ceil(g/T)*T):(E=f,S=g),m&&v&&o&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((s-i)/o,T/1e3)?(C=Math.round(Math.min((s-i)/T,c)),T=(s-i)/C,E=i,S=s):_?(E=m?i:E,S=v?s:S,C=l-1,T=(S-E)/C):(C=(S-E)/T,C=ed(C,Math.round(C),T/1e3)?Math.round(C):Math.ceil(C));const w=Math.max(od(T),od(E));b=Math.pow(10,Tu(a)?w:a),E=Math.round(E*b)/b,S=Math.round(S*b)/b;let R=0;for(m&&(d&&E!==i?(r.push({value:i}),E<i&&R++,ed(Math.round((E+R*T)*b)/b,i,Vf(i,y,e))&&R++):E<i&&R++);R<C;++R)r.push({value:Math.round((E+R*T)*b)/b});return v&&d&&S!==s?r.length&&ed(r[r.length-1].value,s,Vf(s,y,e))?r[r.length-1].value=s:r.push({value:s}):v&&S!==s||r.push({value:S}),r}({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&function(e,t,r){let n,o,i;for(n=0,o=e.length;n<o;n++)i=e[n][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return kd(e,this.chart.options.locale,this.options.ticks.format)}}class Yf extends Wf{static id="linear";static defaults={ticks:{callback:Id.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ku(e)?e:0,this.max=ku(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=nd(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Id.formatters.logarithmic,Id.formatters.numeric;const Kf="label";function $f(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Qf(e,t){e.labels=t}function Xf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kf;const n=[];e.datasets=t.map((t=>{const o=e.datasets.find((e=>e[r]===t[r]));return o&&t.data&&!n.includes(o)?(n.push(o),Object.assign(o,t),o):{...t}}))}function Jf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kf;const r={labels:[],datasets:[]};return Qf(r,e.labels),Xf(r,e.datasets,t),r}function eg(e,r){const{height:n=150,width:o=300,redraw:i=!1,datasetIdKey:s,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...p}=e,f=(0,t.useRef)(null),g=(0,t.useRef)(),m=()=>{f.current&&(g.current=new Ef(f.current,{type:a,data:Jf(l,s),options:c&&{...c},plugins:u}),$f(r,g.current))},v=()=>{$f(r,null),g.current&&(g.current.destroy(),g.current=null)};return(0,t.useEffect)((()=>{!i&&g.current&&c&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(g.current,c)}),[i,c]),(0,t.useEffect)((()=>{!i&&g.current&&Qf(g.current.config.data,l.labels)}),[i,l.labels]),(0,t.useEffect)((()=>{!i&&g.current&&l.datasets&&Xf(g.current.config.data,l.datasets,s)}),[i,l.datasets]),(0,t.useEffect)((()=>{g.current&&(i?(v(),setTimeout(m)):g.current.update(h))}),[i,c,l.labels,l.datasets,h]),(0,t.useEffect)((()=>{g.current&&(v(),setTimeout(m))}),[a]),(0,t.useEffect)((()=>(m(),()=>v())),[]),t.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:o},p),d)}const tg=(0,t.forwardRef)(eg);function rg(e,r){return Ef.register(r),(0,t.forwardRef)(((r,n)=>t.createElement(tg,Object.assign({},r,{ref:n,type:e}))))}const ng=rg("bar",rp);Ef.register(class extends Wp{static id="category";static defaults={ticks:{callback:qf}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Tu(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:sd(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:function(e,t,r,n){const o=e.indexOf(t);return-1===o?((e,t,r,n)=>("string"==typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n):o!==e.lastIndexOf(t)?r:o}(r,e,Iu(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let o=this.getLabels();o=0===e&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let r=e;r<=t;r++)n.push({value:r});return n}getLabelForValue(e){return qf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},Yf,class extends Up{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:o,outer:i}=function(e){const t=Cf(e),r=t.right-t.left,n=t.bottom-t.top,o=function(e,t,r){const n=e.options.borderWidth,o=e.borderSkipped,i=Xd(n);return{t:Tf(o.top,i.top,0,r),r:Tf(o.right,i.right,0,t),b:Tf(o.bottom,i.bottom,0,r),l:Tf(o.left,i.left,0,t)}}(e,r/2,n/2),i=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,i=Jd(o),s=Math.min(t,r),a=e.borderSkipped,l=n||Ru(o);return{topLeft:Tf(!l||a.top||a.left,i.topLeft,0,s),topRight:Tf(!l||a.top||a.right,i.topRight,0,s),bottomLeft:Tf(!l||a.bottom||a.left,i.bottomLeft,0,s),bottomRight:Tf(!l||a.bottom||a.right,i.bottomRight,0,s)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:i},inner:{x:t.left+o.l,y:t.top+o.t,w:r-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,i.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(o.b,o.r))}}}}(this),s=(a=i.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Vd:Rf;var a;e.save(),i.w===o.w&&i.h===o.h||(e.beginPath(),s(e,kf(i,t,o)),e.clip(),s(e,kf(o,-t,i)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),s(e,kf(o,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return wf(this,e,t,r)}inXRange(e,t){return wf(this,e,null,t)}inYRange(e,t){return wf(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+n)/2:t,y:o?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},If,Gf);const og=function(e){var r={responsive:!0,plugins:{title:{display:!0,text:e.title}}},n={labels:e.labels,datasets:[{data:e.values,backgroundColor:"#5048E2"}]};return t.createElement(ng,{options:r,data:n})};var ig=__webpack_require__(8878),sg=__webpack_require__(5450);function ag(e){return(0,Rt.Z)("MuiCard",e)}(0,wt.Z)("MuiCard",["root"]);const lg=["className","raised"],cg=(0,St.ZP)(Ko,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),ug=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=r,i=(0,pt.Z)(r,lg),s=(0,ft.Z)({},r,{raised:o}),a=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},ag,t)})(s);return(0,Ot.jsx)(cg,(0,ft.Z)({className:(0,gt.default)(a.root,n),elevation:o?8:void 0,ref:t,ownerState:s},i))}));var dg=__webpack_require__(5697),hg=__webpack_require__.n(dg);const pg=e=>{const r=t.useRef({});return t.useEffect((()=>{r.current=e})),r.current};function fg(e){return(0,Rt.Z)("MuiBadge",e)}const gg=(0,wt.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),mg=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],vg=(0,St.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),_g=(0,St.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.badge,t[r.variant],t[`anchorOrigin${(0,Tt.Z)(r.anchorOrigin.vertical)}${(0,Tt.Z)(r.anchorOrigin.horizontal)}${(0,Tt.Z)(r.overlap)}`],"default"!==r.color&&t[`color${(0,Tt.Z)(r.color)}`],r.invisible&&t.invisible]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${gg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}))),yg=t.forwardRef((function(e,t){var r,n,o,i,s,a;const l=(0,Ct.Z)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:g="rectangular",color:m="default",invisible:v=!1,max:_=99,badgeContent:y,slots:b,slotProps:E,showZero:S=!1,variant:C="standard"}=l,T=(0,pt.Z)(l,mg),{badgeContent:w,invisible:R,max:k,displayValue:O}=function(e){const{badgeContent:t,invisible:r=!1,max:n=99,showZero:o=!1}=e,i=pg({badgeContent:t,max:n});let s=r;!1!==r||0!==t||o||(s=!0);const{badgeContent:a,max:l=n}=s?i:e;return{badgeContent:a,invisible:s,max:l,displayValue:a&&Number(a)>l?`${l}+`:a}}({max:_,invisible:v,badgeContent:y,showZero:S}),I=pg({anchorOrigin:c,color:m,overlap:g,variant:C,badgeContent:y}),P=R||null==w&&"dot"!==C,{color:A=m,overlap:N=g,anchorOrigin:L=c,variant:M=C}=P?I:l,x="dot"!==M?O:void 0,D=(0,ft.Z)({},l,{badgeContent:w,invisible:P,max:k,displayValue:x,showZero:S,anchorOrigin:L,color:A,overlap:N,variant:M}),B=(e=>{const{color:t,anchorOrigin:r,invisible:n,overlap:o,variant:i,classes:s={}}=e,a={root:["root"],badge:["badge",i,n&&"invisible",`anchorOrigin${(0,Tt.Z)(r.vertical)}${(0,Tt.Z)(r.horizontal)}`,`anchorOrigin${(0,Tt.Z)(r.vertical)}${(0,Tt.Z)(r.horizontal)}${(0,Tt.Z)(o)}`,`overlap${(0,Tt.Z)(o)}`,"default"!==t&&`color${(0,Tt.Z)(t)}`]};return(0,Et.Z)(a,fg,s)})(D),U=null!=(r=null!=(n=null==b?void 0:b.root)?n:h.Root)?r:vg,Z=null!=(o=null!=(i=null==b?void 0:b.badge)?i:h.Badge)?o:_g,j=null!=(s=null==E?void 0:E.root)?s:p.root,H=null!=(a=null==E?void 0:E.badge)?a:p.badge,F=mo({elementType:U,externalSlotProps:j,externalForwardedProps:T,additionalProps:{ref:t,as:d},ownerState:D,className:(0,gt.default)(null==j?void 0:j.className,B.root,u)}),z=mo({elementType:Z,externalSlotProps:H,ownerState:D,className:(0,gt.default)(B.badge,null==H?void 0:H.className)});return(0,Ot.jsxs)(U,(0,ft.Z)({},F,{children:[f,(0,Ot.jsx)(Z,(0,ft.Z)({},z,{children:x}))]}))})),bg=yg;var Eg=__webpack_require__(2761),Sg=__webpack_require__(5817),Cg=__webpack_require__(2684),Tg=["anchorEl","onClose","open"];function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wg.apply(this,arguments)}var Rg=function(e){var r=e.anchorEl,n=e.onClose,o=e.open,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Tg),s=Ye();return t.createElement(ma,wg({anchorEl:r,anchorOrigin:{horizontal:"left",vertical:"bottom"},onClose:n,open:o,PaperProps:{sx:{width:"300px"}}},i),t.createElement(lr,{sx:{py:1.5,px:2}},t.createElement(Mt,{variant:"overline"},"Account"),t.createElement(Mt,{color:"text.secondary",variant:"body2"},er.name)),t.createElement(Qs,{disablePadding:!0,sx:{"& > *":{"&:first-of-type":{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:"1px"},padding:"12px 16px"}}},t.createElement(La,{onClick:function(){er.logout(),s("/",{replace:!0})}},"Sign out")))},kg=["onSidebarOpen"];function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Og.apply(this,arguments)}function Ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pg=(0,Ps.Z)(mi)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,boxShadow:t.shadows[3]}})),Ag=function(e){var r=e.onSidebarOpen,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,kg),o=(0,t.useRef)(null),i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ig(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ig(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,t.useState)(!1),2),s=i[0],a=i[1];return t.createElement(t.Fragment,null,t.createElement(Pg,Og({sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}}},n),t.createElement(Ei,{disableGutters:!0,sx:{minHeight:64,left:0,px:2}},t.createElement(Ds,{onClick:r,sx:{display:{xs:"inline-flex",lg:"none"}}},t.createElement(Ec.Z,{fontSize:"small"})),t.createElement(bc,{title:"Search"},t.createElement(Ds,{sx:{ml:1}},t.createElement(Eg.Z,{fontSize:"small"}))),t.createElement(lr,{sx:{flexGrow:1}}),t.createElement(bc,{title:"Contacts"},t.createElement(Ds,{sx:{ml:1}},t.createElement(Cg.Z,null))),t.createElement(bc,{title:"Notifications"},t.createElement(Ds,{sx:{ml:1}},t.createElement(bg,{badgeContent:4,color:"primary"},t.createElement(Sg.Z,null)))),t.createElement(Pi,{onClick:function(){return a(!0)},ref:o,sx:{backgroundColor:"black",cursor:"pointer",height:40,width:40,ml:1},src:Sc}))),t.createElement(Rg,{anchorEl:o.current,open:s,onClose:function(){return a(!1)}}))};Ag.propTypes={onSidebarOpen:hg().func};var Ng=__webpack_require__(539);function Lg(e,r,n,o,i){const[s,a]=t.useState((()=>i&&n?n(e).matches:o?o(e).matches:r));return(0,Gs.Z)((()=>{let t=!0;if(!n)return;const r=n(e),o=()=>{t&&a(r.matches)};return o(),r.addListener(o),()=>{t=!1,r.removeListener(o)}}),[e,n]),s}const Mg=r.useSyncExternalStore;function xg(e,r,n,o,i){const s=t.useCallback((()=>r),[r]),a=t.useMemo((()=>{if(i&&n)return()=>n(e).matches;if(null!==o){const{matches:t}=o(e);return()=>t}return s}),[s,e,o,i,n]),[l,c]=t.useMemo((()=>{if(null===n)return[s,()=>()=>{}];const t=n(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]}),[s,n,e]);return Mg(c,l,a)}function Dg(e,t={}){const r=(0,nc.Z)(),n="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:o=!1,matchMedia:i=(n?window.matchMedia:null),ssrMatchMedia:s=null,noSsr:a=!1}=(0,Ng.Z)({name:"MuiUseMediaQuery",props:t,theme:r});let l="function"==typeof e?e(r):e;return l=l.replace(/^@media( ?)/m,""),(void 0!==Mg?xg:Lg)(l,o,i,s,a)}const Bg=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ug(e,t,r){var n;const o=function(e,t,r){const n=t.getBoundingClientRect(),o=r&&r.getBoundingClientRect(),i=(0,Js.Z)(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=i.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"==typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?o?`translateX(${o.right+a-n.left}px)`:`translateX(${i.innerWidth+a-n.left}px)`:"right"===e?o?`translateX(-${n.right-o.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:"up"===e?o?`translateY(${o.bottom+l-n.top}px)`:`translateY(${i.innerHeight+l-n.top}px)`:o?`translateY(-${n.top-o.top+n.height-l}px)`:`translateY(-${n.top+n.height-l}px)`}(e,t,"function"==typeof(n=r)?n():n);o&&(t.style.webkitTransform=o,t.style.transform=o)}const Zg=t.forwardRef((function(e,r){const n=Er(),o={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:l,container:c,direction:u="down",easing:d=o,in:h,onEnter:p,onEntered:f,onEntering:g,onExit:m,onExited:v,onExiting:_,style:y,timeout:b=i,TransitionComponent:E=Oo}=e,S=(0,pt.Z)(e,Bg),C=t.useRef(null),T=(0,Gr.Z)(l.ref,C,r),w=e=>t=>{e&&(void 0===t?e(C.current):e(C.current,t))},R=w(((e,t)=>{Ug(u,e,c),Io(e),p&&p(e,t)})),k=w(((e,t)=>{const r=Po({timeout:b,style:y,easing:d},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,ft.Z)({},r)),e.style.transition=n.transitions.create("transform",(0,ft.Z)({},r)),e.style.webkitTransform="none",e.style.transform="none",g&&g(e,t)})),O=w(f),I=w(_),P=w((e=>{const t=Po({timeout:b,style:y,easing:d},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),Ug(u,e,c),m&&m(e)})),A=w((e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)})),N=t.useCallback((()=>{C.current&&Ug(u,C.current,c)}),[u,c]);return t.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=(0,Xs.Z)((()=>{C.current&&Ug(u,C.current,c)})),t=(0,Js.Z)(C.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),t.useEffect((()=>{h||N()}),[h,N]),(0,Ot.jsx)(E,(0,ft.Z)({nodeRef:C,onEnter:R,onEntered:O,onEntering:k,onExit:P,onExited:A,onExiting:I,addEndListener:e=>{s&&s(C.current,e)},appear:a,in:h,timeout:b},S,{children:(e,r)=>t.cloneElement(l,(0,ft.Z)({ref:T,style:(0,ft.Z)({visibility:"exited"!==e||h?void 0:"hidden"},y,l.props.style)},r))}))})),jg=Zg;function Hg(e){return(0,Rt.Z)("MuiDrawer",e)}(0,wt.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Fg=["BackdropProps"],zg=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Gg=(e,t)=>{const{ownerState:r}=e;return[t.root,("permanent"===r.variant||"persistent"===r.variant)&&t.docked,t.modal]},qg=(0,St.ZP)(zo,{name:"MuiDrawer",slot:"Root",overridesResolver:Gg})((({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Vg=(0,St.ZP)("div",{shouldForwardProp:St.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Gg})({flex:"0 0 auto"}),Wg=(0,St.ZP)(Ko,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${(0,Tt.Z)(r.anchor)}`],"temporary"!==r.variant&&t[`paperAnchorDocked${(0,Tt.Z)(r.anchor)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===t.anchor&&{left:0},"top"===t.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===t.anchor&&{right:0},"bottom"===t.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===t.anchor&&"temporary"!==t.variant&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},"top"===t.anchor&&"temporary"!==t.variant&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},"right"===t.anchor&&"temporary"!==t.variant&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"bottom"===t.anchor&&"temporary"!==t.variant&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`}))),Yg={left:"right",right:"left",top:"down",bottom:"up"},Kg=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiDrawer"}),o=Er(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:a,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:h}={},onClose:p,open:f=!1,PaperProps:g={},SlideProps:m,TransitionComponent:v=jg,transitionDuration:_=i,variant:y="temporary"}=n,b=(0,pt.Z)(n.ModalProps,Fg),E=(0,pt.Z)(n,zg),S=t.useRef(!1);t.useEffect((()=>{S.current=!0}),[]);const C=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?Yg[t]:t}(o,s),T=s,w=(0,ft.Z)({},n,{anchor:T,elevation:u,open:f,variant:y},E),R=(e=>{const{classes:t,anchor:r,variant:n}=e,o={root:["root"],docked:[("permanent"===n||"persistent"===n)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,Tt.Z)(r)}`,"temporary"!==n&&`paperAnchorDocked${(0,Tt.Z)(r)}`]};return(0,Et.Z)(o,Hg,t)})(w),k=(0,Ot.jsx)(Wg,(0,ft.Z)({elevation:"temporary"===y?u:0,square:!0},g,{className:(0,gt.default)(R.paper,g.className),ownerState:w,children:l}));if("permanent"===y)return(0,Ot.jsx)(Vg,(0,ft.Z)({className:(0,gt.default)(R.root,R.docked,c),ownerState:w,ref:r},E,{children:k}));const O=(0,Ot.jsx)(v,(0,ft.Z)({in:f,direction:Yg[C],timeout:_,appear:S.current},m,{children:k}));return"persistent"===y?(0,Ot.jsx)(Vg,(0,ft.Z)({className:(0,gt.default)(R.root,R.docked,c),ownerState:w,ref:r},E,{children:O})):(0,Ot.jsx)(qg,(0,ft.Z)({BackdropProps:(0,ft.Z)({},a,h,{transitionDuration:_}),className:(0,gt.default)(R.root,R.modal,c),open:f,ownerState:w,onClose:p,hideBackdrop:d,ref:r},E,b,{children:O}))})),$g=Kg;var Qg=__webpack_require__(8502);function Xg(e){return(0,Rt.Z)("MuiListItem",e)}const Jg=(0,wt.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),em=(0,wt.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function tm(e){return(0,Rt.Z)("MuiListItemSecondaryAction",e)}(0,wt.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const rm=["className"],nm=(0,St.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})((({ownerState:e})=>(0,ft.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0}))),om=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiListItemSecondaryAction"}),{className:o}=n,i=(0,pt.Z)(n,rm),s=t.useContext(Us),a=(0,ft.Z)({},n,{disableGutters:s.disableGutters}),l=(e=>{const{disableGutters:t,classes:r}=e,n={root:["root",t&&"disableGutters"]};return(0,Et.Z)(n,tm,r)})(a);return(0,Ot.jsx)(nm,(0,ft.Z)({className:(0,gt.default)(l.root,o),ownerState:a,ref:r},i))}));om.muiName="ListItemSecondaryAction";const im=om,sm=["className"],am=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],lm=(0,St.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.button&&t.button,r.hasSecondaryAction&&t.secondaryAction]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&(0,ft.Z)({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${em.root}`]:{paddingRight:48}},{[`&.${Jg.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Jg.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Jg.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Jg.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===t.alignItems&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Jg.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48}))),cm=(0,St.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),um=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiListItem"}),{alignItems:o="center",autoFocus:i=!1,button:s=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:g=!1,disableGutters:m=!1,disablePadding:v=!1,divider:_=!1,focusVisibleClassName:y,secondaryAction:b,selected:E=!1,slotProps:S={},slots:C={}}=n,T=(0,pt.Z)(n.ContainerProps,sm),w=(0,pt.Z)(n,am),R=t.useContext(Us),k=t.useMemo((()=>({dense:f||R.dense||!1,alignItems:o,disableGutters:m})),[o,R.dense,f,m]),O=t.useRef(null);(0,Gs.Z)((()=>{i&&O.current&&O.current.focus()}),[i]);const I=t.Children.toArray(a),P=I.length&&(0,Qg.Z)(I[I.length-1],["ListItemSecondaryAction"]),A=(0,ft.Z)({},n,{alignItems:o,autoFocus:i,button:s,dense:k.dense,disabled:g,disableGutters:m,disablePadding:v,divider:_,hasSecondaryAction:P,selected:E}),N=(e=>{const{alignItems:t,button:r,classes:n,dense:o,disabled:i,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",o&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",i&&"disabled",r&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,Et.Z)(d,Xg,n)})(A),L=(0,Gr.Z)(O,r),M=C.root||u.Root||lm,x=S.root||d.root||{},D=(0,ft.Z)({className:(0,gt.default)(N.root,x.className,l),disabled:g},w);let B=c||"li";return s&&(D.component=c||"div",D.focusVisibleClassName=(0,gt.default)(Jg.focusVisible,y),B=On),P?(B=D.component||c?B:"div","li"===h&&("li"===B?B="div":"li"===D.component&&(D.component="div")),(0,Ot.jsx)(Us.Provider,{value:k,children:(0,Ot.jsxs)(cm,(0,ft.Z)({as:h,className:(0,gt.default)(N.container,p),ref:L,ownerState:A},T,{children:[(0,Ot.jsx)(M,(0,ft.Z)({},x,!uo(M)&&{as:B,ownerState:(0,ft.Z)({},A,x.ownerState)},D,{children:I})),I.pop()]}))})):(0,Ot.jsx)(Us.Provider,{value:k,children:(0,Ot.jsxs)(M,(0,ft.Z)({},x,{as:B,ref:L},!uo(M)&&{ownerState:(0,ft.Z)({},A,x.ownerState)},D,{children:[I,b&&(0,Ot.jsx)(im,{children:b})]}))})})),dm=um;var hm=["href","icon","title"];function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pm.apply(this,arguments)}var fm=function(e){var r=e.href,n=e.icon,o=e.title,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,hm),s=Ye(),a=Ve(),l=!!r&&a.pathname.split("/")[2]===r.split("/")[1];return t.createElement(dm,pm({disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2}},i),t.createElement(Un,{component:"a",startIcon:n,onClick:function(){return s("/admin"+r)},disableRipple:!0,sx:{backgroundColor:l&&"rgba(255,255,255, 0.08)",borderRadius:1,color:l?"secondary.main":"neutral.300",fontWeight:l&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:l?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}}},t.createElement(lr,{sx:{flexGrow:1}},o)))};fm.propTypes={href:hg().string,icon:hg().node,title:hg().string};var gm=Pc,mm=function(e){var r=e.open,n=e.onClose,o=Dg(Er().breakpoints.up("lg"),{defaultMatches:!0,noSsr:!1}),i=t.createElement(t.Fragment,null,t.createElement(lr,{sx:{display:"flex",flexDirection:"column",height:"100%"}},t.createElement("div",null,t.createElement(lr,{sx:{p:3,display:"flex",alignItems:"center",gap:5}},t.createElement(Pi,{src:Ai}),t.createElement(Mt,null,"Procto Vigil"))),t.createElement(jr,{sx:{borderColor:"#2D3748",my:1}}),t.createElement(lr,{sx:{flexGrow:1}},gm.map((function(e){return t.createElement(fm,{key:e.title,icon:e.icon,href:e.href,title:e.title})}))),t.createElement(jr,{sx:{borderColor:"#2D3748"}})));return o?t.createElement($g,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent"},i):t.createElement($g,{anchor:"left",onClose:n,open:r,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:function(e){return e.zIndex.appBar+100}},variant:"temporary"},i)};mm.propTypes={onClose:hg().func,open:hg().bool};const vm=(0,Si.Z)((0,Ot.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),_m=(0,St.ZP)(On)((({theme:e})=>(0,ft.Z)({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,ft.Z)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,ft.Z)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,Lr._4)(e.palette.grey[200],.12)}:{backgroundColor:(0,Lr._4)(e.palette.grey[600],.12)})}))),ym=(0,St.ZP)(vm)({width:24,height:16}),bm=function(e){const t=e;return(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_m,(0,ft.Z)({focusRipple:!0},e,{ownerState:t,children:(0,Ot.jsx)(ym,{ownerState:t})}))})};function Em(e){return(0,Rt.Z)("MuiBreadcrumbs",e)}const Sm=(0,wt.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),Cm=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],Tm=(0,St.ZP)(Mt,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${Sm.li}`]:t.li},t.root]})({}),wm=(0,St.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Rm=(0,St.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function km(e,t,r,n){return e.reduce(((o,i,s)=>(s<e.length-1?o=o.concat(i,(0,Ot.jsx)(Rm,{"aria-hidden":!0,className:t,ownerState:n,children:r},`separator-${s}`)):o.push(i),o)),[])}const Om=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiBreadcrumbs"}),{children:o,className:i,component:s="nav",expandText:a="Show path",itemsAfterCollapse:l=1,itemsBeforeCollapse:c=1,maxItems:u=8,separator:d="/"}=n,h=(0,pt.Z)(n,Cm),[p,f]=t.useState(!1),g=(0,ft.Z)({},n,{component:s,expanded:p,expandText:a,itemsAfterCollapse:l,itemsBeforeCollapse:c,maxItems:u,separator:d}),m=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Em,t)})(g),v=t.useRef(null),_=t.Children.toArray(o).filter((e=>t.isValidElement(e))).map(((e,t)=>(0,Ot.jsx)("li",{className:m.li,children:e},`child-${t}`)));return(0,Ot.jsx)(Tm,(0,ft.Z)({ref:r,component:s,color:"text.secondary",className:(0,gt.default)(m.root,i),ownerState:g},h,{children:(0,Ot.jsx)(wm,{className:m.ol,ref:v,ownerState:g,children:km(p||u&&_.length<=u?_:(e=>c+l>=e.length?e:[...e.slice(0,c),(0,Ot.jsx)(bm,{"aria-label":a,onClick:()=>{f(!0);const e=v.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-l,e.length)])(_),m.separator,d,g)})}))}));function Im(e){return(0,Rt.Z)("MuiLink",e)}const Pm=(0,wt.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var Am=__webpack_require__(4844);const Nm={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Lm=({theme:e,ownerState:t})=>{const r=(e=>Nm[e]||e)(t.color),n=(0,Am.DW)(e,`palette.${r}`,!1)||t.color,o=(0,Am.DW)(e,`palette.${r}Channel`);return"vars"in e&&o?`rgba(${o} / 0.4)`:(0,Lr.Fq)(n,.4)},Mm=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],xm=(0,St.ZP)(Mt,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`underline${(0,Tt.Z)(r.underline)}`],"button"===r.component&&t.button]}})((({theme:e,ownerState:t})=>(0,ft.Z)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&(0,ft.Z)({textDecoration:"underline"},"inherit"!==t.color&&{textDecorationColor:Lm({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===t.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Pm.focusVisible}`]:{outline:"auto"}}))),Dm=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiLink"}),{className:o,color:i="primary",component:s="a",onBlur:a,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:h}=n,p=(0,pt.Z)(n,Mm),{isFocusVisibleRef:f,onBlur:g,onFocus:m,ref:v}=(0,Vr.Z)(),[_,y]=t.useState(!1),b=(0,Gr.Z)(r,v),E=(0,ft.Z)({},n,{color:i,component:s,focusVisible:_,underline:u,variant:d}),S=(e=>{const{classes:t,component:r,focusVisible:n,underline:o}=e,i={root:["root",`underline${(0,Tt.Z)(o)}`,"button"===r&&"button",n&&"focusVisible"]};return(0,Et.Z)(i,Im,t)})(E);return(0,Ot.jsx)(xm,(0,ft.Z)({color:i,className:(0,gt.default)(S.root,o),classes:c,component:s,onBlur:e=>{g(e),!1===f.current&&y(!1),a&&a(e)},onFocus:e=>{m(e),!0===f.current&&y(!0),l&&l(e)},ref:b,ownerState:E,variant:d,sx:[...Object.keys(Nm).includes(i)?[]:[{color:i}],...Array.isArray(h)?h:[h]]},p))})),Bm=Dm,Um=function(){var e=Ve().pathname.split("/").splice(2),r="/admin";return t.createElement(Om,null,t.createElement(Bm,{underline:"hover",color:"inherit",href:"/"},"Home"),e.map((function(e,n){return r+="/"+e,t.createElement(Bm,{underline:"hover",color:"inherit",href:r,key:n},e)})))};function Zm(e){return Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(e)}(0,St.ZP)("div")((function(e){return t={display:"flex",flex:"1 1 auto",maxWidth:"100%",paddingTop:64},r=e.theme.breakpoints.up("lg"),n={paddingLeft:280},(r=function(e){var t=function(e,t){if("object"!==Zm(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Zm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Zm(t)?t:String(t)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t;var t,r,n}));var jm=["January","February","March","April","May","June","July","Augest","September","Octomber","November","December"],Hm=[34,71,17,18,62,44,55,43,23,18,32,66],Fm=[{title:"Users",icon:t.createElement(ig.Z,null),gradiant:"linear-gradient(45deg,#0288d1,#26c6da)",subTitle:"New",subTitleValue:10,total:132},{title:"Quiz",icon:t.createElement(wc.Z,null),gradiant:"linear-gradient(45deg,#ff5252,#f48fb1)",subTitle:"New",subTitleValue:13,total:78},{title:"Completed",icon:t.createElement(Oc.Z,null),gradiant:"linear-gradient(45deg,#ff6f00,#ffca28)",subTitle:"Today",subTitleValue:2,total:23},{title:"Cheaters",icon:t.createElement(sg.Z,null),gradiant:"linear-gradient(45deg,#43a047,#1de9b6)",subTitle:"This week",subTitleValue:3,total:13}];const zm=function(){return(0,t.useEffect)((function(){}),[]),t.createElement("div",{className:""},t.createElement(Nr,{container:!0,spacing:2},Fm.map((function(e){return t.createElement(Nr,{item:!0,xs:12,sm:6,lg:3},t.createElement(lr,{sx:{background:e.gradiant,borderRadius:2,display:"flex",padding:2,justifyContent:"space-between"}},t.createElement(lr,{textAlign:"center",spacing:2},t.createElement(Pi,{sx:{background:"rgba(0,0,0,.18)",width:48,height:48}},e.icon),t.createElement("br",null),t.createElement(Mt,{sx:{color:"white"}},e.title)),t.createElement(lr,{textAlign:"end",spacing:2},t.createElement(Mt,{sx:{color:"white"}},e.subTitleValue),t.createElement(Mt,{sx:{color:"white"}},e.subTitle),t.createElement("br",null),t.createElement(Mt,{sx:{color:"white"}},e.total))))}))),t.createElement(og,{title:"Number of Student Register in Past Months",labels:jm,values:Hm}),t.createElement(og,{title:"Number of Quiz Created in Past Months",labels:jm,values:Hm}))};function Gm(e){return(0,Rt.Z)("MuiDataGrid",e)}ig.Z,wc.Z,Oc.Z,sg.Z;const qm=(0,wt.Z)("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLinkOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","root--densityStandard","root--densityComfortable","root--densityCompact","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),Vm=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${qm.autoHeight}`]:t.autoHeight},{[`&.${qm.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${qm["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${qm["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${qm["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${qm.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`& .${qm.editBooleanCell}`]:t.editBooleanCell},{[`& .${qm["cell--editing"]}`]:t["cell--editing"]},{[`& .${qm["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${qm["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${qm["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${qm["cell--withRenderer"]}`]:t["cell--withRenderer"]},{[`& .${qm.cell}`]:t.cell},{[`& .${qm.cellContent}`]:t.cellContent},{[`& .${qm.cellCheckbox}`]:t.cellCheckbox},{[`& .${qm.cellSkeleton}`]:t.cellSkeleton},{[`& .${qm.checkboxInput}`]:t.checkboxInput},{[`& .${qm["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${qm["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${qm["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${qm["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${qm["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${qm["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${qm["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${qm["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${qm.columnHeader}`]:t.columnHeader},{[`& .${qm.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${qm.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${qm.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${qm["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${qm["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${qm.columnSeparator}`]:t.columnSeparator},{[`& .${qm.filterIcon}`]:t.filterIcon},{[`& .${qm.iconSeparator}`]:t.iconSeparator},{[`& .${qm.menuIcon}`]:t.menuIcon},{[`& .${qm.menuIconButton}`]:t.menuIconButton},{[`& .${qm.menuOpen}`]:t.menuOpen},{[`& .${qm.menuList}`]:t.menuList},{[`& .${qm["row--editable"]}`]:t["row--editable"]},{[`& .${qm["row--editing"]}`]:t["row--editing"]},{[`& .${qm["row--dragging"]}`]:t["row--dragging"]},{[`& .${qm.row}`]:t.row},{[`& .${qm.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${qm.rowReorderCell}`]:t.rowReorderCell},{[`& .${qm["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${qm.sortIcon}`]:t.sortIcon},{[`& .${qm.withBorder}`]:t.withBorder},{[`& .${qm.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${qm.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${qm.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${qm["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})((({theme:e})=>{const t="light"===e.palette.mode?(0,Lr.$n)((0,Lr.Fq)(e.palette.divider,1),.88):(0,Lr._j)((0,Lr.Fq)(e.palette.divider,1),.68);return(0,ft.Z)({flex:1,boxSizing:"border-box",position:"relative",border:`1px solid ${t}`,borderRadius:e.shape.borderRadius,color:e.palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",flexDirection:"column",[`&.${qm.autoHeight}`]:{height:"auto",[`& .${qm["row--lastVisible"]} .${qm.cell}`]:{borderBottomColor:"transparent"}},[`& .${qm["virtualScrollerContent--overflowed"]} .${qm["row--lastVisible"]} .${qm.cell}`]:{borderBottomColor:"transparent"},[`& .${qm.columnHeader}, & .${qm.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${qm.columnHeader}:focus-within, & .${qm.cell}:focus-within`]:{outline:`solid ${(0,Lr.Fq)(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${qm.columnHeader}:focus, & .${qm.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${qm.columnHeaderCheckbox}, & .${qm.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${qm.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${qm["columnHeader--sorted"]} .${qm.iconButtonContainer}, & .${qm["columnHeader--filtered"]} .${qm.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${qm.columnHeader}:not(.${qm["columnHeader--sorted"]}) .${qm.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${qm.columnHeader}:not(.${qm["columnHeader--sorted"]}):hover .${qm.sortIcon}`]:{opacity:.5},[`& .${qm.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},[`& .${qm.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${qm["columnHeader--filledGroup"]} .${qm.columnHeaderTitleContainer}`]:{borderBottom:`solid ${t} 1px`,boxSizing:"border-box"},[`& .${qm["columnHeader--filledGroup"]}.${qm["columnHeader--showColumnBorder"]} .${qm.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${qm["columnHeader--filledGroup"]}.${qm["columnHeader--showColumnBorder"]}`]:{borderBottom:`solid ${t} 1px`,boxSizing:"border-box"},[`& .${qm.sortIcon}, & .${qm.filterIcon}`]:{fontSize:"inherit"},[`& .${qm["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${qm["columnHeader--alignCenter"]} .${qm.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${qm["columnHeader--alignRight"]} .${qm.columnHeaderDraggableContainer}, & .${qm["columnHeader--alignRight"]} .${qm.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${qm["columnHeader--alignCenter"]} .${qm.menuIcon}, & .${qm["columnHeader--alignRight"]} .${qm.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${qm["columnHeader--alignRight"]} .${qm.menuIcon}, & .${qm["columnHeader--alignRight"]} .${qm.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${qm["columnHeader--moving"]}`]:{backgroundColor:e.palette.action.hover},[`& .${qm.columnSeparator}`]:{position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:t},[`& .${qm["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${qm["columnSeparator--sideRight"]}`]:{right:-12},[`& .${qm["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:e.palette.text.primary,"@media (hover: none)":{color:t}},[`&.${qm["columnSeparator--resizing"]}`]:{color:e.palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${qm.iconSeparator}`]:{color:"inherit"},[`& .${qm.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`& .${qm.columnHeader}:hover`]:{[`& .${qm.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${qm.menuIcon}`]:{width:"auto",visibility:"visible"}},[`.${qm.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${qm.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${qm.cell}`]:{display:"flex",alignItems:"center",borderBottom:`1px solid ${t}`},[`& .${qm.row}:not(.${qm["row--dynamicHeight"]}) > .${qm.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${qm.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${qm.cell}.${qm["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper,"&:focus-within":{outline:`solid ${e.palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${qm["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${qm["row--editing"]} .${qm.cell}`]:{boxShadow:e.shadows[0],backgroundColor:e.palette.background.paper},[`& .${qm.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${qm.booleanCell}[data-value="true"]`]:{color:e.palette.text.secondary},[`& .${qm.booleanCell}[data-value="false"]`]:{color:e.palette.text.disabled},[`& .${qm.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${qm.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:e.palette.action.disabledOpacity},[`& .${qm["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${qm.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`& .${qm.withBorder}`]:{borderRight:`1px solid ${t}`},[`& .${qm["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${qm["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${qm["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${qm.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${qm.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${qm["columnHeader--dragging"]}, & .${qm["row--dragging"]}`]:{background:e.palette.background.paper,padding:"0 12px",borderRadius:e.shape.borderRadius,opacity:e.palette.action.disabledOpacity},[`& .${qm["row--dragging"]}`]:{background:e.palette.background.paper,padding:"0 12px",borderRadius:e.shape.borderRadius,opacity:e.palette.action.disabledOpacity,[`& .${qm.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${qm.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${qm.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${qm.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${qm.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})}));var Wm="NOT_FOUND",Ym=function(e,t){return e===t};function Km(e,t){var r,n,o="object"==typeof t?t:{equalityCheck:t},i=o.equalityCheck,s=void 0===i?Ym:i,a=o.maxSize,l=void 0===a?1:a,c=o.resultEqualityCheck,u=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}}(s),d=1===l?(r=u,{get:function(e){return n&&r(n.key,e)?n.value:Wm},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var o=r[n];return n>0&&(r.splice(n,1),r.unshift(o)),o.value}return Wm}return{get:n,put:function(t,o){n(t)===Wm&&(r.unshift({key:t,value:o}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(l,u);function h(){var t=d.get(arguments);if(t===Wm){if(t=e.apply(null,arguments),c){var r=d.getEntries().find((function(e){return c(e.value,t)}));r&&(t=r.value)}d.put(arguments,t)}return t}return h.clearCache=function(){return d.clear()},h}function $m(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i,s=0,a={memoizeOptions:void 0},l=n.pop();if("object"==typeof l&&(a=l,l=n.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=a.memoizeOptions,u=void 0===c?r:c,d=Array.isArray(u)?u:[u],h=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(n),p=e.apply(void 0,[function(){return s++,l.apply(null,arguments)}].concat(d)),f=e((function(){for(var e=[],t=h.length,r=0;r<t;r++)e.push(h[r].apply(null,arguments));return i=p.apply(null,e)}));return Object.assign(f,{resultFunc:l,memoizedResultFunc:p,dependencies:h,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),f}}var Qm=$m(Km);const Xm=(e,t="warning")=>{let r=!1;const n=Array.isArray(e)?e.join("\n"):e;return()=>{r||(r=!0,"error"===t?console.error(n):console.warn(n))}},Jm=(e,t)=>e,ev={cache:null},tv=(Xm(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]),(...e)=>{null===ev.cache&&(ev.cache={});const t=(...t)=>{const[r,n]=t,o=!!r.current,i=o?r.current.instanceId:null!=n?n:"default",s=o?r.current.state:r;null===ev.cache&&(ev.cache={});const{cache:a}=ev;if(a[i]&&a[i].get(e))return a[i].get(e)(s,i);const l=Qm(...e);return a[i]||(a[i]=new Map),a[i].set(e,l),l(s,i)};return t.acceptsApiRef=!0,t}),rv=e=>e.columns,nv=tv(rv,(e=>e.all)),ov=tv(rv,(e=>e.lookup)),iv=tv(nv,ov,((e,t)=>e.map((e=>t[e])))),sv=tv(rv,(e=>e.columnVisibilityModel)),av=tv(iv,sv,((e,t)=>e.filter((e=>!1!==t[e.field])))),lv=(tv(av,(e=>e.map((e=>e.field)))),tv(av,(e=>{const t=[];let r=0;for(let n=0;n<e.length;n+=1)t.push(r),r+=e[n].computedWidth;return t}))),cv=tv(av,lv,((e,t)=>{const r=e.length;return 0===r?0:t[r-1]+e[r-1].computedWidth})),uv=tv(iv,(e=>e.filter((e=>e.filterable)))),dv=tv(iv,(e=>e.reduce(((e,t)=>(t.filterable&&(e[t.field]=t),e)),{}))),hv=(Jm(nv),Jm(iv),Jm(av),Jm(uv),Jm(tv(uv,(e=>e.map((e=>e.field))))),Jm(tv(av,(e=>e.length))),Jm(tv(lv,cv,((e,t)=>({totalWidth:t,positions:e})))));Xm(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);const pv=(e,t)=>function(e){return e.acceptsApiRef}(t)?t(e):t(e.current.state),fv=t.createContext(void 0);function gv(){const e=t.useContext(fv);if(void 0===e)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return e}const mv=t.createContext(void 0),vv=()=>{const e=t.useContext(mv);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},_v=e=>e.density,yv=tv(_v,(e=>e.value)),bv=tv(_v,(e=>e.rowHeight)),Ev=tv(_v,(e=>e.headerHeight)),Sv=tv(_v,(e=>e.headerGroupingMaxDepth)),Cv=tv(_v,(e=>e.factor)),Tv=tv(_v,(e=>e.headerHeight*(1+e.headerGroupingMaxDepth))),wv=e=>e.rows,Rv=tv(wv,(e=>e.totalRowCount)),kv=tv(wv,(e=>e.loading)),Ov=tv(wv,(e=>e.totalTopLevelRowCount)),Iv=tv(wv,(e=>e.idRowsLookup)),Pv=tv(wv,(e=>e.idToIdLookup)),Av=tv(wv,(e=>e.tree)),Nv=tv(wv,(e=>e.groupingName)),Lv=tv(wv,(e=>e.treeDepth)),Mv=tv(wv,(e=>e.ids)),xv=tv(wv,(e=>null==e?void 0:e.additionalRowGroups)),Dv=tv(xv,(e=>null==e?void 0:e.pinnedRows)),Bv=tv(Dv,(e=>{var t,r;return((null==e||null==(t=e.top)?void 0:t.length)||0)+((null==e||null==(r=e.bottom)?void 0:r.length)||0)})),Uv=["children","className"],Zv=t.forwardRef((function(e,r){const n=vv(),{children:o,className:i}=e,s=(0,pt.Z)(e,Uv),a=gv(),l=pv(a,av),c=pv(a,Rv),u=pv(a,yv),d=pv(a,Sv),h=t.useRef(null),p=(0,Gr.Z)(h,r),f=pv(a,Bv),g=(e=>{const{autoHeight:t,density:r,classes:n}=e,o={root:["root",t&&"autoHeight",`root--density${(0,Tt.Z)(r)}`]};return(0,Et.Z)(o,Gm,n)})({density:u,classes:n.classes,autoHeight:n.autoHeight});a.current.rootElementRef=h;const[m,v]=t.useState(!1);return(0,Gs.Z)((()=>{v(!0)}),[]),(0,Gs.Z)((()=>{m&&a.current.unstable_updateGridDimensionsRef()}),[a,m]),m?(0,Ot.jsx)(Vm,(0,ft.Z)({ref:p,className:(0,gt.default)(i,g.root),role:"grid","aria-colcount":l.length,"aria-rowcount":d+1+f+c,"aria-multiselectable":!n.disableMultipleSelection,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"]},s,{children:o})):null}));function jv(e,r){const n=t.useRef(null);if(n.current)return n.current;const o=e.current.getLogger(r);return n.current=o,o}const Hv=e=>{const{classes:t}=e;return(0,Et.Z)({root:["main"]},Gm,t)},Fv=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})((()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"})));function zv(e){const t={classes:vv().classes},r=Hv(t);return(0,Ot.jsx)(Fv,{className:r.root,children:e.children})}class Gv extends t.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.props.api.current&&(this.logError(e),this.props.api.current.showError({error:e,errorInfo:t}))}logError(e,t){this.props.logger.error(`An unexpected error occurred. Error: ${e&&e.message}. `,e,t)}render(){var e;return this.props.hasError||null!=(e=this.state)&&e.hasError?this.props.render(this.state):this.props.children}}function qv(e){const{children:t}=e,r=gv(),n=jv(r,"GridErrorHandler"),o=vv(),i=r.current.state.error;return(0,Ot.jsx)(Gv,{hasError:null!=i,api:r,logger:n,render:e=>{var t;return(0,Ot.jsx)(zv,{children:(0,Ot.jsx)(o.components.ErrorOverlay,(0,ft.Z)({},e,i,null==(t=o.componentsProps)?void 0:t.errorOverlay))})},children:t})}function Vv(){var e;const r=gv(),n=vv(),o=t.useRef(null);return r.current.headerRef=o,(0,Ot.jsx)("div",{ref:o,children:(0,Ot.jsx)(n.components.Header,(0,ft.Z)({},null==(e=n.componentsProps)?void 0:e.header))})}const Wv=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],Yv=t.forwardRef((function(e,r){const{children:n,defaultHeight:o=null,defaultWidth:i=null,disableHeight:s=!1,disableWidth:a=!1,nonce:l,onResize:c,style:u}=e,d=(0,pt.Z)(e,Wv),[h,p]=t.useState({height:o,width:i}),f=t.useRef(null),g=t.useRef(null),m=(0,qr.Z)((()=>{if(g.current){const e=g.current.offsetHeight||0,t=g.current.offsetWidth||0,r=(0,Js.Z)(g.current).getComputedStyle(g.current),n=parseInt(r.paddingLeft,10)||0,o=parseInt(r.paddingRight,10)||0,i=e-(parseInt(r.paddingTop,10)||0)-(parseInt(r.paddingBottom,10)||0),l=t-n-o;(!s&&h.height!==i||!a&&h.width!==l)&&(p({height:i,width:l}),c&&c({height:i,width:l}))}}));(0,Gs.Z)((()=>{var e;if(g.current=f.current.parentElement,!g)return;const t=(0,Js.Z)(null!=(e=g.current)?e:void 0),r=function(e,t){var r=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},n=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var n=this;r(this),this.__resizeRAF__&&t.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=t.requestAnimationFrame((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach((function(t){t.call(n,e)})))}))}},o=!1,i="",s="animationstart",a="Webkit Moz O ms".split(" "),l="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),c=document.createElement("fakeelement");if(void 0!==c.style.animationName&&(o=!0),!1===o)for(var u=0;u<a.length;u++)if(void 0!==c.style[a[u]+"AnimationName"]){i="-"+a[u].toLowerCase()+"-",s=l[u],o=!0;break}var d="resizeanim",h="@"+i+"keyframes "+d+" { from { opacity: 0; } to { opacity: 0; } } ",p=i+"animation: 1ms "+d+"; ";return{addResizeListener:function(o,i){if(!o.__resizeTriggers__){var a=o.ownerDocument,l=t.getComputedStyle(o);l&&"static"==l.position&&(o.style.position="relative"),function(t,r){if(!r.getElementById("muiDetectElementResize")){var n=(h||"")+".Mui-resizeTriggers { "+(p||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o="ShadowRoot"===r.constructor.name?r:t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="muiDetectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),o.appendChild(i)}}(a,o.getRootNode()),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=a.createElement("div")).className="Mui-resizeTriggers",o.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',o.appendChild(o.__resizeTriggers__),r(o),o.addEventListener("scroll",n,!0),s&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName==d&&r(o)},o.__resizeTriggers__.addEventListener(s,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(i)},removeResizeListener:function(e,t){if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",n,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(s,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(l,t);return r.addResizeListener(g.current,m),m(),()=>{r.removeResizeListener(g.current,m)}}),[l,m]);const v={overflow:"visible"},_={};s||(v.height=0,_.height=h.height),a||(v.width=0,_.width=h.width);const y=(0,Gr.Z)(f,r);return(0,Ot.jsx)("div",(0,ft.Z)({ref:y,style:(0,ft.Z)({},v,u)},d,{children:null===h.height&&null===h.width?null:n(_)}))})),Kv=e=>e.sorting,$v=tv(Kv,(e=>e.sortedRows)),Qv=tv($v,Iv,((e,t)=>e.map((e=>({id:e,model:t[e]}))))),Xv=tv(Kv,(e=>e.sortModel)),Jv=tv(Xv,(e=>e.reduce(((t,r,n)=>(t[r.field]={sortDirection:r.sort,sortIndex:e.length>1?n+1:void 0},t)),{}))),e_=e=>e.filter,t_=tv(e_,(e=>e.filterModel)),r_=(tv(t_,(e=>e.quickFilterValues)),tv(e_,(e=>e.visibleRowsLookup))),n_=tv(e_,(e=>e.filteredRowsLookup)),o_=(tv(e_,(e=>e.filteredDescendantCountLookup)),tv(r_,Qv,((e,t)=>t.filter((t=>!1!==e[t.id]))))),i_=tv(o_,(e=>e.map((e=>e.id)))),s_=tv(n_,Qv,((e,t)=>t.filter((t=>!1!==e[t.id])))),a_=tv(s_,(e=>e.map((e=>e.id)))),l_=tv(o_,Av,Lv,((e,t,r)=>r<2?e:e.filter((e=>{var r;return 0===(null==(r=t[e.id])?void 0:r.depth)})))),c_=tv(o_,(e=>e.length)),u_=tv(l_,(e=>e.length)),d_=tv(t_,ov,((e,t)=>{var r;return null==(r=e.items)?void 0:r.filter((e=>{var r,n;if(!e.columnField)return!1;const o=t[e.columnField];if(null==o||!o.filterOperators||0===(null==o||null==(r=o.filterOperators)?void 0:r.length))return!1;const i=o.filterOperators.find((t=>t.value===e.operatorValue));return!!i&&(!i.InputComponent||null!=e.value&&""!==(null==(n=e.value)?void 0:n.toString()))}))})),h_=tv(d_,(e=>e.reduce(((e,t)=>(e[t.columnField]?e[t.columnField].push(t):e[t.columnField]=[t],e)),{})));function p_(e){var r,n;const o=gv(),i=vv(),s=pv(o,Tv),[a,l]=t.useState((()=>{var e,t;return null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null})),c=t.useCallback((()=>{var e,t;l(null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null)}),[o]);(0,Gs.Z)((()=>o.current.subscribeEvent("viewportInnerSizeChange",c)),[o,c]);let u=null!=(r=null==a?void 0:a.height)?r:0;return i.autoHeight&&0===u&&(u="auto"),a?(0,Ot.jsx)("div",(0,ft.Z)({style:{height:u,width:null!=(n=null==a?void 0:a.width)?n:0,position:"absolute",top:s,bottom:"auto"===u?0:void 0}},e)):null}function f_(){const e=gv(),t=vv(),r=pv(e,Rv),n=pv(e,c_),o=pv(e,kv),i=!o&&r>0&&0===n;let s=null;var a,l,c;return o||0!==r||(s=(0,Ot.jsx)(t.components.NoRowsOverlay,(0,ft.Z)({},null==(a=t.componentsProps)?void 0:a.noRowsOverlay))),i&&(s=(0,Ot.jsx)(t.components.NoResultsOverlay,(0,ft.Z)({},null==(l=t.componentsProps)?void 0:l.noResultsOverlay))),o&&(s=(0,Ot.jsx)(t.components.LoadingOverlay,(0,ft.Z)({},null==(c=t.componentsProps)?void 0:c.loadingOverlay))),null===s?null:(0,Ot.jsx)(p_,{children:s})}function g_(e){const{children:r,VirtualScrollerComponent:n,ColumnHeadersComponent:o}=e,i=gv(),s=vv(),a=pv(i,Tv),[l,c]=t.useState(s.disableVirtualization),u=t.useCallback((()=>{c(!0)}),[]),d=t.useCallback((()=>{c(!1)}),[]);t.useEffect((()=>{c(s.disableVirtualization)}),[s.disableVirtualization]),i.current.unstable_disableVirtualization=u,i.current.unstable_enableVirtualization=d;const h=t.useRef(null),p=t.useRef(null),f=t.useRef(null),g=t.useRef(null);i.current.columnHeadersContainerElementRef=p,i.current.columnHeadersElementRef=h,i.current.windowRef=f,i.current.renderingZoneRef=g;const m=t.useCallback((e=>{i.current.publishEvent("resize",e)}),[i]);return(0,Ot.jsxs)(zv,{children:[(0,Ot.jsx)(f_,{}),(0,Ot.jsx)(o,{ref:p,innerRef:h}),(0,Ot.jsx)(Yv,{nonce:s.nonce,disableHeight:s.autoHeight,onResize:m,children:e=>{const t={width:e.width,height:e.height?e.height-a:"auto",marginTop:a};return(0,Ot.jsx)(n,{ref:f,style:t,disableVirtualization:l})}}),r]})}function m_(){var e;const r=gv(),n=vv(),o=t.useRef(null);return r.current.footerRef=o,n.hideFooter?null:(0,Ot.jsx)("div",{ref:o,children:(0,Ot.jsx)(n.components.Footer,(0,ft.Z)({},null==(e=n.componentsProps)?void 0:e.footer))})}const v_=({apiRef:e,props:t,children:r})=>(0,Ot.jsx)(mv.Provider,{value:t,children:(0,Ot.jsx)(fv.Provider,{value:e,children:r})});function __(e){return"function"==typeof e}function y_(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const b_=(e,t,r)=>Math.max(t,Math.min(r,e));function E_(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n+=1)if(!E_(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let e=0;e<r.length;e+=1)if(!t.has(r[e][0]))return!1;for(let e=0;e<r.length;e+=1){const n=r[e];if(!E_(n[1],t.get(n[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let e=0;e<r.length;e+=1)if(!t.has(r[e][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(let e=0;e<n;e+=1)if(!Object.prototype.hasOwnProperty.call(t,r[e]))return!1;for(let o=0;o<n;o+=1){const n=r[o];if(!E_(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function S_(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}const C_=function(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),T_=()=>{},w_={debug:T_,info:T_,warn:T_,error:T_},R_=["debug","info","warn","error"];function k_(e,t,r=console){const n=R_.indexOf(t);if(-1===n)throw new Error(`MUI: Log level ${t} not recognized.`);const o=R_.reduce(((t,o,i)=>(t[o]=i>=n?(...t)=>{const[n,...i]=t;r[o](`MUI: ${e} - ${n}`,...i)}:T_,t)),{});return o}function O_(e,r,n){const o=t.useRef(r),[i]=t.useState(Object.keys(r)),s=t.useCallback((()=>{e.current&&i.forEach((t=>{e.current.hasOwnProperty(t)||(e.current[t]=(...e)=>o.current[t](...e))}))}),[i,e]);t.useEffect((()=>{o.current=r}),[r]),t.useEffect((()=>{s()}),[s]),s()}class I_{constructor(e=1e3){this.timeouts=new Map,this.cleanupTimeout=1e3,this.cleanupTimeout=e}register(e,t,r){this.timeouts||(this.timeouts=new Map);const n=setTimeout((()=>{"function"==typeof t&&t(),this.timeouts.delete(r.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(r.cleanupToken,n)}unregister(e){const t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}reset(){this.timeouts&&(this.timeouts.forEach(((e,t)=>{this.unregister({cleanupToken:t})})),this.timeouts=void 0)}}class P_{constructor(){this.registry=new FinalizationRegistry((e=>{"function"==typeof e&&e()}))}register(e,t,r){this.registry.register(e,t,r)}unregister(e){this.registry.unregister(e)}reset(){}}var A_;!function(e){e.DataGrid="DataGrid",e.DataGridPro="DataGridPro"}(A_||(A_={}));class N_{}const L_=function(e){let r=0;return function(n,o,i,s){null===e.registry&&(e.registry="undefined"!=typeof FinalizationRegistry?new P_:new I_);const[a]=t.useState(new N_),l=t.useRef(null),c=t.useRef();c.current=i;const u=t.useRef(null);if(!l.current&&c.current){const t=(e,t,r)=>{var n;t.defaultMuiPrevented||null==(n=c.current)||n.call(c,e,t,r)};l.current=n.current.subscribeEvent(o,t,s),r+=1,u.current={cleanupToken:r},e.registry.register(a,(()=>{var e;null==(e=l.current)||e.call(l),l.current=null,u.current=null}),u.current)}else!c.current&&l.current&&(l.current(),l.current=null,u.current&&(e.registry.unregister(u.current),u.current=null));t.useEffect((()=>{if(!l.current&&c.current){const e=(e,t,r)=>{var n;t.defaultMuiPrevented||null==(n=c.current)||n.call(c,e,t,r)};l.current=n.current.subscribeEvent(o,e,s)}return u.current&&e.registry&&(e.registry.unregister(u.current),u.current=null),()=>{var e;null==(e=l.current)||e.call(l),l.current=null}}),[n,o,s])}}({registry:null}),M_={isFirst:!0};function x_(e,t,r){L_(e,t,r,M_)}class D_{constructor(){this.maxListeners=10,this.warnOnce=!1,this.events={}}on(e,t,r={}){let n=this.events[e];n||(n={highPriority:new Map,regular:new Map},this.events[e]=n),r.isFirst?n.highPriority.set(t,!0):n.regular.set(t,!0)}removeListener(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}removeAllListeners(){this.events={}}emit(e,...t){const r=this.events[e];if(!r)return;const n=Array.from(r.highPriority.keys()),o=Array.from(r.regular.keys());for(let e=n.length-1;e>=0;e-=1){const o=n[e];r.highPriority.has(o)&&o.apply(this,t)}for(let e=0;e<o.length;e+=1){const n=o[e];r.regular.has(n)&&n.apply(this,t)}}once(e,t){const r=this;this.on(e,(function n(...o){r.removeListener(e,n),t.apply(r,o)}))}}let B_=0;function U_(e){return U_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(e)}function Z_(e){var t=function(e,t){if("object"!==U_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==U_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===U_(t)?t:String(t)}const j_="none",H_={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},F_=["stateId"],z_=(e,r)=>{const n=function(e,r){const n=t.useRef();n.current||(n.current={unstable_eventManager:new D_,unstable_caches:{},state:{},instanceId:B_},B_+=1),t.useImperativeHandle(e,(()=>n.current),[n]);const o=t.useCallback(((...e)=>{const[t,o,i={}]=e;if(i.defaultMuiPrevented=!1,(e=>void 0!==e.isPropagationStopped)(i)&&i.isPropagationStopped())return;const s=r.signature===A_.DataGridPro?{api:n.current}:{};n.current.unstable_eventManager.emit(t,o,i,s)}),[n,r.signature]),i=t.useCallback(((e,t,r)=>{n.current.unstable_eventManager.on(e,t,r);const o=n.current;return()=>{o.unstable_eventManager.removeListener(e,t)}}),[n]),s=t.useCallback((e=>{n.current.publishEvent("componentError",e)}),[n]);return O_(n,{subscribeEvent:i,publishEvent:o,showError:s}),t.useEffect((()=>{const e=n.current;return()=>{var t;void 0!==(t=e.instanceId)?ev.cache&&ev.cache[t]&&delete ev.cache[t]:ev.cache=null,e.publishEvent("unmount")}}),[n]),n}(e,r);return((e,r)=>{e.current.getLogger=t.useCallback((e=>C_?k_(e,"debug",r.logger):r.logLevel?k_(e,r.logLevel.toString(),r.logger):w_),[r.logLevel,r.logger])})(n,r),function(e,r){const n=t.useCallback((t=>{e.current.setState((e=>(0,ft.Z)({},e,{error:t})))}),[e]);t.useEffect((()=>{r.error?n({error:r.error}):n(null)}),[n,r.error]),L_(e,"componentError",n)}(n,r),((e,r)=>{const n=t.useRef({}),[,o]=t.useState(),i=t.useCallback((e=>{const{stateId:t}=e,r=(0,pt.Z)(e,F_);n.current[t]=(0,ft.Z)({},r,{stateId:t})}),[]),s=t.useCallback(((t,o)=>{let i;if(i=__(t)?t(e.current.state):t,e.current.state===i)return!1;let s=!1;const a=[];if(Object.keys(n.current).forEach((t=>{const r=n.current[t],o=r.stateSelector(e.current.state,e.current.instanceId),l=r.stateSelector(i,e.current.instanceId);l!==o&&(a.push({stateId:r.stateId,hasPropChanged:l!==r.propModel}),void 0!==r.propModel&&l!==r.propModel&&(s=!0))})),a.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${a[0].stateId}, therefore, you're not allowed to update ${a.map((e=>e.stateId)).join(", ")} in the same transaction.`);if(s||(e.current.state=i,e.current.publishEvent&&e.current.publishEvent("stateChange",i)),1===a.length){const{stateId:t,hasPropChanged:l}=a[0],c=n.current[t],u=c.stateSelector(i,e.current.instanceId);if(c.propOnChange&&l){const t=r.signature===A_.DataGridPro?{api:e.current,reason:o}:{reason:o};c.propOnChange(u,t)}s||e.current.publishEvent(c.changeEvent,u,{reason:o})}return!s}),[e,r.signature]),a=t.useCallback(((t,r,n)=>e.current.setState((e=>(0,ft.Z)({},e,{[t]:r(e[t])})),n)),[e]),l=t.useCallback((()=>o((()=>e.current.state))),[e]);O_(e,{setState:s,forceUpdate:l,unstable_updateControlState:a,unstable_registerControlState:i})})(n,r),(e=>{const r=t.useRef({}),n=t.useCallback((e=>{e&&Object.values(e.appliers).forEach((e=>{e()}))}),[]),o=t.useCallback(((e,t,o)=>{r.current[e]||(r.current[e]={processors:new Map,appliers:{}});const i=r.current[e];return i.processors.get(t)!==o&&(i.processors.set(t,o),n(i)),()=>{r.current[e].processors.set(t,null)}}),[n]),i=t.useCallback(((e,t,n)=>(r.current[e]||(r.current[e]={processors:new Map,appliers:{}}),r.current[e].appliers[t]=n,()=>{const n=r.current[e].appliers,o=(0,pt.Z)(n,[t].map(Z_));r.current[e].appliers=o})),[]),s=t.useCallback((e=>{const t=r.current[e];n(t)}),[n]),a=t.useCallback(((...e)=>{const[t,n,o]=e;return r.current[t]?Array.from(r.current[t].processors.values()).reduce(((e,t)=>t?t(e,o):e),n):n}),[]);O_(e,{unstable_registerPipeProcessor:o,unstable_registerPipeApplier:i,unstable_requestPipeProcessorsApplication:s,unstable_applyPipeProcessors:a})})(n),(e=>{const r=t.useRef(new Map),n=t.useRef({}),o=t.useCallback(((t,r,o)=>{const i=()=>{const e=n.current[r],o=(0,pt.Z)(e,[t].map(Z_));n.current[r]=o};n.current[r]||(n.current[r]={});const s=n.current[r],a=s[t];return s[t]=o,a&&a!==o?(t===e.current.unstable_getActiveStrategy(H_[r])&&e.current.publishEvent("activeStrategyProcessorChange",r),i):i}),[e]),i=t.useCallback(((t,r)=>{const o=e.current.unstable_getActiveStrategy(H_[t]);if(null==o)throw new Error("Can't apply a strategy processor before defining an active strategy");const i=n.current[t];if(!i||!i[o])throw new Error(`No processor found for processor "${t}" on strategy "${o}"`);return(0,i[o])(r)}),[e]),s=t.useCallback((e=>{var t;const n=Array.from(r.current.entries()).find((([,t])=>t.group===e&&t.isAvailable()));return null!=(t=null==n?void 0:n[0])?t:j_}),[]),a=t.useCallback(((t,n,o)=>{r.current.set(n,{group:t,isAvailable:o}),e.current.publishEvent("strategyAvailabilityChange")}),[e]);O_(e,{unstable_registerStrategyProcessor:o,unstable_applyStrategyProcessor:i,unstable_getActiveStrategy:s,unstable_setStrategyAvailability:a})})(n),((e,r)=>{O_(e,{getLocaleText:t.useCallback((e=>{if(null==r.localeText[e])throw new Error(`Missing translation for key ${e}.`);return r.localeText[e]}),[r.localeText])})})(n,r),n},G_=(e,r,n)=>{const o=t.useRef(!1);o.current||(r.current.state=e(r.current.state,n,r),o.current=!0)};function q_(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const r=document.createRange();r.selectNode(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(r);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}const V_=e=>e.columnMenu,W_=e=>(0,ft.Z)({},e,{columnMenu:{open:!1}}),Y_=e=>{const r=t.useRef(!0);r.current&&(r.current=!1,e())},K_=(e,r,n)=>{const o=t.useRef(),i=t.useRef(`mui-${Math.round(1e9*Math.random())}`),s=t.useCallback((()=>{o.current=e.current.unstable_registerPipeProcessor(r,i.current,n)}),[e,n,r]);Y_((()=>{s()}));const a=t.useRef(!0);t.useEffect((()=>(a.current?a.current=!1:s(),()=>{o.current&&(o.current(),o.current=null)})),[s])},$_=(e,r,n)=>{const o=t.useRef(),i=t.useRef(`mui-${Math.round(1e9*Math.random())}`),s=t.useCallback((()=>{o.current=e.current.unstable_registerPipeApplier(r,i.current,n)}),[e,n,r]);Y_((()=>{s()}));const a=t.useRef(!0);t.useEffect((()=>(a.current?a.current=!1:s(),()=>{o.current&&(o.current(),o.current=null)})),[s])};var Q_=__webpack_require__(1387),X_=__webpack_require__(7596);const J_=["onChange","maxRows","minRows","style","value"];function ey(e,t){return parseInt(e[t],10)||0}const ty={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function ry(e){return null==e||0===Object.keys(e).length}const ny=t.forwardRef((function(e,r){const{onChange:n,maxRows:o,minRows:i=1,style:s,value:a}=e,l=(0,pt.Z)(e,J_),{current:c}=t.useRef(null!=a),u=t.useRef(null),d=(0,qn.Z)(r,u),h=t.useRef(null),p=t.useRef(0),[f,g]=t.useState({}),m=t.useCallback((()=>{const t=u.current,r=(0,Jn.Z)(t).getComputedStyle(t);if("0px"===r.width)return{};const n=h.current;n.style.width=r.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const s=r["box-sizing"],a=ey(r,"padding-bottom")+ey(r,"padding-top"),l=ey(r,"border-bottom-width")+ey(r,"border-top-width"),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let p=c;return i&&(p=Math.max(Number(i)*d,p)),o&&(p=Math.min(Number(o)*d,p)),p=Math.max(p,d),{outerHeightStyle:p+("border-box"===s?a+l:0),overflow:Math.abs(p-c)<=1}}),[o,i,e.placeholder]),v=(e,t)=>{const{outerHeightStyle:r,overflow:n}=t;return p.current<20&&(r>0&&Math.abs((e.outerHeightStyle||0)-r)>1||e.overflow!==n)?(p.current+=1,{overflow:n,outerHeightStyle:r}):e},_=t.useCallback((()=>{const e=m();ry(e)||g((t=>v(t,e)))}),[m]);return t.useEffect((()=>{const e=(0,X_.Z)((()=>{p.current=0,u.current&&(()=>{const e=m();ry(e)||(0,Kn.flushSync)((()=>{g((t=>v(t,e)))}))})()})),t=(0,Jn.Z)(u.current);let r;return t.addEventListener("resize",e),"undefined"!=typeof ResizeObserver&&(r=new ResizeObserver(e),r.observe(u.current)),()=>{e.clear(),t.removeEventListener("resize",e),r&&r.disconnect()}})),(0,$n.Z)((()=>{_()})),t.useEffect((()=>{p.current=0}),[a]),(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)("textarea",(0,ft.Z)({value:a,onChange:e=>{p.current=0,c||_(),n&&n(e)},ref:d,rows:i,style:(0,ft.Z)({height:f.outerHeightStyle,overflow:f.overflow?"hidden":null},s)},l)),(0,Ot.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:(0,ft.Z)({},ty,s,{padding:0})})]})})),oy=ny;function iy({props:e,states:t,muiFormControl:r}){return t.reduce(((t,n)=>(t[n]=e[n],r&&void 0===e[n]&&(t[n]=r[n]),t)),{})}const sy=t.createContext(void 0);function ay(){return t.useContext(sy)}function ly(e){const{styles:t,defaultTheme:r={}}=e,n="function"==typeof t?e=>{return t(null==(n=e)||0===Object.keys(n).length?r:e);var n}:t;return(0,Ot.jsx)(an,{styles:n})}const cy=function(e){return(0,Ot.jsx)(ly,(0,ft.Z)({},e,{defaultTheme:br.Z}))};function uy(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function dy(e,t=!1){return e&&(uy(e.value)&&""!==e.value||t&&uy(e.defaultValue)&&""!==e.defaultValue)}function hy(e){return(0,Rt.Z)("MuiInputBase",e)}const py=(0,wt.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),fy=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],gy=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,"small"===r.size&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${(0,Tt.Z)(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},my=(e,t)=>{const{ownerState:r}=e;return[t.input,"small"===r.size&&t.inputSizeSmall,r.multiline&&t.inputMultiline,"search"===r.type&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},vy=(0,St.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:gy})((({theme:e,ownerState:t})=>(0,ft.Z)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${py.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&(0,ft.Z)({padding:"4px 0 5px"},"small"===t.size&&{paddingTop:1}),t.fullWidth&&{width:"100%"}))),_y=(0,St.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:my})((({theme:e,ownerState:t})=>{const r="light"===e.palette.mode,n=(0,ft.Z)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,ft.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${py.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${py.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===t.size&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===t.type&&{MozAppearance:"textfield"})})),yy=(0,Ot.jsx)(cy,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),by=t.forwardRef((function(e,r){var n;const o=(0,Ct.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:g=!1,id:m,inputComponent:v="input",inputProps:_={},inputRef:y,maxRows:b,minRows:E,multiline:S=!1,name:C,onBlur:T,onChange:w,onClick:R,onFocus:k,onKeyDown:O,onKeyUp:I,placeholder:P,readOnly:A,renderSuffix:N,rows:L,slotProps:M={},slots:x={},startAdornment:D,type:B="text",value:U}=o,Z=(0,pt.Z)(o,fy),j=null!=_.value?_.value:U,{current:H}=t.useRef(null!=j),F=t.useRef(),z=t.useCallback((e=>{}),[]),G=(0,Gr.Z)(F,y,_.ref,z),[q,V]=t.useState(!1),W=ay(),Y=iy({props:o,muiFormControl:W,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Y.focused=W?W.focused:q,t.useEffect((()=>{!W&&h&&q&&(V(!1),T&&T())}),[W,h,q,T]);const K=W&&W.onFilled,$=W&&W.onEmpty,Q=t.useCallback((e=>{dy(e)?K&&K():$&&$()}),[K,$]);(0,Gs.Z)((()=>{H&&Q({value:j})}),[j,Q,H]),t.useEffect((()=>{Q(F.current)}),[]);let X=v,J=_;S&&"input"===X&&(J=L?(0,ft.Z)({type:void 0,minRows:L,maxRows:L},J):(0,ft.Z)({type:void 0,maxRows:b,minRows:E},J),X=oy),t.useEffect((()=>{W&&W.setAdornedStart(Boolean(D))}),[W,D]);const ee=(0,ft.Z)({},o,{color:Y.color||"primary",disabled:Y.disabled,endAdornment:f,error:Y.error,focused:Y.focused,formControl:W,fullWidth:g,hiddenLabel:Y.hiddenLabel,multiline:S,size:Y.size,startAdornment:D,type:B}),te=(e=>{const{classes:t,color:r,disabled:n,error:o,endAdornment:i,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,g={root:["root",`color${(0,Tt.Z)(r)}`,n&&"disabled",o&&"error",l&&"fullWidth",s&&"focused",a&&"formControl","small"===h&&"sizeSmall",u&&"multiline",p&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",n&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",i&&"inputAdornedEnd",d&&"readOnly"]};return(0,Et.Z)(g,hy,t)})(ee),re=x.root||c.Root||vy,ne=M.root||u.root||{},oe=x.input||c.Input||_y;return J=(0,ft.Z)({},J,null!=(n=M.input)?n:u.input),(0,Ot.jsxs)(t.Fragment,{children:[!p&&yy,(0,Ot.jsxs)(re,(0,ft.Z)({},ne,!uo(re)&&{ownerState:(0,ft.Z)({},ee,ne.ownerState)},{ref:r,onClick:e=>{F.current&&e.currentTarget===e.target&&F.current.focus(),R&&R(e)}},Z,{className:(0,gt.default)(te.root,ne.className,l),children:[D,(0,Ot.jsx)(sy.Provider,{value:null,children:(0,Ot.jsx)(oe,(0,ft.Z)({ownerState:ee,"aria-invalid":Y.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:d,disabled:Y.disabled,id:m,onAnimationStart:e=>{Q("mui-auto-fill-cancel"===e.animationName?F.current:{value:"x"})},name:C,placeholder:P,readOnly:A,required:Y.required,rows:L,value:j,onKeyDown:O,onKeyUp:I,type:B},J,!uo(oe)&&{as:X,ownerState:(0,ft.Z)({},ee,J.ownerState)},{ref:G,className:(0,gt.default)(te.input,J.className),onBlur:e=>{T&&T(e),_.onBlur&&_.onBlur(e),W&&W.onBlur?W.onBlur(e):V(!1)},onChange:(e,...t)=>{if(!H){const t=e.target||F.current;if(null==t)throw new Error((0,Q_.Z)(1));Q({value:t.value})}_.onChange&&_.onChange(e,...t),w&&w(e,...t)},onFocus:e=>{Y.disabled?e.stopPropagation():(k&&k(e),_.onFocus&&_.onFocus(e),W&&W.onFocus?W.onFocus(e):V(!0))}}))}),f,N?N((0,ft.Z)({},Y,{startAdornment:D})):null]}))]})})),Ey=by,Sy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),Cy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),Ty=(0,Si.Z)((0,Ot.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),wy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Ry=(0,Si.Z)((0,Ot.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),ky=(0,Si.Z)((0,Ot.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),Oy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),Iy=((0,Si.Z)((0,Ot.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon")),Py=(0,Si.Z)((0,Ot.jsx)("path",{d:"M11 19V5h2v14z"}),"Separator"),Ay=(0,Si.Z)((0,Ot.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),Ny=(0,Si.Z)((0,Ot.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),Ly=(0,Si.Z)((0,Ot.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),My=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),xy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Dy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),By=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),Uy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),Zy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),jy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),Hy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),Fy=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");function zy(e){return"object"==typeof e&&null!==e?e.value:e}function Gy(e,t){if(void 0===t)return;const r=t.find((t=>{const r=zy(t);return String(r)===String(e)}));return zy(r)}const qy=["item","applyValue","type","apiRef","focusElementRef"],Vy=({valueOptions:e,valueFormatter:t,field:r},n,o)=>("function"==typeof e?["",...e({field:r})]:["",...e||[]]).map((e=>{const i="object"==typeof e,s=i?e.value:e,a=i?e.value:e,l=t&&""!==e?t({value:e,field:r,api:n}):e,c=i?e.label:l;return(0,Ot.jsx)(o,{value:a,children:c},s)})),Wy=500;function Yy(e){var r,n,o,i,s;const{item:a,applyValue:l,type:c,apiRef:u,focusElementRef:d}=e,h=(0,pt.Z)(e,qy),p=t.useRef(),[f,g]=t.useState(null!=(r=a.value)?r:""),[m,v]=t.useState(!1),_=(0,lc.Z)(),y=vv(),b=null==(o=((null==(n=y.componentsProps)?void 0:n.baseSelect)||{}).native)||o,E="singleSelect"===c?{select:!0,SelectProps:(0,ft.Z)({native:b},null==(i=y.componentsProps)?void 0:i.baseSelect),children:Vy(u.current.getColumn(a.columnField),u.current,b?"option":La)}:{},S=t.useCallback((e=>{let t=e.target.value;if("singleSelect"===c){const e=u.current.getColumn(a.columnField),r="function"==typeof e.valueOptions?e.valueOptions({field:e.field}):e.valueOptions;t=Gy(t,r)}clearTimeout(p.current),g(String(t)),v(!0),p.current=setTimeout((()=>{l((0,ft.Z)({},a,{value:t})),v(!1)}),Wy)}),[u,l,a,c]);t.useEffect((()=>()=>{clearTimeout(p.current)}),[]),t.useEffect((()=>{var e;const t=null!=(e=a.value)?e:"";g(String(t))}),[a.value]);const C=m?{endAdornment:(0,Ot.jsx)(Uy,{})}:h.InputProps;return(0,Ot.jsx)(y.components.BaseTextField,(0,ft.Z)({id:_,label:u.current.getLocaleText("filterPanelInputLabel"),placeholder:u.current.getLocaleText("filterPanelInputPlaceholder"),value:f,onChange:S,variant:"standard",type:c||"text",InputProps:C,InputLabelProps:{shrink:!0},inputRef:d},E,h,null==(s=y.componentsProps)?void 0:s.baseTextField))}const Ky=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","isValidating","debounceMs","isProcessingProps","onValueChange"],$y=(0,St.ZP)(Ey,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})((({theme:e})=>(0,ft.Z)({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}}))),Qy=t.forwardRef(((e,r)=>{var n,o;const i=vv(),{id:s,value:a,field:l,colDef:c,hasFocus:u,debounceMs:d=(null!=(n=i.experimentalFeatures)&&n.newEditingApi?200:Wy),isProcessingProps:h,onValueChange:p}=e,f=(0,pt.Z)(e,Ky),g=gv(),m=t.useRef(),[v,_]=t.useState(a),y=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["editInputCell"]},Gm,t)})({classes:i.classes}),b=t.useCallback((async e=>{var t;const r=e.target.value;p&&await p(e,r);const n=g.current.getColumn(l);let o=r;n.valueParser&&null!=(t=i.experimentalFeatures)&&t.newEditingApi&&(o=n.valueParser(r,g.current.getCellParams(s,l))),_(o),g.current.setEditCellValue({id:s,field:l,value:o,debounceMs:d,unstable_skipValueParser:!0},e)}),[g,d,l,s,p,null==(o=i.experimentalFeatures)?void 0:o.newEditingApi]),E=g.current.unstable_getEditCellMeta?g.current.unstable_getEditCellMeta(s,l):{};return t.useEffect((()=>{"debouncedSetEditCellValue"!==E.changeReason&&_(a)}),[E.changeReason,a]),(0,Gs.Z)((()=>{u&&m.current.focus()}),[u]),(0,Ot.jsx)($y,(0,ft.Z)({ref:r,inputRef:m,className:y.root,fullWidth:!0,type:"number"===c.type?c.type:"text",value:null!=v?v:"",onChange:b,endAdornment:h?(0,Ot.jsx)(Uy,{}):void 0},f))})),Xy=Xm(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Jy=(e,t)=>t&&e.length>1?(Xy(),[e[0]]):e,eb=(e,t)=>r=>(0,ft.Z)({},r,{sorting:(0,ft.Z)({},r.sorting,{sortModel:Jy(e,t)})}),tb=(e,t)=>{const r=e.indexOf(t);return t&&-1!==r&&r+1!==e.length?e[r+1]:e[0]},rb=(e,t)=>null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null,nb=new Intl.Collator,ob=(e,t)=>{const r=rb(e,t);return null!==r?r:Number(e)-Number(t)},ib=(e,t)=>{const r=rb(e,t);return null!==r?r:e>t?1:e<t?-1:0};var sb=__webpack_require__(8925);function ab(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function lb(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:o="any",stringify:i,trim:s=!1}=e;return(e,{inputValue:a,getOptionLabel:l})=>{let c=s?a.trim():a;r&&(c=c.toLowerCase()),t&&(c=ab(c));const u=c?e.filter((e=>{let n=(i||l)(e);return r&&(n=n.toLowerCase()),t&&(n=ab(n)),"start"===o?0===n.indexOf(c):n.indexOf(c)>-1})):e;return"number"==typeof n?u.slice(0,n):u}}function cb(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const ub=lb(),db=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))};function hb(e){return(0,Rt.Z)("MuiListSubheader",e)}(0,wt.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const pb=["className","color","component","disableGutters","disableSticky","inset"],fb=(0,St.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,Tt.Z)(r.color)}`],!r.disableGutters&&t.gutters,r.inset&&t.inset,!r.disableSticky&&t.sticky]}})((({theme:e,ownerState:t})=>(0,ft.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===t.color&&{color:(e.vars||e).palette.primary.main},"inherit"===t.color&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}))),gb=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiListSubheader"}),{className:n,color:o="default",component:i="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=r,c=(0,pt.Z)(r,pb),u=(0,ft.Z)({},r,{color:o,component:i,disableGutters:s,disableSticky:a,inset:l}),d=(e=>{const{classes:t,color:r,disableGutters:n,inset:o,disableSticky:i}=e,s={root:["root","default"!==r&&`color${(0,Tt.Z)(r)}`,!n&&"gutters",o&&"inset",!i&&"sticky"]};return(0,Et.Z)(s,hb,t)})(u);return(0,Ot.jsx)(fb,(0,ft.Z)({as:i,className:(0,gt.default)(d.root,n),ref:t,ownerState:u},c))})),mb=gb,vb=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function _b(e){return(0,Rt.Z)("MuiChip",e)}const yb=(0,wt.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),bb=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Eb=(0,St.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{color:n,iconColor:o,clickable:i,onDelete:s,size:a,variant:l}=r;return[{[`& .${yb.avatar}`]:t.avatar},{[`& .${yb.avatar}`]:t[`avatar${(0,Tt.Z)(a)}`]},{[`& .${yb.avatar}`]:t[`avatarColor${(0,Tt.Z)(n)}`]},{[`& .${yb.icon}`]:t.icon},{[`& .${yb.icon}`]:t[`icon${(0,Tt.Z)(a)}`]},{[`& .${yb.icon}`]:t[`iconColor${(0,Tt.Z)(o)}`]},{[`& .${yb.deleteIcon}`]:t.deleteIcon},{[`& .${yb.deleteIcon}`]:t[`deleteIcon${(0,Tt.Z)(a)}`]},{[`& .${yb.deleteIcon}`]:t[`deleteIconColor${(0,Tt.Z)(n)}`]},{[`& .${yb.deleteIcon}`]:t[`deleteIcon${(0,Tt.Z)(l)}Color${(0,Tt.Z)(n)}`]},t.root,t[`size${(0,Tt.Z)(a)}`],t[`color${(0,Tt.Z)(n)}`],i&&t.clickable,i&&"default"!==n&&t[`clickableColor${(0,Tt.Z)(n)})`],s&&t.deletable,s&&"default"!==n&&t[`deletableColor${(0,Tt.Z)(n)}`],t[l],t[`${l}${(0,Tt.Z)(n)}`]]}})((({theme:e,ownerState:t})=>{const r=(0,Lr.Fq)(e.palette.text.primary,.26),n="light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300];return(0,ft.Z)({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${yb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${yb.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${yb.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${yb.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${yb.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${yb.icon}`]:(0,ft.Z)({marginLeft:5,marginRight:-6},"small"===t.size&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&(0,ft.Z)({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},"default"!==t.color&&{color:"inherit"})),[`& .${yb.deleteIcon}`]:(0,ft.Z)({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:r,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,Lr.Fq)(r,.4)}},"small"===t.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==t.color&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:(0,Lr.Fq)(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},"small"===t.size&&{height:24},"default"!==t.color&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${yb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Lr.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&"default"!==t.color&&{[`&.${yb.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})}),(({theme:e,ownerState:t})=>(0,ft.Z)({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Lr.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${yb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Lr.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&"default"!==t.color&&{[`&:hover, &.${yb.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})),(({theme:e,ownerState:t})=>(0,ft.Z)({},"outlined"===t.variant&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${yb.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${yb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${yb.avatar}`]:{marginLeft:4},[`& .${yb.avatarSmall}`]:{marginLeft:2},[`& .${yb.icon}`]:{marginLeft:4},[`& .${yb.iconSmall}`]:{marginLeft:2},[`& .${yb.deleteIcon}`]:{marginRight:5},[`& .${yb.deleteIconSmall}`]:{marginRight:3}},"outlined"===t.variant&&"default"!==t.color&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:(0,Lr.Fq)(e.palette[t.color].main,.7)}`,[`&.${yb.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${yb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:(0,Lr.Fq)(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${yb.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:(0,Lr.Fq)(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}}))),Sb=(0,St.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:r}=e,{size:n}=r;return[t.label,t[`label${(0,Tt.Z)(n)}`]]}})((({ownerState:e})=>(0,ft.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.size&&{paddingLeft:8,paddingRight:8})));function Cb(e){return"Backspace"===e.key||"Delete"===e.key}const Tb=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiChip"}),{avatar:o,className:i,clickable:s,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:g,onKeyUp:m,size:v="medium",variant:_="filled",tabIndex:y,skipFocusWhenDisabled:b=!1}=n,E=(0,pt.Z)(n,bb),S=t.useRef(null),C=(0,Gr.Z)(S,r),T=e=>{e.stopPropagation(),f&&f(e)},w=!(!1===s||!p)||s,R=w||f?On:l||"div",k=(0,ft.Z)({},n,{component:R,disabled:u,size:v,color:a,iconColor:t.isValidElement(d)&&d.props.color||a,onDelete:!!f,clickable:w,variant:_}),O=(e=>{const{classes:t,disabled:r,size:n,color:o,iconColor:i,onDelete:s,clickable:a,variant:l}=e,c={root:["root",l,r&&"disabled",`size${(0,Tt.Z)(n)}`,`color${(0,Tt.Z)(o)}`,a&&"clickable",a&&`clickableColor${(0,Tt.Z)(o)}`,s&&"deletable",s&&`deletableColor${(0,Tt.Z)(o)}`,`${l}${(0,Tt.Z)(o)}`],label:["label",`label${(0,Tt.Z)(n)}`],avatar:["avatar",`avatar${(0,Tt.Z)(n)}`,`avatarColor${(0,Tt.Z)(o)}`],icon:["icon",`icon${(0,Tt.Z)(n)}`,`iconColor${(0,Tt.Z)(i)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,Tt.Z)(n)}`,`deleteIconColor${(0,Tt.Z)(o)}`,`deleteIcon${(0,Tt.Z)(l)}Color${(0,Tt.Z)(o)}`]};return(0,Et.Z)(c,_b,t)})(k),I=R===On?(0,ft.Z)({component:l||"div",focusVisibleClassName:O.focusVisible},f&&{disableRipple:!0}):{};let P=null;f&&(P=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,gt.default)(c.props.className,O.deleteIcon),onClick:T}):(0,Ot.jsx)(vb,{className:(0,gt.default)(O.deleteIcon),onClick:T}));let A=null;o&&t.isValidElement(o)&&(A=t.cloneElement(o,{className:(0,gt.default)(O.avatar,o.props.className)}));let N=null;return d&&t.isValidElement(d)&&(N=t.cloneElement(d,{className:(0,gt.default)(O.icon,d.props.className)})),(0,Ot.jsxs)(Eb,(0,ft.Z)({as:R,className:(0,gt.default)(O.root,i),disabled:!(!w||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&Cb(e)&&e.preventDefault(),g&&g(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&Cb(e)?f(e):"Escape"===e.key&&S.current&&S.current.blur()),m&&m(e)},ref:C,tabIndex:b&&u?-1:y,ownerState:k},I,E,{children:[A||N,(0,Ot.jsx)(Sb,{className:(0,gt.default)(O.label),ownerState:k,children:h}),P]}))})),wb=Tb;function Rb(e){return(0,Rt.Z)("MuiInput",e)}const kb=(0,ft.Z)({},py,(0,wt.Z)("MuiInput",["root","underline","input"]));function Ob(e){return(0,Rt.Z)("MuiOutlinedInput",e)}const Ib=(0,ft.Z)({},py,(0,wt.Z)("MuiOutlinedInput",["root","notchedOutline","input"]));function Pb(e){return(0,Rt.Z)("MuiFilledInput",e)}const Ab=(0,ft.Z)({},py,(0,wt.Z)("MuiFilledInput",["root","underline","input"])),Nb=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Lb=(0,Si.Z)((0,Ot.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function Mb(e){return(0,Rt.Z)("MuiAutocomplete",e)}const xb=(0,wt.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Db,Bb;const Ub=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Zb=(0,St.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{fullWidth:n,hasClearIcon:o,hasPopupIcon:i,inputFocused:s,size:a}=r;return[{[`& .${xb.tag}`]:t.tag},{[`& .${xb.tag}`]:t[`tagSize${(0,Tt.Z)(a)}`]},{[`& .${xb.inputRoot}`]:t.inputRoot},{[`& .${xb.input}`]:t.input},{[`& .${xb.input}`]:s&&t.inputFocused},t.root,n&&t.fullWidth,i&&t.hasPopupIcon,o&&t.hasClearIcon]}})((({ownerState:e})=>(0,ft.Z)({[`&.${xb.focused} .${xb.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${xb.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${xb.tag}`]:(0,ft.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===e.size&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${xb.inputRoot}`]:{flexWrap:"wrap",[`.${xb.hasPopupIcon}&, .${xb.hasClearIcon}&`]:{paddingRight:30},[`.${xb.hasPopupIcon}.${xb.hasClearIcon}&`]:{paddingRight:56},[`& .${xb.input}`]:{width:0,minWidth:30}},[`& .${kb.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${kb.root}.${py.sizeSmall}`]:{[`& .${kb.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Ib.root}`]:{padding:9,[`.${xb.hasPopupIcon}&, .${xb.hasClearIcon}&`]:{paddingRight:39},[`.${xb.hasPopupIcon}.${xb.hasClearIcon}&`]:{paddingRight:65},[`& .${xb.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${xb.endAdornment}`]:{right:9}},[`& .${Ib.root}.${py.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${xb.input}`]:{padding:"2.5px 4px 2.5px 6px"}},[`& .${Ab.root}`]:{paddingTop:19,paddingLeft:8,[`.${xb.hasPopupIcon}&, .${xb.hasClearIcon}&`]:{paddingRight:39},[`.${xb.hasPopupIcon}.${xb.hasClearIcon}&`]:{paddingRight:65},[`& .${Ab.input}`]:{padding:"7px 4px"},[`& .${xb.endAdornment}`]:{right:9}},[`& .${Ab.root}.${py.sizeSmall}`]:{paddingBottom:1,[`& .${Ab.input}`]:{padding:"2.5px 4px"}},[`& .${py.hiddenLabel}`]:{paddingTop:8},[`& .${Ab.root}.${py.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${xb.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Ab.root}.${py.hiddenLabel}.${py.sizeSmall}`]:{[`& .${xb.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${xb.input}`]:(0,ft.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})}))),jb=(0,St.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Hb=(0,St.ZP)(Ds,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Fb=(0,St.ZP)(Ds,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>(0,ft.Z)({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})((({ownerState:e})=>(0,ft.Z)({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"}))),zb=(0,St.ZP)(ac,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${xb.option}`]:t.option},t.popper,r.disablePortal&&t.popperDisablePortal]}})((({theme:e,ownerState:t})=>(0,ft.Z)({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"}))),Gb=(0,St.ZP)(Ko,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((({theme:e})=>(0,ft.Z)({},e.typography.body1,{overflow:"auto"}))),qb=(0,St.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),Vb=(0,St.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),Wb=(0,St.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${xb.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${xb.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${xb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${xb.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${xb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Lr.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),Yb=(0,St.ZP)(mb,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),Kb=(0,St.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${xb.option}`]:{paddingLeft:24}}),$b=t.forwardRef((function(e,r){var n,o,i,s;const a=(0,Ct.Z)({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:h,className:p,clearIcon:f=Db||(Db=(0,Ot.jsx)(Nb,{fontSize:"small"})),clearOnBlur:g=!a.freeSolo,clearOnEscape:m=!1,clearText:v="Clear",closeText:_="Close",componentsProps:y={},defaultValue:b=(a.multiple?[]:null),disableClearable:E=!1,disableCloseOnSelect:S=!1,disabled:C=!1,disabledItemsFocusable:T=!1,disableListWrap:w=!1,disablePortal:R=!1,filterSelectedOptions:k=!1,forcePopupIcon:O="auto",freeSolo:I=!1,fullWidth:P=!1,getLimitTagsText:A=(e=>`+${e}`),getOptionLabel:N=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:L,handleHomeEndKeys:M=!a.freeSolo,includeInputInList:x=!1,limitTags:D=-1,ListboxComponent:B="ul",ListboxProps:U,loading:Z=!1,loadingText:j="Loading",multiple:H=!1,noOptionsText:F="No options",openOnFocus:z=!1,openText:G="Open",PaperComponent:q=Ko,PopperComponent:V=ac,popupIcon:W=Bb||(Bb=(0,Ot.jsx)(Lb,{})),readOnly:Y=!1,renderGroup:K,renderInput:$,renderOption:Q,renderTags:X,selectOnFocus:J=!a.freeSolo,size:ee="medium",slotProps:te={}}=a,re=(0,pt.Z)(a,Ub),{getRootProps:ne,getInputProps:oe,getInputLabelProps:ie,getPopupIndicatorProps:se,getClearProps:ae,getTagProps:le,getListboxProps:ce,getOptionProps:ue,value:de,dirty:he,id:pe,popupOpen:fe,focused:ge,focusedTag:me,anchorEl:ve,setAnchorEl:_e,inputValue:ye,groupedOptions:be}=function(e){const{unstable_isActiveElementInListbox:r=db,unstable_classNamePrefix:n="Mui",autoComplete:o=!1,autoHighlight:i=!1,autoSelect:s=!1,blurOnSelect:a=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:c=!1,componentName:u="useAutocomplete",defaultValue:d=(e.multiple?[]:null),disableClearable:h=!1,disableCloseOnSelect:p=!1,disabled:f,disabledItemsFocusable:g=!1,disableListWrap:m=!1,filterOptions:v=ub,filterSelectedOptions:_=!1,freeSolo:y=!1,getOptionDisabled:b,getOptionLabel:E=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:S,handleHomeEndKeys:C=!e.freeSolo,id:T,includeInputInList:w=!1,inputValue:R,isOptionEqualToValue:k=((e,t)=>e===t),multiple:O=!1,onChange:I,onClose:P,onHighlightChange:A,onInputChange:N,onOpen:L,open:M,openOnFocus:x=!1,options:D,readOnly:B=!1,selectOnFocus:U=!e.freeSolo,value:Z}=e,j=(0,Gn.Z)(T);let H=E;H=e=>{const t=E(e);return"string"!=typeof t?String(t):t};const F=t.useRef(!1),z=t.useRef(!0),G=t.useRef(null),q=t.useRef(null),[V,W]=t.useState(null),[Y,K]=t.useState(-1),$=i?0:-1,Q=t.useRef($),[X,J]=(0,sb.Z)({controlled:Z,default:d,name:u}),[ee,te]=(0,sb.Z)({controlled:R,default:"",name:u,state:"inputValue"}),[re,ne]=t.useState(!1),oe=t.useCallback(((e,t)=>{if(!(O?X.length<t.length:null!==t)&&!l)return;let r;if(O)r="";else if(null==t)r="";else{const e=H(t);r="string"==typeof e?e:""}ee!==r&&(te(r),N&&N(e,r,"reset"))}),[H,ee,O,N,te,l,X]),[ie,se]=(0,sb.Z)({controlled:M,default:!1,name:u,state:"open"}),[ae,le]=t.useState(!0),ce=!O&&null!=X&&ee===H(X),ue=ie&&!B,de=ue?v(D.filter((e=>!_||!(O?X:[X]).some((t=>null!==t&&k(e,t))))),{inputValue:ce&&ae?"":ee,getOptionLabel:H}):[],he=pg({filteredOptions:de,value:X});t.useEffect((()=>{const e=X!==he.value;re&&!e||y&&!e||oe(null,X)}),[X,oe,re,he.value,y]);const pe=ie&&de.length>0&&!B,fe=(0,Wn.Z)((e=>{-1===e?G.current.focus():V.querySelector(`[data-tag-index="${e}"]`).focus()}));t.useEffect((()=>{O&&Y>X.length-1&&(K(-1),fe(-1))}),[X,O,Y,fe]);const ge=(0,Wn.Z)((({event:e,index:t,reason:r="auto"})=>{if(Q.current=t,-1===t?G.current.removeAttribute("aria-activedescendant"):G.current.setAttribute("aria-activedescendant",`${j}-option-${t}`),A&&A(e,-1===t?null:de[t],r),!q.current)return;const o=q.current.querySelector(`[role="option"].${n}-focused`);o&&(o.classList.remove(`${n}-focused`),o.classList.remove(`${n}-focusVisible`));const i=q.current.parentElement.querySelector('[role="listbox"]');if(!i)return;if(-1===t)return void(i.scrollTop=0);const s=q.current.querySelector(`[data-option-index="${t}"]`);if(s&&(s.classList.add(`${n}-focused`),"keyboard"===r&&s.classList.add(`${n}-focusVisible`),i.scrollHeight>i.clientHeight&&"mouse"!==r)){const e=s,t=i.clientHeight+i.scrollTop,r=e.offsetTop+e.offsetHeight;r>t?i.scrollTop=r-i.clientHeight:e.offsetTop-e.offsetHeight*(S?1.3:0)<i.scrollTop&&(i.scrollTop=e.offsetTop-e.offsetHeight*(S?1.3:0))}})),me=(0,Wn.Z)((({event:e,diff:t,direction:r="next",reason:n="auto"})=>{if(!ue)return;const i=function(e,t){if(!q.current||-1===e)return-1;let r=e;for(;;){if("next"===t&&r===de.length||"previous"===t&&-1===r)return-1;const e=q.current.querySelector(`[data-option-index="${r}"]`),n=!g&&(!e||e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||n))return r;r+="next"===t?1:-1}}((()=>{const e=de.length-1;if("reset"===t)return $;if("start"===t)return 0;if("end"===t)return e;const r=Q.current+t;return r<0?-1===r&&w?-1:m&&-1!==Q.current||Math.abs(t)>1?0:e:r>e?r===e+1&&w?-1:m||Math.abs(t)>1?e:0:r})(),r);if(ge({index:i,reason:n,event:e}),o&&"reset"!==t)if(-1===i)G.current.value=ee;else{const e=H(de[i]);G.current.value=e,0===e.toLowerCase().indexOf(ee.toLowerCase())&&ee.length>0&&G.current.setSelectionRange(ee.length,e.length)}})),ve=t.useCallback((()=>{if(!ue)return;if((()=>{if(-1!==Q.current&&he.filteredOptions&&he.filteredOptions.length!==de.length&&(O?X.length===he.value.length&&he.value.every(((e,t)=>H(X[t])===H(e))):(e=he.value,t=X,(e?H(e):"")===(t?H(t):"")))){const e=he.filteredOptions[Q.current];if(e&&de.some((t=>H(t)===H(e))))return!0}var e,t;return!1})())return;const e=O?X[0]:X;if(0!==de.length&&null!=e){if(q.current)if(null==e)Q.current>=de.length-1?ge({index:de.length-1}):ge({index:Q.current});else{const t=de[Q.current];if(O&&t&&-1!==cb(X,(e=>k(t,e))))return;const r=cb(de,(t=>k(t,e)));-1===r?me({diff:"reset"}):ge({index:r})}}else me({diff:"reset"})}),[de.length,!O&&X,_,me,ge,ue,ee,O]),_e=(0,Wn.Z)((e=>{(0,Qn.Z)(q,e),e&&ve()}));t.useEffect((()=>{ve()}),[ve]);const ye=e=>{ie||(se(!0),le(!0),L&&L(e))},be=(e,t)=>{ie&&(se(!1),P&&P(e,t))},Ee=(e,t,r,n)=>{if(O){if(X.length===t.length&&X.every(((e,r)=>e===t[r])))return}else if(X===t)return;I&&I(e,t,r,n),J(t)},Se=t.useRef(!1),Ce=(e,t,r="selectOption",n="options")=>{let o=r,i=t;if(O){i=Array.isArray(X)?X.slice():[];const e=cb(i,(e=>k(t,e)));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),o="removeOption")}oe(e,i),Ee(e,i,o,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||be(e,o),(!0===a||"touch"===a&&Se.current||"mouse"===a&&!Se.current)&&G.current.blur()},Te=(e,t)=>{if(!O)return;""===ee&&be(e,"toggleInput");let r=Y;-1===Y?""===ee&&"previous"===t&&(r=X.length-1):(r+="next"===t?1:-1,r<0&&(r=0),r===X.length&&(r=-1)),r=function(e,t){if(-1===e)return-1;let r=e;for(;;){if("next"===t&&r===X.length||"previous"===t&&-1===r)return-1;const e=V.querySelector(`[data-tag-index="${r}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return r;r+="next"===t?1:-1}}(r,t),K(r),fe(r)},we=e=>{F.current=!0,te(""),N&&N(e,"","clear"),Ee(e,O?[]:null,"clear")},Re=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(K(-1),fe(-1)),229!==t.which))switch(t.key){case"Home":ue&&C&&(t.preventDefault(),me({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":ue&&C&&(t.preventDefault(),me({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),me({diff:-5,direction:"previous",reason:"keyboard",event:t}),ye(t);break;case"PageDown":t.preventDefault(),me({diff:5,direction:"next",reason:"keyboard",event:t}),ye(t);break;case"ArrowDown":t.preventDefault(),me({diff:1,direction:"next",reason:"keyboard",event:t}),ye(t);break;case"ArrowUp":t.preventDefault(),me({diff:-1,direction:"previous",reason:"keyboard",event:t}),ye(t);break;case"ArrowLeft":Te(t,"previous");break;case"ArrowRight":Te(t,"next");break;case"Enter":if(-1!==Q.current&&ue){const e=de[Q.current],r=!!b&&b(e);if(t.preventDefault(),r)return;Ce(t,e,"selectOption"),o&&G.current.setSelectionRange(G.current.value.length,G.current.value.length)}else y&&""!==ee&&!1===ce&&(O&&t.preventDefault(),Ce(t,ee,"createOption","freeSolo"));break;case"Escape":ue?(t.preventDefault(),t.stopPropagation(),be(t,"escape")):c&&(""!==ee||O&&X.length>0)&&(t.preventDefault(),t.stopPropagation(),we(t));break;case"Backspace":if(O&&!B&&""===ee&&X.length>0){const e=-1===Y?X.length-1:Y,r=X.slice();r.splice(e,1),Ee(t,r,"removeOption",{option:X[e]})}break;case"Delete":if(O&&!B&&""===ee&&X.length>0&&-1!==Y){const e=Y,r=X.slice();r.splice(e,1),Ee(t,r,"removeOption",{option:X[e]})}}},ke=e=>{ne(!0),x&&!F.current&&ye(e)},Oe=e=>{r(q)?G.current.focus():(ne(!1),z.current=!0,F.current=!1,s&&-1!==Q.current&&ue?Ce(e,de[Q.current],"blur"):s&&y&&""!==ee?Ce(e,ee,"blur","freeSolo"):l&&oe(e,X),be(e,"blur"))},Ie=e=>{const t=e.target.value;ee!==t&&(te(t),le(!1),N&&N(e,t,"input")),""===t?h||O||Ee(e,null,"clear"):ye(e)},Pe=e=>{ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},Ae=()=>{Se.current=!0},Ne=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Ce(e,de[t],"selectOption"),Se.current=!1},Le=e=>t=>{const r=X.slice();r.splice(e,1),Ee(t,r,"removeOption",{option:X[e]})},Me=e=>{ie?be(e,"toggleInput"):ye(e)},xe=e=>{e.target.getAttribute("id")!==j&&e.preventDefault()},De=()=>{G.current.focus(),U&&z.current&&G.current.selectionEnd-G.current.selectionStart==0&&G.current.select(),z.current=!1},Be=e=>{""!==ee&&ie||Me(e)};let Ue=y&&ee.length>0;Ue=Ue||(O?X.length>0:null!==X);let Ze=de;return S&&(new Map,Ze=de.reduce(((e,t,r)=>{const n=S(t);return e.length>0&&e[e.length-1].group===n?e[e.length-1].options.push(t):e.push({key:r,index:r,group:n,options:[t]}),e}),[])),f&&re&&Oe(),{getRootProps:(e={})=>(0,ft.Z)({"aria-owns":pe?`${j}-listbox`:null},e,{onKeyDown:Re(e),onMouseDown:xe,onClick:De}),getInputLabelProps:()=>({id:`${j}-label`,htmlFor:j}),getInputProps:()=>({id:j,value:ee,onBlur:Oe,onFocus:ke,onChange:Ie,onMouseDown:Be,"aria-activedescendant":ue?"":null,"aria-autocomplete":o?"both":"list","aria-controls":pe?`${j}-listbox`:void 0,"aria-expanded":pe,autoComplete:"off",ref:G,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,onClick:we}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Me}),getTagProps:({index:e})=>(0,ft.Z)({key:e,"data-tag-index":e,tabIndex:-1},!B&&{onDelete:Le(e)}),getListboxProps:()=>({role:"listbox",id:`${j}-listbox`,"aria-labelledby":`${j}-label`,ref:_e,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:t})=>{const r=(O?X:[X]).some((e=>null!=e&&k(t,e))),n=!!b&&b(t);return{key:H(t),tabIndex:-1,role:"option",id:`${j}-option-${e}`,onMouseOver:Pe,onClick:Ne,onTouchStart:Ae,"data-option-index":e,"aria-disabled":n,"aria-selected":r}},id:j,inputValue:ee,value:X,dirty:Ue,popupOpen:ue,focused:re||-1!==Y,anchorEl:V,setAnchorEl:W,focusedTag:Y,groupedOptions:Ze}}((0,ft.Z)({},a,{componentName:"Autocomplete"})),Ee=!E&&!C&&he&&!Y,Se=(!I||!0===O)&&!1!==O,Ce=(0,ft.Z)({},a,{disablePortal:R,focused:ge,fullWidth:P,hasClearIcon:Ee,hasPopupIcon:Se,inputFocused:-1===me,popupOpen:fe,size:ee}),Te=(e=>{const{classes:t,disablePortal:r,focused:n,fullWidth:o,hasClearIcon:i,hasPopupIcon:s,inputFocused:a,popupOpen:l,size:c}=e,u={root:["root",n&&"focused",o&&"fullWidth",i&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",a&&"inputFocused"],tag:["tag",`tagSize${(0,Tt.Z)(c)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",r&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,Et.Z)(u,Mb,t)})(Ce);let we;if(H&&de.length>0){const e=e=>(0,ft.Z)({className:Te.tag,disabled:C},le(e));we=X?X(de,e,Ce):de.map(((t,r)=>(0,Ot.jsx)(wb,(0,ft.Z)({label:N(t),size:ee},e({index:r}),h))))}if(D>-1&&Array.isArray(we)){const e=we.length-D;!ge&&e>0&&(we=we.splice(0,D),we.push((0,Ot.jsx)("span",{className:Te.tag,children:A(e)},we.length)))}const Re=K||(e=>(0,Ot.jsxs)("li",{children:[(0,Ot.jsx)(Yb,{className:Te.groupLabel,ownerState:Ce,component:"div",children:e.group}),(0,Ot.jsx)(Kb,{className:Te.groupUl,ownerState:Ce,children:e.children})]},e.key)),ke=Q||((e,t)=>(0,Ot.jsx)("li",(0,ft.Z)({},e,{children:N(t)}))),Oe=(e,t)=>{const r=ue({option:e,index:t});return ke((0,ft.Z)({},r,{className:Te.option}),e,{selected:r["aria-selected"],index:t,inputValue:ye})},Ie=null!=(n=te.clearIndicator)?n:y.clearIndicator,Pe=null!=(o=te.paper)?o:y.paper,Ae=null!=(i=te.popper)?i:y.popper,Ne=null!=(s=te.popupIndicator)?s:y.popupIndicator;return(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)(Zb,(0,ft.Z)({ref:r,className:(0,gt.default)(Te.root,p),ownerState:Ce},ne(re),{children:$({id:pe,disabled:C,fullWidth:!0,size:"small"===ee?"small":void 0,InputLabelProps:ie(),InputProps:(0,ft.Z)({ref:_e,className:Te.inputRoot,startAdornment:we},(Ee||Se)&&{endAdornment:(0,Ot.jsxs)(jb,{className:Te.endAdornment,ownerState:Ce,children:[Ee?(0,Ot.jsx)(Hb,(0,ft.Z)({},ae(),{"aria-label":v,title:v,ownerState:Ce},Ie,{className:(0,gt.default)(Te.clearIndicator,null==Ie?void 0:Ie.className),children:f})):null,Se?(0,Ot.jsx)(Fb,(0,ft.Z)({},se(),{disabled:C,"aria-label":fe?_:G,title:fe?_:G,ownerState:Ce},Ne,{className:(0,gt.default)(Te.popupIndicator,null==Ne?void 0:Ne.className),children:W})):null]})}),inputProps:(0,ft.Z)({className:Te.input,disabled:C,readOnly:Y},oe())})})),ve?(0,Ot.jsx)(zb,(0,ft.Z)({as:V,disablePortal:R,style:{width:ve?ve.clientWidth:null},ownerState:Ce,role:"presentation",anchorEl:ve,open:fe},Ae,{className:(0,gt.default)(Te.popper,null==Ae?void 0:Ae.className),children:(0,Ot.jsxs)(Gb,(0,ft.Z)({ownerState:Ce,as:q},Pe,{className:(0,gt.default)(Te.paper,null==Pe?void 0:Pe.className),children:[Z&&0===be.length?(0,Ot.jsx)(qb,{className:Te.loading,ownerState:Ce,children:j}):null,0!==be.length||I||Z?null:(0,Ot.jsx)(Vb,{className:Te.noOptions,ownerState:Ce,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:F}),be.length>0?(0,Ot.jsx)(Wb,(0,ft.Z)({as:B,className:Te.listbox,ownerState:Ce},ce(),U,{children:be.map(((e,t)=>L?Re({key:e.key,group:e.group,children:e.options.map(((t,r)=>Oe(t,e.index+r)))}):Oe(e,t)))})):null]}))})):null]})})),Qb=$b,Xb=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function Jb(e){const{item:r,applyValue:n,type:o,apiRef:i,focusElementRef:s,color:a,error:l,helperText:c,size:u,variant:d}=e,h=(0,pt.Z)(e,Xb),p={color:a,error:l,helperText:c,size:u,variant:d},[f,g]=t.useState(r.value||[]),m=(0,lc.Z)(),v=vv();t.useEffect((()=>{var e;const t=null!=(e=r.value)?e:[];g(t.map(String))}),[r.value]);const _=t.useCallback(((e,t)=>{g(t.map(String)),n((0,ft.Z)({},r,{value:[...t]}))}),[n,r]);return(0,Ot.jsx)(Qb,(0,ft.Z)({multiple:!0,freeSolo:!0,options:[],filterOptions:(e,t)=>{const{inputValue:r}=t;return null==r||""===r?[]:[r]},id:m,value:f,onChange:_,renderTags:(e,t)=>e.map(((e,r)=>(0,Ot.jsx)(wb,(0,ft.Z)({variant:"outlined",size:"small",label:e},t({index:r}))))),renderInput:e=>{var t;return(0,Ot.jsx)(v.components.BaseTextField,(0,ft.Z)({},e,{label:i.current.getLocaleText("filterPanelInputLabel"),placeholder:i.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,ft.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:s,type:o||"text"},p,null==(t=v.componentsProps)?void 0:t.baseTextField))}},h))}const eE={width:100,minWidth:50,maxWidth:1/0,hide:!1,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:(e,t)=>{const r=rb(e,t);return null!==r?r:"string"==typeof e?nb.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:((e=!1)=>[{value:"contains",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(y_(r),"i");return({value:e})=>null!=e&&n.test(e.toString())},InputComponent:Yy},{value:"equals",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:e})=>null!=e&&0===n.compare(r,e.toString())},InputComponent:Yy},{value:"startsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`^${y_(r)}.*$`,"i");return({value:e})=>null!=e&&n.test(e.toString())},InputComponent:Yy},{value:"endsWith",getApplyFilterFn:t=>{if(!t.value)return null;const r=e?t.value:t.value.trim(),n=new RegExp(`.*${y_(r)}$`,"i");return({value:e})=>null!=e&&n.test(e.toString())},InputComponent:Yy},{value:"isEmpty",getApplyFilterFn:()=>({value:e})=>""===e||null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:e})=>""!==e&&null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:t=>{if(!Array.isArray(t.value)||0===t.value.length)return null;const r=e?t.value:t.value.map((e=>e.trim())),n=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return({value:e})=>null!=e&&r.some((t=>0===n.compare(t,e.toString()||"")))},InputComponent:Jb}])(),renderEditCell:e=>(0,Ot.jsx)(Qy,(0,ft.Z)({},e)),getApplyQuickFilterFn:e=>{if(!e)return null;const t=new RegExp(y_(e),"i");return({value:e})=>null!=e&&t.test(e.toString())}},tE=e=>null==e?null:Number(e),rE=()=>[{label:"=",value:"=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>tE(t)===e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>tE(t)!==e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>null!=t&&tE(t)>e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>null!=t&&tE(t)>=e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>null!=t&&tE(t)<e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:e=>null==e.value||Number.isNaN(e.value)?null:({value:t})=>null!=t&&tE(t)<=e.value,InputComponent:Yy,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>({value:e})=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:e})=>null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:e=>Array.isArray(e.value)&&0!==e.value.length?({value:t})=>null!=t&&e.value.includes(Number(t)):null,InputComponent:Jb,InputComponentProps:{type:"number"}}],nE=(Jm(rE),(0,ft.Z)({},eE,{type:"number",align:"right",headerAlign:"right",sortComparator:ob,valueParser:e=>""===e?null:Number(e),valueFormatter:({value:e})=>function(e){return"number"==typeof e}(e)?e.toLocaleString():e||"",filterOperators:rE(),getApplyQuickFilterFn:e=>null==e||Number.isNaN(e)||""===e?null:({value:t})=>tE(t)===tE(e)})),oE=["item","applyValue","type","apiRef","focusElementRef","InputProps"];function iE(e){var r,n;const{item:o,applyValue:i,type:s,apiRef:a,focusElementRef:l,InputProps:c}=e,u=(0,pt.Z)(e,oE),d=t.useRef(),[h,p]=t.useState(null!=(r=o.value)?r:""),[f,g]=t.useState(!1),m=(0,lc.Z)(),v=vv(),_=t.useCallback((e=>{const t=e.target.value;clearTimeout(d.current),p(String(t)),g(!0),d.current=setTimeout((()=>{i((0,ft.Z)({},o,{value:t})),g(!1)}),500)}),[i,o]);return t.useEffect((()=>()=>{clearTimeout(d.current)}),[]),t.useEffect((()=>{var e;const t=null!=(e=o.value)?e:"";p(String(t))}),[o.value]),(0,Ot.jsx)(v.components.BaseTextField,(0,ft.Z)({id:m,label:a.current.getLocaleText("filterPanelInputLabel"),placeholder:a.current.getLocaleText("filterPanelInputPlaceholder"),value:h,onChange:_,variant:"standard",type:s||"text",InputLabelProps:{shrink:!0},inputRef:l,InputProps:(0,ft.Z)({},f?{endAdornment:(0,Ot.jsx)(Uy,{})}:{},c,{inputProps:(0,ft.Z)({max:"datetime-local"===s?"9999-12-31T23:59":"9999-12-31"},null==c?void 0:c.inputProps)})},u,null==(n=v.componentsProps)?void 0:n.baseTextField))}const sE=/(\d+)-(\d+)-(\d+)/,aE=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function lE(e,t,r,n){if(!e.value)return null;const[o,i,s,a,l]=e.value.match(r?aE:sE).slice(1).map(Number),c=new Date(o,i-1,s,a||0,l||0).getTime();return({value:e})=>{if(!e)return!1;const o=e instanceof Date?e:new Date(e.toString());if(n)return t(o.getTime(),c);const i=(e instanceof Date?new Date(o):o).setHours(r?o.getHours():0,r?o.getMinutes():0,0,0);return t(i,c)}}const cE=e=>[{value:"is",getApplyFilterFn:t=>lE(t,((e,t)=>e===t),e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:t=>lE(t,((e,t)=>e!==t),e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:t=>lE(t,((e,t)=>e>t),e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:t=>lE(t,((e,t)=>e>=t),e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:t=>lE(t,((e,t)=>e<t),e,!e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:t=>lE(t,((e,t)=>e<=t),e),InputComponent:iE,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>({value:e})=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>({value:e})=>null!=e,requiresFilterValue:!1}],uE=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","inputProps","isValidating","isProcessingProps","onValueChange"],dE=(0,St.ZP)(Ey)({fontSize:"inherit"});function hE(e){const{id:r,value:n,field:o,colDef:i,hasFocus:s,inputProps:a,onValueChange:l}=e,c=(0,pt.Z)(e,uE),u="dateTime"===i.type,d=gv(),h=t.useRef(),p=t.useMemo((()=>{let e,t;return e=null==n?null:n instanceof Date?n:new Date((null!=n?n:"").toString()),t=null==e||Number.isNaN(e.getTime())?"":new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,u?16:10),{parsed:e,formatted:t}}),[n,u]),[f,g]=t.useState(p),m=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["editInputCell"]},Gm,t)})({classes:vv().classes}),v=t.useCallback((async e=>{const t=e.target.value;let n;if(""===t)n=null;else{const[e,r]=t.split("T"),[o,i,s]=e.split("-");if(n=new Date,n.setFullYear(Number(o),Number(i)-1,Number(s)),n.setHours(0,0,0,0),r){const[e,t]=r.split(":");n.setHours(Number(e),Number(t),0,0)}}l&&await l(e,n),g({parsed:n,formatted:t}),d.current.setEditCellValue({id:r,field:o,value:n},e)}),[d,o,r,l]);return t.useEffect((()=>{g((e=>{var t,r;return p.parsed!==e.parsed&&(null==(t=p.parsed)?void 0:t.getTime())!==(null==(r=e.parsed)?void 0:r.getTime())?p:e}))}),[p]),(0,Gs.Z)((()=>{s&&h.current.focus()}),[s]),(0,Ot.jsx)(dE,(0,ft.Z)({inputRef:h,fullWidth:!0,className:m.root,type:u?"datetime-local":"date",inputProps:(0,ft.Z)({max:u?"9999-12-31T23:59":"9999-12-31"},a),value:f.formatted,onChange:v},c))}const pE=e=>(0,Ot.jsx)(hE,(0,ft.Z)({},e)),fE=(0,ft.Z)({},eE,{type:"date",sortComparator:ib,valueFormatter:function({value:e}){return e instanceof Date?e.toLocaleDateString():null!=e?e:""},filterOperators:cE(),renderEditCell:pE,getApplyQuickFilterFn:void 0}),gE=(0,ft.Z)({},eE,{type:"dateTime",sortComparator:ib,valueFormatter:function({value:e}){return e instanceof Date?e.toLocaleString():null!=e?e:""},filterOperators:cE(!0),renderEditCell:pE,getApplyQuickFilterFn:void 0}),mE=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","getValue"],vE=e=>{const{value:r}=e,n=(0,pt.Z)(e,mE),o=gv(),i=vv(),s=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["booleanCell"]},Gm,t)})({classes:i.classes}),a=t.useMemo((()=>r?i.components.BooleanCellTrueIcon:i.components.BooleanCellFalseIcon),[i.components.BooleanCellFalseIcon,i.components.BooleanCellTrueIcon,r]);return(0,Ot.jsx)(a,(0,ft.Z)({fontSize:"small",className:s.root,titleAccess:o.current.getLocaleText(r?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(r)},n))},_E=t.memo(vE),yE=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function bE(e){var r;const{id:n,value:o,field:i,className:s,hasFocus:a,onValueChange:l}=e,c=(0,pt.Z)(e,yE),u=gv(),d=t.useRef(null),h=(0,lc.Z)(),[p,f]=t.useState(o),g=vv(),m=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["editBooleanCell"]},Gm,t)})({classes:g.classes}),v=t.useCallback((async e=>{const t=e.target.checked;l&&await l(e,t),f(t),await u.current.setEditCellValue({id:n,field:i,value:t},e)}),[u,i,n,l]);return t.useEffect((()=>{f(o)}),[o]),(0,Gs.Z)((()=>{a&&d.current.focus()}),[a]),(0,Ot.jsx)("label",(0,ft.Z)({htmlFor:h,className:(0,gt.default)(m.root,s)},c,{children:(0,Ot.jsx)(g.components.BaseCheckbox,(0,ft.Z)({id:h,inputRef:d,checked:Boolean(p),onChange:v,size:"small"},null==(r=g.componentsProps)?void 0:r.baseCheckbox))}))}const EE=["item","applyValue","apiRef","focusElementRef"];const SE=(0,ft.Z)({},eE,{type:"boolean",align:"center",headerAlign:"center",renderCell:e=>e.rowNode.isAutoGenerated?"":(0,Ot.jsx)(_E,(0,ft.Z)({},e)),renderEditCell:e=>(0,Ot.jsx)(bE,(0,ft.Z)({},e)),sortComparator:ob,valueFormatter:function({value:e,api:t}){return e?t.getLocaleText("booleanCellTrueLabel"):t.getLocaleText("booleanCellFalseLabel")},filterOperators:[{value:"is",getApplyFilterFn:e=>{if(!e.value)return null;const t="true"===e.value;return({value:e})=>Boolean(e)===t},InputComponent:function(e){var r,n,o,i;const{item:s,applyValue:a,apiRef:l,focusElementRef:c}=e,u=(0,pt.Z)(e,EE),[d,h]=t.useState(s.value||""),p=vv(),f=null==(n=((null==(r=p.componentsProps)?void 0:r.baseSelect)||{}).native)||n,g=f?"option":La,m=t.useCallback((e=>{const t=e.target.value;h(t),a((0,ft.Z)({},s,{value:t}))}),[a,s]);return t.useEffect((()=>{h(s.value||"")}),[s.value]),(0,Ot.jsxs)(p.components.BaseTextField,(0,ft.Z)({label:l.current.getLocaleText("filterPanelInputLabel"),value:d,onChange:m,select:!0,variant:"standard",SelectProps:(0,ft.Z)({native:f,displayEmpty:!0},null==(o=p.componentsProps)?void 0:o.baseSelect),InputLabelProps:{shrink:!0},inputRef:c},u,null==(i=p.componentsProps)?void 0:i.baseTextField,{children:[(0,Ot.jsx)(g,{value:"",children:l.current.getLocaleText("filterValueAny")}),(0,Ot.jsx)(g,{value:"true",children:l.current.getLocaleText("filterValueTrue")}),(0,Ot.jsx)(g,{value:"false",children:l.current.getLocaleText("filterValueFalse")})]}))}}],getApplyQuickFilterFn:void 0,aggregable:!1}),CE=e=>"Escape"===e,TE=e=>"Enter"===e,wE=e=>"Tab"===e,RE=e=>" "===e,kE=e=>"Delete"===e||"Backspace"===e;function OE(e){return 1===e.key.length&&!1===e.ctrlKey&&!1===e.metaKey}const IE=["Enter","Escape","Tab"],PE=["Enter","Tab"],AE=e=>PE.indexOf(e)>-1,NE=e=>(e=>"Home"===e||"End"===e)(e)||(e=>0===e.indexOf("Arrow"))(e)||(e=>0===e.indexOf("Page"))(e)||RE(e),LE=e=>!!e.key;var ME,xE,DE;!function(e){e.Cell="cell",e.Row="row"}(ME||(ME={})),function(e){e.Edit="edit",e.View="view"}(xE||(xE={})),function(e){e.Edit="edit",e.View="view"}(DE||(DE={}));const BE=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen"];function UE(e){var r,n,o;const i=vv(),{id:s,value:a,api:l,field:c,row:u,colDef:d,hasFocus:h,error:p,onValueChange:f,initialOpen:g=i.editMode===ME.Cell}=e,m=(0,pt.Z)(e,BE),v=gv(),_=t.useRef(),y=t.useRef(),[b,E]=t.useState(g),S=null!=(n=((null==(r=i.componentsProps)?void 0:r.baseSelect)||{}).native)&&n;let C;return C="function"==typeof d.valueOptions?d.valueOptions({id:s,row:u,field:c}):d.valueOptions,d.valueFormatter&&(C=C.map((e=>{if("object"==typeof e)return e;const t={field:c,api:l,value:e};return{value:e,label:String(d.valueFormatter(t))}}))),(0,Gs.Z)((()=>{h&&y.current.focus()}),[h]),(0,Ot.jsx)(i.components.BaseSelect,(0,ft.Z)({ref:_,inputRef:y,value:a,onChange:async e=>{var t;E(!1);const r=Gy(e.target.value,C);f&&await f(e,r);const n=await v.current.setEditCellValue({id:s,field:c,value:r},e);if((null==(t=i.experimentalFeatures)||!t.newEditingApi)&&i.editMode!==ME.Row&&!1!==n&&await Promise.resolve(v.current.commitCellChange({id:s,field:c},e))&&(v.current.setCellMode(s,c,"view"),e.key)){const t=v.current.getCellParams(s,c);v.current.publishEvent("cellNavigationKeyDown",t,e)}},open:b,onOpen:e=>{(function(e){return!!e.key})(e)&&"Enter"===e.key||E(!0)},MenuProps:{onClose:(e,t)=>{var r;i.editMode!==ME.Row?("backdropClick"===t||CE(e.key))&&(null!=(r=i.experimentalFeatures)&&r.newEditingApi?v.current.stopCellEditMode({id:s,field:c,ignoreModifications:!0}):v.current.setCellMode(s,c,"view")):E(!1)}},error:p,native:S,fullWidth:!0},m,null==(o=i.componentsProps)?void 0:o.baseSelect,{children:C.map((e=>((e,t)=>{const r="object"==typeof e,n=r?e.value:e,o=r?e.value:e,i=r?e.label:e;return(0,Ot.jsx)(t,{value:o,children:i},n)})(e,S?"option":La)))}))}const ZE=["item","applyValue","type","apiRef","focusElementRef"],jE=({valueOptions:e,valueFormatter:t,field:r},n,o)=>("function"==typeof e?["",...e({field:r})]:["",...e||[]]).map((e=>{const i="object"==typeof e,s=i?e.value:e,a=i?e.value:e,l=t&&""!==e?t({value:e,field:r,api:n}):e,c=i?e.label:l;return(0,Ot.jsx)(o,{value:a,children:c},s)}));function HE(e){var r,n,o,i,s;const{item:a,applyValue:l,type:c,apiRef:u,focusElementRef:d}=e,h=(0,pt.Z)(e,ZE),[p,f]=t.useState(null!=(r=a.value)?r:""),g=(0,lc.Z)(),m=vv(),v=null==(o=((null==(n=m.componentsProps)?void 0:n.baseSelect)||{}).native)||o,_=a.columnField?u.current.getColumn(a.columnField):null,y=t.useMemo((()=>{if(null!==_)return"function"==typeof _.valueOptions?_.valueOptions({field:_.field}):_.valueOptions}),[_]),b=t.useCallback((e=>{let t=e.target.value;t=Gy(t,y),f(String(t)),l((0,ft.Z)({},a,{value:t}))}),[l,a,y]);return t.useEffect((()=>{var e;let t;if(void 0!==y){if(t=Gy(a.value,y),t!==a.value)return void l((0,ft.Z)({},a,{value:t}))}else t=a.value;t=null!=(e=t)?e:"",f(String(t))}),[a,y,l]),(0,Ot.jsx)(m.components.BaseTextField,(0,ft.Z)({id:g,label:u.current.getLocaleText("filterPanelInputLabel"),placeholder:u.current.getLocaleText("filterPanelInputPlaceholder"),value:p,onChange:b,variant:"standard",type:c||"text",InputLabelProps:{shrink:!0},inputRef:d,select:!0,SelectProps:(0,ft.Z)({native:v},null==(i=m.componentsProps)?void 0:i.baseSelect)},h,null==(s=m.componentsProps)?void 0:s.baseTextField,{children:jE(u.current.getColumn(a.columnField),u.current,v?"option":La)}))}const FE=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],zE=(e,t)=>zy(e)===zy(t),GE=lb();const qE=e=>null==e||"object"!=typeof e?e:e.value,VE=(0,ft.Z)({},eE,{type:"singleSelect",renderEditCell:e=>(0,Ot.jsx)(UE,(0,ft.Z)({},e)),filterOperators:[{value:"is",getApplyFilterFn:e=>null==e.value||""===e.value?null:({value:t})=>qE(t)===qE(e.value),InputComponent:HE},{value:"not",getApplyFilterFn:e=>null==e.value||""===e.value?null:({value:t})=>qE(t)!==qE(e.value),InputComponent:HE},{value:"isAnyOf",getApplyFilterFn:e=>{if(!Array.isArray(e.value)||0===e.value.length)return null;const t=e.value.map(qE);return({value:e})=>t.includes(qE(e))},InputComponent:function(e){const{item:r,applyValue:n,apiRef:o,focusElementRef:i,color:s,error:a,helperText:l,size:c,variant:u="standard"}=e,d=(0,pt.Z)(e,FE),h={color:s,error:a,helperText:l,size:c,variant:u},p=(0,lc.Z)(),f=vv(),g=r.columnField?o.current.getColumn(r.columnField):null,m=t.useMemo((()=>null!=g&&g.valueOptions?"function"==typeof g.valueOptions?g.valueOptions({field:g.field}):g.valueOptions:[]),[g]),v=t.useMemo((()=>null==m?void 0:m.map(zy)),[m]),{valueFormatter:_,field:y}=o.current.getColumn(r.columnField),b=e=>"object"==typeof e?e.label:_&&""!==e?_({value:e,field:y,api:o.current}):e,E=t.useMemo((()=>Array.isArray(r.value)?void 0!==m?r.value.map((e=>{const t=zy(e);return(null==v?void 0:v.findIndex((e=>e===t)))||0})).filter((e=>e>=0)).map((e=>m[e])):r.value:[]),[r.value,m,v]);t.useEffect((()=>{Array.isArray(r.value)&&E.length===r.value.length||n((0,ft.Z)({},r,{value:E.map(zy)}))}),[r,E,n]);const S=t.useCallback(((e,t)=>{n((0,ft.Z)({},r,{value:[...t.map(zy)]}))}),[n,r]);return(0,Ot.jsx)(Qb,(0,ft.Z)({multiple:!0,options:m,isOptionEqualToValue:zE,filterOptions:GE,id:p,value:E,onChange:S,renderTags:(e,t)=>e.map(((e,r)=>(0,Ot.jsx)(wb,(0,ft.Z)({variant:"outlined",size:"small",label:b(e)},t({index:r}))))),renderInput:e=>{var t;return(0,Ot.jsx)(f.components.BaseTextField,(0,ft.Z)({},e,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,ft.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:i,type:"singleSelect"},h,null==(t=f.componentsProps)?void 0:t.baseTextField))}},d))}}],getApplyQuickFilterFn:(e,t,r)=>{if(!e)return null;const{valueOptions:n,valueFormatter:o,field:i}=t,s=[qE(e).toString()],a="function"==typeof n?n({field:i}):n||[];return a&&a.forEach((t=>{let n,a;"object"==typeof t?(n=t.value,a=t.label):(n=t,a=o?o({value:t,field:i,api:r.current}):t),a.slice(0,e.length).toLowerCase()===e.toLowerCase()&&(s.includes(n)||s.push(n.toString()))})),({value:e})=>null!=e&&s.includes(qE(e).toString())}});function WE(e){return e.substring(2).toLowerCase()}const YE=function(e){const{children:r,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=e,a=t.useRef(!1),l=t.useRef(null),c=t.useRef(!1),u=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,qn.Z)(r.ref,l),h=(0,Wn.Z)((e=>{const t=u.current;u.current=!1;const r=(0,Vn.Z)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(a.current)return void(a.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(l.current)>-1:!r.documentElement.contains(e.target)||l.current.contains(e.target),o||!n&&t||i(e)})),p=e=>t=>{u.current=!0;const n=r.props[e];n&&n(t)},f={ref:d};return!1!==s&&(f[s]=p(s)),t.useEffect((()=>{if(!1!==s){const e=WE(s),t=(0,Vn.Z)(l.current),r=()=>{a.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",r),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",r)}}}),[h,s]),!1!==o&&(f[o]=p(o)),t.useEffect((()=>{if(!1!==o){const e=WE(o),t=(0,Vn.Z)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,o]),(0,Ot.jsx)(t.Fragment,{children:t.cloneElement(r,f)})},KE=["open","target","onClickAway","children","position","className","onExited"],$E=(0,St.ZP)(ac,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})((({theme:e})=>({zIndex:e.zIndex.modal,[`& .${qm.menuList}`]:{outline:0}}))),QE={"bottom-start":"top left","bottom-end":"top right"},XE=e=>{var r;const{open:n,target:o,onClickAway:i,children:s,position:a,className:l,onExited:c}=e,u=(0,pt.Z)(e,KE),d=gv(),h=t.useRef(o),p=t.useRef(n),f=vv(),g=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["menu"]},Gm,t)})({classes:f.classes});return t.useEffect((()=>{p.current&&h.current&&h.current.focus();const e=n?"menuOpen":"menuClose";d.current.publishEvent(e,{target:o}),p.current=n,h.current=o}),[d,n,o]),(0,Ot.jsx)($E,(0,ft.Z)({as:f.components.BasePopper,className:(0,gt.default)(l,g.root),open:n,anchorEl:o,transition:!0,placement:a},u,null==(r=f.componentsProps)?void 0:r.basePopper,{children:({TransitionProps:e,placement:t})=>{return(0,Ot.jsx)(YE,{onClickAway:i,mouseEvent:"onMouseDown",children:(0,Ot.jsx)(ia,(0,ft.Z)({},e,{style:{transformOrigin:QE[t]},onExited:(r=null==e?void 0:e.onExited,e=>{r&&r(),c&&c(e)}),children:(0,Ot.jsx)(Ko,{children:s})}))});var r}}))},JE=["colDef","id","api","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","getValue","tabIndex","position","focusElementRef"],eS=e=>{const{colDef:r,id:n,hasFocus:o,tabIndex:i,position:s="bottom-end",focusElementRef:a}=e,l=(0,pt.Z)(e,JE),[c,u]=t.useState(-1),[d,h]=t.useState(!1),p=gv(),f=t.useRef(null),g=t.useRef(null),m=t.useRef(!1),v=t.useRef({}),_=(0,lc.Z)(),y=(0,lc.Z)(),b=vv();if(t.useLayoutEffect((()=>{o||Object.entries(v.current).forEach((([e,t])=>{null==t||t.stop({},(()=>{delete v.current[e]}))}))}),[o]),t.useEffect((()=>{c<0||!f.current||c>=f.current.children.length||f.current.children[c].focus({preventScroll:!0})}),[c]),t.useEffect((()=>{o||(u(-1),m.current=!1)}),[o]),t.useImperativeHandle(a,(()=>({focus(){m.current||u(0)}})),[]),!(e=>"function"==typeof e.getActions)(r))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const E=r.getActions(p.current.getRowParams(n)),S=E.filter((e=>!e.props.showInMenu)),C=E.filter((e=>e.props.showInMenu)),T=S.length+(C.length?1:0);t.useEffect((()=>{c>=T&&u(T-1)}),[c,T]);const w=()=>{h(!1)},R=e=>t=>{v.current[e]=t},k=(e,t)=>r=>{u(e),m.current=!0,t&&t(r)};return(0,Ot.jsxs)("div",(0,ft.Z)({role:"menu",ref:f,tabIndex:-1,className:qm.actionsCell,onKeyDown:e=>{if(T<=1)return;let t=c;"ArrowRight"===e.key?t+=1:"ArrowLeft"===e.key&&(t-=1),t<0||t>=T||t!==c&&(e.preventDefault(),e.stopPropagation(),u(t))}},l,{children:[S.map(((e,r)=>t.cloneElement(e,{key:r,touchRippleRef:R(r),onClick:k(r,e.props.onClick),tabIndex:c===r?i:-1}))),C.length>0&&y&&(0,Ot.jsx)(Ds,{ref:g,id:y,"aria-label":p.current.getLocaleText("actionsCellMore"),"aria-controls":_,"aria-expanded":d?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:()=>{h(!0),u(T-1),m.current=!0},touchRippleRef:R(y),tabIndex:c===S.length?i:-1,children:(0,Ot.jsx)(b.components.MoreActionsIcon,{fontSize:"small"})}),C.length>0&&(0,Ot.jsx)(XE,{onClickAway:w,onClick:w,open:d,target:g.current,position:s,children:(0,Ot.jsx)(Qs,{id:_,className:qm.menuList,onKeyDown:e=>{"Tab"===e.key&&e.preventDefault(),["Tab","Enter","Escape"].includes(e.key)&&w()},"aria-labelledby":y,variant:"menu",autoFocusItem:!0,children:C.map(((e,r)=>t.cloneElement(e,{key:r})))})})]}))},tS="actions",rS=(0,ft.Z)({},eE,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:e=>(0,Ot.jsx)(eS,(0,ft.Z)({},e)),getApplyQuickFilterFn:void 0}),nS="__default__",oS=["maxWidth","minWidth","width","flex"],iS=(e={})=>{const t=(0,ft.Z)({},{string:eE,number:nE,date:fE,dateTime:gE,boolean:SE,singleSelect:VE,[tS]:rS,[nS]:eE});return Object.entries(e).forEach((([e,r])=>{t[e]?t[e]=(0,ft.Z)({},t[e],r):t[e]=(0,ft.Z)({},t[r.extendType||nS],r)})),t},sS=(e,t)=>{const r={};let n=0,o=0;const i=[];e.all.forEach((t=>{const s=(0,ft.Z)({},e.lookup[t]);if(!1===e.columnVisibilityModel[t])s.computedWidth=0;else{let e;s.flex&&s.flex>0?(n+=s.flex,e=0,i.push(s)):e=b_(s.width,s.minWidth,s.maxWidth),o+=e,s.computedWidth=e}r[t]=s}));const s=Math.max(t-o,0);if(n>0&&t>0){const e=function({initialFreeSpace:e,totalFlexUnits:t,flexColumns:r}){const n={all:{},frozenFields:[],freeze:e=>{const t=n.all[e];t&&!0!==t.frozen&&(n.all[e].frozen=!0,n.frozenFields.push(e))}};return function o(){if(n.frozenFields.length===r.length)return;const i={min:{},max:{}};let s=e,a=t,l=0;n.frozenFields.forEach((e=>{s-=n.all[e].computedWidth,a-=n.all[e].flex}));for(let e=0;e<r.length;e+=1){const t=r[e];if(n.all[t.field]&&!0===n.all[t.field].frozen)continue;let o=s/a*t.flex;o<t.minWidth?(l+=t.minWidth-o,o=t.minWidth,i.min[t.field]=!0):o>t.maxWidth&&(l+=t.maxWidth-o,o=t.maxWidth,i.max[t.field]=!0),n.all[t.field]={frozen:!1,computedWidth:o,flex:t.flex}}l<0?Object.keys(i.max).forEach((e=>{n.freeze(e)})):l>0?Object.keys(i.min).forEach((e=>{n.freeze(e)})):r.forEach((({field:e})=>{n.freeze(e)})),o()}(),n.all}({initialFreeSpace:s,totalFlexUnits:n,flexColumns:i});Object.keys(e).forEach((t=>{r[t].computedWidth=e[t].computedWidth}))}return(0,ft.Z)({},e,{lookup:r})},aS=({apiRef:e,columnsToUpsert:t,initialState:r,columnTypes:n,currentColumnVisibilityModel:o=sv(e),shouldRegenColumnVisibilityModelFromColumns:i,keepOnlyColumnsToUpsert:s=!1})=>{var a,l,c,u;const d=!e.current.state.columns;let h;if(d)h={all:[],lookup:{}};else{const t=rv(e.current.state);h={all:s?[]:[...t.all],lookup:(0,ft.Z)({},t.lookup)}}let p={};s&&!d&&(p=Object.keys(h.lookup).reduce(((e,t)=>(0,ft.Z)({},e,{[t]:!1})),{}));const f={};t.forEach((e=>{const{field:t}=e;f[t]=!0,p[t]=!0;let r=h.lookup[t];null==r?(r=(0,ft.Z)({},((e,t)=>t&&e[t]?e[t]:e[nS])(n,e.type),{field:t,hasBeenResized:!1}),h.all.push(t)):s&&h.all.push(t);let o=r.hasBeenResized;oS.forEach((t=>{void 0!==e[t]&&(o=!0,-1===e[t]&&(e[t]=1/0))})),h.lookup[t]=(0,ft.Z)({},r,{hide:null!=e.hide&&e.hide},e,{hasBeenResized:o})})),s&&!d&&Object.keys(h.lookup).forEach((e=>{p[e]||delete h.lookup[e]}));const g=(0,ft.Z)({},h.lookup),m=e.current.unstable_applyPipeProcessors("hydrateColumns",h);let v={};if(i){let t=!1;const r=(0,ft.Z)({},o);d?m.all.forEach((e=>{r[e]=!h.lookup[e].hide})):s&&Object.keys(r).forEach((e=>{m.lookup[e]||(delete r[e],t=!0)})),m.all.forEach((n=>{if(!f[n]&&g[n]===m.lookup[n])return;let i=o[n];void 0===i&&(i=!!d||!!rv(e.current.state).lookup[n]);const s=!m.lookup[n].hide;s!==i&&(t=!0,r[n]=s)})),v=t||d?r:o}else v=o;const _=((e,t)=>{if(!t)return e;const{orderedFields:r=[],dimensions:n={}}=t,o=Object.keys(n);if(0===o.length&&0===r.length)return e;const i={},s=[];for(let t=0;t<r.length;t+=1){const n=r[t];e.lookup[n]&&(i[n]=!0,s.push(n))}const a=0===s.length?e.all:[...s,...e.all.filter((e=>!i[e]))],l=(0,ft.Z)({},e.lookup);for(let e=0;e<o.length;e+=1){const t=o[e],r=(0,ft.Z)({},l[t],{hasBeenResized:!0});Object.entries(n[t]).forEach((([e,t])=>{r[e]=-1===t?1/0:t})),l[t]=r}return{all:a,lookup:l}})(m,r),y=(0,ft.Z)({},_,{columnVisibilityModel:v});return sS(y,null!=(a=null==(l=(c=e.current).getRootDimensions)||null==(u=l.call(c))?void 0:u.viewportInnerSize.width)?a:0)},lS=e=>t=>(0,ft.Z)({},t,{columns:e});function cS({firstColumnToRender:e,apiRef:t,firstRowToRender:r,lastRowToRender:n,visibleRows:o}){let i=e;for(let s=r;s<n;s+=1)if(o[s]){const r=o[s].id,n=t.current.unstable_getCellColSpanInfo(r,e);n&&n.spannedByColSpan&&(i=n.leftVisibleCellIndex)}return i}function uS({firstColumnIndex:e,minColumnIndex:t,columnBuffer:r,firstRowToRender:n,lastRowToRender:o,apiRef:i,visibleRows:s}){return cS({firstColumnToRender:Math.max(e-r,t),apiRef:i,firstRowToRender:n,lastRowToRender:o,visibleRows:s})}var dS;!function(e){e.filters="filters",e.columns="columns"}(dS||(dS={}));const hS=(e,t,r)=>{var n,o,i,s,a,l,c;const u=!!t.columnVisibilityModel||!(null==(n=t.initialState)||null==(o=n.columns)||!o.columnVisibilityModel);r.current.unstable_caches.columns={isUsingColumnVisibilityModel:u};const d=iS(t.columnTypes),h=aS({apiRef:r,columnTypes:d,columnsToUpsert:t.columns,initialState:null==(i=t.initialState)?void 0:i.columns,shouldRegenColumnVisibilityModelFromColumns:!u,currentColumnVisibilityModel:null!=(s=null!=(a=t.columnVisibilityModel)?a:null==(l=t.initialState)||null==(c=l.columns)?void 0:c.columnVisibilityModel)?s:{},keepOnlyColumnsToUpsert:!0});return(0,ft.Z)({},e,{columns:h})};var pS;function fS(e){return void 0!==e.field}!function(e){e.Compact="compact",e.Standard="standard",e.Comfortable="comfortable"}(pS||(pS={}));const gS=tv((e=>e.columnGrouping),(e=>e.lookup)),mS=["groupId","children"],vS=(e,t,r)=>{if(fS(e)){if(void 0!==r[e.field])throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurrs two times in the grouping model:`,`- ${r[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join("\n"));return void(r[e.field]=t)}const{groupId:n,children:o}=e;o.forEach((e=>{vS(e,[...t,n],r)}))},_S=e=>{if(!e)return{};const t={};return e.forEach((e=>{vS(e,[],t)})),t},yS=e=>{let t={};return e.forEach((e=>{if(fS(e))return;const{groupId:r,children:n}=e,o=(0,pt.Z)(e,mS);if(!r)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");n||console.warn(`MUI: group groupId=${r} has no children.`);const i=(0,ft.Z)({},o,{groupId:r}),s=yS(n);if(void 0!==s[r]||void 0!==t[r])throw new Error(`MUI: The groupId ${r} is used multiple times in the columnGroupingModel.`);t=(0,ft.Z)({},t,s,{[r]:i})})),(0,ft.Z)({},t)},bS=(e,t)=>{var r;const n=yS(null!=(r=t.columnGroupingModel)?r:[]);return(0,ft.Z)({},e,{columnGrouping:{lookup:n,groupCollapsedModel:{}}})},ES=(e,t,r,n)=>{switch(e){case pS.Compact:return{value:e,headerHeight:Math.floor(.7*t),rowHeight:Math.floor(.7*r),headerGroupingMaxDepth:n,factor:.7};case pS.Comfortable:return{value:e,headerHeight:Math.floor(1.3*t),rowHeight:Math.floor(1.3*r),headerGroupingMaxDepth:n,factor:1.3};default:return{value:e,headerHeight:t,rowHeight:r,headerGroupingMaxDepth:n,factor:1}}},SS=(e,t)=>{let r;if(null==t.columnGroupingModel||0===Object.keys(t.columnGroupingModel).length)r=0;else{const n=_S(t.columnGroupingModel),o=e.columns,i=o.all.filter((e=>!1!==o.columnVisibilityModel[e]));r=0===i.length?0:Math.max(...i.map((e=>{var t,r;return null!=(t=null==(r=n[e])?void 0:r.length)?t:0})))}return(0,ft.Z)({},e,{density:ES(t.density,t.headerHeight,t.rowHeight,r)})},CS=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","getValue","api"],TS=t.forwardRef((function(e,r){var n;const{field:o,id:i,value:s,rowNode:a,hasFocus:l,tabIndex:c}=e,u=(0,pt.Z)(e,CS),d=gv(),h=vv(),p=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["checkboxInput"]},Gm,t)})({classes:h.classes}),f=t.useRef(null),g=t.useRef(),m=(0,Gr.Z)(f,r),v=d.current.getCellElement(i,o);t.useLayoutEffect((()=>{0===c&&v&&(v.tabIndex=-1)}),[v,c]),t.useEffect((()=>{if(l){var e;const t=null==(e=f.current)?void 0:e.querySelector("input");null==t||t.focus({preventScroll:!0})}else g.current&&g.current.stop({})}),[l]);const _=t.useCallback((t=>{RE(t.key)&&t.stopPropagation(),NE(t.key)&&!t.shiftKey&&d.current.publishEvent("cellNavigationKeyDown",e,t)}),[d,e]);if("footer"===a.position)return null;const y=d.current.isRowSelectable(i),b=d.current.getLocaleText(s?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return a.isPinned?null:(0,Ot.jsx)(h.components.BaseCheckbox,(0,ft.Z)({ref:m,tabIndex:c,checked:s,onChange:e=>{const t={value:e.target.checked,id:i};d.current.publishEvent("rowSelectionCheckboxChange",t,e)},className:p.root,inputProps:{"aria-label":b},onKeyDown:_,disabled:!y,touchRippleRef:g},null==(n=h.componentsProps)?void 0:n.baseCheckbox,u))})),wS=TS,RS=e=>e.focus,kS=tv(RS,(e=>e.cell)),OS=tv(RS,(e=>e.columnHeader)),IS=e=>e.tabIndex,PS=tv(IS,(e=>e.cell)),AS=tv(IS,(e=>e.columnHeader)),NS=e=>e.selection,LS=tv(NS,(e=>e.length)),MS=tv(NS,Iv,((e,t)=>new Map(e.map((e=>[e,t[e]]))))),xS=tv(NS,(e=>e.reduce(((e,t)=>(e[t]=t,e)),{}))),DS=e=>e.pagination,BS=tv(DS,(e=>e.page)),US=tv(DS,(e=>e.pageSize)),ZS=(tv(DS,(e=>e.pageCount)),tv(DS,Av,Lv,o_,l_,((e,t,r,n,o)=>{const i=o.length,s=Math.min(e.pageSize*e.page,i-1),a=Math.min(s+e.pageSize-1,i-1);if(-1===s||-1===a)return null;if(r<2)return{firstRowIndex:s,lastRowIndex:a};const l=o[s],c=a-s+1,u=n.findIndex((e=>e.id===l.id));let d=u,h=0;for(;d<n.length&&h<=c;){const e=t[n[d].id].depth;(h<c||e>0)&&(d+=1),0===e&&(h+=1)}return{firstRowIndex:u,lastRowIndex:d-1}}))),jS=tv(o_,ZS,((e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[])),HS=tv(i_,ZS,((e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[])),FS=["field","colDef"],zS=t.forwardRef((function(e,r){var n;const o=(0,pt.Z)(e,FS),[,i]=t.useState(!1),s=gv(),a=vv(),l=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["checkboxInput"]},Gm,t)})({classes:a.classes}),c=pv(s,AS),u=pv(s,NS),d=pv(s,i_),h=pv(s,HS),p=t.useMemo((()=>"function"!=typeof a.isRowSelectable?u:u.filter((e=>!!s.current.getRow(e)&&a.isRowSelectable(s.current.getRowParams(e))))),[s,a.isRowSelectable,u]),f=t.useMemo((()=>(a.pagination&&a.checkboxSelectionVisibleOnly?h:d).reduce(((e,t)=>(e[t]=!0,e)),{})),[a.pagination,a.checkboxSelectionVisibleOnly,h,d]),g=t.useMemo((()=>p.filter((e=>f[e])).length),[p,f]),m=g>0&&g<Object.keys(f).length,v=g>0,_=null!==c&&c.field===e.field?0:-1;t.useLayoutEffect((()=>{const t=s.current.getColumnHeaderElement(e.field);0===_&&t&&(t.tabIndex=-1)}),[_,s,e.field]);const y=t.useCallback((t=>{" "===t.key&&s.current.publishEvent("headerSelectionCheckboxChange",{value:!v}),NE(t.key)&&!t.shiftKey&&s.current.publishEvent("columnHeaderNavigationKeyDown",e,t)}),[s,e,v]),b=t.useCallback((()=>{i((e=>!e))}),[]);t.useEffect((()=>s.current.subscribeEvent("selectionChange",b)),[s,b]);const E=s.current.getLocaleText(v?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,Ot.jsx)(a.components.BaseCheckbox,(0,ft.Z)({ref:r,indeterminate:m,checked:v,onChange:e=>{const t={value:e.target.checked};s.current.publishEvent("headerSelectionCheckboxChange",t)},className:l.root,inputProps:{"aria-label":E},tabIndex:_,onKeyDown:y},null==(n=a.componentsProps)?void 0:n.baseCheckbox,o))})),GS="__check__",qS=(0,ft.Z)({},SE,{field:GS,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,valueGetter:e=>void 0!==xS(e.api.state,e.api.instanceId)[e.id],renderHeader:e=>(0,Ot.jsx)(zS,(0,ft.Z)({},e)),renderCell:e=>(0,Ot.jsx)(wS,(0,ft.Z)({},e))}),VS=(e,t)=>{if("string"==typeof e){const r=e.replace(/"/g,'""');return[t,"\n","\r"].some((e=>r.includes(e)))?`"${r}"`:r}return e};Xm(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);const WS=({apiRef:e,options:t})=>{const r=iv(e);return t.fields?t.fields.map((e=>r.find((t=>t.field===e)))).filter((e=>!!e)):(t.allColumns?r:av(e)).filter((e=>!e.disableExport))},YS=({apiRef:e})=>{var t,r;const n=a_(e),o=Av(e),i=e.current.getSelectedRows(),s=n.filter((e=>{var t;return"body"===(null!=(t=o[e].position)?t:"body")})),a=Dv(e),l=(null==a||null==(t=a.top)?void 0:t.map((e=>e.id)))||[],c=(null==a||null==(r=a.bottom)?void 0:r.map((e=>e.id)))||[];return s.unshift(...l),s.push(...c),i.size>0?s.filter((e=>i.has(e))):s},KS=["hideMenu","options"],$S=["hideMenu","options"],QS=e=>{const t=gv(),{hideMenu:r,options:n}=e,o=(0,pt.Z)(e,KS);return(0,Ot.jsx)(La,(0,ft.Z)({onClick:()=>{t.current.exportDataAsCsv(n),null==r||r()}},o,{children:t.current.getLocaleText("toolbarExportCSV")}))},XS=e=>{const t=gv(),{hideMenu:r,options:n}=e,o=(0,pt.Z)(e,$S);return(0,Ot.jsx)(La,(0,ft.Z)({onClick:()=>{t.current.exportDataAsPrint(n),null==r||r()}},o,{children:t.current.getLocaleText("toolbarExportPrint")}))},JS=e=>{const r=jv(e,"useGridCsvExport"),n=t.useCallback(((t={})=>{var n,o;return r.debug("Get data as CSV"),function(e){const{columns:t,rowIds:r,getCellParams:n,delimiterCharacter:o,includeHeaders:i}=e,s=r.reduce(((e,r)=>`${e}${((e,t,r,n)=>t.map((t=>{const o=r(e,t.field);return VS(o.formattedValue,n)})))(r,t,n,o).join(o)}\r\n`),"").trim();return i?`${t.filter((e=>e.field!==qS.field)).map((e=>VS(e.headerName||e.field,o))).join(o)}\r\n${s}`.trim():s}({columns:WS({apiRef:e,options:t}),rowIds:(null!=(n=t.getRowsToExport)?n:YS)({apiRef:e}),getCellParams:e.current.getCellParams,delimiterCharacter:t.delimiter||",",includeHeaders:null==(o=t.includeHeaders)||o})}),[r,e]),o=t.useCallback((e=>{r.debug("Export data as CSV");const t=n(e);!function(e,t="csv",r=document.title||"untitled"){const n=`${r}.${t}`;if("download"in HTMLAnchorElement.prototype){const t=URL.createObjectURL(e),r=document.createElement("a");return r.href=t,r.download=n,r.click(),void setTimeout((()=>{URL.revokeObjectURL(t)}))}throw new Error("MUI: exportAs not supported")}(new Blob([null!=e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",t],{type:"text/csv"}),"csv",null==e?void 0:e.fileName)}),[r,n]);O_(e,{getDataAsCsv:n,exportDataAsCsv:o});const i=t.useCallback(((e,t)=>{var r;return null!=(r=t.csvOptions)&&r.disableToolbarButton?e:[...e,{component:(0,Ot.jsx)(QS,{options:t.csvOptions}),componentName:"csvExport"}]}),[]);K_(e,"exportMenu",i)},eC=e=>e.rowsMeta,tC="client";var rC;!function(e){e.And="and",e.Or="or"}(rC||(rC={}));const nC=()=>({items:[],linkOperator:rC.And,quickFilterValues:[],quickFilterLogicOperator:rC.And}),oC=(e,r,n,o)=>{const i=t.useCallback((()=>{e.current.unstable_registerStrategyProcessor(r,n,o)}),[e,o,n,r]);Y_((()=>{i()}));const s=t.useRef(!0);t.useEffect((()=>{s.current?s.current=!1:i()}),[i])},iC=(e,t)=>{const r=(0,ft.Z)({},e);if(null==r.id&&(r.id=Math.round(1e5*Math.random())),null==r.operatorValue){const e=ov(t)[r.columnField];r.operatorValue=e&&e.filterOperators[0].value}return r},sC=Xm(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),aC=Xm("MUI: The 'id' field is required on `filterModel.items` when you use multiple filters.","error"),lC=Xm(["MUI: One of your filtering item have no `operatorValue` provided.","This property will become required on `@mui/x-data-grid@6.X`."]),cC=(e,t,r)=>{const n=e.items.length>1;let o;n&&t?(sC(),o=[e.items[0]]):o=e.items;const i=n&&o.some((e=>null==e.id)),s=o.some((e=>null==e.operatorValue));return i&&aC(),s&&lC(),s||i?(0,ft.Z)({},e,{items:o.map((e=>iC(e,r)))}):e.items!==o?(0,ft.Z)({},e,{items:o}):e},uC=(e,t,r)=>n=>(0,ft.Z)({},n,{filterModel:cC(e,t,r)}),dC=(e,t)=>{if(!e.columnField||!e.operatorValue)return null;const r=t.current.getColumn(e.columnField);if(!r)return null;let n;if(r.valueParser){var o;const t=r.valueParser;n=Array.isArray(e.value)?null==(o=e.value)?void 0:o.map((e=>t(e))):t(e.value)}else n=e.value;const i=(0,ft.Z)({},e,{value:n}),s=r.filterOperators;if(null==s||!s.length)throw new Error(`MUI: No filter operators found for column '${r.field}'.`);const a=s.find((e=>e.value===i.operatorValue));if(!a)throw new Error(`MUI: No filter operator found for column '${r.field}' and operator value '${i.operatorValue}'.`);const l=a.getApplyFilterFn(i,r);return"function"!=typeof l?null:{fn:e=>{const r=t.current.getCellParams(e,i.columnField);return l(r)},item:i}},hC=(e,t,r,n)=>{var o,i;const s=r.items.filter((e=>null!==dC(e,n))),a=e.filter((e=>null!=e)),l=t.filter((e=>null!=e)),c=null!=(o=r.quickFilterLogicOperator)?o:nC().quickFilterLogicOperator,u=null!=(i=r.linkOperator)?i:nC().linkOperator;if(a.length>0){const e=e=>a.some((t=>t[e.id]));if(u===rC.And){if(!s.every(e))return!1}else if(!s.some(e))return!1}if(l.length>0&&null!=r.quickFilterValues){const e=e=>l.some((t=>t[e]));if(c===rC.And){if(!r.quickFilterValues.every(e))return!1}else if(!r.quickFilterValues.some(e))return!1}return!0},pC=(e,t,r)=>{var n,o,i,s;const a=null!=(n=null!=(o=t.filterModel)?o:null==(i=t.initialState)||null==(s=i.filter)?void 0:s.filterModel)?n:nC();return(0,ft.Z)({},e,{filter:{filterModel:cC(a,t.disableMultipleColumnsFiltering,r),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},fC=(e,t)=>{let r,n;return t.pagination&&"client"===t.paginationMode?(n=ZS(e),r=jS(e)):(r=o_(e),n=0===r.length?null:{firstRowIndex:0,lastRowIndex:r.length-1}),{rows:r,range:n}},gC=(e,r)=>{const n=fC(e,r);return t.useMemo((()=>({rows:n.rows,range:n.range})),[n.rows,n.range])},mC=e=>(0,ft.Z)({},e,{focus:{cell:null,columnHeader:null},tabIndex:{cell:null,columnHeader:null}}),vC="__detail_panel_toggle__",_C=["rowsBeforePartialUpdates"],yC=(e,t,r)=>{const n=t?t(e):e.id;return function(e,t,r="A row was provided without id in the rows prop:"){if(null==e)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",r,JSON.stringify(t)].join("\n"))}(n,e,r),n},bC=({rows:e,getRowId:t,loading:r,rowCount:n})=>{const o={rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:r,rowCountPropBeforePartialUpdates:n,idRowsLookup:{},idToIdLookup:{},ids:[]};for(let r=0;r<e.length;r+=1){const n=e[r],i=yC(n,t);o.idRowsLookup[i]=n,o.idToIdLookup[i]=i,o.ids.push(i)}return o},EC=({apiRef:e,previousTree:t,rowCountProp:r,loadingProp:n})=>{const o=e.current.unstable_caches.rows,i=(0,pt.Z)(o,_C),s=null!=r?r:0,a=e.current.unstable_applyStrategyProcessor("rowTreeCreation",(0,ft.Z)({},i,{previousTree:t})),l=e.current.unstable_applyPipeProcessors("hydrateRows",a),c=1===l.treeDepth?l.ids.length:Object.values(l.tree).filter((e=>null==e.parent&&!e.isPinned)).length;return(0,ft.Z)({},l,{groupingResponseBeforeRowHydration:a,loading:n,totalRowCount:Math.max(s,l.ids.length),totalTopLevelRowCount:Math.max(s,c)})},SC=(e,t,r)=>{var n;const o=null==(n=e[t])?void 0:n.children;if(null==o)return[];const i=[];for(let t=0;t<o.length;t+=1){const n=o[t],s=e[n];r&&s.isAutoGenerated||i.push(n),i.push(...SC(e,s.id,r))}return i};function CC(e){var t,r;const n=Dv(e);return{top:(null==n||null==(t=n.top)?void 0:t.reduce(((t,r)=>t+e.current.unstable_getRowHeight(r.id)),0))||0,bottom:(null==n||null==(r=n.bottom)?void 0:r.reduce(((t,r)=>t+e.current.unstable_getRowHeight(r.id)),0))||0}}const TC=e=>e?0:100,wC=e=>t=>(0,ft.Z)({},t,{pagination:(0,ft.Z)({},t.pagination,{pageSize:e})}),RC=(e,t)=>t>0&&e>0?Math.ceil(e/t):0,kC=e=>e.pageCount?(0,ft.Z)({},e,{page:Math.max(Math.min(e.page,e.pageCount-1),0)}):e,OC=e=>t=>(0,ft.Z)({},t,{pagination:kC((0,ft.Z)({},t.pagination,{page:e}))}),IC=(Xm(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error"),(e,t)=>{var r,n,o,i,s,a,l,c;let u;return u=null!=t.pageSize?t.pageSize:null!=(null==(r=t.initialState)||null==(n=r.pagination)?void 0:n.pageSize)?t.initialState.pagination.pageSize:TC(t.autoPageSize),(0,ft.Z)({},e,{pagination:{pageSize:u,page:null!=(o=null!=(i=t.page)?i:null==(s=t.initialState)||null==(a=s.pagination)?void 0:a.page)?o:0,pageCount:RC(null!=(l=t.rowCount)?l:0,u),rowCount:null!=(c=t.rowCount)?c:0}})}),PC=e=>e.preferencePanel,AC=(e,t)=>{var r,n;return(0,ft.Z)({},e,{preferencePanel:null!=(r=null==(n=t.initialState)?void 0:n.preferencePanel)?r:{open:!1}})},NC=e=>e.editRows;function LC(e){return"function"==typeof e.then}const MC=e=>(0,ft.Z)({},e,{editRows:{}});function xC(e,r){var n;const o=jv(e,"useGridEditRows");((e,r)=>{var n;const o=jv(e,"useGridEditRows"),i=e=>(...t)=>{r.editMode===ME.Cell&&e(...t)},s=t.useCallback(((t,r,n)=>{e.current.getCellMode(t,r)!==n&&(o.debug(`Switching cell id: ${t} field: ${r} to mode: ${n}`),e.current.setState((o=>{const i=(0,ft.Z)({},o.editRows);return i[t]=(0,ft.Z)({},i[t]),n===xE.Edit?i[t][r]={value:e.current.getCellValue(t,r)}:(delete i[t][r],Object.keys(i[t]).length||delete i[t]),(0,ft.Z)({},o,{editRows:i})})),e.current.forceUpdate(),e.current.publishEvent("cellModeChange",e.current.getCellParams(t,r)))}),[e,o]),a=t.useCallback(((t,r)=>{const n=NC(e.current.state);return n[t]&&n[t][r]?xE.Edit:xE.View}),[e]),l=t.useCallback(((t,n={})=>{var o;const{id:i,field:s}=t;e.current.unstable_runPendingEditCellValueMutation(i,s);const a=e.current.getEditRowsModel();if(!a[i]||!a[i][s])throw new Error(`MUI: Cell at id: ${i} and field: ${s} is not in edit mode.`);const l=a[i][s],c=e.current.getColumn(s),u=e.current.getRow(i);if(null!=(o=r.experimentalFeatures)&&o.preventCommitWhileValidating){const e=a[i][s];if(e.isValidating||e.error)return!1}const d=(0,ft.Z)({},t,{value:l.value});let h=!!l.error;if(!h&&"function"==typeof c.preProcessEditCellProps){const t=c.preProcessEditCellProps({id:i,row:u,props:l});if(LC(t))return t.then((t=>(e.current.unstable_setEditCellProps({id:i,field:s,props:t}),!t.error&&(e.current.publishEvent("cellEditCommit",d,n),!0))));e.current.unstable_setEditCellProps({id:i,field:s,props:t}),h=!!t.error}return!h&&(e.current.publishEvent("cellEditCommit",d,n),!0)}),[e,null==(n=r.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),c=t.useCallback((t=>{const r=e.current.getColumn(t.field),n=e.current.getRow(t.id);return new Promise((o=>{let i={value:t.value};const s=e.current.getEditRowsModel()[t.id][t.field];if("function"!=typeof r.preProcessEditCellProps)return e.current.unstable_setEditCellProps((0,ft.Z)({},t,{props:i})),void o(!0);i=e.current.unstable_setEditCellProps((0,ft.Z)({},t,{props:(0,ft.Z)({},s,{isValidating:!0})})),Promise.resolve(r.preProcessEditCellProps({id:t.id,row:n,props:(0,ft.Z)({},i,{value:e.current.unstable_parseValue(t.id,t.field,t.value)})})).then((r=>{e.current.unstable_setEditCellProps((0,ft.Z)({},t,{props:(0,ft.Z)({},r,{isValidating:!1})})),o(!r.error)}))}))}),[e]);O_(e,{setCellMode:s,getCellMode:a,commitCellChange:l,unstable_setCellEditingEditCellValue:c});const u=t.useCallback((async(t,r)=>{if(229===r.which)return;const{id:n,field:o,cellMode:i,isEditable:s}=t;if(!s)return;const a=i===xE.Edit,l=r.ctrlKey||r.metaKey||r.altKey;if(a||!(e=>TE(e.key)||kE(e.key)||OE(e))(r)||l||" "===r.key&&r.shiftKey||e.current.publishEvent("cellEditStart",t,r),!a&&kE(r.key)&&(e.current.setEditCellValue({id:n,field:o,value:""}),e.current.commitCellChange({id:n,field:o},r),e.current.publishEvent("cellEditStop",t,r)),a&&AE(r.key)){const t={id:n,field:o};if(!await e.current.commitCellChange(t,r))return}var c;a&&(c=r.key,IE.indexOf(c)>-1)&&e.current.publishEvent("cellEditStop",t,r)}),[e]),d=t.useCallback(((t,r)=>{t.isEditable&&e.current.publishEvent("cellEditStart",t,r)}),[e]),h=async(t,r)=>{t.cellMode!==xE.View&&(await e.current.commitCellChange(t,r),e.current.publishEvent("cellEditStop",t,r))},p=(0,qr.Z)(((e,t)=>{h(e,t)})),f=(0,qr.Z)((()=>{const t=kS(e);if(!t)return;const r=e.current.getCellParams(t.id,t.field);h(r,{})})),g=t.useCallback(((t,r)=>{t.isEditable&&(e.current.setCellMode(t.id,t.field,xE.Edit),LE(r)&&OE(r)&&e.current.unstable_setEditCellProps({id:t.id,field:t.field,props:{value:""}}))}),[e]),m=t.useCallback(((t,r)=>{e.current.setCellMode(t.id,t.field,xE.View),LE(r)&&(AE(r.key)?e.current.publishEvent("cellNavigationKeyDown",t,r):("Escape"===r.key||kE(r.key))&&e.current.setCellFocus(t.id,t.field))}),[e]),v=t.useCallback((t=>{const{id:r,field:n}=t,i=e.current.getEditRowsModel(),{value:s}=i[r][n];o.debug(`Setting cell id: ${r} field: ${n} to value: ${null==s?void 0:s.toString()}`);const a=e.current.getRow(r);if(a){const r=e.current.getColumn(t.field);let o=(0,ft.Z)({},a,{[n]:s});r.valueSetter&&(o=r.valueSetter({row:a,value:s})),e.current.updateRows([o])}}),[e,o]),_=t.useCallback((t=>{const r=e.current.getRow(t.id),n=e.current.getColumn(t.field),o=n.preProcessEditCellProps?n.preProcessEditCellProps({id:t.id,row:r,props:t.props}):t.props;LC(o)?o.then((r=>{e.current.unstable_setEditCellProps((0,ft.Z)({},t,{props:r}))})):e.current.unstable_setEditCellProps((0,ft.Z)({},t,{props:o}))}),[e]);L_(e,"cellKeyDown",i(u)),L_(e,"cellDoubleClick",i(d)),L_(e,"cellFocusOut",i(p)),L_(e,"columnHeaderDragStart",i(f)),L_(e,"cellEditStart",i(g)),L_(e,"cellEditStop",i(m)),L_(e,"cellEditCommit",i(v)),L_(e,"editCellPropsChange",i(_)),x_(e,"cellEditCommit",r.onCellEditCommit),x_(e,"cellEditStart",r.onCellEditStart),x_(e,"cellEditStop",r.onCellEditStop)})(e,r),((e,r)=>{var n,o;const i=t.useRef(null),s=t.useRef(null),a=pv(e,iv),l=e=>(...t)=>{r.editMode===ME.Row&&e(...t)},c=t.useCallback(((t,r)=>{r!==e.current.getRowMode(t)&&(e.current.setState((n=>{const o=(0,ft.Z)({},n.editRows);return r===DE.Edit?(o[t]={},a.forEach((r=>{const n=e.current.getCellParams(t,r.field);n.isEditable&&(o[t][r.field]={value:n.value})}))):delete o[t],(0,ft.Z)({},n,{editRows:o})})),e.current.forceUpdate())}),[e,a]),u=t.useCallback((t=>r.editMode===ME.Cell?DE.View:NC(e.current.state)[t]?DE.Edit:DE.View),[e,r.editMode]),d=t.useCallback(((t,n={})=>{var o;if(r.editMode===ME.Cell)throw new Error("MUI: You can't commit changes when the edit mode is 'cell'.");e.current.unstable_runPendingEditCellValueMutation(t);const i=e.current.getEditRowsModel()[t];if(!i)throw new Error(`MUI: Row at id: ${t} is not being edited.`);if(null!=(o=r.experimentalFeatures)&&o.preventCommitWhileValidating&&!Object.keys(i).reduce(((e,t)=>e&&!i[t].isValidating&&!i[t].error),!0))return!1;if(Object.values(i).some((e=>!!e.error)))return!1;const s=Object.keys(i).filter((t=>"function"==typeof e.current.getColumn(t).preProcessEditCellProps));if(s.length>0){const r=e.current.getRow(t),o=s.map((async n=>{const o=e.current.getColumn(n),s=await Promise.resolve(o.preProcessEditCellProps({id:t,row:r,props:i[n]}));return e.current.unstable_setEditCellProps({id:t,field:n,props:s}),s.error}));return Promise.all(o).then((r=>!r.some((e=>!!e))&&(e.current.publishEvent("rowEditCommit",t,n),!0)))}return e.current.publishEvent("rowEditCommit",t,n),!0}),[e,r.editMode,null==(n=r.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),h=t.useCallback((t=>{const r=e.current.getEditRowsModel()[t.id],n=e.current.getRow(t.id);let o=!0;return new Promise((i=>{Object.keys(r).forEach((async i=>{const s=e.current.getColumn(i);let a=i===t.field?{value:t.value}:r[i];a=e.current.unstable_setEditCellProps({id:t.id,field:i,props:(0,ft.Z)({},a,{isValidating:!0})}),s.preProcessEditCellProps&&(a=await Promise.resolve(s.preProcessEditCellProps({id:t.id,row:n,props:(0,ft.Z)({},a,{value:i===t.field?e.current.unstable_parseValue(t.id,i,t.value):a.value})}))),a.error&&(o=!1),e.current.unstable_setEditCellProps({id:t.id,field:i,props:(0,ft.Z)({},a,{isValidating:!1})})})),i(o)}))}),[e]);O_(e,{setRowMode:c,getRowMode:u,commitRowChange:d,unstable_setRowEditingEditCellValue:h});const p=t.useCallback((async(t,n)=>{if(229===n.which)return;const{cellMode:o,isEditable:i}=t;if(!i)return;const s=o===xE.Edit,a=e.current.getRowParams(t.id);if(s)if("Enter"===n.key){var l;if(!await e.current.commitRowChange(t.id)&&null!=(l=r.experimentalFeatures)&&l.preventCommitWhileValidating)return;e.current.publishEvent("rowEditStop",a,n)}else"Escape"===n.key&&e.current.publishEvent("rowEditStop",a,n);else"Enter"===n.key&&e.current.publishEvent("rowEditStart",a,n)}),[e,null==(o=r.experimentalFeatures)?void 0:o.preventCommitWhileValidating]),f=t.useCallback(((t,r)=>{if(!t.isEditable)return;const n=e.current.getRowParams(t.id);e.current.publishEvent("rowEditStart",n,r)}),[e]),g=t.useCallback((t=>{const r=e.current.getRow(t.id),n=e.current.getEditRowsModel()[t.id];Object.keys(n).forEach((async o=>{const i=e.current.getColumn(o);if(i.preProcessEditCellProps){const s=o===t.field?t.props:n[o],a=await Promise.resolve(i.preProcessEditCellProps({id:t.id,row:r,props:s}));e.current.unstable_setEditCellProps({id:t.id,field:o,props:a})}else o===t.field&&e.current.unstable_setEditCellProps(t)}))}),[e]),m=t.useCallback((t=>{e.current.setRowMode(t.id,DE.Edit)}),[e]),v=t.useCallback(((t,r)=>{e.current.setRowMode(t.id,DE.View),"Enter"===r.key&&e.current.publishEvent("cellNavigationKeyDown",t,r)}),[e]),_=t.useCallback((t=>{const r=e.current.getEditRowsModel()[t];if(!r)throw new Error(`MUI: Row at id: ${t} is not being edited.`);const n=e.current.getRow(t);if(n){let t=(0,ft.Z)({},n);Object.keys(r).forEach((n=>{const o=e.current.getColumn(n),i=r[n].value;o.valueSetter?t=o.valueSetter({row:t,value:i}):t[n]=i})),e.current.updateRows([t])}}),[e]),y=t.useCallback((e=>{s.current=e}),[]),b=async(t,r)=>{t.cellMode!==xE.View&&(s.current=null,i.current=setTimeout((async()=>{var n;if((null==(n=s.current)?void 0:n.id)!==t.id){await e.current.commitRowChange(t.id,r);const n=e.current.getRowParams(t.id);e.current.publishEvent("rowEditStop",n,r)}})))},E=(0,qr.Z)(((e,t)=>{b(e,t)})),S=(0,qr.Z)((()=>{const t=kS(e);if(!t)return;const r=e.current.getCellParams(t.id,t.field);b(r,{})}));L_(e,"cellKeyDown",l(p)),L_(e,"cellDoubleClick",l(f)),L_(e,"editCellPropsChange",l(g)),L_(e,"rowEditStart",l(m)),L_(e,"rowEditStop",l(v)),L_(e,"rowEditCommit",l(_)),L_(e,"cellFocusIn",l(y)),L_(e,"cellFocusOut",l(E)),L_(e,"columnHeaderDragStart",l(S)),x_(e,"rowEditCommit",r.onRowEditCommit),x_(e,"rowEditStart",r.onRowEditStart),x_(e,"rowEditStop",r.onRowEditStop)})(e,r);const i=t.useRef({});e.current.unstable_registerControlState({stateId:"editRows",propModel:r.editRowsModel,propOnChange:r.onEditRowsModelChange,stateSelector:NC,changeEvent:"editRowsModelChange"});const s=t.useCallback((e=>!e.rowNode.isAutoGenerated&&!e.rowNode.isPinned&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(!r.isCellEditable||r.isCellEditable(e))),[r.isCellEditable]),a=t.useCallback(((e,t)=>{if(i.current[e])if(t){if(i.current[e][t]){const[,r]=i.current[e][t];r()}}else Object.keys(i.current[e]).forEach((t=>{const[,r]=i.current[e][t];r()}))}),[]),l=t.useCallback(((t,n={})=>{((e,t,r,n)=>{if(!r)return void n();if(i.current[e]||(i.current[e]={}),i.current[e][t]){const[r]=i.current[e][t];clearTimeout(r)}const o=setTimeout((()=>{n(),delete i.current[e][t]}),r);i.current[e][t]=[o,()=>{n();const[r]=i.current[e][t];clearTimeout(r),delete i.current[e][t]}]})(t.id,t.field,t.debounceMs,(()=>{var o;if(null!=(o=r.experimentalFeatures)&&o.preventCommitWhileValidating)return"row"===r.editMode?e.current.unstable_setRowEditingEditCellValue(t):e.current.unstable_setCellEditingEditCellValue(t);const i={id:t.id,field:t.field,props:{value:t.value}};return e.current.publishEvent("editCellPropsChange",i,n)}))}),[e,r.editMode,null==(n=r.experimentalFeatures)?void 0:n.preventCommitWhileValidating]),c=t.useCallback(((t,r,n)=>{const o=e.current.getColumn(r);return o.valueParser?o.valueParser(n,e.current.getCellParams(t,r)):n}),[e]),u=t.useCallback((t=>{const{id:r,field:n,props:i}=t;return o.debug(`Setting cell props on id: ${r} field: ${n}`),e.current.setState((e=>{const t=(0,ft.Z)({},e.editRows);return t[r]=(0,ft.Z)({},e.editRows[r]),t[r][n]=(0,ft.Z)({},i,{value:c(r,n,i.value)}),(0,ft.Z)({},e,{editRows:t})})),e.current.forceUpdate(),NC(e.current.state)[r][n]}),[e,o,c]),d=t.useCallback((t=>{NC(e.current.state)!==t&&(o.debug("Setting editRows model"),e.current.setState((e=>(0,ft.Z)({},e,{editRows:t}))),e.current.forceUpdate())}),[e,o]),h=t.useCallback((()=>NC(e.current.state)),[e]),p=t.useCallback(((e,t)=>{const r=t.detail>1;e.isEditable&&e.cellMode===xE.View&&r&&t.preventDefault()}),[]);L_(e,"cellMouseDown",p),x_(e,"editCellPropsChange",r.onEditCellPropsChange),O_(e,{isCellEditable:s,setEditRowsModel:d,getEditRowsModel:h,setEditCellValue:l,unstable_setEditCellProps:u,unstable_parseValue:c,unstable_runPendingEditCellValueMutation:a}),t.useEffect((()=>{void 0!==r.editRowsModel&&e.current.setEditRowsModel(r.editRowsModel)}),[e,r.editRowsModel])}var DC,BC;!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(DC||(DC={})),function(e){e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(BC||(BC={}));const UC=["id","field"],ZC=["id","field"],jC=Xm(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error");var HC,FC;!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(HC||(HC={})),function(e){e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(FC||(FC={}));const zC=["id"],GC=["id"],qC=Xm(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),VC=e=>(0,ft.Z)({},e,{editRows:{}}),WC=(e,r)=>{((e,r)=>{const[n,o]=t.useState({}),i=t.useRef(n),s=t.useRef({}),{processRowUpdate:a,onProcessRowUpdateError:l,cellModesModel:c,onCellModesModelChange:u,signature:d}=r,h=e=>(...t)=>{r.editMode===ME.Cell&&e(...t)},p=t.useCallback(((t,r)=>{const n=e.current.getCellParams(t,r);if(!e.current.isCellEditable(n))throw new Error(`MUI: The cell with id=${t} and field=${r} is not editable.`)}),[e]),f=t.useCallback(((t,r,n)=>{if(e.current.getCellMode(t,r)!==n)throw new Error(`MUI: The cell with id=${t} and field=${r} is not in ${n} mode.`)}),[e]),g=t.useCallback(((t,r)=>{if(!t.isEditable)return;if(t.cellMode===xE.Edit)return;const n=(0,ft.Z)({},t,{reason:DC.cellDoubleClick});e.current.publishEvent("cellEditStart",n,r)}),[e]),m=t.useCallback(((t,r)=>{if(t.cellMode===xE.View)return;if(e.current.getCellMode(t.id,t.field)===xE.View)return;const n=(0,ft.Z)({},t,{reason:BC.cellFocusOut});e.current.publishEvent("cellEditStop",n,r)}),[e]),v=t.useCallback(((t,r)=>{if(t.cellMode===xE.Edit){if(229===r.which)return;let n;if("Escape"===r.key?n=BC.escapeKeyDown:"Enter"===r.key?n=BC.enterKeyDown:"Tab"===r.key&&(n=r.shiftKey?BC.shiftTabKeyDown:BC.tabKeyDown,r.preventDefault()),n){const o=(0,ft.Z)({},t,{reason:n});e.current.publishEvent("cellEditStop",o,r)}}else if(t.isEditable){let n;if(" "===r.key&&r.shiftKey)return;if(OE(r)||(r.ctrlKey||r.metaKey)&&"v"===r.key?n=DC.printableKeyDown:"Enter"===r.key?n=DC.enterKeyDown:"Delete"!==r.key&&"Backspace"!==r.key||(n=DC.deleteKeyDown),n){const o=(0,ft.Z)({},t,{reason:n,key:r.key});e.current.publishEvent("cellEditStart",o,r)}}}),[e]),_=t.useCallback((r=>{const{id:n,field:o,reason:i,key:s}=r,a={id:n,field:o};i===DC.printableKeyDown?t.version.startsWith("18")?a.initialValue=s:a.deleteValue=!0:i===DC.deleteKeyDown&&(a.deleteValue=!0),e.current.startCellEditMode(a)}),[e]),y=t.useCallback((t=>{const{id:n,field:o,reason:i}=t;let s;e.current.unstable_runPendingEditCellValueMutation(n,o),i===BC.enterKeyDown?s="below":i===BC.tabKeyDown?s="right":i===BC.shiftTabKeyDown&&(s="left");let a="escapeKeyDown"===i;NC(e.current.state)[n][o].isProcessingProps&&!r.disableIgnoreModificationsIfProcessingProps&&(a=!0),e.current.stopCellEditMode({id:n,field:o,ignoreModifications:a,cellToFocusAfter:s})}),[e,r.disableIgnoreModificationsIfProcessingProps]);L_(e,"cellDoubleClick",h(g)),L_(e,"cellFocusOut",h(m)),L_(e,"cellKeyDown",h(v)),L_(e,"cellEditStart",h(_)),L_(e,"cellEditStop",h(y)),x_(e,"cellEditStart",r.onCellEditStart),x_(e,"cellEditStop",r.onCellEditStop);const b=t.useCallback(((t,r)=>{const n=NC(e.current.state);return n[t]&&n[t][r]?xE.Edit:xE.View}),[e]),E=(0,Wn.Z)((t=>{const n=t!==r.cellModesModel;if(u&&n){const r=d===A_.DataGridPro?{api:e.current}:{};u(t,r)}r.cellModesModel&&n||(o(t),i.current=t,e.current.publishEvent("cellModesModelChange",t))})),S=t.useCallback(((e,t,r)=>{const n=(0,ft.Z)({},i.current);if(null!==r)n[e]=(0,ft.Z)({},n[e],{[t]:(0,ft.Z)({},r)});else{const r=n[e],o=(0,pt.Z)(r,[t].map(Z_));n[e]=o,0===Object.keys(n[e]).length&&delete n[e]}E(n)}),[E]),C=t.useCallback(((t,r,n)=>{e.current.setState((e=>{const o=(0,ft.Z)({},e.editRows);return null!==n?o[t]=(0,ft.Z)({},o[t],{[r]:(0,ft.Z)({},n)}):(delete o[t][r],0===Object.keys(o[t]).length&&delete o[t]),(0,ft.Z)({},e,{editRows:o})})),e.current.forceUpdate()}),[e]),T=t.useCallback((e=>{const{id:t,field:r}=e,n=(0,pt.Z)(e,UC);p(t,r),f(t,r,xE.View),S(t,r,(0,ft.Z)({mode:xE.Edit},n))}),[p,f,S]),w=(0,Wn.Z)((t=>{const{id:r,field:n,deleteValue:o,initialValue:i}=t;let s=e.current.getCellValue(r,n);(o||i)&&(s=o?"":i),C(r,n,{value:s,error:!1,isProcessingProps:!1}),e.current.setCellFocus(r,n)})),R=t.useCallback((e=>{const{id:t,field:r}=e,n=(0,pt.Z)(e,ZC);f(t,r,xE.Edit),S(t,r,(0,ft.Z)({mode:xE.View},n))}),[f,S]),k=(0,Wn.Z)((async t=>{const{id:r,field:n,ignoreModifications:o,cellToFocusAfter:i="none"}=t;f(r,n,xE.Edit),e.current.unstable_runPendingEditCellValueMutation(r,n);const c=()=>{C(r,n,null),S(r,n,null),"none"!==i&&e.current.unstable_moveFocusToRelativeCell(r,n,i)};if(o)return void c();const u=NC(e.current.state),{error:d,isProcessingProps:h}=u[r][n];if(d||h)return s.current[r][n].mode=xE.Edit,void S(r,n,{mode:xE.Edit});const p=e.current.unstable_getRowWithUpdatedValuesFromCellEditing(r,n);if(a){const t=e=>{s.current[r][n].mode=xE.Edit,S(r,n,{mode:xE.Edit}),l?l(e):jC()};try{const n=e.current.getRow(r);Promise.resolve(a(p,n)).then((t=>{e.current.updateRows([t]),c()})).catch(t)}catch(e){t(e)}}else e.current.updateRows([p]),c()})),O=t.useCallback((async t=>{var r,n;const{id:o,field:i,value:s,debounceMs:a,unstable_skipValueParser:l}=t;p(o,i),f(o,i,xE.Edit);const c=e.current.getColumn(i),u=e.current.getRow(o);let d=s;c.valueParser&&!l&&(d=c.valueParser(s,e.current.getCellParams(o,i)));let h=NC(e.current.state),g=(0,ft.Z)({},h[o][i],{value:d,changeReason:a?"debouncedSetEditCellValue":"setEditCellValue"});if(c.preProcessEditCellProps){const e=s!==h[o][i].value;g=(0,ft.Z)({},g,{isProcessingProps:!0}),C(o,i,g),g=await Promise.resolve(c.preProcessEditCellProps({id:o,row:u,props:g,hasChanged:e}))}return e.current.getCellMode(o,i)!==xE.View&&(h=NC(e.current.state),g=(0,ft.Z)({},g,{isProcessingProps:!1}),g.value=c.preProcessEditCellProps?h[o][i].value:d,C(o,i,g),h=NC(e.current.state),!(null!=(r=h[o])&&null!=(n=r[i])&&n.error))}),[e,p,f,C]),I=t.useCallback(((t,r)=>{const n=e.current.getColumn(r),o=NC(e.current.state),{value:i}=o[t][r],s=e.current.getRow(t);return n.valueSetter?n.valueSetter({value:i,row:s}):(0,ft.Z)({},s,{[r]:i})}),[e]);O_(e,{getCellMode:b,startCellEditMode:T,stopCellEditMode:R,unstable_setCellEditingEditCellValue:O,unstable_getRowWithUpdatedValuesFromCellEditing:I}),t.useEffect((()=>{c&&E(c)}),[c,E]),t.useEffect((()=>{const t=Pv(e),r=s.current;s.current=S_(n),Object.entries(n).forEach((([e,n])=>{Object.entries(n).forEach((([n,o])=>{var i,s,a;const l=(null==(i=r[e])||null==(s=i[n])?void 0:s.mode)||xE.View,c=null!=(a=t[e])?a:e;o.mode===xE.Edit&&l===xE.View?w((0,ft.Z)({id:c,field:n},o)):o.mode===xE.View&&l===xE.Edit&&k((0,ft.Z)({id:c,field:n},o))}))}))}),[e,n,w,k])})(e,r),((e,r)=>{const[n,o]=t.useState({}),i=t.useRef(n),s=t.useRef({}),a=t.useRef(null),l=t.useRef(null),{processRowUpdate:c,onProcessRowUpdateError:u,rowModesModel:d,onRowModesModelChange:h,signature:p}=r,f=e=>(...t)=>{r.editMode===ME.Row&&e(...t)},g=t.useCallback(((t,r)=>{const n=e.current.getCellParams(t,r);if(!e.current.isCellEditable(n))throw new Error(`MUI: The cell with id=${t} and field=${r} is not editable.`)}),[e]),m=t.useCallback(((t,r)=>{if(e.current.getRowMode(t)!==r)throw new Error(`MUI: The row with id=${t} is not in ${r} mode.`)}),[e]),v=t.useCallback(((t,r)=>{if(!t.isEditable)return;if(e.current.getRowMode(t.id)===DE.Edit)return;const n=e.current.getRowParams(t.id),o=(0,ft.Z)({},n,{field:t.field,reason:HC.cellDoubleClick});e.current.publishEvent("rowEditStart",o,r)}),[e]),_=t.useCallback((e=>{l.current=e}),[]),y=t.useCallback(((t,r)=>{t.isEditable&&e.current.getRowMode(t.id)!==DE.View&&(l.current=null,a.current=setTimeout((()=>{var n;if(a.current=null,(null==(n=l.current)?void 0:n.id)!==t.id){if(!e.current.getRow(t.id))return;if(e.current.getRowMode(t.id)===DE.View)return;const n=e.current.getRowParams(t.id),o=(0,ft.Z)({},n,{field:t.field,reason:FC.rowFocusOut});e.current.publishEvent("rowEditStop",o,r)}})))}),[e]);t.useEffect((()=>()=>{clearTimeout(a.current)}),[]);const b=t.useCallback(((t,r)=>{if(t.cellMode===DE.Edit){if(229===r.which)return;let n;if("Escape"===r.key)n=FC.escapeKeyDown;else if("Enter"===r.key)n=FC.enterKeyDown;else if("Tab"===r.key){const o=nv(e).filter((r=>e.current.isCellEditable(e.current.getCellParams(t.id,r))));r.shiftKey?t.field===o[0]&&(n=FC.shiftTabKeyDown):t.field===o[o.length-1]&&(n=FC.tabKeyDown),n&&r.preventDefault()}if(n){const o=e.current.getRowParams(t.id),i=(0,ft.Z)({},o,{reason:n,field:t.field});e.current.publishEvent("rowEditStop",i,r)}}else if(t.isEditable){let n;if(" "===r.key&&r.shiftKey)return;if(OE(r)||(r.ctrlKey||r.metaKey)&&"v"===r.key?n=HC.printableKeyDown:"Enter"===r.key?n=HC.enterKeyDown:"Delete"!==r.key&&"Backspace"!==r.key||(n=HC.deleteKeyDown),n){const o=e.current.getRowParams(t.id),i=(0,ft.Z)({},o,{field:t.field,key:r.key,reason:n});e.current.publishEvent("rowEditStart",i,r)}}}),[e]),E=t.useCallback((r=>{const{id:n,field:o,reason:i,key:s}=r,a={id:n,fieldToFocus:o};i===HC.printableKeyDown?t.version.startsWith("18")?a.initialValue=s:a.deleteValue=!!o:i===HC.deleteKeyDown&&(a.deleteValue=!!o),e.current.startRowEditMode(a)}),[e]),S=t.useCallback((t=>{const{id:n,reason:o,field:i}=t;let s;e.current.unstable_runPendingEditCellValueMutation(n),o===FC.enterKeyDown?s="below":o===FC.tabKeyDown?s="right":o===FC.shiftTabKeyDown&&(s="left");let a="escapeKeyDown"===o;const l=NC(e.current.state);a||r.disableIgnoreModificationsIfProcessingProps||(a=Object.values(l[n]).some((e=>e.isProcessingProps))),e.current.stopRowEditMode({id:n,ignoreModifications:a,field:i,cellToFocusAfter:s})}),[e,r.disableIgnoreModificationsIfProcessingProps]);L_(e,"cellDoubleClick",f(v)),L_(e,"cellFocusIn",f(_)),L_(e,"cellFocusOut",f(y)),L_(e,"cellKeyDown",f(b)),L_(e,"rowEditStart",f(E)),L_(e,"rowEditStop",f(S)),x_(e,"rowEditStart",r.onRowEditStart),x_(e,"rowEditStop",r.onRowEditStop);const C=t.useCallback((t=>{if(r.editMode===ME.Cell)return DE.View;const n=NC(e.current.state);return n[t]&&Object.keys(n[t]).length>0?DE.Edit:DE.View}),[e,r.editMode]),T=(0,Wn.Z)((t=>{const n=t!==r.rowModesModel;if(h&&n){const r=p===A_.DataGridPro?{api:e.current}:{};h(t,r)}r.rowModesModel&&n||(o(t),i.current=t,e.current.publishEvent("rowModesModelChange",t))})),w=t.useCallback(((e,t)=>{const r=(0,ft.Z)({},i.current);null!==t?r[e]=(0,ft.Z)({},t):delete r[e],T(r)}),[T]),R=t.useCallback(((t,r)=>{e.current.setState((e=>{const n=(0,ft.Z)({},e.editRows);return null!==r?n[t]=r:delete n[t],(0,ft.Z)({},e,{editRows:n})})),e.current.forceUpdate()}),[e]),k=t.useCallback(((t,r,n)=>{e.current.setState((e=>{const o=(0,ft.Z)({},e.editRows);return null!==n?o[t]=(0,ft.Z)({},o[t],{[r]:(0,ft.Z)({},n)}):(delete o[t][r],0===Object.keys(o[t]).length&&delete o[t]),(0,ft.Z)({},e,{editRows:o})})),e.current.forceUpdate()}),[e]),O=t.useCallback((e=>{const{id:t}=e,r=(0,pt.Z)(e,zC);m(t,DE.View),w(t,(0,ft.Z)({mode:DE.Edit},r))}),[m,w]),I=(0,Wn.Z)((t=>{const{id:r,fieldToFocus:n,deleteValue:o,initialValue:i}=t,s=nv(e).reduce(((t,s)=>{if(!e.current.getCellParams(r,s).isEditable)return t;let a=e.current.getCellValue(r,s);return n===s&&(o||i)&&(a=o?"":i),t[s]={value:a,error:!1,isProcessingProps:!1},t}),{});R(r,s),n&&e.current.setCellFocus(r,n)})),P=t.useCallback((e=>{const{id:t}=e,r=(0,pt.Z)(e,GC);m(t,DE.Edit),w(t,(0,ft.Z)({mode:DE.View},r))}),[m,w]),A=(0,Wn.Z)((t=>{const{id:r,ignoreModifications:n,field:o,cellToFocusAfter:i="none"}=t;e.current.unstable_runPendingEditCellValueMutation(r);const a=()=>{"none"!==i&&o&&e.current.unstable_moveFocusToRelativeCell(r,o,i),R(r,null),w(r,null)};if(n)return void a();const l=NC(e.current.state),d=e.current.getRow(r);if(Object.values(l[r]).some((e=>e.isProcessingProps)))return void(s.current[r].mode=DE.Edit);if(Object.values(l[r]).some((e=>e.error)))return s.current[r].mode=DE.Edit,void w(r,{mode:DE.Edit});const h=e.current.unstable_getRowWithUpdatedValuesFromRowEditing(r);if(c){const t=e=>{s.current[r].mode=DE.Edit,w(r,{mode:DE.Edit}),u?u(e):qC()};try{Promise.resolve(c(h,d)).then((t=>{e.current.updateRows([t]),a()})).catch(t)}catch(e){t(e)}}else e.current.updateRows([h]),a()})),N=t.useCallback((t=>{const{id:r,field:n,value:o,debounceMs:i,unstable_skipValueParser:s}=t;g(r,n);const a=e.current.getColumn(n),l=e.current.getRow(r);let c=o;a.valueParser&&!s&&(c=a.valueParser(o,e.current.getCellParams(r,n)));let u=NC(e.current.state),d=(0,ft.Z)({},u[r][n],{value:c,changeReason:i?"debouncedSetEditCellValue":"setEditCellValue"});return a.preProcessEditCellProps||k(r,n,d),new Promise((t=>{const o=[];if(a.preProcessEditCellProps){const i=d.value!==u[r][n].value;d=(0,ft.Z)({},d,{isProcessingProps:!0}),k(r,n,d);const s=u[r],h=(0,pt.Z)(s,[n].map(Z_)),p=Promise.resolve(a.preProcessEditCellProps({id:r,row:l,props:d,hasChanged:i,otherFieldsProps:h})).then((o=>{e.current.getRowMode(r)!==DE.View?(u=NC(e.current.state),(o=(0,ft.Z)({},o,{isProcessingProps:!1})).value=a.preProcessEditCellProps?u[r][n].value:c,k(r,n,o)):t(!1)}));o.push(p)}Object.entries(u[r]).forEach((([i,s])=>{if(i===n)return;const a=e.current.getColumn(i);if(!a.preProcessEditCellProps)return;s=(0,ft.Z)({},s,{isProcessingProps:!0}),k(r,i,s),u=NC(e.current.state);const c=u[r],d=(0,pt.Z)(c,[i].map(Z_)),h=Promise.resolve(a.preProcessEditCellProps({id:r,row:l,props:s,hasChanged:!1,otherFieldsProps:d})).then((n=>{e.current.getRowMode(r)!==DE.View?(n=(0,ft.Z)({},n,{isProcessingProps:!1}),k(r,i,n)):t(!1)}));o.push(h)})),Promise.all(o).then((()=>{e.current.getRowMode(r)===DE.Edit?(u=NC(e.current.state),t(!u[r][n].error)):t(!1)}))}))}),[e,g,k]),L=t.useCallback((t=>{const r=NC(e.current.state),n=e.current.getRow(t);let o=(0,ft.Z)({},n);return Object.entries(r[t]).forEach((([t,r])=>{const n=e.current.getColumn(t);n.valueSetter?o=n.valueSetter({value:r.value,row:o}):o[t]=r.value})),o}),[e]);O_(e,{getRowMode:C,startRowEditMode:O,stopRowEditMode:P,unstable_setRowEditingEditCellValue:N,unstable_getRowWithUpdatedValuesFromRowEditing:L}),t.useEffect((()=>{d&&T(d)}),[d,T]),t.useEffect((()=>{const t=Pv(e),r=s.current;s.current=S_(n),Object.entries(n).forEach((([e,n])=>{var o,i;const s=(null==(o=r[e])?void 0:o.mode)||DE.View,a=null!=(i=t[e])?i:e;n.mode===DE.Edit&&s===DE.View?I((0,ft.Z)({id:a},n)):n.mode===DE.View&&s===DE.Edit&&A((0,ft.Z)({id:a},n))}))}),[e,n,I,A])})(e,r);const n=t.useRef({}),{isCellEditable:o}=r,i=t.useCallback((e=>!e.rowNode.isAutoGenerated&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(o?o(e):!e.rowNode.isPinned)),[o]);t.useEffect((()=>{const e=n.current;return()=>{Object.entries(e).forEach((([t,r])=>{Object.keys(r).forEach((r=>{const[n]=e[t][r];clearTimeout(n),delete e[t][r]}))}))}}),[]);const s=t.useCallback(((e,t)=>{if(n.current[e])if(t){if(n.current[e][t]){const[,r]=n.current[e][t];r()}}else Object.keys(n.current[e]).forEach((t=>{const[,r]=n.current[e][t];r()}))}),[]),a=t.useCallback((t=>{const{id:o,field:i,debounceMs:s}=t;return new Promise((a=>{((e,t,r,o)=>{if(!r)return void o();if(n.current[e]||(n.current[e]={}),n.current[e][t]){const[r]=n.current[e][t];clearTimeout(r)}const i=setTimeout((()=>{o(),delete n.current[e][t]}),r);n.current[e][t]=[i,()=>{const[r]=n.current[e][t];clearTimeout(r),o(),delete n.current[e][t]}]})(o,i,s,(async()=>{const n=r.editMode===ME.Row?e.current.unstable_setRowEditingEditCellValue:e.current.unstable_setCellEditingEditCellValue;if(e.current.getCellMode(o,i)===xE.Edit){const e=await n(t);a(e)}}))}))}),[e,r.editMode]),l=t.useCallback(((t,n)=>r.editMode===ME.Cell?e.current.unstable_getRowWithUpdatedValuesFromCellEditing(t,n):e.current.unstable_getRowWithUpdatedValuesFromRowEditing(t)),[e,r.editMode]),c=t.useCallback(((t,r)=>({changeReason:NC(e.current.state)[t][r].changeReason})),[e]);O_(e,{isCellEditable:i,setEditCellValue:a,unstable_runPendingEditCellValueMutation:s,unstable_getRowWithUpdatedValues:l,unstable_getEditCellMeta:c})},YC=(e,t,r)=>(r.current.unstable_caches.rows=bC({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),(0,ft.Z)({},e,{rows:EC({apiRef:r,previousTree:null,rowCountProp:t.rowCount,loadingProp:t.loading})})),KC=({ids:e,idRowsLookup:t,idToIdLookup:r,previousTree:n})=>{const o={};for(let t=0;t<e.length;t+=1){const r=e[t];n&&n[r]&&0===n[r].depth&&null==n[r].parent&&!n[r].isPinned?o[r]=n[r]:o[r]={id:r,depth:0,parent:null,groupingKey:"",groupingField:null}}return{groupingName:j_,tree:o,treeDepth:1,idRowsLookup:t,idToIdLookup:r,ids:e}};function $C(e){return e.replace(/["\\]/g,"\\$&")}function QC(e){return`.${qm.row}[data-id="${$C(String(e))}"]`}Xm(["MUI: You are calling getValue. This method is deprecated and will be removed in the next major version.","Instead, you can access the data from `params.row`."]);const XC=(e,t)=>null==e||Array.isArray(e)?e:t&&t[0]===e?t:[e],JC=(e,t)=>{var r;return(0,ft.Z)({},e,{selection:null!=(r=XC(t.selectionModel))?r:[]})},eT=(e,t)=>{var r,n,o,i;const s=null!=(r=null!=(n=t.sortModel)?n:null==(o=t.initialState)||null==(i=o.sorting)?void 0:i.sortModel)?r:[];return(0,ft.Z)({},e,{sorting:{sortModel:Jy(s,t.disableMultipleColumnsSorting),sortedRows:[]}})};function tT(e){const{clientHeight:t,scrollTop:r,offsetHeight:n,offsetTop:o}=e,i=o+n;return n>t?o:i-t>r?i-t:o<r?o:void 0}const rT=e=>(0,ft.Z)({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),nT=e=>{var r,n;const o=z_(void 0,e);return((e,r)=>{var n;const o=t.useCallback((e=>{var t;if(null==(t=r.experimentalFeatures)||!t.columnGrouping)return e;const n=_S(r.columnGroupingModel);return e.all.forEach((t=>{var r,o;const i=null!=(r=n[t])?r:[],s=e.lookup[t];(function(e){return void 0!==e.groupPath})(s)&&E_(i,null==s?void 0:s.groupPath)||(e.lookup[t]=(0,ft.Z)({},e.lookup[t],{groupPath:null!=(o=n[t])?o:[]}))})),e}),[r.columnGroupingModel,null==(n=r.experimentalFeatures)?void 0:n.columnGrouping]);K_(e,"hydrateColumns",o)})(o,e),((e,r)=>{const n=(e=>{const{classes:r}=e;return t.useMemo((()=>(0,Et.Z)({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Gm,r)),[r])})({classes:r.classes}),o=t.useCallback((t=>{const o=(0,ft.Z)({},qS,{cellClassName:n.cellCheckbox,headerClassName:n.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),i=r.checkboxSelection,s=null!=t.lookup[GS];return i&&!s?(t.lookup[GS]=o,t.all=[GS,...t.all]):!i&&s?(delete t.lookup[GS],t.all=t.all.filter((e=>e!==GS))):i&&s&&(t.lookup[GS]=(0,ft.Z)({},o,t.lookup[GS])),t}),[e,n,r.checkboxSelection]);K_(e,"hydrateColumns",o)})(o,e),(e=>{oC(e,j_,"rowTreeCreation",KC)})(o),G_(JC,o,e),G_(hS,o,e),G_(bS,o,e),G_(YC,o,e),G_(null!=(r=e.experimentalFeatures)&&r.newEditingApi?VC:MC,o,e),G_(mC,o,e),G_(eT,o,e),G_(AC,o,e),G_(pC,o,e),G_(SS,o,e),G_(IC,o,e),G_(rT,o,e),G_(W_,o,e),((e,r)=>{const n=jv(e,"useGridKeyboardNavigation"),o=gC(e,r).rows,i=t.useMemo((()=>function(e,t){const r=Dv(e)||{};return[...r.top||[],...t,...r.bottom||[]]}(e,o)),[e,o]),s=t.useCallback(((t,r,o="left")=>{const i=o_(e),s=e.current.unstable_getCellColSpanInfo(r,t);s&&s.spannedByColSpan&&("left"===o?t=s.leftVisibleCellIndex:"right"===o&&(t=s.rightVisibleCellIndex));const a=i.findIndex((e=>e.id===r));n.debug(`Navigating to cell row ${a}, col ${t}`),e.current.scrollToIndexes({colIndex:t,rowIndex:a});const l=e.current.getVisibleColumns()[t].field;e.current.setCellFocus(r,l)}),[e,n]),a=t.useCallback(((t,r)=>{n.debug(`Navigating to header col ${t}`),e.current.scrollToIndexes({colIndex:t});const o=e.current.getVisibleColumns()[t].field;e.current.setColumnHeaderFocus(o,r)}),[e,n]),l=t.useCallback((e=>i[e].id),[i]),c=t.useCallback(((t,r)=>{const n=e.current.getRootDimensions();if(0===i.length||!n)return;const o=e.current.unstable_getViewportPageSize(),c=t.field?e.current.getColumnIndex(t.field):0,u=i.findIndex((e=>e.id===t.id)),d=i.length-1,h=av(e).length-1;let p=!0;switch(r.key){case"ArrowDown":case"Enter":u<d&&s(c,l(u+1));break;case"ArrowUp":u>0?s(c,l(u-1)):a(c,r);break;case"ArrowRight":c<h&&s(c+1,l(u),"right");break;case"ArrowLeft":c>0&&s(c-1,l(u));break;case"Tab":r.shiftKey&&c>0?s(c-1,l(u),"left"):!r.shiftKey&&c<h&&s(c+1,l(u),"right");break;case" ":{if(t.field===vC)break;const e=t.colDef;if(e&&"treeDataGroup"===e.type)break;!r.shiftKey&&u<d&&s(c,l(Math.min(u+o,d)));break}case"PageDown":u<d&&s(c,l(Math.min(u+o,d)));break;case"PageUp":{const e=Math.max(u-o,0);e!==u&&e>=0?s(c,l(e)):a(c,r);break}case"Home":r.ctrlKey||r.metaKey||r.shiftKey?s(0,l(0)):s(0,l(u));break;case"End":r.ctrlKey||r.metaKey||r.shiftKey?s(h,l(d)):s(h,l(u));break;default:p=!1}p&&r.preventDefault()}),[e,i,s,a,l]),u=t.useCallback(((t,r)=>{const n=r.currentTarget.querySelector(`.${qm.columnHeaderTitleContainerContent}`);if(n&&n.contains(r.target)&&t.field!==qS.field)return;if(!e.current.getRootDimensions())return;const o=e.current.unstable_getViewportPageSize(),c=t.field?e.current.getColumnIndex(t.field):0,u=i.length-1,d=av(e).length-1;let h=!0;switch(r.key){case"ArrowDown":s(c,l(0));break;case"ArrowRight":c<d&&a(c+1,r);break;case"ArrowLeft":c>0&&a(c-1,r);break;case"PageDown":null!==u&&s(c,l(Math.min(0+o,u)));break;case"Home":a(0,r);break;case"End":a(d,r);break;case"Enter":(r.ctrlKey||r.metaKey)&&e.current.toggleColumnMenu(t.field);break;case" ":break;default:h=!1}h&&r.preventDefault()}),[e,i,s,a,l]),d=t.useCallback(((t,r)=>{if(!r.currentTarget.contains(r.target))return;const n=e.current.getCellParams(t.id,t.field);n.cellMode!==xE.Edit&&NE(r.key)&&e.current.publishEvent("cellNavigationKeyDown",n,r)}),[e]);L_(e,"cellNavigationKeyDown",c),L_(e,"columnHeaderKeyDown",u),L_(e,"cellKeyDown",d)})(o,e),((e,r)=>{const n=jv(e,"useGridSelection"),o=t.useMemo((()=>XC(r.selectionModel,NS(e.current.state))),[e,r.selectionModel]),i=t.useRef(null);e.current.unstable_registerControlState({stateId:"selection",propModel:o,propOnChange:r.onSelectionModelChange,stateSelector:NS,changeEvent:"selectionChange"});const{checkboxSelection:s,disableMultipleSelection:a,disableSelectionOnClick:l,pagination:c,paginationMode:u,isRowSelectable:d}=r,h=!a||s,p=gC(e,r),f=t.useCallback((t=>{var r;let n=t;const o=null!=(r=i.current)?r:t,s=e.current.isRowSelected(t);if(s){const t=i_(e),r=t.findIndex((e=>e===o)),i=t.findIndex((e=>e===n));if(r===i)return;n=r>i?t[i+1]:t[i-1]}i.current=t,e.current.selectRowRange({startId:o,endId:n},!s)}),[e]),g=t.useCallback((t=>{NS(e.current.state)!==t&&(n.debug("Setting selection model"),e.current.setState((e=>(0,ft.Z)({},e,{selection:t}))),e.current.forceUpdate())}),[e,n]),m=t.useCallback((t=>NS(e.current.state).includes(t)),[e]),v=t.useCallback((t=>{if(d&&!d(e.current.getRowParams(t)))return!1;const r=e.current.getRowNode(t);return!("footer"===(null==r?void 0:r.position)||null!=r&&r.isPinned)}),[e,d]),_=t.useCallback((()=>MS(e)),[e]),y=t.useCallback(((t,r=!0,o=!1)=>{if(e.current.isRowSelectable(t))if(i.current=t,o)n.debug(`Setting selection for row ${t}`),e.current.setSelectionModel(r?[t]:[]);else{n.debug(`Toggling selection for row ${t}`);const o=NS(e.current.state).filter((e=>e!==t));r&&o.push(t),(o.length<2||h)&&e.current.setSelectionModel(o)}}),[e,n,h]),b=t.useCallback(((t,r=!0,o=!1)=>{n.debug("Setting selection for several rows");const i=t.filter((t=>e.current.isRowSelectable(t)));let s;if(o)s=r?i:[];else{const t=(0,ft.Z)({},xS(e));i.forEach((e=>{r?t[e]=e:delete t[e]})),s=Object.values(t)}(s.length<2||h)&&e.current.setSelectionModel(s)}),[e,n,h]),E=t.useCallback((({startId:t,endId:r},o=!0,i)=>{if(!e.current.getRow(t)||!e.current.getRow(r))return;n.debug(`Expanding selection from row ${t} to row ${r}`);const s=i_(e),a=s.indexOf(t),l=s.indexOf(r),[c,u]=a>l?[l,a]:[a,l],d=s.slice(c,u+1);e.current.selectRows(d,o,i)}),[e,n]);O_(e,{selectRow:y,selectRows:b,selectRowRange:E,setSelectionModel:g,getSelectedRows:_,isRowSelected:m,isRowSelectable:v});const S=t.useCallback((()=>{if(r.keepNonExistentRowsSelected)return;const t=NS(e.current.state),n=Iv(e),o=(0,ft.Z)({},xS(e));let i=!1;t.forEach((e=>{n[e]||(delete o[e],i=!0)})),i&&e.current.setSelectionModel(Object.values(o))}),[e,r.keepNonExistentRowsSelected]),C=t.useCallback(((t,r)=>{const n=r.metaKey||r.ctrlKey,o=!s&&!n&&!LE(r),i=!h||o,a=e.current.isRowSelected(t);i?e.current.selectRow(t,!!o||!a,!0):e.current.selectRow(t,!a,!1)}),[e,h,s]),T=t.useCallback(((t,r)=>{var n;if(l)return;const o=null==(n=r.target.closest(`.${qm.cell}`))?void 0:n.getAttribute("data-field");o!==qS.field&&o!==vC&&(o&&e.current.getColumn(o).type===tS||e.current.getRowNode(t.id).isPinned||(r.shiftKey&&(h||s)?f(t.id):C(t.id,r)))}),[l,h,s,e,f,C]),w=t.useCallback(((e,t)=>{var r;h&&t.shiftKey&&(null==(r=window.getSelection())||r.removeAllRanges())}),[h]),R=t.useCallback(((t,r)=>{r.nativeEvent.shiftKey?f(t.id):e.current.selectRow(t.id,t.value)}),[e,f]),k=t.useCallback((t=>{const n=r.checkboxSelectionVisibleOnly&&r.pagination?HS(e):i_(e);e.current.selectRows(n,t.value)}),[e,r.checkboxSelectionVisibleOnly,r.pagination]),O=t.useCallback(((t,r)=>{if(e.current.getCellMode(t.id,t.field)!==xE.Edit&&r.currentTarget.contains(r.target)){if(NE(r.key)&&r.shiftKey){const n=kS(e);if(n&&n.id!==t.id){r.preventDefault();const o=e.current.isRowSelected(n.id);if(!h)return void e.current.selectRow(n.id,!o,!0);const i=e.current.getRowIndexRelativeToVisibleRows(n.id),s=e.current.getRowIndexRelativeToVisibleRows(t.id);let a,l;i>s?o?(a=s,l=i-1):(a=s,l=i):o?(a=i+1,l=s):(a=i,l=s);const c=p.rows.slice(a,l+1).map((e=>e.id));return void e.current.selectRows(c,!o)}}if(" "===r.key&&r.shiftKey)return r.preventDefault(),void C(t.id,r);"a"===r.key.toLowerCase()&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),b(e.current.getAllRowIds(),!0))}}),[e,C,b,p.rows,h]);L_(e,"sortedRowsSet",S),L_(e,"rowClick",T),L_(e,"rowSelectionCheckboxChange",R),L_(e,"headerSelectionCheckboxChange",k),L_(e,"cellMouseDown",w),L_(e,"cellKeyDown",O),t.useEffect((()=>{void 0!==o&&e.current.setSelectionModel(o)}),[e,o]);const I=null!=o;t.useEffect((()=>{if(I)return;const t=NS(e.current.state);if(v){const r=t.filter((e=>v(e)));r.length<t.length&&e.current.setSelectionModel(r)}}),[e,v,I]),t.useEffect((()=>{const t=NS(e.current.state);if(!h&&t.length>1){const{rows:r}=fC(e,{pagination:c,paginationMode:u}),n=r.reduce(((e,{id:t})=>(e[t]=!0,e)),{}),o=t.find((e=>{let t=!0;return v&&(t=v(e)),t&&n[e]}));e.current.setSelectionModel(void 0!==o?[o]:[])}}),[e,h,s,a,v,c,u])})(o,e),function(e,r){var n,o;const i=jv(e,"useGridColumns"),s=t.useMemo((()=>iS(r.columnTypes)),[r.columnTypes]),a=t.useRef(r.columns),l=t.useRef(s);e.current.unstable_registerControlState({stateId:"visibleColumns",propModel:r.columnVisibilityModel,propOnChange:r.onColumnVisibilityModelChange,stateSelector:sv,changeEvent:"columnVisibilityModelChange"});const c=t.useCallback((t=>{i.debug("Updating columns state."),e.current.setState(lS(t)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",t.all)}),[i,e]),u=t.useCallback((t=>ov(e)[t]),[e]),d=t.useCallback((()=>iv(e)),[e]),h=t.useCallback((()=>av(e)),[e]),p=t.useCallback((()=>hv(e)),[e]),f=t.useCallback(((t,r=!0)=>(r?av(e):iv(e)).findIndex((e=>e.field===t))),[e]),g=t.useCallback((t=>{const r=f(t);return lv(e)[r]}),[e,f]),m=t.useCallback((t=>{sv(e)!==t&&(e.current.setState((r=>(0,ft.Z)({},r,{columns:aS({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!1,currentColumnVisibilityModel:t,keepOnlyColumnsToUpsert:!1})}))),e.current.forceUpdate())}),[e,s]),v=t.useCallback((t=>{const r=aS({apiRef:e,columnTypes:s,columnsToUpsert:t,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!0,keepOnlyColumnsToUpsert:!1});c(r)}),[e,c,s]),_=t.useCallback((t=>e.current.updateColumns([t])),[e]),y=t.useCallback(((t,r)=>{if(e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var n;const o=sv(e);if(r!==(null==(n=o[t])||n)){const n=(0,ft.Z)({},o,{[t]:r});e.current.setColumnVisibilityModel(n)}}else{const n=e.current.getColumn(t),o=(0,ft.Z)({},n,{hide:!r});e.current.updateColumns([o]);const i={field:t,colDef:o,isVisible:r};e.current.publishEvent("columnVisibilityChange",i)}}),[e]),b=t.useCallback(((t,r)=>{const n=nv(e),o=n.findIndex((e=>e===t));if(o===r)return;i.debug(`Moving column ${t} to index ${r}`);const s=[...n],a=s.splice(o,1)[0];s.splice(r,0,a),c((0,ft.Z)({},rv(e.current.state),{all:s}));const l={field:t,element:e.current.getColumnHeaderElement(t),colDef:e.current.getColumn(t),targetIndex:r,oldIndex:o};e.current.publishEvent("columnOrderChange",l)}),[e,i,c]),E=t.useCallback(((t,r)=>{i.debug(`Updating column ${t} width to ${r}`);const n=e.current.getColumn(t),o=(0,ft.Z)({},n,{width:r});e.current.updateColumns([o]),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(t),colDef:o,width:r})}),[e,i]);O_(e,{getColumn:u,getAllColumns:d,getColumnIndex:f,getColumnPosition:g,getVisibleColumns:h,getColumnsMeta:p,updateColumn:_,updateColumns:v,setColumnVisibilityModel:m,setColumnVisibility:y,setColumnIndex:b,setColumnWidth:E});const S=t.useCallback(((t,n)=>{const o={};if(e.current.unstable_caches.columns.isUsingColumnVisibilityModel){var i,s,a;const t=sv(e);(!n.exportOnlyDirtyModels||null!=r.columnVisibilityModel||Object.keys(null!=(i=null==(s=r.initialState)||null==(a=s.columns)?void 0:a.columnVisibilityModel)?i:{}).length>0||Object.keys(t).length>0)&&(o.columnVisibilityModel=t)}o.orderedFields=nv(e);const l=iv(e),c={};return l.forEach((e=>{if(e.hasBeenResized){const t={};oS.forEach((r=>{let n=e[r];n===1/0&&(n=-1),t[r]=n})),c[e.field]=t}})),Object.keys(c).length>0&&(o.dimensions=c),(0,ft.Z)({},t,{columns:o})}),[e,r.columnVisibilityModel,null==(n=r.initialState)?void 0:n.columns]),C=t.useCallback(((t,r)=>{var n;const o=e.current.unstable_caches.columns.isUsingColumnVisibilityModel?null==(n=r.stateToRestore.columns)?void 0:n.columnVisibilityModel:void 0,i=r.stateToRestore.columns;if(null==o&&null==i)return t;const a=aS({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:i,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,currentColumnVisibilityModel:o,keepOnlyColumnsToUpsert:!1});return e.current.setState(lS(a)),null!=i&&e.current.publishEvent("columnsChange",a.all),t}),[e,s]),T=t.useCallback(((e,t)=>{if(t===dS.columns){var n;const e=r.components.ColumnsPanel;return(0,Ot.jsx)(e,(0,ft.Z)({},null==(n=r.componentsProps)?void 0:n.columnsPanel))}return e}),[r.components.ColumnsPanel,null==(o=r.componentsProps)?void 0:o.columnsPanel]);K_(e,"exportState",S),K_(e,"restoreState",C),K_(e,"preferencePanel",T);const w=t.useRef(null);L_(e,"viewportInnerSizeChange",(t=>{w.current!==t.width&&(w.current=t.width,c(sS(rv(e.current.state),t.width)))})),x_(e,"columnVisibilityChange",r.onColumnVisibilityChange);const R=t.useCallback((()=>{i.info("Columns pipe processing have changed, regenerating the columns");const t=aS({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,keepOnlyColumnsToUpsert:!1});c(t)}),[e,i,c,s]);$_(e,"hydrateColumns",R);const k=t.useRef(!0);t.useEffect((()=>{if(k.current)return void(k.current=!1);if(i.info(`GridColumns have changed, new length ${r.columns.length}`),a.current===r.columns&&l.current===s)return;const t=aS({apiRef:e,columnTypes:s,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!e.current.unstable_caches.columns.isUsingColumnVisibilityModel,columnsToUpsert:r.columns,keepOnlyColumnsToUpsert:!0});a.current=r.columns,l.current=s,c(t)}),[i,e,c,r.columns,s]),t.useEffect((()=>{void 0!==r.columnVisibilityModel&&e.current.setColumnVisibilityModel(r.columnVisibilityModel)}),[e,i,r.columnVisibilityModel])}(o,e),((e,r)=>{const n=jv(e,"useGridRows"),o=gC(e,r),i=t.useRef(Date.now()),s=t.useRef(null),a=t.useCallback((t=>{var r;return null!=(r=Iv(e)[t])?r:null}),[e]),l=t.useMemo((()=>o.rows.reduce(((e,{id:t},r)=>(e[t]=r,e)),{})),[o.rows]),c=t.useCallback(((t,n)=>{const o=()=>{s.current=null,i.current=Date.now(),e.current.setState((t=>(0,ft.Z)({},t,{rows:EC({apiRef:e,previousTree:Av(e),rowCountProp:r.rowCount,loadingProp:r.loading})}))),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(s.current&&(clearTimeout(s.current),s.current=null),e.current.unstable_caches.rows=t,!n)return void o();const a=r.throttleRowsMs-(Date.now()-i.current);a>0?s.current=setTimeout(o,a):o()}),[r.throttleRowsMs,r.rowCount,r.loading,e]),u=t.useCallback((t=>{n.debug(`Updating all rows, new length ${t.length}`);const o=bC({rows:t,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),i=e.current.unstable_caches.rows;o.rowsBeforePartialUpdates=i.rowsBeforePartialUpdates,c(o,!0)}),[n,r.getRowId,r.loading,r.rowCount,c,e]),d=t.useCallback((t=>{if(r.signature===A_.DataGrid&&t.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));const n=new Map;t.forEach((e=>{const t=yC(e,r.getRowId,"A row was provided without id when calling updateRows():");n.has(t)?n.set(t,(0,ft.Z)({},n.get(t),e)):n.set(t,e)}));const o=[],i=e.current.unstable_caches.rows,s={rowsBeforePartialUpdates:i.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:i.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:i.rowCountPropBeforePartialUpdates,idRowsLookup:(0,ft.Z)({},i.idRowsLookup),idToIdLookup:(0,ft.Z)({},i.idToIdLookup),ids:[...i.ids]};n.forEach(((t,r)=>"delete"===t._action?(delete s.idRowsLookup[r],delete s.idToIdLookup[r],void o.push(r)):e.current.getRow(r)?void(s.idRowsLookup[r]=(0,ft.Z)({},e.current.getRow(r),t)):(s.idRowsLookup[r]=t,s.idToIdLookup[r]=r,void s.ids.push(r)))),o.length>0&&(s.ids=s.ids.filter((e=>!o.includes(e)))),c(s,!0)}),[r.signature,r.getRowId,c,e]),h=t.useCallback((()=>{const t=Mv(e),r=Iv(e);return new Map(t.map((e=>[e,r[e]])))}),[e]),p=t.useCallback((()=>Rv(e)),[e]),f=t.useCallback((()=>Mv(e)),[e]),g=t.useCallback((e=>l[e]),[l]),m=t.useCallback(((t,r)=>{const n=e.current.getRowNode(t);if(!n)throw new Error(`MUI: No row with id #${t} found`);const o=(0,ft.Z)({},n,{childrenExpanded:r});e.current.setState((e=>(0,ft.Z)({},e,{rows:(0,ft.Z)({},e.rows,{tree:(0,ft.Z)({},e.rows.tree,{[t]:o})})}))),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",o)}),[e]),v=t.useCallback((t=>{var r;return null!=(r=Av(e)[t])?r:null}),[e]),_=t.useCallback((({skipAutoGeneratedRows:t=!0,groupId:r,applySorting:n,applyFiltering:o})=>{const i=Av(e);let s;if(n){const n=i[r];if(!n)return[];const o=$v(e);s=[];const a=o.findIndex((e=>e===r))+1;for(let e=a;e<o.length&&i[o[e]].depth>n.depth;e+=1){const r=o[e],n=i[r];t&&n.isAutoGenerated||s.push(r)}}else s=SC(i,r,t);if(o){const t=n_(e);s=s.filter((e=>!1!==t[e]))}return s}),[e]),y={getRow:a,getRowModels:h,getRowsCount:p,getAllRowIds:f,setRows:u,setRowIndex:t.useCallback(((t,r)=>{const o=Mv(e),i=o.findIndex((e=>e===t));if(-1===i||i===r)return;n.debug(`Moving row ${t} to index ${r}`);const s=[...o];s.splice(r,0,s.splice(i,1)[0]),e.current.setState((e=>(0,ft.Z)({},e,{rows:(0,ft.Z)({},e.rows,{ids:s})}))),e.current.unstable_caches.rows.ids=s,e.current.publishEvent("rowsSet")}),[e,n]),updateRows:d,setRowChildrenExpansion:m,getRowNode:v,getRowIndexRelativeToVisibleRows:g,getRowGroupChildren:_,unstable_replaceRows:t.useCallback(((t,n)=>{if(r.signature===A_.DataGrid&&n.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0===n.length)return;const o=[...Mv(e)],i=Iv(e),s=Pv(e),a=Av(e),l=(0,ft.Z)({},i),c=(0,ft.Z)({},s),u=(0,ft.Z)({},a),d=n.map((e=>({id:yC(e,r.getRowId,"A row was provided without id when calling replaceRows()."),model:e})));d.forEach(((e,r)=>{const[n]=o.splice(t+r,1,e.id);delete l[n],delete c[n],delete u[n]})),d.forEach((e=>{const t={id:e.id,parent:null,depth:0,groupingKey:null,groupingField:null};l[e.id]=e.model,c[e.id]=e.id,u[e.id]=t})),e.current.unstable_caches.rows.idRowsLookup=l,e.current.unstable_caches.rows.idToIdLookup=c,e.current.unstable_caches.rows.ids=o,e.current.setState((e=>{const t={idRowsLookup:l,idToIdLookup:c,tree:u,ids:o};return(0,ft.Z)({},e,{rows:(0,ft.Z)({},e.rows,t,{groupingResponseBeforeRowHydration:(0,ft.Z)({},e.rows.groupingResponseBeforeRowHydration,t)})})})),e.current.publishEvent("rowsSet")}),[e,r.signature,r.getRowId])},b=t.useCallback((()=>{let t;n.info("Row grouping pre-processing have changed, regenerating the row tree"),t=e.current.unstable_caches.rows.rowsBeforePartialUpdates===r.rows?e.current.unstable_caches.rows:bC({rows:r.rows,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),c(t,!1)}),[n,e,r.rows,r.getRowId,r.loading,r.rowCount,c]),E=t.useCallback((e=>{"rowTreeCreation"===e&&b()}),[b]),S=t.useCallback((()=>{e.current.unstable_getActiveStrategy("rowTree")!==Nv(e)&&b()}),[e,b]);L_(e,"activeStrategyProcessorChange",E),L_(e,"strategyAvailabilityChange",S);const C=t.useCallback((()=>{e.current.setState((t=>(0,ft.Z)({},t,{rows:(0,ft.Z)({},t.rows,e.current.unstable_applyPipeProcessors("hydrateRows",t.rows.groupingResponseBeforeRowHydration))}))),e.current.publishEvent("rowsSet"),e.current.forceUpdate()}),[e]);$_(e,"hydrateRows",C),O_(e,y),t.useEffect((()=>()=>{null!==s.current&&clearTimeout(s.current)}),[]);const T=t.useRef(!0);t.useEffect((()=>{if(T.current)return void(T.current=!1);const t=e.current.unstable_caches.rows.rowsBeforePartialUpdates===r.rows,o=e.current.unstable_caches.rows.loadingPropBeforePartialUpdates===r.loading,i=e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates===r.rowCount;if(t)return o||(e.current.setState((e=>(0,ft.Z)({},e,{rows:(0,ft.Z)({},e.rows,{loading:r.loading})}))),e.current.unstable_caches.rows.loadingPropBeforePartialUpdates=r.loading,e.current.forceUpdate()),void(i||(e.current.setState((e=>(0,ft.Z)({},e,{rows:(0,ft.Z)({},e.rows,{totalRowCount:Math.max(r.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(r.rowCount||0,e.rows.totalTopLevelRowCount)})}))),e.current.unstable_caches.rows.rowCountPropBeforePartialUpdates=r.rowCount,e.current.forceUpdate()));n.debug(`Updating all rows, new length ${r.rows.length}`),c(bC({rows:r.rows,getRowId:r.getRowId,loading:r.loading,rowCount:r.rowCount}),!1)}),[r.rows,r.rowCount,r.getRowId,r.loading,n,c,e])})(o,e),function(e){const r=t.useCallback((t=>({field:t,colDef:e.current.getColumn(t)})),[e]),n=t.useCallback(((...t)=>e.current.getCellValue(...t)),[e]),o=t.useCallback((t=>{const r=e.current.getRow(t);if(!r)throw new Error(`No row with id #${t} found`);return{id:t,columns:e.current.getAllColumns(),row:r,getValue:n}}),[e,n]),i=t.useCallback(((t,r)=>{const o=e.current.getRow(t),i=e.current.getRowNode(t);if(!o||!i)throw new Error(`No row with id #${t} found`);const s=kS(e),a=PS(e);return{id:t,field:r,row:o,rowNode:i,value:o[r],colDef:e.current.getColumn(r),cellMode:e.current.getCellMode(t,r),getValue:n,api:e.current,hasFocus:null!==s&&s.field===r&&s.id===t,tabIndex:a&&a.field===r&&a.id===t?0:-1}}),[e,n]),s=t.useCallback(((t,r)=>{const o=e.current.getColumn(r),i=e.current.getCellValue(t,r),s=e.current.getRow(t),a=e.current.getRowNode(t);if(!s||!a)throw new Error(`No row with id #${t} found`);const l=kS(e),c=PS(e),u={id:t,field:r,row:s,rowNode:a,colDef:o,cellMode:e.current.getCellMode(t,r),getValue:n,hasFocus:null!==l&&l.field===r&&l.id===t,tabIndex:c&&c.field===r&&c.id===t?0:-1,value:i,formattedValue:i};return o&&o.valueFormatter&&(u.formattedValue=o.valueFormatter({id:t,field:u.field,value:u.value,api:e.current})),u.isEditable=o&&e.current.isCellEditable(u),u}),[e,n]),a=t.useCallback(((t,r)=>{const n=e.current.getColumn(r);if(!n||!n.valueGetter){const n=e.current.getRow(t);if(!n)throw new Error(`No row with id #${t} found`);return n[r]}return n.valueGetter(i(t,r))}),[e,i]),l=t.useCallback((t=>e.current.rootElementRef.current?function(e,t){return e.querySelector(`[role="columnheader"][data-field="${$C(t)}"]`)}(e.current.rootElementRef.current,t):null),[e]),c=t.useCallback((t=>e.current.rootElementRef.current?function(e,t){return e.querySelector(QC(t))}(e.current.rootElementRef.current,t):null),[e]),u=t.useCallback(((t,r)=>e.current.rootElementRef.current?function(e,{id:t,field:r}){const n=`${QC(t)} .${qm.cell}[data-field="${$C(r)}"]`;return e.querySelector(n)}(e.current.rootElementRef.current,{id:t,field:r}):null),[e]);O_(e,{getCellValue:a,getCellParams:s,getCellElement:u,getRowParams:o,getRowElement:c,getColumnHeaderParams:r,getColumnHeaderElement:l})}(o),(e=>{const r=t.useRef({}),n=t.useCallback(((e,t,n)=>{const o=r.current;o[e]||(o[e]={}),o[e][t]=n}),[]),o=t.useCallback(((e,t)=>{var n;return null==(n=r.current[e])?void 0:n[t]}),[]),i=t.useCallback((t=>{const{columnIndex:r,rowId:o,minFirstColumnIndex:i,maxLastColumnIndex:s,columns:a}=t,l=a.length,c=a[r],u="function"==typeof c.colSpan?c.colSpan(e.current.getCellParams(o,c.field)):c.colSpan;if(!u||1===u)return n(o,r,{spannedByColSpan:!1,cellProps:{colSpan:1,width:c.computedWidth}}),{colSpan:1};let d=c.computedWidth;for(let e=1;e<u;e+=1){const t=r+e;t>=i&&t<s&&(d+=a[t].computedWidth,n(o,r+e,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(r+u,l-1),leftVisibleCellIndex:r})),n(o,r,{spannedByColSpan:!1,cellProps:{colSpan:u,width:d}})}return{colSpan:u}}),[e,n]),s=t.useCallback((({rowId:e,minFirstColumn:t,maxLastColumn:r,columns:n})=>{for(let o=t;o<r;o+=1){const s=i({columnIndex:o,rowId:e,minFirstColumnIndex:t,maxLastColumnIndex:r,columns:n});s.colSpan>1&&(o+=s.colSpan-1)}}),[i]);O_(e,{unstable_getCellColSpanInfo:o,unstable_calculateColSpan:s});const a=t.useCallback((()=>{r.current={}}),[]);L_(e,"columnOrderChange",a)})(o),((e,r)=>{var n;const o=t.useCallback((t=>{var r,n;return null!=(r=null==(n=ov(e)[t])?void 0:n.groupPath)?r:[]}),[e]),i=t.useCallback((()=>gS(e)),[e]);O_(e,{unstable_getColumnGroupPath:o,unstable_getAllGroupDetails:i});const s=t.useRef(!0);t.useEffect((()=>{var t,n;if(s.current)return void(s.current=!1);if(null==(t=r.experimentalFeatures)||!t.columnGrouping)return;const o=yS(null!=(n=r.columnGroupingModel)?n:[]);e.current.setState((e=>(0,ft.Z)({},e,{columnGrouping:(0,ft.Z)({},e.columnGrouping,{lookup:o})})))}),[e,r.columnGroupingModel,null==(n=r.experimentalFeatures)?void 0:n.columnGrouping])})(o,e),(null!=(n=e.experimentalFeatures)&&n.newEditingApi?WC:xC)(o,e),((e,r)=>{const n=jv(e,"useGridFocus"),o=t.useRef(null),i=t.useCallback(((t,r)=>{t&&e.current.getRow(t.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(t.id,t.field),r)}),[e]),s=t.useCallback(((t,r)=>{const o=kS(e);(null==o?void 0:o.id)===t&&(null==o?void 0:o.field)===r||(e.current.setState((e=>(n.debug(`Focusing on cell with id=${t} and field=${r}`),(0,ft.Z)({},e,{tabIndex:{cell:{id:t,field:r},columnHeader:null},focus:{cell:{id:t,field:r},columnHeader:null}})))),e.current.forceUpdate(),e.current.getRow(t)&&(o&&i(o,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(t,r))))}),[e,n,i]),a=t.useCallback(((t,r={})=>{const o=kS(e);i(o,r),e.current.setState((e=>(n.debug(`Focusing on column header with colIndex=${t}`),(0,ft.Z)({},e,{tabIndex:{columnHeader:{field:t},cell:null},focus:{columnHeader:{field:t},cell:null}})))),e.current.forceUpdate()}),[e,n,i]),l=t.useCallback(((t,n,o)=>{let i=e.current.getColumnIndex(n),s=e.current.getRowIndexRelativeToVisibleRows(t);const a=av(e);"right"===o?i+=1:"left"===o?i-=1:s+=1;const l=fC(e,{pagination:r.pagination,paginationMode:r.paginationMode});i>=a.length?(s+=1,s<l.rows.length&&(i=0)):i<0&&(s-=1,s>=0&&(i=a.length-1)),s=b_(s,0,l.rows.length-1);const c=l.rows[s],u=e.current.unstable_getCellColSpanInfo(c.id,i);u&&u.spannedByColSpan&&("left"===o||"below"===o?i=u.leftVisibleCellIndex:"right"===o&&(i=u.rightVisibleCellIndex)),i=b_(i,0,a.length-1);const d=a[i];e.current.setCellFocus(c.id,d.field)}),[e,r.pagination,r.paginationMode]),c=t.useCallback((({id:t,field:r})=>{e.current.setCellFocus(t,r)}),[e]),u=t.useCallback(((t,r)=>{"Enter"===r.key||"Tab"===r.key||NE(r.key)||e.current.setCellFocus(t.id,t.field)}),[e]),d=t.useCallback((({field:t},r)=>{r.target===r.currentTarget&&e.current.setColumnHeaderFocus(t,r)}),[e]),h=t.useCallback((()=>{n.debug("Clearing focus"),e.current.setState((e=>(0,ft.Z)({},e,{focus:{cell:null,columnHeader:null}})))}),[n,e]),p=t.useCallback((e=>{o.current=e}),[]),f=t.useCallback((t=>{const r=o.current;o.current=null;const n=kS(e);if(!n)return void(r&&e.current.setCellFocus(r.id,r.field));if((null==r?void 0:r.id)===n.id&&(null==r?void 0:r.field)===n.field)return;const s=e.current.getCellElement(n.id,n.field);null!=s&&s.contains(t.target)||(r?e.current.setCellFocus(r.id,r.field):(e.current.setState((e=>(0,ft.Z)({},e,{focus:{cell:null,columnHeader:null}}))),e.current.forceUpdate(),i(n,t)))}),[e,i]),g=t.useCallback((t=>{if("view"===t.cellMode)return;const r=kS(e);(null==r?void 0:r.id)===t.id&&(null==r?void 0:r.field)===t.field||e.current.setCellFocus(t.id,t.field)}),[e]),m=t.useCallback((()=>{const t=kS(e);t&&!e.current.getRow(t.id)&&e.current.setState((e=>(0,ft.Z)({},e,{focus:{cell:null,columnHeader:null}})))}),[e]);O_(e,{setCellFocus:s,setColumnHeaderFocus:a,unstable_moveFocusToRelativeCell:l}),t.useEffect((()=>{const t=(0,Bs.Z)(e.current.rootElementRef.current);return t.addEventListener("click",f),()=>{t.removeEventListener("click",f)}}),[e,f]),L_(e,"columnHeaderBlur",h),L_(e,"cellDoubleClick",c),L_(e,"cellMouseDown",p),L_(e,"cellKeyDown",u),L_(e,"cellModeChange",g),L_(e,"columnHeaderFocus",d),L_(e,"rowsSet",m)})(o,e),((e,r)=>{var n;const o=jv(e,"useGridPreferencesPanel"),i=t.useRef(),s=t.useRef(),a=t.useCallback((()=>{o.debug("Hiding Preferences Panel");const t=PC(e.current.state);t.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:t.openedPanelValue}),e.current.setState((e=>(0,ft.Z)({},e,{preferencePanel:{open:!1}}))),e.current.forceUpdate()}),[e,o]),l=t.useCallback((()=>{s.current=setTimeout((()=>clearTimeout(i.current)),0)}),[]),c=t.useCallback((()=>{i.current=setTimeout(a,100)}),[a]),u=t.useCallback((t=>{o.debug("Opening Preferences Panel"),l(),e.current.setState((e=>(0,ft.Z)({},e,{preferencePanel:(0,ft.Z)({},e.preferencePanel,{open:!0,openedPanelValue:t})}))),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:t}),e.current.forceUpdate()}),[o,l,e]);O_(e,{showPreferences:u,hidePreferences:c});const d=t.useCallback(((t,n)=>{var o;const i=PC(e.current.state);return!n.exportOnlyDirtyModels||null!=(null==(o=r.initialState)?void 0:o.preferencePanel)||i.open?(0,ft.Z)({},t,{preferencePanel:i}):t}),[e,null==(n=r.initialState)?void 0:n.preferencePanel]),h=t.useCallback(((t,r)=>{const n=r.stateToRestore.preferencePanel;return null!=n&&e.current.setState((e=>(0,ft.Z)({},e,{preferencePanel:n}))),t}),[e]);K_(e,"exportState",d),K_(e,"restoreState",h),t.useEffect((()=>()=>{clearTimeout(i.current),clearTimeout(s.current)}),[])})(o,e),((e,r)=>{var n,o,i;const s=jv(e,"useGridFilter");e.current.unstable_registerControlState({stateId:"filter",propModel:r.filterModel,propOnChange:r.onFilterModelChange,stateSelector:t_,changeEvent:"filterModelChange"});const a=t.useCallback((()=>{e.current.setState((t=>{const n=t_(t,e.current.instanceId),o=r.filterMode===tC?((e,t)=>{const r=((e,t)=>{const{items:r}=e,n=r.map((e=>dC(e,t))).filter((e=>!!e));return 0===n.length?null:(e,t)=>{const r={};return(t?n.filter((e=>t(e.item.columnField))):n).forEach((t=>{r[t.item.id]=t.fn(e)})),r}})(e,t),n=((e,t)=>{const{quickFilterValues:r=[]}=e;if(0===r.length)return null;const n=nv(t),o={};n.forEach((e=>{const n=t.current.getColumn(e),i=null==n?void 0:n.getApplyQuickFilterFn;i&&(o[e]=r.map((e=>i(e,n,t))))}));const i=r.filter(((e,t)=>Object.keys(o).some((e=>null!=o[e][t]))));return 0===i.length?null:(e,r)=>{const n={},s=[];Object.keys(o).forEach((o=>{r&&!r(o)||(n[o]=t.current.getCellParams(e,o),s.push(o))}));const a={};return i.forEach(((e,t)=>{const r=s.some((e=>{var r,i;return null!=o[e][t]&&(null==(r=(i=o[e])[t])?void 0:r.call(i,n[e]))}));a[e]=r})),a}})(e,t);return(e,t)=>({passingFilterItems:r&&r(e,t),passingQuickFilterValues:n&&n(e,t)})})(n,e):null,i=e.current.unstable_applyStrategyProcessor("filtering",{isRowMatchingFilters:o,filterModel:null!=n?n:nC()});return(0,ft.Z)({},t,{filter:(0,ft.Z)({},t.filter,i)})})),e.current.publishEvent("filteredRowsSet")}),[r.filterMode,e]),l=t.useCallback((()=>{a(),e.current.forceUpdate()}),[e,a]),c=t.useCallback((t=>{const r=t_(e),n=[...r.items],o=n.findIndex((e=>e.id===t.id));-1===o?n.push(t):n[o]=t,e.current.setFilterModel((0,ft.Z)({},r,{items:n}),"upsertFilterItem")}),[e]),u=t.useCallback((t=>{const r=t_(e),n=[...r.items];t.forEach((e=>{const r=t.findIndex((t=>t.id===e.id));-1===r?n.push(e):n[r]=e})),e.current.setFilterModel((0,ft.Z)({},r,{items:t}),"upsertFilterItems")}),[e]),d=t.useCallback((t=>{const r=t_(e),n=r.items.filter((e=>e.id!==t.id));n.length!==r.items.length&&e.current.setFilterModel((0,ft.Z)({},r,{items:n}),"deleteFilterItem")}),[e]),h=t.useCallback((t=>{if(s.debug("Displaying filter panel"),t){const n=t_(e),o=n.items.filter((t=>{var r;if(void 0!==t.value)return!0;const n=null==(r=e.current.getColumn(t.columnField).filterOperators)?void 0:r.find((e=>e.value===t.operatorValue));return!(void 0===(null==n?void 0:n.requiresFilterValue)||(null==n?void 0:n.requiresFilterValue))}));let i;i=o.find((e=>e.columnField===t))?o:r.disableMultipleColumnsFiltering?[iC({columnField:t},e)]:[...o,iC({columnField:t},e)],e.current.setFilterModel((0,ft.Z)({},n,{items:i}))}e.current.showPreferences(dS.filters)}),[e,s,r.disableMultipleColumnsFiltering]),p=t.useCallback((()=>{s.debug("Hiding filter panel"),e.current.hidePreferences()}),[e,s]),f=t.useCallback((t=>{const r=t_(e);r.linkOperator!==t&&e.current.setFilterModel((0,ft.Z)({},r,{linkOperator:t}),"changeLogicOperator")}),[e]),g=t.useCallback((t=>{const r=t_(e);E_(r.quickFilterValues,t)||e.current.setFilterModel((0,ft.Z)({},r,{quickFilterValues:[...t]}))}),[e]),m=t.useCallback(((t,n)=>{t_(e)!==t&&(s.debug("Setting filter model"),e.current.unstable_updateControlState("filter",uC(t,r.disableMultipleColumnsFiltering,e),n),e.current.unstable_applyFilters())}),[e,s,r.disableMultipleColumnsFiltering]),v=t.useCallback((()=>{const t=o_(e);return new Map(t.map((e=>[e.id,e.model])))}),[e]);O_(e,{setFilterLinkOperator:f,unstable_applyFilters:l,deleteFilterItem:d,upsertFilterItem:c,upsertFilterItems:u,setFilterModel:m,showFilterPanel:h,hideFilterPanel:p,getVisibleRowModels:v,setQuickFilterValues:g});const _=t.useCallback(((t,n)=>{var o,i;const s=t_(e);return n.exportOnlyDirtyModels&&null==r.filterModel&&null==(null==(o=r.initialState)||null==(i=o.filter)?void 0:i.filterModel)&&E_(s,nC())?t:(0,ft.Z)({},t,{filter:{filterModel:s}})}),[e,r.filterModel,null==(n=r.initialState)||null==(o=n.filter)?void 0:o.filterModel]),y=t.useCallback(((t,n)=>{var o;const i=null==(o=n.stateToRestore.filter)?void 0:o.filterModel;return null==i?t:(e.current.unstable_updateControlState("filter",uC(i,r.disableMultipleColumnsFiltering,e),"restoreState"),(0,ft.Z)({},t,{callbacks:[...t.callbacks,e.current.unstable_applyFilters]}))}),[e,r.disableMultipleColumnsFiltering]),b=t.useCallback(((e,t)=>{if(t===dS.filters){var n;const e=r.components.FilterPanel;return(0,Ot.jsx)(e,(0,ft.Z)({},null==(n=r.componentsProps)?void 0:n.filterPanel))}return e}),[r.components.FilterPanel,null==(i=r.componentsProps)?void 0:i.filterPanel]),E=t.useCallback((t=>{if(r.filterMode===tC&&t.isRowMatchingFilters){const r=Mv(e),n={};for(let o=0;o<r.length;o+=1){const i=r[o];let s;if("string"==typeof i&&i.startsWith("auto-generated-group-footer"))s=!0;else{const{passingFilterItems:r,passingQuickFilterValues:n}=t.isRowMatchingFilters(i);s=hC([r],[n],t.filterModel,e)}n[i]=s}return{filteredRowsLookup:n,visibleRowsLookup:n,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}}),[e,r.filterMode]);K_(e,"exportState",_),K_(e,"restoreState",y),K_(e,"preferencePanel",b),oC(e,j_,"filtering",E);const S=t.useCallback((()=>{s.debug("onColUpdated - GridColumns changed, applying filters");const t=t_(e),r=dv(e),n=t.items.filter((e=>e.columnField&&r[e.columnField]));n.length<t.items.length&&e.current.setFilterModel((0,ft.Z)({},t,{items:n}))}),[e,s]),C=t.useCallback((t=>{"filtering"===t&&e.current.unstable_applyFilters()}),[e]);L_(e,"rowsSet",a),L_(e,"rowExpansionChange",e.current.unstable_applyFilters),L_(e,"columnsChange",S),L_(e,"activeStrategyProcessorChange",C),Y_((()=>{e.current.unstable_applyFilters()})),t.useEffect((()=>{void 0!==r.filterModel&&e.current.setFilterModel(r.filterModel)}),[e,s,r.filterModel])})(o,e),((e,r)=>{var n,o;const i=jv(e,"useGridSorting");e.current.unstable_registerControlState({stateId:"sortModel",propModel:r.sortModel,propOnChange:r.onSortModelChange,stateSelector:Xv,changeEvent:"sortModelChange"});const s=t.useCallback(((t,r)=>{const n=Xv(e),o=n.findIndex((e=>e.field===t));let i=[...n];return o>-1?r?i.splice(o,1,r):i.splice(o,1):i=[...n,r],i}),[e]),a=t.useCallback(((t,n)=>{var o;const i=Xv(e).find((e=>e.field===t.field));if(i){var s;const e=void 0===n?tb(null!=(s=t.sortingOrder)?s:r.sortingOrder,i.sort):n;return null==e?void 0:(0,ft.Z)({},i,{sort:e})}return{field:t.field,sort:void 0===n?tb(null!=(o=t.sortingOrder)?o:r.sortingOrder):n}}),[e,r.sortingOrder]),l=t.useCallback((()=>{e.current.setState((t=>{if("server"===r.sortingMode)return i.debug("Skipping sorting rows as sortingMode = server"),(0,ft.Z)({},t,{sorting:(0,ft.Z)({},t.sorting,{sortedRows:Mv(t,e.current.instanceId)})});const n=((e,t)=>{const r=e.map((e=>((e,t)=>{const r=t.current.getColumn(e.field);if(!r)return null;const n="desc"===e.sort?(...e)=>-1*r.sortComparator(...e):r.sortComparator;return{getSortCellParams:e=>({id:e,field:r.field,rowNode:t.current.getRowNode(e),value:t.current.getCellValue(e,r.field),api:t.current}),comparator:n}})(e,t))).filter((e=>!!e));return 0===r.length?null:e=>e.map((e=>({node:e,params:r.map((t=>t.getSortCellParams(e.id)))}))).sort(((e,t)=>{return n=e,o=t,r.reduce(((e,t,r)=>{if(0!==e)return e;const i=n.params[r],s=o.params[r];return t.comparator(i.value,s.value,i,s)}),0);var n,o})).map((e=>e.node.id))})(Xv(t,e.current.instanceId),e),o=e.current.unstable_applyStrategyProcessor("sorting",{sortRowList:n});return(0,ft.Z)({},t,{sorting:(0,ft.Z)({},t.sorting,{sortedRows:o})})})),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()}),[e,i,r.sortingMode]),c=t.useCallback((t=>{Xv(e)!==t&&(i.debug("Setting sort model"),e.current.setState(eb(t,r.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())}),[e,i,r.disableMultipleColumnsSorting]),u=t.useCallback(((t,n,o)=>{if(!t.sortable)return;const i=a(t,n);let l;l=!o||r.disableMultipleColumnsSorting?i?[i]:[]:s(t.field,i),e.current.setSortModel(l)}),[e,s,a,r.disableMultipleColumnsSorting]),d=t.useCallback((()=>Xv(e)),[e]),h=t.useCallback((()=>Qv(e).map((e=>e.model))),[e]),p=t.useCallback((()=>$v(e)),[e]),f=t.useCallback((t=>e.current.getSortedRowIds().indexOf(t)),[e]),g=t.useCallback((t=>e.current.getSortedRowIds()[t]),[e]);O_(e,{getSortModel:d,getSortedRows:h,getSortedRowIds:p,getRowIndex:f,getRowIdFromRowIndex:g,setSortModel:c,sortColumn:u,applySorting:l});const m=t.useCallback(((t,n)=>{var o,i;const s=Xv(e);return!n.exportOnlyDirtyModels||null!=r.sortModel||null!=(null==(o=r.initialState)||null==(i=o.sorting)?void 0:i.sortModel)||s.length>0?(0,ft.Z)({},t,{sorting:{sortModel:s}}):t}),[e,r.sortModel,null==(n=r.initialState)||null==(o=n.sorting)?void 0:o.sortModel]),v=t.useCallback(((t,n)=>{var o;const i=null==(o=n.stateToRestore.sorting)?void 0:o.sortModel;return null==i?t:(e.current.setState(eb(i,r.disableMultipleColumnsSorting)),(0,ft.Z)({},t,{callbacks:[...t.callbacks,e.current.applySorting]}))}),[e,r.disableMultipleColumnsSorting]),_=t.useCallback((t=>{const r=Av(e);if(!t.sortRowList){const t=[],n=[];return Mv(e).forEach((e=>{r[e].isPinned||("footer"===r[e].position?n.push(e):t.push(e))})),[...t,...n]}const n=[],o=[];return Object.values(r).forEach((e=>{e.isPinned||("footer"===e.position?o.push(e.id):n.push(e))})),[...t.sortRowList(n),...o]}),[e]);K_(e,"exportState",m),K_(e,"restoreState",v),oC(e,j_,"sorting",_);const y=t.useCallback((({colDef:e},t)=>{const r=t.shiftKey||t.metaKey||t.ctrlKey;u(e,void 0,r)}),[u]),b=t.useCallback((({colDef:e},t)=>{!TE(t.key)||t.ctrlKey||t.metaKey||u(e,void 0,t.shiftKey)}),[u]),E=t.useCallback((()=>{const t=Xv(e),r=ov(e);if(t.length>0){const n=t.filter((e=>r[e.field]));n.length<t.length&&e.current.setSortModel(n)}}),[e]),S=t.useCallback((t=>{"sorting"===t&&e.current.applySorting()}),[e]);L_(e,"columnHeaderClick",y),L_(e,"columnHeaderKeyDown",b),L_(e,"rowsSet",e.current.applySorting),L_(e,"columnsChange",E),L_(e,"activeStrategyProcessorChange",S),Y_((()=>{e.current.applySorting()})),t.useEffect((()=>{void 0!==r.sortModel&&e.current.setSortModel(r.sortModel)}),[e,r.sortModel])})(o,e),((e,r)=>{const n=pv(e,av),o=n.length>0?Math.max(...n.map((e=>{var t,r;return null!=(t=null==(r=e.groupPath)?void 0:r.length)?t:0}))):0,i=jv(e,"useDensity"),s=t.useCallback(((t,n=r.headerHeight,s=r.rowHeight,a=o)=>{i.debug(`Set grid density to ${t}`),e.current.setState((e=>{const r=_v(e),o=ES(t,n,s,a);return E_(r,o)?e:(0,ft.Z)({},e,{density:o})})),e.current.forceUpdate()}),[i,e,r.headerHeight,r.rowHeight,o]);t.useEffect((()=>{e.current.setDensity(r.density,r.headerHeight,r.rowHeight,o)}),[e,r.density,r.rowHeight,r.headerHeight,o]),O_(e,{setDensity:s})})(o,e),((e,r)=>{((e,r)=>{var n,o;const i=jv(e,"useGridPageSize"),s=pv(e,bv);e.current.unstable_registerControlState({stateId:"pageSize",propModel:r.pageSize,propOnChange:r.onPageSizeChange,stateSelector:US,changeEvent:"pageSizeChange"});const a=t.useCallback((t=>{t!==US(e)&&(i.debug(`Setting page size to ${t}`),e.current.setState(wC(t)),e.current.forceUpdate())}),[e,i]);O_(e,{setPageSize:a});const l=t.useCallback(((t,n)=>{var o,i;const s=US(e);return n.exportOnlyDirtyModels&&null==r.pageSize&&null==(null==(o=r.initialState)||null==(i=o.pagination)?void 0:i.pageSize)&&s===TC(r.autoPageSize)?t:(0,ft.Z)({},t,{pagination:(0,ft.Z)({},t.pagination,{pageSize:s})})}),[e,r.pageSize,null==(n=r.initialState)||null==(o=n.pagination)?void 0:o.pageSize,r.autoPageSize]),c=t.useCallback(((t,r)=>{var n;const o=null==(n=r.stateToRestore.pagination)?void 0:n.pageSize;return null!=o&&e.current.setState(wC(o)),t}),[e]);K_(e,"exportState",l),K_(e,"restoreState",c);const u=t.useCallback((()=>{const t=e.current.getRootDimensions();if(!r.autoPageSize||!t)return;const n=CC(e),o=Math.floor((t.viewportInnerSize.height-n.top-n.bottom)/s);e.current.setPageSize(o)}),[e,r.autoPageSize,s]);L_(e,"viewportInnerSizeChange",u),t.useEffect((()=>{null==r.pageSize||r.autoPageSize||e.current.setPageSize(r.pageSize)}),[e,r.autoPageSize,r.pageSize]),t.useEffect((()=>{u()}),[u])})(e,r),((e,r)=>{var n,o;const i=jv(e,"useGridPage"),s=pv(e,u_);e.current.unstable_registerControlState({stateId:"page",propModel:r.page,propOnChange:r.onPageChange,stateSelector:BS,changeEvent:"pageChange"});const a=t.useCallback((t=>{i.debug(`Setting page to ${t}`),e.current.setState(OC(t)),e.current.forceUpdate()}),[e,i]);O_(e,{setPage:a});const l=t.useCallback(((t,n)=>{var o,i;const s=BS(e);return n.exportOnlyDirtyModels&&null==r.page&&null==(null==(o=r.initialState)||null==(i=o.pagination)?void 0:i.page)&&0===s?t:(0,ft.Z)({},t,{pagination:(0,ft.Z)({},t.pagination,{page:s})})}),[e,r.page,null==(n=r.initialState)||null==(o=n.pagination)?void 0:o.page]),c=t.useCallback(((t,r)=>{var n,o;const i=null!=(n=null==(o=r.stateToRestore.pagination)?void 0:o.page)?n:BS(e);return e.current.setState(OC(i)),t}),[e]);K_(e,"exportState",l),K_(e,"restoreState",c),L_(e,"pageSizeChange",(t=>{e.current.setState((e=>{const r=RC(e.pagination.rowCount,t);return(0,ft.Z)({},e,{pagination:kC((0,ft.Z)({},e.pagination,{pageCount:r,page:e.pagination.page}))})})),e.current.forceUpdate()})),L_(e,"pageChange",(()=>e.current.scrollToIndexes({rowIndex:BS(e)*US(e)}))),t.useEffect((()=>{}),[r.rowCount,r.paginationMode]),t.useEffect((()=>{e.current.setState((e=>{const t=void 0!==r.rowCount?r.rowCount:s,n=RC(t,e.pagination.pageSize),o=null==r.page?e.pagination.page:r.page;return(0,ft.Z)({},e,{pagination:kC((0,ft.Z)({},e.pagination,{page:o,rowCount:t,pageCount:n}))})})),e.current.forceUpdate()}),[s,r.rowCount,r.page,r.paginationMode,e])})(e,r)})(o,e),((e,r)=>{const{getRowHeight:n,getRowSpacing:o,getEstimatedRowHeight:i}=r,s=t.useRef({}),a=t.useRef(-1),l=t.useRef(!1),c=pv(e,bv),u=pv(e,e_),d=pv(e,DS),h=pv(e,Kv),p=gC(e,r),f=pv(e,Dv),g=t.useCallback((()=>{var t,r;l.current=!1;const u=Cv(e.current.state,e.current.instanceId),d=t=>{s.current[t.id]||(s.current[t.id]={sizes:{baseCenter:c},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:r,needsFirstMeasurement:a,sizes:d}=s.current[t.id];let h=c;const f=d.baseCenter;if(r)h=f;else if(n){const e=n((0,ft.Z)({},t,{densityFactor:u}));if("auto"===e){if(a){const e=i?i((0,ft.Z)({},t,{densityFactor:u})):c;h=null!=e?e:c}else h=f;l.current=!0,s.current[t.id].autoHeight=!0}else h=null!=e?e:c,s.current[t.id].needsFirstMeasurement=!1,s.current[t.id].autoHeight=!1}else s.current[t.id].needsFirstMeasurement=!1;const g=Object.entries(d).reduce(((e,[t,r])=>(/^base[A-Z]/.test(t)&&(e[t]=r),e)),{}),m=(0,ft.Z)({},g,{baseCenter:h});if(o){var v,_;const r=e.current.getRowIndexRelativeToVisibleRows(t.id),n=o((0,ft.Z)({},t,{isFirstVisible:0===r,isLastVisible:r===p.rows.length-1,indexRelativeToCurrentPage:r}));m.spacingTop=null!=(v=n.top)?v:0,m.spacingBottom=null!=(_=n.bottom)?_:0}const y=e.current.unstable_applyPipeProcessors("rowHeight",m,t);return s.current[t.id].sizes=y,y},h=[],g=p.rows.reduce(((e,t)=>{h.push(e);let r=0,n=0;const o=d(t);return Object.entries(o).forEach((([e,t])=>{/^base[A-Z]/.test(e)?r=t>r?t:r:n+=t})),e+r+n}),0);null==f||null==(t=f.top)||t.forEach((e=>{d(e)})),null==f||null==(r=f.bottom)||r.forEach((e=>{d(e)})),e.current.setState((e=>(0,ft.Z)({},e,{rowsMeta:{currentPageTotalHeight:g,positions:h}}))),l.current||(a.current=1/0),e.current.forceUpdate()}),[e,p.rows,c,n,o,i,f]),m=t.useCallback((e=>{const t=s.current[e];return t?t.sizes.baseCenter:c}),[c]),v=t.useCallback(((e,t)=>{s.current[e].sizes.baseCenter=t,s.current[e].isResized=!0,s.current[e].needsFirstMeasurement=!1,g()}),[g]),_=t.useMemo((()=>(0,Xs.Z)(g)),[g]),y=t.useCallback(((e,t,r)=>{if(!s.current[e]||!s.current[e].autoHeight)return;const n=s.current[e].sizes[`base${(0,Tt.Z)(r)}`]!==t;s.current[e].needsFirstMeasurement=!1,s.current[e].sizes[`base${(0,Tt.Z)(r)}`]=t,n&&_()}),[_]),b=t.useCallback((e=>{var t;return(null==(t=s.current[e])?void 0:t.autoHeight)||!1}),[]),E=t.useCallback((()=>a.current),[]),S=t.useCallback((e=>{l.current&&e>a.current&&(a.current=e)}),[]),C=t.useCallback((()=>{s.current={},g()}),[g]);t.useEffect((()=>{g()}),[c,u,d,h,g]),$_(e,"rowHeight",g),O_(e,{unstable_getLastMeasuredRowIndex:E,unstable_setLastMeasuredRowIndex:S,unstable_rowHasAutoHeight:b,unstable_getRowHeight:m,unstable_getRowInternalSizes:e=>{var t;return null==(t=s.current[e])?void 0:t.sizes},unstable_setRowHeight:v,unstable_storeRowHeightMeasurement:y,resetRowHeights:C})})(o,e),((e,r)=>{const n=jv(e,"useGridScroll"),o=e.current.columnHeadersElementRef,i=e.current.windowRef,s=pv(e,o_),a=t.useCallback((t=>{const o=Rv(e),a=av(e);if(null!=t.rowIndex&&0===o||0===a.length)return!1;n.debug(`Scrolling to cell at row ${t.rowIndex}, col: ${t.colIndex} `);let l={};if(null!=t.colIndex){const r=lv(e);let n;if(void 0!==t.rowIndex){var c;const r=null==(c=s[t.rowIndex])?void 0:c.id,o=e.current.unstable_getCellColSpanInfo(r,t.colIndex);o&&!o.spannedByColSpan&&(n=o.cellProps.width)}void 0===n&&(n=a[t.colIndex].computedWidth),l.left=tT({clientHeight:i.current.clientWidth,scrollTop:i.current.scrollLeft,offsetHeight:n,offsetTop:r[t.colIndex]})}if(null!=t.rowIndex){var u,d;const n=eC(e.current.state),o=BS(e),s=US(e),a=r.pagination?t.rowIndex-o*s:t.rowIndex,c=n.positions[a+1]?n.positions[a+1]-n.positions[a]:n.currentPageTotalHeight-n.positions[a],h=(null==(u=i.current.querySelector(`.${qm["pinnedRows--top"]}`))?void 0:u.clientHeight)||0,p=(null==(d=i.current.querySelector(`.${qm["pinnedRows--bottom"]}`))?void 0:d.clientHeight)||0;l.top=tT({clientHeight:i.current.clientHeight-h-p,scrollTop:i.current.scrollTop,offsetHeight:c,offsetTop:n.positions[a]})}return l=e.current.unstable_applyPipeProcessors("scrollToIndexes",l,t),(void 0!==typeof l.left||void 0!==typeof l.top)&&(e.current.scroll(l),!0)}),[n,e,i,r.pagination,s]),l=t.useCallback((e=>{i.current&&null!=e.left&&o.current&&(o.current.scrollLeft=e.left,i.current.scrollLeft=e.left,n.debug(`Scrolling left: ${e.left}`)),i.current&&null!=e.top&&(i.current.scrollTop=e.top,n.debug(`Scrolling top: ${e.top}`)),n.debug("Scrolling, updating container, and viewport")}),[i,o,n]),c=t.useCallback((()=>null!=i&&i.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0}),[i]);O_(e,{scroll:l,scrollToIndexes:a,getScrollPosition:c})})(o,e),(e=>{const r=jv(e,"useGridColumnMenu"),n=t.useCallback((t=>{e.current.setState((e=>e.columnMenu.open&&e.columnMenu.field===t?e:(r.debug("Opening Column Menu"),(0,ft.Z)({},e,{columnMenu:{open:!0,field:t}}))))&&(e.current.hidePreferences(),e.current.forceUpdate())}),[e,r]),o=t.useCallback((()=>{e.current.setState((e=>e.columnMenu.open||void 0!==e.columnMenu.field?(r.debug("Hiding Column Menu"),(0,ft.Z)({},e,{columnMenu:(0,ft.Z)({},e.columnMenu,{open:!1,field:void 0})})):e))&&e.current.forceUpdate()}),[e,r]),i=t.useCallback((t=>{r.debug("Toggle Column Menu");const i=V_(e.current.state);i.open&&i.field===t?o():n(t)}),[e,r,n,o]);O_(e,{showColumnMenu:n,hideColumnMenu:o,toggleColumnMenu:i});const s=t.useCallback(((t,r)=>{if(!r.target.classList.contains(qm.menuIconButton))return;if(!r.relatedTarget)return;const n=r.relatedTarget.classList.contains(qm.menuList),o="menuitem"===r.relatedTarget.getAttribute("role");(n||o)&&e.current.setColumnHeaderFocus(t.field)}),[e]);L_(e,"columnResizeStart",o),L_(e,"columnHeaderFocus",s),L_(e,"virtualScrollerWheel",e.current.hideColumnMenu),L_(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)})(o),JS(o),((e,r)=>{const n=jv(e,"useGridPrintExport"),o=t.useRef(null),i=t.useRef(null),s=t.useRef({});t.useEffect((()=>{o.current=(0,Bs.Z)(e.current.rootElementRef.current)}),[e]);const a=t.useCallback(((t,r)=>new Promise((n=>{if(!t&&!r)return void n();const o=WS({apiRef:e,options:{fields:t,allColumns:r}}).map((e=>e.field)),i=iv(e),s={};i.forEach((e=>{s[e.field]=o.includes(e.field)})),e.current.setColumnVisibilityModel(s),n()}))),[e]),l=t.useCallback((e=>{const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}),[]),c=t.useCallback(((t,r)=>{var n,i;const s=(0,ft.Z)({copyStyles:!0,hideToolbar:!1,hideFooter:!1},r),a=t.contentDocument;if(!a)return;const l=Tv(e),c=eC(e.current.state),u=e.current.rootElementRef.current,d=u.cloneNode(!0),h=d.querySelector(`.${qm.virtualScroller}`);h.style.height="auto",h.style.width="auto",h.parentElement.style.width="auto",h.parentElement.style.height="auto",d.querySelector(`.${qm.main}`).style.overflow="visible";const p=function(){const e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):null}();p&&p>=108&&(d.style.contain="size"),d.querySelector(`.${qm.columnHeaders}`).querySelector(`.${qm.columnHeadersInner}`).style.width="100%";let f=(null==(n=u.querySelector(`.${qm.toolbarContainer}`))?void 0:n.clientHeight)||0,g=(null==(i=u.querySelector(`.${qm.footerContainer}`))?void 0:i.clientHeight)||0;var m,v;s.hideToolbar&&(null==(m=d.querySelector(`.${qm.toolbarContainer}`))||m.remove(),f=0),s.hideFooter&&(null==(v=d.querySelector(`.${qm.footerContainer}`))||v.remove(),g=0),d.style.height=`${c.currentPageTotalHeight+l+f+g}px`;const _=document.createElement("div");_.appendChild(d),a.body.innerHTML=_.innerHTML;const y="function"==typeof s.pageStyle?s.pageStyle():s.pageStyle;if("string"==typeof y){const e=a.createElement("style");e.appendChild(a.createTextNode(y)),a.head.appendChild(e)}if(s.bodyClassName&&a.body.classList.add(...s.bodyClassName.split(" ")),s.copyStyles){const e=o.current.querySelectorAll("style, link[rel='stylesheet']");for(let t=0;t<e.length;t+=1){const r=e[t];if("STYLE"===r.tagName){const e=a.createElement(r.tagName),t=r.sheet;if(t){let r="";for(let e=0;e<t.cssRules.length;e+=1)"string"==typeof t.cssRules[e].cssText&&(r+=`${t.cssRules[e].cssText}\r\n`);e.appendChild(a.createTextNode(r)),a.head.appendChild(e)}}else if(r.getAttribute("href")){const e=a.createElement(r.tagName);for(let t=0;t<r.attributes.length;t+=1){const n=r.attributes[t];n&&e.setAttribute(n.nodeName,n.nodeValue||"")}a.head.appendChild(e)}}}t.contentWindow.print()}),[e,o]),u=t.useCallback((t=>{var r,n;o.current.body.removeChild(t),e.current.restoreState(i.current||{}),null!=(r=i.current)&&null!=(n=r.columns)&&n.columnVisibilityModel||e.current.setColumnVisibilityModel(s.current),e.current.unstable_enableVirtualization(),i.current=null,s.current={}}),[e]),d=t.useCallback((async t=>{if(n.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");if(i.current=e.current.exportState(),s.current=sv(e),r.pagination){const t=c_(e);e.current.setPageSize(t)}await a(null==t?void 0:t.fields,null==t?void 0:t.allColumns),e.current.unstable_disableVirtualization(),await new Promise((e=>{requestAnimationFrame((()=>{e()}))}));const d=l(null==t?void 0:t.fileName);d.onload=()=>{c(d,t),d.contentWindow.matchMedia("print").addEventListener("change",(e=>{!1===e.matches&&u(d)}))},o.current.body.appendChild(d)}),[r,n,e,l,c,u,a]);O_(e,{exportDataAsPrint:d});const h=t.useCallback(((e,t)=>{var r;return null!=(r=t.printOptions)&&r.disableToolbarButton?e:[...e,{component:(0,Ot.jsx)(XS,{options:t.printOptions}),componentName:"printExport"}]}),[]);K_(e,"exportMenu",h)})(o,e),(e=>{const r=t.useCallback(((t=!1)=>{if(0===e.current.getSelectedRows().size)return;const r=e.current.getDataAsCsv({includeHeaders:t,delimiter:"\t"});navigator.clipboard?navigator.clipboard.writeText(r).catch((()=>{q_(r)})):q_(r)}),[e]),n=t.useCallback((t=>{const r=t.ctrlKey||t.metaKey||t.altKey;var n,o;"C"===String.fromCharCode(t.keyCode)&&r&&(n=t.target,""!==(null==(o=window.getSelection())?void 0:o.toString())||n&&(n.selectionEnd||0)-(n.selectionStart||0)>0||e.current.unstable_copySelectedRowsToClipboard(t.altKey))}),[e]);((e,r,n,o,i)=>{const s=jv(e,"useNativeEventListener"),[a,l]=t.useState(!1),c=t.useRef(o),u=t.useCallback((e=>c.current&&c.current(e)),[]);t.useEffect((()=>{c.current=o}),[o]),t.useEffect((()=>{let t;if(t=__(r)?r():r&&r.current?r.current:null,t&&n&&!a){s.debug(`Binding native ${n} event`),t.addEventListener(n,u,i);const r=t;l(!0);const o=()=>{s.debug(`Clearing native ${n} event`),r.removeEventListener(n,u,i)};e.current.subscribeEvent("unmount",o)}}),[r,u,n,a,s,i,e])})(e,e.current.rootElementRef,"keydown",n),O_(e,{unstable_copySelectedRowsToClipboard:r})})(o),function(e,r){const n=jv(e,"useResizeContainer"),o=t.useRef(!1),i=t.useRef(null),s=t.useRef(null),a=pv(e,eC),l=pv(e,Tv),c=t.useCallback((()=>{var t;const n=null==(t=e.current.rootElementRef)?void 0:t.current,o=cv(e),c=CC(e);if(!i.current)return;let u,d,h,p;if(null!=r.scrollbarSize)u=r.scrollbarSize;else if(o&&n){const e=(0,Bs.Z)(n).createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.overflow="scroll",e.className="scrollDiv",n.appendChild(e),u=e.offsetWidth-e.clientWidth,n.removeChild(e)}else u=0;if(r.autoHeight)p=!1,h=Math.round(o)>i.current.width,d={width:i.current.width,height:a.currentPageTotalHeight+(h?u:0)};else{d={width:i.current.width,height:i.current.height-l};const e=(({content:e,container:t,scrollBarSize:r})=>{const n=e.width>t.width,o=e.height>t.height;let i=!1,s=!1;return(n||o)&&(i=n,s=e.height+(i?r:0)>t.height,s&&(i=e.width+r>t.width)),{hasScrollX:i,hasScrollY:s}})({content:{width:Math.round(o),height:a.currentPageTotalHeight},container:{width:d.width,height:d.height-c.top-c.bottom},scrollBarSize:u});p=e.hasScrollY,h=e.hasScrollX}const f={viewportOuterSize:d,viewportInnerSize:{width:d.width-(p?u:0),height:d.height-(h?u:0)},hasScrollX:h,hasScrollY:p,scrollBarSize:u},g=s.current;s.current=f,f.viewportInnerSize.width===(null==g?void 0:g.viewportInnerSize.width)&&f.viewportInnerSize.height===(null==g?void 0:g.viewportInnerSize.height)||e.current.publishEvent("viewportInnerSizeChange",f.viewportInnerSize)}),[e,r.scrollbarSize,r.autoHeight,l,a.currentPageTotalHeight]),u=t.useCallback((()=>{c(),e.current.publishEvent("debouncedResize",i.current)}),[e,c]),d=t.useCallback((()=>s.current),[]),h=t.useCallback((()=>{const t=e.current.getRootDimensions();if(!t)return 0;const n=fC(e,{pagination:r.pagination,paginationMode:r.paginationMode});if(r.getRowHeight){const t=e.current.unstable_getRenderContext(),r=t.lastRowIndex-t.firstRowIndex;return Math.min(r-1,n.rows.length)}const o=Math.floor(t.viewportInnerSize.height/bv(e));return Math.min(o,n.rows.length)}),[e,r.pagination,r.paginationMode,r.getRowHeight]);O_(e,{resize:u,getRootDimensions:d,unstable_getViewportPageSize:h,unstable_updateGridDimensionsRef:c});const p=t.useMemo((()=>(0,Xs.Z)(u,60)),[u]),f=t.useRef(!0),g=t.useCallback((e=>{i.current=e;const t=/jsdom/.test(window.navigator.userAgent);if(0!==e.height||o.current||r.autoHeight||t||(n.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),o.current=!0),0!==e.width||o.current||t||(n.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),o.current=!0),f.current)return u(),void(f.current=!1);p()}),[r.autoHeight,p,n,u]);(0,Gs.Z)((()=>c()),[c]),x_(e,"sortedRowsSet",c),x_(e,"pageChange",c),x_(e,"pageSizeChange",c),x_(e,"columnsChange",c),L_(e,"resize",g),x_(e,"debouncedResize",r.onResize)}(o,e),function(e,t){x_(e,"columnHeaderClick",t.onColumnHeaderClick),x_(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),x_(e,"columnHeaderOver",t.onColumnHeaderOver),x_(e,"columnHeaderOut",t.onColumnHeaderOut),x_(e,"columnHeaderEnter",t.onColumnHeaderEnter),x_(e,"columnHeaderLeave",t.onColumnHeaderLeave),x_(e,"columnOrderChange",t.onColumnOrderChange),x_(e,"cellClick",t.onCellClick),x_(e,"cellDoubleClick",t.onCellDoubleClick),x_(e,"cellKeyDown",t.onCellKeyDown),x_(e,"cellFocusOut",t.onCellFocusOut),x_(e,"preferencePanelClose",t.onPreferencePanelClose),x_(e,"preferencePanelOpen",t.onPreferencePanelOpen),x_(e,"menuOpen",t.onMenuOpen),x_(e,"menuClose",t.onMenuClose),x_(e,"rowDoubleClick",t.onRowDoubleClick),x_(e,"rowClick",t.onRowClick),x_(e,"componentError",t.onError),x_(e,"stateChange",t.onStateChange)}(o,e),(e=>{const r=t.useCallback(((t={})=>e.current.unstable_applyPipeProcessors("exportState",{},t)),[e]),n=t.useCallback((t=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:t}).callbacks.forEach((e=>{e()})),e.current.forceUpdate()}),[e]);O_(e,{exportState:r,restoreState:n})})(o),o},oT={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",errorOverlayDefaultLabel:"An error occurred.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelDeleteIconLabel:"Delete",filterPanelLinkOperator:"Logic operator",filterPanelOperators:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>1!==e?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"};function iT(e){return(0,Rt.Z)("PrivateSwitchBase",e)}(0,wt.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const sT=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],aT=(0,St.ZP)(On)((({ownerState:e})=>(0,ft.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12}))),lT=(0,St.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),cT=t.forwardRef((function(e,t){const{autoFocus:r,checked:n,checkedIcon:o,className:i,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:g,onChange:m,onFocus:v,readOnly:_,required:y=!1,tabIndex:b,type:E,value:S}=e,C=(0,pt.Z)(e,sT),[T,w]=(0,Wi.Z)({controlled:n,default:Boolean(s),name:"SwitchBase",state:"checked"}),R=ay();let k=a;R&&void 0===k&&(k=R.disabled);const O="checkbox"===E||"radio"===E,I=(0,ft.Z)({},e,{checked:T,disabled:k,disableFocusRipple:l,edge:c}),P=(e=>{const{classes:t,checked:r,disabled:n,edge:o}=e,i={root:["root",r&&"checked",n&&"disabled",o&&`edge${(0,Tt.Z)(o)}`],input:["input"]};return(0,Et.Z)(i,iT,t)})(I);return(0,Ot.jsxs)(aT,(0,ft.Z)({component:"span",className:(0,gt.default)(P.root,i),centerRipple:!0,focusRipple:!l,disabled:k,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),R&&R.onFocus&&R.onFocus(e)},onBlur:e=>{g&&g(e),R&&R.onBlur&&R.onBlur(e)},ownerState:I,ref:t},C,{children:[(0,Ot.jsx)(lT,(0,ft.Z)({autoFocus:r,checked:n,defaultChecked:s,className:P.input,disabled:k,id:O?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;w(t),m&&m(e,t)},readOnly:_,ref:p,required:y,ownerState:I,tabIndex:b,type:E},"checkbox"===E&&void 0===S?{}:{value:S},h)),T?o:u]}))})),uT=cT,dT=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),hT=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),pT=(0,Si.Z)((0,Ot.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function fT(e){return(0,Rt.Z)("MuiCheckbox",e)}const gT=(0,wt.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),mT=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],vT=(0,St.ZP)(uT,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,"default"!==r.color&&t[`color${(0,Tt.Z)(r.color)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${gT.checked}, &.${gT.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${gT.disabled}`]:{color:(e.vars||e).palette.action.disabled}}))),_T=(0,Ot.jsx)(hT,{}),yT=(0,Ot.jsx)(dT,{}),bT=(0,Ot.jsx)(pT,{}),ET=t.forwardRef((function(e,r){var n,o;const i=(0,Ct.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:s=_T,color:a="primary",icon:l=yT,indeterminate:c=!1,indeterminateIcon:u=bT,inputProps:d,size:h="medium",className:p}=i,f=(0,pt.Z)(i,mT),g=c?u:l,m=c?u:s,v=(0,ft.Z)({},i,{color:a,indeterminate:c,size:h}),_=(e=>{const{classes:t,indeterminate:r,color:n}=e,o={root:["root",r&&"indeterminate",`color${(0,Tt.Z)(n)}`]},i=(0,Et.Z)(o,fT,t);return(0,ft.Z)({},t,i)})(v);return(0,Ot.jsx)(vT,(0,ft.Z)({type:"checkbox",inputProps:(0,ft.Z)({"data-indeterminate":c},d),icon:t.cloneElement(g,{fontSize:null!=(n=g.props.fontSize)?n:h}),checkedIcon:t.cloneElement(m,{fontSize:null!=(o=m.props.fontSize)?o:h}),ownerState:v,ref:r,className:(0,gt.default)(_.root,p)},f,{classes:_}))})),ST=ET,CT=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],TT=(0,St.ZP)(vy,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...gy(e,t),!r.disableUnderline&&t.underline]}})((({theme:e,ownerState:t})=>{let r="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),(0,ft.Z)({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kb.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kb.disabled}, .${kb.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${kb.disabled}:before`]:{borderBottomStyle:"dotted"}})})),wT=(0,St.ZP)(_y,{name:"MuiInput",slot:"Input",overridesResolver:my})({}),RT=t.forwardRef((function(e,t){var r,n,o,i;const s=(0,Ct.Z)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:g="text"}=s,m=(0,pt.Z)(s,CT),v=(e=>{const{classes:t,disableUnderline:r}=e,n={root:["root",!r&&"underline"],input:["input"]},o=(0,Et.Z)(n,Rb,t);return(0,ft.Z)({},t,o)})(s),_={root:{ownerState:{disableUnderline:a}}},y=(null!=p?p:c)?(0,mt.Z)(null!=p?p:c,_):_,b=null!=(r=null!=(n=f.root)?n:l.Root)?r:TT,E=null!=(o=null!=(i=f.input)?i:l.Input)?o:wT;return(0,Ot.jsx)(Ey,(0,ft.Z)({slots:{root:b,input:E},slotProps:y,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:g},m,{classes:v}))}));RT.muiName="Input";const kT=RT,OT=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],IT=(0,St.ZP)(vy,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...gy(e,t),!r.disableUnderline&&t.underline]}})((({theme:e,ownerState:t})=>{var r;const n="light"===e.palette.mode,o=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,ft.Z)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i}},[`&.${Ab.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i},[`&.${Ab.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${null==(r=(e.vars||e).palette[t.color||"primary"])?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ab.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ab.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ab.disabled}, .${Ab.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Ab.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&(0,ft.Z)({padding:"25px 12px 8px"},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),PT=(0,St.ZP)(_y,{name:"MuiFilledInput",slot:"Input",overridesResolver:my})((({theme:e,ownerState:t})=>(0,ft.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&"small"===t.size&&{paddingTop:8,paddingBottom:9}))),AT=t.forwardRef((function(e,t){var r,n,o,i;const s=(0,Ct.Z)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=s,g=(0,pt.Z)(s,OT),m=(0,ft.Z)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:f}),v=(e=>{const{classes:t,disableUnderline:r}=e,n={root:["root",!r&&"underline"],input:["input"]},o=(0,Et.Z)(n,Pb,t);return(0,ft.Z)({},t,o)})(s),_={root:{ownerState:m},input:{ownerState:m}},y=(null!=h?h:l)?(0,mt.Z)(null!=h?h:l,_):_,b=null!=(r=null!=(n=p.root)?n:a.Root)?r:IT,E=null!=(o=null!=(i=p.input)?i:a.Input)?o:PT;return(0,Ot.jsx)(Ey,(0,ft.Z)({slots:{root:b,input:E},componentsProps:y,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},g,{classes:v}))}));AT.muiName="Input";const NT=AT;var LT;const MT=["children","classes","className","label","notched"],xT=(0,St.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),DT=(0,St.ZP)("legend")((({ownerState:e,theme:t})=>(0,ft.Z)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&(0,ft.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})))),BT=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],UT=(0,St.ZP)(vy,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:gy})((({theme:e,ownerState:t})=>{const r="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,ft.Z)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Ib.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ib.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${Ib.focused} .${Ib.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Ib.error} .${Ib.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Ib.disabled} .${Ib.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&(0,ft.Z)({padding:"16.5px 14px"},"small"===t.size&&{padding:"8.5px 14px"}))})),ZT=(0,St.ZP)((function(e){const{className:t,label:r,notched:n}=e,o=(0,pt.Z)(e,MT),i=null!=r&&""!==r,s=(0,ft.Z)({},e,{notched:n,withLabel:i});return(0,Ot.jsx)(xT,(0,ft.Z)({"aria-hidden":!0,className:t,ownerState:s},o,{children:(0,Ot.jsx)(DT,{ownerState:s,children:i?(0,Ot.jsx)("span",{children:r}):LT||(LT=(0,Ot.jsx)("span",{className:"notranslate",children:""}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((({theme:e})=>{const t="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),jT=(0,St.ZP)(_y,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:my})((({theme:e,ownerState:t})=>(0,ft.Z)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===t.size&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0}))),HT=t.forwardRef((function(e,r){var n,o,i,s,a;const l=(0,Ct.Z)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:g={},type:m="text"}=l,v=(0,pt.Z)(l,BT),_=(e=>{const{classes:t}=e,r=(0,Et.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ob,t);return(0,ft.Z)({},t,r)})(l),y=ay(),b=iy({props:l,muiFormControl:y,states:["required"]}),E=(0,ft.Z)({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:y,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:p,size:b.size,type:m}),S=null!=(n=null!=(o=g.root)?o:c.Root)?n:UT,C=null!=(i=null!=(s=g.input)?s:c.Input)?i:jT;return(0,Ot.jsx)(Ey,(0,ft.Z)({slots:{root:S,input:C},renderSuffix:e=>(0,Ot.jsx)(ZT,{ownerState:E,className:_.notchedOutline,label:null!=h&&""!==h&&b.required?a||(a=(0,Ot.jsxs)(t.Fragment,{children:[h,"","*"]})):h,notched:void 0!==f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:r,type:m},v,{classes:(0,ft.Z)({},_,{notchedOutline:null})}))}));HT.muiName="Input";const FT=HT;function zT(e){return(0,Rt.Z)("MuiFormLabel",e)}const GT=(0,wt.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),qT=["children","className","color","component","disabled","error","filled","focused","required"],VT=(0,St.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>(0,ft.Z)({},t.root,"secondary"===e.color&&t.colorSecondary,e.filled&&t.filled)})((({theme:e,ownerState:t})=>(0,ft.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${GT.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${GT.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${GT.error}`]:{color:(e.vars||e).palette.error.main}}))),WT=(0,St.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((({theme:e})=>({[`&.${GT.error}`]:{color:(e.vars||e).palette.error.main}}))),YT=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiFormLabel"}),{children:n,className:o,component:i="label"}=r,s=(0,pt.Z)(r,qT),a=iy({props:r,muiFormControl:ay(),states:["color","required","focused","disabled","error","filled"]}),l=(0,ft.Z)({},r,{color:a.color||"primary",component:i,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:r,focused:n,disabled:o,error:i,filled:s,required:a}=e,l={root:["root",`color${(0,Tt.Z)(r)}`,o&&"disabled",i&&"error",s&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",i&&"error"]};return(0,Et.Z)(l,zT,t)})(l);return(0,Ot.jsxs)(VT,(0,ft.Z)({as:i,ownerState:l,className:(0,gt.default)(c.root,o),ref:t},s,{children:[n,a.required&&(0,Ot.jsxs)(WT,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["","*"]})]}))})),KT=YT;function $T(e){return(0,Rt.Z)("MuiInputLabel",e)}(0,wt.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const QT=["disableAnimation","margin","shrink","variant","className"],XT=(0,St.ZP)(KT,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${GT.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,"small"===r.size&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===t.variant&&(0,ft.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,ft.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,ft.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"})))),JT=t.forwardRef((function(e,t){const r=(0,Ct.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,shrink:o,className:i}=r,s=(0,pt.Z)(r,QT),a=ay();let l=o;void 0===l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=iy({props:r,muiFormControl:a,states:["size","variant","required"]}),u=(0,ft.Z)({},r,{disableAnimation:n,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required}),d=(e=>{const{classes:t,formControl:r,size:n,shrink:o,disableAnimation:i,variant:s,required:a}=e,l={root:["root",r&&"formControl",!i&&"animated",o&&"shrink","small"===n&&"sizeSmall",s],asterisk:[a&&"asterisk"]},c=(0,Et.Z)(l,$T,t);return(0,ft.Z)({},t,c)})(u);return(0,Ot.jsx)(XT,(0,ft.Z)({"data-shrink":l,ownerState:u,ref:t,className:(0,gt.default)(d.root,i)},s,{classes:d}))})),ew=JT;function tw(e){return(0,Rt.Z)("MuiFormControl",e)}(0,wt.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const rw=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],nw=(0,St.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>(0,ft.Z)({},t.root,t[`margin${(0,Tt.Z)(e.margin)}`],e.fullWidth&&t.fullWidth)})((({ownerState:e})=>(0,ft.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"}))),ow=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiFormControl"}),{children:o,className:i,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:g="medium",variant:m="outlined"}=n,v=(0,pt.Z)(n,rw),_=(0,ft.Z)({},n,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:g,variant:m}),y=(e=>{const{classes:t,margin:r,fullWidth:n}=e,o={root:["root","none"!==r&&`margin${(0,Tt.Z)(r)}`,n&&"fullWidth"]};return(0,Et.Z)(o,tw,t)})(_),[b,E]=t.useState((()=>{let e=!1;return o&&t.Children.forEach(o,(t=>{if(!(0,Qg.Z)(t,["Input","Select"]))return;const r=(0,Qg.Z)(t,["Select"])?t.props.input:t;r&&r.props.startAdornment&&(e=!0)})),e})),[S,C]=t.useState((()=>{let e=!1;return o&&t.Children.forEach(o,(t=>{(0,Qg.Z)(t,["Input","Select"])&&dy(t.props,!0)&&(e=!0)})),e})),[T,w]=t.useState(!1);l&&T&&w(!1);const R=void 0===u||l?T:u;let k;const O=t.useMemo((()=>({adornedStart:b,setAdornedStart:E,color:s,disabled:l,error:c,filled:S,focused:R,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{w(!1)},onEmpty:()=>{C(!1)},onFilled:()=>{C(!0)},onFocus:()=>{w(!0)},registerEffect:k,required:f,variant:m})),[b,s,l,c,S,R,d,h,k,f,g,m]);return(0,Ot.jsx)(sy.Provider,{value:O,children:(0,Ot.jsx)(nw,(0,ft.Z)({as:a,ownerState:_,className:(0,gt.default)(y.root,i),ref:r},v,{children:o}))})})),iw=ow;function sw(e){return(0,Rt.Z)("MuiFormHelperText",e)}const aw=(0,wt.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var lw;const cw=["children","className","component","disabled","error","filled","focused","margin","required","variant"],uw=(0,St.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${(0,Tt.Z)(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})((({theme:e,ownerState:t})=>(0,ft.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${aw.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${aw.error}`]:{color:(e.vars||e).palette.error.main}},"small"===t.size&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14}))),dw=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiFormHelperText"}),{children:n,className:o,component:i="p"}=r,s=(0,pt.Z)(r,cw),a=iy({props:r,muiFormControl:ay(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,ft.Z)({},r,{component:i,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:r,size:n,disabled:o,error:i,filled:s,focused:a,required:l}=e,c={root:["root",o&&"disabled",i&&"error",n&&`size${(0,Tt.Z)(n)}`,r&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,Et.Z)(c,sw,t)})(l);return(0,Ot.jsx)(uw,(0,ft.Z)({as:i,ownerState:l,className:(0,gt.default)(c.root,o),ref:t},s,{children:" "===n?lw||(lw=(0,Ot.jsx)("span",{className:"notranslate",children:""})):n}))})),hw=dw;function pw(e){return(0,Rt.Z)("MuiNativeSelect",e)}const fw=(0,wt.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),gw=["className","disabled","IconComponent","inputRef","variant"],mw=({ownerState:e,theme:t})=>(0,ft.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,ft.Z)({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===t.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${fw.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),vw=(0,St.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:St.FO,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],{[`&.${fw.multiple}`]:t.multiple}]}})(mw),_w=({ownerState:e,theme:t})=>(0,ft.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${fw.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7}),yw=(0,St.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${(0,Tt.Z)(r.variant)}`],r.open&&t.iconOpen]}})(_w),bw=t.forwardRef((function(e,r){const{className:n,disabled:o,IconComponent:i,inputRef:s,variant:a="standard"}=e,l=(0,pt.Z)(e,gw),c=(0,ft.Z)({},e,{disabled:o,variant:a}),u=(e=>{const{classes:t,variant:r,disabled:n,multiple:o,open:i}=e,s={select:["select",r,n&&"disabled",o&&"multiple"],icon:["icon",`icon${(0,Tt.Z)(r)}`,i&&"iconOpen",n&&"disabled"]};return(0,Et.Z)(s,pw,t)})(c);return(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)(vw,(0,ft.Z)({ownerState:c,className:(0,gt.default)(u.select,n),disabled:o,ref:s||r},l)),e.multiple?null:(0,Ot.jsx)(yw,{as:i,ownerState:c,className:u.icon})]})})),Ew=bw;function Sw(e){return(0,Rt.Z)("MuiSelect",e)}const Cw=(0,wt.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Tw;const ww=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Rw=(0,St.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${Cw.select}`]:t.select},{[`&.${Cw.select}`]:t[r.variant]},{[`&.${Cw.multiple}`]:t.multiple}]}})(mw,{[`&.${Cw.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),kw=(0,St.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${(0,Tt.Z)(r.variant)}`],r.open&&t.iconOpen]}})(_w),Ow=(0,St.ZP)("input",{shouldForwardProp:e=>(0,St.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Iw(e,t){return"object"==typeof t&&null!==t?e===t:String(e)===String(t)}function Pw(e){return null==e||"string"==typeof e&&!e.trim()}const Aw=t.forwardRef((function(e,r){const{"aria-describedby":n,"aria-label":o,autoFocus:i,autoWidth:s,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:h,IconComponent:p,inputRef:f,labelId:g,MenuProps:m={},multiple:v,name:_,onBlur:y,onChange:b,onClose:E,onFocus:S,onOpen:C,open:T,readOnly:w,renderValue:R,SelectDisplayProps:k={},tabIndex:O,value:I,variant:P="standard"}=e,A=(0,pt.Z)(e,ww),[N,L]=(0,Wi.Z)({controlled:I,default:u,name:"Select"}),[M,x]=(0,Wi.Z)({controlled:T,default:c,name:"Select"}),D=t.useRef(null),B=t.useRef(null),[U,Z]=t.useState(null),{current:j}=t.useRef(null!=T),[H,F]=t.useState(),z=(0,Gr.Z)(r,f),G=t.useCallback((e=>{B.current=e,e&&Z(e)}),[]),q=null==U?void 0:U.parentNode;t.useImperativeHandle(z,(()=>({focus:()=>{B.current.focus()},node:D.current,value:N})),[N]),t.useEffect((()=>{c&&M&&U&&!j&&(F(s?null:q.clientWidth),B.current.focus())}),[U,s]),t.useEffect((()=>{i&&B.current.focus()}),[i]),t.useEffect((()=>{if(!g)return;const e=(0,Bs.Z)(B.current).getElementById(g);if(e){const t=()=>{getSelection().isCollapsed&&B.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[g]);const V=(e,t)=>{e?C&&C(t):E&&E(t),j||(F(s?null:q.clientWidth),x(e))},W=t.Children.toArray(a),Y=e=>t=>{let r;if(t.currentTarget.hasAttribute("tabindex")){if(v){r=Array.isArray(N)?N.slice():[];const t=N.indexOf(e.props.value);-1===t?r.push(e.props.value):r.splice(t,1)}else r=e.props.value;if(e.props.onClick&&e.props.onClick(t),N!==r&&(L(r),b)){const n=t.nativeEvent||t,o=new n.constructor(n.type,n);Object.defineProperty(o,"target",{writable:!0,value:{value:r,name:_}}),b(o,e)}v||V(!1,t)}},K=null!==U&&M;let $,Q;delete A["aria-invalid"];const X=[];let J=!1,ee=!1;(dy({value:N})||h)&&(R?$=R(N):J=!0);const te=W.map(((e,r,n)=>{var o,i,s,a;if(!t.isValidElement(e))return null;let l;if(v){if(!Array.isArray(N))throw new Error((0,Q_.Z)(2));l=N.some((t=>Iw(t,e.props.value))),l&&J&&X.push(e.props.children)}else l=Iw(N,e.props.value),l&&J&&(Q=e.props.children);return l&&(ee=!0),void 0===e.props.value?t.cloneElement(e,{"aria-readonly":!0,role:"option"}):t.cloneElement(e,{"aria-selected":l?"true":"false",onClick:Y(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===(null==(o=n[0])||null==(i=o.props)?void 0:i.value)||!0===(null==(s=n[0])||null==(a=s.props)?void 0:a.disabled)?(()=>{if(N)return l;const t=n.find((e=>{var t;return void 0!==(null==e||null==(t=e.props)?void 0:t.value)&&!0!==e.props.disabled}));return e===t||l})():l,value:void 0,"data-value":e.props.value})}));J&&($=v?0===X.length?null:X.reduce(((e,t,r)=>(e.push(t),r<X.length-1&&e.push(", "),e)),[]):Q);let re,ne=H;!s&&j&&U&&(ne=q.clientWidth),re=void 0!==O?O:d?null:0;const oe=k.id||(_?`mui-component-select-${_}`:void 0),ie=(0,ft.Z)({},e,{variant:P,value:N,open:K}),se=(e=>{const{classes:t,variant:r,disabled:n,multiple:o,open:i}=e,s={select:["select",r,n&&"disabled",o&&"multiple"],icon:["icon",`icon${(0,Tt.Z)(r)}`,i&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return(0,Et.Z)(s,Sw,t)})(ie);return(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)(Rw,(0,ft.Z)({ref:G,tabIndex:re,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":K?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[g,oe].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{w||-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),V(!0,e))},onMouseDown:d||w?null:e=>{0===e.button&&(e.preventDefault(),B.current.focus(),V(!0,e))},onBlur:e=>{!K&&y&&(Object.defineProperty(e,"target",{writable:!0,value:{value:N,name:_}}),y(e))},onFocus:S},k,{ownerState:ie,className:(0,gt.default)(k.className,se.select,l),id:oe,children:Pw($)?Tw||(Tw=(0,Ot.jsx)("span",{className:"notranslate",children:""})):$})),(0,Ot.jsx)(Ow,(0,ft.Z)({value:Array.isArray(N)?N.join(","):N,name:_,ref:D,"aria-hidden":!0,onChange:e=>{const t=W.map((e=>e.props.value)).indexOf(e.target.value);if(-1===t)return;const r=W[t];L(r.props.value),b&&b(e,r)},tabIndex:-1,disabled:d,className:se.nativeInput,autoFocus:i,ownerState:ie},A)),(0,Ot.jsx)(kw,{as:p,className:se.icon,ownerState:ie}),(0,Ot.jsx)(Ra,(0,ft.Z)({id:`menu-${_||""}`,anchorEl:q,open:K,onClose:e=>{V(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m,{MenuListProps:(0,ft.Z)({"aria-labelledby":g,role:"listbox",disableListWrap:!0},m.MenuListProps),PaperProps:(0,ft.Z)({},m.PaperProps,{style:(0,ft.Z)({minWidth:ne},null!=m.PaperProps?m.PaperProps.style:null)}),children:te}))]})})),Nw=Aw;var Lw,Mw;const xw=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Dw={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,St.FO)(e)&&"variant"!==e,slot:"Root"},Bw=(0,St.ZP)(kT,Dw)(""),Uw=(0,St.ZP)(FT,Dw)(""),Zw=(0,St.ZP)(NT,Dw)(""),jw=t.forwardRef((function(e,r){const n=(0,Ct.Z)({name:"MuiSelect",props:e}),{autoWidth:o=!1,children:i,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Lb,id:d,input:h,inputProps:p,label:f,labelId:g,MenuProps:m,multiple:v=!1,native:_=!1,onClose:y,onOpen:b,open:E,renderValue:S,SelectDisplayProps:C,variant:T="outlined"}=n,w=(0,pt.Z)(n,xw),R=_?Ew:Nw,k=iy({props:n,muiFormControl:ay(),states:["variant"]}).variant||T,O=h||{standard:Lw||(Lw=(0,Ot.jsx)(Bw,{})),outlined:(0,Ot.jsx)(Uw,{label:f}),filled:Mw||(Mw=(0,Ot.jsx)(Zw,{}))}[k],I=(e=>{const{classes:t}=e;return t})((0,ft.Z)({},n,{variant:k,classes:s})),P=(0,Gr.Z)(r,O.ref);return(0,Ot.jsx)(t.Fragment,{children:t.cloneElement(O,(0,ft.Z)({inputComponent:R,inputProps:(0,ft.Z)({children:i,IconComponent:u,variant:k,type:void 0,multiple:v},_?{id:d}:{autoWidth:o,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:m,onClose:y,onOpen:b,open:E,renderValue:S,SelectDisplayProps:(0,ft.Z)({id:d},C)},p,{classes:p?(0,mt.Z)(I,p.classes):I},h?h.props.inputProps:{})},v&&_&&"outlined"===k?{notched:!0}:{},{ref:P,className:(0,gt.default)(O.props.className,a)},!h&&{variant:k},w))})}));jw.muiName="Select";const Hw=jw;function Fw(e){return(0,Rt.Z)("MuiTextField",e)}(0,wt.Z)("MuiTextField",["root"]);const zw=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Gw={standard:kT,filled:NT,outlined:FT},qw=(0,St.ZP)(iw,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Vw=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:o=!1,children:i,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:g,inputProps:m,InputProps:v,inputRef:_,label:y,maxRows:b,minRows:E,multiline:S=!1,name:C,onBlur:T,onChange:w,onFocus:R,placeholder:k,required:O=!1,rows:I,select:P=!1,SelectProps:A,type:N,value:L,variant:M="outlined"}=r,x=(0,pt.Z)(r,zw),D=(0,ft.Z)({},r,{autoFocus:o,color:a,disabled:c,error:u,fullWidth:h,multiline:S,required:O,select:P,variant:M}),B=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},Fw,t)})(D),U={};"outlined"===M&&(g&&void 0!==g.shrink&&(U.notched=g.shrink),U.label=y),P&&(A&&A.native||(U.id=void 0),U["aria-describedby"]=void 0);const Z=(0,Gn.Z)(f),j=p&&Z?`${Z}-helper-text`:void 0,H=y&&Z?`${Z}-label`:void 0,F=Gw[M],z=(0,Ot.jsx)(F,(0,ft.Z)({"aria-describedby":j,autoComplete:n,autoFocus:o,defaultValue:l,fullWidth:h,multiline:S,name:C,rows:I,maxRows:b,minRows:E,type:N,value:L,id:Z,inputRef:_,onBlur:T,onChange:w,onFocus:R,placeholder:k,inputProps:m},U,v));return(0,Ot.jsxs)(qw,(0,ft.Z)({className:(0,gt.default)(B.root,s),disabled:c,error:u,fullWidth:h,ref:t,required:O,color:a,variant:M,ownerState:D},x,{children:[null!=y&&""!==y&&(0,Ot.jsx)(ew,(0,ft.Z)({htmlFor:Z,id:H},g,{children:y})),P?(0,Ot.jsx)(Hw,(0,ft.Z)({"aria-describedby":j,id:Z,labelId:H,value:L,input:z},A,{children:i})):z,p&&(0,Ot.jsx)(hw,(0,ft.Z)({id:j},d,{children:p}))]}))})),Ww=Vw;function Yw(e){return(0,Rt.Z)("MuiSwitch",e)}const Kw=(0,wt.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),$w=["className","color","edge","size","sx"],Qw=(0,St.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${(0,Tt.Z)(r.edge)}`],t[`size${(0,Tt.Z)(r.size)}`]]}})((({ownerState:e})=>(0,ft.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===e.edge&&{marginLeft:-8},"end"===e.edge&&{marginRight:-8},"small"===e.size&&{width:40,height:24,padding:7,[`& .${Kw.thumb}`]:{width:16,height:16},[`& .${Kw.switchBase}`]:{padding:4,[`&.${Kw.checked}`]:{transform:"translateX(16px)"}}}))),Xw=(0,St.ZP)(uT,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${Kw.input}`]:t.input},"default"!==r.color&&t[`color${(0,Tt.Z)(r.color)}`]]}})((({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${"light"===e.palette.mode?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Kw.checked}`]:{transform:"translateX(20px)"},[`&.${Kw.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Kw.checked} + .${Kw.track}`]:{opacity:.5},[`&.${Kw.disabled} + .${Kw.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:""+("light"===e.palette.mode?.12:.2)},[`& .${Kw.input}`]:{left:"-100%",width:"300%"}})),(({theme:e,ownerState:t})=>(0,ft.Z)({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${Kw.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Kw.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${"light"===e.palette.mode?(0,Lr.$n)(e.palette[t.color].main,.62):(0,Lr._j)(e.palette[t.color].main,.55)}`}},[`&.${Kw.checked} + .${Kw.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}}))),Jw=(0,St.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((({theme:e})=>({height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${"light"===e.palette.mode?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:""+("light"===e.palette.mode?.38:.3)}))),eR=(0,St.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),tR=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiSwitch"}),{className:n,color:o="primary",edge:i=!1,size:s="medium",sx:a}=r,l=(0,pt.Z)(r,$w),c=(0,ft.Z)({},r,{color:o,edge:i,size:s}),u=(e=>{const{classes:t,edge:r,size:n,color:o,checked:i,disabled:s}=e,a={root:["root",r&&`edge${(0,Tt.Z)(r)}`,`size${(0,Tt.Z)(n)}`],switchBase:["switchBase",`color${(0,Tt.Z)(o)}`,i&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,Et.Z)(a,Yw,t);return(0,ft.Z)({},t,l)})(c),d=(0,Ot.jsx)(eR,{className:u.thumb,ownerState:c});return(0,Ot.jsxs)(Qw,{className:(0,gt.default)(u.root,n),sx:a,ownerState:c,children:[(0,Ot.jsx)(Xw,(0,ft.Z)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,ft.Z)({},u,{root:u.switchBase})})),(0,Ot.jsx)(Jw,{className:u.track,ownerState:c})]})})),rR=tR,nR=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","onClick","onDoubleClick","onMouseDown","onMouseUp","onKeyDown","onDragEnter","onDragOver"];let oR;function iR(e){return(0,Rt.Z)("MuiSkeleton",e)}(0,wt.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const sR=["animation","className","component","height","style","variant","width"];let aR,lR,cR,uR,dR=e=>e;const hR=cn(aR||(aR=dR`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),pR=cn(lR||(lR=dR`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),fR=(0,St.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!1!==r.animation&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})((({theme:e,ownerState:t})=>{const r=(i=e.shape.borderRadius,String(i).match(/[\d.\-+]*\s*(.*)/)[1]||""||"px"),n=(o=e.shape.borderRadius,parseFloat(o));var o,i;return(0,ft.Z)({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:(0,Lr.Fq)(e.palette.text.primary,"light"===e.palette.mode?.11:.13),height:"1.2em"},"text"===t.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${r}/${Math.round(n/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===t.variant&&{borderRadius:"50%"},"rounded"===t.variant&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})}),(({ownerState:e})=>"pulse"===e.animation&&ln(cR||(cR=dR`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),hR)),(({ownerState:e,theme:t})=>"wave"===e.animation&&ln(uR||(uR=dR`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),pR,(t.vars||t).palette.action.hover))),gR=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiSkeleton"}),{animation:n="pulse",className:o,component:i="span",height:s,style:a,variant:l="text",width:c}=r,u=(0,pt.Z)(r,sR),d=(0,ft.Z)({},r,{animation:n,component:i,variant:l,hasChildren:Boolean(u.children)}),h=(e=>{const{classes:t,variant:r,animation:n,hasChildren:o,width:i,height:s}=e,a={root:["root",r,n,o&&"withChildren",o&&!i&&"fitContent",o&&!s&&"heightAuto"]};return(0,Et.Z)(a,iR,t)})(d);return(0,Ot.jsx)(fR,(0,ft.Z)({as:i,ref:t,className:(0,gt.default)(h.root,o),ownerState:d},u,{style:(0,ft.Z)({width:c,height:s},a)}))})),mR=gR,vR=["field","align","width","contentWidth"],_R=["className"],yR=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})((()=>({display:"flex",visibility:"hidden",width:0}))),bR=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,_R),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["iconButtonContainer"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(yR,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))})),ER=["hideMenu","currentColumn","open","id","labelledby","className","children"],SR=t.forwardRef((function(e,r){const{hideMenu:n,open:o,id:i,labelledby:s,className:a,children:l}=e,c=(0,pt.Z)(e,ER),u=t.useCallback((e=>{var t;wE(e.key)&&e.preventDefault(),t=e.key,(wE(t)||CE(t))&&n(e)}),[n]);return(0,Ot.jsx)(Qs,(0,ft.Z)({id:i,ref:r,className:(0,gt.default)(qm.menuList,a),"aria-labelledby":s,onKeyDown:u,autoFocus:o},c,{children:l}))})),CR=e=>{const{onClick:r}=e,n=gv(),o=vv(),i=t.useCallback((e=>{r(e),n.current.showPreferences(dS.columns)}),[n,r]);return o.disableColumnSelector?null:(0,Ot.jsx)(La,{onClick:i,children:n.current.getLocaleText("columnMenuShowColumns")})},TR=e=>{const{column:r,onClick:n}=e,o=gv(),i=vv(),s=t.useCallback((e=>{n(e),o.current.showFilterPanel(null==r?void 0:r.field)}),[o,null==r?void 0:r.field,n]);return i.disableColumnFilter||null==r||!r.filterable?null:(0,Ot.jsx)(La,{onClick:s,children:o.current.getLocaleText("columnMenuFilter")})},wR=e=>{const{column:r,onClick:n}=e,o=gv(),i=vv(),s=t.useRef(),a=1===av(o).filter((e=>!0!==e.disableColumnMenu)).length,l=t.useCallback((e=>{a||(n(e),s.current=setTimeout((()=>{o.current.setColumnVisibility(null==r?void 0:r.field,!1)}),100))}),[o,null==r?void 0:r.field,n,a]);return t.useEffect((()=>()=>clearTimeout(s.current)),[]),i.disableColumnSelector||!1===r.hideable?null:(0,Ot.jsx)(La,{onClick:l,disabled:a,children:o.current.getLocaleText("columnMenuHideColumn")})};function RR(e){var r;const{column:n,onClick:o}=e,i=gv(),s=pv(i,Xv),a=vv(),l=null!=(r=n.sortingOrder)?r:a.sortingOrder,c=t.useMemo((()=>{if(!n)return null;const e=s.find((e=>e.field===n.field));return null==e?void 0:e.sort}),[n,s]),u=t.useCallback((e=>{o(e);const t=e.currentTarget.getAttribute("data-value")||null;i.current.sortColumn(n,t)}),[i,n,o]);return n&&n.sortable?(0,Ot.jsxs)(t.Fragment,{children:[l.includes(null)?(0,Ot.jsx)(La,{onClick:u,disabled:null==c,children:i.current.getLocaleText("columnMenuUnsort")}):null,l.includes("asc")?(0,Ot.jsx)(La,{onClick:u,"data-value":"asc",disabled:"asc"===c,children:i.current.getLocaleText("columnMenuSortAsc")}):null,l.includes("desc")?(0,Ot.jsx)(La,{onClick:u,"data-value":"desc",disabled:"desc"===c,children:i.current.getLocaleText("columnMenuSortDesc")}):null]}):null}const kR=t.forwardRef((function(e,r){const{hideMenu:n,currentColumn:o}=e,i=gv(),s=[(0,Ot.jsx)(RR,{onClick:n,column:o}),(0,Ot.jsx)(TR,{onClick:n,column:o}),(0,Ot.jsx)(wR,{onClick:n,column:o}),(0,Ot.jsx)(CR,{onClick:n,column:o})],a=i.current.unstable_applyPipeProcessors("columnMenu",s,o);return(0,Ot.jsx)(SR,(0,ft.Z)({ref:r},e,{children:a.map(((e,r)=>t.cloneElement(e,{key:r,onClick:n,column:o})))}))})),OR=["className","rowCount","visibleRowCount"],IR=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})((({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)}))),PR=t.forwardRef((function(e,t){const{className:r,rowCount:n,visibleRowCount:o}=e,i=(0,pt.Z)(e,OR),s=gv(),a=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["rowCount"]},Gm,t)})({classes:vv().classes});if(0===n)return null;const l=o<n?s.current.getLocaleText("footerTotalVisibleRows")(o,n):n.toLocaleString();return(0,Ot.jsxs)(IR,(0,ft.Z)({ref:t,className:(0,gt.default)(a.root,r)},i,{children:[s.current.getLocaleText("footerTotalRows")," ",l]}))})),AR=["className","selectedRowCount"],NR=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})((({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}}))),LR=t.forwardRef((function(e,t){const{className:r,selectedRowCount:n}=e,o=(0,pt.Z)(e,AR),i=gv(),s=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["selectedRowCount"]},Gm,t)})({classes:vv().classes}),a=i.current.getLocaleText("footerRowSelected")(n);return(0,Ot.jsx)(NR,(0,ft.Z)({ref:t,className:(0,gt.default)(s.root,r)},o,{children:a}))})),MR=["className"],xR=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})((({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:`1px solid ${"light"===e.palette.mode?(0,Lr.$n)((0,Lr.Fq)(e.palette.divider,1),.88):(0,Lr._j)((0,Lr.Fq)(e.palette.divider,1),.68)}`}))),DR=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,MR),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["footerContainer"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(xR,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))})),BR=t.forwardRef((function(e,t){var r;const n=gv(),o=vv(),i=pv(n,Ov),s=pv(n,LS),a=pv(n,u_),l=!o.hideFooterSelectedRowCount&&s>0?(0,Ot.jsx)(LR,{selectedRowCount:s}):(0,Ot.jsx)("div",{}),c=o.hideFooterRowCount||o.pagination?null:(0,Ot.jsx)(PR,{rowCount:i,visibleRowCount:a}),u=o.pagination&&!o.hideFooterPagination&&o.components.Pagination&&(0,Ot.jsx)(o.components.Pagination,(0,ft.Z)({},null==(r=o.componentsProps)?void 0:r.pagination));return(0,Ot.jsxs)(DR,(0,ft.Z)({ref:t},e,{children:[l,c,u]}))})),UR=t.forwardRef((function(e,t){var r,n;const o=vv();return(0,Ot.jsxs)("div",(0,ft.Z)({ref:t},e,{children:[(0,Ot.jsx)(o.components.PreferencesPanel,(0,ft.Z)({},null==(r=o.componentsProps)?void 0:r.preferencesPanel)),o.components.Toolbar&&(0,Ot.jsx)(o.components.Toolbar,(0,ft.Z)({},null==(n=o.componentsProps)?void 0:n.toolbar))]}))})),ZR=t.forwardRef((function(e,t){var r,n,o;const i=gv(),s=pv(i,iv),a=vv(),l=pv(i,PC),c=i.current.unstable_applyPipeProcessors("preferencePanel",null,null!=(r=l.openedPanelValue)?r:dS.filters);return(0,Ot.jsx)(a.components.Panel,(0,ft.Z)({ref:t,as:a.components.BasePopper,open:s.length>0&&l.open},null==(n=a.componentsProps)?void 0:n.panel,e,null==(o=a.componentsProps)?void 0:o.basePopper,{children:c}))}));function jR(e){return(0,Rt.Z)("MuiCircularProgress",e)}(0,wt.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const HR=["className","color","disableShrink","size","style","thickness","value","variant"];let FR,zR,GR,qR,VR=e=>e;const WR=cn(FR||(FR=VR`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),YR=cn(zR||(zR=VR`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),KR=(0,St.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,Tt.Z)(r.color)}`]]}})((({ownerState:e,theme:t})=>(0,ft.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&ln(GR||(GR=VR`
      animation: ${0} 1.4s linear infinite;
    `),WR))),$R=(0,St.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),QR=(0,St.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,Tt.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,ft.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&ln(qR||(qR=VR`
      animation: ${0} 1.4s ease-in-out infinite;
    `),YR))),XR=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiCircularProgress"}),{className:n,color:o="primary",disableShrink:i=!1,size:s=40,style:a,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=r,d=(0,pt.Z)(r,HR),h=(0,ft.Z)({},r,{color:o,disableShrink:i,size:s,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:r,color:n,disableShrink:o}=e,i={root:["root",r,`color${(0,Tt.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,Tt.Z)(r)}`,o&&"circleDisableShrink"]};return(0,Et.Z)(i,jR,t)})(h),f={},g={},m={};if("determinate"===u){const e=2*Math.PI*((44-l)/2);f.strokeDasharray=e.toFixed(3),m["aria-valuenow"]=Math.round(c),f.strokeDashoffset=`${((100-c)/100*e).toFixed(3)}px`,g.transform="rotate(-90deg)"}return(0,Ot.jsx)(KR,(0,ft.Z)({className:(0,gt.default)(p.root,n),style:(0,ft.Z)({width:s,height:s},g,a),ownerState:h,ref:t,role:"progressbar"},m,d,{children:(0,Ot.jsx)($R,{className:p.svg,ownerState:h,viewBox:"22 22 44 44",children:(0,Ot.jsx)(QR,{className:p.circle,style:f,ownerState:h,cx:44,cy:44,r:(44-l)/2,fill:"none",strokeWidth:l})})}))})),JR=XR,ek=["className"],tk=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})((({theme:e})=>({position:"absolute",top:0,zIndex:4,width:"100%",height:"100%",pointerEvents:"none",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:(0,Lr.Fq)(e.palette.background.default,e.palette.action.disabledOpacity)}))),rk=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,ek),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["overlay"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(tk,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))})),nk=t.forwardRef((function(e,t){return(0,Ot.jsx)(rk,(0,ft.Z)({ref:t},e,{children:(0,Ot.jsx)(JR,{})}))})),ok=t.forwardRef((function(e,t){const r=gv().current.getLocaleText("noRowsLabel");return(0,Ot.jsx)(rk,(0,ft.Z)({ref:t},e,{children:r}))})),ik=t.createContext(),sk=t.createContext();function ak(e){return(0,Rt.Z)("MuiTableCell",e)}const lk=(0,wt.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ck=["align","className","component","padding","scope","size","sortDirection","variant"],uk=(0,St.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,Tt.Z)(r.size)}`],"normal"!==r.padding&&t[`padding${(0,Tt.Z)(r.padding)}`],"inherit"!==r.align&&t[`align${(0,Tt.Z)(r.align)}`],r.stickyHeader&&t.stickyHeader]}})((({theme:e,ownerState:t})=>(0,ft.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?(0,Lr.$n)((0,Lr.Fq)(e.palette.divider,1),.88):(0,Lr._j)((0,Lr.Fq)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${lk.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}))),dk=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiTableCell"}),{align:o="inherit",className:i,component:s,padding:a,scope:l,size:c,sortDirection:u,variant:d}=n,h=(0,pt.Z)(n,ck),p=t.useContext(ik),f=t.useContext(sk),g=f&&"head"===f.variant;let m;m=s||(g?"th":"td");let v=l;"td"===m?v=void 0:!v&&g&&(v="col");const _=d||f&&f.variant,y=(0,ft.Z)({},n,{align:o,component:m,padding:a||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:u,stickyHeader:"head"===_&&p&&p.stickyHeader,variant:_}),b=(e=>{const{classes:t,variant:r,align:n,padding:o,size:i,stickyHeader:s}=e,a={root:["root",r,s&&"stickyHeader","inherit"!==n&&`align${(0,Tt.Z)(n)}`,"normal"!==o&&`padding${(0,Tt.Z)(o)}`,`size${(0,Tt.Z)(i)}`]};return(0,Et.Z)(a,ak,t)})(y);let E=null;return u&&(E="asc"===u?"ascending":"descending"),(0,Ot.jsx)(uk,(0,ft.Z)({as:m,ref:r,className:(0,gt.default)(b.root,i),"aria-sort":E,scope:v,ownerState:y},h))})),hk=dk,pk=(0,Si.Z)((0,Ot.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),fk=(0,Si.Z)((0,Ot.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),gk=(0,Si.Z)((0,Ot.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),mk=(0,Si.Z)((0,Ot.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage");var vk,_k,yk,bk,Ek,Sk,Ck,Tk;const wk=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],Rk=t.forwardRef((function(e,t){const{backIconButtonProps:r,count:n,getItemAriaLabel:o,nextIconButtonProps:i,onPageChange:s,page:a,rowsPerPage:l,showFirstButton:c,showLastButton:u}=e,d=(0,pt.Z)(e,wk),h=Er();return(0,Ot.jsxs)("div",(0,ft.Z)({ref:t},d,{children:[c&&(0,Ot.jsx)(Ds,{onClick:e=>{s(e,0)},disabled:0===a,"aria-label":o("first",a),title:o("first",a),children:"rtl"===h.direction?vk||(vk=(0,Ot.jsx)(gk,{})):_k||(_k=(0,Ot.jsx)(mk,{}))}),(0,Ot.jsx)(Ds,(0,ft.Z)({onClick:e=>{s(e,a-1)},disabled:0===a,color:"inherit","aria-label":o("previous",a),title:o("previous",a)},r,{children:"rtl"===h.direction?yk||(yk=(0,Ot.jsx)(fk,{})):bk||(bk=(0,Ot.jsx)(pk,{}))})),(0,Ot.jsx)(Ds,(0,ft.Z)({onClick:e=>{s(e,a+1)},disabled:-1!==n&&a>=Math.ceil(n/l)-1,color:"inherit","aria-label":o("next",a),title:o("next",a)},i,{children:"rtl"===h.direction?Ek||(Ek=(0,Ot.jsx)(pk,{})):Sk||(Sk=(0,Ot.jsx)(fk,{}))})),u&&(0,Ot.jsx)(Ds,{onClick:e=>{s(e,Math.max(0,Math.ceil(n/l)-1))},disabled:a>=Math.ceil(n/l)-1,"aria-label":o("last",a),title:o("last",a),children:"rtl"===h.direction?Ck||(Ck=(0,Ot.jsx)(mk,{})):Tk||(Tk=(0,Ot.jsx)(gk,{}))})]}))})),kk=Rk;function Ok(e){return(0,Rt.Z)("MuiTablePagination",e)}const Ik=(0,wt.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var Pk;const Ak=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Nk=(0,St.ZP)(hk,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),Lk=(0,St.ZP)(Ei,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>(0,ft.Z)({[`& .${Ik.actions}`]:t.actions},t.toolbar)})((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Ik.actions}`]:{flexShrink:0,marginLeft:20}}))),Mk=(0,St.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),xk=(0,St.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})((({theme:e})=>(0,ft.Z)({},e.typography.body2,{flexShrink:0}))),Dk=(0,St.ZP)(Hw,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>(0,ft.Z)({[`& .${Ik.selectIcon}`]:t.selectIcon,[`& .${Ik.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Ik.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Bk=(0,St.ZP)(La,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),Uk=(0,St.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})((({theme:e})=>(0,ft.Z)({},e.typography.body2,{flexShrink:0})));function Zk({from:e,to:t,count:r}){return`${e}${t} of ${-1!==r?r:`more than ${t}`}`}function jk(e){return`Go to ${e} page`}const Hk=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiTablePagination"}),{ActionsComponent:o=kk,backIconButtonProps:i,className:s,colSpan:a,component:l=hk,count:c,getItemAriaLabel:u=jk,labelDisplayedRows:d=Zk,labelRowsPerPage:h="Rows per page:",nextIconButtonProps:p,onPageChange:f,onRowsPerPageChange:g,page:m,rowsPerPage:v,rowsPerPageOptions:_=[10,25,50,100],SelectProps:y={},showFirstButton:b=!1,showLastButton:E=!1}=n,S=(0,pt.Z)(n,Ak),C=n,T=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Ok,t)})(C),w=y.native?"option":Bk;let R;l!==hk&&"td"!==l||(R=a||1e3);const k=(0,lc.Z)(y.id),O=(0,lc.Z)(y.labelId);return(0,Ot.jsx)(Nk,(0,ft.Z)({colSpan:R,ref:r,as:l,ownerState:C,className:(0,gt.default)(T.root,s)},S,{children:(0,Ot.jsxs)(Lk,{className:T.toolbar,children:[(0,Ot.jsx)(Mk,{className:T.spacer}),_.length>1&&(0,Ot.jsx)(xk,{className:T.selectLabel,id:O,children:h}),_.length>1&&(0,Ot.jsx)(Dk,(0,ft.Z)({variant:"standard"},!y.variant&&{input:Pk||(Pk=(0,Ot.jsx)(Ey,{}))},{value:v,onChange:g,id:k,labelId:O},y,{classes:(0,ft.Z)({},y.classes,{root:(0,gt.default)(T.input,T.selectRoot,(y.classes||{}).root),select:(0,gt.default)(T.select,(y.classes||{}).select),icon:(0,gt.default)(T.selectIcon,(y.classes||{}).icon)}),children:_.map((e=>(0,t.createElement)(w,(0,ft.Z)({},!uo(w)&&{ownerState:C},{className:T.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,Ot.jsx)(Uk,{className:T.displayedRows,children:d({from:0===c?0:m*v+1,to:-1===c?(m+1)*v:-1===v?c:Math.min(c,(m+1)*v),count:-1===c?-1:c,page:m})}),(0,Ot.jsx)(o,{className:T.actions,backIconButtonProps:i,count:c,nextIconButtonProps:p,onPageChange:f,page:m,rowsPerPage:v,showFirstButton:b,showLastButton:E,getItemAriaLabel:u})]})}))})),Fk=(0,St.ZP)(Hk)((({theme:e})=>({[`& .${Ik.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${Ik.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}}))),zk=t.forwardRef((function(e,r){var n;const o=gv(),i=vv(),s=pv(o,DS),a=t.useMemo((()=>Math.floor(s.rowCount/(s.pageSize||1))),[s.rowCount,s.pageSize]),l=t.useCallback((e=>{const t=Number(e.target.value);o.current.setPageSize(t)}),[o]),c=t.useCallback(((e,t)=>{o.current.setPage(t)}),[o]);return(0,Ot.jsx)(Fk,(0,ft.Z)({ref:r,component:"div",count:s.rowCount,page:s.page<=a?s.page:a,rowsPerPageOptions:null!=(n=i.rowsPerPageOptions)&&n.includes(s.pageSize)?i.rowsPerPageOptions:[],rowsPerPage:s.pageSize,onPageChange:c,onRowsPerPageChange:l},o.current.getLocaleText("MuiTablePagination"),e))})),Gk=["className"],qk=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function Vk(e){const{className:t}=e,r=(0,pt.Z)(e,Gk),n=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["panelContent"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(qk,(0,ft.Z)({className:(0,gt.default)(t,n.root)},r))}const Wk=["className"],Yk=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})((({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"})));function Kk(e){const{className:t}=e,r=(0,pt.Z)(e,Wk),n=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["panelFooter"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(Yk,(0,ft.Z)({className:(0,gt.default)(t,n.root)},r))}const $k=["className","slotProps"],Qk=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),Xk=()=>!0,Jk=t.forwardRef((function(e,t){const{className:r,slotProps:n={}}=e,o=(0,pt.Z)(e,$k),i=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["panelWrapper"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(lo,(0,ft.Z)({open:!0,disableEnforceFocus:!0,isEnabled:Xk},n.TrapFocus,{children:(0,Ot.jsx)(Qk,(0,ft.Z)({ref:t,tabIndex:-1,className:(0,gt.default)(r,i.root)},o))}))})),eO=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","linkOperators","columnsSort","deleteIconProps","linkOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],tO=["InputComponentProps"],rO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})((({theme:e})=>({display:"flex",padding:e.spacing(1)}))),nO=(0,St.ZP)(iw,{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})((({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)}))),oO=(0,St.ZP)(iw,{name:"MuiDataGrid",slot:"FilterFormLinkOperatorInput",overridesResolver:(e,t)=>t.filterFormLinkOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),iO=(0,St.ZP)(iw,{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),sO=(0,St.ZP)(iw,{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:120}),aO=(0,St.ZP)(iw,{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),lO=e=>{switch(e){case rC.And:return"filterPanelOperatorAnd";case rC.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `linkOperator` property in the `GridFilterPanel`.")}},cO=e=>e.headerName||e.field,uO=new Intl.Collator,dO=t.forwardRef((function(e,r){var n,o,i,s,a,l,c;const{item:u,hasMultipleFilters:d,deleteFilter:h,applyFilterChanges:p,multiFilterOperator:f,showMultiFilterOperators:g,disableMultiFilterOperator:m,applyMultiFilterOperatorChanges:v,focusElementRef:_,linkOperators:y=[rC.And,rC.Or],columnsSort:b,deleteIconProps:E={},linkOperatorInputProps:S={},operatorInputProps:C={},columnInputProps:T={},valueInputProps:w={}}=e,R=(0,pt.Z)(e,eO),k=gv(),O=pv(k,uv),I=(0,lc.Z)(),P=(0,lc.Z)(),A=(0,lc.Z)(),N=(0,lc.Z)(),L=vv(),M=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],linkOperatorInput:["filterFormLinkOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Gm,t)})({classes:L.classes}),x=t.useRef(null),D=t.useRef(null),B=d&&y.length>0,U=(null==(n=L.componentsProps)?void 0:n.baseFormControl)||{},Z=null==(i=((null==(o=L.componentsProps)?void 0:o.baseSelect)||{}).native)||i,j=Z?"option":La,{InputComponentProps:H}=w,F=(0,pt.Z)(w,tO),z=t.useMemo((()=>{switch(b){case"asc":return O.sort(((e,t)=>uO.compare(cO(e),cO(t))));case"desc":return O.sort(((e,t)=>-uO.compare(cO(e),cO(t))));default:return O}}),[O,b]),G=u.columnField?k.current.getColumn(u.columnField):null,q=t.useMemo((()=>{var e;return u.operatorValue&&G?null==(e=G.filterOperators)?void 0:e.find((e=>e.value===u.operatorValue)):null}),[u,G]),V=t.useCallback((e=>{const t=e.target.value,r=k.current.getColumn(t);if(r.field===G.field)return;const n=r.filterOperators.find((e=>e.value===u.operatorValue))||r.filterOperators[0],o=!n.InputComponent||n.InputComponent!==(null==q?void 0:q.InputComponent);p((0,ft.Z)({},u,{columnField:t,operatorValue:n.value,value:o?void 0:u.value}))}),[k,p,u,G,q]),W=t.useCallback((e=>{const t=e.target.value,r=null==G?void 0:G.filterOperators.find((e=>e.value===t)),n=!(null!=r&&r.InputComponent)||(null==r?void 0:r.InputComponent)!==(null==q?void 0:q.InputComponent);p((0,ft.Z)({},u,{operatorValue:t,value:n?void 0:u.value}))}),[p,u,G,q]),Y=t.useCallback((e=>{const t=e.target.value===rC.And.toString()?rC.And:rC.Or;v(t)}),[v]);return t.useImperativeHandle(_,(()=>({focus:()=>{var e;null!=q&&q.InputComponent?null==x||null==(e=x.current)||e.focus():D.current.focus()}})),[q]),(0,Ot.jsxs)(rO,(0,ft.Z)({ref:r,className:M.root},R,{children:[(0,Ot.jsx)(nO,(0,ft.Z)({variant:"standard",as:L.components.BaseFormControl},U,E,{className:(0,gt.default)(M.deleteIcon,U.className,E.className),children:(0,Ot.jsx)(Ds,{"aria-label":k.current.getLocaleText("filterPanelDeleteIconLabel"),title:k.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:()=>{L.disableMultipleColumnsFiltering?void 0===u.value?h(u):p((0,ft.Z)({},u,{value:void 0})):h(u)},size:"small",children:(0,Ot.jsx)(L.components.FilterPanelDeleteIcon,{fontSize:"small"})})})),(0,Ot.jsx)(oO,(0,ft.Z)({variant:"standard",as:L.components.BaseFormControl},U,S,{sx:(0,ft.Z)({display:B?"flex":"none",visibility:g?"visible":"hidden"},U.sx||{},S.sx||{}),className:(0,gt.default)(M.linkOperatorInput,U.className,S.className),children:(0,Ot.jsx)(L.components.BaseSelect,(0,ft.Z)({inputProps:{"aria-label":k.current.getLocaleText("filterPanelLinkOperator")},value:f,onChange:Y,disabled:!!m||1===y.length,native:Z},null==(s=L.componentsProps)?void 0:s.baseSelect,{children:y.map((e=>(0,Ot.jsx)(j,{value:e.toString(),children:k.current.getLocaleText(lO(e))},e.toString())))}))})),(0,Ot.jsxs)(iO,(0,ft.Z)({variant:"standard",as:L.components.BaseFormControl},U,T,{className:(0,gt.default)(M.columnInput,U.className,T.className),children:[(0,Ot.jsx)(ew,{htmlFor:I,id:P,children:k.current.getLocaleText("filterPanelColumns")}),(0,Ot.jsx)(L.components.BaseSelect,(0,ft.Z)({labelId:P,id:I,label:k.current.getLocaleText("filterPanelColumns"),value:u.columnField||"",onChange:V,native:Z},null==(a=L.componentsProps)?void 0:a.baseSelect,{children:z.map((e=>(0,Ot.jsx)(j,{value:e.field,children:cO(e)},e.field)))}))]})),(0,Ot.jsxs)(sO,(0,ft.Z)({variant:"standard",as:L.components.BaseFormControl},U,C,{className:(0,gt.default)(M.operatorInput,U.className,C.className),children:[(0,Ot.jsx)(ew,{htmlFor:A,id:N,children:k.current.getLocaleText("filterPanelOperators")}),(0,Ot.jsx)(L.components.BaseSelect,(0,ft.Z)({labelId:N,label:k.current.getLocaleText("filterPanelOperators"),id:A,value:u.operatorValue,onChange:W,native:Z,inputRef:D},null==(l=L.componentsProps)?void 0:l.baseSelect,{children:null==G||null==(c=G.filterOperators)?void 0:c.map((e=>(0,Ot.jsx)(j,{value:e.value,children:e.label||k.current.getLocaleText(`filterOperator${(0,Tt.Z)(e.value)}`)},e.value)))}))]})),(0,Ot.jsx)(aO,(0,ft.Z)({variant:"standard",as:L.components.BaseFormControl},U,F,{className:(0,gt.default)(M.valueInput,U.className,F.className),children:null!=q&&q.InputComponent?(0,Ot.jsx)(q.InputComponent,(0,ft.Z)({apiRef:k,item:u,applyValue:p,focusElementRef:x},q.InputComponentProps,H)):null}))]}))})),hO=["linkOperators","columnsSort","filterFormProps","children"],pO=t.forwardRef((function(e,r){var n;const o=gv(),i=vv(),s=pv(o,t_),a=pv(o,uv),l=t.useRef(null),{linkOperators:c=[rC.And,rC.Or],columnsSort:u,filterFormProps:d}=e,h=(0,pt.Z)(e,hO),p=t.useCallback((e=>{o.current.upsertFilterItem(e)}),[o]),f=t.useCallback((e=>{o.current.setFilterLinkOperator(e)}),[o]),g=t.useCallback((()=>{const e=a.find((e=>{var t;return null==(t=e.filterOperators)?void 0:t.length}));return e?{columnField:e.field,operatorValue:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}:null}),[a]),m=t.useMemo((()=>{if(s.items.length)return s.items;const e=g();return e?[e]:[]}),[s.items,g]),v=m.length>1,_=t.useCallback((e=>{const t=1===m.length;o.current.deleteFilterItem(e),t&&o.current.hideFilterPanel()}),[o,m.length]);return t.useEffect((()=>{c.length>0&&s.linkOperator&&!c.includes(s.linkOperator)&&f(c[0])}),[c,f,s.linkOperator]),t.useEffect((()=>{m.length>0&&l.current.focus()}),[m.length]),(0,Ot.jsxs)(Jk,(0,ft.Z)({ref:r},h,{children:[(0,Ot.jsx)(Vk,{children:m.map(((e,t)=>(0,Ot.jsx)(dO,(0,ft.Z)({item:e,applyFilterChanges:p,deleteFilter:_,hasMultipleFilters:v,showMultiFilterOperators:t>0,multiFilterOperator:s.linkOperator,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:f,focusElementRef:t===m.length-1?l:null,linkOperators:c,columnsSort:u},d),null==e.id?t:e.id)))}),!i.disableMultipleColumnsFiltering&&(0,Ot.jsx)(Kk,{children:(0,Ot.jsx)(i.components.BaseButton,(0,ft.Z)({onClick:()=>{const e=g();e&&o.current.upsertFilterItems([...m,e])},startIcon:(0,Ot.jsx)(Dy,{})},null==(n=i.componentsProps)?void 0:n.baseButton,{children:o.current.getLocaleText("filterPanelAddFilter")}))})]}))}));function fO(e){return(0,Rt.Z)("MuiFormControlLabel",e)}const gO=(0,wt.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),mO=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],vO=(0,St.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${gO.label}`]:t.label},t.root,t[`labelPlacement${(0,Tt.Z)(r.labelPlacement)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${gO.disabled}`]:{cursor:"default"}},"start"===t.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===t.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===t.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${gO.label}`]:{[`&.${gO.disabled}`]:{color:(e.vars||e).palette.text.disabled}}}))),_O=t.forwardRef((function(e,r){var n;const o=(0,Ct.Z)({props:e,name:"MuiFormControlLabel"}),{className:i,componentsProps:s={},control:a,disabled:l,disableTypography:c,label:u,labelPlacement:d="end",slotProps:h={}}=o,p=(0,pt.Z)(o,mO),f=ay();let g=l;void 0===g&&void 0!==a.props.disabled&&(g=a.props.disabled),void 0===g&&f&&(g=f.disabled);const m={disabled:g};["checked","name","onChange","value","inputRef"].forEach((e=>{void 0===a.props[e]&&void 0!==o[e]&&(m[e]=o[e])}));const v=iy({props:o,muiFormControl:f,states:["error"]}),_=(0,ft.Z)({},o,{disabled:g,labelPlacement:d,error:v.error}),y=(e=>{const{classes:t,disabled:r,labelPlacement:n,error:o}=e,i={root:["root",r&&"disabled",`labelPlacement${(0,Tt.Z)(n)}`,o&&"error"],label:["label",r&&"disabled"]};return(0,Et.Z)(i,fO,t)})(_),b=null!=(n=h.typography)?n:s.typography;let E=u;return null==E||E.type===Mt||c||(E=(0,Ot.jsx)(Mt,(0,ft.Z)({component:"span"},b,{className:(0,gt.default)(y.label,null==b?void 0:b.className),children:E}))),(0,Ot.jsxs)(vO,(0,ft.Z)({className:(0,gt.default)(y.root,i),ownerState:_,ref:r},p,{children:[t.cloneElement(a,m),E]}))})),yO=_O,bO=["className"],EO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,t)=>t.panelHeader})((({theme:e})=>({padding:e.spacing(1)})));function SO(e){const{className:t}=e,r=(0,pt.Z)(e,bO),n=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["panelHeader"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(EO,(0,ft.Z)({className:(0,gt.default)(t,n.root)},r))}const CO=["sort","searchPredicate","autoFocusSearchField"],TO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,t)=>t.columnsPanel})((()=>({padding:"8px 0px 8px 8px"}))),wO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,t)=>t.columnsPanelRow})((({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${Kw.root}`]:{marginRight:e.spacing(.5)}}))),RO=((0,St.ZP)(Ds)({justifyContent:"flex-end"}),new Intl.Collator),kO=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1,OO=["children","className","classes"],IO=(0,wt.Z)("MuiDataGrid",["panel","paper"]),PO=(0,St.ZP)(ac,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})((({theme:e})=>({zIndex:e.zIndex.modal}))),AO=(0,St.ZP)(Ko,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})((({theme:e})=>({backgroundColor:e.palette.background.paper,minWidth:300,maxHeight:450,display:"flex"}))),NO=t.forwardRef(((e,r)=>{var n;const{children:o,className:i}=e,s=(0,pt.Z)(e,OO),a=gv(),l=IO,[c,u]=t.useState(!1),d=t.useCallback((()=>{a.current.hidePreferences()}),[a]),h=t.useCallback((e=>{CE(e.key)&&a.current.hidePreferences()}),[a]),p=t.useMemo((()=>[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{u(!0)},effect:()=>()=>{u(!1)}}]),[]),f=null==(n=a.current.columnHeadersContainerElementRef)?void 0:n.current;return f?(0,Ot.jsx)(PO,(0,ft.Z)({ref:r,placement:"bottom-start",className:(0,gt.default)(i,l.panel),anchorEl:f,modifiers:p},s,{children:(0,Ot.jsx)(YE,{mouseEvent:"onMouseUp",onClickAway:d,children:(0,Ot.jsx)(AO,{className:l.paper,elevation:8,onKeyDown:h,children:c&&o})})})):null})),LO=["selected","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","cellFocus","cellTabIndex","editRowsState","isLastVisible","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],MO=["changeReason"],xO=({width:e})=>{if(!e)return null;const t={width:e};return(0,Ot.jsx)("div",{className:"MuiDataGrid-cell",style:t})},DO=t.forwardRef((function(e,r){var n;const{selected:o,rowId:i,row:s,index:a,style:l,position:c,rowHeight:u,className:d,visibleColumns:h,renderedColumns:p,containerWidth:f,firstColumnToRender:g,cellFocus:m,cellTabIndex:v,editRowsState:_,isLastVisible:y=!1,onClick:b,onDoubleClick:E,onMouseEnter:S,onMouseLeave:C}=e,T=(0,pt.Z)(e,LO),w=gv(),R=t.useRef(null),k=vv(),O=gC(w,k),I=pv(w,cv),P=pv(w,Xv),A=pv(w,Lv),N=pv(w,Sv),L=(0,Gr.Z)(R,r),M=a+N+2,{hasScrollX:x,hasScrollY:D}=null!=(n=w.current.getRootDimensions())?n:{hasScrollX:!1,hasScrollY:!1},B=(e=>{const{editable:t,editing:r,selected:n,isLastVisible:o,rowHeight:i,classes:s}=e,a={root:["row",n&&"selected",t&&"row--editable",r&&"row--editing",o&&"row--lastVisible","auto"===i&&"row--dynamicHeight"]};return(0,Et.Z)(a,Gm,s)})({selected:o,isLastVisible:y,classes:k.classes,editing:w.current.getRowMode(i)===DE.Edit,editable:k.editMode===ME.Row,rowHeight:u});t.useLayoutEffect((()=>{"auto"===u&&R.current&&"undefined"==typeof ResizeObserver&&w.current.unstable_storeRowHeightMeasurement(i,R.current.clientHeight,c)}),[w,u,i,c]),t.useLayoutEffect((()=>{if(O.range){const e=w.current.getRowIndexRelativeToVisibleRows(i);null!=e&&w.current.unstable_setLastMeasuredRowIndex(e)}const e=R.current;if(!e||"auto"!==u||"undefined"==typeof ResizeObserver)return;const t=new ResizeObserver((e=>{const[t]=e,r=t.borderBoxSize&&t.borderBoxSize.length>0?t.borderBoxSize[0].blockSize:t.contentRect.height;w.current.unstable_storeRowHeightMeasurement(i,r,c)}));return t.observe(e),()=>t.disconnect()}),[w,O.range,a,u,i,c]);const U=t.useCallback(((e,t)=>r=>{(1!==r.target.nodeType||r.currentTarget.contains(r.target))&&w.current.getRow(i)&&(w.current.publishEvent(e,w.current.getRowParams(i),r),t&&t(r))}),[w,i]),Z=t.useCallback((e=>{const t=function(e,t){return e.closest(`.${t}`)}(e.target,qm.cell),r=null==t?void 0:t.getAttribute("data-field");if(r){if(r===qS.field)return;if(r===vC)return;if("__reorder__"===r)return;if(w.current.getCellMode(i,r)===xE.Edit)return;if(w.current.getColumn(r).type===tS)return}U("rowClick",b)(e)}),[w,b,U,i]),j=t.useCallback(((e,t)=>{var r;const n=w.current.getCellParams(i,e.field),o=[],a=k.disableColumnReorder&&e.disableReorder||!k.rowReordering&&!!P.length&&A>1&&Object.keys(_).length>0;e.cellClassName&&o.push((0,gt.default)("function"==typeof e.cellClassName?e.cellClassName(n):e.cellClassName));const l=_[i]?_[i][e.field]:null;let c=null;var d;if(null==l&&e.renderCell&&(c=e.renderCell((0,ft.Z)({},n,{api:w.current})),o.push((0,gt.default)(qm["cell--withRenderer"],null==(d=k.classes)?void 0:d["cell--withRenderer"]))),null!=l&&e.renderEditCell){var h;let t=s;w.current.unstable_getRowWithUpdatedValues&&(t=w.current.unstable_getRowWithUpdatedValues(i,e.field));const r=(0,pt.Z)(l,MO),a=(0,ft.Z)({},n,{row:t},r,{api:w.current});c=e.renderEditCell(a),o.push((0,gt.default)(qm["cell--editing"],null==(h=k.classes)?void 0:h["cell--editing"]))}k.getCellClassName&&o.push(k.getCellClassName(n));const p=null!==m&&m.id===i&&m.field===e.field,f=null!==v&&v.id===i&&v.field===e.field&&"view"===n.cellMode?0:-1;return(0,Ot.jsx)(k.components.Cell,(0,ft.Z)({value:n.value,field:e.field,width:t.width,rowId:i,height:u,showRightBorder:t.showRightBorder,formattedValue:n.formattedValue,align:e.align||"left",cellMode:n.cellMode,colIndex:t.indexRelativeToAllColumns,isEditable:n.isEditable,hasFocus:p,tabIndex:f,className:(0,gt.default)(o),colSpan:t.colSpan,disableDragEvents:a},null==(r=k.componentsProps)?void 0:r.cell,{children:c}),e.field)}),[w,v,_,m,k,s,u,i,A,P.length]),H=w.current.unstable_getRowInternalSizes(i);let F=u;if("auto"===F&&H){let e=0;const t=Object.entries(H).reduce(((t,[r,n])=>/^base[A-Z]/.test(r)?(e+=1,n>t?n:t):t),0);t>0&&e>1&&(F=t)}const z=(0,ft.Z)({},l,{maxHeight:"auto"===u?"none":u,minHeight:F});if(null!=H&&H.spacingTop&&(z["border"===k.rowSpacingType?"borderTopWidth":"marginTop"]=H.spacingTop),null!=H&&H.spacingBottom){const e="border"===k.rowSpacingType?"borderBottomWidth":"marginBottom";let t=z[e];"number"!=typeof t&&(t=parseInt(t||"0",10)),t+=H.spacingBottom,z[e]=t}const G=w.current.unstable_applyPipeProcessors("rowClassName",[],i);if("function"==typeof k.getRowClassName){var q;const e=a-((null==(q=O.range)?void 0:q.firstRowIndex)||0),t=(0,ft.Z)({},w.current.getRowParams(i),{isFirstVisible:0===e,isLastVisible:e===O.rows.length-1,indexRelativeToCurrentPage:e});G.push(k.getRowClassName(t))}const V=function(e,t,r){const n=function(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}}(e);return()=>t+(r-t)*n()}(1e4,20,80),W=[];for(let e=0;e<p.length;e+=1){const t=p[e],r=g+e,n=r===h.length-1,o=n?!(n&&x&&!D)&&k.disableExtendRowFullWidth:k.showCellRightBorder,a=w.current.unstable_getCellColSpanInfo(i,r);if(a&&!a.spannedByColSpan)if(s){const{colSpan:e,width:n}=a.cellProps,i={width:n,colSpan:e,showRightBorder:o,indexRelativeToAllColumns:r};W.push(j(t,i))}else{const{width:e}=a.cellProps,r=Math.round(V());W.push((0,Ot.jsx)(k.components.SkeletonCell,{width:e,contentWidth:r,field:t.field,align:t.align},t.field))}}const Y=f-I,K=s?{onClick:Z,onDoubleClick:U("rowDoubleClick",E),onMouseEnter:U("rowMouseEnter",S),onMouseLeave:U("rowMouseLeave",C)}:null;return(0,Ot.jsxs)("div",(0,ft.Z)({ref:L,"data-id":i,"data-rowindex":a,role:"row",className:(0,gt.default)(...G,B.root,d),"aria-rowindex":M,"aria-selected":o,style:z},K,T,{children:[W,Y>0&&(0,Ot.jsx)(xO,{width:Y})]}))})),BO=["sortingOrder"],UO=t.memo((function(e){const{sortingOrder:t}=e,r=(0,pt.Z)(e,BO),n=vv(),[o]=t,i="asc"===o?n.components.ColumnSortedAscendingIcon:n.components.ColumnSortedDescendingIcon;return i?(0,Ot.jsx)(i,(0,ft.Z)({},r)):null})),ZO=["error","hasError","errorInfo"],jO=t.forwardRef((function(e,t){const{error:r}=e,n=(0,pt.Z)(e,ZO),o=gv(),i=o.current.getLocaleText("errorOverlayDefaultLabel"),s=pv(o,bv);return(0,Ot.jsx)(rk,(0,ft.Z)({ref:t,sx:{width:"100%",minHeight:2*s}},n,{children:(null==r?void 0:r.message)||i}))})),HO=t.forwardRef((function(e,t){const r=gv().current.getLocaleText("noResultsOverlayLabel");return(0,Ot.jsx)(rk,(0,ft.Z)({ref:t},e,{children:r}))})),FO={BooleanCellTrueIcon:Hy,BooleanCellFalseIcon:xy,ColumnMenuIcon:My,OpenFilterButtonIcon:Ry,FilterPanelDeleteIcon:xy,ColumnFilteredIcon:ky,ColumnSelectorIcon:Iy,ColumnUnsortedIcon:UO,ColumnSortedAscendingIcon:Sy,ColumnSortedDescendingIcon:Cy,ColumnResizeIcon:Py,DensityCompactIcon:Ay,DensityStandardIcon:Ny,DensityComfortableIcon:Ly,ExportIcon:jy,MoreActionsIcon:Fy,TreeDataCollapseIcon:wy,TreeDataExpandIcon:Ty,GroupingCriteriaCollapseIcon:wy,GroupingCriteriaExpandIcon:Ty,DetailPanelExpandIcon:Dy,DetailPanelCollapseIcon:By,RowReorderIcon:Zy,QuickFilterIcon:Oy,QuickFilterClearIcon:xy},zO=(0,ft.Z)({},FO,{BaseCheckbox:ST,BaseTextField:Ww,BaseFormControl:iw,BaseSelect:Hw,BaseSwitch:rR,BaseButton:Un,BaseTooltip:bc,BasePopper:ac,Cell:function(e){const{align:r,children:n,colIndex:o,cellMode:i,field:s,formattedValue:a,hasFocus:l,height:c,isEditable:u,rowId:d,tabIndex:h,value:p,width:f,className:g,showRightBorder:m,colSpan:v,disableDragEvents:_,onClick:y,onDoubleClick:b,onMouseDown:E,onMouseUp:S,onKeyDown:C,onDragEnter:T,onDragOver:w}=e,R=(0,pt.Z)(e,nR),k=null==a?p:a,O=t.useRef(null),I=t.useRef(null),P=gv(),A=(e=>{const{align:t,showRightBorder:r,isEditable:n,classes:o}=e,i={root:["cell",`cell--text${(0,Tt.Z)(t)}`,n&&"cell--editable",r&&"withBorder"],content:["cellContent"]};return(0,Et.Z)(i,Gm,o)})({align:r,showRightBorder:m,isEditable:u,classes:vv().classes}),N=t.useCallback((e=>t=>{const r=P.current.getCellParams(d,s||"");P.current.publishEvent(e,r,t),S&&S(t)}),[P,s,S,d]),L=t.useCallback((e=>t=>{const r=P.current.getCellParams(d,s||"");P.current.publishEvent(e,r,t),E&&E(t)}),[P,s,E,d]),M=t.useCallback(((e,t)=>r=>{if(!r.currentTarget.contains(r.target))return;if(!P.current.getRow(d))return;const n=P.current.getCellParams(d,s||"");P.current.publishEvent(e,n,r),t&&t(r)}),[P,s,d]),x={minWidth:f,maxWidth:f,minHeight:c,maxHeight:"auto"===c?"none":c};t.useEffect((()=>{if(!l||i===xE.Edit)return;const e=(0,Bs.Z)(P.current.rootElementRef.current);if(O.current&&!O.current.contains(e.activeElement)){const e=O.current.querySelector('[tabindex="0"]'),t=I.current||e||O.current;if(void 0===oR&&document.createElement("div").focus({get preventScroll(){return oR=!0,!1}}),oR)t.focus({preventScroll:!0});else{const e=P.current.getScrollPosition();t.focus(),P.current.scroll(e)}}}),[l,i,P]);let D=R.onFocus;const B="actions"===P.current.getColumn(s).type,U=_?null:{onDragEnter:M("cellDragEnter",T),onDragOver:M("cellDragOver",w)};return(0,Ot.jsx)("div",(0,ft.Z)({ref:O,className:(0,gt.default)(g,A.root),role:"cell","data-field":s,"data-colindex":o,"aria-colindex":o+1,"aria-colspan":v,style:x,tabIndex:"view"!==i&&u||B?-1:h,onClick:M("cellClick",y),onDoubleClick:M("cellDoubleClick",b),onMouseDown:L("cellMouseDown"),onMouseUp:N("cellMouseUp"),onKeyDown:M("cellKeyDown",C)},U,R,{onFocus:D,children:(()=>{if(null==n){const e=null==k?void 0:k.toString();return(0,Ot.jsx)("div",{title:e,className:A.content,children:e})}return t.isValidElement(n)&&B?t.cloneElement(n,{focusElementRef:I}):n})()}))},SkeletonCell:function(e){const{align:t,width:r,contentWidth:n}=e,o=(0,pt.Z)(e,vR),i=(e=>{const{align:t,classes:r}=e,n={root:["cell","cellSkeleton",`cell--text${(0,Tt.Z)(t)}`]};return(0,Et.Z)(n,Gm,r)})({classes:vv().classes,align:t});return(0,Ot.jsx)("div",(0,ft.Z)({className:i.root,style:{width:r}},o,{children:(0,Ot.jsx)(mR,{width:`${n}%`})}))},ColumnHeaderFilterIconButton:function(e){var r;const{counter:n,field:o,onClick:i}=e,s=gv(),a=vv(),l=(e=>{const{classes:t}=e;return(0,Et.Z)({icon:["filterIcon"]},Gm,t)})((0,ft.Z)({},e,{classes:a.classes})),c=t.useCallback((e=>{e.preventDefault(),e.stopPropagation();const{open:t,openedPanelValue:r}=PC(s.current.state);t&&r===dS.filters?s.current.hideFilterPanel():s.current.showFilterPanel(),i&&i(s.current.getColumnHeaderParams(o),e)}),[s,o,i]);if(!n)return null;const u=(0,Ot.jsx)(Ds,{onClick:c,color:"default","aria-label":s.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,children:(0,Ot.jsx)(a.components.ColumnFilteredIcon,{className:l.icon,fontSize:"small"})});return(0,Ot.jsx)(a.components.BaseTooltip,(0,ft.Z)({title:s.current.getLocaleText("columnHeaderFiltersTooltipActive")(n),enterDelay:1e3},null==(r=a.componentsProps)?void 0:r.baseTooltip,{children:(0,Ot.jsxs)(bR,{children:[n>1&&(0,Ot.jsx)(bg,{badgeContent:n,color:"default",children:u}),1===n&&u]})}))},ColumnMenu:kR,ErrorOverlay:jO,Footer:BR,Header:UR,Toolbar:null,PreferencesPanel:ZR,LoadingOverlay:nk,NoResultsOverlay:HO,NoRowsOverlay:ok,Pagination:zk,FilterPanel:pO,ColumnsPanel:function(e){var r,n,o;const i=gv(),s=t.useRef(null),a=pv(i,iv),l=pv(i,sv),c=vv(),[u,d]=t.useState(""),h=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Gm,t)})({classes:c.classes}),{sort:p,searchPredicate:f=kO,autoFocusSearchField:g=!0}=e,m=(0,pt.Z)(e,CO),v=t.useMemo((()=>{switch(p){case"asc":return[...a].sort(((e,t)=>RO.compare(e.headerName||e.field,t.headerName||t.field)));case"desc":return[...a].sort(((e,t)=>-RO.compare(e.headerName||e.field,t.headerName||t.field)));default:return a}}),[a,p]),_=e=>{const{name:t}=e.target;i.current.setColumnVisibility(t,!1===l[t])},y=t.useCallback((e=>{if(i.current.unstable_caches.columns.isUsingColumnVisibilityModel){const t=sv(i),r=(0,ft.Z)({},t);return a.forEach((t=>{t.hideable&&(e?delete r[t.field]:r[t.field]=!1)})),i.current.setColumnVisibilityModel(r)}return i.current.updateColumns(a.map((t=>!1!==t.hideable?{field:t.field,hide:!e}:t)))}),[i,a]),b=t.useCallback((e=>{d(e.target.value)}),[]),E=t.useMemo((()=>{if(!u)return v;const e=u.toLowerCase();return v.filter((t=>f(t,e)))}),[v,u,f]),S=t.useRef(null);t.useEffect((()=>{g?s.current.focus():S.current&&"function"==typeof S.current.focus&&S.current.focus()}),[g]);let C=!1;const T=e=>!1===C&&!1!==e.hideable&&(C=!0,!0);return(0,Ot.jsxs)(Jk,(0,ft.Z)({},m,{children:[(0,Ot.jsx)(SO,{children:(0,Ot.jsx)(c.components.BaseTextField,(0,ft.Z)({label:i.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:i.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:s,value:u,onChange:b,variant:"standard",fullWidth:!0},null==(r=c.componentsProps)?void 0:r.baseTextField))}),(0,Ot.jsx)(Vk,{children:(0,Ot.jsx)(TO,{className:h.root,children:E.map((e=>{var t;return(0,Ot.jsxs)(wO,{className:h.columnsPanelRow,children:[(0,Ot.jsx)(yO,{control:(0,Ot.jsx)(c.components.BaseSwitch,(0,ft.Z)({disabled:!1===e.hideable,checked:!1!==l[e.field],onClick:_,name:e.field,size:"small",inputRef:T(e)?S:void 0},null==(t=c.componentsProps)?void 0:t.baseSwitch)),label:e.headerName||e.field}),!c.disableColumnReorder&&!1]},e.field)}))})}),(0,Ot.jsxs)(Kk,{children:[(0,Ot.jsx)(c.components.BaseButton,(0,ft.Z)({onClick:()=>y(!1)},null==(n=c.componentsProps)?void 0:n.baseButton,{children:i.current.getLocaleText("columnsPanelHideAllButton")})),(0,Ot.jsx)(c.components.BaseButton,(0,ft.Z)({onClick:()=>y(!0)},null==(o=c.componentsProps)?void 0:o.baseButton,{children:i.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))},Panel:NO,Row:DO}),GO={apiRef:void 0,disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},qO={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,density:pS.Standard,disableExtendRowFullWidth:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleSelection:!1,disableMultipleColumnsSorting:!1,disableSelectionOnClick:!1,disableVirtualization:!1,disableIgnoreModificationsIfProcessingProps:!1,editMode:ME.Cell,filterMode:tC,headerHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:tC,rowHeight:52,rowsPerPageOptions:[25,50,100],rowSpacingType:"margin",showCellRightBorder:!1,showColumnRightBorder:!1,sortingOrder:["asc","desc",null],sortingMode:tC,throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1},VO=["className"],WO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({overflow:"auto",position:"relative","@media print":{overflow:"hidden"}}),YO=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,VO),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["virtualScroller"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(WO,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))})),KO=["className","style"],$O=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),QO=t.forwardRef((function(e,t){const{className:r,style:n}=e,o=(0,pt.Z)(e,KO),i=vv(),s=(e=>{const{classes:t,overflowedContent:r}=e,n={root:["virtualScrollerContent",r&&"virtualScrollerContent--overflowed"]};return(0,Et.Z)(n,Gm,t)})({classes:i.classes,overflowedContent:!i.autoHeight&&"auto"===(null==n?void 0:n.minHeight)});return(0,Ot.jsx)($O,(0,ft.Z)({ref:t,className:(0,gt.default)(s.root,r),style:n},o))})),XO=["className"],JO=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),eI=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,XO),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["virtualScrollerRenderZone"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(JO,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))})),tI=["style"];function rI(e,t,r=0,n=t.length){if(t.length<=0)return-1;if(r>=n)return r;const o=r+Math.floor((n-r)/2);return e<=t[o]?rI(e,t,r,o):rI(e,t,o+1,n)}const nI=({firstIndex:e,lastIndex:t,buffer:r,minFirstIndex:n,maxLastIndex:o})=>[b_(e-r,n,o),b_(t+r,n,o)],oI=["className","disableVirtualization"],iI=t.forwardRef((function(e,r){const{className:n,disableVirtualization:o}=e,i=(0,pt.Z)(e,oI),{getRootProps:s,getContentProps:a,getRenderZoneProps:l,getRows:c}=(e=>{var r,n;const o=gv(),i=vv(),s=pv(o,av),{ref:a,disableVirtualization:l,onRenderZonePositioning:c,renderZoneMinColumnIndex:u=0,renderZoneMaxColumnIndex:d=s.length,getRowProps:h}=e,p=pv(o,lv),f=pv(o,cv),g=pv(o,bv),m=pv(o,kS),v=pv(o,PS),_=pv(o,eC),y=pv(o,NC),b=pv(o,xS),E=gC(o,i),S=t.useRef(null),C=t.useRef(null),T=(0,Gr.Z)(a,C),[w,R]=t.useState(null),k=t.useRef(w),O=t.useRef({top:0,left:0}),[I,P]=t.useState({width:null,height:null}),A=t.useRef(f),N=t.useCallback((e=>{var t,r;const n=o.current.unstable_getLastMeasuredRowIndex();let i=n===1/0;null!=(t=E.range)&&t.lastRowIndex&&!i&&(i=n>=E.range.lastRowIndex);const s=b_(n-((null==(r=E.range)?void 0:r.firstRowIndex)||0),0,_.positions.length);return i||_.positions[s]>=e?rI(e,_.positions):function(e,t,r){let n=1;for(;r<t.length&&t[r]<e;)r+=n,n*=2;return rI(e,t,Math.floor(r/2),Math.min(r,t.length))}(e,_.positions,s)}),[o,null==(r=E.range)?void 0:r.firstRowIndex,null==(n=E.range)?void 0:n.lastRowIndex,_.positions]),L=t.useCallback((()=>{if(l)return{firstRowIndex:0,lastRowIndex:E.rows.length,firstColumnIndex:0,lastColumnIndex:s.length};const{top:e,left:t}=O.current,r=Math.min(N(e),_.positions.length-1),n=i.autoHeight?r+E.rows.length:N(e+I.height);let a=!1,c=0,u=p.length;const[d,h]=nI({firstIndex:r,lastIndex:n,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:i.rowBuffer});for(let e=d;e<h&&!a;e+=1){const t=E.rows[e];a=o.current.unstable_rowHasAutoHeight(t.id)}return a||(c=rI(t,p),u=rI(t+I.width,p)),{firstRowIndex:r,lastRowIndex:n,firstColumnIndex:c,lastColumnIndex:u}}),[l,N,_.positions.length,i.autoHeight,i.rowBuffer,E.rows,p,s.length,o,I]);(0,Gs.Z)((()=>{l?S.current.style.transform="translate3d(0px, 0px, 0px)":(C.current.scrollLeft=0,C.current.scrollTop=0)}),[l]),(0,Gs.Z)((()=>{P({width:C.current.clientWidth,height:C.current.clientHeight})}),[_.currentPageTotalHeight]);const M=t.useCallback((e=>{P({width:e.width,height:e.height})}),[]);L_(o,"resize",M);const x=t.useCallback((e=>{const[t,r]=nI({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:i.rowBuffer}),[n]=nI({firstIndex:e.firstColumnIndex,lastIndex:e.lastColumnIndex,minFirstIndex:u,maxLastIndex:d,buffer:i.columnBuffer}),s=cS({firstColumnToRender:n,apiRef:o,firstRowToRender:t,lastRowToRender:r,visibleRows:E.rows}),a=eC(o.current.state).positions[t],l=lv(o)[s];S.current.style.transform=`translate3d(${l}px, ${a}px, 0px)`,"function"==typeof c&&c({top:a,left:l})}),[o,E.rows,c,u,d,i.columnBuffer,i.rowBuffer]),D=t.useCallback((e=>{if(k.current&&((t=e)===(r=k.current)||t.firstRowIndex===r.firstRowIndex&&t.lastRowIndex===r.lastRowIndex&&t.firstColumnIndex===r.firstColumnIndex&&t.lastColumnIndex===r.lastColumnIndex))return void x(e);var t,r;R(e),x(e);const[n,s]=nI({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:i.rowBuffer});o.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:n,lastRowToRender:s}),k.current=e}),[o,R,k,E.rows.length,i.rowBuffer,x]);(0,Gs.Z)((()=>{if(null==I.width)return;const e=L();D(e);const{top:t,left:r}=O.current,n={top:t,left:r,renderContext:e};o.current.publishEvent("rowsScroll",n)}),[o,L,I.width,D]);const B=e=>{const{scrollTop:t,scrollLeft:r}=e.currentTarget;if(O.current.top=t,O.current.left=r,r<0||t<0||!k.current)return;const n=l?k.current:L(),s=Math.abs(n.firstRowIndex-k.current.firstRowIndex),a=Math.abs(n.lastRowIndex-k.current.lastRowIndex),c=Math.abs(n.firstColumnIndex-k.current.firstColumnIndex),u=Math.abs(n.lastColumnIndex-k.current.lastColumnIndex),d=s>=i.rowThreshold||a>=i.rowThreshold||c>=i.columnThreshold||u>=i.columnThreshold||A.current!==f;o.current.publishEvent("rowsScroll",{top:t,left:r,renderContext:d?n:k.current},e),d&&(Kn.flushSync((()=>{D(n)})),A.current=f)},U=e=>{o.current.publishEvent("virtualScrollerWheel",{},e)},Z=e=>{o.current.publishEvent("virtualScrollerTouchMove",{},e)},j=I.width&&f>I.width,H=t.useMemo((()=>{const e=Math.max(_.currentPageTotalHeight,1);let t=!1;null!=C&&C.current&&e<=(null==C?void 0:C.current.clientHeight)&&(t=!0);const r={width:j?f:"auto",height:e,minHeight:t?"100%":"auto"};return i.autoHeight&&0===E.rows.length&&(r.height=2*g),r}),[C,f,_.currentPageTotalHeight,E.rows.length,j,i.autoHeight,g]);t.useEffect((()=>{o.current.publishEvent("virtualScrollerContentSizeChange")}),[o,H]),i.autoHeight&&0===E.rows.length&&(H.height=2*g);const F={};j||(F.overflowX="hidden"),i.autoHeight&&(F.overflowY="hidden");const z=t.useCallback((()=>k.current),[]);return o.current.unstable_getRenderContext=z,{renderContext:w,updateRenderZonePosition:x,getRows:(e={renderContext:w})=>{const{renderContext:t,minFirstColumn:r=u,maxLastColumn:n=d,availableSpace:a=I.width,rowIndexOffset:c=0,position:p="center"}=e;if(!t||null==a)return null;const f=l?0:i.rowBuffer,g=l?0:i.columnBuffer,[_,S]=nI({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:E.rows.length,buffer:f}),C=[];if(e.rows)e.rows.forEach((e=>{C.push(e),o.current.unstable_calculateColSpan({rowId:e.id,minFirstColumn:r,maxLastColumn:n,columns:s})}));else{if(!E.range)return null;for(let e=_;e<S;e+=1){const t=E.rows[e];C.push(t),o.current.unstable_calculateColSpan({rowId:t.id,minFirstColumn:r,maxLastColumn:n,columns:s})}}const[T,R]=nI({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:r,maxLastIndex:n,buffer:g}),k=cS({firstColumnToRender:T,apiRef:o,firstRowToRender:_,lastRowToRender:S,visibleRows:E.rows}),O=s.slice(k,R),P=[];for(let e=0;e<C.length;e+=1){var A,N;const{id:t,model:r}=C[e],n=_+e===E.rows.length-1,l=o.current.unstable_rowHasAutoHeight(t)?"auto":o.current.unstable_getRowHeight(t);let u;u=null!=b[t]&&o.current.isRowSelectable(t),P.push((0,Ot.jsx)(i.components.Row,(0,ft.Z)({row:r,rowId:t,rowHeight:l,cellFocus:m,cellTabIndex:v,editRowsState:y,renderedColumns:O,visibleColumns:s,firstColumnToRender:k,lastColumnToRender:R,selected:u,index:c+((null==E||null==(A=E.range)?void 0:A.firstRowIndex)||0)+_+e,containerWidth:a,isLastVisible:n,position:p},"function"==typeof h?h(t,r):{},null==(N=i.componentsProps)?void 0:N.row),t))}return P},getRootProps:(e={})=>{let{style:t={}}=e,r=(0,pt.Z)(e,tI);return(0,ft.Z)({ref:T,onScroll:B,onWheel:U,onTouchMove:Z,style:(0,ft.Z)({},t,F)},r)},getContentProps:({style:e={}}={})=>({style:(0,ft.Z)({},e,H)}),getRenderZoneProps:()=>({ref:S})}})({ref:r,disableVirtualization:o});return(0,Ot.jsx)(YO,(0,ft.Z)({className:n},s(i),{children:(0,Ot.jsx)(QO,(0,ft.Z)({},a(),{children:(0,Ot.jsx)(eI,(0,ft.Z)({},l(),{children:c()}))}))}))}));function sI(e){const{direction:t,index:r,sortingOrder:n}=e,o=gv(),i=vv(),s=(e=>{const{classes:t}=e;return(0,Et.Z)({icon:["sortIcon"]},Gm,t)})((0,ft.Z)({},e,{classes:i.classes})),a=function(e,t,r,n){let o;const i={};return"asc"===t?o=e.ColumnSortedAscendingIcon:"desc"===t?o=e.ColumnSortedDescendingIcon:(o=e.ColumnUnsortedIcon,i.sortingOrder=n),o?(0,Ot.jsx)(o,(0,ft.Z)({fontSize:"small",className:r},i)):null}(i.components,t,s.icon,n);if(!a)return null;const l=(0,Ot.jsx)(Ds,{tabIndex:-1,"aria-label":o.current.getLocaleText("columnHeaderSortIconLabel"),title:o.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",children:a});return(0,Ot.jsxs)(bR,{children:[null!=r&&(0,Ot.jsx)(bg,{badgeContent:r,color:"default",children:l}),null==r&&l]})}const aI=t.memo(sI),lI=t.memo((e=>{const{column:r,open:n,columnMenuId:o,columnMenuButtonId:i,iconButtonRef:s}=e,a=gv(),l=vv(),c=(e=>{const{classes:t,open:r}=e,n={root:["menuIcon",r&&"menuOpen"],button:["menuIconButton"]};return(0,Et.Z)(n,Gm,t)})((0,ft.Z)({},e,{classes:l.classes})),u=t.useCallback((e=>{e.preventDefault(),e.stopPropagation(),a.current.toggleColumnMenu(r.field)}),[a,r.field]);return(0,Ot.jsx)("div",{className:c.root,children:(0,Ot.jsx)(Ds,{ref:s,tabIndex:-1,className:c.button,"aria-label":a.current.getLocaleText("columnMenuLabel"),title:a.current.getLocaleText("columnMenuLabel"),size:"small",onClick:u,"aria-expanded":n?"true":void 0,"aria-haspopup":"true","aria-controls":o,id:i,children:(0,Ot.jsx)(l.components.ColumnMenuIcon,{fontSize:"small"})})})}));function cI({columnMenuId:e,columnMenuButtonId:r,ContentComponent:n,contentComponentProps:o,field:i,open:s,target:a,onExited:l}){const c=gv(),u=c.current.getColumn(i),d=t.useCallback((e=>{e.stopPropagation(),c.current.hideColumnMenu()}),[c]);return a?(0,Ot.jsx)(XE,{placement:"bottom-"+("right"===u.align?"start":"end"),open:s,target:a,onClickAway:d,onExited:l,children:(0,Ot.jsx)(n,(0,ft.Z)({currentColumn:u,hideMenu:d,open:s,id:e,labelledby:r},o))}):null}const uI=["className"],dI=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})((({theme:e})=>({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:e.typography.fontWeightMedium}))),hI=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,uI),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["columnHeaderTitle"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(dI,(0,ft.Z)({ref:t,className:(0,gt.default)(o.root,r)},n))}));function pI(e){var r;const{label:n,description:o,columnWidth:i}=e,s=vv(),a=t.useRef(null),[l,c]=t.useState("");return t.useEffect((()=>{if(!o&&a&&a.current){const t=(e=a.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;c(t?n:"")}var e}),[a,i,o,n]),(0,Ot.jsx)(s.components.BaseTooltip,(0,ft.Z)({title:o||l},null==(r=s.componentsProps)?void 0:r.baseTooltip,{children:(0,Ot.jsx)(hI,{ref:a,children:n})}))}const fI=["resizable","resizing","height","side"];var gI;function mI(e){const{height:r,side:n=gI.Right}=e,o=(0,pt.Z)(e,fI),i=vv(),s=(e=>{const{resizable:t,resizing:r,classes:n,side:o}=e,i={root:["columnSeparator",t&&"columnSeparator--resizable",r&&"columnSeparator--resizing",o&&`columnSeparator--side${(0,Tt.Z)(o)}`],icon:["iconSeparator"]};return(0,Et.Z)(i,Gm,n)})((0,ft.Z)({},e,{side:n,classes:i.classes})),a=t.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]);return(0,Ot.jsx)("div",(0,ft.Z)({className:s.root,style:{minHeight:r,opacity:i.showColumnRightBorder?0:1}},o,{onClick:a,children:(0,Ot.jsx)(i.components.ColumnResizeIcon,{className:s.icon})}))}!function(e){e.Left="left",e.Right="right"}(gI||(gI={}));const vI=t.memo(mI),_I=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","disableHeaderSeparator"],yI=t.forwardRef((function(e,r){const{classes:n,columnMenuOpen:o,colIndex:i,height:s,isResizing:a,sortDirection:l,hasFocus:c,tabIndex:u,separatorSide:d,isDraggable:h,headerComponent:p,description:f,width:g,columnMenuIconButton:m=null,columnMenu:v=null,columnTitleIconButtons:_=null,headerClassName:y,label:b,resizable:E,draggableContainerProps:S,columnHeaderSeparatorProps:C,disableHeaderSeparator:T}=e,w=(0,pt.Z)(e,_I),R=gv(),k=vv(),O=t.useRef(null),[I,P]=t.useState(o),A=(0,Gr.Z)(O,r);let N="none";return null!=l&&(N="asc"===l?"ascending":"descending"),t.useEffect((()=>{I||P(o)}),[I,o]),t.useLayoutEffect((()=>{const e=R.current.state.columnMenu;if(c&&!e.open){const e=O.current.querySelector('[tabindex="0"]')||O.current;null==e||e.focus(),R.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[R,c]),(0,Ot.jsxs)("div",(0,ft.Z)({ref:A,className:(0,gt.default)(n.root,y),style:{height:s,width:g,minWidth:g,maxWidth:g},role:"columnheader",tabIndex:u,"aria-colindex":i+1,"aria-sort":N,"aria-label":null==p?b:void 0},w,{children:[(0,Ot.jsxs)("div",(0,ft.Z)({className:n.draggableContainer,draggable:h},S,{children:[(0,Ot.jsxs)("div",{className:n.titleContainer,children:[(0,Ot.jsx)("div",{className:n.titleContainerContent,children:void 0!==p?p:(0,Ot.jsx)(pI,{label:b,description:f,columnWidth:g})}),_]}),m]})),!T&&(0,Ot.jsx)(vI,(0,ft.Z)({resizable:!k.disableColumnResize&&!!E,resizing:a,height:s,side:d},C)),v]}))}));function bI(e){var r,n,o,i,s;const{column:a,columnMenuOpen:l,colIndex:c,headerHeight:u,isResizing:d,isLastColumn:h,sortDirection:p,sortIndex:f,filterItemsCounter:g,hasFocus:m,tabIndex:v,extendRowFullWidth:_,disableReorder:y,separatorSide:b}=e,E=gv(),S=vv(),C=t.useRef(null),T=(0,lc.Z)(),w=(0,lc.Z)(),R=t.useRef(null),[k,O]=t.useState(l),{hasScrollX:I,hasScrollY:P}=null!=(r=E.current.getRootDimensions())?r:{hasScrollX:!1,hasScrollY:!1},A=t.useMemo((()=>!S.disableColumnReorder&&!y&&!a.disableReorder),[S.disableColumnReorder,y,a.disableReorder]);let N;a.renderHeader&&(N=a.renderHeader(E.current.getColumnHeaderParams(a.field)));const L=h?!(h&&I&&!P||_):S.showColumnRightBorder,M=(e=>{const{column:t,classes:r,isDragging:n,sortDirection:o,showRightBorder:i,filterItemsCounter:s}=e,a=null!=o,l=null!=s&&s>0,c="number"===t.type,u={root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",n&&"columnHeader--moving",a&&"columnHeader--sorted",l&&"columnHeader--filtered",c&&"columnHeader--numeric",i&&"withBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,Et.Z)(u,Gm,r)})((0,ft.Z)({},e,{classes:S.classes,showRightBorder:L})),x=t.useCallback((e=>t=>{t.currentTarget.contains(t.target)&&E.current.publishEvent(e,E.current.getColumnHeaderParams(a.field),t)}),[E,a.field]),D=t.useMemo((()=>({onClick:x("columnHeaderClick"),onDoubleClick:x("columnHeaderDoubleClick"),onMouseOver:x("columnHeaderOver"),onMouseOut:x("columnHeaderOut"),onMouseEnter:x("columnHeaderEnter"),onMouseLeave:x("columnHeaderLeave"),onKeyDown:x("columnHeaderKeyDown"),onFocus:x("columnHeaderFocus"),onBlur:x("columnHeaderBlur")})),[x]),B=t.useMemo((()=>A?{onDragStart:x("columnHeaderDragStart"),onDragEnter:x("columnHeaderDragEnter"),onDragOver:x("columnHeaderDragOver"),onDragEnd:x("columnHeaderDragEnd")}:{}),[A,x]),U=t.useMemo((()=>({onMouseDown:x("columnSeparatorMouseDown")})),[x]);t.useEffect((()=>{k||O(l)}),[k,l]);const Z=t.useCallback((()=>{O(!1)}),[]),j=!S.disableColumnMenu&&!a.disableColumnMenu&&(0,Ot.jsx)(lI,{column:a,columnMenuId:T,columnMenuButtonId:w,open:k,iconButtonRef:R}),H=(0,Ot.jsx)(cI,{columnMenuId:T,columnMenuButtonId:w,field:a.field,open:l,target:R.current,ContentComponent:S.components.ColumnMenu,contentComponentProps:null==(n=S.componentsProps)?void 0:n.columnMenu,onExited:Z}),F=null!=(o=a.sortingOrder)?o:S.sortingOrder,z=(0,Ot.jsxs)(t.Fragment,{children:[!S.disableColumnFilter&&(0,Ot.jsx)(S.components.ColumnHeaderFilterIconButton,(0,ft.Z)({field:a.field,counter:g},null==(i=S.componentsProps)?void 0:i.columnHeaderFilterIconButton)),a.sortable&&!a.hideSortIcons&&(0,Ot.jsx)(aI,{direction:p,index:f,sortingOrder:F})]});t.useLayoutEffect((()=>{const e=E.current.state.columnMenu;if(m&&!e.open){const e=C.current.querySelector('[tabindex="0"]')||C.current;null==e||e.focus(),E.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[E,m]);const G="function"==typeof a.headerClassName?a.headerClassName({field:a.field,colDef:a}):a.headerClassName,q=null!=(s=a.headerName)?s:a.field;return(0,Ot.jsx)(yI,(0,ft.Z)({ref:C,classes:M,columnMenuOpen:l,colIndex:c,height:u,isResizing:d,sortDirection:p,hasFocus:m,tabIndex:v,separatorSide:b,isDraggable:A,headerComponent:N,description:a.description,elementId:a.field,width:a.computedWidth,columnMenuIconButton:j,columnTitleIconButtons:z,headerClassName:G,label:q,resizable:!S.disableColumnResize&&!!a.resizable,"data-field":a.field,columnMenu:H,draggableContainerProps:B,columnHeaderSeparatorProps:U},D))}function EI(e){var t,r;const{groupId:n,width:o,depth:i,maxDepth:s,fields:a,height:l,colIndex:c,isLastColumn:u,extendRowFullWidth:d}=e,h=vv(),p=gv(),f=pv(p,gS),{hasScrollX:g,hasScrollY:m}=null!=(t=p.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},v=n?f[n]:{},{headerName:_=(null!=n?n:""),description:y="",headerAlign:b}=v;let E;const S=n&&(null==(r=f[n])?void 0:r.renderHeaderGroup),C={groupId:n,headerName:_,description:y,depth:i,maxDepth:s,fields:a,colIndex:c,isLastColumn:u};n&&S&&(E=S(C));const T=u?!(u&&g&&!m||d):h.showColumnRightBorder,w=h.showColumnRightBorder,R=(0,ft.Z)({},e,{classes:h.classes,showRightBorder:T,showColumnBorder:w,headerAlign:b,depth:i,isDragging:!1}),k=null!=_?_:n,O=(0,Gn.Z)(),I=null===n?`empty-group-cell-${O}`:n,P=(e=>{const{classes:t,headerAlign:r,isDragging:n,showRightBorder:o,showColumnBorder:i,groupId:s}=e,a={root:["columnHeader","left"===r&&"columnHeader--alignLeft","center"===r&&"columnHeader--alignCenter","right"===r&&"columnHeader--alignRight",n&&"columnHeader--moving",o&&"withBorder",i&&"columnHeader--showColumnBorder",null===s?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,Et.Z)(a,Gm,t)})(R),A="function"==typeof v.headerClassName?v.headerClassName(C):v.headerClassName;return(0,Ot.jsx)(yI,{classes:P,columnMenuOpen:!1,colIndex:c,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:-1,isDraggable:!1,headerComponent:E,headerClassName:A,description:y,elementId:I,width:o,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:k,"aria-colspan":a.length,"data-fields":`|-${a.join("-|-")}-|`,disableHeaderSeparator:!0})}const SI=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})((()=>({display:"flex"}))),CI=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(e,t)=>[{[`&.${qm["scrollArea--left"]}`]:t["scrollArea--left"]},{[`&.${qm["scrollArea--right"]}`]:t["scrollArea--right"]},t.scrollArea]})((()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${qm["scrollArea--left"]}`]:{left:0},[`&.${qm["scrollArea--right"]}`]:{right:0}})));function TI(e){const{scrollDirection:r}=e,n=t.useRef(null),o=gv(),i=t.useRef(),[s,a]=t.useState(!1),l=pv(o,Ev),c=t.useRef({left:0,top:0}),u=vv(),d=(e=>{const{scrollDirection:t,classes:r}=e,n={root:["scrollArea",`scrollArea--${t}`]};return(0,Et.Z)(n,Gm,r)})((0,ft.Z)({},e,{classes:u.classes})),h=t.useCallback((e=>{c.current=e}),[]),p=t.useCallback((e=>{let t;if("left"===r)t=e.clientX-n.current.getBoundingClientRect().right;else{if("right"!==r)throw new Error("MUI: Wrong drag direction");t=Math.max(1,e.clientX-n.current.getBoundingClientRect().left)}t=1.5*(t-1)+1,clearTimeout(i.current),i.current=setTimeout((()=>{o.current.scroll({left:c.current.left+t,top:c.current.top})}))}),[r,o]);t.useEffect((()=>()=>{clearTimeout(i.current)}),[]);const f=t.useCallback((()=>{a((e=>!e))}),[]);return L_(o,"rowsScroll",h),L_(o,"columnHeaderDragStart",f),L_(o,"columnHeaderDragEnd",f),s?(0,Ot.jsx)(CI,{ref:n,className:(0,gt.default)(d.root),onDragOver:p,style:{height:l}}):null}const wI=t.memo(TI),RI=["className"],kI=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})((({theme:e})=>({position:"absolute",top:0,left:0,right:0,overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:`1px solid ${"light"===e.palette.mode?(0,Lr.$n)((0,Lr.Fq)(e.palette.divider,1),.88):(0,Lr._j)((0,Lr.Fq)(e.palette.divider,1),.68)}`,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius}))),OI=t.forwardRef((function(e,t){const{className:r}=e,n=(0,pt.Z)(e,RI),o=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["columnHeaders"]},Gm,t)})({classes:vv().classes});return(0,Ot.jsx)(kI,(0,ft.Z)({ref:t,className:(0,gt.default)(r,o.root)},n))})),II=["isDragging","className"],PI=(0,St.ZP)("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,t)=>[{[`&.${qm.columnHeaderDropZone}`]:t.columnHeaderDropZone},t.columnHeadersInner]})((()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${qm.columnHeaderDropZone} .${qm.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${qm["columnHeadersInner--scrollable"]} .${qm.columnHeader}:last-child`]:{borderRight:"none"}}))),AI=t.forwardRef((function(e,t){var r,n;const{isDragging:o,className:i}=e,s=(0,pt.Z)(e,II),a=gv(),l=vv(),c=(e=>{const{isDragging:t,hasScrollX:r,classes:n}=e,o={root:["columnHeadersInner",t&&"columnHeaderDropZone",r&&"columnHeadersInner--scrollable"]};return(0,Et.Z)(o,Gm,n)})({isDragging:o,hasScrollX:null!=(r=null==(n=a.current.getRootDimensions())?void 0:n.hasScrollX)&&r,classes:l.classes});return(0,Ot.jsx)(PI,(0,ft.Z)({ref:t,className:(0,gt.default)(i,c.root)},s))})),NI=["innerRef","className"],LI=t.forwardRef((function(e,r){const{innerRef:n}=e,o=(0,pt.Z)(e,NI),{isDragging:i,getRootProps:s,getInnerProps:a,getColumnHeaders:l,getColumnGroupHeaders:c}=(e=>{const{innerRef:r,minColumnIndex:n=0}=e,[o,i]=t.useState(""),[s,a]=t.useState(""),l=gv(),c=pv(l,av),u=pv(l,lv),d=pv(l,AS),h=pv(l,PS),p=pv(l,OS),f=pv(l,Ev),g=pv(l,Sv),m=pv(l,Tv),v=pv(l,h_),_=pv(l,Jv),y=pv(l,V_),b=vv(),E=t.useRef(null),S=(0,Gr.Z)(r,E),[C,T]=t.useState(null),w=t.useRef(C),R=t.useRef(0),k=gC(l,b);t.useEffect((()=>{l.current.columnHeadersContainerElementRef.current.scrollLeft=0}),[l]);const O=t.useRef(Km(uS,{equalityCheck:(e,t)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every((r=>e[r]===t[r]))})),I=t.useCallback((e=>{const[t,r]=nI({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:k.rows.length,buffer:b.rowBuffer}),o=O.current({firstColumnIndex:e.firstColumnIndex,minColumnIndex:n,columnBuffer:b.columnBuffer,firstRowToRender:t,lastRowToRender:r,apiRef:l,visibleRows:k.rows}),i=o>0?R.current-u[o]:R.current;E.current.style.transform=`translate3d(${-i}px, 0px, 0px)`}),[u,n,b.columnBuffer,l,k.rows,b.rowBuffer]);t.useLayoutEffect((()=>{C&&I(C)}),[C,I]);const P=t.useCallback((({left:e,renderContext:t=null},r)=>{var n,o;if(!E.current)return;if(R.current===e&&(null==(n=w.current)?void 0:n.firstColumnIndex)===(null==t?void 0:t.firstColumnIndex)&&(null==(o=w.current)?void 0:o.lastColumnIndex)===(null==t?void 0:t.lastColumnIndex))return;R.current=e;let i=!1;t===w.current&&w.current?i=!0:(function(e){return!!e.target}(r)?(Kn.flushSync((()=>{T(t)})),i=!0):T(t),w.current=t),t&&i&&I(t)}),[I]),A=t.useCallback((e=>a(e.field)),[]),N=t.useCallback((()=>a("")),[]),L=t.useCallback((e=>i(e.field)),[]),M=t.useCallback((()=>i("")),[]);L_(l,"columnResizeStart",A),L_(l,"columnResizeStop",N),L_(l,"columnHeaderDragStart",L),L_(l,"columnHeaderDragEnd",M),L_(l,"rowsScroll",P);const x=e=>{const{renderContext:t=C,minFirstColumn:r=n,maxLastColumn:o=c.length}=e||{};if(!t)return null;const[i,s]=nI({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:k.rows.length,buffer:b.rowBuffer}),a=O.current({firstColumnIndex:t.firstColumnIndex,minColumnIndex:r,columnBuffer:b.columnBuffer,apiRef:l,firstRowToRender:i,lastRowToRender:s,visibleRows:k.rows}),u=Math.min(t.lastColumnIndex+b.columnBuffer,o);return{renderedColumns:c.slice(a,u),firstColumnToRender:a,lastColumnToRender:u,minFirstColumn:r,maxLastColumn:o}},D=(e=[],t)=>e.slice(0,t+1),B={minHeight:m,maxHeight:m,lineHeight:`${f}px`};return{renderContext:C,getColumnHeaders:(e,t={})=>{const r=x(e);if(null==r)return null;const{renderedColumns:n,firstColumnToRender:i}=r,a=[];for(let e=0;e<n.length;e+=1){const r=n[e],l=i+e,u=0===l,g=!(null===d&&null===h),m=null!==d&&d.field===r.field||u&&!g?0:-1,E=null!==p&&p.field===r.field,S=y.open&&y.field===r.field;a.push((0,Ot.jsx)(bI,(0,ft.Z)({},_[r.field],{columnMenuOpen:S,filterItemsCounter:v[r.field]&&v[r.field].length,headerHeight:f,isDragging:r.field===o,column:r,colIndex:l,isResizing:s===r.field,isLastColumn:l===c.length-1,extendRowFullWidth:!b.disableExtendRowFullWidth,hasFocus:E,tabIndex:m},t),r.field))}return(0,Ot.jsx)(SI,{role:"row","aria-rowindex":g+1,children:a})},getColumnGroupHeaders:e=>{if(0===g)return null;const t=x(e);if(null==t||0===t.renderedColumns.length)return null;const{renderedColumns:r,firstColumnToRender:o,lastColumnToRender:i,maxLastColumn:s}=t,a=[],l=[];for(let e=0;e<g;e+=1){var u,d,h;const t=[];let a=0,f=o-1;const g=null==(u=c[o])||null==(d=u.groupPath)?void 0:d[e],b=D(null==(h=c[o])?void 0:h.groupPath,e);for(;null!==g&&f>=n&&null!=(p=c[f])&&p.groupPath&&E_(D(null==(m=c[f])?void 0:m.groupPath,e),b);){var p,m,v;const e=c[f];var _,y;a+=null!=(v=e.computedWidth)?v:0,0===t.length?t.push({width:null!=(_=e.computedWidth)?_:0,fields:[e.field],groupId:g,groupParents:b,colIndex:f}):(t[0].width+=null!=(y=e.computedWidth)?y:0,t[0].fields.push(e.field),t[0].colIndex=f),f-=1}const w=r.reduce(((t,r,n)=>{var i;const s=t[t.length-1];var a,l,c;return r.groupPath&&r.groupPath.length>e?s&&s.groupId===r.groupPath[e]?[...t.slice(0,t.length-1),(0,ft.Z)({},s,{width:s.width+(null!=(l=r.computedWidth)?l:0),fields:[...s.fields,r.field]})]:[...t,{groupId:r.groupPath[e],groupParents:D(r.groupPath,e),width:null!=(a=r.computedWidth)?a:0,fields:[r.field],colIndex:o+n}]:s&&null===s.groupId&&E_(D(r.groupPath,e),s.groupParents)?[...t.slice(0,t.length-1),(0,ft.Z)({},s,{width:s.width+(null!=(c=r.computedWidth)?c:0),fields:[...s.fields,r.field]})]:[...t,{groupId:null,groupParents:D(r.groupPath,e),width:null!=(i=r.computedWidth)?i:0,fields:[r.field],colIndex:o+n}]}),t);f=i;const R=w[w.length-1].groupId;for(;null!==R&&f<s&&null!=(E=c[f])&&E.groupPath&&(null==(S=c[f])||null==(C=S.groupPath)?void 0:C[e])===R;){var E,S,C,T;const e=c[f];w[w.length-1].width+=null!=(T=e.computedWidth)?T:0,w[w.length-1].fields.push(e.field),f+=1}l.push({leftOverflow:a,elements:[...w]})}return l.forEach(((e,t)=>{a.push((0,Ot.jsx)(SI,{style:{height:`${f}px`,transform:`translateX(-${e.leftOverflow}px)`},role:"row","aria-rowindex":t+1,children:e.elements.map((({groupId:e,width:r,fields:n,colIndex:o},i)=>(0,Ot.jsx)(EI,{groupId:e,width:r,fields:n,colIndex:o,depth:t,isLastColumn:o===c.length-n.length,extendRowFullWidth:!b.disableExtendRowFullWidth,maxDepth:l.length,height:f},i)))},t))})),a},isDragging:!!o,getRootProps:(e={})=>(0,ft.Z)({style:B},e),getInnerProps:()=>({ref:S,role:"rowgroup"})}})({innerRef:n});return(0,Ot.jsxs)(OI,(0,ft.Z)({ref:r},s(o),{children:[(0,Ot.jsx)(wI,{scrollDirection:"left"}),(0,Ot.jsxs)(AI,(0,ft.Z)({isDragging:i},a(),{children:[c(),l()]})),(0,Ot.jsx)(wI,{scrollDirection:"right"})]}))})),MI=t.forwardRef((function(e,r){const n=(e=>{if(e.pageSize>100)throw new Error("'props.pageSize' cannot exceed 100 in DataGrid.");const r=(0,Ct.Z)({props:e,name:"MuiDataGrid"}),n=t.useMemo((()=>(0,ft.Z)({},oT,r.localeText)),[r.localeText]),o=t.useMemo((()=>{const e=r.components;if(!e)return(0,ft.Z)({},zO);const t={};return Object.entries(zO).forEach((([r,n])=>{t[r]=void 0===e[r]?n:e[r]})),t}),[r.components]);return t.useMemo((()=>(0,ft.Z)({},qO,r,{localeText:n,components:o},GO)),[r,n,o])})(e),o=nT(n);return(0,Ot.jsx)(v_,{apiRef:o,props:n,children:(0,Ot.jsx)(Zv,{className:n.className,style:n.style,sx:n.sx,ref:r,children:(0,Ot.jsxs)(qv,{children:[(0,Ot.jsx)(Vv,{}),(0,Ot.jsx)(g_,{ColumnHeadersComponent:LI,VirtualScrollerComponent:iI}),(0,Ot.jsx)(m_,{})]})})})}));MI.propTypes={"aria-label":hg().string,"aria-labelledby":hg().string,autoHeight:hg().bool,autoPageSize:hg().bool,cellModesModel:hg().object,checkboxSelection:hg().bool,classes:hg().object,columnBuffer:hg().number,columnGroupingModel:hg().arrayOf(hg().object),columns:(hg().array.isRequired,()=>null),columnThreshold:hg().number,columnTypes:hg().object,columnVisibilityModel:hg().object,components:hg().object,componentsProps:hg().object,density:hg().oneOf(["comfortable","compact","standard"]),disableColumnFilter:hg().bool,disableColumnMenu:hg().bool,disableColumnSelector:hg().bool,disableDensitySelector:hg().bool,disableExtendRowFullWidth:hg().bool,disableIgnoreModificationsIfProcessingProps:hg().bool,disableSelectionOnClick:hg().bool,disableVirtualization:hg().bool,editMode:hg().oneOf(["cell","row"]),editRowsModel:hg().object,error:hg().any,experimentalFeatures:hg().shape({columnGrouping:hg().bool,newEditingApi:hg().bool,preventCommitWhileValidating:hg().bool,warnIfFocusStateIsNotSynced:hg().bool}),filterMode:hg().oneOf(["client","server"]),filterModel:hg().shape({items:hg().arrayOf(hg().shape({columnField:hg().string.isRequired,id:hg().oneOfType([hg().number,hg().string]),operatorValue:hg().string,value:hg().any})).isRequired,linkOperator:hg().oneOf(["and","or"]),quickFilterLogicOperator:hg().oneOf(["and","or"]),quickFilterValues:hg().array}),getCellClassName:hg().func,getDetailPanelContent:hg().func,getEstimatedRowHeight:hg().func,getRowClassName:hg().func,getRowHeight:hg().func,getRowId:hg().func,getRowSpacing:hg().func,headerHeight:hg().number,hideFooter:hg().bool,hideFooterPagination:hg().bool,hideFooterSelectedRowCount:hg().bool,initialState:hg().object,isCellEditable:hg().func,isRowSelectable:hg().func,keepNonExistentRowsSelected:hg().bool,loading:hg().bool,localeText:hg().object,logger:hg().shape({debug:hg().func.isRequired,error:hg().func.isRequired,info:hg().func.isRequired,warn:hg().func.isRequired}),logLevel:hg().oneOf(["debug","error","info","warn",!1]),nonce:hg().string,onCellClick:hg().func,onCellDoubleClick:hg().func,onCellEditCommit:hg().func,onCellEditStart:hg().func,onCellEditStop:hg().func,onCellFocusOut:hg().func,onCellKeyDown:hg().func,onCellModesModelChange:hg().func,onColumnHeaderClick:hg().func,onColumnHeaderDoubleClick:hg().func,onColumnHeaderEnter:hg().func,onColumnHeaderLeave:hg().func,onColumnHeaderOut:hg().func,onColumnHeaderOver:hg().func,onColumnOrderChange:hg().func,onColumnVisibilityChange:hg().func,onColumnVisibilityModelChange:hg().func,onEditCellPropsChange:hg().func,onEditRowsModelChange:hg().func,onError:hg().func,onFilterModelChange:hg().func,onMenuClose:hg().func,onMenuOpen:hg().func,onPageChange:hg().func,onPageSizeChange:hg().func,onPreferencePanelClose:hg().func,onPreferencePanelOpen:hg().func,onProcessRowUpdateError:hg().func,onResize:hg().func,onRowClick:hg().func,onRowDoubleClick:hg().func,onRowEditCommit:hg().func,onRowEditStart:hg().func,onRowEditStop:hg().func,onRowModesModelChange:hg().func,onSelectionModelChange:hg().func,onSortModelChange:hg().func,onStateChange:hg().func,page:hg().number,pageSize:(hg().number,()=>null),pagination:e=>!1===e.pagination?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join("\n")):null,paginationMode:hg().oneOf(["client","server"]),processRowUpdate:hg().func,rowBuffer:hg().number,rowCount:hg().number,rowHeight:hg().number,rowModesModel:hg().object,rows:hg().arrayOf(hg().object).isRequired,rowSpacingType:hg().oneOf(["border","margin"]),rowsPerPageOptions:hg().arrayOf(hg().number),rowThreshold:hg().number,scrollbarSize:hg().number,selectionModel:(hg().oneOfType([hg().number,hg().string,hg().array]),()=>null),showCellRightBorder:hg().bool,showColumnRightBorder:hg().bool,sortingMode:hg().oneOf(["client","server"]),sortingOrder:hg().arrayOf(hg().oneOf(["asc","desc"])),sortModel:hg().arrayOf(hg().shape({field:hg().string.isRequired,sort:hg().oneOf(["asc","desc"])})),sx:hg().oneOfType([hg().arrayOf(hg().oneOfType([hg().func,hg().object,hg().bool])),hg().func,hg().object])},(0,St.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,t)=>t.toolbarContainer})((({theme:e})=>({display:"flex",alignItems:"center",flexWrap:"wrap",padding:e.spacing(.5,.5,0)}))),(0,St.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((({theme:e,ownerState:t})=>(0,ft.Z)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===t.alignItems&&{marginTop:8}))),(0,St.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,t)=>t.toolbarFilterList})((({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)}))),(0,St.ZP)(Ww,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(e,t)=>t.toolbarQuickFilter})((({theme:e})=>({width:"auto",paddingBottom:e.spacing(.5),"& input":{marginLeft:e.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${e.palette.divider}`},"& input[type=search]::-ms-clear,\n& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}}))),__webpack_require__(7957),__webpack_require__(1733),(0,wt.Z)("MuiSnackbarContent",["root","message","action"]),(0,St.ZP)(Ko,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>{const t="light"===e.palette.mode?.8:.98,r=(0,Lr._4)(e.palette.background.default,t);return(0,ft.Z)({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(r),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),(0,St.ZP)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),(0,St.ZP)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),(0,wt.Z)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]),(0,St.ZP)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${(0,Tt.Z)(r.anchorOrigin.vertical)}${(0,Tt.Z)(r.anchorOrigin.horizontal)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===t.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===t.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===t.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:(0,ft.Z)({},"top"===t.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===t.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===t.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===t.anchorOrigin.horizontal&&{right:24,left:"auto"})})));const xI=(0,wt.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);(0,Si.Z)((0,Ot.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),(0,St.ZP)(Ko,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${(0,Tt.Z)(r.color||r.severity)}`]]}})((({theme:e,ownerState:t})=>{const r="light"===e.palette.mode?Lr._j:Lr.$n,n="light"===e.palette.mode?Lr.$n:Lr._j,o=t.color||t.severity;return(0,ft.Z)({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},o&&"standard"===t.variant&&{color:e.vars?e.vars.palette.Alert[`${o}Color`]:r(e.palette[o].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${o}StandardBg`]:n(e.palette[o].light,.9),[`& .${xI.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}},o&&"outlined"===t.variant&&{color:e.vars?e.vars.palette.Alert[`${o}Color`]:r(e.palette[o].light,.6),border:`1px solid ${(e.vars||e).palette[o].light}`,[`& .${xI.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}},o&&"filled"===t.variant&&(0,ft.Z)({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${o}FilledColor`],backgroundColor:e.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:"dark"===e.palette.mode?e.palette[o].dark:e.palette[o].main,color:e.palette.getContrastText(e.palette[o].main)}))})),(0,St.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),(0,St.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),(0,St.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),ir(),(0,St.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})((({ownerState:e,theme:t})=>{let r=(0,ft.Z)({display:"flex",flexDirection:"column"},(0,yr.k9)({theme:t},(0,yr.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const n=(0,Zn.hB)(t),o=Object.keys(t.breakpoints.values).reduce(((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t)),{}),i=(0,yr.P$)({values:e.direction,base:o}),s=(0,yr.P$)({values:e.spacing,base:o});"object"==typeof i&&Object.keys(i).forEach(((e,t,r)=>{if(!i[e]){const n=t>0?i[r[t-1]]:"column";i[e]=n}}));const a=(t,r)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${o=r?i[r]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]}`]:(0,Zn.NA)(n,t)}};var o};r=(0,mt.Z)(r,(0,yr.k9)({theme:t},s,a))}return r=(0,yr.dt)(t.breakpoints,r),r}));var DI;DI={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",inputModeToggleButtonAriaLabel:(e,t)=>e?`text input view is open, go to ${t} view`:`${t} view is open, go to text input view`,start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerDefaultToolbarTitle:"Select date",dateTimePickerDefaultToolbarTitle:"Select date & time",timePickerDefaultToolbarTitle:"Select time",dateRangePickerDefaultToolbarTitle:"Select date range",clockLabelText:(e,t,r)=>`Select ${e}. ${null===t?"No time selected":`Selected time is ${r.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,openDatePickerDialogue:(e,t)=>e&&t.isValid(t.date(e))?`Choose date, selected date is ${t.format(t.date(e),"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>e&&t.isValid(t.date(e))?`Choose time, selected time is ${t.format(t.date(e),"fullTime")}`:"Choose time",timeTableLabel:"pick time",dateTableLabel:"pick date"},(0,ft.Z)({},DI);const BI=t.createContext(null),UI=()=>(()=>{const e=t.useContext(BI);if(null===e)throw new Error("MUI: Can not find utils in context. It looks like you forgot to wrap your component in LocalizationProvider, or pass dateAdapter prop directly.");return e})().localeText;function ZI(e){return(0,Rt.Z)("PrivatePickersToolbarText",e)}const jI=(0,wt.Z)("PrivatePickersToolbarText",["root","selected"]),HI=["className","selected","value"],FI=(0,St.ZP)(Mt,{name:"PrivatePickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${jI.selected}`]:t.selected}]})((({theme:e})=>({transition:e.transitions.create("color"),color:e.palette.text.secondary,[`&.${jI.selected}`]:{color:e.palette.text.primary}}))),zI=t.forwardRef((function(e,t){const{className:r,value:n}=e,o=(0,pt.Z)(e,HI),i=(e=>{const{classes:t,selected:r}=e,n={root:["root",r&&"selected"]};return(0,Et.Z)(n,ZI,t)})(e);return(0,Ot.jsx)(FI,(0,ft.Z)({ref:t,className:(0,gt.default)(r,i.root),component:"span"},o,{children:n}))})),GI=(0,Si.Z)((0,Ot.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),qI=(0,Si.Z)((0,Ot.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),VI=(0,Si.Z)((0,Ot.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),WI=(0,Si.Z)((0,Ot.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),YI=(0,Si.Z)((0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ot.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),KI=((0,Si.Z)((0,Ot.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,Si.Z)((0,Ot.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Pen"));function $I(e){return(0,Rt.Z)("MuiPickersToolbar",e)}(0,Si.Z)((0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Ot.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const QI=(0,wt.Z)("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"]),XI=(0,St.ZP)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}))),JI=(0,St.ZP)(Nr,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})((({ownerState:e})=>(0,ft.Z)({flex:1},!e.isLandscape&&{alignItems:"center"}))),eP=(0,St.ZP)(Ds,{name:"MuiPickersToolbar",slot:"PenIconButton",overridesResolver:(e,t)=>[{[`&.${QI.penIconButtonLandscape}`]:t.penIconButtonLandscape},t.penIconButton]})({}),tP=e=>"clock"===e?(0,Ot.jsx)(YI,{color:"inherit"}):(0,Ot.jsx)(WI,{color:"inherit"}),rP=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiPickersToolbar"}),{children:n,className:o,getMobileKeyboardInputViewButtonText:i,isLandscape:s,isMobileKeyboardViewOpen:a,landscapeDirection:l="column",toggleMobileKeyboardView:c,toolbarTitle:u,viewType:d="calendar"}=r,h=r,p=UI(),f=(e=>{const{classes:t,isLandscape:r}=e,n={root:["root"],content:["content"],penIconButton:["penIconButton",r&&"penIconButtonLandscape"]};return(0,Et.Z)(n,$I,t)})(h);return(0,Ot.jsxs)(XI,{ref:t,className:(0,gt.default)(f.root,o),ownerState:h,children:[(0,Ot.jsx)(Mt,{color:"text.secondary",variant:"overline",children:u}),(0,Ot.jsxs)(JI,{container:!0,justifyContent:"space-between",className:f.content,ownerState:h,direction:s?l:"row",alignItems:s?"flex-start":"flex-end",children:[n,(0,Ot.jsx)(eP,{onClick:c,className:f.penIconButton,ownerState:h,color:"inherit","aria-label":i?i(a,d):p.inputModeToggleButtonAriaLabel(a,d),children:a?tP(d):(0,Ot.jsx)(KI,{color:"inherit"})})]})]})}));(0,St.ZP)(Un,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),(0,wt.Z)("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","separator"]),(0,St.ZP)(rP,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",[`& .${QI.penIconButton}`]:(0,ft.Z)({position:"absolute",top:8},"rtl"===e.direction?{left:8}:{right:8})}))),(0,St.ZP)("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),(0,St.ZP)("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})({display:"flex"}),(0,St.ZP)(zI,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({margin:"0 4px 0 2px",cursor:"default"}),(0,wt.Z)("MuiPickersPopper",["root","paper"]),(0,St.ZP)(ac,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({zIndex:e.zIndex.modal}))),(0,St.ZP)(Ko,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})((({ownerState:e})=>(0,ft.Z)({transformOrigin:"top center",outline:0},"top"===e.placement&&{transformOrigin:"bottom center"})));(0,wt.Z)("MuiClockPointer",["root","thumb"]),(0,St.ZP)("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>(0,ft.Z)({width:2,backgroundColor:e.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])}))),(0,St.ZP)("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e,ownerState:t})=>(0,ft.Z)({width:4,height:4,backgroundColor:e.palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - 18px)",border:`16px solid ${e.palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:e.palette.primary.main}))),(0,wt.Z)("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton"]),(0,St.ZP)("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)}))),(0,St.ZP)("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),(0,St.ZP)("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),(0,St.ZP)("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})((({ownerState:e})=>(0,ft.Z)({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}))),(0,St.ZP)("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})((({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}))),(0,St.ZP)(Ds,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})((({theme:e,ownerState:t})=>(0,ft.Z)({zIndex:1,position:"absolute",bottom:t.ampmInClock?64:8,left:8},"am"===t.meridiemMode&&{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.light}}))),(0,St.ZP)(Ds,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})((({theme:e,ownerState:t})=>(0,ft.Z)({zIndex:1,position:"absolute",bottom:t.ampmInClock?64:8,right:8},"pm"===t.meridiemMode&&{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.light}})));const nP=(0,wt.Z)("MuiClockNumber",["root","selected","disabled"]);function oP(e){return(0,Rt.Z)("MuiPickersArrowSwitcher",e)}(0,St.ZP)("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${nP.disabled}`]:t.disabled},{[`&.${nP.selected}`]:t.selected}]})((({theme:e,ownerState:t})=>(0,ft.Z)({height:36,width:36,position:"absolute",left:"calc((100% - 36px) / 2)",display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:e.palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:e.palette.background.paper},[`&.${nP.selected}`]:{color:e.palette.primary.contrastText},[`&.${nP.disabled}`]:{pointerEvents:"none",color:e.palette.text.disabled}},t.inner&&(0,ft.Z)({},e.typography.body2,{color:e.palette.text.secondary})))),(0,wt.Z)("MuiPickersArrowSwitcher",["root","spacer","button"]);const iP=["children","className","components","componentsProps","isLeftDisabled","isLeftHidden","isRightDisabled","isRightHidden","leftArrowButtonText","onLeftClick","onRightClick","rightArrowButtonText"],sP=(0,St.ZP)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),aP=(0,St.ZP)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((({theme:e})=>({width:e.spacing(3)}))),lP=(0,St.ZP)(Ds,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})((({ownerState:e})=>(0,ft.Z)({},e.hidden&&{visibility:"hidden"}))),cP=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiPickersArrowSwitcher"}),{children:n,className:o,components:i,componentsProps:s,isLeftDisabled:a,isLeftHidden:l,isRightDisabled:c,isRightHidden:u,leftArrowButtonText:d,onLeftClick:h,onRightClick:p,rightArrowButtonText:f}=r,g=(0,pt.Z)(r,iP),m="rtl"===Er().direction,v=(null==s?void 0:s.leftArrowButton)||{},_=(null==i?void 0:i.LeftArrowIcon)||qI,y=(null==s?void 0:s.rightArrowButton)||{},b=(null==i?void 0:i.RightArrowIcon)||VI,E=r,S=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"],spacer:["spacer"],button:["button"]},oP,t)})(E);return(0,Ot.jsxs)(sP,(0,ft.Z)({ref:t,className:(0,gt.default)(S.root,o),ownerState:E},g,{children:[(0,Ot.jsx)(lP,(0,ft.Z)({as:null==i?void 0:i.LeftArrowButton,size:"small","aria-label":d,title:d,disabled:a,edge:"end",onClick:h},v,{className:(0,gt.default)(S.button,v.className),ownerState:(0,ft.Z)({},E,v,{hidden:l}),children:m?(0,Ot.jsx)(b,{}):(0,Ot.jsx)(_,{})})),n?(0,Ot.jsx)(Mt,{variant:"subtitle1",component:"span",children:n}):(0,Ot.jsx)(aP,{className:S.spacer,ownerState:E}),(0,Ot.jsx)(lP,(0,ft.Z)({as:null==i?void 0:i.RightArrowButton,size:"small","aria-label":f,title:f,edge:"start",disabled:c,onClick:p},y,{className:(0,gt.default)(S.button,y.className),ownerState:(0,ft.Z)({},E,y,{hidden:u}),children:m?(0,Ot.jsx)(_,{}):(0,Ot.jsx)(b,{})}))]}))}));(0,wt.Z)("MuiClockPicker",["root","arrowSwitcher"]);const uP=(0,St.ZP)("div")({overflowX:"hidden",width:320,maxHeight:358,display:"flex",flexDirection:"column",margin:"0 auto"});(0,St.ZP)(uP,{name:"MuiClockPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),(0,St.ZP)(cP,{name:"MuiClockPicker",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15});const dP=(0,wt.Z)("PrivatePickersMonth",["root","selected"]);(0,St.ZP)(Mt,{name:"PrivatePickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${dP.selected}`]:t.selected}]})((({theme:e})=>(0,ft.Z)({flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{pointerEvents:"none",color:e.palette.text.secondary},[`&.${dP.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:focus, &:hover":{backgroundColor:e.palette.primary.dark}}}))),(0,wt.Z)("MuiMonthPicker",["root"]),(0,St.ZP)("div",{name:"MuiMonthPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch",margin:"0 4px"});const hP=e=>(0,Rt.Z)("MuiPickersFadeTransitionGroup",e),pP=((0,wt.Z)("MuiPickersFadeTransitionGroup",["root"]),e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},hP,t)}),fP=(0,St.ZP)(tn,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});const gP=(0,wt.Z)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),mP=({theme:e,ownerState:t})=>(0,ft.Z)({},e.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:e.palette.background.paper,color:e.palette.text.primary,"&:hover":{backgroundColor:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity)},"&:focus":{backgroundColor:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),[`&.${gP.selected}`]:{willChange:"background-color",backgroundColor:e.palette.primary.dark}},[`&.${gP.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium,transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:e.palette.primary.dark}},[`&.${gP.disabled}`]:{color:e.palette.text.disabled}},!t.disableMargin&&{margin:"0 2px"},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:e.palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${gP.selected})`]:{border:`1px solid ${e.palette.text.secondary}`}}),vP=(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableMargin&&t.dayWithMargin,!r.disableHighlightToday&&r.today&&t.today,!r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,r.outsideCurrentMonth&&!r.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]};function _P(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}(0,St.ZP)(On,{name:"MuiPickersDay",slot:"Root",overridesResolver:vP})(mP),(0,St.ZP)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:vP})((({theme:e,ownerState:t})=>(0,ft.Z)({},mP({theme:e,ownerState:t}),{opacity:0,pointerEvents:"none"})));var yP=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.remove(n):"string"==typeof r.className?r.className=_P(r.className,n):r.setAttribute("class",_P(r.className&&r.className.baseVal||"",n)));var r,n}))},bP=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),o=n[0],i=n[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),o=n[0],i=n[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),o=n[0],i=n[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,o=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:o,activeClassName:n?o+"-active":r[e+"Active"],doneClassName:n?o+"-done":r[e+"Done"]}},t}Yr(r,e);var n=r.prototype;return n.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&o&&(n+=" "+o),"active"===r&&e&&bo(e),n&&(this.appliedClasses[t][r]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)));var r,n}))}(e,n))},n.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,o=r.active,i=r.done;this.appliedClasses[t]={},n&&yP(e,n),o&&yP(e,o),i&&yP(e,i)},n.render=function(){var e=this.props,r=(e.classNames,(0,pt.Z)(e,["classNames"]));return t.createElement(Oo,(0,ft.Z)({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(t.Component);bP.defaultProps={classNames:""},bP.propTypes={};const EP=bP,SP=e=>(0,Rt.Z)("PrivatePickersSlideTransition",e),CP=(0,wt.Z)("PrivatePickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),TP=["children","className","reduceAnimations","slideDirection","transKey"],wP=(0,St.ZP)(tn,{name:"PrivatePickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${CP["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${CP["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${CP.slideEnterActive}`]:t.slideEnterActive},{[`.${CP.slideExit}`]:t.slideExit},{[`.${CP["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${CP["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})((({theme:e})=>{const t=e.transitions.create("transform",{duration:350,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${CP["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${CP["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${CP.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${CP.slideExit}`]:{transform:"translate(0%)"},[`& .${CP["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${CP["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}}));(0,wt.Z)("MuiDayPicker",["header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer"]),(0,St.ZP)("div",{name:"MuiDayPicker",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),(0,St.ZP)(Mt,{name:"MuiDayPicker",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})((({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary}))),(0,St.ZP)("div",{name:"MuiDayPicker",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),(0,St.ZP)((e=>{const{children:r,className:n,reduceAnimations:o,slideDirection:i,transKey:s}=e,a=(0,pt.Z)(e,TP),l=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},SP,t)})(e);if(o)return(0,Ot.jsx)("div",{className:(0,gt.default)(l.root,n),children:r});const c={exit:CP.slideExit,enterActive:CP.slideEnterActive,enter:CP[`slideEnter-${i}`],exitActive:CP[`slideExitActiveLeft-${i}`]};return(0,Ot.jsx)(wP,{className:(0,gt.default)(l.root,n),childFactory:e=>t.cloneElement(e,{classNames:c}),role:"presentation",children:(0,Ot.jsx)(EP,(0,ft.Z)({mountOnEnter:!0,unmountOnExit:!0,timeout:350,classNames:c},a,{children:r}),s)})}),{name:"MuiDayPicker",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:240}),(0,St.ZP)("div",{name:"MuiDayPicker",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),(0,St.ZP)("div",{name:"MuiDayPicker",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"}),(0,wt.Z)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),(0,St.ZP)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),(0,St.ZP)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((({theme:e})=>(0,ft.Z)({display:"flex",maxHeight:30,overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium}))),(0,St.ZP)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),(0,St.ZP)(Ds,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})({marginRight:"auto"}),(0,St.ZP)(GI,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})((({theme:e,ownerState:t})=>(0,ft.Z)({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"},"year"===t.openView&&{transform:"rotate(180deg)"})));const RP=(0,wt.Z)("PrivatePickersYear",["root","modeDesktop","modeMobile","yearButton","selected","disabled"]);(0,St.ZP)("div",{name:"PrivatePickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${RP.modeDesktop}`]:t.modeDesktop},{[`&.${RP.modeMobile}`]:t.modeMobile}]})((({ownerState:e})=>(0,ft.Z)({flexBasis:"33.3%",display:"flex",alignItems:"center",justifyContent:"center"},"desktop"===(null==e?void 0:e.wrapperVariant)&&{flexBasis:"25%"}))),(0,St.ZP)("button",{name:"PrivatePickersYear",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${RP.disabled}`]:t.disabled},{[`&.${RP.selected}`]:t.selected}]})((({theme:e})=>(0,ft.Z)({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:(0,Lr.Fq)(e.palette.action.active,e.palette.action.hoverOpacity)},[`&.${RP.disabled}`]:{color:e.palette.text.secondary},[`&.${RP.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:focus, &:hover":{backgroundColor:e.palette.primary.dark}}}))),(0,wt.Z)("MuiYearPicker",["root"]),(0,St.ZP)("div",{name:"MuiYearPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",maxHeight:"304px"}),"undefined"!=typeof navigator&&/(android)/i.test(navigator.userAgent),(0,wt.Z)("MuiCalendarPicker",["root","viewTransitionContainer"]),(0,St.ZP)(uP,{name:"MuiCalendarPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),(0,St.ZP)((function(e){const t=(0,Ct.Z)({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:r,className:n,reduceAnimations:o,transKey:i}=t,s=pP(t);return o?r:(0,Ot.jsx)(fP,{className:(0,gt.default)(s.root,n),children:(0,Ot.jsx)(Mo,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:500,enter:250,exit:0},children:r},i)})}),{name:"MuiCalendarPicker",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({});const kP=(0,wt.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);(0,St.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${(0,Tt.Z)(r.position)}`],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${kP.positionStart}&:not(.${kP.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"}))),(0,wt.Z)("MuiCalendarOrClockPicker",["root","mobileKeyboardInputView"]),(0,St.ZP)("div",{name:"MuiCalendarOrClockPicker",slot:"MobileKeyboardInputView",overridesResolver:(e,t)=>t.mobileKeyboardInputView})({padding:"16px 24px"}),(0,St.ZP)("div",{name:"MuiCalendarOrClockPicker",slot:"Root",overridesResolver:(e,t)=>t.root})((({ownerState:e})=>(0,ft.Z)({display:"flex",flexDirection:"column"},e.isLandscape&&{flexDirection:"row"})));const OP=(0,wt.Z)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]);let IP;function PP(){if(IP)return IP;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),IP="reverse",e.scrollLeft>0?IP="default":(e.scrollLeft=1,0===e.scrollLeft&&(IP="negative")),document.body.removeChild(e),IP}function AP(e,t){const r=e.scrollLeft;if("rtl"!==t)return r;switch(PP()){case"negative":return e.scrollWidth-e.clientWidth+r;case"reverse":return e.scrollWidth-e.clientWidth-r;default:return r}}function NP(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}(0,St.ZP)(On,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.label&&r.icon&&t.labelIcon,t[`textColor${(0,Tt.Z)(r.textColor)}`],r.fullWidth&&t.fullWidth,r.wrapped&&t.wrapped]}})((({theme:e,ownerState:t})=>(0,ft.Z)({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:"top"===t.iconPosition||"bottom"===t.iconPosition?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${OP.iconWrapper}`]:(0,ft.Z)({},"top"===t.iconPosition&&{marginBottom:6},"bottom"===t.iconPosition&&{marginTop:6},"start"===t.iconPosition&&{marginRight:e.spacing(1)},"end"===t.iconPosition&&{marginLeft:e.spacing(1)})},"inherit"===t.textColor&&{color:"inherit",opacity:.6,[`&.${OP.selected}`]:{opacity:1},[`&.${OP.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"primary"===t.textColor&&{color:(e.vars||e).palette.text.secondary,[`&.${OP.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${OP.disabled}`]:{color:(e.vars||e).palette.text.disabled}},"secondary"===t.textColor&&{color:(e.vars||e).palette.text.secondary,[`&.${OP.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${OP.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})));const LP=["onChange"],MP={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function xP(e){return(0,Rt.Z)("MuiTabScrollButton",e)}const DP=(0,wt.Z)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]);var BP,UP;const ZP=["className","direction","orientation","disabled"],jP=(0,St.ZP)(On,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.orientation&&t[r.orientation]]}})((({ownerState:e})=>(0,ft.Z)({width:40,flexShrink:0,opacity:.8,[`&.${DP.disabled}`]:{opacity:0}},"vertical"===e.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}}))),HP=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiTabScrollButton"}),{className:n,direction:o}=r,i=(0,pt.Z)(r,ZP),s="rtl"===Er().direction,a=(0,ft.Z)({isRtl:s},r),l=(e=>{const{classes:t,orientation:r,disabled:n}=e,o={root:["root",r,n&&"disabled"]};return(0,Et.Z)(o,xP,t)})(a);return(0,Ot.jsx)(jP,(0,ft.Z)({component:"div",className:(0,gt.default)(l.root,n),ref:t,role:null,ownerState:a,tabIndex:null},i,{children:"left"===o?BP||(BP=(0,Ot.jsx)(pk,{fontSize:"small"})):UP||(UP=(0,Ot.jsx)(fk,{fontSize:"small"}))}))}));function FP(e){return(0,Rt.Z)("MuiTabs",e)}const zP=(0,wt.Z)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),GP=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],qP=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,VP=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,WP=(e,t,r)=>{let n=!1,o=r(e,t);for(;o;){if(o===e.firstChild){if(n)return;n=!0}const t=o.disabled||"true"===o.getAttribute("aria-disabled");if(o.hasAttribute("tabindex")&&!t)return void o.focus();o=r(e,o)}},YP=(0,St.ZP)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${zP.scrollButtons}`]:t.scrollButtons},{[`& .${zP.scrollButtons}`]:r.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,r.vertical&&t.vertical]}})((({ownerState:e,theme:t})=>(0,ft.Z)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${zP.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}))),KP=(0,St.ZP)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.scroller,r.fixed&&t.fixed,r.hideScrollbar&&t.hideScrollbar,r.scrollableX&&t.scrollableX,r.scrollableY&&t.scrollableY]}})((({ownerState:e})=>(0,ft.Z)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"}))),$P=(0,St.ZP)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.flexContainer,r.vertical&&t.flexContainerVertical,r.centered&&t.centered]}})((({ownerState:e})=>(0,ft.Z)({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"}))),QP=(0,St.ZP)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((({ownerState:e,theme:t})=>(0,ft.Z)({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},"primary"===e.indicatorColor&&{backgroundColor:(t.vars||t).palette.primary.main},"secondary"===e.indicatorColor&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0}))),XP=(0,St.ZP)((function(e){const{onChange:r}=e,n=(0,pt.Z)(e,LP),o=t.useRef(),i=t.useRef(null),s=()=>{o.current=i.current.offsetHeight-i.current.clientHeight};return t.useEffect((()=>{const e=(0,Xs.Z)((()=>{const e=o.current;s(),e!==o.current&&r(o.current)})),t=(0,Js.Z)(i.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[r]),t.useEffect((()=>{s(),r(o.current)}),[r]),(0,Ot.jsx)("div",(0,ft.Z)({style:MP,ref:i},n))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),JP={},eA=t.forwardRef((function(e,r){const n=(0,Ct.Z)({props:e,name:"MuiTabs"}),o=Er(),i="rtl"===o.direction,{"aria-label":s,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:g,orientation:m="horizontal",ScrollButtonComponent:v=HP,scrollButtons:_="auto",selectionFollowsFocus:y,TabIndicatorProps:b={},TabScrollButtonProps:E={},textColor:S="primary",value:C,variant:T="standard",visibleScrollbar:w=!1}=n,R=(0,pt.Z)(n,GP),k="scrollable"===T,O="vertical"===m,I=O?"scrollTop":"scrollLeft",P=O?"top":"left",A=O?"bottom":"right",N=O?"clientHeight":"clientWidth",L=O?"height":"width",M=(0,ft.Z)({},n,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:m,vertical:O,scrollButtons:_,textColor:S,variant:T,visibleScrollbar:w,fixed:!k,hideScrollbar:k&&!w,scrollableX:k&&!O,scrollableY:k&&O,centered:c&&!k,scrollButtonsHideMobile:!p}),x=(e=>{const{vertical:t,fixed:r,hideScrollbar:n,scrollableX:o,scrollableY:i,centered:s,scrollButtonsHideMobile:a,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",r&&"fixed",n&&"hideScrollbar",o&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[o&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]};return(0,Et.Z)(c,FP,l)})(M),[D,B]=t.useState(!1),[U,Z]=t.useState(JP),[j,H]=t.useState({start:!1,end:!1}),[F,z]=t.useState({overflow:"hidden",scrollbarWidth:0}),G=new Map,q=t.useRef(null),V=t.useRef(null),W=()=>{const e=q.current;let t,r;if(e){const r=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:AP(e,o.direction),scrollWidth:e.scrollWidth,top:r.top,bottom:r.bottom,left:r.left,right:r.right}}if(e&&!1!==C){const e=V.current.children;if(e.length>0){const t=e[G.get(C)];r=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:r}},Y=(0,qr.Z)((()=>{const{tabsMeta:e,tabMeta:t}=W();let r,n=0;if(O)r="top",t&&e&&(n=t.top-e.top+e.scrollTop);else if(r=i?"right":"left",t&&e){const o=i?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;n=(i?-1:1)*(t[r]-e[r]+o)}const o={[r]:n,[L]:t?t[L]:0};if(isNaN(U[r])||isNaN(U[L]))Z(o);else{const e=Math.abs(U[r]-o[r]),t=Math.abs(U[L]-o[L]);(e>=1||t>=1)&&Z(o)}})),K=(e,{animation:t=!0}={})=>{t?function(e,t,r,n={},o=(()=>{})){const{ease:i=NP,duration:s=300}=n;let a=null;const l=t[e];let c=!1;const u=n=>{if(c)return void o(new Error("Animation cancelled"));null===a&&(a=n);const d=Math.min(1,(n-a)/s);t[e]=i(d)*(r-l)+l,d>=1?requestAnimationFrame((()=>{o(null)})):requestAnimationFrame(u)};l===r?o(new Error("Element already at target position")):requestAnimationFrame(u)}(I,q.current,e,{duration:o.transitions.duration.standard}):q.current[I]=e},$=e=>{let t=q.current[I];O?t+=e:(t+=e*(i?-1:1),t*=i&&"reverse"===PP()?-1:1),K(t)},Q=()=>{const e=q.current[N];let t=0;const r=Array.from(V.current.children);for(let n=0;n<r.length;n+=1){const o=r[n];if(t+o[N]>e){0===n&&(t=e);break}t+=o[N]}return t},X=()=>{$(-1*Q())},J=()=>{$(Q())},ee=t.useCallback((e=>{z({overflow:null,scrollbarWidth:e})}),[]),te=(0,qr.Z)((e=>{const{tabsMeta:t,tabMeta:r}=W();if(r&&t)if(r[P]<t[P]){const n=t[I]+(r[P]-t[P]);K(n,{animation:e})}else if(r[A]>t[A]){const n=t[I]+(r[A]-t[A]);K(n,{animation:e})}})),re=(0,qr.Z)((()=>{if(k&&!1!==_){const{scrollTop:e,scrollHeight:t,clientHeight:r,scrollWidth:n,clientWidth:s}=q.current;let a,l;if(O)a=e>1,l=e<t-r-1;else{const e=AP(q.current,o.direction);a=i?e<n-s-1:e>1,l=i?e>1:e<n-s-1}a===j.start&&l===j.end||H({start:a,end:l})}}));t.useEffect((()=>{const e=(0,Xs.Z)((()=>{q.current&&(Y(),re())})),t=(0,Js.Z)(q.current);let r;return t.addEventListener("resize",e),"undefined"!=typeof ResizeObserver&&(r=new ResizeObserver(e),Array.from(V.current.children).forEach((e=>{r.observe(e)}))),()=>{e.clear(),t.removeEventListener("resize",e),r&&r.disconnect()}}),[Y,re]);const ne=t.useMemo((()=>(0,Xs.Z)((()=>{re()}))),[re]);t.useEffect((()=>()=>{ne.clear()}),[ne]),t.useEffect((()=>{B(!0)}),[]),t.useEffect((()=>{Y(),re()})),t.useEffect((()=>{te(JP!==U)}),[te,U]),t.useImperativeHandle(l,(()=>({updateIndicator:Y,updateScrollButtons:re})),[Y,re]);const oe=(0,Ot.jsx)(QP,(0,ft.Z)({},b,{className:(0,gt.default)(x.indicator,b.className),ownerState:M,style:(0,ft.Z)({},U,b.style)}));let ie=0;const se=t.Children.map(u,(e=>{if(!t.isValidElement(e))return null;const r=void 0===e.props.value?ie:e.props.value;G.set(r,ie);const n=r===C;return ie+=1,t.cloneElement(e,(0,ft.Z)({fullWidth:"fullWidth"===T,indicator:n&&!D&&oe,selected:n,selectionFollowsFocus:y,onChange:g,textColor:S,value:r},1!==ie||!1!==C||e.props.tabIndex?{}:{tabIndex:0}))})),ae=(()=>{const e={};e.scrollbarSizeListener=k?(0,Ot.jsx)(XP,{onChange:ee,className:(0,gt.default)(x.scrollableX,x.hideScrollbar)}):null;const t=j.start||j.end,r=k&&("auto"===_&&t||!0===_);return e.scrollButtonStart=r?(0,Ot.jsx)(v,(0,ft.Z)({orientation:m,direction:i?"right":"left",onClick:X,disabled:!j.start},E,{className:(0,gt.default)(x.scrollButtons,E.className)})):null,e.scrollButtonEnd=r?(0,Ot.jsx)(v,(0,ft.Z)({orientation:m,direction:i?"left":"right",onClick:J,disabled:!j.end},E,{className:(0,gt.default)(x.scrollButtons,E.className)})):null,e})();return(0,Ot.jsxs)(YP,(0,ft.Z)({className:(0,gt.default)(x.root,d),ownerState:M,ref:r,as:h},R,{children:[ae.scrollButtonStart,ae.scrollbarSizeListener,(0,Ot.jsxs)(KP,{className:x.scroller,ownerState:M,style:{overflow:F.overflow,[O?"margin"+(i?"Left":"Right"):"marginBottom"]:w?void 0:-F.scrollbarWidth},ref:q,onScroll:ne,children:[(0,Ot.jsx)($P,{"aria-label":s,"aria-labelledby":a,"aria-orientation":"vertical"===m?"vertical":null,className:x.flexContainer,ownerState:M,onKeyDown:e=>{const t=V.current,r=(0,Bs.Z)(t).activeElement;if("tab"!==r.getAttribute("role"))return;let n="horizontal"===m?"ArrowLeft":"ArrowUp",o="horizontal"===m?"ArrowRight":"ArrowDown";switch("horizontal"===m&&i&&(n="ArrowRight",o="ArrowLeft"),e.key){case n:e.preventDefault(),WP(t,r,VP);break;case o:e.preventDefault(),WP(t,r,qP);break;case"Home":e.preventDefault(),WP(t,null,qP);break;case"End":e.preventDefault(),WP(t,null,VP)}},ref:V,role:"tablist",children:se}),D&&oe]}),ae.scrollButtonEnd]}))})),tA=eA;(0,wt.Z)("MuiDateTimePickerTabs",["root"]),(0,St.ZP)(tA,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})((({ownerState:e,theme:t})=>(0,ft.Z)({boxShadow:`0 -1px 0 0 inset ${t.palette.divider}`},"desktop"===e.wrapperVariant&&{order:1,boxShadow:`0 1px 0 0 inset ${t.palette.divider}`,[`& .${zP.indicator}`]:{bottom:"auto",top:0}}))),(0,St.ZP)(ii)({[`& .${Qo.container}`]:{outline:0},[`& .${Qo.paper}`]:{outline:0,minWidth:320}}),(0,St.ZP)(ui)({"&:first-of-type":{padding:0}}),Math.ceil,Math.round,Math.floor,Math.pow(10,8);function rA(e){return rA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rA(e)}function nA(e,t){return nA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nA(e,t)}function oA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=iA(e);if(t){var o=iA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){return!t||"object"!==rA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,r)}}function iA(e){return iA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},iA(e)}function sA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lA(e,t,r){return t&&aA(e.prototype,t),r&&aA(e,r),e}var cA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nA(e,t)}(r,e);var t=oA(r);function r(e,n,o,i,s){var a;return sA(this,r),(a=t.call(this)).value=e,a.validateValue=n,a.setValue=o,a.priority=i,s&&(a.subPriority=s),a}return lA(r,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),r}(function(){function e(){var t,r,n;sA(this,e),n=0,(r="subPriority")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}return lA(e,[{key:"validate",value:function(e,t){return!0}}]),e}());function uA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"run",value:function(e,t,r,n){var o=this.parse(e,t,r,n);return o?{setter:new cA(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(e,t,r){return!0}}],r&&uA(t.prototype,r),e}();function hA(e){return hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hA(e)}function pA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fA(e,t){return fA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fA(e,t)}function gA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mA(e){return mA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mA(e)}function vA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fA(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mA(n);if(o){var r=mA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==hA(t)&&"function"!=typeof t?gA(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vA(gA(e=i.call.apply(i,[this].concat(r))),"priority",140),vA(gA(e),"incompatibleTokens",["R","u","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}])&&pA(t.prototype,r),s}(dA),yA=/^(1[0-2]|0?\d)/,bA=/^(3[0-1]|[0-2]?\d)/,EA=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,SA=/^(5[0-3]|[0-4]?\d)/,CA=/^(2[0-3]|[0-1]?\d)/,TA=/^(2[0-4]|[0-1]?\d)/,wA=/^(1[0-1]|0?\d)/,RA=/^(1[0-2]|0?\d)/,kA=/^[0-5]?\d/,OA=/^[0-5]?\d/,IA=/^\d/,PA=/^\d{1,2}/,AA=/^\d{1,3}/,NA=/^\d{1,4}/,LA=/^-?\d+/,MA=/^-?\d/,xA=/^-?\d{1,2}/,DA=/^-?\d{1,3}/,BA=/^-?\d{1,4}/,UA=/^([+-])(\d{2})(\d{2})?|Z/,ZA=/^([+-])(\d{2})(\d{2})|Z/,jA=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,HA=/^([+-])(\d{2}):(\d{2})|Z/,FA=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function zA(e,t){return e?{value:t(e.value),rest:e.rest}:e}function GA(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function qA(e,t){var r=t.match(e);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function VA(e){return GA(LA,e)}function WA(e,t){switch(e){case 1:return GA(IA,t);case 2:return GA(PA,t);case 3:return GA(AA,t);case 4:return GA(NA,t);default:return GA(new RegExp("^\\d{1,"+e+"}"),t)}}function YA(e,t){switch(e){case 1:return GA(MA,t);case 2:return GA(xA,t);case 3:return GA(DA,t);case 4:return GA(BA,t);default:return GA(new RegExp("^-?\\d{1,"+e+"}"),t)}}function KA(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function $A(e,t){var r,n=t>0,o=n?t:1-t;if(o<=50)r=e||100;else{var i=o+50;r=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return n?r:1-r}function QA(e){return e%400==0||e%4==0&&e%100!=0}function XA(e){return XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XA(e)}function JA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eN(e,t){return eN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eN(e,t)}function tN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rN(e){return rN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rN(e)}function nN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rN(n);if(o){var r=rN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==XA(t)&&"function"!=typeof t?tN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return nN(tN(e=i.call.apply(i,[this].concat(r))),"priority",130),nN(tN(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return zA(WA(4,e),n);case"yo":return zA(r.ordinalNumber(e,{unit:"year"}),n);default:return zA(WA(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var n=e.getUTCFullYear();if(r.isTwoDigitYear){var o=$A(r.year,n);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}])&&JA(t.prototype,r),s}(dA);function iN(e){return iN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iN(e)}function sN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aN(e,t){return aN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},aN(e,t)}function lN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cN(e){return cN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cN(e)}function uN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cN(n);if(o){var r=cN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==iN(t)&&"function"!=typeof t?lN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return uN(lN(e=i.call.apply(i,[this].concat(r))),"priority",130),uN(lN(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return zA(WA(4,e),n);case"Yo":return zA(r.ordinalNumber(e,{unit:"year"}),n);default:return zA(WA(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,n){var o=Rs(e,n);if(r.isTwoDigitYear){var i=$A(r.year,o);return e.setUTCFullYear(i,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),ws(e,n)}var s="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(s,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),ws(e,n)}}],r&&sN(t.prototype,r),s}(dA);function hN(e){return hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hN(e)}function pN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fN(e,t){return fN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fN(e,t)}function gN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mN(e){return mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mN(e)}function vN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mN(n);if(o){var r=mN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==hN(t)&&"function"!=typeof t?gN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vN(gN(e=i.call.apply(i,[this].concat(r))),"priority",130),vN(gN(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t){return YA("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){var n=new Date(0);return n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0),Es(n)}}])&&pN(t.prototype,r),s}(dA);function yN(e){return yN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yN(e)}function bN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EN(e,t){return EN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},EN(e,t)}function SN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CN(e){return CN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},CN(e)}function TN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=CN(n);if(o){var r=CN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==yN(t)&&"function"!=typeof t?SN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return TN(SN(e=i.call.apply(i,[this].concat(r))),"priority",130),TN(SN(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t){return YA("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}])&&bN(t.prototype,r),s}(dA);function RN(e){return RN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RN(e)}function kN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ON(e,t){return ON=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ON(e,t)}function IN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PN(e){return PN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},PN(e)}function AN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ON(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=PN(n);if(o){var r=PN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==RN(t)&&"function"!=typeof t?IN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return AN(IN(e=i.call.apply(i,[this].concat(r))),"priority",120),AN(IN(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return WA(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}])&&kN(t.prototype,r),s}(dA);function LN(e){return LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LN(e)}function MN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xN(e,t){return xN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xN(e,t)}function DN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BN(e){return BN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},BN(e)}function UN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BN(n);if(o){var r=BN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==LN(t)&&"function"!=typeof t?DN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return UN(DN(e=i.call.apply(i,[this].concat(r))),"priority",120),UN(DN(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return WA(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}])&&MN(t.prototype,r),s}(dA);function jN(e){return jN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jN(e)}function HN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FN(e,t){return FN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},FN(e,t)}function zN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GN(e){return GN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},GN(e)}function qN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=GN(n);if(o){var r=GN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==jN(t)&&"function"!=typeof t?zN(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qN(zN(e=i.call.apply(i,[this].concat(r))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),qN(zN(e),"priority",110),e}return t=s,(r=[{key:"parse",value:function(e,t,r){var n=function(e){return e-1};switch(t){case"M":return zA(GA(yA,e),n);case"MM":return zA(WA(2,e),n);case"Mo":return zA(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}])&&HN(t.prototype,r),s}(dA);function WN(e){return WN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WN(e)}function YN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KN(e,t){return KN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},KN(e,t)}function $N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QN(e){return QN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},QN(e)}function XN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KN(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=QN(n);if(o){var r=QN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==WN(t)&&"function"!=typeof t?$N(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return XN($N(e=i.call.apply(i,[this].concat(r))),"priority",110),XN($N(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){var n=function(e){return e-1};switch(t){case"L":return zA(GA(yA,e),n);case"LL":return zA(WA(2,e),n);case"Lo":return zA(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}])&&YN(t.prototype,r),s}(dA);function eL(e){return eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eL(e)}function tL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rL(e,t){return rL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rL(e,t)}function nL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(e){return oL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oL(e)}function iL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oL(n);if(o){var r=oL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==eL(t)&&"function"!=typeof t?nL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return iL(nL(e=i.call.apply(i,[this].concat(r))),"priority",100),iL(nL(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r){switch(t){case"w":return GA(SA,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,n){return ws(function(e,t,r){vs(2,arguments);var n=ys(e),o=bs(t),i=function(e,t){vs(1,arguments);var r=ys(e),n=ws(r,t).getTime()-function(e,t){var r,n,o,i,s,a,l,c;vs(1,arguments);var u=Ts(),d=bs(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==n?n:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1),h=Rs(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),ws(p,t)}(r,t).getTime();return Math.round(n/6048e5)+1}(n,r)-o;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,r,n),n)}}],r&&tL(t.prototype,r),s}(dA);function aL(e){return aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aL(e)}function lL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cL(e,t){return cL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cL(e,t)}function uL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dL(e){return dL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dL(e)}function hL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dL(n);if(o){var r=dL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==aL(t)&&"function"!=typeof t?uL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return hL(uL(e=i.call.apply(i,[this].concat(r))),"priority",100),hL(uL(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r){switch(t){case"I":return GA(SA,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return Es(function(e,t){vs(2,arguments);var r=ys(e),n=bs(t),o=Ss(r)-n;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,r))}}],r&&lL(t.prototype,r),s}(dA);function fL(e){return fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fL(e)}function gL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mL(e,t){return mL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mL(e,t)}function vL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _L(e){return _L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_L(e)}function yL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bL=[31,28,31,30,31,30,31,31,30,31,30,31],EL=[31,29,31,30,31,30,31,31,30,31,30,31],SL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_L(n);if(o){var r=_L(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==fL(t)&&"function"!=typeof t?vL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yL(vL(e=i.call.apply(i,[this].concat(r))),"priority",90),yL(vL(e),"subPriority",1),yL(vL(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"d":return GA(bA,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){var r=QA(e.getUTCFullYear()),n=e.getUTCMonth();return r?t>=1&&t<=EL[n]:t>=1&&t<=bL[n]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}])&&gL(t.prototype,r),s}(dA);function CL(e){return CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CL(e)}function TL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wL(e,t){return wL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wL(e,t)}function RL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kL(e){return kL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kL(e)}function OL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kL(n);if(o){var r=kL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==CL(t)&&"function"!=typeof t?RL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return OL(RL(e=i.call.apply(i,[this].concat(r))),"priority",90),OL(RL(e),"subpriority",1),OL(RL(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return GA(EA,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return QA(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}])&&TL(t.prototype,r),s}(dA);function PL(e,t,r){var n,o,i,s,a,l,c,u;vs(2,arguments);var d=Ts(),h=bs(null!==(n=null!==(o=null!==(i=null!==(s=null==r?void 0:r.weekStartsOn)&&void 0!==s?s:null==r||null===(a=r.locale)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==o?o:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ys(e),f=bs(t),g=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+g),p}function AL(e){return AL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AL(e)}function NL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LL(e,t){return LL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},LL(e,t)}function ML(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xL(e){return xL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xL(e)}function DL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xL(n);if(o){var r=xL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==AL(t)&&"function"!=typeof t?ML(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return DL(ML(e=i.call.apply(i,[this].concat(r))),"priority",90),DL(ML(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=PL(e,r,n)).setUTCHours(0,0,0,0),e}}],r&&NL(t.prototype,r),s}(dA);function UL(e){return UL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UL(e)}function ZL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jL(e,t){return jL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jL(e,t)}function HL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FL(e){return FL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FL(e)}function zL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=FL(n);if(o){var r=FL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==UL(t)&&"function"!=typeof t?HL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zL(HL(e=i.call.apply(i,[this].concat(r))),"priority",90),zL(HL(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return zA(WA(t.length,e),o);case"eo":return zA(r.ordinalNumber(e,{unit:"day"}),o);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=PL(e,r,n)).setUTCHours(0,0,0,0),e}}],r&&ZL(t.prototype,r),s}(dA);function qL(e){return qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qL(e)}function VL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WL(e,t){return WL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},WL(e,t)}function YL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KL(e){return KL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},KL(e)}function $L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WL(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=KL(n);if(o){var r=KL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==qL(t)&&"function"!=typeof t?YL(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return $L(YL(e=i.call.apply(i,[this].concat(r))),"priority",90),$L(YL(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return zA(WA(t.length,e),o);case"co":return zA(r.ordinalNumber(e,{unit:"day"}),o);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=PL(e,r,n)).setUTCHours(0,0,0,0),e}}],r&&VL(t.prototype,r),s}(dA);function XL(e){return XL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XL(e)}function JL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eM(e,t){return eM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eM(e,t)}function tM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rM(e){return rM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rM(e)}function nM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rM(n);if(o){var r=rM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==XL(t)&&"function"!=typeof t?tM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return nM(tM(e=i.call.apply(i,[this].concat(r))),"priority",90),nM(tM(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return t=s,r=[{key:"parse",value:function(e,t,r){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return WA(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return zA(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return zA(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return zA(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return zA(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=function(e,t){vs(2,arguments);var r=bs(t);r%7==0&&(r-=7);var n=ys(e),o=((r%7+7)%7<1?7:0)+r-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+o),n}(e,r),e.setUTCHours(0,0,0,0),e}}],r&&JL(t.prototype,r),s}(dA);function iM(e){return iM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iM(e)}function sM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aM(e,t){return aM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},aM(e,t)}function lM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cM(e){return cM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cM(e)}function uM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cM(n);if(o){var r=cM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==iM(t)&&"function"!=typeof t?lM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return uM(lM(e=i.call.apply(i,[this].concat(r))),"priority",80),uM(lM(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(KA(r),0,0,0),e}}])&&sM(t.prototype,r),s}(dA);function hM(e){return hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hM(e)}function pM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fM(e,t){return fM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fM(e,t)}function gM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mM(e){return mM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mM(e)}function vM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mM(n);if(o){var r=mM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==hM(t)&&"function"!=typeof t?gM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vM(gM(e=i.call.apply(i,[this].concat(r))),"priority",80),vM(gM(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(KA(r),0,0,0),e}}])&&pM(t.prototype,r),s}(dA);function yM(e){return yM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yM(e)}function bM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EM(e,t){return EM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},EM(e,t)}function SM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CM(e){return CM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},CM(e)}function TM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=CM(n);if(o){var r=CM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==yM(t)&&"function"!=typeof t?SM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return TM(SM(e=i.call.apply(i,[this].concat(r))),"priority",80),TM(SM(e),"incompatibleTokens",["a","b","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(KA(r),0,0,0),e}}])&&bM(t.prototype,r),s}(dA);function RM(e){return RM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RM(e)}function kM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OM(e,t){return OM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},OM(e,t)}function IM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PM(e){return PM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},PM(e)}function AM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=PM(n);if(o){var r=PM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==RM(t)&&"function"!=typeof t?IM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return AM(IM(e=i.call.apply(i,[this].concat(r))),"priority",70),AM(IM(e),"incompatibleTokens",["H","K","k","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"h":return GA(RA,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var n=e.getUTCHours()>=12;return n&&r<12?e.setUTCHours(r+12,0,0,0):n||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e}}])&&kM(t.prototype,r),s}(dA);function LM(e){return LM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LM(e)}function MM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xM(e,t){return xM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xM(e,t)}function DM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BM(e){return BM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},BM(e)}function UM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BM(n);if(o){var r=BM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==LM(t)&&"function"!=typeof t?DM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return UM(DM(e=i.call.apply(i,[this].concat(r))),"priority",70),UM(DM(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"H":return GA(CA,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}])&&MM(t.prototype,r),s}(dA);function jM(e){return jM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jM(e)}function HM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FM(e,t){return FM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},FM(e,t)}function zM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GM(e){return GM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},GM(e)}function qM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=GM(n);if(o){var r=GM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==jM(t)&&"function"!=typeof t?zM(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qM(zM(e=i.call.apply(i,[this].concat(r))),"priority",70),qM(zM(e),"incompatibleTokens",["h","H","k","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"K":return GA(wA,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}])&&HM(t.prototype,r),s}(dA);function WM(e){return WM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WM(e)}function YM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KM(e,t){return KM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},KM(e,t)}function $M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QM(e){return QM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},QM(e)}function XM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KM(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=QM(n);if(o){var r=QM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==WM(t)&&"function"!=typeof t?$M(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return XM($M(e=i.call.apply(i,[this].concat(r))),"priority",70),XM($M(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"k":return GA(TA,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var n=r<=24?r%24:r;return e.setUTCHours(n,0,0,0),e}}])&&YM(t.prototype,r),s}(dA);function ex(e){return ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(e)}function tx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rx(e,t){return rx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rx(e,t)}function nx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ox(e){return ox=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ox(e)}function ix(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ox(n);if(o){var r=ox(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==ex(t)&&"function"!=typeof t?nx(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ix(nx(e=i.call.apply(i,[this].concat(r))),"priority",60),ix(nx(e),"incompatibleTokens",["t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"m":return GA(kA,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}])&&tx(t.prototype,r),s}(dA);function ax(e){return ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(e)}function lx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cx(e,t){return cx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cx(e,t)}function ux(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dx(e){return dx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dx(e)}function hx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var px=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dx(n);if(o){var r=dx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==ax(t)&&"function"!=typeof t?ux(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return hx(ux(e=i.call.apply(i,[this].concat(r))),"priority",50),hx(ux(e),"incompatibleTokens",["t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t,r){switch(t){case"s":return GA(OA,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return WA(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}])&&lx(t.prototype,r),s}(dA);function fx(e){return fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(e)}function gx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mx(e,t){return mx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mx(e,t)}function vx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_x(e)}function yx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_x(n);if(o){var r=_x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==fx(t)&&"function"!=typeof t?vx(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yx(vx(e=i.call.apply(i,[this].concat(r))),"priority",30),yx(vx(e),"incompatibleTokens",["t","T"]),e}return t=s,(r=[{key:"parse",value:function(e,t){return zA(WA(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}])&&gx(t.prototype,r),s}(dA);function Ex(e){return Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ex(e)}function Sx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cx(e,t){return Cx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cx(e,t)}function Tx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wx(e){return wx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wx(e)}function Rx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wx(n);if(o){var r=wx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Ex(t)&&"function"!=typeof t?Tx(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rx(Tx(e=i.call.apply(i,[this].concat(r))),"priority",10),Rx(Tx(e),"incompatibleTokens",["t","T","x"]),e}return t=s,(r=[{key:"parse",value:function(e,t){switch(t){case"X":return qA(UA,e);case"XX":return qA(ZA,e);case"XXXX":return qA(jA,e);case"XXXXX":return qA(FA,e);default:return qA(HA,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}])&&Sx(t.prototype,r),s}(dA);function Ox(e){return Ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ox(e)}function Ix(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Px(e,t){return Px=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Px(e,t)}function Ax(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nx(e)}function Lx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Px(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nx(n);if(o){var r=Nx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Ox(t)&&"function"!=typeof t?Ax(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Lx(Ax(e=i.call.apply(i,[this].concat(r))),"priority",10),Lx(Ax(e),"incompatibleTokens",["t","T","X"]),e}return t=s,(r=[{key:"parse",value:function(e,t){switch(t){case"x":return qA(UA,e);case"xx":return qA(ZA,e);case"xxxx":return qA(jA,e);case"xxxxx":return qA(FA,e);default:return qA(HA,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}])&&Ix(t.prototype,r),s}(dA);function xx(e){return xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(e)}function Dx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bx(e,t){return Bx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bx(e,t)}function Ux(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zx(e)}function jx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zx(n);if(o){var r=Zx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==xx(t)&&"function"!=typeof t?Ux(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jx(Ux(e=i.call.apply(i,[this].concat(r))),"priority",40),jx(Ux(e),"incompatibleTokens","*"),e}return t=s,(r=[{key:"parse",value:function(e){return VA(e)}},{key:"set",value:function(e,t,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}])&&Dx(t.prototype,r),s}(dA);function Fx(e){return Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fx(e)}function zx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gx(e,t){return Gx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gx(e,t)}function qx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vx(e){return Vx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vx(e)}function Wx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gx(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vx(n);if(o){var r=Vx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Fx(t)&&"function"!=typeof t?qx(e):t}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Wx(qx(e=i.call.apply(i,[this].concat(r))),"priority",20),Wx(qx(e),"incompatibleTokens","*"),e}return t=s,(r=[{key:"parse",value:function(e){return VA(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}])&&zx(t.prototype,r),s}(dA);function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kx.apply(this,arguments)}function $x(e,t){return function(){return e.apply(t,arguments)}}new _A,new oN,new dN,new _N,new wN,new NN,new ZN,new VN,new JN,new sL,new pL,new SL,new IL,new BL,new GL,new QL,new oM,new dM,new _M,new wM,new NM,new ZM,new VM,new JM,new sx,new px,new bx,new kx,new Mx,new Hx,new Yx,__webpack_require__(5209),(0,St.ZP)((function(e){return t.createElement(Xi,Kx({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),(0,St.ZP)((function(e){return t.createElement(is,Kx({expandIcon:t.createElement(Bi.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),(0,St.ZP)(cs)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));const{toString:Qx}=Object.prototype,{getPrototypeOf:Xx}=Object,Jx=(eD=Object.create(null),e=>{const t=Qx.call(e);return eD[t]||(eD[t]=t.slice(8,-1).toLowerCase())});var eD;const tD=e=>(e=e.toLowerCase(),t=>Jx(t)===e),rD=e=>t=>typeof t===e,{isArray:nD}=Array,oD=rD("undefined"),iD=tD("ArrayBuffer"),sD=rD("string"),aD=rD("function"),lD=rD("number"),cD=e=>null!==e&&"object"==typeof e,uD=e=>{if("object"!==Jx(e))return!1;const t=Xx(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},dD=tD("Date"),hD=tD("File"),pD=tD("Blob"),fD=tD("FileList"),gD=tD("URLSearchParams");function mD(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),nD(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(n=0;n<i;n++)s=o[n],t.call(null,e[s],s,e)}}function vD(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const _D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,yD=e=>!oD(e)&&e!==_D,bD=(ED="undefined"!=typeof Uint8Array&&Xx(Uint8Array),e=>ED&&e instanceof ED);var ED;const SD=tD("HTMLFormElement"),CD=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),TD=tD("RegExp"),wD=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};mD(r,((r,o)=>{!1!==t(r,o,e)&&(n[o]=r)})),Object.defineProperties(e,n)},RD="abcdefghijklmnopqrstuvwxyz",kD="0123456789",OD={DIGIT:kD,ALPHA:RD,ALPHA_DIGIT:RD+RD.toUpperCase()+kD},ID={isArray:nD,isArrayBuffer:iD,isBuffer:function(e){return null!==e&&!oD(e)&&null!==e.constructor&&!oD(e.constructor)&&aD(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{const t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Qx.call(e)===t||aD(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&iD(e.buffer),t},isString:sD,isNumber:lD,isBoolean:e=>!0===e||!1===e,isObject:cD,isPlainObject:uD,isUndefined:oD,isDate:dD,isFile:hD,isBlob:pD,isRegExp:TD,isFunction:aD,isStream:e=>cD(e)&&aD(e.pipe),isURLSearchParams:gD,isTypedArray:bD,isFileList:fD,forEach:mD,merge:function e(){const{caseless:t}=yD(this)&&this||{},r={},n=(n,o)=>{const i=t&&vD(r,o)||o;uD(r[i])&&uD(n)?r[i]=e(r[i],n):uD(n)?r[i]=e({},n):nD(n)?r[i]=n.slice():r[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&mD(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(mD(t,((t,n)=>{r&&aD(t)?e[n]=$x(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==r&&Xx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Jx,kindOfTest:tD,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(nD(e))return e;let t=e.length;if(!lD(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:SD,hasOwnProperty:CD,hasOwnProp:CD,reduceDescriptors:wD,freezeMethods:e=>{wD(e,((t,r)=>{if(aD(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];aD(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return nD(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:vD,global:_D,isContextDefined:yD,ALPHABET:OD,generateString:(e=16,t=OD.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&aD(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(cD(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=nD(e)?[]:{};return mD(e,((e,t)=>{const i=r(e,n+1);!oD(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return r(e,0)}};function PD(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}ID.inherits(PD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ID.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const AD=PD.prototype,ND={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ND[e]={value:e}})),Object.defineProperties(PD,ND),Object.defineProperty(AD,"isAxiosError",{value:!0}),PD.from=(e,t,r,n,o,i)=>{const s=Object.create(AD);return ID.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),PD.call(s,e.message,t,r,n,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const LD=PD;function MD(e){return ID.isPlainObject(e)||ID.isArray(e)}function xD(e){return ID.endsWith(e,"[]")?e.slice(0,-2):e}function DD(e,t,r){return e?e.concat(t).map((function(e,t){return e=xD(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const BD=ID.toFlatObject(ID,{},null,(function(e){return/^is[A-Z]/.test(e)})),UD=function(e,t,r){if(!ID.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=ID.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ID.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&ID.isSpecCompliantForm(t);if(!ID.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ID.isDate(e))return e.toISOString();if(!a&&ID.isBlob(e))throw new LD("Blob is not supported. Use a Buffer instead.");return ID.isArrayBuffer(e)||ID.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,o){let a=e;if(e&&!o&&"object"==typeof e)if(ID.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(ID.isArray(e)&&function(e){return ID.isArray(e)&&!e.some(MD)}(e)||(ID.isFileList(e)||ID.endsWith(r,"[]"))&&(a=ID.toArray(e)))return r=xD(r),a.forEach((function(e,n){!ID.isUndefined(e)&&null!==e&&t.append(!0===s?DD([r],n,i):null===s?r:r+"[]",l(e))})),!1;return!!MD(e)||(t.append(DD(o,r,i),l(e)),!1)}const u=[],d=Object.assign(BD,{defaultVisitor:c,convertValue:l,isVisitable:MD});if(!ID.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!ID.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),ID.forEach(r,(function(r,i){!0===(!(ID.isUndefined(r)||null===r)&&o.call(t,r,ID.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t};function ZD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function jD(e,t){this._pairs=[],e&&UD(e,this,t)}const HD=jD.prototype;HD.append=function(e,t){this._pairs.push([e,t])},HD.toString=function(e){const t=e?function(t){return e.call(this,t,ZD)}:ZD;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const FD=jD;function zD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function GD(e,t,r){if(!t)return e;const n=r&&r.encode||zD,o=r&&r.serialize;let i;if(i=o?o(t,r):ID.isURLSearchParams(t)?t.toString():new FD(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const qD=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ID.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},VD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WD={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:FD,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},YD=function(e){function t(e,r,n,o){let i=e[o++];const s=Number.isFinite(+i),a=o>=e.length;return i=!i&&ID.isArray(n)?n.length:i,a?(ID.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!s):(n[i]&&ID.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&ID.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!s)}if(ID.isFormData(e)&&ID.isFunction(e.entries)){const r={};return ID.forEachEntry(e,((e,n)=>{t(function(e){return ID.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null},KD={"Content-Type":void 0},$D={transitional:VD,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=ID.isObject(e);if(o&&ID.isHTMLForm(e)&&(e=new FormData(e)),ID.isFormData(e))return n&&n?JSON.stringify(YD(e)):e;if(ID.isArrayBuffer(e)||ID.isBuffer(e)||ID.isStream(e)||ID.isFile(e)||ID.isBlob(e))return e;if(ID.isArrayBufferView(e))return e.buffer;if(ID.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return UD(e,new WD.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return WD.isNode&&ID.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=ID.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return UD(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,r){if(ID.isString(e))try{return(0,JSON.parse)(e),ID.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||$D.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&ID.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw LD.from(e,LD.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:WD.classes.FormData,Blob:WD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ID.forEach(["delete","get","head"],(function(e){$D.headers[e]={}})),ID.forEach(["post","put","patch"],(function(e){$D.headers[e]=ID.merge(KD)}));const QD=$D,XD=ID.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JD=Symbol("internals");function eB(e){return e&&String(e).trim().toLowerCase()}function tB(e){return!1===e||null==e?e:ID.isArray(e)?e.map(tB):String(e)}function rB(e,t,r,n,o){return ID.isFunction(n)?n.call(this,t,r):(o&&(t=r),ID.isString(t)?ID.isString(n)?-1!==t.indexOf(n):ID.isRegExp(n)?n.test(t):void 0:void 0)}class nB{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=eB(t);if(!o)throw new Error("header name must be a non-empty string");const i=ID.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=tB(e))}const i=(e,t)=>ID.forEach(e,((e,r)=>o(e,r,t)));return ID.isPlainObject(e)||e instanceof this.constructor?i(e,t):ID.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?i((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&XD[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t):null!=e&&o(t,e,r),this}get(e,t){if(e=eB(e)){const r=ID.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(ID.isFunction(t))return t.call(this,e,r);if(ID.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eB(e)){const r=ID.findKey(this,e);return!(!r||void 0===this[r]||t&&!rB(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=eB(e)){const o=ID.findKey(r,e);!o||t&&!rB(0,r[o],o,t)||(delete r[o],n=!0)}}return ID.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!rB(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return ID.forEach(this,((n,o)=>{const i=ID.findKey(r,o);if(i)return t[i]=tB(n),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();s!==o&&delete t[o],t[s]=tB(n),r[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ID.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&ID.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[JD]=this[JD]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=eB(e);t[n]||(function(e,t){const r=ID.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return ID.isArray(e)?e.forEach(n):n(e),this}}nB.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ID.freezeMethods(nB.prototype),ID.freezeMethods(nB);const oB=nB;function iB(e,t){const r=this||QD,n=t||r,o=oB.from(n.headers);let i=n.data;return ID.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function sB(e){return!(!e||!e.__CANCEL__)}function aB(e,t,r){LD.call(this,null==e?"canceled":e,LD.ERR_CANCELED,t,r),this.name="CanceledError"}ID.inherits(aB,LD,{__CANCEL__:!0});const lB=aB,cB=WD.isStandardBrowserEnv?{write:function(e,t,r,n,o,i){const s=[];s.push(e+"="+encodeURIComponent(t)),ID.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),ID.isString(n)&&s.push("path="+n),ID.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function uB(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const dB=WD.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=ID.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0};function hB(e,t){let r=0;const n=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[s];o||(o=l),r[i]=a,n[i]=l;let u=s,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return o=>{const i=o.loaded,s=o.lengthComputable?o.total:void 0,a=i-r,l=n(a);r=i;const c={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:o};c[t?"download":"upload"]=!0,e(c)}}const pB="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){let n=e.data;const o=oB.from(e.headers).normalize(),i=e.responseType;let s;function a(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}ID.isFormData(n)&&(WD.isStandardBrowserEnv||WD.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(t+":"+r))}const c=uB(e.baseURL,e.url);function u(){if(!l)return;const n=oB.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new LD("Request failed with status code "+r.status,[LD.ERR_BAD_REQUEST,LD.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),a()}),(function(e){r(e),a()}),{data:i&&"text"!==i&&"json"!==i?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),GD(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(r(new LD("Request aborted",LD.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new LD("Network Error",LD.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||VD;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new LD(t,n.clarifyTimeoutError?LD.ETIMEDOUT:LD.ECONNABORTED,e,l)),l=null},WD.isStandardBrowserEnv){const t=(e.withCredentials||dB(c))&&e.xsrfCookieName&&cB.read(e.xsrfCookieName);t&&o.set(e.xsrfHeaderName,t)}void 0===n&&o.setContentType(null),"setRequestHeader"in l&&ID.forEach(o.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),ID.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),i&&"json"!==i&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",hB(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",hB(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{l&&(r(!t||t.type?new lB(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);d&&-1===WD.protocols.indexOf(d)?r(new LD("Unsupported protocol "+d+":",LD.ERR_BAD_REQUEST,e)):l.send(n||null)}))},fB={http:null,xhr:pB};ID.forEach(fB,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function gB(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lB(null,e)}function mB(e){return gB(e),e.headers=oB.from(e.headers),e.data=iB.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=ID.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let o=0;o<t&&(r=e[o],!(n=ID.isString(r)?fB[r.toLowerCase()]:r));o++);if(!n){if(!1===n)throw new LD(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(ID.hasOwnProp(fB,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`)}if(!ID.isFunction(n))throw new TypeError("adapter is not a function");return n})(e.adapter||QD.adapter)(e).then((function(t){return gB(e),t.data=iB.call(e,e.transformResponse,t),t.headers=oB.from(t.headers),t}),(function(t){return sB(t)||(gB(e),t&&t.response&&(t.response.data=iB.call(e,e.transformResponse,t.response),t.response.headers=oB.from(t.response.headers))),Promise.reject(t)}))}const vB=e=>e instanceof oB?e.toJSON():e;function _B(e,t){t=t||{};const r={};function n(e,t,r){return ID.isPlainObject(e)&&ID.isPlainObject(t)?ID.merge.call({caseless:r},e,t):ID.isPlainObject(t)?ID.merge({},t):ID.isArray(t)?t.slice():t}function o(e,t,r){return ID.isUndefined(t)?ID.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function i(e,t){if(!ID.isUndefined(t))return n(void 0,t)}function s(e,t){return ID.isUndefined(t)?ID.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>o(vB(e),vB(t),!0)};return ID.forEach(Object.keys(e).concat(Object.keys(t)),(function(n){const i=l[n]||o,s=i(e[n],t[n],n);ID.isUndefined(s)&&i!==a||(r[n]=s)})),r}const yB={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{yB[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const bB={};yB.transitional=function(e,t,r){function n(e,t){return"[Axios v1.3.4] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new LD(n(o," has been removed"+(t?" in "+t:"")),LD.ERR_DEPRECATED);return t&&!bB[o]&&(bB[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}};const EB={assertOptions:function(e,t,r){if("object"!=typeof e)throw new LD("options must be an object",LD.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],s=t[i];if(s){const t=e[i],r=void 0===t||s(t,i,e);if(!0!==r)throw new LD("option "+i+" must be "+r,LD.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new LD("Unknown option "+i,LD.ERR_BAD_OPTION)}},validators:yB},SB=EB.validators;class CB{constructor(e){this.defaults=e,this.interceptors={request:new qD,response:new qD}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=_B(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;let i;void 0!==r&&EB.assertOptions(r,{silentJSONParsing:SB.transitional(SB.boolean),forcedJSONParsing:SB.transitional(SB.boolean),clarifyTimeoutError:SB.transitional(SB.boolean)},!1),void 0!==n&&EB.assertOptions(n,{encode:SB.function,serialize:SB.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),i=o&&ID.merge(o.common,o[t.method]),i&&ID.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=oB.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[mB.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=mB.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return GD(uB((e=_B(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ID.forEach(["delete","get","head","options"],(function(e){CB.prototype[e]=function(t,r){return this.request(_B(r||{},{method:e,url:t,data:(r||{}).data}))}})),ID.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(_B(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}CB.prototype[e]=t(),CB.prototype[e+"Form"]=t(!0)}));const TB=CB;class wB{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new lB(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new wB((function(t){e=t}));return{token:t,cancel:e}}}const RB=wB,kB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kB).forEach((([e,t])=>{kB[t]=e}));const OB=kB,IB=function e(t){const r=new TB(t),n=$x(TB.prototype.request,r);return ID.extend(n,TB.prototype,r,{allOwnKeys:!0}),ID.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(_B(t,r))},n}(QD);IB.Axios=TB,IB.CanceledError=lB,IB.CancelToken=RB,IB.isCancel=sB,IB.VERSION="1.3.4",IB.toFormData=UD,IB.AxiosError=LD,IB.Cancel=IB.CanceledError,IB.all=function(e){return Promise.all(e)},IB.spread=function(e){return function(t){return e.apply(null,t)}},IB.isAxiosError=function(e){return ID.isObject(e)&&!0===e.isAxiosError},IB.mergeConfig=_B,IB.AxiosHeaders=oB,IB.formToJSON=e=>YD(ID.isHTMLForm(e)?new FormData(e):e),IB.HttpStatusCode=OB,IB.default=IB,(0,wt.Z)("MuiFormGroup",["root","row","error"]),(0,St.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})((({ownerState:e})=>(0,ft.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})));const PB=(0,Si.Z)((0,Ot.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),AB=(0,Si.Z)((0,Ot.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");(0,St.ZP)("span")({position:"relative",display:"flex"}),(0,St.ZP)(PB)({transform:"scale(1)"}),(0,St.ZP)(AB)((({theme:e,ownerState:t})=>(0,ft.Z)({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}))),__webpack_require__(7450);const NB=(0,wt.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);(0,St.ZP)(uT,{shouldForwardProp:e=>(0,St.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${(0,Tt.Z)(r.color)}`]]}})((({theme:e,ownerState:t})=>(0,ft.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Lr.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${NB.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${NB.disabled}`]:{color:(e.vars||e).palette.action.disabled}})));const LB=(e,t)=>(0,ft.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),MB=e=>(0,ft.Z)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),xB=function(e){const r=(0,Ct.Z)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:o=!1}=r;return(0,Ot.jsxs)(t.Fragment,{children:[(0,Ot.jsx)(cy,{styles:e=>((e,t=!1)=>{var r,n;const o={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((([t,r])=>{var n;o[e.getColorSchemeSelector(t).replace(/\s*&/,"")]={colorScheme:null==(n=r.palette)?void 0:n.mode}}));let i=(0,ft.Z)({html:LB(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,ft.Z)({margin:0},MB(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},o);const s=null==(r=e.components)||null==(n=r.MuiCssBaseline)?void 0:n.styleOverrides;return s&&(i=[i,s]),i})(e,o)}),n]})};function DB(e){return(0,Rt.Z)("MuiCardContent",e)}(0,wt.Z)("MuiCardContent",["root"]);const BB=["className","component"],UB=(0,St.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),ZB=t.forwardRef((function(e,t){const r=(0,Ct.Z)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=r,i=(0,pt.Z)(r,BB),s=(0,ft.Z)({},r,{component:o}),a=(e=>{const{classes:t}=e;return(0,Et.Z)({root:["root"]},DB,t)})(s);return(0,Ot.jsx)(UB,(0,ft.Z)({as:o,className:(0,gt.default)(a.root,n),ownerState:s,ref:t},i))}));var jB=__webpack_require__(4819),HB=__webpack_require__(6760);const FB="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",zB=function(e){const{children:r,theme:n}=e,o=(0,HB.Z)(),i=t.useMemo((()=>{const e=null===o?n:function(e,t){return"function"==typeof t?t(e):(0,ft.Z)({},e,t)}(o,n);return null!=e&&(e[FB]=null!==o),e}),[n,o]);return(0,Ot.jsx)(jB.Z.Provider,{value:i,children:r})},GB={};function qB(e){const t=(0,nr.Z)();return(0,Ot.jsx)(rn.T.Provider,{value:"object"==typeof t?t:GB,children:e.children})}const VB=function(e){const{children:t,theme:r}=e;return(0,Ot.jsx)(zB,{theme:r,children:(0,Ot.jsx)(qB,{children:t})})},WB=__webpack_require__.p+"808a31df22dbc7c7479371c4876867a4.jpg",YB=function(e,t){if(!e)throw KB(t)},KB=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},$B=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t},QB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,s=i?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=o>>2,u=(3&o)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,i||(d=64)),n.push(r[c],r[u],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($B(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const o=e[r++];if(o<128)t[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(i>>10)),t[n++]=String.fromCharCode(56320+(1023&i))}else{const i=e[r++],s=e[r++];t[n++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const o=r[e.charAt(t++)],i=t<e.length?r[e.charAt(t)]:0;++t;const s=t<e.length?r[e.charAt(t)]:64;++t;const a=t<e.length?r[e.charAt(t)]:64;if(++t,null==o||null==i||null==s||null==a)throw new XB;const l=o<<2|i>>4;if(n.push(l),64!==s){const e=i<<4&240|s>>2;if(n.push(e),64!==a){const e=s<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class XB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JB=function(e){const t=$B(e);return QB.encodeByteArray(t,!0)},eU=function(e){return JB(e).replace(/\./g,"")},tU=function(e){try{return QB.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rU(e){return nU(void 0,e)}function nU(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)t.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=nU(e[r],t[r]));return e}const oU=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==__webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&tU(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},iU=e=>{var t,r;return null===(r=null===(t=oU())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},sU=()=>{var e;return null===(e=oU())||void 0===e?void 0:e.config},aU=e=>{var t;return null===(t=oU())||void 0===t?void 0:t[`_${e}`]};class lU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,r))}}}function cU(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function uU(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cU())}function dU(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class hU extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,hU.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pU.prototype.create)}}class pU{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},n=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(fU,((e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`}))}(o,r):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new hU(n,s,r)}}const fU=/\{\$([^}]+)}/g;function gU(e){return JSON.parse(e)}function mU(e){return JSON.stringify(e)}const vU=function(e){let t={},r={},n={},o="";try{const i=e.split(".");t=gU(tU(i[0])||""),r=gU(tU(i[1])||""),o=i[2],n=r.d||{},delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:o}};function _U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yU(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function bU(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function EU(e,t,r){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=t.call(r,e[o],o,e));return n}function SU(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const o of r){if(!n.includes(o))return!1;const r=e[o],i=t[o];if(CU(r)&&CU(i)){if(!SU(r,i))return!1}else if(r!==i)return!1}for(const e of n)if(!r.includes(e))return!1;return!0}function CU(e){return null!==e&&"object"==typeof e}function TU(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function wU(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}})),t}function RU(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}class kU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=4294967295&(t<<1|t>>>31)}let n,o,i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^s&(a^l),o=1518500249):(n=s^a^l,o=1859775393):e<60?(n=s&a|l&(s|a),o=2400959708):(n=s^a^l,o=3395469782);const t=(i<<5|i>>>27)+n+c+o+r[e]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=i,i=t}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let n=0;const o=this.buf_;let i=this.inbuf_;for(;n<t;){if(0===i)for(;n<=r;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(o[i]=e.charCodeAt(n),++i,++n,i===this.blockSize){this.compress_(o),i=0;break}}else for(;n<t;)if(o[i]=e[n],++i,++n,i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[r]=this.chain_[t]>>n&255,++r;return e}}class OU{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=IU),void 0===n.error&&(n.error=IU),void 0===n.complete&&(n.complete=IU);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}})),this.observers.push(n),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function IU(){}const PU=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};function AU(e){return e&&e._delegate?e._delegate:e}class NU{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const LU="[DEFAULT]";class MU{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new lU;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:LU})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=LU){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=LU){return this.instances.has(e)}getOptions(e=LU){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(n,o);const i=this.instances.get(n);return i&&e(i,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===LU?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}var n;return r||null}normalizeInstanceIdentifier(e=LU){return this.component?this.component.multipleInstances?e:LU:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new MU(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const DU=[];var BU,UU;(UU=BU||(BU={}))[UU.DEBUG=0]="DEBUG",UU[UU.VERBOSE=1]="VERBOSE",UU[UU.INFO=2]="INFO",UU[UU.WARN=3]="WARN",UU[UU.ERROR=4]="ERROR",UU[UU.SILENT=5]="SILENT";const ZU={debug:BU.DEBUG,verbose:BU.VERBOSE,info:BU.INFO,warn:BU.WARN,error:BU.ERROR,silent:BU.SILENT},jU=BU.INFO,HU={[BU.DEBUG]:"log",[BU.VERBOSE]:"log",[BU.INFO]:"info",[BU.WARN]:"warn",[BU.ERROR]:"error"},FU=(e,t,...r)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),o=HU[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${n}]  ${e.name}:`,...r)};class zU{constructor(e){this.name=e,this._logLevel=jU,this._logHandler=FU,this._userLogHandler=null,DU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in BU))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ZU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,BU.DEBUG,...e),this._logHandler(this,BU.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,BU.VERBOSE,...e),this._logHandler(this,BU.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,BU.INFO,...e),this._logHandler(this,BU.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,BU.WARN,...e),this._logHandler(this,BU.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,BU.ERROR,...e),this._logHandler(this,BU.ERROR,...e)}}const GU=(e,t)=>t.some((t=>e instanceof t));let qU,VU;const WU=new WeakMap,YU=new WeakMap,KU=new WeakMap,$U=new WeakMap,QU=new WeakMap;let XU={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return YU.get(e);if("objectStoreNames"===t)return e.objectStoreNames||KU.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return eZ(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function JU(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(VU||(VU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(tZ(this),e),eZ(WU.get(this))}:function(...e){return eZ(t.apply(tZ(this),e))}:function(e,...r){const n=t.call(tZ(this),e,...r);return KU.set(n,e.sort?e.sort():[e]),eZ(n)}:(e instanceof IDBTransaction&&function(e){if(YU.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));YU.set(e,t)}(e),GU(e,qU||(qU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,XU):e);var t}function eZ(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(eZ(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&WU.set(t,e)})).catch((()=>{})),QU.set(t,e),t}(e);if($U.has(e))return $U.get(e);const t=JU(e);return t!==e&&($U.set(e,t),QU.set(t,e)),t}const tZ=e=>QU.get(e),rZ=["get","getKey","getAll","getAllKeys","count"],nZ=["put","add","delete","clear"],oZ=new Map;function iZ(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(oZ.get(t))return oZ.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=nZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!rZ.includes(r))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),o&&i.done]))[0]};return oZ.set(t,i),i}var sZ;sZ=XU,XU={...sZ,get:(e,t,r)=>iZ(e,t)||sZ.get(e,t,r),has:(e,t)=>!!iZ(e,t)||sZ.has(e,t)};class aZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const lZ="@firebase/app",cZ="0.9.11",uZ=new zU("@firebase/app"),dZ="[DEFAULT]",hZ={[lZ]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pZ=new Map,fZ=new Map;function gZ(e,t){try{e.container.addComponent(t)}catch(r){uZ.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function mZ(e){const t=e.name;if(fZ.has(t))return uZ.debug(`There were multiple attempts to register component ${t}.`),!1;fZ.set(t,e);for(const t of pZ.values())gZ(t,e);return!0}function vZ(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}const _Z=new pU("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yZ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new NU("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _Z.create("app-deleted",{appName:this._name})}}const bZ="9.22.1";function EZ(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});const n=Object.assign({name:dZ,automaticDataCollectionEnabled:!1},t),o=n.name;if("string"!=typeof o||!o)throw _Z.create("bad-app-name",{appName:String(o)});if(r||(r=sU()),!r)throw _Z.create("no-options");const i=pZ.get(o);if(i){if(SU(r,i.options)&&SU(n,i.config))return i;throw _Z.create("duplicate-app",{appName:o})}const s=new xU(o);for(const e of fZ.values())s.addComponent(e);const a=new yZ(r,n,s);return pZ.set(o,a),a}function SZ(e=dZ){const t=pZ.get(e);if(!t&&e===dZ&&sU())return EZ();if(!t)throw _Z.create("no-app",{appName:e});return t}function CZ(e,t,r){var n;let o=null!==(n=hZ[e])&&void 0!==n?n:e;r&&(o+=`-${r}`);const i=o.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${o}" with version "${t}":`];return i&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void uZ.warn(e.join(" "))}mZ(new NU(`${o}-version`,(()=>({library:o,version:t})),"VERSION"))}const TZ="firebase-heartbeat-database",wZ=1,RZ="firebase-heartbeat-store";let kZ=null;function OZ(){return kZ||(kZ=function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=eZ(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(eZ(s.result),e.oldVersion,e.newVersion,eZ(s.transaction),e)})),r&&s.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(TZ,wZ,{upgrade:(e,t)=>{0===t&&e.createObjectStore(RZ)}}).catch((e=>{throw _Z.create("idb-open",{originalErrorMessage:e.message})}))),kZ}async function IZ(e,t){try{const r=(await OZ()).transaction(RZ,"readwrite"),n=r.objectStore(RZ);await n.put(t,PZ(e)),await r.done}catch(e){if(e instanceof hU)uZ.warn(e.message);else{const t=_Z.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});uZ.warn(t.message)}}}function PZ(e){return`${e.name}!${e.options.appId}`}class AZ{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LZ(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=NZ();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=NZ(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){const r=[];let n=e.slice();for(const o of e){const e=r.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),MZ(r)>t){e.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),MZ(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=eU(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function NZ(){return(new Date).toISOString().substring(0,10)}class LZ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await OZ();return await t.transaction(RZ).objectStore(RZ).get(PZ(e))}catch(e){if(e instanceof hU)uZ.warn(e.message);else{const t=_Z.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});uZ.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return IZ(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return IZ(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function MZ(e){return eU(JSON.stringify({version:2,heartbeats:e})).length}function xZ(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}mZ(new NU("platform-logger",(e=>new aZ(e)),"PRIVATE")),mZ(new NU("heartbeat",(e=>new AZ(e)),"PRIVATE")),CZ(lZ,cZ,""),CZ(lZ,cZ,"esm2017"),CZ("fire-js",""),CZ("firebase","9.22.1","app"),Object.create,Object.create;const DZ=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},BZ=new pU("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),UZ=new zU("@firebase/auth");function ZZ(e,...t){UZ.logLevel<=BU.ERROR&&UZ.error(`Auth (${bZ}): ${e}`,...t)}function jZ(e,...t){throw FZ(e,...t)}function HZ(e,...t){return FZ(e,...t)}function FZ(e,...t){if("string"!=typeof e){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return BZ.create(e,...t)}function zZ(e,t,...r){if(!e)throw FZ(t,...r)}function GZ(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ZZ(t),new Error(t)}function qZ(e,t){e||GZ(t)}function VZ(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function WZ(){return"http:"===YZ()||"https:"===YZ()}function YZ(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class KZ{constructor(e,t){this.shortDelay=e,this.longDelay=t,qZ(t>e,"Short delay should be less than long delay!"),this.isMobile=uU()||dU()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(WZ()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function $Z(e,t){qZ(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}class QZ{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void GZ("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void GZ("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void GZ("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},JZ=new KZ(3e4,6e4);function ej(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tj(e,t,r,n,o={}){return rj(e,o,(async()=>{let o={},i={};n&&("GET"===t?i=n:o={body:JSON.stringify(n)});const s=TU(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),QZ.fetch()(oj(e,e.config.apiHost,r,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},o))}))}async function rj(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},XZ),t);try{const t=new ij(e),o=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw sj(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[r,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw sj(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===r)throw sj(e,"email-already-in-use",i);if("USER_DISABLED"===r)throw sj(e,"user-disabled",i);const a=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw function(e,t,r){const n=Object.assign(Object.assign({},DZ()),{[t]:r});return new pU("auth","Firebase",n).create(t,{appName:e.name})}(e,a,s);jZ(e,a)}}catch(t){if(t instanceof hU)throw t;jZ(e,"network-request-failed",{message:String(t)})}}async function nj(e,t,r,n,o={}){const i=await tj(e,t,r,n,o);return"mfaPendingCredential"in i&&jZ(e,"multi-factor-auth-required",{_serverResponse:i}),i}function oj(e,t,r,n){const o=`${t}${r}?${n}`;return e.config.emulator?$Z(e.config,o):`${e.config.apiScheme}://${o}`}class ij{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(HZ(this.auth,"network-request-failed"))),JZ.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function sj(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const o=HZ(e,t,n);return o.customData._tokenResponse=r,o}function aj(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function lj(e){return 1e3*Number(e)}function cj(e){const[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return ZZ("JWT malformed, contained fewer than 3 sections"),null;try{const e=tU(r);return e?JSON.parse(e):(ZZ("Failed to decode base64 JWT payload"),null)}catch(e){return ZZ("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function uj(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof hU&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class dj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class hj{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=aj(this.lastLoginAt),this.creationTime=aj(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pj(e){var t;const r=e.auth,n=await e.getIdToken(),o=await uj(e,async function(e,t){return tj(e,"POST","/v1/accounts:lookup",t)}(r,{idToken:n}));zZ(null==o?void 0:o.users.length,r,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const s=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map((e=>{var{providerId:t}=e,r=xZ(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})):[],a=function(e,t){const r=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...r,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&i.passwordHash||(null==a?void 0:a.length)),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new hj(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}class fj{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zZ(e.idToken,"internal-error"),zZ(void 0!==e.idToken,"internal-error"),zZ(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=cj(e);return zZ(t,"internal-error"),zZ(void 0!==t.exp,"internal-error"),zZ(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return zZ(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:o}=await async function(e,t){const r=await rj(e,{},(async()=>{const r=TU({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:o}=e.config,i=oj(e,n,"/v1/token",`key=${o}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",QZ.fetch()(i,{method:"POST",headers:s,body:r})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(e,t);this.updateTokensAndExpiration(r,n,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:o}=t,i=new fj;return r&&(zZ("string"==typeof r,"internal-error",{appName:e}),i.refreshToken=r),n&&(zZ("string"==typeof n,"internal-error",{appName:e}),i.accessToken=n),o&&(zZ("number"==typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fj,this.toJSON())}_performRefresh(){return GZ("not implemented")}}function gj(e,t){zZ("string"==typeof e||void 0===e,"internal-error",{appName:t})}class mj{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,o=xZ(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hj(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await uj(this,this.stsTokenManager.getToken(this.auth,e));return zZ(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const r=AU(e),n=await r.getIdToken(t),o=cj(n);zZ(o&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error");const i="object"==typeof o.firebase?o.firebase:void 0,s=null==i?void 0:i.sign_in_provider;return{claims:o,token:n,authTime:aj(lj(o.auth_time)),issuedAtTime:aj(lj(o.iat)),expirationTime:aj(lj(o.exp)),signInProvider:s||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=AU(e);await pj(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(zZ(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mj(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){zZ(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await pj(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await uj(this,async function(e,t){return tj(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,o,i,s,a,l,c;const u=null!==(r=t.displayName)&&void 0!==r?r:void 0,d=null!==(n=t.email)&&void 0!==n?n:void 0,h=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:y,isAnonymous:b,providerData:E,stsTokenManager:S}=t;zZ(_&&S,e,"internal-error");const C=fj.fromJSON(this.name,S);zZ("string"==typeof _,e,"internal-error"),gj(u,e.name),gj(d,e.name),zZ("boolean"==typeof y,e,"internal-error"),zZ("boolean"==typeof b,e,"internal-error"),gj(h,e.name),gj(p,e.name),gj(f,e.name),gj(g,e.name),gj(m,e.name),gj(v,e.name);const T=new mj({uid:_,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:C,createdAt:m,lastLoginAt:v});return E&&Array.isArray(E)&&(T.providerData=E.map((e=>Object.assign({},e)))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t,r=!1){const n=new fj;n.updateFromServerResponse(t);const o=new mj({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await pj(o),o}}const vj=new Map;function _j(e){qZ(e instanceof Function,"Expected a class definition");let t=vj.get(e);return t?(qZ(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vj.set(e,t),t)}class yj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yj.type="NONE";const bj=yj;function Ej(e,t,r){return`firebase:${e}:${t}:${r}`}class Sj{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:o}=this.auth;this.fullUserKey=Ej(this.userKey,n.apiKey,o),this.fullPersistenceKey=Ej("persistence",n.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mj._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Sj(_j(bj),e,r);const n=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=n[0]||_j(bj);const i=Ej(r,e.config.apiKey,e.name);let s=null;for(const r of t)try{const t=await r._get(i);if(t){const n=mj._fromJSON(e,t);r!==o&&(s=n),o=r;break}}catch(e){}const a=n.filter((e=>e._shouldAllowMigration));return o._shouldAllowMigration&&a.length?(o=a[0],s&&await o._set(i,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(i)}catch(e){}}))),new Sj(o,e,r)):new Sj(o,e,r)}}function Cj(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kj(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Tj(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ij(t))return"Blackberry";if(Pj(t))return"Webos";if(wj(t))return"Safari";if((t.includes("chrome/")||Rj(t))&&!t.includes("edge/"))return"Chrome";if(Oj(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Tj(e=cU()){return/firefox\//i.test(e)}function wj(e=cU()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rj(e=cU()){return/crios\//i.test(e)}function kj(e=cU()){return/iemobile/i.test(e)}function Oj(e=cU()){return/android/i.test(e)}function Ij(e=cU()){return/blackberry/i.test(e)}function Pj(e=cU()){return/webos/i.test(e)}function Aj(e=cU()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nj(e=cU()){return Aj(e)||Oj(e)||Pj(e)||Ij(e)||/windows phone/i.test(e)||kj(e)}function Lj(e,t=[]){let r;switch(e){case"Browser":r=Cj(cU());break;case"Worker":r=`${Cj(cU())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${bZ}/${n}`}async function Mj(e,t){return tj(e,"GET","/v2/recaptchaConfig",ej(e,t))}function xj(e){return void 0!==e&&void 0!==e.getResponse}function Dj(e){return void 0!==e&&void 0!==e.enterprise}class Bj{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Uj(e){return new Promise(((t,r)=>{const n=document.createElement("script");var o,i;n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=HZ("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",(null!==(i=null===(o=document.getElementsByTagName("head"))||void 0===o?void 0:o[0])&&void 0!==i?i:document).appendChild(n)}))}function Zj(e){return`__${e}${Math.floor(1e6*Math.random())}`}class jj{constructor(e){this.type="recaptcha-enterprise",this.auth=Gj(e)}async verify(e="verify",t=!1){function r(t,r,n){const o=window.grecaptcha;Dj(o)?o.enterprise.ready((()=>{o.enterprise.execute(t,{action:e}).then((e=>{r(e)})).catch((()=>{r("NO_RECAPTCHA")}))})):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,n)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,r)=>{Mj(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((n=>{if(void 0!==n.recaptchaKey){const r=new Bj(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{r(e)}))}))})(this.auth).then((o=>{if(!t&&Dj(window.grecaptcha))r(o,e,n);else{if("undefined"==typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));Uj("https://www.google.com/recaptcha/enterprise.js?render="+o).then((()=>{r(o,e,n)})).catch((e=>{n(e)}))}})).catch((e=>{n(e)}))}))}}async function Hj(e,t,r,n=!1){const o=new jj(e);let i;try{i=await o.verify(r)}catch(e){i=await o.verify(r,!0)}const s=Object.assign({},t);return n?Object.assign(s,{captchaResp:i}):Object.assign(s,{captchaResponse:i}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}class Fj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise(((r,n)=>{try{r(e(t))}catch(e){n(e)}}));r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class zj{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qj(this),this.idTokenSubscription=new qj(this),this.beforeStateQueue=new Fj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BZ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_j(t)),this._initializationPromise=this.queue((async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Sj.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let n=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return zZ(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pj(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?AU(e):null;return t&&zZ(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&zZ(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_j(e))}))}async initializeRecaptchaConfig(){const e=await Mj(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Bj(e);null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new jj(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pU("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_j(e)||this._popupRedirectResolver;zZ(t,this,"argument-error"),this.redirectPersistenceManager=await Sj.create(this,[_j(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return zZ(i,this,"internal-error"),i.then((()=>o(this.currentUser))),"function"==typeof t?e.addObserver(t,r,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zZ(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){UZ.logLevel<=BU.WARN&&UZ.warn(`Auth (${bZ}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Gj(e){return AU(e)}class qj{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const r=new OU(e,void 0);return r.subscribe.bind(r)}((e=>this.observer=e))}get next(){return zZ(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vj(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wj(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Yj{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return GZ("not implemented")}_getIdTokenResponse(e){return GZ("not implemented")}_linkToIdToken(e,t){return GZ("not implemented")}_getReauthenticationResolver(e){return GZ("not implemented")}}async function Kj(e,t){return nj(e,"POST","/v1/accounts:signInWithPassword",ej(e,t))}class $j extends Yj{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new $j(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $j(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Hj(e,r,"signInWithPassword");return Kj(e,t)}return Kj(e,r).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Hj(e,r,"signInWithPassword");return Kj(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return nj(e,"POST","/v1/accounts:signInWithEmailLink",ej(e,t))}(e,{email:this._email,oobCode:this._password});default:jZ(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return tj(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return nj(e,"POST","/v1/accounts:signInWithEmailLink",ej(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:jZ(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qj(e,t){return nj(e,"POST","/v1/accounts:signInWithIdp",ej(e,t))}class Xj extends Yj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xj(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jZ("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,o=xZ(t,["providerId","signInMethod"]);if(!r||!n)return null;const i=new Xj(r,n);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return Qj(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qj(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qj(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=TU(t)}return e}}const Jj={USER_NOT_FOUND:"user-not-found"};class eH extends Yj{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eH({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eH({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return nj(e,"POST","/v1/accounts:signInWithPhoneNumber",ej(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const r=await nj(e,"POST","/v1/accounts:signInWithPhoneNumber",ej(e,t));if(r.temporaryProof)throw sj(e,"account-exists-with-different-credential",r);return r}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return nj(e,"POST","/v1/accounts:signInWithPhoneNumber",ej(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Jj)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:o}=e;return r||t||n||o?new eH({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:o}):null}}class tH{constructor(e){var t,r,n,o,i,s;const a=wU(RU(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(r=a.oobCode)&&void 0!==r?r:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=a.mode)&&void 0!==n?n:null);zZ(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(o=a.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=wU(RU(e)).link,r=t?wU(RU(t)).deep_link_id:null,n=wU(RU(e)).deep_link_id;return(n?wU(RU(n)).link:null)||n||r||t||e}(e);try{return new tH(t)}catch(e){return null}}}class rH{constructor(){this.providerId=rH.PROVIDER_ID}static credential(e,t){return $j._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=tH.parseLink(t);return zZ(r,"argument-error"),$j._fromEmailAndCode(e,r.code,r.tenantId)}}rH.PROVIDER_ID="password",rH.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rH.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oH extends nH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iH extends oH{constructor(){super("facebook.com")}static credential(e){return Xj._fromParams({providerId:iH.PROVIDER_ID,signInMethod:iH.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iH.credentialFromTaggedObject(e)}static credentialFromError(e){return iH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return iH.credential(e.oauthAccessToken)}catch(e){return null}}}iH.FACEBOOK_SIGN_IN_METHOD="facebook.com",iH.PROVIDER_ID="facebook.com";class sH extends oH{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xj._fromParams({providerId:sH.PROVIDER_ID,signInMethod:sH.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sH.credentialFromTaggedObject(e)}static credentialFromError(e){return sH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return sH.credential(t,r)}catch(e){return null}}}sH.GOOGLE_SIGN_IN_METHOD="google.com",sH.PROVIDER_ID="google.com";class aH extends oH{constructor(){super("github.com")}static credential(e){return Xj._fromParams({providerId:aH.PROVIDER_ID,signInMethod:aH.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aH.credentialFromTaggedObject(e)}static credentialFromError(e){return aH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return aH.credential(e.oauthAccessToken)}catch(e){return null}}}aH.GITHUB_SIGN_IN_METHOD="github.com",aH.PROVIDER_ID="github.com";class lH extends oH{constructor(){super("twitter.com")}static credential(e,t){return Xj._fromParams({providerId:lH.PROVIDER_ID,signInMethod:lH.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lH.credentialFromTaggedObject(e)}static credentialFromError(e){return lH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return lH.credential(t,r)}catch(e){return null}}}lH.TWITTER_SIGN_IN_METHOD="twitter.com",lH.PROVIDER_ID="twitter.com";class cH{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){const o=await mj._fromIdTokenResponse(e,r,n),i=uH(r);return new cH({user:o,providerId:i,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=uH(r);return new cH({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function uH(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dH extends hU{constructor(e,t,r,n){var o;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,dH.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new dH(e,t,r,n)}}function hH(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch((r=>{if("auth/multi-factor-auth-required"===r.code)throw dH._fromErrorAndOperation(e,r,t,n);throw r}))}async function pH(e,t,r=!1){const n="signIn",o=await hH(e,n,t),i=await cH._fromIdTokenResponse(e,n,o);return r||await e._updateCurrentUser(i.user),i}new WeakMap;const fH="__sak";class gH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fH,"1"),this.storage.removeItem(fH),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class mH extends gH{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=cU();return wj(e)||Aj(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Nj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,r)=>{this.notifyListeners(e,r)}));const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const n=this.storage.getItem(r);if(e.newValue!==n)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const n=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},o=this.storage.getItem(r);!function(){const e=cU();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||o===e.newValue||e.newValue===e.oldValue?n():setTimeout(n,10)}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mH.type="LOCAL";const vH=mH;class _H extends gH{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_H.type="SESSION";const yH=_H;class bH{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const r=new bH(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:o}=t.data,i=this.handlersMap[n];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const s=Array.from(i).map((async e=>e(t.origin,o))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function EH(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}bH.receivers=[];class SH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let o,i;return new Promise(((s,a)=>{const l=EH("",20);n.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),r);i={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),o=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),s(t.data.response);break;default:clearTimeout(c),clearTimeout(o),a(new Error("invalid_response"))}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[n.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function CH(){return window}function TH(){return void 0!==CH().WorkerGlobalScope&&"function"==typeof CH().importScripts}const wH="firebaseLocalStorageDb",RH="firebaseLocalStorage",kH="fbase_key";class OH{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function IH(e,t){return e.transaction([RH],t?"readwrite":"readonly").objectStore(RH)}function PH(){const e=indexedDB.open(wH,1);return new Promise(((t,r)=>{e.addEventListener("error",(()=>{r(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(RH,{keyPath:kH})}catch(e){r(e)}})),e.addEventListener("success",(async()=>{const r=e.result;r.objectStoreNames.contains(RH)?t(r):(r.close(),await function(){const e=indexedDB.deleteDatabase(wH);return new OH(e).toPromise()}(),t(await PH()))}))}))}async function AH(e,t,r){const n=IH(e,!0).put({[kH]:t,value:r});return new OH(n).toPromise()}function NH(e,t){const r=IH(e,!0).delete(t);return new OH(r).toPromise()}class LH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await PH()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bH._getInstance(TH()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new SH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}var t}async _isAvailable(){try{if(!indexedDB)return!1;const e=await PH();return await AH(e,fH,"1"),await NH(e,fH),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((r=>AH(r,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const r=IH(e,!1).get(t),n=await new OH(r).toPromise();return void 0===n?null:n.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>NH(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=IH(e,!1).getAll();return new OH(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;for(const{fbase_key:n,value:o}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(o)&&(this.notifyListeners(n,o),t.push(n));for(const e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}LH.type="LOCAL";const MH=LH,xH=1e12;class DH{constructor(e){this.auth=e,this.counter=xH,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new BH(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||xH;null===(t=this._widgets.get(r))||void 0===t||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||xH;return(null===(t=this._widgets.get(r))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const r=e||xH;return null===(t=this._widgets.get(r))||void 0===t||t.execute(),""}}class BH{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const n="string"==typeof e?document.getElementById(e):e;zZ(n,"argument-error",{appName:t}),this.container=n,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],r="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(r.charAt(Math.floor(62*Math.random())));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const UH=Zj("rcb"),ZH=new KZ(3e4,6e4);class jH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=CH().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return zZ(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&xj(CH().grecaptcha)?Promise.resolve(CH().grecaptcha):new Promise(((r,n)=>{const o=CH().setTimeout((()=>{n(HZ(e,"network-request-failed"))}),ZH.get());CH()[UH]=()=>{CH().clearTimeout(o),delete CH()[UH];const i=CH().grecaptcha;if(!i||!xj(i))return void n(HZ(e,"internal-error"));const s=i.render;i.render=(e,t)=>{const r=s(e,t);return this.counter++,r},this.hostLanguage=t,r(i)},Uj(`https://www.google.com/recaptcha/api.js??${TU({onload:UH,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(o),n(HZ(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=CH().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class HH{async load(e){return new DH(e)}clearedOneInstance(){}}const FH="recaptcha",zH={theme:"light",type:"image"};class GH{constructor(e,t=Object.assign({},zH),r){this.parameters=t,this.type=FH,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gj(r),this.isInvisible="invisible"===this.parameters.size,zZ("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const n="string"==typeof e?document.getElementById(e):e;zZ(n,this.auth,"argument-error"),this.container=n,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new HH:new jH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((r=>{const n=e=>{e&&(this.tokenChangeListeners.delete(n),r(e))};this.tokenChangeListeners.add(n),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){zZ(!this.parameters.sitekey,this.auth,"argument-error"),zZ(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),zZ("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const r=CH()[e];"function"==typeof r&&r(t)}}}assertNotDestroyed(){zZ(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){zZ(WZ()&&!TH(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await tj(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);zZ(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return zZ(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qH{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=eH._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function VH(e,t,r){var n;const o=await r.verify();try{let i;if(zZ("string"==typeof o,e,"argument-error"),zZ(r.type===FH,e,"argument-error"),i="string"==typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){zZ("enroll"===t.type,e,"internal-error");const r=await function(e,t){return tj(e,"POST","/v2/accounts/mfaEnrollment:start",ej(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:o}});return r.phoneSessionInfo.sessionInfo}{zZ("signin"===t.type,e,"internal-error");const r=(null===(n=i.multiFactorHint)||void 0===n?void 0:n.uid)||i.multiFactorUid;zZ(r,e,"missing-multi-factor-info");const s=await function(e,t){return tj(e,"POST","/v2/accounts/mfaSignIn:start",ej(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:o}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return tj(e,"POST","/v1/accounts:sendVerificationCode",ej(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:o});return t}}finally{r._reset()}}class WH{constructor(e){this.providerId=WH.PROVIDER_ID,this.auth=Gj(e)}verifyPhoneNumber(e,t){return VH(this.auth,e,AU(t))}static credential(e,t){return eH._fromVerification(e,t)}static credentialFromResult(e){const t=e;return WH.credentialFromTaggedObject(t)}static credentialFromError(e){return WH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?eH._fromTokenResponse(t,r):null}}WH.PROVIDER_ID="phone",WH.PHONE_SIGN_IN_METHOD="phone";class YH extends Yj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qj(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qj(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qj(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KH(e){return pH(e.auth,new YH(e),e.bypassAuthState)}function $H(e){const{auth:t,user:r}=e;return zZ(r,t,"internal-error"),async function(e,t,r=!1){const{auth:n}=e,o="reauthenticate";try{const i=await uj(e,hH(n,o,t,e),r);zZ(i.idToken,n,"internal-error");const s=cj(i.idToken);zZ(s,n,"internal-error");const{sub:a}=s;return zZ(e.uid===a,n,"user-mismatch"),cH._forOperation(e,o,i)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&jZ(n,"user-mismatch"),e}}(r,new YH(e),e.bypassAuthState)}async function QH(e){const{auth:t,user:r}=e;return zZ(r,t,"internal-error"),async function(e,t,r=!1){const n=await uj(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return cH._forOperation(e,"link",n)}(r,new YH(e),e.bypassAuthState)}class XH{constructor(e,t,r,n,o=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:o,error:i,type:s}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KH;case"linkViaPopup":case"linkViaRedirect":return QH;case"reauthViaPopup":case"reauthViaRedirect":return $H;default:jZ(this.auth,"internal-error")}}resolve(e){qZ(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qZ(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JH=new KZ(2e3,1e4);class eF extends XH{constructor(e,t,r,n,o){super(e,t,n,o),this.provider=r,this.authWindow=null,this.pollId=null,eF.currentPopupAction&&eF.currentPopupAction.cancel(),eF.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zZ(e,this.auth,"internal-error"),e}async onExecution(){qZ(1===this.filter.length,"Popup operations only handle one event");const e=EH();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(HZ(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(HZ(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eF.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(HZ(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,JH.get())};e()}}eF.currentPopupAction=null;const tF="pendingRedirect",rF=new Map;class nF extends XH{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rF.get(this.auth._key());if(!e){try{const t=await async function(e,t){const r=function(e){return Ej(tF,e.config.apiKey,e.name)}(t),n=function(e){return _j(e._redirectPersistence)}(e);if(!await n._isAvailable())return!1;const o="true"===await n._get(r);return await n._remove(r),o}(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rF.set(this.auth._key(),e)}return this.bypassAuthState||rF.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function oF(e,t){rF.set(e._key(),t)}async function iF(e,t,r=!1){const n=Gj(e),o=function(e,t){return t?_j(t):(zZ(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(n,t),i=new nF(n,o,r),s=await i.execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,t)),s}class sF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lF(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lF(e)){const n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(HZ(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aF(e))}saveEventToCache(e){this.cachedEventUids.add(aF(e)),this.lastProcessedEventTime=Date.now()}}function aF(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lF({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const cF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uF=/^https?/;function dF(e){const t=VZ(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===n}if(!uF.test(r))return!1;if(cF.test(e))return n===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}const hF=new KZ(3e4,6e4);function pF(){const e=CH().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let fF=null;function gF(e){return fF=fF||function(e){return new Promise(((t,r)=>{var n,o,i;function s(){pF(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pF(),r(HZ(e,"network-request-failed"))},timeout:hF.get()})}if(null===(o=null===(n=CH().gapi)||void 0===n?void 0:n.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=CH().gapi)||void 0===i?void 0:i.load)){const t=Zj("iframefcb");return CH()[t]=()=>{gapi.load?s():r(HZ(e,"network-request-failed"))},Uj(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>r(e)))}s()}})).catch((e=>{throw fF=null,e}))}(e),fF}const mF=new KZ(5e3,15e3),vF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_F=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yF(e){const t=e.config;zZ(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?$Z(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:bZ},o=_F.get(e.config.apiHost);o&&(n.eid=o);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${TU(n).slice(1)}`}const bF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class EF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const SF=encodeURIComponent("fac");async function CF(e,t,r,n,o,i){zZ(e.config.authDomain,e,"auth-domain-config-required"),zZ(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:bZ,eventId:o};if(t instanceof nH){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",bU(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))s[e]=t}if(t instanceof oH){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const l=await e._getAppCheckToken(),c=l?`#${SF}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?$Z(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${TU(a).slice(1)}${c}`}const TF="webStorageSupport",wF=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yH,this._completeRedirectFn=iF,this._overrideRedirectResult=oF}async _openPopup(e,t,r,n){var o;return qZ(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),function(e,t,r,n=500,o=600){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bF),{width:n.toString(),height:o.toString(),top:i,left:s}),c=cU().toLowerCase();r&&(a=Rj(c)?"_blank":r),Tj(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,r])=>`${e}${t}=${r},`),"");if(function(e=cU()){var t;return Aj(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",a),new EF(null);const d=window.open(t||"",a,u);zZ(d,e,"popup-blocked");try{d.focus()}catch(e){}return new EF(d)}(e,await CF(e,t,r,VZ(),n),EH())}async _openRedirect(e,t,r,n){return await this._originValidation(e),o=await CF(e,t,r,VZ(),n),CH().location.href=o,new Promise((()=>{}));var o}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(qZ(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch((()=>{delete this.eventManagers[t]})),r}async initAndGetManager(e){const t=await async function(e){const t=await gF(e),r=CH().gapi;return zZ(r,e,"internal-error"),t.open({where:document.body,url:yF(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vF,dontclear:!0},(t=>new Promise((async(r,n)=>{await t.restyle({setHideOnLeave:!1});const o=HZ(e,"network-request-failed"),i=CH().setTimeout((()=>{n(o)}),mF.get());function s(){CH().clearTimeout(i),r(t)}t.ping(s).then(s,(()=>{n(o)}))}))))}(e),r=new sF(e);return t.register("authEvent",(t=>(zZ(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(TF,{type:TF},(r=>{var n;const o=null===(n=null==r?void 0:r[0])||void 0===n?void 0:n[TF];void 0!==o&&t(!!o),jZ(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return tj(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(dF(e))return}catch(e){}jZ(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nj()||wj()||Aj()}};var RF="@firebase/auth",kF="0.23.2";class OF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zZ(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const IF=aU("authIdTokenMaxAge")||300;let PF=null;var AF;AF="Browser",mZ(new NU("auth",((e,{options:t})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:s}=r.options;zZ(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:s,clientPlatform:AF,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lj(AF)},l=new zj(r,n,o,a);return function(e,t){const r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(_j);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,r)=>{e.getProvider("auth-internal").initialize()}))),mZ(new NU("auth-internal",(e=>(e=>new OF(e))(Gj(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),CZ(RF,kF,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(AF)),CZ(RF,kF,"esm2017");const NF="@firebase/database",LF="0.14.4";let MF="";class xF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mU(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:gU(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class DF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return _U(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BF=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new xF(t)}}catch(e){}return new DF},UF=BF("localStorage"),ZF=BF("sessionStorage"),jF=new zU("@firebase/database"),HF=function(){let e=1;return function(){return e++}}(),FF=function(e){const t=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);if(o>=55296&&o<=56319){const t=o-55296;n++,YB(n<e.length,"Surrogate pair missing trail surrogate."),o=65536+(t<<10)+(e.charCodeAt(n)-56320)}o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):o<65536?(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}(e),r=new kU;r.update(t);const n=r.digest();return QB.encodeByteArray(n)},zF=function(...e){let t="";for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=zF.apply(null,n):t+="object"==typeof n?mU(n):n,t+=" "}return t};let GF=null,qF=!0;const VF=function(...e){if(!0===qF&&(qF=!1,null===GF&&!0===ZF.get("logging_enabled")&&(t=!0,YB(!r||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(jF.logLevel=BU.VERBOSE,GF=jF.log.bind(jF),r&&ZF.set("logging_enabled",!0)):"function"==typeof t?GF=t:(GF=null,ZF.remove("logging_enabled")))),GF){const t=zF.apply(null,e);GF(t)}var t,r},WF=function(e){return function(...t){VF(e,...t)}},YF=function(...e){const t="FIREBASE INTERNAL ERROR: "+zF(...e);jF.error(t)},KF=function(...e){const t=`FIREBASE FATAL ERROR: ${zF(...e)}`;throw jF.error(t),new Error(t)},$F=function(...e){const t="FIREBASE WARNING: "+zF(...e);jF.warn(t)},QF=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},XF="[MIN_NAME]",JF="[MAX_NAME]",ez=function(e,t){if(e===t)return 0;if(e===XF||t===JF)return-1;if(t===XF||e===JF)return 1;{const r=lz(e),n=lz(t);return null!==r?null!==n?r-n==0?e.length-t.length:r-n:-1:null!==n?1:e<t?-1:1}},tz=function(e,t){return e===t?0:e<t?-1:1},rz=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+mU(t))},nz=function(e){if("object"!=typeof e||null===e)return mU(e);const t=[];for(const r in e)t.push(r);t.sort();let r="{";for(let n=0;n<t.length;n++)0!==n&&(r+=","),r+=mU(t[n]),r+=":",r+=nz(e[t[n]]);return r+="}",r},oz=function(e,t){const r=e.length;if(r<=t)return[e];const n=[];for(let o=0;o<r;o+=t)o+t>r?n.push(e.substring(o,r)):n.push(e.substring(o,o+t));return n};function iz(e,t){for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])}const sz=function(e){YB(!QF(e),"Invalid JSON number");let t,r,n,o,i;0===e?(r=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=o+1023,n=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,n=Math.round(e/Math.pow(2,-1074))));const s=[];for(i=52;i;i-=1)s.push(n%2?1:0),n=Math.floor(n/2);for(i=11;i;i-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(t?1:0),s.reverse();const a=s.join("");let l="";for(i=0;i<64;i+=8){let e=parseInt(a.substr(i,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},az=new RegExp("^-?(0*)\\d{1,10}$"),lz=function(e){if(az.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},cz=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw $F("Exception was thrown by user callback.",t),e}),Math.floor(0))}},uz=function(e,t){const r=setTimeout(e,t);return"number"==typeof r&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(r):"object"==typeof r&&r.unref&&r.unref(),r};class dz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,r)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,r):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){$F(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(VF("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,r)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,r):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$F(e)}}class pz{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}pz.OWNER="owner";const fz="5",gz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mz="ac",vz="websocket",_z="long_polling";class yz{constructor(e,t,r,n,o=!1,i="",s=!1,a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=n,this.nodeAdmin=o,this.persistenceKey=i,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=UF.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&UF.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function bz(e,t,r){let n;if(YB("string"==typeof t,"typeof type must == string"),YB("object"==typeof r,"typeof params must == object"),t===vz)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==_z)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(r.ns=e.namespace);const o=[];return iz(r,((e,t)=>{o.push(e+"="+t)})),n+o.join("&")}class Ez{constructor(){this.counters_={}}incrementCounter(e,t=1){_U(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return rU(this.counters_)}}const Sz={},Cz={};function Tz(e){const t=e.toString();return Sz[t]||(Sz[t]=new Ez),Sz[t]}class wz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&cz((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Rz="start";class kz{constructor(e,t,r,n,o,i,s){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=n,this.authToken=o,this.transportSessionId=i,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WF(e),this.stats_=Tz(t),this.urlFn=e=>(this.appCheckToken&&(e[mz]=this.appCheckToken),bz(t,_z,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const r=function(){document.body?t||(t=!0,e()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&r()})),window.attachEvent("onload",r))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Oz(((...e)=>{const[t,r,n,o,i]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===Rz)this.id=r,this.password=n;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);r?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(r,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,r]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,r)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Rz]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=fz,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[mz]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&gz.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kz.forceAllow_=!0}static forceDisallow(){kz.forceDisallow_=!0}static isAvailable(){return!(!kz.forceAllow_&&(kz.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=mU(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=JB(t),n=oz(r,1840);for(let e=0;e<n.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=mU(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Oz{constructor(e,t,r,n){this.onDisconnect=r,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=HF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Oz.createIFrame_();let r="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(r='<script>document.domain="'+document.domain+'";<\/script>');const n="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(e){VF("frame writing exception"),e.stack&&VF(e.stack),VF(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||VF("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const e=this.pendingSegs.shift();r=r+"&seg"+n+"="+e.seg+"&ts"+n+"="+e.ts+"&d"+n+"="+e.d,n++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(r,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(n),r()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{VF("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))}}let Iz=null;"undefined"!=typeof MozWebSocket?Iz=MozWebSocket:"undefined"!=typeof WebSocket&&(Iz=WebSocket);class Pz{constructor(e,t,r,n,o,i,s){this.connId=e,this.applicationId=r,this.appCheckToken=n,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WF(this.connId),this.stats_=Tz(t),this.connURL=Pz.connectionURL_(t,i,s,n,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,n,o){const i={};return i.v=fz,"undefined"!=typeof location&&location.hostname&&gz.test(location.hostname)&&(i.r="f"),t&&(i.s=t),r&&(i.ls=r),n&&(i[mz]=n),o&&(i.p=o),bz(e,vz,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,UF.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new Iz(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Pz.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Iz&&!Pz.forceDisallow_}static previouslyFailed(){return UF.isInMemoryStorage||!0===UF.get("previous_websocket_failure")}markConnectionHealthy(){UF.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=gU(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(YB(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=mU(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=oz(t,16384);r.length>1&&this.sendString_(String(r.length));for(let e=0;e<r.length;e++)this.sendString_(r[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pz.responsesRequiredToBeHealthy=2,Pz.healthyTimeout=3e4;class Az{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[kz,Pz]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Pz&&Pz.isAvailable();let r=t&&!Pz.previouslyFailed();if(e.webSocketOnly&&(t||$F("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pz];else{const e=this.transports_=[];for(const t of Az.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Az.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Az.globalTransportInitialized_=!1;class Nz{constructor(e,t,r,n,o,i,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=n,this.authToken_=o,this.onMessage_=i,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WF("c:"+this.id+":"),this.transportManager_=new Az(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,r)}),Math.floor(0));const n=e.healthyTimeout||0;n>0&&(this.healthyTimeout_=uz((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rz("t",e),r=rz("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rz("t",e),r=rz("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rz("t",e);if("d"in e){const r=e.d;if("h"===t){const e=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?YF("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YF("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fz!==r&&$F("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),uz((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uz((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(UF.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lz{put(e,t,r,n){}merge(e,t,r,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Mz{constructor(e){this.allowedEvents_=e,this.listeners_={},YB(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const n=this.getInitialEvent(e);n&&t.apply(r,n)}off(e,t,r){this.validateEventType_(e);const n=this.listeners_[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t&&(!r||r===n[e].context))return void n.splice(e,1)}validateEventType_(e){YB(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class xz extends Mz{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||uU()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new xz}getInitialEvent(e){return YB("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dz{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bz(){return new Dz("")}function Uz(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Zz(e){return e.pieces_.length-e.pieceNum_}function jz(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Dz(e.pieces_,t)}function Hz(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Fz(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function zz(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let r=e.pieceNum_;r<e.pieces_.length-1;r++)t.push(e.pieces_[r]);return new Dz(t,0)}function Gz(e,t){const r=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)r.push(e.pieces_[t]);if(t instanceof Dz)for(let e=t.pieceNum_;e<t.pieces_.length;e++)r.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&r.push(e[t])}return new Dz(r,0)}function qz(e){return e.pieceNum_>=e.pieces_.length}function Vz(e,t){const r=Uz(e),n=Uz(t);if(null===r)return t;if(r===n)return Vz(jz(e),jz(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Wz(e,t){if(Zz(e)!==Zz(t))return!1;for(let r=e.pieceNum_,n=t.pieceNum_;r<=e.pieces_.length;r++,n++)if(e.pieces_[r]!==t.pieces_[n])return!1;return!0}function Yz(e,t){let r=e.pieceNum_,n=t.pieceNum_;if(Zz(e)>Zz(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}class Kz{constructor(e,t){this.errorPrefix_=t,this.parts_=Fz(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=PU(this.parts_[e]);$z(this)}}function $z(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qz(e))}function Qz(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Xz extends Mz{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Xz}getInitialEvent(e){return YB("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Jz=1e3;class eG extends Lz{constructor(e,t,r,n,o,i,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=n,this.onServerInfoUpdate_=o,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=eG.nextPersistentConnectionId_++,this.log_=WF("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jz,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xz.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&xz.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const n=++this.requestNumber_,o={r:n,a:e,b:t};this.log_(mU(o)),YB(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[n]=r)}get(e){this.initConnection_();const t=new lU,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const r=e.d;"ok"===e.s?t.resolve(r):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const n=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(n),t.promise}listen(e,t,r,n){this.initConnection_();const o=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+o),this.listens.has(i)||this.listens.set(i,new Map),YB(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),YB(!this.listens.get(i).has(o),"listen() called twice for same path/queryId.");const s={onComplete:n,hashFn:t,query:e,tag:r};this.listens.get(i).set(o,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)}))}sendListen_(e){const t=e.query,r=t._path.toString(),n=t._queryIdentifier;this.log_("Listen on "+r+" for "+n);const o={p:r};e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(o=>{const i=o.d,s=o.s;eG.warnOnListenWarnings_(i,t),(this.listens.get(r)&&this.listens.get(r).get(n))===e&&(this.log_("listen response",o),"ok"!==s&&this.removeListen_(r,n),e.onComplete&&e.onComplete(s,i))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&_U(e,"w")){const r=yU(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',r=t._path.toString();$F(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=vU(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=vU(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(t,r,(t=>{const r=t.s,n=t.d||"error";this.authToken_===e&&("ok"===r?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,n))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,r=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)}))}unlisten(e,t){const r=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+n),YB(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,n)&&this.connected_&&this.sendUnlisten_(r,n,e._queryObject,t)}sendUnlisten_(e,t,r,n){this.log_("Unlisten on "+e+" for "+t);const o={p:e};n&&(o.q=r,o.t=n),this.sendRequest("n",o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,n){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,(e=>{n&&setTimeout((()=>{n(e.s,e.d)}),Math.floor(0))}))}put(e,t,r,n){this.putInternal("p",e,t,r,n)}merge(e,t,r,n){this.putInternal("m",e,t,r,n)}putInternal(e,t,r,n,o){this.initConnection_();const i={p:t,d:r};void 0!==o&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:n}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,n=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,(r=>{this.log_(t+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(r.s,r.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mU(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):YF("Unrecognized action received from server: "+mU(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){YB(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jz,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jz,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jz),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+eG.nextConnectionId_++,o=this.lastSessionId;let i=!1,s=null;const a=function(){s?s.close():(i=!0,r())},l=function(e){YB(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);i?VF("getToken() completed but was canceled"):(VF("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new Nz(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,(e=>{$F(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),i||(this.repoInfo_.nodeAdmin&&$F(e),a())}}}interrupt(e){VF("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){VF("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bU(this.interruptReasons_)&&(this.reconnectDelay_=Jz,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;r=t?t.map((e=>nz(e))).join("$"):"default";const n=this.removeListen_(e,r);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(e,t){const r=new Dz(e).toString();let n;if(this.listens.has(r)){const e=this.listens.get(r);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(r)}else n=void 0;return n}onAuthRevoked_(e,t){VF("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){VF("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+MF.replace(/\./g,"-")]=1,uU()?e["framework.cordova"]=1:dU()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xz.getInstance().currentlyOnline();return bU(this.interruptReasons_)&&e}}eG.nextPersistentConnectionId_=0,eG.nextConnectionId_=0;class tG{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tG(e,t)}}class rG{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tG(XF,e),n=new tG(XF,t);return 0!==this.compare(r,n)}minPost(){return tG.MIN}}let nG;class oG extends rG{static get __EMPTY_NODE(){return nG}static set __EMPTY_NODE(e){nG=e}compare(e,t){return ez(e.name,t.name)}isDefinedOn(e){throw KB("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tG.MIN}maxPost(){return new tG(JF,nG)}makePost(e,t){return YB("string"==typeof e,"KeyIndex indexValue must always be a string."),new tG(e,nG)}toString(){return".key"}}const iG=new oG;class sG{constructor(e,t,r,n,o=null){this.isReverse_=n,this.resultGenerator_=o,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,n&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class aG{constructor(e,t,r,n,o){this.key=e,this.value=t,this.color=null!=r?r:aG.RED,this.left=null!=n?n:lG.EMPTY_NODE,this.right=null!=o?o:lG.EMPTY_NODE}copy(e,t,r,n,o){return new aG(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const o=r(e,n.key);return n=o<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===o?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return lG.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,n;if(r=this,t(e,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===t(e,r.key)){if(r.right.isEmpty())return lG.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,aG.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,aG.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}aG.RED=!0,aG.BLACK=!1;class lG{constructor(e,t=lG.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new lG(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,aG.BLACK,null,null))}remove(e){return new lG(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,aG.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,n=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return n?n.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(n=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sG(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sG(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sG(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sG(this.root_,null,this.comparator_,!0,e)}}function cG(e,t){return ez(e.name,t.name)}function uG(e,t){return ez(e,t)}let dG;lG.EMPTY_NODE=new class{copy(e,t,r,n,o){return this}insert(e,t,r){return new aG(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hG=function(e){return"number"==typeof e?"number:"+sz(e):"string:"+e},pG=function(e){if(e.isLeafNode()){const t=e.val();YB("string"==typeof t||"number"==typeof t||"object"==typeof t&&_U(t,".sv"),"Priority must be a string or number.")}else YB(e===dG||e.isEmpty(),"priority of unexpected type.");YB(e===dG||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fG,gG,mG;class vG{constructor(e,t=vG.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,YB(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),pG(this.priorityNode_)}static set __childrenNodeConstructor(e){fG=e}static get __childrenNodeConstructor(){return fG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vG(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:vG.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qz(e)?this:".priority"===Uz(e)?this.priorityNode_:vG.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:vG.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=Uz(e);return null===r?t:t.isEmpty()&&".priority"!==r?this:(YB(".priority"!==r||1===Zz(e),".priority must be the last token in a path"),this.updateImmediateChild(r,vG.__childrenNodeConstructor.EMPTY_NODE.updateChild(jz(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hG(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?sz(this.value_):this.value_,this.lazyHash_=FF(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vG.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vG.__childrenNodeConstructor?-1:(YB(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,n=vG.VALUE_TYPE_ORDER.indexOf(t),o=vG.VALUE_TYPE_ORDER.indexOf(r);return YB(n>=0,"Unknown leaf type: "+t),YB(o>=0,"Unknown leaf type: "+r),n===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-n}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}vG.VALUE_TYPE_ORDER=["object","boolean","number","string"];const _G=new class extends rG{compare(e,t){const r=e.node.getPriority(),n=t.node.getPriority(),o=r.compareTo(n);return 0===o?ez(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tG.MIN}maxPost(){return new tG(JF,new vG("[PRIORITY-POST]",mG))}makePost(e,t){const r=gG(e);return new tG(t,new vG("[PRIORITY-POST]",r))}toString(){return".priority"}},yG=Math.log(2);class bG{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/yG,10)),this.current_=this.count-1;const r=(n=this.count,parseInt(Array(n+1).join("1"),2));var n;this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const EG=function(e,t,r,n){e.sort(t);const o=function(t,n){const i=n-t;let s,a;if(0===i)return null;if(1===i)return s=e[t],a=r?r(s):s,new aG(a,s.node,aG.BLACK,null,null);{const l=parseInt(i/2,10)+t,c=o(t,l),u=o(l+1,n);return s=e[l],a=r?r(s):s,new aG(a,s.node,aG.BLACK,c,u)}},i=function(t){let n=null,i=null,s=e.length;const a=function(t,n){const i=s-t,a=s;s-=t;const c=o(i+1,a),u=e[i],d=r?r(u):u;l(new aG(d,u.node,n,null,c))},l=function(e){n?(n.left=e,n=e):(i=e,n=e)};for(let e=0;e<t.count;++e){const r=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));r?a(n,aG.BLACK):(a(n,aG.BLACK),a(n,aG.RED))}return i}(new bG(e.length));return new lG(n||t,i)};let SG;const CG={};class TG{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return YB(CG&&_G,"ChildrenNode.ts has not been loaded"),SG=SG||new TG({".priority":CG},{".priority":_G}),SG}get(e){const t=yU(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof lG?t:null}hasIndex(e){return _U(this.indexSet_,e.toString())}addIndex(e,t){YB(e!==iG,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let n=!1;const o=t.getIterator(tG.Wrap);let i,s=o.getNext();for(;s;)n=n||e.isDefinedOn(s.node),r.push(s),s=o.getNext();i=n?EG(r,e.getCompare()):CG;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=i,new TG(c,l)}addToIndexes(e,t){const r=EU(this.indexes_,((r,n)=>{const o=yU(this.indexSet_,n);if(YB(o,"Missing index implementation for "+n),r===CG){if(o.isDefinedOn(e.node)){const r=[],n=t.getIterator(tG.Wrap);let i=n.getNext();for(;i;)i.name!==e.name&&r.push(i),i=n.getNext();return r.push(e),EG(r,o.getCompare())}return CG}{const n=t.get(e.name);let o=r;return n&&(o=o.remove(new tG(e.name,n))),o.insert(e,e.node)}}));return new TG(r,this.indexSet_)}removeFromIndexes(e,t){const r=EU(this.indexes_,(r=>{if(r===CG)return r;{const n=t.get(e.name);return n?r.remove(new tG(e.name,n)):r}}));return new TG(r,this.indexSet_)}}let wG;class RG{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pG(this.priorityNode_),this.children_.isEmpty()&&YB(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return wG||(wG=new RG(new lG(uG),null,TG.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wG}updatePriority(e){return this.children_.isEmpty()?this:new RG(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?wG:t}}getChild(e){const t=Uz(e);return null===t?this:this.getImmediateChild(t).getChild(jz(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(YB(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const r=new tG(e,t);let n,o;t.isEmpty()?(n=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(n=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const i=n.isEmpty()?wG:this.priorityNode_;return new RG(n,i,o)}}updateChild(e,t){const r=Uz(e);if(null===r)return t;{YB(".priority"!==Uz(e)||1===Zz(e),".priority must be the last token in a path");const n=this.getImmediateChild(r).updateChild(jz(e),t);return this.updateImmediateChild(r,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,n=0,o=!0;if(this.forEachChild(_G,((i,s)=>{t[i]=s.val(e),r++,o&&RG.INTEGER_REGEXP_.test(i)?n=Math.max(n,Number(i)):o=!1})),!e&&o&&n<2*r){const e=[];for(const r in t)e[r]=t[r];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+hG(this.getPriority().val())+":"),this.forEachChild(_G,((t,r)=>{const n=r.hash();""!==n&&(e+=":"+t+":"+n)})),this.lazyHash_=""===e?"":FF(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const n=this.resolveIndex_(r);if(n){const r=n.getPredecessorKey(new tG(e,t));return r?r.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tG(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tG(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,(e=>e));{const r=this.children_.getIteratorFrom(e.name,tG.Wrap);let n=r.peek();for(;null!=n&&t.compare(n,e)<0;)r.getNext(),n=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,(e=>e));{const r=this.children_.getReverseIteratorFrom(e.name,tG.Wrap);let n=r.peek();for(;null!=n&&t.compare(n,e)>0;)r.getNext(),n=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===kG?-1:0}withIndex(e){if(e===iG||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new RG(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===iG||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(_G),r=t.getIterator(_G);let n=e.getNext(),o=r.getNext();for(;n&&o;){if(n.name!==o.name||!n.node.equals(o.node))return!1;n=e.getNext(),o=r.getNext()}return null===n&&null===o}return!1}return!1}}resolveIndex_(e){return e===iG?null:this.indexMap_.get(e.toString())}}RG.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const kG=new class extends RG{constructor(){super(new lG(uG),RG.EMPTY_NODE,TG.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return RG.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(tG,{MIN:{value:new tG(XF,RG.EMPTY_NODE)},MAX:{value:new tG(JF,kG)}}),oG.__EMPTY_NODE=RG.EMPTY_NODE,vG.__childrenNodeConstructor=RG,dG=kG,mG=kG;const OG=!0;function IG(e,t=null){if(null===e)return RG.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),YB(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new vG(e,IG(t));if(e instanceof Array||!OG){let r=RG.EMPTY_NODE;return iz(e,((t,n)=>{if(_U(e,t)&&"."!==t.substring(0,1)){const e=IG(n);!e.isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e))}})),r.updatePriority(IG(t))}{const r=[];let n=!1;if(iz(e,((e,t)=>{if("."!==e.substring(0,1)){const o=IG(t);o.isEmpty()||(n=n||!o.getPriority().isEmpty(),r.push(new tG(e,o)))}})),0===r.length)return RG.EMPTY_NODE;const o=EG(r,cG,(e=>e.name),uG);if(n){const e=EG(r,_G.getCompare());return new RG(o,IG(t),new TG({".priority":e},{".priority":_G}))}return new RG(o,IG(t),TG.Default)}}!function(e){gG=e}(IG);class PG extends rG{constructor(e){super(),this.indexPath_=e,YB(!qz(e)&&".priority"!==Uz(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),n=this.extractChild(t.node),o=r.compareTo(n);return 0===o?ez(e.name,t.name):o}makePost(e,t){const r=IG(e),n=RG.EMPTY_NODE.updateChild(this.indexPath_,r);return new tG(t,n)}maxPost(){const e=RG.EMPTY_NODE.updateChild(this.indexPath_,kG);return new tG(JF,e)}toString(){return Fz(this.indexPath_,0).join("/")}}const AG=new class extends rG{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ez(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tG.MIN}maxPost(){return tG.MAX}makePost(e,t){const r=IG(e);return new tG(t,r)}toString(){return".value"}};function NG(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}class LG{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_G}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return YB(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return YB(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:XF}hasEnd(){return this.endSet_}getIndexEndValue(){return YB(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return YB(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:JF}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return YB(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_G}copy(){const e=new LG;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MG(e){const t={};if(e.isDefault())return t;let r;if(e.index_===_G?r="$priority":e.index_===AG?r="$value":e.index_===iG?r="$key":(YB(e.index_ instanceof PG,"Unrecognized index type!"),r=e.index_.toString()),t.orderBy=mU(r),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=mU(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+mU(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=mU(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+mU(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function xG(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let r=e.viewFrom_;""===r&&(r=e.isViewFromLeft()?"l":"r"),t.vf=r}return e.index_!==_G&&(t.i=e.index_.toString()),t}class DG extends Lz{constructor(e,t,r,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=n,this.log_=WF("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(YB(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,n){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const i=DG.getListenId_(e,r),s={};this.listens_[i]=s;const a=MG(e._queryParams);this.restRequest_(o+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(o,a,!1,r),yU(this.listens_,i)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",n(t,null)}}))}unlisten(e,t){const r=DG.getListenId_(e,t);delete this.listens_[r]}get(e){const t=MG(e._queryParams),r=e._path.toString(),n=new lU;return this.restRequest_(r+".json",t,((e,t)=>{let o=t;404===e&&(o=null,e=null),null===e?(this.onDataUpdate_(r,o,!1,null),n.resolve(o)):n.reject(new Error(o))})),n.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([n,o])=>{n&&n.accessToken&&(t.auth=n.accessToken),o&&o.token&&(t.ac=o.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+TU(t);this.log_("Sending REST request for "+i);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(r&&4===s.readyState){this.log_("REST Response for "+i+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=gU(s.responseText)}catch(e){$F("Failed to parse JSON response for "+i+": "+s.responseText)}r(null,e)}else 401!==s.status&&404!==s.status&&$F("Got unsuccessful REST response for "+i+" Status: "+s.status),r(s.status);r=null}},s.open("GET",i,!0),s.send()}))}}class BG{constructor(){this.rootNode_=RG.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function UG(){return{value:null,children:new Map}}function ZG(e,t,r){if(qz(t))e.value=r,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,r);else{const n=Uz(t);e.children.has(n)||e.children.set(n,UG()),ZG(e.children.get(n),t=jz(t),r)}}function jG(e,t,r){null!==e.value?r(t,e.value):function(e,t){e.children.forEach(((e,r)=>{t(r,e)}))}(e,((e,n)=>{jG(n,new Dz(t.toString()+"/"+e),r)}))}class HG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&iz(this.last_,((e,r)=>{t[e]=t[e]-r})),this.last_=e,t}}class FG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new HG(e);const r=1e4+2e4*Math.random();uz(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;iz(e,((e,n)=>{n>0&&_U(this.statsToReport_,e)&&(t[e]=n,r=!0)})),r&&this.server_.reportStats(t),uz(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zG,GG;function qG(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(GG=zG||(zG={}))[GG.OVERWRITE=0]="OVERWRITE",GG[GG.MERGE=1]="MERGE",GG[GG.ACK_USER_WRITE=2]="ACK_USER_WRITE",GG[GG.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class VG{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zG.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qz(this.path)){if(null!=this.affectedTree.value)return YB(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dz(e));return new VG(Bz(),t,this.revert)}}return YB(Uz(this.path)===e,"operationForChild called for unrelated child."),new VG(jz(this.path),this.affectedTree,this.revert)}}class WG{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zG.OVERWRITE}operationForChild(e){return qz(this.path)?new WG(this.source,Bz(),this.snap.getImmediateChild(e)):new WG(this.source,jz(this.path),this.snap)}}class YG{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zG.MERGE}operationForChild(e){if(qz(this.path)){const t=this.children.subtree(new Dz(e));return t.isEmpty()?null:t.value?new WG(this.source,Bz(),t.value):new YG(this.source,Bz(),t)}return YB(Uz(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new YG(this.source,jz(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class KG{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qz(e))return this.isFullyInitialized()&&!this.filtered_;const t=Uz(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function $G(e,t,r,n,o,i){const s=n.filter((e=>e.type===r));s.sort(((t,r)=>function(e,t,r){if(null==t.childName||null==r.childName)throw KB("Should only compare child_ events.");const n=new tG(t.childName,t.snapshotNode),o=new tG(r.childName,r.snapshotNode);return e.index_.compare(n,o)}(e,t,r))),s.forEach((r=>{const n=function(e,t,r){return"value"===t.type||"child_removed"===t.type||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,r,i);o.forEach((o=>{o.respondsTo(r.type)&&t.push(o.createEvent(n,e.query_))}))}))}function QG(e,t){return{eventCache:e,serverCache:t}}function XG(e,t,r,n){return QG(new KG(t,r,n),e.serverCache)}function JG(e,t,r,n){return QG(e.eventCache,new KG(t,r,n))}function eq(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tq(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let rq;class nq{constructor(e,t=(()=>(rq||(rq=new lG(tz)),rq))()){this.value=e,this.children=t}static fromObject(e){let t=new nq(null);return iz(e,((e,r)=>{t=t.set(new Dz(e),r)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bz(),value:this.value};if(qz(e))return null;{const r=Uz(e),n=this.children.get(r);if(null!==n){const o=n.findRootMostMatchingPathAndValue(jz(e),t);return null!=o?{path:Gz(new Dz(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(qz(e))return this;{const t=Uz(e),r=this.children.get(t);return null!==r?r.subtree(jz(e)):new nq(null)}}set(e,t){if(qz(e))return new nq(t,this.children);{const r=Uz(e),n=(this.children.get(r)||new nq(null)).set(jz(e),t),o=this.children.insert(r,n);return new nq(this.value,o)}}remove(e){if(qz(e))return this.children.isEmpty()?new nq(null):new nq(null,this.children);{const t=Uz(e),r=this.children.get(t);if(r){const n=r.remove(jz(e));let o;return o=n.isEmpty()?this.children.remove(t):this.children.insert(t,n),null===this.value&&o.isEmpty()?new nq(null):new nq(this.value,o)}return this}}get(e){if(qz(e))return this.value;{const t=Uz(e),r=this.children.get(t);return r?r.get(jz(e)):null}}setTree(e,t){if(qz(e))return t;{const r=Uz(e),n=(this.children.get(r)||new nq(null)).setTree(jz(e),t);let o;return o=n.isEmpty()?this.children.remove(r):this.children.insert(r,n),new nq(this.value,o)}}fold(e){return this.fold_(Bz(),e)}fold_(e,t){const r={};return this.children.inorderTraversal(((n,o)=>{r[n]=o.fold_(Gz(e,n),t)})),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bz(),t)}findOnPath_(e,t,r){const n=!!this.value&&r(t,this.value);if(n)return n;if(qz(e))return null;{const n=Uz(e),o=this.children.get(n);return o?o.findOnPath_(jz(e),Gz(t,n),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bz(),t)}foreachOnPath_(e,t,r){if(qz(e))return this;{this.value&&r(t,this.value);const n=Uz(e),o=this.children.get(n);return o?o.foreachOnPath_(jz(e),Gz(t,n),r):new nq(null)}}foreach(e){this.foreach_(Bz(),e)}foreach_(e,t){this.children.inorderTraversal(((r,n)=>{n.foreach_(Gz(e,r),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,r)=>{r.value&&e(t,r.value)}))}}class oq{constructor(e){this.writeTree_=e}static empty(){return new oq(new nq(null))}}function iq(e,t,r){if(qz(t))return new oq(new nq(r));{const n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){const o=n.path;let i=n.value;const s=Vz(o,t);return i=i.updateChild(s,r),new oq(e.writeTree_.set(o,i))}{const n=new nq(r),o=e.writeTree_.setTree(t,n);return new oq(o)}}}function sq(e,t,r){let n=e;return iz(r,((e,r)=>{n=iq(n,Gz(t,e),r)})),n}function aq(e,t){if(qz(t))return oq.empty();{const r=e.writeTree_.setTree(t,new nq(null));return new oq(r)}}function lq(e,t){return null!=cq(e,t)}function cq(e,t){const r=e.writeTree_.findRootMostValueAndPath(t);return null!=r?e.writeTree_.get(r.path).getChild(Vz(r.path,t)):null}function uq(e){const t=[],r=e.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(_G,((e,r)=>{t.push(new tG(e,r))})):e.writeTree_.children.inorderTraversal(((e,r)=>{null!=r.value&&t.push(new tG(e,r.value))})),t}function dq(e,t){if(qz(t))return e;{const r=cq(e,t);return new oq(null!=r?new nq(r):e.writeTree_.subtree(t))}}function hq(e){return e.writeTree_.isEmpty()}function pq(e,t){return fq(Bz(),e.writeTree_,t)}function fq(e,t,r){if(null!=t.value)return r.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal(((t,o)=>{".priority"===t?(YB(null!==o.value,"Priority writes must always be leaf nodes"),n=o.value):r=fq(Gz(e,t),o,r)})),r.getChild(e).isEmpty()||null===n||(r=r.updateChild(Gz(e,".priority"),n)),r}}function gq(e,t){return Rq(t,e)}function mq(e,t){if(e.snap)return Yz(e.path,t);for(const r in e.children)if(e.children.hasOwnProperty(r)&&Yz(Gz(e.path,r),t))return!0;return!1}function vq(e){return e.visible}function _q(e,t,r){let n=oq.empty();for(let o=0;o<e.length;++o){const i=e[o];if(t(i)){const e=i.path;let t;if(i.snap)Yz(r,e)?(t=Vz(r,e),n=iq(n,t,i.snap)):Yz(e,r)&&(t=Vz(e,r),n=iq(n,Bz(),i.snap.getChild(t)));else{if(!i.children)throw KB("WriteRecord should have .snap or .children");if(Yz(r,e))t=Vz(r,e),n=sq(n,t,i.children);else if(Yz(e,r))if(t=Vz(e,r),qz(t))n=sq(n,Bz(),i.children);else{const e=yU(i.children,Uz(t));if(e){const r=e.getChild(jz(t));n=iq(n,Bz(),r)}}}}}return n}function yq(e,t,r,n,o){if(n||o){const i=dq(e.visibleWrites,t);if(!o&&hq(i))return r;if(o||null!=r||lq(i,Bz())){const i=function(e){return(e.visible||o)&&(!n||!~n.indexOf(e.writeId))&&(Yz(e.path,t)||Yz(t,e.path))};return pq(_q(e.allWrites,i,t),r||RG.EMPTY_NODE)}return null}{const n=cq(e.visibleWrites,t);if(null!=n)return n;{const n=dq(e.visibleWrites,t);return hq(n)?r:null!=r||lq(n,Bz())?pq(n,r||RG.EMPTY_NODE):null}}}function bq(e,t,r,n){return yq(e.writeTree,e.treePath,t,r,n)}function Eq(e,t){return function(e,t,r){let n=RG.EMPTY_NODE;const o=cq(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(_G,((e,t)=>{n=n.updateImmediateChild(e,t)})),n;if(r){const o=dq(e.visibleWrites,t);return r.forEachChild(_G,((e,t)=>{const r=pq(dq(o,new Dz(e)),t);n=n.updateImmediateChild(e,r)})),uq(o).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}return uq(dq(e.visibleWrites,t)).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}(e.writeTree,e.treePath,t)}function Sq(e,t,r,n){return function(e,t,r,n,o){YB(n||o,"Either existingEventSnap or existingServerSnap must exist");const i=Gz(t,r);if(lq(e.visibleWrites,i))return null;{const t=dq(e.visibleWrites,i);return hq(t)?o.getChild(r):pq(t,o.getChild(r))}}(e.writeTree,e.treePath,t,r,n)}function Cq(e,t){return function(e,t){return cq(e.visibleWrites,t)}(e.writeTree,Gz(e.treePath,t))}function Tq(e,t,r){return function(e,t,r,n){const o=Gz(t,r),i=cq(e.visibleWrites,o);return null!=i?i:n.isCompleteForChild(r)?pq(dq(e.visibleWrites,o),n.getNode().getImmediateChild(r)):null}(e.writeTree,e.treePath,t,r)}function wq(e,t){return Rq(Gz(e.treePath,t),e.writeTree)}function Rq(e,t){return{treePath:e,writeTree:t}}class kq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;YB("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),YB(".priority"!==r,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(r);if(n){const i=n.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(r,NG(r,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(r,(o=r,{type:"child_removed",snapshotNode:n.oldSnap,childName:o}));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(r,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw KB("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(r,NG(r,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(r,e);var o}getChanges(){return Array.from(this.changeMap.values())}}const Oq=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Iq{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new KG(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tq(this.writes_,e,t)}}getChildAfterChild(e,t,r){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tq(this.viewCache_),o=function(e,t,r,n,o,i){return function(e,t,r,n,o,i,s){let a;const l=dq(e.visibleWrites,t),c=cq(l,Bz());if(null!=c)a=c;else{if(null==r)return[];a=pq(l,r)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),r=i?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let l=r.getNext();for(;l&&e.length<o;)0!==t(l,n)&&e.push(l),l=r.getNext();return e}}(e.writeTree,e.treePath,t,r,n,o,i)}(this.writes_,n,t,1,r,e);return 0===o.length?null:o[0]}}function Pq(e,t,r,n,o,i){const s=t.eventCache;if(null!=Cq(n,r))return t;{let a,l;if(qz(r))if(YB(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const r=tq(t),o=Eq(n,r instanceof RG?r:RG.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),o,i)}else{const r=bq(n,tq(t));a=e.filter.updateFullNode(t.eventCache.getNode(),r,i)}else{const c=Uz(r);if(".priority"===c){YB(1===Zz(r),"Can't have a priority with additional path components");const o=s.getNode();l=t.serverCache.getNode();const i=Sq(n,r,o,l);a=null!=i?e.filter.updatePriority(o,i):s.getNode()}else{const u=jz(r);let d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Sq(n,r,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else d=Tq(n,c,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),c,d,u,o,i):s.getNode()}}return XG(t,a,s.isFullyInitialized()||qz(r),e.filter.filtersNodes())}}function Aq(e,t,r,n,o,i,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(qz(r))c=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(r,n);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Uz(r);if(!l.isCompleteForPath(r)&&Zz(r)>1)return t;const o=jz(r),i=l.getNode().getImmediateChild(e).updateChild(o,n);c=".priority"===e?u.updatePriority(l.getNode(),i):u.updateChild(l.getNode(),e,i,o,Oq,null)}const d=JG(t,c,l.isFullyInitialized()||qz(r),u.filtersNodes());return Pq(e,d,r,o,new Iq(o,d,i),a)}function Nq(e,t,r,n,o,i,s){const a=t.eventCache;let l,c;const u=new Iq(o,t,i);if(qz(r))c=e.filter.updateFullNode(t.eventCache.getNode(),n,s),l=XG(t,c,!0,e.filter.filtersNodes());else{const o=Uz(r);if(".priority"===o)c=e.filter.updatePriority(t.eventCache.getNode(),n),l=XG(t,c,a.isFullyInitialized(),a.isFiltered());else{const i=jz(r),c=a.getNode().getImmediateChild(o);let d;if(qz(i))d=n;else{const e=u.getCompleteChild(o);d=null!=e?".priority"===Hz(i)&&e.getChild(zz(i)).isEmpty()?e:e.updateChild(i,n):RG.EMPTY_NODE}l=c.equals(d)?t:XG(t,e.filter.updateChild(a.getNode(),o,d,i,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function Lq(e,t){return e.eventCache.isCompleteForChild(t)}function Mq(e,t,r){return r.foreach(((e,r)=>{t=t.updateChild(e,r)})),t}function xq(e,t,r,n,o,i,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=qz(r)?n:new nq(null).setTree(r,n);const u=t.serverCache.getNode();return l.children.inorderTraversal(((r,n)=>{if(u.hasChild(r)){const l=Mq(0,t.serverCache.getNode().getImmediateChild(r),n);c=Aq(e,c,new Dz(r),l,o,i,s,a)}})),l.children.inorderTraversal(((r,n)=>{const l=!t.serverCache.isCompleteForChild(r)&&null===n.value;if(!u.hasChild(r)&&!l){const l=Mq(0,t.serverCache.getNode().getImmediateChild(r),n);c=Aq(e,c,new Dz(r),l,o,i,s,a)}})),c}function Dq(e,t){const r=tq(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!qz(t)&&!r.getImmediateChild(Uz(t)).isEmpty())?r.getChild(t):null}function Bq(e,t,r,n){t.type===zG.MERGE&&null!==t.source.queryId&&(YB(tq(e.viewCache_),"We should always have a full cache before handling merges"),YB(eq(e.viewCache_),"Missing event cache, even though we have a server cache"));const o=e.viewCache_,i=function(e,t,r,n,o){const i=new kq;let s,a;if(r.type===zG.OVERWRITE){const l=r;l.source.fromUser?s=Nq(e,t,l.path,l.snap,n,o,i):(YB(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!qz(l.path),s=Aq(e,t,l.path,l.snap,n,o,a,i))}else if(r.type===zG.MERGE){const l=r;l.source.fromUser?s=function(e,t,r,n,o,i,s){let a=t;return n.foreach(((n,l)=>{const c=Gz(r,n);Lq(t,Uz(c))&&(a=Nq(e,a,c,l,o,i,s))})),n.foreach(((n,l)=>{const c=Gz(r,n);Lq(t,Uz(c))||(a=Nq(e,a,c,l,o,i,s))})),a}(e,t,l.path,l.children,n,o,i):(YB(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=xq(e,t,l.path,l.children,n,o,a,i))}else if(r.type===zG.ACK_USER_WRITE){const a=r;s=a.revert?function(e,t,r,n,o,i){let s;if(null!=Cq(n,r))return t;{const a=new Iq(n,t,o),l=t.eventCache.getNode();let c;if(qz(r)||".priority"===Uz(r)){let r;if(t.serverCache.isFullyInitialized())r=bq(n,tq(t));else{const e=t.serverCache.getNode();YB(e instanceof RG,"serverChildren would be complete if leaf node"),r=Eq(n,e)}c=e.filter.updateFullNode(l,r,i)}else{const o=Uz(r);let u=Tq(n,o,t.serverCache);null==u&&t.serverCache.isCompleteForChild(o)&&(u=l.getImmediateChild(o)),c=null!=u?e.filter.updateChild(l,o,u,jz(r),a,i):t.eventCache.getNode().hasChild(o)?e.filter.updateChild(l,o,RG.EMPTY_NODE,jz(r),a,i):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=bq(n,tq(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,i)))}return s=t.serverCache.isFullyInitialized()||null!=Cq(n,Bz()),XG(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,n,o,i):function(e,t,r,n,o,i,s){if(null!=Cq(o,r))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=n.value){if(qz(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return Aq(e,t,r,l.getNode().getChild(r),o,i,a,s);if(qz(r)){let n=new nq(null);return l.getNode().forEachChild(iG,((e,t)=>{n=n.set(new Dz(e),t)})),xq(e,t,r,n,o,i,a,s)}return t}{let c=new nq(null);return n.foreach(((e,t)=>{const n=Gz(r,e);l.isCompleteForPath(n)&&(c=c.set(e,l.getNode().getChild(n)))})),xq(e,t,r,c,o,i,a,s)}}(e,t,a.path,a.affectedTree,n,o,i)}else{if(r.type!==zG.LISTEN_COMPLETE)throw KB("Unknown operation type: "+r.type);s=function(e,t,r,n,o){const i=t.serverCache;return Pq(e,JG(t,i.getNode(),i.isFullyInitialized()||qz(r),i.isFiltered()),r,n,Oq,o)}(e,t,r.path,n,i)}const l=i.getChanges();return function(e,t,r){const n=t.eventCache;if(n.isFullyInitialized()){const o=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=eq(e);(r.length>0||!e.eventCache.isFullyInitialized()||o&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push({type:"value",snapshotNode:eq(t)})}}(t,s,l),{viewCache:s,changes:l}}(e.processor_,o,t,r,n);var s,a;return s=e.processor_,a=i.viewCache,YB(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),YB(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),YB(i.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,function(e,t,r,n){const o=n?[n]:e.eventRegistrations_;return function(e,t,r,n){const o=[],i=[];return t.forEach((t=>{var r;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push((r=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:r}))})),$G(e,o,"child_removed",t,n,r),$G(e,o,"child_added",t,n,r),$G(e,o,"child_moved",i,n,r),$G(e,o,"child_changed",t,n,r),$G(e,o,"value",t,n,r),o}(e.eventGenerator_,t,r,o)}(e,i.changes,i.viewCache.eventCache.getNode(),null)}let Uq,Zq;function jq(e,t,r,n){const o=t.source.queryId;if(null!==o){const i=e.views.get(o);return YB(null!=i,"SyncTree gave us an op for an invalid query."),Bq(i,t,r,n)}{let o=[];for(const i of e.views.values())o=o.concat(Bq(i,t,r,n));return o}}function Hq(e,t){let r=null;for(const n of e.views.values())r=r||Dq(n,t);return r}class Fq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nq(null),this.pendingWriteTree_={visibleWrites:oq.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zq(e,t,r,n,o){return function(e,t,r,n,o){YB(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),e.allWrites.push({path:t,snap:r,writeId:n,visible:o}),o&&(e.visibleWrites=iq(e.visibleWrites,t,r)),e.lastWriteId=n}(e.pendingWriteTree_,t,r,n,o),o?Wq(e,new WG({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r)):[]}function Gq(e,t,r=!1){const n=function(e,t){for(let r=0;r<e.allWrites.length;r++){const n=e.allWrites[r];if(n.writeId===t)return n}return null}(e.pendingWriteTree_,t);if(function(e,t){const r=e.allWrites.findIndex((e=>e.writeId===t));YB(r>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[r];e.allWrites.splice(r,1);let o=n.visible,i=!1,s=e.allWrites.length-1;for(;o&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=r&&mq(t,n.path)?o=!1:Yz(n.path,t.path)&&(i=!0)),s--}return!!o&&(i?(function(e){e.visibleWrites=_q(e.allWrites,vq,Bz()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(n.snap?e.visibleWrites=aq(e.visibleWrites,n.path):iz(n.children,(t=>{e.visibleWrites=aq(e.visibleWrites,Gz(n.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new nq(null);return null!=n.snap?t=t.set(Bz(),!0):iz(n.children,(e=>{t=t.set(new Dz(e),!0)})),Wq(e,new VG(n.path,t,r))}return[]}function qq(e,t,r){return Wq(e,new WG({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}function Vq(e,t,r){const n=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,((e,r)=>{const n=Hq(r,Vz(e,t));if(n)return n}));return yq(n,t,o,r,!0)}function Wq(e,t){return Yq(t,e.syncPointTree_,null,gq(e.pendingWriteTree_,Bz()))}function Yq(e,t,r,n){if(qz(e.path))return Kq(e,t,r,n);{const o=t.get(Bz());null==r&&null!=o&&(r=Hq(o,Bz()));let i=[];const s=Uz(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=r?r.getImmediateChild(s):null,t=wq(n,s);i=i.concat(Yq(a,l,e,t))}return o&&(i=i.concat(jq(o,e,n,r))),i}}function Kq(e,t,r,n){const o=t.get(Bz());null==r&&null!=o&&(r=Hq(o,Bz()));let i=[];return t.children.inorderTraversal(((t,o)=>{const s=r?r.getImmediateChild(t):null,a=wq(n,t),l=e.operationForChild(t);l&&(i=i.concat(Kq(l,o,s,a)))})),o&&(i=i.concat(jq(o,e,n,r))),i}function $q(e,t){return e.tagToQueryMap.get(t)}function Qq(e){const t=e.indexOf("$");return YB(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dz(e.substr(0,t))}}function Xq(e,t,r){const n=e.syncPointTree_.get(t);return YB(n,"Missing sync point for query tag that we're tracking"),jq(n,r,gq(e.pendingWriteTree_,t),null)}class Jq{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Jq(t)}node(){return this.node_}}class eV{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gz(this.path_,e);return new eV(this.syncTree_,t)}node(){return Vq(this.syncTree_,this.path_)}}const tV=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},rV=function(e,t,r){return e&&"object"==typeof e?(YB(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?nV(e[".sv"],t,r):"object"==typeof e[".sv"]?oV(e[".sv"],t):void YB(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},nV=function(e,t,r){if("timestamp"===e)return r.timestamp;YB(!1,"Unexpected server value: "+e)},oV=function(e,t,r){e.hasOwnProperty("increment")||YB(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;"number"!=typeof n&&YB(!1,"Unexpected increment value: "+n);const o=t.node();if(YB(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return n;const i=o.getValue();return"number"!=typeof i?n:i+n},iV=function(e,t,r,n){return aV(t,new eV(r,e),n)},sV=function(e,t,r){return aV(e,new Jq(t),r)};function aV(e,t,r){const n=e.getPriority().val(),o=rV(n,t.getImmediateChild(".priority"),r);let i;if(e.isLeafNode()){const n=e,i=rV(n.getValue(),t,r);return i!==n.getValue()||o!==n.getPriority().val()?new vG(i,IG(o)):e}{const n=e;return i=n,o!==n.getPriority().val()&&(i=i.updatePriority(new vG(o))),n.forEachChild(_G,((e,n)=>{const o=aV(n,t.getImmediateChild(e),r);o!==n&&(i=i.updateImmediateChild(e,o))})),i}}class lV{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function cV(e,t){let r=t instanceof Dz?t:new Dz(t),n=e,o=Uz(r);for(;null!==o;){const e=yU(n.node.children,o)||{children:{},childCount:0};n=new lV(o,n,e),r=jz(r),o=Uz(r)}return n}function uV(e){return e.node.value}function dV(e,t){e.node.value=t,mV(e)}function hV(e){return e.node.childCount>0}function pV(e,t){iz(e.node.children,((r,n)=>{t(new lV(r,e,n))}))}function fV(e,t,r,n){r&&!n&&t(e),pV(e,(e=>{fV(e,t,!0,n)})),r&&n&&t(e)}function gV(e){return new Dz(null===e.parent?e.name:gV(e.parent)+"/"+e.name)}function mV(e){null!==e.parent&&function(e,t,r){const n=function(e){return void 0===uV(e)&&!hV(e)}(r),o=_U(e.node.children,t);n&&o?(delete e.node.children[t],e.node.childCount--,mV(e)):n||o||(e.node.children[t]=r.node,e.node.childCount++,mV(e))}(e.parent,e.name,e)}const vV=/[\[\].#$\/\u0000-\u001F\u007F]/,_V=/[\[\].#$\u0000-\u001F\u007F]/,yV=10485760,bV=function(e){return"string"==typeof e&&0!==e.length&&!vV.test(e)},EV=function(e,t,r){const n=r instanceof Dz?new Kz(r,e):r;if(void 0===t)throw new Error(e+"contains undefined "+Qz(n));if("function"==typeof t)throw new Error(e+"contains a function "+Qz(n)+" with contents = "+t.toString());if(QF(t))throw new Error(e+"contains "+t.toString()+" "+Qz(n));if("string"==typeof t&&t.length>yV/3&&PU(t)>yV)throw new Error(e+"contains a string greater than "+yV+" utf8 bytes "+Qz(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,o=!1;if(iz(t,((t,i)=>{if(".value"===t)r=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!bV(t)))throw new Error(e+" contains an invalid key ("+t+") "+Qz(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=t,(s=n).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=PU(a),$z(s),EV(e,i,n),function(e){const t=e.parts_.pop();e.byteLength_-=PU(t),e.parts_.length>0&&(e.byteLength_-=1)}(n)})),r&&o)throw new Error(e+' contains ".value" child '+Qz(n)+" in addition to actual children.")}},SV=function(e,t){const r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!bV(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),function(e){return"string"==typeof e&&0!==e.length&&!_V.test(e)}(e)}(r))throw new Error(function(e,t){return`${e} failed: ${t} argument `}(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class CV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function TV(e,t,r){(function(e,t){let r=null;for(let n=0;n<t.length;n++){const o=t[n],i=o.getPath();null===r||Wz(i,r.path)||(e.eventLists_.push(r),r=null),null===r&&(r={events:[],path:i}),r.events.push(o)}r&&e.eventLists_.push(r)})(e,r),function(e,t){e.recursionDepth_++;let r=!0;for(let n=0;n<e.eventLists_.length;n++){const o=e.eventLists_[n];o&&(t(o.path)?(wV(e.eventLists_[n]),e.eventLists_[n]=null):r=!1)}r&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Yz(e,t)||Yz(t,e)))}function wV(e){for(let t=0;t<e.events.length;t++){const r=e.events[t];if(null!==r){e.events[t]=null;const n=r.getEventRunner();GF&&VF("event: "+r.toString()),cz(n)}}}const RV=25;class kV{constructor(e,t,r,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=UG(),this.transactionQueueTree_=new lV,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function OV(e,t,r){if(e.stats_=Tz(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new DG(e.repoInfo_,((t,r,n,o)=>{AV(e,t,r,n,o)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>NV(e,!0)),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mU(r)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new eG(e.repoInfo_,t,((t,r,n,o)=>{AV(e,t,r,n,o)}),(t=>{NV(e,t)}),(t=>{!function(e,t){iz(t,((t,r)=>{LV(e,t,r)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,r),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,r){const n=t.toString();return Cz[n]||(Cz[n]=new FG(e.stats_,e.server_)),Cz[n]}(e.repoInfo_),e.infoData_=new BG,e.infoSyncTree_=new Fq({startListening:(t,r,n,o)=>{let i=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(i=qq(e.infoSyncTree_,t._path,s),setTimeout((()=>{o("ok")}),0)),i},stopListening:()=>{}}),LV(e,"connected",!1),e.serverSyncTree_=new Fq({startListening:(t,r,n,o)=>(e.server_.listen(t,n,r,((r,n)=>{const i=o(r,n);TV(e.eventQueue_,t._path,i)})),[]),stopListening:(t,r)=>{e.server_.unlisten(t,r)}})}function IV(e){const t=e.infoData_.getNode(new Dz(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function PV(e){return tV({timestamp:IV(e)})}function AV(e,t,r,n,o){e.dataUpdateCount++;const i=new Dz(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;let s=[];if(o)if(n){const t=EU(r,(e=>IG(e)));s=function(e,t,r,n){const o=$q(e,n);if(o){const n=Qq(o),i=n.path,s=n.queryId,a=Vz(i,t),l=nq.fromObject(r);return Xq(e,i,new YG(qG(s),a,l))}return[]}(e.serverSyncTree_,i,t,o)}else{const t=IG(r);s=function(e,t,r,n){const o=$q(e,n);if(null!=o){const n=Qq(o),i=n.path,s=n.queryId,a=Vz(i,t);return Xq(e,i,new WG(qG(s),a,r))}return[]}(e.serverSyncTree_,i,t,o)}else if(n){const t=EU(r,(e=>IG(e)));s=function(e,t,r){const n=nq.fromObject(r);return Wq(e,new YG({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}(e.serverSyncTree_,i,t)}else{const t=IG(r);s=qq(e.serverSyncTree_,i,t)}let a=i;s.length>0&&(a=UV(e,i)),TV(e.eventQueue_,a,s)}function NV(e,t){LV(e,"connected",t),!1===t&&function(e){xV(e,"onDisconnectEvents");const t=PV(e),r=UG();jG(e.onDisconnect_,Bz(),((n,o)=>{const i=iV(n,o,e.serverSyncTree_,t);ZG(r,n,i)}));let n=[];jG(r,Bz(),((t,r)=>{n=n.concat(qq(e.serverSyncTree_,t,r));const o=function(e,t){const r=gV(ZV(e,t)),n=cV(e.transactionQueueTree_,t);return function(e,t,r){let n=void 0?e:e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(n,(t=>{zV(e,t)})),zV(e,n),fV(n,(t=>{zV(e,t)})),r}(e,t);UV(e,o)})),e.onDisconnect_=UG(),TV(e.eventQueue_,Bz(),n)}(e)}function LV(e,t,r){const n=new Dz("/.info/"+t),o=IG(r);e.infoData_.updateSnapshot(n,o);const i=qq(e.infoSyncTree_,n,o);TV(e.eventQueue_,n,i)}function MV(e){return e.nextWriteId_++}function xV(e,...t){let r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),VF(r,...t)}function DV(e,t,r){return Vq(e.serverSyncTree_,t,r)||RG.EMPTY_NODE}function BV(e,t=e.transactionQueueTree_){if(t||FV(e,t),uV(t)){const r=jV(e,t);YB(r.length>0,"Sending zero length transaction queue"),r.every((e=>0===e.status))&&function(e,t,r){const n=r.map((e=>e.currentWriteId)),o=DV(e,t,n);let i=o;const s=o.hash();for(let e=0;e<r.length;e++){const n=r[e];YB(0===n.status,"tryToSendTransactionQueue_: items in queue should all be run."),n.status=1,n.retryCount++;const o=Vz(t,n.path);i=i.updateChild(o,n.currentOutputSnapshotRaw)}const a=i.val(!0),l=t;e.server_.put(l.toString(),a,(n=>{xV(e,"transaction put response",{path:l.toString(),status:n});let o=[];if("ok"===n){const n=[];for(let t=0;t<r.length;t++)r[t].status=2,o=o.concat(Gq(e.serverSyncTree_,r[t].currentWriteId)),r[t].onComplete&&n.push((()=>r[t].onComplete(null,!0,r[t].currentOutputSnapshotResolved))),r[t].unwatcher();FV(e,cV(e.transactionQueueTree_,t)),BV(e,e.transactionQueueTree_),TV(e.eventQueue_,t,o);for(let e=0;e<n.length;e++)cz(n[e])}else{if("datastale"===n)for(let e=0;e<r.length;e++)3===r[e].status?r[e].status=4:r[e].status=0;else{$F("transaction at "+l.toString()+" failed: "+n);for(let e=0;e<r.length;e++)r[e].status=4,r[e].abortReason=n}UV(e,t)}}),s)}(e,gV(t),r)}else hV(t)&&pV(t,(t=>{BV(e,t)}))}function UV(e,t){const r=ZV(e,t),n=gV(r);return function(e,t,r){if(0===t.length)return;const n=[];let o=[];const i=t.filter((e=>0===e.status)),s=i.map((e=>e.currentWriteId));for(let i=0;i<t.length;i++){const l=t[i],c=Vz(r,l.path);let u,d=!1;if(YB(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,u=l.abortReason,o=o.concat(Gq(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=RV)d=!0,u="maxretry",o=o.concat(Gq(e.serverSyncTree_,l.currentWriteId,!0));else{const r=DV(e,l.path,s);l.currentInputSnapshot=r;const n=t[i].update(r.val());if(void 0!==n){EV("transaction failed: Data returned ",n,l.path);let t=IG(n);"object"==typeof n&&null!=n&&_U(n,".priority")||(t=t.updatePriority(r.getPriority()));const i=l.currentWriteId,a=PV(e),c=sV(t,r,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=MV(e),s.splice(s.indexOf(i),1),o=o.concat(zq(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),o=o.concat(Gq(e.serverSyncTree_,i,!0))}else d=!0,u="nodata",o=o.concat(Gq(e.serverSyncTree_,l.currentWriteId,!0))}TV(e.eventQueue_,r,o),o=[],d&&(t[i].status=2,a=t[i].unwatcher,setTimeout(a,Math.floor(0)),t[i].onComplete&&("nodata"===u?n.push((()=>t[i].onComplete(null,!1,t[i].currentInputSnapshot))):n.push((()=>t[i].onComplete(new Error(u),!1,null)))))}var a;FV(e,e.transactionQueueTree_);for(let e=0;e<n.length;e++)cz(n[e]);BV(e,e.transactionQueueTree_)}(e,jV(e,r),n),n}function ZV(e,t){let r,n=e.transactionQueueTree_;for(r=Uz(t);null!==r&&void 0===uV(n);)n=cV(n,r),r=Uz(t=jz(t));return n}function jV(e,t){const r=[];return HV(e,t,r),r.sort(((e,t)=>e.order-t.order)),r}function HV(e,t,r){const n=uV(t);if(n)for(let e=0;e<n.length;e++)r.push(n[e]);pV(t,(t=>{HV(e,t,r)}))}function FV(e,t){const r=uV(t);if(r){let e=0;for(let t=0;t<r.length;t++)2!==r[t].status&&(r[e]=r[t],e++);r.length=e,dV(t,r.length>0?r:void 0)}pV(t,(t=>{FV(e,t)}))}function zV(e,t){const r=uV(t);if(r){const n=[];let o=[],i=-1;for(let t=0;t<r.length;t++)3===r[t].status||(1===r[t].status?(YB(i===t-1,"All SENT items should be at beginning of queue."),i=t,r[t].status=3,r[t].abortReason="set"):(YB(0===r[t].status,"Unexpected transaction status in abort"),r[t].unwatcher(),o=o.concat(Gq(e.serverSyncTree_,r[t].currentWriteId,!0)),r[t].onComplete&&n.push(r[t].onComplete.bind(null,new Error("set"),!1,null))));-1===i?dV(t,void 0):r.length=i+1,TV(e.eventQueue_,gV(t),o);for(let e=0;e<n.length;e++)cz(n[e])}}const GV=function(e,t){const r=qV(e),n=r.namespace;"firebase.com"===r.domain&&KF(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===r.domain||KF("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$F("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const o="ws"===r.scheme||"wss"===r.scheme;return{repoInfo:new yz(r.host,r.secure,n,o,t,"",n!==r.subdomain),path:new Dz(r.pathString)}},qV=function(e){let t="",r="",n="",o="",i="",s=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(o=function(e){let t="";const r=e.split("/");for(let e=0;e<r.length;e++)if(r[e].length>0){let n=r[e];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(e){}t+="/"+n}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const r of e.split("&")){if(0===r.length)continue;const n=r.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):$F(`Invalid query segment '${r}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())r="localhost";else if(p.split(".").length<=2)r=p;else{const e=t.indexOf(".");n=t.substring(0,e).toLowerCase(),r=t.substring(e+1),i=n}"ns"in h&&(i=h.ns)}return{host:t,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:o,namespace:i}};class VV{constructor(e,t,r,n){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=n}get key(){return qz(this._path)?null:Hz(this._path)}get ref(){return new WV(this._repo,this._path)}get _queryIdentifier(){const e=xG(this._queryParams),t=nz(e);return"{}"===t?"default":t}get _queryObject(){return xG(this._queryParams)}isEqual(e){if(!((e=AU(e))instanceof VV))return!1;const t=this._repo===e._repo,r=Wz(this._path,e._path),n=this._queryIdentifier===e._queryIdentifier;return t&&r&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let r=e.pieceNum_;r<e.pieces_.length;r++)""!==e.pieces_[r]&&(t+="/"+encodeURIComponent(String(e.pieces_[r])));return t||"/"}(this._path)}}class WV extends VV{constructor(e,t){super(e,t,new LG,!1)}get parent(){const e=zz(this._path);return null===e?null:new WV(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){YB(!Uq,"__referenceConstructor has already been defined"),Uq=e}(WV),function(e){YB(!Zq,"__referenceConstructor has already been defined"),Zq=e}(WV);const YV={};class KV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(OV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new WV(this._repo,Bz())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const r=YV[t];r&&r[e.key]===e||KF(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete r[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&KF("Cannot call "+e+" on a deleted database.")}}eG.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eG.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},MF=bZ,mZ(new NU("database",((e,{instanceIdentifier:t})=>function(e,t,r,n,o){let i=n||e.options.databaseURL;void 0===i&&(e.options.projectId||KF("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),VF("Using default host for project ",e.options.projectId),i=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s,a,l=GV(i,o),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,i=`http://${a}?ns=${c.namespace}`,l=GV(i,o),c=l.repoInfo):s=!l.repoInfo.secure;const u=o&&s?new pz(pz.OWNER):new hz(e.name,e.options,t);SV("Invalid Firebase Database URL",l),qz(l.path)||KF("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,r,n){let o=YV[t.name];o||(o={},YV[t.name]=o);let i=o[e.toURLString()];return i&&KF("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new kV(e,!1,r,n),o[e.toURLString()]=i,i}(c,e,u,new dz(e.name,r));return new KV(d,e)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),CZ(NF,LF,void 0),CZ(NF,LF,"esm2017");var $V=EZ({apiKey:"AIzaSyDDQ0XzM7UZ1LUBGJ83r6zlYCvSRkE6sIY",authDomain:"project-freelancing.firebaseapp.com",databaseURL:"https://project-freelancing-default-rtdb.firebaseio.com",projectId:"project-freelancing",storageBucket:"project-freelancing.appspot.com",messagingSenderId:"837601807809",appId:"1:837601807809:web:d5550b98a1fae2d2177340",measurementId:"G-1L7GEDBJ0B"}),QV=function(e=SZ()){const t=vZ(e,"auth");if(t.isInitialized())return t.getImmediate();const r=function(e,t){const r=vZ(e,"auth");if(r.isInitialized()){const e=r.getImmediate();if(SU(r.getOptions(),null!=t?t:{}))return e;jZ(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:wF,persistence:[MH,vH,yH]}),n=aU("authTokenSyncURL");if(n){const e=(o=n,async e=>{const t=e&&await e.getIdTokenResult(),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IF)return;const n=null==t?void 0:t.token;PF!==n&&(PF=n,await fetch(o,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});!function(e,t,r){AU(e).beforeAuthStateChanged(t,r)}(r,e,(()=>e(r.currentUser))),function(t,r,n,o){AU(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(r)}var o;const i=iU("auth");return i&&function(e,t,r){const n=Gj(e);zZ(n._canInitEmulator,n,"emulator-config-failed"),zZ(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const o=!!(null==r?void 0:r.disableWarnings),i=Vj(t),{host:s,port:a}=function(e){const t=Vj(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const e=o[1];return{host:e,port:Wj(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:Wj(t)}}}(t),l=null===a?"":`:${a}`;n.config.emulator={url:`${i}//${s}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${i}`),r}($V);function XV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return JV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JV(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e=SZ(),t){const r=vZ(e,"database").getImmediate({identifier:t});if(!r._instanceStarted){const e=(e=>{const t=iU("database");if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]})();e&&function(e,t,r,n={}){(e=AU(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&KF("Cannot call useEmulator() after instance has already been initialized.");const o=e._repoInternal;let i;if(o.repoInfo_.nodeAdmin)n.mockUserToken&&KF('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new pz(pz.OWNER);else if(n.mockUserToken){const t="string"==typeof n.mockUserToken?n.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[eU(JSON.stringify({alg:"none",type:"JWT"})),eU(JSON.stringify(i)),""].join(".")}(n.mockUserToken,e.app.options.projectId);i=new pz(t)}!function(e,t,r,n){e.repoInfo_=new yz(`${t}:${r}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),n&&(e.authTokenProvider_=n)}(o,t,r,i)}(r,...e)}}($V);var eW=(0,ar.Z)();function tW(){var e,r,n=Ye(),o=(null===(e=Ve().state)||void 0===e||null===(r=e.from)||void 0===r||r.pathname,XV((0,t.useState)("+91"),2)),i=o[0],s=o[1],a=XV((0,t.useState)(!1),2),l=a[0],c=a[1],u=XV((0,t.useState)(""),2),d=u[0],h=u[1];return t.createElement(VB,{theme:eW},t.createElement(Nr,{container:!0,component:"main",sx:{height:"100vh"}},t.createElement(xB,null),t.createElement(Nr,{item:!0,xs:!1,sm:0,md:7,sx:{backgroundImage:"url(".concat(WB,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}}),t.createElement(Nr,{item:!0,xs:12,sm:12,md:5,component:Ko,elevation:6,square:!0},t.createElement(lr,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"}},t.createElement(Pi,{sx:{m:1,bgcolor:"secondary.main"}}),t.createElement(Mt,{component:"h1",variant:"h5"},"Sign in"),t.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/150/150191.png",className:"h-40 aspect-square"}),l?t.createElement("div",{className:"app__container"},t.createElement(ug,{sx:{width:"300px"}},t.createElement(ZB,{sx:{display:"flex",alignItems:"center",flexDirection:"column"}},t.createElement(Mt,{sx:{padding:"20px"},variant:"h5",component:"div"},"Enter the OTP"),t.createElement(Ww,{sx:{width:"240px"},variant:"outlined",label:"OTP ",value:d,onChange:function(e){var t=e.target.value;h(t),6===t.length&&window.confirmationResult.confirm(t).then((function(e){var t=e.user;localStorage.setItem("AT",t.accessToken),n("/home")})).catch((function(e){alert("User couldn't sign in (bad verification code?)")}))}}))),t.createElement("div",{id:"recaptcha"})):t.createElement("div",{className:"app__container"},t.createElement(ug,{sx:{width:"300px"}},t.createElement(ZB,{sx:{display:"flex",alignItems:"center",flexDirection:"column"}},t.createElement(Mt,{sx:{padding:"20px"},variant:"h5",component:"div"},"Enter your phone number"),t.createElement("form",{onSubmit:function(e){e.preventDefault(),c(!0),window.recaptchaVerifier=new GH("recaptcha",{size:"invisible",callback:function(e){}},QV);var t=window.recaptchaVerifier;(async function(e,t,r){const n=Gj(e),o=await VH(n,t,AU(r));return new qH(o,(e=>async function(e,t){return pH(Gj(e),t)}(n,e)))})(QV,i,t).then((function(e){window.confirmationResult=e})).catch((function(e){console.log(e)}))}},t.createElement(Ww,{sx:{width:"240px"},variant:"outlined",autoComplete:"off",label:"Phone Number",value:i,onChange:function(e){return s(e.target.value)}}),t.createElement(Un,{type:"submit",variant:"contained",sx:{width:"240px",marginTop:"20px"}},"Send Code")))),t.createElement("div",{id:"recaptcha"})),t.createElement("div",{id:"recaptcha"})))))}var rW,nW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oW={},iW=iW||{},sW=nW||self;function aW(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lW(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var cW="closure_uid_"+(1e9*Math.random()>>>0),uW=0;function dW(e,t,r){return e.call.apply(e.bind,arguments)}function hW(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function pW(e,t,r){return(pW=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dW:hW).apply(null,arguments)}function fW(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gW(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(e,r,n){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[r].apply(e,o)}}function mW(){this.s=this.s,this.o=this.o}mW.prototype.s=!1,mW.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,cW)&&e[cW]||(e[cW]=++uW)}(this)},mW.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vW=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function _W(e){const t=e.length;if(0<t){const r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function yW(e,t){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(aW(r)){const t=e.length||0,n=r.length||0;e.length=t+n;for(let o=0;o<n;o++)e[t+o]=r[o]}else e.push(r)}}function bW(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bW.prototype.h=function(){this.defaultPrevented=!0};var EW=function(){if(!sW.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sW.addEventListener("test",(()=>{}),t),sW.removeEventListener("test",(()=>{}),t)}catch(e){}return e}();function SW(e){return/^[\s\xa0]*$/.test(e)}function CW(){var e=sW.navigator;return e&&(e=e.userAgent)?e:""}function TW(e){return-1!=CW().indexOf(e)}function wW(e){return wW[" "](e),e}wW[" "]=function(){};var RW,kW,OW=TW("Opera"),IW=TW("Trident")||TW("MSIE"),PW=TW("Edge"),AW=PW||IW,NW=TW("Gecko")&&!(-1!=CW().toLowerCase().indexOf("webkit")&&!TW("Edge"))&&!(TW("Trident")||TW("MSIE"))&&!TW("Edge"),LW=-1!=CW().toLowerCase().indexOf("webkit")&&!TW("Edge");function MW(){var e=sW.document;return e?e.documentMode:void 0}e:{var xW="",DW=function(){var e=CW();return NW?/rv:([^\);]+)(\)|;)/.exec(e):PW?/Edge\/([\d\.]+)/.exec(e):IW?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):LW?/WebKit\/(\S+)/.exec(e):OW?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(DW&&(xW=DW?DW[1]:""),IW){var BW=MW();if(null!=BW&&BW>parseFloat(xW)){RW=String(BW);break e}}RW=xW}sW.document&&IW?kW=MW()||parseInt(RW,10)||void 0:kW=void 0;var UW=kW;function ZW(e,t){if(bW.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(NW){e:{try{wW(t.nodeName);var o=!0;break e}catch(e){}o=!1}o||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:jW[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ZW.$.h.call(this)}}gW(ZW,bW);var jW={2:"touch",3:"pen",4:"mouse"};ZW.prototype.h=function(){ZW.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var HW="closure_listenable_"+(1e6*Math.random()|0),FW=0;function zW(e,t,r,n,o){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=o,this.key=++FW,this.fa=this.ia=!1}function GW(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function qW(e,t,r){for(const n in e)t.call(r,e[n],n,e)}function VW(e){const t={};for(const r in e)t[r]=e[r];return t}const WW="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YW(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t],n)e[r]=n[r];for(let t=0;t<WW.length;t++)r=WW[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function KW(e){this.src=e,this.g={},this.h=0}function $W(e,t){var r=t.type;if(r in e.g){var n,o=e.g[r],i=vW(o,t);(n=0<=i)&&Array.prototype.splice.call(o,i,1),n&&(GW(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function QW(e,t,r,n){for(var o=0;o<e.length;++o){var i=e[o];if(!i.fa&&i.listener==t&&i.capture==!!r&&i.la==n)return o}return-1}KW.prototype.add=function(e,t,r,n,o){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=QW(e,t,n,o);return-1<s?(t=e[s],r||(t.ia=!1)):((t=new zW(t,this.src,i,!!n,o)).ia=r,e.push(t)),t};var XW="closure_lm_"+(1e6*Math.random()|0),JW={};function eY(e,t,r,n,o){if(n&&n.once)return rY(e,t,r,n,o);if(Array.isArray(t)){for(var i=0;i<t.length;i++)eY(e,t[i],r,n,o);return null}return r=cY(r),e&&e[HW]?e.O(t,r,lW(n)?!!n.capture:!!n,o):tY(e,t,r,!1,n,o)}function tY(e,t,r,n,o,i){if(!t)throw Error("Invalid event type");var s=lW(o)?!!o.capture:!!o,a=aY(e);if(a||(e[XW]=a=new KW(e)),(r=a.add(t,r,n,s,i)).proxy)return r;if(n=function(){const e=sY;return function t(r){return e.call(t.src,t.listener,r)}}(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)EW||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),n,o);else if(e.attachEvent)e.attachEvent(iY(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return r}function rY(e,t,r,n,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)rY(e,t[i],r,n,o);return null}return r=cY(r),e&&e[HW]?e.P(t,r,lW(n)?!!n.capture:!!n,o):tY(e,t,r,!0,n,o)}function nY(e,t,r,n,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)nY(e,t[i],r,n,o);else n=lW(n)?!!n.capture:!!n,r=cY(r),e&&e[HW]?(e=e.i,(t=String(t).toString())in e.g&&-1<(r=QW(i=e.g[t],r,n,o))&&(GW(i[r]),Array.prototype.splice.call(i,r,1),0==i.length&&(delete e.g[t],e.h--))):e&&(e=aY(e))&&(t=e.g[t.toString()],e=-1,t&&(e=QW(t,r,n,o)),(r=-1<e?t[e]:null)&&oY(r))}function oY(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[HW])$W(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(iY(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=aY(t))?($W(r,e),0==r.h&&(r.src=null,t[XW]=null)):GW(e)}}}function iY(e){return e in JW?JW[e]:JW[e]="on"+e}function sY(e,t){if(e.fa)e=!0;else{t=new ZW(t,this);var r=e.listener,n=e.la||e.src;e.ia&&oY(e),e=r.call(n,t)}return e}function aY(e){return(e=e[XW])instanceof KW?e:null}var lY="__closure_events_fn_"+(1e9*Math.random()>>>0);function cY(e){return"function"==typeof e?e:(e[lY]||(e[lY]=function(t){return e.handleEvent(t)}),e[lY])}function uY(){mW.call(this),this.i=new KW(this),this.S=this,this.J=null}function dY(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,"string"==typeof t)t=new bW(t,e);else if(t instanceof bW)t.target=t.target||e;else{var o=t;YW(t=new bW(n,e),o)}if(o=!0,r)for(var i=r.length-1;0<=i;i--){var s=t.g=r[i];o=hY(s,n,!0,t)&&o}if(o=hY(s=t.g=e,n,!0,t)&&o,o=hY(s,n,!1,t)&&o,r)for(i=0;i<r.length;i++)o=hY(s=t.g=r[i],n,!1,t)&&o}function hY(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.fa&&s.capture==r){var a=s.listener,l=s.la||s.src;s.ia&&$W(e.i,s),o=!1!==a.call(l,n)&&o}}return o&&!n.defaultPrevented}gW(uY,mW),uY.prototype[HW]=!0,uY.prototype.removeEventListener=function(e,t,r,n){nY(this,e,t,r,n)},uY.prototype.N=function(){if(uY.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)GW(r[n]);delete t.g[e],t.h--}}this.J=null},uY.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},uY.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};var pY=sW.JSON.stringify;function fY(){var e=EY;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gY=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new mY),(e=>e.reset()));class mY{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vY(e){var t=1;e=e.split(":");const r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function _Y(e){sW.setTimeout((()=>{throw e}),0)}let yY,bY=!1,EY=new class{constructor(){this.h=this.g=null}add(e,t){const r=gY.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},SY=()=>{const e=sW.Promise.resolve(void 0);yY=()=>{e.then(CY)}};var CY=()=>{for(var e;e=fY();){try{e.h.call(e.g)}catch(e){_Y(e)}var t=gY;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}bY=!1};function TY(e,t){uY.call(this),this.h=e||1,this.g=t||sW,this.j=pW(this.qb,this),this.l=Date.now()}function wY(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function RY(e,t,r){if("function"==typeof e)r&&(e=pW(e,r));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pW(e.handleEvent,e)}return 2147483647<Number(t)?-1:sW.setTimeout(e,t||0)}function kY(e){e.g=RY((()=>{e.g=null,e.i&&(e.i=!1,kY(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}gW(TY,uY),(rW=TY.prototype).ga=!1,rW.T=null,rW.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),dY(this,"tick"),this.ga&&(wY(this),this.start()))}},rW.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rW.N=function(){TY.$.N.call(this),wY(this),delete this.g};class OY extends mW{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kY(this)}N(){super.N(),this.g&&(sW.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function IY(e){mW.call(this),this.h=e,this.g={}}gW(IY,mW);var PY=[];function AY(e,t,r,n){Array.isArray(r)||(r&&(PY[0]=r.toString()),r=PY);for(var o=0;o<r.length;o++){var i=eY(t,r[o],n||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function NY(e){qW(e.g,(function(e,t){this.g.hasOwnProperty(t)&&oY(e)}),e),e.g={}}function LY(){this.g=!0}function MY(e,t,r,n){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r)for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var o=n[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<o.length;s++)o[s]=""}}}return pY(r)}catch(e){return t}}(e,r)+(n?" "+n:"")}))}IY.prototype.N=function(){IY.$.N.call(this),NY(this)},IY.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},LY.prototype.Ea=function(){this.g=!1},LY.prototype.info=function(){};var xY={},DY=null;function BY(){return DY=DY||new uY}function UY(e){bW.call(this,xY.Ta,e)}function ZY(e){const t=BY();dY(t,new UY(t))}function jY(e,t){bW.call(this,xY.STAT_EVENT,e),this.stat=t}function HY(e){const t=BY();dY(t,new jY(t,e))}function FY(e,t){bW.call(this,xY.Ua,e),this.size=t}function zY(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return sW.setTimeout((function(){e()}),t)}xY.Ta="serverreachability",gW(UY,bW),xY.STAT_EVENT="statevent",gW(jY,bW),xY.Ua="timingevent",gW(FY,bW);var GY={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qY={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function VY(){}function WY(e){return e.h||(e.h=e.i())}function YY(){}VY.prototype.h=null;var KY,$Y={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function QY(){bW.call(this,"d")}function XY(){bW.call(this,"c")}function JY(){}function eK(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new IY(this),this.P=rK,e=AW?125:void 0,this.V=new TY(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tK}function tK(){this.i=null,this.g="",this.h=!1}gW(QY,bW),gW(XY,bW),gW(JY,VY),JY.prototype.g=function(){return new XMLHttpRequest},JY.prototype.i=function(){return{}},KY=new JY;var rK=45e3,nK={},oK={};function iK(e,t,r){e.L=1,e.v=TK(yK(t)),e.s=r,e.S=!0,sK(e,null)}function sK(e,t){e.G=Date.now(),uK(e),e.A=yK(e.v);var r=e.A,n=e.W;Array.isArray(n)||(n=[String(n)]),BK(r.i,"t",n),e.C=0,r=e.l.J,e.h=new tK,e.g=D$(e.l,r?t:null,!e.s),0<e.O&&(e.M=new OY(pW(e.Pa,e,e.g),e.O)),AY(e.U,e.g,"readystatechange",e.nb),t=e.I?VW(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ZY(),function(e,t,r,n,o,i){e.info((function(){if(e.g)if(i)for(var s="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+n+") [attempt "+o+"]: "+t+"\n"+r+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function aK(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function lK(e,t,r){let n,o=!0;for(;!e.J&&e.C<r.length;){if(n=cK(e,r),n==oK){4==t&&(e.o=4,HY(14),o=!1),MY(e.j,e.m,null,"[Incomplete Response]");break}if(n==nK){e.o=4,HY(15),MY(e.j,e.m,r,"[Invalid Chunk]"),o=!1;break}MY(e.j,e.m,n,null),gK(e,n)}aK(e)&&n!=oK&&n!=nK&&(e.h.g="",e.C=0),4!=t||0!=r.length||e.h.h||(e.o=1,HY(16),o=!1),e.i=e.i&&o,o?0<r.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),O$(t),t.M=!0,HY(11))):(MY(e.j,e.m,r,"[Invalid Chunked Response]"),fK(e),pK(e))}function cK(e,t){var r=e.C,n=t.indexOf("\n",r);return-1==n?oK:(r=Number(t.substring(r,n)),isNaN(r)?nK:(n+=1)+r>t.length?oK:(t=t.slice(n,n+r),e.C=n+r,t))}function uK(e){e.Y=Date.now()+e.P,dK(e,e.P)}function dK(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zY(pW(e.lb,e),t)}function hK(e){e.B&&(sW.clearTimeout(e.B),e.B=null)}function pK(e){0==e.l.H||e.J||A$(e.l,e)}function fK(e){hK(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,wY(e.V),NY(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function gK(e,t){try{var r=e.l;if(0!=r.H&&(r.g==e||zK(r.i,e)))if(!e.K&&zK(r.i,e)&&3==r.H){try{var n=r.Ja.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var o=n;if(0==o[0]){e:if(!r.u){if(r.g){if(!(r.g.G+3e3<e.G))break e;P$(r),b$(r)}k$(r),HY(18)}}else r.Fa=o[1],0<r.Fa-r.V&&37500>o[2]&&r.G&&0==r.A&&!r.v&&(r.v=zY(pW(r.ib,r),6e3));if(1>=FK(r.i)&&r.oa){try{r.oa()}catch(e){}r.oa=void 0}}else L$(r,11)}else if((e.K||r.g==e)&&P$(r),!SW(t))for(o=r.Ja.g.parse(t),t=0;t<o.length;t++){let c=o[t];if(r.V=c[0],c=c[1],2==r.H)if("c"==c[0]){r.K=c[1],r.pa=c[2];const t=c[3];null!=t&&(r.ra=t,r.l.info("VER="+r.ra));const o=c[4];null!=o&&(r.Ga=o,r.l.info("SVER="+r.Ga));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(n=1.5*u,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=n.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(GK(i,i.h),i.h=null))}if(n.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.Da=e,CK(n.I,n.F,e))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-e.G,r.l.info("Handshake RTT: "+r.S+"ms"));var s=e;if((n=r).wa=x$(n,n.J?n.pa:null,n.Y),s.K){qK(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.B&&(hK(a),uK(a)),n.g=s}else R$(n);0<r.j.length&&S$(r)}else"stop"!=c[0]&&"close"!=c[0]||L$(r,7);else 3==r.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?L$(r,7):y$(r):"noop"!=c[0]&&r.h&&r.h.Aa(c),r.A=0)}ZY()}catch(e){}}function mK(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(aW(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(aW(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}t=[],r=0;for(const n in e)t[r++]=n;return t}}}(e),n=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(aW(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),o=n.length,i=0;i<o;i++)t.call(void 0,n[i],r&&r[i],e)}(rW=eK.prototype).setTimeout=function(e){this.P=e},rW.nb=function(e){e=e.target;const t=this.M;t&&3==p$(e)?t.l():this.Pa(e)},rW.Pa=function(e){try{if(e==this.g)e:{const u=p$(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||AW||this.g&&(this.h.h||this.g.ja()||f$(this.g)))){this.J||4!=u||7==t||ZY(),hK(this);var r=this.g.da();this.ca=r;t:if(aK(this)){var n=f$(this.g);e="";var o=n.length,i=4==p$(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fK(this),pK(this);var s="";break t}this.h.i=new sW.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:i&&t==o-1});n.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,r,n,o,i,s){e.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+o+"]: "+t+"\n"+r+"\n"+i+" "+s}))}(this.j,this.u,this.A,this.m,this.W,u,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!SW(a)){var c=a;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,HY(12),fK(this),pK(this);break e}MY(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gK(this,r)}this.S?(lK(this,u,s),AW&&this.i&&3==u&&(AY(this.U,this.V,"tick",this.mb),this.V.start())):(MY(this.j,this.m,s,null),gK(this,s)),4==u&&fK(this),this.i&&!this.J&&(4==u?A$(this.l,this):(this.i=!1,uK(this)))}else(function(e){const t={};e=(e.g&&2<=p$(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(SW(e[n]))continue;var r=vY(e[n]);const o=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();const i=t[o]||[];t[o]=i,i.push(r)}!function(e,t){for(const r in e)t.call(void 0,e[r],r,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,HY(12)):(this.o=0,HY(13)),fK(this),pK(this)}}}catch(e){}},rW.mb=function(){if(this.g){var e=p$(this.g),t=this.g.ja();this.C<t.length&&(hK(this),lK(this,e,t),this.i&&4!=e&&uK(this))}},rW.cancel=function(){this.J=!0,fK(this)},rW.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ZY(),HY(17)),fK(this),this.o=2,pK(this)):dK(this,this.Y-e)};var vK=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _K(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof _K){this.h=e.h,bK(this,e.j),this.s=e.s,this.g=e.g,EK(this,e.m),this.l=e.l;var t=e.i,r=new LK;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),SK(this,r),this.o=e.o}else e&&(t=String(e).match(vK))?(this.h=!1,bK(this,t[1]||"",!0),this.s=wK(t[2]||""),this.g=wK(t[3]||"",!0),EK(this,t[4]),this.l=wK(t[5]||"",!0),SK(this,t[6]||"",!0),this.o=wK(t[7]||"")):(this.h=!1,this.i=new LK(null,this.h))}function yK(e){return new _K(e)}function bK(e,t,r){e.j=r?wK(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function EK(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function SK(e,t,r){t instanceof LK?(e.i=t,function(e,t){t&&!e.j&&(MK(e),e.i=null,e.g.forEach((function(e,t){var r=t.toLowerCase();t!=r&&(xK(this,t),BK(this,r,e))}),e)),e.j=t}(e.i,e.h)):(r||(t=RK(t,AK)),e.i=new LK(t,e.h))}function CK(e,t,r){e.i.set(t,r)}function TK(e){return CK(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wK(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function RK(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,kK),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function kK(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_K.prototype.toString=function(){var e=[],t=this.j;t&&e.push(RK(t,OK,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(RK(t,OK,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(RK(r,"/"==r.charAt(0)?PK:IK,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",RK(r,NK)),e.join("")};var OK=/[#\/\?@]/g,IK=/[#\?:]/g,PK=/[#\?]/g,AK=/[#\?@]/g,NK=/#/g;function LK(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function MK(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),o=null;if(0<=n){var i=e[r].substring(0,n);o=e[r].substring(n+1)}else i=e[r];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,(function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)})))}function xK(e,t){MK(e),t=UK(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function DK(e,t){return MK(e),t=UK(e,t),e.g.has(t)}function BK(e,t,r){xK(e,t),0<r.length&&(e.i=null,e.g.set(UK(e,t),_W(r)),e.h+=r.length)}function UK(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ZK(e){this.l=e||jK,e=sW.PerformanceNavigationTiming?0<(e=sW.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(sW.g&&sW.g.Ka&&sW.g.Ka()&&sW.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rW=LK.prototype).add=function(e,t){MK(this),this.i=null,e=UK(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},rW.forEach=function(e,t){MK(this),this.g.forEach((function(r,n){r.forEach((function(r){e.call(t,r,n,this)}),this)}),this)},rW.ta=function(){MK(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){const o=e[n];for(let e=0;e<o.length;e++)r.push(t[n])}return r},rW.Z=function(e){MK(this);let t=[];if("string"==typeof e)DK(this,e)&&(t=t.concat(this.g.get(UK(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},rW.set=function(e,t){return MK(this),this.i=null,DK(this,e=UK(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rW.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},rW.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];const i=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var o=i;""!==s[n]&&(o+="="+encodeURIComponent(String(s[n]))),e.push(o)}}return this.i=e.join("&")};var jK=10;function HK(e){return!!e.h||!!e.g&&e.g.size>=e.j}function FK(e){return e.h?1:e.g?e.g.size:0}function zK(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function GK(e,t){e.g?e.g.add(t):e.h=t}function qK(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function VK(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const r of e.g.values())t=t.concat(r.F);return t}return _W(e.i)}ZK.prototype.cancel=function(){if(this.i=VK(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var WK=class{stringify(e){return sW.JSON.stringify(e,void 0)}parse(e){return sW.JSON.parse(e,void 0)}};function YK(){this.g=new WK}function KK(e,t,r){const n=r||"";try{mK(e,(function(e,r){let o=e;lW(e)&&(o=pY(e)),t.push(n+r+"="+encodeURIComponent(o))}))}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}function $K(e,t,r,n,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(n)}catch(e){}}function QK(e){this.l=e.fc||null,this.j=e.ob||!1}function XK(e,t){uY.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=JK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gW(QK,VY),QK.prototype.g=function(){return new XK(this.l,this.j)},QK.prototype.i=function(e){return function(){return e}}({}),gW(XK,uY);var JK=0;function e$(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function t$(e){e.readyState=4,e.l=null,e.j=null,e.A=null,r$(e)}function r$(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rW=XK.prototype).open=function(e,t){if(this.readyState!=JK)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,r$(this)},rW.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||sW).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},rW.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,t$(this)),this.readyState=JK},rW.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,r$(this)),this.g&&(this.readyState=3,r$(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==sW.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e$(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},rW.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?t$(this):r$(this),3==this.readyState&&e$(this)}},rW.Za=function(e){this.g&&(this.response=this.responseText=e,t$(this))},rW.Ya=function(e){this.g&&(this.response=e,t$(this))},rW.ka=function(){this.g&&t$(this)},rW.setRequestHeader=function(e,t){this.v.append(e,t)},rW.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rW.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(XK.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var n$=sW.JSON.parse;function o$(e){uY.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=i$,this.L=this.M=!1}gW(o$,uY);var i$="",s$=/^https?$/i,a$=["POST","PUT"];function l$(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,c$(e),d$(e)}function c$(e){e.F||(e.F=!0,dY(e,"complete"),dY(e,"error"))}function u$(e){if(e.h&&void 0!==iW&&(!e.C[1]||4!=p$(e)||2!=e.da()))if(e.v&&4==p$(e))RY(e.La,0,e);else if(dY(e,"readystatechange"),4==p$(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var n;if(n=0===s){var o=String(e.I).match(vK)[1]||null;!o&&sW.self&&sW.self.location&&(o=sW.self.location.protocol.slice(0,-1)),n=!s$.test(o?o.toLowerCase():"")}r=n}if(r)dY(e,"complete"),dY(e,"success");else{e.m=6;try{var i=2<p$(e)?e.g.statusText:""}catch(e){i=""}e.j=i+" ["+e.da()+"]",c$(e)}}finally{d$(e)}}}function d$(e,t){if(e.g){h$(e);const r=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||dY(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function h$(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(sW.clearTimeout(e.A),e.A=null)}function p$(e){return e.g?e.g.readyState:0}function f$(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case i$:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function g$(e){let t="";return qW(e,(function(e,r){t+=r,t+=":",t+=e,t+="\r\n"})),t}function m$(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=g$(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):CK(e,t,r))}function v$(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function _$(e){this.Ga=0,this.j=[],this.l=new LY,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=v$("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=v$("baseRetryDelayMs",5e3,e),this.hb=v$("retryDelaySeedMs",1e4,e),this.eb=v$("forwardChannelMaxRetries",2,e),this.xa=v$("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ZK(e&&e.concurrentRequestLimit),this.Ja=new YK,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function y$(e){if(E$(e),3==e.H){var t=e.W++,r=yK(e.I);if(CK(r,"SID",e.K),CK(r,"RID",t),CK(r,"TYPE","terminate"),T$(e,r),(t=new eK(e,e.l,t)).L=2,t.v=TK(yK(r)),r=!1,sW.navigator&&sW.navigator.sendBeacon)try{r=sW.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!r&&sW.Image&&((new Image).src=t.v,r=!0),r||(t.g=D$(t.l,null),t.g.ha(t.v)),t.G=Date.now(),uK(t)}M$(e)}function b$(e){e.g&&(O$(e),e.g.cancel(),e.g=null)}function E$(e){b$(e),e.u&&(sW.clearTimeout(e.u),e.u=null),P$(e),e.i.cancel(),e.m&&("number"==typeof e.m&&sW.clearTimeout(e.m),e.m=null)}function S$(e){if(!HK(e.i)&&!e.m){e.m=!0;var t=e.Na;yY||SY(),bY||(yY(),bY=!0),EY.add(t,e),e.C=0}}function C$(e,t){var r;r=t?t.m:e.W++;const n=yK(e.I);CK(n,"SID",e.K),CK(n,"RID",r),CK(n,"AID",e.V),T$(e,n),e.o&&e.s&&m$(n,e.o,e.s),r=new eK(e,e.l,r,e.C+1),null===e.o&&(r.I=e.s),t&&(e.j=t.F.concat(e.j)),t=w$(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),GK(e.i,r),iK(r,n,t)}function T$(e,t){e.na&&qW(e.na,(function(e,r){CK(t,r,e)})),e.h&&mK({},(function(e,r){CK(t,r,e)}))}function w$(e,t,r){r=Math.min(e.j.length,r);var n=e.h?pW(e.h.Va,e.h,e):null;e:{var o=e.j;let t=-1;for(;;){const e=["count="+r];-1==t?0<r?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let s=0;s<r;s++){let r=o[s].g;const a=o[s].map;if(r-=t,0>r)t=Math.max(0,o[s].g-100),i=!1;else try{KK(a,e,"req"+r+"_")}catch(e){n&&n(a)}}if(i){n=e.join("&");break e}}}return e=e.j.splice(0,r),t.F=e,n}function R$(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;yY||SY(),bY||(yY(),bY=!0),EY.add(t,e),e.A=0}}function k$(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=zY(pW(e.Ma,e),N$(e,e.A)),e.A++,0))}function O$(e){null!=e.B&&(sW.clearTimeout(e.B),e.B=null)}function I$(e){e.g=new eK(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=yK(e.wa);CK(t,"RID","rpc"),CK(t,"SID",e.K),CK(t,"AID",e.V),CK(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&CK(t,"TO",e.qa),CK(t,"TYPE","xmlhttp"),T$(e,t),e.o&&e.s&&m$(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var r=e.g;e=e.pa,r.L=1,r.v=TK(yK(t)),r.s=null,r.S=!0,sK(r,e)}function P$(e){null!=e.v&&(sW.clearTimeout(e.v),e.v=null)}function A$(e,t){var r=null;if(e.g==t){P$(e),O$(e),e.g=null;var n=2}else{if(!zK(e.i,t))return;r=t.F,qK(e.i,t),n=1}if(0!=e.H)if(t.i)if(1==n){r=t.s?t.s.length:0,t=Date.now()-t.G;var o=e.C;dY(n=BY(),new FY(n,r)),S$(e)}else R$(e);else if(3==(o=t.o)||0==o&&0<t.ca||!(1==n&&function(e,t){return!(FK(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=zY(pW(e.Na,e,t),N$(e,e.C)),e.C++,0)))}(e,t)||2==n&&k$(e)))switch(r&&0<r.length&&(t=e.i,t.i=t.i.concat(r)),o){case 1:L$(e,5);break;case 4:L$(e,10);break;case 3:L$(e,6);break;default:L$(e,2)}}function N$(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(r*=2),r*t}function L$(e,t){if(e.l.info("Error code "+t),2==t){var r=null;e.h&&(r=null);var n=pW(e.pb,e);r||(r=new _K("//www.google.com/images/cleardot.gif"),sW.location&&"http"==sW.location.protocol||bK(r,"https"),TK(r)),function(e,t){const r=new LY;if(sW.Image){const n=new Image;n.onload=fW($K,r,n,"TestLoadImage: loaded",!0,t),n.onerror=fW($K,r,n,"TestLoadImage: error",!1,t),n.onabort=fW($K,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=fW($K,r,n,"TestLoadImage: timeout",!1,t),sW.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=e}else t(!1)}(r.toString(),n)}else HY(2);e.H=0,e.h&&e.h.za(t),M$(e),E$(e)}function M$(e){if(e.H=0,e.ma=[],e.h){const t=VK(e.i);0==t.length&&0==e.j.length||(yW(e.ma,t),yW(e.ma,e.j),e.i.i.length=0,_W(e.j),e.j.length=0),e.h.ya()}}function x$(e,t,r){var n=r instanceof _K?yK(r):new _K(r);if(""!=n.g)t&&(n.g=t+"."+n.g),EK(n,n.m);else{var o=sW.location;n=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var i=new _K(null);n&&bK(i,n),t&&(i.g=t),o&&EK(i,o),r&&(i.l=r),n=i}return r=e.F,t=e.Da,r&&t&&CK(n,r,t),CK(n,"VER",e.ra),T$(e,n),n}function D$(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=r&&e.Ha&&!e.va?new o$(new QK({ob:!0})):new o$(e.va)).Oa(e.J),t}function B$(){}function U$(){if(IW&&!(10<=Number(UW)))throw Error("Environmental error: no available transport.")}function Z$(e,t){uY.call(this),this.g=new _$(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!SW(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!SW(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new F$(this)}function j$(e){QY.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function H$(){XY.call(this),this.status=1}function F$(e){this.g=e}function z$(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function G$(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var o=0;16>o;++o)n[o]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(o=0;16>o;++o)n[o]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],o=e.g[2];var i=e.g[3],s=t+(i^r&(o^i))+n[0]+3614090360&4294967295;s=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=(r=(o=(i=(t=r+(s<<7&4294967295|s>>>25))+((s=i+(o^t&(r^o))+n[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=o+(r^i&(t^r))+n[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^o&(i^t))+n[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^r&(o^i))+n[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(r^o))+n[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=o+(r^i&(t^r))+n[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^o&(i^t))+n[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^r&(o^i))+n[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(r^o))+n[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=o+(r^i&(t^r))+n[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^o&(i^t))+n[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^r&(o^i))+n[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(r^o))+n[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=o+(r^i&(t^r))+n[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^o&(i^t))+n[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^i&(r^o))+n[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=i+(r^o&(t^r))+n[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^r&(i^t))+n[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=r+(i^t&(o^i))+n[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(r^o))+n[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=i+(r^o&(t^r))+n[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^r&(i^t))+n[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=r+(i^t&(o^i))+n[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(r^o))+n[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=i+(r^o&(t^r))+n[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^r&(i^t))+n[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=r+(i^t&(o^i))+n[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(r^o))+n[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=i+(r^o&(t^r))+n[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^r&(i^t))+n[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=r+(i^t&(o^i))+n[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^o^i)+n[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^r^o)+n[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^r)+n[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=r+(o^i^t)+n[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^o^i)+n[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^r^o)+n[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^r)+n[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=r+(o^i^t)+n[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^o^i)+n[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^r^o)+n[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^r)+n[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=r+(o^i^t)+n[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^o^i)+n[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^r^o)+n[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^r)+n[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=r+(o^i^t)+n[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(o^(r|~i))+n[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=i+(r^(t|~o))+n[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~r))+n[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=r+(i^(o|~t))+n[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(o^(r|~i))+n[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=i+(r^(t|~o))+n[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~r))+n[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=r+(i^(o|~t))+n[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(o^(r|~i))+n[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=i+(r^(t|~o))+n[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~r))+n[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=r+(i^(o|~t))+n[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((i=(t=r+((s=t+(o^(r|~i))+n[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=i+(r^(t|~o))+n[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((o=i+((s=o+(t^(i|~r))+n[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}function q$(e,t){this.h=t;for(var r=[],n=!0,o=e.length-1;0<=o;o--){var i=0|e[o];n&&i==t||(r[o]=i,n=!1)}this.g=r}(rW=o$.prototype).Oa=function(e){this.M=e},rW.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():KY.g(),this.C=this.u?WY(this.u):WY(KY),this.g.onreadystatechange=pW(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void l$(this,e)}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var o in n)r.set(o,n[o]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const e of n.keys())r.set(e,n.get(e))}n=Array.from(r.keys()).find((e=>"content-type"==e.toLowerCase())),o=sW.FormData&&e instanceof sW.FormData,!(0<=vW(a$,t))||n||o||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of r)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{h$(this),0<this.B&&((this.L=function(e){return IW&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pW(this.ua,this)):this.A=RY(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){l$(this,e)}},rW.ua=function(){void 0!==iW&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dY(this,"timeout"),this.abort(8))},rW.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,dY(this,"complete"),dY(this,"abort"),d$(this))},rW.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),d$(this,!0)),o$.$.N.call(this)},rW.La=function(){this.s||(this.G||this.v||this.l?u$(this):this.kb())},rW.kb=function(){u$(this)},rW.isActive=function(){return!!this.g},rW.da=function(){try{return 2<p$(this)?this.g.status:-1}catch(e){return-1}},rW.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},rW.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),n$(t)}},rW.Ia=function(){return this.m},rW.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rW=_$.prototype).ra=8,rW.H=1,rW.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const o=new eK(this,this.l,e);let i=this.s;if(this.U&&(i?(i=VW(i),YW(i,this.U)):i=this.U),null!==this.o||this.O||(o.I=i,i=null),this.P)e:{for(var t=0,r=0;r<this.j.length;r++){var n=this.j[r];if(void 0===(n="__data__"in n.map&&"string"==typeof(n=n.map.__data__)?n.length:void 0))break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.j.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=w$(this,o,t),CK(r=yK(this.I),"RID",e),CK(r,"CVER",22),this.F&&CK(r,"X-HTTP-Session-Id",this.F),T$(this,r),i&&(this.O?t="headers="+encodeURIComponent(String(g$(i)))+"&"+t:this.o&&m$(r,this.o,i)),GK(this.i,o),this.bb&&CK(r,"TYPE","init"),this.P?(CK(r,"$req",t),CK(r,"SID","null"),o.aa=!0,iK(o,r,null)):iK(o,r,t),this.H=2}}else 3==this.H&&(e?C$(this,e):0==this.j.length||HK(this.i)||C$(this))},rW.Ma=function(){if(this.u=null,I$(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zY(pW(this.jb,this),e)}},rW.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,HY(10),b$(this),I$(this))},rW.ib=function(){null!=this.v&&(this.v=null,b$(this),k$(this),HY(19))},rW.pb=function(e){e?(this.l.info("Successfully pinged google.com"),HY(2)):(this.l.info("Failed to ping google.com"),HY(1))},rW.isActive=function(){return!!this.h&&this.h.isActive(this)},(rW=B$.prototype).Ba=function(){},rW.Aa=function(){},rW.za=function(){},rW.ya=function(){},rW.isActive=function(){return!0},rW.Va=function(){},U$.prototype.g=function(e,t){return new Z$(e,t)},gW(Z$,uY),Z$.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,r=this.h||void 0;HY(0),e.Y=t,e.na=r||{},e.G=e.aa,e.I=x$(e,null,e.Y),S$(e)},Z$.prototype.close=function(){y$(this.g)},Z$.prototype.u=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=pY(e),e=r);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&S$(t)},Z$.prototype.N=function(){this.g.h=null,delete this.j,y$(this.g),delete this.g,Z$.$.N.call(this)},gW(j$,QY),gW(H$,XY),gW(F$,B$),F$.prototype.Ba=function(){dY(this.g,"a")},F$.prototype.Aa=function(e){dY(this.g,new j$(e))},F$.prototype.za=function(e){dY(this.g,new H$)},F$.prototype.ya=function(){dY(this.g,"b")},gW(z$,(function(){this.blockSize=-1})),z$.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},z$.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.m,o=this.h,i=0;i<t;){if(0==o)for(;i<=r;)G$(this,e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(n[o++]=e.charCodeAt(i++),o==this.blockSize){G$(this,n),o=0;break}}else for(;i<t;)if(n[o++]=e[i++],o==this.blockSize){G$(this,n),o=0;break}}this.h=o,this.i+=t},z$.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var V$={};function W$(e){return-128<=e&&128>e?function(e,t){var r=V$;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(e){return new q$([0|e],0>e?-1:0)}(e)}(e):new q$([0|e],0>e?-1:0)}function Y$(e){if(isNaN(e)||!isFinite(e))return $$;if(0>e)return tQ(Y$(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=K$;return new q$(t,0)}var K$=4294967296,$$=W$(0),Q$=W$(1),X$=W$(16777216);function J$(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function eQ(e){return-1==e.h}function tQ(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new q$(r,~e.h).add(Q$)}function rQ(e,t){return e.add(tQ(t))}function nQ(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function oQ(e,t){this.g=e,this.h=t}function iQ(e,t){if(J$(t))throw Error("division by zero");if(J$(e))return new oQ($$,$$);if(eQ(e))return t=iQ(tQ(e),t),new oQ(tQ(t.g),tQ(t.h));if(eQ(t))return t=iQ(e,tQ(t)),new oQ(tQ(t.g),t.h);if(30<e.g.length){if(eQ(e)||eQ(t))throw Error("slowDivide_ only works with positive integers.");for(var r=Q$,n=t;0>=n.X(e);)r=sQ(r),n=sQ(n);var o=aQ(r,1),i=aQ(n,1);for(n=aQ(n,2),r=aQ(r,2);!J$(n);){var s=i.add(n);0>=s.X(e)&&(o=o.add(r),i=s),n=aQ(n,1),r=aQ(r,1)}return t=rQ(e,o.R(t)),new oQ(o,t)}for(o=$$;0<=e.X(t);){for(r=Math.max(1,Math.floor(e.ea()/t.ea())),n=48>=(n=Math.ceil(Math.log(r)/Math.LN2))?1:Math.pow(2,n-48),s=(i=Y$(r)).R(t);eQ(s)||0<s.X(e);)s=(i=Y$(r-=n)).R(t);J$(i)&&(i=Q$),o=o.add(i),e=rQ(e,s)}return new oQ(o,e)}function sQ(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new q$(r,e.h)}function aQ(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,o=[],i=0;i<n;i++)o[i]=0<t?e.D(i+r)>>>t|e.D(i+r+1)<<32-t:e.D(i+r);return new q$(o,e.h)}(rW=q$.prototype).ea=function(){if(eQ(this))return-tQ(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:K$+n)*t,t*=K$}return e},rW.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(J$(this))return"0";if(eQ(this))return"-"+tQ(this).toString(e);for(var t=Y$(Math.pow(e,6)),r=this,n="";;){var o=iQ(r,t).g,i=((0<(r=rQ(r,o.R(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(J$(r=o))return i+n;for(;6>i.length;)i="0"+i;n=i+n}},rW.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},rW.X=function(e){return eQ(e=rQ(this,e))?-1:J$(e)?0:1},rW.abs=function(){return eQ(this)?tQ(this):this},rW.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,o=0;o<=t;o++){var i=n+(65535&this.D(o))+(65535&e.D(o)),s=(i>>>16)+(this.D(o)>>>16)+(e.D(o)>>>16);n=s>>>16,i&=65535,s&=65535,r[o]=s<<16|i}return new q$(r,-2147483648&r[r.length-1]?-1:0)},rW.R=function(e){if(J$(this)||J$(e))return $$;if(eQ(this))return eQ(e)?tQ(this).R(tQ(e)):tQ(tQ(this).R(e));if(eQ(e))return tQ(this.R(tQ(e)));if(0>this.X(X$)&&0>e.X(X$))return Y$(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var o=0;o<e.g.length;o++){var i=this.D(n)>>>16,s=65535&this.D(n),a=e.D(o)>>>16,l=65535&e.D(o);r[2*n+2*o]+=s*l,nQ(r,2*n+2*o),r[2*n+2*o+1]+=i*l,nQ(r,2*n+2*o+1),r[2*n+2*o+1]+=s*a,nQ(r,2*n+2*o+1),r[2*n+2*o+2]+=i*a,nQ(r,2*n+2*o+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new q$(r,0)},rW.gb=function(e){return iQ(this,e).h},rW.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new q$(r,this.h&e.h)},rW.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new q$(r,this.h|e.h)},rW.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new q$(r,this.h^e.h)},U$.prototype.createWebChannel=U$.prototype.g,Z$.prototype.send=Z$.prototype.u,Z$.prototype.open=Z$.prototype.m,Z$.prototype.close=Z$.prototype.close,GY.NO_ERROR=0,GY.TIMEOUT=8,GY.HTTP_ERROR=6,qY.COMPLETE="complete",YY.EventType=$Y,$Y.OPEN="a",$Y.CLOSE="b",$Y.ERROR="c",$Y.MESSAGE="d",uY.prototype.listen=uY.prototype.O,o$.prototype.listenOnce=o$.prototype.P,o$.prototype.getLastError=o$.prototype.Sa,o$.prototype.getLastErrorCode=o$.prototype.Ia,o$.prototype.getStatus=o$.prototype.da,o$.prototype.getResponseJson=o$.prototype.Wa,o$.prototype.getResponseText=o$.prototype.ja,o$.prototype.send=o$.prototype.ha,o$.prototype.setWithCredentials=o$.prototype.Oa,z$.prototype.digest=z$.prototype.l,z$.prototype.reset=z$.prototype.reset,z$.prototype.update=z$.prototype.j,q$.prototype.add=q$.prototype.add,q$.prototype.multiply=q$.prototype.R,q$.prototype.modulo=q$.prototype.gb,q$.prototype.compare=q$.prototype.X,q$.prototype.toNumber=q$.prototype.ea,q$.prototype.toString=q$.prototype.toString,q$.prototype.getBits=q$.prototype.D,q$.fromNumber=Y$,q$.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return tQ(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Y$(Math.pow(r,8)),o=$$,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),r);8>s?(s=Y$(Math.pow(r,s)),o=o.R(s).add(Y$(a))):o=(o=o.R(n)).add(Y$(a))}return o},oW.createWebChannelTransport=function(){return new U$},oW.getStatEventTarget=function(){return BY()},oW.ErrorCode=GY,oW.EventType=qY,oW.Event=xY,oW.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oW.FetchXmlHttpFactory=QK,oW.WebChannel=YY,oW.XhrIo=o$,oW.Md5=z$;var lQ=oW.Integer=q$;const cQ="@firebase/firestore";class uQ{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}uQ.UNAUTHENTICATED=new uQ(null),uQ.GOOGLE_CREDENTIALS=new uQ("google-credentials-uid"),uQ.FIRST_PARTY=new uQ("first-party-uid"),uQ.MOCK_USER=new uQ("mock-user");let dQ="9.22.1";const hQ=new zU("@firebase/firestore");function pQ(e,...t){if(hQ.logLevel<=BU.DEBUG){const r=t.map(gQ);hQ.debug(`Firestore (${dQ}): ${e}`,...r)}}function fQ(e,...t){if(hQ.logLevel<=BU.ERROR){const r=t.map(gQ);hQ.error(`Firestore (${dQ}): ${e}`,...r)}}function gQ(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function mQ(e="Unexpected state"){const t=`FIRESTORE (${dQ}) INTERNAL ASSERTION FAILED: `+e;throw fQ(t),new Error(t)}function vQ(e,t){e||mQ()}const _Q="cancelled",yQ="invalid-argument",bQ="failed-precondition",EQ="unavailable";class SQ extends hU{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class CQ{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class TQ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(uQ.UNAUTHENTICATED)))}shutdown(){}}class RQ{constructor(e){this.t=e,this.currentUser=uQ.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let o=new CQ;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new CQ,e.enqueueRetryable((()=>n(this.currentUser)))};const i=()=>{const t=o;e.enqueueRetryable((async()=>{await t.promise,await n(this.currentUser)}))},s=e=>{pQ("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(pQ("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new CQ)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(pQ("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vQ("string"==typeof t.accessToken),new TQ(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vQ(null===e||"string"==typeof e),new uQ(e)}}class kQ{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=uQ.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class OQ{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kQ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(uQ.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PQ{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=e=>{null!=e.error&&pQ("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const r=e.token!==this.T;return this.T=e.token,pQ("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>r(t)))};const n=e=>{pQ("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?n(e):pQ("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(vQ("string"==typeof e.token),this.T=e.token,new IQ(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function AQ(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let t=0;t<e;t++)r[t]=Math.floor(256*Math.random());return r}class NQ{static A(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const r=AQ(40);for(let n=0;n<r.length;++n)t.length<20&&r[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[n]%62))}return t}}function LQ(e,t){return e<t?-1:e>t?1:0}class MQ{constructor(e,t,r){void 0===t?t=0:t>e.length&&mQ(),void 0===r?r=e.length-t:r>e.length-t&&mQ(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===MQ.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof MQ?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const r=e.get(n),o=t.get(n);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xQ extends MQ{construct(e,t,r){return new xQ(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new SQ(yQ,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((e=>e.length>0)))}return new xQ(t)}static emptyPath(){return new xQ([])}}class DQ{constructor(e){this.path=e}static fromPath(e){return new DQ(xQ.fromString(e))}static fromName(e){return new DQ(xQ.fromString(e).popFirst(5))}static empty(){return new DQ(xQ.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xQ.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xQ.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DQ(new xQ(e.slice()))}}function BQ(e){return"IndexedDbTransactionError"===e.name}class UQ{constructor(e,t){this.comparator=e,this.root=t||jQ.EMPTY}insert(e,t){return new UQ(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jQ.BLACK,null,null))}remove(e){return new UQ(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jQ.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ZQ(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ZQ(this.root,e,this.comparator,!1)}getReverseIterator(){return new ZQ(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ZQ(this.root,e,this.comparator,!0)}}class ZQ{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&n&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jQ{constructor(e,t,r,n,o){this.key=e,this.value=t,this.color=null!=r?r:jQ.RED,this.left=null!=n?n:jQ.EMPTY,this.right=null!=o?o:jQ.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,o){return new jQ(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const o=r(e,n.key);return n=o<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===o?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return jQ.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return jQ.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jQ.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jQ.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mQ();if(this.right.isRed())throw mQ();const e=this.left.check();if(e!==this.right.check())throw mQ();return e+(this.isRed()?0:1)}}jQ.EMPTY=null,jQ.RED=!0,jQ.BLACK=!1,jQ.EMPTY=new class{constructor(){this.size=0}get key(){throw mQ()}get value(){throw mQ()}get color(){throw mQ()}get left(){throw mQ()}get right(){throw mQ()}copy(e,t,r,n,o){return this}insert(e,t,r){return new jQ(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class HQ{constructor(e){this.comparator=e,this.data=new UQ(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FQ(this.data.getIterator())}getIteratorFrom(e){return new FQ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof HQ))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new HQ(this.comparator);return t.data=e,t}}class FQ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zQ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class GQ{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new zQ("Invalid base64 string: "+e):e}}(e);return new GQ(t)}static fromUint8Array(e){const t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new GQ(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return LQ(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function qQ(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}GQ.EMPTY_BYTE_STRING=new GQ("");class VQ{constructor(e,t,r,n,o,i,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class WQ{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new WQ("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof WQ&&e.projectId===this.projectId&&e.database===this.database}}var YQ,KQ;new UQ(DQ.comparator),new UQ(DQ.comparator),new UQ(DQ.comparator),new HQ(DQ.comparator),new HQ(LQ),(KQ=YQ||(YQ={}))[KQ.OK=0]="OK",KQ[KQ.CANCELLED=1]="CANCELLED",KQ[KQ.UNKNOWN=2]="UNKNOWN",KQ[KQ.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",KQ[KQ.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",KQ[KQ.NOT_FOUND=5]="NOT_FOUND",KQ[KQ.ALREADY_EXISTS=6]="ALREADY_EXISTS",KQ[KQ.PERMISSION_DENIED=7]="PERMISSION_DENIED",KQ[KQ.UNAUTHENTICATED=16]="UNAUTHENTICATED",KQ[KQ.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",KQ[KQ.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",KQ[KQ.ABORTED=10]="ABORTED",KQ[KQ.OUT_OF_RANGE=11]="OUT_OF_RANGE",KQ[KQ.UNIMPLEMENTED=12]="UNIMPLEMENTED",KQ[KQ.INTERNAL=13]="INTERNAL",KQ[KQ.UNAVAILABLE=14]="UNAVAILABLE",KQ[KQ.DATA_LOSS=15]="DATA_LOSS",new lQ([4294967295,4294967295],0);class $Q{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(qQ(e.integerValue));else if("doubleValue"in e){const r=qQ(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),function(e){return 0===e&&1/e==-1/0}(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(function(e){return"string"==typeof e?GQ.fromBase64String(e):GQ.fromUint8Array(e)}(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):mQ()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const e of Object.keys(r))this.Te(e,t),this.me(r[e],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const e of r)this.me(e,t)}ve(e,t){this.ye(t,37),DQ.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}$Q.Ve=new $Q,new Uint8Array(0);class QQ{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new QQ(e,QQ.DEFAULT_COLLECTION_PERCENTILE,QQ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XQ(){return"undefined"!=typeof document?document:null}QQ.DEFAULT_COLLECTION_PERCENTILE=10,QQ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,QQ.DEFAULT=new QQ(41943040,QQ.DEFAULT_COLLECTION_PERCENTILE,QQ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),QQ.DISABLED=new QQ(-1,0,0);class JQ{constructor(e,t,r=1e3,n=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=n,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),n=Math.max(0,t-r);n>0&&pQ("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,n,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class eX{constructor(e,t,r,n,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=o,this.deferred=new CQ,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,r,n,o){const i=Date.now()+r,s=new eX(e,t,i,n,o);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new SQ(_Q,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class tX{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=uQ.UNAUTHENTICATED,this.clientId=NQ.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,(async e=>{pQ("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(r,(e=>(pQ("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new SQ(bQ,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new CQ;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=function(e,t){if(fQ("AsyncQueue",`${t}: ${e}`),BQ(e))return new SQ(EQ,`${t}: ${e}`);throw e}(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function rX(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const nX=new Map;class oX{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new SQ(yQ,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new SQ(yQ,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new SQ(yQ,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rX(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new SQ(yQ,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new SQ(yQ,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new SQ(yQ,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,r}}class iX{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oX({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new SQ(bQ,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new SQ(bQ,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oX(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wQ;switch(e.type){case"firstParty":return new OQ(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new SQ(yQ,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nX.get(e);t&&(pQ("ComponentProvider","Removing Datastore"),nX.delete(e),t.terminate())}(this),Promise.resolve()}}class sX{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new JQ(this,"async_queue_retry"),this.Xc=()=>{const e=XQ();e&&pQ("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=XQ();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=XQ();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new CQ;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!BQ(e))throw e;pQ("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fQ("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const n=eX.createAndSchedule(this,e,t,r,(e=>this.na(e)));return this.zc.push(n),n}Zc(){this.Wc&&mQ()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class aX extends iX{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new sX,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||function(e){var t,r,n;const o=e._freezeSettings(),i=function(e,t,r,n){return new VQ(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,rX(n.experimentalLongPollingOptions),n.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._firestoreClient=new tX(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(r=o.cache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=o.cache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}(this),this._firestoreClient.terminate()}}!function(e,t=!0){!function(e){dQ=e}(bZ),mZ(new NU("firestore",((e,{instanceIdentifier:r,options:n})=>{const o=e.getProvider("app").getImmediate(),i=new aX(new RQ(e.getProvider("auth-internal")),new PQ(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new SQ(yQ,'"projectId" not provided in firebase.initializeApp.');return new WQ(e.options.projectId,t)}(o,r),o);return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC").setMultipleInstances(!0)),CZ(cQ,"3.12.1",e),CZ(cQ,"3.12.1","esm2017")}();var lX=__webpack_require__(1688),cX=__webpack_require__(2798);let uX=function(e){e()};const dX=()=>uX,hX=(0,t.createContext)(null);let pX=null;const fX={notify(){},get:()=>[]};const gX="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;let mX=null;const vX=function({store:e,context:r,children:n,serverState:o}){const i=(0,t.useMemo)((()=>{const t=function(e,t){let r,n=fX;function o(){s.onStateChange&&s.onStateChange()}function i(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){const e=dX();let t=null,r=null;return{clear(){t=null,r=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let n=!0,o=r={callback:e,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){n&&null!==t&&(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}const s={addNestedSub:function(e){return i(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(r)},trySubscribe:i,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=fX)},getListeners:()=>n};return s}(e);return{store:e,subscription:t,getServerState:o?()=>o:void 0}}),[e,o]),s=(0,t.useMemo)((()=>e.getState()),[e]);gX((()=>{const{subscription:t}=i;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[i,s]);const a=r||hX;return t.createElement(a.Provider,{value:i},n)};var _X,yX;function bX(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function EX(e){return!!e&&!!e[aJ]}function SX(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===lJ}(e)||Array.isArray(e)||!!e[sJ]||!!(null===(t=e.constructor)||void 0===t?void 0:t[sJ])||OX(e)||IX(e))}function CX(e,t,r){void 0===r&&(r=!1),0===TX(e)?(r?Object.keys:cJ)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function TX(e){var t=e[aJ];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:OX(e)?2:IX(e)?3:0}function wX(e,t){return 2===TX(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function RX(e,t,r){var n=TX(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function kX(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function OX(e){return rJ&&e instanceof Map}function IX(e){return nJ&&e instanceof Set}function PX(e){return e.o||e.t}function AX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uJ(e);delete t[aJ];for(var r=cJ(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function NX(e,t){return void 0===t&&(t=!1),MX(e)||EX(e)||!SX(e)||(TX(e)>1&&(e.set=e.add=e.clear=e.delete=LX),Object.freeze(e),t&&CX(e,(function(e,t){return NX(t,!0)}),!0)),e}function LX(){bX(2)}function MX(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function xX(e){var t=dJ[e];return t||bX(18,e),t}function DX(){return eJ}function BX(e,t){t&&(xX("Patches"),e.u=[],e.s=[],e.v=t)}function UX(e){ZX(e),e.p.forEach(HX),e.p=null}function ZX(e){e===eJ&&(eJ=e.l)}function jX(e){return eJ={p:[],l:eJ,h:e,m:!0,_:0}}function HX(e){var t=e[aJ];0===t.i||1===t.i?t.j():t.g=!0}function FX(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||xX("ES5").S(t,e,n),n?(r[aJ].P&&(UX(t),bX(4)),SX(e)&&(e=zX(t,e),t.l||qX(t,e)),t.u&&xX("Patches").M(r[aJ].t,e,t.u,t.s)):e=zX(t,r,[]),UX(t),t.u&&t.v(t.u,t.s),e!==iJ?e:void 0}function zX(e,t,r){if(MX(t))return t;var n=t[aJ];if(!n)return CX(t,(function(o,i){return GX(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return qX(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=AX(n.k):n.o,i=o,s=!1;3===n.i&&(i=new Set(o),o.clear(),s=!0),CX(i,(function(t,i){return GX(e,n,o,t,i,r,s)})),qX(e,o,!1),r&&e.u&&xX("Patches").N(n,r,e.u,e.s)}return n.o}function GX(e,t,r,n,o,i,s){if(EX(o)){var a=zX(e,o,i&&t&&3!==t.i&&!wX(t.R,n)?i.concat(n):void 0);if(RX(r,n,a),!EX(a))return;e.m=!1}else s&&r.add(o);if(SX(o)&&!MX(o)){if(!e.h.D&&e._<1)return;zX(e,o),t&&t.A.l||qX(e,o)}}function qX(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&NX(t,r)}function VX(e,t){var r=e[aJ];return(r?PX(r):e)[t]}function WX(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function YX(e){e.P||(e.P=!0,e.l&&YX(e.l))}function KX(e){e.o||(e.o=AX(e.t))}function $X(e,t,r){var n=OX(t)?xX("MapSet").F(t,r):IX(t)?xX("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:DX(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=hJ;r&&(o=[n],i=pJ);var s=Proxy.revocable(o,i),a=s.revoke,l=s.proxy;return n.k=l,n.j=a,l}(t,r):xX("ES5").J(t,r);return(r?r.A:DX()).p.push(n),n}function QX(e){return EX(e)||bX(22,e),function e(t){if(!SX(t))return t;var r,n=t[aJ],o=TX(t);if(n){if(!n.P&&(n.i<4||!xX("ES5").K(n)))return n.t;n.I=!0,r=XX(t,o),n.I=!1}else r=XX(t,o);return CX(r,(function(t,o){n&&function(e,t){return 2===TX(e)?e.get(t):e[t]}(n.t,t)===o||RX(r,t,e(o))})),3===o?new Set(r):r}(e)}function XX(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return AX(e)}yX=cX.useSyncExternalStoreWithSelector,pX=yX,(e=>{mX=e})(lX.useSyncExternalStore),_X=Kn.unstable_batchedUpdates,uX=_X;var JX,eJ,tJ="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),rJ="undefined"!=typeof Map,nJ="undefined"!=typeof Set,oJ="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,iJ=tJ?Symbol.for("immer-nothing"):((JX={})["immer-nothing"]=!0,JX),sJ=tJ?Symbol.for("immer-draftable"):"__$immer_draftable",aJ=tJ?Symbol.for("immer-state"):"__$immer_state",lJ=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),cJ="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uJ=Object.getOwnPropertyDescriptors||function(e){var t={};return cJ(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},dJ={},hJ={get:function(e,t){if(t===aJ)return e;var r=PX(e);if(!wX(r,t))return function(e,t,r){var n,o=WX(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!SX(n)?n:n===VX(e.t,t)?(KX(e),e.o[t]=$X(e.A.h,n,e)):n},has:function(e,t){return t in PX(e)},ownKeys:function(e){return Reflect.ownKeys(PX(e))},set:function(e,t,r){var n=WX(PX(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=VX(PX(e),t),i=null==o?void 0:o[aJ];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(kX(r,o)&&(void 0!==r||wX(e.t,t)))return!0;KX(e),YX(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==VX(e.t,t)||t in e.t?(e.R[t]=!1,KX(e),YX(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=PX(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){bX(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bX(12)}},pJ={};CX(hJ,(function(e,t){pJ[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),pJ.deleteProperty=function(e,t){return pJ.set.call(this,e,t,void 0)},pJ.set=function(e,t,r){return hJ.set.call(this,e[0],t,r,e[0])};var fJ=function(){function e(e){var t=this;this.O=oJ,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(s))}))}}var s;if("function"!=typeof r&&bX(6),void 0!==n&&"function"!=typeof n&&bX(7),SX(e)){var a=jX(t),l=$X(t,e,void 0),c=!0;try{s=r(l),c=!1}finally{c?UX(a):ZX(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return BX(a,n),FX(e,a)}),(function(e){throw UX(a),e})):(BX(a,n),FX(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===iJ&&(s=void 0),t.D&&NX(s,!0),n){var u=[],d=[];xX("Patches").M(e,s,u,d),n(u,d)}return s}bX(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))};var n,o,i=t.produce(e,r,(function(e,t){n=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,o]})):[i,n,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){SX(e)||bX(8),EX(e)&&(e=QX(e));var t=jX(this),r=$X(this,e,void 0);return r[aJ].C=!0,ZX(t),r},t.finishDraft=function(e,t){var r=(e&&e[aJ]).A;return BX(r,t),FX(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!oJ&&bX(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var o=xX("Patches").$;return EX(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),gJ=new fJ,mJ=gJ.produce;gJ.produceWithPatches.bind(gJ),gJ.setAutoFreeze.bind(gJ),gJ.setUseProxies.bind(gJ),gJ.applyPatches.bind(gJ),gJ.createDraft.bind(gJ),gJ.finishDraft.bind(gJ);const vJ=mJ;function _J(e,t,r){return(t=Z_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yJ(Object(r),!0).forEach((function(t){_J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EJ(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var SJ="function"==typeof Symbol&&Symbol.observable||"@@observable",CJ=function(){return Math.random().toString(36).substring(7).split("").join(".")},TJ={INIT:"@@redux/INIT"+CJ(),REPLACE:"@@redux/REPLACE"+CJ(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+CJ()}};function wJ(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(EJ(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(EJ(1));return r(wJ)(e,t)}if("function"!=typeof e)throw new Error(EJ(2));var o=e,i=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(EJ(3));return i}function d(e){if("function"!=typeof e)throw new Error(EJ(4));if(l)throw new Error(EJ(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(EJ(6));t=!1,c();var r=a.indexOf(e);a.splice(r,1),s=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(EJ(7));if(void 0===e.type)throw new Error(EJ(8));if(l)throw new Error(EJ(9));try{l=!0,i=o(i,e)}finally{l=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return h({type:TJ.INIT}),(n={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(EJ(10));o=e,h({type:TJ.REPLACE})}})[SJ]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(EJ(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[SJ]=function(){return this},e},n}function RJ(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:TJ.INIT}))throw new Error(EJ(12));if(void 0===r(void 0,{type:TJ.PROBE_UNKNOWN_ACTION()}))throw new Error(EJ(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},a=0;a<s.length;a++){var l=s[a],c=r[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(EJ(14));o[l]=d,n=n||d!==u}return(n=n||s.length!==Object.keys(e).length)?o:e}}function kJ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function OJ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(EJ(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=kJ.apply(void 0,i)(r.dispatch),bJ(bJ({},r),{},{dispatch:n})}}}function IJ(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var PJ=IJ();PJ.withExtraArgument=IJ;const AJ=PJ;var NJ,LJ=(NJ=function(e,t){return NJ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},NJ(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}NJ(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),MJ=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},xJ=Object.defineProperty,DJ=Object.defineProperties,BJ=Object.getOwnPropertyDescriptors,UJ=Object.getOwnPropertySymbols,ZJ=Object.prototype.hasOwnProperty,jJ=Object.prototype.propertyIsEnumerable,HJ=function(e,t,r){return t in e?xJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},FJ=function(e,t){for(var r in t||(t={}))ZJ.call(t,r)&&HJ(e,r,t[r]);if(UJ)for(var n=0,o=UJ(t);n<o.length;n++)r=o[n],jJ.call(t,r)&&HJ(e,r,t[r]);return e},zJ=function(e,t){return DJ(e,BJ(t))},GJ="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?kJ:kJ.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var qJ=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return LJ(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,MJ([void 0],e[0].concat(this)))):new(t.bind.apply(t,MJ([void 0],e.concat(this))))},t}(Array),VJ=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return LJ(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,MJ([void 0],e[0].concat(this)))):new(t.bind.apply(t,MJ([void 0],e.concat(this))))},t}(Array);function WJ(e){return SX(e)?vJ(e,(function(){})):e}function YJ(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return FJ(FJ({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function KJ(e){var t,r={},n=[],o={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,o},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[r,n,t]}var $J=["name","message","stack","code"],QJ=function(e,t){this.payload=e,this.meta=t},XJ=function(e,t){this.payload=e,this.meta=t},JJ=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=$J;r<n.length;r++){var o=n[r];"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function e0(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,r){var n=YJ(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:zJ(FJ({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),o=YJ(e+"/pending",(function(e,t,r){return{payload:void 0,meta:zJ(FJ({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=YJ(e+"/rejected",(function(e,t,n,o,i){return{payload:o,error:(r&&r.serializeError||JJ)(e||"Rejected"),meta:zJ(FJ({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(a,l,c){var u,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),h=new s;function p(e){u=e,h.abort()}var f=function(){return s=this,f=null,g=function(){var s,f,g,m,v,_;return function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),null===(b=m=null==(s=null==r?void 0:r.condition)?void 0:s.call(r,e,{getState:l,extra:c}))||"object"!=typeof b||"function"!=typeof b.then?[3,2]:[4,m];case 1:m=y.sent(),y.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:u||"Aborted"})}))})),a(o(d,e,null==(f=null==r?void 0:r.getPendingMeta)?void 0:f.call(r,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:d,signal:h.signal,abort:p,rejectWithValue:function(e,t){return new QJ(e,t)},fulfillWithValue:function(e,t){return new XJ(e,t)}})).then((function(t){if(t instanceof QJ)throw t;return t instanceof XJ?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return g=y.sent(),[3,5];case 4:return _=y.sent(),g=_ instanceof QJ?i(null,d,e,_.payload,_.meta):i(_,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(g)&&g.meta.condition||a(g),[2,g]}var b}))},new Promise((function(e,t){var r=function(e){try{o(g.next(e))}catch(e){t(e)}},n=function(e){try{o(g.throw(e))}catch(e){t(e)}},o=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(r,n)};o((g=g.apply(s,f)).next())}));var s,f,g}();return Object.assign(f,{abort:p,requestId:d,arg:e,unwrap:function(){return f.then(e0)}})}}),{pending:o,rejected:i,fulfilled:n,typePrefix:e})}e.withTypes=function(){return e}}(),Object.assign;var t0="listenerMiddleware";YJ(t0+"/add"),YJ(t0+"/removeAll"),YJ(t0+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:globalThis);"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,function(){function e(e,t){var r=o[e];return r?r.enumerable=t:o[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[aJ];return hJ.get(t,e)},set:function(t){var r=this[aJ];hJ.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][aJ];if(!o.P)switch(o.i){case 5:n(o)&&YX(o);break;case 4:r(o)&&YX(o)}}}function r(e){for(var t=e.t,r=e.k,n=cJ(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==aJ){var s=t[i];if(void 0===s&&!wX(t,i))return!0;var a=r[i],l=a&&a[aJ];if(l?l.t!==s:!kX(a,s))return!0}}var c=!!t[aJ];return n.length!==cJ(t).length+(c?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var o={};!function(e,t){dJ[e]||(dJ[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),o=function(t,r){if(t){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,e(o,!0));return n}var i=uJ(r);delete i[aJ];for(var s=cJ(i),a=0;a<s.length;a++){var l=s[a];i[l]=e(l,t||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:DX(),P:!1,I:!1,R:{},l:r,t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,aJ,{value:i,writable:!0}),o},S:function(e,r,o){o?EX(r)&&r[aJ].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[aJ];if(r){var o=r.t,i=r.k,s=r.R,a=r.i;if(4===a)CX(i,(function(t){t!==aJ&&(void 0!==o[t]||wX(o,t)?s[t]||e(i[t]):(s[t]=!0,YX(r)))})),CX(o,(function(e){void 0!==i[e]||wX(i,e)||(s[e]=!1,YX(r))}));else if(5===a){if(n(r)&&(YX(r),s.length=!0),i.length<o.length)for(var l=i.length;l<o.length;l++)s[l]=!1;else for(var c=o.length;c<i.length;c++)s[c]=!0;for(var u=Math.min(i.length,o.length),d=0;d<u;d++)i.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}();var r0=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:WJ(e.initialState),o=e.reducers||{},i=Object.keys(o),s={},a={},l={};function c(){var t="function"==typeof e.extraReducers?KJ(e.extraReducers):[e.extraReducers],r=t[0],o=void 0===r?{}:r,i=t[1],s=void 0===i?[]:i,l=t[2],c=void 0===l?void 0:l,u=FJ(FJ({},o),a);return function(e,t,r,n){void 0===r&&(r=[]);var o,i=KJ(t),s=i[0],a=i[1],l=i[2];if(function(e){return"function"==typeof e}(e))o=function(){return WJ(e())};else{var c=WJ(e);o=function(){return c}}function u(e,t){void 0===e&&(e=o());var r=MJ([s[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if(EX(e))return void 0===(n=r(e,t))?e:n;if(SX(e))return vJ(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return u.getInitialState=o,u}(n,(function(e){for(var t in u)e.addCase(t,u[t]);for(var r=0,n=s;r<n.length;r++){var o=n[r];e.addMatcher(o.matcher,o.reducer)}c&&e.addDefaultCase(c)}))}return i.forEach((function(e){var r,n,i=o[e],c=t+"/"+e;"reducer"in i?(r=i.reducer,n=i.prepare):r=i,s[e]=r,a[c]=r,l[e]=n?YJ(c,n):YJ(c)})),{name:t,reducer:function(e,t){return r||(r=c()),r(e,t)},actions:l,caseReducers:s,getInitialState:function(){return r||(r=c()),r.getInitialState()}}}({name:"homeSlice",initialState:{user:null},reducers:{userData:function(e,t){e.user=t.payload.data}}});r0.actions.userData;const n0=r0.reducer;function o0(e){return o0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o0(e)}function i0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s0=(0,St.ZP)("div")((function(e){return t={display:"flex",flex:"1 1 auto",maxWidth:"100%",paddingTop:64},r=e.theme.breakpoints.up("lg"),n={paddingLeft:280},(r=function(e){var t=function(e,t){if("object"!==o0(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o0(t)?t:String(t)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t;var t,r,n}));const a0=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i0(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,t.useState)(!1),2),r=e[0],n=e[1];return t.createElement(t.Fragment,null,t.createElement(s0,null,t.createElement(lr,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"}},t.createElement(lr,null,t.createElement(Ko,{sx:{m:2,p:2,backgroundColor:ms.palette.neutral[300]},varient:"outlined"},t.createElement(Um,null)),t.createElement(Ko,{sx:{m:2,p:1,backgroundColor:ms.palette.neutral[200]},varient:"outlined"},t.createElement(ug,{sx:{p:2,gap:3,display:"flex",flexDirection:"column"}},t.createElement(lt,null)))))),t.createElement(Ag,{onSidebarOpen:function(){return n(!0)}}),t.createElement(mm,{onClose:function(){return n(!1)},open:r}))};var l0,c0=(l0=[{path:"login",element:t.createElement(tW,null)},{path:"",element:t.createElement(qc,null),children:[{path:"",element:t.createElement(Fr,null)},{path:"about-us",element:t.createElement(dt,null)},{path:"contact-us",element:t.createElement(ht,null)},{path:"404",element:t.createElement(Gt,null)}]},{path:"",element:t.createElement(a0,null),children:[{path:"home",element:t.createElement(zm,null)}]}],function(t){let r;if(E(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;r=t=>({hasErrorBoundary:e(t)})}else r=he;let n,o={},i=I(t.routes,r,void 0,o),s=t.basename||"/",a=_({v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),l=null,c=new Set,u=null,d=null,h=null,p=null!=t.hydrationData,f=P(i,t.history.location,s),g=null;if(null==f){let e=Re(404,{pathname:t.history.location.pathname}),{matches:r,route:n}=we(i);f=r,g={[n.id]:e}}let m,v,y=!(f.some((e=>e.route.lazy))||f.some((e=>e.route.loader))&&null==t.hydrationData),b={historyAction:t.history.action,location:t.history.location,matches:f,initialized:y,navigation:se,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||g,fetchers:new Map,blockers:new Map},C=e.Pop,w=!1,R=!1,O=!1,A=[],N=[],L=new Map,M=0,x=-1,D=new Map,B=new Set,U=new Map,Z=new Map,j=new Map,H=!1;function F(e){b=_({},b,e),c.forEach((e=>e(b)))}function z(r,o){var s,a;let l,c=null!=b.actionData&&null!=b.navigation.formMethod&&Ne(b.navigation.formMethod)&&"loading"===b.navigation.state&&!0!==(null==(s=r.state)?void 0:s._isRedirect);l=o.actionData?Object.keys(o.actionData).length>0?o.actionData:null:c?b.actionData:null;let u=o.loaderData?Ce(b.loaderData,o.loaderData,o.matches||[],o.errors):b.loaderData;for(let[e]of j)re(e);let d=!0===w||null!=b.navigation.formMethod&&Ne(b.navigation.formMethod)&&!0!==(null==(a=r.state)?void 0:a._isRedirect);n&&(i=n,n=void 0),F(_({},o,{actionData:l,loaderData:u,historyAction:C,location:r,initialized:!0,navigation:se,revalidation:"idle",restoreScrollPosition:ve(r,o.matches||b.matches),preventScrollReset:d,blockers:new Map(b.blockers)})),R||C===e.Pop||(C===e.Push?t.history.push(r,r.state):C===e.Replace&&t.history.replace(r,r.state)),C=e.Pop,w=!1,R=!1,O=!1,A=[],N=[]}async function q(a,l,c){v&&v.abort(),v=null,C=a,R=!0===(c&&c.startUninterruptedRevalidation),function(e,t){if(u&&d&&h){let r=t.map((e=>De(e,b.loaderData))),n=d(e,r)||e.key;u[n]=h()}}(b.location,b.matches),w=!0===(c&&c.preventScrollReset);let p=n||i,f=c&&c.overrideNavigation,g=P(p,l,s);if(!g){let e=Re(404,{pathname:l.pathname}),{matches:t,route:r}=we(p);return me(),void z(l,{matches:t,loaderData:{},errors:{[r.id]:e}})}if(b.initialized&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}(b.location,l)&&!(c&&c.submission&&Ne(c.submission.formMethod)))return void z(l,{matches:g});v=new AbortController;let m,y,E=be(t.history,l,v.signal,c&&c.submission);if(c&&c.pendingError)y={[Te(g).route.id]:c.pendingError};else if(c&&c.submission&&Ne(c.submission.formMethod)){let t=await async function(t,n,i,a,l){let c;K(),F({navigation:_({state:"submitting",location:n},i)});let u=Be(a,n);if(u.route.action||u.route.lazy){if(c=await ye("action",t,u,a,o,r,s),t.signal.aborted)return{shortCircuited:!0}}else c={type:k.error,error:Re(405,{method:t.method,pathname:n.pathname,routeId:u.route.id})};if(Ae(c)){let e;return e=l&&null!=l.replace?l.replace:c.location===b.location.pathname+b.location.search,await W(b,c,{submission:i,replace:e}),{shortCircuited:!0}}if(Pe(c)){let t=Te(a,u.route.id);return!0!==(l&&l.replace)&&(C=e.Push),{pendingActionData:{},pendingActionError:{[t.route.id]:c.error}}}if(Ie(c))throw Re(400,{type:"defer-action"});return{pendingActionData:{[u.route.id]:c.data}}}(E,l,c.submission,g,{replace:c.replace});if(t.shortCircuited)return;m=t.pendingActionData,y=t.pendingActionError,f=_({state:"loading",location:l},c.submission),E=new Request(E.url,{signal:E.signal})}let{shortCircuited:S,loaderData:T,errors:I}=await async function(e,r,o,a,l,c,u,d,h){let p=a;p||(p=_({state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},l));let f=l||c?l||c:p.formMethod&&p.formAction&&p.formData&&p.formEncType?{formMethod:p.formMethod,formAction:p.formAction,formData:p.formData,formEncType:p.formEncType}:void 0,g=n||i,[m,y]=ge(t.history,b,o,f,r,O,A,N,U,g,s,d,h);if(me((e=>!(o&&o.some((t=>t.route.id===e)))||m&&m.some((t=>t.route.id===e)))),0===m.length&&0===y.length){let e=ee();return z(r,_({matches:o,loaderData:{},errors:h||null},d?{actionData:d}:{},e?{fetchers:new Map(b.fetchers)}:{})),{shortCircuited:!0}}if(!R){y.forEach((e=>{let t=b.fetchers.get(e.key),r={state:"loading",data:t&&t.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};b.fetchers.set(e.key,r)}));let e=d||b.actionData;F(_({navigation:p},e?0===Object.keys(e).length?{actionData:null}:{actionData:e}:{},y.length>0?{fetchers:new Map(b.fetchers)}:{}))}x=++M,y.forEach((e=>{e.controller&&L.set(e.key,e.controller)}));let E=()=>y.forEach((e=>X(e.key)));v&&v.signal.addEventListener("abort",E);let{results:S,loaderResults:C,fetcherResults:T}=await Y(b.matches,o,m,y,e);if(e.signal.aborted)return{shortCircuited:!0};v&&v.signal.removeEventListener("abort",E),y.forEach((e=>L.delete(e.key)));let w=ke(S);if(w)return await W(b,w,{replace:u}),{shortCircuited:!0};let{loaderData:k,errors:I}=Se(b,o,m,C,h,y,T,Z);Z.forEach(((e,t)=>{e.subscribe((r=>{(r||e.done)&&Z.delete(t)}))}));let P=ee(),D=te(x);return _({loaderData:k,errors:I},P||D||y.length>0?{fetchers:new Map(b.fetchers)}:{})}(E,l,g,f,c&&c.submission,c&&c.fetcherSubmission,c&&c.replace,m,y);S||(v=null,z(l,_({matches:g},m?{actionData:m}:{},{loaderData:T,errors:I})))}function V(e){return b.fetchers.get(e)||ae}async function W(r,n,o){var i;let{submission:a,replace:l,isFetchActionRedirect:c}=void 0===o?{}:o;n.revalidate&&(O=!0);let u=T(r.location,n.location,_({_isRedirect:!0},c?{_isFetchActionRedirect:!0}:{}));if(E(u,"Expected a location on the redirect navigation"),ce.test(n.location)&&ue&&void 0!==(null==(i=window)?void 0:i.location)){let e=t.history.createURL(n.location),r=null==G(e.pathname,s);if(window.location.origin!==e.origin||r)return void(l?window.location.replace(n.location):window.location.assign(n.location))}v=null;let d=!0===l?e.Replace:e.Push,{formMethod:h,formAction:p,formEncType:f,formData:g}=r.navigation;!a&&h&&p&&g&&f&&(a={formMethod:h,formAction:p,formEncType:f,formData:g}),ie.has(n.status)&&a&&Ne(a.formMethod)?await q(d,u,{submission:_({},a,{formAction:n.location}),preventScrollReset:w}):c?await q(d,u,{overrideNavigation:{state:"loading",location:u,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:a,preventScrollReset:w}):await q(d,u,{overrideNavigation:{state:"loading",location:u,formMethod:a?a.formMethod:void 0,formAction:a?a.formAction:void 0,formEncType:a?a.formEncType:void 0,formData:a?a.formData:void 0},preventScrollReset:w})}async function Y(e,n,i,a,l){let c=await Promise.all([...i.map((e=>ye("loader",l,e,n,o,r,s))),...a.map((e=>e.matches&&e.match&&e.controller?ye("loader",be(t.history,e.path,e.controller.signal),e.match,e.matches,o,r,s):{type:k.error,error:Re(404,{pathname:e.path})}))]),u=c.slice(0,i.length),d=c.slice(i.length);return await Promise.all([Le(e,i,u,u.map((()=>l.signal)),!1,b.loaderData),Le(e,a.map((e=>e.match)),d,a.map((e=>e.controller?e.controller.signal:null)),!0)]),{results:c,loaderResults:u,fetcherResults:d}}function K(){O=!0,A.push(...me()),U.forEach(((e,t)=>{L.has(t)&&(N.push(t),X(t))}))}function $(e,t,r){let n=Te(b.matches,t);Q(e),F({errors:{[n.route.id]:r},fetchers:new Map(b.fetchers)})}function Q(e){L.has(e)&&X(e),U.delete(e),D.delete(e),B.delete(e),b.fetchers.delete(e)}function X(e){let t=L.get(e);E(t,"Expected fetch controller: "+e),t.abort(),L.delete(e)}function J(e){for(let t of e){let e={state:"idle",data:V(t).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};b.fetchers.set(t,e)}}function ee(){let e=[],t=!1;for(let r of B){let n=b.fetchers.get(r);E(n,"Expected fetcher: "+r),"loading"===n.state&&(B.delete(r),e.push(r),t=!0)}return J(e),t}function te(e){let t=[];for(let[r,n]of D)if(n<e){let e=b.fetchers.get(r);E(e,"Expected fetcher: "+r),"loading"===e.state&&(X(r),D.delete(r),t.push(r))}return J(t),t.length>0}function re(e){b.blockers.delete(e),j.delete(e)}function ne(e,t){let r=b.blockers.get(e)||le;E("unblocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"proceeding"===t.state||"blocked"===r.state&&"unblocked"===t.state||"proceeding"===r.state&&"unblocked"===t.state,"Invalid blocker state transition: "+r.state+" -> "+t.state),b.blockers.set(e,t),F({blockers:new Map(b.blockers)})}function oe(e){let{currentLocation:t,nextLocation:r,historyAction:n}=e;if(0===j.size)return;j.size>1&&S(!1,"A router only supports one blocker at a time");let o=Array.from(j.entries()),[i,s]=o[o.length-1],a=b.blockers.get(i);return a&&"proceeding"===a.state?void 0:s({currentLocation:t,nextLocation:r,historyAction:n})?i:void 0}function me(e){let t=[];return Z.forEach(((r,n)=>{e&&!e(n)||(r.cancel(),t.push(n),Z.delete(n))})),t}function ve(e,t){if(u&&d&&h){let r=t.map((e=>De(e,b.loaderData))),n=d(e,r)||e.key,o=u[n];if("number"==typeof o)return o}return null}return m={get basename(){return s},get state(){return b},get routes(){return i},initialize:function(){return l=t.history.listen((e=>{let{action:r,location:n,delta:o}=e;if(H)return void(H=!1);S(0===j.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let i=oe({currentLocation:b.location,nextLocation:n,historyAction:r});return i&&null!=o?(H=!0,t.history.go(-1*o),void ne(i,{state:"blocked",location:n,proceed(){ne(i,{state:"proceeding",proceed:void 0,reset:void 0,location:n}),t.history.go(o)},reset(){re(i),F({blockers:new Map(m.state.blockers)})}})):q(r,n)})),b.initialized||q(e.Pop,b.location),m},subscribe:function(e){return c.add(e),()=>c.delete(e)},enableScrollRestoration:function(e,t,r){if(u=e,h=t,d=r||(e=>e.key),!p&&b.navigation===se){p=!0;let e=ve(b.location,b.matches);null!=e&&F({restoreScrollPosition:e})}return()=>{u=null,h=null,d=null}},navigate:async function r(n,o){if("number"==typeof n)return void t.history.go(n);let i=pe(b.location,b.matches,s,a.v7_prependBasename,n,null==o?void 0:o.fromRouteId,null==o?void 0:o.relative),{path:l,submission:c,error:u}=fe(a.v7_normalizeFormMethod,!1,i,o),d=b.location,h=T(b.location,l,o&&o.state);h=_({},h,t.history.encodeLocation(h));let p=o&&null!=o.replace?o.replace:void 0,f=e.Push;!0===p?f=e.Replace:!1===p||null!=c&&Ne(c.formMethod)&&c.formAction===b.location.pathname+b.location.search&&(f=e.Replace);let g=o&&"preventScrollReset"in o?!0===o.preventScrollReset:void 0,m=oe({currentLocation:d,nextLocation:h,historyAction:f});if(!m)return await q(f,h,{submission:c,pendingError:u,preventScrollReset:g,replace:o&&o.replace});ne(m,{state:"blocked",location:h,proceed(){ne(m,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),r(n,o)},reset(){re(m),F({blockers:new Map(b.blockers)})}})},fetch:function(e,l,c,u){if(de)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");L.has(e)&&X(e);let d=n||i,h=pe(b.location,b.matches,s,a.v7_prependBasename,c,l,null==u?void 0:u.relative),p=P(d,h,s);if(!p)return void $(e,l,Re(404,{pathname:h}));let{path:f,submission:g}=fe(a.v7_normalizeFormMethod,!0,h,u),m=Be(p,f);w=!0===(u&&u.preventScrollReset),g&&Ne(g.formMethod)?async function(e,a,l,c,u,d){if(K(),U.delete(e),!c.route.action&&!c.route.lazy){let t=Re(405,{method:d.formMethod,pathname:l,routeId:a});return void $(e,a,t)}let h=b.fetchers.get(e),p=_({state:"submitting"},d,{data:h&&h.data," _hasFetcherDoneAnything ":!0});b.fetchers.set(e,p),F({fetchers:new Map(b.fetchers)});let f=new AbortController,g=be(t.history,l,f.signal,d);L.set(e,f);let m=await ye("action",g,c,u,o,r,s);if(g.signal.aborted)return void(L.get(e)===f&&L.delete(e));if(Ae(m)){L.delete(e),B.add(e);let t=_({state:"loading"},d,{data:void 0," _hasFetcherDoneAnything ":!0});return b.fetchers.set(e,t),F({fetchers:new Map(b.fetchers)}),W(b,m,{submission:d,isFetchActionRedirect:!0})}if(Pe(m))return void $(e,a,m.error);if(Ie(m))throw Re(400,{type:"defer-action"});let y=b.navigation.location||b.location,S=be(t.history,y,f.signal),T=n||i,w="idle"!==b.navigation.state?P(T,b.navigation.location,s):b.matches;E(w,"Didn't find any matches after fetcher action");let R=++M;D.set(e,R);let k=_({state:"loading",data:m.data},d,{" _hasFetcherDoneAnything ":!0});b.fetchers.set(e,k);let[I,j]=ge(t.history,b,w,d,y,O,A,N,U,T,s,{[c.route.id]:m.data},void 0);j.filter((t=>t.key!==e)).forEach((e=>{let t=e.key,r=b.fetchers.get(t),n={state:"loading",data:r&&r.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};b.fetchers.set(t,n),e.controller&&L.set(t,e.controller)})),F({fetchers:new Map(b.fetchers)});let H=()=>j.forEach((e=>X(e.key)));f.signal.addEventListener("abort",H);let{results:G,loaderResults:q,fetcherResults:V}=await Y(b.matches,w,I,j,S);if(f.signal.aborted)return;f.signal.removeEventListener("abort",H),D.delete(e),L.delete(e),j.forEach((e=>L.delete(e.key)));let Q=ke(G);if(Q)return W(b,Q);let{loaderData:J,errors:ee}=Se(b,b.matches,I,q,void 0,j,V,Z),re={state:"idle",data:m.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};b.fetchers.set(e,re);let ne=te(R);"loading"===b.navigation.state&&R>x?(E(C,"Expected pending action"),v&&v.abort(),z(b.navigation.location,{matches:w,loaderData:J,errors:ee,fetchers:new Map(b.fetchers)})):(F(_({errors:ee,loaderData:Ce(b.loaderData,J,w,ee)},ne?{fetchers:new Map(b.fetchers)}:{})),O=!1)}(e,l,f,m,p,g):(U.set(e,{routeId:l,path:f}),async function(e,n,i,a,l,c){let u=b.fetchers.get(e),d=_({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},c,{data:u&&u.data," _hasFetcherDoneAnything ":!0});b.fetchers.set(e,d),F({fetchers:new Map(b.fetchers)});let h=new AbortController,p=be(t.history,i,h.signal);L.set(e,h);let f=await ye("loader",p,a,l,o,r,s);if(Ie(f)&&(f=await Me(f,p.signal,!0)||f),L.get(e)===h&&L.delete(e),p.signal.aborted)return;if(Ae(f))return B.add(e),void await W(b,f);if(Pe(f)){let t=Te(b.matches,n);return b.fetchers.delete(e),void F({fetchers:new Map(b.fetchers),errors:{[t.route.id]:f.error}})}E(!Ie(f),"Unhandled fetcher deferred data");let g={state:"idle",data:f.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};b.fetchers.set(e,g),F({fetchers:new Map(b.fetchers)})}(e,l,f,m,p,g))},revalidate:function(){K(),F({revalidation:"loading"}),"submitting"!==b.navigation.state&&("idle"!==b.navigation.state?q(C||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation}):q(b.historyAction,b.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:V,deleteFetcher:Q,dispose:function(){l&&l(),c.clear(),v&&v.abort(),b.fetchers.forEach(((e,t)=>Q(t))),b.blockers.forEach(((e,t)=>re(t)))},getBlocker:function(e,t){let r=b.blockers.get(e)||le;return j.get(e)!==t&&j.set(e,t),r},deleteBlocker:re,_internalFetchControllers:L,_internalActiveDeferreds:Z,_internalSetRoutes:function(e){o={},n=I(e,r,void 0,o)}},m}({basename:void 0,future:xt({},void 0,{v7_prependBasename:!0}),history:b({window:void 0}),hydrationData:Bt(),routes:l0,mapRouteProperties:ut}).initialize()),u0=function(){return t.createElement(st,{router:c0})};u0.propTypes={},u0.defaultProps={};const d0=u0,h0=function(){var e=function(e){e.preventDefault()};return t.createElement("div",{className:"App",onContextMenu:e,onCopy:e,onCut:e,onPaste:e},t.createElement(rn.a,{theme:ms},t.createElement(d0,null)))};var p0=function(e){var t,r=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,new qJ);return r&&(function(e){return"boolean"==typeof e}(r)?n.push(AJ):n.push(AJ.withExtraArgument(r.extraArgument))),n}(e)},n=e||{},o=n.reducer,i=void 0===o?void 0:o,s=n.middleware,a=void 0===s?r():s,l=n.devTools,c=void 0===l||l,u=n.preloadedState,d=void 0===u?void 0:u,h=n.enhancers,p=void 0===h?void 0:h;if("function"==typeof i)t=i;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=RJ(i)}var f=a;"function"==typeof f&&(f=f(r));var g=OJ.apply(void 0,f),m=kJ;c&&(m=GJ(FJ({trace:!1},"object"==typeof c&&c)));var v=new VJ(g),_=v;return Array.isArray(p)?_=MJ([g],p):"function"==typeof p&&(_=p(v)),wJ(t,d,m.apply(void 0,_))}({reducer:RJ({bootstrapSlice:n0})});const f0=p0;var g0=__webpack_require__(1383),m0={};m0.styleTagTransform=g(),m0.setAttributes=d(),m0.insert=c().bind(null,"head"),m0.domAPI=a(),m0.insertStyleElement=p(),i()(g0.Z,m0),g0.Z&&g0.Z.locals&&g0.Z.locals,n.createRoot(document.getElementById("root")).render(t.createElement(vX,{store:f0},t.createElement(h0,null)))})()})();